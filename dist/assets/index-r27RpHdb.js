var BY=Object.defineProperty;var UY=(t,e,r)=>e in t?BY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var OC=(t,e,r)=>UY(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as zY}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ir(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h5={exports:{}},Tp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC;function $Y(){if(IC)return Tp;IC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:s,ref:i!==void 0?i:null,props:a}}return Tp.Fragment=e,Tp.jsx=r,Tp.jsxs=r,Tp}var RC;function VY(){return RC||(RC=1,h5.exports=$Y()),h5.exports}var c=VY(),f5={exports:{}},Kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MC;function FY(){if(MC)return Kt;MC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function N(X,re,de){this.props=X,this.context=re,this.refs=w,this.updater=de||T}N.prototype.isReactComponent={},N.prototype.setState=function(X,re){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,re,"setState")},N.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function C(){}C.prototype=N.prototype;function k(X,re,de){this.props=X,this.context=re,this.refs=w,this.updater=de||T}var $=k.prototype=new C;$.constructor=k,S($,N.prototype),$.isPureReactComponent=!0;var I=Array.isArray;function L(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(X,re,de){var oe=de.ref;return{$$typeof:t,type:X,key:re,ref:oe!==void 0?oe:null,props:de}}function F(X,re){return R(X.type,re,X.props)}function P(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function B(X){var re={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(de){return re[de]})}var D=/\/+/g;function Q(X,re){return typeof X=="object"&&X!==null&&X.key!=null?B(""+X.key):re.toString(36)}function Z(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(L,L):(X.status="pending",X.then(function(re){X.status==="pending"&&(X.status="fulfilled",X.value=re)},function(re){X.status==="pending"&&(X.status="rejected",X.reason=re)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function W(X,re,de,oe,ae){var pe=typeof X;(pe==="undefined"||pe==="boolean")&&(X=null);var ve=!1;if(X===null)ve=!0;else switch(pe){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(X.$$typeof){case t:case e:ve=!0;break;case p:return ve=X._init,W(ve(X._payload),re,de,oe,ae)}}if(ve)return ae=ae(X),ve=oe===""?"."+Q(X,0):oe,I(ae)?(de="",ve!=null&&(de=ve.replace(D,"$&/")+"/"),W(ae,re,de,"",function(le){return le})):ae!=null&&(P(ae)&&(ae=F(ae,de+(ae.key==null||X&&X.key===ae.key?"":(""+ae.key).replace(D,"$&/")+"/")+ve)),re.push(ae)),1;ve=0;var Qe=oe===""?".":oe+":";if(I(X))for(var Ne=0;Ne<X.length;Ne++)oe=X[Ne],pe=Qe+Q(oe,Ne),ve+=W(oe,re,de,pe,ae);else if(Ne=b(X),typeof Ne=="function")for(X=Ne.call(X),Ne=0;!(oe=X.next()).done;)oe=oe.value,pe=Qe+Q(oe,Ne++),ve+=W(oe,re,de,pe,ae);else if(pe==="object"){if(typeof X.then=="function")return W(Z(X),re,de,oe,ae);throw re=String(X),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ve}function J(X,re,de){if(X==null)return X;var oe=[],ae=0;return W(X,oe,"","",function(pe){return re.call(de,pe,ae++)}),oe}function Y(X){if(X._status===-1){var re=X._result;re=re(),re.then(function(de){(X._status===0||X._status===-1)&&(X._status=1,X._result=de)},function(de){(X._status===0||X._status===-1)&&(X._status=2,X._result=de)}),X._status===-1&&(X._status=0,X._result=re)}if(X._status===1)return X._result.default;throw X._result}var ge=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},ce={map:J,forEach:function(X,re,de){J(X,function(){re.apply(this,arguments)},de)},count:function(X){var re=0;return J(X,function(){re++}),re},toArray:function(X){return J(X,function(re){return re})||[]},only:function(X){if(!P(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Kt.Activity=m,Kt.Children=ce,Kt.Component=N,Kt.Fragment=r,Kt.Profiler=i,Kt.PureComponent=k,Kt.StrictMode=n,Kt.Suspense=d,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return E.H.useMemoCache(X)}},Kt.cache=function(X){return function(){return X.apply(null,arguments)}},Kt.cacheSignal=function(){return null},Kt.cloneElement=function(X,re,de){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var oe=S({},X.props),ae=X.key;if(re!=null)for(pe in re.key!==void 0&&(ae=""+re.key),re)!A.call(re,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&re.ref===void 0||(oe[pe]=re[pe]);var pe=arguments.length-2;if(pe===1)oe.children=de;else if(1<pe){for(var ve=Array(pe),Qe=0;Qe<pe;Qe++)ve[Qe]=arguments[Qe+2];oe.children=ve}return R(X.type,ae,oe)},Kt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Kt.createElement=function(X,re,de){var oe,ae={},pe=null;if(re!=null)for(oe in re.key!==void 0&&(pe=""+re.key),re)A.call(re,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ae[oe]=re[oe]);var ve=arguments.length-2;if(ve===1)ae.children=de;else if(1<ve){for(var Qe=Array(ve),Ne=0;Ne<ve;Ne++)Qe[Ne]=arguments[Ne+2];ae.children=Qe}if(X&&X.defaultProps)for(oe in ve=X.defaultProps,ve)ae[oe]===void 0&&(ae[oe]=ve[oe]);return R(X,pe,ae)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(X){return{$$typeof:l,render:X}},Kt.isValidElement=P,Kt.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:Y}},Kt.memo=function(X,re){return{$$typeof:h,type:X,compare:re===void 0?null:re}},Kt.startTransition=function(X){var re=E.T,de={};E.T=de;try{var oe=X(),ae=E.S;ae!==null&&ae(de,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(L,ge)}catch(pe){ge(pe)}finally{re!==null&&de.types!==null&&(re.types=de.types),E.T=re}},Kt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Kt.use=function(X){return E.H.use(X)},Kt.useActionState=function(X,re,de){return E.H.useActionState(X,re,de)},Kt.useCallback=function(X,re){return E.H.useCallback(X,re)},Kt.useContext=function(X){return E.H.useContext(X)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(X,re){return E.H.useDeferredValue(X,re)},Kt.useEffect=function(X,re){return E.H.useEffect(X,re)},Kt.useEffectEvent=function(X){return E.H.useEffectEvent(X)},Kt.useId=function(){return E.H.useId()},Kt.useImperativeHandle=function(X,re,de){return E.H.useImperativeHandle(X,re,de)},Kt.useInsertionEffect=function(X,re){return E.H.useInsertionEffect(X,re)},Kt.useLayoutEffect=function(X,re){return E.H.useLayoutEffect(X,re)},Kt.useMemo=function(X,re){return E.H.useMemo(X,re)},Kt.useOptimistic=function(X,re){return E.H.useOptimistic(X,re)},Kt.useReducer=function(X,re,de){return E.H.useReducer(X,re,de)},Kt.useRef=function(X){return E.H.useRef(X)},Kt.useState=function(X){return E.H.useState(X)},Kt.useSyncExternalStore=function(X,re,de){return E.H.useSyncExternalStore(X,re,de)},Kt.useTransition=function(){return E.H.useTransition()},Kt.version="19.2.4",Kt}var PC;function Z8(){return PC||(PC=1,f5.exports=FY()),f5.exports}var M=Z8();const te=Ir(M);var p5={exports:{}},Ap={},m5={exports:{}},g5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC;function qY(){return DC||(DC=1,(function(t){function e(W,J){var Y=W.length;W.push(J);e:for(;0<Y;){var ge=Y-1>>>1,ce=W[ge];if(0<i(ce,J))W[ge]=J,W[Y]=ce,Y=ge;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var J=W[0],Y=W.pop();if(Y!==J){W[0]=Y;e:for(var ge=0,ce=W.length,X=ce>>>1;ge<X;){var re=2*(ge+1)-1,de=W[re],oe=re+1,ae=W[oe];if(0>i(de,Y))oe<ce&&0>i(ae,de)?(W[ge]=ae,W[oe]=Y,ge=oe):(W[ge]=de,W[re]=Y,ge=re);else if(oe<ce&&0>i(ae,Y))W[ge]=ae,W[oe]=Y,ge=oe;else break e}}return J}function i(W,J){var Y=W.sortIndex-J.sortIndex;return Y!==0?Y:W.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var d=[],h=[],p=1,m=null,y=3,b=!1,T=!1,S=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function $(W){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=W)n(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=r(h)}}function I(W){if(S=!1,$(W),!T)if(r(d)!==null)T=!0,L||(L=!0,B());else{var J=r(h);J!==null&&Z(I,J.startTime-W)}}var L=!1,E=-1,A=5,R=-1;function F(){return w?!0:!(t.unstable_now()-R<A)}function P(){if(w=!1,L){var W=t.unstable_now();R=W;var J=!0;try{e:{T=!1,S&&(S=!1,C(E),E=-1),b=!0;var Y=y;try{t:{for($(W),m=r(d);m!==null&&!(m.expirationTime>W&&F());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,y=m.priorityLevel;var ce=ge(m.expirationTime<=W);if(W=t.unstable_now(),typeof ce=="function"){m.callback=ce,$(W),J=!0;break t}m===r(d)&&n(d),$(W)}else n(d);m=r(d)}if(m!==null)J=!0;else{var X=r(h);X!==null&&Z(I,X.startTime-W),J=!1}}break e}finally{m=null,y=Y,b=!1}J=void 0}}finally{J?B():L=!1}}}var B;if(typeof k=="function")B=function(){k(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Q=D.port2;D.port1.onmessage=P,B=function(){Q.postMessage(null)}}else B=function(){N(P,0)};function Z(W,J){E=N(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(W){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var Y=y;y=J;try{return W()}finally{y=Y}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Y=y;y=W;try{return J()}finally{y=Y}},t.unstable_scheduleCallback=function(W,J,Y){var ge=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ge+Y:ge):Y=ge,W){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Y+ce,W={id:p++,callback:J,priorityLevel:W,startTime:Y,expirationTime:ce,sortIndex:-1},Y>ge?(W.sortIndex=Y,e(h,W),r(d)===null&&W===r(h)&&(S?(C(E),E=-1):S=!0,Z(I,Y-ge))):(W.sortIndex=ce,e(d,W),T||b||(T=!0,L||(L=!0,B()))),W},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(W){var J=y;return function(){var Y=y;y=J;try{return W.apply(this,arguments)}finally{y=Y}}}})(g5)),g5}var LC;function HY(){return LC||(LC=1,m5.exports=qY()),m5.exports}var y5={exports:{}},Qi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC;function GY(){if(BC)return Qi;BC=1;var t=Z8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Qi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Qi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,p)},Qi.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},Qi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},Qi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Qi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=l(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:b}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Qi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},Qi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=l(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Qi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=l(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},Qi.requestFormReset=function(d){n.d.r(d)},Qi.unstable_batchedUpdates=function(d,h){return d(h)},Qi.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},Qi.useFormStatus=function(){return s.H.useHostTransitionStatus()},Qi.version="19.2.4",Qi}var UC;function _$(){if(UC)return y5.exports;UC=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),y5.exports=GY(),y5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zC;function KY(){if(zC)return Ap;zC=1;var t=HY(),e=Z8(),r=_$();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,f=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(f=u.return),o=u.return;while(o)}return u.tag===3?f:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(n(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(n(188));return u!==o?null:o}for(var f=o,g=u;;){var x=f.return;if(x===null)break;var _=x.alternate;if(_===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===f)return d(x),o;if(_===g)return d(x),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=x,g=_;else{for(var z=!1,H=x.child;H;){if(H===f){z=!0,f=x,g=_;break}if(H===g){z=!0,g=x,f=_;break}H=H.sibling}if(!z){for(H=_.child;H;){if(H===f){z=!0,f=_,g=x;break}if(H===g){z=!0,g=_,f=x;break}H=H.sibling}if(!z)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),k=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function B(o){return o===null||typeof o!="object"?null:(o=P&&o[P]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case L:return"SuspenseList";case R:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case k:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case $:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case E:return u=o.displayName||null,u!==null?u:Q(o.type)||"Memo";case A:u=o._payload,o=o._init;try{return Q(o(u))}catch{}}return null}var Z=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ge=[],ce=-1;function X(o){return{current:o}}function re(o){0>ce||(o.current=ge[ce],ge[ce]=null,ce--)}function de(o,u){ce++,ge[ce]=o.current,o.current=u}var oe=X(null),ae=X(null),pe=X(null),ve=X(null);function Qe(o,u){switch(de(pe,u),de(ae,o),de(oe,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?eC(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=eC(u),o=tC(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}re(oe),de(oe,o)}function Ne(){re(oe),re(ae),re(pe)}function le(o){o.memoizedState!==null&&de(ve,o);var u=oe.current,f=tC(u,o.type);u!==f&&(de(ae,o),de(oe,f))}function we(o){ae.current===o&&(re(oe),re(ae)),ve.current===o&&(re(ve),xp._currentValue=Y)}var xe,ut;function He(o){if(xe===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);xe=u&&u[1]||"",ut=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+o+ut}var ct=!1;function nt(o,u){if(!o||ct)return"";ct=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(Ce){var je=Ce}Reflect.construct(o,[],ze)}else{try{ze.call()}catch(Ce){je=Ce}o.call(ze.prototype)}}else{try{throw Error()}catch(Ce){je=Ce}(ze=o())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(Ce){if(Ce&&je&&typeof Ce.stack=="string")return[Ce.stack,je.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),z=_[0],H=_[1];if(z&&H){var se=z.split(`
`),Ae=H.split(`
`);for(x=g=0;g<se.length&&!se[g].includes("DetermineComponentFrameRoot");)g++;for(;x<Ae.length&&!Ae[x].includes("DetermineComponentFrameRoot");)x++;if(g===se.length||x===Ae.length)for(g=se.length-1,x=Ae.length-1;1<=g&&0<=x&&se[g]!==Ae[x];)x--;for(;1<=g&&0<=x;g--,x--)if(se[g]!==Ae[x]){if(g!==1||x!==1)do if(g--,x--,0>x||se[g]!==Ae[x]){var Pe=`
`+se[g].replace(" at new "," at ");return o.displayName&&Pe.includes("<anonymous>")&&(Pe=Pe.replace("<anonymous>",o.displayName)),Pe}while(1<=g&&0<=x);break}}}finally{ct=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?He(f):""}function Ut(o,u){switch(o.tag){case 26:case 27:case 5:return He(o.type);case 16:return He("Lazy");case 13:return o.child!==u&&u!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return nt(o.type,!1);case 11:return nt(o.type.render,!1);case 1:return nt(o.type,!0);case 31:return He("Activity");default:return""}}function Ie(o){try{var u="",f=null;do u+=Ut(o,f),f=o,o=o.return;while(o);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var st=Object.prototype.hasOwnProperty,pt=t.unstable_scheduleCallback,St=t.unstable_cancelCallback,Xt=t.unstable_shouldYield,ye=t.unstable_requestPaint,We=t.unstable_now,mt=t.unstable_getCurrentPriorityLevel,gt=t.unstable_ImmediatePriority,ot=t.unstable_UserBlockingPriority,Je=t.unstable_NormalPriority,Rt=t.unstable_LowPriority,Yt=t.unstable_IdlePriority,Kr=t.log,ln=t.unstable_setDisableYieldValue,Br=null,ee=null;function Re(o){if(typeof Kr=="function"&&ln(o),ee&&typeof ee.setStrictMode=="function")try{ee.setStrictMode(Br,o)}catch{}}var Ve=Math.clz32?Math.clz32:vr,Gt=Math.log,jt=Math.LN2;function vr(o){return o>>>=0,o===0?32:31-(Gt(o)/jt|0)|0}var dr=256,zt=262144,Pt=4194304;function $t(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function kt(o,u,f){var g=o.pendingLanes;if(g===0)return 0;var x=0,_=o.suspendedLanes,z=o.pingedLanes;o=o.warmLanes;var H=g&134217727;return H!==0?(g=H&~_,g!==0?x=$t(g):(z&=H,z!==0?x=$t(z):f||(f=H&~o,f!==0&&(x=$t(f))))):(H=g&~_,H!==0?x=$t(H):z!==0?x=$t(z):f||(f=g&~o,f!==0&&(x=$t(f)))),x===0?0:u!==0&&u!==x&&(u&_)===0&&(_=x&-x,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:x}function Ur(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function cr(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gn(){var o=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),o}function cn(o){for(var u=[],f=0;31>f;f++)u.push(o);return u}function ei(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function nr(o,u,f,g,x,_){var z=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var H=o.entanglements,se=o.expirationTimes,Ae=o.hiddenUpdates;for(f=z&~f;0<f;){var Pe=31-Ve(f),ze=1<<Pe;H[Pe]=0,se[Pe]=-1;var je=Ae[Pe];if(je!==null)for(Ae[Pe]=null,Pe=0;Pe<je.length;Pe++){var Ce=je[Pe];Ce!==null&&(Ce.lane&=-536870913)}f&=~ze}g!==0&&_i(o,g,0),_!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=_&~(z&~u))}function _i(o,u,f){o.pendingLanes|=u,o.suspendedLanes&=~u;var g=31-Ve(u);o.entangledLanes|=u,o.entanglements[g]=o.entanglements[g]|1073741824|f&261930}function xr(o,u){var f=o.entangledLanes|=u;for(o=o.entanglements;f;){var g=31-Ve(f),x=1<<g;x&u|o[g]&u&&(o[g]|=u),f&=~x}}function yn(o,u){var f=u&-u;return f=(f&42)!==0?1:ia(f),(f&(o.suspendedLanes|u))!==0?0:f}function ia(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function rn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function vn(){var o=J.p;return o!==0?o:(o=window.event,o===void 0?32:TC(o.type))}function aa(o,u){var f=J.p;try{return J.p=o,u()}finally{J.p=f}}var Mn=Math.random().toString(36).slice(2),zr="__reactFiber$"+Mn,un="__reactProps$"+Mn,jn="__reactContainer$"+Mn,xa="__reactEvents$"+Mn,Wi="__reactListeners$"+Mn,ho="__reactHandles$"+Mn,zs="__reactResources$"+Mn,wa="__reactMarker$"+Mn;function vt(o){delete o[zr],delete o[un],delete o[xa],delete o[Wi],delete o[ho]}function he(o){var u=o[zr];if(u)return u;for(var f=o.parentNode;f;){if(u=f[jn]||f[zr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(o=lC(o);o!==null;){if(f=o[zr])return f;o=lC(o)}return u}o=f,f=o.parentNode}return null}function qe(o){if(o=o[zr]||o[jn]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function rt(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function Ft(o){var u=o[zs];return u||(u=o[zs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function sr(o){o[wa]=!0}var dn=new Set,$r={};function hn(o,u){_r(o,u),_r(o+"Capture",u)}function _r(o,u){for($r[o]=u,o=0;o<u.length;o++)dn.add(u[o])}var fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$s={},qo={};function ku(o){return st.call(qo,o)?!0:st.call($s,o)?!1:fo.test(o)?qo[o]=!0:($s[o]=!0,!1)}function Vs(o,u,f){if(ku(u))if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+f)}}function Fs(o,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+f)}}function sa(o,u,f,g){if(g===null)o.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(u,f,""+g)}}function Si(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Cu(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function l0(o,u,f){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,_=g.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return x.call(this)},set:function(z){f=""+z,_.call(this,z)}}),Object.defineProperty(o,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(z){f=""+z},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ho(o){if(!o._valueTracker){var u=Cu(o)?"checked":"value";o._valueTracker=l0(o,u,""+o[u])}}function rc(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return o&&(g=Cu(o)?o.checked?"true":"false":o.value),o=g,o!==f?(u.setValue(o),!0):!1}function Go(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var ps=/[\n"\\]/g;function ue(o){return o.replace(ps,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function ke(o,u,f,g,x,_,z,H){o.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?o.type=z:o.removeAttribute("type"),u!=null?z==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Si(u)):o.value!==""+Si(u)&&(o.value=""+Si(u)):z!=="submit"&&z!=="reset"||o.removeAttribute("value"),u!=null?et(o,z,Si(u)):f!=null?et(o,z,Si(f)):g!=null&&o.removeAttribute("value"),x==null&&_!=null&&(o.defaultChecked=!!_),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+Si(H):o.removeAttribute("name")}function Fe(o,u,f,g,x,_,z,H){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Ho(o);return}f=f!=null?""+Si(f):"",u=u!=null?""+Si(u):f,H||u===o.value||(o.value=u),o.defaultValue=u}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=H?o.checked:!!g,o.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(o.name=z),Ho(o)}function et(o,u,f){u==="number"&&Go(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Xe(o,u,f,g){if(o=o.options,u){u={};for(var x=0;x<f.length;x++)u["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=u.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&g&&(o[f].defaultSelected=!0)}else{for(f=""+Si(f),u=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}u!==null||o[x].disabled||(u=o[x])}u!==null&&(u.selected=!0)}}function ur(o,u,f){if(u!=null&&(u=""+Si(u),u!==o.value&&(o.value=u),f==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=f!=null?""+Si(f):""}function Jt(o,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(Z(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=Si(u),o.defaultValue=f,g=o.textContent,g===f&&g!==""&&g!==null&&(o.value=g),Ho(o)}function Wr(o,u){if(u){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=u;return}}o.textContent=u}var Mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _a(o,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":g?o.setProperty(u,f):typeof f!="number"||f===0||Mi.has(u)?u==="float"?o.cssFloat=f:o[u]=(""+f).trim():o[u]=f+"px"}function nc(o,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in u)g=u[x],u.hasOwnProperty(x)&&f[x]!==g&&_a(o,x,g)}else for(var _ in u)u.hasOwnProperty(_)&&_a(o,_,u[_])}function Ko(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ou=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sa(o){return Tr.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Fn(){}var c0=null;function u0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Wo=null,Ha=null;function S1(o){var u=qe(o);if(u&&(o=u.stateNode)){var f=o[un]||null;e:switch(o=u.stateNode,u.type){case"input":if(ke(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+ue(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==o&&g.form===o.form){var x=g[un]||null;if(!x)throw Error(n(90));ke(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===o.form&&rc(g)}break e;case"textarea":ur(o,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&Xe(o,!!f.multiple,u,!1)}}}var Df=!1;function T1(o,u,f){if(Df)return o(u,f);Df=!0;try{var g=o(u);return g}finally{if(Df=!1,(Wo!==null||Ha!==null)&&(xy(),Wo&&(u=Wo,o=Ha,Ha=Wo=null,S1(u),o)))for(u=0;u<o.length;u++)S1(o[u])}}function Ta(o,u){var f=o.stateNode;if(f===null)return null;var g=f[un]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lf=!1;if(qs)try{var po={};Object.defineProperty(po,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",po,po),window.removeEventListener("test",po,po)}catch{Lf=!1}var Ga=null,d0=null,mo=null;function ic(){if(mo)return mo;var o,u=d0,f=u.length,g,x="value"in Ga?Ga.value:Ga.textContent,_=x.length;for(o=0;o<f&&u[o]===x[o];o++);var z=f-o;for(g=1;g<=z&&u[f-g]===x[_-g];g++);return mo=x.slice(o,1<g?1-g:void 0)}function Iu(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function ac(){return!0}function bn(){return!1}function Xi(o){function u(f,g,x,_,z){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=_,this.target=z,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(f=o[H],this[H]=f?f(_):_[H]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ac:bn,this.isPropagationStopped=bn,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),u}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ru=Xi(Xo),sc=m({},Xo,{view:0,detail:0}),A1=Xi(sc),oc,h0,oa,Mu=m({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==oa&&(oa&&o.type==="mousemove"?(oc=o.screenX-oa.screenX,h0=o.screenY-oa.screenY):h0=oc=0,oa=o),oc)},movementY:function(o){return"movementY"in o?o.movementY:h0}}),E1=Xi(Mu),Pu=m({},Mu,{dataTransfer:0}),N1=Xi(Pu),Bf=m({},sc,{relatedTarget:0}),lc=Xi(Bf),j1=m({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Xi(j1),v4=m({},Xo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),k1=Xi(v4),Du=m({},Xo,{data:0}),Uf=Xi(Du),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$f={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O1(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=$f[o])?!!u[o]:!1}function cc(){return O1}var I1=m({},sc,{key:function(o){if(o.key){var u=C1[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=Iu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?zf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(o){return o.type==="keypress"?Iu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Iu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),R1=Xi(I1),Qo=m({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vf=Xi(Qo),M1=m({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),P1=Xi(M1),D1=m({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),p0=Xi(D1),la=m({},Mu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),L1=Xi(la),B1=m({},Xo,{newState:0,oldState:0}),uc=Xi(B1),v=[9,13,27,32],O=qs&&"CompositionEvent"in window,V=null;qs&&"documentMode"in document&&(V=document.documentMode);var K=qs&&"TextEvent"in window&&!V,_e=qs&&(!O||V&&8<V&&11>=V),Oe=" ",it=!1;function Rr(o,u){switch(o){case"keyup":return v.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ti(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var or=!1;function Ti(o,u){switch(o){case"compositionend":return ti(u);case"keypress":return u.which!==32?null:(it=!0,Oe);case"textInput":return o=u.data,o===Oe&&it?null:o;default:return null}}function Ai(o,u){if(or)return o==="compositionend"||!O&&Rr(o,u)?(o=ic(),mo=d0=Ga=null,or=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var dc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Aa(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!dc[o.type]:u==="textarea"}function Lu(o,u,f,g){Wo?Ha?Ha.push(g):Ha=[g]:Wo=g,u=Ny(u,"onChange"),0<u.length&&(f=new Ru("onChange","change",null,f,g),o.push({event:f,listeners:u}))}var Yo=null,Ff=null;function dQ(o){Wk(o,0)}function U1(o){var u=rt(o);if(rc(u))return o}function f9(o,u){if(o==="change")return u}var p9=!1;if(qs){var b4;if(qs){var x4="oninput"in document;if(!x4){var m9=document.createElement("div");m9.setAttribute("oninput","return;"),x4=typeof m9.oninput=="function"}b4=x4}else b4=!1;p9=b4&&(!document.documentMode||9<document.documentMode)}function g9(){Yo&&(Yo.detachEvent("onpropertychange",y9),Ff=Yo=null)}function y9(o){if(o.propertyName==="value"&&U1(Ff)){var u=[];Lu(u,Ff,o,u0(o)),T1(dQ,u)}}function hQ(o,u,f){o==="focusin"?(g9(),Yo=u,Ff=f,Yo.attachEvent("onpropertychange",y9)):o==="focusout"&&g9()}function fQ(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return U1(Ff)}function pQ(o,u){if(o==="click")return U1(u)}function mQ(o,u){if(o==="input"||o==="change")return U1(u)}function gQ(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Ka=typeof Object.is=="function"?Object.is:gQ;function qf(o,u){if(Ka(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var f=Object.keys(o),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!st.call(u,x)||!Ka(o[x],u[x]))return!1}return!0}function v9(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function b9(o,u){var f=v9(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=u&&g>=u)return{node:f,offset:u-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=v9(f)}}function x9(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?x9(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function w9(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Go(o.document);u instanceof o.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)o=u.contentWindow;else break;u=Go(o.document)}return u}function w4(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var yQ=qs&&"documentMode"in document&&11>=document.documentMode,m0=null,_4=null,Hf=null,S4=!1;function _9(o,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;S4||m0==null||m0!==Go(g)||(g=m0,"selectionStart"in g&&w4(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Hf&&qf(Hf,g)||(Hf=g,g=Ny(_4,"onSelect"),0<g.length&&(u=new Ru("onSelect","select",null,u,f),o.push({event:u,listeners:g}),u.target=m0)))}function Bu(o,u){var f={};return f[o.toLowerCase()]=u.toLowerCase(),f["Webkit"+o]="webkit"+u,f["Moz"+o]="moz"+u,f}var g0={animationend:Bu("Animation","AnimationEnd"),animationiteration:Bu("Animation","AnimationIteration"),animationstart:Bu("Animation","AnimationStart"),transitionrun:Bu("Transition","TransitionRun"),transitionstart:Bu("Transition","TransitionStart"),transitioncancel:Bu("Transition","TransitionCancel"),transitionend:Bu("Transition","TransitionEnd")},T4={},S9={};qs&&(S9=document.createElement("div").style,"AnimationEvent"in window||(delete g0.animationend.animation,delete g0.animationiteration.animation,delete g0.animationstart.animation),"TransitionEvent"in window||delete g0.transitionend.transition);function Uu(o){if(T4[o])return T4[o];if(!g0[o])return o;var u=g0[o],f;for(f in u)if(u.hasOwnProperty(f)&&f in S9)return T4[o]=u[f];return o}var T9=Uu("animationend"),A9=Uu("animationiteration"),E9=Uu("animationstart"),vQ=Uu("transitionrun"),bQ=Uu("transitionstart"),xQ=Uu("transitioncancel"),N9=Uu("transitionend"),j9=new Map,A4="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");A4.push("scrollEnd");function Hs(o,u){j9.set(o,u),hn(u,[o])}var z1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ms=[],y0=0,E4=0;function $1(){for(var o=y0,u=E4=y0=0;u<o;){var f=ms[u];ms[u++]=null;var g=ms[u];ms[u++]=null;var x=ms[u];ms[u++]=null;var _=ms[u];if(ms[u++]=null,g!==null&&x!==null){var z=g.pending;z===null?x.next=x:(x.next=z.next,z.next=x),g.pending=x}_!==0&&k9(f,x,_)}}function V1(o,u,f,g){ms[y0++]=o,ms[y0++]=u,ms[y0++]=f,ms[y0++]=g,E4|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function N4(o,u,f,g){return V1(o,u,f,g),F1(o)}function zu(o,u){return V1(o,null,null,u),F1(o)}function k9(o,u,f){o.lanes|=f;var g=o.alternate;g!==null&&(g.lanes|=f);for(var x=!1,_=o.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(x=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,x&&u!==null&&(x=31-Ve(f),o=_.hiddenUpdates,g=o[x],g===null?o[x]=[u]:g.push(u),u.lane=f|536870912),_):null}function F1(o){if(50<fp)throw fp=0,Dw=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var v0={};function wQ(o,u,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wa(o,u,f,g){return new wQ(o,u,f,g)}function j4(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Zo(o,u){var f=o.alternate;return f===null?(f=Wa(o.tag,u,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=u,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,u=o.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function C9(o,u){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,u=f.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function q1(o,u,f,g,x,_){var z=0;if(g=o,typeof o=="function")j4(o)&&(z=1);else if(typeof o=="string")z=EY(o,f,oe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case R:return o=Wa(31,f,u,x),o.elementType=R,o.lanes=_,o;case S:return $u(f.children,x,_,u);case w:z=8,x|=24;break;case N:return o=Wa(12,f,u,x|2),o.elementType=N,o.lanes=_,o;case I:return o=Wa(13,f,u,x),o.elementType=I,o.lanes=_,o;case L:return o=Wa(19,f,u,x),o.elementType=L,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case k:z=10;break e;case C:z=9;break e;case $:z=11;break e;case E:z=14;break e;case A:z=16,g=null;break e}z=29,f=Error(n(130,o===null?"null":typeof o,"")),g=null}return u=Wa(z,f,u,x),u.elementType=o,u.type=g,u.lanes=_,u}function $u(o,u,f,g){return o=Wa(7,o,g,u),o.lanes=f,o}function k4(o,u,f){return o=Wa(6,o,null,u),o.lanes=f,o}function O9(o){var u=Wa(18,null,null,0);return u.stateNode=o,u}function C4(o,u,f){return u=Wa(4,o.children!==null?o.children:[],o.key,u),u.lanes=f,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var I9=new WeakMap;function gs(o,u){if(typeof o=="object"&&o!==null){var f=I9.get(o);return f!==void 0?f:(u={value:o,source:u,stack:Ie(u)},I9.set(o,u),u)}return{value:o,source:u,stack:Ie(u)}}var b0=[],x0=0,H1=null,Gf=0,ys=[],vs=0,hc=null,go=1,yo="";function Jo(o,u){b0[x0++]=Gf,b0[x0++]=H1,H1=o,Gf=u}function R9(o,u,f){ys[vs++]=go,ys[vs++]=yo,ys[vs++]=hc,hc=o;var g=go;o=yo;var x=32-Ve(g)-1;g&=~(1<<x),f+=1;var _=32-Ve(u)+x;if(30<_){var z=x-x%5;_=(g&(1<<z)-1).toString(32),g>>=z,x-=z,go=1<<32-Ve(u)+x|f<<x|g,yo=_+o}else go=1<<_|f<<x|g,yo=o}function O4(o){o.return!==null&&(Jo(o,1),R9(o,1,0))}function I4(o){for(;o===H1;)H1=b0[--x0],b0[x0]=null,Gf=b0[--x0],b0[x0]=null;for(;o===hc;)hc=ys[--vs],ys[vs]=null,yo=ys[--vs],ys[vs]=null,go=ys[--vs],ys[vs]=null}function M9(o,u){ys[vs++]=go,ys[vs++]=yo,ys[vs++]=hc,go=u.id,yo=u.overflow,hc=o}var Pi=null,xn=null,br=!1,fc=null,bs=!1,R4=Error(n(519));function pc(o){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kf(gs(u,o)),R4}function P9(o){var u=o.stateNode,f=o.type,g=o.memoizedProps;switch(u[zr]=o,u[un]=g,f){case"dialog":fr("cancel",u),fr("close",u);break;case"iframe":case"object":case"embed":fr("load",u);break;case"video":case"audio":for(f=0;f<mp.length;f++)fr(mp[f],u);break;case"source":fr("error",u);break;case"img":case"image":case"link":fr("error",u),fr("load",u);break;case"details":fr("toggle",u);break;case"input":fr("invalid",u),Fe(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":fr("invalid",u);break;case"textarea":fr("invalid",u),Jt(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||Zk(u.textContent,f)?(g.popover!=null&&(fr("beforetoggle",u),fr("toggle",u)),g.onScroll!=null&&fr("scroll",u),g.onScrollEnd!=null&&fr("scrollend",u),g.onClick!=null&&(u.onclick=Fn),u=!0):u=!1,u||pc(o,!0)}function D9(o){for(Pi=o.return;Pi;)switch(Pi.tag){case 5:case 31:case 13:bs=!1;return;case 27:case 3:bs=!0;return;default:Pi=Pi.return}}function w0(o){if(o!==Pi)return!1;if(!br)return D9(o),br=!0,!1;var u=o.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Yw(o.type,o.memoizedProps)),f=!f),f&&xn&&pc(o),D9(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));xn=oC(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));xn=oC(o)}else u===27?(u=xn,jc(o.type)?(o=r5,r5=null,xn=o):xn=u):xn=Pi?ws(o.stateNode.nextSibling):null;return!0}function Vu(){xn=Pi=null,br=!1}function M4(){var o=fc;return o!==null&&(ka===null?ka=o:ka.push.apply(ka,o),fc=null),o}function Kf(o){fc===null?fc=[o]:fc.push(o)}var P4=X(null),Fu=null,el=null;function mc(o,u,f){de(P4,u._currentValue),u._currentValue=f}function tl(o){o._currentValue=P4.current,re(P4)}function D4(o,u,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===f)break;o=o.return}}function L4(o,u,f,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var _=x.dependencies;if(_!==null){var z=x.child;_=_.firstContext;e:for(;_!==null;){var H=_;_=x;for(var se=0;se<u.length;se++)if(H.context===u[se]){_.lanes|=f,H=_.alternate,H!==null&&(H.lanes|=f),D4(_.return,f,o),g||(z=null);break e}_=H.next}}else if(x.tag===18){if(z=x.return,z===null)throw Error(n(341));z.lanes|=f,_=z.alternate,_!==null&&(_.lanes|=f),D4(z,f,o),z=null}else z=x.child;if(z!==null)z.return=x;else for(z=x;z!==null;){if(z===o){z=null;break}if(x=z.sibling,x!==null){x.return=z.return,z=x;break}z=z.return}x=z}}function _0(o,u,f,g){o=null;for(var x=u,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var z=x.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var H=x.type;Ka(x.pendingProps.value,z.value)||(o!==null?o.push(H):o=[H])}}else if(x===ve.current){if(z=x.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(xp):o=[xp])}x=x.return}o!==null&&L4(u,o,f,g),u.flags|=262144}function G1(o){for(o=o.firstContext;o!==null;){if(!Ka(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function qu(o){Fu=o,el=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Di(o){return L9(Fu,o)}function K1(o,u){return Fu===null&&qu(o),L9(o,u)}function L9(o,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},el===null){if(o===null)throw Error(n(308));el=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else el=el.next=u;return f}var _Q=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(f,g){o.push(g)}};this.abort=function(){u.aborted=!0,o.forEach(function(f){return f()})}},SQ=t.unstable_scheduleCallback,TQ=t.unstable_NormalPriority,ri={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B4(){return{controller:new _Q,data:new Map,refCount:0}}function Wf(o){o.refCount--,o.refCount===0&&SQ(TQ,function(){o.controller.abort()})}var Xf=null,U4=0,S0=0,T0=null;function AQ(o,u){if(Xf===null){var f=Xf=[];U4=0,S0=Vw(),T0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return U4++,u.then(B9,B9),u}function B9(){if(--U4===0&&Xf!==null){T0!==null&&(T0.status="fulfilled");var o=Xf;Xf=null,S0=0,T0=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function EQ(o,u){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){g.status="fulfilled",g.value=u;for(var x=0;x<f.length;x++)(0,f[x])(u)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var U9=W.S;W.S=function(o,u){_k=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&AQ(o,u),U9!==null&&U9(o,u)};var Hu=X(null);function z4(){var o=Hu.current;return o!==null?o:nn.pooledCache}function W1(o,u){u===null?de(Hu,Hu.current):de(Hu,u.pool)}function z9(){var o=z4();return o===null?null:{parent:ri._currentValue,pool:o}}var A0=Error(n(460)),$4=Error(n(474)),X1=Error(n(542)),Q1={then:function(){}};function $9(o){return o=o.status,o==="fulfilled"||o==="rejected"}function V9(o,u,f){switch(f=o[f],f===void 0?o.push(u):f!==u&&(u.then(Fn,Fn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,q9(o),o;default:if(typeof u.status=="string")u.then(Fn,Fn);else{if(o=nn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(g){if(u.status==="pending"){var x=u;x.status="fulfilled",x.value=g}},function(g){if(u.status==="pending"){var x=u;x.status="rejected",x.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,q9(o),o}throw Ku=u,A0}}function Gu(o){try{var u=o._init;return u(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Ku=f,A0):f}}var Ku=null;function F9(){if(Ku===null)throw Error(n(459));var o=Ku;return Ku=null,o}function q9(o){if(o===A0||o===X1)throw Error(n(483))}var E0=null,Qf=0;function Y1(o){var u=Qf;return Qf+=1,E0===null&&(E0=[]),V9(E0,o,u)}function Yf(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Z1(o,u){throw u.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function H9(o){function u(be,fe){if(o){var Se=be.deletions;Se===null?(be.deletions=[fe],be.flags|=16):Se.push(fe)}}function f(be,fe){if(!o)return null;for(;fe!==null;)u(be,fe),fe=fe.sibling;return null}function g(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function x(be,fe){return be=Zo(be,fe),be.index=0,be.sibling=null,be}function _(be,fe,Se){return be.index=Se,o?(Se=be.alternate,Se!==null?(Se=Se.index,Se<fe?(be.flags|=67108866,fe):Se):(be.flags|=67108866,fe)):(be.flags|=1048576,fe)}function z(be){return o&&be.alternate===null&&(be.flags|=67108866),be}function H(be,fe,Se,Le){return fe===null||fe.tag!==6?(fe=k4(Se,be.mode,Le),fe.return=be,fe):(fe=x(fe,Se),fe.return=be,fe)}function se(be,fe,Se,Le){var Nt=Se.type;return Nt===S?Pe(be,fe,Se.props.children,Le,Se.key):fe!==null&&(fe.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===A&&Gu(Nt)===fe.type)?(fe=x(fe,Se.props),Yf(fe,Se),fe.return=be,fe):(fe=q1(Se.type,Se.key,Se.props,null,be.mode,Le),Yf(fe,Se),fe.return=be,fe)}function Ae(be,fe,Se,Le){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Se.containerInfo||fe.stateNode.implementation!==Se.implementation?(fe=C4(Se,be.mode,Le),fe.return=be,fe):(fe=x(fe,Se.children||[]),fe.return=be,fe)}function Pe(be,fe,Se,Le,Nt){return fe===null||fe.tag!==7?(fe=$u(Se,be.mode,Le,Nt),fe.return=be,fe):(fe=x(fe,Se),fe.return=be,fe)}function ze(be,fe,Se){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=k4(""+fe,be.mode,Se),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return Se=q1(fe.type,fe.key,fe.props,null,be.mode,Se),Yf(Se,fe),Se.return=be,Se;case T:return fe=C4(fe,be.mode,Se),fe.return=be,fe;case A:return fe=Gu(fe),ze(be,fe,Se)}if(Z(fe)||B(fe))return fe=$u(fe,be.mode,Se,null),fe.return=be,fe;if(typeof fe.then=="function")return ze(be,Y1(fe),Se);if(fe.$$typeof===k)return ze(be,K1(be,fe),Se);Z1(be,fe)}return null}function je(be,fe,Se,Le){var Nt=fe!==null?fe.key:null;if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return Nt!==null?null:H(be,fe,""+Se,Le);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:return Se.key===Nt?se(be,fe,Se,Le):null;case T:return Se.key===Nt?Ae(be,fe,Se,Le):null;case A:return Se=Gu(Se),je(be,fe,Se,Le)}if(Z(Se)||B(Se))return Nt!==null?null:Pe(be,fe,Se,Le,null);if(typeof Se.then=="function")return je(be,fe,Y1(Se),Le);if(Se.$$typeof===k)return je(be,fe,K1(be,Se),Le);Z1(be,Se)}return null}function Ce(be,fe,Se,Le,Nt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return be=be.get(Se)||null,H(fe,be,""+Le,Nt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return be=be.get(Le.key===null?Se:Le.key)||null,se(fe,be,Le,Nt);case T:return be=be.get(Le.key===null?Se:Le.key)||null,Ae(fe,be,Le,Nt);case A:return Le=Gu(Le),Ce(be,fe,Se,Le,Nt)}if(Z(Le)||B(Le))return be=be.get(Se)||null,Pe(fe,be,Le,Nt,null);if(typeof Le.then=="function")return Ce(be,fe,Se,Y1(Le),Nt);if(Le.$$typeof===k)return Ce(be,fe,Se,K1(fe,Le),Nt);Z1(fe,Le)}return null}function wt(be,fe,Se,Le){for(var Nt=null,Ar=null,At=fe,er=fe=0,mr=null;At!==null&&er<Se.length;er++){At.index>er?(mr=At,At=null):mr=At.sibling;var Er=je(be,At,Se[er],Le);if(Er===null){At===null&&(At=mr);break}o&&At&&Er.alternate===null&&u(be,At),fe=_(Er,fe,er),Ar===null?Nt=Er:Ar.sibling=Er,Ar=Er,At=mr}if(er===Se.length)return f(be,At),br&&Jo(be,er),Nt;if(At===null){for(;er<Se.length;er++)At=ze(be,Se[er],Le),At!==null&&(fe=_(At,fe,er),Ar===null?Nt=At:Ar.sibling=At,Ar=At);return br&&Jo(be,er),Nt}for(At=g(At);er<Se.length;er++)mr=Ce(At,be,er,Se[er],Le),mr!==null&&(o&&mr.alternate!==null&&At.delete(mr.key===null?er:mr.key),fe=_(mr,fe,er),Ar===null?Nt=mr:Ar.sibling=mr,Ar=mr);return o&&At.forEach(function(Rc){return u(be,Rc)}),br&&Jo(be,er),Nt}function Mt(be,fe,Se,Le){if(Se==null)throw Error(n(151));for(var Nt=null,Ar=null,At=fe,er=fe=0,mr=null,Er=Se.next();At!==null&&!Er.done;er++,Er=Se.next()){At.index>er?(mr=At,At=null):mr=At.sibling;var Rc=je(be,At,Er.value,Le);if(Rc===null){At===null&&(At=mr);break}o&&At&&Rc.alternate===null&&u(be,At),fe=_(Rc,fe,er),Ar===null?Nt=Rc:Ar.sibling=Rc,Ar=Rc,At=mr}if(Er.done)return f(be,At),br&&Jo(be,er),Nt;if(At===null){for(;!Er.done;er++,Er=Se.next())Er=ze(be,Er.value,Le),Er!==null&&(fe=_(Er,fe,er),Ar===null?Nt=Er:Ar.sibling=Er,Ar=Er);return br&&Jo(be,er),Nt}for(At=g(At);!Er.done;er++,Er=Se.next())Er=Ce(At,be,er,Er.value,Le),Er!==null&&(o&&Er.alternate!==null&&At.delete(Er.key===null?er:Er.key),fe=_(Er,fe,er),Ar===null?Nt=Er:Ar.sibling=Er,Ar=Er);return o&&At.forEach(function(LY){return u(be,LY)}),br&&Jo(be,er),Nt}function Yr(be,fe,Se,Le){if(typeof Se=="object"&&Se!==null&&Se.type===S&&Se.key===null&&(Se=Se.props.children),typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case b:e:{for(var Nt=Se.key;fe!==null;){if(fe.key===Nt){if(Nt=Se.type,Nt===S){if(fe.tag===7){f(be,fe.sibling),Le=x(fe,Se.props.children),Le.return=be,be=Le;break e}}else if(fe.elementType===Nt||typeof Nt=="object"&&Nt!==null&&Nt.$$typeof===A&&Gu(Nt)===fe.type){f(be,fe.sibling),Le=x(fe,Se.props),Yf(Le,Se),Le.return=be,be=Le;break e}f(be,fe);break}else u(be,fe);fe=fe.sibling}Se.type===S?(Le=$u(Se.props.children,be.mode,Le,Se.key),Le.return=be,be=Le):(Le=q1(Se.type,Se.key,Se.props,null,be.mode,Le),Yf(Le,Se),Le.return=be,be=Le)}return z(be);case T:e:{for(Nt=Se.key;fe!==null;){if(fe.key===Nt)if(fe.tag===4&&fe.stateNode.containerInfo===Se.containerInfo&&fe.stateNode.implementation===Se.implementation){f(be,fe.sibling),Le=x(fe,Se.children||[]),Le.return=be,be=Le;break e}else{f(be,fe);break}else u(be,fe);fe=fe.sibling}Le=C4(Se,be.mode,Le),Le.return=be,be=Le}return z(be);case A:return Se=Gu(Se),Yr(be,fe,Se,Le)}if(Z(Se))return wt(be,fe,Se,Le);if(B(Se)){if(Nt=B(Se),typeof Nt!="function")throw Error(n(150));return Se=Nt.call(Se),Mt(be,fe,Se,Le)}if(typeof Se.then=="function")return Yr(be,fe,Y1(Se),Le);if(Se.$$typeof===k)return Yr(be,fe,K1(be,Se),Le);Z1(be,Se)}return typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint"?(Se=""+Se,fe!==null&&fe.tag===6?(f(be,fe.sibling),Le=x(fe,Se),Le.return=be,be=Le):(f(be,fe),Le=k4(Se,be.mode,Le),Le.return=be,be=Le),z(be)):f(be,fe)}return function(be,fe,Se,Le){try{Qf=0;var Nt=Yr(be,fe,Se,Le);return E0=null,Nt}catch(At){if(At===A0||At===X1)throw At;var Ar=Wa(29,At,null,be.mode);return Ar.lanes=Le,Ar.return=be,Ar}finally{}}}var Wu=H9(!0),G9=H9(!1),gc=!1;function V4(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F4(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function yc(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function vc(o,u,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Or&2)!==0){var x=g.pending;return x===null?u.next=u:(u.next=x.next,x.next=u),g.pending=u,u=F1(o),k9(o,null,f),u}return V1(o,g,u,f),F1(o)}function Zf(o,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,xr(o,f)}}function q4(o,u){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?x=_=z:_=_.next=z,f=f.next}while(f!==null);_===null?x=_=u:_=_.next=u}else x=_=u;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=u}var H4=!1;function Jf(){if(H4){var o=T0;if(o!==null)throw o}}function ep(o,u,f,g){H4=!1;var x=o.updateQueue;gc=!1;var _=x.firstBaseUpdate,z=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var se=H,Ae=se.next;se.next=null,z===null?_=Ae:z.next=Ae,z=se;var Pe=o.alternate;Pe!==null&&(Pe=Pe.updateQueue,H=Pe.lastBaseUpdate,H!==z&&(H===null?Pe.firstBaseUpdate=Ae:H.next=Ae,Pe.lastBaseUpdate=se))}if(_!==null){var ze=x.baseState;z=0,Pe=Ae=se=null,H=_;do{var je=H.lane&-536870913,Ce=je!==H.lane;if(Ce?(pr&je)===je:(g&je)===je){je!==0&&je===S0&&(H4=!0),Pe!==null&&(Pe=Pe.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var wt=o,Mt=H;je=u;var Yr=f;switch(Mt.tag){case 1:if(wt=Mt.payload,typeof wt=="function"){ze=wt.call(Yr,ze,je);break e}ze=wt;break e;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Mt.payload,je=typeof wt=="function"?wt.call(Yr,ze,je):wt,je==null)break e;ze=m({},ze,je);break e;case 2:gc=!0}}je=H.callback,je!==null&&(o.flags|=64,Ce&&(o.flags|=8192),Ce=x.callbacks,Ce===null?x.callbacks=[je]:Ce.push(je))}else Ce={lane:je,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Pe===null?(Ae=Pe=Ce,se=ze):Pe=Pe.next=Ce,z|=je;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;Ce=H,H=Ce.next,Ce.next=null,x.lastBaseUpdate=Ce,x.shared.pending=null}}while(!0);Pe===null&&(se=ze),x.baseState=se,x.firstBaseUpdate=Ae,x.lastBaseUpdate=Pe,_===null&&(x.shared.lanes=0),Sc|=z,o.lanes=z,o.memoizedState=ze}}function K9(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function W9(o,u){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)K9(f[o],u)}var N0=X(null),J1=X(0);function X9(o,u){o=ul,de(J1,o),de(N0,u),ul=o|u.baseLanes}function G4(){de(J1,ul),de(N0,N0.current)}function K4(){ul=J1.current,re(N0),re(J1)}var Xa=X(null),xs=null;function bc(o){var u=o.alternate;de(qn,qn.current&1),de(Xa,o),xs===null&&(u===null||N0.current!==null||u.memoizedState!==null)&&(xs=o)}function W4(o){de(qn,qn.current),de(Xa,o),xs===null&&(xs=o)}function Q9(o){o.tag===22?(de(qn,qn.current),de(Xa,o),xs===null&&(xs=o)):xc()}function xc(){de(qn,qn.current),de(Xa,Xa.current)}function Qa(o){re(Xa),xs===o&&(xs=null),re(qn)}var qn=X(0);function ey(o){for(var u=o;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||e5(f)||t5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var rl=0,Zt=null,Xr=null,ni=null,ty=!1,j0=!1,Xu=!1,ry=0,tp=0,k0=null,NQ=0;function Pn(){throw Error(n(321))}function X4(o,u){if(u===null)return!1;for(var f=0;f<u.length&&f<o.length;f++)if(!Ka(o[f],u[f]))return!1;return!0}function Q4(o,u,f,g,x,_){return rl=_,Zt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,W.H=o===null||o.memoizedState===null?Rj:dw,Xu=!1,_=f(g,x),Xu=!1,j0&&(_=Z9(u,f,g,x)),Y9(o),_}function Y9(o){W.H=ip;var u=Xr!==null&&Xr.next!==null;if(rl=0,ni=Xr=Zt=null,ty=!1,tp=0,k0=null,u)throw Error(n(300));o===null||ii||(o=o.dependencies,o!==null&&G1(o)&&(ii=!0))}function Z9(o,u,f,g){Zt=o;var x=0;do{if(j0&&(k0=null),tp=0,j0=!1,25<=x)throw Error(n(301));if(x+=1,ni=Xr=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=Mj,_=u(f,g)}while(j0);return _}function jQ(){var o=W.H,u=o.useState()[0];return u=typeof u.then=="function"?rp(u):u,o=o.useState()[0],(Xr!==null?Xr.memoizedState:null)!==o&&(Zt.flags|=1024),u}function Y4(){var o=ry!==0;return ry=0,o}function Z4(o,u,f){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~f}function J4(o){if(ty){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}ty=!1}rl=0,ni=Xr=Zt=null,j0=!1,tp=ry=0,k0=null}function ca(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?Zt.memoizedState=ni=o:ni=ni.next=o,ni}function Hn(){if(Xr===null){var o=Zt.alternate;o=o!==null?o.memoizedState:null}else o=Xr.next;var u=ni===null?Zt.memoizedState:ni.next;if(u!==null)ni=u,Xr=o;else{if(o===null)throw Zt.alternate===null?Error(n(467)):Error(n(310));Xr=o,o={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},ni===null?Zt.memoizedState=ni=o:ni=ni.next=o}return ni}function ny(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rp(o){var u=tp;return tp+=1,k0===null&&(k0=[]),o=V9(k0,o,u),u=Zt,(ni===null?u.memoizedState:ni.next)===null&&(u=u.alternate,W.H=u===null||u.memoizedState===null?Rj:dw),o}function iy(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return rp(o);if(o.$$typeof===k)return Di(o)}throw Error(n(438,String(o)))}function ew(o){var u=null,f=Zt.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=Zt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(x){return x.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=ny(),Zt.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(o),g=0;g<o;g++)f[g]=F;return u.index++,f}function nl(o,u){return typeof u=="function"?u(o):u}function ay(o){var u=Hn();return tw(u,Xr,o)}function tw(o,u,f){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var x=o.baseQueue,_=g.pending;if(_!==null){if(x!==null){var z=x.next;x.next=_.next,_.next=z}u.baseQueue=x=_,g.pending=null}if(_=o.baseState,x===null)o.memoizedState=_;else{u=x.next;var H=z=null,se=null,Ae=u,Pe=!1;do{var ze=Ae.lane&-536870913;if(ze!==Ae.lane?(pr&ze)===ze:(rl&ze)===ze){var je=Ae.revertLane;if(je===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),ze===S0&&(Pe=!0);else if((rl&je)===je){Ae=Ae.next,je===S0&&(Pe=!0);continue}else ze={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},se===null?(H=se=ze,z=_):se=se.next=ze,Zt.lanes|=je,Sc|=je;ze=Ae.action,Xu&&f(_,ze),_=Ae.hasEagerState?Ae.eagerState:f(_,ze)}else je={lane:ze,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},se===null?(H=se=je,z=_):se=se.next=je,Zt.lanes|=ze,Sc|=ze;Ae=Ae.next}while(Ae!==null&&Ae!==u);if(se===null?z=_:se.next=H,!Ka(_,o.memoizedState)&&(ii=!0,Pe&&(f=T0,f!==null)))throw f;o.memoizedState=_,o.baseState=z,o.baseQueue=se,g.lastRenderedState=_}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function rw(o){var u=Hn(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var g=f.dispatch,x=f.pending,_=u.memoizedState;if(x!==null){f.pending=null;var z=x=x.next;do _=o(_,z.action),z=z.next;while(z!==x);Ka(_,u.memoizedState)||(ii=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function J9(o,u,f){var g=Zt,x=Hn(),_=br;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var z=!Ka((Xr||x).memoizedState,f);if(z&&(x.memoizedState=f,ii=!0),x=x.queue,aw(rj.bind(null,g,x,o),[o]),x.getSnapshot!==u||z||ni!==null&&ni.memoizedState.tag&1){if(g.flags|=2048,C0(9,{destroy:void 0},tj.bind(null,g,x,f,u),null),nn===null)throw Error(n(349));_||(rl&127)!==0||ej(g,u,f)}return f}function ej(o,u,f){o.flags|=16384,o={getSnapshot:u,value:f},u=Zt.updateQueue,u===null?(u=ny(),Zt.updateQueue=u,u.stores=[o]):(f=u.stores,f===null?u.stores=[o]:f.push(o))}function tj(o,u,f,g){u.value=f,u.getSnapshot=g,nj(u)&&ij(o)}function rj(o,u,f){return f(function(){nj(u)&&ij(o)})}function nj(o){var u=o.getSnapshot;o=o.value;try{var f=u();return!Ka(o,f)}catch{return!0}}function ij(o){var u=zu(o,2);u!==null&&Ca(u,o,2)}function nw(o){var u=ca();if(typeof o=="function"){var f=o;if(o=f(),Xu){Re(!0);try{f()}finally{Re(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:o},u}function aj(o,u,f,g){return o.baseState=f,tw(o,Xr,typeof g=="function"?g:nl)}function kQ(o,u,f,g,x){if(ly(o))throw Error(n(485));if(o=u.action,o!==null){var _={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){_.listeners.push(z)}};W.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,sj(u,_)):(_.next=f.next,u.pending=f.next=_)}}function sj(o,u){var f=u.action,g=u.payload,x=o.state;if(u.isTransition){var _=W.T,z={};W.T=z;try{var H=f(x,g),se=W.S;se!==null&&se(z,H),oj(o,u,H)}catch(Ae){iw(o,u,Ae)}finally{_!==null&&z.types!==null&&(_.types=z.types),W.T=_}}else try{_=f(x,g),oj(o,u,_)}catch(Ae){iw(o,u,Ae)}}function oj(o,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){lj(o,u,g)},function(g){return iw(o,u,g)}):lj(o,u,f)}function lj(o,u,f){u.status="fulfilled",u.value=f,cj(u),o.state=f,u=o.pending,u!==null&&(f=u.next,f===u?o.pending=null:(f=f.next,u.next=f,sj(o,f)))}function iw(o,u,f){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,cj(u),u=u.next;while(u!==g)}o.action=null}function cj(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function uj(o,u){return u}function dj(o,u){if(br){var f=nn.formState;if(f!==null){e:{var g=Zt;if(br){if(xn){t:{for(var x=xn,_=bs;x.nodeType!==8;){if(!_){x=null;break t}if(x=ws(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){xn=ws(x.nextSibling),g=x.data==="F!";break e}}pc(g)}g=!1}g&&(u=f[0])}}return f=ca(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uj,lastRenderedState:u},f.queue=g,f=Cj.bind(null,Zt,g),g.dispatch=f,g=nw(!1),_=uw.bind(null,Zt,!1,g.queue),g=ca(),x={state:u,dispatch:null,action:o,pending:null},g.queue=x,f=kQ.bind(null,Zt,x,_,f),x.dispatch=f,g.memoizedState=o,[u,f,!1]}function hj(o){var u=Hn();return fj(u,Xr,o)}function fj(o,u,f){if(u=tw(o,u,uj)[0],o=ay(nl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=rp(u)}catch(z){throw z===A0?X1:z}else g=u;u=Hn();var x=u.queue,_=x.dispatch;return f!==u.memoizedState&&(Zt.flags|=2048,C0(9,{destroy:void 0},CQ.bind(null,x,f),null)),[g,_,o]}function CQ(o,u){o.action=u}function pj(o){var u=Hn(),f=Xr;if(f!==null)return fj(u,f,o);Hn(),u=u.memoizedState,f=Hn();var g=f.queue.dispatch;return f.memoizedState=o,[u,g,!1]}function C0(o,u,f,g){return o={tag:o,create:f,deps:g,inst:u,next:null},u=Zt.updateQueue,u===null&&(u=ny(),Zt.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,u.lastEffect=o),o}function mj(){return Hn().memoizedState}function sy(o,u,f,g){var x=ca();Zt.flags|=o,x.memoizedState=C0(1|u,{destroy:void 0},f,g===void 0?null:g)}function oy(o,u,f,g){var x=Hn();g=g===void 0?null:g;var _=x.memoizedState.inst;Xr!==null&&g!==null&&X4(g,Xr.memoizedState.deps)?x.memoizedState=C0(u,_,f,g):(Zt.flags|=o,x.memoizedState=C0(1|u,_,f,g))}function gj(o,u){sy(8390656,8,o,u)}function aw(o,u){oy(2048,8,o,u)}function OQ(o){Zt.flags|=4;var u=Zt.updateQueue;if(u===null)u=ny(),Zt.updateQueue=u,u.events=[o];else{var f=u.events;f===null?u.events=[o]:f.push(o)}}function yj(o){var u=Hn().memoizedState;return OQ({ref:u,nextImpl:o}),function(){if((Or&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function vj(o,u){return oy(4,2,o,u)}function bj(o,u){return oy(4,4,o,u)}function xj(o,u){if(typeof u=="function"){o=o();var f=u(o);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function wj(o,u,f){f=f!=null?f.concat([o]):null,oy(4,4,xj.bind(null,u,o),f)}function sw(){}function _j(o,u){var f=Hn();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&X4(u,g[1])?g[0]:(f.memoizedState=[o,u],o)}function Sj(o,u){var f=Hn();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&X4(u,g[1]))return g[0];if(g=o(),Xu){Re(!0);try{o()}finally{Re(!1)}}return f.memoizedState=[g,u],g}function ow(o,u,f){return f===void 0||(rl&1073741824)!==0&&(pr&261930)===0?o.memoizedState=u:(o.memoizedState=f,o=Tk(),Zt.lanes|=o,Sc|=o,f)}function Tj(o,u,f,g){return Ka(f,u)?f:N0.current!==null?(o=ow(o,f,g),Ka(o,u)||(ii=!0),o):(rl&42)===0||(rl&1073741824)!==0&&(pr&261930)===0?(ii=!0,o.memoizedState=f):(o=Tk(),Zt.lanes|=o,Sc|=o,u)}function Aj(o,u,f,g,x){var _=J.p;J.p=_!==0&&8>_?_:8;var z=W.T,H={};W.T=H,uw(o,!1,u,f);try{var se=x(),Ae=W.S;if(Ae!==null&&Ae(H,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Pe=EQ(se,g);np(o,u,Pe,Ja(o))}else np(o,u,g,Ja(o))}catch(ze){np(o,u,{then:function(){},status:"rejected",reason:ze},Ja())}finally{J.p=_,z!==null&&H.types!==null&&(z.types=H.types),W.T=z}}function IQ(){}function lw(o,u,f,g){if(o.tag!==5)throw Error(n(476));var x=Ej(o).queue;Aj(o,x,u,Y,f===null?IQ:function(){return Nj(o),f(g)})}function Ej(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:Y},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:f},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function Nj(o){var u=Ej(o);u.next===null&&(u=o.alternate.memoizedState),np(o,u.next.queue,{},Ja())}function cw(){return Di(xp)}function jj(){return Hn().memoizedState}function kj(){return Hn().memoizedState}function RQ(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var f=Ja();o=yc(f);var g=vc(u,o,f);g!==null&&(Ca(g,u,f),Zf(g,u,f)),u={cache:B4()},o.payload=u;return}u=u.return}}function MQ(o,u,f){var g=Ja();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},ly(o)?Oj(u,f):(f=N4(o,u,f,g),f!==null&&(Ca(f,o,g),Ij(f,u,g)))}function Cj(o,u,f){var g=Ja();np(o,u,f,g)}function np(o,u,f,g){var x={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(ly(o))Oj(u,x);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var z=u.lastRenderedState,H=_(z,f);if(x.hasEagerState=!0,x.eagerState=H,Ka(H,z))return V1(o,u,x,0),nn===null&&$1(),!1}catch{}finally{}if(f=N4(o,u,x,g),f!==null)return Ca(f,o,g),Ij(f,u,g),!0}return!1}function uw(o,u,f,g){if(g={lane:2,revertLane:Vw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},ly(o)){if(u)throw Error(n(479))}else u=N4(o,f,g,2),u!==null&&Ca(u,o,2)}function ly(o){var u=o.alternate;return o===Zt||u!==null&&u===Zt}function Oj(o,u){j0=ty=!0;var f=o.pending;f===null?u.next=u:(u.next=f.next,f.next=u),o.pending=u}function Ij(o,u,f){if((f&4194048)!==0){var g=u.lanes;g&=o.pendingLanes,f|=g,u.lanes=f,xr(o,f)}}var ip={readContext:Di,use:iy,useCallback:Pn,useContext:Pn,useEffect:Pn,useImperativeHandle:Pn,useLayoutEffect:Pn,useInsertionEffect:Pn,useMemo:Pn,useReducer:Pn,useRef:Pn,useState:Pn,useDebugValue:Pn,useDeferredValue:Pn,useTransition:Pn,useSyncExternalStore:Pn,useId:Pn,useHostTransitionStatus:Pn,useFormState:Pn,useActionState:Pn,useOptimistic:Pn,useMemoCache:Pn,useCacheRefresh:Pn};ip.useEffectEvent=Pn;var Rj={readContext:Di,use:iy,useCallback:function(o,u){return ca().memoizedState=[o,u===void 0?null:u],o},useContext:Di,useEffect:gj,useImperativeHandle:function(o,u,f){f=f!=null?f.concat([o]):null,sy(4194308,4,xj.bind(null,u,o),f)},useLayoutEffect:function(o,u){return sy(4194308,4,o,u)},useInsertionEffect:function(o,u){sy(4,2,o,u)},useMemo:function(o,u){var f=ca();u=u===void 0?null:u;var g=o();if(Xu){Re(!0);try{o()}finally{Re(!1)}}return f.memoizedState=[g,u],g},useReducer:function(o,u,f){var g=ca();if(f!==void 0){var x=f(u);if(Xu){Re(!0);try{f(u)}finally{Re(!1)}}}else x=u;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=MQ.bind(null,Zt,o),[g.memoizedState,o]},useRef:function(o){var u=ca();return o={current:o},u.memoizedState=o},useState:function(o){o=nw(o);var u=o.queue,f=Cj.bind(null,Zt,u);return u.dispatch=f,[o.memoizedState,f]},useDebugValue:sw,useDeferredValue:function(o,u){var f=ca();return ow(f,o,u)},useTransition:function(){var o=nw(!1);return o=Aj.bind(null,Zt,o.queue,!0,!1),ca().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,f){var g=Zt,x=ca();if(br){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),nn===null)throw Error(n(349));(pr&127)!==0||ej(g,u,f)}x.memoizedState=f;var _={value:f,getSnapshot:u};return x.queue=_,gj(rj.bind(null,g,_,o),[o]),g.flags|=2048,C0(9,{destroy:void 0},tj.bind(null,g,_,f,u),null),f},useId:function(){var o=ca(),u=nn.identifierPrefix;if(br){var f=yo,g=go;f=(g&~(1<<32-Ve(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=ry++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=NQ++,u="_"+u+"r_"+f.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:cw,useFormState:dj,useActionState:dj,useOptimistic:function(o){var u=ca();u.memoizedState=u.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=uw.bind(null,Zt,!0,f),f.dispatch=u,[o,u]},useMemoCache:ew,useCacheRefresh:function(){return ca().memoizedState=RQ.bind(null,Zt)},useEffectEvent:function(o){var u=ca(),f={impl:o};return u.memoizedState=f,function(){if((Or&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},dw={readContext:Di,use:iy,useCallback:_j,useContext:Di,useEffect:aw,useImperativeHandle:wj,useInsertionEffect:vj,useLayoutEffect:bj,useMemo:Sj,useReducer:ay,useRef:mj,useState:function(){return ay(nl)},useDebugValue:sw,useDeferredValue:function(o,u){var f=Hn();return Tj(f,Xr.memoizedState,o,u)},useTransition:function(){var o=ay(nl)[0],u=Hn().memoizedState;return[typeof o=="boolean"?o:rp(o),u]},useSyncExternalStore:J9,useId:jj,useHostTransitionStatus:cw,useFormState:hj,useActionState:hj,useOptimistic:function(o,u){var f=Hn();return aj(f,Xr,o,u)},useMemoCache:ew,useCacheRefresh:kj};dw.useEffectEvent=yj;var Mj={readContext:Di,use:iy,useCallback:_j,useContext:Di,useEffect:aw,useImperativeHandle:wj,useInsertionEffect:vj,useLayoutEffect:bj,useMemo:Sj,useReducer:rw,useRef:mj,useState:function(){return rw(nl)},useDebugValue:sw,useDeferredValue:function(o,u){var f=Hn();return Xr===null?ow(f,o,u):Tj(f,Xr.memoizedState,o,u)},useTransition:function(){var o=rw(nl)[0],u=Hn().memoizedState;return[typeof o=="boolean"?o:rp(o),u]},useSyncExternalStore:J9,useId:jj,useHostTransitionStatus:cw,useFormState:pj,useActionState:pj,useOptimistic:function(o,u){var f=Hn();return Xr!==null?aj(f,Xr,o,u):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:ew,useCacheRefresh:kj};Mj.useEffectEvent=yj;function hw(o,u,f,g){u=o.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var fw={enqueueSetState:function(o,u,f){o=o._reactInternals;var g=Ja(),x=yc(g);x.payload=u,f!=null&&(x.callback=f),u=vc(o,x,g),u!==null&&(Ca(u,o,g),Zf(u,o,g))},enqueueReplaceState:function(o,u,f){o=o._reactInternals;var g=Ja(),x=yc(g);x.tag=1,x.payload=u,f!=null&&(x.callback=f),u=vc(o,x,g),u!==null&&(Ca(u,o,g),Zf(u,o,g))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var f=Ja(),g=yc(f);g.tag=2,u!=null&&(g.callback=u),u=vc(o,g,f),u!==null&&(Ca(u,o,f),Zf(u,o,f))}};function Pj(o,u,f,g,x,_,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,z):u.prototype&&u.prototype.isPureReactComponent?!qf(f,g)||!qf(x,_):!0}function Dj(o,u,f,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==o&&fw.enqueueReplaceState(u,u.state,null)}function Qu(o,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(o=o.defaultProps){f===u&&(f=m({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}function Lj(o){z1(o)}function Bj(o){console.error(o)}function Uj(o){z1(o)}function cy(o,u){try{var f=o.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function zj(o,u,f){try{var g=o.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function pw(o,u,f){return f=yc(f),f.tag=3,f.payload={element:null},f.callback=function(){cy(o,u)},f}function $j(o){return o=yc(o),o.tag=3,o}function Vj(o,u,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var _=g.value;o.payload=function(){return x(_)},o.callback=function(){zj(u,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(o.callback=function(){zj(u,f,g),typeof x!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function PQ(o,u,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&_0(u,f,x,!0),f=Xa.current,f!==null){switch(f.tag){case 31:case 13:return xs===null?wy():f.alternate===null&&Dn===0&&(Dn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===Q1?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),Uw(o,g,x)),!1;case 22:return f.flags|=65536,g===Q1?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),Uw(o,g,x)),!1}throw Error(n(435,f.tag))}return Uw(o,g,x),wy(),!1}if(br)return u=Xa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=x,g!==R4&&(o=Error(n(422),{cause:g}),Kf(gs(o,f)))):(g!==R4&&(u=Error(n(423),{cause:g}),Kf(gs(u,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=gs(g,f),x=pw(o.stateNode,g,x),q4(o,x),Dn!==4&&(Dn=2)),!1;var _=Error(n(520),{cause:g});if(_=gs(_,f),hp===null?hp=[_]:hp.push(_),Dn!==4&&(Dn=2),u===null)return!0;g=gs(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=pw(f.stateNode,g,o),q4(f,o),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Tc===null||!Tc.has(_))))return f.flags|=65536,x&=-x,f.lanes|=x,x=$j(x),Vj(x,o,f,g),q4(f,x),!1}f=f.return}while(f!==null);return!1}var mw=Error(n(461)),ii=!1;function Li(o,u,f,g){u.child=o===null?G9(u,null,f,g):Wu(u,o.child,f,g)}function Fj(o,u,f,g,x){f=f.render;var _=u.ref;if("ref"in g){var z={};for(var H in g)H!=="ref"&&(z[H]=g[H])}else z=g;return qu(u),g=Q4(o,u,f,z,_,x),H=Y4(),o!==null&&!ii?(Z4(o,u,x),il(o,u,x)):(br&&H&&O4(u),u.flags|=1,Li(o,u,g,x),u.child)}function qj(o,u,f,g,x){if(o===null){var _=f.type;return typeof _=="function"&&!j4(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,Hj(o,u,_,g,x)):(o=q1(f.type,null,g,u,u.mode,x),o.ref=u.ref,o.return=u,u.child=o)}if(_=o.child,!Sw(o,x)){var z=_.memoizedProps;if(f=f.compare,f=f!==null?f:qf,f(z,g)&&o.ref===u.ref)return il(o,u,x)}return u.flags|=1,o=Zo(_,g),o.ref=u.ref,o.return=u,u.child=o}function Hj(o,u,f,g,x){if(o!==null){var _=o.memoizedProps;if(qf(_,g)&&o.ref===u.ref)if(ii=!1,u.pendingProps=g=_,Sw(o,x))(o.flags&131072)!==0&&(ii=!0);else return u.lanes=o.lanes,il(o,u,x)}return gw(o,u,f,g,x)}function Gj(o,u,f,g){var x=g.children,_=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,o!==null){for(g=u.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~_}else g=0,u.child=null;return Kj(o,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&W1(u,_!==null?_.cachePool:null),_!==null?X9(u,_):G4(),Q9(u);else return g=u.lanes=536870912,Kj(o,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(W1(u,_.cachePool),X9(u,_),xc(),u.memoizedState=null):(o!==null&&W1(u,null),G4(),xc());return Li(o,u,x,f),u.child}function ap(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Kj(o,u,f,g,x){var _=z4();return _=_===null?null:{parent:ri._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},o!==null&&W1(u,null),G4(),Q9(u),o!==null&&_0(o,u,g,!0),u.childLanes=x,null}function uy(o,u){return u=hy({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function Wj(o,u,f){return Wu(u,o.child,null,f),o=uy(u,u.pendingProps),o.flags|=2,Qa(u),u.memoizedState=null,o}function DQ(o,u,f){var g=u.pendingProps,x=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(br){if(g.mode==="hidden")return o=uy(u,g),u.lanes=536870912,ap(null,o);if(W4(u),(o=xn)?(o=sC(o,bs),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:hc!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},f=O9(o),f.return=u,u.child=f,Pi=u,xn=null)):o=null,o===null)throw pc(u);return u.lanes=536870912,null}return uy(u,g)}var _=o.memoizedState;if(_!==null){var z=_.dehydrated;if(W4(u),x)if(u.flags&256)u.flags&=-257,u=Wj(o,u,f);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(n(558));else if(ii||_0(o,u,f,!1),x=(f&o.childLanes)!==0,ii||x){if(g=nn,g!==null&&(z=yn(g,f),z!==0&&z!==_.retryLane))throw _.retryLane=z,zu(o,z),Ca(g,o,z),mw;wy(),u=Wj(o,u,f)}else o=_.treeContext,xn=ws(z.nextSibling),Pi=u,br=!0,fc=null,bs=!1,o!==null&&M9(u,o),u=uy(u,g),u.flags|=4096;return u}return o=Zo(o.child,{mode:g.mode,children:g.children}),o.ref=u.ref,u.child=o,o.return=u,o}function dy(o,u){var f=u.ref;if(f===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(o===null||o.ref!==f)&&(u.flags|=4194816)}}function gw(o,u,f,g,x){return qu(u),f=Q4(o,u,f,g,void 0,x),g=Y4(),o!==null&&!ii?(Z4(o,u,x),il(o,u,x)):(br&&g&&O4(u),u.flags|=1,Li(o,u,f,x),u.child)}function Xj(o,u,f,g,x,_){return qu(u),u.updateQueue=null,f=Z9(u,g,f,x),Y9(o),g=Y4(),o!==null&&!ii?(Z4(o,u,_),il(o,u,_)):(br&&g&&O4(u),u.flags|=1,Li(o,u,f,_),u.child)}function Qj(o,u,f,g,x){if(qu(u),u.stateNode===null){var _=v0,z=f.contextType;typeof z=="object"&&z!==null&&(_=Di(z)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=fw,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},V4(u),z=f.contextType,_.context=typeof z=="object"&&z!==null?Di(z):v0,_.state=u.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&(hw(u,f,z,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(z=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),z!==_.state&&fw.enqueueReplaceState(_,_.state,null),ep(u,g,_,x),Jf(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(o===null){_=u.stateNode;var H=u.memoizedProps,se=Qu(f,H);_.props=se;var Ae=_.context,Pe=f.contextType;z=v0,typeof Pe=="object"&&Pe!==null&&(z=Di(Pe));var ze=f.getDerivedStateFromProps;Pe=typeof ze=="function"||typeof _.getSnapshotBeforeUpdate=="function",H=u.pendingProps!==H,Pe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H||Ae!==z)&&Dj(u,_,g,z),gc=!1;var je=u.memoizedState;_.state=je,ep(u,g,_,x),Jf(),Ae=u.memoizedState,H||je!==Ae||gc?(typeof ze=="function"&&(hw(u,f,ze,g),Ae=u.memoizedState),(se=gc||Pj(u,f,se,g,je,Ae,z))?(Pe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=Ae),_.props=g,_.state=Ae,_.context=z,g=se):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,F4(o,u),z=u.memoizedProps,Pe=Qu(f,z),_.props=Pe,ze=u.pendingProps,je=_.context,Ae=f.contextType,se=v0,typeof Ae=="object"&&Ae!==null&&(se=Di(Ae)),H=f.getDerivedStateFromProps,(Ae=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(z!==ze||je!==se)&&Dj(u,_,g,se),gc=!1,je=u.memoizedState,_.state=je,ep(u,g,_,x),Jf();var Ce=u.memoizedState;z!==ze||je!==Ce||gc||o!==null&&o.dependencies!==null&&G1(o.dependencies)?(typeof H=="function"&&(hw(u,f,H,g),Ce=u.memoizedState),(Pe=gc||Pj(u,f,Pe,g,je,Ce,se)||o!==null&&o.dependencies!==null&&G1(o.dependencies))?(Ae||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Ce,se),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Ce,se)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=Ce),_.props=g,_.state=Ce,_.context=se,g=Pe):(typeof _.componentDidUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&je===o.memoizedState||(u.flags|=1024),g=!1)}return _=g,dy(o,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,o!==null&&g?(u.child=Wu(u,o.child,null,x),u.child=Wu(u,null,f,x)):Li(o,u,f,x),u.memoizedState=_.state,o=u.child):o=il(o,u,x),o}function Yj(o,u,f,g){return Vu(),u.flags|=256,Li(o,u,f,g),u.child}var yw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vw(o){return{baseLanes:o,cachePool:z9()}}function bw(o,u,f){return o=o!==null?o.childLanes&~f:0,u&&(o|=Za),o}function Zj(o,u,f){var g=u.pendingProps,x=!1,_=(u.flags&128)!==0,z;if((z=_)||(z=o!==null&&o.memoizedState===null?!1:(qn.current&2)!==0),z&&(x=!0,u.flags&=-129),z=(u.flags&32)!==0,u.flags&=-33,o===null){if(br){if(x?bc(u):xc(),(o=xn)?(o=sC(o,bs),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:hc!==null?{id:go,overflow:yo}:null,retryLane:536870912,hydrationErrors:null},f=O9(o),f.return=u,u.child=f,Pi=u,xn=null)):o=null,o===null)throw pc(u);return t5(o)?u.lanes=32:u.lanes=536870912,null}var H=g.children;return g=g.fallback,x?(xc(),x=u.mode,H=hy({mode:"hidden",children:H},x),g=$u(g,x,f,null),H.return=u,g.return=u,H.sibling=g,u.child=H,g=u.child,g.memoizedState=vw(f),g.childLanes=bw(o,z,f),u.memoizedState=yw,ap(null,g)):(bc(u),xw(u,H))}var se=o.memoizedState;if(se!==null&&(H=se.dehydrated,H!==null)){if(_)u.flags&256?(bc(u),u.flags&=-257,u=ww(o,u,f)):u.memoizedState!==null?(xc(),u.child=o.child,u.flags|=128,u=null):(xc(),H=g.fallback,x=u.mode,g=hy({mode:"visible",children:g.children},x),H=$u(H,x,f,null),H.flags|=2,g.return=u,H.return=u,g.sibling=H,u.child=g,Wu(u,o.child,null,f),g=u.child,g.memoizedState=vw(f),g.childLanes=bw(o,z,f),u.memoizedState=yw,u=ap(null,g));else if(bc(u),t5(H)){if(z=H.nextSibling&&H.nextSibling.dataset,z)var Ae=z.dgst;z=Ae,g=Error(n(419)),g.stack="",g.digest=z,Kf({value:g,source:null,stack:null}),u=ww(o,u,f)}else if(ii||_0(o,u,f,!1),z=(f&o.childLanes)!==0,ii||z){if(z=nn,z!==null&&(g=yn(z,f),g!==0&&g!==se.retryLane))throw se.retryLane=g,zu(o,g),Ca(z,o,g),mw;e5(H)||wy(),u=ww(o,u,f)}else e5(H)?(u.flags|=192,u.child=o.child,u=null):(o=se.treeContext,xn=ws(H.nextSibling),Pi=u,br=!0,fc=null,bs=!1,o!==null&&M9(u,o),u=xw(u,g.children),u.flags|=4096);return u}return x?(xc(),H=g.fallback,x=u.mode,se=o.child,Ae=se.sibling,g=Zo(se,{mode:"hidden",children:g.children}),g.subtreeFlags=se.subtreeFlags&65011712,Ae!==null?H=Zo(Ae,H):(H=$u(H,x,f,null),H.flags|=2),H.return=u,g.return=u,g.sibling=H,u.child=g,ap(null,g),g=u.child,H=o.child.memoizedState,H===null?H=vw(f):(x=H.cachePool,x!==null?(se=ri._currentValue,x=x.parent!==se?{parent:se,pool:se}:x):x=z9(),H={baseLanes:H.baseLanes|f,cachePool:x}),g.memoizedState=H,g.childLanes=bw(o,z,f),u.memoizedState=yw,ap(o.child,g)):(bc(u),f=o.child,o=f.sibling,f=Zo(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,o!==null&&(z=u.deletions,z===null?(u.deletions=[o],u.flags|=16):z.push(o)),u.child=f,u.memoizedState=null,f)}function xw(o,u){return u=hy({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function hy(o,u){return o=Wa(22,o,null,u),o.lanes=0,o}function ww(o,u,f){return Wu(u,o.child,null,f),o=xw(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Jj(o,u,f){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),D4(o.return,u,f)}function _w(o,u,f,g,x,_){var z=o.memoizedState;z===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x,treeForkCount:_}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=g,z.tail=f,z.tailMode=x,z.treeForkCount=_)}function ek(o,u,f){var g=u.pendingProps,x=g.revealOrder,_=g.tail;g=g.children;var z=qn.current,H=(z&2)!==0;if(H?(z=z&1|2,u.flags|=128):z&=1,de(qn,z),Li(o,u,g,f),g=br?Gf:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Jj(o,f,u);else if(o.tag===19)Jj(o,f,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(f=u.child,x=null;f!==null;)o=f.alternate,o!==null&&ey(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=u.child,u.child=null):(x=f.sibling,f.sibling=null),_w(u,!1,x,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=u.child,u.child=null;x!==null;){if(o=x.alternate,o!==null&&ey(o)===null){u.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}_w(u,!0,f,null,_,g);break;case"together":_w(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function il(o,u,f){if(o!==null&&(u.dependencies=o.dependencies),Sc|=u.lanes,(f&u.childLanes)===0)if(o!==null){if(_0(o,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,f=Zo(o,o.pendingProps),u.child=f,f.return=u;o.sibling!==null;)o=o.sibling,f=f.sibling=Zo(o,o.pendingProps),f.return=u;f.sibling=null}return u.child}function Sw(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&G1(o)))}function LQ(o,u,f){switch(u.tag){case 3:Qe(u,u.stateNode.containerInfo),mc(u,ri,o.memoizedState.cache),Vu();break;case 27:case 5:le(u);break;case 4:Qe(u,u.stateNode.containerInfo);break;case 10:mc(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,W4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(bc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?Zj(o,u,f):(bc(u),o=il(o,u,f),o!==null?o.sibling:null);bc(u);break;case 19:var x=(o.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(_0(o,u,f,!1),g=(f&u.childLanes)!==0),x){if(g)return ek(o,u,f);u.flags|=128}if(x=u.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),de(qn,qn.current),g)break;return null;case 22:return u.lanes=0,Gj(o,u,f,u.pendingProps);case 24:mc(u,ri,o.memoizedState.cache)}return il(o,u,f)}function tk(o,u,f){if(o!==null)if(o.memoizedProps!==u.pendingProps)ii=!0;else{if(!Sw(o,f)&&(u.flags&128)===0)return ii=!1,LQ(o,u,f);ii=(o.flags&131072)!==0}else ii=!1,br&&(u.flags&1048576)!==0&&R9(u,Gf,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(o=Gu(u.elementType),u.type=o,typeof o=="function")j4(o)?(g=Qu(o,g),u.tag=1,u=Qj(null,u,o,g,f)):(u.tag=0,u=gw(null,u,o,g,f));else{if(o!=null){var x=o.$$typeof;if(x===$){u.tag=11,u=Fj(null,u,o,g,f);break e}else if(x===E){u.tag=14,u=qj(null,u,o,g,f);break e}}throw u=Q(o)||o,Error(n(306,u,""))}}return u;case 0:return gw(o,u,u.type,u.pendingProps,f);case 1:return g=u.type,x=Qu(g,u.pendingProps),Qj(o,u,g,x,f);case 3:e:{if(Qe(u,u.stateNode.containerInfo),o===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;x=_.element,F4(o,u),ep(u,g,null,f);var z=u.memoizedState;if(g=z.cache,mc(u,ri,g),g!==_.cache&&L4(u,[ri],f,!0),Jf(),g=z.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:z.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=Yj(o,u,g,f);break e}else if(g!==x){x=gs(Error(n(424)),u),Kf(x),u=Yj(o,u,g,f);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(xn=ws(o.firstChild),Pi=u,br=!0,fc=null,bs=!0,f=G9(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Vu(),g===x){u=il(o,u,f);break e}Li(o,u,g,f)}u=u.child}return u;case 26:return dy(o,u),o===null?(f=hC(u.type,null,u.pendingProps,null))?u.memoizedState=f:br||(f=u.type,o=u.pendingProps,g=jy(pe.current).createElement(f),g[zr]=u,g[un]=o,Bi(g,f,o),sr(g),u.stateNode=g):u.memoizedState=hC(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return le(u),o===null&&br&&(g=u.stateNode=cC(u.type,u.pendingProps,pe.current),Pi=u,bs=!0,x=xn,jc(u.type)?(r5=x,xn=ws(g.firstChild)):xn=x),Li(o,u,u.pendingProps.children,f),dy(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&br&&((x=g=xn)&&(g=fY(g,u.type,u.pendingProps,bs),g!==null?(u.stateNode=g,Pi=u,xn=ws(g.firstChild),bs=!1,x=!0):x=!1),x||pc(u)),le(u),x=u.type,_=u.pendingProps,z=o!==null?o.memoizedProps:null,g=_.children,Yw(x,_)?g=null:z!==null&&Yw(x,z)&&(u.flags|=32),u.memoizedState!==null&&(x=Q4(o,u,jQ,null,null,f),xp._currentValue=x),dy(o,u),Li(o,u,g,f),u.child;case 6:return o===null&&br&&((o=f=xn)&&(f=pY(f,u.pendingProps,bs),f!==null?(u.stateNode=f,Pi=u,xn=null,o=!0):o=!1),o||pc(u)),null;case 13:return Zj(o,u,f);case 4:return Qe(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Wu(u,null,g,f):Li(o,u,g,f),u.child;case 11:return Fj(o,u,u.type,u.pendingProps,f);case 7:return Li(o,u,u.pendingProps,f),u.child;case 8:return Li(o,u,u.pendingProps.children,f),u.child;case 12:return Li(o,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,mc(u,u.type,g.value),Li(o,u,g.children,f),u.child;case 9:return x=u.type._context,g=u.pendingProps.children,qu(u),x=Di(x),g=g(x),u.flags|=1,Li(o,u,g,f),u.child;case 14:return qj(o,u,u.type,u.pendingProps,f);case 15:return Hj(o,u,u.type,u.pendingProps,f);case 19:return ek(o,u,f);case 31:return DQ(o,u,f);case 22:return Gj(o,u,f,u.pendingProps);case 24:return qu(u),g=Di(ri),o===null?(x=z4(),x===null&&(x=nn,_=B4(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=f),x=_),u.memoizedState={parent:g,cache:x},V4(u),mc(u,ri,x)):((o.lanes&f)!==0&&(F4(o,u),ep(u,null,null,f),Jf()),x=o.memoizedState,_=u.memoizedState,x.parent!==g?(x={parent:g,cache:g},u.memoizedState=x,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=x),mc(u,ri,g)):(g=_.cache,mc(u,ri,g),g!==x.cache&&L4(u,[ri],f,!0))),Li(o,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function al(o){o.flags|=4}function Tw(o,u,f,g,x){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(jk())o.flags|=8192;else throw Ku=Q1,$4}else o.flags&=-16777217}function rk(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!yC(u))if(jk())o.flags|=8192;else throw Ku=Q1,$4}function fy(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?gn():536870912,o.lanes|=u,M0|=u)}function sp(o,u){if(!br)switch(o.tailMode){case"hidden":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function wn(o){var u=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(u)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=f,u}function BQ(o,u,f){var g=u.pendingProps;switch(I4(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(u),null;case 1:return wn(u),null;case 3:return f=u.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),tl(ri),Ne(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(w0(u)?al(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,M4())),wn(u),null;case 26:var x=u.type,_=u.memoizedState;return o===null?(al(u),_!==null?(wn(u),rk(u,_)):(wn(u),Tw(u,x,null,g,f))):_?_!==o.memoizedState?(al(u),wn(u),rk(u,_)):(wn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==g&&al(u),wn(u),Tw(u,x,o,g,f)),null;case 27:if(we(u),f=pe.current,x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&al(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return wn(u),null}o=oe.current,w0(u)?P9(u):(o=cC(x,g,f),u.stateNode=o,al(u))}return wn(u),null;case 5:if(we(u),x=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&al(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return wn(u),null}if(_=oe.current,w0(u))P9(u);else{var z=jy(pe.current);switch(_){case 1:_=z.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=z.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=z.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=z.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?z.createElement("select",{is:g.is}):z.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?z.createElement(x,{is:g.is}):z.createElement(x)}}_[zr]=u,_[un]=g;e:for(z=u.child;z!==null;){if(z.tag===5||z.tag===6)_.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===u)break e;for(;z.sibling===null;){if(z.return===null||z.return===u)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}u.stateNode=_;e:switch(Bi(_,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&al(u)}}return wn(u),Tw(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,f),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==g&&al(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(o=pe.current,w0(u)){if(o=u.stateNode,f=u.memoizedProps,g=null,x=Pi,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[zr]=u,o=!!(o.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||Zk(o.nodeValue,f)),o||pc(u,!0)}else o=jy(o).createTextNode(g),o[zr]=u,u.stateNode=o}return wn(u),null;case 31:if(f=u.memoizedState,o===null||o.memoizedState!==null){if(g=w0(u),f!==null){if(o===null){if(!g)throw Error(n(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[zr]=u}else Vu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;wn(u),o=!1}else f=M4(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return u.flags&256?(Qa(u),u):(Qa(u),null);if((u.flags&128)!==0)throw Error(n(558))}return wn(u),null;case 13:if(g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=w0(u),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=u.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[zr]=u}else Vu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;wn(u),x=!1}else x=M4(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return u.flags&256?(Qa(u),u):(Qa(u),null)}return Qa(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,o=o!==null&&o.memoizedState!==null,f&&(g=u.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==x&&(g.flags|=2048)),f!==o&&f&&(u.child.flags|=8192),fy(u,u.updateQueue),wn(u),null);case 4:return Ne(),o===null&&Gw(u.stateNode.containerInfo),wn(u),null;case 10:return tl(u.type),wn(u),null;case 19:if(re(qn),g=u.memoizedState,g===null)return wn(u),null;if(x=(u.flags&128)!==0,_=g.rendering,_===null)if(x)sp(g,!1);else{if(Dn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(_=ey(o),_!==null){for(u.flags|=128,sp(g,!1),o=_.updateQueue,u.updateQueue=o,fy(u,o),u.subtreeFlags=0,o=f,f=u.child;f!==null;)C9(f,o),f=f.sibling;return de(qn,qn.current&1|2),br&&Jo(u,g.treeForkCount),u.child}o=o.sibling}g.tail!==null&&We()>vy&&(u.flags|=128,x=!0,sp(g,!1),u.lanes=4194304)}else{if(!x)if(o=ey(_),o!==null){if(u.flags|=128,x=!0,o=o.updateQueue,u.updateQueue=o,fy(u,o),sp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!br)return wn(u),null}else 2*We()-g.renderingStartTime>vy&&f!==536870912&&(u.flags|=128,x=!0,sp(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(o=g.last,o!==null?o.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=We(),o.sibling=null,f=qn.current,de(qn,x?f&1|2:f&1),br&&Jo(u,g.treeForkCount),o):(wn(u),null);case 22:case 23:return Qa(u),K4(),g=u.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&(wn(u),u.subtreeFlags&6&&(u.flags|=8192)):wn(u),f=u.updateQueue,f!==null&&fy(u,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),o!==null&&re(Hu),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),tl(ri),wn(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function UQ(o,u){switch(I4(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return tl(ri),Ne(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return we(u),null;case 31:if(u.memoizedState!==null){if(Qa(u),u.alternate===null)throw Error(n(340));Vu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Qa(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Vu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return re(qn),null;case 4:return Ne(),null;case 10:return tl(u.type),null;case 22:case 23:return Qa(u),K4(),o!==null&&re(Hu),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return tl(ri),null;case 25:return null;default:return null}}function nk(o,u){switch(I4(u),u.tag){case 3:tl(ri),Ne();break;case 26:case 27:case 5:we(u);break;case 4:Ne();break;case 31:u.memoizedState!==null&&Qa(u);break;case 13:Qa(u);break;case 19:re(qn);break;case 10:tl(u.type);break;case 22:case 23:Qa(u),K4(),o!==null&&re(Hu);break;case 24:tl(ri)}}function op(o,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&o)===o){g=void 0;var _=f.create,z=f.inst;g=_(),z.destroy=g}f=f.next}while(f!==x)}}catch(H){Fr(u,u.return,H)}}function wc(o,u,f){try{var g=u.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var _=x.next;g=_;do{if((g.tag&o)===o){var z=g.inst,H=z.destroy;if(H!==void 0){z.destroy=void 0,x=u;var se=f,Ae=H;try{Ae()}catch(Pe){Fr(x,se,Pe)}}}g=g.next}while(g!==_)}}catch(Pe){Fr(u,u.return,Pe)}}function ik(o){var u=o.updateQueue;if(u!==null){var f=o.stateNode;try{W9(u,f)}catch(g){Fr(o,o.return,g)}}}function ak(o,u,f){f.props=Qu(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(g){Fr(o,u,g)}}function lp(o,u){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof f=="function"?o.refCleanup=f(g):f.current=g}}catch(x){Fr(o,u,x)}}function vo(o,u){var f=o.ref,g=o.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){Fr(o,u,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){Fr(o,u,x)}else f.current=null}function sk(o){var u=o.type,f=o.memoizedProps,g=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){Fr(o,o.return,x)}}function Aw(o,u,f){try{var g=o.stateNode;oY(g,o.type,f,u),g[un]=u}catch(x){Fr(o,o.return,x)}}function ok(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&jc(o.type)||o.tag===4}function Ew(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ok(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&jc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Nw(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(o),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=Fn));else if(g!==4&&(g===27&&jc(o.type)&&(f=o.stateNode,u=null),o=o.child,o!==null))for(Nw(o,u,f),o=o.sibling;o!==null;)Nw(o,u,f),o=o.sibling}function py(o,u,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?f.insertBefore(o,u):f.appendChild(o);else if(g!==4&&(g===27&&jc(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(py(o,u,f),o=o.sibling;o!==null;)py(o,u,f),o=o.sibling}function lk(o){var u=o.stateNode,f=o.memoizedProps;try{for(var g=o.type,x=u.attributes;x.length;)u.removeAttributeNode(x[0]);Bi(u,g,f),u[zr]=o,u[un]=f}catch(_){Fr(o,o.return,_)}}var sl=!1,ai=!1,jw=!1,ck=typeof WeakSet=="function"?WeakSet:Set,Ei=null;function zQ(o,u){if(o=o.containerInfo,Xw=Py,o=w9(o),w4(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var z=0,H=-1,se=-1,Ae=0,Pe=0,ze=o,je=null;t:for(;;){for(var Ce;ze!==f||x!==0&&ze.nodeType!==3||(H=z+x),ze!==_||g!==0&&ze.nodeType!==3||(se=z+g),ze.nodeType===3&&(z+=ze.nodeValue.length),(Ce=ze.firstChild)!==null;)je=ze,ze=Ce;for(;;){if(ze===o)break t;if(je===f&&++Ae===x&&(H=z),je===_&&++Pe===g&&(se=z),(Ce=ze.nextSibling)!==null)break;ze=je,je=ze.parentNode}ze=Ce}f=H===-1||se===-1?null:{start:H,end:se}}else f=null}f=f||{start:0,end:0}}else f=null;for(Qw={focusedElem:o,selectionRange:f},Py=!1,Ei=u;Ei!==null;)if(u=Ei,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,Ei=o;else for(;Ei!==null;){switch(u=Ei,_=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)x=o[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,f=u,x=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var wt=Qu(f.type,x);o=g.getSnapshotBeforeUpdate(wt,_),g.__reactInternalSnapshotBeforeUpdate=o}catch(Mt){Fr(f,f.return,Mt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,f=o.nodeType,f===9)Jw(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Jw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,Ei=o;break}Ei=u.return}}function uk(o,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:ll(o,f),g&4&&op(5,f);break;case 1:if(ll(o,f),g&4)if(o=f.stateNode,u===null)try{o.componentDidMount()}catch(z){Fr(f,f.return,z)}else{var x=Qu(f.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(x,u,o.__reactInternalSnapshotBeforeUpdate)}catch(z){Fr(f,f.return,z)}}g&64&&ik(f),g&512&&lp(f,f.return);break;case 3:if(ll(o,f),g&64&&(o=f.updateQueue,o!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{W9(o,u)}catch(z){Fr(f,f.return,z)}}break;case 27:u===null&&g&4&&lk(f);case 26:case 5:ll(o,f),u===null&&g&4&&sk(f),g&512&&lp(f,f.return);break;case 12:ll(o,f);break;case 31:ll(o,f),g&4&&fk(o,f);break;case 13:ll(o,f),g&4&&pk(o,f),g&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=XQ.bind(null,f),mY(o,f))));break;case 22:if(g=f.memoizedState!==null||sl,!g){u=u!==null&&u.memoizedState!==null||ai,x=sl;var _=ai;sl=g,(ai=u)&&!_?cl(o,f,(f.subtreeFlags&8772)!==0):ll(o,f),sl=x,ai=_}break;case 30:break;default:ll(o,f)}}function dk(o){var u=o.alternate;u!==null&&(o.alternate=null,dk(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&vt(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Sn=null,Ea=!1;function ol(o,u,f){for(f=f.child;f!==null;)hk(o,u,f),f=f.sibling}function hk(o,u,f){if(ee&&typeof ee.onCommitFiberUnmount=="function")try{ee.onCommitFiberUnmount(Br,f)}catch{}switch(f.tag){case 26:ai||vo(f,u),ol(o,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:ai||vo(f,u);var g=Sn,x=Ea;jc(f.type)&&(Sn=f.stateNode,Ea=!1),ol(o,u,f),yp(f.stateNode),Sn=g,Ea=x;break;case 5:ai||vo(f,u);case 6:if(g=Sn,x=Ea,Sn=null,ol(o,u,f),Sn=g,Ea=x,Sn!==null)if(Ea)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(f.stateNode)}catch(_){Fr(f,u,_)}else try{Sn.removeChild(f.stateNode)}catch(_){Fr(f,u,_)}break;case 18:Sn!==null&&(Ea?(o=Sn,iC(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),V0(o)):iC(Sn,f.stateNode));break;case 4:g=Sn,x=Ea,Sn=f.stateNode.containerInfo,Ea=!0,ol(o,u,f),Sn=g,Ea=x;break;case 0:case 11:case 14:case 15:wc(2,f,u),ai||wc(4,f,u),ol(o,u,f);break;case 1:ai||(vo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&ak(f,u,g)),ol(o,u,f);break;case 21:ol(o,u,f);break;case 22:ai=(g=ai)||f.memoizedState!==null,ol(o,u,f),ai=g;break;default:ol(o,u,f)}}function fk(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{V0(o)}catch(f){Fr(u,u.return,f)}}}function pk(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{V0(o)}catch(f){Fr(u,u.return,f)}}function $Q(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new ck),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new ck),u;default:throw Error(n(435,o.tag))}}function my(o,u){var f=$Q(o);u.forEach(function(g){if(!f.has(g)){f.add(g);var x=QQ.bind(null,o,g);g.then(x,x)}})}function Na(o,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],_=o,z=u,H=z;e:for(;H!==null;){switch(H.tag){case 27:if(jc(H.type)){Sn=H.stateNode,Ea=!1;break e}break;case 5:Sn=H.stateNode,Ea=!1;break e;case 3:case 4:Sn=H.stateNode.containerInfo,Ea=!0;break e}H=H.return}if(Sn===null)throw Error(n(160));hk(_,z,x),Sn=null,Ea=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)mk(u,o),u=u.sibling}var Gs=null;function mk(o,u){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Na(u,o),ja(o),g&4&&(wc(3,o,o.return),op(3,o),wc(5,o,o.return));break;case 1:Na(u,o),ja(o),g&512&&(ai||f===null||vo(f,f.return)),g&64&&sl&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=Gs;if(Na(u,o),ja(o),g&512&&(ai||f===null||vo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=o.memoizedState,f===null)if(g===null)if(o.stateNode===null){e:{g=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":_=x.getElementsByTagName("title")[0],(!_||_[wa]||_[zr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(g),x.head.insertBefore(_,x.querySelector("head > title"))),Bi(_,g,f),_[zr]=o,sr(_),g=_;break e;case"link":var z=mC("link","href",x).get(g+(f.href||""));if(z){for(var H=0;H<z.length;H++)if(_=z[H],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(H,1);break t}}_=x.createElement(g),Bi(_,g,f),x.head.appendChild(_);break;case"meta":if(z=mC("meta","content",x).get(g+(f.content||""))){for(H=0;H<z.length;H++)if(_=z[H],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(H,1);break t}}_=x.createElement(g),Bi(_,g,f),x.head.appendChild(_);break;default:throw Error(n(468,g))}_[zr]=o,sr(_),g=_}o.stateNode=g}else gC(x,o.type,o.stateNode);else o.stateNode=pC(x,g,o.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?gC(x,o.type,o.stateNode):pC(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&Aw(o,o.memoizedProps,f.memoizedProps)}break;case 27:Na(u,o),ja(o),g&512&&(ai||f===null||vo(f,f.return)),f!==null&&g&4&&Aw(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Na(u,o),ja(o),g&512&&(ai||f===null||vo(f,f.return)),o.flags&32){x=o.stateNode;try{Wr(x,"")}catch(wt){Fr(o,o.return,wt)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,Aw(o,x,f!==null?f.memoizedProps:x)),g&1024&&(jw=!0);break;case 6:if(Na(u,o),ja(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,f=o.stateNode;try{f.nodeValue=g}catch(wt){Fr(o,o.return,wt)}}break;case 3:if(Oy=null,x=Gs,Gs=ky(u.containerInfo),Na(u,o),Gs=x,ja(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{V0(u.containerInfo)}catch(wt){Fr(o,o.return,wt)}jw&&(jw=!1,gk(o));break;case 4:g=Gs,Gs=ky(o.stateNode.containerInfo),Na(u,o),ja(o),Gs=g;break;case 12:Na(u,o),ja(o);break;case 31:Na(u,o),ja(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 13:Na(u,o),ja(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(yy=We()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 22:x=o.memoizedState!==null;var se=f!==null&&f.memoizedState!==null,Ae=sl,Pe=ai;if(sl=Ae||x,ai=Pe||se,Na(u,o),ai=Pe,sl=Ae,ja(o),g&8192)e:for(u=o.stateNode,u._visibility=x?u._visibility&-2:u._visibility|1,x&&(f===null||se||sl||ai||Yu(o)),f=null,u=o;;){if(u.tag===5||u.tag===26){if(f===null){se=f=u;try{if(_=se.stateNode,x)z=_.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{H=se.stateNode;var ze=se.memoizedProps.style,je=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;H.style.display=je==null||typeof je=="boolean"?"":(""+je).trim()}}catch(wt){Fr(se,se.return,wt)}}}else if(u.tag===6){if(f===null){se=u;try{se.stateNode.nodeValue=x?"":se.memoizedProps}catch(wt){Fr(se,se.return,wt)}}}else if(u.tag===18){if(f===null){se=u;try{var Ce=se.stateNode;x?aC(Ce,!0):aC(se.stateNode,!1)}catch(wt){Fr(se,se.return,wt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=o.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,my(o,f))));break;case 19:Na(u,o),ja(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,my(o,g)));break;case 30:break;case 21:break;default:Na(u,o),ja(o)}}function ja(o){var u=o.flags;if(u&2){try{for(var f,g=o.return;g!==null;){if(ok(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var x=f.stateNode,_=Ew(o);py(o,_,x);break;case 5:var z=f.stateNode;f.flags&32&&(Wr(z,""),f.flags&=-33);var H=Ew(o);py(o,H,z);break;case 3:case 4:var se=f.stateNode.containerInfo,Ae=Ew(o);Nw(o,Ae,se);break;default:throw Error(n(161))}}catch(Pe){Fr(o,o.return,Pe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function gk(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;gk(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ll(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)uk(o,u.alternate,u),u=u.sibling}function Yu(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:wc(4,u,u.return),Yu(u);break;case 1:vo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&ak(u,u.return,f),Yu(u);break;case 27:yp(u.stateNode);case 26:case 5:vo(u,u.return),Yu(u);break;case 22:u.memoizedState===null&&Yu(u);break;case 30:Yu(u);break;default:Yu(u)}o=o.sibling}}function cl(o,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,x=o,_=u,z=_.flags;switch(_.tag){case 0:case 11:case 15:cl(x,_,f),op(4,_);break;case 1:if(cl(x,_,f),g=_,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Ae){Fr(g,g.return,Ae)}if(g=_,x=g.updateQueue,x!==null){var H=g.stateNode;try{var se=x.shared.hiddenCallbacks;if(se!==null)for(x.shared.hiddenCallbacks=null,x=0;x<se.length;x++)K9(se[x],H)}catch(Ae){Fr(g,g.return,Ae)}}f&&z&64&&ik(_),lp(_,_.return);break;case 27:lk(_);case 26:case 5:cl(x,_,f),f&&g===null&&z&4&&sk(_),lp(_,_.return);break;case 12:cl(x,_,f);break;case 31:cl(x,_,f),f&&z&4&&fk(x,_);break;case 13:cl(x,_,f),f&&z&4&&pk(x,_);break;case 22:_.memoizedState===null&&cl(x,_,f),lp(_,_.return);break;case 30:break;default:cl(x,_,f)}u=u.sibling}}function kw(o,u){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Wf(f))}function Cw(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Wf(o))}function Ks(o,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)yk(o,u,f,g),u=u.sibling}function yk(o,u,f,g){var x=u.flags;switch(u.tag){case 0:case 11:case 15:Ks(o,u,f,g),x&2048&&op(9,u);break;case 1:Ks(o,u,f,g);break;case 3:Ks(o,u,f,g),x&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Wf(o)));break;case 12:if(x&2048){Ks(o,u,f,g),o=u.stateNode;try{var _=u.memoizedProps,z=_.id,H=_.onPostCommit;typeof H=="function"&&H(z,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(se){Fr(u,u.return,se)}}else Ks(o,u,f,g);break;case 31:Ks(o,u,f,g);break;case 13:Ks(o,u,f,g);break;case 23:break;case 22:_=u.stateNode,z=u.alternate,u.memoizedState!==null?_._visibility&2?Ks(o,u,f,g):cp(o,u):_._visibility&2?Ks(o,u,f,g):(_._visibility|=2,O0(o,u,f,g,(u.subtreeFlags&10256)!==0||!1)),x&2048&&kw(z,u);break;case 24:Ks(o,u,f,g),x&2048&&Cw(u.alternate,u);break;default:Ks(o,u,f,g)}}function O0(o,u,f,g,x){for(x=x&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=o,z=u,H=f,se=g,Ae=z.flags;switch(z.tag){case 0:case 11:case 15:O0(_,z,H,se,x),op(8,z);break;case 23:break;case 22:var Pe=z.stateNode;z.memoizedState!==null?Pe._visibility&2?O0(_,z,H,se,x):cp(_,z):(Pe._visibility|=2,O0(_,z,H,se,x)),x&&Ae&2048&&kw(z.alternate,z);break;case 24:O0(_,z,H,se,x),x&&Ae&2048&&Cw(z.alternate,z);break;default:O0(_,z,H,se,x)}u=u.sibling}}function cp(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=o,g=u,x=g.flags;switch(g.tag){case 22:cp(f,g),x&2048&&kw(g.alternate,g);break;case 24:cp(f,g),x&2048&&Cw(g.alternate,g);break;default:cp(f,g)}u=u.sibling}}var up=8192;function I0(o,u,f){if(o.subtreeFlags&up)for(o=o.child;o!==null;)vk(o,u,f),o=o.sibling}function vk(o,u,f){switch(o.tag){case 26:I0(o,u,f),o.flags&up&&o.memoizedState!==null&&NY(f,Gs,o.memoizedState,o.memoizedProps);break;case 5:I0(o,u,f);break;case 3:case 4:var g=Gs;Gs=ky(o.stateNode.containerInfo),I0(o,u,f),Gs=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=up,up=16777216,I0(o,u,f),up=g):I0(o,u,f));break;default:I0(o,u,f)}}function bk(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function dp(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ei=g,wk(g,o)}bk(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xk(o),o=o.sibling}function xk(o){switch(o.tag){case 0:case 11:case 15:dp(o),o.flags&2048&&wc(9,o,o.return);break;case 3:dp(o);break;case 12:dp(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,gy(o)):dp(o);break;default:dp(o)}}function gy(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ei=g,wk(g,o)}bk(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:wc(8,u,u.return),gy(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,gy(u));break;default:gy(u)}o=o.sibling}}function wk(o,u){for(;Ei!==null;){var f=Ei;switch(f.tag){case 0:case 11:case 15:wc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Wf(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ei=g;else e:for(f=o;Ei!==null;){g=Ei;var x=g.sibling,_=g.return;if(dk(g),g===f){Ei=null;break e}if(x!==null){x.return=_,Ei=x;break e}Ei=_}}}var VQ={getCacheForType:function(o){var u=Di(ri),f=u.data.get(o);return f===void 0&&(f=o(),u.data.set(o,f)),f},cacheSignal:function(){return Di(ri).controller.signal}},FQ=typeof WeakMap=="function"?WeakMap:Map,Or=0,nn=null,hr=null,pr=0,Vr=0,Ya=null,_c=!1,R0=!1,Ow=!1,ul=0,Dn=0,Sc=0,Zu=0,Iw=0,Za=0,M0=0,hp=null,ka=null,Rw=!1,yy=0,_k=0,vy=1/0,by=null,Tc=null,hi=0,Ac=null,P0=null,dl=0,Mw=0,Pw=null,Sk=null,fp=0,Dw=null;function Ja(){return(Or&2)!==0&&pr!==0?pr&-pr:W.T!==null?Vw():vn()}function Tk(){if(Za===0)if((pr&536870912)===0||br){var o=zt;zt<<=1,(zt&3932160)===0&&(zt=262144),Za=o}else Za=536870912;return o=Xa.current,o!==null&&(o.flags|=32),Za}function Ca(o,u,f){(o===nn&&(Vr===2||Vr===9)||o.cancelPendingCommit!==null)&&(D0(o,0),Ec(o,pr,Za,!1)),ei(o,f),((Or&2)===0||o!==nn)&&(o===nn&&((Or&2)===0&&(Zu|=f),Dn===4&&Ec(o,pr,Za,!1)),bo(o))}function Ak(o,u,f){if((Or&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&o.expiredLanes)===0||Ur(o,u),x=g?GQ(o,u):Bw(o,u,!0),_=g;do{if(x===0){R0&&!g&&Ec(o,u,0,!1);break}else{if(f=o.current.alternate,_&&!qQ(f)){x=Bw(o,u,!1),_=!1;continue}if(x===2){if(_=u,o.errorRecoveryDisabledLanes&_)var z=0;else z=o.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){u=z;e:{var H=o;x=hp;var se=H.current.memoizedState.isDehydrated;if(se&&(D0(H,z).flags|=256),z=Bw(H,z,!1),z!==2){if(Ow&&!se){H.errorRecoveryDisabledLanes|=_,Zu|=_,x=4;break e}_=ka,ka=x,_!==null&&(ka===null?ka=_:ka.push.apply(ka,_))}x=z}if(_=!1,x!==2)continue}}if(x===1){D0(o,0),Ec(o,u,0,!0);break}e:{switch(g=o,_=x,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Ec(g,u,Za,!_c);break e;case 2:ka=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(x=yy+300-We(),10<x)){if(Ec(g,u,Za,!_c),kt(g,0,!0)!==0)break e;dl=u,g.timeoutHandle=rC(Ek.bind(null,g,f,ka,by,Rw,u,Za,Zu,M0,_c,_,"Throttled",-0,0),x);break e}Ek(g,f,ka,by,Rw,u,Za,Zu,M0,_c,_,null,-0,0)}}break}while(!0);bo(o)}function Ek(o,u,f,g,x,_,z,H,se,Ae,Pe,ze,je,Ce){if(o.timeoutHandle=-1,ze=u.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},vk(u,_,ze);var wt=(_&62914560)===_?yy-We():(_&4194048)===_?_k-We():0;if(wt=jY(ze,wt),wt!==null){dl=_,o.cancelPendingCommit=wt(Mk.bind(null,o,u,_,f,g,x,z,H,se,Pe,ze,null,je,Ce)),Ec(o,_,z,!Ae);return}}Mk(o,u,_,f,g,x,z,H,se)}function qQ(o){for(var u=o;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],_=x.getSnapshot;x=x.value;try{if(!Ka(_(),x))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ec(o,u,f,g){u&=~Iw,u&=~Zu,o.suspendedLanes|=u,o.pingedLanes&=~u,g&&(o.warmLanes|=u),g=o.expirationTimes;for(var x=u;0<x;){var _=31-Ve(x),z=1<<_;g[_]=-1,x&=~z}f!==0&&_i(o,f,u)}function xy(){return(Or&6)===0?(pp(0),!1):!0}function Lw(){if(hr!==null){if(Vr===0)var o=hr.return;else o=hr,el=Fu=null,J4(o),E0=null,Qf=0,o=hr;for(;o!==null;)nk(o.alternate,o),o=o.return;hr=null}}function D0(o,u){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,uY(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),dl=0,Lw(),nn=o,hr=f=Zo(o.current,null),pr=u,Vr=0,Ya=null,_c=!1,R0=Ur(o,u),Ow=!1,M0=Za=Iw=Zu=Sc=Dn=0,ka=hp=null,Rw=!1,(u&8)!==0&&(u|=u&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=u;0<g;){var x=31-Ve(g),_=1<<x;u|=o[x],g&=~_}return ul=u,$1(),f}function Nk(o,u){Zt=null,W.H=ip,u===A0||u===X1?(u=F9(),Vr=3):u===$4?(u=F9(),Vr=4):Vr=u===mw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ya=u,hr===null&&(Dn=1,cy(o,gs(u,o.current)))}function jk(){var o=Xa.current;return o===null?!0:(pr&4194048)===pr?xs===null:(pr&62914560)===pr||(pr&536870912)!==0?o===xs:!1}function kk(){var o=W.H;return W.H=ip,o===null?ip:o}function Ck(){var o=W.A;return W.A=VQ,o}function wy(){Dn=4,_c||(pr&4194048)!==pr&&Xa.current!==null||(R0=!0),(Sc&134217727)===0&&(Zu&134217727)===0||nn===null||Ec(nn,pr,Za,!1)}function Bw(o,u,f){var g=Or;Or|=2;var x=kk(),_=Ck();(nn!==o||pr!==u)&&(by=null,D0(o,u)),u=!1;var z=Dn;e:do try{if(Vr!==0&&hr!==null){var H=hr,se=Ya;switch(Vr){case 8:Lw(),z=6;break e;case 3:case 2:case 9:case 6:Xa.current===null&&(u=!0);var Ae=Vr;if(Vr=0,Ya=null,L0(o,H,se,Ae),f&&R0){z=0;break e}break;default:Ae=Vr,Vr=0,Ya=null,L0(o,H,se,Ae)}}HQ(),z=Dn;break}catch(Pe){Nk(o,Pe)}while(!0);return u&&o.shellSuspendCounter++,el=Fu=null,Or=g,W.H=x,W.A=_,hr===null&&(nn=null,pr=0,$1()),z}function HQ(){for(;hr!==null;)Ok(hr)}function GQ(o,u){var f=Or;Or|=2;var g=kk(),x=Ck();nn!==o||pr!==u?(by=null,vy=We()+500,D0(o,u)):R0=Ur(o,u);e:do try{if(Vr!==0&&hr!==null){u=hr;var _=Ya;t:switch(Vr){case 1:Vr=0,Ya=null,L0(o,u,_,1);break;case 2:case 9:if($9(_)){Vr=0,Ya=null,Ik(u);break}u=function(){Vr!==2&&Vr!==9||nn!==o||(Vr=7),bo(o)},_.then(u,u);break e;case 3:Vr=7;break e;case 4:Vr=5;break e;case 7:$9(_)?(Vr=0,Ya=null,Ik(u)):(Vr=0,Ya=null,L0(o,u,_,7));break;case 5:var z=null;switch(hr.tag){case 26:z=hr.memoizedState;case 5:case 27:var H=hr;if(z?yC(z):H.stateNode.complete){Vr=0,Ya=null;var se=H.sibling;if(se!==null)hr=se;else{var Ae=H.return;Ae!==null?(hr=Ae,_y(Ae)):hr=null}break t}}Vr=0,Ya=null,L0(o,u,_,5);break;case 6:Vr=0,Ya=null,L0(o,u,_,6);break;case 8:Lw(),Dn=6;break e;default:throw Error(n(462))}}KQ();break}catch(Pe){Nk(o,Pe)}while(!0);return el=Fu=null,W.H=g,W.A=x,Or=f,hr!==null?0:(nn=null,pr=0,$1(),Dn)}function KQ(){for(;hr!==null&&!Xt();)Ok(hr)}function Ok(o){var u=tk(o.alternate,o,ul);o.memoizedProps=o.pendingProps,u===null?_y(o):hr=u}function Ik(o){var u=o,f=u.alternate;switch(u.tag){case 15:case 0:u=Xj(f,u,u.pendingProps,u.type,void 0,pr);break;case 11:u=Xj(f,u,u.pendingProps,u.type.render,u.ref,pr);break;case 5:J4(u);default:nk(f,u),u=hr=C9(u,ul),u=tk(f,u,ul)}o.memoizedProps=o.pendingProps,u===null?_y(o):hr=u}function L0(o,u,f,g){el=Fu=null,J4(u),E0=null,Qf=0;var x=u.return;try{if(PQ(o,x,u,f,pr)){Dn=1,cy(o,gs(f,o.current)),hr=null;return}}catch(_){if(x!==null)throw hr=x,_;Dn=1,cy(o,gs(f,o.current)),hr=null;return}u.flags&32768?(br||g===1?o=!0:R0||(pr&536870912)!==0?o=!1:(_c=o=!0,(g===2||g===9||g===3||g===6)&&(g=Xa.current,g!==null&&g.tag===13&&(g.flags|=16384))),Rk(u,o)):_y(u)}function _y(o){var u=o;do{if((u.flags&32768)!==0){Rk(u,_c);return}o=u.return;var f=BQ(u.alternate,u,ul);if(f!==null){hr=f;return}if(u=u.sibling,u!==null){hr=u;return}hr=u=o}while(u!==null);Dn===0&&(Dn=5)}function Rk(o,u){do{var f=UQ(o.alternate,o);if(f!==null){f.flags&=32767,hr=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(o=o.sibling,o!==null)){hr=o;return}hr=o=f}while(o!==null);Dn=6,hr=null}function Mk(o,u,f,g,x,_,z,H,se){o.cancelPendingCommit=null;do Sy();while(hi!==0);if((Or&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=E4,nr(o,f,_,z,H,se),o===nn&&(hr=nn=null,pr=0),P0=u,Ac=o,dl=f,Mw=_,Pw=x,Sk=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,YQ(Je,function(){return Uk(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=W.T,W.T=null,x=J.p,J.p=2,z=Or,Or|=4;try{zQ(o,u,f)}finally{Or=z,J.p=x,W.T=g}}hi=1,Pk(),Dk(),Lk()}}function Pk(){if(hi===1){hi=0;var o=Ac,u=P0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=W.T,W.T=null;var g=J.p;J.p=2;var x=Or;Or|=4;try{mk(u,o);var _=Qw,z=w9(o.containerInfo),H=_.focusedElem,se=_.selectionRange;if(z!==H&&H&&H.ownerDocument&&x9(H.ownerDocument.documentElement,H)){if(se!==null&&w4(H)){var Ae=se.start,Pe=se.end;if(Pe===void 0&&(Pe=Ae),"selectionStart"in H)H.selectionStart=Ae,H.selectionEnd=Math.min(Pe,H.value.length);else{var ze=H.ownerDocument||document,je=ze&&ze.defaultView||window;if(je.getSelection){var Ce=je.getSelection(),wt=H.textContent.length,Mt=Math.min(se.start,wt),Yr=se.end===void 0?Mt:Math.min(se.end,wt);!Ce.extend&&Mt>Yr&&(z=Yr,Yr=Mt,Mt=z);var be=b9(H,Mt),fe=b9(H,Yr);if(be&&fe&&(Ce.rangeCount!==1||Ce.anchorNode!==be.node||Ce.anchorOffset!==be.offset||Ce.focusNode!==fe.node||Ce.focusOffset!==fe.offset)){var Se=ze.createRange();Se.setStart(be.node,be.offset),Ce.removeAllRanges(),Mt>Yr?(Ce.addRange(Se),Ce.extend(fe.node,fe.offset)):(Se.setEnd(fe.node,fe.offset),Ce.addRange(Se))}}}}for(ze=[],Ce=H;Ce=Ce.parentNode;)Ce.nodeType===1&&ze.push({element:Ce,left:Ce.scrollLeft,top:Ce.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<ze.length;H++){var Le=ze[H];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}Py=!!Xw,Qw=Xw=null}finally{Or=x,J.p=g,W.T=f}}o.current=u,hi=2}}function Dk(){if(hi===2){hi=0;var o=Ac,u=P0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=W.T,W.T=null;var g=J.p;J.p=2;var x=Or;Or|=4;try{uk(o,u.alternate,u)}finally{Or=x,J.p=g,W.T=f}}hi=3}}function Lk(){if(hi===4||hi===3){hi=0,ye();var o=Ac,u=P0,f=dl,g=Sk;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?hi=5:(hi=0,P0=Ac=null,Bk(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(Tc=null),rn(f),u=u.stateNode,ee&&typeof ee.onCommitFiberRoot=="function")try{ee.onCommitFiberRoot(Br,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=W.T,x=J.p,J.p=2,W.T=null;try{for(var _=o.onRecoverableError,z=0;z<g.length;z++){var H=g[z];_(H.value,{componentStack:H.stack})}}finally{W.T=u,J.p=x}}(dl&3)!==0&&Sy(),bo(o),x=o.pendingLanes,(f&261930)!==0&&(x&42)!==0?o===Dw?fp++:(fp=0,Dw=o):fp=0,pp(0)}}function Bk(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Wf(u)))}function Sy(){return Pk(),Dk(),Lk(),Uk()}function Uk(){if(hi!==5)return!1;var o=Ac,u=Mw;Mw=0;var f=rn(dl),g=W.T,x=J.p;try{J.p=32>f?32:f,W.T=null,f=Pw,Pw=null;var _=Ac,z=dl;if(hi=0,P0=Ac=null,dl=0,(Or&6)!==0)throw Error(n(331));var H=Or;if(Or|=4,xk(_.current),yk(_,_.current,z,f),Or=H,pp(0,!1),ee&&typeof ee.onPostCommitFiberRoot=="function")try{ee.onPostCommitFiberRoot(Br,_)}catch{}return!0}finally{J.p=x,W.T=g,Bk(o,u)}}function zk(o,u,f){u=gs(f,u),u=pw(o.stateNode,u,2),o=vc(o,u,2),o!==null&&(ei(o,2),bo(o))}function Fr(o,u,f){if(o.tag===3)zk(o,o,f);else for(;u!==null;){if(u.tag===3){zk(u,o,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Tc===null||!Tc.has(g))){o=gs(f,o),f=$j(2),g=vc(u,f,2),g!==null&&(Vj(f,g,u,o),ei(g,2),bo(g));break}}u=u.return}}function Uw(o,u,f){var g=o.pingCache;if(g===null){g=o.pingCache=new FQ;var x=new Set;g.set(u,x)}else x=g.get(u),x===void 0&&(x=new Set,g.set(u,x));x.has(f)||(Ow=!0,x.add(f),o=WQ.bind(null,o,u,f),u.then(o,o))}function WQ(o,u,f){var g=o.pingCache;g!==null&&g.delete(u),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,nn===o&&(pr&f)===f&&(Dn===4||Dn===3&&(pr&62914560)===pr&&300>We()-yy?(Or&2)===0&&D0(o,0):Iw|=f,M0===pr&&(M0=0)),bo(o)}function $k(o,u){u===0&&(u=gn()),o=zu(o,u),o!==null&&(ei(o,u),bo(o))}function XQ(o){var u=o.memoizedState,f=0;u!==null&&(f=u.retryLane),$k(o,f)}function QQ(o,u){var f=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),$k(o,f)}function YQ(o,u){return pt(o,u)}var Ty=null,B0=null,zw=!1,Ay=!1,$w=!1,Nc=0;function bo(o){o!==B0&&o.next===null&&(B0===null?Ty=B0=o:B0=B0.next=o),Ay=!0,zw||(zw=!0,JQ())}function pp(o,u){if(!$w&&Ay){$w=!0;do for(var f=!1,g=Ty;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var _=0;else{var z=g.suspendedLanes,H=g.pingedLanes;_=(1<<31-Ve(42|o)+1)-1,_&=x&~(z&~H),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,Hk(g,_))}else _=pr,_=kt(g,g===nn?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Ur(g,_)||(f=!0,Hk(g,_));g=g.next}while(f);$w=!1}}function ZQ(){Vk()}function Vk(){Ay=zw=!1;var o=0;Nc!==0&&cY()&&(o=Nc);for(var u=We(),f=null,g=Ty;g!==null;){var x=g.next,_=Fk(g,u);_===0?(g.next=null,f===null?Ty=x:f.next=x,x===null&&(B0=f)):(f=g,(o!==0||(_&3)!==0)&&(Ay=!0)),g=x}hi!==0&&hi!==5||pp(o),Nc!==0&&(Nc=0)}function Fk(o,u){for(var f=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var z=31-Ve(_),H=1<<z,se=x[z];se===-1?((H&f)===0||(H&g)!==0)&&(x[z]=cr(H,u)):se<=u&&(o.expiredLanes|=H),_&=~H}if(u=nn,f=pr,f=kt(o,o===u?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,f===0||o===u&&(Vr===2||Vr===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&St(g),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||Ur(o,f)){if(u=f&-f,u===o.callbackPriority)return u;switch(g!==null&&St(g),rn(f)){case 2:case 8:f=ot;break;case 32:f=Je;break;case 268435456:f=Yt;break;default:f=Je}return g=qk.bind(null,o),f=pt(f,g),o.callbackPriority=u,o.callbackNode=f,u}return g!==null&&g!==null&&St(g),o.callbackPriority=2,o.callbackNode=null,2}function qk(o,u){if(hi!==0&&hi!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Sy()&&o.callbackNode!==f)return null;var g=pr;return g=kt(o,o===nn?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(Ak(o,g,u),Fk(o,We()),o.callbackNode!=null&&o.callbackNode===f?qk.bind(null,o):null)}function Hk(o,u){if(Sy())return null;Ak(o,u,!0)}function JQ(){dY(function(){(Or&6)!==0?pt(gt,ZQ):Vk()})}function Vw(){if(Nc===0){var o=S0;o===0&&(o=dr,dr<<=1,(dr&261888)===0&&(dr=256)),Nc=o}return Nc}function Gk(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Sa(""+o)}function Kk(o,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,o.id&&f.setAttribute("form",o.id),u.parentNode.insertBefore(f,u),o=new FormData(o),f.parentNode.removeChild(f),o}function eY(o,u,f,g,x){if(u==="submit"&&f&&f.stateNode===x){var _=Gk((x[un]||null).action),z=g.submitter;z&&(u=(u=z[un]||null)?Gk(u.formAction):z.getAttribute("formAction"),u!==null&&(_=u,z=null));var H=new Ru("action","action",null,g,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Nc!==0){var se=z?Kk(x,z):new FormData(x);lw(f,{pending:!0,data:se,method:x.method,action:_},null,se)}}else typeof _=="function"&&(H.preventDefault(),se=z?Kk(x,z):new FormData(x),lw(f,{pending:!0,data:se,method:x.method,action:_},_,se))},currentTarget:x}]})}}for(var Fw=0;Fw<A4.length;Fw++){var qw=A4[Fw],tY=qw.toLowerCase(),rY=qw[0].toUpperCase()+qw.slice(1);Hs(tY,"on"+rY)}Hs(T9,"onAnimationEnd"),Hs(A9,"onAnimationIteration"),Hs(E9,"onAnimationStart"),Hs("dblclick","onDoubleClick"),Hs("focusin","onFocus"),Hs("focusout","onBlur"),Hs(vQ,"onTransitionRun"),Hs(bQ,"onTransitionStart"),Hs(xQ,"onTransitionCancel"),Hs(N9,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mp));function Wk(o,u){u=(u&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],x=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var z=g.length-1;0<=z;z--){var H=g[z],se=H.instance,Ae=H.currentTarget;if(H=H.listener,se!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=Ae;try{_(x)}catch(Pe){z1(Pe)}x.currentTarget=null,_=se}else for(z=0;z<g.length;z++){if(H=g[z],se=H.instance,Ae=H.currentTarget,H=H.listener,se!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=Ae;try{_(x)}catch(Pe){z1(Pe)}x.currentTarget=null,_=se}}}}function fr(o,u){var f=u[xa];f===void 0&&(f=u[xa]=new Set);var g=o+"__bubble";f.has(g)||(Xk(u,o,2,!1),f.add(g))}function Hw(o,u,f){var g=0;u&&(g|=4),Xk(f,o,g,u)}var Ey="_reactListening"+Math.random().toString(36).slice(2);function Gw(o){if(!o[Ey]){o[Ey]=!0,dn.forEach(function(f){f!=="selectionchange"&&(nY.has(f)||Hw(f,!1,o),Hw(f,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Ey]||(u[Ey]=!0,Hw("selectionchange",!1,u))}}function Xk(o,u,f,g){switch(TC(u)){case 2:var x=OY;break;case 8:x=IY;break;default:x=o5}f=x.bind(null,u,f,o),x=void 0,!Lf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(u,f,{capture:!0,passive:x}):o.addEventListener(u,f,!0):x!==void 0?o.addEventListener(u,f,{passive:x}):o.addEventListener(u,f,!1)}function Kw(o,u,f,g,x){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var H=g.stateNode.containerInfo;if(H===x)break;if(z===4)for(z=g.return;z!==null;){var se=z.tag;if((se===3||se===4)&&z.stateNode.containerInfo===x)return;z=z.return}for(;H!==null;){if(z=he(H),z===null)return;if(se=z.tag,se===5||se===6||se===26||se===27){g=_=z;continue e}H=H.parentNode}}g=g.return}T1(function(){var Ae=_,Pe=u0(f),ze=[];e:{var je=j9.get(o);if(je!==void 0){var Ce=Ru,wt=o;switch(o){case"keypress":if(Iu(f)===0)break e;case"keydown":case"keyup":Ce=R1;break;case"focusin":wt="focus",Ce=lc;break;case"focusout":wt="blur",Ce=lc;break;case"beforeblur":case"afterblur":Ce=lc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=N1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=P1;break;case T9:case A9:case E9:Ce=f0;break;case N9:Ce=p0;break;case"scroll":case"scrollend":Ce=A1;break;case"wheel":Ce=L1;break;case"copy":case"cut":case"paste":Ce=k1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=Vf;break;case"toggle":case"beforetoggle":Ce=uc}var Mt=(u&4)!==0,Yr=!Mt&&(o==="scroll"||o==="scrollend"),be=Mt?je!==null?je+"Capture":null:je;Mt=[];for(var fe=Ae,Se;fe!==null;){var Le=fe;if(Se=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||Se===null||be===null||(Le=Ta(fe,be),Le!=null&&Mt.push(gp(fe,Le,Se))),Yr)break;fe=fe.return}0<Mt.length&&(je=new Ce(je,wt,null,f,Pe),ze.push({event:je,listeners:Mt}))}}if((u&7)===0){e:{if(je=o==="mouseover"||o==="pointerover",Ce=o==="mouseout"||o==="pointerout",je&&f!==c0&&(wt=f.relatedTarget||f.fromElement)&&(he(wt)||wt[jn]))break e;if((Ce||je)&&(je=Pe.window===Pe?Pe:(je=Pe.ownerDocument)?je.defaultView||je.parentWindow:window,Ce?(wt=f.relatedTarget||f.toElement,Ce=Ae,wt=wt?he(wt):null,wt!==null&&(Yr=a(wt),Mt=wt.tag,wt!==Yr||Mt!==5&&Mt!==27&&Mt!==6)&&(wt=null)):(Ce=null,wt=Ae),Ce!==wt)){if(Mt=E1,Le="onMouseLeave",be="onMouseEnter",fe="mouse",(o==="pointerout"||o==="pointerover")&&(Mt=Vf,Le="onPointerLeave",be="onPointerEnter",fe="pointer"),Yr=Ce==null?je:rt(Ce),Se=wt==null?je:rt(wt),je=new Mt(Le,fe+"leave",Ce,f,Pe),je.target=Yr,je.relatedTarget=Se,Le=null,he(Pe)===Ae&&(Mt=new Mt(be,fe+"enter",wt,f,Pe),Mt.target=Se,Mt.relatedTarget=Yr,Le=Mt),Yr=Le,Ce&&wt)t:{for(Mt=iY,be=Ce,fe=wt,Se=0,Le=be;Le;Le=Mt(Le))Se++;Le=0;for(var Nt=fe;Nt;Nt=Mt(Nt))Le++;for(;0<Se-Le;)be=Mt(be),Se--;for(;0<Le-Se;)fe=Mt(fe),Le--;for(;Se--;){if(be===fe||fe!==null&&be===fe.alternate){Mt=be;break t}be=Mt(be),fe=Mt(fe)}Mt=null}else Mt=null;Ce!==null&&Qk(ze,je,Ce,Mt,!1),wt!==null&&Yr!==null&&Qk(ze,Yr,wt,Mt,!0)}}e:{if(je=Ae?rt(Ae):window,Ce=je.nodeName&&je.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&je.type==="file")var Ar=f9;else if(Aa(je))if(p9)Ar=mQ;else{Ar=fQ;var At=hQ}else Ce=je.nodeName,!Ce||Ce.toLowerCase()!=="input"||je.type!=="checkbox"&&je.type!=="radio"?Ae&&Ko(Ae.elementType)&&(Ar=f9):Ar=pQ;if(Ar&&(Ar=Ar(o,Ae))){Lu(ze,Ar,f,Pe);break e}At&&At(o,je,Ae),o==="focusout"&&Ae&&je.type==="number"&&Ae.memoizedProps.value!=null&&et(je,"number",je.value)}switch(At=Ae?rt(Ae):window,o){case"focusin":(Aa(At)||At.contentEditable==="true")&&(m0=At,_4=Ae,Hf=null);break;case"focusout":Hf=_4=m0=null;break;case"mousedown":S4=!0;break;case"contextmenu":case"mouseup":case"dragend":S4=!1,_9(ze,f,Pe);break;case"selectionchange":if(yQ)break;case"keydown":case"keyup":_9(ze,f,Pe)}var er;if(O)e:{switch(o){case"compositionstart":var mr="onCompositionStart";break e;case"compositionend":mr="onCompositionEnd";break e;case"compositionupdate":mr="onCompositionUpdate";break e}mr=void 0}else or?Rr(o,f)&&(mr="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(mr="onCompositionStart");mr&&(_e&&f.locale!=="ko"&&(or||mr!=="onCompositionStart"?mr==="onCompositionEnd"&&or&&(er=ic()):(Ga=Pe,d0="value"in Ga?Ga.value:Ga.textContent,or=!0)),At=Ny(Ae,mr),0<At.length&&(mr=new Uf(mr,o,null,f,Pe),ze.push({event:mr,listeners:At}),er?mr.data=er:(er=ti(f),er!==null&&(mr.data=er)))),(er=K?Ti(o,f):Ai(o,f))&&(mr=Ny(Ae,"onBeforeInput"),0<mr.length&&(At=new Uf("onBeforeInput","beforeinput",null,f,Pe),ze.push({event:At,listeners:mr}),At.data=er)),eY(ze,o,Ae,f,Pe)}Wk(ze,u)})}function gp(o,u,f){return{instance:o,listener:u,currentTarget:f}}function Ny(o,u){for(var f=u+"Capture",g=[];o!==null;){var x=o,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=Ta(o,f),x!=null&&g.unshift(gp(o,x,_)),x=Ta(o,u),x!=null&&g.push(gp(o,x,_))),o.tag===3)return g;o=o.return}return[]}function iY(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Qk(o,u,f,g,x){for(var _=u._reactName,z=[];f!==null&&f!==g;){var H=f,se=H.alternate,Ae=H.stateNode;if(H=H.tag,se!==null&&se===g)break;H!==5&&H!==26&&H!==27||Ae===null||(se=Ae,x?(Ae=Ta(f,_),Ae!=null&&z.unshift(gp(f,Ae,se))):x||(Ae=Ta(f,_),Ae!=null&&z.push(gp(f,Ae,se)))),f=f.return}z.length!==0&&o.push({event:u,listeners:z})}var aY=/\r\n?/g,sY=/\u0000|\uFFFD/g;function Yk(o){return(typeof o=="string"?o:""+o).replace(aY,`
`).replace(sY,"")}function Zk(o,u){return u=Yk(u),Yk(o)===u}function Qr(o,u,f,g,x,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Wr(o,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Wr(o,""+g);break;case"className":Fs(o,"class",g);break;case"tabIndex":Fs(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Fs(o,f,g);break;case"style":nc(o,g,_);break;case"data":if(u!=="object"){Fs(o,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){o.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Sa(""+g),o.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&Qr(o,u,"name",x.name,x,null),Qr(o,u,"formEncType",x.formEncType,x,null),Qr(o,u,"formMethod",x.formMethod,x,null),Qr(o,u,"formTarget",x.formTarget,x,null)):(Qr(o,u,"encType",x.encType,x,null),Qr(o,u,"method",x.method,x,null),Qr(o,u,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Sa(""+g),o.setAttribute(f,g);break;case"onClick":g!=null&&(o.onclick=Fn);break;case"onScroll":g!=null&&fr("scroll",o);break;case"onScrollEnd":g!=null&&fr("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}f=Sa(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""+g):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":g===!0?o.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,g):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(f,g):o.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(f):o.setAttribute(f,g);break;case"popover":fr("beforetoggle",o),fr("toggle",o),Vs(o,"popover",g);break;case"xlinkActuate":sa(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":sa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":sa(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":sa(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":sa(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":sa(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":sa(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":sa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":sa(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Vs(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ou.get(f)||f,Vs(o,f,g))}}function Ww(o,u,f,g,x,_){switch(f){case"style":nc(o,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=f}}break;case"children":typeof g=="string"?Wr(o,g):(typeof g=="number"||typeof g=="bigint")&&Wr(o,""+g);break;case"onScroll":g!=null&&fr("scroll",o);break;case"onScrollEnd":g!=null&&fr("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$r.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),u=f.slice(2,x?f.length-7:void 0),_=o[un]||null,_=_!=null?_[f]:null,typeof _=="function"&&o.removeEventListener(u,_,x),typeof g=="function")){typeof _!="function"&&_!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(u,g,x);break e}f in o?o[f]=g:g===!0?o.setAttribute(f,""):Vs(o,f,g)}}}function Bi(o,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fr("error",o),fr("load",o);var g=!1,x=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var z=f[_];if(z!=null)switch(_){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Qr(o,u,_,z,f,null)}}x&&Qr(o,u,"srcSet",f.srcSet,f,null),g&&Qr(o,u,"src",f.src,f,null);return;case"input":fr("invalid",o);var H=_=z=x=null,se=null,Ae=null;for(g in f)if(f.hasOwnProperty(g)){var Pe=f[g];if(Pe!=null)switch(g){case"name":x=Pe;break;case"type":z=Pe;break;case"checked":se=Pe;break;case"defaultChecked":Ae=Pe;break;case"value":_=Pe;break;case"defaultValue":H=Pe;break;case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(n(137,u));break;default:Qr(o,u,g,Pe,f,null)}}Fe(o,_,H,se,Ae,z,x,!1);return;case"select":fr("invalid",o),g=z=_=null;for(x in f)if(f.hasOwnProperty(x)&&(H=f[x],H!=null))switch(x){case"value":_=H;break;case"defaultValue":z=H;break;case"multiple":g=H;default:Qr(o,u,x,H,f,null)}u=_,f=z,o.multiple=!!g,u!=null?Xe(o,!!g,u,!1):f!=null&&Xe(o,!!g,f,!0);return;case"textarea":fr("invalid",o),_=x=g=null;for(z in f)if(f.hasOwnProperty(z)&&(H=f[z],H!=null))switch(z){case"value":g=H;break;case"defaultValue":x=H;break;case"children":_=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:Qr(o,u,z,H,f,null)}Jt(o,g,x,_);return;case"option":for(se in f)if(f.hasOwnProperty(se)&&(g=f[se],g!=null))switch(se){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Qr(o,u,se,g,f,null)}return;case"dialog":fr("beforetoggle",o),fr("toggle",o),fr("cancel",o),fr("close",o);break;case"iframe":case"object":fr("load",o);break;case"video":case"audio":for(g=0;g<mp.length;g++)fr(mp[g],o);break;case"image":fr("error",o),fr("load",o);break;case"details":fr("toggle",o);break;case"embed":case"source":case"link":fr("error",o),fr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ae in f)if(f.hasOwnProperty(Ae)&&(g=f[Ae],g!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Qr(o,u,Ae,g,f,null)}return;default:if(Ko(u)){for(Pe in f)f.hasOwnProperty(Pe)&&(g=f[Pe],g!==void 0&&Ww(o,u,Pe,g,f,void 0));return}}for(H in f)f.hasOwnProperty(H)&&(g=f[H],g!=null&&Qr(o,u,H,g,f,null))}function oY(o,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,z=null,H=null,se=null,Ae=null,Pe=null;for(Ce in f){var ze=f[Ce];if(f.hasOwnProperty(Ce)&&ze!=null)switch(Ce){case"checked":break;case"value":break;case"defaultValue":se=ze;default:g.hasOwnProperty(Ce)||Qr(o,u,Ce,null,g,ze)}}for(var je in g){var Ce=g[je];if(ze=f[je],g.hasOwnProperty(je)&&(Ce!=null||ze!=null))switch(je){case"type":_=Ce;break;case"name":x=Ce;break;case"checked":Ae=Ce;break;case"defaultChecked":Pe=Ce;break;case"value":z=Ce;break;case"defaultValue":H=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(137,u));break;default:Ce!==ze&&Qr(o,u,je,Ce,g,ze)}}ke(o,z,H,se,Ae,Pe,_,x);return;case"select":Ce=z=H=je=null;for(_ in f)if(se=f[_],f.hasOwnProperty(_)&&se!=null)switch(_){case"value":break;case"multiple":Ce=se;default:g.hasOwnProperty(_)||Qr(o,u,_,null,g,se)}for(x in g)if(_=g[x],se=f[x],g.hasOwnProperty(x)&&(_!=null||se!=null))switch(x){case"value":je=_;break;case"defaultValue":H=_;break;case"multiple":z=_;default:_!==se&&Qr(o,u,x,_,g,se)}u=H,f=z,g=Ce,je!=null?Xe(o,!!f,je,!1):!!g!=!!f&&(u!=null?Xe(o,!!f,u,!0):Xe(o,!!f,f?[]:"",!1));return;case"textarea":Ce=je=null;for(H in f)if(x=f[H],f.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Qr(o,u,H,null,g,x)}for(z in g)if(x=g[z],_=f[z],g.hasOwnProperty(z)&&(x!=null||_!=null))switch(z){case"value":je=x;break;case"defaultValue":Ce=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==_&&Qr(o,u,z,x,g,_)}ur(o,je,Ce);return;case"option":for(var wt in f)if(je=f[wt],f.hasOwnProperty(wt)&&je!=null&&!g.hasOwnProperty(wt))switch(wt){case"selected":o.selected=!1;break;default:Qr(o,u,wt,null,g,je)}for(se in g)if(je=g[se],Ce=f[se],g.hasOwnProperty(se)&&je!==Ce&&(je!=null||Ce!=null))switch(se){case"selected":o.selected=je&&typeof je!="function"&&typeof je!="symbol";break;default:Qr(o,u,se,je,g,Ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in f)je=f[Mt],f.hasOwnProperty(Mt)&&je!=null&&!g.hasOwnProperty(Mt)&&Qr(o,u,Mt,null,g,je);for(Ae in g)if(je=g[Ae],Ce=f[Ae],g.hasOwnProperty(Ae)&&je!==Ce&&(je!=null||Ce!=null))switch(Ae){case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,u));break;default:Qr(o,u,Ae,je,g,Ce)}return;default:if(Ko(u)){for(var Yr in f)je=f[Yr],f.hasOwnProperty(Yr)&&je!==void 0&&!g.hasOwnProperty(Yr)&&Ww(o,u,Yr,void 0,g,je);for(Pe in g)je=g[Pe],Ce=f[Pe],!g.hasOwnProperty(Pe)||je===Ce||je===void 0&&Ce===void 0||Ww(o,u,Pe,je,g,Ce);return}}for(var be in f)je=f[be],f.hasOwnProperty(be)&&je!=null&&!g.hasOwnProperty(be)&&Qr(o,u,be,null,g,je);for(ze in g)je=g[ze],Ce=f[ze],!g.hasOwnProperty(ze)||je===Ce||je==null&&Ce==null||Qr(o,u,ze,je,g,Ce)}function Jk(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lY(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var x=f[g],_=x.transferSize,z=x.initiatorType,H=x.duration;if(_&&H&&Jk(z)){for(z=0,H=x.responseEnd,g+=1;g<f.length;g++){var se=f[g],Ae=se.startTime;if(Ae>H)break;var Pe=se.transferSize,ze=se.initiatorType;Pe&&Jk(ze)&&(se=se.responseEnd,z+=Pe*(se<H?1:(H-Ae)/(se-Ae)))}if(--g,u+=8*(_+z)/(x.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Xw=null,Qw=null;function jy(o){return o.nodeType===9?o:o.ownerDocument}function eC(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tC(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Yw(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Zw=null;function cY(){var o=window.event;return o&&o.type==="popstate"?o===Zw?!1:(Zw=o,!0):(Zw=null,!1)}var rC=typeof setTimeout=="function"?setTimeout:void 0,uY=typeof clearTimeout=="function"?clearTimeout:void 0,nC=typeof Promise=="function"?Promise:void 0,dY=typeof queueMicrotask=="function"?queueMicrotask:typeof nC<"u"?function(o){return nC.resolve(null).then(o).catch(hY)}:rC;function hY(o){setTimeout(function(){throw o})}function jc(o){return o==="head"}function iC(o,u){var f=u,g=0;do{var x=f.nextSibling;if(o.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(g===0){o.removeChild(x),V0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")yp(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,yp(f);for(var _=f.firstChild;_;){var z=_.nextSibling,H=_.nodeName;_[wa]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=z}}else f==="body"&&yp(o.ownerDocument.body);f=x}while(f);V0(u)}function aC(o,u){var f=o;o=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=g}while(f)}function Jw(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Jw(f),vt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function fY(o,u,f,g){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[wa])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=ws(o.nextSibling),o===null)break}return null}function pY(o,u,f){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=ws(o.nextSibling),o===null))return null;return o}function sC(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ws(o.nextSibling),o===null))return null;return o}function e5(o){return o.data==="$?"||o.data==="$~"}function t5(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function mY(o,u){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ws(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var r5=null;function oC(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(u===0)return ws(o.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}o=o.nextSibling}return null}function lC(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return o;u--}else f!=="/$"&&f!=="/&"||u++}o=o.previousSibling}return null}function cC(o,u,f){switch(u=jy(f),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function yp(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);vt(o)}var _s=new Map,uC=new Set;function ky(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var hl=J.d;J.d={f:gY,r:yY,D:vY,C:bY,L:xY,m:wY,X:SY,S:_Y,M:TY};function gY(){var o=hl.f(),u=xy();return o||u}function yY(o){var u=qe(o);u!==null&&u.tag===5&&u.type==="form"?Nj(u):hl.r(o)}var U0=typeof document>"u"?null:document;function dC(o,u,f){var g=U0;if(g&&typeof u=="string"&&u){var x=ue(u);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),uC.has(x)||(uC.add(x),o={rel:o,crossOrigin:f,href:u},g.querySelector(x)===null&&(u=g.createElement("link"),Bi(u,"link",o),sr(u),g.head.appendChild(u)))}}function vY(o){hl.D(o),dC("dns-prefetch",o,null)}function bY(o,u){hl.C(o,u),dC("preconnect",o,u)}function xY(o,u,f){hl.L(o,u,f);var g=U0;if(g&&o&&u){var x='link[rel="preload"][as="'+ue(u)+'"]';u==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+ue(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+ue(f.imageSizes)+'"]')):x+='[href="'+ue(o)+'"]';var _=x;switch(u){case"style":_=z0(o);break;case"script":_=$0(o)}_s.has(_)||(o=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:o,as:u},f),_s.set(_,o),g.querySelector(x)!==null||u==="style"&&g.querySelector(vp(_))||u==="script"&&g.querySelector(bp(_))||(u=g.createElement("link"),Bi(u,"link",o),sr(u),g.head.appendChild(u)))}}function wY(o,u){hl.m(o,u);var f=U0;if(f&&o){var g=u&&typeof u.as=="string"?u.as:"script",x='link[rel="modulepreload"][as="'+ue(g)+'"][href="'+ue(o)+'"]',_=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=$0(o)}if(!_s.has(_)&&(o=m({rel:"modulepreload",href:o},u),_s.set(_,o),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(bp(_)))return}g=f.createElement("link"),Bi(g,"link",o),sr(g),f.head.appendChild(g)}}}function _Y(o,u,f){hl.S(o,u,f);var g=U0;if(g&&o){var x=Ft(g).hoistableStyles,_=z0(o);u=u||"default";var z=x.get(_);if(!z){var H={loading:0,preload:null};if(z=g.querySelector(vp(_)))H.loading=5;else{o=m({rel:"stylesheet",href:o,"data-precedence":u},f),(f=_s.get(_))&&n5(o,f);var se=z=g.createElement("link");sr(se),Bi(se,"link",o),se._p=new Promise(function(Ae,Pe){se.onload=Ae,se.onerror=Pe}),se.addEventListener("load",function(){H.loading|=1}),se.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Cy(z,u,g)}z={type:"stylesheet",instance:z,count:1,state:H},x.set(_,z)}}}function SY(o,u){hl.X(o,u);var f=U0;if(f&&o){var g=Ft(f).hoistableScripts,x=$0(o),_=g.get(x);_||(_=f.querySelector(bp(x)),_||(o=m({src:o,async:!0},u),(u=_s.get(x))&&i5(o,u),_=f.createElement("script"),sr(_),Bi(_,"link",o),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function TY(o,u){hl.M(o,u);var f=U0;if(f&&o){var g=Ft(f).hoistableScripts,x=$0(o),_=g.get(x);_||(_=f.querySelector(bp(x)),_||(o=m({src:o,async:!0,type:"module"},u),(u=_s.get(x))&&i5(o,u),_=f.createElement("script"),sr(_),Bi(_,"link",o),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function hC(o,u,f,g){var x=(x=pe.current)?ky(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=z0(f.href),f=Ft(x).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=z0(f.href);var _=Ft(x).hoistableStyles,z=_.get(o);if(z||(x=x.ownerDocument||x,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,z),(_=x.querySelector(vp(o)))&&!_._p&&(z.instance=_,z.state.loading=5),_s.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},_s.set(o,f),_||AY(x,o,f,z.state))),u&&g===null)throw Error(n(528,""));return z}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=$0(f),f=Ft(x).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function z0(o){return'href="'+ue(o)+'"'}function vp(o){return'link[rel="stylesheet"]['+o+"]"}function fC(o){return m({},o,{"data-precedence":o.precedence,precedence:null})}function AY(o,u,f,g){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=o.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),Bi(u,"link",f),sr(u),o.head.appendChild(u))}function $0(o){return'[src="'+ue(o)+'"]'}function bp(o){return"script[async]"+o}function pC(o,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=o.querySelector('style[data-href~="'+ue(f.href)+'"]');if(g)return u.instance=g,sr(g),g;var x=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),sr(g),Bi(g,"style",x),Cy(g,f.precedence,o),u.instance=g;case"stylesheet":x=z0(f.href);var _=o.querySelector(vp(x));if(_)return u.state.loading|=4,u.instance=_,sr(_),_;g=fC(f),(x=_s.get(x))&&n5(g,x),_=(o.ownerDocument||o).createElement("link"),sr(_);var z=_;return z._p=new Promise(function(H,se){z.onload=H,z.onerror=se}),Bi(_,"link",g),u.state.loading|=4,Cy(_,f.precedence,o),u.instance=_;case"script":return _=$0(f.src),(x=o.querySelector(bp(_)))?(u.instance=x,sr(x),x):(g=f,(x=_s.get(_))&&(g=m({},f),i5(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),sr(x),Bi(x,"link",g),o.head.appendChild(x),u.instance=x);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Cy(g,f.precedence,o));return u.instance}function Cy(o,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,_=x,z=0;z<g.length;z++){var H=g[z];if(H.dataset.precedence===u)_=H;else if(_!==x)break}_?_.parentNode.insertBefore(o,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(o,u.firstChild))}function n5(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function i5(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var Oy=null;function mC(o,u,f){if(Oy===null){var g=new Map,x=Oy=new Map;x.set(f,g)}else x=Oy,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(o))return g;for(g.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var _=f[x];if(!(_[wa]||_[zr]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var z=_.getAttribute(u)||"";z=o+z;var H=g.get(z);H?H.push(_):g.set(z,[_])}}return g}function gC(o,u,f){o=o.ownerDocument||o,o.head.insertBefore(f,u==="title"?o.querySelector("head > title"):null)}function EY(o,u,f){if(f===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function yC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function NY(o,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=z0(g.href),_=u.querySelector(vp(x));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=Iy.bind(o),u.then(o,o)),f.state.loading|=4,f.instance=_,sr(_);return}_=u.ownerDocument||u,g=fC(g),(x=_s.get(x))&&n5(g,x),_=_.createElement("link"),sr(_);var z=_;z._p=new Promise(function(H,se){z.onload=H,z.onerror=se}),Bi(_,"link",g),f.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Iy.bind(o),u.addEventListener("load",f),u.addEventListener("error",f))}}var a5=0;function jY(o,u){return o.stylesheets&&o.count===0&&My(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var g=setTimeout(function(){if(o.stylesheets&&My(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+u);0<o.imgBytes&&a5===0&&(a5=62500*lY());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&My(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>a5?50:800)+u);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function Iy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)My(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Ry=null;function My(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Ry=new Map,u.forEach(kY,o),Ry=null,Iy.call(o))}function kY(o,u){if(!(u.state.loading&4)){var f=Ry.get(o);if(f)var g=f.get(null);else{f=new Map,Ry.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var z=x[_];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}x=u.instance,z=x.getAttribute("data-precedence"),_=f.get(z)||g,_===g&&f.set(null,x),f.set(z,x),this.count++,g=Iy.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),_?_.parentNode.insertBefore(x,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),u.state.loading|=4}}var xp={$$typeof:k,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function CY(o,u,f,g,x,_,z,H,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cn(0),this.hiddenUpdates=cn(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function vC(o,u,f,g,x,_,z,H,se,Ae,Pe,ze){return o=new CY(o,u,f,z,se,Ae,Pe,ze,H),u=1,_===!0&&(u|=24),_=Wa(3,null,null,u),o.current=_,_.stateNode=o,u=B4(),u.refCount++,o.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},V4(_),o}function bC(o){return o?(o=v0,o):v0}function xC(o,u,f,g,x,_){x=bC(x),g.context===null?g.context=x:g.pendingContext=x,g=yc(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=vc(o,g,u),f!==null&&(Ca(f,o,u),Zf(f,o,u))}function wC(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<u?f:u}}function s5(o,u){wC(o,u),(o=o.alternate)&&wC(o,u)}function _C(o){if(o.tag===13||o.tag===31){var u=zu(o,67108864);u!==null&&Ca(u,o,67108864),s5(o,67108864)}}function SC(o){if(o.tag===13||o.tag===31){var u=Ja();u=ia(u);var f=zu(o,u);f!==null&&Ca(f,o,u),s5(o,u)}}var Py=!0;function OY(o,u,f,g){var x=W.T;W.T=null;var _=J.p;try{J.p=2,o5(o,u,f,g)}finally{J.p=_,W.T=x}}function IY(o,u,f,g){var x=W.T;W.T=null;var _=J.p;try{J.p=8,o5(o,u,f,g)}finally{J.p=_,W.T=x}}function o5(o,u,f,g){if(Py){var x=l5(g);if(x===null)Kw(o,u,g,Dy,f),AC(o,g);else if(MY(x,o,u,f,g))g.stopPropagation();else if(AC(o,g),u&4&&-1<RY.indexOf(o)){for(;x!==null;){var _=qe(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var z=$t(_.pendingLanes);if(z!==0){var H=_;for(H.pendingLanes|=2,H.entangledLanes|=2;z;){var se=1<<31-Ve(z);H.entanglements[1]|=se,z&=~se}bo(_),(Or&6)===0&&(vy=We()+500,pp(0))}}break;case 31:case 13:H=zu(_,2),H!==null&&Ca(H,_,2),xy(),s5(_,2)}if(_=l5(g),_===null&&Kw(o,u,g,Dy,f),_===x)break;x=_}x!==null&&g.stopPropagation()}else Kw(o,u,g,null,f)}}function l5(o){return o=u0(o),c5(o)}var Dy=null;function c5(o){if(Dy=null,o=he(o),o!==null){var u=a(o);if(u===null)o=null;else{var f=u.tag;if(f===13){if(o=s(u),o!==null)return o;o=null}else if(f===31){if(o=l(u),o!==null)return o;o=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return Dy=o,null}function TC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case gt:return 2;case ot:return 8;case Je:case Rt:return 32;case Yt:return 268435456;default:return 32}default:return 32}}var u5=!1,kc=null,Cc=null,Oc=null,wp=new Map,_p=new Map,Ic=[],RY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AC(o,u){switch(o){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Oc=null;break;case"pointerover":case"pointerout":wp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(u.pointerId)}}function Sp(o,u,f,g,x,_){return o===null||o.nativeEvent!==_?(o={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[x]},u!==null&&(u=qe(u),u!==null&&_C(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,x!==null&&u.indexOf(x)===-1&&u.push(x),o)}function MY(o,u,f,g,x){switch(u){case"focusin":return kc=Sp(kc,o,u,f,g,x),!0;case"dragenter":return Cc=Sp(Cc,o,u,f,g,x),!0;case"mouseover":return Oc=Sp(Oc,o,u,f,g,x),!0;case"pointerover":var _=x.pointerId;return wp.set(_,Sp(wp.get(_)||null,o,u,f,g,x)),!0;case"gotpointercapture":return _=x.pointerId,_p.set(_,Sp(_p.get(_)||null,o,u,f,g,x)),!0}return!1}function EC(o){var u=he(o.target);if(u!==null){var f=a(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){o.blockedOn=u,aa(o.priority,function(){SC(f)});return}}else if(u===31){if(u=l(f),u!==null){o.blockedOn=u,aa(o.priority,function(){SC(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ly(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var f=l5(o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);c0=g,f.target.dispatchEvent(g),c0=null}else return u=qe(f),u!==null&&_C(u),o.blockedOn=f,!1;u.shift()}return!0}function NC(o,u,f){Ly(o)&&f.delete(u)}function PY(){u5=!1,kc!==null&&Ly(kc)&&(kc=null),Cc!==null&&Ly(Cc)&&(Cc=null),Oc!==null&&Ly(Oc)&&(Oc=null),wp.forEach(NC),_p.forEach(NC)}function By(o,u){o.blockedOn===u&&(o.blockedOn=null,u5||(u5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PY)))}var Uy=null;function jC(o){Uy!==o&&(Uy=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Uy===o&&(Uy=null);for(var u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],x=o[u+2];if(typeof g!="function"){if(c5(g||f)===null)continue;break}var _=qe(f);_!==null&&(o.splice(u,3),u-=3,lw(_,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function V0(o){function u(se){return By(se,o)}kc!==null&&By(kc,o),Cc!==null&&By(Cc,o),Oc!==null&&By(Oc,o),wp.forEach(u),_p.forEach(u);for(var f=0;f<Ic.length;f++){var g=Ic[f];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Ic.length&&(f=Ic[0],f.blockedOn===null);)EC(f),f.blockedOn===null&&Ic.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],_=f[g+1],z=x[un]||null;if(typeof _=="function")z||jC(f);else if(z){var H=null;if(_&&_.hasAttribute("formAction")){if(x=_,z=_[un]||null)H=z.formAction;else if(c5(x)!==null)continue}else H=z.action;typeof H=="function"?f[g+1]=H:(f.splice(g,3),g-=3),jC(f)}}}function kC(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(z){return x=z})},focusReset:"manual",scroll:"manual"})}function u(){x!==null&&(x(),x=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),x!==null&&(x(),x=null)}}}function d5(o){this._internalRoot=o}zy.prototype.render=d5.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=Ja();xC(f,g,o,u,null,null)},zy.prototype.unmount=d5.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;xC(o.current,2,null,o,null,null),xy(),u[jn]=null}};function zy(o){this._internalRoot=o}zy.prototype.unstable_scheduleHydration=function(o){if(o){var u=vn();o={blockedOn:null,target:o,priority:u};for(var f=0;f<Ic.length&&u!==0&&u<Ic[f].priority;f++);Ic.splice(f,0,o),f===0&&EC(o)}};var CC=e.version;if(CC!=="19.2.4")throw Error(n(527,CC,"19.2.4"));J.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var DY={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $y=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$y.isDisabled&&$y.supportsFiber)try{Br=$y.inject(DY),ee=$y}catch{}}return Ap.createRoot=function(o,u){if(!i(o))throw Error(n(299));var f=!1,g="",x=Lj,_=Bj,z=Uj;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(z=u.onRecoverableError)),u=vC(o,1,!1,null,null,f,g,null,x,_,z,kC),o[jn]=u.current,Gw(o),new d5(u)},Ap.hydrateRoot=function(o,u,f){if(!i(o))throw Error(n(299));var g=!1,x="",_=Lj,z=Bj,H=Uj,se=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(H=f.onRecoverableError),f.formState!==void 0&&(se=f.formState)),u=vC(o,1,!0,u,f??null,g,x,se,_,z,H,kC),u.context=bC(null),f=u.current,g=Ja(),g=ia(g),x=yc(g),x.callback=null,vc(f,x,g),f=g,u.current.lanes=f,ei(u,f),bo(u),o[jn]=u.current,Gw(o),new zy(u)},Ap.version="19.2.4",Ap}var $C;function WY(){if($C)return p5.exports;$C=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),p5.exports=KY(),p5.exports}var XY=WY();const QY=Ir(XY);var Ji=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Ji||{});const Lr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var gl=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(gl||{}),VC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S$=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},YY=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],l=t[r++],d=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},T$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,l=s?t[i+1]:0,d=i+2<t.length,h=d?t[i+2]:0,p=a>>2,m=(a&3)<<4|l>>4;let y=(l&15)<<2|h>>6,b=h&63;d||(b=64,s||(y=64)),n.push(r[p],r[m],r[y],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const h=i<t.length?r[t.charAt(i)]:64;++i;const m=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||h==null||m==null)throw new ZY;const y=a<<2|l>>4;if(n.push(y),h!==64){const b=l<<4&240|h>>2;if(n.push(b),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JY=function(t){const e=S$(t);return T$.encodeByteArray(e,!0)},Wv=function(t){return JY(t).replace(/\./g,"")},A$=function(t){try{return T$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tZ=()=>eZ().__FIREBASE_DEFAULTS__,rZ=()=>{if(typeof process>"u"||typeof VC>"u")return;const t=VC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A$(t[1]);return e&&JSON.parse(e)},Vx=()=>{try{return tZ()||rZ()||nZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E$=t=>{var e,r;return(r=(e=Vx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},N$=t=>{const e=E$(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},j$=()=>{var t;return(t=Vx())===null||t===void 0?void 0:t.config},k$=t=>{var e;return(e=Vx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wv(JSON.stringify(r)),Wv(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vi())}function oZ(){var t;const e=(t=Vx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dZ(){const t=vi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C$(){return!oZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O$(){try{return typeof indexedDB=="object"}catch{return!1}}function hZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fZ="FirebaseError";class lo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=fZ,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lg.prototype.create)}}class Lg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?pZ(a,n):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new lo(i,l,n)}}function pZ(t,e){return t.replace(mZ,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const mZ=/\{\$([^}]+)}/g;function gZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(FC(a)&&FC(s)){if(!Sh(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function FC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function yZ(t,e){const r=new vZ(t,e);return r.subscribe.bind(r)}class vZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");bZ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=v5),i.error===void 0&&(i.error=v5),i.complete===void 0&&(i.complete=v5);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function v5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class Dl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new iZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_Z(e))try{this.getOrInitializeService({instanceIdentifier:od})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=od){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=od){return this.instances.has(e)}getOptions(e=od){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:wZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=od){return this.component?this.component.multipleInstances?e:od:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wZ(t){return t===od?void 0:t}function _Z(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new xZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(gr||(gr={}));const TZ={debug:gr.DEBUG,verbose:gr.VERBOSE,info:gr.INFO,warn:gr.WARN,error:gr.ERROR,silent:gr.SILENT},AZ=gr.INFO,EZ={[gr.DEBUG]:"log",[gr.VERBOSE]:"log",[gr.INFO]:"info",[gr.WARN]:"warn",[gr.ERROR]:"error"},NZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=EZ[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class J8{constructor(e){this.name=e,this._logLevel=AZ,this._logHandler=NZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gr.DEBUG,...e),this._logHandler(this,gr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gr.VERBOSE,...e),this._logHandler(this,gr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gr.INFO,...e),this._logHandler(this,gr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gr.WARN,...e),this._logHandler(this,gr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gr.ERROR,...e),this._logHandler(this,gr.ERROR,...e)}}const jZ=(t,e)=>e.some(r=>t instanceof r);let qC,HC;function kZ(){return qC||(qC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CZ(){return HC||(HC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I$=new WeakMap,AT=new WeakMap,R$=new WeakMap,b5=new WeakMap,e7=new WeakMap;function OZ(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(nu(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&I$.set(r,t)}).catch(()=>{}),e7.set(e,t),e}function IZ(t){if(AT.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});AT.set(t,e)}let ET={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return AT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R$.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return nu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RZ(t){ET=t(ET)}function MZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(x5(this),e,...r);return R$.set(n,e.sort?e.sort():[e]),nu(n)}:CZ().includes(t)?function(...e){return t.apply(x5(this),e),nu(I$.get(this))}:function(...e){return nu(t.apply(x5(this),e))}}function PZ(t){return typeof t=="function"?MZ(t):(t instanceof IDBTransaction&&IZ(t),jZ(t,kZ())?new Proxy(t,ET):t)}function nu(t){if(t instanceof IDBRequest)return OZ(t);if(b5.has(t))return b5.get(t);const e=PZ(t);return e!==t&&(b5.set(t,e),e7.set(e,t)),e}const x5=t=>e7.get(t);function DZ(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),l=nu(s);return n&&s.addEventListener("upgradeneeded",d=>{n(nu(s.result),d.oldVersion,d.newVersion,nu(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),l.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const LZ=["get","getKey","getAll","getAllKeys","count"],BZ=["put","add","delete","clear"],w5=new Map;function GC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(w5.get(e))return w5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=BZ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||LZ.includes(r)))return;const a=async function(s,...l){const d=this.transaction(s,i?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(l.shift())),(await Promise.all([h[r](...l),i&&d.done]))[0]};return w5.set(e,a),a}RZ(t=>({...t,get:(e,r,n)=>GC(e,r)||t.get(e,r,n),has:(e,r)=>!!GC(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(zZ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function zZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const NT="@firebase/app",KC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new J8("@firebase/app"),$Z="@firebase/app-compat",VZ="@firebase/analytics-compat",FZ="@firebase/analytics",qZ="@firebase/app-check-compat",HZ="@firebase/app-check",GZ="@firebase/auth",KZ="@firebase/auth-compat",WZ="@firebase/database",XZ="@firebase/data-connect",QZ="@firebase/database-compat",YZ="@firebase/functions",ZZ="@firebase/functions-compat",JZ="@firebase/installations",eJ="@firebase/installations-compat",tJ="@firebase/messaging",rJ="@firebase/messaging-compat",nJ="@firebase/performance",iJ="@firebase/performance-compat",aJ="@firebase/remote-config",sJ="@firebase/remote-config-compat",oJ="@firebase/storage",lJ="@firebase/storage-compat",cJ="@firebase/firestore",uJ="@firebase/vertexai-preview",dJ="@firebase/firestore-compat",hJ="firebase",fJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="[DEFAULT]",pJ={[NT]:"fire-core",[$Z]:"fire-core-compat",[FZ]:"fire-analytics",[VZ]:"fire-analytics-compat",[HZ]:"fire-app-check",[qZ]:"fire-app-check-compat",[GZ]:"fire-auth",[KZ]:"fire-auth-compat",[WZ]:"fire-rtdb",[XZ]:"fire-data-connect",[QZ]:"fire-rtdb-compat",[YZ]:"fire-fn",[ZZ]:"fire-fn-compat",[JZ]:"fire-iid",[eJ]:"fire-iid-compat",[tJ]:"fire-fcm",[rJ]:"fire-fcm-compat",[nJ]:"fire-perf",[iJ]:"fire-perf-compat",[aJ]:"fire-rc",[sJ]:"fire-rc-compat",[oJ]:"fire-gcs",[lJ]:"fire-gcs-compat",[cJ]:"fire-fst",[dJ]:"fire-fst-compat",[uJ]:"fire-vertex","fire-js":"fire-js",[hJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv=new Map,mJ=new Map,kT=new Map;function WC(t,e){try{t.container.addComponent(e)}catch(r){Ll.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function cu(t){const e=t.name;if(kT.has(e))return Ll.debug(`There were multiple attempts to register component ${e}.`),!1;kT.set(e,t);for(const r of Xv.values())WC(r,t);for(const r of mJ.values())WC(r,t);return!0}function Ug(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function wl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},iu=new Lg("app","Firebase",gJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw iu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=fJ;function M$(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:jT,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw iu.create("bad-app-name",{appName:String(i)});if(r||(r=j$()),!r)throw iu.create("no-options");const a=Xv.get(i);if(a){if(Sh(r,a.options)&&Sh(n,a.config))return a;throw iu.create("duplicate-app",{appName:i})}const s=new SZ(i);for(const d of kT.values())s.addComponent(d);const l=new yJ(r,n,s);return Xv.set(i,l),l}function t7(t=jT){const e=Xv.get(t);if(!e&&t===jT&&j$())return M$();if(!e)throw iu.create("no-app",{appName:t});return e}function Cs(t,e,r){var n;let i=(n=pJ[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ll.warn(l.join(" "));return}cu(new Dl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ="firebase-heartbeat-database",bJ=1,Em="firebase-heartbeat-store";let _5=null;function P$(){return _5||(_5=DZ(vJ,bJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Em)}catch(r){console.warn(r)}}}}).catch(t=>{throw iu.create("idb-open",{originalErrorMessage:t.message})})),_5}async function xJ(t){try{const r=(await P$()).transaction(Em),n=await r.objectStore(Em).get(D$(t));return await r.done,n}catch(e){if(e instanceof lo)Ll.warn(e.message);else{const r=iu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ll.warn(r.message)}}}async function XC(t,e){try{const n=(await P$()).transaction(Em,"readwrite");await n.objectStore(Em).put(e,D$(t)),await n.done}catch(r){if(r instanceof lo)Ll.warn(r.message);else{const n=iu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ll.warn(n.message)}}}function D$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wJ=1024,_J=720*60*60*1e3;class SJ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new AJ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=QC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=_J}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ll.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=QC(),{heartbeatsToSend:n,unsentEntries:i}=TJ(this._heartbeatsCache.heartbeats),a=Wv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Ll.warn(r),""}}}function QC(){return new Date().toISOString().substring(0,10)}function TJ(t,e=wJ){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),YC(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),YC(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class AJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O$()?hZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await xJ(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return XC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return XC(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function YC(t){return Wv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(t){cu(new Dl("platform-logger",e=>new UZ(e),"PRIVATE")),cu(new Dl("heartbeat",e=>new SJ(e),"PRIVATE")),Cs(NT,KC,t),Cs(NT,KC,"esm2017"),Cs("fire-js","")}EJ("");var NJ="firebase",jJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(NJ,jJ,"app");function r7(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function L$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kJ=L$,B$=new Lg("auth","Firebase",L$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv=new J8("@firebase/auth");function CJ(t,...e){Qv.logLevel<=gr.WARN&&Qv.warn(`Auth (${Zd}): ${t}`,...e)}function jv(t,...e){Qv.logLevel<=gr.ERROR&&Qv.error(`Auth (${Zd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t,...e){throw i7(t,...e)}function io(t,...e){return i7(t,...e)}function n7(t,e,r){const n=Object.assign(Object.assign({},kJ()),{[e]:r});return new Lg("auth","Firebase",n).create(e,{appName:t.name})}function Ad(t){return n7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function OJ(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Oo(t,"argument-error"),n7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function i7(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return B$.create(t,...e)}function Ht(t,e,...r){if(!t)throw i7(e,...r)}function _l(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jv(e),new Error(e)}function Bl(t,e){t||_l(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IJ(){return ZC()==="http:"||ZC()==="https:"}function ZC(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IJ()||cZ()||"connection"in navigator)?navigator.onLine:!0}function MJ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,r){this.shortDelay=e,this.longDelay=r,Bl(r>e,"Short delay should be less than long delay!"),this.isMobile=sZ()||uZ()}get(){return RJ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(t,e){Bl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_l("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_l("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_l("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PJ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=new zg(3e4,6e4);function s7(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mf(t,e,r,n,i={}){return z$(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const l=Bg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},a);return lZ()||(h.referrerPolicy="no-referrer"),U$.fetch()($$(t,t.config.apiHost,r,l),h)})}async function z$(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},PJ),e);try{const i=new BJ(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Fy(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[d,h]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw Fy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw Fy(t,"user-disabled",s);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw n7(t,p,h);Oo(t,p)}}catch(i){if(i instanceof lo)throw i;Oo(t,"network-request-failed",{message:String(i)})}}async function LJ(t,e,r,n,i={}){const a=await mf(t,e,r,n,i);return"mfaPendingCredential"in a&&Oo(t,"multi-factor-auth-required",{_serverResponse:a}),a}function $$(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?a7(t.config,i):`${t.config.apiScheme}://${i}`}class BJ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(io(this.auth,"network-request-failed")),DJ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=io(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UJ(t,e){return mf(t,"POST","/v1/accounts:delete",e)}async function V$(t,e){return mf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zJ(t,e=!1){const r=tn(t),n=await r.getIdToken(e),i=o7(n);Ht(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:nm(S5(i.auth_time)),issuedAtTime:nm(S5(i.iat)),expirationTime:nm(S5(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function S5(t){return Number(t)*1e3}function o7(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return jv("JWT malformed, contained fewer than 3 sections"),null;try{const i=A$(r);return i?JSON.parse(i):(jv("Failed to decode base64 JWT payload"),null)}catch(i){return jv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function JC(t){const e=o7(t);return Ht(e,"internal-error"),Ht(typeof e.exp<"u","internal-error"),Ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof lo&&$J(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function $J({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=nm(this.lastLoginAt),this.creationTime=nm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yv(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Nm(t,V$(r,{idToken:n}));Ht(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?F$(a.providerUserInfo):[],l=qJ(t.providerData,s),d=t.isAnonymous,h=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),p=d?h:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new OT(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function FJ(t){const e=tn(t);await Yv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qJ(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function F$(t){return t.map(e=>{var{providerId:r}=e,n=r7(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HJ(t,e){const r=await z$(t,{},async()=>{const n=Bg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=$$(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",U$.fetch()(s,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function GJ(t,e){return mf(t,"POST","/v2/accounts:revokeToken",s7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ht(e.idToken,"internal-error"),Ht(typeof e.idToken<"u","internal-error"),Ht(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):JC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ht(e.length!==0,"internal-error");const r=JC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await HJ(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new uh;return n&&(Ht(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Ht(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Ht(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uh,this.toJSON())}_performRefresh(){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e){Ht(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sl{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=r7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VJ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new OT(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Nm(this,this.stsTokenManager.getToken(this.auth,e));return Ht(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return zJ(this,e)}reload(){return FJ(this)}_assign(e){this!==e&&(Ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Yv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wl(this.auth.app))return Promise.reject(Ad(this.auth));const e=await this.getIdToken();return await Nm(this,UJ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,l,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(i=r.email)!==null&&i!==void 0?i:void 0,b=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,S=(l=r.tenantId)!==null&&l!==void 0?l:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,N=(h=r.createdAt)!==null&&h!==void 0?h:void 0,C=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:$,isAnonymous:I,providerData:L,stsTokenManager:E}=r;Ht(k&&E,e,"internal-error");const A=uh.fromJSON(this.name,E);Ht(typeof k=="string",e,"internal-error"),Mc(m,e.name),Mc(y,e.name),Ht(typeof $=="boolean",e,"internal-error"),Ht(typeof I=="boolean",e,"internal-error"),Mc(b,e.name),Mc(T,e.name),Mc(S,e.name),Mc(w,e.name),Mc(N,e.name),Mc(C,e.name);const R=new Sl({uid:k,auth:e,email:y,emailVerified:$,displayName:m,isAnonymous:I,photoURL:T,phoneNumber:b,tenantId:S,stsTokenManager:A,createdAt:N,lastLoginAt:C});return L&&Array.isArray(L)&&(R.providerData=L.map(F=>Object.assign({},F))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(e,r,n=!1){const i=new uh;i.updateFromServerResponse(r);const a=new Sl({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Yv(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Ht(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?F$(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new uh;l.updateFromIdToken(n);const d=new Sl({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new OT(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=new Map;function Tl(t){Bl(t instanceof Function,"Expected a class definition");let e=eO.get(t);return e?(Bl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,eO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}q$.type="NONE";const tO=q$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(t,e,r){return`firebase:${t}:${e}:${r}`}class dh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=kv(this.userKey,i.apiKey,a),this.fullPersistenceKey=kv("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Sl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new dh(Tl(tO),e,n);const i=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Tl(tO);const s=kv(n,e.config.apiKey,e.name);let l=null;for(const h of r)try{const p=await h._get(s);if(p){const m=Sl._fromJSON(e,p);h!==a&&(l=m),a=h;break}}catch{}const d=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new dh(a,e,n):(a=d[0],l&&await a._set(s,l.toJSON()),await Promise.all(r.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new dh(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(W$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H$(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q$(e))return"Blackberry";if(Y$(e))return"Webos";if(G$(e))return"Safari";if((e.includes("chrome/")||K$(e))&&!e.includes("edge/"))return"Chrome";if(X$(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function H$(t=vi()){return/firefox\//i.test(t)}function G$(t=vi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K$(t=vi()){return/crios\//i.test(t)}function W$(t=vi()){return/iemobile/i.test(t)}function X$(t=vi()){return/android/i.test(t)}function Q$(t=vi()){return/blackberry/i.test(t)}function Y$(t=vi()){return/webos/i.test(t)}function l7(t=vi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KJ(t=vi()){var e;return l7(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WJ(){return dZ()&&document.documentMode===10}function Z$(t=vi()){return l7(t)||X$(t)||Y$(t)||Q$(t)||/windows phone/i.test(t)||W$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t,e=[]){let r;switch(t){case"Browser":r=rO(vi());break;case"Worker":r=`${rO(vi())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Zd}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,l)=>{try{const d=e(a);s(d)}catch(d){l(d)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QJ(t,e={}){return mf(t,"GET","/v2/passwordPolicy",s7(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=6;class ZJ{constructor(e){var r,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:YJ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,s,l;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(l=d.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JJ{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nO(this),this.idTokenSubscription=new nO(this),this.beforeStateQueue=new XJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=B$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Tl(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await dh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await V$(this,{idToken:e}),n=await Sl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(wl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===l)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Yv(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MJ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wl(this.app))return Promise.reject(Ad(this));const r=e?tn(e):null;return r&&Ht(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wl(this.app)?Promise.reject(Ad(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wl(this.app)?Promise.reject(Ad(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QJ(this),r=new ZJ(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await GJ(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Tl(e)||this._popupRedirectResolver;Ht(r,this,"argument-error"),this.redirectPersistenceManager=await dh.create(this,[Tl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ht(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,i);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&CJ(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Fx(t){return tn(t)}class nO{constructor(e){this.auth=e,this.observer=null,this.addObserver=yZ(r=>this.observer=r)}get next(){return Ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eee(t){c7=t}function tee(t){return c7.loadJS(t)}function ree(){return c7.gapiScript}function nee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iee(t,e){const r=Ug(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(Sh(a,e??{}))return i;Oo(i,"already-initialized")}return r.initialize({options:e})}function aee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Tl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function see(t,e,r){const n=Fx(t);Ht(n._canInitEmulator,n,"emulator-config-failed"),Ht(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=eV(e),{host:s,port:l}=oee(e),d=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),lee()}function eV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oee(t){const e=eV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:iO(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:iO(s)}}}function iO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return _l("not implemented")}_getIdTokenResponse(e){return _l("not implemented")}_linkToIdToken(e,r){return _l("not implemented")}_getReauthenticationResolver(e){return _l("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(t,e){return LJ(t,"POST","/v1/accounts:signInWithIdp",s7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cee="http://localhost";class Od extends tV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Od(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Oo("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=r7(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Od(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return hh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,hh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,hh(e,r)}buildRequest(){const e={requestUri:cee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Bg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends u7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends $g{constructor(){super("facebook.com")}static credential(e){return Od._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vc.credential(e.oauthAccessToken)}catch{return null}}}Vc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends $g{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Od._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return bl.credential(r,n)}catch{return null}}}bl.GOOGLE_SIGN_IN_METHOD="google.com";bl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends $g{constructor(){super("github.com")}static credential(e){return Od._fromParams({providerId:Fc.PROVIDER_ID,signInMethod:Fc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fc.credentialFromTaggedObject(e)}static credentialFromError(e){return Fc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fc.credential(e.oauthAccessToken)}catch{return null}}}Fc.GITHUB_SIGN_IN_METHOD="github.com";Fc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc extends $g{constructor(){super("twitter.com")}static credential(e,r){return Od._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return qc.credential(r,n)}catch{return null}}}qc.TWITTER_SIGN_IN_METHOD="twitter.com";qc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Sl._fromIdTokenResponse(e,n,i),s=aO(n);return new Th({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=aO(n);return new Th({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function aO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends lo{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Zv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Zv(e,r,n,i)}}function rV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Zv._fromErrorAndOperation(t,a,e,n):a})}async function uee(t,e,r=!1){const n=await Nm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Th._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dee(t,e,r=!1){const{auth:n}=t;if(wl(n.app))return Promise.reject(Ad(n));const i="reauthenticate";try{const a=await Nm(t,rV(n,i,e,t),r);Ht(a.idToken,n,"internal-error");const s=o7(a.idToken);Ht(s,n,"internal-error");const{sub:l}=s;return Ht(t.uid===l,n,"user-mismatch"),Th._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Oo(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hee(t,e,r=!1){if(wl(t.app))return Promise.reject(Ad(t));const n="signIn",i=await rV(t,n,e),a=await Th._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function fee(t,e,r,n){return tn(t).onIdTokenChanged(e,r,n)}function pee(t,e,r){return tn(t).beforeAuthStateChanged(e,r)}function mee(t,e,r,n){return tn(t).onAuthStateChanged(e,r,n)}function gee(t){return tn(t).signOut()}const Jv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Jv,"1"),this.storage.removeItem(Jv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yee=1e3,vee=10;class iV extends nV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z$(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,l,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);WJ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vee):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},yee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}iV.type="LOCAL";const bee=iV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV extends nV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}aV.type="SESSION";const sV=aV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new qx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(s).map(async h=>h(r.origin,a)),d=await xee(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,d)=>{const h=d7("",20);i.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(y.data.response);break;default:clearTimeout(p),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(){return window}function _ee(t){jo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(){return typeof jo().WorkerGlobalScope<"u"&&typeof jo().importScripts=="function"}async function See(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Tee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Aee(){return oV()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV="firebaseLocalStorageDb",Eee=1,eb="firebaseLocalStorage",cV="fbase_key";class Vg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Hx(t,e){return t.transaction([eb],e?"readwrite":"readonly").objectStore(eb)}function Nee(){const t=indexedDB.deleteDatabase(lV);return new Vg(t).toPromise()}function IT(){const t=indexedDB.open(lV,Eee);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(eb,{keyPath:cV})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(eb)?e(n):(n.close(),await Nee(),e(await IT()))})})}async function sO(t,e,r){const n=Hx(t,!0).put({[cV]:e,value:r});return new Vg(n).toPromise()}async function jee(t,e){const r=Hx(t,!1).get(e),n=await new Vg(r).toPromise();return n===void 0?null:n.value}function oO(t,e){const r=Hx(t,!0).delete(e);return new Vg(r).toPromise()}const kee=800,Cee=3;class uV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await IT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Cee)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oV()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qx._getInstance(Aee()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await See(),!this.activeServiceWorker)return;this.sender=new wee(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Tee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await IT();return await sO(e,Jv,"1"),await oO(e,Jv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>sO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>jee(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>oO(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Hx(i,!1).getAll();return new Vg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uV.type="LOCAL";const Oee=uV;new zg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t,e){return e?Tl(e):(Ht(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7 extends tV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return hh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return hh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Iee(t){return hee(t.auth,new h7(t),t.bypassAuthState)}function Ree(t){const{auth:e,user:r}=t;return Ht(r,e,"internal-error"),dee(r,new h7(t),t.bypassAuthState)}async function Mee(t){const{auth:e,user:r}=t;return Ht(r,e,"internal-error"),uee(r,new h7(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Iee;case"linkViaPopup":case"linkViaRedirect":return Mee;case"reauthViaPopup":case"reauthViaRedirect":return Ree;default:Oo(this.auth,"internal-error")}}resolve(e){Bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pee=new zg(2e3,1e4);async function Dee(t,e,r){if(wl(t.app))return Promise.reject(io(t,"operation-not-supported-in-this-environment"));const n=Fx(t);OJ(t,e,u7);const i=dV(n,r);return new yd(n,"signInViaPopup",e,i).executeNotNull()}class yd extends hV{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,yd.currentPopupAction&&yd.currentPopupAction.cancel(),yd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ht(e,this.auth,"internal-error"),e}async onExecution(){Bl(this.filter.length===1,"Popup operations only handle one event");const e=d7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Pee.get())};e()}}yd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lee="pendingRedirect",Cv=new Map;class Bee extends hV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Cv.get(this.auth._key());if(!e){try{const n=await Uee(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Cv.set(this.auth._key(),e)}return this.bypassAuthState||Cv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Uee(t,e){const r=Vee(e),n=$ee(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function zee(t,e){Cv.set(t._key(),e)}function $ee(t){return Tl(t._redirectPersistence)}function Vee(t){return kv(Lee,t.config.apiKey,t.name)}async function Fee(t,e,r=!1){if(wl(t.app))return Promise.reject(Ad(t));const n=Fx(t),i=dV(n,e),s=await new Bee(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qee=600*1e3;class Hee{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Gee(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!fV(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(io(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qee&&this.cachedEventUids.clear(),this.cachedEventUids.has(lO(e))}saveEventToCache(e){this.cachedEventUids.add(lO(e)),this.lastProcessedEventTime=Date.now()}}function lO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Gee(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kee(t,e={}){return mf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xee=/^https?/;async function Qee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Kee(t);for(const r of e)try{if(Yee(r))return}catch{}Oo(t,"unauthorized-domain")}function Yee(t){const e=CT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!Xee.test(r))return!1;if(Wee.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zee=new zg(3e4,6e4);function cO(){const t=jo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Jee(t){return new Promise((e,r)=>{var n,i,a;function s(){cO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cO(),r(io(t,"network-request-failed"))},timeout:Zee.get()})}if(!((i=(n=jo().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=jo().gapi)===null||a===void 0)&&a.load)s();else{const l=nee("iframefcb");return jo()[l]=()=>{gapi.load?s():r(io(t,"network-request-failed"))},tee(`${ree()}?onload=${l}`).catch(d=>r(d))}}).catch(e=>{throw Ov=null,e})}let Ov=null;function ete(t){return Ov=Ov||Jee(t),Ov}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tte=new zg(5e3,15e3),rte="__/auth/iframe",nte="emulator/auth/iframe",ite={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ate=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ste(t){const e=t.config;Ht(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?a7(e,nte):`https://${t.config.authDomain}/${rte}`,n={apiKey:e.apiKey,appName:t.name,v:Zd},i=ate.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Bg(n).slice(1)}`}async function ote(t){const e=await ete(t),r=jo().gapi;return Ht(r,t,"internal-error"),e.open({where:document.body,url:ste(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ite,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=io(t,"network-request-failed"),l=jo().setTimeout(()=>{a(s)},tte.get());function d(){jo().clearTimeout(l),i(n)}n.ping(d).then(d,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lte={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cte=500,ute=600,dte="_blank",hte="http://localhost";class uO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fte(t,e,r,n=cte,i=ute){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const d=Object.assign(Object.assign({},lte),{width:n.toString(),height:i.toString(),top:a,left:s}),h=vi().toLowerCase();r&&(l=K$(h)?dte:r),H$(h)&&(e=e||hte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[b,T])=>`${y}${b}=${T},`,"");if(KJ(h)&&l!=="_self")return pte(e||"",l),new uO(null);const m=window.open(e||"",l,p);Ht(m,t,"popup-blocked");try{m.focus()}catch{}return new uO(m)}function pte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mte="__/auth/handler",gte="emulator/auth/handler",yte=encodeURIComponent("fac");async function dO(t,e,r,n,i,a){Ht(t.config.authDomain,t,"auth-domain-config-required"),Ht(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Zd,eventId:i};if(e instanceof u7){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",gZ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof $g){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const d=await t._getAppCheckToken(),h=d?`#${yte}=${encodeURIComponent(d)}`:"";return`${vte(t)}?${Bg(l).slice(1)}${h}`}function vte({config:t}){return t.emulator?a7(t,gte):`https://${t.authDomain}/${mte}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="webStorageSupport";class bte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sV,this._completeRedirectFn=Fee,this._overrideRedirectResult=zee}async _openPopup(e,r,n,i){var a;Bl((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await dO(e,r,n,CT(),i);return fte(e,s,d7())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await dO(e,r,n,CT(),i);return _ee(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Bl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await ote(e),n=new Hee(e);return r.register("authEvent",i=>(Ht(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(T5,{type:T5},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[T5];s!==void 0&&r(!!s),Oo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Qee(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Z$()||G$()||l7()}}const xte=bte;var hO="@firebase/auth",fO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _te(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ste(t){cu(new Dl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=n.options;Ht(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J$(t)},h=new JJ(n,i,a,d);return aee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),cu(new Dl("auth-internal",e=>{const r=Fx(e.getProvider("auth").getImmediate());return(n=>new wte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(hO,fO,_te(t)),Cs(hO,fO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=300,Ate=k$("authIdTokenMaxAge")||Tte;let pO=null;const Ete=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Ate)return;const i=r==null?void 0:r.token;pO!==i&&(pO=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pV(t=t7()){const e=Ug(t,"auth");if(e.isInitialized())return e.getImmediate();const r=iee(t,{popupRedirectResolver:xte,persistence:[Oee,bee,sV]}),n=k$("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=Ete(a.toString());pee(r,s,()=>s(r.currentUser)),fee(r,l=>s(l))}}const i=E$("auth");return i&&see(r,`http://${i}`),r}function Nte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}eee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=io("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",Nte().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ste("Browser");var mO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ed,mV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,A){function R(){}R.prototype=A.prototype,E.D=A.prototype,E.prototype=new R,E.prototype.constructor=E,E.C=function(F,P,B){for(var D=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)D[Q-2]=arguments[Q];return A.prototype[P].apply(F,D)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,A,R){R||(R=0);var F=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)F[P]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(P=0;16>P;++P)F[P]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=E.g[0],R=E.g[1],P=E.g[2];var B=E.g[3],D=A+(B^R&(P^B))+F[0]+3614090360&4294967295;A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[1]+3905402710&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[2]+606105819&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[3]+3250441966&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[4]+4118548399&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[5]+1200080426&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[6]+2821735955&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[7]+4249261313&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[8]+1770035416&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[9]+2336552879&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[10]+4294925233&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[11]+2304563134&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(B^R&(P^B))+F[12]+1804603682&4294967295,A=R+(D<<7&4294967295|D>>>25),D=B+(P^A&(R^P))+F[13]+4254626195&4294967295,B=A+(D<<12&4294967295|D>>>20),D=P+(R^B&(A^R))+F[14]+2792965006&4294967295,P=B+(D<<17&4294967295|D>>>15),D=R+(A^P&(B^A))+F[15]+1236535329&4294967295,R=P+(D<<22&4294967295|D>>>10),D=A+(P^B&(R^P))+F[1]+4129170786&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[6]+3225465664&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[11]+643717713&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[0]+3921069994&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[5]+3593408605&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[10]+38016083&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[15]+3634488961&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[4]+3889429448&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[9]+568446438&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[14]+3275163606&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[3]+4107603335&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[8]+1163531501&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(P^B&(R^P))+F[13]+2850285829&4294967295,A=R+(D<<5&4294967295|D>>>27),D=B+(R^P&(A^R))+F[2]+4243563512&4294967295,B=A+(D<<9&4294967295|D>>>23),D=P+(A^R&(B^A))+F[7]+1735328473&4294967295,P=B+(D<<14&4294967295|D>>>18),D=R+(B^A&(P^B))+F[12]+2368359562&4294967295,R=P+(D<<20&4294967295|D>>>12),D=A+(R^P^B)+F[5]+4294588738&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[8]+2272392833&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[11]+1839030562&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[14]+4259657740&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[1]+2763975236&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[4]+1272893353&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[7]+4139469664&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[10]+3200236656&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[13]+681279174&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[0]+3936430074&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[3]+3572445317&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[6]+76029189&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(R^P^B)+F[9]+3654602809&4294967295,A=R+(D<<4&4294967295|D>>>28),D=B+(A^R^P)+F[12]+3873151461&4294967295,B=A+(D<<11&4294967295|D>>>21),D=P+(B^A^R)+F[15]+530742520&4294967295,P=B+(D<<16&4294967295|D>>>16),D=R+(P^B^A)+F[2]+3299628645&4294967295,R=P+(D<<23&4294967295|D>>>9),D=A+(P^(R|~B))+F[0]+4096336452&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[7]+1126891415&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[14]+2878612391&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[5]+4237533241&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[12]+1700485571&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[3]+2399980690&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[10]+4293915773&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[1]+2240044497&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[8]+1873313359&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[15]+4264355552&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[6]+2734768916&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[13]+1309151649&4294967295,R=P+(D<<21&4294967295|D>>>11),D=A+(P^(R|~B))+F[4]+4149444226&4294967295,A=R+(D<<6&4294967295|D>>>26),D=B+(R^(A|~P))+F[11]+3174756917&4294967295,B=A+(D<<10&4294967295|D>>>22),D=P+(A^(B|~R))+F[2]+718787259&4294967295,P=B+(D<<15&4294967295|D>>>17),D=R+(B^(P|~A))+F[9]+3951481745&4294967295,E.g[0]=E.g[0]+A&4294967295,E.g[1]=E.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+B&4294967295}n.prototype.u=function(E,A){A===void 0&&(A=E.length);for(var R=A-this.blockSize,F=this.B,P=this.h,B=0;B<A;){if(P==0)for(;B<=R;)i(this,E,B),B+=this.blockSize;if(typeof E=="string"){for(;B<A;)if(F[P++]=E.charCodeAt(B++),P==this.blockSize){i(this,F),P=0;break}}else for(;B<A;)if(F[P++]=E[B++],P==this.blockSize){i(this,F),P=0;break}}this.h=P,this.o+=A},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var A=1;A<E.length-8;++A)E[A]=0;var R=8*this.o;for(A=E.length-8;A<E.length;++A)E[A]=R&255,R/=256;for(this.u(E),E=Array(16),A=R=0;4>A;++A)for(var F=0;32>F;F+=8)E[R++]=this.g[A]>>>F&255;return E};function a(E,A){var R=l;return Object.prototype.hasOwnProperty.call(R,E)?R[E]:R[E]=A(E)}function s(E,A){this.h=A;for(var R=[],F=!0,P=E.length-1;0<=P;P--){var B=E[P]|0;F&&B==A||(R[P]=B,F=!1)}this.g=R}var l={};function d(E){return-128<=E&&128>E?a(E,function(A){return new s([A|0],0>A?-1:0)}):new s([E|0],0>E?-1:0)}function h(E){if(isNaN(E)||!isFinite(E))return m;if(0>E)return w(h(-E));for(var A=[],R=1,F=0;E>=R;F++)A[F]=E/R|0,R*=4294967296;return new s(A,0)}function p(E,A){if(E.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E.charAt(0)=="-")return w(p(E.substring(1),A));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(A,8)),F=m,P=0;P<E.length;P+=8){var B=Math.min(8,E.length-P),D=parseInt(E.substring(P,P+B),A);8>B?(B=h(Math.pow(A,B)),F=F.j(B).add(h(D))):(F=F.j(R),F=F.add(h(D)))}return F}var m=d(0),y=d(1),b=d(16777216);t=s.prototype,t.m=function(){if(S(this))return-w(this).m();for(var E=0,A=1,R=0;R<this.g.length;R++){var F=this.i(R);E+=(0<=F?F:4294967296+F)*A,A*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(S(this))return"-"+w(this).toString(E);for(var A=h(Math.pow(E,6)),R=this,F="";;){var P=$(R,A).g;R=N(R,P.j(A));var B=((0<R.g.length?R.g[0]:R.h)>>>0).toString(E);if(R=P,T(R))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var A=0;A<E.g.length;A++)if(E.g[A]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=N(this,E),S(E)?-1:T(E)?0:1};function w(E){for(var A=E.g.length,R=[],F=0;F<A;F++)R[F]=~E.g[F];return new s(R,~E.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0,P=0;P<=A;P++){var B=F+(this.i(P)&65535)+(E.i(P)&65535),D=(B>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);F=D>>>16,B&=65535,D&=65535,R[P]=D<<16|B}return new s(R,R[R.length-1]&-2147483648?-1:0)};function N(E,A){return E.add(w(A))}t.j=function(E){if(T(this)||T(E))return m;if(S(this))return S(E)?w(this).j(w(E)):w(w(this).j(E));if(S(E))return w(this.j(w(E)));if(0>this.l(b)&&0>E.l(b))return h(this.m()*E.m());for(var A=this.g.length+E.g.length,R=[],F=0;F<2*A;F++)R[F]=0;for(F=0;F<this.g.length;F++)for(var P=0;P<E.g.length;P++){var B=this.i(F)>>>16,D=this.i(F)&65535,Q=E.i(P)>>>16,Z=E.i(P)&65535;R[2*F+2*P]+=D*Z,C(R,2*F+2*P),R[2*F+2*P+1]+=B*Z,C(R,2*F+2*P+1),R[2*F+2*P+1]+=D*Q,C(R,2*F+2*P+1),R[2*F+2*P+2]+=B*Q,C(R,2*F+2*P+2)}for(F=0;F<A;F++)R[F]=R[2*F+1]<<16|R[2*F];for(F=A;F<2*A;F++)R[F]=0;return new s(R,0)};function C(E,A){for(;(E[A]&65535)!=E[A];)E[A+1]+=E[A]>>>16,E[A]&=65535,A++}function k(E,A){this.g=E,this.h=A}function $(E,A){if(T(A))throw Error("division by zero");if(T(E))return new k(m,m);if(S(E))return A=$(w(E),A),new k(w(A.g),w(A.h));if(S(A))return A=$(E,w(A)),new k(w(A.g),A.h);if(30<E.g.length){if(S(E)||S(A))throw Error("slowDivide_ only works with positive integers.");for(var R=y,F=A;0>=F.l(E);)R=I(R),F=I(F);var P=L(R,1),B=L(F,1);for(F=L(F,2),R=L(R,2);!T(F);){var D=B.add(F);0>=D.l(E)&&(P=P.add(R),B=D),F=L(F,1),R=L(R,1)}return A=N(E,P.j(A)),new k(P,A)}for(P=m;0<=E.l(A);){for(R=Math.max(1,Math.floor(E.m()/A.m())),F=Math.ceil(Math.log(R)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(R),D=B.j(A);S(D)||0<D.l(E);)R-=F,B=h(R),D=B.j(A);T(B)&&(B=y),P=P.add(B),E=N(E,D)}return new k(P,E)}t.A=function(E){return $(this,E).h},t.and=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)&E.i(F);return new s(R,this.h&E.h)},t.or=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)|E.i(F);return new s(R,this.h|E.h)},t.xor=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)^E.i(F);return new s(R,this.h^E.h)};function I(E){for(var A=E.g.length+1,R=[],F=0;F<A;F++)R[F]=E.i(F)<<1|E.i(F-1)>>>31;return new s(R,E.h)}function L(E,A){var R=A>>5;A%=32;for(var F=E.g.length-R,P=[],B=0;B<F;B++)P[B]=0<A?E.i(B+R)>>>A|E.i(B+R+1)<<32-A:E.i(B+R);return new s(P,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,mV=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Ed=s}).apply(typeof mO<"u"?mO:typeof self<"u"?self:typeof window<"u"?window:{});var qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gV,Wp,yV,Iv,RT,vV,bV,xV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,O,V){return v==Array.prototype||v==Object.prototype||(v[O]=V.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof qy=="object"&&qy];for(var O=0;O<v.length;++O){var V=v[O];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=r(this);function i(v,O){if(O)e:{var V=n;v=v.split(".");for(var K=0;K<v.length-1;K++){var _e=v[K];if(!(_e in V))break e;V=V[_e]}v=v[v.length-1],K=V[v],O=O(K),O!=K&&O!=null&&e(V,v,{configurable:!0,writable:!0,value:O})}}function a(v,O){v instanceof String&&(v+="");var V=0,K=!1,_e={next:function(){if(!K&&V<v.length){var Oe=V++;return{value:O(Oe,v[Oe]),done:!1}}return K=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(v){return v||function(){return a(this,function(O,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function d(v){var O=typeof v;return O=O!="object"?O:v?Array.isArray(v)?"array":O:"null",O=="array"||O=="object"&&typeof v.length=="number"}function h(v){var O=typeof v;return O=="object"&&v!=null||O=="function"}function p(v,O,V){return v.call.apply(v.bind,arguments)}function m(v,O,V){if(!v)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,K),v.apply(O,_e)}}return function(){return v.apply(O,arguments)}}function y(v,O,V){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function b(v,O){var V=Array.prototype.slice.call(arguments,1);return function(){var K=V.slice();return K.push.apply(K,arguments),v.apply(this,K)}}function T(v,O){function V(){}V.prototype=O.prototype,v.aa=O.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(K,_e,Oe){for(var it=Array(arguments.length-2),Rr=2;Rr<arguments.length;Rr++)it[Rr-2]=arguments[Rr];return O.prototype[_e].apply(K,it)}}function S(v){const O=v.length;if(0<O){const V=Array(O);for(let K=0;K<O;K++)V[K]=v[K];return V}return[]}function w(v,O){for(let V=1;V<arguments.length;V++){const K=arguments[V];if(d(K)){const _e=v.length||0,Oe=K.length||0;v.length=_e+Oe;for(let it=0;it<Oe;it++)v[_e+it]=K[it]}else v.push(K)}}class N{constructor(O,V){this.i=O,this.j=V,this.h=0,this.g=null}get(){let O;return 0<this.h?(this.h--,O=this.g,this.g=O.next,O.next=null):O=this.i(),O}}function C(v){return/^[\s\xa0]*$/.test(v)}function k(){var v=l.navigator;return v&&(v=v.userAgent)?v:""}function $(v){return $[" "](v),v}$[" "]=function(){};var I=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function L(v,O,V){for(const K in v)O.call(V,v[K],K,v)}function E(v,O){for(const V in v)O.call(void 0,v[V],V,v)}function A(v){const O={};for(const V in v)O[V]=v[V];return O}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(v,O){let V,K;for(let _e=1;_e<arguments.length;_e++){K=arguments[_e];for(V in K)v[V]=K[V];for(let Oe=0;Oe<R.length;Oe++)V=R[Oe],Object.prototype.hasOwnProperty.call(K,V)&&(v[V]=K[V])}}function P(v){var O=1;v=v.split(":");const V=[];for(;0<O&&v.length;)V.push(v.shift()),O--;return v.length&&V.push(v.join(":")),V}function B(v){l.setTimeout(()=>{throw v},0)}function D(){var v=ge;let O=null;return v.g&&(O=v.g,v.g=v.g.next,v.g||(v.h=null),O.next=null),O}class Q{constructor(){this.h=this.g=null}add(O,V){const K=Z.get();K.set(O,V),this.h?this.h.next=K:this.g=K,this.h=K}}var Z=new N(()=>new W,v=>v.reset());class W{constructor(){this.next=this.g=this.h=null}set(O,V){this.h=O,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let J,Y=!1,ge=new Q,ce=()=>{const v=l.Promise.resolve(void 0);J=()=>{v.then(X)}};var X=()=>{for(var v;v=D();){try{v.h.call(v.g)}catch(V){B(V)}var O=Z;O.j(v),100>O.h&&(O.h++,v.next=O.g,O.g=v)}Y=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(v,O){this.type=v,this.g=this.target=O,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var v=!1,O=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};l.addEventListener("test",V,O),l.removeEventListener("test",V,O)}catch{}return v})();function ae(v,O){if(de.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,K=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=O,O=v.relatedTarget){if(I){e:{try{$(O.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(O=null)}}else V=="mouseover"?O=v.fromElement:V=="mouseout"&&(O=v.toElement);this.relatedTarget=O,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:pe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&ae.aa.h.call(this)}}T(ae,de);var pe={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function Ne(v,O,V,K,_e){this.listener=v,this.proxy=null,this.src=O,this.type=V,this.capture=!!K,this.ha=_e,this.key=++Qe,this.da=this.fa=!1}function le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function we(v){this.src=v,this.g={},this.h=0}we.prototype.add=function(v,O,V,K,_e){var Oe=v.toString();v=this.g[Oe],v||(v=this.g[Oe]=[],this.h++);var it=ut(v,O,K,_e);return-1<it?(O=v[it],V||(O.fa=!1)):(O=new Ne(O,this.src,Oe,!!K,_e),O.fa=V,v.push(O)),O};function xe(v,O){var V=O.type;if(V in v.g){var K=v.g[V],_e=Array.prototype.indexOf.call(K,O,void 0),Oe;(Oe=0<=_e)&&Array.prototype.splice.call(K,_e,1),Oe&&(le(O),v.g[V].length==0&&(delete v.g[V],v.h--))}}function ut(v,O,V,K){for(var _e=0;_e<v.length;++_e){var Oe=v[_e];if(!Oe.da&&Oe.listener==O&&Oe.capture==!!V&&Oe.ha==K)return _e}return-1}var He="closure_lm_"+(1e6*Math.random()|0),ct={};function nt(v,O,V,K,_e){if(Array.isArray(O)){for(var Oe=0;Oe<O.length;Oe++)nt(v,O[Oe],V,K,_e);return null}return V=mt(V),v&&v[ve]?v.K(O,V,h(K)?!!K.capture:!1,_e):Ut(v,O,V,!1,K,_e)}function Ut(v,O,V,K,_e,Oe){if(!O)throw Error("Invalid event type");var it=h(_e)?!!_e.capture:!!_e,Rr=ye(v);if(Rr||(v[He]=Rr=new we(v)),V=Rr.add(O,V,K,it,Oe),V.proxy)return V;if(K=Ie(),V.proxy=K,K.src=v,K.listener=V,v.addEventListener)oe||(_e=it),_e===void 0&&(_e=!1),v.addEventListener(O.toString(),K,_e);else if(v.attachEvent)v.attachEvent(St(O.toString()),K);else if(v.addListener&&v.removeListener)v.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ie(){function v(V){return O.call(v.src,v.listener,V)}const O=Xt;return v}function st(v,O,V,K,_e){if(Array.isArray(O))for(var Oe=0;Oe<O.length;Oe++)st(v,O[Oe],V,K,_e);else K=h(K)?!!K.capture:!!K,V=mt(V),v&&v[ve]?(v=v.i,O=String(O).toString(),O in v.g&&(Oe=v.g[O],V=ut(Oe,V,K,_e),-1<V&&(le(Oe[V]),Array.prototype.splice.call(Oe,V,1),Oe.length==0&&(delete v.g[O],v.h--)))):v&&(v=ye(v))&&(O=v.g[O.toString()],v=-1,O&&(v=ut(O,V,K,_e)),(V=-1<v?O[v]:null)&&pt(V))}function pt(v){if(typeof v!="number"&&v&&!v.da){var O=v.src;if(O&&O[ve])xe(O.i,v);else{var V=v.type,K=v.proxy;O.removeEventListener?O.removeEventListener(V,K,v.capture):O.detachEvent?O.detachEvent(St(V),K):O.addListener&&O.removeListener&&O.removeListener(K),(V=ye(O))?(xe(V,v),V.h==0&&(V.src=null,O[He]=null)):le(v)}}}function St(v){return v in ct?ct[v]:ct[v]="on"+v}function Xt(v,O){if(v.da)v=!0;else{O=new ae(O,this);var V=v.listener,K=v.ha||v.src;v.fa&&pt(v),v=V.call(K,O)}return v}function ye(v){return v=v[He],v instanceof we?v:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(v){return typeof v=="function"?v:(v[We]||(v[We]=function(O){return v.handleEvent(O)}),v[We])}function gt(){re.call(this),this.i=new we(this),this.M=this,this.F=null}T(gt,re),gt.prototype[ve]=!0,gt.prototype.removeEventListener=function(v,O,V,K){st(this,v,O,V,K)};function ot(v,O){var V,K=v.F;if(K)for(V=[];K;K=K.F)V.push(K);if(v=v.M,K=O.type||O,typeof O=="string")O=new de(O,v);else if(O instanceof de)O.target=O.target||v;else{var _e=O;O=new de(K,v),F(O,_e)}if(_e=!0,V)for(var Oe=V.length-1;0<=Oe;Oe--){var it=O.g=V[Oe];_e=Je(it,K,!0,O)&&_e}if(it=O.g=v,_e=Je(it,K,!0,O)&&_e,_e=Je(it,K,!1,O)&&_e,V)for(Oe=0;Oe<V.length;Oe++)it=O.g=V[Oe],_e=Je(it,K,!1,O)&&_e}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var v=this.i,O;for(O in v.g){for(var V=v.g[O],K=0;K<V.length;K++)le(V[K]);delete v.g[O],v.h--}}this.F=null},gt.prototype.K=function(v,O,V,K){return this.i.add(String(v),O,!1,V,K)},gt.prototype.L=function(v,O,V,K){return this.i.add(String(v),O,!0,V,K)};function Je(v,O,V,K){if(O=v.i.g[String(O)],!O)return!0;O=O.concat();for(var _e=!0,Oe=0;Oe<O.length;++Oe){var it=O[Oe];if(it&&!it.da&&it.capture==V){var Rr=it.listener,ti=it.ha||it.src;it.fa&&xe(v.i,it),_e=Rr.call(ti,K)!==!1&&_e}}return _e&&!K.defaultPrevented}function Rt(v,O,V){if(typeof v=="function")V&&(v=y(v,V));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(O)?-1:l.setTimeout(v,O||0)}function Yt(v){v.g=Rt(()=>{v.g=null,v.i&&(v.i=!1,Yt(v))},v.l);const O=v.h;v.h=null,v.m.apply(null,O)}class Kr extends re{constructor(O,V){super(),this.m=O,this.l=V,this.h=null,this.i=!1,this.g=null}j(O){this.h=arguments,this.g?this.i=!0:Yt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(v){re.call(this),this.h=v,this.g={}}T(ln,re);var Br=[];function ee(v){L(v.g,function(O,V){this.g.hasOwnProperty(V)&&pt(O)},v),v.g={}}ln.prototype.N=function(){ln.aa.N.call(this),ee(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Re=l.JSON.stringify,Ve=l.JSON.parse,Gt=class{stringify(v){return l.JSON.stringify(v,void 0)}parse(v){return l.JSON.parse(v,void 0)}};function jt(){}jt.prototype.h=null;function vr(v){return v.h||(v.h=v.i())}function dr(){}var zt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pt(){de.call(this,"d")}T(Pt,de);function $t(){de.call(this,"c")}T($t,de);var kt={},Ur=null;function cr(){return Ur=Ur||new gt}kt.La="serverreachability";function gn(v){de.call(this,kt.La,v)}T(gn,de);function cn(v){const O=cr();ot(O,new gn(O))}kt.STAT_EVENT="statevent";function ei(v,O){de.call(this,kt.STAT_EVENT,v),this.stat=O}T(ei,de);function nr(v){const O=cr();ot(O,new ei(O,v))}kt.Ma="timingevent";function _i(v,O){de.call(this,kt.Ma,v),this.size=O}T(_i,de);function xr(v,O){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){v()},O)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function ia(v,O,V,K,_e,Oe){v.info(function(){if(v.g)if(Oe)for(var it="",Rr=Oe.split("&"),ti=0;ti<Rr.length;ti++){var or=Rr[ti].split("=");if(1<or.length){var Ti=or[0];or=or[1];var Ai=Ti.split("_");it=2<=Ai.length&&Ai[1]=="type"?it+(Ti+"="+or+"&"):it+(Ti+"=redacted&")}}else it=null;else it=Oe;return"XMLHTTP REQ ("+K+") [attempt "+_e+"]: "+O+`
`+V+`
`+it})}function rn(v,O,V,K,_e,Oe,it){v.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+_e+"]: "+O+`
`+V+`
`+Oe+" "+it})}function vn(v,O,V,K){v.info(function(){return"XMLHTTP TEXT ("+O+"): "+Mn(v,V)+(K?" "+K:"")})}function aa(v,O){v.info(function(){return"TIMEOUT: "+O})}yn.prototype.info=function(){};function Mn(v,O){if(!v.g)return O;if(!O)return null;try{var V=JSON.parse(O);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var K=V[v];if(!(2>K.length)){var _e=K[1];if(Array.isArray(_e)&&!(1>_e.length)){var Oe=_e[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var it=1;it<_e.length;it++)_e[it]=""}}}}return Re(V)}catch{return O}}var zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},un={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jn;function xa(){}T(xa,jt),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},jn=new xa;function Wi(v,O,V,K){this.j=v,this.i=O,this.l=V,this.R=K||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ho}function ho(){this.i=null,this.g="",this.h=!1}var zs={},wa={};function vt(v,O,V){v.L=1,v.v=ur(ue(O)),v.m=V,v.P=!0,he(v,null)}function he(v,O){v.F=Date.now(),Ft(v),v.A=ue(v.v);var V=v.A,K=v.R;Array.isArray(K)||(K=[String(K)]),Wo(V.i,"t",K),v.C=0,V=v.j.J,v.h=new ho,v.g=P1(v.j,V?O:null,!v.m),0<v.O&&(v.M=new Kr(y(v.Y,v,v.g),v.O)),O=v.U,V=v.g,K=v.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Br[0]=_e.toString()),_e=Br);for(var Oe=0;Oe<_e.length;Oe++){var it=nt(V,_e[Oe],K||O.handleEvent,!1,O.h||O);if(!it)break;O.g[it.key]=it}O=v.H?A(v.H):{},v.m?(v.u||(v.u="POST"),O["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,O)):(v.u="GET",v.g.ea(v.A,v.u,null,O)),cn(),ia(v.i,v.u,v.A,v.l,v.R,v.m)}Wi.prototype.ca=function(v){v=v.target;const O=this.M;O&&oa(v)==3?O.j():this.Y(v)},Wi.prototype.Y=function(v){try{if(v==this.g)e:{const Ai=oa(this.g);var O=this.g.Ba();const dc=this.g.Z();if(!(3>Ai)&&(Ai!=3||this.g&&(this.h.h||this.g.oa()||Mu(this.g)))){this.J||Ai!=4||O==7||(O==8||0>=dc?cn(3):cn(2)),dn(this);var V=this.g.Z();this.X=V;t:if(qe(this)){var K=Mu(this.g);v="";var _e=K.length,Oe=oa(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),$r(this);var it="";break t}this.h.i=new l.TextDecoder}for(O=0;O<_e;O++)this.h.h=!0,v+=this.h.i.decode(K[O],{stream:!(Oe&&O==_e-1)});K.length=0,this.h.g+=v,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=V==200,rn(this.i,this.u,this.A,this.l,this.R,Ai,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Rr,ti=this.g;if((Rr=ti.g?ti.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(Rr)){var or=Rr;break t}}or=null}if(V=or)vn(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_r(this,V);else{this.o=!1,this.s=3,nr(12),hn(this),$r(this);break e}}if(this.P){V=!0;let Aa;for(;!this.J&&this.C<it.length;)if(Aa=rt(this,it),Aa==wa){Ai==4&&(this.s=4,nr(14),V=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(Aa==zs){this.s=4,nr(15),vn(this.i,this.l,it,"[Invalid Chunk]"),V=!1;break}else vn(this.i,this.l,Aa,null),_r(this,Aa);if(qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ai!=4||it.length!=0||this.h.h||(this.s=1,nr(16),V=!1),this.o=this.o&&V,!V)vn(this.i,this.l,it,"[Invalid Chunked Response]"),hn(this),$r(this);else if(0<it.length&&!this.W){this.W=!0;var Ti=this.j;Ti.g==this&&Ti.ba&&!Ti.M&&(Ti.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),$f(Ti),Ti.M=!0,nr(11))}}else vn(this.i,this.l,it,null),_r(this,it);Ai==4&&hn(this),this.o&&!this.J&&(Ai==4?I1(this.j,this):(this.o=!1,Ft(this)))}else E1(this.g),V==400&&0<it.indexOf("Unknown SID")?(this.s=3,nr(12)):(this.s=0,nr(13)),hn(this),$r(this)}}}catch{}finally{}};function qe(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function rt(v,O){var V=v.C,K=O.indexOf(`
`,V);return K==-1?wa:(V=Number(O.substring(V,K)),isNaN(V)?zs:(K+=1,K+V>O.length?wa:(O=O.slice(K,K+V),v.C=K+V,O)))}Wi.prototype.cancel=function(){this.J=!0,hn(this)};function Ft(v){v.S=Date.now()+v.I,sr(v,v.I)}function sr(v,O){if(v.B!=null)throw Error("WatchDog timer not null");v.B=xr(y(v.ba,v),O)}function dn(v){v.B&&(l.clearTimeout(v.B),v.B=null)}Wi.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(aa(this.i,this.A),this.L!=2&&(cn(),nr(17)),hn(this),this.s=2,$r(this)):sr(this,this.S-v)};function $r(v){v.j.G==0||v.J||I1(v.j,v)}function hn(v){dn(v);var O=v.M;O&&typeof O.ma=="function"&&O.ma(),v.M=null,ee(v.U),v.g&&(O=v.g,v.g=null,O.abort(),O.ma())}function _r(v,O){try{var V=v.j;if(V.G!=0&&(V.g==v||Vs(V.h,v))){if(!v.K&&Vs(V.h,v)&&V.G==3){try{var K=V.Da.g.parse(O)}catch{K=null}if(Array.isArray(K)&&K.length==3){var _e=K;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)cc(V),lc(V);else break e;zf(V),nr(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=xr(y(V.Za,V),6e3));if(1>=ku(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Qo(V,11)}else if((v.K||V.g==v)&&cc(V),!C(O))for(_e=V.Da.g.parse(O),O=0;O<_e.length;O++){let or=_e[O];if(V.T=or[0],or=or[1],V.G==2)if(or[0]=="c"){V.K=or[1],V.ia=or[2];const Ti=or[3];Ti!=null&&(V.la=Ti,V.j.info("VER="+V.la));const Ai=or[4];Ai!=null&&(V.Aa=Ai,V.j.info("SVER="+V.Aa));const dc=or[5];dc!=null&&typeof dc=="number"&&0<dc&&(K=1.5*dc,V.L=K,V.j.info("backChannelRequestTimeoutMs_="+K)),K=V;const Aa=v.g;if(Aa){const Lu=Aa.g?Aa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var Oe=K.h;Oe.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Fs(Oe,Oe.h),Oe.h=null))}if(K.D){const Yo=Aa.g?Aa.g.getResponseHeader("X-HTTP-Session-Id"):null;Yo&&(K.ya=Yo,Xe(K.I,K.D,Yo))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),K=V;var it=v;if(K.qa=M1(K,K.J?K.ia:null,K.W),it.K){sa(K.h,it);var Rr=it,ti=K.L;ti&&(Rr.I=ti),Rr.B&&(dn(Rr),Ft(Rr)),K.g=it}else C1(K);0<V.i.length&&f0(V)}else or[0]!="stop"&&or[0]!="close"||Qo(V,7);else V.G==3&&(or[0]=="stop"||or[0]=="close"?or[0]=="stop"?Qo(V,7):Bf(V):or[0]!="noop"&&V.l&&V.l.ta(or),V.v=0)}}cn(4)}catch{}}var fo=class{constructor(v,O){this.g=v,this.map=O}};function $s(v){this.l=v||10,l.PerformanceNavigationTiming?(v=l.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qo(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function ku(v){return v.h?1:v.g?v.g.size:0}function Vs(v,O){return v.h?v.h==O:v.g?v.g.has(O):!1}function Fs(v,O){v.g?v.g.add(O):v.h=O}function sa(v,O){v.h&&v.h==O?v.h=null:v.g&&v.g.has(O)&&v.g.delete(O)}$s.prototype.cancel=function(){if(this.i=Si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Si(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let O=v.i;for(const V of v.g.values())O=O.concat(V.D);return O}return S(v.i)}function Cu(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var O=[],V=v.length,K=0;K<V;K++)O.push(v[K]);return O}O=[],V=0;for(K in v)O[V++]=v[K];return O}function l0(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var O=[];v=v.length;for(var V=0;V<v;V++)O.push(V);return O}O=[],V=0;for(const K in v)O[V++]=K;return O}}}function Ho(v,O){if(v.forEach&&typeof v.forEach=="function")v.forEach(O,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,O,void 0);else for(var V=l0(v),K=Cu(v),_e=K.length,Oe=0;Oe<_e;Oe++)O.call(void 0,K[Oe],V&&V[Oe],v)}var rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Go(v,O){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var K=v[V].indexOf("="),_e=null;if(0<=K){var Oe=v[V].substring(0,K);_e=v[V].substring(K+1)}else Oe=v[V];O(Oe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function ps(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof ps){this.h=v.h,ke(this,v.j),this.o=v.o,this.g=v.g,Fe(this,v.s),this.l=v.l;var O=v.i,V=new Sa;V.i=O.i,O.g&&(V.g=new Map(O.g),V.h=O.h),et(this,V),this.m=v.m}else v&&(O=String(v).match(rc))?(this.h=!1,ke(this,O[1]||"",!0),this.o=Jt(O[2]||""),this.g=Jt(O[3]||"",!0),Fe(this,O[4]),this.l=Jt(O[5]||"",!0),et(this,O[6]||"",!0),this.m=Jt(O[7]||"")):(this.h=!1,this.i=new Sa(null,this.h))}ps.prototype.toString=function(){var v=[],O=this.j;O&&v.push(Wr(O,_a,!0),":");var V=this.g;return(V||O=="file")&&(v.push("//"),(O=this.o)&&v.push(Wr(O,_a,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(Wr(V,V.charAt(0)=="/"?Ko:nc,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",Wr(V,Tr)),v.join("")};function ue(v){return new ps(v)}function ke(v,O,V){v.j=V?Jt(O,!0):O,v.j&&(v.j=v.j.replace(/:$/,""))}function Fe(v,O){if(O){if(O=Number(O),isNaN(O)||0>O)throw Error("Bad port number "+O);v.s=O}else v.s=null}function et(v,O,V){O instanceof Sa?(v.i=O,S1(v.i,v.h)):(V||(O=Wr(O,Ou)),v.i=new Sa(O,v.h))}function Xe(v,O,V){v.i.set(O,V)}function ur(v){return Xe(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Jt(v,O){return v?O?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Wr(v,O,V){return typeof v=="string"?(v=encodeURI(v).replace(O,Mi),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Mi(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var _a=/[#\/\?@]/g,nc=/[#\?:]/g,Ko=/[#\?]/g,Ou=/[#\?@]/g,Tr=/#/g;function Sa(v,O){this.h=this.g=null,this.i=v||null,this.j=!!O}function Fn(v){v.g||(v.g=new Map,v.h=0,v.i&&Go(v.i,function(O,V){v.add(decodeURIComponent(O.replace(/\+/g," ")),V)}))}t=Sa.prototype,t.add=function(v,O){Fn(this),this.i=null,v=Ha(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(O),this.h+=1,this};function c0(v,O){Fn(v),O=Ha(v,O),v.g.has(O)&&(v.i=null,v.h-=v.g.get(O).length,v.g.delete(O))}function u0(v,O){return Fn(v),O=Ha(v,O),v.g.has(O)}t.forEach=function(v,O){Fn(this),this.g.forEach(function(V,K){V.forEach(function(_e){v.call(O,_e,K,this)},this)},this)},t.na=function(){Fn(this);const v=Array.from(this.g.values()),O=Array.from(this.g.keys()),V=[];for(let K=0;K<O.length;K++){const _e=v[K];for(let Oe=0;Oe<_e.length;Oe++)V.push(O[K])}return V},t.V=function(v){Fn(this);let O=[];if(typeof v=="string")u0(this,v)&&(O=O.concat(this.g.get(Ha(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)O=O.concat(v[V])}return O},t.set=function(v,O){return Fn(this),this.i=null,v=Ha(this,v),u0(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[O]),this.h+=1,this},t.get=function(v,O){return v?(v=this.V(v),0<v.length?String(v[0]):O):O};function Wo(v,O,V){c0(v,O),0<V.length&&(v.i=null,v.g.set(Ha(v,O),S(V)),v.h+=V.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],O=Array.from(this.g.keys());for(var V=0;V<O.length;V++){var K=O[V];const Oe=encodeURIComponent(String(K)),it=this.V(K);for(K=0;K<it.length;K++){var _e=Oe;it[K]!==""&&(_e+="="+encodeURIComponent(String(it[K]))),v.push(_e)}}return this.i=v.join("&")};function Ha(v,O){return O=String(O),v.j&&(O=O.toLowerCase()),O}function S1(v,O){O&&!v.j&&(Fn(v),v.i=null,v.g.forEach(function(V,K){var _e=K.toLowerCase();K!=_e&&(c0(this,K),Wo(this,_e,V))},v)),v.j=O}function Df(v,O){const V=new yn;if(l.Image){const K=new Image;K.onload=b(Ta,V,"TestLoadImage: loaded",!0,O,K),K.onerror=b(Ta,V,"TestLoadImage: error",!1,O,K),K.onabort=b(Ta,V,"TestLoadImage: abort",!1,O,K),K.ontimeout=b(Ta,V,"TestLoadImage: timeout",!1,O,K),l.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=v}else O(!1)}function T1(v,O){const V=new yn,K=new AbortController,_e=setTimeout(()=>{K.abort(),Ta(V,"TestPingServer: timeout",!1,O)},1e4);fetch(v,{signal:K.signal}).then(Oe=>{clearTimeout(_e),Oe.ok?Ta(V,"TestPingServer: ok",!0,O):Ta(V,"TestPingServer: server error",!1,O)}).catch(()=>{clearTimeout(_e),Ta(V,"TestPingServer: error",!1,O)})}function Ta(v,O,V,K,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),K(V)}catch{}}function qs(){this.g=new Gt}function Lf(v,O,V){const K=V||"";try{Ho(v,function(_e,Oe){let it=_e;h(_e)&&(it=Re(_e)),O.push(K+Oe+"="+encodeURIComponent(it))})}catch(_e){throw O.push(K+"type="+encodeURIComponent("_badmap")),_e}}function po(v){this.l=v.Ub||null,this.j=v.eb||!1}T(po,jt),po.prototype.g=function(){return new Ga(this.l,this.j)},po.prototype.i=(function(v){return function(){return v}})({});function Ga(v,O){gt.call(this),this.D=v,this.o=O,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ga,gt),t=Ga.prototype,t.open=function(v,O){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=O,this.readyState=1,ic(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const O={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(O.body=v),(this.D||l).fetch(new Request(this.A,O)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ic(this)),this.g&&(this.readyState=3,ic(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var O=v.value?v.value:new Uint8Array(0);(O=this.v.decode(O,{stream:!v.done}))&&(this.response=this.responseText+=O)}v.done?mo(this):ic(this),this.readyState==3&&d0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,mo(this))},t.Qa=function(v){this.g&&(this.response=v,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,ic(v)}t.setRequestHeader=function(v,O){this.u.append(v,O)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],O=this.h.entries();for(var V=O.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=O.next();return v.join(`\r
`)};function ic(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function Iu(v){let O="";return L(v,function(V,K){O+=K,O+=":",O+=V,O+=`\r
`}),O}function ac(v,O,V){e:{for(K in V){var K=!1;break e}K=!0}K||(V=Iu(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):Xe(v,O,V))}function bn(v){gt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(bn,gt);var Xi=/^https?$/i,Xo=["POST","PUT"];t=bn.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,O,V,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);O=O?O.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jn.g(),this.v=this.o?vr(this.o):vr(jn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(O,String(v),!0),this.B=!1}catch(Oe){Ru(this,Oe);return}if(v=V||"",V=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var _e in K)V.set(_e,K[_e]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const Oe of K.keys())V.set(Oe,K.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from(V.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),_e=l.FormData&&v instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Xo,O,void 0))||K||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,it]of V)this.g.setRequestHeader(Oe,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{h0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Oe){Ru(this,Oe)}};function Ru(v,O){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=O,v.m=5,sc(v),oc(v)}function sc(v){v.A||(v.A=!0,ot(v,"complete"),ot(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,ot(this,"complete"),ot(this,"abort"),oc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oc(this,!0)),bn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?A1(this):this.bb())},t.bb=function(){A1(this)};function A1(v){if(v.h&&typeof s<"u"&&(!v.v[1]||oa(v)!=4||v.Z()!=2)){if(v.u&&oa(v)==4)Rt(v.Ea,0,v);else if(ot(v,"readystatechange"),oa(v)==4){v.h=!1;try{const it=v.Z();e:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var O=!0;break e;default:O=!1}var V;if(!(V=O)){var K;if(K=it===0){var _e=String(v.D).match(rc)[1]||null;!_e&&l.self&&l.self.location&&(_e=l.self.location.protocol.slice(0,-1)),K=!Xi.test(_e?_e.toLowerCase():"")}V=K}if(V)ot(v,"complete"),ot(v,"success");else{v.m=6;try{var Oe=2<oa(v)?v.g.statusText:""}catch{Oe=""}v.l=Oe+" ["+v.Z()+"]",sc(v)}}finally{oc(v)}}}}function oc(v,O){if(v.g){h0(v);const V=v.g,K=v.v[0]?()=>{}:null;v.g=null,v.v=null,O||ot(v,"ready");try{V.onreadystatechange=K}catch{}}}function h0(v){v.I&&(l.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function oa(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<oa(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var O=this.g.responseText;return v&&O.indexOf(v)==0&&(O=O.substring(v.length)),Ve(O)}};function Mu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function E1(v){const O={};v=(v.g&&2<=oa(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<v.length;K++){if(C(v[K]))continue;var V=P(v[K]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Oe=O[_e]||[];O[_e]=Oe,Oe.push(V)}E(O,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pu(v,O,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||O}function N1(v){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pu("baseRetryDelayMs",5e3,v),this.cb=Pu("retryDelaySeedMs",1e4,v),this.Wa=Pu("forwardChannelMaxRetries",2,v),this.wa=Pu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new $s(v&&v.concurrentRequestLimit),this.Da=new qs,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=N1.prototype,t.la=8,t.G=1,t.connect=function(v,O,V,K){nr(0),this.W=v,this.H=O||{},V&&K!==void 0&&(this.H.OSID=V,this.H.OAID=K),this.F=this.X,this.I=M1(this,null,this.W),f0(this)};function Bf(v){if(j1(v),v.G==3){var O=v.U++,V=ue(v.I);if(Xe(V,"SID",v.K),Xe(V,"RID",O),Xe(V,"TYPE","terminate"),Du(v,V),O=new Wi(v,v.j,O),O.L=2,O.v=ur(ue(V)),V=!1,l.navigator&&l.navigator.sendBeacon)try{V=l.navigator.sendBeacon(O.v.toString(),"")}catch{}!V&&l.Image&&(new Image().src=O.v,V=!0),V||(O.g=P1(O.j,null),O.g.ea(O.v)),O.F=Date.now(),Ft(O)}Vf(v)}function lc(v){v.g&&($f(v),v.g.cancel(),v.g=null)}function j1(v){lc(v),v.u&&(l.clearTimeout(v.u),v.u=null),cc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&l.clearTimeout(v.s),v.s=null)}function f0(v){if(!qo(v.h)&&!v.s){v.s=!0;var O=v.Ga;J||ce(),Y||(J(),Y=!0),ge.add(O,v),v.B=0}}function v4(v,O){return ku(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=O.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=xr(y(v.Ga,v,O),R1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const _e=new Wi(this,this.j,v);let Oe=this.o;if(this.S&&(Oe?(Oe=A(Oe),F(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(_e.H=Oe,Oe=null),this.P)e:{for(var O=0,V=0;V<this.i.length;V++){t:{var K=this.i[V];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(O+=K,4096<O){O=V;break e}if(O===4096||V===this.i.length-1){O=V+1;break e}}O=1e3}else O=1e3;O=Uf(this,_e,O),V=ue(this.I),Xe(V,"RID",v),Xe(V,"CVER",22),this.D&&Xe(V,"X-HTTP-Session-Id",this.D),Du(this,V),Oe&&(this.O?O="headers="+encodeURIComponent(String(Iu(Oe)))+"&"+O:this.m&&ac(V,this.m,Oe)),Fs(this.h,_e),this.Ua&&Xe(V,"TYPE","init"),this.P?(Xe(V,"$req",O),Xe(V,"SID","null"),_e.T=!0,vt(_e,V,null)):vt(_e,V,O),this.G=2}}else this.G==3&&(v?k1(this,v):this.i.length==0||qo(this.h)||k1(this))};function k1(v,O){var V;O?V=O.l:V=v.U++;const K=ue(v.I);Xe(K,"SID",v.K),Xe(K,"RID",V),Xe(K,"AID",v.T),Du(v,K),v.m&&v.o&&ac(K,v.m,v.o),V=new Wi(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),O&&(v.i=O.D.concat(v.i)),O=Uf(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Fs(v.h,V),vt(V,K,O)}function Du(v,O){v.H&&L(v.H,function(V,K){Xe(O,K,V)}),v.l&&Ho({},function(V,K){Xe(O,K,V)})}function Uf(v,O,V){V=Math.min(v.i.length,V);var K=v.l?y(v.l.Na,v.l,v):null;e:{var _e=v.i;let Oe=-1;for(;;){const it=["count="+V];Oe==-1?0<V?(Oe=_e[0].g,it.push("ofs="+Oe)):Oe=0:it.push("ofs="+Oe);let Rr=!0;for(let ti=0;ti<V;ti++){let or=_e[ti].g;const Ti=_e[ti].map;if(or-=Oe,0>or)Oe=Math.max(0,_e[ti].g-100),Rr=!1;else try{Lf(Ti,it,"req"+or+"_")}catch{K&&K(Ti)}}if(Rr){K=it.join("&");break e}}}return v=v.i.splice(0,V),O.D=v,K}function C1(v){if(!v.g&&!v.u){v.Y=1;var O=v.Fa;J||ce(),Y||(J(),Y=!0),ge.add(O,v),v.v=0}}function zf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=xr(y(v.Fa,v),R1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,O1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=xr(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nr(10),lc(this),O1(this))};function $f(v){v.A!=null&&(l.clearTimeout(v.A),v.A=null)}function O1(v){v.g=new Wi(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var O=ue(v.qa);Xe(O,"RID","rpc"),Xe(O,"SID",v.K),Xe(O,"AID",v.T),Xe(O,"CI",v.F?"0":"1"),!v.F&&v.ja&&Xe(O,"TO",v.ja),Xe(O,"TYPE","xmlhttp"),Du(v,O),v.m&&v.o&&ac(O,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=ur(ue(O)),V.m=null,V.P=!0,he(V,v)}t.Za=function(){this.C!=null&&(this.C=null,lc(this),zf(this),nr(19))};function cc(v){v.C!=null&&(l.clearTimeout(v.C),v.C=null)}function I1(v,O){var V=null;if(v.g==O){cc(v),$f(v),v.g=null;var K=2}else if(Vs(v.h,O))V=O.D,sa(v.h,O),K=1;else return;if(v.G!=0){if(O.o)if(K==1){V=O.m?O.m.length:0,O=Date.now()-O.F;var _e=v.B;K=cr(),ot(K,new _i(K,V)),f0(v)}else C1(v);else if(_e=O.s,_e==3||_e==0&&0<O.X||!(K==1&&v4(v,O)||K==2&&zf(v)))switch(V&&0<V.length&&(O=v.h,O.i=O.i.concat(V)),_e){case 1:Qo(v,5);break;case 4:Qo(v,10);break;case 3:Qo(v,6);break;default:Qo(v,2)}}}function R1(v,O){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*O}function Qo(v,O){if(v.j.info("Error code "+O),O==2){var V=y(v.fb,v),K=v.Xa;const _e=!K;K=new ps(K||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ke(K,"https"),ur(K),_e?Df(K.toString(),V):T1(K.toString(),V)}else nr(2);v.G=0,v.l&&v.l.sa(O),Vf(v),j1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),nr(2)):(this.j.info("Failed to ping google.com"),nr(1))};function Vf(v){if(v.G=0,v.ka=[],v.l){const O=Si(v.h);(O.length!=0||v.i.length!=0)&&(w(v.ka,O),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function M1(v,O,V){var K=V instanceof ps?ue(V):new ps(V);if(K.g!="")O&&(K.g=O+"."+K.g),Fe(K,K.s);else{var _e=l.location;K=_e.protocol,O=O?O+"."+_e.hostname:_e.hostname,_e=+_e.port;var Oe=new ps(null);K&&ke(Oe,K),O&&(Oe.g=O),_e&&Fe(Oe,_e),V&&(Oe.l=V),K=Oe}return V=v.D,O=v.ya,V&&O&&Xe(K,V,O),Xe(K,"VER",v.la),Du(v,K),K}function P1(v,O,V){if(O&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return O=v.Ca&&!v.pa?new bn(new po({eb:V})):new bn(v.pa),O.Ha(v.J),O}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function D1(){}t=D1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function p0(){}p0.prototype.g=function(v,O){return new la(v,O)};function la(v,O){gt.call(this),this.g=new N1(O),this.l=v,this.h=O&&O.messageUrlParams||null,v=O&&O.messageHeaders||null,O&&O.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=O&&O.initMessageHeaders||null,O&&O.messageContentType&&(v?v["X-WebChannel-Content-Type"]=O.messageContentType:v={"X-WebChannel-Content-Type":O.messageContentType}),O&&O.va&&(v?v["X-WebChannel-Client-Profile"]=O.va:v={"X-WebChannel-Client-Profile":O.va}),this.g.S=v,(v=O&&O.Sb)&&!C(v)&&(this.g.m=v),this.v=O&&O.supportsCrossDomainXhr||!1,this.u=O&&O.sendRawJson||!1,(O=O&&O.httpSessionIdParam)&&!C(O)&&(this.g.D=O,v=this.h,v!==null&&O in v&&(v=this.h,O in v&&delete v[O])),this.j=new uc(this)}T(la,gt),la.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},la.prototype.close=function(){Bf(this.g)},la.prototype.o=function(v){var O=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=Re(v),v=V);O.i.push(new fo(O.Ya++,v)),O.G==3&&f0(O)},la.prototype.N=function(){this.g.l=null,delete this.j,Bf(this.g),delete this.g,la.aa.N.call(this)};function L1(v){Pt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var O=v.__sm__;if(O){e:{for(const V in O){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,O=O!==null&&v in O?O[v]:void 0),this.data=O}else this.data=v}T(L1,Pt);function B1(){$t.call(this),this.status=1}T(B1,$t);function uc(v){this.g=v}T(uc,D1),uc.prototype.ua=function(){ot(this.g,"a")},uc.prototype.ta=function(v){ot(this.g,new L1(v))},uc.prototype.sa=function(v){ot(this.g,new B1)},uc.prototype.ra=function(){ot(this.g,"b")},p0.prototype.createWebChannel=p0.prototype.g,la.prototype.send=la.prototype.o,la.prototype.open=la.prototype.m,la.prototype.close=la.prototype.close,xV=function(){return new p0},bV=function(){return cr()},vV=kt,RT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,Iv=zr,un.COMPLETE="complete",yV=un,dr.EventType=zt,zt.OPEN="a",zt.CLOSE="b",zt.ERROR="c",zt.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Wp=dr,bn.prototype.listenOnce=bn.prototype.L,bn.prototype.getLastError=bn.prototype.Ka,bn.prototype.getLastErrorCode=bn.prototype.Ba,bn.prototype.getStatus=bn.prototype.Z,bn.prototype.getResponseJson=bn.prototype.Oa,bn.prototype.getResponseText=bn.prototype.oa,bn.prototype.send=bn.prototype.ea,bn.prototype.setWithCredentials=bn.prototype.Ha,gV=bn}).apply(typeof qy<"u"?qy:typeof self<"u"?self:typeof window<"u"?window:{});const gO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ta.UNAUTHENTICATED=new ta(null),ta.GOOGLE_CREDENTIALS=new ta("google-credentials-uid"),ta.FIRST_PARTY=new ta("first-party-uid"),ta.MOCK_USER=new ta("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new J8("@firebase/firestore");function eh(){return Id.logLevel}function Ke(t,...e){if(Id.logLevel<=gr.DEBUG){const r=e.map(f7);Id.debug(`Firestore (${gf}): ${t}`,...r)}}function Xn(t,...e){if(Id.logLevel<=gr.ERROR){const r=e.map(f7);Id.error(`Firestore (${gf}): ${t}`,...r)}}function jm(t,...e){if(Id.logLevel<=gr.WARN){const r=e.map(f7);Id.warn(`Firestore (${gf}): ${t}`,...r)}}function f7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t="Unexpected state"){const e=`FIRESTORE (${gf}) INTERNAL ASSERTION FAILED: `+t;throw Xn(e),new Error(e)}function Tt(t,e){t||bt()}function _t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends lo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jte{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(ta.UNAUTHENTICATED)))}shutdown(){}}class Cte{constructor(e){this.t=e,this.currentUser=ta.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Tt(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let a=new ao;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ao,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},l=d=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>l(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ao)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Tt(typeof n.accessToken=="string"),new jte(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Tt(e===null||typeof e=="string"),new ta(e)}}class Ote{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=ta.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ite{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new Ote(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(ta.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rte{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mte{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Tt(this.o===void 0);const n=a=>{a.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,Ke("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Tt(typeof r.token=="string"),this.R=r.token,new Rte(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pte(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Pte(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Wt(t,e){return t<e?-1:t>e?1:0}function Ah(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function _V(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new tt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new tt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new tt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Rn.fromMillis(Date.now())}static fromDate(e){return Rn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Rn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Wt(this.nanoseconds,e.nanoseconds):Wt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Rn(0,0))}static max(){return new Et(new Rn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,r,n){r===void 0?r=0:r>e.length&&bt(),n===void 0?n=e.length-r:n>e.length-r&&bt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return km.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof km?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Nr extends km{construct(e,r,n){return new Nr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new tt(Me.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new Nr(r)}static emptyPath(){return new Nr([])}}const Dte=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends km{construct(e,r,n){return new In(e,r,n)}static isValidIdentifier(e){return Dte.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new tt(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new tt(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new tt(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(n+=l,i++):(a(),i++)}if(a(),s)throw new tt(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(r)}static emptyPath(){return new In([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.path=e}static fromPath(e){return new dt(Nr.fromString(e))}static fromName(e){return new dt(Nr.fromString(e).popFirst(5))}static empty(){return new dt(Nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Nr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dt(new Nr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function MT(t){return t.fields.find((e=>e.kind===2))}function ld(t){return t.fields.filter((e=>e.kind!==2))}tb.UNKNOWN_ID=-1;class Rv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Cm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Cm(0,ds.min())}}function SV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(n===1e9?new Rn(r+1,0):new Rn(r,n));return new ds(i,dt.empty(),e)}function TV(t){return new ds(t.readTime,t.key,-1)}class ds{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ds(Et.min(),dt.empty(),-1)}static max(){return new ds(Et.max(),dt.empty(),-1)}}function p7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dt.comparator(t.documentKey,e.documentKey),r!==0?r:Wt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){if(t.code!==Me.FAILED_PRECONDITION||t.message!==AV)throw t;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ee(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ee?r:Ee.resolve(r)}catch(r){return Ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ee.reject(r)}static resolve(e){return new Ee(((r,n)=>{r(e)}))}static reject(e){return new Ee(((r,n)=>{n(e)}))}static waitFor(e){return new Ee(((r,n)=>{let i=0,a=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++a,s&&a===i&&r()}),(d=>n(d)))})),s=!0,a===i&&r()}))}static or(e){let r=Ee.resolve(!1);for(const n of e)r=r.next((i=>i?Ee.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new Ee(((n,i)=>{const a=e.length,s=new Array(a);let l=0;for(let d=0;d<a;d++){const h=d;r(e[h]).next((p=>{s[h]=p,++l,l===a&&n(s)}),(p=>i(p)))}}))}static doWhile(e,r){return new Ee(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ao,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new im(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=m7(n.target.error);this.V.reject(new im(e,i))}}static open(e,r,n,i){try{return new Gx(r,e.transaction(i,n))}catch(a){throw new im(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new Bte(r)}}class au{constructor(e,r,n){this.name=e,this.version=r,this.p=n,au.S(vi())===12.2&&Xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),hd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!O$())return!1;if(au.v())return!0;const e=vi(),r=au.S(e),n=0<r&&r<10,i=NV(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ke("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new im(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new tt(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new tt(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new im(e,s))},i.onupgradeneeded=a=>{Ke("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.O(s,i.transaction,a.oldVersion,this.version).next((()=>{Ke("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const l=Gx.open(this.db,e,a?"readonly":"readwrite",n),d=i(l).next((h=>(l.g(),h))).catch((h=>(l.abort(h),Ee.reject(h)))).toPromise();return d.catch((()=>{})),await l.m,d}catch(l){const d=l,h=d.name!=="FirebaseError"&&s<3;if(Ke("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function NV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Lte{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return hd(this.B.delete())}}class im extends tt{constructor(e,r){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function bu(t){return t.name==="IndexedDbTransactionError"}class Bte{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ke("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),hd(n)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),hd(this.store.add(e))}get(e){return hd(this.store.get(e)).next((r=>(r===void 0&&(r=null),Ke("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),hd(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),hd(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new Ee(((s,l)=>{a.onerror=d=>{l(d.target.error)},a.onsuccess=d=>{s(d.target.result)}}))}{const a=this.cursor(n),s=[];return this.W(a,((l,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ee(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}j(e,r){Ke("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((a,s,l)=>l.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new Ee(((n,i)=>{r.onerror=a=>{const s=m7(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():n()})):n()}}))}W(e,r){const n=[];return new Ee(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const d=new Lte(l),h=r(l.primaryKey,l.value,d);if(h instanceof Ee){const p=h.catch((m=>(d.done(),Ee.reject(m))));n.push(p)}d.isDone?i():d.K===null?l.continue():l.continue(d.K)}})).next((()=>Ee.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function hd(t){return new Ee(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=m7(n.target.error);r(i)}}))}let yO=!1;function m7(t){const e=au.S(vi());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yO||(yO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class Ute{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ke("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ke("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){bu(r)?Ke("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await vu(r)}await this.X(6e4)}))}}class zte{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,a=!0;return Ee.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return Ke("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next((l=>{i-=l,n.add(s)}));a=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(i,a))).next((l=>(Ke("IndexBackfiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,r,l)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,a)=>{const s=TV(a);p7(s,n)>0&&(n=s)})),new ds(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}La.oe=-1;function Fg(t){return t==null}function Om(t){return t===0&&1/t==-1/0}function jV(t){return typeof t=="number"&&Number.isInteger(t)&&!Om(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=vO(e)),e=$te(t.get(r),e);return vO(e)}function $te(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case"":r+="";break;default:r+=a}}return r}function vO(t){return t+""}function _o(t){const e=t.length;if(Tt(e>=2),e===2)return Tt(t.charAt(0)===""&&t.charAt(1)===""),Nr.emptyPath();const r=e-2,n=[];let i="";for(let a=0;a<e;){const s=t.indexOf("",a);switch((s<0||s>r)&&bt(),t.charAt(s+1)){case"":const l=t.substring(a,s);let d;i.length===0?d=l:(i+=l,d=i,i=""),n.push(d);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:bt()}a=s+2}return new Nr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e){return[t,ga(e)]}function kV(t,e,r){return[t,ga(e),r]}const Vte={},Fte=["prefixPath","collectionGroup","readTime","documentId"],qte=["prefixPath","collectionGroup","documentId"],Hte=["collectionGroup","readTime","prefixPath","documentId"],Gte=["canonicalId","targetId"],Kte=["targetId","path"],Wte=["path","targetId"],Xte=["collectionId","parent"],Qte=["indexId","uid"],Yte=["uid","sequenceNumber"],Zte=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jte=["indexId","uid","orderedDocumentKey"],ere=["userId","collectionPath","documentId"],tre=["userId","collectionPath","largestBatchId"],rre=["userId","collectionGroup","largestBatchId"],CV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nre=[...CV,"documentOverlays"],OV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IV=OV,g7=[...IV,"indexConfiguration","indexState","indexEntries"],ire=g7,are=[...g7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT extends EV{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function xi(t,e){const r=_t(t);return au.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Jd(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function RV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,r){this.comparator=e,this.root=r||$i.EMPTY}insert(e,r){return new mn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hy(this.root,e,this.comparator,!0)}}class Hy{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??$i.RED,this.left=i??$i.EMPTY,this.right=a??$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new $i(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return $i.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1;$i.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,r,n,i,a){return this}insert(e,r,n){return new $i(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new wO(this.data.getIterator())}getIteratorFrom(e){return new wO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new en(this.comparator);return r.data=e,r}}class wO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function F0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new Ba([])}unionWith(e){let r=new en(In.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Ba(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Ah(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new MV("Invalid base64 string: "+a):a}})(e);return new Jn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Jn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const sre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(t){if(Tt(!!t),typeof t=="string"){let e=0;const r=sre.exec(t);if(Tt(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uu(t){return typeof t=="string"?Jn.fromBase64String(t):Jn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function v7(t){const e=t.mapValue.fields.__previous_value__;return y7(e)?v7(e):e}function Im(t){const e=Ul(t.mapValue.fields.__local_write_time__.timestampValue);return new Rn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ore{constructor(e,r,n,i,a,s,l,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=d,this.useFetchStreams=h}}class Rd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Rd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pv={nullValue:"NULL_VALUE"};function Md(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?y7(t)?4:PV(t)?9007199254740991:Kx(t)?10:11:bt()}function Io(t,e){if(t===e)return!0;const r=Md(t);if(r!==Md(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Im(t).isEqual(Im(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Ul(i.timestampValue),l=Ul(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return uu(i.bytesValue).isEqual(uu(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return Tn(i.geoPointValue.latitude)===Tn(a.geoPointValue.latitude)&&Tn(i.geoPointValue.longitude)===Tn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Tn(i.integerValue)===Tn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Tn(i.doubleValue),l=Tn(a.doubleValue);return s===l?Om(s)===Om(l):isNaN(s)&&isNaN(l)}return!1})(t,e);case 9:return Ah(t.arrayValue.values||[],e.arrayValue.values||[],Io);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(xO(s)!==xO(l))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(l[d]===void 0||!Io(s[d],l[d])))return!1;return!0})(t,e);default:return bt()}}function Rm(t,e){return(t.values||[]).find((r=>Io(r,e)))!==void 0}function du(t,e){if(t===e)return 0;const r=Md(t),n=Md(e);if(r!==n)return Wt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Wt(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=Tn(a.integerValue||a.doubleValue),d=Tn(s.integerValue||s.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1})(t,e);case 3:return _O(t.timestampValue,e.timestampValue);case 4:return _O(Im(t),Im(e));case 5:return Wt(t.stringValue,e.stringValue);case 6:return(function(a,s){const l=uu(a),d=uu(s);return l.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),d=s.split("/");for(let h=0;h<l.length&&h<d.length;h++){const p=Wt(l[h],d[h]);if(p!==0)return p}return Wt(l.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=Wt(Tn(a.latitude),Tn(s.latitude));return l!==0?l:Wt(Tn(a.longitude),Tn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return SO(t.arrayValue,e.arrayValue);case 10:return(function(a,s){var l,d,h,p;const m=a.fields||{},y=s.fields||{},b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=Wt(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:SO(b,T)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Xc.mapValue&&s===Xc.mapValue)return 0;if(a===Xc.mapValue)return 1;if(s===Xc.mapValue)return-1;const l=a.fields||{},d=Object.keys(l),h=s.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=Wt(d[m],p[m]);if(y!==0)return y;const b=du(l[d[m]],h[p[m]]);if(b!==0)return b}return Wt(d.length,p.length)})(t.mapValue,e.mapValue);default:throw bt()}}function _O(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Wt(t,e);const r=Ul(t),n=Ul(e),i=Wt(r.seconds,n.seconds);return i!==0?i:Wt(r.nanos,n.nanos)}function SO(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=du(r[i],n[i]);if(a)return a}return Wt(r.length,n.length)}function Eh(t){return DT(t)}function DT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Ul(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return uu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return dt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=DT(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${DT(r.fields[s])}`;return i+"}"})(t.mapValue):bt()}function Mm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function LT(t){return!!t&&"integerValue"in t}function Pm(t){return!!t&&"arrayValue"in t}function TO(t){return!!t&&"nullValue"in t}function AO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dv(t){return!!t&&"mapValue"in t}function Kx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function am(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jd(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=am(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=am(t.arrayValue.values[r]);return e}return Object.assign({},t)}function PV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const DV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function lre(t){return"nullValue"in t?Pv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Mm(Rd.empty(),dt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Kx(t)?DV:{mapValue:{}}:bt()}function cre(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Mm(Rd.empty(),dt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?DV:"mapValue"in t?Kx(t)?{mapValue:{}}:Xc:bt()}function EO(t,e){const r=du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function NO(t,e){const r=du(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.value=e}static empty(){return new qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Dv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=am(r)}setAll(e){let r=In.emptyPath(),n={},i=[];e.forEach(((s,l)=>{if(!r.isImmediateParentOf(l)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=l.popLast()}s?n[l.lastSegment()]=am(s):i.push(l.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());Dv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Io(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Dv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Jd(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new qi(am(this.value))}}function LV(t){const e=[];return Jd(t.fields,((r,n)=>{const i=new In([r]);if(Dv(n)){const a=LV(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Ba(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,r,n,i,a,s,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new An(e,0,Et.min(),Et.min(),Et.min(),qi.empty(),0)}static newFoundDocument(e,r,n,i){return new An(e,1,r,Et.min(),n,i,0)}static newNoDocument(e,r){return new An(e,2,r,Et.min(),Et.min(),qi.empty(),0)}static newUnknownDocument(e,r){return new An(e,3,r,Et.min(),Et.min(),qi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.position=e,this.inclusive=r}}function jO(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=dt.comparator(dt.fromName(s.referenceValue),r.key):n=du(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function kO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Io(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,r="asc"){this.field=e,this.dir=r}}function ure(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BV=class{};class yr extends BV{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new dre(e,r,n):r==="array-contains"?new pre(e,n):r==="in"?new qV(e,n):r==="not-in"?new mre(e,n):r==="array-contains-any"?new gre(e,n):new yr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new hre(e,n):new fre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(du(r,this.value)):r!==null&&Md(this.value)===Md(r)&&this.matchesComparison(du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends BV{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new qr(e,r)}matches(e){return jh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jh(t){return t.op==="and"}function BT(t){return t.op==="or"}function b7(t){return UV(t)&&jh(t)}function UV(t){for(const e of t.filters)if(e instanceof qr)return!1;return!0}function UT(t){if(t instanceof yr)return t.field.canonicalString()+t.op.toString()+Eh(t.value);if(b7(t))return t.filters.map((e=>UT(e))).join(",");{const e=t.filters.map((r=>UT(r))).join(",");return`${t.op}(${e})`}}function zV(t,e){return t instanceof yr?(function(n,i){return i instanceof yr&&n.op===i.op&&n.field.isEqual(i.field)&&Io(n.value,i.value)})(t,e):t instanceof qr?(function(n,i){return i instanceof qr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,l)=>a&&zV(s,i.filters[l])),!0):!1})(t,e):void bt()}function $V(t,e){const r=t.filters.concat(e);return qr.create(r,t.op)}function VV(t){return t instanceof yr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Eh(r.value)}`})(t):t instanceof qr?(function(r){return r.op.toString()+" {"+r.getFilters().map(VV).join(" ,")+"}"})(t):"Filter"}class dre extends yr{constructor(e,r,n){super(e,r,n),this.key=dt.fromName(n.referenceValue)}matches(e){const r=dt.comparator(e.key,this.key);return this.matchesComparison(r)}}class hre extends yr{constructor(e,r){super(e,"in",r),this.keys=FV("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class fre extends yr{constructor(e,r){super(e,"not-in",r),this.keys=FV("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function FV(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>dt.fromName(n.referenceValue)))}class pre extends yr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Pm(r)&&Rm(r.arrayValue,this.value)}}class qV extends yr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Rm(this.value.arrayValue,r)}}class mre extends yr{constructor(e,r){super(e,"not-in",r)}matches(e){if(Rm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Rm(this.value.arrayValue,r)}}class gre extends yr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Pm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>Rm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yre{constructor(e,r=null,n=[],i=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.ue=null}}function zT(t,e=null,r=[],n=[],i=null,a=null,s=null){return new yre(t,e,r,n,i,a,s)}function Pd(t){const e=_t(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>UT(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),Fg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Eh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Eh(n))).join(",")),e.ue=r}return e.ue}function qg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!ure(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!zV(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kO(t.startAt,e.startAt)&&kO(t.endAt,e.endAt)}function rb(t){return dt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nb(t,e){return t.filters.filter((r=>r instanceof yr&&r.field.isEqual(e)))}function CO(t,e,r){let n=Pv,i=!0;for(const a of nb(t,e)){let s=Pv,l=!0;switch(a.op){case"<":case"<=":s=lre(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,l=!1;break;case"!=":case"not-in":s=Pv}EO({value:n,inclusive:i},{value:s,inclusive:l})<0&&(n=s,i=l)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];EO({value:n,inclusive:i},{value:s,inclusive:r.inclusive})<0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}function OO(t,e,r){let n=Xc,i=!0;for(const a of nb(t,e)){let s=Xc,l=!0;switch(a.op){case">=":case">":s=cre(a.value),l=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,l=!1;break;case"!=":case"not-in":s=Xc}NO({value:n,inclusive:i},{value:s,inclusive:l})>0&&(n=s,i=l)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];NO({value:n,inclusive:i},{value:s,inclusive:r.inclusive})>0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,r=null,n=[],i=[],a=null,s="F",l=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function HV(t,e,r,n,i,a,s,l){return new yf(t,e,r,n,i,a,s,l)}function Hg(t){return new yf(t)}function IO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GV(t){return t.collectionGroup!==null}function sm(t){const e=_t(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new en(In.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Dm(a,n))})),r.has(In.keyField().canonicalString())||e.ce.push(new Dm(In.keyField(),n))}return e.ce}function ls(t){const e=_t(t);return e.le||(e.le=vre(e,sm(t))),e.le}function vre(t,e){if(t.limitType==="F")return zT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Dm(i.field,a)}));const r=t.endAt?new Nh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Nh(t.startAt.position,t.startAt.inclusive):null;return zT(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function $T(t,e){const r=t.filters.concat([e]);return new yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function ib(t,e,r){return new yf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Wx(t,e){return qg(ls(t),ls(e))&&t.limitType===e.limitType}function KV(t){return`${Pd(ls(t))}|lt:${t.limitType}`}function th(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>VV(i))).join(", ")}]`),Fg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>Eh(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>Eh(i))).join(",")),`Target(${n})`})(ls(t))}; limitType=${t.limitType})`}function Gg(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):dt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of sm(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(s,l,d){const h=jO(s,l,d);return s.inclusive?h<=0:h<0})(n.startAt,sm(n),i)||n.endAt&&!(function(s,l,d){const h=jO(s,l,d);return s.inclusive?h>=0:h>0})(n.endAt,sm(n),i))})(t,e)}function WV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XV(t){return(e,r)=>{let n=!1;for(const i of sm(t)){const a=bre(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function bre(t,e,r){const n=t.field.isKeyField()?dt.comparator(e.key,r.key):(function(a,s,l){const d=s.data.field(a),h=l.data.field(a);return d!==null&&h!==null?du(d,h):bt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jd(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return RV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xre=new mn(dt.comparator);function as(){return xre}const QV=new mn(dt.comparator);function Xp(...t){let e=QV;for(const r of t)e=e.insert(r.key,r);return e}function YV(t){let e=QV;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function So(){return om()}function ZV(){return om()}function om(){return new xu((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wre=new mn(dt.comparator),_re=new en(dt.comparator);function lr(...t){let e=_re;for(const r of t)e=e.add(r);return e}const Sre=new en(Wt);function x7(){return Sre}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Om(e)?"-0":e}}function JV(t){return{integerValue:""+t}}function Tre(t,e){return jV(e)?JV(e):w7(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(){this._=void 0}}function Are(t,e,r){return t instanceof Lm?(function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&y7(a)&&(a=v7(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}})(r,e):t instanceof Dd?tF(t,e):t instanceof kh?rF(t,e):(function(i,a){const s=eF(i,a),l=RO(s)+RO(i.Pe);return LT(s)&&LT(i.Pe)?JV(l):w7(i.serializer,l)})(t,e)}function Ere(t,e,r){return t instanceof Dd?tF(t,e):t instanceof kh?rF(t,e):r}function eF(t,e){return t instanceof Bm?(function(n){return LT(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class Lm extends Xx{}class Dd extends Xx{constructor(e){super(),this.elements=e}}function tF(t,e){const r=nF(e);for(const n of t.elements)r.some((i=>Io(i,n)))||r.push(n);return{arrayValue:{values:r}}}class kh extends Xx{constructor(e){super(),this.elements=e}}function rF(t,e){let r=nF(e);for(const n of t.elements)r=r.filter((i=>!Io(i,n)));return{arrayValue:{values:r}}}class Bm extends Xx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function RO(t){return Tn(t.integerValue||t.doubleValue)}function nF(t){return Pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,r){this.field=e,this.transform=r}}function Nre(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof Dd&&i instanceof Dd||n instanceof kh&&i instanceof kh?Ah(n.elements,i.elements,Io):n instanceof Bm&&i instanceof Bm?Io(n.Pe,i.Pe):n instanceof Lm&&i instanceof Lm})(t.transform,e.transform)}class jre{constructor(e,r){this.version=e,this.transformResults=r}}class Qn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Lv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qx{}function aF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Kg(t.key,Qn.none()):new vf(t.key,t.data,Qn.none());{const r=t.data,n=qi.empty();let i=new en(In.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Ql(t.key,n,new Ba(i.toArray()),Qn.none())}}function kre(t,e,r){t instanceof vf?(function(i,a,s){const l=i.value.clone(),d=PO(i.fieldTransforms,a,s.transformResults);l.setAll(d),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,r):t instanceof Ql?(function(i,a,s){if(!Lv(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=PO(i.fieldTransforms,a,s.transformResults),d=a.data;d.setAll(sF(i)),d.setAll(l),a.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function lm(t,e,r,n){return t instanceof vf?(function(a,s,l,d){if(!Lv(a.precondition,s))return l;const h=a.value.clone(),p=DO(a.fieldTransforms,d,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof Ql?(function(a,s,l,d){if(!Lv(a.precondition,s))return l;const h=DO(a.fieldTransforms,d,s),p=s.data;return p.setAll(sF(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(a,s,l){return Lv(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(t,e,r)}function Cre(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=eF(n.transform,i||null);a!=null&&(r===null&&(r=qi.empty()),r.set(n.field,a))}return r||null}function MO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ah(n,i,((a,s)=>Nre(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vf extends Qx{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ql extends Qx{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function PO(t,e,r){const n=new Map;Tt(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,l=e.data.field(a.field);n.set(a.field,Ere(s,l,r[i]))}return n}function DO(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,Are(a,s,e))}return n}class Kg extends Qx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _7 extends Qx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&kre(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=lm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=lm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=ZV();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=r.has(i.key)?null:l;const d=aF(s,l);d!==null&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(Et.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),lr())}isEqual(e){return this.batchId===e.batchId&&Ah(this.mutations,e.mutations,((r,n)=>MO(r,n)))&&Ah(this.baseMutations,e.baseMutations,((r,n)=>MO(r,n)))}}class T7{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Tt(e.mutations.length===n.length);let i=(function(){return wre})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new T7(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ore{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,wr;function oF(t){switch(t){default:return bt();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function lF(t){if(t===void 0)return Xn("GRPC error has no .code"),Me.UNKNOWN;switch(t){case si.OK:return Me.OK;case si.CANCELLED:return Me.CANCELLED;case si.UNKNOWN:return Me.UNKNOWN;case si.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case si.INTERNAL:return Me.INTERNAL;case si.UNAVAILABLE:return Me.UNAVAILABLE;case si.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case si.NOT_FOUND:return Me.NOT_FOUND;case si.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case si.ABORTED:return Me.ABORTED;case si.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case si.DATA_LOSS:return Me.DATA_LOSS;default:return bt()}}(wr=si||(si={}))[wr.OK=0]="OK",wr[wr.CANCELLED=1]="CANCELLED",wr[wr.UNKNOWN=2]="UNKNOWN",wr[wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wr[wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wr[wr.NOT_FOUND=5]="NOT_FOUND",wr[wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",wr[wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",wr[wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",wr[wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wr[wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wr[wr.ABORTED=10]="ABORTED",wr[wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",wr[wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",wr[wr.INTERNAL=13]="INTERNAL",wr[wr.UNAVAILABLE=14]="UNAVAILABLE",wr[wr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ire(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre=new Ed([4294967295,4294967295],0);function LO(t){const e=Ire().encode(t),r=new mV;return r.update(e),new Uint8Array(r.digest())}function BO(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ed([r,n],0),new Ed([i,a],0)]}class E7{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Qp(`Invalid padding: ${r}`);if(n<0)throw new Qp(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Qp(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Qp(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Ed.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Ed.fromNumber(n)));return i.compare(Rre)===1&&(i=new Ed([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=LO(e),[n,i]=BO(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);if(!this.de(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new E7(a,i,r);return n.forEach((l=>s.insert(l))),s}insert(e){if(this.Ie===0)return;const r=LO(e),[n,i]=BO(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Qp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Xg.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Wg(Et.min(),i,new mn(Wt),as(),lr())}}class Xg{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Xg(n,r,lr(),lr(),lr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class cF{constructor(e,r){this.targetId=e,this.me=r}}class uF{constructor(e,r,n=Jn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class UO{constructor(){this.fe=0,this.ge=$O(),this.pe=Jn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=lr(),r=lr(),n=lr();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:bt()}})),new Xg(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=$O()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Tt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Mre{constructor(e){this.Le=e,this.Be=new Map,this.ke=as(),this.qe=zO(),this.Qe=new mn(Wt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:bt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(rb(a))if(n===0){const s=new dt(a.path);this.Ue(r,s,An.newNoDocument(s,Et.min()))}else Tt(n===1);else{const s=this.Ye(r);if(s!==n){const l=this.Ze(e),d=l?this.Xe(l,e,s):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,l;try{s=uu(n).toUint8Array()}catch(d){if(d instanceof MV)return jm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{l=new E7(s,i,a)}catch(d){return jm(d instanceof Qp?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((a,s)=>{const l=this.Je(s);if(l){if(a.current&&rb(l.target)){const d=new dt(l.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,An.newNoDocument(d,e))}a.be&&(r.set(s,a.ve()),a.Ce())}}));let n=lr();this.qe.forEach(((a,s)=>{let l=!0;s.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(n=n.add(a))})),this.ke.forEach(((a,s)=>s.setReadTime(e)));const i=new Wg(e,r,this.Qe,this.ke,n);return this.ke=as(),this.qe=zO(),this.Qe=new mn(Wt),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new UO,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new en(Wt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ke("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new UO),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function zO(){return new mn(dt.comparator)}function $O(){return new mn(dt.comparator)}const Pre={asc:"ASCENDING",desc:"DESCENDING"},Dre={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lre={and:"AND",or:"OR"};class Bre{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function VT(t,e){return t.useProto3Json||Fg(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Ure(t,e){return Ch(t,e.toTimestamp())}function Ci(t){return Tt(!!t),Et.fromTimestamp((function(r){const n=Ul(r);return new Rn(n.seconds,n.nanos)})(t))}function N7(t,e){return FT(t,e).canonicalString()}function FT(t,e){const r=(function(i){return new Nr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function hF(t){const e=Nr.fromString(t);return Tt(wF(e)),e}function Um(t,e){return N7(t.databaseId,e.path)}function kl(t,e){const r=hF(e);if(r.get(1)!==t.databaseId.projectId)throw new tt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new tt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dt(mF(r))}function fF(t,e){return N7(t.databaseId,e)}function pF(t){const e=hF(t);return e.length===4?Nr.emptyPath():mF(e)}function qT(t){return new Nr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mF(t){return Tt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function VO(t,e,r){return{name:Um(t,e),fields:r.value.mapValue.fields}}function zre(t,e,r){const n=kl(t,e.name),i=Ci(e.updateTime),a=e.createTime?Ci(e.createTime):Et.min(),s=new qi({mapValue:{fields:e.fields}}),l=An.newFoundDocument(n,i,a,s);return r&&l.setHasCommittedMutations(),r?l.setHasCommittedMutations():l}function $re(t,e){return"found"in e?(function(n,i){Tt(!!i.found),i.found.name,i.found.updateTime;const a=kl(n,i.found.name),s=Ci(i.found.updateTime),l=i.found.createTime?Ci(i.found.createTime):Et.min(),d=new qi({mapValue:{fields:i.found.fields}});return An.newFoundDocument(a,s,l,d)})(t,e):"missing"in e?(function(n,i){Tt(!!i.missing),Tt(!!i.readTime);const a=kl(n,i.missing),s=Ci(i.readTime);return An.newNoDocument(a,s)})(t,e):bt()}function Vre(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:bt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Tt(p===void 0||typeof p=="string"),Jn.fromBase64String(p||"")):(Tt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Jn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?Me.UNKNOWN:lF(h.code);return new tt(p,h.message||"")})(s);r=new uF(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=kl(t,n.document.name),a=Ci(n.document.updateTime),s=n.document.createTime?Ci(n.document.createTime):Et.min(),l=new qi({mapValue:{fields:n.document.fields}}),d=An.newFoundDocument(i,a,s,l),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Bv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=kl(t,n.document),a=n.readTime?Ci(n.readTime):Et.min(),s=An.newNoDocument(i,a),l=n.removedTargetIds||[];r=new Bv([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=kl(t,n.document),a=n.removedTargetIds||[];r=new Bv([],a,i,null)}else{if(!("filter"in e))return bt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new Ore(i,a),l=n.targetId;r=new cF(l,s)}}return r}function zm(t,e){let r;if(e instanceof vf)r={update:VO(t,e.key,e.value)};else if(e instanceof Kg)r={delete:Um(t,e.key)};else if(e instanceof Ql)r={update:VO(t,e.key,e.data),updateMask:Wre(e.fieldMask)};else{if(!(e instanceof _7))return bt();r={verify:Um(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const l=s.transform;if(l instanceof Lm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Dd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof kh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bm)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw bt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Ure(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:bt()})(t,e.precondition)),r}function HT(t,e){const r=e.currentDocument?(function(a){return a.updateTime!==void 0?Qn.updateTime(Ci(a.updateTime)):a.exists!==void 0?Qn.exists(a.exists):Qn.none()})(e.currentDocument):Qn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let d=null;if("setToServerValue"in l)Tt(l.setToServerValue==="REQUEST_TIME"),d=new Lm;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];d=new Dd(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];d=new kh(p)}else"increment"in l?d=new Bm(s,l.increment):bt();const h=In.fromServerFormat(l.fieldPath);return new iF(h,d)})(t,i))):[];if(e.update){e.update.name;const i=kl(t,e.update.name),a=new qi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const h=d.fieldPaths||[];return new Ba(h.map((p=>In.fromServerFormat(p))))})(e.updateMask);return new Ql(i,a,s,r,n)}return new vf(i,a,r,n)}if(e.delete){const i=kl(t,e.delete);return new Kg(i,r)}if(e.verify){const i=kl(t,e.verify);return new _7(i,r)}return bt()}function Fre(t,e){return t&&t.length>0?(Tt(e!==void 0),t.map((r=>(function(i,a){let s=i.updateTime?Ci(i.updateTime):Ci(a);return s.isEqual(Et.min())&&(s=Ci(a)),new jre(s,i.transformResults||[])})(r,e)))):[]}function gF(t,e){return{documents:[fF(t,e.path)]}}function yF(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=fF(t,i);const a=(function(h){if(h.length!==0)return xF(qr.create(h,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:rh(y.field),direction:Hre(y.dir)}})(p)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const l=VT(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:i}}function vF(t){let e=pF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Tt(n===1);const p=r.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];r.where&&(a=(function(m){const y=bF(m);return y instanceof qr&&b7(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(m){return m.map((y=>(function(T){return new Dm(nh(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let l=null;r.limit&&(l=(function(m){let y;return y=typeof m=="object"?m.value:m,Fg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,b=m.values||[];return new Nh(b,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,b=m.values||[];return new Nh(b,y)})(r.endAt)),HV(e,i,s,a,l,"F",d,h)}function qre(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function bF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=nh(r.unaryFilter.field);return yr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=nh(r.unaryFilter.field);return yr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=nh(r.unaryFilter.field);return yr.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=nh(r.unaryFilter.field);return yr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return bt()}})(t):t.fieldFilter!==void 0?(function(r){return yr.create(nh(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return qr.create(r.compositeFilter.filters.map((n=>bF(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bt()}})(r.compositeFilter.op))})(t):bt()}function Hre(t){return Pre[t]}function Gre(t){return Dre[t]}function Kre(t){return Lre[t]}function rh(t){return{fieldPath:t.canonicalString()}}function nh(t){return In.fromServerFormat(t.fieldPath)}function xF(t){return t instanceof yr?(function(r){if(r.op==="=="){if(AO(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NAN"}};if(TO(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(AO(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NOT_NAN"}};if(TO(r.value))return{unaryFilter:{field:rh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(r.field),op:Gre(r.op),value:r.value}}})(t):t instanceof qr?(function(r){const n=r.getFilters().map((i=>xF(i)));return n.length===1?n[0]:{compositeFilter:{op:Kre(r.op),filters:n}}})(t):bt()}function Wre(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function wF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,r,n,i,a=Et.min(),s=Et.min(),l=Jn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=d}withSequenceNumber(e){return new Al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.ct=e}}function Xre(t,e){let r;if(e.document)r=zre(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=dt.fromSegments(e.noDocument.path),i=Bd(e.noDocument.readTime);r=An.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return bt();{const n=dt.fromSegments(e.unknownDocument.path),i=Bd(e.unknownDocument.version);r=An.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const a=new Rn(i[0],i[1]);return Et.fromTimestamp(a)})(e.readTime)),r}function FO(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ab(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:Um(a,s.key),fields:s.data.value.mapValue.fields,updateTime:Ch(a,s.version.toTimestamp()),createTime:Ch(a,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Ld(e.version)};else{if(!e.isUnknownDocument())return bt();n.unknownDocument={path:r.path.toArray(),version:Ld(e.version)}}return n}function ab(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ld(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bd(t){const e=new Rn(t.seconds,t.nanoseconds);return Et.fromTimestamp(e)}function fd(t,e){const r=(e.baseMutations||[]).map((a=>HT(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const l=e.mutations[a+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>HT(t.ct,a))),i=Rn.fromMillis(e.localWriteTimeMs);return new S7(e.batchId,i,r,n)}function Yp(t){const e=Bd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Bd(t.lastLimboFreeSnapshotVersion):Et.min();let n;return n=(function(a){return a.documents!==void 0})(t.query)?(function(a){return Tt(a.documents.length===1),ls(Hg(pF(a.documents[0])))})(t.query):(function(a){return ls(vF(a))})(t.query),new Al(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Jn.fromBase64String(t.resumeToken))}function SF(t,e){const r=Ld(e.snapshotVersion),n=Ld(e.lastLimboFreeSnapshotVersion);let i;i=rb(e.target)?gF(t.ct,e.target):yF(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Pd(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function TF(t){const e=vF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ib(e,e.limit,"L"):e}function A5(t,e){return new A7(e.largestBatchId,HT(t.ct,e.overlayMutation))}function qO(t,e){const r=e.path.lastSegment();return[t,ga(e.path.popLast()),r]}function HO(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Ld(n.readTime),documentKey:ga(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre{getBundleMetadata(e,r){return GO(e).get(r).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:Bd(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,r){return GO(e).put((function(i){return{bundleId:i.id,createTime:Ld(Ci(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return KO(e).get(r).next((n=>{if(n)return(function(a){return{name:a.name,query:TF(a.bundledQuery),readTime:Bd(a.readTime)}})(n)}))}saveNamedQuery(e,r){return KO(e).put((function(i){return{name:i.name,readTime:Ld(Ci(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function GO(t){return xi(t,"bundles")}function KO(t){return xi(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new Yx(e,n)}getOverlay(e,r){return Ep(e).get(qO(this.userId,r)).next((n=>n?A5(this.serializer,n):null))}getOverlays(e,r){const n=So();return Ee.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((a,s)=>{const l=new A7(r,s);i.push(this.ht(e,l))})),Ee.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((s=>i.add(ga(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(Ep(e).j("collectionPathOverlayIndex",l))})),Ee.waitFor(a)}getOverlaysForCollection(e,r,n){const i=So(),a=ga(r),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ep(e).U("collectionPathOverlayIndex",s).next((l=>{for(const d of l){const h=A5(this.serializer,d);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const a=So();let s;const l=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Ep(e).J({index:"collectionGroupOverlayIndex",range:l},((d,h,p)=>{const m=A5(this.serializer,h);a.size()<i||m.largestBatchId===s?(a.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>a))}ht(e,r){return Ep(e).put((function(i,a,s){const[l,d,h]=qO(a,s.mutation.key);return{userId:a,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:zm(i.ct,s.mutation)}})(this.serializer,this.userId,r))}}function Ep(t){return xi(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{Pt(e){return xi(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?Jn.fromUint8Array(n):Jn.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Tn(e.integerValue));else if("doubleValue"in e){const n=Tn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),Om(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Ul(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(uu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?PV(e)?this.dt(r,Number.MAX_SAFE_INTEGER):Kx(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):bt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const a=e.fields||{};this.dt(r,53);const s="value",l=((i=(n=a[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(Tn(l)),this.Vt(s,r),this.Tt(a[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),dt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}pd.vt=new pd;function Zre(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function WO(t){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=Zre(255&n[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class Jre{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=WO(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=WO(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class ene{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class tne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Np{constructor(){this.jt=new Jre,this.Ht=new ene(this.jt),this.Jt=new tne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new md(this.indexId,this.documentKey,this.arrayValue,n)}}function Pc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=XO(t.arrayValue,e.arrayValue),r!==0?r:(r=XO(t.directionalValue,e.directionalValue),r!==0?r:dt.comparator(t.documentKey,e.documentKey)))}function XO(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.Xt=new en(((r,n)=>In.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Tt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=MT(e);if(r!==void 0&&!this.sn(r))return!1;const n=ld(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.sn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const l=this.Xt.getIterator().getNext();if(!i.has(l.field.canonicalString())){const d=n[a];if(!this.on(l,d)||!this._n(this.en[s++],d))return!1}++a}for(;a<n.length;++a){const l=n[a];if(s>=this.en.length||!this._n(this.en[s++],l))return!1}return!0}an(){if(this.nn)return null;let e=new en(In.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new Rv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new Rv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new Rv(n.field,n.dir==="asc"?0:1)));return new tb(tb.UNKNOWN_ID,this.collectionId,r,Cm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(t){var e,r;if(Tt(t instanceof yr||t instanceof qr),t instanceof yr){if(t instanceof qV){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((a=>yr.create(t.field,"==",a))))||[];return qr.create(i,"or")}return t}const n=t.filters.map((i=>AF(i)));return qr.create(n,t.op)}function rne(t){if(t.getFilters().length===0)return[];const e=WT(AF(t));return Tt(EF(e)),GT(e)||KT(e)?[e]:e.getFilters()}function GT(t){return t instanceof yr}function KT(t){return t instanceof qr&&b7(t)}function EF(t){return GT(t)||KT(t)||(function(r){if(r instanceof qr&&BT(r)){for(const n of r.getFilters())if(!GT(n)&&!KT(n))return!1;return!0}return!1})(t)}function WT(t){if(Tt(t instanceof yr||t instanceof qr),t instanceof yr)return t;if(t.filters.length===1)return WT(t.filters[0]);const e=t.filters.map((n=>WT(n)));let r=qr.create(e,t.op);return r=sb(r),EF(r)?r:(Tt(r instanceof qr),Tt(jh(r)),Tt(r.filters.length>1),r.filters.reduce(((n,i)=>j7(n,i))))}function j7(t,e){let r;return Tt(t instanceof yr||t instanceof qr),Tt(e instanceof yr||e instanceof qr),r=t instanceof yr?e instanceof yr?(function(i,a){return qr.create([i,a],"and")})(t,e):YO(t,e):e instanceof yr?YO(e,t):(function(i,a){if(Tt(i.filters.length>0&&a.filters.length>0),jh(i)&&jh(a))return $V(i,a.getFilters());const s=BT(i)?i:a,l=BT(i)?a:i,d=s.filters.map((h=>j7(h,l)));return qr.create(d,"or")})(t,e),sb(r)}function YO(t,e){if(jh(e))return $V(e,t.getFilters());{const r=e.filters.map((n=>j7(t,n)));return qr.create(r,"or")}}function sb(t){if(Tt(t instanceof yr||t instanceof qr),t instanceof yr)return t;const e=t.getFilters();if(e.length===1)return sb(e[0]);if(UV(t))return t;const r=e.map((i=>sb(i))),n=[];return r.forEach((i=>{i instanceof yr?n.push(i):i instanceof qr&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:qr.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nne{constructor(){this.un=new k7}addToCollectionParentIndex(e,r){return this.un.add(r),Ee.resolve()}getCollectionParents(e,r){return Ee.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ee.resolve()}deleteFieldIndex(e,r){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,r){return Ee.resolve()}getDocumentsMatchingTarget(e,r){return Ee.resolve(null)}getIndexType(e,r){return Ee.resolve(0)}getFieldIndexes(e,r){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,r){return Ee.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,r){return Ee.resolve(ds.min())}updateCollectionGroup(e,r,n){return Ee.resolve()}updateIndexEntries(e,r){return Ee.resolve()}}class k7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new en(Nr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new en(Nr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Uint8Array(0);class ine{constructor(e,r){this.databaseId=r,this.cn=new k7,this.ln=new xu((n=>Pd(n)),((n,i)=>qg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const a={collectionId:n,parent:ga(i)};return ZO(e).put(a)}return Ee.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[_V(r),""],!1,!0);return ZO(e).U(i).next((a=>{for(const s of a){if(s.collectionId!==r)break;n.push(_o(s.parent))}return n}))}addFieldIndex(e,r){const n=jp(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete i.indexId;const a=n.add(i);if(r.indexState){const s=H0(e);return a.next((l=>{s.put(HO(l,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return a.next()}deleteFieldIndex(e,r){const n=jp(e),i=H0(e),a=q0(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=jp(e),n=q0(e),i=H0(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return Ee.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new QO(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,r){const n=q0(e);let i=!0;const a=new Map;return Ee.forEach(this.hn(r),(s=>this.Pn(e,s).next((l=>{i&&(i=!!l),a.set(s,l)})))).next((()=>{if(i){let s=lr();const l=[];return Ee.forEach(a,((d,h)=>{Ke("IndexedDbIndexManager",`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(($=>`${$.fieldPath}:${$.kind}`)).join(",")}`})(d)} to execute ${Pd(r)}`);const p=(function(k,$){const I=MT($);if(I===void 0)return null;for(const L of nb(k,I.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null})(h,d),m=(function(k,$){const I=new Map;for(const L of ld($))for(const E of nb(k,L.fieldPath))switch(E.op){case"==":case"in":I.set(L.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return I.set(L.fieldPath.canonicalString(),E.value),Array.from(I.values())}return null})(h,d),y=(function(k,$){const I=[];let L=!0;for(const E of ld($)){const A=E.kind===0?CO(k,E.fieldPath,k.startAt):OO(k,E.fieldPath,k.startAt);I.push(A.value),L&&(L=A.inclusive)}return new Nh(I,L)})(h,d),b=(function(k,$){const I=[];let L=!0;for(const E of ld($)){const A=E.kind===0?OO(k,E.fieldPath,k.endAt):CO(k,E.fieldPath,k.endAt);I.push(A.value),L&&(L=A.inclusive)}return new Nh(I,L)})(h,d),T=this.In(d,h,y),S=this.In(d,h,b),w=this.Tn(d,h,m),N=this.En(d.indexId,p,T,y.inclusive,S,b.inclusive,w);return Ee.forEach(N,(C=>n.G(C,r.limit).next((k=>{k.forEach(($=>{const I=dt.fromSegments($.documentKey);s.has(I)||(s=s.add(I),l.push(I))}))}))))})).next((()=>l))}return Ee.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=rne(qr.create(e.filters,"and")).map((n=>zT(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,a,s,l){const d=(r!=null?r.length:1)*Math.max(n.length,a.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):Gy,b=this.An(e,y,n[m%h],i),T=this.Rn(e,y,a[m%h],s),S=l.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(b,T,S))}return p}An(e,r,n,i){const a=new md(e,dt.empty(),r,n);return i?a:a.Zt()}Rn(e,r,n,i){const a=new md(e,dt.empty(),r,n);return i?a.Zt():a}Pn(e,r){const n=new QO(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const l of a)n.rn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,r){let n=2;const i=this.hn(r);return Ee.forEach(i,(a=>this.Pn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(d){let h=new en(In.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new Np;for(const i of ld(e)){const a=r.data.field(i.fieldPath);if(a==null)return null;const s=n.Yt(i.kind);pd.vt.It(a,s)}return n.zt()}dn(e){const r=new Np;return pd.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Np;return pd.vt.It(Mm(this.databaseId,r),n.Yt((function(a){const s=ld(a);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new Np);let a=0;for(const s of ld(e)){const l=n[a++];for(const d of i)if(this.fn(r,s.fieldPath)&&Pm(l))i=this.gn(i,s,l);else{const h=d.Yt(s.kind);pd.vt.It(l,h)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const l of i){const d=new Np;d.seed(l.zt()),pd.vt.It(s,d.Yt(r.kind)),a.push(d)}return a}fn(e,r){return!!e.filters.find((n=>n instanceof yr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=jp(e),i=H0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((a=>{const s=[];return Ee.forEach(a,(l=>i.get([l.indexId,this.uid]).next((d=>{s.push((function(p,m){const y=m?new Cm(m.sequenceNumber,new ds(Bd(m.readTime),new dt(_o(m.documentKey)),m.largestBatchId)):Cm.empty(),b=p.fields.map((([T,S])=>new Rv(In.fromServerFormat(T),S)));return new tb(p.indexId,p.collectionGroup,b,y)})(l,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Wt(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=jp(e),a=H0(e);return this.yn(e).next((s=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((l=>Ee.forEach(l,(d=>a.put(HO(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ee.forEach(r,((i,a)=>{const s=n.get(i.collectionGroup);return(s?Ee.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(n.set(i.collectionGroup,l),Ee.forEach(l,(d=>this.wn(e,i,d).next((h=>{const p=this.Sn(a,d);return h.isEqual(p)?Ee.resolve():this.bn(e,a,d,h,p)})))))))}))}Dn(e,r,n,i){return q0(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return q0(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=q0(e);let a=new en(Pc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,l)=>{a=a.add(new md(n.indexId,r,l.arrayValue,l.directionalValue))})).next((()=>a))}Sn(e,r){let n=new en(Pc);const i=this.Vn(r,e);if(i==null)return n;const a=MT(r);if(a!=null){const s=e.data.field(a.fieldPath);if(Pm(s))for(const l of s.arrayValue.values||[])n=n.add(new md(r.indexId,e.key,this.dn(l),i))}else n=n.add(new md(r.indexId,e.key,Gy,i));return n}bn(e,r,n,i,a){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,h,p,m,y){const b=d.getIterator(),T=h.getIterator();let S=F0(b),w=F0(T);for(;S||w;){let N=!1,C=!1;if(S&&w){const k=p(S,w);k<0?C=!0:k>0&&(N=!0)}else S!=null?C=!0:N=!0;N?(m(w),w=F0(T)):C?(y(S),S=F0(b)):(S=F0(b),w=F0(T))}})(i,a,Pc,(l=>{s.push(this.Dn(e,r,n,l))}),(l=>{s.push(this.vn(e,r,n,l))})),Ee.waitFor(s)}yn(e){let r=1;return H0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,l)=>Pc(s,l))).filter(((s,l,d)=>!l||Pc(s,d[l-1])!==0));const i=[];i.push(e);for(const s of n){const l=Pc(s,e),d=Pc(s,r);if(l===0)i[0]=e.Zt();else if(l>0&&d<0)i.push(s),i.push(s.Zt());else if(d>0)break}i.push(r);const a=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const l=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Gy,[]],d=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Gy,[]];a.push(IDBKeyRange.bound(l,d))}return a}Cn(e,r){return Pc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(JO)}getMinOffset(e,r){return Ee.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||bt())))).next(JO)}}function ZO(t){return xi(t,"collectionParents")}function q0(t){return xi(t,"indexEntries")}function jp(t){return xi(t,"indexConfiguration")}function H0(t){return xi(t,"indexState")}function JO(t){Tt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;p7(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new ds(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ra{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ra(e,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),a=[],s=IDBKeyRange.only(r.batchId);let l=0;const d=n.J({range:s},((p,m,y)=>(l++,y.delete())));a.push(d.next((()=>{Tt(l===1)})));const h=[];for(const p of r.mutations){const m=kV(e,p.key.path,r.batchId);a.push(i.delete(m)),h.push(p.key)}return Ee.waitFor(a).next((()=>h))}function ob(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw bt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra.DEFAULT_COLLECTION_PERCENTILE=10,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ra.DEFAULT=new Ra(41943040,Ra.DEFAULT_COLLECTION_PERCENTILE,Ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ra.DISABLED=new Ra(-1,0,0);class Zx{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){Tt(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new Zx(a,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).J({index:"userMutationsIndex",range:n},((i,a,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const a=ih(e),s=Dc(e);return s.add({}).next((l=>{Tt(typeof l=="number");const d=new S7(l,r,n,i),h=(function(b,T,S){const w=S.baseMutations.map((C=>zm(b.ct,C))),N=S.mutations.map((C=>zm(b.ct,C)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:N}})(this.serializer,this.userId,d),p=[];let m=new en(((y,b)=>Wt(y.canonicalString(),b.canonicalString())));for(const y of i){const b=kV(this.userId,y.key.path,l);m=m.add(y.key.path.popLast()),p.push(s.put(h)),p.push(a.put(b,Vte))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[l]=d.keys()})),Ee.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Dc(e).get(r).next((n=>n?(Tt(n.userId===this.userId),fd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ee.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Dc(e).J({index:"userMutationsIndex",range:i},((s,l,d)=>{l.userId===this.userId&&(Tt(l.batchId>=n),a=fd(this.serializer,l)),d.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Dc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dc(e).U("userMutationsIndex",r).next((n=>n.map((i=>fd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Mv(this.userId,r.path),i=IDBKeyRange.lowerBound(n),a=[];return ih(e).J({range:i},((s,l,d)=>{const[h,p,m]=s,y=_o(p);if(h===this.userId&&r.path.isEqual(y))return Dc(e).get(m).next((b=>{if(!b)throw bt();Tt(b.userId===this.userId),a.push(fd(this.serializer,b))}));d.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new en(Wt);const i=[];return r.forEach((a=>{const s=Mv(this.userId,a.path),l=IDBKeyRange.lowerBound(s),d=ih(e).J({range:l},((h,p,m)=>{const[y,b,T]=h,S=_o(b);y===this.userId&&a.path.isEqual(S)?n=n.add(T):m.done()}));i.push(d)})),Ee.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,a=Mv(this.userId,n),s=IDBKeyRange.lowerBound(a);let l=new en(Wt);return ih(e).J({range:s},((d,h,p)=>{const[m,y,b]=d,T=_o(y);m===this.userId&&n.isPrefixOf(T)?T.length===i&&(l=l.add(b)):p.done()})).next((()=>this.xn(e,l)))}xn(e,r){const n=[],i=[];return r.forEach((a=>{i.push(Dc(e).get(a).next((s=>{if(s===null)throw bt();Tt(s.userId===this.userId),n.push(fd(this.serializer,s))})))})),Ee.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return NF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ee.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ee.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return ih(e).J({range:n},((a,s,l)=>{if(a[0]===this.userId){const d=_o(a[1]);i.push(d)}else l.done()})).next((()=>{Tt(i.length===0)}))}))}containsKey(e,r){return jF(e,this.userId,r)}Nn(e){return kF(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function jF(t,e,r){const n=Mv(e,r.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return ih(t).J({range:a,H:!0},((l,d,h)=>{const[p,m,y]=l;p===e&&m===i&&(s=!0),h.done()})).next((()=>s))}function Dc(t){return xi(t,"mutations")}function ih(t){return xi(t,"documentMutations")}function kF(t){return xi(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ud(0)}static kn(){return new Ud(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Ud(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Et.fromTimestamp(new Rn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>G0(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Tt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const a=[];return G0(e).J(((s,l)=>{const d=Yp(l);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))})).next((()=>Ee.waitFor(a))).next((()=>i))}forEachTarget(e,r){return G0(e).J(((n,i)=>{const a=Yp(i);r(a)}))}qn(e){return tI(e).get("targetGlobalKey").next((r=>(Tt(r!==null),r)))}Qn(e,r){return tI(e).put("targetGlobalKey",r)}Kn(e,r){return G0(e).put(SF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Pd(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return G0(e).J({range:i,index:"queryTargetsIndex"},((s,l,d)=>{const h=Yp(l);qg(r,h.target)&&(a=h,d.done())})).next((()=>a))}addMatchingKeys(e,r,n){const i=[],a=Hc(e);return r.forEach((s=>{const l=ga(s.path);i.push(a.put({targetId:n,path:l})),i.push(this.referenceDelegate.addReference(e,n,s))})),Ee.waitFor(i)}removeMatchingKeys(e,r,n){const i=Hc(e);return Ee.forEach(r,(a=>{const s=ga(a.path);return Ee.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,r){const n=Hc(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Hc(e);let a=lr();return i.J({range:n,H:!0},((s,l,d)=>{const h=_o(s[1]),p=new dt(h);a=a.add(p)})).next((()=>a))}containsKey(e,r){const n=ga(r.path),i=IDBKeyRange.bound([n],[_V(n)],!1,!0);let a=0;return Hc(e).J({index:"documentTargetsIndex",H:!0,range:i},(([s,l],d,h)=>{s!==0&&(a++,h.done())})).next((()=>a>0))}ot(e,r){return G0(e).get(r).next((n=>n?Yp(n):null))}}function G0(t){return xi(t,"targets")}function tI(t){return xi(t,"targetGlobal")}function Hc(t){return xi(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI([t,e],[r,n]){const i=Wt(t,r);return i===0?Wt(e,n):i}class sne{constructor(e){this.Un=e,this.buffer=new en(rI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();rI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class one{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){bu(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await vu(r)}await this.Hn(3e5)}))}}class lne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ee.resolve(La.oe);const n=new sne(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),Ee.resolve(eI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,a,s,l,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(n=m,l=Date.now(),this.removeTargets(e,n,r)))).next((m=>(a=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),eh()<=gr.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(d-l)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ee.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m}))))}}function cne(t,e){return new lne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class une{constructor(e,r){this.db=e,this.garbageCollector=cne(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return Ky(e,n)}removeReference(e,r,n){return Ky(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return Ky(e,r)}nr(e,r){return(function(i,a){let s=!1;return kF(i).Y((l=>jF(i,l,a).next((d=>(d&&(s=!0),Ee.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((s,l)=>{if(l<=r){const d=this.nr(e,s).next((h=>{if(!h)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Et.min()),Hc(e).delete((function(m){return[0,ga(m.path)]})(s)))))}));i.push(d)}})).next((()=>Ee.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return Ky(e,r)}tr(e,r){const n=Hc(e);let i,a=La.oe;return n.J({index:"documentTargetsIndex"},(([s,l],{path:d,sequenceNumber:h})=>{s===0?(a!==La.oe&&r(new dt(_o(i)),a),a=h,i=d):a=La.oe})).next((()=>{a!==La.oe&&r(new dt(_o(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ky(t,e){return Hc(t).put((function(n,i){return{targetId:0,path:ga(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(){this.changes=new xu((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ee.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Ju(e).put(n)}removeEntry(e,r,n){return Ju(e).delete((function(a,s){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],ab(s),l[l.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=An.newInvalidDocument(r);return Ju(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kp(r))},((i,a)=>{n=this.ir(r,a)})).next((()=>n))}sr(e,r){let n={size:0,document:An.newInvalidDocument(r)};return Ju(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(kp(r))},((i,a)=>{n={document:this.ir(r,a),size:ob(a)}})).next((()=>n))}getEntries(e,r){let n=as();return this._r(e,r,((i,a)=>{const s=this.ir(i,a);n=n.insert(i,s)})).next((()=>n))}ar(e,r){let n=as(),i=new mn(dt.comparator);return this._r(e,r,((a,s)=>{const l=this.ir(a,s);n=n.insert(a,l),i=i.insert(a,ob(s))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return Ee.resolve();let i=new en(aI);r.forEach((d=>i=i.add(d)));const a=IDBKeyRange.bound(kp(i.first()),kp(i.last())),s=i.getIterator();let l=s.getNext();return Ju(e).J({index:"documentKeyIndex",range:a},((d,h,p)=>{const m=dt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&aI(l,m)<0;)n(l,null),l=s.getNext();l&&l.isEqual(m)&&(n(l,h),l=s.hasNext()?s.getNext():null),l?p.$(kp(l)):p.done()})).next((()=>{for(;l;)n(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,a){const s=r.path,l=[s.popLast().toArray(),s.lastSegment(),ab(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ju(e).U(IDBKeyRange.bound(l,d,!0)).next((h=>{a==null||a.incrementDocumentReadCount(h.length);let p=as();for(const m of h){const y=this.ir(dt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Gg(r,y)||i.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,i){let a=as();const s=iI(r,n),l=iI(r,ds.max());return Ju(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,l,!0)},((d,h,p)=>{const m=this.ir(dt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(m.key,m),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new hne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return nI(e).get("remoteDocumentGlobalKey").next((r=>(Tt(!!r),r)))}rr(e,r){return nI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=Xre(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Et.min())))return n}return An.newInvalidDocument(e)}}function OF(t){return new dne(t)}class hne extends CF{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new xu((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new en(((a,s)=>Wt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const l=this.lr.get(a);if(r.push(this.cr.removeEntry(e,a,l.readTime)),s.isValidDocument()){const d=FO(this.cr.serializer,s);i=i.add(a.path.popLast());const h=ob(d);n+=h-l.size,r.push(this.cr.addEntry(e,a,d))}else if(n-=l.size,this.trackRemovals){const d=FO(this.cr.serializer,s.convertToNoDocument(Et.min()));r.push(this.cr.addEntry(e,a,d))}})),i.forEach((a=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),r.push(this.cr.updateMetadata(e,n)),Ee.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((a,s)=>{this.lr.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function nI(t){return xi(t,"remoteDocumentGlobal")}function Ju(t){return xi(t,"remoteDocumentsV14")}function kp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function iI(t,e){const r=e.documentKey.path.toArray();return[t,ab(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function aI(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(i=Wt(r[a],n[a]),i)return i;return i=Wt(r.length,n.length),i||(i=Wt(r[r.length-2],n[n.length-2]),i||Wt(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&lm(n.mutation,i,Ba.empty(),Rn.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,lr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=lr()){const i=So();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let s=Xp();return a.forEach(((l,d)=>{s=s.insert(l,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=So();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,lr())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,l)=>{r.set(s,l)}))}))}computeViews(e,r,n,i){let a=as();const s=om(),l=(function(){return om()})();return r.forEach(((d,h)=>{const p=n.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Ql)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),lm(p.mutation,h,p.mutation.getFieldMask(),Rn.now())):s.set(h.key,Ba.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((h,p)=>s.set(h,p))),r.forEach(((h,p)=>{var m;return l.set(h,new fne(p,(m=s.get(h))!==null&&m!==void 0?m:null))})),l)))}recalculateAndSaveOverlays(e,r){const n=om();let i=new mn(((s,l)=>s-l)),a=lr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const l of s)l.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||Ba.empty();p=l.applyToLocalView(h,p),n.set(d,p);const m=(i.get(l.batchId)||lr()).add(d);i=i.insert(l.batchId,m)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const d=l.getNext(),h=d.key,p=d.value,m=ZV();p.forEach((y=>{if(!a.has(y)){const b=aF(r.get(y),n.get(y));b!==null&&m.set(y,b),a=a.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ee.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(s){return dt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):GV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Ee.resolve(So());let l=-1,d=a;return s.next((h=>Ee.forEach(h,((p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(p)?Ee.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,d,h,lr()))).next((p=>({batchId:l,changes:YV(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dt(r)).next((n=>{let i=Xp();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Xp();return this.indexManager.getCollectionParents(e,a).next((l=>Ee.forEach(l,(d=>{const h=(function(m,y){return new yf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,n,i).next((p=>{p.forEach(((m,y)=>{s=s.insert(m,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((s=>{a.forEach(((d,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,An.newInvalidDocument(p)))}));let l=Xp();return s.forEach(((d,h)=>{const p=a.get(d);p!==void 0&&lm(p.mutation,h,Ba.empty(),Rn.now()),Gg(r,h)&&(l=l.insert(d,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ee.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:Ci(i.createTime)}})(r)),Ee.resolve()}getNamedQuery(e,r){return Ee.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:TF(i.bundledQuery),readTime:Ci(i.readTime)}})(r)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(){this.overlays=new mn(dt.comparator),this.Ir=new Map}getOverlay(e,r){return Ee.resolve(this.overlays.get(r))}getOverlays(e,r){const n=So();return Ee.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.ht(e,r,a)})),Ee.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),Ee.resolve()}getOverlaysForCollection(e,r,n){const i=So(),a=r.length+1,s=new dt(r.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const d=l.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new mn(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=a.get(h.largestBatchId);p===null&&(p=So(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=So(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return Ee.resolve(l)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new A7(r,n));let a=this.Ir.get(r);a===void 0&&(a=lr(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(){this.sessionToken=Jn.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.Tr=new en(Ni.Er),this.dr=new en(Ni.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Ni(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Ni(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new dt(new Nr([])),n=new Ni(r,e),i=new Ni(r,e+1),a=[];return this.dr.forEachInRange([n,i],(s=>{this.Vr(s),a.push(s.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new dt(new Nr([])),n=new Ni(r,e),i=new Ni(r,e+1);let a=lr();return this.dr.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const r=new Ni(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Ni{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return dt.comparator(e.key,r.key)||Wt(e.wr,r.wr)}static Ar(e,r){return Wt(e.wr,r.wr)||dt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new en(Ni.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new S7(a,r,n,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Ni(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ee.resolve(s)}lookupMutationBatch(e,r){return Ee.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return Ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Ni(r,0),i=new Ni(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],(s=>{const l=this.Dr(s.wr);a.push(l)})),Ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new en(Wt);return r.forEach((i=>{const a=new Ni(i,0),s=new Ni(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],(l=>{n=n.add(l.wr)}))})),Ee.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;dt.isDocumentKey(a)||(a=a.child(""));const s=new Ni(new dt(a),0);let l=new en(Wt);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===i&&(l=l.add(d.wr)),!0)}),s),Ee.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){Tt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ee.forEach(r.mutations,(i=>{const a=new Ni(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Ni(r,0),i=this.br.firstAfterOrEqual(n);return Ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(e){this.Mr=e,this.docs=(function(){return new mn(dt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ee.resolve(n?n.document.mutableCopy():An.newInvalidDocument(r))}getEntries(e,r){let n=as();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():An.newInvalidDocument(i))})),Ee.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=as();const s=r.path,l=new dt(s.child("")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||p7(TV(p),n)<=0||(i.has(p.key)||Gg(r,p))&&(a=a.insert(p.key,p.mutableCopy()))}return Ee.resolve(a)}getAllFromCollectionGroup(e,r,n,i){bt()}Or(e,r){return Ee.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new bne(this)}getSize(e){return Ee.resolve(this.size)}}class bne extends CF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Ee.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e){this.persistence=e,this.Nr=new xu((r=>Pd(r)),qg),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new C7,this.targetCount=0,this.kr=Ud.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Ud(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ee.resolve()}updateTargetData(e,r){return this.Kn(r),Ee.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach(((s,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),Ee.waitFor(a).next((()=>i))}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ee.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ee.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),Ee.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ee.resolve(n)}containsKey(e,r){return Ee.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new La(0),this.Kr=!1,this.Kr=!0,this.$r=new gne,this.referenceDelegate=e(this),this.Ur=new xne(this),this.indexManager=new nne,this.remoteDocumentCache=(function(i){return new vne(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new _F(r),this.Gr=new pne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new mne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new yne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ke("MemoryPersistence","Starting transaction:",e);const i=new wne(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,r){return Ee.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class wne extends EV{constructor(e){super(),this.currentSequenceNumber=e}}class Jx{constructor(e){this.persistence=e,this.Jr=new C7,this.Yr=null}static Zr(e){return new Jx(e)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ee.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ee.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ee.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,(n=>{const i=dt.fromPath(n);return this.ei(e,i).next((a=>{a||r.removeEntry(i,Et.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ne{constructor(e){this.serializer=e}O(e,r,n,i){const a=new Gx("createOrUpgrade",r);n<1&&i>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bO,{unique:!0}),d.createObjectStore("documentMutations")})(e),sI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=Ee.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),sI(e)),s=s.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bO,{unique:!0});const m=h.store("mutations"),y=p.map((b=>m.put(b)));return Ee.waitFor(y)}))})(e,a)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.ni(a)))),n<6&&i>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&i>=7&&(s=s.next((()=>this.ii(a)))),n<8&&i>=8&&(s=s.next((()=>this.si(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.oi(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:ere});h.createIndex("collectionPathOverlayIndex",tre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",rre,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:Fte});h.createIndex("documentKeyIndex",qte),h.createIndex("collectionGroupIndex",Hte)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.ai(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Qte}).createIndex("sequenceNumberIndex",Yte,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Zte}).createIndex("documentKeyIndex",Jte,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=ob(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>Ee.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((l=>Ee.forEach(l,(d=>{Tt(d.userId===a.userId);const h=fd(this.serializer,d);return NF(e,a.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return n.J(((s,l)=>{const d=new Nr(s),h=(function(m){return[0,ga(m)]})(d);a.push(r.get(h).next((p=>p?Ee.resolve():(m=>r.put({targetId:0,path:ga(m),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>Ee.waitFor(a)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:Xte});const n=r.store("collectionParents"),i=new k7,a=s=>{if(i.add(s)){const l=s.lastSegment(),d=s.popLast();return n.put({collectionId:l,parent:ga(d)})}};return r.store("remoteDocuments").J({H:!0},((s,l)=>{const d=new Nr(s);return a(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,l,d],h)=>{const p=_o(l);return a(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const a=Yp(i),s=SF(this.serializer,a);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((a,s)=>{const l=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new dt(Nr.fromString(m.document.name).popFirst(5)):m.noDocument?dt.fromSegments(m.noDocument.path):m.unknownDocument?dt.fromSegments(m.unknownDocument.path):bt()})(s).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(h))})).next((()=>Ee.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=OF(this.serializer),a=new RF(Jx.Zr,this.serializer.ct);return n.U().next((s=>{const l=new Map;return s.forEach((d=>{var h;let p=(h=l.get(d.userId))!==null&&h!==void 0?h:lr();fd(this.serializer,d).keys().forEach((m=>p=p.add(m))),l.set(d.userId,p)})),Ee.forEach(l,((d,h)=>{const p=new ta(h),m=Yx.lt(this.serializer,p),y=a.getIndexManager(p),b=Zx.lt(p,this.serializer,y,a.referenceDelegate);return new IF(i,b,m,y).recalculateAndSaveOverlaysForDocumentKeys(new PT(r,La.oe),d).next()}))}))}}function sI(t){t.createObjectStore("targetDocuments",{keyPath:Kte}).createIndex("documentTargetsIndex",Wte,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gte,{unique:!0}),t.createObjectStore("targetGlobal")}const E5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class O7{constructor(e,r,n,i,a,s,l,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=a,this.window=s,this.document=l,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!O7.D())throw new tt(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new une(this,i),this.Ai=r+"main",this.serializer=new _F(d),this.Ri=new au(this.Ai,this.hi,new _ne(this.serializer)),this.$r=new Yre,this.Ur=new ane(this.referenceDelegate,this.serializer),this.remoteDocumentCache=OF(this.serializer),this.Gr=new Qre,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&Xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(Me.FAILED_PRECONDITION,E5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new La(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Wy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(bu(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return Cp(e).get("owner").next((r=>Ee.resolve(this.vi(r))))}Ci(e){return Wy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=xi(r,"clientMetadata");return n.U().next((i=>{const a=this.xi(i,18e5),s=i.filter((l=>a.indexOf(l)===-1));return Ee.forEach(s,(l=>n.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ee.resolve(!0):Cp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new tt(Me.FAILED_PRECONDITION,E5);return!1}}return!(!this.networkEnabled||!this.inForeground)||Wy(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||s&&l)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Ke("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new PT(e,La.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>Wy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return Zx.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ine(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yx.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ke("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",a=(function(d){return d===17?are:d===16?ire:d===15?g7:d===14?IV:d===13?OV:d===12?nre:d===11?CV:void bt()})(this.hi);let s;return this.Ri.runTransaction(e,i,a,(l=>(s=new PT(l,this.Qr?this.Qr.next():La.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw Xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new tt(Me.FAILED_PRECONDITION,AV);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Ki(e){return Cp(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new tt(Me.FAILED_PRECONDITION,E5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cp(e).put("owner",r)}static D(){return au.D()}bi(e){const r=Cp(e);return r.get("owner").next((n=>this.vi(n)?(Ke("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ee.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(Xn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;C$()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ke("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Xn("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Xn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cp(t){return xi(t,"owner")}function Wy(t){return xi(t,"clientMetadata")}function MF(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=lr(),i=lr();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new I7(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return C$()?8:NV(vi())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.Zi(e,r,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Sne;return this.Xi(e,r,s).next((l=>{if(a.result=l,this.zi)return this.es(e,r,s,l.size)}))})).next((()=>a.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(eh()<=gr.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",th(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(eh()<=gr.DEBUG&&Ke("QueryEngine","Query:",th(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(eh()<=gr.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",th(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(r))):Ee.resolve())}Yi(e,r){if(IO(r))return Ee.resolve(null);let n=ls(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=ib(r,null,"F"),n=ls(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=lr(...a);return this.Ji.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,l);return this.ns(r,h,s,d.readTime)?this.Yi(e,ib(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,i){return IO(r)||i.isEqual(Et.min())?Ee.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const s=this.ts(r,a);return this.ns(r,s,n,i)?Ee.resolve(null):(eh()<=gr.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),th(r)),this.rs(e,s,r,SV(i,-1)).next((l=>l)))}))}ts(e,r){let n=new en(XV(e));return r.forEach(((i,a)=>{Gg(e,a)&&(n=n.add(a))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return eh()<=gr.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",th(r)),this.Ji.getDocumentsMatchingQuery(e,r,ds.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new mn(Wt),this._s=new xu((a=>Pd(a)),qg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function DF(t,e,r,n){return new Tne(t,e,r,n)}async function LF(t,e){const r=_t(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],l=[];let d=lr();for(const h of i){s.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function Ane(t,e){const r=_t(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(l,d,h,p){const m=h.batch,y=m.keys();let b=Ee.resolve();return y.forEach((T=>{b=b.next((()=>p.getEntry(d,T))).next((S=>{const w=h.docVersions.get(T);Tt(w!==null),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(l){let d=lr();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(d=d.add(l.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function BF(t){const e=_t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Ene(t,e){const r=_t(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const l=[];e.targetChanges.forEach(((p,m)=>{const y=i.get(m);if(!y)return;l.push(r.Ur.removeMatchingKeys(a,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(a,p.addedDocuments,m))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(Jn.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,n)),i=i.insert(m,b),(function(S,w,N){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,b,p)&&l.push(r.Ur.updateTargetData(a,b))}));let d=as(),h=lr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(Nne(a,s,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Et.min())){const p=r.Ur.getLastRemoteSnapshotVersion(a).next((m=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));l.push(p)}return Ee.waitFor(l).next((()=>s.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,d,h))).next((()=>d))})).then((a=>(r.os=i,a)))}function Nne(t,e,r){let n=lr(),i=lr();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let s=as();return r.forEach(((l,d)=>{const h=a.get(l);d.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),d.isNoDocument()&&d.version.isEqual(Et.min())?(e.removeEntry(l,d.readTime),s=s.insert(l,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),s=s.insert(l,d)):Ke("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",d.version)})),{Ps:s,Is:i}}))}function jne(t,e){const r=_t(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function lb(t,e){const r=_t(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((a=>a?(i=a,Ee.resolve(i)):r.Ur.allocateTargetId(n).next((s=>(i=new Al(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Oh(t,e,r){const n=_t(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!bu(s))throw s;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function XT(t,e,r){const n=_t(t);let i=Et.min(),a=lr();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,h,p){const m=_t(d),y=m._s.get(p);return y!==void 0?Ee.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,s,ls(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,l.targetId).next((d=>{a=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?i:Et.min(),r?a:lr()))).next((l=>($F(n,WV(e),l),{documents:l,Ts:a})))))}function UF(t,e){const r=_t(t),n=_t(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((s=>s?s.target:null))))}function zF(t,e){const r=_t(t),n=r.us.get(e)||Et.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,SV(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>($F(r,e,i),i)))}function $F(t,e,r){let n=t.us.get(e)||Et.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.us.set(e,n)}function oI(t,e){return`firestore_clients_${t}_${e}`}function lI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function N5(t,e){return`firestore_targets_${t}_${e}`}class cb{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new tt(i.error.code,i.error.message))),s?new cb(e,r,i.state,a):(Xn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new tt(n.error.code,n.error.message))),a?new cm(e,n.state,i):(Xn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ub{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=x7();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=jV(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new ub(e,a):(Xn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class R7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new R7(r.clientId,r.onlineState):(Xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class QT{constructor(){this.activeTargetIds=x7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j5{constructor(e,r,n,i,a){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new mn(Wt),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=oI(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new QT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(oI(this.persistenceKey,n));if(i){const a=ub.Rs(n,i);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(N5(this.persistenceKey,e));if(i){const a=cm.Rs(e,i);a&&(n=a.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(N5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ke("SharedClientState","READ",e,r),r}setItem(e,r){Ke("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void Xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(a){let s=La.oe;if(a!=null)try{const l=JSON.parse(a);Tt(typeof l=="number"),s=l}catch(l){Xn("SharedClientState","Failed to read sequence number from WebStorage",l)}return s})(r.newValue);n!==La.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new cb(this.currentUser,e,r,n),a=lI(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Vs())}Qs(e){const r=lI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=N5(this.persistenceKey,e),a=new cm(e,r,n);this.setItem(i,a.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return ub.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return cb.Rs(new ta(a),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return cm.Rs(i,r)}Ls(e){return R7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(n),s=[],l=[];return a.forEach((d=>{i.has(d)||s.push(d)})),i.forEach((d=>{a.has(d)||l.push(d)})),this.syncEngine.io(s,l).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=x7();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class VF{constructor(){this.so=new QT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new QT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kne{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xy=null;function k5(){return Xy===null?Xy=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xy++,"0x"+Xy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="WebChannelConnection";class Ine extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,s){const l=k5(),d=this.xo(r,n.toUriEncodedString());Ke("RestConnection",`Sending RPC '${r}' ${l}:`,d,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,a,s),this.No(r,d,h,i).then((p=>(Ke("RestConnection",`Received RPC '${r}' ${l}: `,p),p)),(p=>{throw jm("RestConnection",`RPC '${r}' ${l} failed with error: `,p,"url: ",d,"request:",i),p}))}Lo(r,n,i,a,s,l){return this.Mo(r,n,i,a,s)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+gf})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>r[s]=a)),i&&i.headers.forEach(((a,s)=>r[s]=a))}xo(r,n){const i=Cne[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=k5();return new Promise(((s,l)=>{const d=new gV;d.setWithCredentials(!0),d.listenOnce(yV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Iv.NO_ERROR:const p=d.getResponseJson();Ke(Yi,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),s(p);break;case Iv.TIMEOUT:Ke(Yi,`RPC '${e}' ${a} timed out`),l(new tt(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Iv.HTTP_ERROR:const m=d.getStatus();if(Ke(Yi,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=(function(w){const N=w.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(N)>=0?N:Me.UNKNOWN})(b.status);l(new tt(T,b.message))}else l(new tt(Me.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new tt(Me.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{Ke(Yi,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Ke(Yi,`RPC '${e}' ${a} sending request:`,i),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const i=k5(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=xV(),l=bV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=a.join("");Ke(Yi,`Creating RPC '${e}' stream ${i}: ${p}`,d);const m=s.createWebChannel(p,d);let y=!1,b=!1;const T=new One({Io:w=>{b?Ke(Yi,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(Ke(Yi,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Ke(Yi,`RPC '${e}' stream ${i} sending:`,w),m.send(w))},To:()=>m.close()}),S=(w,N,C)=>{w.listen(N,(k=>{try{C(k)}catch($){setTimeout((()=>{throw $}),0)}}))};return S(m,Wp.EventType.OPEN,(()=>{b||(Ke(Yi,`RPC '${e}' stream ${i} transport opened.`),T.yo())})),S(m,Wp.EventType.CLOSE,(()=>{b||(b=!0,Ke(Yi,`RPC '${e}' stream ${i} transport closed`),T.So())})),S(m,Wp.EventType.ERROR,(w=>{b||(b=!0,jm(Yi,`RPC '${e}' stream ${i} transport errored:`,w),T.So(new tt(Me.UNAVAILABLE,"The operation could not be completed")))})),S(m,Wp.EventType.MESSAGE,(w=>{var N;if(!b){const C=w.data[0];Tt(!!C);const k=C,$=k.error||((N=k[0])===null||N===void 0?void 0:N.error);if($){Ke(Yi,`RPC '${e}' stream ${i} received error:`,$);const I=$.status;let L=(function(R){const F=si[R];if(F!==void 0)return lF(F)})(I),E=$.message;L===void 0&&(L=Me.INTERNAL,E="Unknown error status: "+I+" with message "+$.message),b=!0,T.So(new tt(L,E)),m.close()}else Ke(Yi,`RPC '${e}' stream ${i} received:`,C),T.bo(C)}})),S(l,vV.STAT_EVENT,(w=>{w.stat===RT.PROXY?Ke(Yi,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===RT.NOPROXY&&Ke(Yi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return typeof window<"u"?window:null}function Uv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){return new Bre(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,r,n,i,a,s,l,d){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new M7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Me.RESOURCE_EXHAUSTED?(Xn(r.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Me.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new tt(Me.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rne extends qF{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=Vre(this.serializer,e),n=(function(a){if(!("targetChange"in a))return Et.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?Et.min():s.readTime?Ci(s.readTime):Et.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=qT(this.serializer),r.addTarget=(function(a,s){let l;const d=s.target;if(l=rb(d)?{documents:gF(a,d)}:{query:yF(a,d)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=dF(a,s.resumeToken);const h=VT(a,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(Et.min())>0){l.readTime=Ch(a,s.snapshotVersion.toTimestamp());const h=VT(a,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const n=qre(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=qT(this.serializer),r.removeTarget=e,this.a_(r)}}class Mne extends qF{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,Tt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=Fre(e.writeResults,e.commitTime),n=Ci(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=qT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>zm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new tt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Mo(e,FT(r,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new tt(Me.UNKNOWN,a.toString())}))}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Lo(e,FT(r,n),i,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new tt(Me.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Dne{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xn(r),this.D_=!1):Ke("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((s=>{n.enqueueAndForget((async()=>{e0(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=_t(d);h.L_.add(4),await Qg(h),h.q_.set("Unknown"),h.L_.delete(4),await t2(h)})(this))}))})),this.q_=new Dne(n,i)}}async function t2(t){if(e0(t))for(const e of t.B_)await e(!0)}async function Qg(t){for(const e of t.B_)await e(!1)}function r2(t,e){const r=_t(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),L7(r)?D7(r):xf(r).r_()&&P7(r,e))}function Ih(t,e){const r=_t(t),n=xf(r);r.N_.delete(e),n.r_()&&HF(r,e),r.N_.size===0&&(n.r_()?n.o_():e0(r)&&r.q_.set("Unknown"))}function P7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}xf(t).A_(e)}function HF(t,e){t.Q_.xe(e),xf(t).R_(e)}function D7(t){t.Q_=new Mre({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xf(t).start(),t.q_.v_()}function L7(t){return e0(t)&&!xf(t).n_()&&t.N_.size>0}function e0(t){return _t(t).L_.size===0}function GF(t){t.Q_=void 0}async function Bne(t){t.q_.set("Online")}async function Une(t){t.N_.forEach(((e,r)=>{P7(t,e)}))}async function zne(t,e){GF(t),L7(t)?(t.q_.M_(e),D7(t)):t.q_.set("Unknown")}async function $ne(t,e,r){if(t.q_.set("Online"),e instanceof uF&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))})(t,e)}catch(n){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await db(t,n)}else if(e instanceof Bv?t.Q_.Ke(e):e instanceof cF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Et.min()))try{const n=await BF(t.localStore);r.compareTo(n)>=0&&await(function(a,s){const l=a.Q_.rt(s);return l.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=a.N_.get(h);p&&a.N_.set(h,p.withResumeToken(d.resumeToken,s))}})),l.targetMismatches.forEach(((d,h)=>{const p=a.N_.get(d);if(!p)return;a.N_.set(d,p.withResumeToken(Jn.EMPTY_BYTE_STRING,p.snapshotVersion)),HF(a,d);const m=new Al(p.target,d,h,p.sequenceNumber);P7(a,m)})),a.remoteSyncer.applyRemoteEvent(l)})(t,r)}catch(n){Ke("RemoteStore","Failed to raise snapshot:",n),await db(t,n)}}async function db(t,e,r){if(!bu(e))throw e;t.L_.add(1),await Qg(t),t.q_.set("Offline"),r||(r=()=>BF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ke("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await t2(t)}))}function KF(t,e){return e().catch((r=>db(t,r,e)))}async function bf(t){const e=_t(t),r=hu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Vne(e);)try{const i=await jne(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,Fne(e,i)}catch(i){await db(e,i)}WF(e)&&XF(e)}function Vne(t){return e0(t)&&t.O_.length<10}function Fne(t,e){t.O_.push(e);const r=hu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function WF(t){return e0(t)&&!hu(t).n_()&&t.O_.length>0}function XF(t){hu(t).start()}async function qne(t){hu(t).p_()}async function Hne(t){const e=hu(t);for(const r of t.O_)e.m_(r.mutations)}async function Gne(t,e,r){const n=t.O_.shift(),i=T7.from(n,e,r);await KF(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await bf(t)}async function Kne(t,e){e&&hu(t).V_&&await(async function(n,i){if((function(s){return oF(s)&&s!==Me.ABORTED})(i.code)){const a=n.O_.shift();hu(n).s_(),await KF(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await bf(n)}})(t,e),WF(t)&&XF(t)}async function uI(t,e){const r=_t(t);r.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const n=e0(r);r.L_.add(3),await Qg(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await t2(r)}async function YT(t,e){const r=_t(t);e?(r.L_.delete(2),await t2(r)):e||(r.L_.add(2),await Qg(r),r.q_.set("Unknown"))}function xf(t){return t.K_||(t.K_=(function(r,n,i){const a=_t(r);return a.w_(),new Rne(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Bne.bind(null,t),Ro:Une.bind(null,t),mo:zne.bind(null,t),d_:$ne.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),L7(t)?D7(t):t.q_.set("Unknown")):(await t.K_.stop(),GF(t))}))),t.K_}function hu(t){return t.U_||(t.U_=(function(r,n,i){const a=_t(r);return a.w_(),new Mne(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:qne.bind(null,t),mo:Kne.bind(null,t),f_:Hne.bind(null,t),g_:Gne.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await bf(t)):(await t.U_.stop(),t.O_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,l=new B7(e,r,s,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new tt(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U7(t,e){if(Xn("AsyncQueue",`${e}: ${t}`),bu(t))return new tt(Me.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||dt.comparator(r.key,n.key):(r,n)=>dt.comparator(r.key,n.key),this.keyedMap=Xp(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new fh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof fh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new fh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.W_=new mn(dt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):bt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Rh{constructor(e,r,n,i,a,s,l,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach((l=>{s.push({type:0,doc:l})})),new Rh(e,r,fh.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Xne{constructor(){this.queries=hI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=_t(r),a=i.queries;i.queries=hI(),a.forEach(((s,l)=>{for(const d of l.j_)d.onError(n)}))})(this,new tt(Me.ABORTED,"Firestore shutting down"))}}function hI(){return new xu((t=>KV(t)),Wx)}async function z7(t,e){const r=_t(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new Wne,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const l=U7(s,`Initialization of query '${th(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&V7(r)}async function $7(t,e){const r=_t(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Qne(t,e){const r=_t(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const l of s.j_)l.X_(i)&&(n=!0);s.z_=i}}n&&V7(r)}function Yne(t,e,r){const n=_t(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function V7(t){t.Y_.forEach((e=>{e.next()}))}var ZT,fI;(fI=ZT||(ZT={})).ea="default",fI.Cache="cache";class F7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Rh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Rh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==ZT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.key=e}}class YF{constructor(e){this.key=e}}class Zne{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=lr(),this.mutatedKeys=lr(),this.Aa=XV(e),this.Ra=new fh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new dI,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,l=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,m)=>{const y=i.get(p),b=Gg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;y&&b?y.data.isEqual(b.data)?T!==S&&(n.track({type:3,doc:b}),w=!0):this.ga(y,b)||(n.track({type:2,doc:b}),w=!0,(d&&this.Aa(b,d)>0||h&&this.Aa(b,h)<0)&&(l=!0)):!y&&b?(n.track({type:0,doc:b}),w=!0):y&&!b&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(l=!0)),w&&(b?(s=s.add(b),a=S?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),n.track({type:1,doc:p})}return{Ra:s,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((p,m)=>(function(b,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return S(b)-S(T)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),i=i!=null&&i;const l=r&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,h=d!==this.Ea;return this.Ea=d,s.length!==0||h?{snapshot:new Rh(this.query,e.Ra,a,s,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=lr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new YF(n))})),this.da.forEach((n=>{e.has(n)||r.push(new QF(n))})),r}ba(e){this.Ta=e.Ts,this.da=lr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Rh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Jne{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class eie{constructor(e){this.key=e,this.va=!1}}class tie{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new xu((l=>KV(l)),Wx),this.Ma=new Map,this.xa=new Set,this.Oa=new mn(dt.comparator),this.Na=new Map,this.La=new C7,this.Ba={},this.ka=new Map,this.qa=Ud.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rie(t,e,r=!0){const n=n2(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await ZF(n,e,r,!0),i}async function nie(t,e){const r=n2(t);await ZF(r,e,!0,!1)}async function ZF(t,e,r,n){const i=await lb(t.localStore,ls(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let l;return n&&(l=await q7(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&r2(t.remoteStore,i),l}async function q7(t,e,r,n,i){t.Ka=(m,y,b)=>(async function(S,w,N,C){let k=w.view.ma(N);k.ns&&(k=await XT(S.localStore,w.query,!1).then((({documents:E})=>w.view.ma(E,k))));const $=C&&C.targetChanges.get(w.targetId),I=C&&C.targetMismatches.get(w.targetId)!=null,L=w.view.applyChanges(k,S.isPrimaryClient,$,I);return JT(S,w.targetId,L.wa),L.snapshot})(t,m,y,b);const a=await XT(t.localStore,e,!0),s=new Zne(e,a.Ts),l=s.ma(a.documents),d=Xg.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),h=s.applyChanges(l,t.isPrimaryClient,d);JT(t,r,h.wa);const p=new Jne(e,r,s);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function iie(t,e,r){const n=_t(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter((s=>!Wx(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Oh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&Ih(n.remoteStore,i.targetId),Mh(n,i.targetId)})).catch(vu)):(Mh(n,i.targetId),await Oh(n.localStore,i.targetId,!0))}async function aie(t,e){const r=_t(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),Ih(r.remoteStore,n.targetId))}async function sie(t,e,r){const n=W7(t);try{const i=await(function(s,l){const d=_t(s),h=Rn.now(),p=l.reduce(((b,T)=>b.add(T.key)),lr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=as(),S=lr();return d.cs.getEntries(b,p).next((w=>{T=w,T.forEach(((N,C)=>{C.isValidDocument()||(S=S.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,T))).next((w=>{m=w;const N=[];for(const C of l){const k=Cre(C,m.get(C.key).overlayedDocument);k!=null&&N.push(new Ql(C.key,k,LV(k.value.mapValue),Qn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,h,N,l)})).next((w=>{y=w;const N=w.applyToLocalDocumentSet(m,S);return d.documentOverlayCache.saveOverlays(b,w.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:YV(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,l,d){let h=s.Ba[s.currentUser.toKey()];h||(h=new mn(Wt)),h=h.insert(l,d),s.Ba[s.currentUser.toKey()]=h})(n,i.batchId,r),await wu(n,i.changes),await bf(n.remoteStore)}catch(i){const a=U7(i,"Failed to persist write");r.reject(a)}}async function JF(t,e){const r=_t(t);try{const n=await Ene(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=r.Na.get(a);s&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Tt(s.va):i.removedDocuments.size>0&&(Tt(s.va),s.va=!1))})),await wu(r,n,e)}catch(n){await vu(n)}}function pI(t,e,r){const n=_t(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((a,s)=>{const l=s.view.Z_(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const d=_t(s);d.onlineState=l;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(l)&&(h=!0)})),h&&V7(d)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function oie(t,e,r){const n=_t(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let s=new mn(dt.comparator);s=s.insert(a,An.newNoDocument(a,Et.min()));const l=lr().add(a),d=new Wg(Et.min(),new Map,new mn(Wt),s,l);await JF(n,d),n.Oa=n.Oa.remove(a),n.Na.delete(e),K7(n)}else await Oh(n.localStore,e,!1).then((()=>Mh(n,e,r))).catch(vu)}async function lie(t,e){const r=_t(t),n=e.batch.batchId;try{const i=await Ane(r.localStore,e);G7(r,n,null),H7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await wu(r,i)}catch(i){await vu(i)}}async function cie(t,e,r){const n=_t(t);try{const i=await(function(s,l){const d=_t(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,l).next((m=>(Tt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);G7(n,e,r),H7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await wu(n,i)}catch(i){await vu(i)}}function H7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function G7(t,e,r){const n=_t(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Mh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||eq(t,n)}))}function eq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(Ih(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),K7(t))}function JT(t,e,r){for(const n of r)n instanceof QF?(t.La.addReference(n.key,e),uie(t,n)):n instanceof YF?(Ke("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||eq(t,n.key)):bt()}function uie(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ke("SyncEngine","New document in limbo: "+r),t.xa.add(n),K7(t))}function K7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new dt(Nr.fromString(e)),n=t.qa.next();t.Na.set(n,new eie(r)),t.Oa=t.Oa.insert(r,n),r2(t.remoteStore,new Al(ls(Hg(r.path)),n,"TargetPurposeLimboResolution",La.oe))}}async function wu(t,e,r){const n=_t(t),i=[],a=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((l,d)=>{s.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){i.push(h);const m=I7.Wi(d.targetId,h);a.push(m)}})))})),await Promise.all(s),n.Ca.d_(i),await(async function(d,h){const p=_t(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ee.forEach(h,(y=>Ee.forEach(y.$i,(b=>p.persistence.referenceDelegate.addReference(m,y.targetId,b))).next((()=>Ee.forEach(y.Ui,(b=>p.persistence.referenceDelegate.removeReference(m,y.targetId,b)))))))))}catch(m){if(!bu(m))throw m;Ke("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const b=p.os.get(y),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,S)}}})(n.localStore,a))}async function die(t,e){const r=_t(t);if(!r.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const n=await LF(r.localStore,e);r.currentUser=e,(function(a,s){a.ka.forEach((l=>{l.forEach((d=>{d.reject(new tt(Me.CANCELLED,s))}))})),a.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await wu(r,n.hs)}}function hie(t,e){const r=_t(t),n=r.Na.get(e);if(n&&n.va)return lr().add(n.key);{let i=lr();const a=r.Ma.get(e);if(!a)return i;for(const s of a){const l=r.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}async function fie(t,e){const r=_t(t),n=await XT(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&JT(r,e.targetId,i.wa),i}async function pie(t,e){const r=_t(t);return zF(r.localStore,e).then((n=>wu(r,n)))}async function mie(t,e,r,n){const i=_t(t),a=await(function(l,d){const h=_t(l),p=_t(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):Ee.resolve(null)))))})(i.localStore,e);a!==null?(r==="pending"?await bf(i.remoteStore):r==="acknowledged"||r==="rejected"?(G7(i,e,n||null),H7(i,e),(function(l,d){_t(_t(l).mutationQueue).On(d)})(i.localStore,e)):bt(),await wu(i,a)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}async function gie(t,e){const r=_t(t);if(n2(r),W7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await mI(r,n.toArray());r.Qa=!0,await YT(r.remoteStore,!0);for(const a of i)r2(r.remoteStore,a)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((a,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then((()=>(Mh(r,s),Oh(r.localStore,s,!0)))),Ih(r.remoteStore,s)})),await i,await mI(r,n),(function(s){const l=_t(s);l.Na.forEach(((d,h)=>{Ih(l.remoteStore,h)})),l.La.pr(),l.Na=new Map,l.Oa=new mn(dt.comparator)})(r),r.Qa=!1,await YT(r.remoteStore,!1)}}async function mI(t,e,r){const n=_t(t),i=[],a=[];for(const s of e){let l;const d=n.Ma.get(s);if(d&&d.length!==0){l=await lb(n.localStore,ls(d[0]));for(const h of d){const p=n.Fa.get(h),m=await fie(n,p);m.snapshot&&a.push(m.snapshot)}}else{const h=await UF(n.localStore,s);l=await lb(n.localStore,h),await q7(n,tq(h),s,!1,l.resumeToken)}i.push(l)}return n.Ca.d_(a),i}function tq(t){return HV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function yie(t){return(function(r){return _t(_t(r).persistence).Qi()})(_t(t).localStore)}async function vie(t,e,r,n){const i=_t(t);if(i.Qa)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const a=i.Ma.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const s=await zF(i.localStore,WV(a[0])),l=Wg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Jn.EMPTY_BYTE_STRING);await wu(i,s,l);break}case"rejected":await Oh(i.localStore,e,!0),Mh(i,e,n);break;default:bt()}}async function bie(t,e,r){const n=n2(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Ke("SyncEngine","Adding an already active target "+i);continue}const a=await UF(n.localStore,i),s=await lb(n.localStore,a);await q7(n,tq(a),s.targetId,!1,s.resumeToken),r2(n.remoteStore,s)}for(const i of r)n.Ma.has(i)&&await Oh(n.localStore,i,!1).then((()=>{Ih(n.remoteStore,i),Mh(n,i)})).catch(vu)}}function n2(t){const e=_t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hie.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oie.bind(null,e),e.Ca.d_=Qne.bind(null,e.eventManager),e.Ca.$a=Yne.bind(null,e.eventManager),e}function W7(t){const e=_t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lie.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cie.bind(null,e),e}class $m{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=e2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return DF(this.persistence,new PF,e.initialUser,this.serializer)}Ga(e){return new RF(Jx.Zr,this.serializer)}Wa(e){return new VF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$m.provider={build:()=>new $m};class rq extends $m{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await W7(this.Ja.syncEngine),await bf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return DF(this.persistence,new PF,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new one(n,e.asyncQueue,r)}Ha(e,r){const n=new zte(r,this.persistence);return new Ute(e.asyncQueue,n)}Ga(e){const r=MF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Ra.withCacheSize(this.cacheSizeBytes):Ra.DEFAULT;return new O7(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,FF(),Uv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new VF}}class xie extends rq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof j5&&(this.sharedClientState.syncEngine={no:mie.bind(null,r),ro:vie.bind(null,r),io:bie.bind(null,r),Qi:yie.bind(null,r),eo:pie.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await gie(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=FF();if(!j5.D(r))throw new tt(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=MF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new j5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Vm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>pI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=die.bind(null,this.syncEngine),await YT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Xne})()}createDatastore(e){const r=e2(e.databaseInfo.databaseId),n=(function(a){return new Ine(a)})(e.databaseInfo);return(function(a,s,l,d){return new Pne(a,s,l,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,s,l){return new Lne(n,i,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(r=>pI(this.syncEngine,r,0)),(function(){return cI.D()?new cI:new kne})())}createSyncEngine(e,r){return(function(i,a,s,l,d,h,p){const m=new tie(i,a,s,l,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const a=_t(i);Ke("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Qg(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Vm.provider={build:()=>new Vm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wie{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new tt(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,a){const s=_t(i),l={documents:a.map((m=>Um(s.serializer,m)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,Nr.emptyPath(),l,a.length),h=new Map;d.forEach((m=>{const y=$re(s.serializer,m);h.set(y.key.toString(),y)}));const p=[];return a.forEach((m=>{const y=h.get(m.toString());Tt(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=dt.fromPath(n);this.mutations.push(new _7(i,this.precondition(i)))})),await(async function(n,i){const a=_t(n),s={writes:i.map((l=>zm(a.serializer,l)))};await a.Mo("Commit",a.serializer.databaseId,Nr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw bt();r=Et.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new tt(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Et.min())?Qn.exists(!1):Qn.updateTime(r):Qn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Et.min()))throw new tt(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qn.updateTime(r)}return Qn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e,r,n,i,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=a,this._u=n.maxAttempts,this.t_=new M7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new wie(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Fg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!oF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sie{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=ta.UNAUTHENTICATED,this.clientId=wV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{Ke("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Ke("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=U7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function C5(t,e){t.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await LF(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function gI(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Tie(t);Ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>uI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>uI(e.remoteStore,i))),t._onlineComponents=e}async function Tie(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await C5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Me.FAILED_PRECONDITION||i.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;jm("Error using user provided cache. Falling back to memory cache: "+r),await C5(t,new $m)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),await C5(t,new $m);return t._offlineComponents}async function Q7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),await gI(t,t._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),await gI(t,new Vm))),t._onlineComponents}function Aie(t){return Q7(t).then((e=>e.syncEngine))}function Eie(t){return Q7(t).then((e=>e.datastore))}async function hb(t){const e=await Q7(t),r=e.eventManager;return r.onListen=rie.bind(null,e.syncEngine),r.onUnlisten=iie.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=nie.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=aie.bind(null,e.syncEngine),r}function Nie(t,e,r={}){const n=new ao;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,l,d,h){const p=new X7({next:y=>{p.Za(),s.enqueueAndForget((()=>$7(a,m)));const b=y.docs.has(l);!b&&y.fromCache?h.reject(new tt(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&d&&d.source==="server"?h.reject(new tt(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new F7(Hg(l.path),p,{includeMetadataChanges:!0,_a:!0});return z7(a,m)})(await hb(t),t.asyncQueue,e,r,n))),n.promise}function jie(t,e,r={}){const n=new ao;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,l,d,h){const p=new X7({next:y=>{p.Za(),s.enqueueAndForget((()=>$7(a,m))),y.fromCache&&d.source==="server"?h.reject(new tt(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new F7(l,p,{includeMetadataChanges:!0,_a:!0});return z7(a,m)})(await hb(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iq(t,e,r){if(!r)throw new tt(Me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kie(t,e,r,n){if(e===!0&&n===!0)throw new tt(Me.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function vI(t){if(!dt.isDocumentKey(t))throw new tt(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bI(t){if(dt.isDocumentKey(t))throw new tt(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function i2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt()}function za(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new tt(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=i2(t);throw new tt(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Cie(t,e){if(e<=0)throw new tt(Me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new tt(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kie("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y7{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tt(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new tt(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new kte;switch(n.type){case"firstParty":return new Ite(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new tt(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=yI.get(r);n&&(Ke("ComponentProvider","Removing Datastore"),yI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Yl(this.firestore,e,this._query)}}class Gi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class su extends Yl{constructor(e,r,n){super(e,r,Hg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new dt(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function ir(t,e,...r){if(t=tn(t),iq("collection","path",e),t instanceof Y7){const n=Nr.fromString(e,...r);return bI(n),new su(t,null,n)}{if(!(t instanceof Gi||t instanceof su))throw new tt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Nr.fromString(e,...r));return bI(n),new su(t.firestore,null,n)}}function ht(t,e,...r){if(t=tn(t),arguments.length===1&&(e=wV.newId()),iq("doc","path",e),t instanceof Y7){const n=Nr.fromString(e,...r);return vI(n),new Gi(t,null,new dt(n))}{if(!(t instanceof Gi||t instanceof su))throw new tt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Nr.fromString(e,...r));return vI(n),new Gi(t.firestore,t instanceof su?t.converter:null,new dt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new M7(this,"async_queue_retry"),this.Vu=()=>{const n=Uv();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Uv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Uv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new ao;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!bu(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l})(n);throw Xn("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=B7.createAndSchedule(this,e,r,n,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function _I(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class Ro extends Y7{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new wI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wI(e),this._firestoreClient=void 0,await e}}}function Oie(t,e,r){r||(r="(default)");const n=Ug(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),a=n.getOptions(r);if(Sh(a,e))return i;throw new tt(Me.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new tt(Me.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new tt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Yg(t){if(t._terminated)throw new tt(Me.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Iie(t),t._firestoreClient}function Iie(t){var e,r,n;const i=t._freezeSettings(),a=(function(l,d,h,p){return new ore(l,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,nq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Sie(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(l){const d=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zd(Jn.fromBase64String(e))}catch(r){throw new tt(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new zd(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new tt(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new tt(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new tt(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Wt(this._lat,e._lat)||Wt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rie=/^__.*__$/;class Mie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ql(e,this.data,this.fieldMask,r,this.fieldTransforms):new vf(e,this.data,r,this.fieldTransforms)}}class aq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ql(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function sq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class s2{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new s2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fb(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sq(this.Cu)&&Rie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Pie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||e2(e)}Qu(e,r,n,i=!1){return new s2({Cu:e,methodName:r,qu:n,path:In.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jg(t){const e=t._freezeSettings(),r=e2(t._databaseId);return new Pie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function eE(t,e,r,n,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);rE("Data must be an object, but it was:",s,n);const l=cq(n,s);let d,h;if(a.merge)d=new Ba(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const m of a.mergeFields){const y=eA(e,m,r);if(!s.contains(y))throw new tt(Me.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);dq(p,y)||p.push(y)}d=new Ba(p),h=s.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=s.fieldTransforms;return new Mie(new qi(l),d,h)}class o2 extends a2{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof o2}}function Die(t,e,r){return new s2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class tE extends a2{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Die(this,e,!0),n=this.Ku.map((a=>wf(a,r))),i=new Dd(n);return new iF(e.path,i)}isEqual(e){return e instanceof tE&&Sh(this.Ku,e.Ku)}}function oq(t,e,r,n){const i=t.Qu(1,e,r);rE("Data must be an object, but it was:",i,n);const a=[],s=qi.empty();Jd(n,((d,h)=>{const p=nE(e,d,r);h=tn(h);const m=i.Nu(p);if(h instanceof o2)a.push(p);else{const y=wf(h,m);y!=null&&(a.push(p),s.set(p,y))}}));const l=new Ba(a);return new aq(s,l,i.fieldTransforms)}function lq(t,e,r,n,i,a){const s=t.Qu(1,e,r),l=[eA(e,n,r)],d=[i];if(a.length%2!=0)throw new tt(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)l.push(eA(e,a[y])),d.push(a[y+1]);const h=[],p=qi.empty();for(let y=l.length-1;y>=0;--y)if(!dq(h,l[y])){const b=l[y];let T=d[y];T=tn(T);const S=s.Nu(b);if(T instanceof o2)h.push(b);else{const w=wf(T,S);w!=null&&(h.push(b),p.set(b,w))}}const m=new Ba(h);return new aq(p,m,s.fieldTransforms)}function Lie(t,e,r,n=!1){return wf(r,t.Qu(n?4:3,e))}function wf(t,e){if(uq(t=tn(t)))return rE("Unsupported field value:",e,t),cq(t,e);if(t instanceof a2)return(function(n,i){if(!sq(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const l of n){let d=wf(l,i.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),s++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=tn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tre(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Rn.fromDate(n);return{timestampValue:Ch(i.serializer,a)}}if(n instanceof Rn){const a=new Rn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ch(i.serializer,a)}}if(n instanceof Z7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof zd)return{bytesValue:dF(i.serializer,n._byteString)};if(n instanceof Gi){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:N7(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof J7)return(function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw l.Bu("VectorValues must only contain numeric values.");return w7(l.serializer,d)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${i2(n)}`)})(t,e)}function cq(t,e){const r={};return RV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jd(t,((n,i)=>{const a=wf(i,e.Mu(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function uq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rn||t instanceof Z7||t instanceof zd||t instanceof Gi||t instanceof a2||t instanceof J7)}function rE(t,e,r){if(!uq(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=i2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function eA(t,e,r){if((e=tn(e))instanceof Zg)return e._internalPath;if(typeof e=="string")return nE(t,e);throw fb("Field path arguments must be of type string or ",t,!1,void 0,r)}const Bie=new RegExp("[~\\*/\\[\\]]");function nE(t,e,r){if(e.search(Bie)>=0)throw fb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Zg(...e.split("."))._internalPath}catch{throw fb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function fb(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(a||s)&&(d+=" (found",a&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new tt(Me.INVALID_ARGUMENT,l+t+d)}function dq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(l2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Uie extends pb{data(){return super.data()}}function l2(t,e){return typeof e=="string"?nE(t,e):e instanceof Zg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new tt(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iE{}class aE extends iE{}function kn(t,e,...r){let n=[];e instanceof iE&&n.push(e),n=n.concat(r),(function(a){const s=a.filter((d=>d instanceof sE)).length,l=a.filter((d=>d instanceof c2)).length;if(s>1||s>0&&l>0)throw new tt(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class c2 extends aE{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new c2(e,r,n)}_apply(e){const r=this._parse(e);return fq(e._query,r),new Yl(e.firestore,e.converter,$T(e._query,r))}_parse(e){const r=Jg(e.firestore);return(function(a,s,l,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new tt(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){TI(m,p);const b=[];for(const T of m)b.push(SI(d,a,T));y={arrayValue:{values:b}}}else y=SI(d,a,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||TI(m,p),y=Lie(l,s,m,p==="in"||p==="not-in");return yr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ln(t,e,r){const n=e,i=l2("where",t);return c2._create(i,n,r)}class sE extends iE{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new sE(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:qr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let s=i;const l=a.getFlattenedFilters();for(const d of l)fq(s,d),s=$T(s,d)})(e._query,r),new Yl(e.firestore,e.converter,$T(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oE extends aE{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new oE(e,r)}_apply(e){const r=(function(i,a,s){if(i.startAt!==null)throw new tt(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new tt(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dm(a,s)})(e._query,this._field,this._direction);return new Yl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new yf(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function Op(t,e="asc"){const r=e,n=l2("orderBy",t);return oE._create(n,r)}class lE extends aE{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new lE(e,r,n)}_apply(e){return new Yl(e.firestore,e.converter,ib(e._query,this._limit,this._limitType))}}function ed(t){return Cie("limit",t),lE._create("limit",t,"F")}function SI(t,e,r){if(typeof(r=tn(r))=="string"){if(r==="")throw new tt(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GV(e)&&r.indexOf("/")!==-1)throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Nr.fromString(r));if(!dt.isDocumentKey(n))throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Mm(t,new dt(n))}if(r instanceof Gi)return Mm(t,r._key);throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i2(r)}.`)}function TI(t,e){if(!Array.isArray(t)||t.length===0)throw new tt(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fq(t,e){const r=(function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new tt(Me.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new tt(Me.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class pq{convertValue(e,r="none"){switch(Md(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw bt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Jd(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((s=>Tn(s.doubleValue)));return new J7(a)}convertGeoPoint(e){return new Z7(Tn(e.latitude),Tn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=v7(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Im(e));default:return null}}convertTimestamp(e){const r=Ul(e);return new Rn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Nr.fromString(e);Tt(wF(n));const i=new Rd(n.get(1),n.get(3)),a=new dt(n.popFirst(5));return i.isEqual(r)||Xn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class zie extends pq{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uE extends pb{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(l2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class zv extends uE{data(e={}){return super.data(e)}}class mq{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new ah(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new zv(this._firestore,this._userDataWriter,n.key,n,new ah(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new tt(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const d=new zv(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ah(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const d=new zv(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ah(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:$ie(l.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function $ie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(t){t=za(t,Gi);const e=za(t.firestore,Ro);return Nie(Yg(e),t._key).then((r=>gq(e,t,r)))}class u2 extends pq{constructor(e){super(),this.firestore=e}convertBytes(e){return new zd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,r)}}function Ip(t){t=za(t,Yl);const e=za(t.firestore,Ro),r=Yg(e),n=new u2(e);return hq(t._query),jie(r,t._query).then((i=>new mq(e,n,t,i)))}function Zi(t,e,r){t=za(t,Gi);const n=za(t.firestore,Ro),i=cE(t.converter,e,r);return d2(n,[eE(Jg(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Qn.none())])}function Dr(t,e,r,...n){t=za(t,Gi);const i=za(t.firestore,Ro),a=Jg(i);let s;return s=typeof(e=tn(e))=="string"||e instanceof Zg?lq(a,"updateDoc",t._key,e,r,n):oq(a,"updateDoc",t._key,e),d2(i,[s.toMutation(t._key,Qn.exists(!0))])}function Oa(t){return d2(za(t.firestore,Ro),[new Kg(t._key,Qn.none())])}function K0(t,e){const r=za(t.firestore,Ro),n=ht(t),i=cE(t.converter,e);return d2(r,[eE(Jg(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Qn.exists(!1))]).then((()=>n))}function Gn(t,...e){var r,n,i;t=tn(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_I(e[s])||(a=e[s],s++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(_I(e[s])){const m=e[s];e[s]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[s+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[s+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let d,h,p;if(t instanceof Gi)h=za(t.firestore,Ro),p=Hg(t._key.path),d={next:m=>{e[s]&&e[s](gq(h,t,m))},error:e[s+1],complete:e[s+2]};else{const m=za(t,Yl);h=za(m.firestore,Ro),p=m._query;const y=new u2(h);d={next:b=>{e[s]&&e[s](new mq(h,y,m,b))},error:e[s+1],complete:e[s+2]},hq(t._query)}return(function(y,b,T,S){const w=new X7(S),N=new F7(b,w,T);return y.asyncQueue.enqueueAndForget((async()=>z7(await hb(y),N))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>$7(await hb(y),N)))}})(Yg(h),p,l,d)}function d2(t,e){return(function(n,i){const a=new ao;return n.asyncQueue.enqueueAndForget((async()=>sie(await Aie(n),i,a))),a.promise})(Yg(t),e)}function gq(t,e,r){const n=r.docs.get(e._key),i=new u2(t);return new uE(t,i,e._key,n,new ah(r.hasPendingWrites,r.fromCache),e.converter)}class Vie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=Gie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function Fie(t){return new Vie(t)}class qie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vm.provider,this._offlineComponentProvider={build:r=>new rq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Hie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Vm.provider,this._offlineComponentProvider={build:r=>new xie(r,e==null?void 0:e.cacheSizeBytes)}}}function Gie(t){return new qie(void 0)}function Kie(){return new Hie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie={maxAttempts:5};function Rp(t,e){if((t=tn(t)).firestore!==e)throw new tt(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=Jg(r)}get(r){const n=Rp(r,this._firestore),i=new zie(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return bt();const s=a[0];if(s.isFoundDocument())return new pb(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new pb(this._firestore,i,n._key,null,n.converter);throw bt()}))}set(r,n,i){const a=Rp(r,this._firestore),s=cE(a.converter,n,i),l=eE(this._dataReader,"Transaction.set",a._key,s,a.converter!==null,i);return this._transaction.set(a._key,l),this}update(r,n,i,...a){const s=Rp(r,this._firestore);let l;return l=typeof(n=tn(n))=="string"||n instanceof Zg?lq(this._dataReader,"Transaction.update",s._key,n,i,a):oq(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,l),this}delete(r){const n=Rp(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Rp(e,this._firestore),n=new u2(this._firestore);return super.get(e).then((i=>new uE(this._firestore,n,r._key,i._document,new ah(!1,!1),r.converter)))}}function O5(t,e,r){t=za(t,Ro);const n=Object.assign(Object.assign({},Wie),r);return(function(a){if(a.maxAttempts<1)throw new tt(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,s,l){const d=new ao;return a.asyncQueue.enqueueAndForget((async()=>{const h=await Eie(a);new _ie(a.asyncQueue,h,l,s,d).au()})),d.promise})(Yg(t),(i=>e(new Xie(t,i))),n)}function Qie(...t){return new tE("arrayUnion",t)}(function(e,r=!0){(function(i){gf=i})(Zd),cu(new Dl("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),l=new Ro(new Cte(n.getProvider("auth-internal")),new Mte(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new tt(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rd(h.options.projectId,p)})(s,i),s);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),Cs(gO,"4.7.3",e),Cs(gO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq="firebasestorage.googleapis.com",vq="storageBucket",Yie=120*1e3,Zie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends lo{constructor(e,r,n=0){super(I5(e),`Firebase Storage: ${r} (${I5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return I5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $n;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($n||($n={}));function I5(t){return"storage/"+t}function dE(){const t="An unknown error occurred, please check the error payload for server response.";return new Vn($n.UNKNOWN,t)}function Jie(t){return new Vn($n.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function eae(t){return new Vn($n.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function tae(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Vn($n.UNAUTHENTICATED,t)}function rae(){return new Vn($n.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function nae(t){return new Vn($n.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function iae(){return new Vn($n.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aae(){return new Vn($n.CANCELED,"User canceled the upload/download.")}function sae(t){return new Vn($n.INVALID_URL,"Invalid URL '"+t+"'.")}function oae(t){return new Vn($n.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lae(){return new Vn($n.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vq+"' property when initializing the app?")}function cae(){return new Vn($n.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function uae(){return new Vn($n.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function dae(t){return new Vn($n.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tA(t){return new Vn($n.INVALID_ARGUMENT,t)}function bq(){return new Vn($n.APP_DELETED,"The Firebase app was deleted.")}function hae(t){return new Vn($n.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function um(t,e){return new Vn($n.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Mp(t){throw new Vn($n.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=ss.makeFromUrl(e,r)}catch{return new ss(e,"")}if(n.path==="")return n;throw oae(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),d={bucket:1,path:3};function h($){$.path_=decodeURIComponent($.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${p}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},S=r===yq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",N=new RegExp(`^https?://${S}/${i}/${w}`,"i"),k=[{regex:l,indices:d,postModify:a},{regex:b,indices:T,postModify:h},{regex:N,indices:{bucket:1,path:2},postModify:h}];for(let $=0;$<k.length;$++){const I=k[$],L=I.regex.exec(e);if(L){const E=L[I.indices.bucket];let A=L[I.indices.path];A||(A=""),n=new ss(E,A),I.postModify(n);break}}if(n==null)throw sae(e);return n}}class fae{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(t,e,r){let n=1,i=null,a=null,s=!1,l=0;function d(){return l===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){i=setTimeout(()=>{i=null,t(b,d())},w)}function y(){a&&clearTimeout(a)}function b(w,...N){if(h){y();return}if(w){y(),p.call(null,w,...N);return}if(d()||s){y(),p.call(null,w,...N);return}n<64&&(n*=2);let k;l===1?(l=2,k=0):k=(n+Math.random())*1e3,m(k)}let T=!1;function S(w){T||(T=!0,y(),!h&&(i!==null?(w||(l=2),clearTimeout(i),m(0)):w||(l=1)))}return m(0),a=setTimeout(()=>{s=!0,S(!0)},r),S}function mae(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gae(t){return t!==void 0}function yae(t){return typeof t=="object"&&!Array.isArray(t)}function hE(t){return typeof t=="string"||t instanceof String}function AI(t){return fE()&&t instanceof Blob}function fE(){return typeof Blob<"u"}function EI(t,e,r,n){if(n<e)throw tA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw tA(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function xq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var Nd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Nd||(Nd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vae(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bae{constructor(e,r,n,i,a,s,l,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Qy(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=l=>{const d=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const l=a.getErrorCode()===Nd.NO_ERROR,d=a.getStatus();if(!l||vae(d,this.additionalRetryCodes_)&&this.retry){const p=a.getErrorCode()===Nd.ABORT;n(!1,new Qy(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new Qy(h,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(l,l.getResponse());gae(d)?a(d):a()}catch(d){s(d)}else if(l!==null){const d=dE();d.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,d)):s(d)}else if(i.canceled){const d=this.appDelete_?bq():aae();s(d)}else{const d=iae();s(d)}};this.canceled_?r(!1,new Qy(!1,null,!0)):this.backoffId_=pae(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mae(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qy{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function xae(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wae(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _ae(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sae(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Tae(t,e,r,n,i,a,s=!0){const l=xq(t.urlParams),d=t.url+l,h=Object.assign({},t.headers);return _ae(h,e),xae(h,r),wae(h,a),Sae(h,n),new bae(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aae(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Eae(...t){const e=Aae();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(fE())return new Blob(t);throw new Vn($n.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nae(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jae(t){if(typeof atob>"u")throw dae("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class R5{constructor(e,r){this.data=e,this.contentType=r||null}}function kae(t,e){switch(t){case To.RAW:return new R5(wq(e));case To.BASE64:case To.BASE64URL:return new R5(_q(t,e));case To.DATA_URL:return new R5(Oae(e),Iae(e))}throw dE()}function wq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Cae(t){let e;try{e=decodeURIComponent(t)}catch{throw um(To.DATA_URL,"Malformed data URL.")}return wq(e)}function _q(t,e){switch(t){case To.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw um(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case To.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw um(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=jae(e)}catch(i){throw i.message.includes("polyfill")?i:um(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class Sq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw um(To.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Rae(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Oae(t){const e=new Sq(t);return e.base64?_q(To.BASE64,e.rest):Cae(e.rest)}function Iae(t){return new Sq(t).contentType}function Rae(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,r){let n=0,i="";AI(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(AI(this.data_)){const n=this.data_,i=Nae(n,e,r);return i===null?null:new Gc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Gc(n,!0)}}static getBlob(...e){if(fE()){const r=e.map(n=>n instanceof Gc?n.data_:n);return new Gc(Eae.apply(null,r))}else{const r=e.map(s=>hE(s)?kae(To.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let l=0;l<s.length;l++)i[a++]=s[l]}),new Gc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t){let e;try{e=JSON.parse(t)}catch{return null}return yae(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mae(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Pae(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Aq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dae(t,e){return e}class ua{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||Dae}}let Yy=null;function Lae(t){return!hE(t)||t.length<2?t:Aq(t)}function Eq(){if(Yy)return Yy;const t=[];t.push(new ua("bucket")),t.push(new ua("generation")),t.push(new ua("metageneration")),t.push(new ua("name","fullPath",!0));function e(a,s){return Lae(s)}const r=new ua("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new ua("size");return i.xform=n,t.push(i),t.push(new ua("timeCreated")),t.push(new ua("updated")),t.push(new ua("md5Hash",null,!0)),t.push(new ua("cacheControl",null,!0)),t.push(new ua("contentDisposition",null,!0)),t.push(new ua("contentEncoding",null,!0)),t.push(new ua("contentLanguage",null,!0)),t.push(new ua("contentType",null,!0)),t.push(new ua("metadata","customMetadata",!0)),Yy=t,Yy}function Bae(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new ss(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function Uae(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return Bae(n,t),n}function Nq(t,e,r){const n=Tq(e);return n===null?null:Uae(t,n,r)}function zae(t,e,r,n){const i=Tq(e);if(i===null||!hE(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+s(p)+"/o/"+s(m),b=h2(y,r,n),T=xq({alt:"media",token:h});return b+T})[0]}function $ae(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class pE{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jq(t){if(!t)throw dE()}function Vae(t,e){function r(n,i){const a=Nq(t,i,e);return jq(a!==null),a}return r}function Fae(t,e){function r(n,i){const a=Nq(t,i,e);return jq(a!==null),zae(a,i,t.host,t._protocol)}return r}function kq(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=rae():i=tae():r.getStatus()===402?i=eae(t.bucket):r.getStatus()===403?i=nae(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function Cq(t){const e=kq(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=Jie(t.path)),a.serverResponse=i.serverResponse,a}return r}function qae(t,e,r){const n=e.fullServerUrl(),i=h2(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,l=new pE(i,a,Fae(t,r),s);return l.errorHandler=Cq(e),l}function Hae(t,e){const r=e.fullServerUrl(),n=h2(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function s(d,h){}const l=new pE(n,i,s,a);return l.successCodes=[200,204],l.errorHandler=Cq(e),l}function Gae(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Kae(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=Gae(null,e)),n}function Wae(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let $=0;$<2;$++)k=k+Math.random().toString().slice(2);return k}const d=l();s["Content-Type"]="multipart/related; boundary="+d;const h=Kae(e,n,i),p=$ae(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",b=Gc.getBlob(m,n,y);if(b===null)throw cae();const T={name:h.fullPath},S=h2(a,t.host,t._protocol),w="POST",N=t.maxUploadRetryTime,C=new pE(S,w,Vae(t,r),N);return C.urlParams=T,C.headers=s,C.body=b.uploadData(),C.errorHandler=kq(e),C}class Xae{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Nd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Nd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Nd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw Mp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Qae extends Xae{initXhr(){this.xhr_.responseType="text"}}function mE(){return new Qae}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r){this._service=e,r instanceof ss?this._location=r:this._location=ss.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new $d(e,r)}get root(){const e=new ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Aq(this._location.path)}get storage(){return this._service}get parent(){const e=Mae(this._location.path);if(e===null)return null;const r=new ss(this._location.bucket,e);return new $d(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw hae(e)}}function Yae(t,e,r){t._throwIfRoot("uploadBytes");const n=Wae(t.storage,t._location,Eq(),new Gc(e,!0),r);return t.storage.makeRequestWithTokens(n,mE).then(i=>({metadata:i,ref:t}))}function Zae(t){t._throwIfRoot("getDownloadURL");const e=qae(t.storage,t._location,Eq());return t.storage.makeRequestWithTokens(e,mE).then(r=>{if(r===null)throw uae();return r})}function Jae(t){t._throwIfRoot("deleteObject");const e=Hae(t.storage,t._location);return t.storage.makeRequestWithTokens(e,mE)}function ese(t,e){const r=Pae(t._location.path,e),n=new ss(t._location.bucket,r);return new $d(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(t){return/^[A-Za-z]+:\/\//.test(t)}function rse(t,e){return new $d(t,e)}function Oq(t,e){if(t instanceof gE){const r=t;if(r._bucket==null)throw lae();const n=new $d(r,r._bucket);return e!=null?Oq(n,e):n}else return e!==void 0?ese(t,e):t}function nse(t,e){if(e&&tse(e)){if(t instanceof gE)return rse(t,e);throw tA("To use ref(service, url), the first argument must be a Storage instance.")}else return Oq(t,e)}function NI(t,e){const r=e==null?void 0:e[vq];return r==null?null:ss.makeFromBucketSpec(r,t)}function ise(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:aZ(i,t.app.options.projectId))}class gE{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=yq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yie,this._maxUploadRetryTime=Zie,this._requests=new Set,i!=null?this._bucket=ss.makeFromBucketSpec(i,this._host):this._bucket=NI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ss.makeFromBucketSpec(this._url,e):this._bucket=NI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $d(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new fae(bq());{const s=Tae(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const jI="@firebase/storage",kI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq="storage";function rA(t,e,r){return t=tn(t),Yae(t,e,r)}function mb(t){return t=tn(t),Zae(t)}function ase(t){return t=tn(t),Jae(t)}function dm(t,e){return t=tn(t),nse(t,e)}function sse(t=t7(),e){t=tn(t);const n=Ug(t,Iq).getImmediate({identifier:e}),i=N$("storage");return i&&ose(n,...i),n}function ose(t,e,r,n={}){ise(t,e,r,n)}function lse(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new gE(r,n,i,e,Zd)}function cse(){cu(new Dl(Iq,lse,"PUBLIC").setMultipleInstances(!0)),Cs(jI,kI,""),Cs(jI,kI,"esm2017")}cse();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const use="type.googleapis.com/google.protobuf.Int64Value",dse="type.googleapis.com/google.protobuf.UInt64Value";function Rq(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function nA(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nA(e));if(typeof t=="function"||typeof t=="object")return Rq(t,e=>nA(e));throw new Error("Data cannot be encoded in JSON: "+t)}function gb(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case use:case dse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>gb(e)):typeof t=="function"||typeof t=="object"?Rq(t,e=>gb(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ph extends lo{constructor(e,r,n){super(`${yE}/${e}`,r||""),this.details=n}}function hse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fse(t,e){let r=hse(t),n=r,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!CI[s])return new ph("internal","internal");r=CI[s],n=s}const l=a.message;typeof l=="string"&&(n=l),i=a.details,i!==void 0&&(i=gb(i))}}catch{}return r==="ok"?null:new ph(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="us-central1";function mse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new ph("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class gse{constructor(e,r,n,i,a=iA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new pse(r,n,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=iA}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function yse(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function vse(t,e,r){return(n=>xse(t,e,n,{}))}async function bse(t,e,r,n){r["Content-Type"]="application/json";let i;try{i=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function xse(t,e,r,n){const i=t._url(e);return wse(t,i,r,n)}async function wse(t,e,r,n){r=nA(r);const i={data:r},a={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const l=n.timeout||7e4,d=mse(l),h=await Promise.race([bse(e,i,a,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new ph("cancelled","Firebase Functions instance was deleted.");const p=fse(h.status,h.json);if(p)throw p;if(!h.json)throw new ph("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new ph("internal","Response is missing data field.");return{data:gb(m)}}const OI="@firebase/functions",II="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _se="auth-internal",Sse="app-check-internal",Tse="messaging-internal";function Ase(t,e){const r=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),s=n.getProvider(_se),l=n.getProvider(Tse),d=n.getProvider(Sse);return new gse(a,s,l,d,i,t)};cu(new Dl(yE,r,"PUBLIC").setMultipleInstances(!0)),Cs(OI,II,e),Cs(OI,II,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ese(t=t7(),e=iA){const n=Ug(tn(t),yE).getImmediate({identifier:e}),i=N$("functions");return i&&Nse(n,...i),n}function Nse(t,e,r){yse(tn(t),e,r)}function Hr(t,e,r){return vse(tn(t),e)}Ase(fetch.bind(self));const Mq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},jse=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of jse)if(!Mq[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const f2=M$(Mq),aA=pV(f2),kse=new bl,Ue=Oie(f2,{localCache:Fie({tabManager:Kie()})}),hm=sse(f2),Gr=Ese(f2),Cse=Hr(Gr,"awardXP"),Ose=Hr(Gr,"acceptQuest"),Ise=Hr(Gr,"deployMission"),Rse=Hr(Gr,"resolveQuest"),Mse=Hr(Gr,"equipItem"),Pse=Hr(Gr,"unequipItem"),Dse=Hr(Gr,"disenchantItem"),Lse=Hr(Gr,"craftItem"),Bse=Hr(Gr,"adminUpdateInventory"),Use=Hr(Gr,"adminUpdateEquipped"),zse=Hr(Gr,"submitEngagement"),$se=Hr(Gr,"sendClassMessage");Hr(Gr,"uploadQuestionBank");const Pq=Hr(Gr,"awardQuestionXP"),Vse=Hr(Gr,"updateStreak"),Fse=Hr(Gr,"claimDailyLogin"),qse=Hr(Gr,"spinFortuneWheel"),Hse=Hr(Gr,"unlockSkill"),Gse=Hr(Gr,"addSocket"),Kse=Hr(Gr,"socketGem"),Wse=Hr(Gr,"dealBossDamage"),Xse=Hr(Gr,"answerBossQuiz"),Qse=Hr(Gr,"createParty"),Yse=Hr(Gr,"joinParty"),Zse=Hr(Gr,"completeTutoring"),Jse=Hr(Gr,"claimKnowledgeLoot"),eoe=Hr(Gr,"purchaseCosmetic"),toe=Hr(Gr,"claimDailyChallenge"),roe=Hr(Gr,"dismissAlert"),yb=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),cd={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const noe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Dq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ioe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aoe=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...l},d)=>M.createElement("svg",{ref:d,...ioe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Dq("lucide",i),...l},[...s.map(([h,p])=>M.createElement(h,p)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=(t,e)=>{const r=M.forwardRef(({className:n,...i},a)=>M.createElement(aoe,{ref:a,iconNode:e,className:Dq(`lucide-${noe(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=$e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const soe=$e("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ooe=$e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const loe=$e("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const coe=$e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uoe=$e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=$e("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=$e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=$e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=$e("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=$e("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=$e("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const doe=$e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=$e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=$e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hoe=$e("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=$e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=$e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const foe=$e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=$e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=$e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=$e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=$e("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const poe=$e("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=$e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=$e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=$e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=$e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const moe=$e("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=$e("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=$e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const goe=$e("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yoe=$e("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const voe=$e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const boe=$e("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=$e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xoe=$e("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=$e("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=$e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const woe=$e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=$e("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=$e("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _oe=$e("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Soe=$e("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=$e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Toe=$e("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aoe=$e("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eoe=$e("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=$e("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Noe=$e("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=$e("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=$e("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=$e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=$e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=$e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const koe=$e("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=$e("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=$e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=$e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=$e("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=$e("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=$e("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=$e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=$e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=$e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=$e("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=$e("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=$e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=$e("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=$e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=$e("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=$e("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=$e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=$e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=$e("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=$e("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=$e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=$e("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=$e("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=$e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=$e("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=$e("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=$e("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=$e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=$e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=$e("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=$e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=$e("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=$e("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=$e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=$e("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=$e("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=$e("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=$e("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=$e("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=$e("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=$e("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=$e("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=$e("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=$e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=$e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=$e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=$e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=$e("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=$e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=$e("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=$e("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=$e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=$e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=$e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=$e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=$e("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=$e("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=$e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=$e("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Yoe="kellporter2@paps.net",Xq="Mr. Porter",Zoe=[{name:"Dashboard",icon:c.jsx(joe,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:c.jsx(m2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:c.jsx(pu,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:c.jsx(Mo,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:c.jsx(_E,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:c.jsx(vb,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:c.jsx(Mo,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:c.jsx(fu,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:c.jsx(Soe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:c.jsx(yoe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:c.jsx(fu,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:c.jsx(Dh,{className:"w-5 h-5"}),role:"STUDENT"}],qI=new Set,Ws=(t,e,r)=>qI.has(t)?()=>{}:Gn(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&qI.add(t)}),Be={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ws("xp_events",ir(Ue,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Zi(ht(Ue,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Oa(ht(Ue,"xp_events",t))},subscribeToQuests:t=>Ws("quests",ir(Ue,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Zi(ht(Ue,"quests",t.id),t)},deleteQuest:async t=>{await Oa(ht(Ue,"quests",t))},acceptQuest:async(t,e)=>{await Ose({questId:e})},deployMission:async(t,e)=>{await Ise({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Rse({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Be.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Mse({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Pse({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Dse({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Lse({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Bse({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Use({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ht(Ue,"users",t);r?await Dr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await Dr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const i=new Date(t.mutedUntil);if(i>new Date)throw new Error(`You are muted until ${i.toLocaleTimeString()}.`)}await $se({content:e,channelId:r,classType:n})}catch(i){throw console.error("Error sending message:",i),i}},toggleReaction:async(t,e,r)=>{const n=ht(Ue,"class_messages",t);await O5(Ue,async i=>{const a=await i.get(n);if(!a.exists())return;const l={...a.data().reactions||{}},d=(l[e]||[]).includes(r);Object.keys(l).forEach(h=>{l[h]=(l[h]||[]).filter(p=>p!==r),l[h].length===0&&delete l[h]}),d||(l[e]||(l[e]=[]),l[e].push(r)),i.update(n,{reactions:l})})},togglePersonalPin:async(t,e)=>{const r=ht(Ue,"class_messages",t);await O5(Ue,async n=>{const i=await n.get(r);if(!i.exists())return;const s=[...i.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(l=>l!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=ht(Ue,"class_messages",t);await Dr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Oa(ht(Ue,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=kn(ir(Ue,"class_messages"),Ln("isFlagged","==",!0),ed(50));return Gn(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ht(Ue,"class_messages",t);await Dr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Be.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await Dr(ht(Ue,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},subscribeToChannelMessages:(t,e)=>{const r=kn(ir(Ue,"class_messages"),Ln("channelId","==",t),ed(100));return Gn(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime()),e(i)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:t=>{const e=kn(ir(Ue,"conversations"),Op("lastMessageAt","desc"));return Gn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=kn(ir(Ue,`conversations/${t}/messages`),Op("timestamp","asc"));return Gn(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Ji.ADMIN?Xq:e.name,content:r,timestamp:new Date().toISOString()};await K0(ir(Ue,`conversations/${t}/messages`),n),await Dr(ht(Ue,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await Dr(ht(Ue,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=kn(ir(Ue,"chat_flags"),Ln("isResolved","==",!1));return Gn(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await Dr(ht(Ue,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=kn(ir(Ue,"chat_flags"),Ln("messageId","==",t),Ln("isResolved","==",!1)),n=(await Ip(e)).docs.map(i=>Dr(i.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=kn(ir(Ue,"evidence"),Ln("studentId","==",t),Ln("weekId","==",e));return Gn(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));r(a)},i=>console.error("Evidence subscription error:",i))},uploadEvidence:async t=>{await Zi(ht(Ue,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const i=dm(hm,n.imageUrl);return ase(i).catch(a=>console.warn("File missing:",a))});await Promise.all(e);const r=t.map(n=>Oa(ht(Ue,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Zi(ht(Ue,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ht(Ue,"users",t);await Dr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await Dr(ht(Ue,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await Dr(ht(Ue,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=ir(Ue,"users");return Gn(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,...a}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=ir(Ue,"assignments");return Gn(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,title:a.title,description:a.description,classType:a.classType,status:a.status,unit:a.unit||"Unassigned Unit",category:a.category||"Supplemental",htmlContent:a.htmlContent,contentUrl:a.contentUrl,resources:a.resources||[],publicComments:(a.publicComments||[]).sort((s,l)=>new Date(l.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:a.dueDate}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=kn(ir(Ue,"submissions"),Op("submittedAt","desc"),ed(200));return Gn(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId,userName:a.userName,assignmentId:a.assignmentId,assignmentTitle:a.assignmentTitle,metrics:a.metrics||yb(),submittedAt:a.submittedAt,status:a.status,score:a.score,hasUnreadAdmin:a.hasUnreadAdmin||!1,hasUnreadStudent:a.hasUnreadStudent||!1,isPinned:a.isPinned||!1,isArchived:a.isArchived||!1,privateComments:(a.privateComments||[]).sort((s,l)=>new Date(l.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=kn(ir(Ue,"submissions"),Ln("userId","==",t),ed(50));return Gn(r,n=>{const i=n.docs.map(a=>{const s=a.data();return{id:a.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||yb(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((l,d)=>new Date(d.timestamp).getTime()-new Date(l.timestamp).getTime())}}).sort((a,s)=>new Date(s.submittedAt||"").getTime()-new Date(a.submittedAt||"").getTime());e(i)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=ir(Ue,"allowed_emails");return Gn(e,r=>{const n=r.docs.map(i=>({email:i.id,classType:i.data().classType,classTypes:i.data().classTypes||[i.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=ir(Ue,"class_configs");return Gn(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null};t.id?await Zi(ht(Ue,"assignments",t.id),e,{merge:!0}):await K0(ir(Ue,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await Dr(ht(Ue,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Oa(ht(Ue,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ht(Ue,"allowed_emails",t),n=await Vi(r),i=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],a=Array.from(new Set([...i,e]));await Zi(r,{classType:e,classTypes:a});const s=kn(ir(Ue,"users"),Ln("email","==",t)),l=await Ip(s);await Promise.all(l.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await Dr(ht(Ue,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await Dr(ht(Ue,"allowed_emails",t),{section:e});const r=kn(ir(Ue,"users"),Ln("email","==",t)),n=await Ip(r);await Promise.all(n.docs.map(async i=>{await Dr(ht(Ue,"users",i.id),{section:e})}))}catch(r){console.error(r)}},removeFromWhitelist:async t=>{try{await Oa(ht(Ue,"allowed_emails",t));const e=kn(ir(Ue,"users"),Ln("email","==",t)),r=await Ip(e);await Promise.all(r.docs.map(async n=>{await Dr(ht(Ue,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Vi(r);if(n.exists()){const i=n.data(),a=i.enrolledClasses||(i.classType?[i.classType]:[]),s=Array.from(new Set([...a,e]));await Dr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const l=i.email;if(l){const d=await Vi(ht(Ue,"allowed_emails",l)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await Zi(ht(Ue,"allowed_emails",l),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Vi(ht(Ue,"users",t));if(e.exists()){const r=e.data().email;await Oa(ht(Ue,"allowed_emails",r))}await Oa(ht(Ue,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Zi(ht(Ue,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Vi(r);if(!n.exists())return;const a=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,a&&await Oa(ht(Ue,"allowed_emails",a))):(s.isWhitelisted=!0,a&&await Zi(ht(Ue,"allowed_emails",a),{classType:e[0],classTypes:e})),await Dr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ht(Ue,"users",t),n=await Vi(r);if(n.exists()){const i=n.data().enrolledClasses||[],a=Array.from(new Set([...i,e]));await Dr(r,{classType:e,enrolledClasses:a,isWhitelisted:!0});const s=n.data().email;s&&await Zi(ht(Ue,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await Dr(ht(Ue,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Cse({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,i,a)=>(await zse({assignmentId:r,assignmentTitle:n,userName:e,metrics:i,classType:a})).data,subscribeToLeaderboard:t=>{const e=kn(ir(Ue,"users"),Ln("role","==","STUDENT"));return Gn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Zi(ht(Ue,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Oa(ht(Ue,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=dm(hm,`resources/${e}_${t.name}`);return await rA(r,t),await mb(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=dm(hm,`resources/html/${e}_${t.name}`);return await rA(r,t),await mb(r)},subscribeToAnnouncements:t=>{const e=kn(ir(Ue,"announcements"),Op("createdAt","desc"),ed(20));return Ws("announcements",e,r=>{const n=new Date,i=r.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||new Date(a.expiresAt)>n);t(i)})},createAnnouncement:async t=>{await K0(ir(Ue,"announcements"),t)},deleteAnnouncement:async t=>{await Oa(ht(Ue,"announcements",t))},dismissAnnouncement:async(t,e)=>{await Dr(ht(Ue,"users",t),{"gamification.dismissedAnnouncements":Qie(e)})},subscribeToNotifications:(t,e)=>{const r=kn(ir(Ue,"notifications"),Ln("userId","==",t),Op("timestamp","desc"),ed(50));return Gn(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await Dr(ht(Ue,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=kn(ir(Ue,"notifications"),Ln("userId","==",t),Ln("isRead","==",!1)),n=(await Ip(e)).docs.map(i=>Dr(i.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await K0(ir(Ue,"notifications"),t)},notifyUsers:async(t,e,r,n,i)=>{const a=t.map(s=>K0(ir(Ue,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:i||{}}));await Promise.all(a)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await Dr(ht(Ue,"users",t),n)},toggleCodenameLock:async(t,e)=>{await Dr(ht(Ue,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await Vse({})).data,claimDailyLogin:async()=>(await Fse({})).data,spinFortuneWheel:async t=>(await qse({classType:t})).data,unlockSkill:async(t,e)=>(await Hse({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await Gse({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await Kse({itemId:t,gemId:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=kn(ir(Ue,"boss_encounters"),Ln("isActive","==",!0));return Ws("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=ir(Ue,"boss_encounters");return Gn(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=ht(Ue,"boss_encounters",t.id);await Zi(e,t)},toggleBossActive:async(t,e)=>{const r=ht(Ue,"boss_encounters",t);await Dr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=ht(Ue,"boss_encounters",t);await Oa(e)},subscribeToBossShards:(t,e)=>{const r=ir(Ue,`boss_encounters/${t}/shards`);return Gn(r,n=>{let i=0;n.forEach(a=>{i+=a.data().damageDealt||0}),e(i)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=ir(Ue,`boss_encounters/${t}/damage_log`);return Gn(r,n=>{const i=n.docs.map(a=>a.data());e(i)},()=>{})},dealBossDamage:async(t,e,r)=>(await Wse({bossId:t,damage:e,userName:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=kn(ir(Ue,"boss_quizzes"),Ln("isActive","==",!0));return Ws("boss_quizzes",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.classType===t||a.classType==="GLOBAL");e(i)})},subscribeToBossQuizShards:(t,e)=>{const r=ir(Ue,`boss_quizzes/${t}/shards`);return Gn(r,n=>{let i=0;n.forEach(a=>{i+=a.data().damageDealt||0}),e(i)},()=>{})},answerBossQuiz:async(t,e,r)=>(await Xse({quizId:t,questionId:e,answer:r})).data,createParty:async(t,e)=>(await Qse({questId:t,userName:e})).data,joinParty:async(t,e)=>(await Yse({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>Gn(ht(Ue,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await K0(ir(Ue,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await Dr(ht(Ue,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},subscribeToTutoringSessions:(t,e)=>{const r=kn(ir(Ue,"tutoring_sessions"),Ln("classType","==",t),ed(50));return Ws("tutoring_sessions",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()),e(i)})},completeTutoring:async(t,e)=>(await Zse({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=kn(ir(Ue,"knowledge_gates"),Ln("isActive","==",!0));return Ws("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Jse({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=kn(ir(Ue,"seasonal_cosmetics"),Ln("isAvailable","==",!0));return Ws("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await eoe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await Dr(ht(Ue,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=kn(ir(Ue,"daily_challenges"),Ln("date","==",e));return Ws("daily_challenges",r,n=>{t(n.docs.map(i=>({id:i.id,...i.data()})))})},claimDailyChallenge:async(t,e)=>(await toe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const i=ht(Ue,"users",t);await O5(Ue,async a=>{var h;const s=await a.get(i);if(!s.exists())return;const l=((h=s.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(l.find(p=>p.challengeId===e)){const p=l.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);a.update(i,{"gamification.activeDailyChallenges":p})}else a.update(i,{"gamification.activeDailyChallenges":[...l,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Vi(ht(Ue,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=kn(ir(Ue,"student_alerts"),Ln("isDismissed","==",!1));return Ws("student_alerts",e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[a.riskLevel]||0)-(s[i.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await roe({alertId:t})},subscribeToStudentBuckets:t=>Ws("student_buckets",ir(Ue,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)})},Qq=M.createContext(null),na=()=>{const t=M.useContext(Qq);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Joe={success:c.jsx(gi,{className:"w-5 h-5 text-green-400 shrink-0"}),error:c.jsx(Rs,{className:"w-5 h-5 text-red-400 shrink-0"}),info:c.jsx(Uq,{className:"w-5 h-5 text-blue-400 shrink-0"})},ele={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},tle=({children:t})=>{const[e,r]=M.useState([]),n=M.useCallback((s,l)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:s,type:l}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),i=M.useCallback(s=>{r(l=>l.filter(d=>d.id!==s))},[]),a={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return c.jsxs(Qq.Provider,{value:a,children:[t,c.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>c.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${ele[s.type]}`,children:[Joe[s.type],c.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),c.jsx("button",{onClick:()=>i(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:c.jsx(hs,{className:"w-4 h-4"})})]},s.id))})]})},rle=()=>{const[t,e]=M.useState(navigator.onLine),[r,n]=M.useState(!1);return M.useEffect(()=>{const i=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{e(!1),n(!1)};return window.addEventListener("online",i),window.addEventListener("offline",a),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}},[]),t&&!r?null:c.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?c.jsxs(c.Fragment,{children:[c.jsx(Qoe,{className:"w-4 h-4"}),"Connection restored"]}):c.jsxs(c.Fragment,{children:[c.jsx(Xoe,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})},Va=({isOpen:t,onClose:e,title:r,children:n,maxWidth:i="max-w-md"})=>(M.useEffect(()=>{const a=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),t?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:c.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${i} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[c.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[c.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:c.jsx(hs,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),nle="/favicon.svg";function _f(){return typeof window<"u"&&"Notification"in window}function $v(){return _f()?Notification.permission:"unsupported"}async function Yq(){return _f()?await Notification.requestPermission():"unsupported"}function ile(t,e,r){if(!(!_f()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:nle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function ale(t,e){const r=M.useRef(new Set),n=M.useRef(!0),i=M.useCallback(a=>{if(n.current){n.current=!1,r.current=new Set(a.map(l=>l.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(a.map(l=>l.id));return}const s=a.filter(l=>!l.isRead&&!r.current.has(l.id));for(const l of s.slice(0,3))ile(l.title,l.message,`pp-${l.id}`);r.current=new Set(a.map(l=>l.id))},[e]);M.useEffect(()=>{if(!t||!e||!_f())return;n.current=!0,r.current=new Set;const a=Be.subscribeToNotifications(t,i);return()=>a()},[t,e,i])}const sle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[i,a]=te.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,l]=te.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,h]=te.useState(!1),p=na(),m=S=>{a(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;h(!0);try{await n(i),s!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Be.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},b=({icon:S,title:w,description:N,value:C,onToggle:k})=>c.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`p-2 rounded-xl ${C?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:c.jsx(S,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-sm",children:w}),c.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:N})]})]}),c.jsx("button",{onClick:k,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${C?"bg-purple-600":"bg-white/20"}`,children:c.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${C?"translate-x-5":"translate-x-0"}`})})]});return c.jsx(Va,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(b,{icon:Poe,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:i.liveBackground,onToggle:()=>m("liveBackground")}),c.jsx(b,{icon:moe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:i.performanceMode,onToggle:()=>m("performanceMode")})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(b,{icon:$l,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:i.privacyMode,onToggle:()=>m("privacyMode")}),i.privacyMode&&c.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),c.jsx("input",{type:"text",value:s,onChange:S=>l(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),c.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(b,{icon:Loe,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:i.compactView,onToggle:()=>m("compactView")}),c.jsx(b,{icon:Woe,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:i.soundEffects!==!1,onToggle:()=>a(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),c.jsx("div",{className:"space-y-2",children:_f()?c.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:`p-2 rounded-xl ${i.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:c.jsx(Lq,{className:"w-5 h-5"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),c.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:$v()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),c.jsx("button",{onClick:async()=>{if(i.pushNotifications)a(S=>({...S,pushNotifications:!1}));else{const S=await Yq();S==="granted"?(a(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):S==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:$v()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${$v()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":i.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:c.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${i.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):c.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),c.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?c.jsx(os,{className:"w-5 h-5 animate-spin"}):c.jsx(Gq,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let L5=null,Zq=!0;function ole(t){Zq=t}function lle(){if(!L5){const t=window.AudioContext||window.webkitAudioContext;L5=new t}return L5}function Vt(t,e,r="sine",n=.15){if(Zq)try{const i=lle(),a=i.createOscillator(),s=i.createGain();a.type=r,a.frequency.setValueAtTime(t,i.currentTime),s.gain.setValueAtTime(n,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),a.connect(s),s.connect(i.destination),a.start(i.currentTime),a.stop(i.currentTime+e)}catch{}}const Wn={xpGain:()=>{Vt(600,.1,"sine",.1),setTimeout(()=>Vt(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{Vt(1200,.15,"sine",.08),setTimeout(()=>Vt(1500,.12,"sine",.06),100),setTimeout(()=>Vt(1800,.2,"triangle",.05),180)},questAccept:()=>{Vt(440,.15,"square",.06),setTimeout(()=>Vt(660,.2,"square",.06),120)},questDeploy:()=>{Vt(880,.12,"sawtooth",.05),setTimeout(()=>Vt(660,.12,"sawtooth",.05),100),setTimeout(()=>Vt(550,.2,"sawtooth",.04),200)},equip:()=>{Vt(200,.05,"square",.1),setTimeout(()=>Vt(400,.08,"sine",.08),50)},salvage:()=>{Vt(300,.15,"sawtooth",.06),setTimeout(()=>Vt(200,.2,"sawtooth",.04),100),setTimeout(()=>Vt(100,.3,"sawtooth",.03),200)},craft:()=>{Vt(150,.08,"square",.1),setTimeout(()=>Vt(800,.2,"triangle",.08),60)},error:()=>{Vt(200,.15,"square",.08),setTimeout(()=>Vt(150,.2,"square",.06),120)},messageSend:()=>{Vt(500,.06,"sine",.05)},notification:()=>{Vt(800,.1,"sine",.06),setTimeout(()=>Vt(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{Vt(523,.12,"sine",.08),setTimeout(()=>Vt(659,.12,"sine",.07),100),setTimeout(()=>Vt(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>Vt(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{Vt(523,.15,"triangle",.1),setTimeout(()=>Vt(784,.15,"triangle",.1),120),setTimeout(()=>Vt(1047,.3,"sine",.12),240)},skillUnlock:()=>{Vt(300,.1,"sawtooth",.06),setTimeout(()=>Vt(600,.1,"sawtooth",.06),80),setTimeout(()=>Vt(900,.15,"sine",.08),160)},bossHit:()=>{Vt(100,.1,"square",.12),setTimeout(()=>Vt(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Vt(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{Vt(1200,.08,"sine",.08),setTimeout(()=>Vt(1600,.1,"sine",.06),60),setTimeout(()=>Vt(2e3,.15,"triangle",.04),120)},partyJoin:()=>{Vt(440,.1,"sine",.06),setTimeout(()=>Vt(554,.1,"sine",.06),80),setTimeout(()=>Vt(659,.15,"sine",.05),160)},chestOpen:()=>{Vt(200,.15,"square",.06),setTimeout(()=>Vt(300,.1,"square",.05),100),setTimeout(()=>Vt(500,.1,"triangle",.06),200),setTimeout(()=>Vt(800,.2,"sine",.08),350)}},cle={QUEST_APPROVED:c.jsx(mh,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:c.jsx(mh,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:c.jsx(cA,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:c.jsx(mh,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:c.jsx(Hq,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:c.jsx(coe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:c.jsx(xb,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:c.jsx(Ii,{className:"w-4 h-4 text-cyan-400"})},HI=({userId:t,settings:e,onUpdateSettings:r})=>{const[n,i]=M.useState([]),[a,s]=M.useState(!1),[l,d]=M.useState(!1),h=M.useRef(null),p=M.useRef(0);M.useEffect(()=>{a&&_f()&&$v()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&d(!0)},[a,e==null?void 0:e.pushNotifications]),M.useEffect(()=>{const S=Be.subscribeToNotifications(t,w=>{const N=w.filter(C=>!C.isRead).length;N>p.current&&p.current>=0&&Wn.notification(),p.current=N,i(w)});return()=>S()},[t]),M.useEffect(()=>{const S=w=>{h.current&&!h.current.contains(w.target)&&s(!1)};return a&&document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[a]);const m=n.filter(S=>!S.isRead).length,y=async()=>{await Be.markAllNotificationsRead(t)},b=async S=>{S.isRead||await Be.markNotificationRead(S.id)},T=S=>{const w=Date.now()-new Date(S).getTime();return w<6e4?"just now":w<36e5?`${Math.floor(w/6e4)}m ago`:w<864e5?`${Math.floor(w/36e5)}h ago`:`${Math.floor(w/864e5)}d ago`};return c.jsxs("div",{className:"relative",ref:h,children:[c.jsxs("button",{onClick:()=>s(!a),className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[c.jsx(M5,{className:"w-5 h-5"}),m>0&&c.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:m>9?"9+":m})]}),a&&c.jsxs("div",{className:"absolute right-0 top-full mt-2 w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-50 animate-in slide-in-from-top-2 fade-in duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[c.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),m>0&&c.jsxs("button",{onClick:y,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[c.jsx(hoe,{className:"w-3 h-3"})," Mark all read"]})]}),l&&c.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx(Lq,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsx("button",{onClick:async()=>{await Yq()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),d(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),c.jsx("button",{onClick:()=>d(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),c.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:n.length===0?c.jsxs("div",{className:"p-8 text-center text-gray-500",children:[c.jsx(M5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),c.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):n.slice(0,30).map(S=>c.jsxs("div",{onClick:()=>b(S),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${S.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[c.jsx("div",{className:"mt-0.5 shrink-0",children:cle[S.type]||c.jsx(M5,{className:"w-4 h-4 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs font-bold text-white truncate",children:S.title}),c.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:S.message}),c.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:T(S.timestamp)})]}),!S.isRead&&c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},S.id))})]})]})},ule=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:i})=>{var T,S;const[a,s]=M.useState(""),[l,d]=M.useState(!1),[h,p]=M.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};M.useEffect(()=>{if(!m.liveBackground){s("");return}(async()=>{try{const N=dm(hm,"public/background.mp4"),C=await mb(N);s(C)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[m.liveBackground]);const y=async w=>{await Be.updateUserSettings(t.id,w)},b=()=>{const w=Zoe.filter(N=>!(N.role==="ADMIN"&&t.role!==Ji.ADMIN||N.role==="STUDENT"&&t.role!==Ji.STUDENT));return c.jsx(c.Fragment,{children:w.map(N=>c.jsxs("button",{onClick:()=>{n(N.name),p(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===N.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[c.jsx("span",{className:`${r===N.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:N.icon}),c.jsx("span",{className:"font-medium text-sm",children:N.name})]},N.name))})};return c.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[c.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&a&&c.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:c.jsx("source",{src:a,type:"video/mp4"})},a)}),c.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),c.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:c.jsx(Dh,{className:"w-5 h-5 text-white"})}),c.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(HI,{userId:t.id,settings:m,onUpdateSettings:y}),c.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:c.jsx(Ooe,{className:"w-6 h-6"})})]})]}),h&&c.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[c.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),c.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),c.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),c.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:c.jsx(hs,{className:"w-6 h-6"})})]}),c.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:c.jsx(b,{})}),c.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[c.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[c.jsx(Hm,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:"Settings"})]}),c.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[c.jsx(LI,{className:"w-5 h-5"}),c.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),c.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:c.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[c.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[c.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:c.jsx(Dh,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),c.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Ji.ADMIN?"Admin System":"Operative Terminal"})]})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:c.jsx(b,{})}),c.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((S=t.gamification)==null?void 0:S.codename)||"Agent":t.name}),c.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(HI,{userId:t.id,settings:m,onUpdateSettings:y}),c.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:c.jsx(Hm,{className:"w-4 h-4"})})]})]}),c.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[c.jsx(LI,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),c.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:c.jsx("div",{className:"max-w-7xl mx-auto h-full",children:i})}),c.jsx(sle,{isOpen:l,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class Ma{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Ma(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class cs{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new cs(r,Ma.range(this,e))}}class Ze{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=r&&r.loc;if(s&&s.start<=s.end){var l=s.lexer.input;i=s.start,a=s.end,i===l.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var d=l.slice(i,a).replace(/[^]/g,"$&"),h;i>15?h=""+l.slice(i-15,i):h=l.slice(0,i);var p;a+15<l.length?p=l.slice(a,a+15)+"":p=l.slice(a),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=Ze.prototype,m.position=i,i!=null&&a!=null&&(m.length=a-i),m.rawMessage=e,m}}Ze.prototype.__proto__=Error.prototype;var dle=function(e,r){return e===void 0?r:e},hle=/([A-Z])/g,fle=function(e){return e.replace(hle,"-$1").toLowerCase()},ple={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},mle=/[&><"']/g;function gle(t){return String(t).replace(mle,e=>ple[e])}var Jq=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},yle=function(e){var r=Jq(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},vle=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},ble=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},kr={deflt:dle,escape:gle,hyphenate:fle,getBaseElem:Jq,isCharacterBox:yle,protocolFromUrl:ble},Vv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function xle(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class AE{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Vv)if(Vv.hasOwnProperty(r)){var n=Vv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:xle(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new Ze("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=kr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Lc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return wo[wle[this.id]]}sub(){return wo[_le[this.id]]}fracNum(){return wo[Sle[this.id]]}fracDen(){return wo[Tle[this.id]]}cramp(){return wo[Ale[this.id]]}text(){return wo[Ele[this.id]]}isTight(){return this.size>=2}}var EE=0,Sb=1,gh=2,Cl=3,Km=4,js=5,Bh=6,pa=7,wo=[new Lc(EE,0,!1),new Lc(Sb,0,!0),new Lc(gh,1,!1),new Lc(Cl,1,!0),new Lc(Km,2,!1),new Lc(js,2,!0),new Lc(Bh,3,!1),new Lc(pa,3,!0)],wle=[Km,js,Km,js,Bh,pa,Bh,pa],_le=[js,js,js,js,pa,pa,pa,pa],Sle=[gh,Cl,Km,js,Bh,pa,Bh,pa],Tle=[Cl,Cl,js,js,pa,pa,pa,pa],Ale=[Sb,Sb,Cl,Cl,js,js,pa,pa],Ele=[EE,Sb,gh,Cl,gh,Cl,gh,Cl],It={DISPLAY:wo[EE],TEXT:wo[gh],SCRIPT:wo[Km],SCRIPTSCRIPT:wo[Bh]},uA=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Nle(t){for(var e=0;e<uA.length;e++)for(var r=uA[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}var Fv=[];uA.forEach(t=>t.blocks.forEach(e=>Fv.push(...e)));function eH(t){for(var e=0;e<Fv.length;e+=2)if(t>=Fv[e]&&t<=Fv[e+1])return!0;return!1}var W0=80,jle=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},kle=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Cle=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Ole=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Ile=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Rle=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},Mle=function(e,r,n){var i=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},Ple=function(e,r,n){r=1e3*r;var i="";switch(e){case"sqrtMain":i=jle(r,W0);break;case"sqrtSize1":i=kle(r,W0);break;case"sqrtSize2":i=Cle(r,W0);break;case"sqrtSize3":i=Ole(r,W0);break;case"sqrtSize4":i=Ile(r,W0);break;case"sqrtTall":i=Mle(r,W0,n)}return i},Dle=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},GI={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Lle=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class t1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Ao={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ev={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},KI={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Ble(t,e){Ao[t]=e}function NE(t,e,r){if(!Ao[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=Ao[e][n];if(!i&&t[0]in KI&&(n=KI[t[0]].charCodeAt(0),i=Ao[e][n]),!i&&r==="text"&&eH(n)&&(i=Ao[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var B5={};function Ule(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!B5[e]){var r=B5[e]={cssEmPerMu:ev.quad[e]/18};for(var n in ev)ev.hasOwnProperty(n)&&(r[n]=ev[n][e])}return B5[e]}var zle=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],WI=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],XI=function(e,r){return r.size<2?e:zle[e-1][r.size-1]};class vl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||vl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=WI[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new vl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:XI(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:WI[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=XI(vl.BASESIZE,e);return this.size===r&&this.textSize===vl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==vl.BASESIZE?["sizing","reset-size"+this.size,"size"+vl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ule(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}vl.BASESIZE=6;var dA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},$le={ex:!0,em:!0,mu:!0},tH=function(e){return typeof e!="string"&&(e=e.unit),e in dA||e in $le||e==="ex"},On=function(e,r){var n;if(e.unit in dA)n=dA[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new Ze("Invalid unit: '"+e.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},at=function(e){return+e.toFixed(4)+"em"},mu=function(e){return e.filter(r=>r).join(" ")},rH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},nH=function(e){var r=document.createElement(e);r.className=mu(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},Vle=/[\s"'>/=\x00-\x1f]/,iH=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+kr.escape(mu(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=kr.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+kr.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(Vle.test(a))throw new Ze("Invalid attribute name '"+a+"'");r+=" "+a+'="'+kr.escape(this.attributes[a])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class r1{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,rH.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return nH.call(this,"span")}toMarkup(){return iH.call(this,"span")}}class jE{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,rH.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return nH.call(this,"a")}toMarkup(){return iH.call(this,"a")}}class Fle{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+kr.escape(this.src)+'"'+(' alt="'+kr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=kr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+kr.escape(r)+'"'),e+="'/>",e}}var qle={:"",:"",:"",:""};class Ms{constructor(e,r,n,i,a,s,l,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=l||[],this.style=d||{},this.maxFontSize=0;var h=Nle(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=qle[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=at(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=mu(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=kr.escape(mu(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=kr.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+kr.escape(n)+'"');var a=kr.escape(this.text);return e?(r+=">",r+=a,r+="</span>",r):a}}class Vl{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+kr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class gu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",GI[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+kr.escape(this.alternate)+'"/>':'<path d="'+kr.escape(GI[this.pathName])+'"/>'}}class hA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+kr.escape(this.attributes[r])+'"');return e+="/>",e}}function QI(t){if(t instanceof Ms)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Hle(t){if(t instanceof r1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Gle={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Kle={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},pn={math:{},text:{}};function j(t,e,r,n,i,a){pn[t][i]={font:e,group:r,replace:n},a&&n&&(pn[t][n]=pn[t][i])}var U="math",Ge="text",q="main",ne="ams",Nn="accent-token",yt="bin",va="close",Sf="inner",Ot="mathord",di="op-token",fs="open",g2="punct",ie="rel",Zl="spacing",me="textord";j(U,q,ie,"","\\equiv",!0);j(U,q,ie,"","\\prec",!0);j(U,q,ie,"","\\succ",!0);j(U,q,ie,"","\\sim",!0);j(U,q,ie,"","\\perp");j(U,q,ie,"","\\preceq",!0);j(U,q,ie,"","\\succeq",!0);j(U,q,ie,"","\\simeq",!0);j(U,q,ie,"","\\mid",!0);j(U,q,ie,"","\\ll",!0);j(U,q,ie,"","\\gg",!0);j(U,q,ie,"","\\asymp",!0);j(U,q,ie,"","\\parallel");j(U,q,ie,"","\\bowtie",!0);j(U,q,ie,"","\\smile",!0);j(U,q,ie,"","\\sqsubseteq",!0);j(U,q,ie,"","\\sqsupseteq",!0);j(U,q,ie,"","\\doteq",!0);j(U,q,ie,"","\\frown",!0);j(U,q,ie,"","\\ni",!0);j(U,q,ie,"","\\propto",!0);j(U,q,ie,"","\\vdash",!0);j(U,q,ie,"","\\dashv",!0);j(U,q,ie,"","\\owns");j(U,q,g2,".","\\ldotp");j(U,q,g2,"","\\cdotp");j(U,q,me,"#","\\#");j(Ge,q,me,"#","\\#");j(U,q,me,"&","\\&");j(Ge,q,me,"&","\\&");j(U,q,me,"","\\aleph",!0);j(U,q,me,"","\\forall",!0);j(U,q,me,"","\\hbar",!0);j(U,q,me,"","\\exists",!0);j(U,q,me,"","\\nabla",!0);j(U,q,me,"","\\flat",!0);j(U,q,me,"","\\ell",!0);j(U,q,me,"","\\natural",!0);j(U,q,me,"","\\clubsuit",!0);j(U,q,me,"","\\wp",!0);j(U,q,me,"","\\sharp",!0);j(U,q,me,"","\\diamondsuit",!0);j(U,q,me,"","\\Re",!0);j(U,q,me,"","\\heartsuit",!0);j(U,q,me,"","\\Im",!0);j(U,q,me,"","\\spadesuit",!0);j(U,q,me,"","\\S",!0);j(Ge,q,me,"","\\S");j(U,q,me,"","\\P",!0);j(Ge,q,me,"","\\P");j(U,q,me,"","\\dag");j(Ge,q,me,"","\\dag");j(Ge,q,me,"","\\textdagger");j(U,q,me,"","\\ddag");j(Ge,q,me,"","\\ddag");j(Ge,q,me,"","\\textdaggerdbl");j(U,q,va,"","\\rmoustache",!0);j(U,q,fs,"","\\lmoustache",!0);j(U,q,va,"","\\rgroup",!0);j(U,q,fs,"","\\lgroup",!0);j(U,q,yt,"","\\mp",!0);j(U,q,yt,"","\\ominus",!0);j(U,q,yt,"","\\uplus",!0);j(U,q,yt,"","\\sqcap",!0);j(U,q,yt,"","\\ast");j(U,q,yt,"","\\sqcup",!0);j(U,q,yt,"","\\bigcirc",!0);j(U,q,yt,"","\\bullet",!0);j(U,q,yt,"","\\ddagger");j(U,q,yt,"","\\wr",!0);j(U,q,yt,"","\\amalg");j(U,q,yt,"&","\\And");j(U,q,ie,"","\\longleftarrow",!0);j(U,q,ie,"","\\Leftarrow",!0);j(U,q,ie,"","\\Longleftarrow",!0);j(U,q,ie,"","\\longrightarrow",!0);j(U,q,ie,"","\\Rightarrow",!0);j(U,q,ie,"","\\Longrightarrow",!0);j(U,q,ie,"","\\leftrightarrow",!0);j(U,q,ie,"","\\longleftrightarrow",!0);j(U,q,ie,"","\\Leftrightarrow",!0);j(U,q,ie,"","\\Longleftrightarrow",!0);j(U,q,ie,"","\\mapsto",!0);j(U,q,ie,"","\\longmapsto",!0);j(U,q,ie,"","\\nearrow",!0);j(U,q,ie,"","\\hookleftarrow",!0);j(U,q,ie,"","\\hookrightarrow",!0);j(U,q,ie,"","\\searrow",!0);j(U,q,ie,"","\\leftharpoonup",!0);j(U,q,ie,"","\\rightharpoonup",!0);j(U,q,ie,"","\\swarrow",!0);j(U,q,ie,"","\\leftharpoondown",!0);j(U,q,ie,"","\\rightharpoondown",!0);j(U,q,ie,"","\\nwarrow",!0);j(U,q,ie,"","\\rightleftharpoons",!0);j(U,ne,ie,"","\\nless",!0);j(U,ne,ie,"","\\@nleqslant");j(U,ne,ie,"","\\@nleqq");j(U,ne,ie,"","\\lneq",!0);j(U,ne,ie,"","\\lneqq",!0);j(U,ne,ie,"","\\@lvertneqq");j(U,ne,ie,"","\\lnsim",!0);j(U,ne,ie,"","\\lnapprox",!0);j(U,ne,ie,"","\\nprec",!0);j(U,ne,ie,"","\\npreceq",!0);j(U,ne,ie,"","\\precnsim",!0);j(U,ne,ie,"","\\precnapprox",!0);j(U,ne,ie,"","\\nsim",!0);j(U,ne,ie,"","\\@nshortmid");j(U,ne,ie,"","\\nmid",!0);j(U,ne,ie,"","\\nvdash",!0);j(U,ne,ie,"","\\nvDash",!0);j(U,ne,ie,"","\\ntriangleleft");j(U,ne,ie,"","\\ntrianglelefteq",!0);j(U,ne,ie,"","\\subsetneq",!0);j(U,ne,ie,"","\\@varsubsetneq");j(U,ne,ie,"","\\subsetneqq",!0);j(U,ne,ie,"","\\@varsubsetneqq");j(U,ne,ie,"","\\ngtr",!0);j(U,ne,ie,"","\\@ngeqslant");j(U,ne,ie,"","\\@ngeqq");j(U,ne,ie,"","\\gneq",!0);j(U,ne,ie,"","\\gneqq",!0);j(U,ne,ie,"","\\@gvertneqq");j(U,ne,ie,"","\\gnsim",!0);j(U,ne,ie,"","\\gnapprox",!0);j(U,ne,ie,"","\\nsucc",!0);j(U,ne,ie,"","\\nsucceq",!0);j(U,ne,ie,"","\\succnsim",!0);j(U,ne,ie,"","\\succnapprox",!0);j(U,ne,ie,"","\\ncong",!0);j(U,ne,ie,"","\\@nshortparallel");j(U,ne,ie,"","\\nparallel",!0);j(U,ne,ie,"","\\nVDash",!0);j(U,ne,ie,"","\\ntriangleright");j(U,ne,ie,"","\\ntrianglerighteq",!0);j(U,ne,ie,"","\\@nsupseteqq");j(U,ne,ie,"","\\supsetneq",!0);j(U,ne,ie,"","\\@varsupsetneq");j(U,ne,ie,"","\\supsetneqq",!0);j(U,ne,ie,"","\\@varsupsetneqq");j(U,ne,ie,"","\\nVdash",!0);j(U,ne,ie,"","\\precneqq",!0);j(U,ne,ie,"","\\succneqq",!0);j(U,ne,ie,"","\\@nsubseteqq");j(U,ne,yt,"","\\unlhd");j(U,ne,yt,"","\\unrhd");j(U,ne,ie,"","\\nleftarrow",!0);j(U,ne,ie,"","\\nrightarrow",!0);j(U,ne,ie,"","\\nLeftarrow",!0);j(U,ne,ie,"","\\nRightarrow",!0);j(U,ne,ie,"","\\nleftrightarrow",!0);j(U,ne,ie,"","\\nLeftrightarrow",!0);j(U,ne,ie,"","\\vartriangle");j(U,ne,me,"","\\hslash");j(U,ne,me,"","\\triangledown");j(U,ne,me,"","\\lozenge");j(U,ne,me,"","\\circledS");j(U,ne,me,"","\\circledR");j(Ge,ne,me,"","\\circledR");j(U,ne,me,"","\\measuredangle",!0);j(U,ne,me,"","\\nexists");j(U,ne,me,"","\\mho");j(U,ne,me,"","\\Finv",!0);j(U,ne,me,"","\\Game",!0);j(U,ne,me,"","\\backprime");j(U,ne,me,"","\\blacktriangle");j(U,ne,me,"","\\blacktriangledown");j(U,ne,me,"","\\blacksquare");j(U,ne,me,"","\\blacklozenge");j(U,ne,me,"","\\bigstar");j(U,ne,me,"","\\sphericalangle",!0);j(U,ne,me,"","\\complement",!0);j(U,ne,me,"","\\eth",!0);j(Ge,q,me,"","");j(U,ne,me,"","\\diagup");j(U,ne,me,"","\\diagdown");j(U,ne,me,"","\\square");j(U,ne,me,"","\\Box");j(U,ne,me,"","\\Diamond");j(U,ne,me,"","\\yen",!0);j(Ge,ne,me,"","\\yen",!0);j(U,ne,me,"","\\checkmark",!0);j(Ge,ne,me,"","\\checkmark");j(U,ne,me,"","\\beth",!0);j(U,ne,me,"","\\daleth",!0);j(U,ne,me,"","\\gimel",!0);j(U,ne,me,"","\\digamma",!0);j(U,ne,me,"","\\varkappa");j(U,ne,fs,"","\\@ulcorner",!0);j(U,ne,va,"","\\@urcorner",!0);j(U,ne,fs,"","\\@llcorner",!0);j(U,ne,va,"","\\@lrcorner",!0);j(U,ne,ie,"","\\leqq",!0);j(U,ne,ie,"","\\leqslant",!0);j(U,ne,ie,"","\\eqslantless",!0);j(U,ne,ie,"","\\lesssim",!0);j(U,ne,ie,"","\\lessapprox",!0);j(U,ne,ie,"","\\approxeq",!0);j(U,ne,yt,"","\\lessdot");j(U,ne,ie,"","\\lll",!0);j(U,ne,ie,"","\\lessgtr",!0);j(U,ne,ie,"","\\lesseqgtr",!0);j(U,ne,ie,"","\\lesseqqgtr",!0);j(U,ne,ie,"","\\doteqdot");j(U,ne,ie,"","\\risingdotseq",!0);j(U,ne,ie,"","\\fallingdotseq",!0);j(U,ne,ie,"","\\backsim",!0);j(U,ne,ie,"","\\backsimeq",!0);j(U,ne,ie,"","\\subseteqq",!0);j(U,ne,ie,"","\\Subset",!0);j(U,ne,ie,"","\\sqsubset",!0);j(U,ne,ie,"","\\preccurlyeq",!0);j(U,ne,ie,"","\\curlyeqprec",!0);j(U,ne,ie,"","\\precsim",!0);j(U,ne,ie,"","\\precapprox",!0);j(U,ne,ie,"","\\vartriangleleft");j(U,ne,ie,"","\\trianglelefteq");j(U,ne,ie,"","\\vDash",!0);j(U,ne,ie,"","\\Vvdash",!0);j(U,ne,ie,"","\\smallsmile");j(U,ne,ie,"","\\smallfrown");j(U,ne,ie,"","\\bumpeq",!0);j(U,ne,ie,"","\\Bumpeq",!0);j(U,ne,ie,"","\\geqq",!0);j(U,ne,ie,"","\\geqslant",!0);j(U,ne,ie,"","\\eqslantgtr",!0);j(U,ne,ie,"","\\gtrsim",!0);j(U,ne,ie,"","\\gtrapprox",!0);j(U,ne,yt,"","\\gtrdot");j(U,ne,ie,"","\\ggg",!0);j(U,ne,ie,"","\\gtrless",!0);j(U,ne,ie,"","\\gtreqless",!0);j(U,ne,ie,"","\\gtreqqless",!0);j(U,ne,ie,"","\\eqcirc",!0);j(U,ne,ie,"","\\circeq",!0);j(U,ne,ie,"","\\triangleq",!0);j(U,ne,ie,"","\\thicksim");j(U,ne,ie,"","\\thickapprox");j(U,ne,ie,"","\\supseteqq",!0);j(U,ne,ie,"","\\Supset",!0);j(U,ne,ie,"","\\sqsupset",!0);j(U,ne,ie,"","\\succcurlyeq",!0);j(U,ne,ie,"","\\curlyeqsucc",!0);j(U,ne,ie,"","\\succsim",!0);j(U,ne,ie,"","\\succapprox",!0);j(U,ne,ie,"","\\vartriangleright");j(U,ne,ie,"","\\trianglerighteq");j(U,ne,ie,"","\\Vdash",!0);j(U,ne,ie,"","\\shortmid");j(U,ne,ie,"","\\shortparallel");j(U,ne,ie,"","\\between",!0);j(U,ne,ie,"","\\pitchfork",!0);j(U,ne,ie,"","\\varpropto");j(U,ne,ie,"","\\blacktriangleleft");j(U,ne,ie,"","\\therefore",!0);j(U,ne,ie,"","\\backepsilon");j(U,ne,ie,"","\\blacktriangleright");j(U,ne,ie,"","\\because",!0);j(U,ne,ie,"","\\llless");j(U,ne,ie,"","\\gggtr");j(U,ne,yt,"","\\lhd");j(U,ne,yt,"","\\rhd");j(U,ne,ie,"","\\eqsim",!0);j(U,q,ie,"","\\Join");j(U,ne,ie,"","\\Doteq",!0);j(U,ne,yt,"","\\dotplus",!0);j(U,ne,yt,"","\\smallsetminus");j(U,ne,yt,"","\\Cap",!0);j(U,ne,yt,"","\\Cup",!0);j(U,ne,yt,"","\\doublebarwedge",!0);j(U,ne,yt,"","\\boxminus",!0);j(U,ne,yt,"","\\boxplus",!0);j(U,ne,yt,"","\\divideontimes",!0);j(U,ne,yt,"","\\ltimes",!0);j(U,ne,yt,"","\\rtimes",!0);j(U,ne,yt,"","\\leftthreetimes",!0);j(U,ne,yt,"","\\rightthreetimes",!0);j(U,ne,yt,"","\\curlywedge",!0);j(U,ne,yt,"","\\curlyvee",!0);j(U,ne,yt,"","\\circleddash",!0);j(U,ne,yt,"","\\circledast",!0);j(U,ne,yt,"","\\centerdot");j(U,ne,yt,"","\\intercal",!0);j(U,ne,yt,"","\\doublecap");j(U,ne,yt,"","\\doublecup");j(U,ne,yt,"","\\boxtimes",!0);j(U,ne,ie,"","\\dashrightarrow",!0);j(U,ne,ie,"","\\dashleftarrow",!0);j(U,ne,ie,"","\\leftleftarrows",!0);j(U,ne,ie,"","\\leftrightarrows",!0);j(U,ne,ie,"","\\Lleftarrow",!0);j(U,ne,ie,"","\\twoheadleftarrow",!0);j(U,ne,ie,"","\\leftarrowtail",!0);j(U,ne,ie,"","\\looparrowleft",!0);j(U,ne,ie,"","\\leftrightharpoons",!0);j(U,ne,ie,"","\\curvearrowleft",!0);j(U,ne,ie,"","\\circlearrowleft",!0);j(U,ne,ie,"","\\Lsh",!0);j(U,ne,ie,"","\\upuparrows",!0);j(U,ne,ie,"","\\upharpoonleft",!0);j(U,ne,ie,"","\\downharpoonleft",!0);j(U,q,ie,"","\\origof",!0);j(U,q,ie,"","\\imageof",!0);j(U,ne,ie,"","\\multimap",!0);j(U,ne,ie,"","\\leftrightsquigarrow",!0);j(U,ne,ie,"","\\rightrightarrows",!0);j(U,ne,ie,"","\\rightleftarrows",!0);j(U,ne,ie,"","\\twoheadrightarrow",!0);j(U,ne,ie,"","\\rightarrowtail",!0);j(U,ne,ie,"","\\looparrowright",!0);j(U,ne,ie,"","\\curvearrowright",!0);j(U,ne,ie,"","\\circlearrowright",!0);j(U,ne,ie,"","\\Rsh",!0);j(U,ne,ie,"","\\downdownarrows",!0);j(U,ne,ie,"","\\upharpoonright",!0);j(U,ne,ie,"","\\downharpoonright",!0);j(U,ne,ie,"","\\rightsquigarrow",!0);j(U,ne,ie,"","\\leadsto");j(U,ne,ie,"","\\Rrightarrow",!0);j(U,ne,ie,"","\\restriction");j(U,q,me,"","`");j(U,q,me,"$","\\$");j(Ge,q,me,"$","\\$");j(Ge,q,me,"$","\\textdollar");j(U,q,me,"%","\\%");j(Ge,q,me,"%","\\%");j(U,q,me,"_","\\_");j(Ge,q,me,"_","\\_");j(Ge,q,me,"_","\\textunderscore");j(U,q,me,"","\\angle",!0);j(U,q,me,"","\\infty",!0);j(U,q,me,"","\\prime");j(U,q,me,"","\\triangle");j(U,q,me,"","\\Gamma",!0);j(U,q,me,"","\\Delta",!0);j(U,q,me,"","\\Theta",!0);j(U,q,me,"","\\Lambda",!0);j(U,q,me,"","\\Xi",!0);j(U,q,me,"","\\Pi",!0);j(U,q,me,"","\\Sigma",!0);j(U,q,me,"","\\Upsilon",!0);j(U,q,me,"","\\Phi",!0);j(U,q,me,"","\\Psi",!0);j(U,q,me,"","\\Omega",!0);j(U,q,me,"A","");j(U,q,me,"B","");j(U,q,me,"E","");j(U,q,me,"Z","");j(U,q,me,"H","");j(U,q,me,"I","");j(U,q,me,"K","");j(U,q,me,"M","");j(U,q,me,"N","");j(U,q,me,"O","");j(U,q,me,"P","");j(U,q,me,"T","");j(U,q,me,"X","");j(U,q,me,"","\\neg",!0);j(U,q,me,"","\\lnot");j(U,q,me,"","\\top");j(U,q,me,"","\\bot");j(U,q,me,"","\\emptyset");j(U,ne,me,"","\\varnothing");j(U,q,Ot,"","\\alpha",!0);j(U,q,Ot,"","\\beta",!0);j(U,q,Ot,"","\\gamma",!0);j(U,q,Ot,"","\\delta",!0);j(U,q,Ot,"","\\epsilon",!0);j(U,q,Ot,"","\\zeta",!0);j(U,q,Ot,"","\\eta",!0);j(U,q,Ot,"","\\theta",!0);j(U,q,Ot,"","\\iota",!0);j(U,q,Ot,"","\\kappa",!0);j(U,q,Ot,"","\\lambda",!0);j(U,q,Ot,"","\\mu",!0);j(U,q,Ot,"","\\nu",!0);j(U,q,Ot,"","\\xi",!0);j(U,q,Ot,"","\\omicron",!0);j(U,q,Ot,"","\\pi",!0);j(U,q,Ot,"","\\rho",!0);j(U,q,Ot,"","\\sigma",!0);j(U,q,Ot,"","\\tau",!0);j(U,q,Ot,"","\\upsilon",!0);j(U,q,Ot,"","\\phi",!0);j(U,q,Ot,"","\\chi",!0);j(U,q,Ot,"","\\psi",!0);j(U,q,Ot,"","\\omega",!0);j(U,q,Ot,"","\\varepsilon",!0);j(U,q,Ot,"","\\vartheta",!0);j(U,q,Ot,"","\\varpi",!0);j(U,q,Ot,"","\\varrho",!0);j(U,q,Ot,"","\\varsigma",!0);j(U,q,Ot,"","\\varphi",!0);j(U,q,yt,"","*",!0);j(U,q,yt,"+","+");j(U,q,yt,"","-",!0);j(U,q,yt,"","\\cdot",!0);j(U,q,yt,"","\\circ",!0);j(U,q,yt,"","\\div",!0);j(U,q,yt,"","\\pm",!0);j(U,q,yt,"","\\times",!0);j(U,q,yt,"","\\cap",!0);j(U,q,yt,"","\\cup",!0);j(U,q,yt,"","\\setminus",!0);j(U,q,yt,"","\\land");j(U,q,yt,"","\\lor");j(U,q,yt,"","\\wedge",!0);j(U,q,yt,"","\\vee",!0);j(U,q,me,"","\\surd");j(U,q,fs,"","\\langle",!0);j(U,q,fs,"","\\lvert");j(U,q,fs,"","\\lVert");j(U,q,va,"?","?");j(U,q,va,"!","!");j(U,q,va,"","\\rangle",!0);j(U,q,va,"","\\rvert");j(U,q,va,"","\\rVert");j(U,q,ie,"=","=");j(U,q,ie,":",":");j(U,q,ie,"","\\approx",!0);j(U,q,ie,"","\\cong",!0);j(U,q,ie,"","\\ge");j(U,q,ie,"","\\geq",!0);j(U,q,ie,"","\\gets");j(U,q,ie,">","\\gt",!0);j(U,q,ie,"","\\in",!0);j(U,q,ie,"","\\@not");j(U,q,ie,"","\\subset",!0);j(U,q,ie,"","\\supset",!0);j(U,q,ie,"","\\subseteq",!0);j(U,q,ie,"","\\supseteq",!0);j(U,ne,ie,"","\\nsubseteq",!0);j(U,ne,ie,"","\\nsupseteq",!0);j(U,q,ie,"","\\models");j(U,q,ie,"","\\leftarrow",!0);j(U,q,ie,"","\\le");j(U,q,ie,"","\\leq",!0);j(U,q,ie,"<","\\lt",!0);j(U,q,ie,"","\\rightarrow",!0);j(U,q,ie,"","\\to");j(U,ne,ie,"","\\ngeq",!0);j(U,ne,ie,"","\\nleq",!0);j(U,q,Zl,"","\\ ");j(U,q,Zl,"","\\space");j(U,q,Zl,"","\\nobreakspace");j(Ge,q,Zl,"","\\ ");j(Ge,q,Zl,""," ");j(Ge,q,Zl,"","\\space");j(Ge,q,Zl,"","\\nobreakspace");j(U,q,Zl,null,"\\nobreak");j(U,q,Zl,null,"\\allowbreak");j(U,q,g2,",",",");j(U,q,g2,";",";");j(U,ne,yt,"","\\barwedge",!0);j(U,ne,yt,"","\\veebar",!0);j(U,q,yt,"","\\odot",!0);j(U,q,yt,"","\\oplus",!0);j(U,q,yt,"","\\otimes",!0);j(U,q,me,"","\\partial",!0);j(U,q,yt,"","\\oslash",!0);j(U,ne,yt,"","\\circledcirc",!0);j(U,ne,yt,"","\\boxdot",!0);j(U,q,yt,"","\\bigtriangleup");j(U,q,yt,"","\\bigtriangledown");j(U,q,yt,"","\\dagger");j(U,q,yt,"","\\diamond");j(U,q,yt,"","\\star");j(U,q,yt,"","\\triangleleft");j(U,q,yt,"","\\triangleright");j(U,q,fs,"{","\\{");j(Ge,q,me,"{","\\{");j(Ge,q,me,"{","\\textbraceleft");j(U,q,va,"}","\\}");j(Ge,q,me,"}","\\}");j(Ge,q,me,"}","\\textbraceright");j(U,q,fs,"{","\\lbrace");j(U,q,va,"}","\\rbrace");j(U,q,fs,"[","\\lbrack",!0);j(Ge,q,me,"[","\\lbrack",!0);j(U,q,va,"]","\\rbrack",!0);j(Ge,q,me,"]","\\rbrack",!0);j(U,q,fs,"(","\\lparen",!0);j(U,q,va,")","\\rparen",!0);j(Ge,q,me,"<","\\textless",!0);j(Ge,q,me,">","\\textgreater",!0);j(U,q,fs,"","\\lfloor",!0);j(U,q,va,"","\\rfloor",!0);j(U,q,fs,"","\\lceil",!0);j(U,q,va,"","\\rceil",!0);j(U,q,me,"\\","\\backslash");j(U,q,me,"","|");j(U,q,me,"","\\vert");j(Ge,q,me,"|","\\textbar",!0);j(U,q,me,"","\\|");j(U,q,me,"","\\Vert");j(Ge,q,me,"","\\textbardbl");j(Ge,q,me,"~","\\textasciitilde");j(Ge,q,me,"\\","\\textbackslash");j(Ge,q,me,"^","\\textasciicircum");j(U,q,ie,"","\\uparrow",!0);j(U,q,ie,"","\\Uparrow",!0);j(U,q,ie,"","\\downarrow",!0);j(U,q,ie,"","\\Downarrow",!0);j(U,q,ie,"","\\updownarrow",!0);j(U,q,ie,"","\\Updownarrow",!0);j(U,q,di,"","\\coprod");j(U,q,di,"","\\bigvee");j(U,q,di,"","\\bigwedge");j(U,q,di,"","\\biguplus");j(U,q,di,"","\\bigcap");j(U,q,di,"","\\bigcup");j(U,q,di,"","\\int");j(U,q,di,"","\\intop");j(U,q,di,"","\\iint");j(U,q,di,"","\\iiint");j(U,q,di,"","\\prod");j(U,q,di,"","\\sum");j(U,q,di,"","\\bigotimes");j(U,q,di,"","\\bigoplus");j(U,q,di,"","\\bigodot");j(U,q,di,"","\\oint");j(U,q,di,"","\\oiint");j(U,q,di,"","\\oiiint");j(U,q,di,"","\\bigsqcup");j(U,q,di,"","\\smallint");j(Ge,q,Sf,"","\\textellipsis");j(U,q,Sf,"","\\mathellipsis");j(Ge,q,Sf,"","\\ldots",!0);j(U,q,Sf,"","\\ldots",!0);j(U,q,Sf,"","\\@cdots",!0);j(U,q,Sf,"","\\ddots",!0);j(U,q,me,"","\\varvdots");j(Ge,q,me,"","\\varvdots");j(U,q,Nn,"","\\acute");j(U,q,Nn,"","\\grave");j(U,q,Nn,"","\\ddot");j(U,q,Nn,"~","\\tilde");j(U,q,Nn,"","\\bar");j(U,q,Nn,"","\\breve");j(U,q,Nn,"","\\check");j(U,q,Nn,"^","\\hat");j(U,q,Nn,"","\\vec");j(U,q,Nn,"","\\dot");j(U,q,Nn,"","\\mathring");j(U,q,Ot,"","\\@imath");j(U,q,Ot,"","\\@jmath");j(U,q,me,"","");j(U,q,me,"","");j(Ge,q,me,"","\\i",!0);j(Ge,q,me,"","\\j",!0);j(Ge,q,me,"","\\ss",!0);j(Ge,q,me,"","\\ae",!0);j(Ge,q,me,"","\\oe",!0);j(Ge,q,me,"","\\o",!0);j(Ge,q,me,"","\\AE",!0);j(Ge,q,me,"","\\OE",!0);j(Ge,q,me,"","\\O",!0);j(Ge,q,Nn,"","\\'");j(Ge,q,Nn,"","\\`");j(Ge,q,Nn,"","\\^");j(Ge,q,Nn,"","\\~");j(Ge,q,Nn,"","\\=");j(Ge,q,Nn,"","\\u");j(Ge,q,Nn,"","\\.");j(Ge,q,Nn,"","\\c");j(Ge,q,Nn,"","\\r");j(Ge,q,Nn,"","\\v");j(Ge,q,Nn,"",'\\"');j(Ge,q,Nn,"","\\H");j(Ge,q,Nn,"","\\textcircled");var aH={"--":!0,"---":!0,"``":!0,"''":!0};j(Ge,q,me,"","--",!0);j(Ge,q,me,"","\\textendash");j(Ge,q,me,"","---",!0);j(Ge,q,me,"","\\textemdash");j(Ge,q,me,"","`",!0);j(Ge,q,me,"","\\textquoteleft");j(Ge,q,me,"","'",!0);j(Ge,q,me,"","\\textquoteright");j(Ge,q,me,"","``",!0);j(Ge,q,me,"","\\textquotedblleft");j(Ge,q,me,"","''",!0);j(Ge,q,me,"","\\textquotedblright");j(U,q,me,"","\\degree",!0);j(Ge,q,me,"","\\degree");j(Ge,q,me,"","\\textdegree",!0);j(U,q,me,"","\\pounds");j(U,q,me,"","\\mathsterling",!0);j(Ge,q,me,"","\\pounds");j(Ge,q,me,"","\\textsterling",!0);j(U,ne,me,"","\\maltese");j(Ge,ne,me,"","\\maltese");var YI='0123456789/@."';for(var U5=0;U5<YI.length;U5++){var ZI=YI.charAt(U5);j(U,q,me,ZI,ZI)}var JI='0123456789!@*()-=+";:?/.,';for(var z5=0;z5<JI.length;z5++){var eR=JI.charAt(z5);j(Ge,q,me,eR,eR)}var Tb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var $5=0;$5<Tb.length;$5++){var tv=Tb.charAt($5);j(U,q,Ot,tv,tv),j(Ge,q,me,tv,tv)}j(U,ne,me,"C","");j(Ge,ne,me,"C","");j(U,ne,me,"H","");j(Ge,ne,me,"H","");j(U,ne,me,"N","");j(Ge,ne,me,"N","");j(U,ne,me,"P","");j(Ge,ne,me,"P","");j(U,ne,me,"Q","");j(Ge,ne,me,"Q","");j(U,ne,me,"R","");j(Ge,ne,me,"R","");j(U,ne,me,"Z","");j(Ge,ne,me,"Z","");j(U,q,Ot,"h","");j(Ge,q,Ot,"h","");var Lt="";for(var da=0;da<Tb.length;da++){var Bn=Tb.charAt(da);Lt=String.fromCharCode(55349,56320+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56372+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56424+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56580+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56684+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56736+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56788+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56840+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56944+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),da<26&&(Lt=String.fromCharCode(55349,56632+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt),Lt=String.fromCharCode(55349,56476+da),j(U,q,Ot,Bn,Lt),j(Ge,q,me,Bn,Lt))}Lt="";j(U,q,Ot,"k",Lt);j(Ge,q,me,"k",Lt);for(var td=0;td<10;td++){var Bc=td.toString();Lt=String.fromCharCode(55349,57294+td),j(U,q,Ot,Bc,Lt),j(Ge,q,me,Bc,Lt),Lt=String.fromCharCode(55349,57314+td),j(U,q,Ot,Bc,Lt),j(Ge,q,me,Bc,Lt),Lt=String.fromCharCode(55349,57324+td),j(U,q,Ot,Bc,Lt),j(Ge,q,me,Bc,Lt),Lt=String.fromCharCode(55349,57334+td),j(U,q,Ot,Bc,Lt),j(Ge,q,me,Bc,Lt)}var fA="";for(var V5=0;V5<fA.length;V5++){var rv=fA.charAt(V5);j(U,q,Ot,rv,rv),j(Ge,q,me,rv,rv)}var nv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],tR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Wle=function(e,r){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=r==="math"?0:1;if(119808<=a&&a<120484){var l=Math.floor((a-119808)/26);return[nv[l][2],nv[l][s]]}else if(120782<=a&&a<=120831){var d=Math.floor((a-120782)/10);return[tR[d][2],tR[d][s]]}else{if(a===120485||a===120486)return[nv[0][2],nv[0][s]];if(120486<a&&a<120782)return["",""];throw new Ze("Unsupported character: "+e)}},y2=function(e,r,n){return pn[n][e]&&pn[n][e].replace&&(e=pn[n][e].replace),{value:e,metrics:NE(e,r,n)}},Zs=function(e,r,n,i,a){var s=y2(e,r,n),l=s.metrics;e=s.value;var d;if(l){var h=l.italic;(n==="text"||i&&i.font==="mathit")&&(h=0),d=new Ms(e,l.height,l.depth,h,l.skew,l.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new Ms(e,0,0,0,0,0,a);if(i){d.maxFontSize=i.sizeMultiplier,i.style.isTight()&&d.classes.push("mtight");var p=i.getColor();p&&(d.style.color=p)}return d},Xle=function(e,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&y2(e,"Main-Bold",r).metrics?Zs(e,"Main-Bold",r,n,i.concat(["mathbf"])):e==="\\"||pn[r][e].font==="main"?Zs(e,"Main-Regular",r,n,i):Zs(e,"AMS-Regular",r,n,i.concat(["amsrm"]))},Qle=function(e,r,n,i,a){return a!=="textord"&&y2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Yle=function(e,r,n){var i=e.mode,a=e.text,s=["mord"],l=i==="math"||i==="text"&&r.font,d=l?r.font:r.fontFamily,h="",p="";if(a.charCodeAt(0)===55349&&([h,p]=Wle(a,i)),h.length>0)return Zs(a,h,i,r,s.concat(p));if(d){var m,y;if(d==="boldsymbol"){var b=Qle(a,i,r,s,n);m=b.fontName,y=[b.fontClass]}else l?(m=lH[d].fontName,y=[d]):(m=iv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(y2(a,m,i).metrics)return Zs(a,m,i,r,s.concat(y));if(aH.hasOwnProperty(a)&&m.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<a.length;S++)T.push(Zs(a[S],m,i,r,s.concat(y)));return oH(T)}}if(n==="mathord")return Zs(a,"Math-Italic",i,r,s.concat(["mathnormal"]));if(n==="textord"){var w=pn[i][a]&&pn[i][a].font;if(w==="ams"){var N=iv("amsrm",r.fontWeight,r.fontShape);return Zs(a,N,i,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var C=iv("textrm",r.fontWeight,r.fontShape);return Zs(a,C,i,r,s.concat(r.fontWeight,r.fontShape))}else{var k=iv(w,r.fontWeight,r.fontShape);return Zs(a,k,i,r,s.concat(k,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Zle=(t,e)=>{if(mu(t.classes)!==mu(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},Jle=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof Ms&&n instanceof Ms&&Zle(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},kE=function(e){for(var r=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=i},Ia=function(e,r,n,i){var a=new r1(e,r,n,i);return kE(a),a},sH=(t,e,r,n)=>new r1(t,e,r,n),ece=function(e,r,n){var i=Ia([e],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=at(i.height),i.maxFontSize=1,i},tce=function(e,r,n,i){var a=new jE(e,r,n,i);return kE(a),a},oH=function(e){var r=new t1(e);return kE(r),r},rce=function(e,r){return e instanceof t1?Ia([],[e],r):e},nce=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,a=i,s=1;s<r.length;s++){var l=-r[s].shift-a-r[s].elem.depth,d=l-(r[s-1].elem.height+r[s-1].elem.depth);a=a+l,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:i}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var b=e.children[0];if(b.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-b.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-b.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},ice=function(e,r){for(var{children:n,depth:i}=nce(e),a=0,s=0;s<n.length;s++){var l=n[s];if(l.type==="elem"){var d=l.elem;a=Math.max(a,d.maxFontSize,d.height)}}a+=2;var h=Ia(["pstrut"],[]);h.style.height=at(a);for(var p=[],m=i,y=i,b=i,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")b+=S.size;else{var w=S.elem,N=S.wrapperClasses||[],C=S.wrapperStyle||{},k=Ia(N,[h,w],void 0,C);k.style.top=at(-a-b-w.depth),S.marginLeft&&(k.style.marginLeft=S.marginLeft),S.marginRight&&(k.style.marginRight=S.marginRight),p.push(k),b+=w.height+w.depth}m=Math.min(m,b),y=Math.max(y,b)}var $=Ia(["vlist"],p);$.style.height=at(y);var I;if(m<0){var L=Ia([],[]),E=Ia(["vlist"],[L]);E.style.height=at(-m);var A=Ia(["vlist-s"],[new Ms("")]);I=[Ia(["vlist-r"],[$,A]),Ia(["vlist-r"],[E])]}else I=[Ia(["vlist-r"],[$])];var R=Ia(["vlist-t"],I);return I.length===2&&R.classes.push("vlist-t2"),R.height=y,R.depth=-m,R},ace=(t,e)=>{var r=Ia(["mspace"],[],e),n=On(t,e);return r.style.marginRight=at(n),r},iv=function(e,r,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",i+"-"+a},lH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},cH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},sce=function(e,r){var[n,i,a]=cH[e],s=new gu(n),l=new Vl([s],{width:at(i),height:at(a),style:"width:"+at(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),d=sH(["overlay"],[l],r);return d.height=a,d.style.height=at(a),d.style.width=at(i),d},Te={fontMap:lH,makeSymbol:Zs,mathsym:Xle,makeSpan:Ia,makeSvgSpan:sH,makeLineSpan:ece,makeAnchor:tce,makeFragment:oH,wrapFragment:rce,makeVList:ice,makeOrd:Yle,makeGlue:ace,staticSvg:sce,svgData:cH,tryCombineChars:Jle},Cn={number:3,unit:"mu"},rd={number:4,unit:"mu"},fl={number:5,unit:"mu"},oce={mord:{mop:Cn,mbin:rd,mrel:fl,minner:Cn},mop:{mord:Cn,mop:Cn,mrel:fl,minner:Cn},mbin:{mord:rd,mop:rd,mopen:rd,minner:rd},mrel:{mord:fl,mop:fl,mopen:fl,minner:fl},mopen:{},mclose:{mop:Cn,mbin:rd,mrel:fl,minner:Cn},mpunct:{mord:Cn,mop:Cn,mrel:fl,mopen:Cn,mclose:Cn,mpunct:Cn,minner:Cn},minner:{mord:Cn,mop:Cn,mbin:rd,mrel:fl,mopen:Cn,mpunct:Cn,minner:Cn}},lce={mord:{mop:Cn},mop:{mord:Cn,mop:Cn},mbin:{},mrel:{},mopen:{},mclose:{mop:Cn},mpunct:{},minner:{mop:Cn}},uH={},Ab={},Eb={};function ft(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,l={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},d=0;d<r.length;++d)uH[r[d]]=l;e&&(a&&(Ab[e]=a),s&&(Eb[e]=s))}function t0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;ft({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Nb=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Yn=function(e){return e.type==="ordgroup"?e.body:[e]},Fl=Te.makeSpan,cce=["leftmost","mbin","mopen","mrel","mop","mpunct"],uce=["rightmost","mrel","mclose","mpunct"],dce={display:It.DISPLAY,text:It.TEXT,script:It.SCRIPT,scriptscript:It.SCRIPTSCRIPT},hce={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},bi=function(e,r,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var l=Sr(e[s],r);if(l instanceof t1){var d=l.children;a.push(...d)}else a.push(l)}if(Te.tryCombineChars(a),!n)return a;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(dce[p.style]))}var m=Fl([i[0]||"leftmost"],[],r),y=Fl([i[1]||"rightmost"],[],r),b=n==="root";return rR(a,(T,S)=>{var w=S.classes[0],N=T.classes[0];w==="mbin"&&uce.includes(N)?S.classes[0]="mord":N==="mbin"&&cce.includes(w)&&(T.classes[0]="mord")},{node:m},y,b),rR(a,(T,S)=>{var w=pA(S),N=pA(T),C=w&&N?T.hasClass("mtight")?lce[w][N]:oce[w][N]:null;if(C)return Te.makeGlue(C,h)},{node:m},y,b),a},rR=function t(e,r,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var l=e[s],d=dH(l);if(d){t(d.children,r,n,null,a);continue}var h=!l.hasClass("mspace");if(h){var p=r(l,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),s++))}h?n.node=l:a&&l.hasClass("newline")&&(n.node=Fl(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),s++})(s)}i&&e.pop()},dH=function(e){return e instanceof t1||e instanceof jE||e instanceof r1&&e.hasClass("enclosing")?e:null},fce=function t(e,r){var n=dH(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e},pA=function(e,r){return e?(r&&(e=fce(e,r)),hce[e.classes[0]]||null):null},Wm=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Fl(r.concat(n))},Sr=function(e,r,n){if(!e)return Fl();if(Ab[e.type]){var i=Ab[e.type](e,r);if(n&&r.size!==n.size){i=Fl(r.sizingClasses(n),[i],r);var a=r.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new Ze("Got group of unknown type: '"+e.type+"'")};function av(t,e){var r=Fl(["base"],t,e),n=Fl(["strut"]);return n.style.height=at(r.height+r.depth),r.depth&&(n.style.verticalAlign=at(-r.depth)),r.children.unshift(n),r}function mA(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=bi(t,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],l=0;l<n.length;l++)if(s.push(n[l]),n[l].hasClass("mbin")||n[l].hasClass("mrel")||n[l].hasClass("allowbreak")){for(var d=!1;l<n.length-1&&n[l+1].hasClass("mspace")&&!n[l+1].hasClass("newline");)l++,s.push(n[l]),n[l].hasClass("nobreak")&&(d=!0);d||(a.push(av(s,e)),s=[])}else n[l].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(av(s,e)),s=[]),a.push(n[l]));s.length>0&&a.push(av(s,e));var h;r?(h=av(bi(r,e,!0)),h.classes=["tag"],a.push(h)):i&&a.push(i);var p=Fl(["katex-html"],a);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=at(p.height+p.depth),p.depth&&(m.style.verticalAlign=at(-p.depth))}return p}function hH(t){return new t1(t)}class ns{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=mu(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Eo&&this.children[n+1]instanceof Eo){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Eo;)i+=this.children[++n].toText();e.appendChild(new Eo(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=kr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+kr.escape(mu(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Eo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return kr.escape(this.toText())}toText(){return this.text}}class pce{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",at(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+at(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Ye={MathNode:ns,TextNode:Eo,SpaceNode:pce,newDocumentFragment:hH},Ps=function(e,r,n){return pn[r][e]&&pn[r][e].replace&&e.charCodeAt(0)!==55349&&!(aH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=pn[r][e].replace),new Ye.TextNode(e)},CE=function(e){return e.length===1?e[0]:new Ye.MathNode("mrow",e)},OE=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;pn[i][a]&&pn[i][a].replace&&(a=pn[i][a].replace);var s=Te.fontMap[n].fontName;return NE(a,s,i)?Te.fontMap[n].variant:null};function F5(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Eo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Eo&&r.text===","}else return!1}var Fa=function(e,r,n){if(e.length===1){var i=on(e[0],r);return n&&i instanceof ns&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,l=0;l<e.length;l++){var d=on(e[l],r);if(d instanceof ns&&s instanceof ns){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(F5(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&F5(s))d.children=[...s.children,...d.children],a.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||F5(s))){var h=d.children[0];h instanceof ns&&h.type==="mn"&&(h.children=[...s.children,...h.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var p=s.children[0];if(p instanceof Eo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof Eo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),a.pop())}}}a.push(d),s=d}return a},yu=function(e,r,n){return CE(Fa(e,r,n))},on=function(e,r){if(!e)return new Ye.MathNode("mrow");if(Eb[e.type]){var n=Eb[e.type](e,r);return n}else throw new Ze("Got group of unknown type: '"+e.type+"'")};function nR(t,e,r,n,i){var a=Fa(t,r),s;a.length===1&&a[0]instanceof ns&&["mrow","mtable"].includes(a[0].type)?s=a[0]:s=new Ye.MathNode("mrow",a);var l=new Ye.MathNode("annotation",[new Ye.TextNode(e)]);l.setAttribute("encoding","application/x-tex");var d=new Ye.MathNode("semantics",[s,l]),h=new Ye.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=i?"katex":"katex-mathml";return Te.makeSpan([p],[h])}var fH=function(e){return new vl({style:e.displayMode?It.DISPLAY:It.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},pH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=Te.makeSpan(n,[e])}return e},mce=function(e,r,n){var i=fH(n),a;if(n.output==="mathml")return nR(e,r,i,n.displayMode,!0);if(n.output==="html"){var s=mA(e,i);a=Te.makeSpan(["katex"],[s])}else{var l=nR(e,r,i,n.displayMode,!1),d=mA(e,i);a=Te.makeSpan(["katex"],[l,d])}return pH(a,n)},gce=function(e,r,n){var i=fH(n),a=mA(e,i),s=Te.makeSpan(["katex"],[a]);return pH(s,n)},yce={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},vce=function(e){var r=new Ye.MathNode("mo",[new Ye.TextNode(yce[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},bce={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},xce=function(e){return e.type==="ordgroup"?e.body.length:1},wce=function(e,r){function n(){var l=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=xce(h.base),m,y,b;if(p>5)d==="widehat"||d==="widecheck"?(m=420,l=2364,b=.42,y=d+"4"):(m=312,l=2340,b=.34,y="tilde4");else{var T=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(l=[0,1062,2364,2364,2364][T],m=[0,239,300,360,420][T],b=[0,.24,.3,.3,.36,.42][T],y=d+T):(l=[0,600,1033,2339,2340][T],m=[0,260,286,306,312][T],b=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new gu(y),w=new Vl([S],{width:"100%",height:at(b),viewBox:"0 0 "+l+" "+m,preserveAspectRatio:"none"});return{span:Te.makeSvgSpan([],[w],r),minWidth:0,height:b}}else{var N=[],C=bce[d],[k,$,I]=C,L=I/1e3,E=k.length,A,R;if(E===1){var F=C[3];A=["hide-tail"],R=[F]}else if(E===2)A=["halfarrow-left","halfarrow-right"],R=["xMinYMin","xMaxYMin"];else if(E===3)A=["brace-left","brace-center","brace-right"],R=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var P=0;P<E;P++){var B=new gu(k[P]),D=new Vl([B],{width:"400em",height:at(L),viewBox:"0 0 "+l+" "+I,preserveAspectRatio:R[P]+" slice"}),Q=Te.makeSvgSpan([A[P]],[D],r);if(E===1)return{span:Q,minWidth:$,height:L};Q.style.height=at(L),N.push(Q)}return{span:Te.makeSpan(["stretchy"],N,r),minWidth:$,height:L}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=at(s),a>0&&(i.style.minWidth=at(a)),i},_ce=function(e,r,n,i,a){var s,l=e.height+e.depth+n+i;if(/fbox|color|angl/.test(r)){if(s=Te.makeSpan(["stretchy",r],[],a),r==="fbox"){var d=a.color&&a.getColor();d&&(s.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new hA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new hA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new Vl(h,{width:"100%",height:at(l)});s=Te.makeSvgSpan([],[p],a)}return s.height=l,s.style.height=at(l),s},ql={encloseSpan:_ce,mathMLnode:vce,svgSpan:wce};function rr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function IE(t){var e=v2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function v2(t){return t&&(t.type==="atom"||Kle.hasOwnProperty(t.type))?t:null}var RE=(t,e)=>{var r,n,i;t&&t.type==="supsub"?(n=rr(t.base,"accent"),r=n.base,t.base=r,i=Hle(Sr(t,e)),t.base=n):(n=rr(t,"accent"),r=n.base);var a=Sr(r,e.havingCrampedStyle()),s=n.isShifty&&kr.isCharacterBox(r),l=0;if(s){var d=kr.getBaseElem(r),h=Sr(d,e.havingCrampedStyle());l=QI(h).skew}var p=n.label==="\\c",m=p?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=ql.svgSpan(n,e),y=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:l>0?{width:"calc(100% - "+at(2*l)+")",marginLeft:at(2*l)}:void 0}]},e);else{var b,T;n.label==="\\vec"?(b=Te.staticSvg("vec",e),T=Te.svgData.vec[1]):(b=Te.makeOrd({mode:n.mode,text:n.label},e,"textord"),b=QI(b),b.italic=0,T=b.width,p&&(m+=b.depth)),y=Te.makeSpan(["accent-body"],[b]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),m=a.height);var w=l;S||(w-=T/2),y.style.left=at(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var N=Te.makeSpan(["mord","accent"],[y],e);return i?(i.children[0]=N,i.height=Math.max(N.height,i.height),i.classes[0]="mord",i):N},mH=(t,e)=>{var r=t.isStretchy?ql.mathMLnode(t.label):new Ye.MathNode("mo",[Ps(t.label,t.mode)]),n=new Ye.MathNode("mover",[on(t.base,e),r]);return n.setAttribute("accent","true"),n},Sce=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));ft({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Nb(e[0]),n=!Sce.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:RE,mathmlBuilder:mH});ft({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:RE,mathmlBuilder:mH});ft({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(t,e)=>{var r=Sr(t.base,e),n=ql.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,a=Te.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return Te.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(t,e)=>{var r=ql.mathMLnode(t.label),n=new Ye.MathNode("munder",[on(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var sv=t=>{var e=new Ye.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ft({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),i=Te.wrapFragment(Sr(t.body,n,e),e),a=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=Te.wrapFragment(Sr(t.below,n,e),e),s.classes.push(a+"-arrow-pad"));var l=ql.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*l.height,h=-e.fontMetrics().axisHeight-.5*l.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(h-=i.depth);var p;if(s){var m=-e.fontMetrics().axisHeight+s.height+.5*l.height+.111;p=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:d},{type:"elem",elem:s,shift:m}]},e)}else p=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:h},{type:"elem",elem:l,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),Te.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=ql.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var i=sv(on(t.body,e));if(t.below){var a=sv(on(t.below,e));n=new Ye.MathNode("munderover",[r,a,i])}else n=new Ye.MathNode("mover",[r,i])}else if(t.below){var s=sv(on(t.below,e));n=new Ye.MathNode("munder",[r,s])}else n=sv(),n=new Ye.MathNode("mover",[r,n]);return n}});var Tce=Te.makeSpan;function gH(t,e){var r=bi(t.body,e,!0);return Tce([t.mclass],r,e)}function yH(t,e){var r,n=Fa(t.body,e);return t.mclass==="minner"?r=new Ye.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new Ye.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new Ye.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}ft({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Yn(i),isCharacterBox:kr.isCharacterBox(i)}},htmlBuilder:gH,mathmlBuilder:yH});var b2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};ft({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:b2(e[0]),body:Yn(e[1]),isCharacterBox:kr.isCharacterBox(e[1])}}});ft({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,i=e[1],a=e[0],s;n!=="\\stackrel"?s=b2(i):s="mrel";var l={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Yn(i)},d={type:"supsub",mode:a.mode,base:l,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:kr.isCharacterBox(d)}},htmlBuilder:gH,mathmlBuilder:yH});ft({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:b2(e[0]),body:Yn(e[0])}},htmlBuilder(t,e){var r=bi(t.body,e,!0),n=Te.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Fa(t.body,e),n=new Ye.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Ace={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},iR=()=>({type:"styling",body:[],mode:"math",style:"display"}),aR=t=>t.type==="textord"&&t.text==="@",Ece=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Nce(t,e,r){var n=Ace[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[a],[]),l=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[i,s,l]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function jce(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ze("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],l=iR(),d=0;d<s.length;d++)if(!aR(s[d]))l.body.push(s[d]);else{n.push(l),d+=1;var h=IE(s[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,b=d+1;b<s.length;b++){if(Ece(s[b],h)){y=!1,d=b;break}if(aR(s[b]))throw new Ze("Missing a "+h+" character to complete a CD arrow.",s[b]);p[m].body.push(s[b])}if(y)throw new Ze("Missing a "+h+" character to complete a CD arrow.",s[d])}else throw new Ze('Expected one of "<>AV=|." after @',s[d]);var T=Nce(h,p,t),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),l=iR()}a%2===0?n.push(l):n.shift(),n=[],i.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}ft({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=Te.wrapFragment(Sr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=at(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new Ye.MathNode("mrow",[on(t.label,e)]);return r=new Ye.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Ye.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});ft({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=Te.wrapFragment(Sr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new Ye.MathNode("mrow",[on(t.fragment,e)])}});ft({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=rr(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var l=rr(i[s],"textord");a+=l.text}var d=parseInt(a),h;if(isNaN(d))throw new Ze("\\@char has non-numeric argument "+a);if(d<0||d>=1114111)throw new Ze("\\@char with invalid code point "+a);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var vH=(t,e)=>{var r=bi(t.body,e.withColor(t.color),!1);return Te.makeFragment(r)},bH=(t,e)=>{var r=Fa(t.body,e.withColor(t.color)),n=new Ye.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};ft({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=rr(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:Yn(i)}},htmlBuilder:vH,mathmlBuilder:bH});ft({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=rr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:vH,mathmlBuilder:bH});ft({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&rr(i,"size").value}},htmlBuilder(t,e){var r=Te.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=at(On(t.size,e)))),r},mathmlBuilder(t,e){var r=new Ye.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",at(On(t.size,e)))),r}});var gA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},xH=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ze("Expected a control sequence",t);return e},kce=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},wH=(t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)};ft({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(gA[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=gA[n.text]),rr(e.parseFunction(),"internal");throw new Ze("Invalid token after macro prefix",n)}});ft({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Ze("Expected a control sequence",n);for(var a=0,s,l=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),l[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Ze('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new Ze('Argument number "'+n.text+'" out of order');a++,l.push([])}else{if(n.text==="EOF")throw new Ze("Expected a macro definition");l[a].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(i,{tokens:d,numArgs:a,delimiters:l},r===gA[r]),{type:"internal",mode:e.mode}}});ft({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=xH(e.gullet.popToken());e.gullet.consumeSpaces();var i=kce(e);return wH(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});ft({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=xH(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return wH(e,n,a,r==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Zp=function(e,r,n){var i=pn.math[e]&&pn.math[e].replace,a=NE(i||e,r,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return a},ME=function(e,r,n,i){var a=n.havingBaseStyle(r),s=Te.makeSpan(i.concat(a.sizingClasses(n)),[e],n),l=a.sizeMultiplier/n.sizeMultiplier;return s.height*=l,s.depth*=l,s.maxFontSize=a.sizeMultiplier,s},_H=function(e,r,n){var i=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=at(a),e.height-=a,e.depth+=a},Cce=function(e,r,n,i,a,s){var l=Te.makeSymbol(e,"Main-Regular",a,i),d=ME(l,r,i,s);return n&&_H(d,i,r),d},Oce=function(e,r,n,i){return Te.makeSymbol(e,"Size"+r+"-Regular",n,i)},SH=function(e,r,n,i,a,s){var l=Oce(e,r,a,i),d=ME(Te.makeSpan(["delimsizing","size"+r],[l],i),It.TEXT,i,s);return n&&_H(d,i,It.TEXT),d},q5=function(e,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=Te.makeSpan(["delimsizinginner",i],[Te.makeSpan([],[Te.makeSymbol(e,r,n)])]);return{type:"elem",elem:a}},H5=function(e,r,n){var i=Ao["Size4-Regular"][e.charCodeAt(0)]?Ao["Size4-Regular"][e.charCodeAt(0)][4]:Ao["Size1-Regular"][e.charCodeAt(0)][4],a=new gu("inner",Dle(e,Math.round(1e3*r))),s=new Vl([a],{width:at(i),height:at(r),style:"width:"+at(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),l=Te.makeSvgSpan([],[s],n);return l.height=r,l.style.height=at(r),l.style.width=at(i),{type:"elem",elem:l}},yA=.008,ov={type:"kern",size:-1*yA},Ice=["|","\\lvert","\\rvert","\\vert"],Rce=["\\|","\\lVert","\\rVert","\\Vert"],TH=function(e,r,n,i,a,s){var l,d,h,p,m="",y=0;l=h=p=e,d=null;var b="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?l=h="":e==="\\Downarrow"?l=h="":e==="\\updownarrow"?(l="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(l="\\Uparrow",h="",p="\\Downarrow"):Ice.includes(e)?(h="",m="vert",y=333):Rce.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(l="",h="",p="",b="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(l="",h="",p="",b="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=l="",p="",b="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(l="",h=p="",b="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=l="",p="",b="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(l="",h=p="",b="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(l="",h="",p="",b="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(l="",h="",p="",b="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(l="",d="",p="",h="",b="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(l="",d="",p="",h="",b="Size4-Regular"):e==="\\lgroup"||e===""?(l="",p="",h="",b="Size4-Regular"):e==="\\rgroup"||e===""?(l="",p="",h="",b="Size4-Regular"):e==="\\lmoustache"||e===""?(l="",p="",h="",b="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(l="",p="",h="",b="Size4-Regular");var T=Zp(l,b,a),S=T.height+T.depth,w=Zp(h,b,a),N=w.height+w.depth,C=Zp(p,b,a),k=C.height+C.depth,$=0,I=1;if(d!==null){var L=Zp(d,b,a);$=L.height+L.depth,I=2}var E=S+k+$,A=Math.max(0,Math.ceil((r-E)/(I*N))),R=E+A*I*N,F=i.fontMetrics().axisHeight;n&&(F*=i.sizeMultiplier);var P=R/2-F,B=[];if(m.length>0){var D=R-S-k,Q=Math.round(R*1e3),Z=Lle(m,Math.round(D*1e3)),W=new gu(m,Z),J=(y/1e3).toFixed(3)+"em",Y=(Q/1e3).toFixed(3)+"em",ge=new Vl([W],{width:J,height:Y,viewBox:"0 0 "+y+" "+Q}),ce=Te.makeSvgSpan([],[ge],i);ce.height=Q/1e3,ce.style.width=J,ce.style.height=Y,B.push({type:"elem",elem:ce})}else{if(B.push(q5(p,b,a)),B.push(ov),d===null){var X=R-S-k+2*yA;B.push(H5(h,X,i))}else{var re=(R-S-k-$)/2+2*yA;B.push(H5(h,re,i)),B.push(ov),B.push(q5(d,b,a)),B.push(ov),B.push(H5(h,re,i))}B.push(ov),B.push(q5(l,b,a))}var de=i.havingBaseStyle(It.TEXT),oe=Te.makeVList({positionType:"bottom",positionData:P,children:B},de);return ME(Te.makeSpan(["delimsizing","mult"],[oe],de),It.TEXT,i,s)},G5=80,K5=.08,W5=function(e,r,n,i,a){var s=Ple(e,i,n),l=new gu(e,s),d=new Vl([l],{width:"400em",height:at(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Te.makeSvgSpan(["hide-tail"],[d],a)},Mce=function(e,r){var n=r.havingBaseSizing(),i=jH("\\surd",e*n.sizeMultiplier,NH,n),a=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),l,d=0,h=0,p=0,m;return i.type==="small"?(p=1e3+1e3*s+G5,e<1?a=1:e<1.4&&(a=.7),d=(1+s+K5)/a,h=(1+s)/a,l=W5("sqrtMain",d,p,s,r),l.style.minWidth="0.853em",m=.833/a):i.type==="large"?(p=(1e3+G5)*fm[i.size],h=(fm[i.size]+s)/a,d=(fm[i.size]+s+K5)/a,l=W5("sqrtSize"+i.size,d,p,s,r),l.style.minWidth="1.02em",m=1/a):(d=e+s+K5,h=e+s,p=Math.floor(1e3*e+s)+G5,l=W5("sqrtTall",d,p,s,r),l.style.minWidth="0.742em",m=1.056),l.height=h,l.style.height=at(d),{span:l,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*a}},AH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Pce=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],EH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],fm=[0,1.2,1.8,2.4,3],Dce=function(e,r,n,i,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),AH.includes(e)||EH.includes(e))return SH(e,r,!1,n,i,a);if(Pce.includes(e))return TH(e,fm[r],!1,n,i,a);throw new Ze("Illegal delimiter: '"+e+"'")},Lce=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Bce=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"stack"}],NH=[{type:"small",style:It.SCRIPTSCRIPT},{type:"small",style:It.SCRIPT},{type:"small",style:It.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Uce=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},jH=function(e,r,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var l=Zp(e,Uce(n[s]),"math"),d=l.height+l.depth;if(n[s].type==="small"){var h=i.havingBaseStyle(n[s].style);d*=h.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},kH=function(e,r,n,i,a,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var l;EH.includes(e)?l=Lce:AH.includes(e)?l=NH:l=Bce;var d=jH(e,r,l,i);return d.type==="small"?Cce(e,d.style,n,i,a,s):d.type==="large"?SH(e,d.size,n,i,a,s):TH(e,r,n,i,a,s)},zce=function(e,r,n,i,a,s){var l=i.fontMetrics().axisHeight*i.sizeMultiplier,d=901,h=5/i.fontMetrics().ptPerEm,p=Math.max(r-l,n+l),m=Math.max(p/500*d,2*p-h);return kH(e,m,!0,i,a,s)},Ol={sqrtImage:Mce,sizedDelim:Dce,sizeToMaxHeight:fm,customSizedDelim:kH,leftRightDelim:zce},sR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},$ce=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function x2(t,e){var r=v2(t);if(r&&$ce.includes(r.text))return r;throw r?new Ze("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Ze("Invalid delimiter type '"+t.type+"'",t)}ft({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=x2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:sR[t.funcName].size,mclass:sR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?Te.makeSpan([t.mclass]):Ol.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Ps(t.delim,t.mode));var r=new Ye.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=at(Ol.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function oR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ft({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Ze("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:x2(e[0],t).text,color:r}}});ft({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=x2(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=rr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(t,e)=>{oR(t);for(var r=bi(t.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<r.length;s++)r[s].isMiddle?a=!0:(n=Math.max(r[s].height,n),i=Math.max(r[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var l;if(t.left==="."?l=Wm(e,["mopen"]):l=Ol.leftRightDelim(t.left,n,i,e,t.mode,["mopen"]),r.unshift(l),a)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Ol.leftRightDelim(p.delim,n,i,p.options,t.mode,[]))}var m;if(t.right===".")m=Wm(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Ol.leftRightDelim(t.right,n,i,y,t.mode,["mclose"])}return r.push(m),Te.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{oR(t);var r=Fa(t.body,e);if(t.left!=="."){var n=new Ye.MathNode("mo",[Ps(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new Ye.MathNode("mo",[Ps(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return CE(r)}});ft({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=x2(e[0],t);if(!t.parser.leftrightDepth)throw new Ze("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Wm(e,[]);else{r=Ol.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Ps("|","text"):Ps(t.delim,t.mode),n=new Ye.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var PE=(t,e)=>{var r=Te.wrapFragment(Sr(t.body,e),e),n=t.label.slice(1),i=e.sizeMultiplier,a,s=0,l=kr.isCharacterBox(t.body);if(n==="sout")a=Te.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=On({number:.6,unit:"pt"},e),h=On({number:.35,unit:"ex"},e),p=e.havingBaseSizing();i=i/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=at(m/2+d);var y=Math.floor(1e3*m*i),b=Rle(y),T=new Vl([new gu("phase",b)],{width:"400em",height:at(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=Te.makeSvgSpan(["hide-tail"],[T],e),a.style.height=at(m),s=r.depth+d+h}else{/cancel/.test(n)?l||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,N=0;/box/.test(n)?(N=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:N),w=S):n==="angl"?(N=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*N,w=Math.max(0,.25-r.depth)):(S=l?.2:0,w=S),a=ql.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=at(N)):n==="angl"&&N!==.049&&(a.style.borderTopWidth=at(N),a.style.borderRightWidth=at(N)),s=r.depth+w,t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,t.borderColor&&(a.style.borderColor=t.borderColor))}var C;if(t.backgroundColor)C=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var k=/cancel|phase/.test(n)?["svg-align"]:[];C=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:k}]},e)}return/cancel/.test(n)&&(C.height=r.height,C.depth=r.depth),/cancel/.test(n)&&!l?Te.makeSpan(["mord","cancel-lap"],[C],e):Te.makeSpan(["mord"],[C],e)},DE=(t,e)=>{var r=0,n=new Ye.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[on(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};ft({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=rr(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:PE,mathmlBuilder:DE});ft({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=rr(e[0],"color-token").color,s=rr(e[1],"color-token").color,l=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:l}},htmlBuilder:PE,mathmlBuilder:DE});ft({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});ft({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:PE,mathmlBuilder:DE});ft({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var CH={};function Bo(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,l={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},d=0;d<r.length;++d)CH[r[d]]=l;a&&(Ab[e]=a),s&&(Eb[e]=s)}var OH={};function G(t,e){OH[t]=e}function lR(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var w2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Ze("{"+t.envName+"} can be used only in display mode.")};function LE(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function _u(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:l,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var b=t.gullet.expandMacroAsText("\\arraystretch");if(b==null)s=1;else if(s=parseFloat(b),!s||s<0)throw new Ze("Invalid \\arraystretch: "+b)}t.gullet.beginGroup();var T=[],S=[T],w=[],N=[],C=d!=null?[]:void 0;function k(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function $(){C&&(t.gullet.macros.get("\\df@tag")?(C.push(t.subparse([new cs("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):C.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),N.push(lR(t));;){var I=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),I={type:"ordgroup",mode:t.mode,body:I},r&&(I={type:"styling",mode:t.mode,style:r,body:[I]}),T.push(I);var L=t.fetch().text;if(L==="&"){if(m&&T.length===m){if(h||l)throw new Ze("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(L==="\\end"){$(),T.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),N.length<S.length+1&&N.push([]);break}else if(L==="\\\\"){t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),w.push(E?E.value:null),$(),N.push(lR(t)),T=[],S.push(T),k()}else throw new Ze("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:s,body:S,cols:a,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:N,colSeparationType:l,tags:C,leqno:y}}function BE(t){return t.slice(0,1)==="d"?"display":"text"}var Uo=function(e,r){var n,i,a=e.body.length,s=e.hLinesBeforeRow,l=0,d=new Array(a),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var b=r.havingStyle(It.SCRIPT).sizeMultiplier;y=.2778*(b/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?On({number:3,unit:"ex"},r):12*m,S=3*m,w=e.arraystretch*T,N=.7*w,C=.3*w,k=0;function $(Ie){for(var st=0;st<Ie.length;++st)st>0&&(k+=.25),h.push({pos:k,isDashed:Ie[st]})}for($(s[0]),n=0;n<e.body.length;++n){var I=e.body[n],L=N,E=C;l<I.length&&(l=I.length);var A=new Array(I.length);for(i=0;i<I.length;++i){var R=Sr(I[i],r);E<R.depth&&(E=R.depth),L<R.height&&(L=R.height),A[i]=R}var F=e.rowGaps[n],P=0;F&&(P=On(F,r),P>0&&(P+=C,E<P&&(E=P),P=0)),e.addJot&&(E+=S),A.height=L,A.depth=E,k+=L,A.pos=k,k+=E+P,d[n]=A,$(s[n+1])}var B=k/2+r.fontMetrics().axisHeight,D=e.cols||[],Q=[],Z,W,J=[];if(e.tags&&e.tags.some(Ie=>Ie))for(n=0;n<a;++n){var Y=d[n],ge=Y.pos-B,ce=e.tags[n],X=void 0;ce===!0?X=Te.makeSpan(["eqn-num"],[],r):ce===!1?X=Te.makeSpan([],[],r):X=Te.makeSpan([],bi(ce,r,!0),r),X.depth=Y.depth,X.height=Y.height,J.push({type:"elem",elem:X,shift:ge})}for(i=0,W=0;i<l||W<D.length;++i,++W){for(var re=D[W]||{},de=!0;re.type==="separator";){if(de||(Z=Te.makeSpan(["arraycolsep"],[]),Z.style.width=at(r.fontMetrics().doubleRuleSep),Q.push(Z)),re.separator==="|"||re.separator===":"){var oe=re.separator==="|"?"solid":"dashed",ae=Te.makeSpan(["vertical-separator"],[],r);ae.style.height=at(k),ae.style.borderRightWidth=at(p),ae.style.borderRightStyle=oe,ae.style.margin="0 "+at(-p/2);var pe=k-B;pe&&(ae.style.verticalAlign=at(-pe)),Q.push(ae)}else throw new Ze("Invalid separator type: "+re.separator);W++,re=D[W]||{},de=!1}if(!(i>=l)){var ve=void 0;(i>0||e.hskipBeforeAndAfter)&&(ve=kr.deflt(re.pregap,y),ve!==0&&(Z=Te.makeSpan(["arraycolsep"],[]),Z.style.width=at(ve),Q.push(Z)));var Qe=[];for(n=0;n<a;++n){var Ne=d[n],le=Ne[i];if(le){var we=Ne.pos-B;le.depth=Ne.depth,le.height=Ne.height,Qe.push({type:"elem",elem:le,shift:we})}}Qe=Te.makeVList({positionType:"individualShift",children:Qe},r),Qe=Te.makeSpan(["col-align-"+(re.align||"c")],[Qe]),Q.push(Qe),(i<l-1||e.hskipBeforeAndAfter)&&(ve=kr.deflt(re.postgap,y),ve!==0&&(Z=Te.makeSpan(["arraycolsep"],[]),Z.style.width=at(ve),Q.push(Z)))}}if(d=Te.makeSpan(["mtable"],Q),h.length>0){for(var xe=Te.makeLineSpan("hline",r,p),ut=Te.makeLineSpan("hdashline",r,p),He=[{type:"elem",elem:d,shift:0}];h.length>0;){var ct=h.pop(),nt=ct.pos-B;ct.isDashed?He.push({type:"elem",elem:ut,shift:nt}):He.push({type:"elem",elem:xe,shift:nt})}d=Te.makeVList({positionType:"individualShift",children:He},r)}if(J.length===0)return Te.makeSpan(["mord"],[d],r);var Ut=Te.makeVList({positionType:"individualShift",children:J},r);return Ut=Te.makeSpan(["tag"],[Ut],r),Te.makeFragment([d,Ut])},Vce={c:"center ",l:"left ",r:"right "},zo=function(e,r){for(var n=[],i=new Ye.MathNode("mtd",[],["mtr-glue"]),a=new Ye.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var l=e.body[s],d=[],h=0;h<l.length;h++)d.push(new Ye.MathNode("mtd",[on(l[h],r)]));e.tags&&e.tags[s]&&(d.unshift(i),d.push(i),e.leqno?d.unshift(a):d.push(a)),n.push(new Ye.MathNode("mtr",d))}var p=new Ye.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",at(m));var y="",b="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,N=0,C=T.length;T[0].type==="separator"&&(y+="top ",N=1),T[T.length-1].type==="separator"&&(y+="bottom ",C-=1);for(var k=N;k<C;k++)T[k].type==="align"?(b+=Vce[T[k].align],w&&(S+="none "),w=!0):T[k].type==="separator"&&w&&(S+=T[k].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",b.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var $=e.cols||[],I="",L=1;L<$.length;L++)I+=L%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var E="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var R=1;R<A.length-1;R++)E+=A[R].length===0?"none ":A[R][0]?"dashed ":"solid ";return/[sd]/.test(E)&&p.setAttribute("rowlines",E.trim()),y!==""&&(p=new Ye.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new Ye.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},IH=function(e,r){e.envName.indexOf("ed")===-1&&w2(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=_u(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:LE(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),l,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=rr(r[0].body[m],"textord");p+=y.text}l=Number(p),d=l*2}var b=!d;s.body.forEach(function(N){for(var C=1;C<N.length;C+=2){var k=rr(N[C],"styling"),$=rr(k.body[0],"ordgroup");$.body.unshift(h)}if(b)d<N.length&&(d=N.length);else{var I=N.length/2;if(l<I)throw new Ze("Too many math in a row: "+("expected "+l+", but got "+I),N[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&b&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=b?"align":"alignat",s};Bo({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=v2(e[0]),n=r?[e[0]]:rr(e[0],"ordgroup").body,i=n.map(function(s){var l=IE(s),d=l.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Ze("Unknown column alignment: "+d,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return _u(t.parser,a,BE(t.envName))},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new Ze("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=_u(t.parser,n,BE(t.envName)),s=Math.max(0,...a.body.map(l=>l.length));return a.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=_u(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=v2(e[0]),n=r?[e[0]]:rr(e[0],"ordgroup").body,i=n.map(function(s){var l=IE(s),d=l.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Ze("Unknown column alignment: "+d,s)});if(i.length>1)throw new Ze("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=_u(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Ze("{subarray} can contain only one column");return a},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=_u(t.parser,e,BE(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:IH,htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&w2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:LE(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return _u(t.parser,e,"display")},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:IH,htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){w2(t);var e={autoTag:LE(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return _u(t.parser,e,"display")},htmlBuilder:Uo,mathmlBuilder:zo});Bo({type:"array",names:["CD"],props:{numArgs:0},handler(t){return w2(t),jce(t.parser)},htmlBuilder:Uo,mathmlBuilder:zo});G("\\nonumber","\\gdef\\@eqnsw{0}");G("\\notag","\\nonumber");ft({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Ze(t.funcName+" valid only within array environment")}});var cR=CH;ft({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new Ze("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=rr(i.body[s],"textord").text;if(n==="\\begin"){if(!cR.hasOwnProperty(a))throw new Ze("No such environment: "+a,i);var l=cR[a],{args:d,optArgs:h}=r.parseArguments("\\begin{"+a+"}",l),p={mode:r.mode,envName:a,parser:r},m=l.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,b=rr(r.parseFunction(),"environment");if(b.name!==a)throw new Ze("Mismatch: \\begin{"+a+"} matched by \\end{"+b.name+"}",y);return m}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var RH=(t,e)=>{var r=t.font,n=e.withFont(r);return Sr(t.body,n)},MH=(t,e)=>{var r=t.font,n=e.withFont(r);return on(t.body,n)},uR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ft({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=Nb(e[0]),a=n;return a in uR&&(a=uR[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}},htmlBuilder:RH,mathmlBuilder:MH});ft({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],i=kr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:b2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});ft({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:a}=r,s=r.parseExpression(!0,i),l="math"+n.slice(1);return{type:"font",mode:a,font:l,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:RH,mathmlBuilder:MH});var PH=(t,e)=>{var r=e;return t==="display"?r=r.id>=It.SCRIPT.id?r.text():It.DISPLAY:t==="text"&&r.size===It.DISPLAY.size?r=It.TEXT:t==="script"?r=It.SCRIPT:t==="scriptscript"&&(r=It.SCRIPTSCRIPT),r},UE=(t,e)=>{var r=PH(t.size,e.style),n=r.fracNum(),i=r.fracDen(),a;a=e.havingStyle(n);var s=Sr(t.numer,a,e);if(t.continued){var l=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<l?l:s.height,s.depth=s.depth<d?d:s.depth}a=e.havingStyle(i);var h=Sr(t.denom,a,e),p,m,y;t.hasBarLine?(t.barSize?(m=On(t.barSize,e),p=Te.makeLineSpan("frac-line",e,m)):p=Te.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var b,T,S;r.size===It.DISPLAY.size||t.size==="display"?(b=e.fontMetrics().num1,m>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(m>0?(b=e.fontMetrics().num2,T=y):(b=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(p){var C=e.fontMetrics().axisHeight;b-s.depth-(C+.5*m)<T&&(b+=T-(b-s.depth-(C+.5*m))),C-.5*m-(h.height-S)<T&&(S+=T-(C-.5*m-(h.height-S)));var k=-(C-.5*m);w=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:p,shift:k},{type:"elem",elem:s,shift:-b}]},e)}else{var N=b-s.depth-(h.height-S);N<T&&(b+=.5*(T-N),S+=.5*(T-N)),w=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:s,shift:-b}]},e)}a=e.havingStyle(r),w.height*=a.sizeMultiplier/e.sizeMultiplier,w.depth*=a.sizeMultiplier/e.sizeMultiplier;var $;r.size===It.DISPLAY.size?$=e.fontMetrics().delim1:r.size===It.SCRIPTSCRIPT.size?$=e.havingStyle(It.SCRIPT).fontMetrics().delim2:$=e.fontMetrics().delim2;var I,L;return t.leftDelim==null?I=Wm(e,["mopen"]):I=Ol.customSizedDelim(t.leftDelim,$,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?L=Te.makeSpan([]):t.rightDelim==null?L=Wm(e,["mclose"]):L=Ol.customSizedDelim(t.rightDelim,$,!0,e.havingStyle(r),t.mode,["mclose"]),Te.makeSpan(["mord"].concat(a.sizingClasses(e)),[I,Te.makeSpan(["mfrac"],[w]),L],e)},zE=(t,e)=>{var r=new Ye.MathNode("mfrac",[on(t.numer,e),on(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=On(t.barSize,e);r.setAttribute("linethickness",at(n))}var i=PH(t.size,e.style);if(i.size!==e.style.size){r=new Ye.MathNode("mstyle",[r]);var a=i.size===It.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var l=new Ye.MathNode("mo",[new Ye.TextNode(t.leftDelim.replace("\\",""))]);l.setAttribute("fence","true"),s.push(l)}if(s.push(r),t.rightDelim!=null){var d=new Ye.MathNode("mo",[new Ye.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return CE(s)}return r};ft({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1],s,l=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,l="(",d=")";break;case"\\\\bracefrac":s=!1,l="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,l="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:l,rightDelim:d,size:h,barSize:null}},htmlBuilder:UE,mathmlBuilder:zE});ft({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});ft({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var dR=["display","text","script","scriptscript"],hR=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};ft({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],i=e[5],a=Nb(e[0]),s=a.type==="atom"&&a.family==="open"?hR(a.text):null,l=Nb(e[1]),d=l.type==="atom"&&l.family==="close"?hR(l.text):null,h=rr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){var T=rr(b.body[0],"textord");y=dR[Number(T.text)]}}else b=rr(b,"textord"),y=dR[Number(b.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:p,barSize:m,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:UE,mathmlBuilder:zE});ft({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:rr(e[0],"size").value,token:i}}});ft({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=vle(rr(e[1],"infix").size),s=e[2],l=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:l,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:UE,mathmlBuilder:zE});var DH=(t,e)=>{var r=e.style,n,i;t.type==="supsub"?(n=t.sup?Sr(t.sup,e.havingStyle(r.sup()),e):Sr(t.sub,e.havingStyle(r.sub()),e),i=rr(t.base,"horizBrace")):i=rr(t,"horizBrace");var a=Sr(i.base,e.havingBaseStyle(It.DISPLAY)),s=ql.svgSpan(i,e),l;if(i.isOver?(l=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),l.children[0].children[0].children[1].classes.push("svg-align")):(l=Te.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),l.children[0].children[0].children[0].classes.push("svg-align")),n){var d=Te.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e);i.isOver?l=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):l=Te.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return Te.makeSpan(["mord",i.isOver?"mover":"munder"],[l],e)},Fce=(t,e)=>{var r=ql.mathMLnode(t.label);return new Ye.MathNode(t.isOver?"mover":"munder",[on(t.base,e),r])};ft({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:DH,mathmlBuilder:Fce});ft({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],i=rr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Yn(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=bi(t.body,e,!1);return Te.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=yu(t.body,e);return r instanceof ns||(r=new ns("mrow",[r])),r.setAttribute("href",t.href),r}});ft({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=rr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var l={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Yn(l)}}});ft({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Yn(e[0])}},htmlBuilder(t,e){var r=bi(t.body,e,!1);return Te.makeFragment(r)},mathmlBuilder(t,e){return new Ye.MathNode("mrow",Fa(t.body,e))}});ft({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:i}=t,a=rr(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l,d={};switch(n){case"\\htmlClass":d.class=a,l={command:"\\htmlClass",class:a};break;case"\\htmlId":d.id=a,l={command:"\\htmlId",id:a};break;case"\\htmlStyle":d.style=a,l={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var h=a.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new Ze("\\htmlData key/value '"+m+"' missing equals sign");var b=m.slice(0,y),T=m.slice(y+1);d["data-"+b.trim()]=T}l={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(l)?{type:"html",mode:r.mode,attributes:d,body:Yn(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=bi(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=Te.makeSpan(n,r,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&i.setAttribute(a,t.attributes[a]);return i},mathmlBuilder:(t,e)=>yu(t.body,e)});ft({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Yn(e[0]),mathml:Yn(e[1])}},htmlBuilder:(t,e)=>{var r=bi(t.html,e,!1);return Te.makeFragment(r)},mathmlBuilder:(t,e)=>yu(t.mathml,e)});var X5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Ze("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!tH(n))throw new Ze("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};ft({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},l="";if(r[0])for(var d=rr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":l=y;break;case"width":i=X5(y);break;case"height":a=X5(y);break;case"totalheight":s=X5(y);break;default:throw new Ze("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var b=rr(e[0],"url").url;return l===""&&(l=b,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:b})?{type:"includegraphics",mode:n.mode,alt:l,width:i,height:a,totalheight:s,src:b}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=On(t.height,e),n=0;t.totalheight.number>0&&(n=On(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=On(t.width,e));var a={height:at(r+n)};i>0&&(a.width=at(i)),n>0&&(a.verticalAlign=at(-n));var s=new Fle(t.src,t.alt,a);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new Ye.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=On(t.height,e),i=0;if(t.totalheight.number>0&&(i=On(t.totalheight,e)-n,r.setAttribute("valign",at(-i))),r.setAttribute("height",at(n+i)),t.width.number>0){var a=On(t.width,e);r.setAttribute("width",at(a))}return r.setAttribute("src",t.src),r}});ft({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=rr(e[0],"size");if(r.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(t,e){return Te.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=On(t.dimension,e);return new Ye.SpaceNode(r)}});ft({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=Te.makeSpan([],[Sr(t.body,e)]),r=Te.makeSpan(["inner"],[r],e)):r=Te.makeSpan(["inner"],[Sr(t.body,e)]);var n=Te.makeSpan(["fix"],[]),i=Te.makeSpan([t.alignment],[r,n],e),a=Te.makeSpan(["strut"]);return a.style.height=at(i.height+i.depth),i.depth&&(a.style.verticalAlign=at(-i.depth)),i.children.unshift(a),i=Te.makeSpan(["thinbox"],[i],e),Te.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var r=new Ye.MathNode("mpadded",[on(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});ft({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}});ft({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Ze("Mismatched "+t.funcName)}});var fR=(t,e)=>{switch(e.style.size){case It.DISPLAY.size:return t.display;case It.TEXT.size:return t.text;case It.SCRIPT.size:return t.script;case It.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};ft({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Yn(e[0]),text:Yn(e[1]),script:Yn(e[2]),scriptscript:Yn(e[3])}},htmlBuilder:(t,e)=>{var r=fR(t,e),n=bi(r,e,!1);return Te.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=fR(t,e);return yu(r,e)}});var LH=(t,e,r,n,i,a,s)=>{t=Te.makeSpan([],[t]);var l=r&&kr.isCharacterBox(r),d,h;if(e){var p=Sr(e,n.havingStyle(i.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Sr(r,n.havingStyle(i.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var b=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=Te.makeVList({positionType:"bottom",positionData:b,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:at(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:at(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=Te.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:at(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var S=t.depth+s;y=Te.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:at(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&a!==0&&!l){var N=Te.makeSpan(["mspace"],[],n);N.style.marginRight=at(a),w.unshift(N)}return Te.makeSpan(["mop","op-limits"],w,n)},BH=["\\smallint"],Tf=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=rr(t.base,"op"),i=!0):a=rr(t,"op");var s=e.style,l=!1;s.size===It.DISPLAY.size&&a.symbol&&!BH.includes(a.name)&&(l=!0);var d;if(a.symbol){var h=l?"Size2-Regular":"Size1-Regular",p="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(p=a.name.slice(1),a.name=p==="oiint"?"\\iint":"\\iiint"),d=Te.makeSymbol(a.name,h,"math",e,["mop","op-symbol",l?"large-op":"small-op"]),p.length>0){var m=d.italic,y=Te.staticSvg(p+"Size"+(l?"2":"1"),e);d=Te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:l?.08:0}]},e),a.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(a.body){var b=bi(a.body,e,!0);b.length===1&&b[0]instanceof Ms?(d=b[0],d.classes[0]="mop"):d=Te.makeSpan(["mop"],b,e)}else{for(var T=[],S=1;S<a.name.length;S++)T.push(Te.mathsym(a.name[S],a.mode,e));d=Te.makeSpan(["mop"],T,e)}var w=0,N=0;return(d instanceof Ms||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,N=d.italic),i?LH(d,r,n,e,s,N,w):(w&&(d.style.position="relative",d.style.top=at(w)),d)},n1=(t,e)=>{var r;if(t.symbol)r=new ns("mo",[Ps(t.name,t.mode)]),BH.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new ns("mo",Fa(t.body,e));else{r=new ns("mi",[new Eo(t.name.slice(1))]);var n=new ns("mo",[Ps("","text")]);t.parentIsSupSub?r=new ns("mrow",[r,n]):r=hH([r,n])}return r},qce={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ft({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=qce[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:Tf,mathmlBuilder:n1});ft({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Yn(n)}},htmlBuilder:Tf,mathmlBuilder:n1});var Hce={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ft({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Tf,mathmlBuilder:n1});ft({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Tf,mathmlBuilder:n1});ft({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Hce[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Tf,mathmlBuilder:n1});var UH=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=rr(t.base,"operatorname"),i=!0):a=rr(t,"operatorname");var s;if(a.body.length>0){for(var l=a.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=bi(l,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof Ms&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Te.makeSpan(["mop"],d,e)}else s=Te.makeSpan(["mop"],[],e);return i?LH(s,r,n,e,e.style,0,0):s},Gce=(t,e)=>{for(var r=Fa(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(!(a instanceof Ye.SpaceNode))if(a instanceof Ye.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof Ye.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var l=r.map(p=>p.toText()).join("");r=[new Ye.TextNode(l)]}var d=new Ye.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new Ye.MathNode("mo",[Ps("","text")]);return t.parentIsSupSub?new Ye.MathNode("mrow",[d,h]):Ye.newDocumentFragment([d,h])};ft({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:Yn(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:UH,mathmlBuilder:Gce});G("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");t0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?Te.makeFragment(bi(t.body,e,!1)):Te.makeSpan(["mord"],bi(t.body,e,!0),e)},mathmlBuilder(t,e){return yu(t.body,e,!0)}});ft({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Sr(t.body,e.havingCrampedStyle()),n=Te.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return Te.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var r=new Ye.MathNode("mo",[new Ye.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ye.MathNode("mover",[on(t.body,e),r]);return n.setAttribute("accent","true"),n}});ft({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Yn(n)}},htmlBuilder:(t,e)=>{var r=bi(t.body,e.withPhantom(),!1);return Te.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Fa(t.body,e);return new Ye.MathNode("mphantom",r)}});ft({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Te.makeSpan([],[Sr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),Te.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Fa(Yn(t.body),e),n=new Ye.MathNode("mphantom",r),i=new Ye.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});ft({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=Te.makeSpan(["inner"],[Sr(t.body,e.withPhantom())]),n=Te.makeSpan(["fix"],[]);return Te.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Fa(Yn(t.body),e),n=new Ye.MathNode("mphantom",r),i=new Ye.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});ft({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=rr(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=Sr(t.body,e),n=On(t.dy,e);return Te.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new Ye.MathNode("mpadded",[on(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});ft({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});ft({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],a=rr(e[0],"size"),s=rr(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&rr(i,"size").value,width:a.value,height:s.value}},htmlBuilder(t,e){var r=Te.makeSpan(["mord","rule"],[],e),n=On(t.width,e),i=On(t.height,e),a=t.shift?On(t.shift,e):0;return r.style.borderRightWidth=at(n),r.style.borderTopWidth=at(i),r.style.bottom=at(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=i*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=On(t.width,e),n=On(t.height,e),i=t.shift?On(t.shift,e):0,a=e.color&&e.getColor()||"black",s=new Ye.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",at(r)),s.setAttribute("height",at(n));var l=new Ye.MathNode("mpadded",[s]);return i>=0?l.setAttribute("height",at(i)):(l.setAttribute("height",at(i)),l.setAttribute("depth",at(-i))),l.setAttribute("voffset",at(i)),l}});function zH(t,e,r){for(var n=bi(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return Te.makeFragment(n)}var pR=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Kce=(t,e)=>{var r=e.havingSize(t.size);return zH(t.body,r,e)};ft({type:"sizing",names:pR,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:pR.indexOf(n)+1,body:a}},htmlBuilder:Kce,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Fa(t.body,r),i=new Ye.MathNode("mstyle",n);return i.setAttribute("mathsize",at(r.sizeMultiplier)),i}});ft({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,i=!1,a=!1,s=r[0]&&rr(r[0],"ordgroup");if(s)for(var l="",d=0;d<s.body.length;++d){var h=s.body[d];if(l=h.text,l==="t")i=!0;else if(l==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:i,smashDepth:a}},htmlBuilder:(t,e)=>{var r=Te.makeSpan([],[Sr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return Te.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var r=new Ye.MathNode("mpadded",[on(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});ft({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(t,e){var r=Sr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=Te.wrapFragment(r,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<It.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,l=r.height+r.depth+s+i,{span:d,ruleWidth:h,advanceWidth:p}=Ol.sqrtImage(l,e),m=d.height-h;m>r.height+r.depth+s&&(s=(s+m-r.height-r.depth)/2);var y=d.height-r.height-s-h;r.style.paddingLeft=at(p);var b=Te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var T=e.havingStyle(It.SCRIPTSCRIPT),S=Sr(t.index,T,e),w=.6*(b.height-b.depth),N=Te.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),C=Te.makeSpan(["root"],[N]);return Te.makeSpan(["mord","sqrt"],[C,b],e)}else return Te.makeSpan(["mord","sqrt"],[b],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new Ye.MathNode("mroot",[on(r,e),on(n,e)]):new Ye.MathNode("msqrt",[on(r,e)])}});var mR={display:It.DISPLAY,text:It.TEXT,script:It.SCRIPT,scriptscript:It.SCRIPTSCRIPT};ft({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(t,e){var r=mR[t.style],n=e.havingStyle(r).withFont("");return zH(t.body,n,e)},mathmlBuilder(t,e){var r=mR[t.style],n=e.havingStyle(r),i=Fa(t.body,n),a=new Ye.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},l=s[t.style];return a.setAttribute("scriptlevel",l[0]),a.setAttribute("displaystyle",l[1]),a}});var Wce=function(e,r){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===It.DISPLAY.size||n.alwaysHandleSupSub);return i?Tf:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===It.DISPLAY.size||n.limits);return a?UH:null}else{if(n.type==="accent")return kr.isCharacterBox(n.base)?RE:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?DH:null}else return null}else return null};t0({type:"supsub",htmlBuilder(t,e){var r=Wce(t,e);if(r)return r(t,e);var{base:n,sup:i,sub:a}=t,s=Sr(n,e),l,d,h=e.fontMetrics(),p=0,m=0,y=n&&kr.isCharacterBox(n);if(i){var b=e.havingStyle(e.style.sup());l=Sr(i,b,e),y||(p=s.height-b.fontMetrics().supDrop*b.sizeMultiplier/e.sizeMultiplier)}if(a){var T=e.havingStyle(e.style.sub());d=Sr(a,T,e),y||(m=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===It.DISPLAY?S=h.sup1:e.style.cramped?S=h.sup3:S=h.sup2;var w=e.sizeMultiplier,N=at(.5/h.ptPerEm/w),C=null;if(d){var k=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof Ms||k)&&(C=at(-s.italic))}var $;if(l&&d){p=Math.max(p,S,l.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var I=h.defaultRuleThickness,L=4*I;if(p-l.depth-(d.height-m)<L){m=L-(p-l.depth)+d.height;var E=.8*h.xHeight-(p-l.depth);E>0&&(p+=E,m-=E)}var A=[{type:"elem",elem:d,shift:m,marginRight:N,marginLeft:C},{type:"elem",elem:l,shift:-p,marginRight:N}];$=Te.makeVList({positionType:"individualShift",children:A},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var R=[{type:"elem",elem:d,marginLeft:C,marginRight:N}];$=Te.makeVList({positionType:"shift",positionData:m,children:R},e)}else if(l)p=Math.max(p,S,l.depth+.25*h.xHeight),$=Te.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:l,marginRight:N}]},e);else throw new Error("supsub must have either sup or sub.");var F=pA(s,"right")||"mord";return Te.makeSpan([F],[s,Te.makeSpan(["msupsub"],[$])],e)},mathmlBuilder(t,e){var r=!1,n,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var a=[on(t.base,e)];t.sub&&a.push(on(t.sub,e)),t.sup&&a.push(on(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===It.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===It.DISPLAY||h.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===It.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===It.DISPLAY)?s="munder":s="msub"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===It.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===It.DISPLAY)?s="mover":s="msup"}return new Ye.MathNode(s,a)}});t0({type:"atom",htmlBuilder(t,e){return Te.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new Ye.MathNode("mo",[Ps(t.text,t.mode)]);if(t.family==="bin"){var n=OE(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var $H={mi:"italic",mn:"normal",mtext:"normal"};t0({type:"mathord",htmlBuilder(t,e){return Te.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new Ye.MathNode("mi",[Ps(t.text,t.mode,e)]),n=OE(t,e)||"italic";return n!==$H[r.type]&&r.setAttribute("mathvariant",n),r}});t0({type:"textord",htmlBuilder(t,e){return Te.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=Ps(t.text,t.mode,e),n=OE(t,e)||"normal",i;return t.mode==="text"?i=new Ye.MathNode("mtext",[r]):/[0-9]/.test(t.text)?i=new Ye.MathNode("mn",[r]):t.text==="\\prime"?i=new Ye.MathNode("mo",[r]):i=new Ye.MathNode("mi",[r]),n!==$H[i.type]&&i.setAttribute("mathvariant",n),i}});var Q5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Y5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};t0({type:"spacing",htmlBuilder(t,e){if(Y5.hasOwnProperty(t.text)){var r=Y5[t.text].className||"";if(t.mode==="text"){var n=Te.makeOrd(t,e,"textord");return n.classes.push(r),n}else return Te.makeSpan(["mspace",r],[Te.mathsym(t.text,t.mode,e)],e)}else{if(Q5.hasOwnProperty(t.text))return Te.makeSpan(["mspace",Q5[t.text]],[],e);throw new Ze('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(Y5.hasOwnProperty(t.text))r=new Ye.MathNode("mtext",[new Ye.TextNode("")]);else{if(Q5.hasOwnProperty(t.text))return new Ye.MathNode("mspace");throw new Ze('Unknown type of space "'+t.text+'"')}return r}});var gR=()=>{var t=new Ye.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};t0({type:"tag",mathmlBuilder(t,e){var r=new Ye.MathNode("mtable",[new Ye.MathNode("mtr",[gR(),new Ye.MathNode("mtd",[yu(t.body,e)]),gR(),new Ye.MathNode("mtd",[yu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var yR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},vR={"\\textbf":"textbf","\\textmd":"textmd"},Xce={"\\textit":"textit","\\textup":"textup"},bR=(t,e)=>{var r=t.font;if(r){if(yR[r])return e.withTextFontFamily(yR[r]);if(vR[r])return e.withTextFontWeight(vR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Xce[r])};ft({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:Yn(i),font:n}},htmlBuilder(t,e){var r=bR(t,e),n=bi(t.body,r,!0);return Te.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=bR(t,e);return yu(t.body,r)}});ft({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Sr(t.body,e),n=Te.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=Te.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return Te.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var r=new Ye.MathNode("mo",[new Ye.TextNode("")]);r.setAttribute("stretchy","true");var n=new Ye.MathNode("munder",[on(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});ft({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Sr(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return Te.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new Ye.MathNode("mpadded",[on(t.body,e)],["vcenter"])}});ft({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Ze("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=xR(t),n=[],i=e.havingStyle(e.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),n.push(Te.makeSymbol(s,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return Te.makeSpan(["mord","text"].concat(i.sizingClasses(e)),Te.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new Ye.TextNode(xR(t)),n=new Ye.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var xR=t=>t.body.replace(/ /g,t.star?"":""),Qc=uH,VH=`[ \r
	]`,Qce="\\\\[a-zA-Z@]+",Yce="\\\\[^\uD800-\uDFFF]",Zce="("+Qce+")"+VH+"*",Jce=`\\\\(
|[ \r	]+
?)[ \r	]*`,vA="[-]",eue=new RegExp(vA+"+$"),tue="("+VH+"+)|"+(Jce+"|")+"([!-\\[\\]---]"+(vA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(vA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Zce)+("|"+Yce+")");class wR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(tue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new cs("EOF",new Ma(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Ze("Unexpected character: '"+e[r]+"'",new cs(e[r],new Ma(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new cs(i,new Ma(this,r,this.tokenRegex.lastIndex))}}class rue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ze("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var nue=OH;G("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});G("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});G("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});G("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});G("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});G("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");G("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var _R={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};G("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ze("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=_R[e.text],n==null||n>=r)throw new Ze("Invalid base-"+r+" digit "+e.text);for(var i;(i=_R[t.future().text])!=null&&i<r;)n*=r,n+=i,t.popToken()}return"\\@char{"+n+"}"});var $E=(t,e,r,n)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new Ze("\\newcommand's first argument must be a macro name");var a=i[0].text,s=t.isDefined(a);if(s&&!e)throw new Ze("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!r)throw new Ze("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var l=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Ze("Invalid number of arguments: "+d);l=parseInt(d),i=t.consumeArg().tokens}return s&&n||t.macros.set(a,{tokens:i,numArgs:l}),""};G("\\newcommand",t=>$E(t,!1,!0,!1));G("\\renewcommand",t=>$E(t,!0,!1,!1));G("\\providecommand",t=>$E(t,!0,!0,!0));G("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});G("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});G("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Qc[r],pn.math[r],pn.text[r]),""});G("\\bgroup","{");G("\\egroup","}");G("~","\\nobreakspace");G("\\lq","`");G("\\rq","'");G("\\aa","\\r a");G("\\AA","\\r A");G("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");G("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");G("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");G("","\\mathscr{B}");G("","\\mathscr{E}");G("","\\mathscr{F}");G("","\\mathscr{H}");G("","\\mathscr{I}");G("","\\mathscr{L}");G("","\\mathscr{M}");G("","\\mathscr{R}");G("","\\mathfrak{C}");G("","\\mathfrak{H}");G("","\\mathfrak{Z}");G("\\Bbbk","\\Bbb{k}");G("","\\cdotp");G("\\llap","\\mathllap{\\textrm{#1}}");G("\\rlap","\\mathrlap{\\textrm{#1}}");G("\\clap","\\mathclap{\\textrm{#1}}");G("\\mathstrut","\\vphantom{(}");G("\\underbar","\\underline{\\text{#1}}");G("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');G("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");G("\\ne","\\neq");G("","\\neq");G("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");G("","\\notin");G("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");G("","\\perp");G("","\\mathclose{!\\mkern-0.8mu!}");G("","\\notni");G("","\\ulcorner");G("","\\urcorner");G("","\\llcorner");G("","\\lrcorner");G("","\\copyright");G("","\\textregistered");G("","\\textregistered");G("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');G("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');G("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');G("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');G("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");G("","\\vdots");G("\\varGamma","\\mathit{\\Gamma}");G("\\varDelta","\\mathit{\\Delta}");G("\\varTheta","\\mathit{\\Theta}");G("\\varLambda","\\mathit{\\Lambda}");G("\\varXi","\\mathit{\\Xi}");G("\\varPi","\\mathit{\\Pi}");G("\\varSigma","\\mathit{\\Sigma}");G("\\varUpsilon","\\mathit{\\Upsilon}");G("\\varPhi","\\mathit{\\Phi}");G("\\varPsi","\\mathit{\\Psi}");G("\\varOmega","\\mathit{\\Omega}");G("\\substack","\\begin{subarray}{c}#1\\end{subarray}");G("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");G("\\boxed","\\fbox{$\\displaystyle{#1}$}");G("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");G("\\implies","\\DOTSB\\;\\Longrightarrow\\;");G("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");G("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");G("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var SR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};G("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in SR?e=SR[r]:(r.slice(0,4)==="\\not"||r in pn.math&&["bin","rel"].includes(pn.math[r].group))&&(e="\\dotsb"),e});var VE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};G("\\dotso",function(t){var e=t.future().text;return e in VE?"\\ldots\\,":"\\ldots"});G("\\dotsc",function(t){var e=t.future().text;return e in VE&&e!==","?"\\ldots\\,":"\\ldots"});G("\\cdots",function(t){var e=t.future().text;return e in VE?"\\@cdots\\,":"\\@cdots"});G("\\dotsb","\\cdots");G("\\dotsm","\\cdots");G("\\dotsi","\\!\\cdots");G("\\dotsx","\\ldots\\,");G("\\DOTSI","\\relax");G("\\DOTSB","\\relax");G("\\DOTSX","\\relax");G("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");G("\\,","\\tmspace+{3mu}{.1667em}");G("\\thinspace","\\,");G("\\>","\\mskip{4mu}");G("\\:","\\tmspace+{4mu}{.2222em}");G("\\medspace","\\:");G("\\;","\\tmspace+{5mu}{.2777em}");G("\\thickspace","\\;");G("\\!","\\tmspace-{3mu}{.1667em}");G("\\negthinspace","\\!");G("\\negmedspace","\\tmspace-{4mu}{.2222em}");G("\\negthickspace","\\tmspace-{5mu}{.277em}");G("\\enspace","\\kern.5em ");G("\\enskip","\\hskip.5em\\relax");G("\\quad","\\hskip1em\\relax");G("\\qquad","\\hskip2em\\relax");G("\\tag","\\@ifstar\\tag@literal\\tag@paren");G("\\tag@paren","\\tag@literal{({#1})}");G("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Ze("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});G("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");G("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");G("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");G("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");G("\\newline","\\\\\\relax");G("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var FH=at(Ao["Main-Regular"][84][1]-.7*Ao["Main-Regular"][65][1]);G("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+FH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");G("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+FH+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");G("\\hspace","\\@ifstar\\@hspacer\\@hspace");G("\\@hspace","\\hskip #1\\relax");G("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");G("\\ordinarycolon",":");G("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");G("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');G("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');G("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');G("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');G("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');G("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');G("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');G("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');G("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');G("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');G("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');G("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');G("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');G("","\\dblcolon");G("","\\eqcolon");G("","\\coloneqq");G("","\\eqqcolon");G("","\\Coloneqq");G("\\ratio","\\vcentcolon");G("\\coloncolon","\\dblcolon");G("\\colonequals","\\coloneqq");G("\\coloncolonequals","\\Coloneqq");G("\\equalscolon","\\eqqcolon");G("\\equalscoloncolon","\\Eqqcolon");G("\\colonminus","\\coloneq");G("\\coloncolonminus","\\Coloneq");G("\\minuscolon","\\eqcolon");G("\\minuscoloncolon","\\Eqcolon");G("\\coloncolonapprox","\\Colonapprox");G("\\coloncolonsim","\\Colonsim");G("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");G("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");G("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");G("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");G("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");G("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");G("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");G("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");G("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");G("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");G("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");G("\\ngeqq","\\html@mathml{\\@ngeqq}{}");G("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");G("\\nleqq","\\html@mathml{\\@nleqq}{}");G("\\nleqslant","\\html@mathml{\\@nleqslant}{}");G("\\nshortmid","\\html@mathml{\\@nshortmid}{}");G("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");G("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");G("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");G("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");G("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");G("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");G("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");G("\\imath","\\html@mathml{\\@imath}{}");G("\\jmath","\\html@mathml{\\@jmath}{}");G("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");G("","\\llbracket");G("","\\rrbracket");G("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");G("","\\lBrace");G("","\\rBrace");G("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");G("","\\minuso");G("\\darr","\\downarrow");G("\\dArr","\\Downarrow");G("\\Darr","\\Downarrow");G("\\lang","\\langle");G("\\rang","\\rangle");G("\\uarr","\\uparrow");G("\\uArr","\\Uparrow");G("\\Uarr","\\Uparrow");G("\\N","\\mathbb{N}");G("\\R","\\mathbb{R}");G("\\Z","\\mathbb{Z}");G("\\alef","\\aleph");G("\\alefsym","\\aleph");G("\\Alpha","\\mathrm{A}");G("\\Beta","\\mathrm{B}");G("\\bull","\\bullet");G("\\Chi","\\mathrm{X}");G("\\clubs","\\clubsuit");G("\\cnums","\\mathbb{C}");G("\\Complex","\\mathbb{C}");G("\\Dagger","\\ddagger");G("\\diamonds","\\diamondsuit");G("\\empty","\\emptyset");G("\\Epsilon","\\mathrm{E}");G("\\Eta","\\mathrm{H}");G("\\exist","\\exists");G("\\harr","\\leftrightarrow");G("\\hArr","\\Leftrightarrow");G("\\Harr","\\Leftrightarrow");G("\\hearts","\\heartsuit");G("\\image","\\Im");G("\\infin","\\infty");G("\\Iota","\\mathrm{I}");G("\\isin","\\in");G("\\Kappa","\\mathrm{K}");G("\\larr","\\leftarrow");G("\\lArr","\\Leftarrow");G("\\Larr","\\Leftarrow");G("\\lrarr","\\leftrightarrow");G("\\lrArr","\\Leftrightarrow");G("\\Lrarr","\\Leftrightarrow");G("\\Mu","\\mathrm{M}");G("\\natnums","\\mathbb{N}");G("\\Nu","\\mathrm{N}");G("\\Omicron","\\mathrm{O}");G("\\plusmn","\\pm");G("\\rarr","\\rightarrow");G("\\rArr","\\Rightarrow");G("\\Rarr","\\Rightarrow");G("\\real","\\Re");G("\\reals","\\mathbb{R}");G("\\Reals","\\mathbb{R}");G("\\Rho","\\mathrm{P}");G("\\sdot","\\cdot");G("\\sect","\\S");G("\\spades","\\spadesuit");G("\\sub","\\subset");G("\\sube","\\subseteq");G("\\supe","\\supseteq");G("\\Tau","\\mathrm{T}");G("\\thetasym","\\vartheta");G("\\weierp","\\wp");G("\\Zeta","\\mathrm{Z}");G("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");G("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");G("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");G("\\bra","\\mathinner{\\langle{#1}|}");G("\\ket","\\mathinner{|{#1}\\rangle}");G("\\braket","\\mathinner{\\langle{#1}\\rangle}");G("\\Bra","\\left\\langle#1\\right|");G("\\Ket","\\left|#1\\right\\rangle");var qH=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),l=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",s),i.length&&y.macros.set("\\|",l));var b=m;if(!m&&i.length){var T=y.future();T.text==="|"&&(y.popToken(),b=!0)}return{tokens:b?i:n,numArgs:0}};e.macros.set("|",d(!1)),i.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...a,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};G("\\bra@ket",qH(!1));G("\\bra@set",qH(!0));G("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");G("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");G("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");G("\\angln","{\\angl n}");G("\\blue","\\textcolor{##6495ed}{#1}");G("\\orange","\\textcolor{##ffa500}{#1}");G("\\pink","\\textcolor{##ff00af}{#1}");G("\\red","\\textcolor{##df0030}{#1}");G("\\green","\\textcolor{##28ae7b}{#1}");G("\\gray","\\textcolor{gray}{#1}");G("\\purple","\\textcolor{##9d38bd}{#1}");G("\\blueA","\\textcolor{##ccfaff}{#1}");G("\\blueB","\\textcolor{##80f6ff}{#1}");G("\\blueC","\\textcolor{##63d9ea}{#1}");G("\\blueD","\\textcolor{##11accd}{#1}");G("\\blueE","\\textcolor{##0c7f99}{#1}");G("\\tealA","\\textcolor{##94fff5}{#1}");G("\\tealB","\\textcolor{##26edd5}{#1}");G("\\tealC","\\textcolor{##01d1c1}{#1}");G("\\tealD","\\textcolor{##01a995}{#1}");G("\\tealE","\\textcolor{##208170}{#1}");G("\\greenA","\\textcolor{##b6ffb0}{#1}");G("\\greenB","\\textcolor{##8af281}{#1}");G("\\greenC","\\textcolor{##74cf70}{#1}");G("\\greenD","\\textcolor{##1fab54}{#1}");G("\\greenE","\\textcolor{##0d923f}{#1}");G("\\goldA","\\textcolor{##ffd0a9}{#1}");G("\\goldB","\\textcolor{##ffbb71}{#1}");G("\\goldC","\\textcolor{##ff9c39}{#1}");G("\\goldD","\\textcolor{##e07d10}{#1}");G("\\goldE","\\textcolor{##a75a05}{#1}");G("\\redA","\\textcolor{##fca9a9}{#1}");G("\\redB","\\textcolor{##ff8482}{#1}");G("\\redC","\\textcolor{##f9685d}{#1}");G("\\redD","\\textcolor{##e84d39}{#1}");G("\\redE","\\textcolor{##bc2612}{#1}");G("\\maroonA","\\textcolor{##ffbde0}{#1}");G("\\maroonB","\\textcolor{##ff92c6}{#1}");G("\\maroonC","\\textcolor{##ed5fa6}{#1}");G("\\maroonD","\\textcolor{##ca337c}{#1}");G("\\maroonE","\\textcolor{##9e034e}{#1}");G("\\purpleA","\\textcolor{##ddd7ff}{#1}");G("\\purpleB","\\textcolor{##c6b9fc}{#1}");G("\\purpleC","\\textcolor{##aa87ff}{#1}");G("\\purpleD","\\textcolor{##7854ab}{#1}");G("\\purpleE","\\textcolor{##543b78}{#1}");G("\\mintA","\\textcolor{##f5f9e8}{#1}");G("\\mintB","\\textcolor{##edf2df}{#1}");G("\\mintC","\\textcolor{##e0e5cc}{#1}");G("\\grayA","\\textcolor{##f6f7f7}{#1}");G("\\grayB","\\textcolor{##f0f1f2}{#1}");G("\\grayC","\\textcolor{##e3e5e6}{#1}");G("\\grayD","\\textcolor{##d6d8da}{#1}");G("\\grayE","\\textcolor{##babec2}{#1}");G("\\grayF","\\textcolor{##888d93}{#1}");G("\\grayG","\\textcolor{##626569}{#1}");G("\\grayH","\\textcolor{##3b3e40}{#1}");G("\\grayI","\\textcolor{##21242c}{#1}");G("\\kaBlue","\\textcolor{##314453}{#1}");G("\\kaGreen","\\textcolor{##71B307}{#1}");var HH={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class iue{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new rue(nue,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new wR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new cs("EOF",n.loc)),this.pushTokens(i),new cs("",Ma.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,l=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new Ze("Extra }",a)}else if(a.text==="EOF")throw new Ze("Unexpected end of input in a macro argument, expected '"+(e&&n?e[l]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[l]==="{")&&a.text===e[l]){if(++l,l===e.length){r.splice(-l,l);break}}else l=0}while(s!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:a}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Ze("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new Ze("Use of the macro doesn't match its definition",a)}}for(var s=[],l=0;l<e;l++)s.push(this.consumeArg(r&&r[l+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ze("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new Ze("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var l=a.length-1;l>=0;--l){var d=a[l];if(d.text==="#"){if(l===0)throw new Ze("Incomplete placeholder at end of macro body",d);if(d=a[--l],d.text==="#")a.splice(l+1,1);else if(/^[1-9]$/.test(d.text))a.splice(l,2,...s[+d.text-1]);else throw new Ze("Not a valid argument number",d)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new cs(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var l=new wR(i,this.settings),d=[],h=l.lex();h.text!=="EOF";)d.push(h),h=l.lex();d.reverse();var p={tokens:d,numArgs:a};return p}return i}isDefined(e){return this.macros.has(e)||Qc.hasOwnProperty(e)||pn.math.hasOwnProperty(e)||pn.text.hasOwnProperty(e)||HH.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Qc.hasOwnProperty(e)&&!Qc[e].primitive}}var TR=/^[]/,lv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),Z5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},AR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class _2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new iue(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Ze("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new cs("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(_2.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Qc[i.text]&&Qc[i.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(r!==-1)throw new Ze("only one infix operator per group",e[i].token);r=i,n=e[i].replaceWith}if(r!==-1&&n){var a,s,l=e.slice(0,r),d=e.slice(r+1);l.length===1&&l[0].type==="ordgroup"?a=l[0]:a={type:"ordgroup",mode:this.mode,body:l},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[a,e[r],s],[]):h=this.callFunction(n,[a,s],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new Ze("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var s=a.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new Ze("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new Ze("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new Ze("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new Ze("Double superscript",a);var l={type:"textord",mode:this.mode,text:"\\prime"},d=[l];for(this.consume();this.fetch().text==="'";)d.push(l),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(lv[a.text]){var h=TR.test(a.text),p=[];for(p.push(new cs(lv[a.text])),this.consume();;){var m=this.fetch().text;if(!lv[m]||TR.test(m)!==h)break;p.unshift(new cs(lv[m])),this.consume()}var y=this.subparse(p);h?i={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(e,r){var n=this.fetch(),i=n.text,a=Qc[i];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new Ze("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new Ze("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new Ze("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:l}=this.parseArguments(i,a);return this.callFunction(i,s,l,n,e)}callFunction(e,r,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},l=Qc[e];if(l&&l.handler)return l.handler(s,r,n);throw new Ze("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var l=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&l==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(l="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",l,d);if(d)a.push(h);else if(h!=null)i.push(h);else throw new Ze("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new Ze("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new Ze("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Ze("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,r){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new Ze("Invalid "+r+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Ze("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new Ze("Invalid size: '"+r.text+"'",r);var a={number:+(i[1]+i[2]),unit:i[3]};if(!tH(a))throw new Ze("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(i),s}parseGroup(e,r){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:Ma.range(n,d),body:l,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!HH.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Ze("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Ma.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ma.range(i,e[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:Ma.range(i,e[n+1]),text:a+a}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Ze(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}AR.hasOwnProperty(r[0])&&!pn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=AR[r[0]]+r.slice(1));var a=eue.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var s;if(pn[this.mode][r]){this.settings.strict&&this.mode==="math"&&fA.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var l=pn[this.mode][r].group,d=Ma.range(e),h;if(Gle.hasOwnProperty(l)){var p=l;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:l,mode:this.mode,loc:d,text:r};s=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(eH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Ma.range(e),text:r};else return null;if(this.consume(),a)for(var m=0;m<a[0].length;m++){var y=a[0][m];if(!Z5[y])throw new Ze("Unknown accent ' "+y+"'",e);var b=Z5[y][this.mode]||Z5[y].text;if(!b)throw new Ze("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Ma.range(e),label:b,isStretchy:!1,isShifty:!0,base:s}}return s}}_2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var FE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new _2(e,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Ze("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new cs("\\df@tag")])}]}return i},GH=function(e,r,n){r.textContent="";var i=qE(e,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),GH=function(){throw new Ze("KaTeX doesn't work in quirks mode.")});var aue=function(e,r){var n=qE(e,r).toMarkup();return n},sue=function(e,r){var n=new AE(r);return FE(e,n)},KH=function(e,r,n){if(n.throwOnError||!(e instanceof Ze))throw e;var i=Te.makeSpan(["katex-error"],[new Ms(r)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},qE=function(e,r){var n=new AE(r);try{var i=FE(e,n);return mce(i,e,n)}catch(a){return KH(a,e,n)}},oue=function(e,r){var n=new AE(r);try{var i=FE(e,n);return gce(i,e,n)}catch(a){return KH(a,e,n)}},lue="0.16.28",cue={Span:r1,Anchor:jE,SymbolNode:Ms,SvgNode:Vl,PathNode:gu,LineNode:hA},jb={version:lue,render:GH,renderToString:aue,ParseError:Ze,SETTINGS_SCHEMA:Vv,__parse:sue,__renderToDomTree:qE,__renderToHTMLTree:oue,__setFontMetrics:Ble,__defineSymbol:j,__defineFunction:ft,__defineMacro:G,__domTree:cue};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function bA(t,e){return bA=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},bA(t,e)}function uue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function qv(t,e,r){return uue()?qv=Reflect.construct:qv=function(i,a,s){var l=[null];l.push.apply(l,a);var d=Function.bind.apply(i,l),h=new d;return s&&bA(h,s.prototype),h},qv.apply(null,arguments)}function Ys(t){return due(t)||hue(t)||fue(t)||pue()}function due(t){if(Array.isArray(t))return xA(t)}function hue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fue(t,e){if(t){if(typeof t=="string")return xA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xA(t,e)}}function xA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mue=Object.hasOwnProperty,ER=Object.setPrototypeOf,gue=Object.isFrozen,yue=Object.getPrototypeOf,vue=Object.getOwnPropertyDescriptor,ya=Object.freeze,Ds=Object.seal,bue=Object.create,WH=typeof Reflect<"u"&&Reflect,kb=WH.apply,wA=WH.construct;kb||(kb=function(e,r,n){return e.apply(r,n)});ya||(ya=function(e){return e});Ds||(Ds=function(e){return e});wA||(wA=function(e,r){return qv(e,Ys(r))});var xue=Ls(Array.prototype.forEach),NR=Ls(Array.prototype.pop),Pp=Ls(Array.prototype.push),Hv=Ls(String.prototype.toLowerCase),J5=Ls(String.prototype.toString),jR=Ls(String.prototype.match),Xs=Ls(String.prototype.replace),wue=Ls(String.prototype.indexOf),_ue=Ls(String.prototype.trim),Ui=Ls(RegExp.prototype.test),e3=Sue(TypeError);function Ls(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return kb(t,e,n)}}function Sue(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return wA(t,r)}}function ar(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:Hv,ER&&ER(t,null);for(var i=e.length;i--;){var a=e[i];if(typeof a=="string"){var s=r(a);s!==a&&(gue(e)||(e[i]=s),a=s)}t[a]=!0}return t}function nd(t){var e=bue(null),r;for(r in t)kb(mue,t,[r])===!0&&(e[r]=t[r]);return e}function cv(t,e){for(;t!==null;){var r=vue(t,e);if(r){if(r.get)return Ls(r.get);if(typeof r.value=="function")return Ls(r.value)}t=yue(t)}function n(i){return console.warn("fallback value for",i),null}return n}var kR=ya(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),t3=ya(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),r3=ya(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Tue=ya(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),n3=ya(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Aue=ya(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),CR=ya(["#text"]),OR=ya(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),i3=ya(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),IR=ya(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),uv=ya(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Eue=Ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nue=Ds(/<%[\w\W]*|[\w\W]*%>/gm),jue=Ds(/\${[\w\W]*}/gm),kue=Ds(/^data-[\-\w.\u00B7-\uFFFF]+$/),Cue=Ds(/^aria-[\-\w]+$/),Oue=Ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Iue=Ds(/^(?:\w+script|data):/i),Rue=Ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Mue=Ds(/^html$/i),Pue=Ds(/^[a-z][.\w]*(-[.\w]+)+$/i),Due=function(){return typeof window>"u"?null:window},Lue=function(e,r){if(Kc(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function XH(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Due(),e=function(he){return XH(he)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,l=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,b=t.trustedTypes,T=l.prototype,S=cv(T,"cloneNode"),w=cv(T,"nextSibling"),N=cv(T,"childNodes"),C=cv(T,"parentNode");if(typeof a=="function"){var k=n.createElement("template");k.content&&k.content.ownerDocument&&(n=k.content.ownerDocument)}var $=Lue(b,r),I=$?$.createHTML(""):"",L=n,E=L.implementation,A=L.createNodeIterator,R=L.createDocumentFragment,F=L.getElementsByTagName,P=r.importNode,B={};try{B=nd(n).documentMode?n.documentMode:{}}catch{}var D={};e.isSupported=typeof C=="function"&&E&&E.createHTMLDocument!==void 0&&B!==9;var Q=Eue,Z=Nue,W=jue,J=kue,Y=Cue,ge=Iue,ce=Rue,X=Pue,re=Oue,de=null,oe=ar({},[].concat(Ys(kR),Ys(t3),Ys(r3),Ys(n3),Ys(CR))),ae=null,pe=ar({},[].concat(Ys(OR),Ys(i3),Ys(IR),Ys(uv))),ve=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Qe=null,Ne=null,le=!0,we=!0,xe=!1,ut=!0,He=!1,ct=!0,nt=!1,Ut=!1,Ie=!1,st=!1,pt=!1,St=!1,Xt=!0,ye=!1,We="user-content-",mt=!0,gt=!1,ot={},Je=null,Rt=ar({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Yt=null,Kr=ar({},["audio","video","img","source","image","track"]),ln=null,Br=ar({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ee="http://www.w3.org/1998/Math/MathML",Re="http://www.w3.org/2000/svg",Ve="http://www.w3.org/1999/xhtml",Gt=Ve,jt=!1,vr=null,dr=ar({},[ee,Re,Ve],J5),zt,Pt=["application/xhtml+xml","text/html"],$t="text/html",kt,Ur=null,cr=n.createElement("form"),gn=function(he){return he instanceof RegExp||he instanceof Function},cn=function(he){Ur&&Ur===he||((!he||Kc(he)!=="object")&&(he={}),he=nd(he),zt=Pt.indexOf(he.PARSER_MEDIA_TYPE)===-1?zt=$t:zt=he.PARSER_MEDIA_TYPE,kt=zt==="application/xhtml+xml"?J5:Hv,de="ALLOWED_TAGS"in he?ar({},he.ALLOWED_TAGS,kt):oe,ae="ALLOWED_ATTR"in he?ar({},he.ALLOWED_ATTR,kt):pe,vr="ALLOWED_NAMESPACES"in he?ar({},he.ALLOWED_NAMESPACES,J5):dr,ln="ADD_URI_SAFE_ATTR"in he?ar(nd(Br),he.ADD_URI_SAFE_ATTR,kt):Br,Yt="ADD_DATA_URI_TAGS"in he?ar(nd(Kr),he.ADD_DATA_URI_TAGS,kt):Kr,Je="FORBID_CONTENTS"in he?ar({},he.FORBID_CONTENTS,kt):Rt,Qe="FORBID_TAGS"in he?ar({},he.FORBID_TAGS,kt):{},Ne="FORBID_ATTR"in he?ar({},he.FORBID_ATTR,kt):{},ot="USE_PROFILES"in he?he.USE_PROFILES:!1,le=he.ALLOW_ARIA_ATTR!==!1,we=he.ALLOW_DATA_ATTR!==!1,xe=he.ALLOW_UNKNOWN_PROTOCOLS||!1,ut=he.ALLOW_SELF_CLOSE_IN_ATTR!==!1,He=he.SAFE_FOR_TEMPLATES||!1,ct=he.SAFE_FOR_XML!==!1,nt=he.WHOLE_DOCUMENT||!1,st=he.RETURN_DOM||!1,pt=he.RETURN_DOM_FRAGMENT||!1,St=he.RETURN_TRUSTED_TYPE||!1,Ie=he.FORCE_BODY||!1,Xt=he.SANITIZE_DOM!==!1,ye=he.SANITIZE_NAMED_PROPS||!1,mt=he.KEEP_CONTENT!==!1,gt=he.IN_PLACE||!1,re=he.ALLOWED_URI_REGEXP||re,Gt=he.NAMESPACE||Ve,ve=he.CUSTOM_ELEMENT_HANDLING||{},he.CUSTOM_ELEMENT_HANDLING&&gn(he.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=he.CUSTOM_ELEMENT_HANDLING.tagNameCheck),he.CUSTOM_ELEMENT_HANDLING&&gn(he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=he.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),he.CUSTOM_ELEMENT_HANDLING&&typeof he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ve.allowCustomizedBuiltInElements=he.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),He&&(we=!1),pt&&(st=!0),ot&&(de=ar({},Ys(CR)),ae=[],ot.html===!0&&(ar(de,kR),ar(ae,OR)),ot.svg===!0&&(ar(de,t3),ar(ae,i3),ar(ae,uv)),ot.svgFilters===!0&&(ar(de,r3),ar(ae,i3),ar(ae,uv)),ot.mathMl===!0&&(ar(de,n3),ar(ae,IR),ar(ae,uv))),he.ADD_TAGS&&(de===oe&&(de=nd(de)),ar(de,he.ADD_TAGS,kt)),he.ADD_ATTR&&(ae===pe&&(ae=nd(ae)),ar(ae,he.ADD_ATTR,kt)),he.ADD_URI_SAFE_ATTR&&ar(ln,he.ADD_URI_SAFE_ATTR,kt),he.FORBID_CONTENTS&&(Je===Rt&&(Je=nd(Je)),ar(Je,he.FORBID_CONTENTS,kt)),mt&&(de["#text"]=!0),nt&&ar(de,["html","head","body"]),de.table&&(ar(de,["tbody"]),delete Qe.tbody),ya&&ya(he),Ur=he)},ei=ar({},["mi","mo","mn","ms","mtext"]),nr=ar({},["annotation-xml"]),_i=ar({},["title","style","font","a","script"]),xr=ar({},t3);ar(xr,r3),ar(xr,Tue);var yn=ar({},n3);ar(yn,Aue);var ia=function(he){var qe=C(he);(!qe||!qe.tagName)&&(qe={namespaceURI:Gt,tagName:"template"});var rt=Hv(he.tagName),Ft=Hv(qe.tagName);return vr[he.namespaceURI]?he.namespaceURI===Re?qe.namespaceURI===Ve?rt==="svg":qe.namespaceURI===ee?rt==="svg"&&(Ft==="annotation-xml"||ei[Ft]):!!xr[rt]:he.namespaceURI===ee?qe.namespaceURI===Ve?rt==="math":qe.namespaceURI===Re?rt==="math"&&nr[Ft]:!!yn[rt]:he.namespaceURI===Ve?qe.namespaceURI===Re&&!nr[Ft]||qe.namespaceURI===ee&&!ei[Ft]?!1:!yn[rt]&&(_i[rt]||!xr[rt]):!!(zt==="application/xhtml+xml"&&vr[he.namespaceURI]):!1},rn=function(he){Pp(e.removed,{element:he});try{he.parentNode.removeChild(he)}catch{try{he.outerHTML=I}catch{he.remove()}}},vn=function(he,qe){try{Pp(e.removed,{attribute:qe.getAttributeNode(he),from:qe})}catch{Pp(e.removed,{attribute:null,from:qe})}if(qe.removeAttribute(he),he==="is"&&!ae[he])if(st||pt)try{rn(qe)}catch{}else try{qe.setAttribute(he,"")}catch{}},aa=function(he){var qe,rt;if(Ie)he="<remove></remove>"+he;else{var Ft=jR(he,/^[\r\n\t ]+/);rt=Ft&&Ft[0]}zt==="application/xhtml+xml"&&Gt===Ve&&(he='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+he+"</body></html>");var sr=$?$.createHTML(he):he;if(Gt===Ve)try{qe=new y().parseFromString(sr,zt)}catch{}if(!qe||!qe.documentElement){qe=E.createDocument(Gt,"template",null);try{qe.documentElement.innerHTML=jt?I:sr}catch{}}var dn=qe.body||qe.documentElement;return he&&rt&&dn.insertBefore(n.createTextNode(rt),dn.childNodes[0]||null),Gt===Ve?F.call(qe,nt?"html":"body")[0]:nt?qe.documentElement:dn},Mn=function(he){return A.call(he.ownerDocument||he,he,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},zr=function(he){return he instanceof m&&(typeof he.nodeName!="string"||typeof he.textContent!="string"||typeof he.removeChild!="function"||!(he.attributes instanceof p)||typeof he.removeAttribute!="function"||typeof he.setAttribute!="function"||typeof he.namespaceURI!="string"||typeof he.insertBefore!="function"||typeof he.hasChildNodes!="function")},un=function(he){return Kc(s)==="object"?he instanceof s:he&&Kc(he)==="object"&&typeof he.nodeType=="number"&&typeof he.nodeName=="string"},jn=function(he,qe,rt){D[he]&&xue(D[he],function(Ft){Ft.call(e,qe,rt,Ur)})},xa=function(he){var qe;if(jn("beforeSanitizeElements",he,null),zr(he)||Ui(/[\u0080-\uFFFF]/,he.nodeName))return rn(he),!0;var rt=kt(he.nodeName);if(jn("uponSanitizeElement",he,{tagName:rt,allowedTags:de}),he.hasChildNodes()&&!un(he.firstElementChild)&&(!un(he.content)||!un(he.content.firstElementChild))&&Ui(/<[/\w]/g,he.innerHTML)&&Ui(/<[/\w]/g,he.textContent)||rt==="select"&&Ui(/<template/i,he.innerHTML)||he.nodeType===7||ct&&he.nodeType===8&&Ui(/<[/\w]/g,he.data))return rn(he),!0;if(!de[rt]||Qe[rt]){if(!Qe[rt]&&ho(rt)&&(ve.tagNameCheck instanceof RegExp&&Ui(ve.tagNameCheck,rt)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(rt)))return!1;if(mt&&!Je[rt]){var Ft=C(he)||he.parentNode,sr=N(he)||he.childNodes;if(sr&&Ft)for(var dn=sr.length,$r=dn-1;$r>=0;--$r){var hn=S(sr[$r],!0);hn.__removalCount=(he.__removalCount||0)+1,Ft.insertBefore(hn,w(he))}}return rn(he),!0}return he instanceof l&&!ia(he)||(rt==="noscript"||rt==="noembed"||rt==="noframes")&&Ui(/<\/no(script|embed|frames)/i,he.innerHTML)?(rn(he),!0):(He&&he.nodeType===3&&(qe=he.textContent,qe=Xs(qe,Q," "),qe=Xs(qe,Z," "),qe=Xs(qe,W," "),he.textContent!==qe&&(Pp(e.removed,{element:he.cloneNode()}),he.textContent=qe)),jn("afterSanitizeElements",he,null),!1)},Wi=function(he,qe,rt){if(Xt&&(qe==="id"||qe==="name")&&(rt in n||rt in cr))return!1;if(!(we&&!Ne[qe]&&Ui(J,qe))){if(!(le&&Ui(Y,qe))){if(!ae[qe]||Ne[qe]){if(!(ho(he)&&(ve.tagNameCheck instanceof RegExp&&Ui(ve.tagNameCheck,he)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(he))&&(ve.attributeNameCheck instanceof RegExp&&Ui(ve.attributeNameCheck,qe)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(qe))||qe==="is"&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&Ui(ve.tagNameCheck,rt)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(rt))))return!1}else if(!ln[qe]){if(!Ui(re,Xs(rt,ce,""))){if(!((qe==="src"||qe==="xlink:href"||qe==="href")&&he!=="script"&&wue(rt,"data:")===0&&Yt[he])){if(!(xe&&!Ui(ge,Xs(rt,ce,"")))){if(rt)return!1}}}}}}return!0},ho=function(he){return he!=="annotation-xml"&&jR(he,X)},zs=function(he){var qe,rt,Ft,sr;jn("beforeSanitizeAttributes",he,null);var dn=he.attributes;if(!(!dn||zr(he))){var $r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae};for(sr=dn.length;sr--;){qe=dn[sr];var hn=qe,_r=hn.name,fo=hn.namespaceURI;if(rt=_r==="value"?qe.value:_ue(qe.value),Ft=kt(_r),$r.attrName=Ft,$r.attrValue=rt,$r.keepAttr=!0,$r.forceKeepAttr=void 0,jn("uponSanitizeAttribute",he,$r),rt=$r.attrValue,!$r.forceKeepAttr&&(vn(_r,he),!!$r.keepAttr)){if(!ut&&Ui(/\/>/i,rt)){vn(_r,he);continue}He&&(rt=Xs(rt,Q," "),rt=Xs(rt,Z," "),rt=Xs(rt,W," "));var $s=kt(he.nodeName);if(Wi($s,Ft,rt)){if(ye&&(Ft==="id"||Ft==="name")&&(vn(_r,he),rt=We+rt),ct&&Ui(/((--!?|])>)|<\/(style|title)/i,rt)){vn(_r,he);continue}if($&&Kc(b)==="object"&&typeof b.getAttributeType=="function"&&!fo)switch(b.getAttributeType($s,Ft)){case"TrustedHTML":{rt=$.createHTML(rt);break}case"TrustedScriptURL":{rt=$.createScriptURL(rt);break}}try{fo?he.setAttributeNS(fo,_r,rt):he.setAttribute(_r,rt),zr(he)?rn(he):NR(e.removed)}catch{}}}}jn("afterSanitizeAttributes",he,null)}},wa=function vt(he){var qe,rt=Mn(he);for(jn("beforeSanitizeShadowDOM",he,null);qe=rt.nextNode();)jn("uponSanitizeShadowNode",qe,null),xa(qe),zs(qe),qe.content instanceof i&&vt(qe.content);jn("afterSanitizeShadowDOM",he,null)};return e.sanitize=function(vt){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},qe,rt,Ft,sr,dn;if(jt=!vt,jt&&(vt="<!-->"),typeof vt!="string"&&!un(vt))if(typeof vt.toString=="function"){if(vt=vt.toString(),typeof vt!="string")throw e3("dirty is not a string, aborting")}else throw e3("toString is not a function");if(!e.isSupported){if(Kc(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof vt=="string")return t.toStaticHTML(vt);if(un(vt))return t.toStaticHTML(vt.outerHTML)}return vt}if(Ut||cn(he),e.removed=[],typeof vt=="string"&&(gt=!1),gt){if(vt.nodeName){var $r=kt(vt.nodeName);if(!de[$r]||Qe[$r])throw e3("root node is forbidden and cannot be sanitized in-place")}}else if(vt instanceof s)qe=aa("<!---->"),rt=qe.ownerDocument.importNode(vt,!0),rt.nodeType===1&&rt.nodeName==="BODY"||rt.nodeName==="HTML"?qe=rt:qe.appendChild(rt);else{if(!st&&!He&&!nt&&vt.indexOf("<")===-1)return $&&St?$.createHTML(vt):vt;if(qe=aa(vt),!qe)return st?null:St?I:""}qe&&Ie&&rn(qe.firstChild);for(var hn=Mn(gt?vt:qe);Ft=hn.nextNode();)Ft.nodeType===3&&Ft===sr||(xa(Ft),zs(Ft),Ft.content instanceof i&&wa(Ft.content),sr=Ft);if(sr=null,gt)return vt;if(st){if(pt)for(dn=R.call(qe.ownerDocument);qe.firstChild;)dn.appendChild(qe.firstChild);else dn=qe;return(ae.shadowroot||ae.shadowrootmod)&&(dn=P.call(r,dn,!0)),dn}var _r=nt?qe.outerHTML:qe.innerHTML;return nt&&de["!doctype"]&&qe.ownerDocument&&qe.ownerDocument.doctype&&qe.ownerDocument.doctype.name&&Ui(Mue,qe.ownerDocument.doctype.name)&&(_r="<!DOCTYPE "+qe.ownerDocument.doctype.name+`>
`+_r),He&&(_r=Xs(_r,Q," "),_r=Xs(_r,Z," "),_r=Xs(_r,W," ")),$&&St?$.createHTML(_r):_r},e.setConfig=function(vt){cn(vt),Ut=!0},e.clearConfig=function(){Ur=null,Ut=!1},e.isValidAttribute=function(vt,he,qe){Ur||cn({});var rt=kt(vt),Ft=kt(he);return Wi(rt,Ft,qe)},e.addHook=function(vt,he){typeof he=="function"&&(D[vt]=D[vt]||[],Pp(D[vt],he))},e.removeHook=function(vt){if(D[vt])return NR(D[vt])},e.removeHooks=function(vt){D[vt]&&(D[vt]=[])},e.removeAllHooks=function(){D={}},e}var QH=XH();const Bue=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:i,classType:a})=>{const s=M.useRef(yb()),l=M.useRef(Date.now()),d=M.useRef(t),[h,p]=M.useState(!0),[m,y]=M.useState(0),[b,T]=M.useState(!1),[S,w]=M.useState(null),[N,C]=M.useState(0),[k,$]=M.useState(0),I=M.useRef(null),L=M.useRef(null),E=M.useRef(null),A=M.useRef(new Set),[R,F]=M.useState(!1);M.useEffect(()=>{d.current=t},[t]);const P=M.useCallback(()=>{l.current=Date.now(),h||p(!0)},[h]);M.useEffect(()=>{const D=setInterval(()=>{Date.now()-l.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),h||p(!0)):h&&p(!1)},1e3);return()=>clearInterval(D)},[h]),M.useEffect(()=>{const D=["mousemove","keydown","scroll","click"];return D.forEach(Q=>window.addEventListener(Q,P)),()=>D.forEach(Q=>window.removeEventListener(Q,P))},[P]),M.useEffect(()=>()=>{d.current(s.current)},[]),M.useEffect(()=>{if(!n||!i)return;const D=async Q=>{var ge,ce,X,re,de,oe,ae,pe;const Z=I.current;if(!Z)return;const W=Z.src?new URL(Z.src).origin:"";if(Q.origin!==window.location.origin&&Q.origin!==W)return;const J=Q.origin,Y=Q.data;if(!(!Y||typeof Y!="object"||!((ge=Y.type)!=null&&ge.startsWith("portal-"))))switch(P(),Y.type){case"portal-ready":{T(!0);try{const ve=await Vi(ht(Ue,"practice_progress",`${n}_${i}`)),Qe=ve.exists()?ve.data():null,Ne=Qe?{state:Qe.state||null,currentQuestion:Qe.currentQuestion??0}:null,le=(Qe==null?void 0:Qe.answeredQuestions)||[];le.forEach(we=>A.current.add(we)),C(le.length),(ce=Z.contentWindow)==null||ce.postMessage({type:"portal-init",payload:{userId:n,savedState:Ne}},J)}catch(ve){console.error("Bridge: Failed to load saved state",ve),(X=Z.contentWindow)==null||X.postMessage({type:"portal-init",payload:{userId:n,savedState:null}},J)}break}case"portal-save":{const{state:ve,currentQuestion:Qe}=Y.payload||{};if(!ve)break;try{await Zi(ht(Ue,"practice_progress",`${n}_${i}`),{userId:n,assignmentId:i,state:ve,currentQuestion:Qe??0,answeredQuestions:Array.from(A.current),lastUpdated:new Date().toISOString()},{merge:!0}),(re=Z.contentWindow)==null||re.postMessage({type:"portal-save-ok"},J)}catch(Ne){console.error("Bridge: Save failed",Ne),(de=Z.contentWindow)==null||de.postMessage({type:"portal-save-error"},J)}break}case"portal-answer":{const{questionId:ve,correct:Qe,attempts:Ne}=Y.payload||{};if(!ve)break;if(Qe&&!A.current.has(ve)){A.current.add(ve),C(we=>we+1);const le=Ne===1?15:10;try{const xe=(await Pq({assignmentId:i,questionId:ve,xpAmount:le,classType:a||"Uncategorized"})).data;if(xe.awarded){const ut=xe.serverXP||le;$(He=>He+ut),w({text:`+${ut} XP`,type:"success"}),Wn.xpGain(),setTimeout(()=>w(null),2e3)}(oe=Z.contentWindow)==null||oe.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:xe.awarded,xp:xe.serverXP||le}},J)}catch(we){console.error("Bridge: XP award failed",we),(ae=Z.contentWindow)==null||ae.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:!1,xp:0}},J)}}else Qe&&((pe=Z.contentWindow)==null||pe.postMessage({type:"portal-xp-result",payload:{questionId:ve,awarded:!1,xp:0}},J));break}}};return window.addEventListener("message",D),()=>window.removeEventListener("message",D)},[n,i,a,P]);const B=M.useCallback(()=>{const D=E.current;D&&(document.fullscreenElement?document.exitFullscreen():D.requestFullscreen().catch(()=>{F(Q=>!Q)}))},[]);return M.useEffect(()=>{const D=()=>F(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",D),()=>document.removeEventListener("fullscreenchange",D)},[]),M.useEffect(()=>{if(L.current&&r){const D=r.replace(/\$(.*?)\$/g,(Q,Z)=>{try{return jb.renderToString(Z,{throwOnError:!1})}catch{return Z}});L.current.innerHTML=QH.sanitize(D,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),c.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[c.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h?"text-green-400":"text-yellow-500"}`,children:[h?c.jsx(bE,{className:"w-4 h-4"}):c.jsx(Is,{className:"w-4 h-4 animate-pulse"}),h?"Active Session":"Away (Paused)"]}),c.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(m/60),"m ",m%60,"s"]}),b&&N>0&&c.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[c.jsx(gi,{className:"w-3 h-3"})," ",N," answered"]}),b&&k>0&&c.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[c.jsx(Ii,{className:"w-3 h-3"})," ",k," XP"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[e&&c.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:R?"Exit full screen (Esc)":"Full screen",children:[R?c.jsx($q,{className:"w-3 h-3"}):c.jsx(oA,{className:"w-3 h-3"}),R?"Exit Full Screen":"Full Screen"]}),b&&c.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[c.jsx(Ii,{className:"w-3 h-3"})," XP Linked"]}),!h&&c.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[c.jsx(Rs,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&c.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:c.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?c.jsx(gi,{className:"w-4 h-4"}):c.jsx(Fm,{className:"w-4 h-4"}),S.text]})}),c.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?c.jsx("div",{ref:E,className:"flex-1 flex flex-col bg-white",children:c.jsx("iframe",{ref:I,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:P})}):c.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:c.jsxs("div",{className:"text-center",children:[c.jsx(qm,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),c.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&c.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[c.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[c.jsx(oA,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),c.jsx("div",{ref:L,className:"proctor-content text-sm leading-relaxed"})]})]})]})},Uue=()=>{const[t,e]=M.useState(!1),[r,n]=M.useState(null),i=async()=>{e(!0),n(null);try{await Dee(aA,kse)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},a=r&&r.includes("api-key-not-valid");return c.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[c.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),c.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:c.jsxs("div",{className:"p-10 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&c.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx(Rs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),c.jsxs("div",{className:"break-words",children:[c.jsx("strong",{children:"Login Failed:"})," ",r]})]}),a&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[c.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[c.jsx(xoe,{className:"w-4 h-4"}),"Action Required:"]}),c.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",c.jsx("code",{children:"lib/firebase.ts"})," and replace",c.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),c.jsx("button",{onClick:i,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[c.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),c.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),c.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),c.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),c.jsx("span",{children:"Sign in with Google"})]})}),c.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),c.jsx("span",{children:""}),c.jsx("span",{children:"Firebase Auth"})]})]})})]})},YH=M.createContext(null),Su=()=>{const t=M.useContext(YH);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},zue=({children:t})=>{const[e,r]=M.useState({isOpen:!1,options:{message:""}}),n=M.useRef(null),i=M.useRef(null),a=M.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),s=M.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),l=M.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);M.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=i.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),M.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&l(),m.key==="Enter"&&s()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,l,s]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return c.jsxs(YH.Provider,{value:{confirm:a},children:[t,e.isOpen&&c.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:l}),c.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[c.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[c.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:c.jsx(Rs,{className:"w-5 h-5"})}),c.jsxs("div",{children:[e.options.title&&c.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),c.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:l,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),c.jsx("button",{ref:i,onClick:s,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),c.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},RR={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:c.jsx(Uq,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:c.jsx(Rs,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:c.jsx(Doe,{className:"w-4 h-4"})}},$ue=({announcements:t,studentIds:e})=>{const{confirm:r}=Su(),n=na(),[i,a]=M.useState(!1),[s,l]=M.useState(""),[d,h]=M.useState(""),[p,m]=M.useState("INFO"),[y,b]=M.useState("GLOBAL"),T=async()=>{if(!(!s.trim()||!d.trim()))try{await Be.createAnnouncement({title:s.trim(),content:d.trim(),classType:y,priority:p,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN"}),await Be.notifyUsers(e,"ANNOUNCEMENT",s.trim(),d.trim().slice(0,100)),l(""),h(""),a(!1),n.success("Announcement broadcast sent.")}catch{n.error("Failed to create announcement.")}},S=async w=>{await r({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Be.deleteAnnouncement(w)};return c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(xb,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),c.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[c.jsx(zl,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?c.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[c.jsx(xb,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):c.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(w=>{const N=RR[w.priority]||RR.INFO;return c.jsxs("div",{className:`p-3 ${N.bg} border ${N.border} rounded-xl flex justify-between items-start`,children:[c.jsxs("div",{className:"flex gap-2 items-start",children:[c.jsx("div",{className:`mt-0.5 ${N.text}`,children:N.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-bold text-white",children:w.title}),c.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.content}),c.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[w.classType==="GLOBAL"?"All Classes":w.classType,"  ",new Date(w.createdAt).toLocaleDateString()]})]})]}),c.jsx("button",{onClick:()=>S(w.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:c.jsx(Hi,{className:"w-3.5 h-3.5"})})]},w.id)})}),c.jsx(Va,{isOpen:i,onClose:()=>a(!1),title:"New Announcement",maxWidth:"max-w-md",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),c.jsx("input",{type:"text",value:s,onChange:w=>l(w.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),c.jsx("textarea",{value:d,onChange:w=>h(w.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),c.jsxs("select",{value:p,onChange:w=>m(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[c.jsx("option",{value:"INFO",children:"Info"}),c.jsx("option",{value:"WARNING",children:"Warning"}),c.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),c.jsxs("select",{value:y,onChange:w=>b(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[c.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Lr).filter(w=>w!=="Uncategorized").map(w=>c.jsx("option",{value:w,children:w},w))]})]})]}),c.jsx("button",{onClick:T,disabled:!s.trim()||!d.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},ZH=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],MR=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],Vue=["I","II","III","IV","V"],Fue=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Uh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,MR.length-1),i=MR[n]||"Unknownium",a=Vue[r],s=n+1,l=Fue(s);return{rankName:`${i} ${a}`,tierColor:l.color,tierGlow:l.glow}},es={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15},PR=t=>{const e=t.affixes.reduce((i,a)=>i+a.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},HE=t=>{var i;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((i=t.gamification)!=null&&i.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(a=>{a.stats&&Object.entries(a.stats).forEach(([s,l])=>{e[s]+=l})}),e},zh=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let i=n.affixes.map(l=>l.tier);n.rarity==="UNIQUE"&&i.length===0&&(i=[10]);const a=i.length>0?i.reduce((l,d)=>l+d,0)/i.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=a*10+s}),Math.floor(e))},DR=t=>t.runewordActive&&ZH.find(e=>e.id===t.runewordActive)||null,Kn=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Vd(t,e){var i;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(i=r.classProfiles)==null?void 0:i[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const que=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:i})=>{var C,k,$,I,L,E,A,R,F,P;const a=((C=t.gamification)==null?void 0:C.level)||1,s=((k=t.gamification)==null?void 0:k.xp)||0,l=(($=t.gamification)==null?void 0:$.currency)||0,d=Uh(a),h=HE(t),p=t.enrolledClasses||(t.classType?[t.classType]:[]),m=((L=(I=t.gamification)==null?void 0:I.completedQuests)==null?void 0:L.length)||0,y=((A=(E=t.gamification)==null?void 0:E.activeQuests)==null?void 0:A.filter(B=>B.status==="ACCEPTED"||B.status==="DEPLOYED").length)||0,b=M.useMemo(()=>p.map(B=>{var ge,ce;const D=((ce=(ge=t.gamification)==null?void 0:ge.classXp)==null?void 0:ce[B])||0,Q=Vd(t,B),Z=zh(Q.equipped),W=Q.inventory.length,J=e.filter(X=>{const re=r.find(de=>de.id===X.assignmentId);return(re==null?void 0:re.classType)===B}),Y=Math.round(J.reduce((X,re)=>{var de;return X+(((de=re.metrics)==null?void 0:de.engagementTime)||0)},0)/60);return{cls:B,classXp:D,gearScore:Z,inventoryCount:W,resourcesViewed:J.length,totalTime:Y}}),[t,e,r,p]),T=M.useMemo(()=>e.filter(B=>B.submittedAt).sort((B,D)=>new Date(D.submittedAt).getTime()-new Date(B.submittedAt).getTime()).slice(0,10).map(B=>{var D,Q;return{...B,assignmentTitle:((D=r.find(Z=>Z.id===B.assignmentId))==null?void 0:D.title)||B.assignmentTitle,classType:((Q=r.find(Z=>Z.id===B.assignmentId))==null?void 0:Q.classType)||"Unknown"}}),[e,r]),S=Math.round(e.reduce((B,D)=>{var Q;return B+(((Q=D.metrics)==null?void 0:Q.engagementTime)||0)},0)/60),w=M.useMemo(()=>{const B=new Set;e.forEach(Y=>{if(Y.submittedAt){const ge=new Date(Y.submittedAt),ce=ge.getFullYear(),X=new Date(ce,0,1),re=Math.ceil(((ge.getTime()-X.getTime())/864e5+X.getDay()+1)/7);B.add(`${ce}-W${re}`)}});const D=new Date,Q=D.getFullYear(),Z=new Date(Q,0,1),W=Math.ceil(((D.getTime()-Z.getTime())/864e5+Z.getDay()+1)/7);let J=0;for(let Y=W;Y>0&&B.has(`${Q}-W${Y}`);Y--)J++;return J},[e]),N=M.useMemo(()=>{const B=[],D=new Date;for(let ce=6;ce>=0;ce--){const X=new Date(D);X.setDate(X.getDate()-ce);const re=X.toISOString().split("T")[0],de=e.filter(ae=>{var pe;return(pe=ae.submittedAt)==null?void 0:pe.startsWith(re)}),oe=de.reduce((ae,pe)=>{var ve;return ae+(((ve=pe.metrics)==null?void 0:ve.engagementTime)||0)},0);B.push({label:X.toLocaleDateString([],{weekday:"short"}),time:Math.round(oe/60),subs:de.length})}const Q=B.slice(4).reduce((ce,X)=>ce+X.time,0),Z=B.slice(0,4).reduce((ce,X)=>ce+X.time,0),W=Q/3,J=Z/4,Y=W>J*1.2?"up":W<J*.6?"down":"flat",ge=Math.max(1,...B.map(ce=>ce.time));return{days:B,trend:Y,maxTime:ge}},[e]);return c.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:i}),c.jsxs("div",{className:"relative w-full max-w-lg bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[c.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${d.tierGlow} shadow-xl`,children:t.avatarUrl?c.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${d.tierColor.split(" ")[0]}`}):c.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${d.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${d.tierColor.split(" ")[1]}`,children:d.rankName}),c.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",a]})]}),((R=t.gamification)==null?void 0:R.codename)&&c.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),c.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:c.jsx(hs,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(Ii,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),c.jsx("div",{className:"text-lg font-bold text-white",children:s.toLocaleString()}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(Is,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),c.jsxs("div",{className:"text-lg font-bold text-white",children:[S,"m"]}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(so,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),c.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(mh,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),c.jsx("div",{className:"text-lg font-bold text-white",children:m}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(cA,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),c.jsx("div",{className:"text-lg font-bold text-white",children:l}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[c.jsx(wE,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),c.jsxs("div",{className:"text-lg font-bold text-white",children:[w,"w"]}),c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),c.jsx("div",{className:"space-y-2",children:Object.entries(h).map(([B,D])=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:B}),c.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,D)}%`}})}),c.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:D})]},B))})]}),n.length>0&&(()=>{const B=n[0],D=cd[B.bucket];return D?c.jsxs("div",{className:`border rounded-2xl p-4 ${D.borderColor} ${D.bgColor}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),c.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${D.color} border ${D.borderColor}`,children:D.label})]}),c.jsx("p",{className:"text-xs text-gray-300 mb-3",children:D.description}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[c.jsxs("span",{children:["ES: ",B.engagementScore]}),c.jsxs("span",{children:["Subs: ",B.metrics.submissionCount]}),c.jsxs("span",{children:["Days Active: ",B.metrics.activityDays,"/7"]}),c.jsxs("span",{children:["Paste Ratio: ",Math.round(B.metrics.avgPasteRatio*100),"%"]}),c.jsxs("span",{children:["Time: ",Math.round(B.metrics.totalTime/60),"m"]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[c.jsx(zq,{className:"w-3.5 h-3.5 text-amber-400"}),c.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),c.jsx("p",{className:"text-xs text-gray-300 mb-2",children:B.recommendation.action}),c.jsx("div",{className:"flex flex-wrap gap-1.5",children:B.recommendation.categories.map(Q=>c.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Q},Q))})]}),(()=>{const Q=r.filter(Z=>Z.classType===B.classType&&Z.status==="ACTIVE"&&B.recommendation.categories.includes(Z.category||"Supplemental")).slice(0,3);return Q.length===0?null:c.jsxs("div",{className:"mt-3",children:[c.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),c.jsx("div",{className:"space-y-1",children:Q.map(Z=>c.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[c.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:Z.category}),c.jsx("span",{className:"text-white truncate",children:Z.title})]},Z.id))})]})})()]}):null})(),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),c.jsxs("div",{className:"flex items-center gap-1",children:[N.trend==="up"&&c.jsx(TE,{className:"w-3.5 h-3.5 text-green-400"}),N.trend==="down"&&c.jsx(Hoe,{className:"w-3.5 h-3.5 text-red-400"}),N.trend==="flat"&&c.jsx(Roe,{className:"w-3.5 h-3.5 text-gray-400"}),c.jsx("span",{className:`text-[10px] font-bold uppercase ${N.trend==="up"?"text-green-400":N.trend==="down"?"text-red-400":"text-gray-400"}`,children:N.trend==="up"?"Trending Up":N.trend==="down"?"Declining":"Stable"})]})]}),c.jsx("div",{className:"flex items-end gap-1 h-16",children:N.days.map((B,D)=>{const Q=N.maxTime>0?Math.max(2,B.time/N.maxTime*100):2,Z=D===N.days.length-1;return c.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[c.jsx("div",{className:`w-full rounded-t transition-all ${B.time>0?Z?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Q}%`}}),c.jsx("span",{className:"text-[8px] text-gray-500",children:B.label}),c.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[B.time,"m  ",B.subs," sub",B.subs!==1?"s":""]})]},D)})})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),c.jsx("div",{className:"space-y-3",children:b.map(B=>c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"text-sm font-bold text-white",children:B.cls}),c.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[B.classXp.toLocaleString()," XP"]})]}),c.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[c.jsxs("span",{children:[c.jsx($l,{className:"w-3 h-3 inline mr-0.5"}),B.gearScore," GS"]}),c.jsxs("span",{children:[c.jsx(cA,{className:"w-3 h-3 inline mr-0.5"}),B.inventoryCount," items"]}),c.jsxs("span",{children:[c.jsx(so,{className:"w-3 h-3 inline mr-0.5"}),B.resourcesViewed," viewed"]}),c.jsxs("span",{children:[c.jsx(Is,{className:"w-3 h-3 inline mr-0.5"}),B.totalTime,"m"]})]})]},B.cls))})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),T.length===0?c.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):c.jsx("div",{className:"space-y-2",children:T.map(B=>{var Q;const D=Math.round((((Q=B.metrics)==null?void 0:Q.engagementTime)||0)/60);return c.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${D>=5?"bg-green-500":D>=1?"bg-yellow-500":"bg-gray-500"}`}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-xs text-white font-bold truncate",children:B.assignmentTitle}),c.jsxs("div",{className:"text-[10px] text-gray-500",children:[B.classType,"  ",D,"m engaged"]})]}),c.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:B.submittedAt?new Date(B.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},B.id)})})]}),y>0&&c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),c.jsx("div",{className:"space-y-2",children:(P=(F=t.gamification)==null?void 0:F.activeQuests)==null?void 0:P.filter(B=>B.status==="ACCEPTED"||B.status==="DEPLOYED").map(B=>c.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(mh,{className:`w-3.5 h-3.5 ${B.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),c.jsx("span",{className:"text-xs text-white",children:B.questId})]}),c.jsx("span",{className:`text-[10px] font-bold uppercase ${B.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:B.status})]},B.questId))})]}),c.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[c.jsxs("div",{children:["Email: ",t.email]}),c.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),c.jsxs("div",{children:["Enrolled: ",p.join(", ")||"None"]}),c.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),c.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&c.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})]})},Hue=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=Su(),[i,a]=M.useState(null),[s,l]=M.useState([]),[d,h]=M.useState([]),[p,m]=M.useState([]),[y,b]=M.useState([]),[T,S]=M.useState(Date.now()),[w,N]=M.useState(null),[C,k]=M.useState("xp"),[$,I]=M.useState("desc"),L=oe=>{C===oe?I(ae=>ae==="asc"?"desc":"asc"):(k(oe),I("asc"))},E=({label:oe,col:ae,className:pe})=>c.jsx("th",{className:`cursor-pointer select-none group p-3 ${pe??""}`,onClick:()=>L(ae),children:c.jsxs("div",{className:`flex items-center gap-1 ${pe!=null&&pe.includes("text-center")?"justify-center":pe!=null&&pe.includes("text-right")?"justify-end":"justify-start"}`,children:[c.jsx("span",{children:oe}),c.jsxs("span",{className:"flex flex-col gap-px",children:[c.jsx(vE,{className:`w-2.5 h-2.5 -mb-0.5 ${C===ae&&$==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),c.jsx($a,{className:`w-2.5 h-2.5 -mt-0.5 ${C===ae&&$==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});M.useEffect(()=>{const oe=Be.subscribeToChatFlags(l),ae=Be.subscribeToAnnouncements(h),pe=Be.subscribeToStudentAlerts(m),ve=Be.subscribeToStudentBuckets(b),Qe=setInterval(()=>S(Date.now()),6e4);return()=>{oe(),ae(),pe(),ve(),clearInterval(Qe)}},[]);const A=t.filter(oe=>oe.role==="STUDENT"),R=M.useMemo(()=>{const oe=new Map;for(const ae of p){const pe=oe.get(ae.studentId),ve={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!pe||(ve[ae.riskLevel]||0)>(ve[pe.riskLevel]||0))&&oe.set(ae.studentId,ae)}return oe},[p]),F=M.useMemo(()=>{const oe=new Map;for(const ae of y)oe.has(ae.studentId)||oe.set(ae.studentId,ae);return oe},[y]),P=M.useMemo(()=>{const oe={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},ae=new Set;for(const pe of y)ae.has(pe.studentId)||(ae.add(pe.studentId),oe[pe.bucket]!==void 0&&oe[pe.bucket]++);return oe},[y]),B=A.length,D=Math.round(A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.stats)==null?void 0:pe.totalTime)||0)},0)/(B||1)),Q=A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.stats)==null?void 0:pe.problemsCompleted)||0)},0),Z=A.reduce((oe,ae)=>{var pe;return oe+(((pe=ae.gamification)==null?void 0:pe.xp)||0)},0),W=A.filter(oe=>oe.mutedUntil&&new Date(oe.mutedUntil).getTime()>T),J=async oe=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Be.muteUser(oe,0)},Y=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Be.INDEFINITE_MUTE}],ge=async(oe,ae)=>{await Be.muteUser(oe,ae),N(null)},ce=async(oe,ae)=>{const pe=new Date(ae).getTime(),ve=new Date(Math.max(pe,Date.now())+3600*1e3),Qe=Math.ceil((ve.getTime()-Date.now())/6e4);await Be.muteUser(oe,Qe)},X=({label:oe,value:ae,icon:pe,color:ve})=>c.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[c.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${ve}`,children:pe}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:ae}),c.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:oe})]}),c.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${ve}`})]}),re=oe=>{const pe=new Date(oe).getTime()-T;if(pe<=0)return"Expired";const ve=Math.ceil(pe/6e4);return ve>60?`${Math.ceil(ve/60)} hrs`:`${ve} mins`},de=oe=>{if(!oe)return"Never";const ae=new Date(oe),pe=Date.now()-ae.getTime(),ve=Math.floor(pe/6e4);if(ve<1)return"Just now";if(ve<60)return`${ve}m ago`;const Qe=Math.floor(ve/60);return Qe<24?`${Qe}h ago`:ae.toLocaleDateString()};return c.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[c.jsx("div",{className:"flex justify-between items-end",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),c.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(X,{label:"Total Students",value:B,icon:c.jsx(pu,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),c.jsx(X,{label:"Total XP Awarded",value:Z.toLocaleString(),icon:c.jsx(Ii,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),c.jsx(X,{label:"Resources Viewed",value:Q,icon:c.jsx(xE,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),c.jsx(X,{label:"Avg Active Time",value:`${D}m`,icon:c.jsx(Is,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?c.jsx(Rs,{className:"w-5 h-5"}):c.jsx(m2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[c.jsx(bb,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):c.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(oe=>c.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"text-sm font-bold text-white",children:[oe.senderName," ",c.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",oe.classType]})]}),c.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',oe.content,'"']})]}),c.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.jsxs("div",{className:"flex gap-2 mt-2",children:[c.jsxs("button",{onClick:async()=>{await Be.resolveFlag(oe.id),oe.messageId&&await Be.unflagMessage(oe.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[c.jsx(e1,{className:"w-3 h-3"})," Dismiss"]}),c.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Be.resolveFlag(oe.id),oe.messageId&&await Be.deleteMessage(oe.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[c.jsx(Hi,{className:"w-3 h-3"})," Delete"]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>N(w===oe.id?null:oe.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:c.jsx(wb,{className:"w-3 h-3"})}),w===oe.id&&c.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[c.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",oe.senderName]}),Y.map(ae=>c.jsx("button",{onClick:()=>ge(oe.senderId,ae.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:ae.label},ae.minutes))]})]})]})]},oe.id))})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[c.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[c.jsx(wb,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),W.length===0?c.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[c.jsx(pu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[c.jsx("th",{className:"pb-2",children:"Operative"}),c.jsx("th",{className:"pb-2",children:"Remaining"}),c.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:W.map(oe=>c.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[c.jsxs("td",{className:"py-3",children:[c.jsx("div",{className:"text-sm font-bold text-white",children:oe.name}),c.jsx("div",{className:"text-[10px] text-gray-500",children:oe.classType})]}),c.jsx("td",{className:"py-3",children:c.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:re(oe.mutedUntil)})}),c.jsx("td",{className:"py-3 text-right",children:c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>ce(oe.id,oe.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:c.jsx(_b,{className:"w-3.5 h-3.5"})}),c.jsx("button",{onClick:()=>J(oe.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:c.jsx(bb,{className:"w-3.5 h-3.5"})})]})})]},oe.id))})]})})]})]}),p.length>0&&c.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[c.jsx(RI,{className:"w-5 h-5"}),"Early Warning System"]}),c.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),c.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(oe=>{const ae={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},pe={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},ve=oe.bucket?cd[oe.bucket]:null;return c.jsx("div",{className:`border p-4 rounded-xl ${ae[oe.riskLevel]||ae.LOW}`,children:c.jsxs("div",{className:"flex justify-between items-start gap-3",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[c.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${pe[oe.riskLevel]||pe.LOW}`,children:oe.riskLevel}),ve&&c.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ve.bgColor} ${ve.color} ${ve.borderColor} border`,children:ve.label}),c.jsx("span",{className:"text-sm font-bold text-white truncate",children:oe.studentName}),c.jsx("span",{className:"text-[10px] text-gray-500",children:oe.classType})]}),c.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:oe.message}),ve&&c.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:ve.description}),c.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[c.jsxs("span",{children:["ES: ",oe.engagementScore]}),c.jsxs("span",{children:["Class Avg: ",oe.classMean]}),c.jsx("span",{children:new Date(oe.createdAt).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2 shrink-0",children:[c.jsx("button",{onClick:()=>a(oe.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),c.jsx("button",{onClick:async()=>{await Be.dismissAlert(oe.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},oe.id)})})]}),y.length>0&&c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(RI,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),c.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(cd).map(oe=>{const ae=cd[oe],pe=P[oe];return c.jsxs("div",{className:`border rounded-xl p-3 ${ae.borderColor} ${ae.bgColor} transition hover:scale-[1.02]`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:`text-xs font-bold ${ae.color}`,children:ae.label}),c.jsx("span",{className:"text-lg font-bold text-white",children:pe})]}),c.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:ae.description})]},oe)})}),(()=>{const oe=Object.values(P).reduce((ae,pe)=>ae+pe,0);return oe===0?null:c.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(cd).map(ae=>{const pe=P[ae]/oe*100;if(pe===0)return null;const ve={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return c.jsx("div",{className:`${ve[ae]||"bg-gray-500"} transition-all`,style:{width:`${pe}%`},title:`${cd[ae].label}: ${P[ae]} (${Math.round(pe)}%)`},ae)})})})()]}),c.jsx("div",{className:"mt-8",children:c.jsx($ue,{announcements:d,studentIds:A.map(oe=>oe.id)})}),c.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[c.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[c.jsx(E,{label:"Student",col:"name"}),c.jsx(E,{label:"Class",col:"class"}),c.jsx(E,{label:"Last Seen",col:"lastSeen",className:"text-center"}),c.jsx(E,{label:"Total Time",col:"time",className:"text-center"}),c.jsx(E,{label:"Resources",col:"resources",className:"text-center"}),c.jsx(E,{label:"XP",col:"xp",className:"text-right"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const oe=[...A].sort((pe,ve)=>{var Qe,Ne,le,we,xe,ut;switch(C){case"name":return $==="asc"?pe.name.localeCompare(ve.name):ve.name.localeCompare(pe.name);case"class":return $==="asc"?(pe.classType||"").localeCompare(ve.classType||""):(ve.classType||"").localeCompare(pe.classType||"");case"lastSeen":{const He=pe.lastLoginAt?new Date(pe.lastLoginAt).getTime():0,ct=ve.lastLoginAt?new Date(ve.lastLoginAt).getTime():0;return $==="asc"?He-ct:ct-He}case"time":{const He=((Qe=pe.stats)==null?void 0:Qe.totalTime)||0,ct=((Ne=ve.stats)==null?void 0:Ne.totalTime)||0;return $==="asc"?He-ct:ct-He}case"resources":{const He=((le=pe.stats)==null?void 0:le.problemsCompleted)||0,ct=((we=ve.stats)==null?void 0:we.problemsCompleted)||0;return $==="asc"?He-ct:ct-He}case"xp":default:{const He=((xe=pe.gamification)==null?void 0:xe.xp)||0,ct=((ut=ve.gamification)==null?void 0:ut.xp)||0;return $==="asc"?He-ct:ct-He}}}),ae=Math.max(1,...A.map(pe=>{var ve;return((ve=pe.gamification)==null?void 0:ve.xp)||0}));return oe.map(pe=>{var Ut,Ie,st;const ve=((Ut=pe.gamification)==null?void 0:Ut.xp)||0,Qe=Math.round(ve/ae*100),Ne=pe.lastLoginAt,le=Ne?Date.now()-new Date(Ne).getTime():1/0,we=le<36e5?"text-green-400":le<864e5?"text-yellow-400":le<1/0?"text-red-400":"text-gray-600",xe=le<36e5?"bg-green-500":le<864e5?"bg-yellow-500":le<1/0?"bg-red-500":"bg-gray-600",ut=R.get(pe.id),He={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ct=F.get(pe.id),nt=ct?cd[ct.bucket]:null;return c.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(ut==null?void 0:ut.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>a(pe.id),children:[c.jsx("td",{className:"p-3 font-bold text-white",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[pe.avatarUrl?c.jsx("img",{src:pe.avatarUrl,alt:pe.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):c.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:pe.name.charAt(0)}),c.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${xe}`})]}),c.jsx("span",{className:"truncate max-w-[120px]",children:pe.name}),ut&&He[ut.riskLevel]&&c.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${He[ut.riskLevel]}`,title:`${ut.riskLevel} risk: ${ut.reason}`}),nt&&c.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${nt.bgColor} ${nt.color} border ${nt.borderColor}`,title:nt.description,children:nt.label})]})}),c.jsx("td",{className:"p-3 text-sm text-gray-400",children:pe.classType}),c.jsx("td",{className:`p-3 text-center text-xs font-mono ${we}`,children:de(pe.lastLoginAt)}),c.jsxs("td",{className:"p-3 text-center text-white",children:[((Ie=pe.stats)==null?void 0:Ie.totalTime)||0,"m"]}),c.jsx("td",{className:"p-3 text-center text-white",children:((st=pe.stats)==null?void 0:st.problemsCompleted)||0}),c.jsx("td",{className:"p-3 text-right",children:c.jsxs("div",{className:"flex items-center justify-end gap-2",children:[c.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Qe}%`}})}),c.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:ve})]})})]},pe.id)})})()})]})})]}),i&&(()=>{const oe=A.find(ae=>ae.id===i);return oe?c.jsx(que,{student:oe,submissions:r.filter(ae=>ae.userId===i),assignments:e,bucketProfiles:y.filter(ae=>ae.studentId===i),onClose:()=>a(null)}):null})()]})},Gue=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const i=na(),{confirm:a}=Su(),[s,l]=M.useState(new Set),[d,h]=M.useState(Lr.AP_PHYSICS),[p,m]=M.useState(!1),[y,b]=M.useState(!1),[T,S]=M.useState({}),w=(ye,We)=>{S(mt=>{const gt=mt[ye]||{col:"name",dir:"asc"};return{...mt,[ye]:{col:We,dir:gt.col===We&&gt.dir==="asc"?"desc":"asc"}}})},N=({label:ye,col:We,type:mt,className:gt})=>{const ot=T[mt]||{col:"name",dir:"asc"},Je=ot.col===We;return c.jsx("th",{className:`cursor-pointer select-none group p-4 ${gt??""}`,onClick:()=>w(mt,We),children:c.jsxs("div",{className:`flex items-center gap-1 ${gt!=null&&gt.includes("text-center")?"justify-center":"justify-start"}`,children:[c.jsx("span",{children:ye}),c.jsxs("span",{className:"flex flex-col gap-px",children:[c.jsx(vE,{className:`w-2.5 h-2.5 -mb-0.5 ${Je&&ot.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),c.jsx($a,{className:`w-2.5 h-2.5 -mt-0.5 ${Je&&ot.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[C,k]=M.useState(""),[$,I]=M.useState(Lr.AP_PHYSICS),[L,E]=M.useState(""),[A,R]=M.useState(""),[F,P]=M.useState(!1),[B,D]=M.useState(!1),[Q,Z]=M.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[W,J]=M.useState(10),[Y,ge]=M.useState("single"),[ce,X]=M.useState([]),[re,de]=M.useState(!1),oe=M.useRef(null),ae=t.filter(ye=>ye.role==="STUDENT"),pe=M.useMemo(()=>e.filter(ye=>!t.some(We=>We.email.toLowerCase()===ye.email.toLowerCase())),[e,t]),ve=M.useMemo(()=>[...Array.from(new Set([...Object.values(Lr).filter(We=>We!==Lr.UNCATEGORIZED),...r.map(We=>We.className)])).sort(),Lr.UNCATEGORIZED],[r]),Qe=ye=>{const We=ae.filter(ot=>{var Je,Rt;return((Je=ot.enrolledClasses)==null?void 0:Je.includes(ye))||ye===Lr.UNCATEGORIZED&&(((Rt=ot.enrolledClasses)==null?void 0:Rt.length)===0||!ot.enrolledClasses)}),mt=We.every(ot=>s.has(ot.id)),gt=new Set(s);We.forEach(ot=>{mt?gt.delete(ot.id):gt.add(ot.id)}),l(gt)},Ne=ye=>{const We=new Set(s);We.has(ye)?We.delete(ye):We.add(ye),l(We)},le=async()=>{if(s.size>0){const ye=Array.from(s).map(async We=>{const mt=t.find(gt=>gt.id===We);if(mt){const gt=mt.enrolledClasses||[],ot=Array.from(new Set([...gt.filter(Je=>Je!==Lr.UNCATEGORIZED),d]));await Be.updateUserEnrolledClasses(We,ot)}});await Promise.all(ye),l(new Set)}},we=async ye=>{if(s.size>0){if(!await a({message:`Remove ${s.size} students from ${ye}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const We=Array.from(s).map(async mt=>{const gt=t.find(ot=>ot.id===mt);if(gt){const Je=(gt.enrolledClasses||[]).filter(Rt=>Rt!==ye);await Be.updateUserEnrolledClasses(mt,Je)}});await Promise.all(We),l(new Set)}},xe=async(ye,We)=>{if(await a({message:`Remove ${ye.name} from ${We}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const gt=(ye.enrolledClasses||[]).filter(ot=>ot!==We);await Be.updateUserEnrolledClasses(ye.id,gt)}},ut=async(ye,We)=>{await a({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${We}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Be.removeUser(ye)},He=async ye=>{ye!==Lr.UNCATEGORIZED&&await a({message:`Delete group config ${ye}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Be.deleteClassConfig(ye)},ct=async ye=>{await a({message:`Cancel invite for ${ye}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Be.removeFromWhitelist(ye)},nt=(ye,We)=>{ye!==Lr.UNCATEGORIZED&&(R(ye),P(!0),We?(Z(We.features),J(We.xpPerMinute||10)):(Z({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),J(10)),b(!0))},Ut=ye=>{ye.preventDefault(),n(C,$),L.trim()&&Be.updateWhitelistSection(C,L.trim()),k(""),E(""),m(!1)},Ie=ye=>{var gt;const We=(gt=ye.target.files)==null?void 0:gt[0];if(!We)return;const mt=new FileReader;mt.onload=ot=>{var ee,Re;const Je=(ee=ot.target)==null?void 0:ee.result;if(!Je)return;const Rt=Je.split(/\r?\n/).filter(Ve=>Ve.trim()),Yt=(Re=Rt[0])!=null&&Re.toLowerCase().includes("email")?1:0,Kr=new Set(e.map(Ve=>Ve.email.toLowerCase())),ln=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Br=Rt.slice(Yt).map(Ve=>{const Gt=Ve.includes("	")?Ve.split("	"):Ve.split(","),jt=(Gt[0]||"").trim().toLowerCase(),vr=(Gt[1]||"").trim()||Lr.AP_PHYSICS,dr=(Gt[2]||"").trim();let zt="pending";return ln.test(jt)?Kr.has(jt)&&(zt="duplicate"):zt="invalid",{email:jt,classType:vr,section:dr,status:zt}}).filter(Ve=>Ve.email.length>0);X(Br)},mt.readAsText(We),ye.target.value=""},st=async()=>{const ye=ce.filter(mt=>mt.status==="pending");if(ye.length===0)return;de(!0);let We=0;for(const mt of ye)try{await Be.addToWhitelist(mt.email,mt.classType),mt.section&&await Be.updateWhitelistSection(mt.email,mt.section),mt.status="success",We++}catch{mt.status="invalid"}X([...ce]),de(!1),i.success(`${We} operative${We!==1?"s":""} imported successfully.`),ce.every(mt=>mt.status==="success"||mt.status==="duplicate")&&setTimeout(()=>{m(!1),X([]),ge("single")},1500)},pt=async ye=>{if(ye.preventDefault(),!!A){D(!0);try{await Be.saveClassConfig({id:A,className:A,features:Q,xpPerMinute:W}),R(""),b(!1),P(!1)}catch(We){console.error("Failed to save config:",We),i.error("Failed to save class configuration.")}finally{D(!1)}}},St=ye=>{if(!ye)return"Never";const We=new Date(ye),mt=Date.now()-We.getTime(),gt=Math.floor(mt/6e4);if(gt<60)return`${gt}m ago`;const ot=Math.floor(gt/60);return ot<24?`${ot}h ago`:We.toLocaleDateString()},Xt=ye=>{const We=ye===Lr.UNCATEGORIZED,mt=T[ye]||{col:"name",dir:"asc"},gt=[...ae.filter(Je=>{var Rt;return((Rt=Je.enrolledClasses)==null?void 0:Rt.includes(ye))||We&&(!Je.enrolledClasses||Je.enrolledClasses.length===0)})].sort((Je,Rt)=>{var Yt,Kr,ln,Br;switch(mt.col){case"status":{const ee=Je.isWhitelisted?1:0,Re=Rt.isWhitelisted?1:0;return mt.dir==="asc"?ee-Re:Re-ee}case"lastSeen":{const ee=Je.lastLoginAt?new Date(Je.lastLoginAt).getTime():0,Re=Rt.lastLoginAt?new Date(Rt.lastLoginAt).getTime():0;return mt.dir==="asc"?ee-Re:Re-ee}case"xp":{const ee=((Kr=(Yt=Je.gamification)==null?void 0:Yt.classXp)==null?void 0:Kr[ye])||0,Re=((Br=(ln=Rt.gamification)==null?void 0:ln.classXp)==null?void 0:Br[ye])||0;return mt.dir==="asc"?ee-Re:Re-ee}case"name":default:return mt.dir==="asc"?Je.name.localeCompare(Rt.name):Rt.name.localeCompare(Je.name)}}),ot=r.find(Je=>Je.className===ye);return c.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${We?"opacity-90":""}`,children:[c.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${We?"bg-orange-500/10":"bg-white/5"}`,children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h3",{className:`font-bold text-lg tracking-wide ${We?"text-orange-300":"text-white"}`,children:[We&&c.jsx(poe,{className:"w-5 h-5 inline mr-2 mb-1"}),ye]}),c.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${We?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[gt.length," Registered"]}),!We&&c.jsx("button",{onClick:()=>nt(ye,ot),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:c.jsx(Hm,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"flex gap-2",children:[s.size>0&&Array.from(s).some(Je=>gt.find(Rt=>Rt.id===Je))&&c.jsxs("button",{onClick:()=>we(ye),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[c.jsx(Goe,{className:"w-3 h-3"})," Remove Selected"]}),!We&&c.jsxs("button",{onClick:()=>He(ye),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[c.jsx(Hi,{className:"w-3 h-3"}),"Config"]})]})]}),c.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:c.jsxs("table",{className:"w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[c.jsx("th",{className:"w-12 p-4 text-center",children:gt.length>0&&c.jsx("button",{onClick:()=>Qe(ye),className:"hover:text-purple-400 transition",children:c.jsx(VI,{className:"w-4 h-4"})})}),c.jsx(N,{label:"Operative",col:"name",type:ye}),c.jsx(N,{label:"System Status",col:"status",type:ye,className:"text-center"}),c.jsx(N,{label:"Last Seen",col:"lastSeen",type:ye,className:"text-center"}),c.jsx(N,{label:"Class XP",col:"xp",type:ye,className:"text-center"}),c.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:gt.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 italic text-sm",children:We?"No restricted operatives found.":"No students registered in this roster yet."})}):gt.map(Je=>{var Yt,Kr,ln,Br;const Rt=((Kr=(Yt=Je.gamification)==null?void 0:Yt.classXp)==null?void 0:Kr[ye])||0;return c.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(Je.id)?"bg-purple-500/10":""}`,children:[c.jsx("td",{className:"p-4 text-center",children:c.jsx("button",{onClick:()=>Ne(Je.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(Je.id)?c.jsx(Voe,{className:"w-4 h-4 text-purple-500"}):c.jsx(VI,{className:"w-4 h-4 group-hover:text-gray-400"})})}),c.jsx("td",{className:"p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:Je.avatarUrl,alt:Je.name,className:"w-8 h-8 rounded-full border border-white/10"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Je.name}),c.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[Je.email,Je.section?`  ${Je.section}`:""]})]})]})}),c.jsx("td",{className:"p-4 text-center",children:c.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Je.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Je.isWhitelisted?c.jsx(zI,{className:"w-3 h-3"}):c.jsx(m2,{className:"w-3 h-3"}),Je.isWhitelisted?"Authorized":"Restricted"]})}),c.jsx("td",{className:"p-4 text-center",children:c.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[c.jsx(Is,{className:"w-3 h-3"}),St(Je.lastLoginAt)]})}),c.jsx("td",{className:"p-4 text-center",children:c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-lg text-purple-300",children:Rt.toLocaleString()}),(((ln=Je.enrolledClasses)==null?void 0:ln.length)||0)>1&&c.jsxs("details",{className:"mt-1",children:[c.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),c.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(Br=Je.enrolledClasses)==null?void 0:Br.map(ee=>{var Re,Ve;return c.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[c.jsx("span",{className:`truncate ${ee===ye?"text-purple-400 font-bold":"text-gray-500"}`,children:ee}),c.jsx("span",{className:"text-gray-400 font-mono",children:(((Ve=(Re=Je.gamification)==null?void 0:Re.classXp)==null?void 0:Ve[ee])||0).toLocaleString()})]},ee)})})]})]})}),c.jsx("td",{className:"p-4 text-center",children:c.jsx("div",{className:"flex items-center justify-center gap-2",children:c.jsx("button",{onClick:()=>We?ut(Je.id,Je.name):xe(Je,ye),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:We?"Permanently Delete":"Remove from this Class",children:c.jsx(hs,{className:"w-4 h-4"})})})})]},Je.id)})})]})})]},ye)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),c.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[c.jsxs("button",{onClick:()=>{R(""),Z({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),P(!1),b(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[c.jsx(Hm,{className:"w-4 h-4"}),"Class Config"]}),c.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[c.jsx(FI,{className:"w-4 h-4"}),"Invite Student"]})]})]}),pe.length>0&&c.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[c.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[c.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[c.jsx(Coe,{className:"w-4 h-4"})," Pending Class Invitations (",pe.length,")"]}),c.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),c.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:pe.map(ye=>c.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[c.jsxs("div",{className:"min-w-0",children:[c.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:ye.email}),c.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[c.jsx(zI,{className:"w-3 h-3 text-amber-500"}),c.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(ye.classTypes||[ye.classType]).join(", ")," Access"]})]})]}),c.jsx("button",{onClick:()=>ct(ye.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:c.jsx(Hi,{className:"w-3.5 h-3.5"})})]},ye.email))})]}),c.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[c.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),c.jsxs("div",{className:"relative w-full sm:w-auto",children:[c.jsx("select",{value:d,onChange:ye=>h(ye.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:ve.filter(ye=>ye!==Lr.UNCATEGORIZED).map(ye=>c.jsxs("option",{value:ye,children:["Apply ",ye," Access"]},ye))}),c.jsx($a,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),c.jsxs("button",{onClick:le,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[c.jsx(zl,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),c.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),c.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),c.jsx("div",{className:"pb-12",children:ve.map(ye=>Xt(ye))}),c.jsxs(Va,{isOpen:p,onClose:()=>{m(!1),X([]),ge("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[c.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[c.jsxs("button",{onClick:()=>{ge("single"),X([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Y==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[c.jsx(FI,{className:"w-3.5 h-3.5"})," Single"]}),c.jsxs("button",{onClick:()=>ge("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Y==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[c.jsx(Gm,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),Y==="single"?c.jsxs("form",{onSubmit:Ut,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),c.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:C,onChange:ye=>k(ye.target.value),placeholder:"student@gmail.com"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),c.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:$,onChange:ye=>I(ye.target.value),children:ve.filter(ye=>ye!==Lr.UNCATEGORIZED).map(ye=>c.jsx("option",{value:ye,children:ye},ye))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),c.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:L,onChange:ye=>E(ye.target.value),placeholder:"e.g. Period 3, Block A"})]}),c.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),c.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[c.jsx("input",{type:"file",ref:oe,accept:".csv,.tsv,.txt",onChange:Ie,className:"hidden"}),ce.length===0?c.jsxs(c.Fragment,{children:[c.jsx(Gm,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),c.jsx("button",{onClick:()=>{var ye;return(ye=oe.current)==null?void 0:ye.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),c.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",c.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),c.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),c.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:c.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",c.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",c.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",c.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):c.jsxs(c.Fragment,{children:[c.jsx(xE,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),c.jsxs("p",{className:"text-sm font-bold text-white",children:[ce.length," records parsed"]}),c.jsx("button",{onClick:()=>{X([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),ce.length>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:c.jsxs("table",{className:"w-full text-left text-xs",children:[c.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:c.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[c.jsx("th",{className:"p-2 pl-3",children:"Email"}),c.jsx("th",{className:"p-2",children:"Class"}),c.jsx("th",{className:"p-2",children:"Section"}),c.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:ce.map((ye,We)=>c.jsxs("tr",{className:ye.status==="invalid"?"bg-red-500/5":ye.status==="duplicate"?"bg-yellow-500/5":ye.status==="success"?"bg-green-500/5":"",children:[c.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:ye.email}),c.jsx("td",{className:"p-2 text-gray-400",children:ye.classType}),c.jsx("td",{className:"p-2 text-gray-500",children:ye.section||""}),c.jsx("td",{className:"p-2 pr-3 text-right",children:c.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${ye.status==="pending"?"bg-blue-500/20 text-blue-400":ye.status==="success"?"bg-green-500/20 text-green-400":ye.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:ye.status})})]},We))})]})}),c.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("span",{className:"text-blue-400",children:[ce.filter(ye=>ye.status==="pending").length," ready"]}),c.jsxs("span",{className:"text-yellow-400",children:[ce.filter(ye=>ye.status==="duplicate").length," duplicates"]}),c.jsxs("span",{className:"text-red-400",children:[ce.filter(ye=>ye.status==="invalid").length," invalid"]}),ce.some(ye=>ye.status==="success")&&c.jsxs("span",{className:"text-green-400",children:[ce.filter(ye=>ye.status==="success").length," imported"]})]})}),ce.filter(ye=>ye.status==="duplicate").length>0&&c.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[c.jsx(Rs,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),c.jsx("button",{onClick:st,disabled:re||ce.filter(ye=>ye.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:re?c.jsxs(c.Fragment,{children:[c.jsx(os,{className:"w-4 h-4 animate-spin"})," Importing..."]}):c.jsxs(c.Fragment,{children:["Import ",ce.filter(ye=>ye.status==="pending").length," Operatives"]})})]})]})]}),c.jsx(Va,{isOpen:y,onClose:()=>b(!1),title:F?"Edit Class Node Config":"Initialize New Class Node",children:c.jsxs("form",{onSubmit:pt,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),c.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:ye=>R(ye.target.value),placeholder:"e.g. AP Physics Period 4"}),F&&c.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),c.jsxs("div",{className:"border-t border-white/10 pt-4",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsLab,onChange:ye=>Z({...Q,physicsLab:ye.target.checked})}),c.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.evidenceLocker,onChange:ye=>Z({...Q,evidenceLocker:ye.target.checked})}),c.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.leaderboard,onChange:ye=>Z({...Q,leaderboard:ye.target.checked})}),c.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsTools,onChange:ye=>Z({...Q,physicsTools:ye.target.checked})}),c.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[c.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.communications,onChange:ye=>Z({...Q,communications:ye.target.checked})}),c.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"number",min:1,max:100,value:W,onChange:ye=>J(Math.max(1,Math.min(100,parseInt(ye.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),c.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),c.jsx("button",{type:"submit",disabled:B,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${B?"opacity-70 cursor-not-allowed":""}`,children:B?c.jsxs(c.Fragment,{children:[c.jsx(os,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):F?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Uc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},LR={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},Kue=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,Wue=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,Xue=({assignment:t,isOpen:e,onClose:r})=>{const n=na(),i=M.useRef(null),[a,s]=M.useState([]),[l,d]=M.useState(!0),[h,p]=M.useState(!1),[m,y]=M.useState(t.category==="Practice Set"?"reading":"manage"),[b,T]=M.useState(null),[S,w]=M.useState(null),[N,C]=M.useState(""),[k,$]=M.useState(null),[I,L]=M.useState(!1),[E,A]=M.useState(null),[R,F]=M.useState({}),[P,B]=M.useState(null),[D,Q]=M.useState(!0),[Z,W]=M.useState(null),[J,Y]=M.useState(null),[ge,ce]=M.useState(null),[X,re]=M.useState(!1),de=M.useRef(null),oe=t.category==="Practice Set";M.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const st=await Vi(ht(Ue,"question_banks",t.id));st.exists()?s(st.data().questions||[]):s([]);const pt=await Vi(ht(Ue,"reading_materials",t.id));pt.exists()?W(pt.data()):W(null)}catch(st){console.error("Failed to load bank:",st),s([])}finally{d(!1)}})()},[e,t.id]);const ae=async Ie=>{p(!0);try{await Zi(ht(Ue,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ie,questionCount:Ie.length,updatedAt:new Date().toISOString()}),s(Ie)}catch(st){n.error("Failed to save: "+(st instanceof Error?st.message:"Unknown error"))}finally{p(!1)}},pe=async Ie=>{const st=a.filter(pt=>pt.id!==Ie);await ae(st),n.success("Question removed."),k===Ie&&$(null)},ve=async()=>{try{await Oa(ht(Ue,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Qe=()=>{navigator.clipboard.writeText(Kue(t.title,t.classType,t.description)),L(!0),setTimeout(()=>L(!1),2e3),n.success("Prompt copied!")},Ne=()=>{navigator.clipboard.writeText(Wue(t.title,t.classType,t.description)),re(!0),setTimeout(()=>re(!1),2e3),n.success("Reading prompt copied!")},le=async Ie=>{var pt;const st=(pt=Ie.target.files)==null?void 0:pt[0];if(st){ce(null),Y(null);try{let Xt=(await st.text()).replace(/```json\s*|```\s*/g,"").trim();Xt=Xt.replace(/[\x00-\x1F\x7F]/g,mt=>mt===`
`||mt==="\r"||mt==="	"?" ":"");let ye;try{ye=JSON.parse(Xt)}catch{const mt=Xt.match(/\{[\s\S]*\}/);if(mt)ye=JSON.parse(mt[0]);else throw new Error("No JSON object found.")}if(!ye.title||!ye.sections||!Array.isArray(ye.sections))throw new Error("Missing required fields: title and sections array.");const We=ye.sections.filter(mt=>!mt.title||!mt.content);if(We.length>0)throw new Error(`${We.length} section(s) missing title or content.`);Y(ye)}catch(St){ce(St instanceof Error?St.message:"Parse failed.")}de.current&&(de.current.value="")}},we=async()=>{if(J){p(!0);try{await Zi(ht(Ue,"reading_materials",t.id),{...J,assignmentId:t.id,updatedAt:new Date().toISOString()}),W(J),Y(null),n.success(`Study material uploaded: ${J.sections.length} sections!`)}catch(Ie){n.error("Failed to save: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{p(!1)}}},xe=async()=>{p(!0);try{await Oa(ht(Ue,"reading_materials",t.id)),W(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},ut=async Ie=>{var pt;const st=(pt=Ie.target.files)==null?void 0:pt[0];if(st){B(null),A(null);try{let Xt=(await st.text()).replace(/```json\s*|```\s*/g,"").trim();Xt=Xt.replace(/[\x00-\x1F\x7F]/g,ot=>ot===`
`||ot==="\r"||ot==="	"?" ":"");let ye;try{ye=JSON.parse(Xt)}catch{const ot=Xt.match(/\[[\s\S]*\]/);if(ot)try{ye=JSON.parse(ot[0])}catch{const Je=ot[0];let Rt=null;for(let Yt=Je.length-1;Yt>0;Yt--)if(Je[Yt]==="}")try{Rt=JSON.parse(Je.slice(0,Yt+1)+"]");break}catch{}if(Rt)ye=Rt;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Je=null;const Rt="["+Xt;for(let Yt=Rt.length-1;Yt>0;Yt--)if(Rt[Yt]==="}")try{Je=JSON.parse(Rt.slice(0,Yt+1)+"]");break}catch{}if(Je)ye=Je;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ye)||ye.length===0)throw new Error("Must be a non-empty JSON array.");const We=ye.filter(ot=>ot.id&&ot.tier&&ot.type&&ot.stem&&ot.options&&ot.correctAnswer),mt=ye.length-We.length;if(We.length===0){B("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const gt={};We.forEach(ot=>{const Je=ot.tier;gt[Je]=(gt[Je]||0)+1}),A(We),F(gt),mt>0&&n.success(`Parsed ${We.length} questions (${mt} skipped  missing fields).`)}catch(St){B(St instanceof Error?St.message:"Parse failed.")}i.current&&(i.current.value="")}},He=async()=>{if(!E)return;let Ie;if(D&&a.length>0){const st=new Set(a.map(St=>St.id)),pt=E.map((St,Xt)=>({...St,id:st.has(St.id)?`${St.id}_${Date.now()}_${Xt}`:St.id}));Ie=[...a,...pt]}else Ie=E;await ae(Ie),n.success(`${D?"Added":"Replaced with"} ${E.length} questions. Total: ${Ie.length}`),A(null),y("manage")},ct=M.useMemo(()=>{let Ie=a;if(b&&(Ie=Ie.filter(st=>st.tier===b)),S&&(Ie=Ie.filter(st=>st.type===S)),N){const st=N.toLowerCase();Ie=Ie.filter(pt=>pt.stem.toLowerCase().includes(st)||pt.id.toLowerCase().includes(st))}return Ie},[a,b,S,N]),nt=M.useMemo(()=>{const Ie={1:0,2:0,3:0};return a.forEach(st=>{Ie[st.tier]=(Ie[st.tier]||0)+1}),Ie},[a]),Ut=M.useMemo(()=>{const Ie={};return a.forEach(st=>{Ie[st.type]=(Ie[st.type]||0)+1}),Ie},[a]);return e?c.jsx(Va,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:c.jsxs("div",{className:"text-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[c.jsx(P5,{className:"w-5 h-5 text-purple-400 shrink-0"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),c.jsx("div",{className:"text-xs mt-1",children:l?c.jsx("span",{className:"text-gray-500",children:"Loading..."}):a.length>0?c.jsxs("span",{className:"text-emerald-400",children:[a.length," questions loaded"]}):c.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),a.length>0&&!l&&c.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ie=>c.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Uc[Ie].bg} ${Uc[Ie].border} border`,children:[c.jsx("div",{className:`text-sm font-bold ${Uc[Ie].text}`,children:nt[Ie]}),c.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ie]})]},Ie))})]}),c.jsxs("div",{className:"flex gap-2 mb-4",children:[!oe&&c.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[c.jsx(P5,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",a.length,")"]}),!oe&&c.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[c.jsx(zl,{className:"w-3.5 h-3.5 inline mr-1.5"}),a.length>0?"Add More":"Create Bank"]}),c.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[c.jsx(so,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",Z?`(${Z.sections.length})`:""]})]}),m==="manage"&&c.jsx("div",{className:"space-y-3",children:l?c.jsx("div",{className:"py-12 text-center",children:c.jsx(os,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):a.length===0?c.jsxs("div",{className:"py-12 text-center",children:[c.jsx(P5,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),c.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[c.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[c.jsx(Kq,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{value:N,onChange:Ie=>C(Ie.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ie=>c.jsxs("button",{onClick:()=>T(b===Ie?null:Ie),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b===Ie?`${Uc[Ie].bg} ${Uc[Ie].text} ${Uc[Ie].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ie," (",nt[Ie],")"]},Ie))]})]}),Object.keys(Ut).length>1&&c.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Ut).sort((Ie,st)=>st[1]-Ie[1]).map(([Ie,st])=>c.jsxs("button",{onClick:()=>w(S===Ie?null:Ie),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Ie?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[LR[Ie]||Ie," (",st,")"]},Ie))}),c.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:ct.length===0?c.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):ct.map(Ie=>{const st=Uc[Ie.tier]||Uc[1],pt=k===Ie.id;return c.jsxs("div",{className:`rounded-xl border transition ${pt?`${st.border} ${st.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[c.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>$(pt?null:Ie.id),children:[c.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${st.bg} ${st.text}`,children:["T",Ie.tier]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[c.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ie.id}),c.jsx("span",{className:"text-[8px] text-gray-600",children:""}),c.jsx("span",{className:"text-[8px] text-gray-500",children:LR[Ie.type]||Ie.type}),c.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[c.jsx(Ii,{className:"w-2.5 h-2.5"}),Ie.xp]})]}),c.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ie.stem})]}),c.jsx(jd,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${pt?"rotate-90":""}`})]}),pt&&c.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ie.context&&c.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ie.context}),c.jsx("div",{className:"space-y-1",children:Ie.options.map(St=>{const Xt=Array.isArray(Ie.correctAnswer)?Ie.correctAnswer.includes(St.id):Ie.correctAnswer===St.id;return c.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Xt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[c.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[St.id.toUpperCase(),"."]}),c.jsx("span",{children:St.text}),Xt&&c.jsx(gi,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},St.id)})}),c.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[c.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ie.explanation]}),Ie.linkedFollowUp&&c.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[c.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ie.linkedFollowUp.stem]}),c.jsxs("button",{onClick:()=>pe(Ie.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[c.jsx(Hi,{className:"w-3 h-3"})," Delete Question"]})]})]},Ie.id)})}),c.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[c.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",ct.length," of ",a.length]}),c.jsxs("button",{onClick:ve,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[c.jsx(Hi,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&c.jsxs("div",{className:"space-y-5",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),c.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),c.jsx("button",{onClick:Qe,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${I?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:I?c.jsxs(c.Fragment,{children:[c.jsx(gi,{className:"w-4 h-4"})," Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(sA,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),c.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",c.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),c.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[c.jsx(DI,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),c.jsx("input",{ref:i,type:"file",accept:".json,.txt",onChange:ut,className:"hidden"})]})]}),P&&c.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[c.jsx(Rs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),c.jsx("p",{className:"text-red-300/70 text-xs",children:P})]}),E&&c.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(gi,{className:"w-4 h-4 text-emerald-400"}),c.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[E.length," questions parsed"]})]}),c.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ie=>c.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[c.jsx("div",{className:"text-base font-bold text-white",children:R[Ie]||0}),c.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ie]})]},Ie))}),a.length>0&&c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>Q(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${D?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[c.jsx(zl,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",a.length," + ",E.length,")"]}),c.jsxs("button",{onClick:()=>Q(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${D?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[c.jsx(Fm,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:He,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?c.jsx(os,{className:"w-4 h-4 animate-spin"}):c.jsx(Gm,{className:"w-4 h-4"}),h?"Saving...":`Upload ${E.length} Questions`]}),c.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:c.jsx(Hi,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&c.jsxs("div",{className:"space-y-5",children:[Z?c.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(so,{className:"w-4 h-4 text-emerald-400"}),c.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),c.jsxs("button",{onClick:xe,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[c.jsx(Hi,{className:"w-3 h-3"})," Remove"]})]}),Z.description&&c.jsx("p",{className:"text-xs text-gray-400",children:Z.description}),c.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[c.jsxs("span",{children:[Z.sections.length," sections"]}),Z.estimatedMinutes&&c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsxs("span",{children:["~",Z.estimatedMinutes," min read"]})]})]}),c.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:Z.sections.map((Ie,st)=>c.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:st+1}),c.jsx("span",{className:"truncate",children:Ie.title})]},st))})]}):c.jsxs("div",{className:"py-6 text-center",children:[c.jsx(so,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),c.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),c.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),c.jsx("button",{onClick:Ne,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?c.jsxs(c.Fragment,{children:[c.jsx(gi,{className:"w-4 h-4"})," Copied!"]}):c.jsxs(c.Fragment,{children:[c.jsx(sA,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[c.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),c.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[c.jsx(DI,{className:"w-4 h-4 text-gray-400"}),c.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),c.jsx("input",{ref:de,type:"file",accept:".json,.txt",onChange:le,className:"hidden"})]})]}),ge&&c.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[c.jsx(Rs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),c.jsx("p",{className:"text-red-300/70 text-xs",children:ge})]}),J&&c.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(gi,{className:"w-4 h-4 text-emerald-400"}),c.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:J.title})]}),c.jsxs("p",{className:"text-xs text-gray-400",children:[J.sections.length," sections  ~",J.estimatedMinutes||"?"," min read"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:we,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?c.jsx(os,{className:"w-4 h-4 animate-spin"}):c.jsx(Gm,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),c.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:c.jsx(Hi,{className:"w-4 h-4"})})]})]})]}),h&&c.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[c.jsx(os,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},BR=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],Que={Textbook:c.jsx(so,{className:"w-4 h-4"}),Simulation:c.jsx(bE,{className:"w-4 h-4"}),"Lab Guide":c.jsx(p2,{className:"w-4 h-4"}),"Practice Set":c.jsx(Mo,{className:"w-4 h-4"}),Article:c.jsx(Vq,{className:"w-4 h-4"}),"Video Lesson":c.jsx(Wq,{className:"w-4 h-4"}),Supplemental:c.jsx(_E,{className:"w-4 h-4"})},Yue=({assignments:t,submissions:e,classConfigs:r,onCreateAssignment:n,onPreviewAssignment:i})=>{const a=na(),{confirm:s}=Su(),[l,d]=M.useState(!1),[h,p]=M.useState(!1),[m,y]=M.useState(!1),[b,T]=M.useState("All Classes"),[S,w]=M.useState("All Categories"),[N,C]=M.useState(new Set),[k,$]=M.useState(null),[I,L]=M.useState({title:"",description:"",status:gl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[E,A]=M.useState(new Set([Lr.AP_PHYSICS])),[R,F]=M.useState(!1),P=M.useMemo(()=>{const Y=Object.values(Lr).filter(ce=>ce!==Lr.UNCATEGORIZED),ge=(r||[]).map(ce=>ce.className);return Array.from(new Set(["All Classes",...Y,...ge]))},[r]),B=M.useMemo(()=>t.filter(Y=>{const ge=b==="All Classes"||Y.classType===b,ce=S==="All Categories"||Y.category===S;return ge&&ce}),[t,b,S]),D=M.useMemo(()=>{const Y={};return B.forEach(ge=>{const ce=b==="All Classes"?`${ge.classType.toUpperCase()}  ${ge.unit||"Unassigned"}`:ge.unit||"Unassigned";Y[ce]||(Y[ce]=[]),Y[ce].push(ge)}),Object.keys(Y).sort().reduce((ge,ce)=>(ge[ce]=Y[ce],ge),{})},[B,b]),Q=async Y=>{if(Y.preventDefault(),E.size===0){a.error("Select a target class.");return}y(!0);try{h&&I.id?await n({...I,classType:Array.from(E)[0]}):await Promise.all(Array.from(E).map(ge=>n({...I,classType:ge}))),d(!1),p(!1)}catch(ge){console.error(ge)}finally{y(!1)}},Z=Y=>{L(Y),A(new Set([Y.classType])),p(!0),d(!0)},W=async Y=>{const ge=Y.status===gl.ACTIVE?gl.ARCHIVED:gl.ACTIVE;await Be.updateAssignmentStatus(Y.id,ge)},J=M.useMemo(()=>[...Array.isArray(e)?e:[]].sort((ge,ce)=>{const X=new Date(ge.submittedAt||0).getTime();return new Date(ce.submittedAt||0).getTime()-X}),[e]);return c.jsxs("div",{className:"space-y-8 pb-12",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),c.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),c.jsxs("button",{onClick:()=>{L({title:"",description:"",status:gl.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),p(!1),d(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[c.jsx(zl,{className:"w-5 h-5"})," Deploy Resource"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[c.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[c.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("select",{value:b,onChange:Y=>T(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:P.map(Y=>c.jsx("option",{value:Y,children:Y},Y))}),c.jsx($a,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:S,onChange:Y=>w(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[c.jsx("option",{value:"All Categories",children:"All Categories"}),BR.map(Y=>c.jsx("option",{value:Y,children:Y},Y))]}),c.jsx($a,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),c.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(D).map(([Y,ge])=>c.jsxs("div",{className:"mb-6 last:mb-0",children:[c.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[c.jsx("button",{onClick:()=>{const ce=new Set(N);ce.has(Y)?ce.delete(Y):ce.add(Y),C(ce)},className:"text-gray-400 hover:text-white transition",children:N.has(Y)?c.jsx($a,{className:"w-4 h-4"}):c.jsx(jd,{className:"w-4 h-4"})}),c.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Y}),c.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!N.has(Y)&&c.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:ge.map(ce=>c.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ce.status===gl.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[c.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[c.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ce.status===gl.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Que[ce.category||"Supplemental"]}),c.jsxs("div",{className:"truncate flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[c.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ce.title}),c.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ce.classType})]}),c.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ce.description})]})]}),c.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[c.jsx("button",{onClick:()=>$(ce),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:c.jsx(Ph,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>i==null?void 0:i(ce.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:c.jsx(Moe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>Z(ce),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:c.jsx(Boe,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>W(ce),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ce.status===gl.ACTIVE?c.jsx(soe,{className:"w-4 h-4"}):c.jsx(qm,{className:"w-4 h-4"})}),c.jsx("button",{onClick:async()=>{await s({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Be.deleteAssignment(ce.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:c.jsx(Hi,{className:"w-4 h-4"})})]})]},ce.id))})]},Y))})]}),c.jsx("div",{className:"lg:col-span-4",children:c.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[c.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[c.jsx(Is,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),c.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[J.length===0&&c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[c.jsx(Is,{className:"w-10 h-10 text-gray-700 mb-3"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),c.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),J.map(Y=>c.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Y.userName}),c.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Y.assignmentTitle})]}),c.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Y.score)," XP"]})]}),c.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[c.jsxs("span",{children:[Math.round(Y.metrics.engagementTime/60),"m active"]}),c.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Y.submittedAt||"").toLocaleDateString()})]})]},Y.id))]})]})})]}),c.jsx(Va,{isOpen:l,onClose:()=>d(!1),title:h?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:c.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"col-span-2",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),c.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:I.title,onChange:Y=>L({...I,title:Y.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),c.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:I.unit,onChange:Y=>L({...I,unit:Y.target.value})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),c.jsx("select",{value:I.category,onChange:Y=>L({...I,category:Y.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:BR.map(Y=>c.jsx("option",{value:Y,children:Y},Y))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:P.filter(Y=>Y!=="All Classes").map(Y=>c.jsx("button",{type:"button",onClick:()=>{const ge=new Set(E);ge.has(Y)?ge.size>1&&ge.delete(Y):ge.add(Y),A(ge)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${E.has(Y)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Y},Y))})]}),c.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[c.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),c.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Y=>{var ge;if((ge=Y.target.files)!=null&&ge[0]){F(!0);try{const ce=await Be.uploadHtmlResource(Y.target.files[0]);L({...I,contentUrl:ce}),a.success("File uploaded!")}catch(ce){a.error("Upload failed: "+(ce instanceof Error?ce.message:"Unknown error"))}finally{F(!1)}}}}),R&&c.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[c.jsx(os,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!R&&I.contentUrl&&c.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[c.jsx(bb,{className:"w-4 h-4"})," Resource uploaded"]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",c.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),c.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:I.description,onChange:Y=>L({...I,description:Y.target.value})})]}),c.jsx("button",{type:"submit",disabled:m,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:m?c.jsx(os,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),k&&c.jsx(Xue,{assignment:k,isOpen:!!k,onClose:()=>$(null)})]})},Zue=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Jue=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:i})=>{var p,m;const[a,s]=M.useState(null),l=M.useMemo(()=>{var b;if(!t)return[];const y=Object.keys(((b=t.gamification)==null?void 0:b.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=a&&l.includes(a)?a:l[0]||"_legacy",h=M.useMemo(()=>{var b,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((b=t.gamification)==null?void 0:b.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=Vd(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?c.jsx(Va,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:c.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[c.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),c.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),c.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:()=>i(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:c.jsx(zl,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>i(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:c.jsx(hs,{className:"w-4 h-4"})})]})]})]}),l.length>1&&c.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:l.map(y=>c.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),c.jsxs("div",{className:"border-b border-white/5 pb-6",children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&c.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),c.jsx("div",{className:"flex gap-2 flex-wrap",children:Zue.map(y=>{var T;const b=(T=h.equipped)==null?void 0:T[y];return c.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${b?Kn(b.rarity).border+" "+Kn(b.rarity).bg:"border-white/10 bg-black/20"}`,children:b?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:b.name}),c.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:c.jsx(hs,{className:"w-3 h-3"})})]}):c.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),c.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,b)=>c.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${Kn(y.rarity).border}`,children:[c.jsx("div",{className:`text-[8px] font-bold ${Kn(y.rarity).text} text-center truncate w-full`,children:y.name}),c.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),c.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:c.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:c.jsx(Hi,{className:"w-4 h-4"})})})]},b)),h.inventory.length===0&&c.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},ede=[10,50,100,-10,-50,-100],tde=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,i]=M.useState(50);if(!t)return null;const a=()=>{r(t,n),i(50)};return c.jsx(Va,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[c.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),c.jsx("p",{className:"text-xs text-gray-500",children:t.email}),c.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:ede.map(l=>c.jsx("button",{onClick:()=>i(l),className:`py-3 rounded-xl font-black transition-all border ${n===l?l>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:l>0?`+${l}`:l},l))}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),c.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:l=>i(parseInt(l.target.value)||0)})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),c.jsx("button",{onClick:a,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},rde=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&c.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,i)=>{const a=n.quest.type==="CUSTOM";return c.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),c.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[c.jsx(Mo,{className:"w-3 h-3"}),n.quest.title]})]})]}),c.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[c.jsxs("div",{className:"text-center md:text-right",children:[c.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),c.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[c.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:a?"Manual Review":"Auto-Check"}),c.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:a?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[!a&&n.roll===0&&c.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:c.jsx(goe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),c.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),c.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:c.jsx(e1,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:c.jsx(hs,{className:"w-5 h-5"})})]})]})]})]},i)})]}),UR={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:""},nde=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:i,isSubmitting:a})=>{const s=r.type==="SKILL_CHECK";return c.jsx(Va,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:c.jsxs("form",{onSubmit:i,className:"space-y-4 text-gray-200 p-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),c.jsx("input",{value:r.title,onChange:l=>n({...r,title:l.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),c.jsx("textarea",{value:r.description,onChange:l=>n({...r,description:l.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),c.jsxs("select",{value:r.type,onChange:l=>n({...r,type:l.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[c.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),c.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),c.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),c.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),c.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),c.jsxs("select",{value:r.targetClass,onChange:l=>n({...r,targetClass:l.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[c.jsx("option",{value:"",children:"All Classes"}),Object.values(Lr).filter(l=>l!=="Uncategorized").map(l=>c.jsx("option",{value:l,children:l},l))]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",c.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),c.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:l=>n({...r,startsAt:l.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",c.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),c.jsx("input",{type:"number",value:r.durationHours||"",onChange:l=>n({...r,durationHours:parseInt(l.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[c.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),c.jsx("input",{type:"number",value:r.xpReward,onChange:l=>n({...r,xpReward:parseInt(l.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),c.jsx("input",{type:"number",value:r.fluxReward,onChange:l=>n({...r,fluxReward:parseInt(l.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),c.jsxs("select",{value:r.lootRarity,onChange:l=>n({...r,lootRarity:l.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[c.jsx("option",{value:"",children:"None"}),c.jsx("option",{value:"COMMON",children:"Common"}),c.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),c.jsx("option",{value:"RARE",children:"Rare"}),c.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:l=>n({...r,isGroup:l.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),s&&c.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[c.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),c.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),c.jsx("input",{type:"number",value:r.techReq||"",onChange:l=>n({...r,techReq:parseInt(l.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),c.jsx("input",{type:"number",value:r.focusReq||"",onChange:l=>n({...r,focusReq:parseInt(l.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),c.jsx("input",{type:"number",value:r.analysisReq||"",onChange:l=>n({...r,analysisReq:parseInt(l.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),c.jsx("input",{type:"number",value:r.charismaReq||"",onChange:l=>n({...r,charismaReq:parseInt(l.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),c.jsx("input",{type:"number",value:r.dieSides,onChange:l=>n({...r,dieSides:parseInt(l.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),c.jsx("input",{type:"text",value:r.consequence,onChange:l=>n({...r,consequence:l.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),c.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:a?"Transmitting...":"Broadcast Mission"})]})})},ide=({users:t})=>{const e=na(),{confirm:r}=Su(),[n,i]=M.useState("OPERATIVES"),[a,s]=M.useState(""),[l,d]=M.useState("All Classes"),[h,p]=M.useState("All Sections"),[m,y]=M.useState("xp"),[b,T]=M.useState("desc"),S=ee=>{m===ee?T(Re=>Re==="asc"?"desc":"asc"):(y(ee),T("asc"))},w=({label:ee,col:Re,className:Ve})=>c.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Ve??""}`,onClick:()=>S(Re),children:c.jsxs("div",{className:`flex items-center gap-1 ${Ve!=null&&Ve.includes("text-center")?"justify-center":Ve!=null&&Ve.includes("text-right")?"justify-end":"justify-start"}`,children:[c.jsx("span",{children:ee}),c.jsxs("span",{className:"flex flex-col gap-px",children:[c.jsx(vE,{className:`w-2.5 h-2.5 -mb-0.5 ${m===Re&&b==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),c.jsx($a,{className:`w-2.5 h-2.5 -mt-0.5 ${m===Re&&b==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[N,C]=M.useState([]),[k,$]=M.useState([]),[I,L]=M.useState(null),[E,A]=M.useState(null),[R,F]=M.useState(!1),[P,B]=M.useState(!1),[D,Q]=M.useState(UR),[Z,W]=M.useState(!1),[J,Y]=M.useState([]),[ge,ce]=M.useState(null),[X,re]=M.useState(""),[de,oe]=M.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Lr.AP_PHYSICS}),[ae,pe]=M.useState([]),[ve,Qe]=M.useState(!1),[Ne,le]=M.useState(null),[we,xe]=M.useState({name:"",description:"",maxHp:5e3,classType:"GLOBAL",xpRewardPerHit:10,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",imageUrl:""});M.useEffect(()=>{const ee=Be.subscribeToXPEvents(C),Re=Be.subscribeToQuests($),Ve=Be.subscribeToAllBossEncounters(pe);return()=>{ee(),Re(),Ve()}},[]),M.useEffect(()=>{const ee=[];t.forEach(Re=>{var Ve,Gt;(Gt=(Ve=Re.gamification)==null?void 0:Ve.activeQuests)==null||Gt.forEach(jt=>{const vr=k.find(dr=>dr.id===jt.questId);vr&&(jt.status==="DEPLOYED"||jt.status==="ACCEPTED")&&ee.push({user:Re,quest:vr,status:jt.status,roll:jt.deploymentRoll,acceptedAt:jt.acceptedAt})})}),Y(ee)},[t,k,n]);const ut=M.useMemo(()=>t.filter(ee=>ee.role==="STUDENT"),[t]),He=M.useMemo(()=>{const ee=new Set;return ut.forEach(Re=>{Re.section&&ee.add(Re.section)}),Array.from(ee).sort()},[ut]),ct=ee=>{var Ve,Gt;const Re=(Ve=ee.gamification)==null?void 0:Ve.classProfiles;return Re&&Object.keys(Re).length>0?Object.values(Re).reduce((jt,vr)=>jt+zh(vr.equipped),0):zh((Gt=ee.gamification)==null?void 0:Gt.equipped)},nt=M.useMemo(()=>ut.filter(ee=>{var jt;const Re=ee.name.toLowerCase().includes(a.toLowerCase())||ee.email.toLowerCase().includes(a.toLowerCase()),Ve=l==="All Classes"||ee.classType===l||((jt=ee.enrolledClasses)==null?void 0:jt.includes(l)),Gt=h==="All Sections"||ee.section===h;return Re&&Ve&&Gt}).sort((ee,Re)=>{var Ve,Gt,jt,vr,dr,zt;switch(m){case"name":return b==="asc"?ee.name.localeCompare(Re.name):Re.name.localeCompare(ee.name);case"class":return b==="asc"?(ee.classType||"").localeCompare(Re.classType||""):(Re.classType||"").localeCompare(ee.classType||"");case"level":{const Pt=((Ve=ee.gamification)==null?void 0:Ve.level)||1,$t=((Gt=Re.gamification)==null?void 0:Gt.level)||1;return b==="asc"?Pt-$t:$t-Pt}case"flux":{const Pt=((jt=ee.gamification)==null?void 0:jt.currency)||0,$t=((vr=Re.gamification)==null?void 0:vr.currency)||0;return b==="asc"?Pt-$t:$t-Pt}case"gear":{const Pt=ct(ee),$t=ct(Re);return b==="asc"?Pt-$t:$t-Pt}case"xp":default:{const Pt=((dr=ee.gamification)==null?void 0:dr.xp)||0,$t=((zt=Re.gamification)==null?void 0:zt.xp)||0;return b==="asc"?Pt-$t:$t-Pt}}}),[ut,a,l,h,m,b]),Ut=async(ee,Re)=>{try{await Be.adjustUserXP(ee.id,Re,ee.classType||Lr.UNCATEGORIZED),e.success(`${Re>0?"+":""}${Re} XP applied to ${ee.name}.`)}catch{e.error("Failed to adjust XP.")}L(null)},Ie=async ee=>{ee.preventDefault();const Re={id:Math.random().toString(36).substring(2,9),title:de.title,multiplier:de.multiplier,isActive:!0,type:de.type};de.type==="CLASS_SPECIFIC"&&(Re.targetClass=de.targetClass),await Be.saveXPEvent(Re),F(!1),oe({title:"",multiplier:2,type:"GLOBAL",targetClass:Lr.AP_PHYSICS})},st=async ee=>{ee.preventDefault(),W(!0);try{const Re={};D.techReq>0&&(Re.tech=D.techReq),D.focusReq>0&&(Re.focus=D.focusReq),D.analysisReq>0&&(Re.analysis=D.analysisReq),D.charismaReq>0&&(Re.charisma=D.charismaReq);const Ve=new Date;Ve.setHours(Ve.getHours()+(D.durationHours||0));const Gt={id:Math.random().toString(36).substring(2,9),title:D.title,description:D.description,xpReward:D.xpReward,fluxReward:D.fluxReward,isActive:!0,type:D.type,statRequirements:Re,startsAt:D.startsAt?new Date(D.startsAt).toISOString():null,expiresAt:D.durationHours>0?Ve.toISOString():null,itemRewardRarity:D.lootRarity||null,rollDieSides:D.dieSides||20,consequenceText:D.consequence||null,isGroupQuest:D.isGroup,targetClass:D.targetClass||void 0};await Be.saveQuest(Gt),e.success(`Mission "${Gt.title}" deployed.`),Q(UR),B(!1)}catch(Re){console.error("Failed to issue mission:",Re),e.error("Failed to issue mission.")}finally{W(!1)}},pt=async ee=>{await Be.saveXPEvent({...ee,isActive:!ee.isActive})},St=async ee=>{const Re={...ee,isActive:!ee.isActive};Re.isActive&&(Re.expiresAt=null),await Be.saveQuest(Re)},Xt=async(ee,Re,Ve)=>{var vr,dr;if(!await r({message:`Confiscate ${Re.name} from ${ee.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const jt=(Ve?Vd(ee,Ve):{inventory:((vr=ee.gamification)==null?void 0:vr.inventory)||[]}).inventory.filter(zt=>zt.id!==Re.id);await Be.adminUpdateInventory(ee.id,jt,((dr=ee.gamification)==null?void 0:dr.currency)||0,Ve),A(zt=>{var Pt,$t;return zt?Ve&&(($t=(Pt=zt.gamification)==null?void 0:Pt.classProfiles)!=null&&$t[Ve])?{...zt,gamification:{...zt.gamification,classProfiles:{...zt.gamification.classProfiles,[Ve]:{...zt.gamification.classProfiles[Ve],inventory:jt}}}}:{...zt,gamification:{...zt.gamification,inventory:jt}}:null})},ye=async(ee,Re,Ve)=>{var vr;if(!await r({message:`Force unequip ${Re} from ${ee.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const jt={...(Ve?Vd(ee,Ve):{equipped:{...(vr=ee.gamification)==null?void 0:vr.equipped}}).equipped};delete jt[Re],await Be.adminUpdateEquipped(ee.id,jt,Ve),A(dr=>{var zt,Pt;return dr?Ve&&((Pt=(zt=dr.gamification)==null?void 0:zt.classProfiles)!=null&&Pt[Ve])?{...dr,gamification:{...dr.gamification,classProfiles:{...dr.gamification.classProfiles,[Ve]:{...dr.gamification.classProfiles[Ve],equipped:jt}}}}:{...dr,gamification:{...dr.gamification,equipped:jt}}:null})},We=async(ee,Re)=>{var Gt,jt;const Ve=Math.max(0,(((Gt=ee.gamification)==null?void 0:Gt.currency)||0)+Re);await Be.adminUpdateInventory(ee.id,((jt=ee.gamification)==null?void 0:jt.inventory)||[],Ve),A(vr=>vr?{...vr,gamification:{...vr.gamification,currency:Ve}}:null)},mt=async(ee,Re,Ve,Gt)=>{try{await Be.resolveQuest(ee,Re,Ve,Gt),e.success(Ve?`Mission "${Re.title}" approved.`:`Mission "${Re.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},gt=async ee=>{const Re=ee.quest.rollDieSides||20,Ve=Math.floor(Math.random()*Re)+1;e.info(`Rolled a ${Ve} on a D${Re}. ${Ve===Re?"CRITICAL SUCCESS!":"Failure confirmed."}`),await mt(ee.user.id,ee.quest,Ve===Re,ee.user.classType)},ot=async ee=>{try{await Be.updateCodename(ee,X.trim().slice(0,24)),e.success("Code name updated.")}catch{e.error("Failed to update code name.")}ce(null)},Je=async(ee,Re)=>{try{await Be.toggleCodenameLock(ee,Re),e.success(Re?"Codename locked.":"Codename unlocked.")}catch{e.error("Failed to update lock.")}},Rt=ee=>{var Re,Ve,Gt;if(ee)le(ee),xe({name:ee.name,description:ee.description,maxHp:ee.maxHp,classType:ee.classType||"GLOBAL",xpRewardPerHit:ee.xpRewardPerHit||10,rewardXp:((Re=ee.completionRewards)==null?void 0:Re.xp)||500,rewardFlux:((Ve=ee.completionRewards)==null?void 0:Ve.flux)||100,rewardItemRarity:((Gt=ee.completionRewards)==null?void 0:Gt.itemRarity)||"",deadline:ee.deadline?ee.deadline.slice(0,16):"",imageUrl:ee.imageUrl||""});else{le(null);const jt=new Date;jt.setDate(jt.getDate()+7),xe({name:"",description:"",maxHp:5e3,classType:"GLOBAL",xpRewardPerHit:10,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:jt.toISOString().slice(0,16),imageUrl:""})}Qe(!0)},Yt=async ee=>{ee.preventDefault();try{const Re={id:(Ne==null?void 0:Ne.id)||Math.random().toString(36).substring(2,12),name:we.name,description:we.description,maxHp:we.maxHp,currentHp:(Ne==null?void 0:Ne.currentHp)??we.maxHp,classType:we.classType==="GLOBAL"?void 0:we.classType,xpRewardPerHit:we.xpRewardPerHit,completionRewards:{xp:we.rewardXp,flux:we.rewardFlux,itemRarity:we.rewardItemRarity||void 0},deadline:new Date(we.deadline).toISOString(),isActive:(Ne==null?void 0:Ne.isActive)??!0,imageUrl:we.imageUrl||void 0,damageLog:(Ne==null?void 0:Ne.damageLog)||[]};await Be.saveBossEncounter(Re),e.success(Ne?"Boss updated.":"Boss deployed!"),Qe(!1)}catch{e.error("Failed to save boss.")}},Kr=async ee=>{await Be.toggleBossActive(ee.id,!ee.isActive)},ln=async ee=>{await r({message:`Delete boss "${ee.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Be.deleteBossEncounter(ee.id),e.success("Boss deleted."))},Br=({id:ee,label:Re,icon:Ve})=>c.jsxs("button",{onClick:()=>i(ee),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===ee?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[c.jsx(Ve,{className:"w-4 h-4"}),Re]});return c.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),c.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),c.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&c.jsxs("button",{onClick:()=>F(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[c.jsx(Uoe,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&c.jsxs("button",{onClick:()=>B(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[c.jsx(uoe,{className:"w-4 h-4"})," Issue Mission"]}),n==="BOSS_OPS"&&c.jsxs("button",{onClick:()=>Rt(),className:"bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-red-900/20",children:[c.jsx(Jy,{className:"w-4 h-4"})," Deploy Boss"]})]})]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[c.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[c.jsx(Br,{id:"OPERATIVES",label:"Operatives",icon:$l}),c.jsx(Br,{id:"PROTOCOLS",label:"XP Protocols",icon:Ii}),c.jsx(Br,{id:"MISSIONS",label:"Missions",icon:Mo}),c.jsx(Br,{id:"MISSION_CONTROL",label:"Mission Control",icon:vb}),c.jsx(Br,{id:"BOSS_OPS",label:"Boss Ops",icon:Jy})]}),c.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx(Kq,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),c.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:a,onChange:ee=>s(ee.target.value)})]}),c.jsxs("div",{className:"flex gap-2 items-center",children:[c.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[nt.length," operatives"]}),c.jsxs("div",{className:"relative",children:[c.jsx(woe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),c.jsxs("select",{value:l,onChange:ee=>d(ee.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[c.jsx("option",{children:"All Classes"}),Object.values(Lr).map(ee=>c.jsx("option",{value:ee,children:ee},ee))]}),c.jsx($a,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),He.length>0&&c.jsxs("div",{className:"relative",children:[c.jsxs("select",{value:h,onChange:ee=>p(ee.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[c.jsx("option",{children:"All Sections"}),He.map(ee=>c.jsx("option",{value:ee,children:ee},ee))]}),c.jsx($a,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-left",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[c.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),c.jsx(w,{label:"Class",col:"class"}),c.jsx(w,{label:"Level",col:"level",className:"text-center"}),c.jsx(w,{label:"XP",col:"xp",className:"text-center"}),c.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),c.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),c.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),c.jsx("tbody",{className:"divide-y divide-white/5",children:nt.map(ee=>{var jt,vr,dr,zt,Pt,$t,kt,Ur;const Re=((jt=ee.gamification)==null?void 0:jt.level)||1,Ve=((vr=ee.gamification)==null?void 0:vr.currency)||0,Gt=ee.enrolledClasses||(ee.classType?[ee.classType]:[]);return c.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[c.jsx("td",{className:"py-3 pl-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:ee.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:ee.name}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-sm text-gray-200",children:ee.name}),ge===ee.id?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{autoFocus:!0,value:X,onChange:cr=>re(cr.target.value),maxLength:24,onKeyDown:cr=>{cr.key==="Enter"&&ot(ee.id),cr.key==="Escape"&&ce(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),c.jsx("button",{onClick:()=>ot(ee.id),className:"text-green-400 hover:text-green-300",title:"Save",children:c.jsx(e1,{className:"w-3 h-3"})}),c.jsx("button",{onClick:()=>ce(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:c.jsx(hs,{className:"w-3 h-3"})})]}):c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsxs("button",{onClick:()=>{var cr;ce(ee.id),re(((cr=ee.gamification)==null?void 0:cr.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((dr=ee.gamification)==null?void 0:dr.codename)||"UNASSIGNED",c.jsx(BI,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),c.jsx("button",{onClick:()=>{var cr;return Je(ee.id,!((cr=ee.gamification)!=null&&cr.codenameLocked))},className:`transition ${(zt=ee.gamification)!=null&&zt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(Pt=ee.gamification)!=null&&Pt.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:($t=ee.gamification)!=null&&$t.codenameLocked?c.jsx(Lh,{className:"w-2.5 h-2.5"}):c.jsx(koe,{className:"w-2.5 h-2.5"})})]})]})]})}),c.jsx("td",{className:"py-3",children:c.jsx("div",{className:"flex flex-wrap gap-1",children:Gt.map(cr=>c.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:cr},cr))})}),c.jsx("td",{className:"py-3 text-center",children:c.jsx("span",{className:"text-lg font-black text-white",children:Re})}),c.jsx("td",{className:"py-3 text-center",children:c.jsx("span",{className:"text-sm font-bold text-gray-300",children:((Ur=(kt=ee.gamification)==null?void 0:kt.xp)==null?void 0:Ur.toLocaleString())||0})}),c.jsx("td",{className:"py-3 text-center",children:c.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Ve})}),c.jsx("td",{className:"py-3 text-center",children:c.jsx("span",{className:"text-sm font-bold text-yellow-400",children:ct(ee)})}),c.jsx("td",{className:"py-3 text-right pr-4",children:c.jsxs("div",{className:"flex justify-end gap-1.5",children:[c.jsxs("button",{onClick:()=>A(ee),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[c.jsx(vb,{className:"w-3 h-3"})," Inventory"]}),c.jsxs("button",{onClick:()=>L(ee),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[c.jsx(zl,{className:"w-3 h-3"})," XP"]})]})})]},ee.id)})})]})})]}),n==="PROTOCOLS"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.map(ee=>c.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${ee.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[ee.isActive&&c.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${ee.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:c.jsx(Ii,{className:"w-6 h-6"})}),c.jsx("button",{onClick:()=>Be.deleteXPEvent(ee.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:c.jsx(Hi,{className:"w-4 h-4"})})]}),c.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:ee.title}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[ee.multiplier,"x"]}),c.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),c.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[c.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:ee.type==="GLOBAL"?"Global Uplink":ee.targetClass}),c.jsx("button",{onClick:()=>pt(ee),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${ee.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:ee.isActive?"Active":"Offline"})]})]},ee.id)),c.jsxs("button",{onClick:()=>F(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:c.jsx(zl,{className:"w-6 h-6"})}),c.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&c.jsx("div",{className:"space-y-4",children:k.map(ee=>c.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${ee.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[c.jsxs("div",{className:"flex items-center gap-5",children:[c.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${ee.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:c.jsx(fu,{className:"w-7 h-7"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-lg text-white",children:ee.title}),c.jsx("p",{className:"text-sm text-gray-500",children:ee.description}),ee.statRequirements&&c.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(ee.statRequirements).map(([Re,Ve])=>c.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ve," ",Re]},Re))}),c.jsxs("div",{className:"flex gap-3 mt-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:ee.type}),c.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",ee.xpReward," XP"]}),ee.itemRewardRarity&&c.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),c.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:ee.targetClass||"All Classes"})]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>St(ee),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${ee.isActive?"bg-purple-600":"bg-gray-700"}`,children:c.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${ee.isActive?"translate-x-6":""}`})}),c.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:ee.isActive?"Active":"Standby"})]}),c.jsx("button",{onClick:()=>Be.deleteQuest(ee.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:c.jsx(Hi,{className:"w-4 h-4"})})]})]},ee.id))}),n==="MISSION_CONTROL"&&c.jsx(rde,{deployments:J,onResolveQuest:mt,onRollForSalvation:gt}),n==="BOSS_OPS"&&c.jsxs("div",{className:"space-y-4",children:[ae.length===0&&c.jsxs("div",{className:"text-center py-16 text-gray-500",children:[c.jsx(Jy,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),c.jsx("p",{className:"font-bold",children:"No boss encounters deployed."}),c.jsx("p",{className:"text-sm mt-1",children:"Deploy a boss to challenge your operatives."})]}),ae.map(ee=>{const Re=ee.maxHp>0?Math.max(0,ee.currentHp/ee.maxHp*100):0,Ve=new Date(ee.deadline)<new Date;return c.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all ${ee.isActive&&!Ve?"bg-red-600/10 border-red-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[c.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${ee.isActive&&!Ve?"bg-red-600 text-white shadow-lg shadow-red-900/40":"bg-gray-800 text-gray-400"}`,children:c.jsx(Jy,{className:"w-7 h-7"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-bold text-lg text-white truncate",children:ee.name}),c.jsx("p",{className:"text-sm text-gray-500 truncate",children:ee.description}),c.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[c.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",ee.currentHp.toLocaleString(),"/",ee.maxHp.toLocaleString()]}),c.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",ee.xpRewardPerHit," XP/hit"]}),c.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:ee.classType||"GLOBAL"}),Ve&&c.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"})]}),c.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:c.jsx("div",{className:`h-full rounded-full transition-all ${Re>50?"bg-green-500":Re>20?"bg-yellow-500":"bg-red-500"}`,style:{width:`${Re}%`}})})]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsxs("button",{onClick:()=>Rt(ee),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[c.jsx(BI,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),c.jsx("button",{onClick:()=>Kr(ee),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${ee.isActive?"bg-red-600":"bg-gray-700"}`,children:c.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${ee.isActive?"translate-x-6":""}`})}),c.jsx("button",{onClick:()=>ln(ee),className:"p-2 text-gray-600 hover:text-red-400 transition",children:c.jsx(Hi,{className:"w-4 h-4"})})]})]},ee.id)})]})]})]}),c.jsx(Jue,{user:E,onClose:()=>A(null),onDeleteItem:Xt,onUnequipItem:ye,onGrantFlux:We}),c.jsx(nde,{isOpen:P,onClose:()=>B(!1),form:D,setForm:Q,onSubmit:st,isSubmitting:Z}),c.jsx(Va,{isOpen:R,onClose:()=>F(!1),title:"New XP Protocol Deployment",children:c.jsxs("form",{onSubmit:Ie,className:"space-y-4 text-gray-100 p-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),c.jsx("input",{value:de.title,onChange:ee=>oe({...de,title:ee.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),c.jsx("input",{type:"number",step:"0.5",value:de.multiplier,onChange:ee=>oe({...de,multiplier:parseFloat(ee.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),c.jsxs("select",{value:de.type,onChange:ee=>oe({...de,type:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[c.jsx("option",{value:"GLOBAL",children:"Global Node"}),c.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),de.type==="CLASS_SPECIFIC"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),c.jsx("select",{value:de.targetClass,onChange:ee=>oe({...de,targetClass:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Lr).map(ee=>c.jsx("option",{value:ee,children:ee},ee))})]}),c.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),c.jsx(tde,{user:I,onClose:()=>L(null),onAdjust:Ut}),c.jsx(Va,{isOpen:ve,onClose:()=>Qe(!1),title:Ne?"Edit Boss Encounter":"Deploy Boss Encounter",maxWidth:"max-w-lg",children:c.jsxs("form",{onSubmit:Yt,className:"space-y-4 text-gray-100 p-2",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),c.jsx("input",{value:we.name,onChange:ee=>xe({...we,name:ee.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Entropy Wyrm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),c.jsx("textarea",{value:we.description,onChange:ee=>xe({...we,description:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-20",placeholder:"A fearsome creature that feeds on disorder..."})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),c.jsx("input",{type:"number",value:we.maxHp,onChange:ee=>xe({...we,maxHp:parseInt(ee.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"XP Per Hit"}),c.jsx("input",{type:"number",value:we.xpRewardPerHit,onChange:ee=>xe({...we,xpRewardPerHit:parseInt(ee.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),c.jsxs("select",{value:we.classType,onChange:ee=>xe({...we,classType:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[c.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Lr).map(ee=>c.jsx("option",{value:ee,children:ee},ee))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),c.jsx("input",{type:"datetime-local",value:we.deadline,onChange:ee=>xe({...we,deadline:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]})]}),c.jsxs("div",{className:"border-t border-white/10 pt-4",children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-2 px-1",children:"Completion Rewards"}),c.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"XP"}),c.jsx("input",{type:"number",value:we.rewardXp,onChange:ee=>xe({...we,rewardXp:parseInt(ee.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),c.jsx("input",{type:"number",value:we.rewardFlux,onChange:ee=>xe({...we,rewardFlux:parseInt(ee.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot Rarity"}),c.jsxs("select",{value:we.rewardItemRarity,onChange:ee=>xe({...we,rewardItemRarity:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold",children:[c.jsx("option",{value:"",children:"None"}),c.jsx("option",{value:"COMMON",children:"Common"}),c.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),c.jsx("option",{value:"RARE",children:"Rare"}),c.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Image URL (optional)"}),c.jsx("input",{value:we.imageUrl,onChange:ee=>xe({...we,imageUrl:ee.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white",placeholder:"https://..."})]}),c.jsx("button",{type:"submit",className:"w-full bg-red-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-red-700",children:Ne?"Update Boss":"Deploy Boss"})]})})]})},ade={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:c.jsx(Fq,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:c.jsx(Bq,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:c.jsx(TE,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},sde=({onToggleChat:t})=>{const[e,r]=M.useState(null),[n,i]=M.useState(!1),a=l=>{e===l?r(null):(r(l),i(!1))};if(!e)return c.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[c.jsxs("button",{onClick:()=>a("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[c.jsx(TE,{className:"w-6 h-6"}),c.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),c.jsxs("button",{onClick:()=>a("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[c.jsx(Bq,{className:"w-6 h-6"}),c.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),c.jsxs("button",{onClick:()=>a("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[c.jsx(Fq,{className:"w-6 h-6"}),c.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&c.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[c.jsx(lA,{className:"w-6 h-6"}),c.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=ade[e];return c.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[c.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),c.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>i(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?c.jsx(oA,{className:"w-4 h-4"}):c.jsx($q,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:c.jsx(hs,{className:"w-4 h-4"})})]})]}),!n&&c.jsx("div",{className:"flex-1 bg-white relative",children:c.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},ode=["","","","","","","",""],lde=["","","","","","","","","","","","","","","","","","","","","","","","","",""],cde=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:i,onOpenResource:a})=>{var Ne;const{confirm:s}=Su(),[l,d]=M.useState([]),[h,p]=M.useState(""),[m,y]=M.useState("Main"),[b,T]=M.useState(!1),[S,w]=M.useState(!1),[N,C]=M.useState(null),[k,$]=M.useState(null),[I,L]=M.useState([]),[E,A]=M.useState(null),R=M.useRef(null),F=M.useRef(null),P=M.useRef(null),B=M.useMemo(()=>Object.values(Lr).filter(le=>{var He;if(le===Lr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const we=i.find(ct=>ct.className===le),xe=(He=t.enrolledClasses)==null?void 0:He.includes(le),ut=we?we.features.communications:!0;return xe&&ut}),[i,t.role,t.enrolledClasses]),[D,Q]=M.useState(B[0]||"");M.useEffect(()=>{(!D||!B.includes(D))&&B.length>0&&Q(B[0])},[B]);const Z=M.useMemo(()=>m==="Resources"&&k?`res_${k}`:m==="Resources"&&!k||!D?"":`class_${D.replace(/\s+/g,"_").toLowerCase()}`,[D,m,k]),W=M.useRef(null),J=M.useMemo(()=>n.filter(le=>le.classType===D&&le.status!=="DRAFT"),[n,D]),Y=M.useMemo(()=>l.filter(le=>{var we;return le.isGlobalPinned||((we=le.pinnedBy)==null?void 0:we.includes(t.id))}),[l,t.id]),ge=M.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]);M.useEffect(()=>{if(!e)return;let le="";if(m==="Resources"&&k?le=`res_${k}`:(m==="Main"||m==="Bookmarks")&&(le=`class_${D.replace(/\s+/g,"_").toLowerCase()}`),!le)return;T(!0);const we=Be.subscribeToChannelMessages(le,xe=>{d(xe),T(!1)});return()=>{we()}},[e,D,m,k]),M.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const le=Be.subscribeToFlaggedMessages(we=>{L(we)});return()=>le()},[e,t.role]),M.useEffect(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},[l,b,m,k]),M.useEffect(()=>{const le=we=>{R.current&&!R.current.contains(we.target)&&w(!1),F.current&&!F.current.contains(we.target)&&C(null)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[]),M.useEffect(()=>{if(!e)return;const le=we=>{we.key==="Escape"&&r()};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[e,r]);const ce=M.useCallback(async le=>{if(le.preventDefault(),!(!h.trim()||!Z)&&!ge)try{await Be.sendMessage(t,h,Z,D),p(""),w(!1)}catch(we){console.error("Failed to send message:",we)}},[h,Z,ge,t,D]),X=M.useCallback(async(le,we)=>{try{await Be.toggleReaction(le,we,t.id),C(null)}catch(xe){console.error(xe)}},[t.id]),re=M.useCallback(async le=>{try{await Be.togglePersonalPin(le,t.id)}catch(we){console.error(we)}},[t.id]),de=M.useCallback(async(le,we)=>{try{await Be.toggleGlobalPin(le,!we)}catch(xe){console.error(xe)}},[]),oe=async le=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Be.deleteMessage(le)}catch(we){console.error(we)}},ae=async le=>{try{await Be.unflagMessage(le),await Be.resolveFlagByMessageId(le)}catch(we){console.error(we)}},pe=async le=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Be.resolveFlagByMessageId(le),await Be.deleteMessage(le)}catch(we){console.error(we)}},ve=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Be.INDEFINITE_MUTE}],Qe=async le=>{if(E){try{await Be.muteUser(E.senderId,le)}catch(we){console.error(we)}A(null)}};return M.useEffect(()=>{const le=we=>{P.current&&!P.current.contains(we.target)&&A(null)};return E&&document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[E]),e?c.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[m==="Resources"&&k?c.jsx("button",{onClick:()=>$(null),className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:c.jsx(foe,{className:"w-5 h-5"})}):c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:c.jsx(lA,{className:"w-5 h-5"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:m==="Moderation"?"Moderation Queue":m==="Resources"?k?(Ne=J.find(le=>le.id===k))==null?void 0:Ne.title:"Class Resources":D}),m!=="Resources"&&m!=="Moderation"&&B.length>1&&c.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[c.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:D}),c.jsx($a,{className:"w-3 h-3 text-gray-500 ml-1"}),c.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:D,onChange:le=>Q(le.target.value),children:B.map(le=>c.jsx("option",{value:le,children:le},le))})]})]})]}),c.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:c.jsx(hs,{className:"w-5 h-5"})})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[c.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${m==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:c.jsx(lA,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${m==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:c.jsx(so,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${m==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:c.jsx(MI,{className:"w-5 h-5"})}),t.role==="ADMIN"&&c.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${m==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[c.jsx($l,{className:"w-5 h-5"}),I.length>0&&c.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:I.length})]})]}),c.jsxs("div",{className:"flex-1 flex flex-col relative",children:[m==="Resources"&&!k&&c.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:c.jsx("div",{className:"space-y-2",children:J.map(le=>c.jsxs("div",{onClick:()=>$(le.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:c.jsx(Eoe,{className:"w-5 h-5"})}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:le.title}),c.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:le.unit})]})]}),c.jsx("button",{onClick:we=>{we.stopPropagation(),a==null||a(le.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:c.jsx(boe,{className:"w-4 h-4"})})]},le.id))})}),m==="Moderation"&&t.role==="ADMIN"&&c.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Rs,{className:"w-4 h-4 text-red-400"}),c.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),c.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[I.length," item",I.length!==1?"s":""]})]}),I.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[c.jsx($l,{className:"w-10 h-10 mb-3 opacity-30"}),c.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):c.jsx("div",{className:"space-y-3",children:I.map(le=>{var we;return c.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-xs font-bold text-gray-300",children:le.senderName}),c.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(le.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),c.jsx("p",{className:"text-sm text-gray-200 mb-1",children:le.content}),le.systemNote&&c.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:le.systemNote}),c.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:((we=le.channelId)==null?void 0:we.replace("class_","").replace(/_/g," "))||"unknown channel"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>ae(le.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[c.jsx(e1,{className:"w-3.5 h-3.5"})," Approve"]}),c.jsxs("button",{onClick:()=>pe(le.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[c.jsx(Hi,{className:"w-3.5 h-3.5"})," Delete"]}),c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===`flag-${le.id}`?null:{id:`flag-${le.id}`,senderId:le.senderId,senderName:le.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:c.jsx(wb,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===`flag-${le.id}`&&c.jsxs("div",{ref:P,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[c.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",le.senderName]}),ve.map(xe=>c.jsx("button",{onClick:()=>Qe(xe.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:xe.label},xe.minutes))]})]})]})]},le.id)})})]}),(m==="Main"||m==="Bookmarks"||m==="Resources"&&k)&&c.jsxs(c.Fragment,{children:[c.jsx("div",{ref:W,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(m==="Bookmarks"?Y:l).map((le,we,xe)=>{var ct;const ut=le.senderId===t.id,He=we>0&&xe[we-1].senderId===le.senderId&&new Date(le.timestamp).getTime()-new Date(xe[we-1].timestamp).getTime()<3e5;return c.jsxs("div",{className:`group flex flex-col ${ut?"items-end":"items-start"} ${He?"mt-1":"mt-4"}`,children:[!He&&c.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[c.jsx("span",{className:`text-xs font-bold ${ut?"text-indigo-400":"text-gray-300"}`,children:le.senderName}),c.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(le.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),le.isGlobalPinned&&c.jsx(UI,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),c.jsxs("div",{className:"relative max-w-[85%]",children:[c.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${ut?"right-0":"left-0"} z-30`,children:[c.jsx("button",{onClick:()=>C(le.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:c.jsx($I,{className:"w-3.5 h-3.5 text-yellow-400"})}),c.jsx("button",{onClick:()=>re(le.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(ct=le.pinnedBy)!=null&&ct.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:c.jsx(MI,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>de(le.id,!!le.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${le.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:c.jsx(UI,{className:"w-3.5 h-3.5"})}),c.jsx("button",{onClick:()=>oe(le.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:c.jsx(Hi,{className:"w-3.5 h-3.5"})}),le.senderId!==t.id&&c.jsxs("div",{className:"relative",children:[c.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===le.id?null:{id:le.id,senderId:le.senderId,senderName:le.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:c.jsx(wb,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===le.id&&c.jsxs("div",{ref:P,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[c.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",le.senderName]}),ve.map(nt=>c.jsx("button",{onClick:()=>Qe(nt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:nt.label},nt.minutes))]})]})]})]}),N===le.id&&c.jsx("div",{ref:F,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${ut?"right-0":"left-0"}`,children:ode.map(nt=>c.jsx("button",{onClick:()=>X(le.id,nt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:nt},nt))}),c.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${ut?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${le.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${le.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:le.content}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:le.reactions&&Object.entries(le.reactions).map(([nt,Ut])=>{const Ie=Ut;return Ie.length>0&&c.jsxs("button",{onClick:()=>X(le.id,nt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${Ie.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[nt," ",Ie.length]},nt)})})]})]},le.id)})}),c.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:c.jsxs("form",{onSubmit:ce,className:"relative flex items-center gap-2",children:[S&&c.jsx("div",{ref:R,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:lde.map(le=>c.jsx("button",{type:"button",onClick:()=>p(we=>we+le),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:le},le))}),c.jsx("button",{type:"button",onClick:()=>w(!S),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:c.jsx($I,{className:"w-5 h-5"})}),c.jsx("input",{type:"text",value:h,onChange:le=>p(le.target.value),placeholder:ge?"Transmission Disabled":"Type message...",disabled:!Z||ge,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),c.jsx("button",{type:"submit",disabled:!Z||ge||!h.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:c.jsx(zoe,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function JH(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=JH(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function tr(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=JH(t))&&(n&&(n+=" "),n+=e);return n}var a3,zR;function qa(){if(zR)return a3;zR=1;var t=Array.isArray;return a3=t,a3}var s3,$R;function eG(){if($R)return s3;$R=1;var t=typeof Vy=="object"&&Vy&&Vy.Object===Object&&Vy;return s3=t,s3}var o3,VR;function $o(){if(VR)return o3;VR=1;var t=eG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return o3=r,o3}var l3,FR;function i1(){if(FR)return l3;FR=1;var t=$o(),e=t.Symbol;return l3=e,l3}var c3,qR;function ude(){if(qR)return c3;qR=1;var t=i1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function a(s){var l=r.call(s,i),d=s[i];try{s[i]=void 0;var h=!0}catch{}var p=n.call(s);return h&&(l?s[i]=d:delete s[i]),p}return c3=a,c3}var u3,HR;function dde(){if(HR)return u3;HR=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return u3=r,u3}var d3,GR;function Jl(){if(GR)return d3;GR=1;var t=i1(),e=ude(),r=dde(),n="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(l){return l==null?l===void 0?i:n:a&&a in Object(l)?e(l):r(l)}return d3=s,d3}var h3,KR;function ec(){if(KR)return h3;KR=1;function t(e){return e!=null&&typeof e=="object"}return h3=t,h3}var f3,WR;function Af(){if(WR)return f3;WR=1;var t=Jl(),e=ec(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return f3=n,f3}var p3,XR;function GE(){if(XR)return p3;XR=1;var t=qa(),e=Af(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return p3=i,p3}var m3,QR;function Tu(){if(QR)return m3;QR=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return m3=t,m3}var g3,YR;function KE(){if(YR)return g3;YR=1;var t=Jl(),e=Tu(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(l){if(!e(l))return!1;var d=t(l);return d==n||d==i||d==r||d==a}return g3=s,g3}var y3,ZR;function hde(){if(ZR)return y3;ZR=1;var t=$o(),e=t["__core-js_shared__"];return y3=e,y3}var v3,JR;function fde(){if(JR)return v3;JR=1;var t=hde(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return v3=r,v3}var b3,eM;function tG(){if(eM)return b3;eM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return b3=r,b3}var x3,tM;function pde(){if(tM)return x3;tM=1;var t=KE(),e=fde(),r=Tu(),n=tG(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,d=s.toString,h=l.hasOwnProperty,p=RegExp("^"+d.call(h).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var b=t(y)?p:a;return b.test(n(y))}return x3=m,x3}var w3,rM;function mde(){if(rM)return w3;rM=1;function t(e,r){return e==null?void 0:e[r]}return w3=t,w3}var _3,nM;function r0(){if(nM)return _3;nM=1;var t=pde(),e=mde();function r(n,i){var a=e(n,i);return t(a)?a:void 0}return _3=r,_3}var S3,iM;function S2(){if(iM)return S3;iM=1;var t=r0(),e=t(Object,"create");return S3=e,S3}var T3,aM;function gde(){if(aM)return T3;aM=1;var t=S2();function e(){this.__data__=t?t(null):{},this.size=0}return T3=e,T3}var A3,sM;function yde(){if(sM)return A3;sM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return A3=t,A3}var E3,oM;function vde(){if(oM)return E3;oM=1;var t=S2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(t){var l=s[a];return l===e?void 0:l}return n.call(s,a)?s[a]:void 0}return E3=i,E3}var N3,lM;function bde(){if(lM)return N3;lM=1;var t=S2(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return N3=n,N3}var j3,cM;function xde(){if(cM)return j3;cM=1;var t=S2(),e="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&i===void 0?e:i,this}return j3=r,j3}var k3,uM;function wde(){if(uM)return k3;uM=1;var t=gde(),e=yde(),r=vde(),n=bde(),i=xde();function a(s){var l=-1,d=s==null?0:s.length;for(this.clear();++l<d;){var h=s[l];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,k3=a,k3}var C3,dM;function _de(){if(dM)return C3;dM=1;function t(){this.__data__=[],this.size=0}return C3=t,C3}var O3,hM;function WE(){if(hM)return O3;hM=1;function t(e,r){return e===r||e!==e&&r!==r}return O3=t,O3}var I3,fM;function T2(){if(fM)return I3;fM=1;var t=WE();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return I3=e,I3}var R3,pM;function Sde(){if(pM)return R3;pM=1;var t=T2(),e=Array.prototype,r=e.splice;function n(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var l=a.length-1;return s==l?a.pop():r.call(a,s,1),--this.size,!0}return R3=n,R3}var M3,mM;function Tde(){if(mM)return M3;mM=1;var t=T2();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return M3=e,M3}var P3,gM;function Ade(){if(gM)return P3;gM=1;var t=T2();function e(r){return t(this.__data__,r)>-1}return P3=e,P3}var D3,yM;function Ede(){if(yM)return D3;yM=1;var t=T2();function e(r,n){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return D3=e,D3}var L3,vM;function A2(){if(vM)return L3;vM=1;var t=_de(),e=Sde(),r=Tde(),n=Ade(),i=Ede();function a(s){var l=-1,d=s==null?0:s.length;for(this.clear();++l<d;){var h=s[l];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,L3=a,L3}var B3,bM;function XE(){if(bM)return B3;bM=1;var t=r0(),e=$o(),r=t(e,"Map");return B3=r,B3}var U3,xM;function Nde(){if(xM)return U3;xM=1;var t=wde(),e=A2(),r=XE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return U3=n,U3}var z3,wM;function jde(){if(wM)return z3;wM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return z3=t,z3}var $3,_M;function E2(){if(_M)return $3;_M=1;var t=jde();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return $3=e,$3}var V3,SM;function kde(){if(SM)return V3;SM=1;var t=E2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return V3=e,V3}var F3,TM;function Cde(){if(TM)return F3;TM=1;var t=E2();function e(r){return t(this,r).get(r)}return F3=e,F3}var q3,AM;function Ode(){if(AM)return q3;AM=1;var t=E2();function e(r){return t(this,r).has(r)}return q3=e,q3}var H3,EM;function Ide(){if(EM)return H3;EM=1;var t=E2();function e(r,n){var i=t(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return H3=e,H3}var G3,NM;function QE(){if(NM)return G3;NM=1;var t=Nde(),e=kde(),r=Cde(),n=Ode(),i=Ide();function a(s){var l=-1,d=s==null?0:s.length;for(this.clear();++l<d;){var h=s[l];this.set(h[0],h[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,G3=a,G3}var K3,jM;function rG(){if(jM)return K3;jM=1;var t=QE(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,l=i?i.apply(this,s):s[0],d=a.cache;if(d.has(l))return d.get(l);var h=n.apply(this,s);return a.cache=d.set(l,h)||d,h};return a.cache=new(r.Cache||t),a}return r.Cache=t,K3=r,K3}var W3,kM;function Rde(){if(kM)return W3;kM=1;var t=rG(),e=500;function r(n){var i=t(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return W3=r,W3}var X3,CM;function Mde(){if(CM)return X3;CM=1;var t=Rde(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,l,d,h){a.push(d?h.replace(r,"$1"):l||s)}),a});return X3=n,X3}var Q3,OM;function YE(){if(OM)return Q3;OM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=r(e[n],n,e);return a}return Q3=t,Q3}var Y3,IM;function Pde(){if(IM)return Y3;IM=1;var t=i1(),e=YE(),r=qa(),n=Af(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(l){if(typeof l=="string")return l;if(r(l))return e(l,s)+"";if(n(l))return a?a.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}return Y3=s,Y3}var Z3,RM;function nG(){if(RM)return Z3;RM=1;var t=Pde();function e(r){return r==null?"":t(r)}return Z3=e,Z3}var J3,MM;function iG(){if(MM)return J3;MM=1;var t=qa(),e=GE(),r=Mde(),n=nG();function i(a,s){return t(a)?a:e(a,s)?[a]:r(n(a))}return J3=i,J3}var e6,PM;function N2(){if(PM)return e6;PM=1;var t=Af();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return e6=e,e6}var t6,DM;function ZE(){if(DM)return t6;DM=1;var t=iG(),e=N2();function r(n,i){i=t(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return t6=r,t6}var r6,LM;function aG(){if(LM)return r6;LM=1;var t=ZE();function e(r,n,i){var a=r==null?void 0:t(r,n);return a===void 0?i:a}return r6=e,r6}var Dde=aG();const Os=Ir(Dde);var n6,BM;function Lde(){if(BM)return n6;BM=1;function t(e){return e==null}return n6=t,n6}var Bde=Lde();const Qt=Ir(Bde);var i6,UM;function Ude(){if(UM)return i6;UM=1;var t=Jl(),e=qa(),r=ec(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return i6=i,i6}var zde=Ude();const Fd=Ir(zde);var $de=KE();const qt=Ir($de);var Vde=Tu();const Ef=Ir(Vde);var a6={exports:{}},Mr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zM;function Fde(){if(zM)return Mr;zM=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var N=w.$$typeof;switch(N){case t:switch(w=w.type,w){case r:case i:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case l:case s:case d:case y:case m:case a:return w;default:return N}}case e:return N}}}return Mr.ContextConsumer=s,Mr.ContextProvider=a,Mr.Element=t,Mr.ForwardRef=d,Mr.Fragment=r,Mr.Lazy=y,Mr.Memo=m,Mr.Portal=e,Mr.Profiler=i,Mr.StrictMode=n,Mr.Suspense=h,Mr.SuspenseList=p,Mr.isAsyncMode=function(){return!1},Mr.isConcurrentMode=function(){return!1},Mr.isContextConsumer=function(w){return S(w)===s},Mr.isContextProvider=function(w){return S(w)===a},Mr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Mr.isForwardRef=function(w){return S(w)===d},Mr.isFragment=function(w){return S(w)===r},Mr.isLazy=function(w){return S(w)===y},Mr.isMemo=function(w){return S(w)===m},Mr.isPortal=function(w){return S(w)===e},Mr.isProfiler=function(w){return S(w)===i},Mr.isStrictMode=function(w){return S(w)===n},Mr.isSuspense=function(w){return S(w)===h},Mr.isSuspenseList=function(w){return S(w)===p},Mr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===h||w===p||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===a||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},Mr.typeOf=S,Mr}var $M;function qde(){return $M||($M=1,a6.exports=Fde()),a6.exports}var Hde=qde(),s6,VM;function sG(){if(VM)return s6;VM=1;var t=Jl(),e=ec(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return s6=n,s6}var o6,FM;function Gde(){if(FM)return o6;FM=1;var t=sG();function e(r){return t(r)&&r!=+r}return o6=e,o6}var Kde=Gde();const a1=Ir(Kde);var Wde=sG();const Xde=Ir(Wde);var to=function(e){return e===0?0:e>0?1:-1},vd=function(e){return Fd(e)&&e.indexOf("%")===e.length-1},lt=function(e){return Xde(e)&&!a1(e)},Qde=function(e){return Qt(e)},yi=function(e){return lt(e)||Fd(e)},Yde=0,s1=function(e){var r=++Yde;return"".concat(e||"").concat(r)},ro=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(e)&&!Fd(e))return n;var a;if(vd(e)){var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return a1(a)&&(a=n),i&&a>r&&(a=r),a},Wc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},Zde=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Pa=function(e,r){return lt(e)&&lt(r)?function(n){return e+n*(r-e)}:function(){return r}};function Cb(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Os(n,e))===r})}var Jde=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,i=0,a=0,s=0,l=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,i+=p,a+=h*p,s+=h*h,l=Math.min(l,h),d=Math.max(d,h);var y=r*s!==n*n?(r*a-n*i)/(r*s-n*n):0;return{xmin:l,xmax:d,a:y,b:(i-y*n)/r}},e0e=function(e,r){return lt(e)&&lt(r)?e-r:Fd(e)&&Fd(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function yh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function _A(t){"@babel/helpers - typeof";return _A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_A(t)}var t0e=["viewBox","children"],r0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],qM=["points","pathLength"],l6={svg:t0e,polygon:qM,polyline:qM},JE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ob=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(M.isValidElement(e)&&(n=e.props),!Ef(n))return null;var i={};return Object.keys(n).forEach(function(a){JE.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},n0e=function(e,r,n){return function(i){return e(r,n,i),null}},qd=function(e,r,n){if(!Ef(e)||_A(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];JE.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=n0e(s,r,n))}),i},i0e=["children"],a0e=["children"];function HM(t,e){if(t==null)return{};var r=s0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function s0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var GM={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Il=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},KM=null,c6=null,eN=function t(e){if(e===KM&&Array.isArray(c6))return c6;var r=[];return M.Children.forEach(e,function(n){Qt(n)||(Hde.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),c6=r,KM=e,r};function us(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Il(i)}):n=[Il(e)],eN(t).forEach(function(i){var a=Os(i,"type.displayName")||Os(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function rs(t,e){var r=us(t,e);return r&&r[0]}var WM=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!lt(n)||n<=0||!lt(i)||i<=0)},o0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],l0e=function(e){return e&&e.type&&Fd(e.type)&&o0e.indexOf(e.type)>=0},c0e=function(e,r,n,i){var a,s=(a=l6==null?void 0:l6[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!qt(e)&&(i&&s.includes(r)||r0e.includes(r))||n&&JE.includes(r)},Ct=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(M.isValidElement(e)&&(i=e.props),!Ef(i))return null;var a={};return Object.keys(i).forEach(function(s){var l;c0e((l=i)===null||l===void 0?void 0:l[s],s,r,n)&&(a[s]=i[s])}),a},SA=function t(e,r){if(e===r)return!0;var n=M.Children.count(e);if(n!==M.Children.count(r))return!1;if(n===0)return!0;if(n===1)return XM(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!XM(a,s))return!1}return!0},XM=function(e,r){if(Qt(e)&&Qt(r))return!0;if(!Qt(e)&&!Qt(r)){var n=e.props||{},i=n.children,a=HM(n,i0e),s=r.props||{},l=s.children,d=HM(s,a0e);return i&&l?yh(a,d)&&SA(i,l):!i&&!l?yh(a,d):!1}return!1},QM=function(e,r){var n=[],i={};return eN(e).forEach(function(a,s){if(l0e(a))n.push(a);else if(a){var l=Il(a.type),d=r[l]||{},h=d.handler,p=d.once;if(h&&(!p||!i[l])){var m=h(a,l,s);n.push(m),i[l]=!0}}}),n},u0e=function(e){var r=e&&e.type;return r&&GM[r]?GM[r]:null},d0e=function(e,r){return eN(r).indexOf(e)},h0e=["children","width","height","viewBox","className","style","title","desc"];function TA(){return TA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},TA.apply(this,arguments)}function f0e(t,e){if(t==null)return{};var r=p0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function p0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function AA(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,s=t.style,l=t.title,d=t.desc,h=f0e(t,h0e),p=i||{width:r,height:n,x:0,y:0},m=tr("recharts-surface",a);return te.createElement("svg",TA({},Ct(h,!0,"svg"),{className:m,width:r,height:n,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),te.createElement("title",null,l),te.createElement("desc",null,d),e)}var m0e=["children","className"];function EA(){return EA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},EA.apply(this,arguments)}function g0e(t,e){if(t==null)return{};var r=y0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var jr=te.forwardRef(function(t,e){var r=t.children,n=t.className,i=g0e(t,m0e),a=tr("recharts-layer",n);return te.createElement("g",EA({className:a},Ct(i,!0),{ref:e}),r)}),Rl=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},u6,YM;function v0e(){if(YM)return u6;YM=1;function t(e,r,n){var i=-1,a=e.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+r];return s}return u6=t,u6}var d6,ZM;function b0e(){if(ZM)return d6;ZM=1;var t=v0e();function e(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:t(r,n,i)}return d6=e,d6}var h6,JM;function oG(){if(JM)return h6;JM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",l=RegExp("["+s+t+i+a+"]");function d(h){return l.test(h)}return h6=d,h6}var f6,eP;function x0e(){if(eP)return f6;eP=1;function t(e){return e.split("")}return f6=t,f6}var p6,tP;function w0e(){if(tP)return p6;tP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="["+t+"]",l="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+l+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",T=h+"?",S="["+a+"]?",w="(?:"+b+"(?:"+[p,m,y].join("|")+")"+S+T+")*",N=S+T+w,C="(?:"+[p+l+"?",l,m,y,s].join("|")+")",k=RegExp(d+"(?="+d+")|"+C+N,"g");function $(I){return I.match(k)||[]}return p6=$,p6}var m6,rP;function _0e(){if(rP)return m6;rP=1;var t=x0e(),e=oG(),r=w0e();function n(i){return e(i)?r(i):t(i)}return m6=n,m6}var g6,nP;function S0e(){if(nP)return g6;nP=1;var t=b0e(),e=oG(),r=_0e(),n=nG();function i(a){return function(s){s=n(s);var l=e(s)?r(s):void 0,d=l?l[0]:s.charAt(0),h=l?t(l,1).join(""):s.slice(1);return d[a]()+h}}return g6=i,g6}var y6,iP;function T0e(){if(iP)return y6;iP=1;var t=S0e(),e=t("toUpperCase");return y6=e,y6}var A0e=T0e();const j2=Ir(A0e);function fn(t){return function(){return t}}const lG=Math.cos,Ib=Math.sin,co=Math.sqrt,Rb=Math.PI,k2=2*Rb,NA=Math.PI,jA=2*NA,ud=1e-6,E0e=jA-ud;function cG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function N0e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cG;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class j0e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cG:N0e(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,d=n-e,h=i-r,p=s-e,m=l-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>ud)if(!(Math.abs(m*d-h*p)>ud)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let b=n-s,T=i-l,S=d*d+h*h,w=b*b+T*T,N=Math.sqrt(S),C=Math.sqrt(y),k=a*Math.tan((NA-Math.acos((S+y-w)/(2*N*C)))/2),$=k/C,I=k/N;Math.abs($-1)>ud&&this._append`L${e+$*p},${r+$*m}`,this._append`A${a},${a},0,0,${+(m*b>p*T)},${this._x1=e+I*d},${this._y1=r+I*h}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),d=n*Math.sin(i),h=e+l,p=r+d,m=1^s,y=s?i-a:a-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ud||Math.abs(this._y1-p)>ud)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%jA+jA),y>E0e?this._append`A${n},${n},0,1,${m},${e-l},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>ud&&this._append`A${n},${n},0,${+(y>=NA)},${m},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function tN(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new j0e(e)}function rN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function uG(t){this._context=t}uG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function C2(t){return new uG(t)}function dG(t){return t[0]}function hG(t){return t[1]}function fG(t,e){var r=fn(!0),n=null,i=C2,a=null,s=tN(l);t=typeof t=="function"?t:t===void 0?dG:fn(t),e=typeof e=="function"?e:e===void 0?hG:fn(e);function l(d){var h,p=(d=rN(d)).length,m,y=!1,b;for(n==null&&(a=i(b=s())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(m,h,d),+e(m,h,d));if(b)return a=null,b+""||null}return l.x=function(d){return arguments.length?(t=typeof d=="function"?d:fn(+d),l):t},l.y=function(d){return arguments.length?(e=typeof d=="function"?d:fn(+d),l):e},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:fn(!!d),l):r},l.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),l):i},l.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),l):n},l}function dv(t,e,r){var n=null,i=fn(!0),a=null,s=C2,l=null,d=tN(h);t=typeof t=="function"?t:t===void 0?dG:fn(+t),e=typeof e=="function"?e:fn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?hG:fn(+r);function h(m){var y,b,T,S=(m=rN(m)).length,w,N=!1,C,k=new Array(S),$=new Array(S);for(a==null&&(l=s(C=d())),y=0;y<=S;++y){if(!(y<S&&i(w=m[y],y,m))===N)if(N=!N)b=y,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),T=y-1;T>=b;--T)l.point(k[T],$[T]);l.lineEnd(),l.areaEnd()}N&&(k[y]=+t(w,y,m),$[y]=+e(w,y,m),l.point(n?+n(w,y,m):k[y],r?+r(w,y,m):$[y]))}if(C)return l=null,C+""||null}function p(){return fG().defined(i).curve(s).context(a)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:fn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:fn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:fn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:fn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:fn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:fn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(i=typeof m=="function"?m:fn(!!m),h):i},h.curve=function(m){return arguments.length?(s=m,a!=null&&(l=s(a)),h):s},h.context=function(m){return arguments.length?(m==null?a=l=null:l=s(a=m),h):a},h}class pG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function k0e(t){return new pG(t,!0)}function C0e(t){return new pG(t,!1)}const nN={draw(t,e){const r=co(e/Rb);t.moveTo(r,0),t.arc(0,0,r,0,k2)}},O0e={draw(t,e){const r=co(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},mG=co(1/3),I0e=mG*2,R0e={draw(t,e){const r=co(e/I0e),n=r*mG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},M0e={draw(t,e){const r=co(e),n=-r/2;t.rect(n,n,r,r)}},P0e=.8908130915292852,gG=Ib(Rb/10)/Ib(7*Rb/10),D0e=Ib(k2/10)*gG,L0e=-lG(k2/10)*gG,B0e={draw(t,e){const r=co(e*P0e),n=D0e*r,i=L0e*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=k2*a/5,l=lG(s),d=Ib(s);t.lineTo(d*r,-l*r),t.lineTo(l*n-d*i,d*n+l*i)}t.closePath()}},v6=co(3),U0e={draw(t,e){const r=-co(e/(v6*3));t.moveTo(0,r*2),t.lineTo(-v6*r,-r),t.lineTo(v6*r,-r),t.closePath()}},Ss=-.5,Ts=co(3)/2,kA=1/co(12),z0e=(kA/2+1)*3,$0e={draw(t,e){const r=co(e/z0e),n=r/2,i=r*kA,a=n,s=r*kA+r,l=-a,d=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(l,d),t.lineTo(Ss*n-Ts*i,Ts*n+Ss*i),t.lineTo(Ss*a-Ts*s,Ts*a+Ss*s),t.lineTo(Ss*l-Ts*d,Ts*l+Ss*d),t.lineTo(Ss*n+Ts*i,Ss*i-Ts*n),t.lineTo(Ss*a+Ts*s,Ss*s-Ts*a),t.lineTo(Ss*l+Ts*d,Ss*d-Ts*l),t.closePath()}};function V0e(t,e){let r=null,n=tN(i);t=typeof t=="function"?t:fn(t||nN),e=typeof e=="function"?e:fn(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:fn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:fn(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Mb(){}function Pb(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function yG(t){this._context=t}yG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Pb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function F0e(t){return new yG(t)}function vG(t){this._context=t}vG.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function q0e(t){return new vG(t)}function bG(t){this._context=t}bG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Pb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function H0e(t){return new bG(t)}function xG(t){this._context=t}xG.prototype={areaStart:Mb,areaEnd:Mb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function G0e(t){return new xG(t)}function aP(t){return t<0?-1:1}function sP(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),l=(a*i+s*n)/(n+i);return(aP(a)+aP(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function oP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function b6(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,l=(a-n)/3;t._context.bezierCurveTo(n+l,i+l*e,a-l,s-l*r,a,s)}function Db(t){this._context=t}Db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:b6(this,this._t0,oP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,b6(this,oP(this,r=sP(this,t,e)),r);break;default:b6(this,this._t0,r=sP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function wG(t){this._context=new _G(t)}(wG.prototype=Object.create(Db.prototype)).point=function(t,e){Db.prototype.point.call(this,e,t)};function _G(t){this._context=t}_G.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function K0e(t){return new Db(t)}function W0e(t){return new wG(t)}function SG(t){this._context=t}SG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=lP(t),i=lP(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lP(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function X0e(t){return new SG(t)}function O2(t,e){this._context=t,this._t=e}O2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Q0e(t){return new O2(t,.5)}function Y0e(t){return new O2(t,0)}function Z0e(t){return new O2(t,1)}function $h(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,l=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function CA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function J0e(t,e){return t[e]}function ehe(t){const e=[];return e.key=t,e}function the(){var t=fn([]),e=CA,r=$h,n=J0e;function i(a){var s=Array.from(t.apply(this,arguments),ehe),l,d=s.length,h=-1,p;for(const m of a)for(l=0,++h;l<d;++l)(s[l][h]=[0,+n(m,s[l].key,h,a)]).data=m;for(l=0,p=rN(e(s));l<d;++l)s[p[l]].index=l;return r(s,p),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:fn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:fn(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?CA:typeof a=="function"?a:fn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??$h,i):r},i}function rhe(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}$h(t,e)}}function nhe(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,l=0;s<i;++s)l+=t[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}$h(t,e)}}function ihe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var l=0,d=0,h=0;l<s;++l){for(var p=t[e[l]],m=p[n][1]||0,y=p[n-1][1]||0,b=(m-y)/2,T=0;T<l;++T){var S=t[e[T]],w=S[n][1]||0,N=S[n-1][1]||0;b+=w-N}d+=m,h+=b*m}i[n-1][1]+=i[n-1][0]=r,d&&(r-=h/d)}i[n-1][1]+=i[n-1][0]=r,$h(t,e)}}function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}var ahe=["type","size","sizeType"];function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OA.apply(this,arguments)}function cP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(r),!0).forEach(function(n){she(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function she(t,e,r){return e=ohe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ohe(t){var e=lhe(t,"string");return Xm(e)=="symbol"?e:e+""}function lhe(t,e){if(Xm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function che(t,e){if(t==null)return{};var r=uhe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var TG={symbolCircle:nN,symbolCross:O0e,symbolDiamond:R0e,symbolSquare:M0e,symbolStar:B0e,symbolTriangle:U0e,symbolWye:$0e},dhe=Math.PI/180,hhe=function(e){var r="symbol".concat(j2(e));return TG[r]||nN},fhe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dhe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},phe=function(e,r){TG["symbol".concat(j2(e))]=r},I2=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,s=e.sizeType,l=s===void 0?"area":s,d=che(e,ahe),h=uP(uP({},d),{},{type:n,size:a,sizeType:l}),p=function(){var w=hhe(n),N=V0e().type(w).size(fhe(a,l,n));return N()},m=h.className,y=h.cx,b=h.cy,T=Ct(h,!0);return y===+y&&b===+b&&a===+a?te.createElement("path",OA({},T,{className:tr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(b,")"),d:p()})):null};I2.registerSymbol=phe;function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function IA(){return IA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},IA.apply(this,arguments)}function dP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(r),!0).forEach(function(n){Qm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ghe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EG(n.key),n)}}function vhe(t,e,r){return e&&yhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bhe(t,e,r){return e=Lb(e),xhe(t,AG()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function xhe(t,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return whe(t)}function whe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AG=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function _he(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},RA(t,e)}function Qm(t,e,r){return e=EG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EG(t){var e=She(t,"string");return Vh(e)=="symbol"?e:e+""}function She(t,e){if(Vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var As=32,iN=(function(t){function e(){return ghe(this,e),bhe(this,e,arguments)}return _he(e,t),vhe(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=As/2,s=As/6,l=As/3,d=n.inactive?i:n.color;if(n.type==="plainline")return te.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:As,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return te.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(As,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return te.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(As/8,"h").concat(As,"v").concat(As*3/4,"h").concat(-As,"z"),className:"recharts-legend-icon"});if(te.isValidElement(n.legendIcon)){var h=mhe({},n);return delete h.legendIcon,te.cloneElement(n.legendIcon,h)}return te.createElement(I2,{fill:d,cx:a,cy:a,size:As,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,l=i.layout,d=i.formatter,h=i.inactiveColor,p={x:0,y:0,width:As,height:As},m={display:l==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(b,T){var S=b.formatter||d,w=tr(Qm(Qm({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",b.inactive));if(b.type==="none")return null;var N=qt(b.value)?null:b.value;Rl(!qt(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var C=b.inactive?h:b.color;return te.createElement("li",IA({className:w,style:m,key:"legend-item-".concat(T)},qd(n.props,b,T)),te.createElement(AA,{width:s,height:s,viewBox:p,style:y},n.renderIcon(b)),te.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},S?S(N,b,T):N))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return te.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(M.PureComponent);Qm(iN,"displayName","Legend");Qm(iN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var x6,hP;function The(){if(hP)return x6;hP=1;var t=A2();function e(){this.__data__=new t,this.size=0}return x6=e,x6}var w6,fP;function Ahe(){if(fP)return w6;fP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return w6=t,w6}var _6,pP;function Ehe(){if(pP)return _6;pP=1;function t(e){return this.__data__.get(e)}return _6=t,_6}var S6,mP;function Nhe(){if(mP)return S6;mP=1;function t(e){return this.__data__.has(e)}return S6=t,S6}var T6,gP;function jhe(){if(gP)return T6;gP=1;var t=A2(),e=XE(),r=QE(),n=200;function i(a,s){var l=this.__data__;if(l instanceof t){var d=l.__data__;if(!e||d.length<n-1)return d.push([a,s]),this.size=++l.size,this;l=this.__data__=new r(d)}return l.set(a,s),this.size=l.size,this}return T6=i,T6}var A6,yP;function NG(){if(yP)return A6;yP=1;var t=A2(),e=The(),r=Ahe(),n=Ehe(),i=Nhe(),a=jhe();function s(l){var d=this.__data__=new t(l);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,A6=s,A6}var E6,vP;function khe(){if(vP)return E6;vP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return E6=e,E6}var N6,bP;function Che(){if(bP)return N6;bP=1;function t(e){return this.__data__.has(e)}return N6=t,N6}var j6,xP;function jG(){if(xP)return j6;xP=1;var t=QE(),e=khe(),r=Che();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,j6=n,j6}var k6,wP;function kG(){if(wP)return k6;wP=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return k6=t,k6}var C6,_P;function CG(){if(_P)return C6;_P=1;function t(e,r){return e.has(r)}return C6=t,C6}var O6,SP;function OG(){if(SP)return O6;SP=1;var t=jG(),e=kG(),r=CG(),n=1,i=2;function a(s,l,d,h,p,m){var y=d&n,b=s.length,T=l.length;if(b!=T&&!(y&&T>b))return!1;var S=m.get(s),w=m.get(l);if(S&&w)return S==l&&w==s;var N=-1,C=!0,k=d&i?new t:void 0;for(m.set(s,l),m.set(l,s);++N<b;){var $=s[N],I=l[N];if(h)var L=y?h(I,$,N,l,s,m):h($,I,N,s,l,m);if(L!==void 0){if(L)continue;C=!1;break}if(k){if(!e(l,function(E,A){if(!r(k,A)&&($===E||p($,E,d,h,m)))return k.push(A)})){C=!1;break}}else if(!($===I||p($,I,d,h,m))){C=!1;break}}return m.delete(s),m.delete(l),C}return O6=a,O6}var I6,TP;function Ohe(){if(TP)return I6;TP=1;var t=$o(),e=t.Uint8Array;return I6=e,I6}var R6,AP;function Ihe(){if(AP)return R6;AP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,a){n[++r]=[a,i]}),n}return R6=t,R6}var M6,EP;function aN(){if(EP)return M6;EP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return M6=t,M6}var P6,NP;function Rhe(){if(NP)return P6;NP=1;var t=i1(),e=Ohe(),r=WE(),n=OG(),i=Ihe(),a=aN(),s=1,l=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",b="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",N="[object ArrayBuffer]",C="[object DataView]",k=t?t.prototype:void 0,$=k?k.valueOf:void 0;function I(L,E,A,R,F,P,B){switch(A){case C:if(L.byteLength!=E.byteLength||L.byteOffset!=E.byteOffset)return!1;L=L.buffer,E=E.buffer;case N:return!(L.byteLength!=E.byteLength||!P(new e(L),new e(E)));case d:case h:case y:return r(+L,+E);case p:return L.name==E.name&&L.message==E.message;case b:case S:return L==E+"";case m:var D=i;case T:var Q=R&s;if(D||(D=a),L.size!=E.size&&!Q)return!1;var Z=B.get(L);if(Z)return Z==E;R|=l,B.set(L,E);var W=n(D(L),D(E),R,F,P,B);return B.delete(L),W;case w:if($)return $.call(L)==$.call(E)}return!1}return P6=I,P6}var D6,jP;function IG(){if(jP)return D6;jP=1;function t(e,r){for(var n=-1,i=r.length,a=e.length;++n<i;)e[a+n]=r[n];return e}return D6=t,D6}var L6,kP;function Mhe(){if(kP)return L6;kP=1;var t=IG(),e=qa();function r(n,i,a){var s=i(n);return e(n)?s:t(s,a(n))}return L6=r,L6}var B6,CP;function Phe(){if(CP)return B6;CP=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var l=e[n];r(l,n,e)&&(s[a++]=l)}return s}return B6=t,B6}var U6,OP;function Dhe(){if(OP)return U6;OP=1;function t(){return[]}return U6=t,U6}var z6,IP;function Lhe(){if(IP)return z6;IP=1;var t=Phe(),e=Dhe(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(l){return n.call(s,l)}))}:e;return z6=a,z6}var $6,RP;function Bhe(){if(RP)return $6;RP=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return $6=t,$6}var V6,MP;function Uhe(){if(MP)return V6;MP=1;var t=Jl(),e=ec(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return V6=n,V6}var F6,PP;function sN(){if(PP)return F6;PP=1;var t=Uhe(),e=ec(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return F6=a,F6}var Jp={exports:{}},q6,DP;function zhe(){if(DP)return q6;DP=1;function t(){return!1}return q6=t,q6}Jp.exports;var LP;function RG(){return LP||(LP=1,(function(t,e){var r=$o(),n=zhe(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,l=s?r.Buffer:void 0,d=l?l.isBuffer:void 0,h=d||n;t.exports=h})(Jp,Jp.exports)),Jp.exports}var H6,BP;function oN(){if(BP)return H6;BP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return H6=r,H6}var G6,UP;function lN(){if(UP)return G6;UP=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return G6=e,G6}var K6,zP;function $he(){if(zP)return K6;zP=1;var t=Jl(),e=lN(),r=ec(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",l="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",b="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",N="[object DataView]",C="[object Float32Array]",k="[object Float64Array]",$="[object Int8Array]",I="[object Int16Array]",L="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",F="[object Uint32Array]",P={};P[C]=P[k]=P[$]=P[I]=P[L]=P[E]=P[A]=P[R]=P[F]=!0,P[n]=P[i]=P[w]=P[a]=P[N]=P[s]=P[l]=P[d]=P[h]=P[p]=P[m]=P[y]=P[b]=P[T]=P[S]=!1;function B(D){return r(D)&&e(D.length)&&!!P[t(D)]}return K6=B,K6}var W6,$P;function MG(){if($P)return W6;$P=1;function t(e){return function(r){return e(r)}}return W6=t,W6}var em={exports:{}};em.exports;var VP;function Vhe(){return VP||(VP=1,(function(t,e){var r=eG(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,l=(function(){try{var d=i&&i.require&&i.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=l})(em,em.exports)),em.exports}var X6,FP;function PG(){if(FP)return X6;FP=1;var t=$he(),e=MG(),r=Vhe(),n=r&&r.isTypedArray,i=n?e(n):t;return X6=i,X6}var Q6,qP;function Fhe(){if(qP)return Q6;qP=1;var t=Bhe(),e=sN(),r=qa(),n=RG(),i=oN(),a=PG(),s=Object.prototype,l=s.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),b=!m&&!y&&n(h),T=!m&&!y&&!b&&a(h),S=m||y||b||T,w=S?t(h.length,String):[],N=w.length;for(var C in h)(p||l.call(h,C))&&!(S&&(C=="length"||b&&(C=="offset"||C=="parent")||T&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||i(C,N)))&&w.push(C);return w}return Q6=d,Q6}var Y6,HP;function qhe(){if(HP)return Y6;HP=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return Y6=e,Y6}var Z6,GP;function DG(){if(GP)return Z6;GP=1;function t(e,r){return function(n){return e(r(n))}}return Z6=t,Z6}var J6,KP;function Hhe(){if(KP)return J6;KP=1;var t=DG(),e=t(Object.keys,Object);return J6=e,J6}var e_,WP;function Ghe(){if(WP)return e_;WP=1;var t=qhe(),e=Hhe(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var l in Object(a))n.call(a,l)&&l!="constructor"&&s.push(l);return s}return e_=i,e_}var t_,XP;function o1(){if(XP)return t_;XP=1;var t=KE(),e=lN();function r(n){return n!=null&&e(n.length)&&!t(n)}return t_=r,t_}var r_,QP;function R2(){if(QP)return r_;QP=1;var t=Fhe(),e=Ghe(),r=o1();function n(i){return r(i)?t(i):e(i)}return r_=n,r_}var n_,YP;function Khe(){if(YP)return n_;YP=1;var t=Mhe(),e=Lhe(),r=R2();function n(i){return t(i,r,e)}return n_=n,n_}var i_,ZP;function Whe(){if(ZP)return i_;ZP=1;var t=Khe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,l,d,h,p){var m=l&e,y=t(a),b=y.length,T=t(s),S=T.length;if(b!=S&&!m)return!1;for(var w=b;w--;){var N=y[w];if(!(m?N in s:n.call(s,N)))return!1}var C=p.get(a),k=p.get(s);if(C&&k)return C==s&&k==a;var $=!0;p.set(a,s),p.set(s,a);for(var I=m;++w<b;){N=y[w];var L=a[N],E=s[N];if(d)var A=m?d(E,L,N,s,a,p):d(L,E,N,a,s,p);if(!(A===void 0?L===E||h(L,E,l,d,p):A)){$=!1;break}I||(I=N=="constructor")}if($&&!I){var R=a.constructor,F=s.constructor;R!=F&&"constructor"in a&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof F=="function"&&F instanceof F)&&($=!1)}return p.delete(a),p.delete(s),$}return i_=i,i_}var a_,JP;function Xhe(){if(JP)return a_;JP=1;var t=r0(),e=$o(),r=t(e,"DataView");return a_=r,a_}var s_,eD;function Qhe(){if(eD)return s_;eD=1;var t=r0(),e=$o(),r=t(e,"Promise");return s_=r,s_}var o_,tD;function LG(){if(tD)return o_;tD=1;var t=r0(),e=$o(),r=t(e,"Set");return o_=r,o_}var l_,rD;function Yhe(){if(rD)return l_;rD=1;var t=r0(),e=$o(),r=t(e,"WeakMap");return l_=r,l_}var c_,nD;function Zhe(){if(nD)return c_;nD=1;var t=Xhe(),e=XE(),r=Qhe(),n=LG(),i=Yhe(),a=Jl(),s=tG(),l="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",b=s(t),T=s(e),S=s(r),w=s(n),N=s(i),C=a;return(t&&C(new t(new ArrayBuffer(1)))!=y||e&&C(new e)!=l||r&&C(r.resolve())!=h||n&&C(new n)!=p||i&&C(new i)!=m)&&(C=function(k){var $=a(k),I=$==d?k.constructor:void 0,L=I?s(I):"";if(L)switch(L){case b:return y;case T:return l;case S:return h;case w:return p;case N:return m}return $}),c_=C,c_}var u_,iD;function Jhe(){if(iD)return u_;iD=1;var t=NG(),e=OG(),r=Rhe(),n=Whe(),i=Zhe(),a=qa(),s=RG(),l=PG(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,b=y.hasOwnProperty;function T(S,w,N,C,k,$){var I=a(S),L=a(w),E=I?p:i(S),A=L?p:i(w);E=E==h?m:E,A=A==h?m:A;var R=E==m,F=A==m,P=E==A;if(P&&s(S)){if(!s(w))return!1;I=!0,R=!1}if(P&&!R)return $||($=new t),I||l(S)?e(S,w,N,C,k,$):r(S,w,E,N,C,k,$);if(!(N&d)){var B=R&&b.call(S,"__wrapped__"),D=F&&b.call(w,"__wrapped__");if(B||D){var Q=B?S.value():S,Z=D?w.value():w;return $||($=new t),k(Q,Z,N,C,$)}}return P?($||($=new t),n(S,w,N,C,k,$)):!1}return u_=T,u_}var d_,aD;function cN(){if(aD)return d_;aD=1;var t=Jhe(),e=ec();function r(n,i,a,s,l){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,a,s,r,l)}return d_=r,d_}var h_,sD;function efe(){if(sD)return h_;sD=1;var t=NG(),e=cN(),r=1,n=2;function i(a,s,l,d){var h=l.length,p=h,m=!d;if(a==null)return!p;for(a=Object(a);h--;){var y=l[h];if(m&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++h<p;){y=l[h];var b=y[0],T=a[b],S=y[1];if(m&&y[2]){if(T===void 0&&!(b in a))return!1}else{var w=new t;if(d)var N=d(T,S,b,a,s,w);if(!(N===void 0?e(S,T,r|n,d,w):N))return!1}}return!0}return h_=i,h_}var f_,oD;function BG(){if(oD)return f_;oD=1;var t=Tu();function e(r){return r===r&&!t(r)}return f_=e,f_}var p_,lD;function tfe(){if(lD)return p_;lD=1;var t=BG(),e=R2();function r(n){for(var i=e(n),a=i.length;a--;){var s=i[a],l=n[s];i[a]=[s,l,t(l)]}return i}return p_=r,p_}var m_,cD;function UG(){if(cD)return m_;cD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return m_=t,m_}var g_,uD;function rfe(){if(uD)return g_;uD=1;var t=efe(),e=tfe(),r=UG();function n(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return g_=n,g_}var y_,dD;function nfe(){if(dD)return y_;dD=1;function t(e,r){return e!=null&&r in Object(e)}return y_=t,y_}var v_,hD;function ife(){if(hD)return v_;hD=1;var t=iG(),e=sN(),r=qa(),n=oN(),i=lN(),a=N2();function s(l,d,h){d=t(d,l);for(var p=-1,m=d.length,y=!1;++p<m;){var b=a(d[p]);if(!(y=l!=null&&h(l,b)))break;l=l[b]}return y||++p!=m?y:(m=l==null?0:l.length,!!m&&i(m)&&n(b,m)&&(r(l)||e(l)))}return v_=s,v_}var b_,fD;function afe(){if(fD)return b_;fD=1;var t=nfe(),e=ife();function r(n,i){return n!=null&&e(n,i,t)}return b_=r,b_}var x_,pD;function sfe(){if(pD)return x_;pD=1;var t=cN(),e=aG(),r=afe(),n=GE(),i=BG(),a=UG(),s=N2(),l=1,d=2;function h(p,m){return n(p)&&i(m)?a(s(p),m):function(y){var b=e(y,p);return b===void 0&&b===m?r(y,p):t(m,b,l|d)}}return x_=h,x_}var w_,mD;function Nf(){if(mD)return w_;mD=1;function t(e){return e}return w_=t,w_}var __,gD;function ofe(){if(gD)return __;gD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return __=t,__}var S_,yD;function lfe(){if(yD)return S_;yD=1;var t=ZE();function e(r){return function(n){return t(n,r)}}return S_=e,S_}var T_,vD;function cfe(){if(vD)return T_;vD=1;var t=ofe(),e=lfe(),r=GE(),n=N2();function i(a){return r(a)?t(n(a)):e(a)}return T_=i,T_}var A_,bD;function Vo(){if(bD)return A_;bD=1;var t=rfe(),e=sfe(),r=Nf(),n=qa(),i=cfe();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):i(s)}return A_=a,A_}var E_,xD;function zG(){if(xD)return E_;xD=1;function t(e,r,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(e[s],s,e))return s;return-1}return E_=t,E_}var N_,wD;function ufe(){if(wD)return N_;wD=1;function t(e){return e!==e}return N_=t,N_}var j_,_D;function dfe(){if(_D)return j_;_D=1;function t(e,r,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return j_=t,j_}var k_,SD;function hfe(){if(SD)return k_;SD=1;var t=zG(),e=ufe(),r=dfe();function n(i,a,s){return a===a?r(i,a,s):t(i,e,s)}return k_=n,k_}var C_,TD;function ffe(){if(TD)return C_;TD=1;var t=hfe();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return C_=e,C_}var O_,AD;function pfe(){if(AD)return O_;AD=1;function t(e,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(r,e[i]))return!0;return!1}return O_=t,O_}var I_,ED;function mfe(){if(ED)return I_;ED=1;function t(){}return I_=t,I_}var R_,ND;function gfe(){if(ND)return R_;ND=1;var t=LG(),e=mfe(),r=aN(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return R_=i,R_}var M_,jD;function yfe(){if(jD)return M_;jD=1;var t=jG(),e=ffe(),r=pfe(),n=CG(),i=gfe(),a=aN(),s=200;function l(d,h,p){var m=-1,y=e,b=d.length,T=!0,S=[],w=S;if(p)T=!1,y=r;else if(b>=s){var N=h?null:i(d);if(N)return a(N);T=!1,y=n,w=new t}else w=h?[]:S;e:for(;++m<b;){var C=d[m],k=h?h(C):C;if(C=p||C!==0?C:0,T&&k===k){for(var $=w.length;$--;)if(w[$]===k)continue e;h&&w.push(k),S.push(C)}else y(w,k,p)||(w!==S&&w.push(k),S.push(C))}return S}return M_=l,M_}var P_,kD;function vfe(){if(kD)return P_;kD=1;var t=Vo(),e=yfe();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return P_=r,P_}var bfe=vfe();const CD=Ir(bfe);function $G(t,e,r){return e===!0?CD(t,r):qt(e)?CD(t,e):t}function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}var xfe=["ref"];function OD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OD(Object(r),!0).forEach(function(n){M2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ID(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FG(n.key),n)}}function _fe(t,e,r){return e&&ID(t.prototype,e),r&&ID(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sfe(t,e,r){return e=Bb(e),Tfe(t,VG()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function Tfe(t,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Afe(t)}function Afe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VG=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function Efe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MA(t,e)}function MA(t,e){return MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MA(t,e)}function M2(t,e,r){return e=FG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FG(t){var e=Nfe(t,"string");return Fh(e)=="symbol"?e:e+""}function Nfe(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jfe(t,e){if(t==null)return{};var r=kfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function kfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Cfe(t){return t.value}function Ofe(t,e){if(te.isValidElement(t))return te.cloneElement(t,e);if(typeof t=="function")return te.createElement(t,e);e.ref;var r=jfe(e,xfe);return te.createElement(iN,r)}var RD=1,vh=(function(t){function e(){var r;wfe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Sfe(this,e,[].concat(i)),M2(r,"lastBoundingBox",{width:-1,height:-1}),r}return Efe(e,t),_fe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>RD||Math.abs(i.height-this.lastBoundingBox.height)>RD)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?pl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,l=i.verticalAlign,d=i.margin,h=i.chartWidth,p=i.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var b=this.getBBoxSnapshot();m={left:((h||0)-b.width)/2}}else m=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var T=this.getBBoxSnapshot();y={top:((p||0)-T.height)/2}}else y=l==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return pl(pl({},m),y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,l=i.height,d=i.wrapperStyle,h=i.payloadUniqBy,p=i.payload,m=pl(pl({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(d)),d);return te.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(b){n.wrapperNode=b}},Ofe(a,pl(pl({},this.props),{},{payload:$G(p,h,Cfe)})))}}],[{key:"getWithHeight",value:function(n,i){var a=pl(pl({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&lt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])})(M.PureComponent);M2(vh,"displayName","Legend");M2(vh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var D_,MD;function Ife(){if(MD)return D_;MD=1;var t=i1(),e=sN(),r=qa(),n=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(n&&a&&a[n])}return D_=i,D_}var L_,PD;function qG(){if(PD)return L_;PD=1;var t=IG(),e=Ife();function r(n,i,a,s,l){var d=-1,h=n.length;for(a||(a=e),l||(l=[]);++d<h;){var p=n[d];i>0&&a(p)?i>1?r(p,i-1,a,s,l):t(l,p):s||(l[l.length]=p)}return l}return L_=r,L_}var B_,DD;function Rfe(){if(DD)return B_;DD=1;function t(e){return function(r,n,i){for(var a=-1,s=Object(r),l=i(r),d=l.length;d--;){var h=l[e?d:++a];if(n(s[h],h,s)===!1)break}return r}}return B_=t,B_}var U_,LD;function Mfe(){if(LD)return U_;LD=1;var t=Rfe(),e=t();return U_=e,U_}var z_,BD;function HG(){if(BD)return z_;BD=1;var t=Mfe(),e=R2();function r(n,i){return n&&t(n,i,e)}return z_=r,z_}var $_,UD;function Pfe(){if(UD)return $_;UD=1;var t=o1();function e(r,n){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var s=i.length,l=n?s:-1,d=Object(i);(n?l--:++l<s)&&a(d[l],l,d)!==!1;);return i}}return $_=e,$_}var V_,zD;function uN(){if(zD)return V_;zD=1;var t=HG(),e=Pfe(),r=e(t);return V_=r,V_}var F_,$D;function GG(){if($D)return F_;$D=1;var t=uN(),e=o1();function r(n,i){var a=-1,s=e(n)?Array(n.length):[];return t(n,function(l,d,h){s[++a]=i(l,d,h)}),s}return F_=r,F_}var q_,VD;function Dfe(){if(VD)return q_;VD=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return q_=t,q_}var H_,FD;function Lfe(){if(FD)return H_;FD=1;var t=Af();function e(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,l=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!l&&r>n||l&&d&&p&&!h&&!m||a&&d&&p||!i&&p||!s)return 1;if(!a&&!l&&!m&&r<n||m&&i&&s&&!a&&!l||h&&i&&s||!d&&s||!p)return-1}return 0}return H_=e,H_}var G_,qD;function Bfe(){if(qD)return G_;qD=1;var t=Lfe();function e(r,n,i){for(var a=-1,s=r.criteria,l=n.criteria,d=s.length,h=i.length;++a<d;){var p=t(s[a],l[a]);if(p){if(a>=h)return p;var m=i[a];return p*(m=="desc"?-1:1)}}return r.index-n.index}return G_=e,G_}var K_,HD;function Ufe(){if(HD)return K_;HD=1;var t=YE(),e=ZE(),r=Vo(),n=GG(),i=Dfe(),a=MG(),s=Bfe(),l=Nf(),d=qa();function h(p,m,y){m.length?m=t(m,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):m=[l];var b=-1;m=t(m,a(r));var T=n(p,function(S,w,N){var C=t(m,function(k){return k(S)});return{criteria:C,index:++b,value:S}});return i(T,function(S,w){return s(S,w,y)})}return K_=h,K_}var W_,GD;function zfe(){if(GD)return W_;GD=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return W_=t,W_}var X_,KD;function $fe(){if(KD)return X_;KD=1;var t=zfe(),e=Math.max;function r(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,l=-1,d=e(s.length-i,0),h=Array(d);++l<d;)h[l]=s[i+l];l=-1;for(var p=Array(i+1);++l<i;)p[l]=s[l];return p[i]=a(h),t(n,this,p)}}return X_=r,X_}var Q_,WD;function Vfe(){if(WD)return Q_;WD=1;function t(e){return function(){return e}}return Q_=t,Q_}var Y_,XD;function KG(){if(XD)return Y_;XD=1;var t=r0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Y_=e,Y_}var Z_,QD;function Ffe(){if(QD)return Z_;QD=1;var t=Vfe(),e=KG(),r=Nf(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return Z_=n,Z_}var J_,YD;function qfe(){if(YD)return J_;YD=1;var t=800,e=16,r=Date.now;function n(i){var a=0,s=0;return function(){var l=r(),d=e-(l-s);if(s=l,d>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return J_=n,J_}var eS,ZD;function Hfe(){if(ZD)return eS;ZD=1;var t=Ffe(),e=qfe(),r=e(t);return eS=r,eS}var tS,JD;function Gfe(){if(JD)return tS;JD=1;var t=Nf(),e=$fe(),r=Hfe();function n(i,a){return r(e(i,a,t),i+"")}return tS=n,tS}var rS,eL;function P2(){if(eL)return rS;eL=1;var t=WE(),e=o1(),r=oN(),n=Tu();function i(a,s,l){if(!n(l))return!1;var d=typeof s;return(d=="number"?e(l)&&r(s,l.length):d=="string"&&s in l)?t(l[s],a):!1}return rS=i,rS}var nS,tL;function Kfe(){if(tL)return nS;tL=1;var t=qG(),e=Ufe(),r=Gfe(),n=P2(),i=r(function(a,s){if(a==null)return[];var l=s.length;return l>1&&n(a,s[0],s[1])?s=[]:l>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return nS=i,nS}var Wfe=Kfe();const dN=Ir(Wfe);function Ym(t){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ym(t)}function PA(){return PA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PA.apply(this,arguments)}function Xfe(t,e){return Jfe(t)||Zfe(t,e)||Yfe(t,e)||Qfe()}function Qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yfe(t,e){if(t){if(typeof t=="string")return rL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rL(t,e)}}function rL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function Jfe(t){if(Array.isArray(t))return t}function nL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nL(Object(r),!0).forEach(function(n){epe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function epe(t,e,r){return e=tpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tpe(t){var e=rpe(t,"string");return Ym(e)=="symbol"?e:e+""}function rpe(t,e){if(Ym(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ym(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function npe(t){return Array.isArray(t)&&yi(t[0])&&yi(t[1])?t.join(" ~ "):t}var ipe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,l=s===void 0?{}:s,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,b=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,N=e.accessibilityLayer,C=N===void 0?!1:N,k=function(){if(p&&p.length){var B={padding:0,margin:0},D=(y?dN(p,y):p).map(function(Q,Z){if(Q.type==="none")return null;var W=iS({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},l),J=Q.formatter||m||npe,Y=Q.value,ge=Q.name,ce=Y,X=ge;if(J&&ce!=null&&X!=null){var re=J(Y,ge,Q,Z,p);if(Array.isArray(re)){var de=Xfe(re,2);ce=de[0],X=de[1]}else ce=re}return te.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:W},yi(X)?te.createElement("span",{className:"recharts-tooltip-item-name"},X):null,yi(X)?te.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,te.createElement("span",{className:"recharts-tooltip-item-value"},ce),te.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return te.createElement("ul",{className:"recharts-tooltip-item-list",style:B},D)}return null},$=iS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),I=iS({margin:0},h),L=!Qt(S),E=L?S:"",A=tr("recharts-default-tooltip",b),R=tr("recharts-tooltip-label",T);L&&w&&p!==void 0&&p!==null&&(E=w(S,p));var F=C?{role:"status","aria-live":"assertive"}:{};return te.createElement("div",PA({className:A,style:$},F),te.createElement("p",{className:R,style:I},te.isValidElement(E)?E:"".concat(E)),k())};function Zm(t){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zm(t)}function hv(t,e,r){return e=ape(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ape(t){var e=spe(t,"string");return Zm(e)=="symbol"?e:e+""}function spe(t,e){if(Zm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dp="recharts-tooltip-wrapper",ope={visibility:"hidden"};function lpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return tr(Dp,hv(hv(hv(hv({},"".concat(Dp,"-right"),lt(r)&&e&&lt(e.x)&&r>=e.x),"".concat(Dp,"-left"),lt(r)&&e&&lt(e.x)&&r<e.x),"".concat(Dp,"-bottom"),lt(n)&&e&&lt(e.y)&&n>=e.y),"".concat(Dp,"-top"),lt(n)&&e&&lt(e.y)&&n<e.y))}function iL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,l=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(a&&lt(a[n]))return a[n];var p=r[n]-l-i,m=r[n]+i;if(e[n])return s[n]?p:m;if(s[n]){var y=p,b=d[n];return y<b?Math.max(m,d[n]):Math.max(p,d[n])}var T=m+l,S=d[n]+h;return T>S?Math.max(p,d[n]):Math.max(m,d[n])}function cpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function upe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,l=t.useTranslate3d,d=t.viewBox,h,p,m;return s.height>0&&s.width>0&&r?(p=iL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),m=iL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=cpe({translateX:p,translateY:m,useTranslate3d:l})):h=ope,{cssProperties:h,cssClasses:lpe({translateX:p,translateY:m,coordinate:r})}}function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function aL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(r),!0).forEach(function(n){LA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XG(n.key),n)}}function fpe(t,e,r){return e&&hpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ppe(t,e,r){return e=Ub(e),mpe(t,WG()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function mpe(t,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gpe(t)}function gpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WG=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function ype(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DA(t,e)}function DA(t,e){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},DA(t,e)}function LA(t,e,r){return e=XG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XG(t){var e=vpe(t,"string");return qh(e)=="symbol"?e:e+""}function vpe(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oL=1,bpe=(function(t){function e(){var r;dpe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=ppe(this,e,[].concat(i)),LA(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),LA(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&l!==void 0?l:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return ype(e,t),fpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>oL||Math.abs(n.height-this.state.lastBoundingBox.height)>oL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,d=i.animationEasing,h=i.children,p=i.coordinate,m=i.hasPayload,y=i.isAnimationActive,b=i.offset,T=i.position,S=i.reverseDirection,w=i.useTranslate3d,N=i.viewBox,C=i.wrapperStyle,k=upe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:b,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:N}),$=k.cssClasses,I=k.cssProperties,L=sL(sL({transition:y&&a?"transform ".concat(l,"ms ").concat(d):void 0},I),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&m?"visible":"hidden",position:"absolute",top:0,left:0},C);return te.createElement("div",{tabIndex:-1,className:$,style:L,ref:function(A){n.wrapperNode=A}},h)}}])})(M.PureComponent),xpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},n0={isSsr:xpe()};function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function lL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lL(Object(r),!0).forEach(function(n){hN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YG(n.key),n)}}function Spe(t,e,r){return e&&_pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tpe(t,e,r){return e=zb(e),Ape(t,QG()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function Ape(t,e){if(e&&(Hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Epe(t)}function Epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QG=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function Npe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BA(t,e)}function BA(t,e){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},BA(t,e)}function hN(t,e,r){return e=YG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YG(t){var e=jpe(t,"string");return Hh(e)=="symbol"?e:e+""}function jpe(t,e){if(Hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function kpe(t){return t.dataKey}function Cpe(t,e){return te.isValidElement(t)?te.cloneElement(t,e):typeof t=="function"?te.createElement(t,e):te.createElement(ipe,e)}var xo=(function(t){function e(){return wpe(this,e),Tpe(this,e,arguments)}return Npe(e,t),Spe(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,d=i.animationEasing,h=i.content,p=i.coordinate,m=i.filterNull,y=i.isAnimationActive,b=i.offset,T=i.payload,S=i.payloadUniqBy,w=i.position,N=i.reverseDirection,C=i.useTranslate3d,k=i.viewBox,$=i.wrapperStyle,I=T??[];m&&I.length&&(I=$G(T.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),S,kpe));var L=I.length>0;return te.createElement(bpe,{allowEscapeViewBox:s,animationDuration:l,animationEasing:d,isAnimationActive:y,active:a,coordinate:p,hasPayload:L,offset:b,position:w,reverseDirection:N,useTranslate3d:C,viewBox:k,wrapperStyle:$},Cpe(h,cL(cL({},this.props),{},{payload:I})))}}])})(M.PureComponent);hN(xo,"displayName","Tooltip");hN(xo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!n0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var aS,uL;function Ope(){if(uL)return aS;uL=1;var t=$o(),e=function(){return t.Date.now()};return aS=e,aS}var sS,dL;function Ipe(){if(dL)return sS;dL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return sS=e,sS}var oS,hL;function Rpe(){if(hL)return oS;hL=1;var t=Ipe(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return oS=r,oS}var lS,fL;function ZG(){if(fL)return lS;fL=1;var t=Rpe(),e=Tu(),r=Af(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=a.test(h);return m||s.test(h)?l(h.slice(2),m?2:8):i.test(h)?n:+h}return lS=d,lS}var cS,pL;function Mpe(){if(pL)return cS;pL=1;var t=Tu(),e=Ope(),r=ZG(),n="Expected a function",i=Math.max,a=Math.min;function s(l,d,h){var p,m,y,b,T,S,w=0,N=!1,C=!1,k=!0;if(typeof l!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(N=!!h.leading,C="maxWait"in h,y=C?i(r(h.maxWait)||0,d):y,k="trailing"in h?!!h.trailing:k);function $(D){var Q=p,Z=m;return p=m=void 0,w=D,b=l.apply(Z,Q),b}function I(D){return w=D,T=setTimeout(A,d),N?$(D):b}function L(D){var Q=D-S,Z=D-w,W=d-Q;return C?a(W,y-Z):W}function E(D){var Q=D-S,Z=D-w;return S===void 0||Q>=d||Q<0||C&&Z>=y}function A(){var D=e();if(E(D))return R(D);T=setTimeout(A,L(D))}function R(D){return T=void 0,k&&p?$(D):(p=m=void 0,b)}function F(){T!==void 0&&clearTimeout(T),w=0,p=S=m=T=void 0}function P(){return T===void 0?b:R(e())}function B(){var D=e(),Q=E(D);if(p=arguments,m=this,S=D,Q){if(T===void 0)return I(S);if(C)return clearTimeout(T),T=setTimeout(A,d),$(S)}return T===void 0&&(T=setTimeout(A,d)),b}return B.cancel=F,B.flush=P,B}return cS=s,cS}var uS,mL;function Ppe(){if(mL)return uS;mL=1;var t=Mpe(),e=Tu(),r="Expected a function";function n(i,a,s){var l=!0,d=!0;if(typeof i!="function")throw new TypeError(r);return e(s)&&(l="leading"in s?!!s.leading:l,d="trailing"in s?!!s.trailing:d),t(i,a,{leading:l,maxWait:a,trailing:d})}return uS=n,uS}var Dpe=Ppe();const JG=Ir(Dpe);function Jm(t){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jm(t)}function gL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gL(Object(r),!0).forEach(function(n){Lpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Lpe(t,e,r){return e=Bpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bpe(t){var e=Upe(t,"string");return Jm(e)=="symbol"?e:e+""}function Upe(t,e){if(Jm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zpe(t,e){return qpe(t)||Fpe(t,e)||Vpe(t,e)||$pe()}function $pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vpe(t,e){if(t){if(typeof t=="string")return yL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yL(t,e)}}function yL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fpe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function qpe(t){if(Array.isArray(t))return t}var eK=M.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,s=a===void 0?"100%":a,l=t.height,d=l===void 0?"100%":l,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,b=t.children,T=t.debounce,S=T===void 0?0:T,w=t.id,N=t.className,C=t.onResize,k=t.style,$=k===void 0?{}:k,I=M.useRef(null),L=M.useRef();L.current=C,M.useImperativeHandle(e,function(){return Object.defineProperty(I.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),I.current},configurable:!0})});var E=M.useState({containerWidth:i.width,containerHeight:i.height}),A=zpe(E,2),R=A[0],F=A[1],P=M.useCallback(function(D,Q){F(function(Z){var W=Math.round(D),J=Math.round(Q);return Z.containerWidth===W&&Z.containerHeight===J?Z:{containerWidth:W,containerHeight:J}})},[]);M.useEffect(function(){var D=function(ge){var ce,X=ge[0].contentRect,re=X.width,de=X.height;P(re,de),(ce=L.current)===null||ce===void 0||ce.call(L,re,de)};S>0&&(D=JG(D,S,{trailing:!0,leading:!1}));var Q=new ResizeObserver(D),Z=I.current.getBoundingClientRect(),W=Z.width,J=Z.height;return P(W,J),Q.observe(I.current),function(){Q.disconnect()}},[P,S]);var B=M.useMemo(function(){var D=R.containerWidth,Q=R.containerHeight;if(D<0||Q<0)return null;Rl(vd(s)||vd(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Rl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=vd(s)?D:s,W=vd(d)?Q:d;r&&r>0&&(Z?W=Z/r:W&&(Z=W*r),y&&W>y&&(W=y)),Rl(Z>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,W,s,d,p,m,r);var J=!Array.isArray(b)&&Il(b.type).endsWith("Chart");return te.Children.map(b,function(Y){return te.isValidElement(Y)?M.cloneElement(Y,fv({width:Z,height:W},J?{style:fv({height:"100%",width:"100%",maxHeight:W,maxWidth:Z},Y.props.style)}:{})):Y})},[r,b,d,y,m,p,R,s]);return te.createElement("div",{id:w?"".concat(w):void 0,className:tr("recharts-responsive-container",N),style:fv(fv({},$),{},{width:s,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:I},B)}),fN=function(e){return null};fN.displayName="Cell";function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}function vL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function UA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(r),!0).forEach(function(n){Hpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hpe(t,e,r){return e=Gpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gpe(t){var e=Kpe(t,"string");return eg(e)=="symbol"?e:e+""}function Kpe(t,e){if(eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X0={widthCache:{},cacheCount:0},Wpe=2e3,Xpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bL="recharts_measurement_span";function Qpe(t){var e=UA({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var pm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||n0.isSsr)return{width:0,height:0};var n=Qpe(r),i=JSON.stringify({text:e,copyStyle:n});if(X0.widthCache[i])return X0.widthCache[i];try{var a=document.getElementById(bL);a||(a=document.createElement("span"),a.setAttribute("id",bL),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=UA(UA({},Xpe),n);Object.assign(a.style,s),a.textContent="".concat(e);var l=a.getBoundingClientRect(),d={width:l.width,height:l.height};return X0.widthCache[i]=d,++X0.cacheCount>Wpe&&(X0.cacheCount=0,X0.widthCache={}),d}catch{return{width:0,height:0}}},Ype=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function $b(t,e){return tme(t)||eme(t,e)||Jpe(t,e)||Zpe()}function Zpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jpe(t,e){if(t){if(typeof t=="string")return xL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xL(t,e)}}function xL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function eme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function tme(t){if(Array.isArray(t))return t}function rme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ime(n.key),n)}}function nme(t,e,r){return e&&wL(t.prototype,e),r&&wL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ime(t){var e=ame(t,"string");return tg(e)=="symbol"?e:e+""}function ame(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _L=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ome=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lme=Object.keys(tK),sh="NaN";function cme(t,e){return t*tK[e]}var pv=(function(){function t(e,r){rme(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!sme.test(r)&&(this.num=NaN,this.unit=""),lme.includes(r)&&(this.num=cme(e,r),this.unit="px")}return nme(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=ome.exec(r))!==null&&n!==void 0?n:[],a=$b(i,3),s=a[1],l=a[2];return new t(parseFloat(s),l??"")}}])})();function rK(t){if(t.includes(sh))return sh;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=_L.exec(e))!==null&&r!==void 0?r:[],i=$b(n,4),a=i[1],s=i[2],l=i[3],d=pv.parse(a??""),h=pv.parse(l??""),p=s==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return sh;e=e.replace(_L,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=SL.exec(e))!==null&&m!==void 0?m:[],b=$b(y,4),T=b[1],S=b[2],w=b[3],N=pv.parse(T??""),C=pv.parse(w??""),k=S==="+"?N.add(C):N.subtract(C);if(k.isNaN())return sh;e=e.replace(SL,k.toString())}return e}var TL=/\(([^()]*)\)/;function ume(t){for(var e=t;e.includes("(");){var r=TL.exec(e),n=$b(r,2),i=n[1];e=e.replace(TL,rK(i))}return e}function dme(t){var e=t.replace(/\s+/g,"");return e=ume(e),e=rK(e),e}function hme(t){try{return dme(t)}catch{return sh}}function dS(t){var e=hme(t.slice(5,-1));return e===sh?"":e}var fme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],pme=["dx","dy","angle","className","breakAll"];function zA(){return zA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zA.apply(this,arguments)}function AL(t,e){if(t==null)return{};var r=mme(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function EL(t,e){return bme(t)||vme(t,e)||yme(t,e)||gme()}function gme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(t,e){if(t){if(typeof t=="string")return NL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NL(t,e)}}function NL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function bme(t){if(Array.isArray(t))return t}var nK=/[ \f\n\r\t\v\u2028\u2029]+/,iK=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];Qt(r)||(n?a=r.toString().split(""):a=r.toString().split(nK));var s=a.map(function(d){return{word:d,width:pm(d,i).width}}),l=n?0:pm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},xme=function(e,r,n,i,a){var s=e.maxLines,l=e.children,d=e.style,h=e.breakAll,p=lt(s),m=l,y=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(W,J){var Y=J.word,ge=J.width,ce=W[W.length-1];if(ce&&(i==null||a||ce.width+ge+n<Number(i)))ce.words.push(Y),ce.width+=ge+n;else{var X={words:[Y],width:ge};W.push(X)}return W},[])},b=y(r),T=function(Z){return Z.reduce(function(W,J){return W.width>J.width?W:J})};if(!p)return b;for(var S="",w=function(Z){var W=m.slice(0,Z),J=iK({breakAll:h,style:d,children:W+S}).wordsWithComputedWidth,Y=y(J),ge=Y.length>s||T(Y).width>Number(i);return[ge,Y]},N=0,C=m.length-1,k=0,$;N<=C&&k<=m.length-1;){var I=Math.floor((N+C)/2),L=I-1,E=w(L),A=EL(E,2),R=A[0],F=A[1],P=w(I),B=EL(P,1),D=B[0];if(!R&&!D&&(N=I+1),R&&D&&(C=I-1),!R&&D){$=F;break}k++}return $||b},jL=function(e){var r=Qt(e)?[]:e.toString().split(nK);return[{words:r}]},wme=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,l=e.maxLines;if((r||n)&&!n0.isSsr){var d,h,p=iK({breakAll:s,children:i,style:a});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return jL(i);return xme({breakAll:s,children:i,maxLines:l,style:a},d,h,r,n)}return jL(i)},kL="#808080",Gh=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.lineHeight,l=s===void 0?"1em":s,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,b=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,N=w===void 0?kL:w,C=AL(e,fme),k=M.useMemo(function(){return wme({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:m,style:C.style,width:C.width})},[C.breakAll,C.children,C.maxLines,m,C.style,C.width]),$=C.dx,I=C.dy,L=C.angle,E=C.className,A=C.breakAll,R=AL(C,pme);if(!yi(n)||!yi(a))return null;var F=n+(lt($)?$:0),P=a+(lt(I)?I:0),B;switch(S){case"start":B=dS("calc(".concat(h,")"));break;case"middle":B=dS("calc(".concat((k.length-1)/2," * -").concat(l," + (").concat(h," / 2))"));break;default:B=dS("calc(".concat(k.length-1," * -").concat(l,")"));break}var D=[];if(m){var Q=k[0].width,Z=C.width;D.push("scale(".concat((lt(Z)?Z/Q:1)/Q,")"))}return L&&D.push("rotate(".concat(L,", ").concat(F,", ").concat(P,")")),D.length&&(R.transform=D.join(" ")),te.createElement("text",zA({},Ct(R,!0),{x:F,y:P,className:tr("recharts-text",E),textAnchor:b,fill:N.includes("url")?kL:N}),k.map(function(W,J){var Y=W.words.join(A?"":" ");return te.createElement("tspan",{x:F,dy:J===0?B:l,key:"".concat(Y,"-").concat(J)},Y)}))};function ou(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _me(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pN(t){let e,r,n;t.length!==2?(e=ou,r=(l,d)=>ou(t(l),d),n=(l,d)=>t(l)-d):(e=t===ou||t===_me?t:Sme,r=t,n=t);function i(l,d,h=0,p=l.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(l[m],d)<0?h=m+1:p=m}while(h<p)}return h}function a(l,d,h=0,p=l.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(l[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function s(l,d,h=0,p=l.length){const m=i(l,d,h,p-1);return m>h&&n(l[m-1],d)>-n(l[m],d)?m-1:m}return{left:i,center:s,right:a}}function Sme(){return 0}function aK(t){return t===null?NaN:+t}function*Tme(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Ame=pN(ou),l1=Ame.right;pN(aK).center;class CL extends Map{constructor(e,r=jme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(OL(this,e))}has(e){return super.has(OL(this,e))}set(e,r){return super.set(Eme(this,e),r)}delete(e){return super.delete(Nme(this,e))}}function OL({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Eme({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Nme({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function jme(t){return t!==null&&typeof t=="object"?t.valueOf():t}function kme(t=ou){if(t===ou)return sK;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function sK(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Cme=Math.sqrt(50),Ome=Math.sqrt(10),Ime=Math.sqrt(2);function Vb(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Cme?10:a>=Ome?5:a>=Ime?2:1;let l,d,h;return i<0?(h=Math.pow(10,-i)/s,l=Math.round(t*h),d=Math.round(e*h),l/h<t&&++l,d/h>e&&--d,h=-h):(h=Math.pow(10,i)*s,l=Math.round(t/h),d=Math.round(e/h),l*h<t&&++l,d*h>e&&--d),d<l&&.5<=r&&r<2?Vb(t,e,r*2):[l,d,h]}function $A(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?Vb(e,t,r):Vb(t,e,r);if(!(a>=i))return[];const l=a-i+1,d=new Array(l);if(n)if(s<0)for(let h=0;h<l;++h)d[h]=(a-h)/-s;else for(let h=0;h<l;++h)d[h]=(a-h)*s;else if(s<0)for(let h=0;h<l;++h)d[h]=(i+h)/-s;else for(let h=0;h<l;++h)d[h]=(i+h)*s;return d}function VA(t,e,r){return e=+e,t=+t,r=+r,Vb(t,e,r)[2]}function FA(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?VA(e,t,r):VA(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function IL(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function RL(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function oK(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?sK:kme(i);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),b=Math.max(r,Math.floor(e-h*m/d+y)),T=Math.min(n,Math.floor(e+(d-h)*m/d+y));oK(t,e,b,T,i)}const a=t[e];let s=r,l=n;for(Lp(t,r,e),i(t[n],a)>0&&Lp(t,r,n);s<l;){for(Lp(t,s,l),++s,--l;i(t[s],a)<0;)++s;for(;i(t[l],a)>0;)--l}i(t[r],a)===0?Lp(t,r,l):(++l,Lp(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function Lp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function Rme(t,e,r){if(t=Float64Array.from(Tme(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return RL(t);if(e>=1)return IL(t);var n,i=(n-1)*e,a=Math.floor(i),s=IL(oK(t,a).subarray(0,a+1)),l=RL(t.subarray(a+1));return s+(l-s)*(i-a)}}function Mme(t,e,r=aK){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return s+(l-s)*(i-a)}}function Pme(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Us(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function tc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qA=Symbol("implicit");function mN(){var t=new CL,e=[],r=[],n=qA;function i(a){let s=t.get(a);if(s===void 0){if(n!==qA)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new CL;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return mN(e,r).unknown(n)},Us.apply(i,arguments),i}function rg(){var t=mN().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,l=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,b=i<n,T=b?i:n,S=b?n:i;a=(S-T)/Math.max(1,y-d+h*2),l&&(a=Math.floor(a)),T+=(S-T-a*(y-d))*p,s=a*(1-d),l&&(T=Math.round(T),s=Math.round(s));var w=Pme(y).map(function(N){return T+a*N});return r(b?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,i]=y,n=+n,i=+i,m()):[n,i]},t.rangeRound=function(y){return[n,i]=y,n=+n,i=+i,l=!0,m()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(y){return arguments.length?(l=!!y,m()):l},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return rg(e(),[n,i]).round(l).paddingInner(d).paddingOuter(h).align(p)},Us.apply(m(),arguments)}function lK(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return lK(e())},t}function mm(){return lK(rg.apply(null,arguments).paddingInner(1))}function gN(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function cK(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function c1(){}var ng=.7,Fb=1/ng,bh="\\s*([+-]?\\d+)\\s*",ig="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dme=/^#([0-9a-f]{3,8})$/,Lme=new RegExp(`^rgb\\(${bh},${bh},${bh}\\)$`),Bme=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),Ume=new RegExp(`^rgba\\(${bh},${bh},${bh},${ig}\\)$`),zme=new RegExp(`^rgba\\(${ko},${ko},${ko},${ig}\\)$`),$me=new RegExp(`^hsl\\(${ig},${ko},${ko}\\)$`),Vme=new RegExp(`^hsla\\(${ig},${ko},${ko},${ig}\\)$`),ML={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gN(c1,ag,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:PL,formatHex:PL,formatHex8:Fme,formatHsl:qme,formatRgb:DL,toString:DL});function PL(){return this.rgb().formatHex()}function Fme(){return this.rgb().formatHex8()}function qme(){return uK(this).formatHsl()}function DL(){return this.rgb().formatRgb()}function ag(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Dme.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?LL(e):r===3?new Ua(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?mv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?mv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Lme.exec(t))?new Ua(e[1],e[2],e[3],1):(e=Bme.exec(t))?new Ua(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ume.exec(t))?mv(e[1],e[2],e[3],e[4]):(e=zme.exec(t))?mv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$me.exec(t))?zL(e[1],e[2]/100,e[3]/100,1):(e=Vme.exec(t))?zL(e[1],e[2]/100,e[3]/100,e[4]):ML.hasOwnProperty(t)?LL(ML[t]):t==="transparent"?new Ua(NaN,NaN,NaN,0):null}function LL(t){return new Ua(t>>16&255,t>>8&255,t&255,1)}function mv(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ua(t,e,r,n)}function Hme(t){return t instanceof c1||(t=ag(t)),t?(t=t.rgb(),new Ua(t.r,t.g,t.b,t.opacity)):new Ua}function HA(t,e,r,n){return arguments.length===1?Hme(t):new Ua(t,e,r,n??1)}function Ua(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}gN(Ua,HA,cK(c1,{brighter(t){return t=t==null?Fb:Math.pow(Fb,t),new Ua(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ng:Math.pow(ng,t),new Ua(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ua(kd(this.r),kd(this.g),kd(this.b),qb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BL,formatHex:BL,formatHex8:Gme,formatRgb:UL,toString:UL}));function BL(){return`#${bd(this.r)}${bd(this.g)}${bd(this.b)}`}function Gme(){return`#${bd(this.r)}${bd(this.g)}${bd(this.b)}${bd((isNaN(this.opacity)?1:this.opacity)*255)}`}function UL(){const t=qb(this.opacity);return`${t===1?"rgb(":"rgba("}${kd(this.r)}, ${kd(this.g)}, ${kd(this.b)}${t===1?")":`, ${t})`}`}function qb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bd(t){return t=kd(t),(t<16?"0":"")+t.toString(16)}function zL(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new eo(t,e,r,n)}function uK(t){if(t instanceof eo)return new eo(t.h,t.s,t.l,t.opacity);if(t instanceof c1||(t=ag(t)),!t)return new eo;if(t instanceof eo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,l=a-i,d=(a+i)/2;return l?(e===a?s=(r-n)/l+(r<n)*6:r===a?s=(n-e)/l+2:s=(e-r)/l+4,l/=d<.5?a+i:2-a-i,s*=60):l=d>0&&d<1?0:s,new eo(s,l,d,t.opacity)}function Kme(t,e,r,n){return arguments.length===1?uK(t):new eo(t,e,r,n??1)}function eo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}gN(eo,Kme,cK(c1,{brighter(t){return t=t==null?Fb:Math.pow(Fb,t),new eo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ng:Math.pow(ng,t),new eo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Ua(hS(t>=240?t-240:t+120,i,n),hS(t,i,n),hS(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new eo($L(this.h),gv(this.s),gv(this.l),qb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qb(this.opacity);return`${t===1?"hsl(":"hsla("}${$L(this.h)}, ${gv(this.s)*100}%, ${gv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $L(t){return t=(t||0)%360,t<0?t+360:t}function gv(t){return Math.max(0,Math.min(1,t||0))}function hS(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const yN=t=>()=>t;function Wme(t,e){return function(r){return t+r*e}}function Xme(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Qme(t){return(t=+t)==1?dK:function(e,r){return r-e?Xme(e,r,t):yN(isNaN(e)?r:e)}}function dK(t,e){var r=e-t;return r?Wme(t,r):yN(isNaN(t)?e:t)}const VL=(function t(e){var r=Qme(e);function n(i,a){var s=r((i=HA(i)).r,(a=HA(a)).r),l=r(i.g,a.g),d=r(i.b,a.b),h=dK(i.opacity,a.opacity);return function(p){return i.r=s(p),i.g=l(p),i.b=d(p),i.opacity=h(p),i+""}}return n.gamma=t,n})(1);function Yme(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function Zme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Jme(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=jf(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(l){for(s=0;s<n;++s)a[s]=i[s](l);return a}}function ege(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Hb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function tge(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=jf(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var GA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fS=new RegExp(GA.source,"g");function rge(t){return function(){return t}}function nge(t){return function(e){return t(e)+""}}function ige(t,e){var r=GA.lastIndex=fS.lastIndex=0,n,i,a,s=-1,l=[],d=[];for(t=t+"",e=e+"";(n=GA.exec(t))&&(i=fS.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),l[s]?l[s]+=a:l[++s]=a),(n=n[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,d.push({i:s,x:Hb(n,i)})),r=fS.lastIndex;return r<e.length&&(a=e.slice(r),l[s]?l[s]+=a:l[++s]=a),l.length<2?d[0]?nge(d[0].x):rge(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)l[(m=d[p]).i]=m.x(h);return l.join("")})}function jf(t,e){var r=typeof e,n;return e==null||r==="boolean"?yN(e):(r==="number"?Hb:r==="string"?(n=ag(e))?(e=n,VL):ige:e instanceof ag?VL:e instanceof Date?ege:Zme(e)?Yme:Array.isArray(e)?Jme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tge:Hb)(t,e)}function vN(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function age(t,e){e===void 0&&(e=t,t=jf);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[l](s-l)}}function sge(t){return function(){return t}}function Gb(t){return+t}var FL=[0,1];function ma(t){return t}function KA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:sge(isNaN(e)?NaN:.5)}function oge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function lge(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=KA(i,n),a=r(s,a)):(n=KA(n,i),a=r(a,s)),function(l){return a(n(l))}}function cge(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=KA(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(l){var d=l1(t,l,1,n)-1;return a[d](i[d](l))}}function u1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function D2(){var t=FL,e=FL,r=jf,n,i,a,s=ma,l,d,h;function p(){var y=Math.min(t.length,e.length);return s!==ma&&(s=oge(t[0],t[y-1])),l=y>2?cge:lge,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?a:(d||(d=l(t.map(n),e,r)))(n(s(y)))}return m.invert=function(y){return s(i((h||(h=l(e,t.map(n),Hb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,Gb),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=vN,p()},m.clamp=function(y){return arguments.length?(s=y?!0:ma,p()):s!==ma},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(a=y,m):a},function(y,b){return n=y,i=b,p()}}function bN(){return D2()(ma,ma)}function uge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Kb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Kh(t){return t=Kb(Math.abs(t)),t?t[1]:NaN}function dge(t,e){return function(r,n){for(var i=r.length,a=[],s=0,l=t[0],d=0;i>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),a.push(r.substring(i-=l,i+l)),!((d+=l+1)>n));)l=t[s=(s+1)%t.length];return a.reverse().join(e)}}function hge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var fge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sg(t){if(!(e=fge.exec(t)))throw new Error("invalid format: "+t);var e;return new xN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}sg.prototype=xN.prototype;function xN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}xN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function pge(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var Wb;function mge(t,e){var r=Kb(t,e);if(!r)return Wb=void 0,t.toPrecision(e);var n=r[0],i=r[1],a=i-(Wb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Kb(t,Math.max(0,e+a-1))[0]}function qL(t,e){var r=Kb(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const HL={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:uge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>qL(t*100,e),r:qL,s:mge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function GL(t){return t}var KL=Array.prototype.map,WL=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gge(t){var e=t.grouping===void 0||t.thousands===void 0?GL:dge(KL.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?GL:hge(KL.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=sg(m);var b=m.fill,T=m.align,S=m.sign,w=m.symbol,N=m.zero,C=m.width,k=m.comma,$=m.precision,I=m.trim,L=m.type;L==="n"?(k=!0,L="g"):HL[L]||($===void 0&&($=12),I=!0,L="g"),(N||b==="0"&&T==="=")&&(N=!0,b="0",T="=");var E=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(L)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),R=HL[L],F=/[defgprs%]/.test(L);$=$===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function P(B){var D=E,Q=A,Z,W,J;if(L==="c")Q=R(B)+Q,B="";else{B=+B;var Y=B<0||1/B<0;if(B=isNaN(B)?d:R(Math.abs(B),$),I&&(B=pge(B)),Y&&+B==0&&S!=="+"&&(Y=!1),D=(Y?S==="("?S:l:S==="-"||S==="("?"":S)+D,Q=(L==="s"&&!isNaN(B)&&Wb!==void 0?WL[8+Wb/3]:"")+Q+(Y&&S==="("?")":""),F){for(Z=-1,W=B.length;++Z<W;)if(J=B.charCodeAt(Z),48>J||J>57){Q=(J===46?i+B.slice(Z+1):B.slice(Z))+Q,B=B.slice(0,Z);break}}}k&&!N&&(B=e(B,1/0));var ge=D.length+B.length+Q.length,ce=ge<C?new Array(C-ge+1).join(b):"";switch(k&&N&&(B=e(ce+B,ce.length?C-Q.length:1/0),ce=""),T){case"<":B=D+B+Q+ce;break;case"=":B=D+ce+B+Q;break;case"^":B=ce.slice(0,ge=ce.length>>1)+D+B+Q+ce.slice(ge);break;default:B=ce+D+B+Q;break}return a(B)}return P.toString=function(){return m+""},P}function p(m,y){var b=Math.max(-8,Math.min(8,Math.floor(Kh(y)/3)))*3,T=Math.pow(10,-b),S=h((m=sg(m),m.type="f",m),{suffix:WL[8+b/3]});return function(w){return S(T*w)}}return{format:h,formatPrefix:p}}var yv,wN,hK;yge({thousands:",",grouping:[3],currency:["$",""]});function yge(t){return yv=gge(t),wN=yv.format,hK=yv.formatPrefix,yv}function vge(t){return Math.max(0,-Kh(Math.abs(t)))}function bge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kh(e)/3)))*3-Kh(Math.abs(t)))}function xge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Kh(e)-Kh(t))+1}function fK(t,e,r,n){var i=FA(t,e,r),a;switch(n=sg(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=bge(i,s))&&(n.precision=a),hK(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=xge(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=vge(i))&&(n.precision=a-(n.type==="%")*2);break}}return wN(n)}function Au(t){var e=t.domain;return t.ticks=function(r){var n=e();return $A(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return fK(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],l=n[a],d,h,p=10;for(l<s&&(h=s,s=l,l=h,h=i,i=a,a=h);p-- >0;){if(h=VA(s,l,r),h===d)return n[i]=s,n[a]=l,e(n);if(h>0)s=Math.floor(s/h)*h,l=Math.ceil(l/h)*h;else if(h<0)s=Math.ceil(s*h)/h,l=Math.floor(l*h)/h;else break;d=h}return t},t}function Xb(){var t=bN();return t.copy=function(){return u1(t,Xb())},Us.apply(t,arguments),Au(t)}function pK(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Gb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return pK(t).unknown(e)},t=arguments.length?Array.from(t,Gb):[0,1],Au(r)}function mK(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function XL(t){return Math.log(t)}function QL(t){return Math.exp(t)}function wge(t){return-Math.log(-t)}function _ge(t){return-Math.exp(-t)}function Sge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Tge(t){return t===10?Sge:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Age(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function YL(t){return(e,r)=>-t(-e,r)}function _N(t){const e=t(XL,QL),r=e.domain;let n=10,i,a;function s(){return i=Age(n),a=Tge(n),r()[0]<0?(i=YL(i),a=YL(a),t(wge,_ge)):t(XL,QL),e}return e.base=function(l){return arguments.length?(n=+l,s()):n},e.domain=function(l){return arguments.length?(r(l),s()):r()},e.ticks=l=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=i(h),b=i(p),T,S;const w=l==null?10:+l;let N=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),h>0){for(;y<=b;++y)for(T=1;T<n;++T)if(S=y<0?T/a(-y):T*a(y),!(S<h)){if(S>p)break;N.push(S)}}else for(;y<=b;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/a(-y):T*a(y),!(S<h)){if(S>p)break;N.push(S)}N.length*2<w&&(N=$A(h,p,w))}else N=$A(y,b,Math.min(b-y,w)).map(a);return m?N.reverse():N},e.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=sg(d)).precision==null&&(d.trim=!0),d=wN(d)),l===1/0)return d;const h=Math.max(1,n*l/e.ticks().length);return p=>{let m=p/a(Math.round(i(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(mK(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function gK(){const t=_N(D2()).domain([1,10]);return t.copy=()=>u1(t,gK()).base(t.base()),Us.apply(t,arguments),t}function ZL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function JL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function SN(t){var e=1,r=t(ZL(e),JL(e));return r.constant=function(n){return arguments.length?t(ZL(e=+n),JL(e)):e},Au(r)}function yK(){var t=SN(D2());return t.copy=function(){return u1(t,yK()).constant(t.constant())},Us.apply(t,arguments)}function eB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Ege(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Nge(t){return t<0?-t*t:t*t}function TN(t){var e=t(ma,ma),r=1;function n(){return r===1?t(ma,ma):r===.5?t(Ege,Nge):t(eB(r),eB(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},Au(e)}function AN(){var t=TN(D2());return t.copy=function(){return u1(t,AN()).exponent(t.exponent())},Us.apply(t,arguments),t}function jge(){return AN.apply(null,arguments).exponent(.5)}function tB(t){return Math.sign(t)*t*t}function kge(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function vK(){var t=bN(),e=[0,1],r=!1,n;function i(a){var s=kge(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(tB(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,Gb)).map(tB)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vK(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Us.apply(i,arguments),Au(i)}function bK(){var t=[],e=[],r=[],n;function i(){var s=0,l=Math.max(1,e.length);for(r=new Array(l-1);++s<l;)r[s-1]=Mme(t,s/l);return a}function a(s){return s==null||isNaN(s=+s)?n:e[l1(r,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ou),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return bK().domain(t).range(e).unknown(n)},Us.apply(a,arguments)}function xK(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(d){return d!=null&&d<=d?i[l1(n,d,0,r)]:a}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,l()):[t,e]},s.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,l()):i.slice()},s.invertExtent=function(d){var h=i.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},s.unknown=function(d){return arguments.length&&(a=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return xK().domain([t,e]).range(i).unknown(a)},Us.apply(Au(s),arguments)}function wK(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[l1(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return wK().domain(t).range(e).unknown(r)},Us.apply(i,arguments)}const pS=new Date,mS=new Date;function wi(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const d=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return d;let h;do d.push(h=new Date(+a)),e(a,l),t(a);while(h<a&&a<s);return d},i.filter=a=>wi(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(pS.setTime(+a),mS.setTime(+s),t(pS),t(mS),Math.floor(r(pS,mS))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Qb=wi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Qb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?wi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Qb);Qb.range;const El=1e3,ks=El*60,Nl=ks*60,Hl=Nl*24,EN=Hl*7,rB=Hl*30,gS=Hl*365,xd=wi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*El)},(t,e)=>(e-t)/El,t=>t.getUTCSeconds());xd.range;const NN=wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*El)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getMinutes());NN.range;const jN=wi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getUTCMinutes());jN.range;const kN=wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*El-t.getMinutes()*ks)},(t,e)=>{t.setTime(+t+e*Nl)},(t,e)=>(e-t)/Nl,t=>t.getHours());kN.range;const CN=wi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Nl)},(t,e)=>(e-t)/Nl,t=>t.getUTCHours());CN.range;const d1=wi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ks)/Hl,t=>t.getDate()-1);d1.range;const L2=wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hl,t=>t.getUTCDate()-1);L2.range;const _K=wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Hl,t=>Math.floor(t/Hl));_K.range;function i0(t){return wi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*ks)/EN)}const B2=i0(0),Yb=i0(1),Cge=i0(2),Oge=i0(3),Wh=i0(4),Ige=i0(5),Rge=i0(6);B2.range;Yb.range;Cge.range;Oge.range;Wh.range;Ige.range;Rge.range;function a0(t){return wi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/EN)}const U2=a0(0),Zb=a0(1),Mge=a0(2),Pge=a0(3),Xh=a0(4),Dge=a0(5),Lge=a0(6);U2.range;Zb.range;Mge.range;Pge.range;Xh.range;Dge.range;Lge.range;const ON=wi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ON.range;const IN=wi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());IN.range;const Gl=wi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Gl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Gl.range;const Kl=wi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Kl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:wi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Kl.range;function SK(t,e,r,n,i,a){const s=[[xd,1,El],[xd,5,5*El],[xd,15,15*El],[xd,30,30*El],[a,1,ks],[a,5,5*ks],[a,15,15*ks],[a,30,30*ks],[i,1,Nl],[i,3,3*Nl],[i,6,6*Nl],[i,12,12*Nl],[n,1,Hl],[n,2,2*Hl],[r,1,EN],[e,1,rB],[e,3,3*rB],[t,1,gS]];function l(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const b=m&&typeof m.range=="function"?m:d(h,p,m),T=b?b.range(h,+p+1):[];return y?T.reverse():T}function d(h,p,m){const y=Math.abs(p-h)/m,b=pN(([,,w])=>w).right(s,y);if(b===s.length)return t.every(FA(h/gS,p/gS,m));if(b===0)return Qb.every(Math.max(FA(h,p,m),1));const[T,S]=s[y/s[b-1][2]<s[b][2]/y?b-1:b];return T.every(S)}return[l,d]}const[Bge,Uge]=SK(Kl,IN,U2,_K,CN,jN),[zge,$ge]=SK(Gl,ON,B2,d1,kN,NN);function yS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Vge(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,l=t.months,d=t.shortMonths,h=Up(i),p=zp(i),m=Up(a),y=zp(a),b=Up(s),T=zp(s),S=Up(l),w=zp(l),N=Up(d),C=zp(d),k={a:J,A:Y,b:ge,B:ce,c:null,d:lB,e:lB,f:d1e,g:w1e,G:S1e,H:l1e,I:c1e,j:u1e,L:TK,m:h1e,M:f1e,p:X,q:re,Q:dB,s:hB,S:p1e,u:m1e,U:g1e,V:y1e,w:v1e,W:b1e,x:null,X:null,y:x1e,Y:_1e,Z:T1e,"%":uB},$={a:de,A:oe,b:ae,B:pe,c:null,d:cB,e:cB,f:j1e,g:B1e,G:z1e,H:A1e,I:E1e,j:N1e,L:EK,m:k1e,M:C1e,p:ve,q:Qe,Q:dB,s:hB,S:O1e,u:I1e,U:R1e,V:M1e,w:P1e,W:D1e,x:null,X:null,y:L1e,Y:U1e,Z:$1e,"%":uB},I={a:F,A:P,b:B,B:D,c:Q,d:sB,e:sB,f:i1e,g:aB,G:iB,H:oB,I:oB,j:e1e,L:n1e,m:Jge,M:t1e,p:R,q:Zge,Q:s1e,s:o1e,S:r1e,u:Kge,U:Wge,V:Xge,w:Gge,W:Qge,x:Z,X:W,y:aB,Y:iB,Z:Yge,"%":a1e};k.x=L(r,k),k.X=L(n,k),k.c=L(e,k),$.x=L(r,$),$.X=L(n,$),$.c=L(e,$);function L(Ne,le){return function(we){var xe=[],ut=-1,He=0,ct=Ne.length,nt,Ut,Ie;for(we instanceof Date||(we=new Date(+we));++ut<ct;)Ne.charCodeAt(ut)===37&&(xe.push(Ne.slice(He,ut)),(Ut=nB[nt=Ne.charAt(++ut)])!=null?nt=Ne.charAt(++ut):Ut=nt==="e"?" ":"0",(Ie=le[nt])&&(nt=Ie(we,Ut)),xe.push(nt),He=ut+1);return xe.push(Ne.slice(He,ut)),xe.join("")}}function E(Ne,le){return function(we){var xe=Bp(1900,void 0,1),ut=A(xe,Ne,we+="",0),He,ct;if(ut!=we.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(le&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(He=vS(Bp(xe.y,0,1)),ct=He.getUTCDay(),He=ct>4||ct===0?Zb.ceil(He):Zb(He),He=L2.offset(He,(xe.V-1)*7),xe.y=He.getUTCFullYear(),xe.m=He.getUTCMonth(),xe.d=He.getUTCDate()+(xe.w+6)%7):(He=yS(Bp(xe.y,0,1)),ct=He.getDay(),He=ct>4||ct===0?Yb.ceil(He):Yb(He),He=d1.offset(He,(xe.V-1)*7),xe.y=He.getFullYear(),xe.m=He.getMonth(),xe.d=He.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),ct="Z"in xe?vS(Bp(xe.y,0,1)).getUTCDay():yS(Bp(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(ct+5)%7:xe.w+xe.U*7-(ct+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,vS(xe)):yS(xe)}}function A(Ne,le,we,xe){for(var ut=0,He=le.length,ct=we.length,nt,Ut;ut<He;){if(xe>=ct)return-1;if(nt=le.charCodeAt(ut++),nt===37){if(nt=le.charAt(ut++),Ut=I[nt in nB?le.charAt(ut++):nt],!Ut||(xe=Ut(Ne,we,xe))<0)return-1}else if(nt!=we.charCodeAt(xe++))return-1}return xe}function R(Ne,le,we){var xe=h.exec(le.slice(we));return xe?(Ne.p=p.get(xe[0].toLowerCase()),we+xe[0].length):-1}function F(Ne,le,we){var xe=b.exec(le.slice(we));return xe?(Ne.w=T.get(xe[0].toLowerCase()),we+xe[0].length):-1}function P(Ne,le,we){var xe=m.exec(le.slice(we));return xe?(Ne.w=y.get(xe[0].toLowerCase()),we+xe[0].length):-1}function B(Ne,le,we){var xe=N.exec(le.slice(we));return xe?(Ne.m=C.get(xe[0].toLowerCase()),we+xe[0].length):-1}function D(Ne,le,we){var xe=S.exec(le.slice(we));return xe?(Ne.m=w.get(xe[0].toLowerCase()),we+xe[0].length):-1}function Q(Ne,le,we){return A(Ne,e,le,we)}function Z(Ne,le,we){return A(Ne,r,le,we)}function W(Ne,le,we){return A(Ne,n,le,we)}function J(Ne){return s[Ne.getDay()]}function Y(Ne){return a[Ne.getDay()]}function ge(Ne){return d[Ne.getMonth()]}function ce(Ne){return l[Ne.getMonth()]}function X(Ne){return i[+(Ne.getHours()>=12)]}function re(Ne){return 1+~~(Ne.getMonth()/3)}function de(Ne){return s[Ne.getUTCDay()]}function oe(Ne){return a[Ne.getUTCDay()]}function ae(Ne){return d[Ne.getUTCMonth()]}function pe(Ne){return l[Ne.getUTCMonth()]}function ve(Ne){return i[+(Ne.getUTCHours()>=12)]}function Qe(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var le=L(Ne+="",k);return le.toString=function(){return Ne},le},parse:function(Ne){var le=E(Ne+="",!1);return le.toString=function(){return Ne},le},utcFormat:function(Ne){var le=L(Ne+="",$);return le.toString=function(){return Ne},le},utcParse:function(Ne){var le=E(Ne+="",!0);return le.toString=function(){return Ne},le}}}var nB={"-":"",_:" ",0:"0"},Ri=/^\s*\d+/,Fge=/^%/,qge=/[\\^$*+?|[\]().{}]/g;function Cr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Hge(t){return t.replace(qge,"\\$&")}function Up(t){return new RegExp("^(?:"+t.map(Hge).join("|")+")","i")}function zp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Gge(t,e,r){var n=Ri.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Kge(t,e,r){var n=Ri.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Wge(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Xge(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Qge(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function iB(t,e,r){var n=Ri.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function aB(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Yge(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Zge(t,e,r){var n=Ri.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Jge(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function sB(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function e1e(t,e,r){var n=Ri.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function oB(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function t1e(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function r1e(t,e,r){var n=Ri.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function n1e(t,e,r){var n=Ri.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function i1e(t,e,r){var n=Ri.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function a1e(t,e,r){var n=Fge.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function s1e(t,e,r){var n=Ri.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function o1e(t,e,r){var n=Ri.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function lB(t,e){return Cr(t.getDate(),e,2)}function l1e(t,e){return Cr(t.getHours(),e,2)}function c1e(t,e){return Cr(t.getHours()%12||12,e,2)}function u1e(t,e){return Cr(1+d1.count(Gl(t),t),e,3)}function TK(t,e){return Cr(t.getMilliseconds(),e,3)}function d1e(t,e){return TK(t,e)+"000"}function h1e(t,e){return Cr(t.getMonth()+1,e,2)}function f1e(t,e){return Cr(t.getMinutes(),e,2)}function p1e(t,e){return Cr(t.getSeconds(),e,2)}function m1e(t){var e=t.getDay();return e===0?7:e}function g1e(t,e){return Cr(B2.count(Gl(t)-1,t),e,2)}function AK(t){var e=t.getDay();return e>=4||e===0?Wh(t):Wh.ceil(t)}function y1e(t,e){return t=AK(t),Cr(Wh.count(Gl(t),t)+(Gl(t).getDay()===4),e,2)}function v1e(t){return t.getDay()}function b1e(t,e){return Cr(Yb.count(Gl(t)-1,t),e,2)}function x1e(t,e){return Cr(t.getFullYear()%100,e,2)}function w1e(t,e){return t=AK(t),Cr(t.getFullYear()%100,e,2)}function _1e(t,e){return Cr(t.getFullYear()%1e4,e,4)}function S1e(t,e){var r=t.getDay();return t=r>=4||r===0?Wh(t):Wh.ceil(t),Cr(t.getFullYear()%1e4,e,4)}function T1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Cr(e/60|0,"0",2)+Cr(e%60,"0",2)}function cB(t,e){return Cr(t.getUTCDate(),e,2)}function A1e(t,e){return Cr(t.getUTCHours(),e,2)}function E1e(t,e){return Cr(t.getUTCHours()%12||12,e,2)}function N1e(t,e){return Cr(1+L2.count(Kl(t),t),e,3)}function EK(t,e){return Cr(t.getUTCMilliseconds(),e,3)}function j1e(t,e){return EK(t,e)+"000"}function k1e(t,e){return Cr(t.getUTCMonth()+1,e,2)}function C1e(t,e){return Cr(t.getUTCMinutes(),e,2)}function O1e(t,e){return Cr(t.getUTCSeconds(),e,2)}function I1e(t){var e=t.getUTCDay();return e===0?7:e}function R1e(t,e){return Cr(U2.count(Kl(t)-1,t),e,2)}function NK(t){var e=t.getUTCDay();return e>=4||e===0?Xh(t):Xh.ceil(t)}function M1e(t,e){return t=NK(t),Cr(Xh.count(Kl(t),t)+(Kl(t).getUTCDay()===4),e,2)}function P1e(t){return t.getUTCDay()}function D1e(t,e){return Cr(Zb.count(Kl(t)-1,t),e,2)}function L1e(t,e){return Cr(t.getUTCFullYear()%100,e,2)}function B1e(t,e){return t=NK(t),Cr(t.getUTCFullYear()%100,e,2)}function U1e(t,e){return Cr(t.getUTCFullYear()%1e4,e,4)}function z1e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Xh(t):Xh.ceil(t),Cr(t.getUTCFullYear()%1e4,e,4)}function $1e(){return"+0000"}function uB(){return"%"}function dB(t){return+t}function hB(t){return Math.floor(+t/1e3)}var Q0,jK,kK;V1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function V1e(t){return Q0=Vge(t),jK=Q0.format,Q0.parse,kK=Q0.utcFormat,Q0.utcParse,Q0}function F1e(t){return new Date(t)}function q1e(t){return t instanceof Date?+t:+new Date(+t)}function RN(t,e,r,n,i,a,s,l,d,h){var p=bN(),m=p.invert,y=p.domain,b=h(".%L"),T=h(":%S"),S=h("%I:%M"),w=h("%I %p"),N=h("%a %d"),C=h("%b %d"),k=h("%B"),$=h("%Y");function I(L){return(d(L)<L?b:l(L)<L?T:s(L)<L?S:a(L)<L?w:n(L)<L?i(L)<L?N:C:r(L)<L?k:$)(L)}return p.invert=function(L){return new Date(m(L))},p.domain=function(L){return arguments.length?y(Array.from(L,q1e)):y().map(F1e)},p.ticks=function(L){var E=y();return t(E[0],E[E.length-1],L??10)},p.tickFormat=function(L,E){return E==null?I:h(E)},p.nice=function(L){var E=y();return(!L||typeof L.range!="function")&&(L=e(E[0],E[E.length-1],L??10)),L?y(mK(E,L)):p},p.copy=function(){return u1(p,RN(t,e,r,n,i,a,s,l,d,h))},p}function H1e(){return Us.apply(RN(zge,$ge,Gl,ON,B2,d1,kN,NN,xd,jK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G1e(){return Us.apply(RN(Bge,Uge,Kl,IN,U2,L2,CN,jN,xd,kK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function z2(){var t=0,e=1,r,n,i,a,s=ma,l=!1,d;function h(m){return m==null||isNaN(m=+m)?d:s(i===0?.5:(m=(a(m)-r)*i,l?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(l=!!m,h):l},h.interpolator=function(m){return arguments.length?(s=m,h):s};function p(m){return function(y){var b,T;return arguments.length?([b,T]=y,s=m(b,T),h):[s(0),s(1)]}}return h.range=p(jf),h.rangeRound=p(vN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return a=m,r=m(t),n=m(e),i=r===n?0:1/(n-r),h}}function Eu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function CK(){var t=Au(z2()(ma));return t.copy=function(){return Eu(t,CK())},tc.apply(t,arguments)}function OK(){var t=_N(z2()).domain([1,10]);return t.copy=function(){return Eu(t,OK()).base(t.base())},tc.apply(t,arguments)}function IK(){var t=SN(z2());return t.copy=function(){return Eu(t,IK()).constant(t.constant())},tc.apply(t,arguments)}function MN(){var t=TN(z2());return t.copy=function(){return Eu(t,MN()).exponent(t.exponent())},tc.apply(t,arguments)}function K1e(){return MN.apply(null,arguments).exponent(.5)}function RK(){var t=[],e=ma;function r(n){if(n!=null&&!isNaN(n=+n))return e((l1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ou),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>Rme(t,a/n))},r.copy=function(){return RK(e).domain(t)},tc.apply(r,arguments)}function $2(){var t=0,e=.5,r=1,n=1,i,a,s,l,d,h=ma,p,m=!1,y;function b(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-a)*(n*S<n*a?l:d),h(m?Math.max(0,Math.min(1,S)):S))}b.domain=function(S){return arguments.length?([t,e,r]=S,i=p(t=+t),a=p(e=+e),s=p(r=+r),l=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b):[t,e,r]},b.clamp=function(S){return arguments.length?(m=!!S,b):m},b.interpolator=function(S){return arguments.length?(h=S,b):h};function T(S){return function(w){var N,C,k;return arguments.length?([N,C,k]=w,h=age(S,[N,C,k]),b):[h(0),h(.5),h(1)]}}return b.range=T(jf),b.rangeRound=T(vN),b.unknown=function(S){return arguments.length?(y=S,b):y},function(S){return p=S,i=S(t),a=S(e),s=S(r),l=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b}}function MK(){var t=Au($2()(ma));return t.copy=function(){return Eu(t,MK())},tc.apply(t,arguments)}function PK(){var t=_N($2()).domain([.1,1,10]);return t.copy=function(){return Eu(t,PK()).base(t.base())},tc.apply(t,arguments)}function DK(){var t=SN($2());return t.copy=function(){return Eu(t,DK()).constant(t.constant())},tc.apply(t,arguments)}function PN(){var t=TN($2());return t.copy=function(){return Eu(t,PN()).exponent(t.exponent())},tc.apply(t,arguments)}function W1e(){return PN.apply(null,arguments).exponent(.5)}const fB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rg,scaleDiverging:MK,scaleDivergingLog:PK,scaleDivergingPow:PN,scaleDivergingSqrt:W1e,scaleDivergingSymlog:DK,scaleIdentity:pK,scaleImplicit:qA,scaleLinear:Xb,scaleLog:gK,scaleOrdinal:mN,scalePoint:mm,scalePow:AN,scaleQuantile:bK,scaleQuantize:xK,scaleRadial:vK,scaleSequential:CK,scaleSequentialLog:OK,scaleSequentialPow:MN,scaleSequentialQuantile:RK,scaleSequentialSqrt:K1e,scaleSequentialSymlog:IK,scaleSqrt:jge,scaleSymlog:yK,scaleThreshold:wK,scaleTime:H1e,scaleUtc:G1e,tickFormat:fK},Symbol.toStringTag,{value:"Module"}));var bS,pB;function V2(){if(pB)return bS;pB=1;var t=Af();function e(r,n,i){for(var a=-1,s=r.length;++a<s;){var l=r[a],d=n(l);if(d!=null&&(h===void 0?d===d&&!t(d):i(d,h)))var h=d,p=l}return p}return bS=e,bS}var xS,mB;function LK(){if(mB)return xS;mB=1;function t(e,r){return e>r}return xS=t,xS}var wS,gB;function X1e(){if(gB)return wS;gB=1;var t=V2(),e=LK(),r=Nf();function n(i){return i&&i.length?t(i,r,e):void 0}return wS=n,wS}var Q1e=X1e();const F2=Ir(Q1e);var _S,yB;function BK(){if(yB)return _S;yB=1;function t(e,r){return e<r}return _S=t,_S}var SS,vB;function Y1e(){if(vB)return SS;vB=1;var t=V2(),e=BK(),r=Nf();function n(i){return i&&i.length?t(i,r,e):void 0}return SS=n,SS}var Z1e=Y1e();const q2=Ir(Z1e);var TS,bB;function J1e(){if(bB)return TS;bB=1;var t=YE(),e=Vo(),r=GG(),n=qa();function i(a,s){var l=n(a)?t:r;return l(a,e(s,3))}return TS=i,TS}var AS,xB;function eye(){if(xB)return AS;xB=1;var t=qG(),e=J1e();function r(n,i){return t(e(n,i),1)}return AS=r,AS}var tye=eye();const rye=Ir(tye);var ES,wB;function nye(){if(wB)return ES;wB=1;var t=cN();function e(r,n){return t(r,n)}return ES=e,ES}var iye=nye();const h1=Ir(iye);var kf=1e9,aye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},LN,En=!0,Bs="[DecimalError] ",Cd=Bs+"Invalid argument: ",DN=Bs+"Exponent out of range: ",Cf=Math.floor,dd=Math.pow,sye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,is,ji=1e7,_n=7,UK=9007199254740991,Jb=Cf(UK/_n),xt={};xt.absoluteValue=xt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};xt.comparedTo=xt.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};xt.decimalPlaces=xt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*_n;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};xt.dividedBy=xt.div=function(t){return Ml(this,new this.constructor(t))};xt.dividedToIntegerBy=xt.idiv=function(t){var e=this,r=e.constructor;return sn(Ml(e,new r(t),0,1),r.precision)};xt.equals=xt.eq=function(t){return!this.cmp(t)};xt.exponent=function(){return ci(this)};xt.greaterThan=xt.gt=function(t){return this.cmp(t)>0};xt.greaterThanOrEqualTo=xt.gte=function(t){return this.cmp(t)>=0};xt.isInteger=xt.isint=function(){return this.e>this.d.length-2};xt.isNegative=xt.isneg=function(){return this.s<0};xt.isPositive=xt.ispos=function(){return this.s>0};xt.isZero=function(){return this.s===0};xt.lessThan=xt.lt=function(t){return this.cmp(t)<0};xt.lessThanOrEqualTo=xt.lte=function(t){return this.cmp(t)<1};xt.logarithm=xt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(is))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(is)?new n(0):(En=!1,e=Ml(og(r,a),og(t,a),a),En=!0,sn(e,i))};xt.minus=xt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?VK(e,t):zK(e,(t.s=-t.s,t))};xt.modulo=xt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Bs+"NaN");return r.s?(En=!1,e=Ml(r,t,0,1).times(t),En=!0,r.minus(e)):sn(new n(r),i)};xt.naturalExponential=xt.exp=function(){return $K(this)};xt.naturalLogarithm=xt.ln=function(){return og(this)};xt.negated=xt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};xt.plus=xt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?zK(e,t):VK(e,(t.s=-t.s,t))};xt.precision=xt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Cd+t);if(e=ci(i)+1,n=i.d.length-1,r=n*_n+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};xt.squareRoot=xt.sqrt=function(){var t,e,r,n,i,a,s,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(Bs+"NaN")}for(t=ci(l),En=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=No(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Cf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(i.toString()),r=d.precision,i=s=r+3;;)if(a=n,n=a.plus(Ml(l,a,s+2)).times(.5),No(a.d).slice(0,s)===(e=No(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(sn(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(e!="9999")break;s+=4}return En=!0,sn(n,r)};xt.times=xt.mul=function(t){var e,r,n,i,a,s,l,d,h,p=this,m=p.constructor,y=p.d,b=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=b.length,d<h&&(a=y,y=b,b=a,s=d,d=h,h=s),a=[],s=d+h,n=s;n--;)a.push(0);for(n=h;--n>=0;){for(e=0,i=d+n;i>n;)l=a[i]+b[n]*y[i-n-1]+e,a[i--]=l%ji|0,e=l/ji|0;a[i]=(a[i]+e)%ji|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,En?sn(t,m.precision):t};xt.toDecimalPlaces=xt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Po(t,0,kf),e===void 0?e=n.rounding:Po(e,0,8),sn(r,t+ci(r)+1,e))};xt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=Hd(n,!0):(Po(t,0,kf),e===void 0?e=i.rounding:Po(e,0,8),n=sn(new i(n),t+1,e),r=Hd(n,!0,t+1)),r};xt.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?Hd(i):(Po(t,0,kf),e===void 0?e=a.rounding:Po(e,0,8),n=sn(new a(i),t+ci(i)+1,e),r=Hd(n.abs(),!1,t+ci(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};xt.toInteger=xt.toint=function(){var t=this,e=t.constructor;return sn(new e(t),ci(t)+1,e.rounding)};xt.toNumber=function(){return+this};xt.toPower=xt.pow=function(t){var e,r,n,i,a,s,l=this,d=l.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(is);if(l=new d(l),!l.s){if(t.s<1)throw Error(Bs+"Infinity");return l}if(l.eq(is))return l;if(n=d.precision,t.eq(is))return sn(l,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=l.s,s){if((r=p<0?-p:p)<=UK){for(i=new d(is),e=Math.ceil(n/_n+4),En=!1;r%2&&(i=i.times(l),SB(i.d,e)),r=Cf(r/2),r!==0;)l=l.times(l),SB(l.d,e);return En=!0,t.s<0?new d(is).div(i):sn(i,n)}}else if(a<0)throw Error(Bs+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,En=!1,i=t.times(og(l,n+h)),En=!0,i=$K(i),i.s=a,i};xt.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=ci(i),n=Hd(i,r<=a.toExpNeg||r>=a.toExpPos)):(Po(t,1,kf),e===void 0?e=a.rounding:Po(e,0,8),i=sn(new a(i),t,e),r=ci(i),n=Hd(i,t<=r||r<=a.toExpNeg,t)),n};xt.toSignificantDigits=xt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Po(t,1,kf),e===void 0?e=n.rounding:Po(e,0,8)),sn(new n(r),t,e)};xt.toString=xt.valueOf=xt.val=xt.toJSON=xt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ci(t),r=t.constructor;return Hd(t,e<=r.toExpNeg||e>=r.toExpPos)};function zK(t,e){var r,n,i,a,s,l,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),En?sn(e,m):e;if(d=t.d,h=e.d,s=t.e,i=e.e,d=d.slice(),a=s-i,a){for(a<0?(n=d,a=-a,l=h.length):(n=h,i=s,l=d.length),s=Math.ceil(m/_n),l=s>l?s+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=d.length,a=h.length,l-a<0&&(a=l,n=h,h=d,d=n),r=0;a;)r=(d[--a]=d[a]+h[a]+r)/ji|0,d[a]%=ji;for(r&&(d.unshift(r),++i),l=d.length;d[--l]==0;)d.pop();return e.d=d,e.e=i,En?sn(e,m):e}function Po(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Cd+t)}function No(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=_n-n.length,r&&(a+=zc(r)),a+=n;s=t[e],n=s+"",r=_n-n.length,r&&(a+=zc(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Ml=(function(){function t(n,i){var a,s=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+s,n[l]=a%ji|0,s=a/ji|0;return s&&n.unshift(s),n}function e(n,i,a,s){var l,d;if(a!=s)d=a>s?1:-1;else for(l=d=0;l<a;l++)if(n[l]!=i[l]){d=n[l]>i[l]?1:-1;break}return d}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*ji+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var l,d,h,p,m,y,b,T,S,w,N,C,k,$,I,L,E,A,R=n.constructor,F=n.s==i.s?1:-1,P=n.d,B=i.d;if(!n.s)return new R(n);if(!i.s)throw Error(Bs+"Division by zero");for(d=n.e-i.e,E=B.length,I=P.length,b=new R(F),T=b.d=[],h=0;B[h]==(P[h]||0);)++h;if(B[h]>(P[h]||0)&&--d,a==null?C=a=R.precision:s?C=a+(ci(n)-ci(i))+1:C=a,C<0)return new R(0);if(C=C/_n+2|0,h=0,E==1)for(p=0,B=B[0],C++;(h<I||p)&&C--;h++)k=p*ji+(P[h]||0),T[h]=k/B|0,p=k%B|0;else{for(p=ji/(B[0]+1)|0,p>1&&(B=t(B,p),P=t(P,p),E=B.length,I=P.length),$=E,S=P.slice(0,E),w=S.length;w<E;)S[w++]=0;A=B.slice(),A.unshift(0),L=B[0],B[1]>=ji/2&&++L;do p=0,l=e(B,S,E,w),l<0?(N=S[0],E!=w&&(N=N*ji+(S[1]||0)),p=N/L|0,p>1?(p>=ji&&(p=ji-1),m=t(B,p),y=m.length,w=S.length,l=e(m,S,y,w),l==1&&(p--,r(m,E<y?A:B,y))):(p==0&&(l=p=1),m=B.slice()),y=m.length,y<w&&m.unshift(0),r(S,m,w),l==-1&&(w=S.length,l=e(B,S,E,w),l<1&&(p++,r(S,E<w?A:B,w))),w=S.length):l===0&&(p++,S=[0]),T[h++]=p,l&&S[0]?S[w++]=P[$]||0:(S=[P[$]],w=1);while(($++<I||S[0]!==void 0)&&C--)}return T[0]||T.shift(),b.e=d,sn(b,s?a+ci(b)+1:a)}})();function $K(t,e){var r,n,i,a,s,l,d=0,h=0,p=t.constructor,m=p.precision;if(ci(t)>16)throw Error(DN+ci(t));if(!t.s)return new p(is);for(En=!1,l=m,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(n=Math.log(dd(2,h))/Math.LN10*2+5|0,l+=n,r=i=a=new p(is),p.precision=l;;){if(i=sn(i.times(t),l),r=r.times(++d),s=a.plus(Ml(i,r,l)),No(s.d).slice(0,l)===No(a.d).slice(0,l)){for(;h--;)a=sn(a.times(a),l);return p.precision=m,e==null?(En=!0,sn(a,m)):a}a=s}}function ci(t){for(var e=t.e*_n,r=t.d[0];r>=10;r/=10)e++;return e}function NS(t,e,r){if(e>t.LN10.sd())throw En=!0,r&&(t.precision=r),Error(Bs+"LN10 precision limit exceeded");return sn(new t(t.LN10),e)}function zc(t){for(var e="";t--;)e+="0";return e}function og(t,e){var r,n,i,a,s,l,d,h,p,m=1,y=10,b=t,T=b.d,S=b.constructor,w=S.precision;if(b.s<1)throw Error(Bs+(b.s?"NaN":"-Infinity"));if(b.eq(is))return new S(0);if(e==null?(En=!1,h=w):h=e,b.eq(10))return e==null&&(En=!0),NS(S,h);if(h+=y,S.precision=h,r=No(T),n=r.charAt(0),a=ci(b),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(t),r=No(b.d),n=r.charAt(0),m++;a=ci(b),n>1?(b=new S("0."+r),a++):b=new S(n+"."+r.slice(1))}else return d=NS(S,h+2,w).times(a+""),b=og(new S(n+"."+r.slice(1)),h-y).plus(d),S.precision=w,e==null?(En=!0,sn(b,w)):b;for(l=s=b=Ml(b.minus(is),b.plus(is),h),p=sn(b.times(b),h),i=3;;){if(s=sn(s.times(p),h),d=l.plus(Ml(s,new S(i),h)),No(d.d).slice(0,h)===No(l.d).slice(0,h))return l=l.times(2),a!==0&&(l=l.plus(NS(S,h+2,w).times(a+""))),l=Ml(l,new S(m),h),S.precision=w,e==null?(En=!0,sn(l,w)):l;l=d,i+=2}}function _B(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Cf(r/_n),t.d=[],n=(r+1)%_n,r<0&&(n+=_n),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=_n;n<i;)t.d.push(+e.slice(n,n+=_n));e=e.slice(n),n=_n-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),En&&(t.e>Jb||t.e<-Jb))throw Error(DN+r)}else t.s=0,t.e=0,t.d=[0];return t}function sn(t,e,r){var n,i,a,s,l,d,h,p,m=t.d;for(s=1,a=m[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=_n,i=e,h=m[p=0];else{if(p=Math.ceil((n+1)/_n),a=m.length,p>=a)return t;for(h=a=m[p],s=1;a>=10;a/=10)s++;n%=_n,i=n-_n+s}if(r!==void 0&&(a=dd(10,s-i-1),l=h/a%10|0,d=e<0||m[p+1]!==void 0||h%a,d=r<4?(l||d)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?i>0?h/dd(10,s-i):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(a=ci(t),m.length=1,e=e-a-1,m[0]=dd(10,(_n-e%_n)%_n),t.e=Cf(-e/_n)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,a=1,p--):(m.length=p+1,a=dd(10,_n-n),m[p]=i>0?(h/dd(10,s-i)%dd(10,i)|0)*a:0),d)for(;;)if(p==0){(m[0]+=a)==ji&&(m[0]=1,++t.e);break}else{if(m[p]+=a,m[p]!=ji)break;m[p--]=0,a=1}for(n=m.length;m[--n]===0;)m.pop();if(En&&(t.e>Jb||t.e<-Jb))throw Error(DN+ci(t));return t}function VK(t,e){var r,n,i,a,s,l,d,h,p,m,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),En?sn(e,b):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),s=h-n,s){for(p=s<0,p?(r=d,s=-s,l=m.length):(r=m,n=h,l=d.length),i=Math.max(Math.ceil(b/_n),l)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=d.length,l=m.length,p=i<l,p&&(l=i),i=0;i<l;i++)if(d[i]!=m[i]){p=d[i]<m[i];break}s=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),l=d.length,i=m.length-l;i>0;--i)d[l++]=0;for(i=m.length;i>s;){if(d[--i]<m[i]){for(a=i;a&&d[--a]===0;)d[a]=ji-1;--d[a],d[i]+=ji}d[i]-=m[i]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,En?sn(e,b):e):new y(0)}function Hd(t,e,r){var n,i=ci(t),a=No(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+zc(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+zc(-i-1)+a,r&&(n=r-s)>0&&(a+=zc(n))):i>=s?(a+=zc(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+zc(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=zc(n))),t.s<0?"-"+a:a}function SB(t,e){if(t.length>e)return t.length=e,!0}function FK(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Cd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return _B(s,a.toString())}else if(typeof a!="string")throw Error(Cd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,sye.test(a))_B(s,a);else throw Error(Cd+a)}if(i.prototype=xt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=FK,i.config=i.set=oye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function oye(t){if(!t||typeof t!="object")throw Error(Bs+"Object expected");var e,r,n,i=["precision",1,kf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Cf(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(Cd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Cd+r+": "+n);return this}var LN=FK(aye);is=new LN(1);const Zr=LN;function lye(t){return hye(t)||dye(t)||uye(t)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uye(t,e){if(t){if(typeof t=="string")return WA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WA(t,e)}}function dye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function hye(t){if(Array.isArray(t))return WA(t)}function WA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fye=function(e){return e},qK={},HK=function(e){return e===qK},TB=function(e){return function r(){return arguments.length===0||arguments.length===1&&HK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},pye=function t(e,r){return e===1?r:TB(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(l){return l!==qK}).length;return s>=e?r.apply(void 0,i):t(e-s,TB(function(){for(var l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];var p=i.map(function(m){return HK(m)?d.shift():m});return r.apply(void 0,lye(p).concat(d))}))})},H2=function(e){return pye(e.length,e)},XA=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},mye=H2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),gye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return fye;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(l,d){return d(l)},a.apply(void 0,arguments))}},QA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},GK=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(l,d){return l===r[d]})||(r=a,n=e.apply(void 0,a)),n}};function yye(t){var e;return t===0?e=1:e=Math.floor(new Zr(t).abs().log(10).toNumber())+1,e}function vye(t,e,r){for(var n=new Zr(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var bye=H2(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),xye=H2(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),wye=H2(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const G2={rangeStep:vye,getDigitCount:yye,interpolateNumber:bye,uninterpolateNumber:xye,uninterpolateTruncation:wye};function YA(t){return Tye(t)||Sye(t)||KK(t)||_ye()}function _ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Tye(t){if(Array.isArray(t))return ZA(t)}function lg(t,e){return Nye(t)||Eye(t,e)||KK(t,e)||Aye()}function Aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KK(t,e){if(t){if(typeof t=="string")return ZA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZA(t,e)}}function ZA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function Nye(t){if(Array.isArray(t))return t}function WK(t){var e=lg(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function XK(t,e,r){if(t.lte(0))return new Zr(0);var n=G2.getDigitCount(t.toNumber()),i=new Zr(10).pow(n),a=t.div(i),s=n!==1?.05:.1,l=new Zr(Math.ceil(a.div(s).toNumber())).add(r).mul(s),d=l.mul(i);return e?d:new Zr(Math.ceil(d))}function jye(t,e,r){var n=1,i=new Zr(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new Zr(10).pow(G2.getDigitCount(t)-1),i=new Zr(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Zr(Math.floor(t)))}else t===0?i=new Zr(Math.floor((e-1)/2)):r||(i=new Zr(Math.floor(t)));var s=Math.floor((e-1)/2),l=gye(mye(function(d){return i.add(new Zr(d-s).mul(n)).toNumber()}),XA);return l(0,e)}function QK(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Zr(0),tickMin:new Zr(0),tickMax:new Zr(0)};var a=XK(new Zr(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new Zr(0):(s=new Zr(t).add(e).div(2),s=s.sub(new Zr(s).mod(a)));var l=Math.ceil(s.sub(t).div(a).toNumber()),d=Math.ceil(new Zr(e).sub(s).div(a).toNumber()),h=l+d+1;return h>r?QK(t,e,r,n,i+1):(h<r&&(d=e>0?d+(r-h):d,l=e>0?l:l+(r-h)),{step:a,tickMin:s.sub(new Zr(l).mul(a)),tickMax:s.add(new Zr(d).mul(a))})}function kye(t){var e=lg(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),l=WK([r,n]),d=lg(l,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(YA(XA(0,i-1).map(function(){return 1/0}))):[].concat(YA(XA(0,i-1).map(function(){return-1/0})),[p]);return r>n?QA(m):m}if(h===p)return jye(h,i,a);var y=QK(h,p,s,a),b=y.step,T=y.tickMin,S=y.tickMax,w=G2.rangeStep(T,S.add(new Zr(.1).mul(b)),b);return r>n?QA(w):w}function Cye(t,e){var r=lg(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=WK([n,i]),l=lg(s,2),d=l[0],h=l[1];if(d===-1/0||h===1/0)return[n,i];if(d===h)return[d];var p=Math.max(e,2),m=XK(new Zr(h).sub(d).div(p-1),a,0),y=[].concat(YA(G2.rangeStep(new Zr(d),new Zr(h).sub(new Zr(.99).mul(m)),m)),[h]);return n>i?QA(y):y}var Oye=GK(kye),Iye=GK(Cye),Rye="Invariant failed";function Gd(t,e){throw new Error(Rye)}var Mye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function ex(){return ex=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ex.apply(this,arguments)}function Pye(t,e){return Uye(t)||Bye(t,e)||Lye(t,e)||Dye()}function Dye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lye(t,e){if(t){if(typeof t=="string")return AB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AB(t,e)}}function AB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Bye(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function Uye(t){if(Array.isArray(t))return t}function zye(t,e){if(t==null)return{};var r=$ye(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $ye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JK(n.key),n)}}function qye(t,e,r){return e&&Fye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hye(t,e,r){return e=tx(e),Gye(t,YK()?Reflect.construct(e,r||[],tx(t).constructor):e.apply(t,r))}function Gye(t,e){if(e&&(Qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kye(t)}function Kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!t})()}function tx(t){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tx(t)}function Wye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},JA(t,e)}function ZK(t,e,r){return e=JK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function JK(t){var e=Xye(t,"string");return Qh(e)=="symbol"?e:e+""}function Xye(t,e){if(Qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var f1=(function(t){function e(){return Vye(this,e),Hye(this,e,arguments)}return Wye(e,t),qye(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,l=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=zye(n,Mye),b=Ct(y,!1);this.props.direction==="x"&&p.type!=="number"&&Gd();var T=d.map(function(S){var w=h(S,l),N=w.x,C=w.y,k=w.value,$=w.errorVal;if(!$)return null;var I=[],L,E;if(Array.isArray($)){var A=Pye($,2);L=A[0],E=A[1]}else L=E=$;if(a==="vertical"){var R=p.scale,F=C+i,P=F+s,B=F-s,D=R(k-L),Q=R(k+E);I.push({x1:Q,y1:P,x2:Q,y2:B}),I.push({x1:D,y1:F,x2:Q,y2:F}),I.push({x1:D,y1:P,x2:D,y2:B})}else if(a==="horizontal"){var Z=m.scale,W=N+i,J=W-s,Y=W+s,ge=Z(k-L),ce=Z(k+E);I.push({x1:J,y1:ce,x2:Y,y2:ce}),I.push({x1:W,y1:ge,x2:W,y2:ce}),I.push({x1:J,y1:ge,x2:Y,y2:ge})}return te.createElement(jr,ex({className:"recharts-errorBar",key:"bar-".concat(I.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},b),I.map(function(X){return te.createElement("line",ex({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return te.createElement(jr,{className:"recharts-errorBars"},T)}}])})(te.Component);ZK(f1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZK(f1,"displayName","ErrorBar");function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function EB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function id(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(r),!0).forEach(function(n){Qye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Qye(t,e,r){return e=Yye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yye(t){var e=Zye(t,"string");return cg(e)=="symbol"?e:e+""}function Zye(t,e){if(cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eW=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=rs(r,vh);if(!s)return null;var l=vh.defaultProps,d=l!==void 0?id(id({},l),s.props):{},h;return s.props&&s.props.payload?h=s.props&&s.props.payload:a==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,b=m.props,T=b.sectors||b.data||[];return p.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,b=y!==void 0?id(id({},y),m.props):{},T=b.dataKey,S=b.name,w=b.legendType,N=b.hide;return{inactive:N,dataKey:T,type:d.iconType||w||"square",color:BN(m),value:S||T,payload:b}}),id(id(id({},d),vh.getWithHeight(s,i)),{},{payload:h,item:s})};function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function NB(t){return rve(t)||tve(t)||eve(t)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(t,e){if(t){if(typeof t=="string")return e8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e8(t,e)}}function tve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rve(t){if(Array.isArray(t))return e8(t)}function e8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(r),!0).forEach(function(n){xh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xh(t,e,r){return e=nve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nve(t){var e=ive(t,"string");return ug(e)=="symbol"?e:e+""}function ive(t,e){if(ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ki(t,e,r){return Qt(t)||Qt(e)?r:yi(e)?Os(t,e,r):qt(e)?e(t):r}function gm(t,e,r,n){var i=rye(t,function(l){return Ki(l,e)});if(r==="number"){var a=i.filter(function(l){return lt(l)||parseFloat(l)});return a.length?[q2(a),F2(a)]:[1/0,-1/0]}var s=n?i.filter(function(l){return!Qt(l)}):i;return s.map(function(l){return yi(l)||l instanceof Date?l:""})}var ave=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var d=a.range,h=0;h<l;h++){var p=h>0?i[h-1].coordinate:i[l-1].coordinate,m=i[h].coordinate,y=h>=l-1?i[0].coordinate:i[h+1].coordinate,b=void 0;if(to(m-p)!==to(y-m)){var T=[];if(to(y-m)===to(d[1]-d[0])){b=y;var S=m+d[1]-d[0];T[0]=Math.min(S,(S+p)/2),T[1]=Math.max(S,(S+p)/2)}else{b=p;var w=y+d[1]-d[0];T[0]=Math.min(m,(w+m)/2),T[1]=Math.max(m,(w+m)/2)}var N=[Math.min(m,(b+m)/2),Math.max(m,(b+m)/2)];if(e>N[0]&&e<=N[1]||e>=T[0]&&e<=T[1]){s=i[h].index;break}}else{var C=Math.min(p,y),k=Math.max(p,y);if(e>(C+m)/2&&e<=(k+m)/2){s=i[h].index;break}}}else for(var $=0;$<l;$++)if($===0&&e<=(n[$].coordinate+n[$+1].coordinate)/2||$>0&&$<l-1&&e>(n[$].coordinate+n[$-1].coordinate)/2&&e<=(n[$].coordinate+n[$+1].coordinate)/2||$===l-1&&e>(n[$].coordinate+n[$-1].coordinate)/2){s=n[$].index;break}return s},BN=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?zn(zn({},e.type.defaultProps),e.props):e.props,s=a.stroke,l=a.fill,d;switch(i){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:l;break;default:d=l;break}return d},sve=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},l=Object.keys(a),d=0,h=l.length;d<h;d++)for(var p=a[l[d]].stackGroups,m=Object.keys(p),y=0,b=m.length;y<b;y++){var T=p[m[y]],S=T.items,w=T.cateAxisId,N=S.filter(function(E){return Il(E.type).indexOf("Bar")>=0});if(N&&N.length){var C=N[0].type.defaultProps,k=C!==void 0?zn(zn({},C),N[0].props):N[0].props,$=k.barSize,I=k[w];s[I]||(s[I]=[]);var L=Qt($)?r:$;s[I].push({item:N[0],stackList:N.slice(1),barSize:Qt(L)?void 0:ro(L,n,0)})}}return s},ove=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,l=e.maxBarSize,d=s.length;if(d<1)return null;var h=ro(r,i,0,!0),p,m=[];if(s[0].barSize===+s[0].barSize){var y=!1,b=i/d,T=s.reduce(function($,I){return $+I.barSize||0},0);T+=(d-1)*h,T>=i&&(T-=(d-1)*h,h=0),T>=i&&b>0&&(y=!0,b*=.9,T=d*b);var S=(i-T)/2>>0,w={offset:S-h,size:0};p=s.reduce(function($,I){var L={item:I.item,position:{offset:w.offset+w.size+h,size:y?b:I.barSize}},E=[].concat(NB($),[L]);return w=E[E.length-1].position,I.stackList&&I.stackList.length&&I.stackList.forEach(function(A){E.push({item:A,position:w})}),E},m)}else{var N=ro(n,i,0,!0);i-2*N-(d-1)*h<=0&&(h=0);var C=(i-2*N-(d-1)*h)/d;C>1&&(C>>=0);var k=l===+l?Math.min(C,l):C;p=s.reduce(function($,I,L){var E=[].concat(NB($),[{item:I.item,position:{offset:N+(C+h)*L+(C-k)/2,size:k}}]);return I.stackList&&I.stackList.length&&I.stackList.forEach(function(A){E.push({item:A,position:E[E.length-1].position})}),E},m)}return p},lve=function(e,r,n,i){var a=n.children,s=n.width,l=n.margin,d=s-(l.left||0)-(l.right||0),h=eW({children:a,legendWidth:d});if(h){var p=i||{},m=p.width,y=p.height,b=h.align,T=h.verticalAlign,S=h.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&b!=="center"&&lt(e[b]))return zn(zn({},e),{},xh({},b,e[b]+(m||0)));if((S==="horizontal"||S==="vertical"&&b==="center")&&T!=="middle"&&lt(e[T]))return zn(zn({},e),{},xh({},T,e[T]+(y||0)))}return e},cve=function(e,r,n){return Qt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},tW=function(e,r,n,i,a){var s=r.props.children,l=us(s,f1).filter(function(h){return cve(i,a,h.props.direction)});if(l&&l.length){var d=l.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=Ki(p,n);if(Qt(m))return h;var y=Array.isArray(m)?[q2(m),F2(m)]:[m,m],b=d.reduce(function(T,S){var w=Ki(p,S,0),N=y[0]-Math.abs(Array.isArray(w)?w[0]:w),C=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(N,T[0]),Math.max(C,T[1])]},[1/0,-1/0]);return[Math.min(b[0],h[0]),Math.max(b[1],h[1])]},[1/0,-1/0])}return null},uve=function(e,r,n,i,a){var s=r.map(function(l){return tW(e,l,n,a,i)}).filter(function(l){return!Qt(l)});return s&&s.length?s.reduce(function(l,d){return[Math.min(l[0],d[0]),Math.max(l[1],d[1])]},[1/0,-1/0]):null},rW=function(e,r,n,i,a){var s=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&tW(e,d,h,i)||gm(e,h,n,a)});if(n==="number")return s.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var l={};return s.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)l[h[p]]||(l[h[p]]=!0,d.push(h[p]));return d},[])},nW=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},iW=function(e,r,n,i){if(i)return e.map(function(d){return d.coordinate});var a,s,l=e.map(function(d){return d.coordinate===r&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate});return a||l.push(r),s||l.push(n),l},jl=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,l=e.range,d=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,h=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?to(l[0]-l[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=a?a.indexOf(m):m;return{coordinate:i(y)+h,value:m,offset:h}});return p.filter(function(m){return!a1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:i(m)+h,value:m,index:y,offset:h}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(m){return{coordinate:i(m)+h,value:m,offset:h}}):i.domain().map(function(m,y){return{coordinate:i(m)+h,value:a?a[m]:m,index:y,offset:h}})},jS=new WeakMap,vv=function(e,r){if(typeof r!="function")return e;jS.has(e)||jS.set(e,new WeakMap);var n=jS.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},aW=function(e,r,n){var i=e.scale,a=e.type,s=e.layout,l=e.axisType;if(i==="auto")return s==="radial"&&l==="radiusAxis"?{scale:rg(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:Xb(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:mm(),realScaleType:"point"}:a==="category"?{scale:rg(),realScaleType:"band"}:{scale:Xb(),realScaleType:"linear"};if(Fd(i)){var d="scale".concat(j2(i));return{scale:(fB[d]||mm)(),realScaleType:fB[d]?d:"point"}}return qt(i)?{scale:i}:{scale:mm(),realScaleType:"point"}},kB=1e-4,sW=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-kB,s=Math.max(i[0],i[1])+kB,l=e(r[0]),d=e(r[n-1]);(l<a||l>s||d<a||d>s)&&e.domain([r[0],r[n-1]])}},dve=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},hve=function(e,r){if(!r||r.length!==2||!lt(r[0])||!lt(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!lt(e[0])||e[0]<n)&&(a[0]=n),(!lt(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},fve=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,l=0;l<r;++l){var d=a1(e[l][n][1])?e[l][n][0]:e[l][n][1];d>=0?(e[l][n][0]=a,e[l][n][1]=a+d,a=e[l][n][1]):(e[l][n][0]=s,e[l][n][1]=s+d,s=e[l][n][1])}},pve=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var l=a1(e[s][n][1])?e[s][n][0]:e[s][n][1];l>=0?(e[s][n][0]=a,e[s][n][1]=a+l,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},mve={sign:fve,expand:rhe,none:$h,silhouette:nhe,wiggle:ihe,positive:pve},gve=function(e,r,n){var i=r.map(function(l){return l.props.dataKey}),a=mve[n],s=the().keys(i).value(function(l,d){return+Ki(l,d,0)}).order(CA).offset(a);return s(e)},yve=function(e,r,n,i,a,s){if(!e)return null;var l=s?r.reverse():r,d={},h=l.reduce(function(m,y){var b,T=(b=y.type)!==null&&b!==void 0&&b.defaultProps?zn(zn({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return m;var N=T[n],C=m[N]||{hasStack:!1,stackGroups:{}};if(yi(S)){var k=C.stackGroups[S]||{numericAxisId:n,cateAxisId:i,items:[]};k.items.push(y),C.hasStack=!0,C.stackGroups[S]=k}else C.stackGroups[s1("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[y]};return zn(zn({},m),{},xh({},N,C))},d),p={};return Object.keys(h).reduce(function(m,y){var b=h[y];if(b.hasStack){var T={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(S,w){var N=b.stackGroups[w];return zn(zn({},S),{},xh({},w,{numericAxisId:n,cateAxisId:i,items:N.items,stackedData:gve(e,N.items,a)}))},T)}return zn(zn({},m),{},xh({},y,b))},p)},oW=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,l=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=Oye(h,a,l);return e.domain([q2(p),F2(p)]),{niceTicks:p}}if(a&&i==="number"){var m=e.domain(),y=Iye(m,a,l);return{niceTicks:y}}return null};function CB(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Qt(i[e.dataKey])){var l=Cb(r,"value",i[e.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var d=Ki(i,Qt(s)?e.dataKey:s);return Qt(d)?null:e.scale(d)}var OB=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var d=Ki(s,r.dataKey,r.domain[l]);return Qt(d)?null:r.scale(d)-a/2+i},vve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},bve=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?zn(zn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(yi(a)){var s=r[a];if(s){var l=s.items.indexOf(e);return l>=0?s.stackedData[l]:null}}return null},xve=function(e){return e.reduce(function(r,n){return[q2(n.concat([r[0]]).filter(lt)),F2(n.concat([r[1]]).filter(lt))]},[1/0,-1/0])},lW=function(e,r,n){return Object.keys(e).reduce(function(i,a){var s=e[a],l=s.stackedData,d=l.reduce(function(h,p){var m=xve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},IB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,t8=function(e,r,n){if(qt(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(lt(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(IB.test(e[0])){var a=+IB.exec(e[0])[1];i[0]=r[0]-a}else qt(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(lt(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(RB.test(e[1])){var s=+RB.exec(e[1])[1];i[1]=r[1]+s}else qt(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},rx=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=dN(r,function(m){return m.coordinate}),s=1/0,l=1,d=a.length;l<d;l++){var h=a[l],p=a[l-1];s=Math.min((h.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},MB=function(e,r,n){return!e||!e.length||h1(e,Os(n,"type.defaultProps.domain"))?r:e},cW=function(e,r){var n=e.type.defaultProps?zn(zn({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,l=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return zn(zn({},Ct(e,!1)),{},{dataKey:i,unit:s,formatter:l,name:a||i,color:BN(e),value:Ki(r,i),type:d,payload:r,chartType:h,hide:p})};function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function PB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PB(Object(r),!0).forEach(function(n){uW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uW(t,e,r){return e=wve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wve(t){var e=_ve(t,"string");return dg(e)=="symbol"?e:e+""}function _ve(t,e){if(dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sve(t,e){return Nve(t)||Eve(t,e)||Ave(t,e)||Tve()}function Tve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ave(t,e){if(t){if(typeof t=="string")return DB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DB(t,e)}}function DB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Eve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function Nve(t){if(Array.isArray(t))return t}var nx=Math.PI/180,jve=function(e){return e*180/Math.PI},Jr=function(e,r,n,i){return{x:e+Math.cos(-nx*i)*n,y:r+Math.sin(-nx*i)*n}},kve=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Cve=function(e,r,n,i,a){var s=e.width,l=e.height,d=e.startAngle,h=e.endAngle,p=ro(e.cx,s,s/2),m=ro(e.cy,l,l/2),y=kve(s,l,n),b=ro(e.innerRadius,y,0),T=ro(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,N){var C=r[N],k=C.domain,$=C.reversed,I;if(Qt(C.range))i==="angleAxis"?I=[d,h]:i==="radiusAxis"&&(I=[b,T]),$&&(I=[I[1],I[0]]);else{I=C.range;var L=I,E=Sve(L,2);d=E[0],h=E[1]}var A=aW(C,a),R=A.realScaleType,F=A.scale;F.domain(k).range(I),sW(F);var P=oW(F,yl(yl({},C),{},{realScaleType:R})),B=yl(yl(yl({},C),P),{},{range:I,radius:T,realScaleType:R,scale:F,cx:p,cy:m,innerRadius:b,outerRadius:T,startAngle:d,endAngle:h});return yl(yl({},w),{},uW({},N,B))},{})},Ove=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},Ive=function(e,r){var n=e.x,i=e.y,a=r.cx,s=r.cy,l=Ove({x:n,y:i},{x:a,y:s});if(l<=0)return{radius:l};var d=(n-a)/l,h=Math.acos(d);return i>s&&(h=2*Math.PI-h),{radius:l,angle:jve(h),angleInRadian:h}},Rve=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},Mve=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),l=Math.min(a,s);return e+l*360},LB=function(e,r){var n=e.x,i=e.y,a=Ive({x:n,y:i},r),s=a.radius,l=a.angle,d=r.innerRadius,h=r.outerRadius;if(s<d||s>h)return!1;if(s===0)return!0;var p=Rve(r),m=p.startAngle,y=p.endAngle,b=l,T;if(m<=y){for(;b>y;)b-=360;for(;b<m;)b+=360;T=b>=m&&b<=y}else{for(;b>m;)b-=360;for(;b<y;)b+=360;T=b>=y&&b<=m}return T?yl(yl({},r),{},{radius:s,angle:Mve(b,r)}):null},dW=function(e){return!M.isValidElement(e)&&!qt(e)&&typeof e!="boolean"?e.className:""};function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}var Pve=["offset"];function Dve(t){return zve(t)||Uve(t)||Bve(t)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(t,e){if(t){if(typeof t=="string")return r8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8(t,e)}}function Uve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zve(t){if(Array.isArray(t))return r8(t)}function r8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $ve(t,e){if(t==null)return{};var r=Vve(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function BB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(r),!0).forEach(function(n){Fve(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fve(t,e,r){return e=qve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qve(t){var e=Hve(t,"string");return hg(e)=="symbol"?e:e+""}function Hve(t,e){if(hg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fg(){return fg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fg.apply(this,arguments)}var Gve=function(e){var r=e.value,n=e.formatter,i=Qt(e.children)?r:e.children;return qt(n)?n(i):i},Kve=function(e,r){var n=to(r-e),i=Math.min(Math.abs(r-e),360);return n*i},Wve=function(e,r,n){var i=e.position,a=e.viewBox,s=e.offset,l=e.className,d=a,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,b=d.startAngle,T=d.endAngle,S=d.clockWise,w=(m+y)/2,N=Kve(b,T),C=N>=0?1:-1,k,$;i==="insideStart"?(k=b+C*s,$=S):i==="insideEnd"?(k=T-C*s,$=!S):i==="end"&&(k=T+C*s,$=S),$=N<=0?$:!$;var I=Jr(h,p,w,k),L=Jr(h,p,w,k+($?1:-1)*359),E="M".concat(I.x,",").concat(I.y,`
    A`).concat(w,",").concat(w,",0,1,").concat($?0:1,`,
    `).concat(L.x,",").concat(L.y),A=Qt(e.id)?s1("recharts-radial-line-"):e.id;return te.createElement("text",fg({},n,{dominantBaseline:"central",className:tr("recharts-radial-bar-label",l)}),te.createElement("defs",null,te.createElement("path",{id:A,d:E})),te.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Xve=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,s=a.cx,l=a.cy,d=a.innerRadius,h=a.outerRadius,p=a.startAngle,m=a.endAngle,y=(p+m)/2;if(i==="outside"){var b=Jr(s,l,h+n,y),T=b.x,S=b.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,N=Jr(s,l,w,y),C=N.x,k=N.y;return{x:C,y:k,textAnchor:"middle",verticalAnchor:"middle"}},Qve=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=r,l=s.x,d=s.y,h=s.width,p=s.height,m=p>=0?1:-1,y=m*i,b=m>0?"end":"start",T=m>0?"start":"end",S=h>=0?1:-1,w=S*i,N=S>0?"end":"start",C=S>0?"start":"end";if(a==="top"){var k={x:l+h/2,y:d-m*i,textAnchor:"middle",verticalAnchor:b};return pi(pi({},k),n?{height:Math.max(d-n.y,0),width:h}:{})}if(a==="bottom"){var $={x:l+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:T};return pi(pi({},$),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(a==="left"){var I={x:l-w,y:d+p/2,textAnchor:N,verticalAnchor:"middle"};return pi(pi({},I),n?{width:Math.max(I.x-n.x,0),height:p}:{})}if(a==="right"){var L={x:l+h+w,y:d+p/2,textAnchor:C,verticalAnchor:"middle"};return pi(pi({},L),n?{width:Math.max(n.x+n.width-L.x,0),height:p}:{})}var E=n?{width:h,height:p}:{};return a==="insideLeft"?pi({x:l+w,y:d+p/2,textAnchor:C,verticalAnchor:"middle"},E):a==="insideRight"?pi({x:l+h-w,y:d+p/2,textAnchor:N,verticalAnchor:"middle"},E):a==="insideTop"?pi({x:l+h/2,y:d+y,textAnchor:"middle",verticalAnchor:T},E):a==="insideBottom"?pi({x:l+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:b},E):a==="insideTopLeft"?pi({x:l+w,y:d+y,textAnchor:C,verticalAnchor:T},E):a==="insideTopRight"?pi({x:l+h-w,y:d+y,textAnchor:N,verticalAnchor:T},E):a==="insideBottomLeft"?pi({x:l+w,y:d+p-y,textAnchor:C,verticalAnchor:b},E):a==="insideBottomRight"?pi({x:l+h-w,y:d+p-y,textAnchor:N,verticalAnchor:b},E):Ef(a)&&(lt(a.x)||vd(a.x))&&(lt(a.y)||vd(a.y))?pi({x:l+ro(a.x,h),y:d+ro(a.y,p),textAnchor:"end",verticalAnchor:"end"},E):pi({x:l+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},E)},Yve=function(e){return"cx"in e&&lt(e.cx)};function Fi(t){var e=t.offset,r=e===void 0?5:e,n=$ve(t,Pve),i=pi({offset:r},n),a=i.viewBox,s=i.position,l=i.value,d=i.children,h=i.content,p=i.className,m=p===void 0?"":p,y=i.textBreakAll;if(!a||Qt(l)&&Qt(d)&&!M.isValidElement(h)&&!qt(h))return null;if(M.isValidElement(h))return M.cloneElement(h,i);var b;if(qt(h)){if(b=M.createElement(h,i),M.isValidElement(b))return b}else b=Gve(i);var T=Yve(a),S=Ct(i,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return Wve(i,b,S);var w=T?Xve(i):Qve(i);return te.createElement(Gh,fg({className:tr("recharts-label",m)},S,w,{breakAll:y}),b)}Fi.displayName="Label";var hW=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,l=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,b=e.top,T=e.left,S=e.width,w=e.height,N=e.clockWise,C=e.labelViewBox;if(C)return C;if(lt(S)&&lt(w)){if(lt(m)&&lt(y))return{x:m,y,width:S,height:w};if(lt(b)&&lt(T))return{x:b,y:T,width:S,height:w}}return lt(m)&&lt(y)?{x:m,y,width:0,height:0}:lt(r)&&lt(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:h||0,outerRadius:p||d||l||0,clockWise:N}:e.viewBox?e.viewBox:{}},Zve=function(e,r){return e?e===!0?te.createElement(Fi,{key:"label-implicit",viewBox:r}):yi(e)?te.createElement(Fi,{key:"label-implicit",viewBox:r,value:e}):M.isValidElement(e)?e.type===Fi?M.cloneElement(e,{key:"label-implicit",viewBox:r}):te.createElement(Fi,{key:"label-implicit",content:e,viewBox:r}):qt(e)?te.createElement(Fi,{key:"label-implicit",content:e,viewBox:r}):Ef(e)?te.createElement(Fi,fg({viewBox:r},e,{key:"label-implicit"})):null:null},Jve=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=hW(e),s=us(i,Fi).map(function(d,h){return M.cloneElement(d,{viewBox:r||a,key:"label-".concat(h)})});if(!n)return s;var l=Zve(e.label,r||a);return[l].concat(Dve(s))};Fi.parseViewBox=hW;Fi.renderCallByParent=Jve;var kS,UB;function ebe(){if(UB)return kS;UB=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return kS=t,kS}var tbe=ebe();const fW=Ir(tbe);function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}var rbe=["valueAccessor"],nbe=["data","dataKey","clockWise","id","textBreakAll"];function ibe(t){return lbe(t)||obe(t)||sbe(t)||abe()}function abe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sbe(t,e){if(t){if(typeof t=="string")return n8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n8(t,e)}}function obe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lbe(t){if(Array.isArray(t))return n8(t)}function n8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ix(){return ix=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ix.apply(this,arguments)}function zB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $B(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(r),!0).forEach(function(n){cbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cbe(t,e,r){return e=ube(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ube(t){var e=dbe(t,"string");return pg(e)=="symbol"?e:e+""}function dbe(t,e){if(pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VB(t,e){if(t==null)return{};var r=hbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var fbe=function(e){return Array.isArray(e.value)?fW(e.value):e.value};function Pl(t){var e=t.valueAccessor,r=e===void 0?fbe:e,n=VB(t,rbe),i=n.data,a=n.dataKey,s=n.clockWise,l=n.id,d=n.textBreakAll,h=VB(n,nbe);return!i||!i.length?null:te.createElement(jr,{className:"recharts-label-list"},i.map(function(p,m){var y=Qt(a)?r(p,m):Ki(p&&p.payload,a),b=Qt(l)?{}:{id:"".concat(l,"-").concat(m)};return te.createElement(Fi,ix({},Ct(p,!0),h,b,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:Fi.parseViewBox(Qt(s)?p:$B($B({},p),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Pl.displayName="LabelList";function pbe(t,e){return t?t===!0?te.createElement(Pl,{key:"labelList-implicit",data:e}):te.isValidElement(t)||qt(t)?te.createElement(Pl,{key:"labelList-implicit",data:e,content:t}):Ef(t)?te.createElement(Pl,ix({data:e},t,{key:"labelList-implicit"})):null:null}function mbe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=us(n,Pl).map(function(s,l){return M.cloneElement(s,{data:e,key:"labelList-".concat(l)})});if(!r)return i;var a=pbe(t.label,e);return[a].concat(ibe(i))}Pl.renderCallByParent=mbe;function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function i8(){return i8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},i8.apply(this,arguments)}function FB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(r),!0).forEach(function(n){gbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gbe(t,e,r){return e=ybe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ybe(t){var e=vbe(t,"string");return mg(e)=="symbol"?e:e+""}function vbe(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bbe=function(e,r){var n=to(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},bv=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,l=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(l?1:-1)+i,m=Math.asin(d/p)/nx,y=h?a:a+s*m,b=Jr(r,n,p,y),T=Jr(r,n,i,y),S=h?a-s*m:a,w=Jr(r,n,p*Math.cos(m*nx),S);return{center:b,circleTangency:T,lineTangency:w,theta:m}},pW=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,l=e.endAngle,d=bbe(s,l),h=s+d,p=Jr(r,n,a,s),m=Jr(r,n,a,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(i>0){var b=Jr(r,n,i,s),T=Jr(r,n,i,h);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=h),`,
            `).concat(b.x,",").concat(b.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},xbe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,l=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=to(p-h),y=bv({cx:r,cy:n,radius:a,angle:h,sign:m,cornerRadius:s,cornerIsExternal:d}),b=y.circleTangency,T=y.lineTangency,S=y.theta,w=bv({cx:r,cy:n,radius:a,angle:p,sign:-m,cornerRadius:s,cornerIsExternal:d}),N=w.circleTangency,C=w.lineTangency,k=w.theta,$=d?Math.abs(h-p):Math.abs(h-p)-S-k;if($<0)return l?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):pW({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:h,endAngle:p});var I="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+($>180),",").concat(+(m<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(C.x,",").concat(C.y,`
  `);if(i>0){var L=bv({cx:r,cy:n,radius:i,angle:h,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),E=L.circleTangency,A=L.lineTangency,R=L.theta,F=bv({cx:r,cy:n,radius:i,angle:p,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),P=F.circleTangency,B=F.lineTangency,D=F.theta,Q=d?Math.abs(h-p):Math.abs(h-p)-R-D;if(Q<0&&s===0)return"".concat(I,"L").concat(r,",").concat(n,"Z");I+="L".concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Q>180),",").concat(+(m>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else I+="L".concat(r,",").concat(n,"Z");return I},wbe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mW=function(e){var r=qB(qB({},wbe),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(s<a||p===m)return null;var b=tr("recharts-sector",y),T=s-a,S=ro(l,T,0,!0),w;return S>0&&Math.abs(p-m)<360?w=xbe({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=pW({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:p,endAngle:m}),te.createElement("path",i8({},Ct(r,!0),{className:b,d:w,role:"img"}))};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function a8(){return a8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a8.apply(this,arguments)}function HB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(r),!0).forEach(function(n){_be(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _be(t,e,r){return e=Sbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sbe(t){var e=Tbe(t,"string");return gg(e)=="symbol"?e:e+""}function Tbe(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KB={curveBasisClosed:q0e,curveBasisOpen:H0e,curveBasis:F0e,curveBumpX:k0e,curveBumpY:C0e,curveLinearClosed:G0e,curveLinear:C2,curveMonotoneX:K0e,curveMonotoneY:W0e,curveNatural:X0e,curveStep:Q0e,curveStepAfter:Z0e,curveStepBefore:Y0e},xv=function(e){return e.x===+e.x&&e.y===+e.y},$p=function(e){return e.x},Vp=function(e){return e.y},Abe=function(e,r){if(qt(e))return e;var n="curve".concat(j2(e));return(n==="curveMonotone"||n==="curveBump")&&r?KB["".concat(n).concat(r==="vertical"?"Y":"X")]:KB[n]||C2},Ebe=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,s=e.baseLine,l=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=Abe(n,l),m=h?a.filter(function(S){return xv(S)}):a,y;if(Array.isArray(s)){var b=h?s.filter(function(S){return xv(S)}):s,T=m.map(function(S,w){return GB(GB({},S),{},{base:b[w]})});return l==="vertical"?y=dv().y(Vp).x1($p).x0(function(S){return S.base.x}):y=dv().x($p).y1(Vp).y0(function(S){return S.base.y}),y.defined(xv).curve(p),y(T)}return l==="vertical"&&lt(s)?y=dv().y(Vp).x1($p).x0(s):lt(s)?y=dv().x($p).y1(Vp).y0(s):y=fG().x($p).y(Vp),y.defined(xv).curve(p),y(m)},s8=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Ebe(e):i;return M.createElement("path",a8({},Ct(e,!1),Ob(e),{className:tr("recharts-curve",r),d:s,ref:a}))},CS={exports:{}},OS,WB;function Nbe(){if(WB)return OS;WB=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return OS=t,OS}var IS,XB;function jbe(){if(XB)return IS;XB=1;var t=Nbe();function e(){}function r(){}return r.resetWarningCache=e,IS=function(){function n(s,l,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},IS}var QB;function kbe(){return QB||(QB=1,CS.exports=jbe()()),CS.exports}var Cbe=kbe();const Pr=Ir(Cbe),{getOwnPropertyNames:Obe,getOwnPropertySymbols:Ibe}=Object,{hasOwnProperty:Rbe}=Object.prototype;function RS(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function wv(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:a}=i,s=a.get(r),l=a.get(n);if(s&&l)return s===n&&l===r;a.set(r,n),a.set(n,r);const d=t(r,n,i);return a.delete(r),a.delete(n),d}}function Mbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function YB(t){return Obe(t).concat(Ibe(t))}const Pbe=Object.hasOwn||((t,e)=>Rbe.call(t,e));function s0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Dbe="__v",Lbe="__o",Bbe="_owner",{getOwnPropertyDescriptor:ZB,keys:JB}=Object;function Ube(t,e){return t.byteLength===e.byteLength&&ax(new Uint8Array(t),new Uint8Array(e))}function zbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function $be(t,e){return t.byteLength===e.byteLength&&ax(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Vbe(t,e){return s0(t.getTime(),e.getTime())}function Fbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qbe(t,e){return t===e}function eU(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.entries();let s,l,d=0;for(;(s=a.next())&&!s.done;){const h=e.entries();let p=!1,m=0;for(;(l=h.next())&&!l.done;){if(i[m]){m++;continue}const y=s.value,b=l.value;if(r.equals(y[0],b[0],d,m,t,e,r)&&r.equals(y[1],b[1],y[0],b[0],t,e,r)){p=i[m]=!0;break}m++}if(!p)return!1;d++}return!0}const Hbe=s0;function Gbe(t,e,r){const n=JB(t);let i=n.length;if(JB(e).length!==i)return!1;for(;i-- >0;)if(!gW(t,e,r,n[i]))return!1;return!0}function Fp(t,e,r){const n=YB(t);let i=n.length;if(YB(e).length!==i)return!1;let a,s,l;for(;i-- >0;)if(a=n[i],!gW(t,e,r,a)||(s=ZB(t,a),l=ZB(e,a),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function Kbe(t,e){return s0(t.valueOf(),e.valueOf())}function Wbe(t,e){return t.source===e.source&&t.flags===e.flags}function tU(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.values();let s,l;for(;(s=a.next())&&!s.done;){const d=e.values();let h=!1,p=0;for(;(l=d.next())&&!l.done;){if(!i[p]&&r.equals(s.value,l.value,s.value,l.value,t,e,r)){h=i[p]=!0;break}p++}if(!h)return!1}return!0}function ax(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Xbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function gW(t,e,r,n){return(n===Bbe||n===Lbe||n===Dbe)&&(t.$$typeof||e.$$typeof)?!0:Pbe(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Qbe="[object ArrayBuffer]",Ybe="[object Arguments]",Zbe="[object Boolean]",Jbe="[object DataView]",exe="[object Date]",txe="[object Error]",rxe="[object Map]",nxe="[object Number]",ixe="[object Object]",axe="[object RegExp]",sxe="[object Set]",oxe="[object String]",lxe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},cxe="[object URL]",uxe=Object.prototype.toString;function dxe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:l,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:T}){return function(w,N,C){if(w===N)return!0;if(w==null||N==null)return!1;const k=typeof w;if(k!==typeof N)return!1;if(k!=="object")return k==="number"?l(w,N,C):k==="function"?a(w,N,C):!1;const $=w.constructor;if($!==N.constructor)return!1;if($===Object)return d(w,N,C);if(Array.isArray(w))return e(w,N,C);if($===Date)return n(w,N,C);if($===RegExp)return p(w,N,C);if($===Map)return s(w,N,C);if($===Set)return m(w,N,C);const I=uxe.call(w);if(I===exe)return n(w,N,C);if(I===axe)return p(w,N,C);if(I===rxe)return s(w,N,C);if(I===sxe)return m(w,N,C);if(I===ixe)return typeof w.then!="function"&&typeof N.then!="function"&&d(w,N,C);if(I===cxe)return b(w,N,C);if(I===txe)return i(w,N,C);if(I===Ybe)return d(w,N,C);if(lxe[I])return y(w,N,C);if(I===Qbe)return t(w,N,C);if(I===Jbe)return r(w,N,C);if(I===Zbe||I===nxe||I===oxe)return h(w,N,C);if(T){let L=T[I];if(!L){const E=Mbe(w);E&&(L=T[E])}if(L)return L(w,N,C)}return!1}}function hxe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Ube,areArraysEqual:r?Fp:zbe,areDataViewsEqual:$be,areDatesEqual:Vbe,areErrorsEqual:Fbe,areFunctionsEqual:qbe,areMapsEqual:r?RS(eU,Fp):eU,areNumbersEqual:Hbe,areObjectsEqual:r?Fp:Gbe,arePrimitiveWrappersEqual:Kbe,areRegExpsEqual:Wbe,areSetsEqual:r?RS(tU,Fp):tU,areTypedArraysEqual:r?RS(ax,Fp):ax,areUrlsEqual:Xbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=wv(n.areArraysEqual),a=wv(n.areMapsEqual),s=wv(n.areObjectsEqual),l=wv(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return n}function fxe(t){return function(e,r,n,i,a,s,l){return t(e,r,l)}}function pxe({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(l,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(l,d,{cache:h,equals:n,meta:p,strict:i})};if(t)return function(l,d){return e(l,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(l,d){return e(l,d,a)}}const mxe=Nu();Nu({strict:!0});Nu({circular:!0});Nu({circular:!0,strict:!0});Nu({createInternalComparator:()=>s0});Nu({strict:!0,createInternalComparator:()=>s0});Nu({circular:!0,createInternalComparator:()=>s0});Nu({circular:!0,createInternalComparator:()=>s0,strict:!0});function Nu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,a=hxe(t),s=dxe(a),l=r?r(s):fxe(s);return pxe({circular:e,comparator:s,createState:n,equals:l,strict:i})}function gxe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function rU(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):gxe(i)};requestAnimationFrame(n)}function o8(t){"@babel/helpers - typeof";return o8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o8(t)}function yxe(t){return wxe(t)||xxe(t)||bxe(t)||vxe()}function vxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bxe(t,e){if(t){if(typeof t=="string")return nU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nU(t,e)}}function nU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wxe(t){if(Array.isArray(t))return t}function _xe(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,l=yxe(s),d=l[0],h=l.slice(1);if(typeof d=="number"){rU(i.bind(null,h),d);return}i(d),rU(i.bind(null,h));return}o8(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function iU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(r),!0).forEach(function(n){yW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yW(t,e,r){return e=Sxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Sxe(t){var e=Txe(t,"string");return yg(e)==="symbol"?e:String(e)}function Txe(t,e){if(yg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Axe=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},Exe=function(e){return e},Nxe=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ym=function(e,r){return Object.keys(r).reduce(function(n,i){return aU(aU({},n),{},yW({},i,e(i,r[i])))},{})},sU=function(e,r,n){return e.map(function(i){return"".concat(Nxe(i)," ").concat(r,"ms ").concat(n)}).join(",")};function jxe(t,e){return Oxe(t)||Cxe(t,e)||vW(t,e)||kxe()}function kxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function Oxe(t){if(Array.isArray(t))return t}function Ixe(t){return Pxe(t)||Mxe(t)||vW(t)||Rxe()}function Rxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vW(t,e){if(t){if(typeof t=="string")return l8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l8(t,e)}}function Mxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pxe(t){if(Array.isArray(t))return l8(t)}function l8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var sx=1e-4,bW=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},xW=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},oU=function(e,r){return function(n){var i=bW(e,r);return xW(i,n)}},Dxe=function(e,r){return function(n){var i=bW(e,r),a=[].concat(Ixe(i.map(function(s,l){return s*l}).slice(1)),[0]);return xW(a,n)}},lU=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,l=1;break;case"ease":i=.25,a=.1,s=.25,l=1;break;case"ease-in":i=.42,a=0,s=1,l=1;break;case"ease-out":i=.42,a=0,s=.58,l=1;break;case"ease-in-out":i=0,a=0,s=.58,l=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=jxe(h,4);i=p[0],a=p[1],s=p[2],l=p[3]}}}var m=oU(i,s),y=oU(a,l),b=Dxe(i,s),T=function(N){return N>1?1:N<0?0:N},S=function(N){for(var C=N>1?1:N,k=C,$=0;$<8;++$){var I=m(k)-C,L=b(k);if(Math.abs(I-C)<sx||L<sx)return y(k);k=T(k-I/L)}return y(k)};return S.isStepper=!1,S},Lxe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,s=e.dt,l=s===void 0?17:s,d=function(p,m,y){var b=-(p-m)*n,T=y*a,S=y+(b-T)*l/1e3,w=y*l/1e3+p;return Math.abs(w-m)<sx&&Math.abs(S)<sx?[m,0]:[w,S]};return d.isStepper=!0,d.dt=l,d},Bxe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lU(i);case"spring":return Lxe();default:if(i.split("(")[0]==="cubic-bezier")return lU(i)}return typeof i=="function"?i:null};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function cU(t){return $xe(t)||zxe(t)||wW(t)||Uxe()}function Uxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $xe(t){if(Array.isArray(t))return u8(t)}function uU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(r),!0).forEach(function(n){c8(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c8(t,e,r){return e=Vxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vxe(t){var e=Fxe(t,"string");return vg(e)==="symbol"?e:String(e)}function Fxe(t,e){if(vg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qxe(t,e){return Kxe(t)||Gxe(t,e)||wW(t,e)||Hxe()}function Hxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wW(t,e){if(t){if(typeof t=="string")return u8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u8(t,e)}}function u8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function Kxe(t){if(Array.isArray(t))return t}var ox=function(e,r,n){return e+(r-e)*n},d8=function(e){var r=e.from,n=e.to;return r!==n},Wxe=function t(e,r,n){var i=ym(function(a,s){if(d8(s)){var l=e(s.from,s.to,s.velocity),d=qxe(l,2),h=d[0],p=d[1];return zi(zi({},s),{},{from:h,velocity:p})}return s},r);return n<1?ym(function(a,s){return d8(s)?zi(zi({},s),{},{velocity:ox(s.velocity,i[a].velocity,n),from:ox(s.from,i[a].from,n)}):s},r):t(e,i,n-1)};const Xxe=(function(t,e,r,n,i){var a=Axe(t,e),s=a.reduce(function(w,N){return zi(zi({},w),{},c8({},N,[t[N],e[N]]))},{}),l=a.reduce(function(w,N){return zi(zi({},w),{},c8({},N,{from:t[N],velocity:0,to:e[N]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return ym(function(N,C){return C.from},l)},b=function(){return!Object.values(l).filter(d8).length},T=function(N){h||(h=N);var C=N-h,k=C/r.dt;l=Wxe(r,l,k),i(zi(zi(zi({},t),e),y())),h=N,b()||(d=requestAnimationFrame(m))},S=function(N){p||(p=N);var C=(N-p)/n,k=ym(function(I,L){return ox.apply(void 0,cU(L).concat([r(C)]))},s);if(i(zi(zi(zi({},t),e),k)),C<1)d=requestAnimationFrame(m);else{var $=ym(function(I,L){return ox.apply(void 0,cU(L).concat([r(1)]))},s);i(zi(zi(zi({},t),e),$))}};return m=r.isStepper?T:S,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}var Qxe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Yxe(t,e){if(t==null)return{};var r=Zxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zxe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function MS(t){return r2e(t)||t2e(t)||e2e(t)||Jxe()}function Jxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e2e(t,e){if(t){if(typeof t=="string")return h8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h8(t,e)}}function t2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function r2e(t){if(Array.isArray(t))return h8(t)}function h8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dU(Object(r),!0).forEach(function(n){tm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tm(t,e,r){return e=_W(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_W(n.key),n)}}function a2e(t,e,r){return e&&i2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _W(t){var e=s2e(t,"string");return Yh(e)==="symbol"?e:String(e)}function s2e(t,e){if(Yh(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f8(t,e)}function f8(t,e){return f8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},f8(t,e)}function l2e(t){var e=c2e();return function(){var n=lx(t),i;if(e){var a=lx(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p8(this,i)}}function p8(t,e){if(e&&(Yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m8(t)}function m8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lx(t){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lx(t)}var Do=(function(t){o2e(r,t);var e=l2e(r);function r(n,i){var a;n2e(this,r),a=e.call(this,n,i);var s=a.props,l=s.isActive,d=s.attributeName,h=s.from,p=s.to,m=s.steps,y=s.children,b=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(m8(a)),a.changeStyle=a.changeStyle.bind(m8(a)),!l||b<=0)return a.state={style:{}},typeof y=="function"&&(a.state={style:p}),p8(a);if(m&&m.length)a.state={style:m[0].style};else if(h){if(typeof y=="function")return a.state={style:h},p8(a);a.state={style:d?tm({},d,h):h}}else a.state={style:{}};return a}return a2e(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,l=a.canBegin,d=a.attributeName,h=a.shouldReAnimate,p=a.to,m=a.from,y=this.state.style;if(l){if(!s){var b={style:d?tm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(b);return}if(!(mxe(i.to,p)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||h?m:i.to;if(this.state&&y){var w={style:d?tm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(Qs(Qs({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,l=i.to,d=i.duration,h=i.easing,p=i.begin,m=i.onAnimationEnd,y=i.onAnimationStart,b=Xxe(s,l,Bxe(h),d,this.changeStyle),T=function(){a.stopJSAnimation=b()};this.manager.start([y,p,T,d,m])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,l=i.begin,d=i.onAnimationStart,h=s[0],p=h.style,m=h.duration,y=m===void 0?0:m,b=function(S,w,N){if(N===0)return S;var C=w.duration,k=w.easing,$=k===void 0?"ease":k,I=w.style,L=w.properties,E=w.onAnimationEnd,A=N>0?s[N-1]:w,R=L||Object.keys(I);if(typeof $=="function"||$==="spring")return[].concat(MS(S),[a.runJSAnimation.bind(a,{from:A.style,to:I,duration:C,easing:$}),C]);var F=sU(R,C,$),P=Qs(Qs(Qs({},A.style),I),{},{transition:F});return[].concat(MS(S),[P,C,E]).filter(Exe)};return this.manager.start([d].concat(MS(s.reduce(b,[p,Math.max(y,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=_xe());var a=i.begin,s=i.duration,l=i.attributeName,d=i.to,h=i.easing,p=i.onAnimationStart,m=i.onAnimationEnd,y=i.steps,b=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof h=="function"||typeof b=="function"||h==="spring"){this.runJSAnimation(i);return}if(y.length>1){this.runStepAnimation(i);return}var S=l?tm({},l,d):d,w=sU(Object.keys(S),s,h);T.start([p,a,Qs(Qs({},S),{},{transition:w}),s,m])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var d=Yxe(i,Qxe),h=M.Children.count(a),p=this.state.style;if(typeof a=="function")return a(p);if(!l||h===0||s<=0)return a;var m=function(b){var T=b.props,S=T.style,w=S===void 0?{}:S,N=T.className,C=M.cloneElement(b,Qs(Qs({},d),{},{style:Qs(Qs({},w),p),className:N}));return C};return h===1?m(M.Children.only(a)):te.createElement("div",null,M.Children.map(a,function(y){return m(y)}))}}]),r})(M.PureComponent);Do.displayName="Animate";Do.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Do.propTypes={from:Pr.oneOfType([Pr.object,Pr.string]),to:Pr.oneOfType([Pr.object,Pr.string]),attributeName:Pr.string,duration:Pr.number,begin:Pr.number,easing:Pr.oneOfType([Pr.string,Pr.func]),steps:Pr.arrayOf(Pr.shape({duration:Pr.number.isRequired,style:Pr.object.isRequired,easing:Pr.oneOfType([Pr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Pr.func]),properties:Pr.arrayOf("string"),onAnimationEnd:Pr.func})),children:Pr.oneOfType([Pr.node,Pr.func]),isActive:Pr.bool,canBegin:Pr.bool,onAnimationEnd:Pr.func,shouldReAnimate:Pr.bool,onAnimationStart:Pr.func,onAnimationReStart:Pr.func};var rm=_$();function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function cx(){return cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},cx.apply(this,arguments)}function u2e(t,e){return p2e(t)||f2e(t,e)||h2e(t,e)||d2e()}function d2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h2e(t,e){if(t){if(typeof t=="string")return hU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hU(t,e)}}function hU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function p2e(t){if(Array.isArray(t))return t}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){m2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m2e(t,e,r){return e=g2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g2e(t){var e=y2e(t,"string");return bg(e)=="symbol"?e:e+""}function y2e(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mU=function(e,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,d=n>=0?1:-1,h=i>=0&&n>=0||i<0&&n<0?1:0,p;if(s>0&&a instanceof Array){for(var m=[0,0,0,0],y=0,b=4;y<b;y++)m[y]=a[y]>s?s:a[y];p="M".concat(e,",").concat(r+l*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+l*m[1])),p+="L ".concat(e+n,",").concat(r+i-l*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+i)),p+="L ".concat(e+d*m[3],",").concat(r+i),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+i-l*m[3])),p+="Z"}else if(s>0&&a===+a&&a>0){var T=Math.min(s,a);p="M ".concat(e,",").concat(r+l*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n,",").concat(r+l*T,`
            L `).concat(e+n,",").concat(r+i-l*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n-d*T,",").concat(r+i,`
            L `).concat(e+d*T,",").concat(r+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(r+i-l*T," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return p},v2e=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,s=r.y,l=r.width,d=r.height;if(Math.abs(l)>0&&Math.abs(d)>0){var h=Math.min(a,a+l),p=Math.max(a,a+l),m=Math.min(s,s+d),y=Math.max(s,s+d);return n>=h&&n<=p&&i>=m&&i<=y}return!1},b2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UN=function(e){var r=pU(pU({},b2e),e),n=M.useRef(),i=M.useState(-1),a=u2e(i,2),s=a[0],l=a[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var $=n.current.getTotalLength();$&&l($)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,N=r.isAnimationActive,C=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var k=tr("recharts-rectangle",b);return C?te.createElement(Do,{canBegin:s>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:S,animationEasing:T,isActive:C},function($){var I=$.width,L=$.height,E=$.x,A=$.y;return te.createElement(Do,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:N,easing:T},te.createElement("path",cx({},Ct(r,!0),{className:k,d:mU(E,A,I,L,y),ref:n})))}):te.createElement("path",cx({},Ct(r,!0),{className:k,d:mU(d,h,p,m,y)}))},x2e=["points","className","baseLinePoints","connectNulls"];function oh(){return oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oh.apply(this,arguments)}function w2e(t,e){if(t==null)return{};var r=_2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function gU(t){return E2e(t)||A2e(t)||T2e(t)||S2e()}function S2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T2e(t,e){if(t){if(typeof t=="string")return g8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g8(t,e)}}function A2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function E2e(t){if(Array.isArray(t))return g8(t)}function g8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yU=function(e){return e&&e.x===+e.x&&e.y===+e.y},N2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){yU(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),yU(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},vm=function(e,r){var n=N2e(e);r&&(n=[n.reduce(function(a,s){return[].concat(gU(a),gU(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,l,d){return"".concat(s).concat(d===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},j2e=function(e,r,n){var i=vm(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(vm(r.reverse(),n).slice(1))},SW=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=w2e(e,x2e);if(!r||!r.length)return null;var l=tr("recharts-polygon",n);if(i&&i.length){var d=s.stroke&&s.stroke!=="none",h=j2e(r,i,a);return te.createElement("g",{className:l},te.createElement("path",oh({},Ct(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:h})),d?te.createElement("path",oh({},Ct(s,!0),{fill:"none",d:vm(r,a)})):null,d?te.createElement("path",oh({},Ct(s,!0),{fill:"none",d:vm(i,a)})):null)}var p=vm(r,a);return te.createElement("path",oh({},Ct(s,!0),{fill:p.slice(-1)==="Z"?s.fill:"none",className:l,d:p}))};function y8(){return y8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y8.apply(this,arguments)}var K2=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=tr("recharts-dot",a);return r===+r&&n===+n&&i===+i?M.createElement("circle",y8({},Ct(e,!1),Ob(e),{className:s,cx:r,cy:n,r:i})):null};function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}var k2e=["x","y","top","left","width","height","className"];function v8(){return v8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},v8.apply(this,arguments)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function C2e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){O2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O2e(t,e,r){return e=I2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I2e(t){var e=R2e(t,"string");return xg(e)=="symbol"?e:e+""}function R2e(t,e){if(xg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M2e(t,e){if(t==null)return{};var r=P2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var D2e=function(e,r,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},L2e=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.top,l=s===void 0?0:s,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,b=y===void 0?0:y,T=e.className,S=M2e(e,k2e),w=C2e({x:n,y:a,top:l,left:h,width:m,height:b},S);return!lt(n)||!lt(a)||!lt(m)||!lt(b)||!lt(l)||!lt(h)?null:te.createElement("path",v8({},Ct(w,!0),{className:tr("recharts-cross",T),d:D2e(n,a,m,b,l,h)}))},B2e=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function U2e(t,e){if(t==null)return{};var r=z2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function z2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wl.apply(this,arguments)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _g(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){$2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $2e(t,e,r){return e=V2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function V2e(t){var e=F2e(t,"string");return wg(e)=="symbol"?e:e+""}function F2e(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var q2e=function(e,r,n,i){var a="";return i.forEach(function(s,l){var d=Jr(r,n,e,s);l?a+="L ".concat(d.x,",").concat(d.y):a+="M ".concat(d.x,",").concat(d.y)}),a+="Z",a},H2e=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.polarAngles,l=e.radialLines;if(!s||!s.length||!l)return null;var d=_g({stroke:"#ccc"},Ct(e,!1));return te.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(h){var p=Jr(r,n,i,h),m=Jr(r,n,a,h);return te.createElement("line",Wl({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},G2e=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.index,s=_g(_g({stroke:"#ccc"},Ct(e,!1)),{},{fill:"none"});return te.createElement("circle",Wl({},s,{className:tr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:r,cy:n,r:i}))},K2e=function(e){var r=e.radius,n=e.index,i=_g(_g({stroke:"#ccc"},Ct(e,!1)),{},{fill:"none"});return te.createElement("path",Wl({},i,{className:tr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:q2e(r,e.cx,e.cy,e.polarAngles)}))},W2e=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:te.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(i,a){var s=a;return n==="circle"?te.createElement(G2e,Wl({key:s},e,{radius:i,index:a})):te.createElement(K2e,Wl({key:s},e,{radius:i,index:a}))}))},TW=function(e){var r=e.cx,n=r===void 0?0:r,i=e.cy,a=i===void 0?0:i,s=e.innerRadius,l=s===void 0?0:s,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,b=y===void 0?!0:y,T=U2e(e,B2e);return h<=0?null:te.createElement("g",{className:"recharts-polar-grid"},te.createElement(H2e,Wl({cx:n,cy:a,innerRadius:l,outerRadius:h,gridType:m,radialLines:b},T)),te.createElement(W2e,Wl({cx:n,cy:a,innerRadius:l,outerRadius:h,gridType:m,radialLines:b},T)))};TW.displayName="PolarGrid";var PS,xU;function X2e(){if(xU)return PS;xU=1;var t=V2(),e=LK(),r=Vo();function n(i,a){return i&&i.length?t(i,r(a,2),e):void 0}return PS=n,PS}var Q2e=X2e();const Y2e=Ir(Q2e);var DS,wU;function Z2e(){if(wU)return DS;wU=1;var t=V2(),e=Vo(),r=BK();function n(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return DS=n,DS}var J2e=Z2e();const e4e=Ir(J2e);var t4e=["cx","cy","angle","ticks","axisLine"],r4e=["ticks","tick","angle","tickFormatter","stroke"];function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bm.apply(this,arguments)}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ad(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){W2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function SU(t,e){if(t==null)return{};var r=n4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function n4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function i4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EW(n.key),n)}}function a4e(t,e,r){return e&&TU(t.prototype,e),r&&TU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s4e(t,e,r){return e=ux(e),o4e(t,AW()?Reflect.construct(e,r||[],ux(t).constructor):e.apply(t,r))}function o4e(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l4e(t)}function l4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AW=function(){return!!t})()}function ux(t){return ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ux(t)}function c4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b8(t,e)}function b8(t,e){return b8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},b8(t,e)}function W2(t,e,r){return e=EW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function EW(t){var e=u4e(t,"string");return Zh(e)=="symbol"?e:e+""}function u4e(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var p1=(function(t){function e(){return i4e(this,e),s4e(this,e,arguments)}return c4e(e,t),a4e(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,l=a.cx,d=a.cy;return Jr(l,d,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,d=Y2e(l,function(p){return p.coordinate||0}),h=e4e(l,function(p){return p.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,d=n.axisLine,h=SU(n,t4e),p=l.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),m=Jr(i,a,p[0],s),y=Jr(i,a,p[1],s),b=ad(ad(ad({},Ct(h,!1)),{},{fill:"none"},Ct(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return te.createElement("line",bm({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.angle,d=i.tickFormatter,h=i.stroke,p=SU(i,r4e),m=this.getTickTextAnchor(),y=Ct(p,!1),b=Ct(s,!1),T=a.map(function(S,w){var N=n.getTickValueCoord(S),C=ad(ad(ad(ad({textAnchor:m,transform:"rotate(".concat(90-l,", ").concat(N.x,", ").concat(N.y,")")},y),{},{stroke:"none",fill:h},b),{},{index:w},N),{},{payload:S});return te.createElement(jr,bm({className:tr("recharts-polar-radius-axis-tick",dW(s)),key:"tick-".concat(S.coordinate)},qd(n.props,S,w)),e.renderTickItem(s,C,d?d(S.value,w):S.value))});return te.createElement(jr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:te.createElement(jr,{className:tr("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Fi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return te.isValidElement(n)?s=te.cloneElement(n,i):qt(n)?s=n(i):s=te.createElement(Gh,bm({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(M.PureComponent);W2(p1,"displayName","PolarRadiusAxis");W2(p1,"axisType","radiusAxis");W2(p1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gd.apply(this,arguments)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){X2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jW(n.key),n)}}function h4e(t,e,r){return e&&EU(t.prototype,e),r&&EU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f4e(t,e,r){return e=dx(e),p4e(t,NW()?Reflect.construct(e,r||[],dx(t).constructor):e.apply(t,r))}function p4e(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m4e(t)}function m4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function NW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NW=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dx(t)}function g4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x8(t,e)}function x8(t,e){return x8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},x8(t,e)}function X2(t,e,r){return e=jW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jW(t){var e=y4e(t,"string");return Jh(e)=="symbol"?e:e+""}function y4e(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var v4e=Math.PI/180,NU=1e-5,m1=(function(t){function e(){return d4e(this,e),f4e(this,e,arguments)}return g4e(e,t),h4e(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,l=i.radius,d=i.orientation,h=i.tickSize,p=h||8,m=Jr(a,s,l,n.coordinate),y=Jr(a,s,l+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*v4e),s;return a>NU?s=i==="outer"?"start":"end":a<-NU?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,l=n.axisLine,d=n.axisLineType,h=sd(sd({},Ct(this.props,!1)),{},{fill:"none"},Ct(l,!1));if(d==="circle")return te.createElement(K2,gd({className:"recharts-polar-angle-axis-line"},h,{cx:i,cy:a,r:s}));var p=this.props.ticks,m=p.map(function(y){return Jr(i,a,s,y.coordinate)});return te.createElement(SW,gd({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.tickLine,d=i.tickFormatter,h=i.stroke,p=Ct(this.props,!1),m=Ct(s,!1),y=sd(sd({},p),{},{fill:"none"},Ct(l,!1)),b=a.map(function(T,S){var w=n.getTickLineCoord(T),N=n.getTickTextAnchor(T),C=sd(sd(sd({textAnchor:N},p),{},{stroke:"none",fill:h},m),{},{index:S,payload:T,x:w.x2,y:w.y2});return te.createElement(jr,gd({className:tr("recharts-polar-angle-axis-tick",dW(s)),key:"tick-".concat(T.coordinate)},qd(n.props,T,S)),l&&te.createElement("line",gd({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,C,d?d(T.value,S):T.value))});return te.createElement(jr,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:te.createElement(jr,{className:tr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return te.isValidElement(n)?s=te.cloneElement(n,i):qt(n)?s=n(i):s=te.createElement(Gh,gd({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(M.PureComponent);X2(m1,"displayName","PolarAngleAxis");X2(m1,"axisType","angleAxis");X2(m1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var LS,jU;function b4e(){if(jU)return LS;jU=1;var t=DG(),e=t(Object.getPrototypeOf,Object);return LS=e,LS}var BS,kU;function x4e(){if(kU)return BS;kU=1;var t=Jl(),e=b4e(),r=ec(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,l=a.hasOwnProperty,d=s.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=l.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return BS=h,BS}var w4e=x4e();const _4e=Ir(w4e);var US,CU;function S4e(){if(CU)return US;CU=1;var t=Jl(),e=ec(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return US=n,US}var T4e=S4e();const A4e=Ir(T4e);function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function hx(){return hx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hx.apply(this,arguments)}function E4e(t,e){return C4e(t)||k4e(t,e)||j4e(t,e)||N4e()}function N4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j4e(t,e){if(t){if(typeof t=="string")return OU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function k4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function C4e(t){if(Array.isArray(t))return t}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){O4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function O4e(t,e,r){return e=I4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I4e(t){var e=R4e(t,"string");return Sg(e)=="symbol"?e:e+""}function R4e(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MU=function(e,r,n,i,a){var s=n-i,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-s/2,",").concat(r+a),l+="L ".concat(e+n-s/2-i,",").concat(r+a),l+="L ".concat(e,",").concat(r," Z"),l},M4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},P4e=function(e){var r=RU(RU({},M4e),e),n=M.useRef(),i=M.useState(-1),a=E4e(i,2),s=a[0],l=a[1];M.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var k=n.current.getTotalLength();k&&l(k)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,N=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var C=tr("recharts-trapezoid",b);return N?te.createElement(Do,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:S,animationEasing:T,isActive:N},function(k){var $=k.upperWidth,I=k.lowerWidth,L=k.height,E=k.x,A=k.y;return te.createElement(Do,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},te.createElement("path",hx({},Ct(r,!0),{className:C,d:MU(E,A,$,I,L),ref:n})))}):te.createElement("g",null,te.createElement("path",hx({},Ct(r,!0),{className:C,d:MU(d,h,p,m,y)})))},D4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function L4e(t,e){if(t==null)return{};var r=B4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function B4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function PU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PU(Object(r),!0).forEach(function(n){U4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function U4e(t,e,r){return e=z4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function z4e(t){var e=$4e(t,"string");return Tg(e)=="symbol"?e:e+""}function $4e(t,e){if(Tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V4e(t,e){return fx(fx({},e),t)}function F4e(t,e){return t==="symbols"}function DU(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return te.createElement(UN,r);case"trapezoid":return te.createElement(P4e,r);case"sector":return te.createElement(mW,r);case"symbols":if(F4e(e))return te.createElement(I2,r);break;default:return null}}function q4e(t){return M.isValidElement(t)?t.props:t}function w8(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?V4e:n,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,l=t.isActive,d=L4e(t,D4e),h;if(M.isValidElement(e))h=M.cloneElement(e,fx(fx({},d),q4e(e)));else if(qt(e))h=e(d);else if(_4e(e)&&!A4e(e)){var p=i(e,d);h=te.createElement(DU,{shapeType:r,elementProps:p})}else{var m=d;h=te.createElement(DU,{shapeType:r,elementProps:m})}return l?te.createElement(jr,{className:s},h):h}function Q2(t,e){return e!=null&&"trapezoids"in t.props}function Y2(t,e){return e!=null&&"sectors"in t.props}function Ag(t,e){return e!=null&&"points"in t.props}function H4e(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function G4e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function K4e(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function W4e(t,e){var r;return Q2(t,e)?r=H4e:Y2(t,e)?r=G4e:Ag(t,e)&&(r=K4e),r}function X4e(t,e){var r;return Q2(t,e)?r="trapezoids":Y2(t,e)?r="sectors":Ag(t,e)&&(r="points"),r}function Q4e(t,e){if(Q2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Y2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ag(t,e)?e.payload:{}}function Y4e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=X4e(r,e),a=Q4e(r,e),s=n.filter(function(d,h){var p=h1(a,d),m=r.props[i].filter(function(T){var S=W4e(r,e);return S(T,e)}),y=r.props[i].indexOf(m[m.length-1]),b=h===y;return p&&b}),l=n.indexOf(s[s.length-1]);return l}var zS,LU;function Z4e(){if(LU)return zS;LU=1;function t(e){return e&&e.length?e[0]:void 0}return zS=t,zS}var $S,BU;function J4e(){return BU||(BU=1,$S=Z4e()),$S}var ewe=J4e();const twe=Ir(ewe);var rwe=["key"];function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function nwe(t,e){if(t==null)return{};var r=iwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function iwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function px(){return px=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},px.apply(this,arguments)}function UU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UU(Object(r),!0).forEach(function(n){xl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function awe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CW(n.key),n)}}function swe(t,e,r){return e&&zU(t.prototype,e),r&&zU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function owe(t,e,r){return e=mx(e),lwe(t,kW()?Reflect.construct(e,r||[],mx(t).constructor):e.apply(t,r))}function lwe(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cwe(t)}function cwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!t})()}function mx(t){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mx(t)}function uwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_8(t,e)}function _8(t,e){return _8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},_8(t,e)}function xl(t,e,r){return e=CW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CW(t){var e=dwe(t,"string");return ef(e)=="symbol"?e:e+""}function dwe(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var g1=(function(t){function e(){var r;awe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=owe(this,e,[].concat(i)),xl(r,"state",{isAnimationFinished:!1}),xl(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),qt(s)&&s()}),xl(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),qt(s)&&s()}),xl(r,"handleMouseEnter",function(s){var l=r.props.onMouseEnter;l&&l(r.props,s)}),xl(r,"handleMouseLeave",function(s){var l=r.props.onMouseLeave;l&&l(r.props,s)}),r}return uwe(e,t),swe(e,[{key:"renderDots",value:function(n){var i=this.props,a=i.dot,s=i.dataKey,l=Ct(this.props,!1),d=Ct(a,!0),h=n.map(function(p,m){var y=fa(fa(fa({key:"dot-".concat(m),r:3},l),d),{},{dataKey:s,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(a,y)});return te.createElement(jr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,a=i.shape,s=i.dot,l=i.isRange,d=i.baseLinePoints,h=i.connectNulls,p;return te.isValidElement(a)?p=te.cloneElement(a,fa(fa({},this.props),{},{points:n})):qt(a)?p=a(fa(fa({},this.props),{},{points:n})):p=te.createElement(SW,px({},Ct(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:l?d:null,connectNulls:h})),te.createElement(jr,{className:"recharts-radar-polygon"},p,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state.prevPoints;return te.createElement(Do,{begin:l,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=m&&m.length/a.length,S=a.map(function(w,N){var C=m&&m[Math.floor(N*T)];if(C){var k=Pa(C.x,w.x),$=Pa(C.y,w.y);return fa(fa({},w),{},{x:k(b),y:$(b)})}var I=Pa(w.cx,w.x),L=Pa(w.cy,w.y);return fa(fa({},w),{},{x:I(b),y:L(b)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=n.isRange,l=this.state.prevPoints;return a&&i&&i.length&&!s&&(!l||!h1(l,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.className,s=n.points,l=n.isAnimationActive;if(i||!s||!s.length)return null;var d=this.state.isAnimationFinished,h=tr("recharts-radar",a);return te.createElement(jr,{className:h},this.renderPolygon(),(!l||d)&&Pl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var a;if(te.isValidElement(n))a=te.cloneElement(n,i);else if(qt(n))a=n(i);else{var s=i.key,l=nwe(i,rwe);a=te.createElement(K2,px({},l,{key:s,className:tr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return a}}])})(M.PureComponent);xl(g1,"displayName","Radar");xl(g1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!n0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});xl(g1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,i=t.dataKey,a=t.bandSize,s=r.cx,l=r.cy,d=!1,h=[],p=r.type!=="number"?a??0:0;n.forEach(function(y,b){var T=Ki(y,r.dataKey,b),S=Ki(y,i),w=r.scale(T)+p,N=Array.isArray(S)?fW(S):S,C=Qt(N)?void 0:e.scale(N);Array.isArray(S)&&S.length>=2&&(d=!0),h.push(fa(fa({},Jr(s,l,C,w)),{},{name:T,value:S,cx:s,cy:l,radius:C,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var b=twe(y.value),T=Qt(b)?void 0:e.scale(b);m.push(fa(fa({},y),{},{radius:T},Jr(s,l,T,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var VS,$U;function hwe(){if($U)return VS;$U=1;var t=Math.ceil,e=Math.max;function r(n,i,a,s){for(var l=-1,d=e(t((i-n)/(a||1)),0),h=Array(d);d--;)h[s?d:++l]=n,n+=a;return h}return VS=r,VS}var FS,VU;function OW(){if(VU)return FS;VU=1;var t=ZG(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return FS=n,FS}var qS,FU;function fwe(){if(FU)return qS;FU=1;var t=hwe(),e=P2(),r=OW();function n(i){return function(a,s,l){return l&&typeof l!="number"&&e(a,s,l)&&(s=l=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),l=l===void 0?a<s?1:-1:r(l),t(a,s,l,i)}}return qS=n,qS}var HS,qU;function pwe(){if(qU)return HS;qU=1;var t=fwe(),e=t();return HS=e,HS}var mwe=pwe();const gx=Ir(mwe);function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function HU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(r),!0).forEach(function(n){IW(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IW(t,e,r){return e=gwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gwe(t){var e=ywe(t,"string");return Eg(e)=="symbol"?e:e+""}function ywe(t,e){if(Eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vwe=["Webkit","Moz","O","ms"],bwe=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=vwe.reduce(function(a,s){return GU(GU({},a),{},IW({},s+n,r))},{});return i[e]=r,i};function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function yx(){return yx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yx.apply(this,arguments)}function KU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function GS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(r),!0).forEach(function(n){ts(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MW(n.key),n)}}function wwe(t,e,r){return e&&WU(t.prototype,e),r&&WU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _we(t,e,r){return e=vx(e),Swe(t,RW()?Reflect.construct(e,r||[],vx(t).constructor):e.apply(t,r))}function Swe(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Twe(t)}function Twe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!t})()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vx(t)}function Awe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S8(t,e)}function S8(t,e){return S8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},S8(t,e)}function ts(t,e,r){return e=MW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MW(t){var e=Ewe(t,"string");return tf(e)=="symbol"?e:e+""}function Ewe(t,e){if(tf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Nwe=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=mm().domain(gx(0,d)).range([a,a+s-l]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(i),scale:h,scaleValues:p}},XU=function(e){return e.changedTouches&&!!e.changedTouches.length},rf=(function(t){function e(r){var n;return xwe(this,e),n=_we(this,e,[r]),ts(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ts(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ts(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,l=i.startIndex;s==null||s({endIndex:a,startIndex:l})}),n.detachDragEndListener()}),ts(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ts(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ts(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ts(n,"handleSlideDragStart",function(i){var a=XU(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Awe(e,t),wwe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,l=this.props,d=l.gap,h=l.data,p=h.length-1,m=Math.min(i,a),y=Math.max(i,a),b=e.getIndexInRange(s,m),T=e.getIndexInRange(s,y);return{startIndex:b-b%d,endIndex:T===p?p:T-T%d}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,l=i.dataKey,d=Ki(a[n],l,n);return qt(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,l=i.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,b=d.endIndex,T=d.onChange,S=n.pageX-a;S>0?S=Math.min(S,h+p-m-l,h+p-m-s):S<0&&(S=Math.max(S,h-s,h-l));var w=this.getIndex({startX:s+S,endX:l+S});(w.startIndex!==y||w.endIndex!==b)&&T&&T(w),this.setState({startX:s+S,endX:l+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=XU(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,l=i.endX,d=i.startX,h=this.state[s],p=this.props,m=p.x,y=p.width,b=p.travellerWidth,T=p.onChange,S=p.gap,w=p.data,N={startX:this.state.startX,endX:this.state.endX},C=n.pageX-a;C>0?C=Math.min(C,m+y-b-h):C<0&&(C=Math.max(C,m-h)),N[s]=h+C;var k=this.getIndex(N),$=k.startIndex,I=k.endIndex,L=function(){var A=w.length-1;return s==="startX"&&(l>d?$%S===0:I%S===0)||l<d&&I===A||s==="endX"&&(l>d?I%S===0:$%S===0)||l>d&&I===A};this.setState(ts(ts({},s,h+C),"brushMoveStartX",n.pageX),function(){T&&L()&&T(k)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,l=s.scaleValues,d=s.startX,h=s.endX,p=this.state[i],m=l.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=l.length)){var b=l[y];i==="startX"&&b>=h||i==="endX"&&b<=d||this.setState(ts({},i,b),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,d=n.fill,h=n.stroke;return te.createElement("rect",{stroke:h,fill:d,x:i,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,d=n.data,h=n.children,p=n.padding,m=M.Children.only(h);return m?te.cloneElement(m,{x:i,y:a,width:s,height:l,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,l=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,b=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,N=Math.max(n,this.props.x),C=GS(GS({},Ct(this.props,!1)),{},{x:N,y:h,width:p,height:m}),k=b||"Min value: ".concat((a=T[S])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return te.createElement(jr,{tabIndex:0,role:"slider","aria-label":k,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(I){["ArrowLeft","ArrowRight"].includes(I.key)&&(I.preventDefault(),I.stopPropagation(),l.handleTravellerMoveKeyboard(I.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,C))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,l=a.height,d=a.stroke,h=a.travellerWidth,p=Math.min(n,i)+h,m=Math.max(Math.abs(i-n)-h,0);return te.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:s,width:m,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,l=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,b=5,T={pointerEvents:"none",fill:h};return te.createElement(jr,{className:"recharts-brush-texts"},te.createElement(Gh,yx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-b,y:s+l/2},T),this.getTextOfTick(i)),te.createElement(Gh,yx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+b,y:s+l/2},T),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,l=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,b=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,N=y.isTravellerMoving,C=y.isTravellerFocused;if(!i||!i.length||!lt(l)||!lt(d)||!lt(h)||!lt(p)||h<=0||p<=0)return null;var k=tr("recharts-brush",a),$=te.Children.count(s)===1,I=bwe("userSelect","none");return te.createElement(jr,{className:k,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:I},this.renderBackground(),$&&this.renderPanorama(),this.renderSlide(b,T),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||N||C||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,l=n.height,d=n.stroke,h=Math.floor(a+l/2)-1;return te.createElement(te.Fragment,null,te.createElement("rect",{x:i,y:a,width:s,height:l,fill:d,stroke:"none"}),te.createElement("line",{x1:i+1,y1:h,x2:i+s-1,y2:h,fill:"none",stroke:"#fff"}),te.createElement("line",{x1:i+1,y1:h+2,x2:i+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return te.isValidElement(n)?a=te.cloneElement(n,i):qt(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,l=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(a!==i.prevData||h!==i.prevUpdateId)return GS({prevData:a,prevTravellerWidth:d,prevUpdateId:h,prevX:l,prevWidth:s},a&&a.length?Nwe({data:a,width:s,x:l,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||l!==i.prevX||d!==i.prevTravellerWidth)){i.scale.range([l,l+s-d]);var y=i.scale.domain().map(function(b){return i.scale(b)});return{prevData:a,prevTravellerWidth:d,prevUpdateId:h,prevX:l,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,l=a-1;l-s>1;){var d=Math.floor((s+l)/2);n[d]>i?l=d:s=d}return i>=n[l]?l:s}}])})(M.PureComponent);ts(rf,"displayName","Brush");ts(rf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var KS,QU;function jwe(){if(QU)return KS;QU=1;var t=uN();function e(r,n){var i;return t(r,function(a,s,l){return i=n(a,s,l),!i}),!!i}return KS=e,KS}var WS,YU;function kwe(){if(YU)return WS;YU=1;var t=kG(),e=Vo(),r=jwe(),n=qa(),i=P2();function a(s,l,d){var h=n(s)?t:r;return d&&i(s,l,d)&&(l=void 0),h(s,e(l,3))}return WS=a,WS}var Cwe=kwe();const Owe=Ir(Cwe);var Co=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},XS,ZU;function Iwe(){if(ZU)return XS;ZU=1;var t=KG();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return XS=e,XS}var QS,JU;function Rwe(){if(JU)return QS;JU=1;var t=Iwe(),e=HG(),r=Vo();function n(i,a){var s={};return a=r(a,3),e(i,function(l,d,h){t(s,d,a(l,d,h))}),s}return QS=n,QS}var Mwe=Rwe();const Pwe=Ir(Mwe);var YS,ez;function Dwe(){if(ez)return YS;ez=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return YS=t,YS}var ZS,tz;function Lwe(){if(tz)return ZS;tz=1;var t=uN();function e(r,n){var i=!0;return t(r,function(a,s,l){return i=!!n(a,s,l),i}),i}return ZS=e,ZS}var JS,rz;function Bwe(){if(rz)return JS;rz=1;var t=Dwe(),e=Lwe(),r=Vo(),n=qa(),i=P2();function a(s,l,d){var h=n(s)?t:e;return d&&i(s,l,d)&&(l=void 0),h(s,r(l,3))}return JS=a,JS}var Uwe=Bwe();const PW=Ir(Uwe);var zwe=["x","y"];function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function T8(){return T8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T8.apply(this,arguments)}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){$we(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $we(t,e,r){return e=Vwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vwe(t){var e=Fwe(t,"string");return Ng(e)=="symbol"?e:e+""}function Fwe(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qwe(t,e){if(t==null)return{};var r=Hwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gwe(t,e){var r=t.x,n=t.y,i=qwe(t,zwe),a="".concat(r),s=parseInt(a,10),l="".concat(n),d=parseInt(l,10),h="".concat(e.height||i.height),p=parseInt(h,10),m="".concat(e.width||i.width),y=parseInt(m,10);return qp(qp(qp(qp(qp({},e),i),s?{x:s}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function iz(t){return te.createElement(w8,T8({shapeType:"rectangle",propTransformer:Gwe,activeClassName:"recharts-active-bar"},t))}var Kwe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=lt(n)||Qde(n);return a?e(n,i):(a||Gd(),r)}},Wwe=["value","background"],DW;function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function Xwe(t,e){if(t==null)return{};var r=Qwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function bx(){return bx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},bx.apply(this,arguments)}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){Yc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ywe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BW(n.key),n)}}function Zwe(t,e,r){return e&&sz(t.prototype,e),r&&sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jwe(t,e,r){return e=xx(e),e5e(t,LW()?Reflect.construct(e,r||[],xx(t).constructor):e.apply(t,r))}function e5e(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t5e(t)}function t5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LW=function(){return!!t})()}function xx(t){return xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xx(t)}function r5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A8(t,e)}function A8(t,e){return A8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},A8(t,e)}function Yc(t,e,r){return e=BW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BW(t){var e=n5e(t,"string");return nf(e)=="symbol"?e:e+""}function n5e(t,e){if(nf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var y1=(function(t){function e(){var r;Ywe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Jwe(this,e,[].concat(i)),Yc(r,"state",{isAnimationFinished:!1}),Yc(r,"id",s1("recharts-bar-")),Yc(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Yc(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return r5e(e,t),Zwe(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,l=a.dataKey,d=a.activeIndex,h=a.activeBar,p=Ct(this.props,!1);return n&&n.map(function(m,y){var b=y===d,T=b?h:s,S=oi(oi(oi({},p),m),{},{isActive:b,option:T,index:y,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return te.createElement(jr,bx({className:"recharts-bar-rectangle"},qd(i.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),te.createElement(iz,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,l=i.isAnimationActive,d=i.animationBegin,h=i.animationDuration,p=i.animationEasing,m=i.animationId,y=this.state.prevData;return te.createElement(Do,{begin:d,duration:h,isActive:l,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t,S=a.map(function(w,N){var C=y&&y[N];if(C){var k=Pa(C.x,w.x),$=Pa(C.y,w.y),I=Pa(C.width,w.width),L=Pa(C.height,w.height);return oi(oi({},w),{},{x:k(T),y:$(T),width:I(T),height:L(T)})}if(s==="horizontal"){var E=Pa(0,w.height),A=E(T);return oi(oi({},w),{},{y:w.y+w.height-A,height:A})}var R=Pa(0,w.width),F=R(T);return oi(oi({},w),{},{width:F})});return te.createElement(jr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!h1(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,l=i.activeIndex,d=Ct(this.props.background,!1);return a.map(function(h,p){h.value;var m=h.background,y=Xwe(h,Wwe);if(!m)return null;var b=oi(oi(oi(oi(oi({},y),{},{fill:"#eee"},m),d),qd(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:p,className:"recharts-bar-background-rectangle"});return te.createElement(iz,bx({key:"background-bar-".concat(p),option:n.props.background,isActive:p===l},b))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,l=a.xAxis,d=a.yAxis,h=a.layout,p=a.children,m=us(p,f1);if(!m)return null;var y=h==="vertical"?s[0].height/2:s[0].width/2,b=function(w,N){var C=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:C,errorVal:Ki(w,N)}},T={clipPath:n?"url(#clipPath-".concat(i,")"):null};return te.createElement(jr,T,m.map(function(S){return te.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:s,xAxis:l,yAxis:d,layout:h,offset:y,dataPointFormatter:b})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,l=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,b=n.isAnimationActive,T=n.background,S=n.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=tr("recharts-bar",s),C=l&&l.allowDataOverflow,k=d&&d.allowDataOverflow,$=C||k,I=Qt(S)?this.id:S;return te.createElement(jr,{className:N},C||k?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(I)},te.createElement("rect",{x:C?h:h-m/2,y:k?p:p-y/2,width:C?m:m*2,height:k?y:y*2}))):null,te.createElement(jr,{className:"recharts-bar-rectangles",clipPath:$?"url(#clipPath-".concat(I,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar($,I),(!b||w)&&Pl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(M.PureComponent);DW=y1;Yc(y1,"displayName","Bar");Yc(y1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!n0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yc(y1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,l=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,b=dve(n,r);if(!b)return null;var T=e.layout,S=r.type.defaultProps,w=S!==void 0?oi(oi({},S),r.props):r.props,N=w.dataKey,C=w.children,k=w.minPointSize,$=T==="horizontal"?s:a,I=h?$.scale.domain():null,L=vve({numericAxis:$}),E=us(C,fN),A=m.map(function(R,F){var P,B,D,Q,Z,W;h?P=hve(h[p+F],I):(P=Ki(R,N),Array.isArray(P)||(P=[L,P]));var J=Kwe(k,DW.defaultProps.minPointSize)(P[1],F);if(T==="horizontal"){var Y,ge=[s.scale(P[0]),s.scale(P[1])],ce=ge[0],X=ge[1];B=OB({axis:a,ticks:l,bandSize:i,offset:b.offset,entry:R,index:F}),D=(Y=X??ce)!==null&&Y!==void 0?Y:void 0,Q=b.size;var re=ce-X;if(Z=Number.isNaN(re)?0:re,W={x:B,y:s.y,width:Q,height:s.height},Math.abs(J)>0&&Math.abs(Z)<Math.abs(J)){var de=to(Z||J)*(Math.abs(J)-Math.abs(Z));D-=de,Z+=de}}else{var oe=[a.scale(P[0]),a.scale(P[1])],ae=oe[0],pe=oe[1];if(B=ae,D=OB({axis:s,ticks:d,bandSize:i,offset:b.offset,entry:R,index:F}),Q=pe-ae,Z=b.size,W={x:a.x,y:D,width:a.width,height:Z},Math.abs(J)>0&&Math.abs(Q)<Math.abs(J)){var ve=to(Q||J)*(Math.abs(J)-Math.abs(Q));Q+=ve}}return oi(oi(oi({},R),{},{x:B,y:D,width:Q,height:Z,value:h?P:P[1],payload:R,background:W},E&&E[F]&&E[F].props),{},{tooltipPayload:[cW(r,R)],tooltipPosition:{x:B+Q/2,y:D+Z/2}})});return oi({data:A,layout:T},y)});function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}function i5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UW(n.key),n)}}function a5e(t,e,r){return e&&oz(t.prototype,e),r&&oz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Js(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){Z2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z2(t,e,r){return e=UW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function UW(t){var e=s5e(t,"string");return jg(e)=="symbol"?e:e+""}function s5e(t,e){if(jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o5e=function(e,r,n,i,a){var s=e.width,l=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},y=!!rs(h,y1);return p.reduce(function(b,T){var S=r[T],w=S.orientation,N=S.domain,C=S.padding,k=C===void 0?{}:C,$=S.mirror,I=S.reversed,L="".concat(w).concat($?"Mirror":""),E,A,R,F,P;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var B=N[1]-N[0],D=1/0,Q=S.categoricalDomain.sort(e0e);if(Q.forEach(function(oe,ae){ae>0&&(D=Math.min((oe||0)-(Q[ae-1]||0),D))}),Number.isFinite(D)){var Z=D/B,W=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(E=Z*W/2),S.padding==="no-gap"){var J=ro(e.barCategoryGap,Z*W),Y=Z*W/2;E=Y-J-(Y-J)/W*J}}}i==="xAxis"?A=[n.left+(k.left||0)+(E||0),n.left+n.width-(k.right||0)-(E||0)]:i==="yAxis"?A=d==="horizontal"?[n.top+n.height-(k.bottom||0),n.top+(k.top||0)]:[n.top+(k.top||0)+(E||0),n.top+n.height-(k.bottom||0)-(E||0)]:A=S.range,I&&(A=[A[1],A[0]]);var ge=aW(S,a,y),ce=ge.scale,X=ge.realScaleType;ce.domain(N).range(A),sW(ce);var re=oW(ce,Js(Js({},S),{},{realScaleType:X}));i==="xAxis"?(P=w==="top"&&!$||w==="bottom"&&$,R=n.left,F=m[L]-P*S.height):i==="yAxis"&&(P=w==="left"&&!$||w==="right"&&$,R=m[L]-P*S.width,F=n.top);var de=Js(Js(Js({},S),re),{},{realScaleType:X,x:R,y:F,scale:ce,width:i==="xAxis"?n.width:S.width,height:i==="yAxis"?n.height:S.height});return de.bandSize=rx(de,re),!S.hide&&i==="xAxis"?m[L]+=(P?-1:1)*de.height:S.hide||(m[L]+=(P?-1:1)*de.width),Js(Js({},b),{},Z2({},T,de))},{})},zW=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},l5e=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return zW({x:r,y:n},{x:i,y:a})},$W=(function(){function t(e){i5e(this,t),this.scale=e}return a5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])})();Z2($W,"EPS",1e-4);var zN=function(e){var r=Object.keys(e).reduce(function(n,i){return Js(Js({},n),{},Z2({},i,$W.create(e[i])))},{});return Js(Js({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,l=a.position;return Pwe(i,function(d,h){return r[h].apply(d,{bandAware:s,position:l})})},isInRange:function(i){return PW(i,function(a,s){return r[s].isInRange(a)})}})};function c5e(t){return(t%180+180)%180}var u5e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=c5e(i),s=a*Math.PI/180,l=Math.atan(n/r),d=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},eT,cz;function d5e(){if(cz)return eT;cz=1;var t=Vo(),e=o1(),r=R2();function n(i){return function(a,s,l){var d=Object(a);if(!e(a)){var h=t(s,3);a=r(a),s=function(m){return h(d[m],m,d)}}var p=i(a,s,l);return p>-1?d[h?a[p]:p]:void 0}}return eT=n,eT}var tT,uz;function h5e(){if(uz)return tT;uz=1;var t=OW();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return tT=e,tT}var rT,dz;function f5e(){if(dz)return rT;dz=1;var t=zG(),e=Vo(),r=h5e(),n=Math.max;function i(a,s,l){var d=a==null?0:a.length;if(!d)return-1;var h=l==null?0:r(l);return h<0&&(h=n(d+h,0)),t(a,e(s,3),h)}return rT=i,rT}var nT,hz;function p5e(){if(hz)return nT;hz=1;var t=d5e(),e=f5e(),r=t(e);return nT=r,nT}var m5e=p5e();const g5e=Ir(m5e);var y5e=rG();const v5e=Ir(y5e);var b5e=v5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),$N=M.createContext(void 0),VN=M.createContext(void 0),VW=M.createContext(void 0),FW=M.createContext({}),qW=M.createContext(void 0),HW=M.createContext(0),GW=M.createContext(0),fz=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,l=e.children,d=e.width,h=e.height,p=b5e(a);return te.createElement($N.Provider,{value:n},te.createElement(VN.Provider,{value:i},te.createElement(FW.Provider,{value:a},te.createElement(VW.Provider,{value:p},te.createElement(qW.Provider,{value:s},te.createElement(HW.Provider,{value:h},te.createElement(GW.Provider,{value:d},l)))))))},x5e=function(){return M.useContext(qW)},KW=function(e){var r=M.useContext($N);r==null&&Gd();var n=r[e];return n==null&&Gd(),n},w5e=function(){var e=M.useContext($N);return Wc(e)},_5e=function(){var e=M.useContext(VN),r=g5e(e,function(n){return PW(n.domain,Number.isFinite)});return r||Wc(e)},WW=function(e){var r=M.useContext(VN);r==null&&Gd();var n=r[e];return n==null&&Gd(),n},S5e=function(){var e=M.useContext(VW);return e},T5e=function(){return M.useContext(FW)},FN=function(){return M.useContext(GW)},qN=function(){return M.useContext(HW)};function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function A5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QW(n.key),n)}}function N5e(t,e,r){return e&&E5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function j5e(t,e,r){return e=wx(e),k5e(t,XW()?Reflect.construct(e,r||[],wx(t).constructor):e.apply(t,r))}function k5e(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C5e(t)}function C5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XW=function(){return!!t})()}function wx(t){return wx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wx(t)}function O5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E8(t,e)}function E8(t,e){return E8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},E8(t,e)}function pz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(r),!0).forEach(function(n){HN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function HN(t,e,r){return e=QW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QW(t){var e=I5e(t,"string");return af(e)=="symbol"?e:e+""}function I5e(t,e){if(af(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function R5e(t,e){return L5e(t)||D5e(t,e)||P5e(t,e)||M5e()}function M5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P5e(t,e){if(t){if(typeof t=="string")return gz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gz(t,e)}}function gz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function L5e(t){if(Array.isArray(t))return t}function N8(){return N8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},N8.apply(this,arguments)}var B5e=function(e,r){var n;return te.isValidElement(e)?n=te.cloneElement(e,r):qt(e)?n=e(r):n=te.createElement("line",N8({},r,{className:"recharts-reference-line-line"})),n},U5e=function(e,r,n,i,a,s,l,d,h){var p=a.x,m=a.y,y=a.width,b=a.height;if(n){var T=h.y,S=e.y.apply(T,{position:s});if(Co(h,"discard")&&!e.y.isInRange(S))return null;var w=[{x:p+y,y:S},{x:p,y:S}];return d==="left"?w.reverse():w}if(r){var N=h.x,C=e.x.apply(N,{position:s});if(Co(h,"discard")&&!e.x.isInRange(C))return null;var k=[{x:C,y:m+b},{x:C,y:m}];return l==="top"?k.reverse():k}if(i){var $=h.segment,I=$.map(function(L){return e.apply(L,{position:s})});return Co(h,"discard")&&Owe(I,function(L){return!e.isInRange(L)})?null:I}return null};function z5e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,l=t.className,d=t.alwaysShow,h=x5e(),p=KW(i),m=WW(a),y=S5e();if(!h||!y)return null;Rl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=zN({x:p.scale,y:m.scale}),T=yi(e),S=yi(r),w=n&&n.length===2,N=U5e(b,T,S,w,y,t.position,p.orientation,m.orientation,t);if(!N)return null;var C=R5e(N,2),k=C[0],$=k.x,I=k.y,L=C[1],E=L.x,A=L.y,R=Co(t,"hidden")?"url(#".concat(h,")"):void 0,F=mz(mz({clipPath:R},Ct(t,!0)),{},{x1:$,y1:I,x2:E,y2:A});return te.createElement(jr,{className:tr("recharts-reference-line",l)},B5e(s,F),Fi.renderCallByParent(t,l5e({x1:$,y1:I,x2:E,y2:A})))}var GN=(function(t){function e(){return A5e(this,e),j5e(this,e,arguments)}return O5e(e,t),N5e(e,[{key:"render",value:function(){return te.createElement(z5e,this.props)}}])})(te.Component);HN(GN,"displayName","ReferenceLine");HN(GN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function j8(){return j8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},j8.apply(this,arguments)}function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function yz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function vz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(r),!0).forEach(function(n){J2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZW(n.key),n)}}function F5e(t,e,r){return e&&V5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q5e(t,e,r){return e=_x(e),H5e(t,YW()?Reflect.construct(e,r||[],_x(t).constructor):e.apply(t,r))}function H5e(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G5e(t)}function G5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YW=function(){return!!t})()}function _x(t){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_x(t)}function K5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k8(t,e)}function k8(t,e){return k8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},k8(t,e)}function J2(t,e,r){return e=ZW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZW(t){var e=W5e(t,"string");return sf(e)=="symbol"?e:e+""}function W5e(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var X5e=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=zN({x:i.scale,y:a.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return Co(e,"discard")&&!s.isInRange(l)?null:l},e4=(function(t){function e(){return $5e(this,e),q5e(this,e,arguments)}return K5e(e,t),F5e(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,l=n.alwaysShow,d=n.clipPathId,h=yi(i),p=yi(a);if(Rl(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=X5e(this.props);if(!m)return null;var y=m.x,b=m.y,T=this.props,S=T.shape,w=T.className,N=Co(this.props,"hidden")?"url(#".concat(d,")"):void 0,C=vz(vz({clipPath:N},Ct(this.props,!0)),{},{cx:y,cy:b});return te.createElement(jr,{className:tr("recharts-reference-dot",w)},e.renderDot(S,C),Fi.renderCallByParent(this.props,{x:y-s,y:b-s,width:2*s,height:2*s}))}}])})(te.Component);J2(e4,"displayName","ReferenceDot");J2(e4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});J2(e4,"renderDot",function(t,e){var r;return te.isValidElement(t)?r=te.cloneElement(t,e):qt(t)?r=t(e):r=te.createElement(K2,j8({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function C8(){return C8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C8.apply(this,arguments)}function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(r),!0).forEach(function(n){t4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eX(n.key),n)}}function Z5e(t,e,r){return e&&Y5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function J5e(t,e,r){return e=Sx(e),e3e(t,JW()?Reflect.construct(e,r||[],Sx(t).constructor):e.apply(t,r))}function e3e(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t3e(t)}function t3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JW=function(){return!!t})()}function Sx(t){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sx(t)}function r3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O8(t,e)}function O8(t,e){return O8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},O8(t,e)}function t4(t,e,r){return e=eX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eX(t){var e=n3e(t,"string");return of(e)=="symbol"?e:e+""}function n3e(t,e){if(of(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var i3e=function(e,r,n,i,a){var s=a.x1,l=a.x2,d=a.y1,h=a.y2,p=a.xAxis,m=a.yAxis;if(!p||!m)return null;var y=zN({x:p.scale,y:m.scale}),b={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(l,{position:"end"}):y.x.rangeMax,y:i?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Co(a,"discard")&&(!y.isInRange(b)||!y.isInRange(T))?null:zW(b,T)},r4=(function(t){function e(){return Q5e(this,e),J5e(this,e,arguments)}return r3e(e,t),Z5e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,l=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Rl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=yi(i),y=yi(a),b=yi(s),T=yi(l),S=this.props.shape;if(!m&&!y&&!b&&!T&&!S)return null;var w=i3e(m,y,b,T,this.props);if(!w&&!S)return null;var N=Co(this.props,"hidden")?"url(#".concat(p,")"):void 0;return te.createElement(jr,{className:tr("recharts-reference-area",d)},e.renderRect(S,xz(xz({clipPath:N},Ct(this.props,!0)),w)),Fi.renderCallByParent(this.props,w))}}])})(te.Component);t4(r4,"displayName","ReferenceArea");t4(r4,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});t4(r4,"renderRect",function(t,e){var r;return te.isValidElement(t)?r=te.cloneElement(t,e):qt(t)?r=t(e):r=te.createElement(UN,C8({},e,{className:"recharts-reference-area-rect"})),r});function tX(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function a3e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return u5e(n,r)}function s3e(t,e,r){var n=r==="width",i=t.x,a=t.y,s=t.width,l=t.height;return e===1?{start:n?i:a,end:n?i+s:a+l}:{start:n?i+s:a+l,end:n?i:a}}function Tx(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function o3e(t,e){return tX(t,e+1)}function l3e(t,e,r,n,i){for(var a=(n||[]).slice(),s=e.start,l=e.end,d=0,h=1,p=s,m=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:tX(n,h)};var S=d,w,N=function(){return w===void 0&&(w=r(T,S)),w},C=T.coordinate,k=d===0||Tx(t,C,N,p,l);k||(d=0,p=s,h+=1),k&&(p=C+t*(N()/2+i),d+=h)},y;h<=a.length;)if(y=m(),y)return y.v;return[]}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function wz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wz(Object(r),!0).forEach(function(n){c3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function c3e(t,e,r){return e=u3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u3e(t){var e=d3e(t,"string");return kg(e)=="symbol"?e:e+""}function d3e(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function h3e(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,l=e.start,d=e.end,h=function(y){var b=a[y],T,S=function(){return T===void 0&&(T=r(b,y)),T};if(y===s-1){var w=t*(b.coordinate+t*S()/2-d);a[y]=b=ea(ea({},b),{},{tickCoord:w>0?b.coordinate-w*t:b.coordinate})}else a[y]=b=ea(ea({},b),{},{tickCoord:b.coordinate});var N=Tx(t,b.tickCoord,S,l,d);N&&(d=b.tickCoord-t*(S()/2+i),a[y]=ea(ea({},b),{},{isShow:!0}))},p=s-1;p>=0;p--)h(p);return a}function f3e(t,e,r,n,i,a){var s=(n||[]).slice(),l=s.length,d=e.start,h=e.end;if(a){var p=n[l-1],m=r(p,l-1),y=t*(p.coordinate+t*m/2-h);s[l-1]=p=ea(ea({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var b=Tx(t,p.tickCoord,function(){return m},d,h);b&&(h=p.tickCoord-t*(m/2+i),s[l-1]=ea(ea({},p),{},{isShow:!0}))}for(var T=a?l-1:l,S=function(C){var k=s[C],$,I=function(){return $===void 0&&($=r(k,C)),$};if(C===0){var L=t*(k.coordinate-t*I()/2-d);s[C]=k=ea(ea({},k),{},{tickCoord:L<0?k.coordinate-L*t:k.coordinate})}else s[C]=k=ea(ea({},k),{},{tickCoord:k.coordinate});var E=Tx(t,k.tickCoord,I,d,h);E&&(d=k.tickCoord+t*(I()/2+i),s[C]=ea(ea({},k),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function KN(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,l=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!i||!i.length||!n)return[];if(lt(d)||n0.isSsr)return o3e(i,typeof d=="number"&&lt(d)?d:0);var y=[],b=l==="top"||l==="bottom"?"width":"height",T=p&&b==="width"?pm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(k,$){var I=qt(h)?h(k.value,$):k.value;return b==="width"?a3e(pm(I,{fontSize:e,letterSpacing:r}),T,m):pm(I,{fontSize:e,letterSpacing:r})[b]},w=i.length>=2?to(i[1].coordinate-i[0].coordinate):1,N=s3e(a,w,b);return d==="equidistantPreserveStart"?l3e(w,N,S,i,s):(d==="preserveStart"||d==="preserveStartEnd"?y=f3e(w,N,S,i,s,d==="preserveStartEnd"):y=h3e(w,N,S,i,s),y.filter(function(C){return C.isShow}))}var p3e=["viewBox"],m3e=["viewBox"],g3e=["ticks"];function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function lh(){return lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lh.apply(this,arguments)}function _z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_z(Object(r),!0).forEach(function(n){WN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iT(t,e){if(t==null)return{};var r=y3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function y3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function v3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nX(n.key),n)}}function b3e(t,e,r){return e&&Sz(t.prototype,e),r&&Sz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function x3e(t,e,r){return e=Ax(e),w3e(t,rX()?Reflect.construct(e,r||[],Ax(t).constructor):e.apply(t,r))}function w3e(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _3e(t)}function _3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rX=function(){return!!t})()}function Ax(t){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(t)}function S3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I8(t,e)}function I8(t,e){return I8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},I8(t,e)}function WN(t,e,r){return e=nX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nX(t){var e=T3e(t,"string");return lf(e)=="symbol"?e:e+""}function T3e(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Of=(function(t){function e(r){var n;return v3e(this,e),n=x3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return S3e(e,t),b3e(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=iT(n,p3e),l=this.props,d=l.viewBox,h=iT(l,m3e);return!yh(a,d)||!yh(s,h)||!yh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,l=i.width,d=i.height,h=i.orientation,p=i.tickSize,m=i.mirror,y=i.tickMargin,b,T,S,w,N,C,k=m?-1:1,$=n.tickSize||p,I=lt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":b=T=n.coordinate,w=s+ +!m*d,S=w-k*$,C=S-k*y,N=I;break;case"left":S=w=n.coordinate,T=a+ +!m*l,b=T-k*$,N=b-k*y,C=I;break;case"right":S=w=n.coordinate,T=a+ +m*l,b=T+k*$,N=b+k*y,C=I;break;default:b=T=n.coordinate,w=s+ +m*d,S=w+k*$,C=S+k*y,N=I;break}return{line:{x1:b,y1:S,x2:T,y2:w},tick:{x:N,y:C}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=fi(fi(fi({},Ct(this.props,!1)),Ct(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=fi(fi({},m),{},{x1:i,y1:a+y*l,x2:i+s,y2:a+y*l})}else{var b=+(d==="left"&&!h||d==="right"&&h);m=fi(fi({},m),{},{x1:i+b*s,y1:a,x2:i+b*s,y2:a+l})}return te.createElement("line",lh({},m,{className:tr("recharts-cartesian-axis-line",Os(p,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,l=this.props,d=l.tickLine,h=l.stroke,p=l.tick,m=l.tickFormatter,y=l.unit,b=KN(fi(fi({},this.props),{},{ticks:n}),i,a),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=Ct(this.props,!1),N=Ct(p,!1),C=fi(fi({},w),{},{fill:"none"},Ct(d,!1)),k=b.map(function($,I){var L=s.getTickLineCoord($),E=L.line,A=L.tick,R=fi(fi(fi(fi({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:h},N),A),{},{index:I,payload:$,visibleTicksCount:b.length,tickFormatter:m});return te.createElement(jr,lh({className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},qd(s.props,$,I)),d&&te.createElement("line",lh({},C,E,{className:tr("recharts-cartesian-axis-tick-line",Os(d,"className"))})),p&&e.renderTickItem(p,R,"".concat(qt(m)?m($.value,I):$.value).concat(y||"")))});return te.createElement("g",{className:"recharts-cartesian-axis-ticks"},k)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,l=i.height,d=i.ticksGenerator,h=i.className,p=i.hide;if(p)return null;var m=this.props,y=m.ticks,b=iT(m,g3e),T=y;return qt(d)&&(T=y&&y.length>0?d(this.props):d(b)),s<=0||l<=0||!T||!T.length?null:te.createElement(jr,{className:tr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),Fi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,l=tr(i.className,"recharts-cartesian-axis-tick-value");return te.isValidElement(n)?s=te.cloneElement(n,fi(fi({},i),{},{className:l})):qt(n)?s=n(fi(fi({},i),{},{className:l})):s=te.createElement(Gh,lh({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(M.Component);WN(Of,"displayName","CartesianAxis");WN(Of,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var A3e=["x1","y1","x2","y2","key"],E3e=["offset"];function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function Tz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(r),!0).forEach(function(n){N3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N3e(t,e,r){return e=j3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j3e(t){var e=k3e(t,"string");return Kd(e)=="symbol"?e:e+""}function k3e(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wd(){return wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wd.apply(this,arguments)}function Az(t,e){if(t==null)return{};var r=C3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function C3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var O3e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,l=e.height,d=e.ry;return te.createElement("rect",{x:i,y:a,ry:d,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function iX(t,e){var r;if(te.isValidElement(t))r=te.cloneElement(t,e);else if(qt(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,l=e.key,d=Az(e,A3e),h=Ct(d,!1);h.offset;var p=Az(h,E3e);r=te.createElement("line",wd({},p,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:l}))}return r}function I3e(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,d){var h=ra(ra({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(d),index:d});return iX(i,h)});return te.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function R3e(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,d){var h=ra(ra({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(d),index:d});return iX(i,h)});return te.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function M3e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,s=t.height,l=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=l.map(function(y){return Math.round(y+i-i)}).sort(function(y,b){return y-b});i!==p[0]&&p.unshift(0);var m=p.map(function(y,b){var T=!p[b+1],S=T?i+s-y:p[b+1]-y;if(S<=0)return null;var w=b%e.length;return te.createElement("rect",{key:"react-".concat(b),y,x:n,height:S,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function P3e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,l=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+a-a)}).sort(function(y,b){return y-b});a!==p[0]&&p.unshift(0);var m=p.map(function(y,b){var T=!p[b+1],S=T?a+l-y:p[b+1]-y;if(S<=0)return null;var w=b%n.length;return te.createElement("rect",{key:"react-".concat(b),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return te.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var D3e=function(e,r){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return iW(KN(ra(ra(ra({},Of.defaultProps),n),{},{ticks:jl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},L3e=function(e,r){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return iW(KN(ra(ra(ra({},Of.defaultProps),n),{},{ticks:jl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},Y0={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function aX(t){var e,r,n,i,a,s,l=FN(),d=qN(),h=T5e(),p=ra(ra({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Y0.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Y0.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Y0.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Y0.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Y0.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Y0.verticalFill,x:lt(t.x)?t.x:h.left,y:lt(t.y)?t.y:h.top,width:lt(t.width)?t.width:h.width,height:lt(t.height)?t.height:h.height}),m=p.x,y=p.y,b=p.width,T=p.height,S=p.syncWithTicks,w=p.horizontalValues,N=p.verticalValues,C=w5e(),k=_5e();if(!lt(b)||b<=0||!lt(T)||T<=0||!lt(m)||m!==+m||!lt(y)||y!==+y)return null;var $=p.verticalCoordinatesGenerator||D3e,I=p.horizontalCoordinatesGenerator||L3e,L=p.horizontalPoints,E=p.verticalPoints;if((!L||!L.length)&&qt(I)){var A=w&&w.length,R=I({yAxis:k?ra(ra({},k),{},{ticks:A?w:k.ticks}):void 0,width:l,height:d,offset:h},A?!0:S);Rl(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Kd(R),"]")),Array.isArray(R)&&(L=R)}if((!E||!E.length)&&qt($)){var F=N&&N.length,P=$({xAxis:C?ra(ra({},C),{},{ticks:F?N:C.ticks}):void 0,width:l,height:d,offset:h},F?!0:S);Rl(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Kd(P),"]")),Array.isArray(P)&&(E=P)}return te.createElement("g",{className:"recharts-cartesian-grid"},te.createElement(O3e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),te.createElement(I3e,wd({},p,{offset:h,horizontalPoints:L,xAxis:C,yAxis:k})),te.createElement(R3e,wd({},p,{offset:h,verticalPoints:E,xAxis:C,yAxis:k})),te.createElement(M3e,wd({},p,{horizontalPoints:L})),te.createElement(P3e,wd({},p,{verticalPoints:E})))}aX.displayName="CartesianGrid";function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function B3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lX(n.key),n)}}function z3e(t,e,r){return e&&U3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $3e(t,e,r){return e=Ex(e),V3e(t,sX()?Reflect.construct(e,r||[],Ex(t).constructor):e.apply(t,r))}function V3e(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F3e(t)}function F3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sX=function(){return!!t})()}function Ex(t){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ex(t)}function q3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R8(t,e)}function R8(t,e){return R8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},R8(t,e)}function oX(t,e,r){return e=lX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lX(t){var e=H3e(t,"string");return cf(e)=="symbol"?e:e+""}function H3e(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n4=(function(t){function e(){return B3e(this,e),$3e(this,e,arguments)}return q3e(e,t),z3e(e,[{key:"render",value:function(){return null}}])})(M.Component);oX(n4,"displayName","ZAxis");oX(n4,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var G3e=["option","isActive"];function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xm.apply(this,arguments)}function K3e(t,e){if(t==null)return{};var r=W3e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function W3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function X3e(t){var e=t.option,r=t.isActive,n=K3e(t,G3e);return typeof e=="string"?M.createElement(w8,xm({option:M.createElement(I2,xm({type:e},n)),isActive:r,shapeType:"symbols"},n)):M.createElement(w8,xm({option:e,isActive:r,shapeType:"symbols"},n))}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wm.apply(this,arguments)}function Ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Es(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(r),!0).forEach(function(n){Zc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uX(n.key),n)}}function Y3e(t,e,r){return e&&Nz(t.prototype,e),r&&Nz(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z3e(t,e,r){return e=Nx(e),J3e(t,cX()?Reflect.construct(e,r||[],Nx(t).constructor):e.apply(t,r))}function J3e(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e6e(t)}function e6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cX=function(){return!!t})()}function Nx(t){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nx(t)}function t6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M8(t,e)}function M8(t,e){return M8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},M8(t,e)}function Zc(t,e,r){return e=uX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uX(t){var e=r6e(t,"string");return uf(e)=="symbol"?e:e+""}function r6e(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var v1=(function(t){function e(){var r;Q3e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Z3e(this,e,[].concat(i)),Zc(r,"state",{isAnimationFinished:!1}),Zc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Zc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Zc(r,"id",s1("recharts-scatter-")),r}return t6e(e,t),Y3e(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,s=a.shape,l=a.activeShape,d=a.activeIndex,h=Ct(this.props,!1);return n.map(function(p,m){var y=d===m,b=y?l:s,T=Es(Es({},h),p);return te.createElement(jr,wm({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},qd(i.props,p,m),{role:"img"}),te.createElement(X3e,wm({option:b,isActive:y,key:"symbol-".concat(m)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,l=i.animationBegin,d=i.animationDuration,h=i.animationEasing,p=i.animationId,m=this.state.prevPoints;return te.createElement(Do,{begin:l,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=a.map(function(S,w){var N=m&&m[w];if(N){var C=Pa(N.cx,S.cx),k=Pa(N.cy,S.cy),$=Pa(N.size,S.size);return Es(Es({},S),{},{cx:C(b),cy:k(b),size:$(b)})}var I=Pa(0,S.size);return Es(Es({},S),{},{size:I(b)})});return te.createElement(jr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!h1(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,l=i.yAxis,d=i.children,h=us(d,f1);return h?h.map(function(p,m){var y=p.props,b=y.direction,T=y.dataKey;return te.cloneElement(p,{key:"".concat(b,"-").concat(T,"-").concat(a[m]),data:a,xAxis:s,yAxis:l,layout:b==="x"?"vertical":"horizontal",dataPointFormatter:function(w,N){return{x:w.cx,y:w.cy,value:b==="x"?+w.node.x:+w.node.y,errorVal:Ki(w,N)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,s=n.lineType,l=n.lineJointType,d=Ct(this.props,!1),h=Ct(a,!1),p,m;if(s==="joint")p=i.map(function(k){return{x:k.cx,y:k.cy}});else if(s==="fitting"){var y=Jde(i),b=y.xmin,T=y.xmax,S=y.a,w=y.b,N=function($){return S*$+w};p=[{x:b,y:N(b)},{x:T,y:N(T)}]}var C=Es(Es(Es({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return te.isValidElement(a)?m=te.cloneElement(a,C):qt(a)?m=a(C):m=te.createElement(s8,wm({},C,{type:l})),te.createElement(jr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,s=n.line,l=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,b=n.height,T=n.id,S=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=tr("recharts-scatter",l),C=d&&d.allowDataOverflow,k=h&&h.allowDataOverflow,$=C||k,I=Qt(T)?this.id:T;return te.createElement(jr,{className:N,clipPath:$?"url(#clipPath-".concat(I,")"):null},C||k?te.createElement("defs",null,te.createElement("clipPath",{id:"clipPath-".concat(I)},te.createElement("rect",{x:C?p:p-y/2,y:k?m:m-b/2,width:C?y:y*2,height:k?b:b*2}))):null,s&&this.renderLine(),this.renderErrorBar(),te.createElement(jr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&Pl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(M.PureComponent);Zc(v1,"displayName","Scatter");Zc(v1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!n0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Zc(v1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,a=t.displayedData,s=t.xAxisTicks,l=t.yAxisTicks,d=t.offset,h=i.props.tooltipType,p=us(i.props.children,fN),m=Qt(e.dataKey)?i.props.dataKey:e.dataKey,y=Qt(r.dataKey)?i.props.dataKey:r.dataKey,b=n&&n.dataKey,T=n?n.range:n4.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,N=r.scale.bandwidth?r.scale.bandwidth():0,C=a.map(function(k,$){var I=Ki(k,m),L=Ki(k,y),E=!Qt(b)&&Ki(k,b)||"-",A=[{name:Qt(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:I,payload:k,dataKey:m,type:h},{name:Qt(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:L,payload:k,dataKey:y,type:h}];E!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:k,dataKey:b,type:h});var R=CB({axis:e,ticks:s,bandSize:w,entry:k,index:$,dataKey:m}),F=CB({axis:r,ticks:l,bandSize:N,entry:k,index:$,dataKey:y}),P=E!=="-"?n.scale(E):S,B=Math.sqrt(Math.max(P,0)/Math.PI);return Es(Es({},k),{},{cx:R,cy:F,x:R-B,y:F-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:P,node:{x:I,y:L,z:E},tooltipPayload:A,tooltipPosition:{x:R,y:F},payload:k},p&&p[$]&&p[$].props)});return Es({points:C},d)});function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function n6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fX(n.key),n)}}function a6e(t,e,r){return e&&i6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s6e(t,e,r){return e=jx(e),o6e(t,dX()?Reflect.construct(e,r||[],jx(t).constructor):e.apply(t,r))}function o6e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l6e(t)}function l6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dX=function(){return!!t})()}function jx(t){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(t)}function c6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P8(t,e)}function P8(t,e){return P8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},P8(t,e)}function hX(t,e,r){return e=fX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fX(t){var e=u6e(t,"string");return df(e)=="symbol"?e:e+""}function u6e(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function D8(){return D8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D8.apply(this,arguments)}function d6e(t){var e=t.xAxisId,r=FN(),n=qN(),i=KW(e);return i==null?null:M.createElement(Of,D8({},i,{className:tr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return jl(s,!0)}}))}var i4=(function(t){function e(){return n6e(this,e),s6e(this,e,arguments)}return c6e(e,t),a6e(e,[{key:"render",value:function(){return M.createElement(d6e,this.props)}}])})(M.Component);hX(i4,"displayName","XAxis");hX(i4,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function h6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gX(n.key),n)}}function p6e(t,e,r){return e&&f6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m6e(t,e,r){return e=kx(e),g6e(t,pX()?Reflect.construct(e,r||[],kx(t).constructor):e.apply(t,r))}function g6e(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y6e(t)}function y6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pX=function(){return!!t})()}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(t)}function v6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L8(t,e)}function L8(t,e){return L8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},L8(t,e)}function mX(t,e,r){return e=gX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gX(t){var e=b6e(t,"string");return hf(e)=="symbol"?e:e+""}function b6e(t,e){if(hf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function B8(){return B8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B8.apply(this,arguments)}var x6e=function(e){var r=e.yAxisId,n=FN(),i=qN(),a=WW(r);return a==null?null:M.createElement(Of,B8({},a,{className:tr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return jl(l,!0)}}))},a4=(function(t){function e(){return h6e(this,e),m6e(this,e,arguments)}return v6e(e,t),p6e(e,[{key:"render",value:function(){return M.createElement(x6e,this.props)}}])})(M.Component);mX(a4,"displayName","YAxis");mX(a4,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function jz(t){return T6e(t)||S6e(t)||_6e(t)||w6e()}function w6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _6e(t,e){if(t){if(typeof t=="string")return U8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U8(t,e)}}function S6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T6e(t){if(Array.isArray(t))return U8(t)}function U8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z8=function(e,r,n,i,a){var s=us(e,GN),l=us(e,e4),d=[].concat(jz(s),jz(l)),h=us(e,r4),p="".concat(i,"Id"),m=i[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[p]===n&&Co(w.props,"extendDomain")&&lt(w.props[m])){var N=w.props[m];return[Math.min(S[0],N),Math.max(S[1],N)]}return S},y)),h.length){var b="".concat(m,"1"),T="".concat(m,"2");y=h.reduce(function(S,w){if(w.props[p]===n&&Co(w.props,"extendDomain")&&lt(w.props[b])&&lt(w.props[T])){var N=w.props[b],C=w.props[T];return[Math.min(S[0],N,C),Math.max(S[1],N,C)]}return S},y)}return a&&a.length&&(y=a.reduce(function(S,w){return lt(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},aT={exports:{}},kz;function A6e(){return kz||(kz=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function a(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new i(p,m||d,y),T=r?r+h:h;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],b]:d._events[T].push(b):(d._events[T]=b,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},l.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,b=m.length,T=new Array(b);y<b;y++)T[y]=m[y].fn;return T},l.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},l.prototype.emit=function(h,p,m,y,b,T){var S=r?r+h:h;if(!this._events[S])return!1;var w=this._events[S],N=arguments.length,C,k;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,b),!0;case 6:return w.fn.call(w.context,p,m,y,b,T),!0}for(k=1,C=new Array(N-1);k<N;k++)C[k-1]=arguments[k];w.fn.apply(w.context,C)}else{var $=w.length,I;for(k=0;k<$;k++)switch(w[k].once&&this.removeListener(h,w[k].fn,void 0,!0),N){case 1:w[k].fn.call(w[k].context);break;case 2:w[k].fn.call(w[k].context,p);break;case 3:w[k].fn.call(w[k].context,p,m);break;case 4:w[k].fn.call(w[k].context,p,m,y);break;default:if(!C)for(I=1,C=new Array(N-1);I<N;I++)C[I-1]=arguments[I];w[k].fn.apply(w[k].context,C)}}return!0},l.prototype.on=function(h,p,m){return a(this,h,p,m,!1)},l.prototype.once=function(h,p,m){return a(this,h,p,m,!0)},l.prototype.removeListener=function(h,p,m,y){var b=r?r+h:h;if(!this._events[b])return this;if(!p)return s(this,b),this;var T=this._events[b];if(T.fn)T.fn===p&&(!y||T.once)&&(!m||T.context===m)&&s(this,b);else{for(var S=0,w=[],N=T.length;S<N;S++)(T[S].fn!==p||y&&!T[S].once||m&&T[S].context!==m)&&w.push(T[S]);w.length?this._events[b]=w.length===1?w[0]:w:s(this,b)}return this},l.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&s(this,p)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(aT)),aT.exports}var E6e=A6e();const N6e=Ir(E6e);var sT=new N6e,oT="recharts.syncMouseEvents";function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function j6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yX(n.key),n)}}function C6e(t,e,r){return e&&k6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function lT(t,e,r){return e=yX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yX(t){var e=O6e(t,"string");return Cg(e)=="symbol"?e:e+""}function O6e(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I6e=(function(){function t(){j6e(this,t),lT(this,"activeIndex",0),lT(this,"coordinateList",[]),lT(this,"layout","horizontal")}return C6e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,l=s===void 0?null:s,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,b=y===void 0?null:y;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,l=i.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=a+d+h,y=s+this.offset.top+l/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function R6e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&lt(n)&&lt(i))return!0}return!1}function M6e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function vX(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,s=Jr(e,r,n,i),l=Jr(e,r,n,a);return{points:[s,l],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function P6e(t,e,r){var n,i,a,s;if(t==="horizontal")n=e.x,a=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=Jr(l,d,h,m),b=Jr(l,d,p,m);n=y.x,i=y.y,a=b.x,s=b.y}else return vX(e);return[{x:n,y:i},{x:a,y:s}]}function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}function Cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cz(Object(r),!0).forEach(function(n){D6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function D6e(t,e,r){return e=L6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function L6e(t){var e=B6e(t,"string");return Og(e)=="symbol"?e:e+""}function B6e(t,e){if(Og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function U6e(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,l=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,b=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!b||!a||!s||y!=="ScatterChart"&&i!=="axis")return null;var T,S=s8;if(y==="ScatterChart")T=s,S=L2e;else if(y==="BarChart")T=M6e(m,s,d,p),S=UN;else if(m==="radial"){var w=vX(s),N=w.cx,C=w.cy,k=w.radius,$=w.startAngle,I=w.endAngle;T={cx:N,cy:C,startAngle:$,endAngle:I,innerRadius:k,outerRadius:k},S=mW}else T={points:P6e(m,s,d)},S=s8;var L=_v(_v(_v(_v({stroke:"#ccc",pointerEvents:"none"},d),T),Ct(b,!1)),{},{payload:l,payloadIndex:h,className:tr("recharts-tooltip-cursor",b.className)});return M.isValidElement(b)?M.cloneElement(b,L):M.createElement(S,L)}var z6e=["item"],$6e=["children","className","width","height","style","compact","title","desc"];function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function ch(){return ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ch.apply(this,arguments)}function Oz(t,e){return q6e(t)||F6e(t,e)||xX(t,e)||V6e()}function V6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F6e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,l=[],d=!0,h=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==e);d=!0);}catch(p){h=!0,i=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw i}}return l}}function q6e(t){if(Array.isArray(t))return t}function Iz(t,e){if(t==null)return{};var r=H6e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function H6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wX(n.key),n)}}function W6e(t,e,r){return e&&K6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function X6e(t,e,r){return e=Cx(e),Q6e(t,bX()?Reflect.construct(e,r||[],Cx(t).constructor):e.apply(t,r))}function Q6e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y6e(t)}function Y6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bX(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bX=function(){return!!t})()}function Cx(t){return Cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cx(t)}function Z6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$8(t,e)}function $8(t,e){return $8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$8(t,e)}function pf(t){return t_e(t)||e_e(t)||xX(t)||J6e()}function J6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(t,e){if(t){if(typeof t=="string")return V8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V8(t,e)}}function e_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t_e(t){if(Array.isArray(t))return V8(t)}function V8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function De(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rz(Object(r),!0).forEach(function(n){Dt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Dt(t,e,r){return e=wX(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wX(t){var e=r_e(t,"string");return ff(e)=="symbol"?e:e+""}function r_e(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n_e={xAxis:["bottom","top"],yAxis:["left","right"]},i_e={width:"100%",height:"100%"},_X={x:0,y:0};function Sv(t){return t}var a_e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},s_e=function(e,r,n,i){var a=r.find(function(p){return p&&p.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,l=i.radius;return De(De(De({},i),Jr(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var d=a.coordinate,h=i.angle;return De(De(De({},i),Jr(i.cx,i.cy,d,h)),{},{angle:h,radius:d})}return _X},s4=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(l,d){var h=d.props.data;return h&&h.length?[].concat(pf(l),pf(h)):l},[]);return s.length>0?s:e&&e.length&&lt(i)&&lt(a)?e.slice(i,a+1):[]};function SX(t){return t==="number"?[0,"auto"]:void 0}var F8=function(e,r,n,i){var a=e.graphicalItems,s=e.tooltipAxis,l=s4(r,e);return n<0||!a||!a.length||n>=l.length?null:a.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var b=m===void 0?l:m;y=Cb(b,s.dataKey,i)}else y=m&&m[n]||l[n];return y?[].concat(pf(d),[cW(h,y)]):d},[])},Mz=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},s=a_e(a,n),l=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=ave(s,l,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=F8(e,r,p,m),b=s_e(n,l,p,a);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:b}}return null},o_e=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,b=nW(p,a);return n.reduce(function(T,S){var w,N=S.type.defaultProps!==void 0?De(De({},S.type.defaultProps),S.props):S.props,C=N.type,k=N.dataKey,$=N.allowDataOverflow,I=N.allowDuplicatedCategory,L=N.scale,E=N.ticks,A=N.includeHidden,R=N[s];if(T[R])return T;var F=s4(e.data,{graphicalItems:i.filter(function(re){var de,oe=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s];return oe===R}),dataStartIndex:d,dataEndIndex:h}),P=F.length,B,D,Q;R6e(N.domain,$,C)&&(B=t8(N.domain,null,$),b&&(C==="number"||L!=="auto")&&(Q=gm(F,k,"category")));var Z=SX(C);if(!B||B.length===0){var W,J=(W=N.domain)!==null&&W!==void 0?W:Z;if(k){if(B=gm(F,k,C),C==="category"&&b){var Y=Zde(B);I&&Y?(D=B,B=gx(0,P)):I||(B=MB(J,B,S).reduce(function(re,de){return re.indexOf(de)>=0?re:[].concat(pf(re),[de])},[]))}else if(C==="category")I?B=B.filter(function(re){return re!==""&&!Qt(re)}):B=MB(J,B,S).reduce(function(re,de){return re.indexOf(de)>=0||de===""||Qt(de)?re:[].concat(pf(re),[de])},[]);else if(C==="number"){var ge=uve(F,i.filter(function(re){var de,oe,ae=s in re.props?re.props[s]:(de=re.type.defaultProps)===null||de===void 0?void 0:de[s],pe="hide"in re.props?re.props.hide:(oe=re.type.defaultProps)===null||oe===void 0?void 0:oe.hide;return ae===R&&(A||!pe)}),k,a,p);ge&&(B=ge)}b&&(C==="number"||L!=="auto")&&(Q=gm(F,k,"category"))}else b?B=gx(0,P):l&&l[R]&&l[R].hasStack&&C==="number"?B=y==="expand"?[0,1]:lW(l[R].stackGroups,d,h):B=rW(F,i.filter(function(re){var de=s in re.props?re.props[s]:re.type.defaultProps[s],oe="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return de===R&&(A||!oe)}),C,p,!0);if(C==="number")B=z8(m,B,R,a,E),J&&(B=t8(J,B,$));else if(C==="category"&&J){var ce=J,X=B.every(function(re){return ce.indexOf(re)>=0});X&&(B=ce)}}return De(De({},T),{},Dt({},R,De(De({},N),{},{axisType:a,domain:B,categoricalDomain:Q,duplicateDomain:D,originalDomain:(w=N.domain)!==null&&w!==void 0?w:Z,isCategorical:b,layout:p})))},{})},l_e=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=s4(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),b=y.length,T=nW(p,a),S=-1;return n.reduce(function(w,N){var C=N.type.defaultProps!==void 0?De(De({},N.type.defaultProps),N.props):N.props,k=C[s],$=SX("number");if(!w[k]){S++;var I;return T?I=gx(0,b):l&&l[k]&&l[k].hasStack?(I=lW(l[k].stackGroups,d,h),I=z8(m,I,k,a)):(I=t8($,rW(y,n.filter(function(L){var E,A,R=s in L.props?L.props[s]:(E=L.type.defaultProps)===null||E===void 0?void 0:E[s],F="hide"in L.props?L.props.hide:(A=L.type.defaultProps)===null||A===void 0?void 0:A.hide;return R===k&&!F}),"number",p),i.defaultProps.allowDataOverflow),I=z8(m,I,k,a)),De(De({},w),{},Dt({},k,De(De({axisType:a},i.defaultProps),{},{hide:!0,orientation:Os(n_e,"".concat(a,".").concat(S%2),null),domain:I,originalDomain:$,isCategorical:T,layout:p})))}return w},{})},c_e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(i,"Id"),y=us(p,a),b={};return y&&y.length?b=o_e(e,{axes:y,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:h}):s&&s.length&&(b=l_e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:m,stackGroups:l,dataStartIndex:d,dataEndIndex:h})),b},u_e=function(e){var r=Wc(e),n=jl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:dN(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:rx(r,n)}},Pz=function(e){var r=e.children,n=e.defaultShowTooltip,i=rs(r,rf),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},d_e=function(e){return!e||!e.length?!1:e.some(function(r){var n=Il(r&&r.type);return n&&n.indexOf("Bar")>=0})},Dz=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},h_e=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,l=e.yAxisMap,d=l===void 0?{}:l,h=n.width,p=n.height,m=n.children,y=n.margin||{},b=rs(m,rf),T=rs(m,vh),S=Object.keys(d).reduce(function(I,L){var E=d[L],A=E.orientation;return!E.mirror&&!E.hide?De(De({},I),{},Dt({},A,I[A]+E.width)):I},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(I,L){var E=s[L],A=E.orientation;return!E.mirror&&!E.hide?De(De({},I),{},Dt({},A,Os(I,"".concat(A))+E.height)):I},{top:y.top||0,bottom:y.bottom||0}),N=De(De({},w),S),C=N.bottom;b&&(N.bottom+=b.props.height||rf.defaultProps.height),T&&r&&(N=lve(N,i,n,r));var k=h-N.left-N.right,$=p-N.top-N.bottom;return De(De({brushBottom:C},N),{},{width:Math.max(k,0),height:Math.max($,0)})},f_e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},TX=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,l=s===void 0?["axis"]:s,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(N,C){var k=C.graphicalItems,$=C.stackGroups,I=C.offset,L=C.updateId,E=C.dataStartIndex,A=C.dataEndIndex,R=N.barSize,F=N.layout,P=N.barGap,B=N.barCategoryGap,D=N.maxBarSize,Q=Dz(F),Z=Q.numericAxisName,W=Q.cateAxisName,J=d_e(k),Y=[];return k.forEach(function(ge,ce){var X=s4(N.data,{graphicalItems:[ge],dataStartIndex:E,dataEndIndex:A}),re=ge.type.defaultProps!==void 0?De(De({},ge.type.defaultProps),ge.props):ge.props,de=re.dataKey,oe=re.maxBarSize,ae=re["".concat(Z,"Id")],pe=re["".concat(W,"Id")],ve={},Qe=d.reduce(function(St,Xt){var ye=C["".concat(Xt.axisType,"Map")],We=re["".concat(Xt.axisType,"Id")];ye&&ye[We]||Xt.axisType==="zAxis"||Gd();var mt=ye[We];return De(De({},St),{},Dt(Dt({},Xt.axisType,mt),"".concat(Xt.axisType,"Ticks"),jl(mt)))},ve),Ne=Qe[W],le=Qe["".concat(W,"Ticks")],we=$&&$[ae]&&$[ae].hasStack&&bve(ge,$[ae].stackGroups),xe=Il(ge.type).indexOf("Bar")>=0,ut=rx(Ne,le),He=[],ct=J&&sve({barSize:R,stackGroups:$,totalSize:f_e(Qe,W)});if(xe){var nt,Ut,Ie=Qt(oe)?D:oe,st=(nt=(Ut=rx(Ne,le,!0))!==null&&Ut!==void 0?Ut:Ie)!==null&&nt!==void 0?nt:0;He=ove({barGap:P,barCategoryGap:B,bandSize:st!==ut?st:ut,sizeList:ct[pe],maxBarSize:Ie}),st!==ut&&(He=He.map(function(St){return De(De({},St),{},{position:De(De({},St.position),{},{offset:St.position.offset-st/2})})}))}var pt=ge&&ge.type&&ge.type.getComposedData;pt&&Y.push({props:De(De({},pt(De(De({},Qe),{},{displayedData:X,props:N,dataKey:de,item:ge,bandSize:ut,barPosition:He,offset:I,stackedData:we,layout:F,dataStartIndex:E,dataEndIndex:A}))),{},Dt(Dt(Dt({key:ge.key||"item-".concat(ce)},Z,Qe[Z]),W,Qe[W]),"animationId",L)),childIndex:d0e(ge,N.children),item:ge})}),Y},b=function(N,C){var k=N.props,$=N.dataStartIndex,I=N.dataEndIndex,L=N.updateId;if(!WM({props:k}))return null;var E=k.children,A=k.layout,R=k.stackOffset,F=k.data,P=k.reverseStackOrder,B=Dz(A),D=B.numericAxisName,Q=B.cateAxisName,Z=us(E,n),W=yve(F,Z,"".concat(D,"Id"),"".concat(Q,"Id"),R,P),J=d.reduce(function(re,de){var oe="".concat(de.axisType,"Map");return De(De({},re),{},Dt({},oe,c_e(k,De(De({},de),{},{graphicalItems:Z,stackGroups:de.axisType===D&&W,dataStartIndex:$,dataEndIndex:I}))))},{}),Y=h_e(De(De({},J),{},{props:k,graphicalItems:Z}),C==null?void 0:C.legendBBox);Object.keys(J).forEach(function(re){J[re]=p(k,J[re],Y,re.replace("Map",""),r)});var ge=J["".concat(Q,"Map")],ce=u_e(ge),X=y(k,De(De({},J),{},{dataStartIndex:$,dataEndIndex:I,updateId:L,graphicalItems:Z,stackGroups:W,offset:Y}));return De(De({formattedGraphicalItems:X,graphicalItems:Z,offset:Y,stackGroups:W},ce),J)},T=(function(w){function N(C){var k,$,I;return G6e(this,N),I=X6e(this,N,[C]),Dt(I,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Dt(I,"accessibilityManager",new I6e),Dt(I,"handleLegendBBoxUpdate",function(L){if(L){var E=I.state,A=E.dataStartIndex,R=E.dataEndIndex,F=E.updateId;I.setState(De({legendBBox:L},b({props:I.props,dataStartIndex:A,dataEndIndex:R,updateId:F},De(De({},I.state),{},{legendBBox:L}))))}}),Dt(I,"handleReceiveSyncEvent",function(L,E,A){if(I.props.syncId===L){if(A===I.eventEmitterSymbol&&typeof I.props.syncMethod!="function")return;I.applySyncEvent(E)}}),Dt(I,"handleBrushChange",function(L){var E=L.startIndex,A=L.endIndex;if(E!==I.state.dataStartIndex||A!==I.state.dataEndIndex){var R=I.state.updateId;I.setState(function(){return De({dataStartIndex:E,dataEndIndex:A},b({props:I.props,dataStartIndex:E,dataEndIndex:A,updateId:R},I.state))}),I.triggerSyncEvent({dataStartIndex:E,dataEndIndex:A})}}),Dt(I,"handleMouseEnter",function(L){var E=I.getMouseInfo(L);if(E){var A=De(De({},E),{},{isTooltipActive:!0});I.setState(A),I.triggerSyncEvent(A);var R=I.props.onMouseEnter;qt(R)&&R(A,L)}}),Dt(I,"triggeredAfterMouseMove",function(L){var E=I.getMouseInfo(L),A=E?De(De({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};I.setState(A),I.triggerSyncEvent(A);var R=I.props.onMouseMove;qt(R)&&R(A,L)}),Dt(I,"handleItemMouseEnter",function(L){I.setState(function(){return{isTooltipActive:!0,activeItem:L,activePayload:L.tooltipPayload,activeCoordinate:L.tooltipPosition||{x:L.cx,y:L.cy}}})}),Dt(I,"handleItemMouseLeave",function(){I.setState(function(){return{isTooltipActive:!1}})}),Dt(I,"handleMouseMove",function(L){L.persist(),I.throttleTriggeredAfterMouseMove(L)}),Dt(I,"handleMouseLeave",function(L){I.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};I.setState(E),I.triggerSyncEvent(E);var A=I.props.onMouseLeave;qt(A)&&A(E,L)}),Dt(I,"handleOuterEvent",function(L){var E=u0e(L),A=Os(I.props,"".concat(E));if(E&&qt(A)){var R,F;/.*touch.*/i.test(E)?F=I.getMouseInfo(L.changedTouches[0]):F=I.getMouseInfo(L),A((R=F)!==null&&R!==void 0?R:{},L)}}),Dt(I,"handleClick",function(L){var E=I.getMouseInfo(L);if(E){var A=De(De({},E),{},{isTooltipActive:!0});I.setState(A),I.triggerSyncEvent(A);var R=I.props.onClick;qt(R)&&R(A,L)}}),Dt(I,"handleMouseDown",function(L){var E=I.props.onMouseDown;if(qt(E)){var A=I.getMouseInfo(L);E(A,L)}}),Dt(I,"handleMouseUp",function(L){var E=I.props.onMouseUp;if(qt(E)){var A=I.getMouseInfo(L);E(A,L)}}),Dt(I,"handleTouchMove",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.throttleTriggeredAfterMouseMove(L.changedTouches[0])}),Dt(I,"handleTouchStart",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.handleMouseDown(L.changedTouches[0])}),Dt(I,"handleTouchEnd",function(L){L.changedTouches!=null&&L.changedTouches.length>0&&I.handleMouseUp(L.changedTouches[0])}),Dt(I,"handleDoubleClick",function(L){var E=I.props.onDoubleClick;if(qt(E)){var A=I.getMouseInfo(L);E(A,L)}}),Dt(I,"handleContextMenu",function(L){var E=I.props.onContextMenu;if(qt(E)){var A=I.getMouseInfo(L);E(A,L)}}),Dt(I,"triggerSyncEvent",function(L){I.props.syncId!==void 0&&sT.emit(oT,I.props.syncId,L,I.eventEmitterSymbol)}),Dt(I,"applySyncEvent",function(L){var E=I.props,A=E.layout,R=E.syncMethod,F=I.state.updateId,P=L.dataStartIndex,B=L.dataEndIndex;if(L.dataStartIndex!==void 0||L.dataEndIndex!==void 0)I.setState(De({dataStartIndex:P,dataEndIndex:B},b({props:I.props,dataStartIndex:P,dataEndIndex:B,updateId:F},I.state)));else if(L.activeTooltipIndex!==void 0){var D=L.chartX,Q=L.chartY,Z=L.activeTooltipIndex,W=I.state,J=W.offset,Y=W.tooltipTicks;if(!J)return;if(typeof R=="function")Z=R(Y,L);else if(R==="value"){Z=-1;for(var ge=0;ge<Y.length;ge++)if(Y[ge].value===L.activeLabel){Z=ge;break}}var ce=De(De({},J),{},{x:J.left,y:J.top}),X=Math.min(D,ce.x+ce.width),re=Math.min(Q,ce.y+ce.height),de=Y[Z]&&Y[Z].value,oe=F8(I.state,I.props.data,Z),ae=Y[Z]?{x:A==="horizontal"?Y[Z].coordinate:X,y:A==="horizontal"?re:Y[Z].coordinate}:_X;I.setState(De(De({},L),{},{activeLabel:de,activeCoordinate:ae,activePayload:oe,activeTooltipIndex:Z}))}else I.setState(L)}),Dt(I,"renderCursor",function(L){var E,A=I.state,R=A.isTooltipActive,F=A.activeCoordinate,P=A.activePayload,B=A.offset,D=A.activeTooltipIndex,Q=A.tooltipAxisBandSize,Z=I.getTooltipEventType(),W=(E=L.props.active)!==null&&E!==void 0?E:R,J=I.props.layout,Y=L.key||"_recharts-cursor";return te.createElement(U6e,{key:Y,activeCoordinate:F,activePayload:P,activeTooltipIndex:D,chartName:r,element:L,isActive:W,layout:J,offset:B,tooltipAxisBandSize:Q,tooltipEventType:Z})}),Dt(I,"renderPolarAxis",function(L,E,A){var R=Os(L,"type.axisType"),F=Os(I.state,"".concat(R,"Map")),P=L.type.defaultProps,B=P!==void 0?De(De({},P),L.props):L.props,D=F&&F[B["".concat(R,"Id")]];return M.cloneElement(L,De(De({},D),{},{className:tr(R,D.className),key:L.key||"".concat(E,"-").concat(A),ticks:jl(D,!0)}))}),Dt(I,"renderPolarGrid",function(L){var E=L.props,A=E.radialLines,R=E.polarAngles,F=E.polarRadius,P=I.state,B=P.radiusAxisMap,D=P.angleAxisMap,Q=Wc(B),Z=Wc(D),W=Z.cx,J=Z.cy,Y=Z.innerRadius,ge=Z.outerRadius;return M.cloneElement(L,{polarAngles:Array.isArray(R)?R:jl(Z,!0).map(function(ce){return ce.coordinate}),polarRadius:Array.isArray(F)?F:jl(Q,!0).map(function(ce){return ce.coordinate}),cx:W,cy:J,innerRadius:Y,outerRadius:ge,key:L.key||"polar-grid",radialLines:A})}),Dt(I,"renderLegend",function(){var L=I.state.formattedGraphicalItems,E=I.props,A=E.children,R=E.width,F=E.height,P=I.props.margin||{},B=R-(P.left||0)-(P.right||0),D=eW({children:A,formattedGraphicalItems:L,legendWidth:B,legendContent:h});if(!D)return null;var Q=D.item,Z=Iz(D,z6e);return M.cloneElement(Q,De(De({},Z),{},{chartWidth:R,chartHeight:F,margin:P,onBBoxUpdate:I.handleLegendBBoxUpdate}))}),Dt(I,"renderTooltip",function(){var L,E=I.props,A=E.children,R=E.accessibilityLayer,F=rs(A,xo);if(!F)return null;var P=I.state,B=P.isTooltipActive,D=P.activeCoordinate,Q=P.activePayload,Z=P.activeLabel,W=P.offset,J=(L=F.props.active)!==null&&L!==void 0?L:B;return M.cloneElement(F,{viewBox:De(De({},W),{},{x:W.left,y:W.top}),active:J,label:Z,payload:J?Q:[],coordinate:D,accessibilityLayer:R})}),Dt(I,"renderBrush",function(L){var E=I.props,A=E.margin,R=E.data,F=I.state,P=F.offset,B=F.dataStartIndex,D=F.dataEndIndex,Q=F.updateId;return M.cloneElement(L,{key:L.key||"_recharts-brush",onChange:vv(I.handleBrushChange,L.props.onChange),data:R,x:lt(L.props.x)?L.props.x:P.left,y:lt(L.props.y)?L.props.y:P.top+P.height+P.brushBottom-(A.bottom||0),width:lt(L.props.width)?L.props.width:P.width,startIndex:B,endIndex:D,updateId:"brush-".concat(Q)})}),Dt(I,"renderReferenceElement",function(L,E,A){if(!L)return null;var R=I,F=R.clipPathId,P=I.state,B=P.xAxisMap,D=P.yAxisMap,Q=P.offset,Z=L.type.defaultProps||{},W=L.props,J=W.xAxisId,Y=J===void 0?Z.xAxisId:J,ge=W.yAxisId,ce=ge===void 0?Z.yAxisId:ge;return M.cloneElement(L,{key:L.key||"".concat(E,"-").concat(A),xAxis:B[Y],yAxis:D[ce],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:F})}),Dt(I,"renderActivePoints",function(L){var E=L.item,A=L.activePoint,R=L.basePoint,F=L.childIndex,P=L.isRange,B=[],D=E.props.key,Q=E.item.type.defaultProps!==void 0?De(De({},E.item.type.defaultProps),E.item.props):E.item.props,Z=Q.activeDot,W=Q.dataKey,J=De(De({index:F,dataKey:W,cx:A.x,cy:A.y,r:4,fill:BN(E.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ct(Z,!1)),Ob(Z));return B.push(N.renderActiveDot(Z,J,"".concat(D,"-activePoint-").concat(F))),R?B.push(N.renderActiveDot(Z,De(De({},J),{},{cx:R.x,cy:R.y}),"".concat(D,"-basePoint-").concat(F))):P&&B.push(null),B}),Dt(I,"renderGraphicChild",function(L,E,A){var R=I.filterFormatItem(L,E,A);if(!R)return null;var F=I.getTooltipEventType(),P=I.state,B=P.isTooltipActive,D=P.tooltipAxis,Q=P.activeTooltipIndex,Z=P.activeLabel,W=I.props.children,J=rs(W,xo),Y=R.props,ge=Y.points,ce=Y.isRange,X=Y.baseLine,re=R.item.type.defaultProps!==void 0?De(De({},R.item.type.defaultProps),R.item.props):R.item.props,de=re.activeDot,oe=re.hide,ae=re.activeBar,pe=re.activeShape,ve=!!(!oe&&B&&J&&(de||ae||pe)),Qe={};F!=="axis"&&J&&J.props.trigger==="click"?Qe={onClick:vv(I.handleItemMouseEnter,L.props.onClick)}:F!=="axis"&&(Qe={onMouseLeave:vv(I.handleItemMouseLeave,L.props.onMouseLeave),onMouseEnter:vv(I.handleItemMouseEnter,L.props.onMouseEnter)});var Ne=M.cloneElement(L,De(De({},R.props),Qe));function le(Xt){return typeof D.dataKey=="function"?D.dataKey(Xt.payload):null}if(ve)if(Q>=0){var we,xe;if(D.dataKey&&!D.allowDuplicatedCategory){var ut=typeof D.dataKey=="function"?le:"payload.".concat(D.dataKey.toString());we=Cb(ge,ut,Z),xe=ce&&X&&Cb(X,ut,Z)}else we=ge==null?void 0:ge[Q],xe=ce&&X&&X[Q];if(pe||ae){var He=L.props.activeIndex!==void 0?L.props.activeIndex:Q;return[M.cloneElement(L,De(De(De({},R.props),Qe),{},{activeIndex:He})),null,null]}if(!Qt(we))return[Ne].concat(pf(I.renderActivePoints({item:R,activePoint:we,basePoint:xe,childIndex:Q,isRange:ce})))}else{var ct,nt=(ct=I.getItemByXY(I.state.activeCoordinate))!==null&&ct!==void 0?ct:{graphicalItem:Ne},Ut=nt.graphicalItem,Ie=Ut.item,st=Ie===void 0?L:Ie,pt=Ut.childIndex,St=De(De(De({},R.props),Qe),{},{activeIndex:pt});return[M.cloneElement(st,St),null,null]}return ce?[Ne,null,null]:[Ne,null]}),Dt(I,"renderCustomized",function(L,E,A){return M.cloneElement(L,De(De({key:"recharts-customized-".concat(A)},I.props),I.state))}),Dt(I,"renderMap",{CartesianGrid:{handler:Sv,once:!0},ReferenceArea:{handler:I.renderReferenceElement},ReferenceLine:{handler:Sv},ReferenceDot:{handler:I.renderReferenceElement},XAxis:{handler:Sv},YAxis:{handler:Sv},Brush:{handler:I.renderBrush,once:!0},Bar:{handler:I.renderGraphicChild},Line:{handler:I.renderGraphicChild},Area:{handler:I.renderGraphicChild},Radar:{handler:I.renderGraphicChild},RadialBar:{handler:I.renderGraphicChild},Scatter:{handler:I.renderGraphicChild},Pie:{handler:I.renderGraphicChild},Funnel:{handler:I.renderGraphicChild},Tooltip:{handler:I.renderCursor,once:!0},PolarGrid:{handler:I.renderPolarGrid,once:!0},PolarAngleAxis:{handler:I.renderPolarAxis},PolarRadiusAxis:{handler:I.renderPolarAxis},Customized:{handler:I.renderCustomized}}),I.clipPathId="".concat((k=C.id)!==null&&k!==void 0?k:s1("recharts"),"-clip"),I.throttleTriggeredAfterMouseMove=JG(I.triggeredAfterMouseMove,($=C.throttleDelay)!==null&&$!==void 0?$:1e3/60),I.state={},I}return Z6e(N,w),W6e(N,[{key:"componentDidMount",value:function(){var k,$;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(k=this.props.margin.left)!==null&&k!==void 0?k:0,top:($=this.props.margin.top)!==null&&$!==void 0?$:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var k=this.props,$=k.children,I=k.data,L=k.height,E=k.layout,A=rs($,xo);if(A){var R=A.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,P=F8(this.state,I,R,F),B=this.state.tooltipTicks[R].coordinate,D=(this.state.offset.top+L)/2,Q=E==="horizontal",Z=Q?{x:B,y:D}:{y:B,x:D},W=this.state.formattedGraphicalItems.find(function(Y){var ge=Y.item;return ge.type.name==="Scatter"});W&&(Z=De(De({},Z),W.props.points[R].tooltipPosition),P=W.props.points[R].tooltipPayload);var J={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:F,activePayload:P,activeCoordinate:Z};this.setState(J),this.renderCursor(A),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(k,$){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==$.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==k.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==k.margin){var I,L;this.accessibilityManager.setDetails({offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0}})}return null}},{key:"componentDidUpdate",value:function(k){SA([rs(k.children,xo)],[rs(this.props.children,xo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var k=rs(this.props.children,xo);if(k&&typeof k.props.shared=="boolean"){var $=k.props.shared?"axis":"item";return l.indexOf($)>=0?$:a}return a}},{key:"getMouseInfo",value:function(k){if(!this.container)return null;var $=this.container,I=$.getBoundingClientRect(),L=Ype(I),E={chartX:Math.round(k.pageX-L.left),chartY:Math.round(k.pageY-L.top)},A=I.width/$.offsetWidth||1,R=this.inRange(E.chartX,E.chartY,A);if(!R)return null;var F=this.state,P=F.xAxisMap,B=F.yAxisMap,D=this.getTooltipEventType(),Q=Mz(this.state,this.props.data,this.props.layout,R);if(D!=="axis"&&P&&B){var Z=Wc(P).scale,W=Wc(B).scale,J=Z&&Z.invert?Z.invert(E.chartX):null,Y=W&&W.invert?W.invert(E.chartY):null;return De(De({},E),{},{xValue:J,yValue:Y},Q)}return Q?De(De({},E),Q):null}},{key:"inRange",value:function(k,$){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,L=this.props.layout,E=k/I,A=$/I;if(L==="horizontal"||L==="vertical"){var R=this.state.offset,F=E>=R.left&&E<=R.left+R.width&&A>=R.top&&A<=R.top+R.height;return F?{x:E,y:A}:null}var P=this.state,B=P.angleAxisMap,D=P.radiusAxisMap;if(B&&D){var Q=Wc(B);return LB({x:E,y:A},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var k=this.props.children,$=this.getTooltipEventType(),I=rs(k,xo),L={};I&&$==="axis"&&(I.props.trigger==="click"?L={onClick:this.handleClick}:L={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=Ob(this.props,this.handleOuterEvent);return De(De({},E),L)}},{key:"addListener",value:function(){sT.on(oT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){sT.removeListener(oT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(k,$,I){for(var L=this.state.formattedGraphicalItems,E=0,A=L.length;E<A;E++){var R=L[E];if(R.item===k||R.props.key===k.key||$===Il(R.item.type)&&I===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var k=this.clipPathId,$=this.state.offset,I=$.left,L=$.top,E=$.height,A=$.width;return te.createElement("defs",null,te.createElement("clipPath",{id:k},te.createElement("rect",{x:I,y:L,height:E,width:A})))}},{key:"getXScales",value:function(){var k=this.state.xAxisMap;return k?Object.entries(k).reduce(function($,I){var L=Oz(I,2),E=L[0],A=L[1];return De(De({},$),{},Dt({},E,A.scale))},{}):null}},{key:"getYScales",value:function(){var k=this.state.yAxisMap;return k?Object.entries(k).reduce(function($,I){var L=Oz(I,2),E=L[0],A=L[1];return De(De({},$),{},Dt({},E,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(k){var $;return($=this.state.xAxisMap)===null||$===void 0||($=$[k])===null||$===void 0?void 0:$.scale}},{key:"getYScaleByAxisId",value:function(k){var $;return($=this.state.yAxisMap)===null||$===void 0||($=$[k])===null||$===void 0?void 0:$.scale}},{key:"getItemByXY",value:function(k){var $=this.state,I=$.formattedGraphicalItems,L=$.activeItem;if(I&&I.length)for(var E=0,A=I.length;E<A;E++){var R=I[E],F=R.props,P=R.item,B=P.type.defaultProps!==void 0?De(De({},P.type.defaultProps),P.props):P.props,D=Il(P.type);if(D==="Bar"){var Q=(F.data||[]).find(function(Y){return v2e(k,Y)});if(Q)return{graphicalItem:R,payload:Q}}else if(D==="RadialBar"){var Z=(F.data||[]).find(function(Y){return LB(k,Y)});if(Z)return{graphicalItem:R,payload:Z}}else if(Q2(R,L)||Y2(R,L)||Ag(R,L)){var W=Y4e({graphicalItem:R,activeTooltipItem:L,itemData:B.data}),J=B.activeIndex===void 0?W:B.activeIndex;return{graphicalItem:De(De({},R),{},{childIndex:J}),payload:Ag(R,L)?B.data[W]:R.props.data[W]}}}return null}},{key:"render",value:function(){var k=this;if(!WM(this))return null;var $=this.props,I=$.children,L=$.className,E=$.width,A=$.height,R=$.style,F=$.compact,P=$.title,B=$.desc,D=Iz($,$6e),Q=Ct(D,!1);if(F)return te.createElement(fz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement(AA,ch({},Q,{width:E,height:A,title:P,desc:B}),this.renderClipPath(),QM(I,this.renderMap)));if(this.props.accessibilityLayer){var Z,W;Q.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,Q.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Q.onKeyDown=function(Y){k.accessibilityManager.keyboardEvent(Y)},Q.onFocus=function(){k.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return te.createElement(fz,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},te.createElement("div",ch({className:tr("recharts-wrapper",L),style:De({position:"relative",cursor:"default",width:E,height:A},R)},J,{ref:function(ge){k.container=ge}}),te.createElement(AA,ch({},Q,{width:E,height:A,title:P,desc:B,style:i_e}),this.renderClipPath(),QM(I,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(M.Component);Dt(T,"displayName",r),Dt(T,"defaultProps",De({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Dt(T,"getDerivedStateFromProps",function(w,N){var C=w.dataKey,k=w.data,$=w.children,I=w.width,L=w.height,E=w.layout,A=w.stackOffset,R=w.margin,F=N.dataStartIndex,P=N.dataEndIndex;if(N.updateId===void 0){var B=Pz(w);return De(De(De({},B),{},{updateId:0},b(De(De({props:w},B),{},{updateId:0}),N)),{},{prevDataKey:C,prevData:k,prevWidth:I,prevHeight:L,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:$})}if(C!==N.prevDataKey||k!==N.prevData||I!==N.prevWidth||L!==N.prevHeight||E!==N.prevLayout||A!==N.prevStackOffset||!yh(R,N.prevMargin)){var D=Pz(w),Q={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Z=De(De({},Mz(N,k,E)),{},{updateId:N.updateId+1}),W=De(De(De({},D),Q),Z);return De(De(De({},W),b(De({props:w},W),N)),{},{prevDataKey:C,prevData:k,prevWidth:I,prevHeight:L,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:$})}if(!SA($,N.prevChildren)){var J,Y,ge,ce,X=rs($,rf),re=X&&(J=(Y=X.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&J!==void 0?J:F,de=X&&(ge=(ce=X.props)===null||ce===void 0?void 0:ce.endIndex)!==null&&ge!==void 0?ge:P,oe=re!==F||de!==P,ae=!Qt(k),pe=ae&&!oe?N.updateId:N.updateId+1;return De(De({updateId:pe},b(De(De({props:w},N),{},{updateId:pe,dataStartIndex:re,dataEndIndex:de}),N)),{},{prevChildren:$,dataStartIndex:re,dataEndIndex:de})}return null}),Dt(T,"renderActiveDot",function(w,N,C){var k;return M.isValidElement(w)?k=M.cloneElement(w,N):qt(w)?k=w(N):k=te.createElement(K2,N),te.createElement(jr,{className:"recharts-active-dot",key:C},k)});var S=M.forwardRef(function(N,C){return te.createElement(T,ch({},N,{ref:C}))});return S.displayName=T.displayName,S},p_e=TX({chartName:"RadarChart",GraphicalChild:g1,axisComponents:[{axisType:"angleAxis",AxisComp:m1},{axisType:"radiusAxis",AxisComp:p1}],formatAxisMap:Cve,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),m_e=TX({chartName:"ScatterChart",GraphicalChild:v1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:i4},{axisType:"yAxis",AxisComp:a4},{axisType:"zAxis",AxisComp:n4}],formatAxisMap:o5e});const o4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function If(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function XN(t){return"nodeType"in t}function ba(t){var e,r;return t?If(t)?t:XN(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function QN(t){const{Document:e}=ba(t);return t instanceof e}function b1(t){return If(t)?!1:t instanceof ba(t).HTMLElement}function AX(t){return t instanceof ba(t).SVGElement}function Rf(t){return t?If(t)?t.document:XN(t)?QN(t)?t:b1(t)||AX(t)?t.ownerDocument:document:document:document}const Xl=o4?M.useLayoutEffect:M.useEffect;function l4(t){const e=M.useRef(t);return Xl(()=>{e.current=t}),M.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.current==null?void 0:e.current(...n)},[])}function g_e(){const t=M.useRef(null),e=M.useCallback((n,i)=>{t.current=setInterval(n,i)},[]),r=M.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Ig(t,e){e===void 0&&(e=[t]);const r=M.useRef(t);return Xl(()=>{r.current!==t&&(r.current=t)},e),r}function x1(t,e){const r=M.useRef();return M.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Ox(t){const e=l4(t),r=M.useRef(null),n=M.useCallback(i=>{i!==r.current&&(e==null||e(i,r.current)),r.current=i},[]);return[r,n]}function Ix(t){const e=M.useRef();return M.useEffect(()=>{e.current=t},[t]),e.current}let cT={};function c4(t,e){return M.useMemo(()=>{if(e)return e;const r=cT[t]==null?0:cT[t]+1;return cT[t]=r,t+"-"+r},[t,e])}function EX(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.reduce((a,s)=>{const l=Object.entries(s);for(const[d,h]of l){const p=a[d];p!=null&&(a[d]=p+t*h)}return a},{...e})}}const wh=EX(1),Rx=EX(-1);function y_e(t){return"clientX"in t&&"clientY"in t}function YN(t){if(!t)return!1;const{KeyboardEvent:e}=ba(t.target);return e&&t instanceof e}function v_e(t){if(!t)return!1;const{TouchEvent:e}=ba(t.target);return e&&t instanceof e}function Rg(t){if(v_e(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return y_e(t)?{x:t.clientX,y:t.clientY}:null}const Mg=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Mg.Translate.toString(t),Mg.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),Lz="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function b_e(t){return t.matches(Lz)?t:t.querySelector(Lz)}const x_e={display:"none"};function w_e(t){let{id:e,value:r}=t;return te.createElement("div",{id:e,style:x_e},r)}function __e(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return te.createElement("div",{id:e,style:i,role:"status","aria-live":n,"aria-atomic":!0},r)}function S_e(){const[t,e]=M.useState("");return{announce:M.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const NX=M.createContext(null);function T_e(t){const e=M.useContext(NX);M.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function A_e(){const[t]=M.useState(()=>new Set),e=M.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[M.useCallback(n=>{let{type:i,event:a}=n;t.forEach(s=>{var l;return(l=s[i])==null?void 0:l.call(s,a)})},[t]),e]}const E_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},N_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function j_e(t){let{announcements:e=N_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:i=E_e}=t;const{announce:a,announcement:s}=S_e(),l=c4("DndLiveRegion"),[d,h]=M.useState(!1);if(M.useEffect(()=>{h(!0)},[]),T_e(M.useMemo(()=>({onDragStart(m){let{active:y}=m;a(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:b}=m;e.onDragMove&&a(e.onDragMove({active:y,over:b}))},onDragOver(m){let{active:y,over:b}=m;a(e.onDragOver({active:y,over:b}))},onDragEnd(m){let{active:y,over:b}=m;a(e.onDragEnd({active:y,over:b}))},onDragCancel(m){let{active:y,over:b}=m;a(e.onDragCancel({active:y,over:b}))}}),[a,e])),!d)return null;const p=te.createElement(te.Fragment,null,te.createElement(w_e,{id:n,value:i.draggable}),te.createElement(__e,{id:l,announcement:s}));return r?rm.createPortal(p,r):p}var mi;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(mi||(mi={}));function Mx(){}function Bz(t,e){return M.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function k_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return M.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const oo=Object.freeze({x:0,y:0});function C_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function O_e(t,e){const r=Rg(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function I_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function R_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function M_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function Uz(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const P_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=Uz(e,e.left,e.top),a=[];for(const s of n){const{id:l}=s,d=r.get(l);if(d){const h=C_e(Uz(d),i);a.push({id:l,data:{droppableContainer:s,value:h}})}}return a.sort(I_e)};function D_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height),s=i-n,l=a-r;if(n<i&&r<a){const d=e.width*e.height,h=t.width*t.height,p=s*l,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const L_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const i=[];for(const a of n){const{id:s}=a,l=r.get(s);if(l){const d=D_e(l,e);d>0&&i.push({id:s,data:{droppableContainer:a,value:d}})}}return i.sort(R_e)};function B_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function jX(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:oo}function U_e(t){return function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return i.reduce((s,l)=>({...s,top:s.top+t*l.y,bottom:s.bottom+t*l.y,left:s.left+t*l.x,right:s.right+t*l.x}),{...r})}}const z_e=U_e(1);function kX(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $_e(t,e,r){const n=kX(e);if(!n)return t;const{scaleX:i,scaleY:a,x:s,y:l}=n,d=t.left-s-(1-i)*parseFloat(r),h=t.top-l-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),p=i?t.width/i:t.width,m=a?t.height/a:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const V_e={ignoreTransform:!1};function w1(t,e){e===void 0&&(e=V_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=ba(t).getComputedStyle(t);h&&(r=$_e(r,h,p))}const{top:n,left:i,width:a,height:s,bottom:l,right:d}=r;return{top:n,left:i,width:a,height:s,bottom:l,right:d}}function zz(t){return w1(t,{ignoreTransform:!0})}function F_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function q_e(t,e){return e===void 0&&(e=ba(t).getComputedStyle(t)),e.position==="fixed"}function H_e(t,e){e===void 0&&(e=ba(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=e[i];return typeof a=="string"?r.test(a):!1})}function ZN(t,e){const r=[];function n(i){if(e!=null&&r.length>=e||!i)return r;if(QN(i)&&i.scrollingElement!=null&&!r.includes(i.scrollingElement))return r.push(i.scrollingElement),r;if(!b1(i)||AX(i)||r.includes(i))return r;const a=ba(t).getComputedStyle(i);return i!==t&&H_e(i,a)&&r.push(i),q_e(i,a)?r:n(i.parentNode)}return t?n(t):r}function CX(t){const[e]=ZN(t,1);return e??null}function uT(t){return!o4||!t?null:If(t)?t:XN(t)?QN(t)||t===Rf(t).scrollingElement?window:b1(t)?t:null:null}function OX(t){return If(t)?t.scrollX:t.scrollLeft}function IX(t){return If(t)?t.scrollY:t.scrollTop}function q8(t){return{x:OX(t),y:IX(t)}}var ki;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(ki||(ki={}));function RX(t){return!o4||!t?!1:t===document.scrollingElement}function MX(t){const e={x:0,y:0},r=RX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},i=t.scrollTop<=e.y,a=t.scrollLeft<=e.x,s=t.scrollTop>=n.y,l=t.scrollLeft>=n.x;return{isTop:i,isLeft:a,isBottom:s,isRight:l,maxScroll:n,minScroll:e}}const G_e={x:.2,y:.2};function K_e(t,e,r,n,i){let{top:a,left:s,right:l,bottom:d}=r;n===void 0&&(n=10),i===void 0&&(i=G_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=MX(t),b={x:0,y:0},T={x:0,y:0},S={height:e.height*i.y,width:e.width*i.x};return!h&&a<=e.top+S.height?(b.y=ki.Backward,T.y=n*Math.abs((e.top+S.height-a)/S.height)):!p&&d>=e.bottom-S.height&&(b.y=ki.Forward,T.y=n*Math.abs((e.bottom-S.height-d)/S.height)),!y&&l>=e.right-S.width?(b.x=ki.Forward,T.x=n*Math.abs((e.right-S.width-l)/S.width)):!m&&s<=e.left+S.width&&(b.x=ki.Backward,T.x=n*Math.abs((e.left+S.width-s)/S.width)),{direction:b,speed:T}}function W_e(t){if(t===document.scrollingElement){const{innerWidth:a,innerHeight:s}=window;return{top:0,left:0,right:a,bottom:s,width:a,height:s}}const{top:e,left:r,right:n,bottom:i}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:i,width:t.clientWidth,height:t.clientHeight}}function PX(t){return t.reduce((e,r)=>wh(e,q8(r)),oo)}function X_e(t){return t.reduce((e,r)=>e+OX(r),0)}function Q_e(t){return t.reduce((e,r)=>e+IX(r),0)}function DX(t,e){if(e===void 0&&(e=w1),!t)return;const{top:r,left:n,bottom:i,right:a}=e(t);CX(t)&&(i<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Y_e=[["x",["left","right"],X_e],["y",["top","bottom"],Q_e]];class JN{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=ZN(r),i=PX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[a,s,l]of Y_e)for(const d of s)Object.defineProperty(this,d,{get:()=>{const h=l(n),p=i[a]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class _m{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var i;(i=this.target)==null||i.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function Z_e(t){const{EventTarget:e}=ba(t);return t instanceof e?t:Rf(t)}function dT(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ns;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ns||(Ns={}));function $z(t){t.preventDefault()}function J_e(t){t.stopPropagation()}var an;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(an||(an={}));const LX={start:[an.Space,an.Enter],cancel:[an.Esc],end:[an.Space,an.Enter,an.Tab]},eSe=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case an.Right:return{...r,x:r.x+25};case an.Left:return{...r,x:r.x-25};case an.Down:return{...r,y:r.y+25};case an.Up:return{...r,y:r.y-25}}};class BX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new _m(Rf(r)),this.windowListeners=new _m(ba(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ns.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&DX(n),r(oo)}handleKeyDown(e){if(YN(e)){const{active:r,context:n,options:i}=this.props,{keyboardCodes:a=LX,coordinateGetter:s=eSe,scrollBehavior:l="smooth"}=i,{code:d}=e;if(a.end.includes(d)){this.handleEnd(e);return}if(a.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:oo;this.referenceCoordinates||(this.referenceCoordinates=p);const m=s(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=Rx(m,p),b={x:0,y:0},{scrollableAncestors:T}=n.current;for(const S of T){const w=e.code,{isTop:N,isRight:C,isLeft:k,isBottom:$,maxScroll:I,minScroll:L}=MX(S),E=W_e(S),A={x:Math.min(w===an.Right?E.right-E.width/2:E.right,Math.max(w===an.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(w===an.Down?E.bottom-E.height/2:E.bottom,Math.max(w===an.Down?E.top:E.top+E.height/2,m.y))},R=w===an.Right&&!C||w===an.Left&&!k,F=w===an.Down&&!$||w===an.Up&&!N;if(R&&A.x!==m.x){const P=S.scrollLeft+y.x,B=w===an.Right&&P<=I.x||w===an.Left&&P>=L.x;if(B&&!y.y){S.scrollTo({left:P,behavior:l});return}B?b.x=S.scrollLeft-P:b.x=w===an.Right?S.scrollLeft-I.x:S.scrollLeft-L.x,b.x&&S.scrollBy({left:-b.x,behavior:l});break}else if(F&&A.y!==m.y){const P=S.scrollTop+y.y,B=w===an.Down&&P<=I.y||w===an.Up&&P>=L.y;if(B&&!y.x){S.scrollTo({top:P,behavior:l});return}B?b.y=S.scrollTop-P:b.y=w===an.Down?S.scrollTop-I.y:S.scrollTop-L.y,b.y&&S.scrollBy({top:-b.y,behavior:l});break}}this.handleMove(e,wh(Rx(m,this.referenceCoordinates),b))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}BX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=LX,onActivation:i}=e,{active:a}=r;const{code:s}=t.nativeEvent;if(n.start.includes(s)){const l=a.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function Vz(t){return!!(t&&"distance"in t)}function Fz(t){return!!(t&&"delay"in t)}class e9{constructor(e,r,n){var i;n===void 0&&(n=Z_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:a}=e,{target:s}=a;this.props=e,this.events=r,this.document=Rf(s),this.documentListeners=new _m(this.document),this.listeners=new _m(n),this.windowListeners=new _m(ba(s)),this.initialCoordinates=(i=Rg(a))!=null?i:oo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ns.Resize,this.handleCancel),this.windowListeners.add(Ns.DragStart,$z),this.windowListeners.add(Ns.VisibilityChange,this.handleCancel),this.windowListeners.add(Ns.ContextMenu,$z),this.documentListeners.add(Ns.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fz(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Vz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ns.Click,J_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ns.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:i,props:a}=this,{onMove:s,options:{activationConstraint:l}}=a;if(!i)return;const d=(r=Rg(e))!=null?r:oo,h=Rx(i,d);if(!n&&l){if(Vz(l)){if(l.tolerance!=null&&dT(h,l.tolerance))return this.handleCancel();if(dT(h,l.distance))return this.handleStart()}if(Fz(l)&&dT(h,l.tolerance))return this.handleCancel();this.handlePending(l,h);return}e.cancelable&&e.preventDefault(),s(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===an.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const tSe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class t9 extends e9{constructor(e){const{event:r}=e,n=Rf(r.target);super(e,tSe,n)}}t9.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const rSe={move:{name:"mousemove"},end:{name:"mouseup"}};var H8;(function(t){t[t.RightClick=2]="RightClick"})(H8||(H8={}));class nSe extends e9{constructor(e){super(e,rSe,Rf(e.event.target))}}nSe.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===H8.RightClick?!1:(n==null||n({event:r}),!0)}}];const hT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class UX extends e9{constructor(e){super(e,hT)}static setup(){return window.addEventListener(hT.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(hT.move.name,e)};function e(){}}}UX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:i}=r;return i.length>1?!1:(n==null||n({event:r}),!0)}}];var Sm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Sm||(Sm={}));var Px;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Px||(Px={}));function iSe(t){let{acceleration:e,activator:r=Sm.Pointer,canScroll:n,draggingRect:i,enabled:a,interval:s=5,order:l=Px.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const b=sSe({delta:m,disabled:!a}),[T,S]=g_e(),w=M.useRef({x:0,y:0}),N=M.useRef({x:0,y:0}),C=M.useMemo(()=>{switch(r){case Sm.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Sm.DraggableRect:return i}},[r,i,d]),k=M.useRef(null),$=M.useCallback(()=>{const L=k.current;if(!L)return;const E=w.current.x*N.current.x,A=w.current.y*N.current.y;L.scrollBy(E,A)},[]),I=M.useMemo(()=>l===Px.TreeOrder?[...h].reverse():h,[l,h]);M.useEffect(()=>{if(!a||!h.length||!C){S();return}for(const L of I){if((n==null?void 0:n(L))===!1)continue;const E=h.indexOf(L),A=p[E];if(!A)continue;const{direction:R,speed:F}=K_e(L,A,C,e,y);for(const P of["x","y"])b[P][R[P]]||(F[P]=0,R[P]=0);if(F.x>0||F.y>0){S(),k.current=L,T($,s),w.current=F,N.current=R;return}}w.current={x:0,y:0},N.current={x:0,y:0},S()},[e,$,n,S,a,s,JSON.stringify(C),JSON.stringify(b),T,h,I,p,JSON.stringify(y)])}const aSe={x:{[ki.Backward]:!1,[ki.Forward]:!1},y:{[ki.Backward]:!1,[ki.Forward]:!1}};function sSe(t){let{delta:e,disabled:r}=t;const n=Ix(e);return x1(i=>{if(r||!n||!i)return aSe;const a={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[ki.Backward]:i.x[ki.Backward]||a.x===-1,[ki.Forward]:i.x[ki.Forward]||a.x===1},y:{[ki.Backward]:i.y[ki.Backward]||a.y===-1,[ki.Forward]:i.y[ki.Forward]||a.y===1}}},[r,e,n])}function oSe(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return x1(i=>{var a;return e==null?null:(a=n??i)!=null?a:null},[n,e])}function lSe(t,e){return M.useMemo(()=>t.reduce((r,n)=>{const{sensor:i}=n,a=i.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,n)}));return[...r,...a]},[]),[t,e])}var Pg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Pg||(Pg={}));var G8;(function(t){t.Optimized="optimized"})(G8||(G8={}));const qz=new Map;function cSe(t,e){let{dragging:r,dependencies:n,config:i}=e;const[a,s]=M.useState(null),{frequency:l,measure:d,strategy:h}=i,p=M.useRef(t),m=w(),y=Ig(m),b=M.useCallback(function(N){N===void 0&&(N=[]),!y.current&&s(C=>C===null?N:C.concat(N.filter(k=>!C.includes(k))))},[y]),T=M.useRef(null),S=x1(N=>{if(m&&!r)return qz;if(!N||N===qz||p.current!==t||a!=null){const C=new Map;for(let k of t){if(!k)continue;if(a&&a.length>0&&!a.includes(k.id)&&k.rect.current){C.set(k.id,k.rect.current);continue}const $=k.node.current,I=$?new JN(d($),$):null;k.rect.current=I,I&&C.set(k.id,I)}return C}return N},[t,a,r,m,d]);return M.useEffect(()=>{p.current=t},[t]),M.useEffect(()=>{m||b()},[r,m]),M.useEffect(()=>{a&&a.length>0&&s(null)},[JSON.stringify(a)]),M.useEffect(()=>{m||typeof l!="number"||T.current!==null||(T.current=setTimeout(()=>{b(),T.current=null},l))},[l,m,b,...n]),{droppableRects:S,measureDroppableContainers:b,measuringScheduled:a!=null};function w(){switch(h){case Pg.Always:return!1;case Pg.BeforeDragging:return r;default:return!r}}}function r9(t,e){return x1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function uSe(t,e){return r9(t,e)}function dSe(t){let{callback:e,disabled:r}=t;const n=l4(e),i=M.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(n)},[n,r]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function u4(t){let{callback:e,disabled:r}=t;const n=l4(e),i=M.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(n)},[r]);return M.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function hSe(t){return new JN(w1(t),t)}function Hz(t,e,r){e===void 0&&(e=hSe);const[n,i]=M.useState(null);function a(){i(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const s=dSe({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){a();break}}}}),l=u4({callback:a});return Xl(()=>{a(),t?(l==null||l.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),s==null||s.disconnect())},[t]),n}function fSe(t){const e=r9(t);return jX(t,e)}const Gz=[];function pSe(t){const e=M.useRef(t),r=x1(n=>t?n&&n!==Gz&&t&&e.current&&t.parentNode===e.current.parentNode?n:ZN(t):Gz,[t]);return M.useEffect(()=>{e.current=t},[t]),r}function mSe(t){const[e,r]=M.useState(null),n=M.useRef(t),i=M.useCallback(a=>{const s=uT(a.target);s&&r(l=>l?(l.set(s,q8(s)),new Map(l)):null)},[]);return M.useEffect(()=>{const a=n.current;if(t!==a){s(a);const l=t.map(d=>{const h=uT(d);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,q8(h)]):null}).filter(d=>d!=null);r(l.length?new Map(l):null),n.current=t}return()=>{s(t),s(a)};function s(l){l.forEach(d=>{const h=uT(d);h==null||h.removeEventListener("scroll",i)})}},[i,t]),M.useMemo(()=>t.length?e?Array.from(e.values()).reduce((a,s)=>wh(a,s),oo):PX(t):oo,[t,e])}function Kz(t,e){e===void 0&&(e=[]);const r=M.useRef(null);return M.useEffect(()=>{r.current=null},e),M.useEffect(()=>{const n=t!==oo;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Rx(t,r.current):oo}function gSe(t){M.useEffect(()=>{if(!o4)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function ySe(t,e){return M.useMemo(()=>t.reduce((r,n)=>{let{eventName:i,handler:a}=n;return r[i]=s=>{a(s,e)},r},{}),[t,e])}function zX(t){return M.useMemo(()=>t?F_e(t):null,[t])}const Wz=[];function vSe(t,e){e===void 0&&(e=w1);const[r]=t,n=zX(r?ba(r):null),[i,a]=M.useState(Wz);function s(){a(()=>t.length?t.map(d=>RX(d)?n:new JN(e(d),d)):Wz)}const l=u4({callback:s});return Xl(()=>{l==null||l.disconnect(),s(),t.forEach(d=>l==null?void 0:l.observe(d))},[t]),i}function $X(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return b1(e)?e:t}function bSe(t){let{measure:e}=t;const[r,n]=M.useState(null),i=M.useCallback(h=>{for(const{target:p}of h)if(b1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),a=u4({callback:i}),s=M.useCallback(h=>{const p=$X(h);a==null||a.disconnect(),p&&(a==null||a.observe(p)),n(p?e(p):null)},[e,a]),[l,d]=Ox(s);return M.useMemo(()=>({nodeRef:l,rect:r,setRef:d}),[r,l,d])}const xSe=[{sensor:t9,options:{}},{sensor:BX,options:{}}],wSe={current:{}},Gv={draggable:{measure:zz},droppable:{measure:zz,strategy:Pg.WhileDragging,frequency:G8.Optimized},dragOverlay:{measure:w1}};class Tm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const _Se={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gv,measureDroppableContainers:Mx,windowRect:null,measuringScheduled:!1},VX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mx,draggableNodes:new Map,over:null,measureDroppableContainers:Mx},_1=M.createContext(VX),FX=M.createContext(_Se);function SSe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tm}}}function TSe(t,e){switch(e.type){case mi.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mi.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case mi.DragEnd:case mi.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mi.RegisterDroppable:{const{element:r}=e,{id:n}=r,i=new Tm(t.droppable.containers);return i.set(n,r),{...t,droppable:{...t.droppable,containers:i}}}case mi.SetDroppableDisabled:{const{id:r,key:n,disabled:i}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const s=new Tm(t.droppable.containers);return s.set(r,{...a,disabled:i}),{...t,droppable:{...t.droppable,containers:s}}}case mi.UnregisterDroppable:{const{id:r,key:n}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const a=new Tm(t.droppable.containers);return a.delete(r),{...t,droppable:{...t.droppable,containers:a}}}default:return t}}function ASe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:i}=M.useContext(_1),a=Ix(n),s=Ix(r==null?void 0:r.id);return M.useEffect(()=>{if(!e&&!n&&a&&s!=null){if(!YN(a)||document.activeElement===a.target)return;const l=i.get(s);if(!l)return;const{activatorNode:d,node:h}=l;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=b_e(p);if(m){m.focus();break}}})}},[n,e,i,s,a]),null}function qX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((i,a)=>a({transform:i,...n}),r):r}function ESe(t){return M.useMemo(()=>({draggable:{...Gv.draggable,...t==null?void 0:t.draggable},droppable:{...Gv.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Gv.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function NSe(t){let{activeNode:e,measure:r,initialRect:n,config:i=!0}=t;const a=M.useRef(!1),{x:s,y:l}=typeof i=="boolean"?{x:i,y:i}:i;Xl(()=>{if(!s&&!l||!e){a.current=!1;return}if(a.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=jX(p,n);if(s||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=CX(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,s,l,n,r])}const d4=M.createContext({...oo,scaleX:1,scaleY:1});var $c;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})($c||($c={}));const jSe=M.memo(function(e){var r,n,i,a;let{id:s,accessibility:l,autoScroll:d=!0,children:h,sensors:p=xSe,collisionDetection:m=L_e,measuring:y,modifiers:b,...T}=e;const S=M.useReducer(TSe,void 0,SSe),[w,N]=S,[C,k]=A_e(),[$,I]=M.useState($c.Uninitialized),L=$===$c.Initialized,{draggable:{active:E,nodes:A,translate:R},droppable:{containers:F}}=w,P=E!=null?A.get(E):null,B=M.useRef({initial:null,translated:null}),D=M.useMemo(()=>{var Pt;return E!=null?{id:E,data:(Pt=P==null?void 0:P.data)!=null?Pt:wSe,rect:B}:null},[E,P]),Q=M.useRef(null),[Z,W]=M.useState(null),[J,Y]=M.useState(null),ge=Ig(T,Object.values(T)),ce=c4("DndDescribedBy",s),X=M.useMemo(()=>F.getEnabled(),[F]),re=ESe(y),{droppableRects:de,measureDroppableContainers:oe,measuringScheduled:ae}=cSe(X,{dragging:L,dependencies:[R.x,R.y],config:re.droppable}),pe=oSe(A,E),ve=M.useMemo(()=>J?Rg(J):null,[J]),Qe=zt(),Ne=uSe(pe,re.draggable.measure);NSe({activeNode:E!=null?A.get(E):null,config:Qe.layoutShiftCompensation,initialRect:Ne,measure:re.draggable.measure});const le=Hz(pe,re.draggable.measure,Ne),we=Hz(pe?pe.parentElement:null),xe=M.useRef({activatorEvent:null,active:null,activeNode:pe,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ut=F.getNodeFor((r=xe.current.over)==null?void 0:r.id),He=bSe({measure:re.dragOverlay.measure}),ct=(n=He.nodeRef.current)!=null?n:pe,nt=L?(i=He.rect)!=null?i:le:null,Ut=!!(He.nodeRef.current&&He.rect),Ie=fSe(Ut?null:le),st=zX(ct?ba(ct):null),pt=pSe(L?ut??pe:null),St=vSe(pt),Xt=qX(b,{transform:{x:R.x-Ie.x,y:R.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:J,active:D,activeNodeRect:le,containerNodeRect:we,draggingNodeRect:nt,over:xe.current.over,overlayNodeRect:He.rect,scrollableAncestors:pt,scrollableAncestorRects:St,windowRect:st}),ye=ve?wh(ve,R):null,We=mSe(pt),mt=Kz(We),gt=Kz(We,[le]),ot=wh(Xt,mt),Je=nt?z_e(nt,Xt):null,Rt=D&&Je?m({active:D,collisionRect:Je,droppableRects:de,droppableContainers:X,pointerCoordinates:ye}):null,Yt=M_e(Rt,"id"),[Kr,ln]=M.useState(null),Br=Ut?Xt:wh(Xt,gt),ee=B_e(Br,(a=Kr==null?void 0:Kr.rect)!=null?a:null,le),Re=M.useRef(null),Ve=M.useCallback((Pt,$t)=>{let{sensor:kt,options:Ur}=$t;if(Q.current==null)return;const cr=A.get(Q.current);if(!cr)return;const gn=Pt.nativeEvent,cn=new kt({active:Q.current,activeNode:cr,event:gn,options:Ur,context:xe,onAbort(nr){if(!A.get(nr))return;const{onDragAbort:xr}=ge.current,yn={id:nr};xr==null||xr(yn),C({type:"onDragAbort",event:yn})},onPending(nr,_i,xr,yn){if(!A.get(nr))return;const{onDragPending:rn}=ge.current,vn={id:nr,constraint:_i,initialCoordinates:xr,offset:yn};rn==null||rn(vn),C({type:"onDragPending",event:vn})},onStart(nr){const _i=Q.current;if(_i==null)return;const xr=A.get(_i);if(!xr)return;const{onDragStart:yn}=ge.current,ia={activatorEvent:gn,active:{id:_i,data:xr.data,rect:B}};rm.unstable_batchedUpdates(()=>{yn==null||yn(ia),I($c.Initializing),N({type:mi.DragStart,initialCoordinates:nr,active:_i}),C({type:"onDragStart",event:ia}),W(Re.current),Y(gn)})},onMove(nr){N({type:mi.DragMove,coordinates:nr})},onEnd:ei(mi.DragEnd),onCancel:ei(mi.DragCancel)});Re.current=cn;function ei(nr){return async function(){const{active:xr,collisions:yn,over:ia,scrollAdjustedTranslate:rn}=xe.current;let vn=null;if(xr&&rn){const{cancelDrop:aa}=ge.current;vn={activatorEvent:gn,active:xr,collisions:yn,delta:rn,over:ia},nr===mi.DragEnd&&typeof aa=="function"&&await Promise.resolve(aa(vn))&&(nr=mi.DragCancel)}Q.current=null,rm.unstable_batchedUpdates(()=>{N({type:nr}),I($c.Uninitialized),ln(null),W(null),Y(null),Re.current=null;const aa=nr===mi.DragEnd?"onDragEnd":"onDragCancel";if(vn){const Mn=ge.current[aa];Mn==null||Mn(vn),C({type:aa,event:vn})}})}}},[A]),Gt=M.useCallback((Pt,$t)=>(kt,Ur)=>{const cr=kt.nativeEvent,gn=A.get(Ur);if(Q.current!==null||!gn||cr.dndKit||cr.defaultPrevented)return;const cn={active:gn};Pt(kt,$t.options,cn)===!0&&(cr.dndKit={capturedBy:$t.sensor},Q.current=Ur,Ve(kt,$t))},[A,Ve]),jt=lSe(p,Gt);gSe(p),Xl(()=>{le&&$===$c.Initializing&&I($c.Initialized)},[le,$]),M.useEffect(()=>{const{onDragMove:Pt}=ge.current,{active:$t,activatorEvent:kt,collisions:Ur,over:cr}=xe.current;if(!$t||!kt)return;const gn={active:$t,activatorEvent:kt,collisions:Ur,delta:{x:ot.x,y:ot.y},over:cr};rm.unstable_batchedUpdates(()=>{Pt==null||Pt(gn),C({type:"onDragMove",event:gn})})},[ot.x,ot.y]),M.useEffect(()=>{const{active:Pt,activatorEvent:$t,collisions:kt,droppableContainers:Ur,scrollAdjustedTranslate:cr}=xe.current;if(!Pt||Q.current==null||!$t||!cr)return;const{onDragOver:gn}=ge.current,cn=Ur.get(Yt),ei=cn&&cn.rect.current?{id:cn.id,rect:cn.rect.current,data:cn.data,disabled:cn.disabled}:null,nr={active:Pt,activatorEvent:$t,collisions:kt,delta:{x:cr.x,y:cr.y},over:ei};rm.unstable_batchedUpdates(()=>{ln(ei),gn==null||gn(nr),C({type:"onDragOver",event:nr})})},[Yt]),Xl(()=>{xe.current={activatorEvent:J,active:D,activeNode:pe,collisionRect:Je,collisions:Rt,droppableRects:de,draggableNodes:A,draggingNode:ct,draggingNodeRect:nt,droppableContainers:F,over:Kr,scrollableAncestors:pt,scrollAdjustedTranslate:ot},B.current={initial:nt,translated:Je}},[D,pe,Rt,Je,A,ct,nt,de,F,Kr,pt,ot]),iSe({...Qe,delta:R,draggingRect:Je,pointerCoordinates:ye,scrollableAncestors:pt,scrollableAncestorRects:St});const vr=M.useMemo(()=>({active:D,activeNode:pe,activeNodeRect:le,activatorEvent:J,collisions:Rt,containerNodeRect:we,dragOverlay:He,draggableNodes:A,droppableContainers:F,droppableRects:de,over:Kr,measureDroppableContainers:oe,scrollableAncestors:pt,scrollableAncestorRects:St,measuringConfiguration:re,measuringScheduled:ae,windowRect:st}),[D,pe,le,J,Rt,we,He,A,F,de,Kr,oe,pt,St,re,ae,st]),dr=M.useMemo(()=>({activatorEvent:J,activators:jt,active:D,activeNodeRect:le,ariaDescribedById:{draggable:ce},dispatch:N,draggableNodes:A,over:Kr,measureDroppableContainers:oe}),[J,jt,D,le,N,ce,A,Kr,oe]);return te.createElement(NX.Provider,{value:k},te.createElement(_1.Provider,{value:dr},te.createElement(FX.Provider,{value:vr},te.createElement(d4.Provider,{value:ee},h)),te.createElement(ASe,{disabled:(l==null?void 0:l.restoreFocus)===!1})),te.createElement(j_e,{...l,hiddenTextDescribedById:ce}));function zt(){const Pt=(Z==null?void 0:Z.autoScrollEnabled)===!1,$t=typeof d=="object"?d.enabled===!1:d===!1,kt=L&&!Pt&&!$t;return typeof d=="object"?{...d,enabled:kt}:{enabled:kt}}}),kSe=M.createContext(null),Xz="button",CSe="Draggable";function HX(t){let{id:e,data:r,disabled:n=!1,attributes:i}=t;const a=c4(CSe),{activators:s,activatorEvent:l,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=M.useContext(_1),{role:b=Xz,roleDescription:T="draggable",tabIndex:S=0}=i??{},w=(d==null?void 0:d.id)===e,N=M.useContext(w?d4:kSe),[C,k]=Ox(),[$,I]=Ox(),L=ySe(s,e),E=Ig(r);Xl(()=>(m.set(e,{id:e,key:a,node:C,activatorNode:$,data:E}),()=>{const R=m.get(e);R&&R.key===a&&m.delete(e)}),[m,e]);const A=M.useMemo(()=>({role:b,tabIndex:S,"aria-disabled":n,"aria-pressed":w&&b===Xz?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[n,b,S,w,T,p.draggable]);return{active:d,activatorEvent:l,activeNodeRect:h,attributes:A,isDragging:w,listeners:n?void 0:L,node:C,over:y,setNodeRef:k,setActivatorNodeRef:I,transform:N}}function OSe(){return M.useContext(FX)}const ISe="Droppable",RSe={timeout:25};function n9(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:i}=t;const a=c4(ISe),{active:s,dispatch:l,over:d,measureDroppableContainers:h}=M.useContext(_1),p=M.useRef({disabled:r}),m=M.useRef(!1),y=M.useRef(null),b=M.useRef(null),{disabled:T,updateMeasurementsFor:S,timeout:w}={...RSe,...i},N=Ig(S??n),C=M.useCallback(()=>{if(!m.current){m.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{h(Array.isArray(N.current)?N.current:[N.current]),b.current=null},w)},[w]),k=u4({callback:C,disabled:T||!s}),$=M.useCallback((A,R)=>{k&&(R&&(k.unobserve(R),m.current=!1),A&&k.observe(A))},[k]),[I,L]=Ox($),E=Ig(e);return M.useEffect(()=>{!k||!I.current||(k.disconnect(),m.current=!1,k.observe(I.current))},[I,k]),M.useEffect(()=>(l({type:mi.RegisterDroppable,element:{id:n,key:a,disabled:r,node:I,rect:y,data:E}}),()=>l({type:mi.UnregisterDroppable,key:a,id:n})),[n]),M.useEffect(()=>{r!==p.current.disabled&&(l({type:mi.SetDroppableDisabled,id:n,key:a,disabled:r}),p.current.disabled=r)},[n,a,r,l]),{active:s,rect:y,isOver:(d==null?void 0:d.id)===n,node:I,over:d,setNodeRef:L}}function MSe(t){let{animation:e,children:r}=t;const[n,i]=M.useState(null),[a,s]=M.useState(null),l=Ix(r);return!r&&!n&&l&&i(l),Xl(()=>{if(!a)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){i(null);return}Promise.resolve(e(h,a)).then(()=>{i(null)})},[e,n,a]),te.createElement(te.Fragment,null,r,n?M.cloneElement(n,{ref:s}):null)}const PSe={x:0,y:0,scaleX:1,scaleY:1};function DSe(t){let{children:e}=t;return te.createElement(_1.Provider,{value:VX},te.createElement(d4.Provider,{value:PSe},e))}const LSe={position:"fixed",touchAction:"none"},BSe=t=>YN(t)?"transform 250ms ease":void 0,USe=M.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:i,children:a,className:s,rect:l,style:d,transform:h,transition:p=BSe}=t;if(!l)return null;const m=i?h:{...h,scaleX:1,scaleY:1},y={...LSe,width:l.width,height:l.height,top:l.top,left:l.left,transform:Mg.Transform.toString(m),transformOrigin:i&&n?O_e(n,l):void 0,transition:typeof p=="function"?p(n):p,...d};return te.createElement(r,{className:s,style:y,ref:e},a)}),zSe=t=>e=>{let{active:r,dragOverlay:n}=e;const i={},{styles:a,className:s}=t;if(a!=null&&a.active)for(const[l,d]of Object.entries(a.active))d!==void 0&&(i[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,d));if(a!=null&&a.dragOverlay)for(const[l,d]of Object.entries(a.dragOverlay))d!==void 0&&n.node.style.setProperty(l,d);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[d,h]of Object.entries(i))r.node.style.setProperty(d,h);s!=null&&s.active&&r.node.classList.remove(s.active)}},$Se=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Mg.Transform.toString(e)},{transform:Mg.Transform.toString(r)}]},VSe={duration:250,easing:"ease",keyframes:$Se,sideEffects:zSe({styles:{active:{opacity:"0"}}})};function FSe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:i}=t;return l4((a,s)=>{if(e===null)return;const l=r.get(a);if(!l)return;const d=l.node.current;if(!d)return;const h=$X(s);if(!h)return;const{transform:p}=ba(s).getComputedStyle(s),m=kX(p);if(!m)return;const y=typeof e=="function"?e:qSe(e);return DX(d,i.draggable.measure),y({active:{id:a,data:l.data,node:d,rect:i.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:s,rect:i.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:i,transform:m})})}function qSe(t){const{duration:e,easing:r,sideEffects:n,keyframes:i}={...VSe,...t};return a=>{let{active:s,dragOverlay:l,transform:d,...h}=a;if(!e)return;const p={x:l.rect.left-s.rect.left,y:l.rect.top-s.rect.top},m={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/l.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/l.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},b=i({...h,active:s,dragOverlay:l,transform:{initial:d,final:y}}),[T]=b,S=b[b.length-1];if(JSON.stringify(T)===JSON.stringify(S))return;const w=n==null?void 0:n({active:s,dragOverlay:l,...h}),N=l.node.animate(b,{duration:e,easing:r,fill:"forwards"});return new Promise(C=>{N.onfinish=()=>{w==null||w(),C()}})}}let Qz=0;function HSe(t){return M.useMemo(()=>{if(t!=null)return Qz++,Qz},[t])}const GSe=te.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:i,transition:a,modifiers:s,wrapperElement:l="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:b,draggableNodes:T,droppableContainers:S,dragOverlay:w,over:N,measuringConfiguration:C,scrollableAncestors:k,scrollableAncestorRects:$,windowRect:I}=OSe(),L=M.useContext(d4),E=HSe(m==null?void 0:m.id),A=qX(s,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:b,draggingNodeRect:w.rect,over:N,overlayNodeRect:w.rect,scrollableAncestors:k,scrollableAncestorRects:$,transform:L,windowRect:I}),R=r9(y),F=FSe({config:n,draggableNodes:T,droppableContainers:S,measuringConfiguration:C}),P=R?w.setRef:void 0;return te.createElement(DSe,null,te.createElement(MSe,{animation:F},m&&E?te.createElement(USe,{key:E,id:m.id,ref:P,as:l,activatorEvent:p,adjustScale:e,className:d,transition:a,rect:R,style:{zIndex:h,...i},transform:A},r):null))});function Yz(t,e=800){const[r,n]=M.useState(t),i=M.useRef(t),a=M.useRef(0);return M.useEffect(()=>{const s=i.current,l=t;if(i.current=t,s===l)return;const d=performance.now(),h=l-s,p=m=>{const y=m-d,b=Math.min(y/e,1),T=1-Math.pow(1-b,3);n(Math.round(s+h*T)),b<1&&(a.current=requestAnimationFrame(p))};return a.current=requestAnimationFrame(p),()=>cancelAnimationFrame(a.current)},[t,e]),r}const GX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],KX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],KSe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],Zz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},Z0=t=>t?Zz[t.rarity]||Zz.COMMON:null,WSe=(t,e)=>{const n=100-e,i=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${i} 30 ${i-2} 40 Q${i-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${i+3} 22 ${i+1} 46 Q${i-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${i+2} 24 ${i} 46 Q${i-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${i+3} 44 Q${i+6} 55 ${i+4} 85 Q${i+2} 92 ${i-4} 88 L${i-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${i+1} 26 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Dx=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:i})=>{const a=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",l=s==="B",d=s==="C",h=GX[(e==null?void 0:e.skinTone)??0],p=KX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",b=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,N=t==null?void 0:t.BELT,C=t==null?void 0:t.AMULET,k=M.useMemo(()=>[b,T,S,w,N,C].filter(Boolean).length,[b,T,S,w,N,C]),$=M.useMemo(()=>[b,T,S,w,N,C].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[b,T,S,w,N,C]),I=Math.min(1,.2+k*.13),L=l?23:21,E=M.useMemo(()=>WSe(m,L),[m,L]);return c.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[c.jsxs("defs",{children:[c.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[c.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),c.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[c.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),c.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),c.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 20%, 20%)`}),c.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 18%, 12%)`})]}),c.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:`hsla(${a+240}, 30%, 35%, 0.2)`}),c.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),c.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 15%, 16%)`}),c.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 12%, 10%)`})]}),c.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[c.jsx("stop",{offset:"0%",stopColor:h}),c.jsx("stop",{offset:"100%",stopColor:y})]}),c.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[c.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 100%, 70%)`,stopOpacity:I}),c.jsx("stop",{offset:"60%",stopColor:`hsl(${a+200}, 80%, 50%)`,stopOpacity:I*.3}),c.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),c.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:p}),c.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),c.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:c.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),c.jsxs("g",{children:[c.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&c.jsxs("g",{filter:"url(#av-bloom)",children:[c.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:c.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),c.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:c.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),c.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":l?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),c.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":l?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=Z0(w);return c.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[c.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),c.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),c.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),c.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:c.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),c.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:c.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():c.jsxs("g",{children:[c.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"}),c.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"})]}),c.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":l?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"1"}),c.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":l?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),c.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),c.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${a+240},20%,28%)`,strokeWidth:"1.2"}),c.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${a+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=Z0(T);return c.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[c.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":l?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),c.jsx("path",{d:`M${d?70:l?64:68} 88 Q${d?62:l?56:60} 86 ${d?62:l?56:60} 96 L${d?72:l?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),c.jsx("path",{d:`M${d?130:l?136:132} 88 Q${d?138:l?144:140} 86 ${d?138:l?144:140} 96 L${d?128:l?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),c.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),c.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),c.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),c.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&c.jsxs("g",{children:[c.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:c.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),c.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:c.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),N?(()=>{const A=Z0(N);return c.jsxs("g",{children:[c.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),c.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),c.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),c.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():c.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${a+240},15%,25%)`,strokeWidth:"1.5"}),c.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":l?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),c.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":l?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const A=Z0(S);return c.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[c.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),c.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),c.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),c.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&c.jsxs(c.Fragment,{children:[c.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():c.jsxs("g",{children:[c.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),c.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),k>0&&c.jsxs(c.Fragment,{children:[c.jsx("g",{filter:"url(#av-bloom)",children:c.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:c.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),c.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${a+180},100%,75%)`,fillOpacity:I*.7,children:c.jsx("animate",{attributeName:"fillOpacity",values:`${I*.7};${I*.3};${I*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),k>=3&&c.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${a+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:c.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),c.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),C&&(()=>{const A=Z0(C);return c.jsxs("g",{filter:"url(#av-glow)",children:[c.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),c.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:c.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:c.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),c.jsxs("g",{children:[E.back&&c.jsx("path",{d:E.back,fill:"url(#av-hair)",opacity:"0.8"}),c.jsx("ellipse",{cx:"100",cy:"50",rx:L,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),c.jsx("ellipse",{cx:100-L-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),c.jsx("ellipse",{cx:100+L+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),c.jsxs("g",{children:[c.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),c.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),c.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),c.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),c.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),c.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),c.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),c.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),c.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),c.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),c.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:c.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),c.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:c.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),c.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),c.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),c.jsx("path",{d:E.main,fill:"url(#av-hair)"}),E.accent&&c.jsx("path",{d:E.accent,fill:"url(#av-hair)",opacity:"0.9"}),b&&(()=>{const A=Z0(b),R=b.visualId||"";return c.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:R.includes("helm")?c.jsxs(c.Fragment,{children:[c.jsx("path",{d:`M${100-L-2} 28 Q100 10 ${100+L+2} 28 L${100+L+4} 62 Q100 72 ${100-L-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),c.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${a+180},90%,55%)`,fillOpacity:"0.85",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):R.includes("visor")?c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${a+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),c.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),c.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):c.jsxs(c.Fragment,{children:[c.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),c.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),c.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),c.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),c.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&c.jsxs("g",{filter:"url(#av-glow)",children:[c.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:c.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&c.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:c.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,R)=>c.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:c.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+R*.2}s`,repeatCount:"indefinite"})},R))]}),$&&c.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,R)=>{const F=A*Math.PI/180,P=100+Math.cos(F)*50,B=145+Math.sin(F)*75;return c.jsxs("circle",{cx:P,cy:B,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[c.jsx("animate",{attributeName:"cy",values:`${B};${B-18};${B}`,dur:`${2+R*.3}s`,repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+R*.3}s`,repeatCount:"indefinite"})]},R)})}),r>=5&&c.jsxs(c.Fragment,{children:[c.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),c.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&c.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,R)=>{const F=R*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),P=100+Math.cos(F)*(38+R*3),B=140+Math.sin(F)*(55+R*2),D=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${a+180},70%,60%)`;return c.jsxs("circle",{cx:P,cy:B,r:"1",fill:D,fillOpacity:"0.35",children:[c.jsx("animate",{attributeName:"cy",values:`${B};${B-12};${B}`,dur:`${2+R*.4}s`,repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+R*.4}s`,repeatCount:"indefinite"})]},R)})}),n&&i&&c.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,R)=>{const F=60+Math.random()*80,P=20+Math.random()*260;return c.jsxs("circle",{cx:F,cy:P,r:1+Math.random(),fill:i,fillOpacity:"0.45",children:[c.jsx("animate",{attributeName:"cy",values:`${P};${P-25};${P}`,dur:`${3+R*.5}s`,repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+R*.5}s`,repeatCount:"indefinite"})]},`c-${R}`)})})]})]})},i9=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],XSe=t=>i9.filter(e=>!e.isSecret||t.includes(e.id)),QSe={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},WX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],Jz=(t,e)=>{const r=WX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},YSe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],XX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of YSe){const i=n.itemIds.filter(s=>r.includes(s)).length,a=n.bonuses.filter(s=>i>=s.count).sort((s,l)=>l.count-s.count);a.length>0&&e.push({set:n,activeBonus:a[0]})}return e},ZSe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],e$=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],QX=t=>[...e$].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||e$[0],JSe=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,eTe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},tTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=M.useMemo(()=>XSe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],i=t.length,a=i9.filter(s=>!s.isSecret).length;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[c.jsx(fu,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),c.jsxs("span",{className:"text-sm text-gray-400",children:[i,"/",a," unlocked"]})]}),c.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:c.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${i/a*100}%`}})}),n.map(s=>{const l=r.filter(h=>h.category===s);if(l.length===0)return null;const d=eTe[s];return c.jsxs("div",{children:[c.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[c.jsx("span",{children:d.icon})," ",d.label]}),c.jsx("div",{className:"grid grid-cols-1 gap-2",children:l.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return c.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[c.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&c.jsx(Lh,{className:"w-3 h-3 text-gray-600"})]}),c.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&c.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[c.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:c.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),c.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&c.jsxs("div",{className:"text-right shrink-0",children:[c.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&c.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},s)})]})},rTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},nTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,i]=M.useState(t||null),[a,s]=M.useState(null),l=na(),d=!!t,h=n||"THEORIST",p=WX.filter(b=>b.specialization===h),m=[1,2,3,4],y=async b=>{if(!a){s(b);try{await Be.unlockSkill(b,h),Wn.skillUnlock(),l.success("Skill unlocked!")}catch(T){l.error(T instanceof Error?T.message:"Failed to unlock")}s(null)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),c.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),c.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[c.jsx(Ii,{className:"w-4 h-4 text-yellow-400"}),c.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(QSe).map(([b,T])=>{const S=h===b,w=d&&t!==b;return c.jsxs("button",{onClick:()=>!w&&i(b),disabled:w,className:`p-3 rounded-xl border text-left transition-all ${S?`border-white/30 bg-gradient-to-br ${rTe[b]} bg-opacity-10`:w?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:T.icon}),c.jsx("span",{className:"font-bold text-sm text-white",children:T.name}),w&&c.jsx(Lh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),c.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:T.description})]},b)})}),c.jsx("div",{className:"space-y-4",children:m.map(b=>{const T=p.filter(S=>S.tier===b);return c.jsxs("div",{children:[c.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",b]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(S=>{const w=r.includes(S.id),N=d&&!w&&Jz(S.id,r)&&e>=S.cost,C=Jz(S.id,r);return c.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${w?"border-green-500/30 bg-green-500/10":N?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>N&&y(S.id),children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"text-sm",children:S.icon}),c.jsx("span",{className:"text-xs font-bold text-white truncate",children:S.name}),w&&c.jsx(gi,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!w&&!C&&c.jsx(Lh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),c.jsx("p",{className:"text-[10px] text-gray-400",children:S.description}),!w&&c.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",S.cost," SP"]}),a===S.id&&c.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:c.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},S.id)})})]},b)})})]})},fT=25,Tv=ZSe,iTe=({currency:t,lastSpin:e,classType:r})=>{const[n,i]=M.useState(!1),[a,s]=M.useState(0),[l,d]=M.useState(null),h=M.useRef(null),p=na(),m=new Date().toISOString().split("T")[0],y=e===m,b=!y&&t>=fT&&!n,T=async()=>{if(b){i(!0),d(null),Wn.wheelSpin();try{const N=await Be.spinFortuneWheel(r),C=Tv.findIndex(I=>I.id===N.prizeId),k=360/Tv.length,$=360*5+(360-C*k-k/2);s(I=>I+$),setTimeout(()=>{Wn.wheelPrize(),d(N.rewardDescription),i(!1),N.prizeType!=="NOTHING"?p.success(`You won: ${N.rewardDescription}!`):p.info(N.rewardDescription)},4e3)}catch(N){i(!1),p.error(N instanceof Error?N.message:"Spin failed")}}},S=360/Tv.length,w=140;return c.jsxs("div",{className:"flex flex-col items-center gap-6",children:[c.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",fT," Flux for a daily spin"]}),c.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[c.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),c.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:c.jsxs("g",{style:{transform:`rotate(${a}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Tv.map((N,C)=>{const k=(C*S-90)*(Math.PI/180),$=((C+1)*S-90)*(Math.PI/180),I=w*Math.cos(k),L=w*Math.sin(k),E=w*Math.cos($),A=w*Math.sin($),R=S>180?1:0,F=((C+.5)*S-90)*(Math.PI/180),P=w*.65*Math.cos(F),B=w*.65*Math.sin(F),D=(C+.5)*S;return c.jsxs("g",{children:[c.jsx("path",{d:`M0,0 L${I},${L} A${w},${w} 0 ${R},1 ${E},${A} Z`,fill:N.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),c.jsx("text",{x:P,y:B,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${D}, ${P}, ${B})`,children:N.label})]},N.id)}),c.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),c.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),l&&c.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[c.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),c.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:l})]}),c.jsx("button",{onClick:T,disabled:!b,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${b?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${fT} Flux)`})]})};function aTe(t,e){const[r,n]=M.useState(e);return M.useEffect(()=>{const i=Be.subscribeToBossShards(t,a=>{n(Math.max(0,e-a))});return()=>i()},[t,e]),r}function sTe(t){const[e,r]=M.useState([]);return M.useEffect(()=>{const n=Be.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const oTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:i})=>{var T;const a=aTe(t.id,t.maxHp),s=sTe(t.id),l=a/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=s.reduce((S,w)=>(S[w.userId]||(S[w.userId]={name:w.userName,total:0}),S[w.userId].total+=w.damage,S),{}),m=Object.entries(p).sort(([,S],[,w])=>w.total-S.total).slice(0,5),y=((T=p[e])==null?void 0:T.total)||0,b=(i==null?void 0:i.bossId)===t.id;return c.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[b&&c.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),c.jsxs("div",{className:"p-5 space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),c.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[c.jsx(Is,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:"text-red-400 font-mono",children:[a.toLocaleString()," HP"]}),c.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),c.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${l>50?"bg-gradient-to-r from-red-600 to-red-500":l>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${l}%`}})})]}),b&&i&&c.jsx("div",{className:"text-center animate-bounce",children:c.jsxs("span",{className:"text-xl font-black text-red-400",children:["-",i.damage]})}),y>0&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[c.jsx($l,{className:"w-3 h-3"}),"Your total damage: ",c.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[c.jsx(pu,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([S,w],N)=>c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("span",{className:`${S===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",N+1," ",w.name]}),c.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},S))]}),c.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Ii,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&c.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),c.jsx("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:r===t.id?"Attacking...":"Attack!"})]})]})},lTe=({userId:t,userName:e,classType:r})=>{const[n,i]=M.useState([]),[a,s]=M.useState(null),[l,d]=M.useState(null),h=na();M.useEffect(()=>{let m;try{m=Be.subscribeToBossEncounters(y=>{const b=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");i(b)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!a){s(m);try{const y=5+Math.floor(Math.random()*20),b=await Be.dealBossDamage(m,y,e);Wn.bossHit(),d({bossId:m,damage:b.damageDealt}),setTimeout(()=>d(null),1500),b.bossDefeated?(Wn.bossDefeated(),h.success("Boss defeated! Rewards incoming!")):h.info(`Dealt ${b.damageDealt} damage! (+${b.xpEarned} XP)`)}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[c.jsx(Foe,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>c.jsx(oTe,{boss:m,userId:t,userName:e,attacking:a,onAttack:p,lastHit:l},m.id))]})};function cTe(t,e){const[r,n]=M.useState(e);return M.useEffect(()=>{const i=Be.subscribeToBossQuizShards(t,a=>{n(Math.max(0,e-a))});return()=>i()},[t,e]),r}const uTe=({quiz:t,onAnswer:e,submitting:r,currentQuestion:n,selectedAnswer:i,answerResult:a})=>{const s=cTe(t.id,t.maxHp),l=s/t.maxHp*100,d=t.questions[n%t.questions.length],h=n>=t.questions.length;return c.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),c.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[c.jsxs("span",{className:"text-red-400 font-mono",children:[s," HP"]}),c.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),c.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${l}%`}})})]}),h?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(gi,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),c.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):d?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[c.jsxs("span",{children:["Question ",n+1," / ",t.questions.length]}),c.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${d.difficulty==="HARD"?"bg-red-500/20 text-red-400":d.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[d.difficulty,d.damageBonus?` (+${d.damageBonus} dmg)`:""]})]}),c.jsx("p",{className:"text-sm text-white font-medium",children:d.stem}),c.jsx("div",{className:"space-y-2",children:d.options.map((p,m)=>{const y=i===m,b=a&&y,T=a==null?void 0:a.correct;return c.jsx("button",{onClick:()=>e(t.id,d.id,m),disabled:r||!!a,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${b&&T?"border-green-500/50 bg-green-500/10 text-green-400":b&&!T?"border-red-500/50 bg-red-500/10 text-red-400":y?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+m),"."]}),c.jsx("span",{children:p}),b&&T&&c.jsx(gi,{className:"w-4 h-4 text-green-400 ml-auto"}),b&&!T&&c.jsx(Fm,{className:"w-4 h-4 text-red-400 ml-auto"})]})},m)})}),a&&a.correct&&c.jsxs("div",{className:"text-center text-sm text-amber-400 font-bold animate-bounce",children:[c.jsx(Ii,{className:"w-4 h-4 inline mr-1"}),"-",a.damage," HP!"]})]}):null,c.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[c.jsx("span",{children:"Defeat rewards:"}),c.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),c.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&c.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})},dTe=({classType:t})=>{const[e,r]=M.useState([]),[n,i]=M.useState(0),[a,s]=M.useState(null),[l,d]=M.useState(null),[h,p]=M.useState(!1),m=na();M.useEffect(()=>{let b;try{b=Be.subscribeToBossQuizzes(t,r)}catch{}return()=>b==null?void 0:b()},[t]);const y=async(b,T,S)=>{if(!h){p(!0),s(S);try{const w=await Be.answerBossQuiz(b,T,S);w.alreadyAnswered?m.info("Already answered this question!"):w.correct?(Wn.bossHit(),m.success(`Correct! Dealt ${w.damage} damage!`)):m.error("Incorrect. No damage dealt."),d({correct:w.correct,damage:w.damage}),setTimeout(()=>{i(N=>N+1),s(null),d(null)},2e3)}catch(w){m.error(w instanceof Error?w.message:"Failed to submit answer")}p(!1)}};return e.length===0?null:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[c.jsx(Ph,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),e.map(b=>c.jsx(uTe,{quiz:b,onAnswer:y,submitting:h,currentQuestion:n,selectedAnswer:a,answerResult:l},b.id))]})},hTe=({activeChallenges:t,classType:e})=>{const[r,n]=M.useState([]),[i,a]=M.useState(null),s=na();M.useEffect(()=>{let y;try{y=Be.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const l=y=>t.find(b=>b.challengeId===y),d=async y=>{if(!i){a(y);try{const b=await Be.claimDailyChallenge(y,e);Wn.dailyReward(),s.success(`Claimed! +${b.xpReward} XP${b.fluxReward?` +${b.fluxReward} Flux`:""}`)}catch(b){s.error(b instanceof Error?b.message:"Claim failed")}a(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const b=l(y.id),T=(b==null?void 0:b.progress)||0,S=(b==null?void 0:b.completed)||!1,w=!!(b!=null&&b.claimedAt),N=Math.min(100,T/y.target*100);return c.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?c.jsx(gi,{className:"w-4 h-4 text-green-400"}):S?c.jsx(_oe,{className:"w-4 h-4 text-yellow-400"}):c.jsx(Mo,{className:"w-4 h-4 text-gray-400"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&c.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),c.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&c.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[c.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:c.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${N}%`}})}),c.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&c.jsx("button",{onClick:()=>d(y.id),disabled:!!i,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:i===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[c.jsx(doe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),c.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&c.jsxs(c.Fragment,{children:[c.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[c.jsx(Ii,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),c.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},pT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},fTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[i,a]=M.useState([]),[s,l]=M.useState(!1),[d,h]=M.useState(""),[p,m]=M.useState(!1),y=na();M.useEffect(()=>{let k;try{k=Be.subscribeToTutoringSessions(r,a)}catch{}return()=>k==null?void 0:k()},[r]);const b=async()=>{if(!(!d.trim()||p)){m(!0);try{await Be.createTutoringRequest(t,e,d,r),y.success("Tutoring request posted!"),h(""),l(!1)}catch{y.error("Failed to create request")}m(!1)}},T=async k=>{try{await Be.claimTutorRole(k,t,e),y.success("You are now the tutor for this session!")}catch{y.error("Failed to claim tutor role")}},S=async(k,$)=>{try{const I=await Be.completeTutoring(k,$);y.success(`Verified! Tutor earned ${I.xpAwarded} XP and ${I.fluxAwarded} Flux`)}catch{y.error("Failed to verify session")}},w=i.filter(k=>k.status==="OPEN"),N=i.filter(k=>["MATCHED","IN_PROGRESS"].includes(k.status)),C=i.filter(k=>["COMPLETED","VERIFIED"].includes(k.status));return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[c.jsx(Dh,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),c.jsxs("button",{onClick:()=>l(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[c.jsx(zl,{className:"w-3 h-3"})," Request Help"]})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&c.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[c.jsx("input",{value:d,onChange:k=>h(k.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:b,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),c.jsx("button",{onClick:()=>l(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),w.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[c.jsx(Aoe,{className:"w-3 h-3"})," Open Requests"]}),w.map(k=>c.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),c.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",k.requesterName," - ",new Date(k.createdAt).toLocaleDateString()]})]}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${pT[k.status]}`,children:k.status})]}),k.requesterId!==t&&c.jsxs("button",{onClick:()=>T(k.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[c.jsx(pu,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},k.id))]}),N.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[c.jsx(Is,{className:"w-3 h-3"})," Active Sessions"]}),N.map(k=>c.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[c.jsx("p",{className:"text-sm text-white font-medium",children:k.topic}),c.jsxs("p",{className:"text-[10px] text-gray-500",children:[k.requesterName,"  ",k.tutorName||"Finding tutor..."]}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${pT[k.status]} mt-1 inline-block`,children:k.status}),n&&k.tutorId&&k.status!=="VERIFIED"&&c.jsxs("button",{onClick:()=>S(k.id,k.tutorId),className:"mt-2 ml-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[c.jsx(gi,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},k.id))]}),C.length>0&&c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[c.jsx(gi,{className:"w-3 h-3 text-green-400"})," Completed (",C.length,")"]}),C.slice(0,3).map(k=>c.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[c.jsx("span",{className:"text-xs text-gray-400 truncate",children:k.topic}),c.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${pT[k.status]}`,children:k.status})]},k.id))]}),i.length===0&&c.jsxs("div",{className:"text-center py-6 text-gray-600",children:[c.jsx(Dh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),c.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},pTe=({item:t,onClose:e})=>{const[r,n]=M.useState("chest"),i=Kn(t.rarity);M.useEffect(()=>{Wn.chestOpen();const s=setTimeout(()=>n("opening"),800),l=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(l)}},[]);const a={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:c.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&c.jsxs("div",{className:"animate-in zoom-in duration-500",children:[c.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[c.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),c.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),c.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),c.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),c.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[c.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),c.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&c.jsx("div",{className:"animate-in zoom-in duration-300",children:c.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[c.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),c.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),c.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[c.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),c.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,l)=>c.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[c.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),c.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),c.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},l))]})}),r==="reveal"&&c.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[c.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${i.border} ${i.bg} shadow-2xl ${a[t.rarity]}`,children:[c.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${i.text} mb-2`,children:t.rarity}),c.jsx("h3",{className:`text-lg font-black ${i.text}`,children:t.name}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),c.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,l])=>c.jsxs("div",{className:"flex justify-between text-xs",children:[c.jsx("span",{className:"text-gray-400 capitalize",children:s}),c.jsxs("span",{className:`font-bold ${i.text}`,children:["+",l]})]},s))}),t.affixes.length>0&&c.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,l)=>c.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},l))}),t.setId&&c.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&c.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,l)=>c.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},l))})]}),c.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},mTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],gTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],yTe=({user:t,classType:e,onClose:r})=>{var L,E,A;const[n,i]=te.useState(!1),a=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=a.level||1,l=Uh(s),d=QX(s),{equipped:h,appearance:p}=Vd(t,e),m=HE({gamification:{...a,equipped:h}}),y=zh(h),b=((L=a.classXp)==null?void 0:L[e])||0,T=(E=t.settings)==null?void 0:E.privacyMode,S=T?a.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),N=XX(w),C=a.unlockedAchievements||[],k=M.useMemo(()=>i9.filter(R=>C.includes(R.id)),[C]),$=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),I=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),i(!0),setTimeout(()=>i(!1),2e3)};return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),c.jsxs("div",{className:"relative flex items-center gap-6",children:[c.jsx("div",{className:"w-32 h-44 shrink-0",children:c.jsx(Dx,{equipped:h,appearance:p})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),c.jsx("button",{onClick:I,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?c.jsx(e1,{className:"w-4 h-4 text-green-400"}):c.jsx(sA,{className:"w-4 h-4"})})]}),c.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${l.tierColor.split(" ")[1]}`,children:l.rankName}),c.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),c.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:b.toLocaleString()}),c.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),c.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-xl font-black text-orange-400",children:[a.engagementStreak||0,"w"]}),c.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xl font-black text-purple-400",children:C.length}),c.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),a.specialization&&c.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:c.jsx("span",{className:"text-xs text-gray-300 font-bold",children:a.specialization})})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx(Mo,{className:"w-3 h-3"})," Combat Stats"]}),c.jsx("div",{className:"space-y-2",children:mTe.map(({key:R,label:F,color:P,bg:B})=>{const D=m[R]||0,Q=D/$*100;return c.jsxs("div",{className:"space-y-0.5",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-xs text-gray-400",children:F}),c.jsx("span",{className:`text-xs font-bold ${P}`,children:D})]}),c.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:c.jsx("div",{className:`h-1.5 rounded-full ${B} transition-all`,style:{width:`${Q}%`}})})]},R)})})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx($l,{className:"w-3 h-3"})," Equipment"]}),c.jsx("div",{className:"space-y-1.5",children:gTe.map(R=>{const F=h[R];if(!F)return c.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[c.jsx("span",{className:"font-mono w-12 text-[10px]",children:R}),c.jsx("span",{className:"italic",children:"Empty"})]},R);const P=Kn(F.rarity);return c.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${P.border} ${P.bg}`,children:[c.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:R}),c.jsx("span",{className:`text-xs font-bold truncate ${P.text}`,children:F.name})]},R)})})]}),N.length>0&&c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[c.jsx(SE,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),N.map(({set:R,activeBonus:F})=>c.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[c.jsx("span",{className:"text-purple-400 font-bold",children:R.name}),c.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",F.label]})]},R.id))]})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx(fu,{className:"w-3 h-3 text-yellow-400"})," Achievements (",C.length,")"]}),k.length>0?c.jsx("div",{className:"grid grid-cols-3 gap-2",children:k.slice(0,12).map(R=>c.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[c.jsx("div",{className:"text-xl",children:R.icon}),c.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:R.title})]},R.id))}):c.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(wE,{className:"w-3.5 h-3.5 text-orange-400"}),c.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),c.jsxs("span",{className:"text-orange-400 font-bold",children:[a.engagementStreak||0," weeks"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(qoe,{className:"w-3.5 h-3.5 text-red-400"}),c.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),c.jsx("span",{className:"text-red-400 font-bold",children:((A=a.completedQuests)==null?void 0:A.length)||0})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(Dh,{className:"w-3.5 h-3.5 text-green-400"}),c.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),c.jsx("span",{className:"text-green-400 font-bold",children:a.tutoringSessionsCompleted||0})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[c.jsx(Ii,{className:"w-3.5 h-3.5 text-cyan-400"}),c.jsx("span",{className:"text-gray-400",children:"Total XP:"}),c.jsx("span",{className:"text-cyan-400 font-bold",children:(a.xp||0).toLocaleString()})]})]})]})]})]})]})})};function vTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const i=Rg(e);return i?{...n,x:n.x+i.x-(r.left+r.width/2),y:n.y+i.y-(r.top+r.height/2)}:n}return n}const bTe={Textbook:c.jsx(so,{className:"w-5 h-5"}),Simulation:c.jsx(qq,{className:"w-5 h-5 fill-current"}),"Lab Guide":c.jsx(p2,{className:"w-5 h-5"}),"Practice Set":c.jsx(Mo,{className:"w-5 h-5"}),Article:c.jsx(Vq,{className:"w-5 h-5"}),"Video Lesson":c.jsx(Wq,{className:"w-5 h-5"}),Supplemental:c.jsx(_E,{className:"w-5 h-5"})};let J0=0,mT=!1,gT=!1,t$="";const xTe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:i,onStartAssignment:a,studentTab:s="RESOURCES"})=>{var un,jn,xa,Wi,ho,zs,wa,vt,he,qe,rt,Ft,sr,dn,$r,hn,_r,fo,$s,qo,ku,Vs,Fs,sa,Si,Cu,l0,Ho,rc,Go,ps;const l=na(),{confirm:d}=Su(),[h,p]=M.useState(new Set),[m,y]=M.useState(t.classType||((un=t.enrolledClasses)==null?void 0:un[0])||"Unassigned"),[b,T]=M.useState(null),[S,w]=M.useState([]),[N,C]=M.useState(!1),[k,$]=M.useState(null);t$!==t.id&&(t$=t.id,J0=((jn=t.gamification)==null?void 0:jn.lastLevelSeen)||1,mT=!1,gT=!1),J0===0&&(J0=((xa=t.gamification)==null?void 0:xa.lastLevelSeen)||1);const I=s,[L,E]=M.useState(!1),[A,R]=M.useState(null),[F,P]=M.useState(!1),[B,D]=M.useState(null),[Q,Z]=M.useState(null),[W,J]=M.useState(null),[Y,ge]=M.useState(null),[ce,X]=M.useState(null),[re,de]=M.useState(null),[oe,ae]=M.useState(!1),[pe,ve]=M.useState(null),[Qe,Ne]=M.useState(!1);M.useEffect(()=>{var Fe,et,Xe;const ue=((Fe=t.gamification)==null?void 0:Fe.level)||1,ke=Math.max(((et=t.gamification)==null?void 0:et.lastLevelSeen)||1,J0);if(ue>ke){J0=ue;const ur=((Xe=t.gamification)==null?void 0:Xe.inventory)||[],Jt=ur.length>0?ur[ur.length-1]:null;$(Jt),C(!0),Wn.levelUp()}},[(Wi=t.gamification)==null?void 0:Wi.level,(ho=t.gamification)==null?void 0:ho.lastLevelSeen,(zs=t.gamification)==null?void 0:zs.inventory]),M.useEffect(()=>{const ue=[];try{ue.push(Be.subscribeToXPEvents(ke=>{const Fe=ke.find(et=>et.isActive&&(et.type==="GLOBAL"||et.targetClass===m));T(Fe||null)}))}catch{}try{ue.push(Be.subscribeToQuests(ke=>{const Fe=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ke.filter(et=>{if(!et.isActive)return!1;const Xe=new Date;return!(et.startsAt&&new Date(et.startsAt)>Xe||et.expiresAt&&new Date(et.expiresAt)<Xe||et.targetClass&&!Fe.includes(et.targetClass))}))}))}catch{}return()=>ue.forEach(ke=>ke())},[m]);const le=((vt=(wa=t.gamification)==null?void 0:wa.classXp)==null?void 0:vt[m])||0,we=te.useRef(le),xe=te.useRef(m);M.useEffect(()=>{if(xe.current!==m){xe.current=m,we.current=le;return}if(le>we.current&&we.current>=0){const ue=le-we.current;if(ue>0&&ue<500){de(ue),Wn.xpGain();const ke=setTimeout(()=>de(null),2e3);return()=>clearTimeout(ke)}}we.current=le},[le]),M.useEffect(()=>{var Fe;if(mT)return;mT=!0;const ue=new Date().toISOString().split("T")[0];((Fe=t.gamification)==null?void 0:Fe.lastLoginRewardDate)!==ue&&!Qe&&Be.claimDailyLogin().then(et=>{et.alreadyClaimed||(Ne(!0),Wn.dailyReward(),l.success(`Daily login: +${et.xpReward} XP, +${et.fluxReward} Flux (${et.streak}-day streak!)`))}).catch(()=>{})},[]),M.useEffect(()=>{gT||(gT=!0,Be.updateEngagementStreak().catch(()=>{}))},[]);const[ut,He]=M.useState([]);M.useEffect(()=>{let ue;try{ue=Be.subscribeToAnnouncements(He)}catch{}return()=>ue==null?void 0:ue()},[]);const ct=M.useMemo(()=>{var ke;const ue=((ke=t.gamification)==null?void 0:ke.dismissedAnnouncements)||[];return ut.filter(Fe=>!ue.includes(Fe.id)&&(Fe.classType==="GLOBAL"||Fe.classType===m))},[ut,(he=t.gamification)==null?void 0:he.dismissedAnnouncements,m]),nt=async ue=>{await Be.dismissAnnouncement(t.id,ue)},Ut=()=>{var ke;const ue=((ke=t.gamification)==null?void 0:ke.level)||1;J0=ue,C(!1),$(null),Be.updateUserLastLevelSeen(t.id,ue).catch(()=>{})},Ie=async ue=>{try{await Be.updateUserAppearance(t.id,ue,m),l.success("Profile updated!"),E(!1),D(null),Z(null),J(null),ge(null),X(null)}catch{l.error("Failed to save  try again")}},st=t.enrolledClasses||(t.classType?[t.classType]:[]),pt=M.useMemo(()=>Vd(t,m),[t,m]),St=pt.equipped,Xt=pt.inventory,ye=M.useMemo(()=>{const ue={tech:10,focus:10,analysis:10,charisma:10};return Object.values(St).filter(Boolean).forEach(Fe=>{Fe.stats&&Object.entries(Fe.stats).forEach(([et,Xe])=>{ue[et]+=Xe})}),ue},[St]),We=M.useMemo(()=>zh(St),[St]),mt=M.useMemo(()=>{const ue=t.gamification||{},Fe={...ue.achievementProgress||{}},et=ue.xp||0,Xe=ue.level||1,ur=ue.inventory||[],Jt=ue.completedQuests||[],Wr=ue.engagementStreak||0,Mi=ue.loginStreak||0,_a=ue.tutoringSessionsCompleted||0,nc=ue.bossesDefeated||0,Ko=ue.challengesCompleted||0,Ou=ue.itemsCrafted||0,Tr=(Sa,Fn)=>{(!Fe[Sa]||Fn>Fe[Sa])&&(Fe[Sa]=Fn)};return Tr("first_steps",et),Tr("xp_5k",et),Tr("xp_25k",et),Tr("rising_star",Xe),Tr("veteran",Xe),Tr("elite",Xe),Tr("legend",Xe),Tr("collector_10",ur.length),Tr("collector_50",ur.length),Tr("gear_score_100",We),Tr("gear_score_500",We),Tr("first_mission",Jt.length),Tr("mission_5",Jt.length),Tr("mission_20",Jt.length),Tr("boss_slayer",nc),Tr("streak_3",Wr),Tr("streak_8",Wr),Tr("streak_16",Wr),Tr("login_7",Mi),Tr("login_30",Mi),Tr("challenges_10",Ko),Tr("tutor_1",_a),Tr("tutor_10",_a),Tr("tech_50",ye.tech),Tr("focus_50",ye.focus),Tr("analysis_50",ye.analysis),Tr("charisma_50",ye.charisma),Tr("craft_10",Ou),Fe},[t,We,ye]),gt=[{subject:"Tech",A:ye.tech,fullMark:100},{subject:"Focus",A:ye.focus,fullMark:100},{subject:"Analysis",A:ye.analysis,fullMark:100},{subject:"Charisma",A:ye.charisma,fullMark:100}],ot=M.useMemo(()=>{const ue={};return e.filter(ke=>ke.classType===m&&ke.status!=="DRAFT").forEach(ke=>{var Xe;const Fe=r.find(ur=>ur.assignmentId===ke.id),et=ke.unit||"General Resources";ue[et]||(ue[et]=[]),ue[et].push({...ke,lastEngagement:Fe&&Fe.submittedAt||null,engagementTime:((Xe=Fe==null?void 0:Fe.metrics)==null?void 0:Xe.engagementTime)||0})}),ue},[e,r,m]),Je=ue=>{const ke=new Set(h);ke.has(ue)?ke.delete(ue):ke.add(ue),p(ke)},Rt=((qe=t.gamification)==null?void 0:qe.level)||1,Yt=((rt=t.gamification)==null?void 0:rt.currency)||0,Kr=le,ln=Kr%1e3/1e3*100,Br=Yz(Kr),ee=Yz(Yt),Re=Uh(Rt),Ve=async ue=>{const ke=ue.target.value;y(ke),await Be.switchUserView(t.id,ke)},Gt=async ue=>{if(!F){P(!0);try{await Be.equipItem(t.id,ue,m),R(null),Wn.equip(),l.success(`${ue.name} equipped.`)}catch{l.error("Failed to equip item.")}finally{P(!1)}}},jt=async ue=>{P(!0);try{await Be.unequipItem(t.id,ue,m),R(null),l.success("Item unequipped.")}catch{l.error("Failed to unequip item.")}finally{P(!1)}},vr=async()=>{if(!A)return;if(Object.values(St).some(Fe=>Fe&&Fe.id===A.id)){l.error("Unequip this item before salvaging.");return}const ke=PR(A);if(await d({message:`Salvage ${A.name} for ${ke} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){P(!0);try{await Be.disenchantItem(t.id,A,m),R(null),Wn.salvage(),l.success(`Salvaged for ${ke} Cyber-Flux.`)}catch{l.error("Failed to salvage item.")}finally{P(!1)}}},dr=async ue=>{if(!A)return;const ke=es[ue];if(Yt<ke)return l.error("Insufficient Cyber-Flux.");P(!0);try{await Be.craftItem(t.id,A,ue,m),R(null),Wn.craft(),l.success(`${ue.charAt(0)+ue.slice(1).toLowerCase()} complete.`)}catch(Fe){const et=(Fe==null?void 0:Fe.message)||(Fe==null?void 0:Fe.code)||"Unknown error";l.error(`Fabrication failed: ${et}`)}finally{P(!1)}},zt=((Ft=t.gamification)==null?void 0:Ft.gemsInventory)||[],Pt=async()=>{if(!(!A||F)){if(Yt<es.SOCKET)return l.error("Insufficient Cyber-Flux.");if((A.sockets||0)>=3)return l.error("Maximum sockets reached.");P(!0);try{const ue=await Be.addSocket(A.id,m);R(ue.item),Wn.craft(),l.success("Socket added!")}catch(ue){l.error((ue==null?void 0:ue.message)||"Failed to add socket.")}finally{P(!1)}}},$t=async ue=>{if(!(!A||F)){if(Yt<es.ENCHANT)return l.error("Insufficient Cyber-Flux.");P(!0);try{const ke=await Be.socketGem(A.id,ue,m);R(ke.item),Wn.craft(),ke.runewordActivated?(Wn.levelUp(),l.success(`RUNEWORD ACTIVATED: ${ke.runewordActivated.name}!`)):l.success("Gem socketed!")}catch(ke){l.error((ke==null?void 0:ke.message)||"Failed to socket gem.")}finally{P(!1)}}},kt=((sr=t.gamification)==null?void 0:sr.activeQuests)||[],Ur=((dn=t.gamification)==null?void 0:dn.completedQuests)||[],cr=S.filter(ue=>kt.some(ke=>ke.questId===ue.id)),gn=S.filter(ue=>!kt.some(ke=>ke.questId===ue.id)&&!Ur.includes(ue.id)),cn=async ue=>{try{await Be.acceptQuest(t.id,ue.id),Wn.questAccept(),l.success(`Contract accepted: ${ue.title}`)}catch{l.error("Failed to accept contract.")}},ei=async ue=>{const ke=ue.type==="CUSTOM";if(await d({message:ke?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ke?"Submit":"Deploy",variant:"info"}))try{await Be.deployMission(t.id,ue),Wn.questDeploy(),l.info("Mission deployed. Awaiting verification.")}catch{l.error("Deployment failed.")}},nr=["HEAD","HANDS","RING1","AMULET"],_i=["CHEST","BELT","FEET","RING2"],[xr,yn]=M.useState(null),ia=k_e(Bz(t9,{activationConstraint:{distance:8}}),Bz(UX,{activationConstraint:{delay:150,tolerance:5}})),rn=ue=>ue==="RING1"||ue==="RING2"?["RING"]:[ue],vn=ue=>{const{active:ke}=ue,Fe=Xt.find(et=>et.id===ke.id)||Object.values(St).find(et=>et&&et.id===ke.id);yn(Fe||null)},aa=ue=>{const{active:ke,over:Fe}=ue;if(yn(null),!Fe)return;const et=ke.id,Xe=Fe.id;if(Xe.startsWith("slot-")){const ur=Xe.replace("slot-",""),Jt=Xt.find(Mi=>Mi.id===et);if(!Jt||!rn(ur).includes(Jt.slot))return;Gt(Jt)}if(et.startsWith("equipped-")&&(Xe==="inventory-zone"||Xe.startsWith("storage-cell-"))){const ur=et.replace("equipped-","");jt(ur)}},Mn=(ue,ke,Fe="w-5 h-5")=>{const et=`${Fe} ${ke}`,Xe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(ue){case"HEAD":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),c.jsx("path",{d:"M5 11v2h14v-2"}),c.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),c.jsx("path",{d:"M6 4h12"}),c.jsx("path",{d:"M12 4v5"}),c.jsx("path",{d:"M9 9h6"})]});case"HANDS":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),c.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),c.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),c.jsx("path",{d:"M4 19h16"}),c.jsx("path",{d:"M11 3v4"})]});case"BELT":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),c.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),c.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),c.jsx("path",{d:"M12 7v3"}),c.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return c.jsxs("svg",{className:et,...Xe,children:[c.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),c.jsx("path",{d:"M12 9V6"}),c.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return c.jsx(vb,{className:et})}},zr=({slot:ue})=>{const ke=St[ue],Fe=ke?Kn(ke.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:et,isOver:Xe}=n9({id:`slot-${ue}`}),{attributes:ur,listeners:Jt,setNodeRef:Wr,isDragging:Mi}=HX({id:ke?`equipped-${ue}`:`empty-slot-${ue}`,disabled:!ke}),_a=xr&&rn(ue).includes(xr.slot),nc=Xe&&_a?"ring-2 ring-purple-500 scale-110":xr&&_a?"ring-1 ring-purple-500/40 animate-pulse":"";return c.jsx("div",{ref:et,className:"relative",children:c.jsx("div",{ref:Wr,...ur,...Jt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${Mi?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${Fe.border} ${Fe.bg} ${Fe.shimmer} ${Fe.glow} ${nc}`,onClick:()=>!Mi&&ke&&R(ke),children:ke?c.jsxs(c.Fragment,{children:[Mn(ue.replace(/\d/,""),Fe.text),c.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${Fe.text}`,children:ke.baseName||ke.name.split(" ").slice(-1)[0]}),!Mi&&c.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[c.jsx("div",{className:`text-[10px] font-bold ${Fe.text}`,children:ke.name}),c.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ke.rarity," ",ue]}),c.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ke.stats).map(([Ko,Ou])=>`+${Ou} ${Ko.slice(0,3).toUpperCase()}`).join("  ")}),c.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):c.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:ue.slice(0,4)})})})};return c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[ct.length>0&&c.jsx("div",{className:"lg:col-span-12 space-y-2",children:ct.map(ue=>{const ke={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return c.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ke[ue.priority]}`,children:[c.jsx(xb,{className:"w-5 h-5 shrink-0 mt-0.5"}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"font-bold text-sm text-white",children:ue.title}),c.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:ue.content})]}),c.jsx("button",{onClick:()=>nt(ue.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:c.jsx(hs,{className:"w-4 h-4"})})]},ue.id)})}),b&&c.jsx("div",{className:"lg:col-span-12",children:c.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:c.jsx(Ii,{className:"w-5 h-5 fill-current"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[b.title," ACTIVE"]}),c.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",b.multiplier,"x XP on all tasks."]})]})]}),c.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[b.multiplier,"x"]})]})}),c.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[c.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Re.tierColor.split(" ")[0]} border-opacity-30`,children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Re.tierGlow} shadow-xl`,children:c.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Re.tierColor.split(" ")[0]}`})}),c.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:(($r=t.gamification)==null?void 0:$r.codename)||t.name}),c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Re.tierColor.split(" ")[1]}`,children:[Re.rankName," (Lvl ",Rt,")"]}),c.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",We]})]}),st.length>1&&c.jsxs("div",{className:"mt-4 relative w-full",children:[c.jsx("select",{value:m,onChange:Ve,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:st.map(ue=>c.jsx("option",{value:ue,children:ue},ue))}),c.jsx($a,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),c.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:c.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${ln}%`}})}),c.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[c.jsxs("span",{children:[Br.toLocaleString()," XP (",m,")"]}),c.jsx("span",{children:"Next Rank"}),re&&c.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",re," XP"]})]})]})]}),c.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:c.jsx(D5,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),c.jsx("div",{className:"text-xl font-black text-white leading-none",children:ee})]})]})}),(((hn=t.gamification)==null?void 0:hn.engagementStreak)||0)>0&&(()=>{var Fe;const ue=((Fe=t.gamification)==null?void 0:Fe.engagementStreak)||0,ke=JSe(ue);return c.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:c.jsx(wE,{className:"w-6 h-6"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),c.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[ue,"w"]})]}),ke>1&&c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),c.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ke-1)*100),"%"]})]})]})})})(),(((_r=t.gamification)==null?void 0:_r.loginStreak)||0)>1&&c.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[c.jsx($oe,{className:"w-5 h-5 text-purple-400"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),c.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((fo=t.gamification)==null?void 0:fo.loginStreak)||0," day streak"]})]})]}),c.jsxs("button",{onClick:()=>ae(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[c.jsx(qm,{className:"w-4 h-4"})," View Profile"]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&c.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:c.jsx(p2,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),c.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),c.jsx(jd,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&c.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:c.jsx(Ioe,{className:"w-5 h-5"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),c.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),c.jsx(jd,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),c.jsx("div",{className:"lg:col-span-9 space-y-6",children:c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[I==="MISSIONS"&&c.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[gn.length===0&&c.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),gn.map(ue=>c.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsx("h4",{className:"text-lg font-bold text-white",children:ue.title}),c.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:ue.type.replace("_"," ")})]}),c.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:ue.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[ue.statRequirements&&c.jsx("div",{className:"flex gap-2",children:Object.entries(ue.statRequirements).map(([ke,Fe])=>c.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[Fe," ",ke]},ke))}),ue.expiresAt&&c.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[c.jsx(Rs,{className:"w-3 h-3"})," Expires: ",new Date(ue.expiresAt).toLocaleDateString()]})]}),c.jsxs("button",{onClick:()=>cn(ue),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[c.jsx(mh,{className:"w-4 h-4"})," Accept Contract"]})]},ue.id))]}),c.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),c.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[cr.length===0&&c.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),cr.map(ue=>{var Xe,ur;const ke=((Xe=kt.find(Jt=>Jt.questId===ue.id))==null?void 0:Xe.status)||"ACCEPTED",Fe=(ur=kt.find(Jt=>Jt.questId===ue.id))==null?void 0:ur.deploymentRoll,et=ue.type==="CUSTOM";return c.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:c.jsx(Mo,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:ue.title}),c.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[ue.type," MISSION"]})]})]}),c.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ke==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ke==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ke==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ke})]}),ke==="ACCEPTED"?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:ue.description}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>ei(ue),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[c.jsx(Hq,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),et?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),ue.isGroupQuest&&c.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:c.jsx(pu,{className:"w-5 h-5"})})]})]}):ke==="DEPLOYED"?c.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),c.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),c.jsx(Ii,{className:"w-6 h-6 text-purple-400"})]}),c.jsxs("div",{children:[c.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),c.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:et?"AWAITING_HQ_SIG_VERIFICATION":Fe===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),c.jsx("div",{className:"h-10 w-px bg-white/5"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),c.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),c.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),c.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:et?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},ue.id)})]})]},"missions"),I==="RESOURCES"&&c.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(ot).length===0?c.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):c.jsx("div",{className:"space-y-4",children:Object.entries(ot).sort().map(([ue,ke])=>c.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[c.jsxs("button",{onClick:()=>Je(ue),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[h.has(ue)?c.jsx($a,{className:"w-4 h-4 text-purple-400"}):c.jsx(jd,{className:"w-4 h-4 text-gray-500"}),c.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:ue})]}),c.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ke.length," Files"]})]}),h.has(ue)&&c.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ke.map(Fe=>{const et=!!Fe.dueDate,Xe=Fe.dueDate?new Date(Fe.dueDate):null,ur=new Date,Jt=Xe?Math.ceil((Xe.getTime()-ur.getTime())/864e5):1/0,Wr=Jt<=0?"text-red-400":Jt<=2?"text-yellow-400":"text-gray-500",Mi=Math.floor(Fe.engagementTime/60),_a=Mi>=5;return c.jsxs("div",{className:"bg-white/5 border border-white/5 hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a&&a(Fe.id),children:[c.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${_a?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":Fe.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:_a?c.jsx(gi,{className:"w-6 h-6"}):Fe.lastEngagement?c.jsx(gi,{className:"w-5 h-5 opacity-60"}):bTe[Fe.category||"Supplemental"]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:Fe.category}),c.jsx("h4",{className:"font-bold text-white text-sm truncate",children:Fe.title})]}),c.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:c.jsx("p",{className:"text-xs text-gray-500 truncate",children:Fe.description})}),c.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Fe.lastEngagement&&c.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[Mi,"m engaged"]}),et&&c.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Wr}`,children:[c.jsx(Is,{className:"w-3 h-3"}),Jt<=0?"Overdue":Jt===1?"Due tomorrow":`Due in ${Jt}d`]})]})]}),c.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:c.jsx(qq,{className:"w-4 h-4 text-purple-400 fill-current"})})]},Fe.id)})})]},ue))})},"resources"),I==="LOADOUT"&&c.jsxs(jSe,{sensors:ia,collisionDetection:P_e,modifiers:[vTe],onDragStart:vn,onDragEnd:aa,children:[c.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[c.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative overflow-hidden flex flex-col items-center justify-center p-4 min-h-[400px]",children:[c.jsx("div",{className:"absolute inset-0 loadout-hex-bg pointer-events-none"}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${((($s=pt.appearance)==null?void 0:$s.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),c.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[c.jsx("div",{className:"flex flex-col gap-4",children:nr.map(ue=>c.jsx(zr,{slot:ue},ue))}),c.jsx("div",{className:"w-40 h-full relative",children:c.jsx(Dx,{equipped:St,appearance:pt.appearance,evolutionLevel:Rt})}),c.jsx("div",{className:"flex flex-col gap-4",children:_i.map(ue=>c.jsx(zr,{slot:ue},ue))})]}),c.jsxs("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),E(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[c.jsx(Koe,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[c.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),c.jsx("div",{className:"h-[200px]",children:c.jsx(eK,{width:"100%",height:"100%",children:c.jsxs(p_e,{cx:"50%",cy:"50%",outerRadius:"70%",data:gt,children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),c.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),c.jsx(TW,{stroke:"rgba(255,255,255,0.08)"}),c.jsx(m1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),c.jsx(p1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),c.jsx(g1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),c.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),c.jsx("span",{className:"text-gray-500",children:"Tech"})," ",c.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:ye.tech})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),c.jsx("span",{className:"text-gray-500",children:"Focus"})," ",c.jsx("span",{className:"text-green-400 font-bold ml-auto",children:ye.focus})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),c.jsx("span",{className:"text-gray-500",children:"Analysis"})," ",c.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:ye.analysis})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),c.jsx("span",{className:"text-gray-500",children:"Charisma"})," ",c.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:ye.charisma})]})]})})]})]}),c.jsx(wTe,{inventory:Xt,equipped:St,draggedItem:xr,onInspect:R,getSlotIcon:Mn})]},"loadout"),c.jsx(GSe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:xr&&(()=>{const ue=Kn(xr.rarity);return c.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:c.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${ue.bg} ${ue.border} ${ue.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Mn(xr.slot,ue.text,"w-7 h-7"),c.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${ue.text} drop-shadow-lg`,children:xr.baseName||xr.name.split(" ").slice(-1)[0]})]})})})()})]}),I==="ACHIEVEMENTS"&&c.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(tTe,{unlockedAchievements:((qo=t.gamification)==null?void 0:qo.unlockedAchievements)||[],achievementProgress:mt})},"achievements"),I==="SKILLS"&&c.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(nTe,{specialization:(ku=t.gamification)==null?void 0:ku.specialization,skillPoints:((Vs=t.gamification)==null?void 0:Vs.skillPoints)||0,unlockedSkills:((Fs=t.gamification)==null?void 0:Fs.unlockedSkills)||[]})},"skills"),I==="FORTUNE"&&c.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(iTe,{currency:Yt,lastSpin:(sa=t.gamification)==null?void 0:sa.lastWheelSpin,classType:m})},"fortune"),I==="TUTORING"&&c.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(fTe,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),c.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:c.jsx(hTe,{userId:t.id,activeChallenges:((Si=t.gamification)==null?void 0:Si.activeDailyChallenges)||[],classType:m})}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[c.jsx(lTe,{userId:t.id,userName:t.name,classType:m}),c.jsx(dTe,{classType:m})]})]}),c.jsx(Va,{isOpen:L,onClose:()=>{E(!1),D(null),Z(null),J(null),ge(null),X(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:c.jsxs("div",{className:"p-4 space-y-6",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:c.jsx(Dx,{equipped:St,appearance:{...pt.appearance,hue:B??((Cu=pt.appearance)==null?void 0:Cu.hue)??0,bodyType:Q??((l0=pt.appearance)==null?void 0:l0.bodyType)??"A",skinTone:W??((Ho=pt.appearance)==null?void 0:Ho.skinTone)??0,hairStyle:Y??((rc=pt.appearance)==null?void 0:rc.hairStyle)??1,hairColor:ce??((Go=pt.appearance)==null?void 0:Go.hairColor)??0}})})}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),c.jsx("div",{className:"flex justify-center gap-2",children:GX.map((ue,ke)=>{var et;const Fe=(W??((et=pt.appearance)==null?void 0:et.skinTone)??0)===ke;return c.jsx("button",{onClick:()=>J(ke),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Fe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},ke)})})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),c.jsx("div",{className:"grid grid-cols-3 gap-2",children:KSe.map((ue,ke)=>{var et;const Fe=(Y??((et=pt.appearance)==null?void 0:et.hairStyle)??1)===ke;return c.jsx("button",{onClick:()=>ge(ke),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${Fe?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:ue},ke)})})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),c.jsx("div",{className:"flex justify-center gap-2",children:KX.map((ue,ke)=>{var et;const Fe=(ce??((et=pt.appearance)==null?void 0:et.hairColor)??0)===ke;return c.jsx("button",{onClick:()=>X(ke),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${Fe?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ue}},ke)})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),c.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(ue=>{var Fe;const ke=(Q??((Fe=pt.appearance)==null?void 0:Fe.bodyType)??"A")===ue;return c.jsx("button",{onClick:()=>Z(ue),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ke?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:ue==="A"?"Alpha":ue==="B"?"Beta":"Femme"},ue)})})]}),c.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[c.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),c.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(ue=>{var Fe;const ke=(B??((Fe=pt.appearance)==null?void 0:Fe.hue)??0)===ue;return c.jsx("button",{onClick:()=>D(ue),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ke?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${ue}, 60%, 45%)`}},ue)})})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>{E(!1),D(null),Z(null),J(null),ge(null),X(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),c.jsx("button",{onClick:()=>{var ue,ke,Fe,et,Xe;return Ie({hue:B??((ue=pt.appearance)==null?void 0:ue.hue)??0,bodyType:Q??((ke=pt.appearance)==null?void 0:ke.bodyType)??"A",skinTone:W??((Fe=pt.appearance)==null?void 0:Fe.skinTone)??0,hairStyle:Y??((et=pt.appearance)==null?void 0:et.hairStyle)??1,hairColor:ce??((Xe=pt.appearance)==null?void 0:Xe.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),c.jsx(Va,{isOpen:!!A,onClose:()=>R(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:A&&c.jsxs("div",{className:"space-y-6 text-gray-100",children:[c.jsxs("div",{className:`p-5 rounded-xl border ${A.runewordActive?"border-amber-500/40 runeword-active":Kn(A.rarity).border} ${Kn(A.rarity).bg} ${Kn(A.rarity).shimmer} relative overflow-hidden`,children:[c.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[c.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${A.runewordActive?"border-amber-500/50":Kn(A.rarity).border} ${Kn(A.rarity).bg}`,style:{boxShadow:A.runewordActive?"0 0 20px rgba(245,158,11,0.3)":A.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":A.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Mn(A.slot,A.runewordActive?"text-amber-400":Kn(A.rarity).text,"w-7 h-7")}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:`text-lg font-bold ${A.runewordActive?"text-amber-300":Kn(A.rarity).text}`,children:A.name}),c.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[A.rarity," ",A.slot]}),A.runewordActive&&c.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(ps=DR(A))==null?void 0:ps.name})]})]}),c.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(A.stats).map(([ue,ke])=>c.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[c.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:ue}),c.jsxs("span",{className:"font-mono font-bold",children:["+",ke]})]},ue))}),c.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:A.affixes.map((ue,ke)=>c.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[ue.name," (T",ue.tier,")"]},ke))})]}),(A.sockets||0)>0&&(()=>{const ue=A.sockets||0,ke=A.gems||[],Fe=ue-ke.length,et=DR(A);return c.jsxs("div",{className:`p-4 rounded-xl border ${et?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[et&&c.jsxs("div",{className:"mb-3 text-center",children:[c.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),c.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:et.name}),c.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:et.lore}),c.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(et.bonusStats).map(([Xe,ur])=>c.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",ur," ",Xe.slice(0,3).toUpperCase()]},Xe))}),et.bonusEffects&&et.bonusEffects.length>0&&c.jsx("div",{className:"mt-1",children:et.bonusEffects.map(Xe=>c.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:Xe.description},Xe.id))})]}),c.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[c.jsx(D5,{className:"w-3 h-3"})," Gem Sockets (",ke.length,"/",ue,")"]}),c.jsxs("div",{className:"flex gap-2",children:[ke.map((Xe,ur)=>c.jsxs("div",{className:"flex flex-col items-center gap-1",children:[c.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center",style:{borderColor:Xe.color,backgroundColor:`${Xe.color}20`,boxShadow:`0 0 8px ${Xe.color}40`},children:c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Xe.color}})}),c.jsx("span",{className:"text-[9px] text-gray-400",children:Xe.name})]},ur)),Array.from({length:Fe}).map((Xe,ur)=>c.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:c.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${ur}`))]}),Fe>0&&zt.length>0&&c.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[c.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",es.ENCHANT," Flux)"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:zt.map(Xe=>c.jsxs("button",{onClick:()=>$t(Xe.id),disabled:F||Yt<es.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[c.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Xe.color}}),c.jsx("span",{className:"text-gray-300",children:Xe.name}),c.jsxs("span",{className:"text-gray-600 font-mono",children:["+",Xe.value]})]},Xe.id))}),ke.length>0&&!et&&(()=>{const Xe=ke.map(Jt=>Jt.name),ur=ZH.filter(Jt=>Jt.requiredSockets===ue&&Jt.pattern.slice(0,Xe.length).every((Wr,Mi)=>Wr===Xe[Mi]));return ur.length===0?null:c.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:ur.map(Jt=>c.jsxs("div",{children:["Possible: ",c.jsx("span",{className:"font-bold text-amber-400/80",children:Jt.name}),"  needs [",Jt.pattern.join("  "),"]"]},Jt.id))})})()]})]})})(),(A.sockets||0)<3&&c.jsxs("button",{onClick:Pt,disabled:F||Yt<es.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[c.jsx(D5,{className:"w-4 h-4"}),"Add Socket (",es.SOCKET," Flux)  ",A.sockets||0,"/3"]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const ue=A.slot==="RING"?"RING1":A.slot,ke=St[ue]||(A.slot==="RING"?St.RING2:null);if(!ke||ke.id===A.id)return null;const Fe=Kn(ke.rarity),et=new Set([...Object.keys(A.stats),...Object.keys(ke.stats)]);return c.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[c.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:`text-xs font-bold ${Fe.text}`,children:ke.name}),c.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ke.rarity})]}),c.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(et).map(Xe=>{const ur=A.stats[Xe]||0,Jt=ke.stats[Xe]||0,Wr=ur-Jt;return Wr===0?c.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[Xe.slice(0,3).toUpperCase(),": 0"]},Xe):c.jsxs("span",{className:`text-[10px] font-mono font-bold ${Wr>0?"text-green-400":"text-red-400"}`,children:[Xe.slice(0,3).toUpperCase(),": ",Wr>0?"":"",Math.abs(Wr)]},Xe)})})]})})(),(()=>{var ke;const ue=(ke=Object.entries(St).find(([,Fe])=>Fe&&Fe.id===A.id))==null?void 0:ke[0];return ue?c.jsx("button",{onClick:()=>jt(ue),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:F,children:"Unequip Gear"}):c.jsx("button",{onClick:()=>Gt(A),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:F,children:"Equip Gear"})})(),c.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),c.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),c.jsxs("button",{onClick:()=>dr("RECALIBRATE"),disabled:F||Yt<es.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),c.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.RECALIBRATE," Flux"]})]}),c.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),c.jsxs("button",{onClick:()=>dr("REFORGE"),disabled:F||Yt<es.REFORGE||A.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),c.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.REFORGE," Flux"]})]}),c.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),c.jsxs("button",{onClick:()=>dr("OPTIMIZE"),disabled:F||Yt<es.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),c.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[es.OPTIMIZE," Flux"]})]}),c.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),c.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),c.jsxs("button",{onClick:vr,disabled:F,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[c.jsx(Hi,{className:"w-4 h-4"}),"Salvage for ",PR(A)," Flux"]})]})]})}),oe&&c.jsx(yTe,{user:t,classType:m,onClose:()=>ae(!1)}),pe&&c.jsx(pTe,{item:pe,onClose:()=>ve(null)}),c.jsx(Va,{isOpen:N,onClose:Ut,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:c.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((ue,ke)=>c.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ke%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ke))}),c.jsxs("div",{className:"relative inline-block mb-6",children:[c.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),c.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),c.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:c.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:Rt})})]}),c.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:c.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Re.rankName})}),c.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),k&&c.jsxs("div",{className:`${Kn(k.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${Kn(k.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),c.jsxs("div",{className:"relative z-10",children:[c.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),c.jsx("div",{className:`text-xl font-bold ${Kn(k.rarity).text}`,children:k.name}),c.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[k.rarity," ",k.slot]}),c.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(k.stats).map(([ue,ke])=>c.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ke," ",ue.toUpperCase()]},ue))})]})]}),c.jsx("button",{onClick:Ut,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},wTe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:i})=>{const{setNodeRef:a,isOver:s}=n9({id:"inventory-zone"}),l=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return c.jsxs("div",{ref:a,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${l?"border-purple-500/40 bg-purple-900/5":s?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[c.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[c.jsxs("span",{children:["Gear Storage (",t.length,")"]}),c.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[c.jsx(Toe,{className:"w-3 h-3"})," Drag to equip"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>c.jsx(STe,{item:d,equipped:e,onInspect:n,getSlotIcon:i},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>c.jsx(_Te,{index:h,isDroppingEquipped:!!l},`empty-${h}`))]})]})},_Te=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=n9({id:`storage-cell-${t}`});return c.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},STe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:i,listeners:a,setNodeRef:s,isDragging:l}=HX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=Kn(t.rarity);return c.jsxs("div",{ref:s,...i,...a,onClick:()=>!l&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${l?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&c.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!l&&c.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[c.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),c.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),c.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),c.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var h4=typeof self<"u"?self:global;const Dg=typeof navigator<"u",TTe=Dg&&typeof HTMLImageElement>"u",Lx=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),f4=h4.Buffer,Av=h4.BigInt,p4=!!f4,ATe=t=>t;function Bx(t,e=ATe){if(Lx)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let a9=h4.fetch;const ETe=t=>a9=t;if(!h4.fetch){const t=Bx("http",(n=>n)),e=Bx("https",(n=>n)),r=(n,{headers:i}={})=>new Promise((async(a,s)=>{let{port:l,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:i};l!==""&&(y.port=Number(l));const b=(p==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return r(S,{headers:i}).then(a).catch(s)}a({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(N=>w.push(N))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));b.on("error",s),b.end()}));ETe(r)}function Bt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Ux=t=>YX(t)?void 0:t,NTe=t=>t!==void 0;function YX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(NTe).length===0)}function ui(t){let e=new Error(t);throw delete e.stack,e}function _d(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function K8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const W8=t=>String.fromCharCode.apply(null,t),r$=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function ZX(t){return r$?r$.decode(t):p4?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(W8(t)))}class Da{static from(e,r){return e instanceof this&&e.le===r?e:new Da(e,void 0,void 0,r)}constructor(e,r=0,n,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let a=new DataView(e,r,n);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Da){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&ui("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,r,n);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else ui("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Da){return e instanceof DataView||e instanceof Da?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||ui("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Da(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return ZX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return W8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let i=0;i<r&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return W8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function X8(t,e){ui(`${t} '${e}' was not loaded, try using full build of exifr.`)}class s9 extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||X8(this.kind,e),r&&(e in r||(function(n,i){ui(`Unknown ${n} '${i}'.`)})(this.kind,e),r[e].enabled||X8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Lo=new s9("file parser"),li=new s9("segment parser"),Fo=new s9("file reader");function jTe(t,e){return typeof t=="string"?n$(t,e):Dg&&!TTe&&t instanceof HTMLImageElement?n$(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Da(t):Dg&&t instanceof Blob?Q8(t,e,"blob",Xd):void ui("Invalid input argument")}function n$(t,e){return(r=t).startsWith("data:")||r.length>1e4?Y8(t,e,"base64"):Lx&&t.includes("://")?Q8(t,e,"url",Wd):Lx?Y8(t,e,"fs"):Dg?Q8(t,e,"url",Wd):void ui("Invalid input argument");var r}async function Q8(t,e,r,n){return Fo.has(r)?Y8(t,e,r):n?(async function(i,a){let s=await a(i);return new Da(s)})(t,n):void ui(`Parser ${r} is not loaded`)}async function Y8(t,e,r){let n=new(Fo.get(r))(t,e);return await n.read(),n}const Wd=t=>a9(t).then((e=>e.arrayBuffer())),Xd=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class kTe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Zn(t,e,r){let n=new kTe;for(let[i,a]of r)n.set(i,a);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function Qd(t,e,r){let n,i=t.get(e);for(n of r)i.set(n[0],n[1])}const Oi=new Map,uo=new Map,lu=new Map,Jc=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Mf=["jfif","xmp","icc","iptc","ihdr"],Yd=["tiff",...Mf],Un=["ifd0","ifd1","exif","gps","interop"],eu=[...Yd,...Un],tu=["makerNote","userComment"],Pf=["translateKeys","translateValues","reviveValues","multiSegment"],ru=[...Pf,"sanitize","mergeOutput","silentErrors"];class JX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Hp extends JX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,i){if(super(),Bt(this,"enabled",!1),Bt(this,"skip",new Set),Bt(this,"pick",new Set),Bt(this,"deps",new Set),Bt(this,"translateKeys",!1),Bt(this,"translateValues",!1),Bt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=Un.includes(e),this.canBeFiltered&&(this.dict=Oi.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:s}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:ui(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of Pf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,i,{tagKeys:a,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(i=s.indexOf(n),i===-1&&(i=a.indexOf(Number(n))),i!==-1&&r.add(Number(a[i]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,zx(this.pick,this.deps)):this.enabled&&this.pick.size>0&&zx(this.pick,this.deps)}}var ha={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},i$=new Map;class o0 extends JX{static useCached(e){let r=i$.get(e);return r!==void 0||(r=new this(e),i$.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):ui(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Dg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Jc)this[e]=ha[e];for(e of ru)this[e]=ha[e];for(e of tu)this[e]=ha[e];for(e of eu)this[e]=new Hp(e,ha[e],void 0,this)}setupFromTrue(){let e;for(e of Jc)this[e]=ha[e];for(e of ru)this[e]=ha[e];for(e of tu)this[e]=!0;for(e of eu)this[e]=new Hp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of Jc)this[r]=ha[r];for(r of ru)this[r]=ha[r];for(r of tu)this[r]=ha[r];for(r of eu)this[r]=new Hp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,Un)}setupFromObject(e){let r;for(r of(Un.ifd0=Un.ifd0||Un.image,Un.ifd1=Un.ifd1||Un.thumbnail,Object.assign(this,e),Jc))this[r]=yT(e[r],ha[r]);for(r of ru)this[r]=yT(e[r],ha[r]);for(r of tu)this[r]=yT(e[r],ha[r]);for(r of Yd)this[r]=new Hp(r,ha[r],e[r],this);for(r of Un)this[r]=new Hp(r,ha[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Un,eu),e.tiff===!0?this.batchEnableWithBool(Un,!0):e.tiff===!1?this.batchEnableWithUserValue(Un,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Un):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Un)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let i=r[n];this[n].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,r,n,i=n){if(e&&e.length){for(let s of i)this[s].enabled=!1;let a=a$(e,n);for(let[s,l]of a)zx(this[s].pick,l),this[s].enabled=!0}else if(r&&r.length){let a=a$(r,n);for(let[s,l]of a)zx(this[s].skip,l)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:i,icc:a}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:i}=this;i.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=Un.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of Un)this[a].finalizeFilters()}get onlyTiff(){return!Mf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Yd)this[e].enabled&&!li.has(e)&&X8("segment parser",e)}}function a$(t,e){let r,n,i,a,s=[];for(i of e){for(a of(r=Oi.get(i),n=[],r))(t.includes(a[0])||t.includes(a[1]))&&n.push(a[0]);n.length&&s.push([i,n])}return s}function yT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function zx(t,e){for(let r of e)t.add(r)}Bt(o0,"default",ha);class ju{constructor(e){Bt(this,"parsers",{}),Bt(this,"output",{}),Bt(this,"errors",[]),Bt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=o0.useCached(e)}async read(e){this.file=await jTe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,i]of Lo)if(i.canHandle(e,r))return this.fileParser=new i(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),ui("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Ux(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let i=await n.parse();n.assignToOutput(e,i)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=li.get("tiff",e);var i;if(r.tiff?i={start:0,type:"tiff"}:r.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),s=this.parsers.tiff=new n(a,e,r),l=await s.extractThumbnail();return r.close&&r.close(),l}}async function m4(t,e){let r=new ju(e);return await r.read(t),r.parse()}var CTe=Object.freeze({__proto__:null,parse:m4,Exifr:ju,fileParsers:Lo,segmentParsers:li,fileReaders:Fo,tagKeys:Oi,tagValues:uo,tagRevivers:lu,createDictionary:Zn,extendDictionary:Qd,fetchUrlAsArrayBuffer:Wd,readBlobAsArrayBuffer:Xd,chunkedProps:Jc,otherSegments:Mf,segments:Yd,tiffBlocks:Un,segmentsAndBlocks:eu,tiffExtractables:tu,inheritables:Pf,allFormatters:ru,Options:o0});class g4{constructor(e,r,n){Bt(this,"errors",[]),Bt(this,"ensureSegmentChunk",(async i=>{let a=i.start,s=i.size||65536;if(this.file.chunked)if(this.file.available(a,s))i.chunk=this.file.subarray(a,s);else try{i.chunk=await this.file.readChunk(a,s)}catch(l){ui(`Couldn't read segment: ${JSON.stringify(i)}. ${l.message}`)}else this.file.byteLength>a+s?i.chunk=this.file.subarray(a,s):i.size===void 0?i.chunk=this.file.subarray(a):ui("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(li.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:i}=r,a=this.options[n];if(a&&a.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,i)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class no{static findPosition(e,r){let n=e.getUint16(r+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,a=r+i,s=n-i;return{offset:r,length:n,headerLength:i,start:a,size:s,end:a+s}}static parse(e,r={}){return new this(e,new o0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Da?e:new Da(e)}constructor(e,r={},n){Bt(this,"errors",[]),Bt(this,"raw",new Map),Bt(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=lu.get(r),i=uo.get(r),a=Oi.get(r),s=this.options[r],l=s.reviveValues&&!!n,d=s.translateValues&&!!i,h=s.translateKeys&&!!a,p={};for(let[m,y]of e)l&&n.has(m)?y=n.get(m)(y):d&&i.has(m)&&(y=this.translateValue(y,i.get(m))),h&&a.has(m)&&(m=a.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Bt(no,"headerLength",4),Bt(no,"type",void 0),Bt(no,"multiSegment",!1),Bt(no,"canHandle",(()=>!1));function OTe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function ITe(t){return t>=224&&t<=239}function RTe(t,e,r){for(let[n,i]of li)if(i.canHandle(t,e,r))return n}class s$ extends g4{constructor(...e){super(...e),Bt(this,"appSegments",[]),Bt(this,"jpegSegments",[]),Bt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(li.keyList())):(e=e===void 0?li.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&li.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:i,wanted:a,remaining:s}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((l=>{let d=li.get(l),h=this.options[l];return d.multiSegment&&h.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let l=!1;for(;s.size>0&&!l&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(l=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,i,a,s,l,d,{file:h,findAll:p,wanted:m,remaining:y,options:b}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),ITe(n)){if(i=h.getUint16(e+2),a=RTe(h,e,i),a&&m.has(a)&&(s=li.get(a),l=s.findPosition(h,e),d=b[a],l.type=a,this.appSegments.push(l),!p&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(l=no.findPosition(h,e),l.marker=n,this.unknownSegments.push(l)),e+=i+1}else if(OTe(n)){if(i=h.getUint16(e+2),n===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let i,a,s,l=new Map;for(let d=0;d<r.length;d++)i=r[d],a=i[n],l.has(a)?s=l.get(a):l.set(a,s=[]),s.push(i);return Array.from(l)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let i=li.get(r,this.options);return i.handleMultiSegments?{type:r,chunk:i.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Bt(s$,"type","jpeg"),Lo.set("jpeg",s$);const MTe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class PTe extends no{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:i,skip:a}=this.options[r];i=new Set(i);let s=i.size>0,l=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(s){if(i.has(p)&&(n.set(p,this.parseTag(e,p,r)),i.delete(p),i.size===0))break}else!l&&a.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:i}=this,a=i.getUint16(e+2),s=i.getUint32(e+4),l=MTe[a];if(l*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&ui(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&ui(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,s);if(a===2)return _d(i.getString(e,s));if(a===7)return i.getUint8Array(e,s);if(s===1)return this.parseTagValue(a,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(s),h=l;for(let p=0;p<s;p++)d[p]=this.parseTagValue(a,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:ui(`Invalid tiff type ${e}`)}}}class vT extends PTe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&ui("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&ui(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,K8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,K8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",o$(...e.get(2),e.get(1))),e.set("longitude",o$(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,i={};for(r of Un)if(e=this[r],!YX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(i,n)}else i[r]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,i]of Object.entries(r))this.assignObjectToOutput(e,n,i)}}function o$(t,e,r,n){var i=t+e/60+r/3600;return n!=="S"&&n!=="W"||(i*=-1),i}Bt(vT,"type","tiff"),Bt(vT,"headerLength",10),li.set("tiff",vT);var DTe=Object.freeze({__proto__:null,default:CTe,Exifr:ju,fileParsers:Lo,segmentParsers:li,fileReaders:Fo,tagKeys:Oi,tagValues:uo,tagRevivers:lu,createDictionary:Zn,extendDictionary:Qd,fetchUrlAsArrayBuffer:Wd,readBlobAsArrayBuffer:Xd,chunkedProps:Jc,otherSegments:Mf,segments:Yd,tiffBlocks:Un,segmentsAndBlocks:eu,tiffExtractables:tu,inheritables:Pf,allFormatters:ru,Options:o0,parse:m4});const o9={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},l9=Object.assign({},o9,{firstChunkSize:4e4,gps:[1,2,3,4]});async function eQ(t){let e=new ju(l9);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:i}=r.gps;return{latitude:n,longitude:i}}}const c9=Object.assign({},o9,{tiff:!1,ifd1:!0,mergeOutput:!1});async function tQ(t){let e=new ju(c9);await e.read(t);let r=await e.extractThumbnail();return r&&p4?f4.from(r):r}async function rQ(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const u9=Object.assign({},o9,{firstChunkSize:4e4,ifd0:[274]});async function d9(t){let e=new ju(u9);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const h9=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Sd=!0,Td=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Sd=Number(r)+.1*Number(n)<13.4,Td=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Sd=Td=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Sd=Td=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Sd=Td=Number(e)<77}}async function nQ(t){let e=await d9(t);return Object.assign({canvas:Sd,css:Td},h9[e])}class LTe extends Da{constructor(...e){super(...e),Bt(this,"ranges",new BTe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{let i=e+r;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let r;r=p4?f4.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let i=super.set(e,r);return this.ranges.add(r,i.byteLength),i}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class BTe{constructor(){Bt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let i=e+r,a=this.list.filter((s=>l$(e,s.offset,i)||l$(e,s.end,i)));if(a.length>0){e=Math.min(e,...a.map((l=>l.offset))),i=Math.max(i,...a.map((l=>l.end))),r=i-e;let s=a.shift();s.offset=e,s.length=r,s.end=i,this.list=this.list.filter((l=>!a.includes(l)))}else this.list.push({offset:e,length:r,end:i})}available(e,r){let n=e+r;return this.list.some((i=>i.offset<=e&&n<=i.end))}}function l$(t,e,r){return t<=e&&e<=r}class y4 extends LTe{constructor(e,r){super(0),Bt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Fo.set("blob",class extends y4{async readWhole(){this.chunked=!1;let t=await Xd(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),i=await Xd(n);return this.set(i,t,!0)}});var UTe=Object.freeze({__proto__:null,default:DTe,Exifr:ju,fileParsers:Lo,segmentParsers:li,fileReaders:Fo,tagKeys:Oi,tagValues:uo,tagRevivers:lu,createDictionary:Zn,extendDictionary:Qd,fetchUrlAsArrayBuffer:Wd,readBlobAsArrayBuffer:Xd,chunkedProps:Jc,otherSegments:Mf,segments:Yd,tiffBlocks:Un,segmentsAndBlocks:eu,tiffExtractables:tu,inheritables:Pf,allFormatters:ru,Options:o0,parse:m4,gpsOnlyOptions:l9,gps:eQ,thumbnailOnlyOptions:c9,thumbnail:tQ,thumbnailUrl:rQ,orientationOnlyOptions:u9,orientation:d9,rotations:h9,get rotateCanvas(){return Sd},get rotateCss(){return Td},rotation:nQ});Fo.set("url",class extends y4{async readWhole(){this.chunked=!1;let t=await Wd(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let i=await a9(this.input,{headers:n}),a=await i.arrayBuffer(),s=a.byteLength;if(i.status!==416)return s!==e&&(this.size=t+s),this.set(a,t,!0)}});Da.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Av!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Av(e)<<Av(32)|Av(r)):void ui("Trying to read 64b value but JS can only handle 53b numbers.")};class zTe extends g4{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),i=e+8;return r===1&&(r=this.file.getUint64(e+8),i+=8),{offset:e,length:r,kind:n,start:i}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class iQ extends zTe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let i=16,a=[];for(;i<n;)a.push(e.getString(i,4)),i+=4;return a.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let i=this.file.subarray(r,n);this.createParser(e,i)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let i=this.findBox(n,"colr");i!==void 0&&await this.registerSegment("icc",i.offset+12,i.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let i=this.findExifLocIdInIinf(r),a=this.findExtentInIloc(n,i);if(a===void 0)return;let[s,l]=a;await this.file.ensureChunk(s,l);let d=4+this.file.getUint32(s);s+=d,l-=d,await this.registerSegment("tiff",s,l)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,i,a,s=e.start,l=this.file.getUint16(s);for(s+=2;l--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(i=r.version===3?4:2,a=this.file.getString(n+i+2,4),a==="Exif"))return this.file.getUintBytes(n,i);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[i,a]=this.get8bits(n++),[s,l]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=l+i+a,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let b=this.file.getUintBytes(n,d);n+=d+h+2+s;let T=this.file.getUint16(n);if(n+=2,b===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+l,i),this.file.getUintBytes(n+l+i,a)];n+=T*p}}}class aQ extends iQ{}Bt(aQ,"type","heic");class c$ extends iQ{}Bt(c$,"type","avif"),Lo.set("heic",aQ),Lo.set("avif",c$),Zn(Oi,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Zn(Oi,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Zn(Oi,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Zn(uo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Am=Zn(uo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const u$={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Am.set(37392,u$),Am.set(41488,u$);const bT={0:"Normal",1:"Low",2:"High"};function d$(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function h$(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function xT(t){if(typeof t=="string"){var[e,r,n,i,a,s]=t.trim().split(/[-: ]/g).map(Number),l=new Date(e,r-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s)||(l.setHours(i),l.setMinutes(a),l.setSeconds(s)),Number.isNaN(+l)?t:l}}function Gp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(f$(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(f$(t[r],t[r+1]));return _d(String.fromCodePoint(...e))}function f$(t,e){return t<<8|e}Am.set(41992,bT),Am.set(41993,bT),Am.set(41994,bT),Zn(lu,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?ZX(t):t}],[306,xT],[40091,Gp],[40092,Gp],[40093,Gp],[40094,Gp],[40095,Gp]]),Zn(lu,"exif",[[40960,h$],[36864,h$],[36867,xT],[36868,xT],[40962,d$],[40963,d$]]),Zn(lu,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class wT extends no{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Da.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(a){let s={},l={};for(let d of cQ)s[d]=[],l[d]=0;return a.replace(qTe,((d,h,p)=>{if(h==="<"){let m=++l[p];return s[p].push(m),`${d}#${m}`}return`${d}#${s[p].pop()}`}))})(e);let r=_h.findAll(e,"rdf","Description");r.length===0&&r.push(new _h("rdf","Description",void 0,e));let n,i={};for(let a of r)for(let s of a.properties)n=FTe(s.ns,i),sQ(s,n);return(function(a){let s;for(let l in a)s=a[l]=Ux(a[l]),s===void 0&&delete a[l];return Ux(a)})(i)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,i]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",i);break;case"exif":this.assignObjectToOutput(e,"exif",i);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,i)}else e.xmp=r}}Bt(wT,"type","xmp"),Bt(wT,"multiSegment",!0),li.set("xmp",wT);class $x{static findAll(e){return oQ(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map($x.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[3].slice(1,-1);return i=lQ(i),new $x(r,n,i)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class _h{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var i=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return oQ(e,i).map(_h.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[4],a=e[8];return new _h(r,n,i,a)}constructor(e,r,n,i){this.ns=e,this.name=r,this.attrString=n,this.innerXml=i,this.attrs=$x.findAll(n),this.children=_h.findAll(i),this.value=this.children.length===0?lQ(i):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return VTe(this.children.map($Te));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)sQ(r,e);return this.value!==void 0&&(e.value=this.value),Ux(e)}}function sQ(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var $Te=t=>t.serialize(),VTe=t=>t.length===1?t[0]:t,FTe=(t,e)=>e[t]?e[t]:e[t]={};function oQ(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function lQ(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const cQ=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],qTe=new RegExp(`(<|\\/)(${cQ.join("|")})`,"g");var HTe=Object.freeze({__proto__:null,default:UTe,Exifr:ju,fileParsers:Lo,segmentParsers:li,fileReaders:Fo,tagKeys:Oi,tagValues:uo,tagRevivers:lu,createDictionary:Zn,extendDictionary:Qd,fetchUrlAsArrayBuffer:Wd,readBlobAsArrayBuffer:Xd,chunkedProps:Jc,otherSegments:Mf,segments:Yd,tiffBlocks:Un,segmentsAndBlocks:eu,tiffExtractables:tu,inheritables:Pf,allFormatters:ru,Options:o0,parse:m4,gpsOnlyOptions:l9,gps:eQ,thumbnailOnlyOptions:c9,thumbnail:tQ,thumbnailUrl:rQ,orientationOnlyOptions:u9,orientation:d9,rotations:h9,get rotateCanvas(){return Sd},get rotateCss(){return Td},rotation:nQ});let p$=Bx("fs",(t=>t.promises));Fo.set("fs",class extends y4{async readWhole(){this.chunked=!1,this.fs=await p$;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await p$,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});Fo.set("base64",class extends y4{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,i=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let a=t+e,s=r+4*Math.ceil(a/3);i=i.slice(r,s);let l=Math.min(e,this.size-t);if(p4){let d=f4.from(i,"base64").slice(n,n+l);return this.set(d,t,!0)}{let d=this.subarray(t,l,!0),h=atob(i),p=d.toUint8();for(let m=0;m<l;m++)p[m]=h.charCodeAt(n+m);return d}}});class m$ extends g4{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:i,icc:a}=e;n.enabled&&r.deps.add(700),i.enabled&&r.deps.add(33723),a.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:i}=this.options;if(e.enabled||r.enabled||n.enabled||i.enabled){let a=Math.max(K8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Bt(m$,"type","tiff"),Lo.set("tiff",m$);let GTe=Bx("zlib");const KTe=["ihdr","iccp","text","itxt","exif"];class g$ extends g4{constructor(...e){super(...e),Bt(this,"catchError",(r=>this.errors.push(r))),Bt(this,"metaChunks",[]),Bt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let i=n.getUint32(e),a=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),l=i+4+4+4,d={type:s,offset:e,length:l,start:e+4+4,size:i,marker:a};KTe.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=l}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,i]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,i)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((l=>l.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),i=0;for(;i<80&&n[i]!==0;)i++;let a=i+2,s=r.getString(0,i);if(this.injectKeyValToIhdr("ProfileName",s),Lx){let l=await GTe,d=r.getUint8Array(a);d=l.inflateSync(d),this.injectSegment("icc",d)}}}Bt(g$,"type","png"),Lo.set("png",g$),Zn(Oi,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),Qd(Oi,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let y$=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];Qd(Oi,"ifd0",y$),Qd(Oi,"exif",y$),Zn(uo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class _T extends no{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Bt(_T,"type","jfif"),Bt(_T,"headerLength",9),li.set("jfif",_T),Zn(Oi,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class v$ extends no{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Bt(v$,"type","ihdr"),li.set("ihdr",v$),Zn(Oi,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Zn(uo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class Kv extends no{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(i){let a=i[0].constructor,s=0;for(let h of i)s+=h.length;let l=new a(s),d=0;for(let h of i)l.set(h,d),d+=h.length;return l})(r.map((i=>i.chunk.toUint8())));return new Da(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&ui("ICC header is too short");for(let[r,n]of Object.entries(WTe)){r=parseInt(r,10);let i=n(this.chunk,r);i!=="\0\0\0\0"&&e.set(r,i)}}parseTags(){let e,r,n,i,a,{raw:s}=this,l=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;l--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),i=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");a=this.parseTag(i,r,n),a!==void 0&&a!=="\0\0\0\0"&&s.set(e,a),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return _d(this.chunk.getString(e+12,r))}parseText(e,r){return _d(this.chunk.getString(e+8,r-8))}parseSig(e){return _d(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),i=r.getUint32(e+12),a=e+16,s=[];for(let l=0;l<n;l++){let d=r.getString(a+0,2),h=r.getString(a+2,2),p=r.getUint32(a+4),m=r.getUint32(a+8)+e,y=_d(r.getUnicodeString(m,p));s.push({lang:d,country:h,text:y}),a+=i}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Bt(Kv,"type","icc"),Bt(Kv,"multiSegment",!0),Bt(Kv,"headerLength",18);const WTe={4:ml,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:ml,16:ml,20:ml,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,i=t.getUint16(e+4),a=t.getUint16(e+6),s=t.getUint16(e+8),l=t.getUint16(e+10);return new Date(Date.UTC(r,n,i,a,s,l))},36:ml,40:ml,48:ml,52:ml,64:(t,e)=>t.getUint32(e),80:ml};function ml(t,e){return _d(t.getString(e,4))}li.set("icc",Kv),Zn(Oi,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Ev={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},b$={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Zn(uo,"icc",[[4,Ev],[12,b$],[40,Object.assign({},Ev,b$)],[48,Ev],[80,Ev],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Nv extends no{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let i,a=this.containsIptc8bim(e,r,n);if(a!==void 0)return i=e.getUint8(r+a+7),i%2!=0&&(i+=1),i===0&&(i=4),a+8+i}static containsIptc8bim(e,r,n){for(let i=0;i<n;i++)if(this.isIptcSegmentHead(e,r+i))return i}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let i=0;i<r;i++)if(this.chunk.getUint8(i)===28&&this.chunk.getUint8(i+1)===2){n=!0;let a=this.chunk.getUint16(i+3),s=this.chunk.getUint8(i+2),l=this.chunk.getLatin1String(i+5,a);e.set(s,this.pluralizeValue(e.get(s),l)),i+=4+a}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Bt(Nv,"type","iptc"),Bt(Nv,"translateValues",!1),Bt(Nv,"reviveValues",!1),li.set("iptc",Nv),Zn(Oi,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Zn(uo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Kp=["Monday","Tuesday","Wednesday","Thursday","Friday"],XTe=({user:t})=>{const e=na(),{confirm:r}=Su(),n=M.useMemo(()=>Be.getWeekId(),[]),[i,a]=M.useState([]),[s,l]=M.useState("Monday"),[d,h]=M.useState(!1),p=M.useRef(null),[m,y]=M.useState(!1),b=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,S]=M.useState(t.classType||b[0]||"Uncategorized");M.useEffect(()=>{const E=new Date().toLocaleDateString("en-US",{weekday:"long"});Kp.includes(E)&&l(E)},[]),M.useEffect(()=>{const E=Be.subscribeToEvidence(t.id,n,a);return()=>E()},[t.id,n]);const w=M.useMemo(()=>{const E=b[0]||"Uncategorized";return i.filter(A=>A.classType?A.classType===T:T===E)},[i,T,b]),N=E=>w.find(A=>A.dayOfWeek===E),C=E=>E?new Date(E).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,k=async E=>{var R;const A=(R=E.target.files)==null?void 0:R[0];if(A){h(!0);try{let F=null;if(A.type.startsWith("image/"))try{const Y=await HTe.parse(A,["DateTimeOriginal"])||{};Y.DateTimeOriginal&&(F=Y.DateTimeOriginal.toISOString())}catch(Y){console.warn("EXIF extraction failed",Y)}const P=T.replace(/[^a-zA-Z0-9]/g,"_"),B=Math.random().toString(36).substring(2,9),D=dm(hm,`evidence/${t.id}/${n}/${P}_${s}_${B}`);await rA(D,A);const Q=await mb(D),Z=N(s),J={id:`${t.id}_${n}_${s}_${P}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Q,timestamp:new Date().toISOString(),exifDate:F,reflection:(Z==null?void 0:Z.reflection)||""};await Be.uploadEvidence(J)}catch(F){e.error("Upload failed: "+(F instanceof Error?F.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},$=async(E,A)=>{const R=N(E);R&&R.reflection!==A&&await Be.uploadEvidence({...R,reflection:A})},I=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new zY,R=A.internal.pageSize.getWidth(),F=A.internal.pageSize.getHeight(),P=20,B=R-P*2,D=F-P;A.setFillColor(15,7,32),A.rect(0,0,R,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",P,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,P,28),A.text(`Class: ${T}`,P,33),A.text(`Cycle ID: ${n}`,P,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,R-P,33,{align:"right"});let Q=55;const Z=[...w].sort((W,J)=>Kp.indexOf(W.dayOfWeek)-Kp.indexOf(J.dayOfWeek));for(const W of Z){let J=null,Y="JPEG",ge=0,ce=0,X=!1;try{const Ne=await fetch(W.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const le=await Ne.blob();J=await new Promise((He,ct)=>{const nt=new FileReader;nt.onloadend=()=>He(nt.result),nt.onerror=ct,nt.readAsDataURL(le)}),le.type==="image/png"&&(Y="PNG"),le.type==="image/webp"&&(Y="WEBP");const we=A.getImageProperties(J),xe=we.width/we.height,ut=100;ge=B,ce=ge/xe,ce>ut&&(ce=ut,ge=ce*xe)}catch(Ne){console.warn("Image processing error for PDF",Ne),X=!0,ce=15}const oe=20+ce+12;Q+oe>D&&(A.addPage(),Q=P),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(P,Q,R-P,Q),Q+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(W.dayOfWeek.toUpperCase(),P,Q);const ae=C(W.exifDate)||C(W.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${ae}`,R-P,Q,{align:"right"}),Q+=10,!X&&J){const Ne=(R-ge)/2;A.addImage(J,Y,Ne,Q,ge,ce),Q+=ce+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",P,Q),Q+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const pe=W.reflection||"No reflection logged for this cycle.",ve=A.splitTextToSize(pe,B),Qe=ve.length*5+15;Q+Qe>D&&(A.addPage(),Q=P),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",P,Q),Q+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(ve,P,Q),Q+=ve.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Be.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},L=N(s);return c.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[c.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[c.jsx(PI,{className:"w-7 h-7"})," Weekly Evidence Log"]}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.length>1?c.jsxs("div",{className:"relative group",children:[c.jsx("select",{value:T,onChange:E=>S(E.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:b.map(E=>c.jsx("option",{value:E,children:E},E))}),c.jsx($a,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):c.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),c.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[c.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),c.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),c.jsxs("button",{onClick:I,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?c.jsx(os,{className:"w-5 h-5 animate-spin"}):c.jsx(voe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),c.jsx("input",{type:"file",ref:p,onChange:k,className:"hidden",accept:"image/*"}),c.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:Kp.map(E=>{const A=N(E),R=s===E;return c.jsxs("button",{onClick:()=>l(E),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${R?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[c.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${R?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",Kp.indexOf(E)+1]}),c.jsx("span",{className:"font-bold text-sm",children:E}),A&&c.jsx("div",{className:`absolute top-2 right-2 ${R?"text-emerald-200":"text-emerald-500"}`,children:c.jsx(bb,{className:"w-3 h-3"})})]},E)})}),c.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[c.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[c.jsx(Noe,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),L&&c.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[c.jsx(Is,{className:"w-3 h-3"}),C(L.exifDate)||C(L.timestamp)]})]}),c.jsx("div",{className:"flex-1 bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:L?c.jsxs(c.Fragment,{children:[c.jsx("img",{src:L.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),c.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},children:[c.jsx(Gm,{className:"w-8 h-8 text-emerald-400"}),c.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):c.jsxs("button",{onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?c.jsx(os,{className:"w-10 h-10 animate-spin text-emerald-500"}):c.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:c.jsx(PI,{className:"w-8 h-8"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),c.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),c.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[c.jsx("div",{className:"mb-2",children:c.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[c.jsx(xE,{className:"w-4 h-4"})," Daily Reflection"]})}),L?c.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:L.reflection,onBlur:E=>$(s,E.target.value)},s):c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[c.jsx("div",{className:"mb-2 opacity-30",children:c.jsx(jd,{className:"w-6 h-6"})}),c.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),c.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},QTe=({user:t})=>{const e=na(),[r,n]=M.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[i,a]=M.useState(""),[s,l]=M.useState(""),[d,h]=M.useState("");M.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(b,T)=>{try{return jb.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");a(y)},[r.content]);const p=async()=>{await Be.saveLabReport(r),await Be.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(s),b=parseFloat(d);!isNaN(y)&&!isNaN(b)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:b}].sort((S,w)=>S.x-w.x)})),l(""),h(""))};return c.jsxs("div",{className:"h-full flex flex-col gap-6",children:[c.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[c.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[c.jsx(p2,{className:"w-6 h-6"})," Physics Laboratory"]}),c.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[c.jsx(Gq,{className:"w-4 h-4"})," Save Report"]})]}),c.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:c.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),c.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[c.jsxs("div",{className:"w-1/3",children:[c.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),c.jsxs("div",{className:"flex gap-2 mb-2",children:[c.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>l(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),c.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),c.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx(eK,{width:"100%",height:"100%",children:c.jsxs(m_e,{children:[c.jsx(aX,{strokeDasharray:"3 3",stroke:"#333"}),c.jsx(i4,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),c.jsx(a4,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),c.jsx(xo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),c.jsx(v1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),c.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[c.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:c.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),c.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[c.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(b=>({...b,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),c.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:QH.sanitize(i,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},YTe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],ZTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],JTe=({userId:t,classType:e,onClose:r})=>{var $,I,L,E,A;const[n,i]=M.useState(null),[a,s]=M.useState(!0);if(M.useEffect(()=>{(async()=>{const F=await Be.getPublicProfile(t);i(F),s(!1)})()},[t]),a)return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:c.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:c.jsx("div",{className:"text-gray-400",children:"Player not found"})});const l=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=($=n.settings)==null?void 0:$.privacyMode,h=d?l.codename||"Unknown Agent":n.name,p=l.level||1,m=Uh(p),y=QX(p),{equipped:b,appearance:T}=Vd(n,e),S=HE({gamification:{...l,equipped:b}}),w=zh(b),N=((I=l.classXp)==null?void 0:I[e])||0,C=Object.values(b).filter(Boolean),k=XX(C);return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[c.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:c.jsx(hs,{className:"w-5 h-5"})}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-24 h-32 shrink-0",children:c.jsx(Dx,{equipped:b,appearance:T})}),c.jsxs("div",{children:[c.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),c.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),c.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),c.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Ii,{className:"w-3 h-3 text-cyan-400"}),c.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[N.toLocaleString()," XP"]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx($l,{className:"w-3 h-3 text-yellow-400"}),c.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),c.jsxs("div",{className:"p-6 border-b border-white/5",children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx(Mo,{className:"w-3 h-3"})," Stats"]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:YTe.map(({key:R,label:F,color:P,icon:B})=>{const D=S[R]||0;return c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[c.jsx("span",{className:"text-sm",children:B}),c.jsx("span",{className:"text-xs text-gray-400",children:F}),c.jsx("span",{className:`text-sm font-bold ${P} ml-auto`,children:D})]},R)})})]}),c.jsxs("div",{className:"p-6 border-b border-white/5",children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx($l,{className:"w-3 h-3"})," Equipment"]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:ZTe.map(R=>{const F=b[R];if(!F)return c.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[c.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:R}),c.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},R);const P=Kn(F.rarity);return c.jsxs("div",{className:`p-2 rounded-lg border ${P.border} ${P.bg}`,children:[c.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:R}),c.jsx("div",{className:`text-xs font-bold truncate ${P.text}`,children:F.name}),c.jsx("div",{className:"text-[9px] text-gray-500",children:F.rarity})]},R)})})]}),k.length>0&&c.jsxs("div",{className:"p-6 border-b border-white/5",children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx(SE,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),k.map(({set:R,activeBonus:F})=>c.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[c.jsx("div",{className:"text-xs font-bold text-purple-400",children:R.name}),c.jsxs("div",{className:"text-[10px] text-gray-400",children:[F.label,": ",F.effects.map(P=>`+${P.value} ${P.stat}`).join(", ")]})]},R.id))]}),(((L=l.unlockedAchievements)==null?void 0:L.length)||0)>0&&c.jsxs("div",{className:"p-6",children:[c.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[c.jsx(fu,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(E=l.unlockedAchievements)==null?void 0:E.length,")"]}),c.jsx("div",{className:"flex flex-wrap gap-1",children:(A=l.unlockedAchievements)==null?void 0:A.slice(0,12).map(R=>c.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:R.replace(/_/g," ")},R))})]})]})})},eAe=()=>c.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>c.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[c.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),c.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),c.jsxs("div",{className:"flex-1 space-y-2",children:[c.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),c.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),c.jsxs("div",{className:"space-y-2 text-right",children:[c.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),c.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),tAe=()=>{const[t,e]=M.useState([]),[r,n]=M.useState(Lr.AP_PHYSICS),[i,a]=M.useState(!0),[s,l]=M.useState(null);M.useEffect(()=>{const p=Be.subscribeToLeaderboard(m=>{e(m),a(!1)});return()=>p()},[]);const d=M.useMemo(()=>{const p=new Set;return t.forEach(m=>{var y;return(y=m.enrolledClasses)==null?void 0:y.forEach(b=>p.add(b))}),Array.from(p).sort()},[t]),h=M.useMemo(()=>t.filter(p=>{var m;return(m=p.enrolledClasses)==null?void 0:m.includes(r)}).sort((p,m)=>{var T,S,w,N;const y=((S=(T=p.gamification)==null?void 0:T.classXp)==null?void 0:S[r])||0;return(((N=(w=m.gamification)==null?void 0:w.classXp)==null?void 0:N[r])||0)-y}).slice(0,10),[t,r]);return c.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),c.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),c.jsxs("div",{className:"inline-block relative",children:[c.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[d.map(p=>c.jsx("option",{value:p,children:p},p)),d.length===0&&c.jsx("option",{children:r})]}),c.jsx($a,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),c.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?c.jsx(eAe,{}):c.jsxs(c.Fragment,{children:[h.length>=3&&c.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(p=>{var I,L,E,A,R;const m=h[p];if(!m)return null;const y=(I=m.settings)==null?void 0:I.privacyMode,b=y?((L=m.gamification)==null?void 0:L.codename)||"Unknown Agent":m.name,T=((A=(E=m.gamification)==null?void 0:E.classXp)==null?void 0:A[r])||0,S=((R=m.gamification)==null?void 0:R.level)||1,w=Uh(S),N=p===0,C=["h-28","h-20","h-16"],k=["w-20 h-20","w-14 h-14","w-14 h-14"],$=[{icon:c.jsx(fu,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:c.jsx(Zy,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:c.jsx(Zy,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return c.jsxs("div",{className:`flex flex-col items-center ${N?"order-2":p===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+p*.15}s both`},children:[c.jsxs("div",{className:`relative mb-2 ${N?"mb-3":""}`,children:[c.jsx("div",{className:`${k[p]} rounded-full p-0.5 bg-white/10 ring-2 ${$[p].ring} relative ${N?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:c.jsx("img",{src:m.avatarUrl,alt:b,className:`w-full h-full rounded-full border-2 ${w.tierColor.split(" ")[0]} object-cover`})}),c.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${$[p].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:$[p].icon})]}),c.jsxs("div",{className:`text-center ${N?"mt-2":"mt-1"}`,children:[c.jsx("div",{className:`font-bold truncate max-w-[100px] ${N?"text-sm text-white":"text-xs text-gray-300"} ${y?"italic":""}`,children:b}),c.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${N?"text-xl":"text-base"}`,children:T.toLocaleString()}),c.jsx("div",{className:`text-[9px] font-mono uppercase ${w.tierColor.split(" ")[1]}`,children:w.rankName}),c.jsxs("button",{onClick:()=>l(m.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[c.jsx(qm,{className:"w-3 h-3"})," Inspect"]})]}),c.jsx("div",{className:`${C[p]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${p===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":p===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},m.id)})}),c.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[h.slice(h.length>=3?3:0).map((p,m)=>{var C,k,$,I,L;const y=h.length>=3?m+3:m,b=(C=p.settings)==null?void 0:C.privacyMode,T=b?((k=p.gamification)==null?void 0:k.codename)||"Unknown Agent":p.name,S=((I=($=p.gamification)==null?void 0:$.classXp)==null?void 0:I[r])||0,w=((L=p.gamification)==null?void 0:L.level)||1,N=Uh(w);return c.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*y}s both`},children:[c.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[y<3&&y===0&&c.jsx(fu,{className:"w-6 h-6 text-yellow-400 mx-auto"}),y<3&&y===1&&c.jsx(Zy,{className:"w-6 h-6 text-gray-300 mx-auto"}),y<3&&y===2&&c.jsx(Zy,{className:"w-6 h-6 text-amber-600 mx-auto"}),y>=3&&`#${y+1}`]}),c.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[c.jsx("img",{src:p.avatarUrl,alt:T,className:`w-full h-full rounded-full border-2 ${N.tierColor.split(" ")[0]}`}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:w})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("h3",{className:`text-base font-bold truncate ${b?"text-purple-300 italic":"text-white"}`,children:[T,b&&c.jsx(Lh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),c.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${N.tierColor.split(" ")[1]}`,children:N.rankName})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:S.toLocaleString()}),c.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),c.jsx("button",{onClick:()=>l(p.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:c.jsx(qm,{className:"w-4 h-4"})})]},p.id)}),h.length===0&&c.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[c.jsx(pu,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",r,"."]})]})]})}),s&&c.jsx(JTe,{userId:s,classType:r,onClose:()=>l(null)})]})};class rAe extends te.Component{constructor(r){super(r);OC(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:c.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),c.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&c.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),c.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[c.jsx(_b,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const x$={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:c.jsx(Ph,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:c.jsx(zq,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:c.jsx(SE,{className:"w-4 h-4"})}},nAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},ST=3;function TT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[r[n],r[i]]=[r[i],r[n]]}return r.slice(0,e)}const iAe=({assignment:t})=>{const e=na(),[r,n]=M.useState([]),[i,a]=M.useState([]),[s,l]=M.useState(!0),[d,h]=M.useState(!1),[p,m]=M.useState({}),[y,b]=M.useState(1),[T,S]=M.useState(null),[w,N]=M.useState(new Set),C=M.useCallback(P=>{const B=TT(P.filter(Z=>Z.tier===1),ST),D=TT(P.filter(Z=>Z.tier===2),ST),Q=TT(P.filter(Z=>Z.tier===3),ST);a([...B,...D,...Q]),m({}),S(null)},[]);M.useEffect(()=>{(async()=>{var B;l(!0),h(!1);try{const D=await Vi(ht(Ue,"question_banks",t.id));if(!D.exists()){h(!0);return}const Q=D.data().questions||[];n(Q),C(Q)}catch(D){console.error("Failed to load question bank:",D),h(!0);return}finally{l(!1)}try{const D=(B=pV().currentUser)==null?void 0:B.uid;if(D){const Q=await Vi(ht(Ue,"review_progress",`${D}_${t.id}`));Q.exists()&&N(new Set(Q.data().answeredQuestions||[]))}}catch(D){console.warn("Could not load review progress:",D)}})()},[t.id,C]);const k=()=>{r.length>0&&C(r)},$=(P,B,D)=>{const Q=p[P];if(!(Q!=null&&Q.submitted))if(D==="multiple_select"||D==="ranking"){const Z=(Q==null?void 0:Q.selected)||[],W=Z.includes(B)?Z.filter(J=>J!==B):[...Z,B];m(J=>({...J,[P]:{...J[P],selected:W,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(Z=>({...Z,[P]:{selected:B,submitted:!1,correct:!1,xpAwarded:!1}}))},I=(P,B)=>{var D;(D=p[P])!=null&&D.submitted||m(Q=>({...Q,[P]:{...Q[P],linkedSelected:B}}))},L=async P=>{const B=p[P.id];if(!(B!=null&&B.selected))return;let D=!1;if(P.type==="multiple_select"||P.type==="ranking"){const Q=B.selected,Z=P.correctAnswer;D=Q.length===Z.length&&Q.every((W,J)=>W===Z[J])}else P.type==="linked_mc"?D=B.selected===P.correctAnswer&&(!P.linkedFollowUp||B.linkedSelected===P.linkedFollowUp.correctAnswer):D=B.selected===P.correctAnswer;if(D)if(w.has(P.id))m(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Pq({assignmentId:t.id,questionId:P.id,xpAmount:P.xp,classType:t.classType})).data.awarded?(e.success(`+${P.xp} XP earned!`),m(W=>({...W,[P.id]:{...W[P.id],submitted:!0,correct:!0,xpAwarded:!0}})),N(W=>new Set([...W,P.id]))):e.success("Correct! (XP already claimed)")}catch(Q){console.error("XP award error:",Q)}}else m(Q=>({...Q,[P.id]:{...Q[P.id],submitted:!0,correct:!1,xpAwarded:!1}}))},E=M.useMemo(()=>i.filter(P=>P.tier===y),[i,y]),A=M.useMemo(()=>Object.entries(p).filter(([,P])=>P.correct&&P.xpAwarded).reduce((P,[B])=>{var D;return P+(((D=i.find(Q=>Q.id===B))==null?void 0:D.xp)||0)},0),[p,i]),R=M.useMemo(()=>i.reduce((P,B)=>P+B.xp,0),[i]),F=M.useMemo(()=>i.length>0&&i.every(P=>{var B;return(B=p[P.id])==null?void 0:B.submitted}),[i,p]);return s?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[c.jsx(os,{className:"w-8 h-8 text-purple-400 animate-spin"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?c.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[c.jsx(Ph,{className:"w-12 h-12 text-gray-600"}),c.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),c.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):c.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(Ph,{className:"w-5 h-5 text-purple-400"}),c.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),c.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ii,{className:"w-4 h-4 text-yellow-400"}),c.jsx("span",{className:"text-sm font-bold text-yellow-400",children:A}),c.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",R," XP"]})]}),c.jsxs("button",{onClick:k,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[c.jsx(_b,{className:"w-3 h-3"})," New Set"]})]})]}),c.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(P=>{const B=x$[P],D=i.filter(W=>W.tier===P),Q=D.filter(W=>{var J;return(J=p[W.id])==null?void 0:J.submitted}).length,Z=D.filter(W=>{var J;return(J=p[W.id])==null?void 0:J.correct}).length;return c.jsxs("button",{onClick:()=>b(P),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===P?`${B.bg} ${B.color} ${B.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[B.icon,c.jsx("span",{className:"hidden sm:inline",children:B.name}),c.jsxs("span",{className:"sm:hidden",children:["Tier ",P]}),Q>0&&c.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${Z===D.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[Z,"/",D.length]})]},P)})}),F&&c.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),c.jsxs("button",{onClick:k,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[c.jsx(_b,{className:"w-3 h-3"})," New Questions"]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[E.map((P,B)=>{const D=p[P.id],Q=T===P.id,Z=D==null?void 0:D.submitted,W=D==null?void 0:D.correct,J=x$[P.tier];return c.jsxs("div",{className:`rounded-2xl border transition-all ${Z?W?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Q?`${J.border} ${J.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[c.jsxs("button",{onClick:()=>S(Q?null:P.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${Z?W?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${J.bg} ${J.color}`}`,children:Z?W?c.jsx(gi,{className:"w-4 h-4"}):c.jsx(Fm,{className:"w-4 h-4"}):B+1}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[c.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${J.color}`,children:P.bloomsLevel}),c.jsx("span",{className:"text-[9px] text-gray-600",children:""}),c.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:nAe[P.type]||P.type}),c.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[c.jsx(Ii,{className:"w-3 h-3"}),P.xp," XP"]})]}),c.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:P.stem})]}),c.jsx(jd,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Q?"rotate-90":""}`})]}),Q&&c.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[P.context&&c.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:P.context}),P.type==="ranking"?c.jsx(oAe,{question:P,answer:D,onSelect:$}):P.type==="multiple_select"?c.jsx(sAe,{question:P,answer:D,onSelect:$}):c.jsx(aAe,{question:P,answer:D,onSelect:$}),P.type==="linked_mc"&&P.linkedFollowUp&&c.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[c.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),c.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:P.linkedFollowUp.stem}),c.jsx("div",{className:"space-y-2",children:P.linkedFollowUp.options.map(Y=>{const ge=(D==null?void 0:D.linkedSelected)===Y.id,ce=Z,X=Y.id===P.linkedFollowUp.correctAnswer;return c.jsxs("button",{onClick:()=>I(P.id,Y.id),disabled:Z,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ce?X?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ge?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ge?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),Z?c.jsxs("div",{className:`p-4 rounded-xl border ${W?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[W?c.jsx(gi,{className:"w-5 h-5 text-emerald-400"}):c.jsx(Fm,{className:"w-5 h-5 text-red-400"}),c.jsx("span",{className:`font-bold text-sm ${W?"text-emerald-400":"text-red-400"}`,children:W?`Correct! +${P.xp} XP`:"Incorrect"})]}),c.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:P.explanation})]}):c.jsx("button",{onClick:()=>L(P),disabled:!(D!=null&&D.selected)||Array.isArray(D==null?void 0:D.selected)&&D.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},P.id)}),E.length===0&&c.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[c.jsx(Lh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},aAe=({question:t,answer:e,onSelect:r})=>c.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const i=(e==null?void 0:e.selected)===n.id,a=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return c.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":i?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":i?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),sAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=t.correctAnswer;return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(a=>{const s=n.includes(a.id),l=e==null?void 0:e.submitted,d=i.includes(a.id);return c.jsxs("button",{onClick:()=>r(t.id,a.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${l?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&c.jsx(gi,{className:"w-3 h-3 text-white"})}),c.jsxs("span",{children:[c.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[a.id.toUpperCase(),"."]})," ",a.text]})]},a.id)})]})},oAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=e==null?void 0:e.submitted,a=t.correctAnswer;return c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[c.jsx(loe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&c.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,l)=>{const d=t.options.find(p=>p.id===s),h=i&&a[l]===s;return c.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${i?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[l+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const l=n.includes(s.id),d=n.indexOf(s.id);return c.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${l?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[l?c.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):c.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function lAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${jb.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return jb.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,i)=>`<code class="math-inline">${n} = ${i}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const cAe=({assignment:t,onComplete:e})=>{const[r,n]=M.useState(null),[i,a]=M.useState(!0),[s,l]=M.useState(!1),d=M.useRef(yb()),h=M.useRef(Date.now()),p=M.useRef(e),[m,y]=M.useState(!0),[b,T]=M.useState(0);M.useEffect(()=>{p.current=e},[e]);const S=M.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);M.useEffect(()=>{const N=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(N)},[m]),M.useEffect(()=>{const N=["mousemove","keydown","scroll","click"];return N.forEach(C=>window.addEventListener(C,S)),()=>{N.forEach(C=>window.removeEventListener(C,S))}},[S]),M.useEffect(()=>()=>{p.current(d.current)},[]),M.useEffect(()=>{(async()=>{a(!0);try{const C=await Vi(ht(Ue,"reading_materials",t.id));C.exists()?n(C.data()):l(!0)}catch(C){console.error("Failed to load reading material:",C),l(!0)}finally{a(!1)}})()},[t.id]);const w=M.useMemo(()=>r?r.sections.map(N=>({title:N.title,html:lAe(N.content)})):[],[r]);return i?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[c.jsx(os,{className:"w-8 h-8 text-purple-400 animate-spin"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[c.jsx(so,{className:"w-12 h-12 text-gray-600"}),c.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),c.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):c.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[c.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?c.jsx(bE,{className:"w-4 h-4"}):c.jsx(Is,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),c.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(b/60),"m ",b%60,"s"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&c.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&c.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[c.jsx(Rs,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:c.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&c.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),c.jsx("div",{className:"space-y-10",children:w.map((N,C)=>c.jsxs("div",{className:"group",children:[c.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[c.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:C+1}),N.title]}),c.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:N.html}})]},C))}),c.jsx("div",{className:"mt-12 mb-4 text-center",children:c.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[c.jsx(so,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},w$={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},uAe=()=>{var de,oe;const[t,e]=M.useState(null),[r,n]=M.useState("Dashboard"),[i,a]=M.useState([]),[s,l]=M.useState([]),[d,h]=M.useState([]),[p,m]=M.useState([]),[y,b]=M.useState([]),[T,S]=M.useState(null),[w,N]=M.useState("STUDENT"),[C,k]=M.useState("WORK"),[$,I]=M.useState(!1),[L,E]=M.useState(!1),[A,R]=M.useState(!0),[F,P]=M.useState(!1),B=M.useMemo(()=>{const ae=new Map;return s.forEach(pe=>{const ve=ae.get(pe.userId)||[];ve.push(pe),ae.set(pe.userId,ve)}),d.map(pe=>{const ve=ae.get(pe.id)||[],Qe=ve.length,Ne=Math.round(ve.reduce((le,we)=>{var xe;return le+(((xe=we.metrics)==null?void 0:xe.engagementTime)||0)},0)/60);return{...pe,stats:{problemsCompleted:Qe,avgScore:0,rawAccuracy:0,totalTime:Ne}}})},[d,s]),D=M.useMemo(()=>i.find(ae=>ae.id===T)||null,[i,T]);M.useEffect(()=>{if(I(!1),E(!1),!T)return;const ae=Vi(ht(Ue,"question_banks",T)).then(ve=>{ve.exists()&&(ve.data().questions||[]).length>0&&I(!0)}).catch(()=>{}),pe=Vi(ht(Ue,"reading_materials",T)).then(ve=>{ve.exists()&&E(!0)}).catch(()=>{});Promise.all([ae,pe]).then(()=>{})},[T]),M.useEffect(()=>{let ae=null;const pe=mee(aA,async ve=>{ve?(await Q(ve),ae=Gn(ht(Ue,"users",ve.uid),Qe=>{Qe.exists()&&e(Ne=>({...Ne||{},...Qe.data(),id:ve.uid}))})):(e(null),ae&&ae(),R(!1))});return()=>{pe(),ae&&ae()}},[]),M.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Ji.ADMIN)){const ae=Be.subscribeToAssignments(a),pe=Be.subscribeToClassConfigs(b),ve=[ae,pe];return t.role===Ji.ADMIN?(ve.push(Be.subscribeToSubmissions(l)),ve.push(Be.subscribeToUsers(h)),ve.push(Be.subscribeToWhitelist(m))):ve.push(Be.subscribeToUserSubmissions(t.id,l)),()=>ve.forEach(Qe=>Qe())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),M.useEffect(()=>{(t==null?void 0:t.role)===Ji.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),M.useEffect(()=>{var ae;ole(((ae=t==null?void 0:t.settings)==null?void 0:ae.soundEffects)!==!1)},[(de=t==null?void 0:t.settings)==null?void 0:de.soundEffects]),ale((t==null?void 0:t.id)||null,((oe=t==null?void 0:t.settings)==null?void 0:oe.pushNotifications)===!0);const Q=async ae=>{try{const pe=ht(Ue,"users",ae.uid),ve=await Vi(pe),Qe=await Vi(ht(Ue,"allowed_emails",ae.email||"")),le=(await ae.getIdTokenResult()).claims.admin===!0||ae.email===Yoe,we=Qe.exists()||le,xe=Qe.exists()?Qe.data():null,ut=(xe==null?void 0:xe.classType)||Lr.UNCATEGORIZED,He=(xe==null?void 0:xe.classTypes)||(ut!==Lr.UNCATEGORIZED?[ut]:[]);if(ve.exists()){const ct=ve.data(),nt={lastLoginAt:new Date().toISOString(),isWhitelisted:we};if(le&&(nt.role="ADMIN"),!we&&!le&&(nt.enrolledClasses=[]),we&&He.length>0){const Ut=ct.enrolledClasses||[],Ie=Array.from(new Set([...Ut,...He]));Ie.length!==Ut.length&&(nt.enrolledClasses=Ie,(!ct.classType||ct.classType===Lr.UNCATEGORIZED)&&(nt.classType=He[0]))}await Dr(pe,nt)}else{const ct={email:ae.email,name:ae.displayName||"Student",avatarUrl:ae.photoURL||"",role:le?"ADMIN":"STUDENT",classType:ut,enrolledClasses:we?He:[],isWhitelisted:we,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Zi(pe,ct)}}catch(pe){console.error(pe)}finally{R(!1)}},Z=async()=>{await gee(aA),e(null),S(null)},W=ae=>{k("WORK"),S(ae)},J=M.useRef(D),Y=M.useRef(t);M.useEffect(()=>{J.current=D},[D]),M.useEffect(()=>{Y.current=t},[t]);const ge=async ae=>{const pe=Y.current,ve=J.current;if(!(!pe||!ve||pe.role===Ji.ADMIN)&&!(ae.engagementTime<10))try{await Be.submitEngagement(pe.id,pe.name,ve.id,ve.title,ae,ve.classType)}catch(Qe){console.error("Engagement submission failed:",Qe)}},ce=M.useMemo(()=>{const ae={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const pe=y.find(ve=>ve.className===t.classType);if(pe)return pe.features}return ae},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return c.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return c.jsx(Uue,{});if(!t.isWhitelisted&&t.role!==Ji.ADMIN)return c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:c.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[c.jsx(m2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),c.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",Xq," for authorization."]}),c.jsx("button",{onClick:Z,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const X=t.role===Ji.ADMIN||ce.physicsTools,re=t.role===Ji.ADMIN||ce.communications;return c.jsx(rAe,{children:c.jsx(zue,{children:c.jsx(tle,{children:c.jsxs(c.Fragment,{children:[c.jsx(rle,{}),X&&c.jsx(sde,{onToggleChat:re?()=>P(!F):void 0}),re&&c.jsx(cde,{user:t,isOpen:F,onClose:()=>P(!1),assignments:i,classConfigs:y,onOpenResource:ae=>{W(ae)}}),c.jsx(ule,{user:t,onLogout:Z,activeTab:r,setActiveTab:n,children:D?c.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[c.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[D.title,t.role===Ji.ADMIN&&c.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),c.jsxs("div",{className:"flex gap-4 mt-2",children:[c.jsx("button",{onClick:()=>k("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${C==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),$&&c.jsxs("button",{onClick:()=>k("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[c.jsx(Ph,{className:"w-3.5 h-3.5"})," Review"]}),L&&c.jsxs("button",{onClick:()=>k("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${C==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[c.jsx(so,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),c.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&c.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[c.jsx("button",{onClick:()=>N("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),c.jsx("button",{onClick:()=>N("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),c.jsxs("button",{onClick:()=>{S(null),k("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[c.jsx(ooe,{className:"w-4 h-4"})," Exit"]})]})]}),c.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[C==="WORK"&&c.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[c.jsx("div",{className:"flex-1",children:c.jsx(Bue,{onComplete:ge,contentUrl:D.contentUrl,htmlContent:D.htmlContent,userId:t.id,assignmentId:D.id,classType:D.classType})}),w==="ADMIN"&&t.role===Ji.ADMIN&&c.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[c.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[c.jsx(Hm,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[c.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:c.jsx(pu,{className:"w-6 h-6"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ae=>ae.assignmentId===D.id&&!ae.isArchived).length}),c.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),c.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[c.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),c.jsx("button",{onClick:()=>P(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),C==="REVIEW"&&c.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(iAe,{assignment:D})}),C==="STUDY"&&c.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:c.jsx(cAe,{assignment:D,onComplete:ge})})]})]}):c.jsx("div",{className:"h-full",children:c.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Ji.ADMIN&&c.jsxs(c.Fragment,{children:[r==="Dashboard"&&c.jsx(Hue,{users:B,assignments:i,submissions:s}),r==="User Management"&&c.jsx(Gue,{users:B,whitelistedEmails:p,classConfigs:y,onWhitelist:async(ae,pe)=>Be.addToWhitelist(ae,pe)}),r==="Admin Panel"&&c.jsx(Yue,{assignments:i,submissions:s,onCreateAssignment:async ae=>{ae.title&&await Be.addAssignment(ae)},classConfigs:y,onPreviewAssignment:ae=>{N("STUDENT"),W(ae)}}),r==="XP Command"&&c.jsx(ide,{users:d})]}),t.role===Ji.STUDENT&&c.jsxs(c.Fragment,{children:[r in w$&&c.jsx(xTe,{user:t,assignments:i,submissions:s,enabledFeatures:ce,onNavigate:n,onStartAssignment:W,studentTab:w$[r]}),r==="Forensics"&&ce.evidenceLocker&&c.jsx(XTe,{user:t}),r==="Physics Lab"&&ce.physicsLab&&c.jsx(QTe,{user:t}),r==="Leaderboard"&&ce.leaderboard&&c.jsx(tAe,{})]})]},r)})})]})})})})},uQ=document.getElementById("root");if(!uQ)throw new Error("Could not find root element to mount to");const dAe=QY.createRoot(uQ);dAe.render(c.jsx(te.StrictMode,{children:c.jsx(uAe,{})}));
