var YX=Object.defineProperty;var ZX=(t,e,r)=>e in t?YX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ik=(t,e,r)=>ZX(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as JX}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jw={exports:{}},om={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function eQ(){if(Rk)return om;Rk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:n,key:s,ref:i!==void 0?i:null,props:a}}return om.Fragment=e,om.jsx=r,om.jsxs=r,om}var Mk;function tQ(){return Mk||(Mk=1,jw.exports=eQ()),jw.exports}var u=tQ(),kw={exports:{}},zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function rQ(){if(Pk)return zt;Pk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function N(X,ne,de){this.props=X,this.context=ne,this.refs=w,this.updater=de||T}N.prototype.isReactComponent={},N.prototype.setState=function(X,ne){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ne,"setState")},N.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function I(){}I.prototype=N.prototype;function C(X,ne,de){this.props=X,this.context=ne,this.refs=w,this.updater=de||T}var z=C.prototype=new I;z.constructor=C,S(z,N.prototype),z.isPureReactComponent=!0;var O=Array.isArray;function B(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(X,ne,de){var J=de.ref;return{$$typeof:t,type:X,key:ne,ref:J!==void 0?J:null,props:de}}function F(X,ne){return R(X.type,ne,X.props)}function D(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function L(X){var ne={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(de){return ne[de]})}var M=/\/+/g;function Q(X,ne){return typeof X=="object"&&X!==null&&X.key!=null?L(""+X.key):ne.toString(36)}function Z(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(B,B):(X.status="pending",X.then(function(ne){X.status==="pending"&&(X.status="fulfilled",X.value=ne)},function(ne){X.status==="pending"&&(X.status="rejected",X.reason=ne)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function W(X,ne,de,J,le){var pe=typeof X;(pe==="undefined"||pe==="boolean")&&(X=null);var be=!1;if(X===null)be=!0;else switch(pe){case"bigint":case"string":case"number":be=!0;break;case"object":switch(X.$$typeof){case t:case e:be=!0;break;case m:return be=X._init,W(be(X._payload),ne,de,J,le)}}if(be)return le=le(X),be=J===""?"."+Q(X,0):J,O(le)?(de="",be!=null&&(de=be.replace(M,"$&/")+"/"),W(le,ne,de,"",function(ce){return ce})):le!=null&&(D(le)&&(le=F(le,de+(le.key==null||X&&X.key===le.key?"":(""+le.key).replace(M,"$&/")+"/")+be)),ne.push(le)),1;be=0;var Je=J===""?".":J+":";if(O(X))for(var Ne=0;Ne<X.length;Ne++)J=X[Ne],pe=Je+Q(J,Ne),be+=W(J,ne,de,pe,le);else if(Ne=b(X),typeof Ne=="function")for(X=Ne.call(X),Ne=0;!(J=X.next()).done;)J=J.value,pe=Je+Q(J,Ne++),be+=W(J,ne,de,pe,le);else if(pe==="object"){if(typeof X.then=="function")return W(Z(X),ne,de,J,le);throw ne=String(X),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return be}function ee(X,ne,de){if(X==null)return X;var J=[],le=0;return W(X,J,"","",function(pe){return ne.call(de,pe,le++)}),J}function Y(X){if(X._status===-1){var ne=X._result;ne=ne(),ne.then(function(de){(X._status===0||X._status===-1)&&(X._status=1,X._result=de)},function(de){(X._status===0||X._status===-1)&&(X._status=2,X._result=de)}),X._status===-1&&(X._status=0,X._result=ne)}if(X._status===1)return X._result.default;throw X._result}var ye=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},oe={map:ee,forEach:function(X,ne,de){ee(X,function(){ne.apply(this,arguments)},de)},count:function(X){var ne=0;return ee(X,function(){ne++}),ne},toArray:function(X){return ee(X,function(ne){return ne})||[]},only:function(X){if(!D(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return zt.Activity=p,zt.Children=oe,zt.Component=N,zt.Fragment=r,zt.Profiler=i,zt.PureComponent=C,zt.StrictMode=n,zt.Suspense=d,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,zt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return E.H.useMemoCache(X)}},zt.cache=function(X){return function(){return X.apply(null,arguments)}},zt.cacheSignal=function(){return null},zt.cloneElement=function(X,ne,de){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var J=S({},X.props),le=X.key;if(ne!=null)for(pe in ne.key!==void 0&&(le=""+ne.key),ne)!A.call(ne,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ne.ref===void 0||(J[pe]=ne[pe]);var pe=arguments.length-2;if(pe===1)J.children=de;else if(1<pe){for(var be=Array(pe),Je=0;Je<pe;Je++)be[Je]=arguments[Je+2];J.children=be}return R(X.type,le,J)},zt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},zt.createElement=function(X,ne,de){var J,le={},pe=null;if(ne!=null)for(J in ne.key!==void 0&&(pe=""+ne.key),ne)A.call(ne,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(le[J]=ne[J]);var be=arguments.length-2;if(be===1)le.children=de;else if(1<be){for(var Je=Array(be),Ne=0;Ne<be;Ne++)Je[Ne]=arguments[Ne+2];le.children=Je}if(X&&X.defaultProps)for(J in be=X.defaultProps,be)le[J]===void 0&&(le[J]=be[J]);return R(X,pe,le)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(X){return{$$typeof:c,render:X}},zt.isValidElement=D,zt.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:Y}},zt.memo=function(X,ne){return{$$typeof:f,type:X,compare:ne===void 0?null:ne}},zt.startTransition=function(X){var ne=E.T,de={};E.T=de;try{var J=X(),le=E.S;le!==null&&le(de,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(B,ye)}catch(pe){ye(pe)}finally{ne!==null&&de.types!==null&&(ne.types=de.types),E.T=ne}},zt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},zt.use=function(X){return E.H.use(X)},zt.useActionState=function(X,ne,de){return E.H.useActionState(X,ne,de)},zt.useCallback=function(X,ne){return E.H.useCallback(X,ne)},zt.useContext=function(X){return E.H.useContext(X)},zt.useDebugValue=function(){},zt.useDeferredValue=function(X,ne){return E.H.useDeferredValue(X,ne)},zt.useEffect=function(X,ne){return E.H.useEffect(X,ne)},zt.useEffectEvent=function(X){return E.H.useEffectEvent(X)},zt.useId=function(){return E.H.useId()},zt.useImperativeHandle=function(X,ne,de){return E.H.useImperativeHandle(X,ne,de)},zt.useInsertionEffect=function(X,ne){return E.H.useInsertionEffect(X,ne)},zt.useLayoutEffect=function(X,ne){return E.H.useLayoutEffect(X,ne)},zt.useMemo=function(X,ne){return E.H.useMemo(X,ne)},zt.useOptimistic=function(X,ne){return E.H.useOptimistic(X,ne)},zt.useReducer=function(X,ne,de){return E.H.useReducer(X,ne,de)},zt.useRef=function(X){return E.H.useRef(X)},zt.useState=function(X){return E.H.useState(X)},zt.useSyncExternalStore=function(X,ne,de){return E.H.useSyncExternalStore(X,ne,de)},zt.useTransition=function(){return E.H.useTransition()},zt.version="19.2.4",zt}var Dk;function l7(){return Dk||(Dk=1,kw.exports=rQ()),kw.exports}var V=l7();const ae=_r(V);var Cw={exports:{}},lm={},Ow={exports:{}},Iw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function nQ(){return Lk||(Lk=1,(function(t){function e(W,ee){var Y=W.length;W.push(ee);e:for(;0<Y;){var ye=Y-1>>>1,oe=W[ye];if(0<i(oe,ee))W[ye]=ee,W[Y]=oe,Y=ye;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var ee=W[0],Y=W.pop();if(Y!==ee){W[0]=Y;e:for(var ye=0,oe=W.length,X=oe>>>1;ye<X;){var ne=2*(ye+1)-1,de=W[ne],J=ne+1,le=W[J];if(0>i(de,Y))J<oe&&0>i(le,de)?(W[ye]=le,W[J]=Y,ye=J):(W[ye]=de,W[ne]=Y,ye=ne);else if(J<oe&&0>i(le,Y))W[ye]=le,W[J]=Y,ye=J;else break e}}return ee}function i(W,ee){var Y=W.sortIndex-ee.sortIndex;return Y!==0?Y:W.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],f=[],m=1,p=null,y=3,b=!1,T=!1,S=!1,w=!1,N=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function z(W){for(var ee=r(f);ee!==null;){if(ee.callback===null)n(f);else if(ee.startTime<=W)n(f),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=r(f)}}function O(W){if(S=!1,z(W),!T)if(r(d)!==null)T=!0,B||(B=!0,L());else{var ee=r(f);ee!==null&&Z(O,ee.startTime-W)}}var B=!1,E=-1,A=5,R=-1;function F(){return w?!0:!(t.unstable_now()-R<A)}function D(){if(w=!1,B){var W=t.unstable_now();R=W;var ee=!0;try{e:{T=!1,S&&(S=!1,I(E),E=-1),b=!0;var Y=y;try{t:{for(z(W),p=r(d);p!==null&&!(p.expirationTime>W&&F());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,y=p.priorityLevel;var oe=ye(p.expirationTime<=W);if(W=t.unstable_now(),typeof oe=="function"){p.callback=oe,z(W),ee=!0;break t}p===r(d)&&n(d),z(W)}else n(d);p=r(d)}if(p!==null)ee=!0;else{var X=r(f);X!==null&&Z(O,X.startTime-W),ee=!1}}break e}finally{p=null,y=Y,b=!1}ee=void 0}}finally{ee?L():B=!1}}}var L;if(typeof C=="function")L=function(){C(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Q=M.port2;M.port1.onmessage=D,L=function(){Q.postMessage(null)}}else L=function(){N(D,0)};function Z(W,ee){E=N(function(){W(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(W){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var Y=y;y=ee;try{return W()}finally{y=Y}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Y=y;y=W;try{return ee()}finally{y=Y}},t.unstable_scheduleCallback=function(W,ee,Y){var ye=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ye+Y:ye):Y=ye,W){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Y+oe,W={id:m++,callback:ee,priorityLevel:W,startTime:Y,expirationTime:oe,sortIndex:-1},Y>ye?(W.sortIndex=Y,e(f,W),r(d)===null&&W===r(f)&&(S?(I(E),E=-1):S=!0,Z(O,Y-ye))):(W.sortIndex=oe,e(d,W),T||b||(T=!0,B||(B=!0,L()))),W},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(W){var ee=y;return function(){var Y=y;y=ee;try{return W.apply(this,arguments)}finally{y=Y}}}})(Iw)),Iw}var Bk;function iQ(){return Bk||(Bk=1,Ow.exports=nQ()),Ow.exports}var Rw={exports:{}},Pi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uk;function aQ(){if(Uk)return Pi;Uk=1;var t=l7();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Pi.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Pi.flushSync=function(d){var f=s.T,m=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=f,n.p=m,n.d.f()}},Pi.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Pi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Pi.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):m==="script"&&n.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Pi.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Pi.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Pi.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Pi.requestFormReset=function(d){n.d.r(d)},Pi.unstable_batchedUpdates=function(d,f){return d(f)},Pi.useFormState=function(d,f,m){return s.H.useFormState(d,f,m)},Pi.useFormStatus=function(){return s.H.useHostTransitionStatus()},Pi.version="19.2.4",Pi}var zk;function sQ(){if(zk)return Rw.exports;zk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rw.exports=aQ(),Rw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k;function oQ(){if($k)return lm;$k=1;var t=iQ(),e=l7(),r=sQ();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(n(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,g=l;;){var x=h.return;if(x===null)break;var _=x.alternate;if(_===null){if(g=x.return,g!==null){h=g;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===h)return d(x),o;if(_===g)return d(x),l;_=_.sibling}throw Error(n(188))}if(h.return!==g.return)h=x,g=_;else{for(var U=!1,H=x.child;H;){if(H===h){U=!0,h=x,g=_;break}if(H===g){U=!0,g=x,h=_;break}H=H.sibling}if(!U){for(H=_.child;H;){if(H===h){U=!0,h=_,g=x;break}if(H===g){U=!0,g=_,h=x;break}H=H.sibling}if(!U)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function m(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=m(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),C=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(o){return o===null||typeof o!="object"?null:(o=D&&o[D]||o["@@iterator"],typeof o=="function"?o:null)}var M=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===M?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case N:return"Profiler";case w:return"StrictMode";case O:return"Suspense";case B:return"SuspenseList";case R:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case C:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case z:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case E:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case A:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var Z=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ye=[],oe=-1;function X(o){return{current:o}}function ne(o){0>oe||(o.current=ye[oe],ye[oe]=null,oe--)}function de(o,l){oe++,ye[oe]=o.current,o.current=l}var J=X(null),le=X(null),pe=X(null),be=X(null);function Je(o,l){switch(de(pe,l),de(le,o),de(J,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?tk(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=tk(l),o=rk(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(J),de(J,o)}function Ne(){ne(J),ne(le),ne(pe)}function ce(o){o.memoizedState!==null&&de(be,o);var l=J.current,h=rk(l,o.type);l!==h&&(de(le,o),de(J,h))}function Ce(o){le.current===o&&(ne(J),ne(le)),be.current===o&&(ne(be),nm._currentValue=Y)}var Ee,ct;function Qe(o){if(Ee===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);Ee=l&&l[1]||"",ct=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+o+ct}var ut=!1;function dt(o,l){if(!o||ut)return"";ut=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Be=function(){throw Error()};if(Object.defineProperty(Be.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Be,[])}catch(je){var Ae=je}Reflect.construct(o,[],Be)}else{try{Be.call()}catch(je){Ae=je}o.call(Be.prototype)}}else{try{throw Error()}catch(je){Ae=je}(Be=o())&&typeof Be.catch=="function"&&Be.catch(function(){})}}catch(je){if(je&&Ae&&typeof je.stack=="string")return[je.stack,Ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),U=_[0],H=_[1];if(U&&H){var se=U.split(`
`),Se=H.split(`
`);for(x=g=0;g<se.length&&!se[g].includes("DetermineComponentFrameRoot");)g++;for(;x<Se.length&&!Se[x].includes("DetermineComponentFrameRoot");)x++;if(g===se.length||x===Se.length)for(g=se.length-1,x=Se.length-1;1<=g&&0<=x&&se[g]!==Se[x];)x--;for(;1<=g&&0<=x;g--,x--)if(se[g]!==Se[x]){if(g!==1||x!==1)do if(g--,x--,0>x||se[g]!==Se[x]){var Re=`
`+se[g].replace(" at new "," at ");return o.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",o.displayName)),Re}while(1<=g&&0<=x);break}}}finally{ut=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Qe(h):""}function Ut(o,l){switch(o.tag){case 26:case 27:case 5:return Qe(o.type);case 16:return Qe("Lazy");case 13:return o.child!==l&&l!==null?Qe("Suspense Fallback"):Qe("Suspense");case 19:return Qe("SuspenseList");case 0:case 15:return dt(o.type,!1);case 11:return dt(o.type.render,!1);case 1:return dt(o.type,!0);case 31:return Qe("Activity");default:return""}}function Oe(o){try{var l="",h=null;do l+=Ut(o,h),h=o,o=o.return;while(o);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var st=Object.prototype.hasOwnProperty,yt=t.unstable_scheduleCallback,he=t.unstable_cancelCallback,ze=t.unstable_shouldYield,re=t.unstable_requestPaint,De=t.unstable_now,We=t.unstable_getCurrentPriorityLevel,tt=t.unstable_ImmediatePriority,Ze=t.unstable_UserBlockingPriority,Ke=t.unstable_NormalPriority,wt=t.unstable_LowPriority,Tt=t.unstable_IdlePriority,hi=t.log,Nn=t.unstable_setDisableYieldValue,jn=null,Kt=null;function Qt(o){if(typeof hi=="function"&&Nn(o),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(jn,o)}catch{}}var Wt=Math.clz32?Math.clz32:Ja,ki=Math.log,Fi=Math.LN2;function Ja(o){return o>>>=0,o===0?32:31-(ki(o)/Fi|0)|0}var qi=256,Vr=262144,es=4194304;function Ci(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ur(o,l,h){var g=o.pendingLanes;if(g===0)return 0;var x=0,_=o.suspendedLanes,U=o.pingedLanes;o=o.warmLanes;var H=g&134217727;return H!==0?(g=H&~_,g!==0?x=Ci(g):(U&=H,U!==0?x=Ci(U):h||(h=H&~o,h!==0&&(x=Ci(h))))):(H=g&~_,H!==0?x=Ci(H):U!==0?x=Ci(U):h||(h=g&~o,h!==0&&(x=Ci(h)))),x===0?0:l!==0&&l!==x&&(l&_)===0&&(_=x&-x,h=l&-l,_>=h||_===32&&(h&4194048)!==0)?l:x}function fi(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function Js(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eo(){var o=es;return es<<=1,(es&62914560)===0&&(es=4194304),o}function Hi(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function sa(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function un(o,l,h,g,x,_){var U=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var H=o.entanglements,se=o.expirationTimes,Se=o.hiddenUpdates;for(h=U&~h;0<h;){var Re=31-Wt(h),Be=1<<Re;H[Re]=0,se[Re]=-1;var Ae=Se[Re];if(Ae!==null)for(Se[Re]=null,Re=0;Re<Ae.length;Re++){var je=Ae[Re];je!==null&&(je.lane&=-536870913)}h&=~Be}g!==0&&to(o,g,0),_!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=_&~(U&~l))}function to(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var g=31-Wt(l);o.entangledLanes|=l,o.entanglements[g]=o.entanglements[g]|1073741824|h&261930}function Oi(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var g=31-Wt(h),x=1<<g;x&l|o[g]&l&&(o[g]|=l),h&=~x}}function Gi(o,l){var h=l&-l;return h=(h&42)!==0?1:ro(h),(h&(o.suspendedLanes|l))!==0?0:h}function ro(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function kn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function mi(){var o=ee.p;return o!==0?o:(o=window.event,o===void 0?32:Ak(o.type))}function no(o,l){var h=ee.p;try{return ee.p=o,l()}finally{ee.p=h}}var Ii=Math.random().toString(36).slice(2),Er="__reactFiber$"+Ii,Gr="__reactProps$"+Ii,dn="__reactContainer$"+Ii,oa="__reactEvents$"+Ii,Ri="__reactListeners$"+Ii,io="__reactHandles$"+Ii,js="__reactResources$"+Ii,la="__reactMarker$"+Ii;function pt(o){delete o[Er],delete o[Gr],delete o[oa],delete o[Ri],delete o[io]}function ue(o){var l=o[Er];if(l)return l;for(var h=o.parentNode;h;){if(l=h[dn]||h[Er]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=ck(o);o!==null;){if(h=o[Er])return h;o=ck(o)}return l}o=h,h=o.parentNode}return null}function qe(o){if(o=o[Er]||o[dn]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function rt(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function Dt(o){var l=o[js];return l||(l=o[js]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Yt(o){o[la]=!0}var Kr=new Set,Nr={};function Wr(o,l){hr(o,l),hr(o+"Capture",l)}function hr(o,l){for(Nr[o]=l,o=0;o<l.length;o++)Kr.add(l[o])}var ao=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ks={},ge={};function Me(o){return st.call(ge,o)?!0:st.call(ks,o)?!1:ao.test(o)?ge[o]=!0:(ks[o]=!0,!1)}function $e(o,l,h){if(Me(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function lt(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function jt(o,l,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+g)}}function lr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function yn(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ca(o,l,h){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,_=g.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(U){h=""+U,_.call(this,U)}}),Object.defineProperty(o,l,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(U){h=""+U},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function ts(o){if(!o._valueTracker){var l=yn(o)?"checked":"value";o._valueTracker=ca(o,l,""+o[l])}}function Cs(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return o&&(g=yn(o)?o.checked?"true":"false":o.value),o=g,o!==h?(l.setValue(o),!0):!1}function Hl(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Os=/[\n"\\]/g;function nn(o){return o.replace(Os,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function er(o,l,h,g,x,_,U,H){o.name="",U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?o.type=U:o.removeAttribute("type"),l!=null?U==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+lr(l)):o.value!==""+lr(l)&&(o.value=""+lr(l)):U!=="submit"&&U!=="reset"||o.removeAttribute("value"),l!=null?Bo(o,U,lr(l)):h!=null?Bo(o,U,lr(h)):g!=null&&o.removeAttribute("value"),x==null&&_!=null&&(o.defaultChecked=!!_),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+lr(H):o.removeAttribute("name")}function Is(o,l,h,g,x,_,U,H){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){ts(o);return}h=h!=null?""+lr(h):"",l=l!=null?""+lr(l):h,H||l===o.value||(o.value=l),o.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=H?o.checked:!!g,o.defaultChecked=!!g,U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(o.name=U),ts(o)}function Bo(o,l,h){l==="number"&&Hl(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function mr(o,l,h,g){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&g&&(o[h].defaultSelected=!0)}else{for(h=""+lr(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function gu(o,l,h){if(l!=null&&(l=""+lr(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+lr(h):""}function Gl(o,l,h,g){if(l==null){if(g!=null){if(h!=null)throw Error(n(92));if(Z(g)){if(1<g.length)throw Error(n(93));g=g[0]}h=g}h==null&&(h=""),l=h}h=lr(l),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g),ts(o)}function rs(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var O2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yf(o,l,h){var g=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":g?o.setProperty(l,h):typeof h!="number"||h===0||O2.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function Xg(o,l,h){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&h[x]!==g&&yf(o,x,g)}else for(var _ in l)l.hasOwnProperty(_)&&yf(o,_,l[_])}function vf(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),R2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function so(o){return R2.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ni(){}var X0=null;function Q0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Uo=null,ka=null;function Qg(o){var l=qe(o);if(l&&(o=l.stateNode)){var h=o[Gr]||null;e:switch(o=l.stateNode,l.type){case"input":if(er(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+nn(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==o&&g.form===o.form){var x=g[Gr]||null;if(!x)throw Error(n(90));er(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<h.length;l++)g=h[l],g.form===o.form&&Cs(g)}break e;case"textarea":gu(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&mr(o,!!h.multiple,l,!1)}}}var bf=!1;function Yg(o,l,h){if(bf)return o(l,h);bf=!0;try{var g=o(l);return g}finally{if(bf=!1,(Uo!==null||ka!==null)&&(K1(),Uo&&(l=Uo,o=ka,ka=Uo=null,Qg(l),o)))for(l=0;l<o.length;l++)Qg(o[l])}}function ua(o,l){var h=o.stateNode;if(h===null)return null;var g=h[Gr]||null;if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var Rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xf=!1;if(Rs)try{var oo={};Object.defineProperty(oo,"passive",{get:function(){xf=!0}}),window.addEventListener("test",oo,oo),window.removeEventListener("test",oo,oo)}catch{xf=!1}var Ca=null,Y0=null,lo=null;function Kl(){if(lo)return lo;var o,l=Y0,h=l.length,g,x="value"in Ca?Ca.value:Ca.textContent,_=x.length;for(o=0;o<h&&l[o]===x[o];o++);var U=h-o;for(g=1;g<=U&&l[h-g]===x[_-g];g++);return lo=x.slice(o,1<g?1-g:void 0)}function yu(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Wl(){return!0}function Jr(){return!1}function Mi(o){function l(h,g,x,_,U){this._reactName=h,this._targetInst=x,this.type=g,this.nativeEvent=_,this.target=U,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(h=o[H],this[H]=h?h(_):_[H]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Wl:Jr,this.isPropagationStopped=Jr,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Wl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Wl)},persist:function(){},isPersistent:Wl}),l}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vu=Mi(zo),Xl=p({},zo,{view:0,detail:0}),Zg=Mi(Xl),Ql,Z0,Ki,bu=p({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ki&&(Ki&&o.type==="mousemove"?(Ql=o.screenX-Ki.screenX,Z0=o.screenY-Ki.screenY):Z0=Ql=0,Ki=o),Ql)},movementY:function(o){return"movementY"in o?o.movementY:Z0}}),Jg=Mi(bu),xu=p({},bu,{dataTransfer:0}),e1=Mi(xu),wf=p({},Xl,{relatedTarget:0}),Yl=Mi(wf),t1=p({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),J0=Mi(t1),M2=p({},zo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),r1=Mi(M2),wu=p({},zo,{data:0}),_f=Mi(wu),n1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i1(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=Tf[o])?!!l[o]:!1}function Zl(){return i1}var a1=p({},Xl,{key:function(o){if(o.key){var l=n1[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=yu(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Sf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zl,charCode:function(o){return o.type==="keypress"?yu(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?yu(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),s1=Mi(a1),$o=p({},bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Af=Mi($o),o1=p({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zl}),l1=Mi(o1),c1=p({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),ed=Mi(c1),Wi=p({},bu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),u1=Mi(Wi),d1=p({},zo,{newState:0,oldState:0}),Jl=Mi(d1),v=[9,13,27,32],k=Rs&&"CompositionEvent"in window,$=null;Rs&&"documentMode"in document&&($=document.documentMode);var K=Rs&&"TextEvent"in window&&!$,xe=Rs&&(!k||$&&8<$&&11>=$),ke=" ",nt=!1;function Sr(o,l){switch(o){case"keyup":return v.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Zt=!1;function ii(o,l){switch(o){case"compositionend":return Ln(l);case"keypress":return l.which!==32?null:(nt=!0,ke);case"textInput":return o=l.data,o===ke&&nt?null:o;default:return null}}function ai(o,l){if(Zt)return o==="compositionend"||!k&&Sr(o,l)?(o=Kl(),lo=Y0=Ca=null,Zt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return xe&&l.locale!=="ko"?null:l.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function da(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!ec[o.type]:l==="textarea"}function _u(o,l,h,g){Uo?ka?ka.push(g):ka=[g]:Uo=g,l=ey(l,"onChange"),0<l.length&&(h=new vu("onChange","change",null,h,g),o.push({event:h,listeners:l}))}var Vo=null,Ef=null;function TW(o){Xj(o,0)}function h1(o){var l=rt(o);if(Cs(l))return o}function mN(o,l){if(o==="change")return l}var pN=!1;if(Rs){var P2;if(Rs){var D2="oninput"in document;if(!D2){var gN=document.createElement("div");gN.setAttribute("oninput","return;"),D2=typeof gN.oninput=="function"}P2=D2}else P2=!1;pN=P2&&(!document.documentMode||9<document.documentMode)}function yN(){Vo&&(Vo.detachEvent("onpropertychange",vN),Ef=Vo=null)}function vN(o){if(o.propertyName==="value"&&h1(Ef)){var l=[];_u(l,Ef,o,Q0(o)),Yg(TW,l)}}function AW(o,l,h){o==="focusin"?(yN(),Vo=l,Ef=h,Vo.attachEvent("onpropertychange",vN)):o==="focusout"&&yN()}function EW(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return h1(Ef)}function NW(o,l){if(o==="click")return h1(l)}function jW(o,l){if(o==="input"||o==="change")return h1(l)}function kW(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Oa=typeof Object.is=="function"?Object.is:kW;function Nf(o,l){if(Oa(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var x=h[g];if(!st.call(l,x)||!Oa(o[x],l[x]))return!1}return!0}function bN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function xN(o,l){var h=bN(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=l&&g>=l)return{node:h,offset:l-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=bN(h)}}function wN(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?wN(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function _N(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=Hl(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=Hl(o.document)}return l}function L2(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var CW=Rs&&"documentMode"in document&&11>=document.documentMode,td=null,B2=null,jf=null,U2=!1;function SN(o,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;U2||td==null||td!==Hl(g)||(g=td,"selectionStart"in g&&L2(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),jf&&Nf(jf,g)||(jf=g,g=ey(B2,"onSelect"),0<g.length&&(l=new vu("onSelect","select",null,l,h),o.push({event:l,listeners:g}),l.target=td)))}function Su(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var rd={animationend:Su("Animation","AnimationEnd"),animationiteration:Su("Animation","AnimationIteration"),animationstart:Su("Animation","AnimationStart"),transitionrun:Su("Transition","TransitionRun"),transitionstart:Su("Transition","TransitionStart"),transitioncancel:Su("Transition","TransitionCancel"),transitionend:Su("Transition","TransitionEnd")},z2={},TN={};Rs&&(TN=document.createElement("div").style,"AnimationEvent"in window||(delete rd.animationend.animation,delete rd.animationiteration.animation,delete rd.animationstart.animation),"TransitionEvent"in window||delete rd.transitionend.transition);function Tu(o){if(z2[o])return z2[o];if(!rd[o])return o;var l=rd[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in TN)return z2[o]=l[h];return o}var AN=Tu("animationend"),EN=Tu("animationiteration"),NN=Tu("animationstart"),OW=Tu("transitionrun"),IW=Tu("transitionstart"),RW=Tu("transitioncancel"),jN=Tu("transitionend"),kN=new Map,$2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$2.push("scrollEnd");function Ms(o,l){kN.set(o,l),Wr(l,[o])}var f1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ns=[],nd=0,V2=0;function m1(){for(var o=nd,l=V2=nd=0;l<o;){var h=ns[l];ns[l++]=null;var g=ns[l];ns[l++]=null;var x=ns[l];ns[l++]=null;var _=ns[l];if(ns[l++]=null,g!==null&&x!==null){var U=g.pending;U===null?x.next=x:(x.next=U.next,U.next=x),g.pending=x}_!==0&&CN(h,x,_)}}function p1(o,l,h,g){ns[nd++]=o,ns[nd++]=l,ns[nd++]=h,ns[nd++]=g,V2|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function F2(o,l,h,g){return p1(o,l,h,g),g1(o)}function Au(o,l){return p1(o,null,null,l),g1(o)}function CN(o,l,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var x=!1,_=o.return;_!==null;)_.childLanes|=h,g=_.alternate,g!==null&&(g.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(x=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,x&&l!==null&&(x=31-Wt(h),o=_.hiddenUpdates,g=o[x],g===null?o[x]=[l]:g.push(l),l.lane=h|536870912),_):null}function g1(o){if(50<Qf)throw Qf=0,Z4=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var id={};function MW(o,l,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(o,l,h,g){return new MW(o,l,h,g)}function q2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Fo(o,l){var h=o.alternate;return h===null?(h=Ia(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function ON(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function y1(o,l,h,g,x,_){var U=0;if(g=o,typeof o=="function")q2(o)&&(U=1);else if(typeof o=="string")U=UX(o,h,J.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case R:return o=Ia(31,h,l,x),o.elementType=R,o.lanes=_,o;case S:return Eu(h.children,x,_,l);case w:U=8,x|=24;break;case N:return o=Ia(12,h,l,x|2),o.elementType=N,o.lanes=_,o;case O:return o=Ia(13,h,l,x),o.elementType=O,o.lanes=_,o;case B:return o=Ia(19,h,l,x),o.elementType=B,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:U=10;break e;case I:U=9;break e;case z:U=11;break e;case E:U=14;break e;case A:U=16,g=null;break e}U=29,h=Error(n(130,o===null?"null":typeof o,"")),g=null}return l=Ia(U,h,l,x),l.elementType=o,l.type=g,l.lanes=_,l}function Eu(o,l,h,g){return o=Ia(7,o,g,l),o.lanes=h,o}function H2(o,l,h){return o=Ia(6,o,null,l),o.lanes=h,o}function IN(o){var l=Ia(18,null,null,0);return l.stateNode=o,l}function G2(o,l,h){return l=Ia(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var RN=new WeakMap;function is(o,l){if(typeof o=="object"&&o!==null){var h=RN.get(o);return h!==void 0?h:(l={value:o,source:l,stack:Oe(l)},RN.set(o,l),l)}return{value:o,source:l,stack:Oe(l)}}var ad=[],sd=0,v1=null,kf=0,as=[],ss=0,tc=null,co=1,uo="";function qo(o,l){ad[sd++]=kf,ad[sd++]=v1,v1=o,kf=l}function MN(o,l,h){as[ss++]=co,as[ss++]=uo,as[ss++]=tc,tc=o;var g=co;o=uo;var x=32-Wt(g)-1;g&=~(1<<x),h+=1;var _=32-Wt(l)+x;if(30<_){var U=x-x%5;_=(g&(1<<U)-1).toString(32),g>>=U,x-=U,co=1<<32-Wt(l)+x|h<<x|g,uo=_+o}else co=1<<_|h<<x|g,uo=o}function K2(o){o.return!==null&&(qo(o,1),MN(o,1,0))}function W2(o){for(;o===v1;)v1=ad[--sd],ad[sd]=null,kf=ad[--sd],ad[sd]=null;for(;o===tc;)tc=as[--ss],as[ss]=null,uo=as[--ss],as[ss]=null,co=as[--ss],as[ss]=null}function PN(o,l){as[ss++]=co,as[ss++]=uo,as[ss++]=tc,co=l.id,uo=l.overflow,tc=o}var pi=null,en=null,cr=!1,rc=null,os=!1,X2=Error(n(519));function nc(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cf(is(l,o)),X2}function DN(o){var l=o.stateNode,h=o.type,g=o.memoizedProps;switch(l[Er]=o,l[Gr]=g,h){case"dialog":rr("cancel",l),rr("close",l);break;case"iframe":case"object":case"embed":rr("load",l);break;case"video":case"audio":for(h=0;h<Zf.length;h++)rr(Zf[h],l);break;case"source":rr("error",l);break;case"img":case"image":case"link":rr("error",l),rr("load",l);break;case"details":rr("toggle",l);break;case"input":rr("invalid",l),Is(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":rr("invalid",l);break;case"textarea":rr("invalid",l),Gl(l,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||g.suppressHydrationWarning===!0||Jj(l.textContent,h)?(g.popover!=null&&(rr("beforetoggle",l),rr("toggle",l)),g.onScroll!=null&&rr("scroll",l),g.onScrollEnd!=null&&rr("scrollend",l),g.onClick!=null&&(l.onclick=ni),l=!0):l=!1,l||nc(o,!0)}function LN(o){for(pi=o.return;pi;)switch(pi.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:pi=pi.return}}function od(o){if(o!==pi)return!1;if(!cr)return LN(o),cr=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||fw(o.type,o.memoizedProps)),h=!h),h&&en&&nc(o),LN(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));en=lk(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));en=lk(o)}else l===27?(l=en,yc(o.type)?(o=vw,vw=null,en=o):en=l):en=pi?cs(o.stateNode.nextSibling):null;return!0}function Nu(){en=pi=null,cr=!1}function Q2(){var o=rc;return o!==null&&(pa===null?pa=o:pa.push.apply(pa,o),rc=null),o}function Cf(o){rc===null?rc=[o]:rc.push(o)}var Y2=X(null),ju=null,Ho=null;function ic(o,l,h){de(Y2,l._currentValue),l._currentValue=h}function Go(o){o._currentValue=Y2.current,ne(Y2)}function Z2(o,l,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===h)break;o=o.return}}function J2(o,l,h,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var _=x.dependencies;if(_!==null){var U=x.child;_=_.firstContext;e:for(;_!==null;){var H=_;_=x;for(var se=0;se<l.length;se++)if(H.context===l[se]){_.lanes|=h,H=_.alternate,H!==null&&(H.lanes|=h),Z2(_.return,h,o),g||(U=null);break e}_=H.next}}else if(x.tag===18){if(U=x.return,U===null)throw Error(n(341));U.lanes|=h,_=U.alternate,_!==null&&(_.lanes|=h),Z2(U,h,o),U=null}else U=x.child;if(U!==null)U.return=x;else for(U=x;U!==null;){if(U===o){U=null;break}if(x=U.sibling,x!==null){x.return=U.return,U=x;break}U=U.return}x=U}}function ld(o,l,h,g){o=null;for(var x=l,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var U=x.alternate;if(U===null)throw Error(n(387));if(U=U.memoizedProps,U!==null){var H=x.type;Oa(x.pendingProps.value,U.value)||(o!==null?o.push(H):o=[H])}}else if(x===be.current){if(U=x.alternate,U===null)throw Error(n(387));U.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(nm):o=[nm])}x=x.return}o!==null&&J2(l,o,h,g),l.flags|=262144}function b1(o){for(o=o.firstContext;o!==null;){if(!Oa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function ku(o){ju=o,Ho=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function gi(o){return BN(ju,o)}function x1(o,l){return ju===null&&ku(o),BN(o,l)}function BN(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},Ho===null){if(o===null)throw Error(n(308));Ho=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Ho=Ho.next=l;return h}var PW=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},DW=t.unstable_scheduleCallback,LW=t.unstable_NormalPriority,Bn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function e4(){return{controller:new PW,data:new Map,refCount:0}}function Of(o){o.refCount--,o.refCount===0&&DW(LW,function(){o.controller.abort()})}var If=null,t4=0,cd=0,ud=null;function BW(o,l){if(If===null){var h=If=[];t4=0,cd=iw(),ud={status:"pending",value:void 0,then:function(g){h.push(g)}}}return t4++,l.then(UN,UN),l}function UN(){if(--t4===0&&If!==null){ud!==null&&(ud.status="fulfilled");var o=If;If=null,cd=0,ud=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function UW(o,l){var h=[],g={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<h.length;x++)(0,h[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),g}var zN=W.S;W.S=function(o,l){Sj=De(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&BW(o,l),zN!==null&&zN(o,l)};var Cu=X(null);function r4(){var o=Cu.current;return o!==null?o:Fr.pooledCache}function w1(o,l){l===null?de(Cu,Cu.current):de(Cu,l.pool)}function $N(){var o=r4();return o===null?null:{parent:Bn._currentValue,pool:o}}var dd=Error(n(460)),n4=Error(n(474)),_1=Error(n(542)),S1={then:function(){}};function VN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function FN(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(ni,ni),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,HN(o),o;default:if(typeof l.status=="string")l.then(ni,ni);else{if(o=Fr,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,HN(o),o}throw Iu=l,dd}}function Ou(o){try{var l=o._init;return l(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Iu=h,dd):h}}var Iu=null;function qN(){if(Iu===null)throw Error(n(459));var o=Iu;return Iu=null,o}function HN(o){if(o===dd||o===_1)throw Error(n(483))}var hd=null,Rf=0;function T1(o){var l=Rf;return Rf+=1,hd===null&&(hd=[]),FN(hd,o,l)}function Mf(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function A1(o,l){throw l.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function GN(o){function l(ve,fe){if(o){var we=ve.deletions;we===null?(ve.deletions=[fe],ve.flags|=16):we.push(fe)}}function h(ve,fe){if(!o)return null;for(;fe!==null;)l(ve,fe),fe=fe.sibling;return null}function g(ve){for(var fe=new Map;ve!==null;)ve.key!==null?fe.set(ve.key,ve):fe.set(ve.index,ve),ve=ve.sibling;return fe}function x(ve,fe){return ve=Fo(ve,fe),ve.index=0,ve.sibling=null,ve}function _(ve,fe,we){return ve.index=we,o?(we=ve.alternate,we!==null?(we=we.index,we<fe?(ve.flags|=67108866,fe):we):(ve.flags|=67108866,fe)):(ve.flags|=1048576,fe)}function U(ve){return o&&ve.alternate===null&&(ve.flags|=67108866),ve}function H(ve,fe,we,Le){return fe===null||fe.tag!==6?(fe=H2(we,ve.mode,Le),fe.return=ve,fe):(fe=x(fe,we),fe.return=ve,fe)}function se(ve,fe,we,Le){var Et=we.type;return Et===S?Re(ve,fe,we.props.children,Le,we.key):fe!==null&&(fe.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&Ou(Et)===fe.type)?(fe=x(fe,we.props),Mf(fe,we),fe.return=ve,fe):(fe=y1(we.type,we.key,we.props,null,ve.mode,Le),Mf(fe,we),fe.return=ve,fe)}function Se(ve,fe,we,Le){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==we.containerInfo||fe.stateNode.implementation!==we.implementation?(fe=G2(we,ve.mode,Le),fe.return=ve,fe):(fe=x(fe,we.children||[]),fe.return=ve,fe)}function Re(ve,fe,we,Le,Et){return fe===null||fe.tag!==7?(fe=Eu(we,ve.mode,Le,Et),fe.return=ve,fe):(fe=x(fe,we),fe.return=ve,fe)}function Be(ve,fe,we){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=H2(""+fe,ve.mode,we),fe.return=ve,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return we=y1(fe.type,fe.key,fe.props,null,ve.mode,we),Mf(we,fe),we.return=ve,we;case T:return fe=G2(fe,ve.mode,we),fe.return=ve,fe;case A:return fe=Ou(fe),Be(ve,fe,we)}if(Z(fe)||L(fe))return fe=Eu(fe,ve.mode,we,null),fe.return=ve,fe;if(typeof fe.then=="function")return Be(ve,T1(fe),we);if(fe.$$typeof===C)return Be(ve,x1(ve,fe),we);A1(ve,fe)}return null}function Ae(ve,fe,we,Le){var Et=fe!==null?fe.key:null;if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return Et!==null?null:H(ve,fe,""+we,Le);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case b:return we.key===Et?se(ve,fe,we,Le):null;case T:return we.key===Et?Se(ve,fe,we,Le):null;case A:return we=Ou(we),Ae(ve,fe,we,Le)}if(Z(we)||L(we))return Et!==null?null:Re(ve,fe,we,Le,null);if(typeof we.then=="function")return Ae(ve,fe,T1(we),Le);if(we.$$typeof===C)return Ae(ve,fe,x1(ve,we),Le);A1(ve,we)}return null}function je(ve,fe,we,Le,Et){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return ve=ve.get(we)||null,H(fe,ve,""+Le,Et);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case b:return ve=ve.get(Le.key===null?we:Le.key)||null,se(fe,ve,Le,Et);case T:return ve=ve.get(Le.key===null?we:Le.key)||null,Se(fe,ve,Le,Et);case A:return Le=Ou(Le),je(ve,fe,we,Le,Et)}if(Z(Le)||L(Le))return ve=ve.get(we)||null,Re(fe,ve,Le,Et,null);if(typeof Le.then=="function")return je(ve,fe,we,T1(Le),Et);if(Le.$$typeof===C)return je(ve,fe,we,x1(fe,Le),Et);A1(fe,Le)}return null}function bt(ve,fe,we,Le){for(var Et=null,pr=null,St=fe,qt=fe=0,ir=null;St!==null&&qt<we.length;qt++){St.index>qt?(ir=St,St=null):ir=St.sibling;var gr=Ae(ve,St,we[qt],Le);if(gr===null){St===null&&(St=ir);break}o&&St&&gr.alternate===null&&l(ve,St),fe=_(gr,fe,qt),pr===null?Et=gr:pr.sibling=gr,pr=gr,St=ir}if(qt===we.length)return h(ve,St),cr&&qo(ve,qt),Et;if(St===null){for(;qt<we.length;qt++)St=Be(ve,we[qt],Le),St!==null&&(fe=_(St,fe,qt),pr===null?Et=St:pr.sibling=St,pr=St);return cr&&qo(ve,qt),Et}for(St=g(St);qt<we.length;qt++)ir=je(St,ve,qt,we[qt],Le),ir!==null&&(o&&ir.alternate!==null&&St.delete(ir.key===null?qt:ir.key),fe=_(ir,fe,qt),pr===null?Et=ir:pr.sibling=ir,pr=ir);return o&&St.forEach(function(_c){return l(ve,_c)}),cr&&qo(ve,qt),Et}function Ot(ve,fe,we,Le){if(we==null)throw Error(n(151));for(var Et=null,pr=null,St=fe,qt=fe=0,ir=null,gr=we.next();St!==null&&!gr.done;qt++,gr=we.next()){St.index>qt?(ir=St,St=null):ir=St.sibling;var _c=Ae(ve,St,gr.value,Le);if(_c===null){St===null&&(St=ir);break}o&&St&&_c.alternate===null&&l(ve,St),fe=_(_c,fe,qt),pr===null?Et=_c:pr.sibling=_c,pr=_c,St=ir}if(gr.done)return h(ve,St),cr&&qo(ve,qt),Et;if(St===null){for(;!gr.done;qt++,gr=we.next())gr=Be(ve,gr.value,Le),gr!==null&&(fe=_(gr,fe,qt),pr===null?Et=gr:pr.sibling=gr,pr=gr);return cr&&qo(ve,qt),Et}for(St=g(St);!gr.done;qt++,gr=we.next())gr=je(St,ve,qt,gr.value,Le),gr!==null&&(o&&gr.alternate!==null&&St.delete(gr.key===null?qt:gr.key),fe=_(gr,fe,qt),pr===null?Et=gr:pr.sibling=gr,pr=gr);return o&&St.forEach(function(QX){return l(ve,QX)}),cr&&qo(ve,qt),Et}function Dr(ve,fe,we,Le){if(typeof we=="object"&&we!==null&&we.type===S&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case b:e:{for(var Et=we.key;fe!==null;){if(fe.key===Et){if(Et=we.type,Et===S){if(fe.tag===7){h(ve,fe.sibling),Le=x(fe,we.props.children),Le.return=ve,ve=Le;break e}}else if(fe.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&Ou(Et)===fe.type){h(ve,fe.sibling),Le=x(fe,we.props),Mf(Le,we),Le.return=ve,ve=Le;break e}h(ve,fe);break}else l(ve,fe);fe=fe.sibling}we.type===S?(Le=Eu(we.props.children,ve.mode,Le,we.key),Le.return=ve,ve=Le):(Le=y1(we.type,we.key,we.props,null,ve.mode,Le),Mf(Le,we),Le.return=ve,ve=Le)}return U(ve);case T:e:{for(Et=we.key;fe!==null;){if(fe.key===Et)if(fe.tag===4&&fe.stateNode.containerInfo===we.containerInfo&&fe.stateNode.implementation===we.implementation){h(ve,fe.sibling),Le=x(fe,we.children||[]),Le.return=ve,ve=Le;break e}else{h(ve,fe);break}else l(ve,fe);fe=fe.sibling}Le=G2(we,ve.mode,Le),Le.return=ve,ve=Le}return U(ve);case A:return we=Ou(we),Dr(ve,fe,we,Le)}if(Z(we))return bt(ve,fe,we,Le);if(L(we)){if(Et=L(we),typeof Et!="function")throw Error(n(150));return we=Et.call(we),Ot(ve,fe,we,Le)}if(typeof we.then=="function")return Dr(ve,fe,T1(we),Le);if(we.$$typeof===C)return Dr(ve,fe,x1(ve,we),Le);A1(ve,we)}return typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint"?(we=""+we,fe!==null&&fe.tag===6?(h(ve,fe.sibling),Le=x(fe,we),Le.return=ve,ve=Le):(h(ve,fe),Le=H2(we,ve.mode,Le),Le.return=ve,ve=Le),U(ve)):h(ve,fe)}return function(ve,fe,we,Le){try{Rf=0;var Et=Dr(ve,fe,we,Le);return hd=null,Et}catch(St){if(St===dd||St===_1)throw St;var pr=Ia(29,St,null,ve.mode);return pr.lanes=Le,pr.return=ve,pr}finally{}}}var Ru=GN(!0),KN=GN(!1),ac=!1;function i4(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function a4(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function sc(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function oc(o,l,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(wr&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=g1(o),CN(o,null,h),l}return p1(o,g,l,h),g1(o)}function Pf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Oi(o,h)}}function s4(o,l){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var x=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var U={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?x=_=U:_=_.next=U,h=h.next}while(h!==null);_===null?x=_=l:_=_.next=l}else x=_=l;h={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var o4=!1;function Df(){if(o4){var o=ud;if(o!==null)throw o}}function Lf(o,l,h,g){o4=!1;var x=o.updateQueue;ac=!1;var _=x.firstBaseUpdate,U=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var se=H,Se=se.next;se.next=null,U===null?_=Se:U.next=Se,U=se;var Re=o.alternate;Re!==null&&(Re=Re.updateQueue,H=Re.lastBaseUpdate,H!==U&&(H===null?Re.firstBaseUpdate=Se:H.next=Se,Re.lastBaseUpdate=se))}if(_!==null){var Be=x.baseState;U=0,Re=Se=se=null,H=_;do{var Ae=H.lane&-536870913,je=Ae!==H.lane;if(je?(nr&Ae)===Ae:(g&Ae)===Ae){Ae!==0&&Ae===cd&&(o4=!0),Re!==null&&(Re=Re.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var bt=o,Ot=H;Ae=l;var Dr=h;switch(Ot.tag){case 1:if(bt=Ot.payload,typeof bt=="function"){Be=bt.call(Dr,Be,Ae);break e}Be=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ot.payload,Ae=typeof bt=="function"?bt.call(Dr,Be,Ae):bt,Ae==null)break e;Be=p({},Be,Ae);break e;case 2:ac=!0}}Ae=H.callback,Ae!==null&&(o.flags|=64,je&&(o.flags|=8192),je=x.callbacks,je===null?x.callbacks=[Ae]:je.push(Ae))}else je={lane:Ae,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Re===null?(Se=Re=je,se=Be):Re=Re.next=je,U|=Ae;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;je=H,H=je.next,je.next=null,x.lastBaseUpdate=je,x.shared.pending=null}}while(!0);Re===null&&(se=Be),x.baseState=se,x.firstBaseUpdate=Se,x.lastBaseUpdate=Re,_===null&&(x.shared.lanes=0),hc|=U,o.lanes=U,o.memoizedState=Be}}function WN(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function XN(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)WN(h[o],l)}var fd=X(null),E1=X(0);function QN(o,l){o=tl,de(E1,o),de(fd,l),tl=o|l.baseLanes}function l4(){de(E1,tl),de(fd,fd.current)}function c4(){tl=E1.current,ne(fd),ne(E1)}var Ra=X(null),ls=null;function lc(o){var l=o.alternate;de(Cn,Cn.current&1),de(Ra,o),ls===null&&(l===null||fd.current!==null||l.memoizedState!==null)&&(ls=o)}function u4(o){de(Cn,Cn.current),de(Ra,o),ls===null&&(ls=o)}function YN(o){o.tag===22?(de(Cn,Cn.current),de(Ra,o),ls===null&&(ls=o)):cc()}function cc(){de(Cn,Cn.current),de(Ra,Ra.current)}function Ma(o){ne(Ra),ls===o&&(ls=null),ne(Cn)}var Cn=X(0);function N1(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||gw(h)||yw(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ko=0,Ft=null,Mr=null,Un=null,j1=!1,md=!1,Mu=!1,k1=0,Bf=0,pd=null,zW=0;function vn(){throw Error(n(321))}function d4(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Oa(o[h],l[h]))return!1;return!0}function h4(o,l,h,g,x,_){return Ko=_,Ft=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,W.H=o===null||o.memoizedState===null?M9:N4,Mu=!1,_=h(g,x),Mu=!1,md&&(_=JN(l,h,g,x)),ZN(o),_}function ZN(o){W.H=$f;var l=Mr!==null&&Mr.next!==null;if(Ko=0,Un=Mr=Ft=null,j1=!1,Bf=0,pd=null,l)throw Error(n(300));o===null||zn||(o=o.dependencies,o!==null&&b1(o)&&(zn=!0))}function JN(o,l,h,g){Ft=o;var x=0;do{if(md&&(pd=null),Bf=0,md=!1,25<=x)throw Error(n(301));if(x+=1,Un=Mr=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}W.H=P9,_=l(h,g)}while(md);return _}function $W(){var o=W.H,l=o.useState()[0];return l=typeof l.then=="function"?Uf(l):l,o=o.useState()[0],(Mr!==null?Mr.memoizedState:null)!==o&&(Ft.flags|=1024),l}function f4(){var o=k1!==0;return k1=0,o}function m4(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function p4(o){if(j1){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}j1=!1}Ko=0,Un=Mr=Ft=null,md=!1,Bf=k1=0,pd=null}function Xi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Ft.memoizedState=Un=o:Un=Un.next=o,Un}function On(){if(Mr===null){var o=Ft.alternate;o=o!==null?o.memoizedState:null}else o=Mr.next;var l=Un===null?Ft.memoizedState:Un.next;if(l!==null)Un=l,Mr=o;else{if(o===null)throw Ft.alternate===null?Error(n(467)):Error(n(310));Mr=o,o={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Un===null?Ft.memoizedState=Un=o:Un=Un.next=o}return Un}function C1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uf(o){var l=Bf;return Bf+=1,pd===null&&(pd=[]),o=FN(pd,o,l),l=Ft,(Un===null?l.memoizedState:Un.next)===null&&(l=l.alternate,W.H=l===null||l.memoizedState===null?M9:N4),o}function O1(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Uf(o);if(o.$$typeof===C)return gi(o)}throw Error(n(438,String(o)))}function g4(o){var l=null,h=Ft.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var g=Ft.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=C1(),Ft.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),g=0;g<o;g++)h[g]=F;return l.index++,h}function Wo(o,l){return typeof l=="function"?l(o):l}function I1(o){var l=On();return y4(l,Mr,o)}function y4(o,l,h){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=h;var x=o.baseQueue,_=g.pending;if(_!==null){if(x!==null){var U=x.next;x.next=_.next,_.next=U}l.baseQueue=x=_,g.pending=null}if(_=o.baseState,x===null)o.memoizedState=_;else{l=x.next;var H=U=null,se=null,Se=l,Re=!1;do{var Be=Se.lane&-536870913;if(Be!==Se.lane?(nr&Be)===Be:(Ko&Be)===Be){var Ae=Se.revertLane;if(Ae===0)se!==null&&(se=se.next={lane:0,revertLane:0,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Be===cd&&(Re=!0);else if((Ko&Ae)===Ae){Se=Se.next,Ae===cd&&(Re=!0);continue}else Be={lane:0,revertLane:Se.revertLane,gesture:null,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},se===null?(H=se=Be,U=_):se=se.next=Be,Ft.lanes|=Ae,hc|=Ae;Be=Se.action,Mu&&h(_,Be),_=Se.hasEagerState?Se.eagerState:h(_,Be)}else Ae={lane:Be,revertLane:Se.revertLane,gesture:Se.gesture,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},se===null?(H=se=Ae,U=_):se=se.next=Ae,Ft.lanes|=Be,hc|=Be;Se=Se.next}while(Se!==null&&Se!==l);if(se===null?U=_:se.next=H,!Oa(_,o.memoizedState)&&(zn=!0,Re&&(h=ud,h!==null)))throw h;o.memoizedState=_,o.baseState=U,o.baseQueue=se,g.lastRenderedState=_}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function v4(o){var l=On(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,x=h.pending,_=l.memoizedState;if(x!==null){h.pending=null;var U=x=x.next;do _=o(_,U.action),U=U.next;while(U!==x);Oa(_,l.memoizedState)||(zn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),h.lastRenderedState=_}return[_,g]}function e9(o,l,h){var g=Ft,x=On(),_=cr;if(_){if(h===void 0)throw Error(n(407));h=h()}else h=l();var U=!Oa((Mr||x).memoizedState,h);if(U&&(x.memoizedState=h,zn=!0),x=x.queue,w4(n9.bind(null,g,x,o),[o]),x.getSnapshot!==l||U||Un!==null&&Un.memoizedState.tag&1){if(g.flags|=2048,gd(9,{destroy:void 0},r9.bind(null,g,x,h,l),null),Fr===null)throw Error(n(349));_||(Ko&127)!==0||t9(g,l,h)}return h}function t9(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Ft.updateQueue,l===null?(l=C1(),Ft.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function r9(o,l,h,g){l.value=h,l.getSnapshot=g,i9(l)&&a9(o)}function n9(o,l,h){return h(function(){i9(l)&&a9(o)})}function i9(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Oa(o,h)}catch{return!0}}function a9(o){var l=Au(o,2);l!==null&&ga(l,o,2)}function b4(o){var l=Xi();if(typeof o=="function"){var h=o;if(o=h(),Mu){Qt(!0);try{h()}finally{Qt(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:o},l}function s9(o,l,h,g){return o.baseState=h,y4(o,Mr,typeof g=="function"?g:Wo)}function VW(o,l,h,g,x){if(P1(o))throw Error(n(485));if(o=l.action,o!==null){var _={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(U){_.listeners.push(U)}};W.T!==null?h(!0):_.isTransition=!1,g(_),h=l.pending,h===null?(_.next=l.pending=_,o9(l,_)):(_.next=h.next,l.pending=h.next=_)}}function o9(o,l){var h=l.action,g=l.payload,x=o.state;if(l.isTransition){var _=W.T,U={};W.T=U;try{var H=h(x,g),se=W.S;se!==null&&se(U,H),l9(o,l,H)}catch(Se){x4(o,l,Se)}finally{_!==null&&U.types!==null&&(_.types=U.types),W.T=_}}else try{_=h(x,g),l9(o,l,_)}catch(Se){x4(o,l,Se)}}function l9(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){c9(o,l,g)},function(g){return x4(o,l,g)}):c9(o,l,h)}function c9(o,l,h){l.status="fulfilled",l.value=h,u9(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,o9(o,h)))}function x4(o,l,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=h,u9(l),l=l.next;while(l!==g)}o.action=null}function u9(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function d9(o,l){return l}function h9(o,l){if(cr){var h=Fr.formState;if(h!==null){e:{var g=Ft;if(cr){if(en){t:{for(var x=en,_=os;x.nodeType!==8;){if(!_){x=null;break t}if(x=cs(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){en=cs(x.nextSibling),g=x.data==="F!";break e}}nc(g)}g=!1}g&&(l=h[0])}}return h=Xi(),h.memoizedState=h.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d9,lastRenderedState:l},h.queue=g,h=O9.bind(null,Ft,g),g.dispatch=h,g=b4(!1),_=E4.bind(null,Ft,!1,g.queue),g=Xi(),x={state:l,dispatch:null,action:o,pending:null},g.queue=x,h=VW.bind(null,Ft,x,_,h),x.dispatch=h,g.memoizedState=o,[l,h,!1]}function f9(o){var l=On();return m9(l,Mr,o)}function m9(o,l,h){if(l=y4(o,l,d9)[0],o=I1(Wo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Uf(l)}catch(U){throw U===dd?_1:U}else g=l;l=On();var x=l.queue,_=x.dispatch;return h!==l.memoizedState&&(Ft.flags|=2048,gd(9,{destroy:void 0},FW.bind(null,x,h),null)),[g,_,o]}function FW(o,l){o.action=l}function p9(o){var l=On(),h=Mr;if(h!==null)return m9(l,h,o);On(),l=l.memoizedState,h=On();var g=h.queue.dispatch;return h.memoizedState=o,[l,g,!1]}function gd(o,l,h,g){return o={tag:o,create:h,deps:g,inst:l,next:null},l=Ft.updateQueue,l===null&&(l=C1(),Ft.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,l.lastEffect=o),o}function g9(){return On().memoizedState}function R1(o,l,h,g){var x=Xi();Ft.flags|=o,x.memoizedState=gd(1|l,{destroy:void 0},h,g===void 0?null:g)}function M1(o,l,h,g){var x=On();g=g===void 0?null:g;var _=x.memoizedState.inst;Mr!==null&&g!==null&&d4(g,Mr.memoizedState.deps)?x.memoizedState=gd(l,_,h,g):(Ft.flags|=o,x.memoizedState=gd(1|l,_,h,g))}function y9(o,l){R1(8390656,8,o,l)}function w4(o,l){M1(2048,8,o,l)}function qW(o){Ft.flags|=4;var l=Ft.updateQueue;if(l===null)l=C1(),Ft.updateQueue=l,l.events=[o];else{var h=l.events;h===null?l.events=[o]:h.push(o)}}function v9(o){var l=On().memoizedState;return qW({ref:l,nextImpl:o}),function(){if((wr&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function b9(o,l){return M1(4,2,o,l)}function x9(o,l){return M1(4,4,o,l)}function w9(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function _9(o,l,h){h=h!=null?h.concat([o]):null,M1(4,4,w9.bind(null,l,o),h)}function _4(){}function S9(o,l){var h=On();l=l===void 0?null:l;var g=h.memoizedState;return l!==null&&d4(l,g[1])?g[0]:(h.memoizedState=[o,l],o)}function T9(o,l){var h=On();l=l===void 0?null:l;var g=h.memoizedState;if(l!==null&&d4(l,g[1]))return g[0];if(g=o(),Mu){Qt(!0);try{o()}finally{Qt(!1)}}return h.memoizedState=[g,l],g}function S4(o,l,h){return h===void 0||(Ko&1073741824)!==0&&(nr&261930)===0?o.memoizedState=l:(o.memoizedState=h,o=Aj(),Ft.lanes|=o,hc|=o,h)}function A9(o,l,h,g){return Oa(h,l)?h:fd.current!==null?(o=S4(o,h,g),Oa(o,l)||(zn=!0),o):(Ko&42)===0||(Ko&1073741824)!==0&&(nr&261930)===0?(zn=!0,o.memoizedState=h):(o=Aj(),Ft.lanes|=o,hc|=o,l)}function E9(o,l,h,g,x){var _=ee.p;ee.p=_!==0&&8>_?_:8;var U=W.T,H={};W.T=H,E4(o,!1,l,h);try{var se=x(),Se=W.S;if(Se!==null&&Se(H,se),se!==null&&typeof se=="object"&&typeof se.then=="function"){var Re=UW(se,g);zf(o,l,Re,La(o))}else zf(o,l,g,La(o))}catch(Be){zf(o,l,{then:function(){},status:"rejected",reason:Be},La())}finally{ee.p=_,U!==null&&H.types!==null&&(U.types=H.types),W.T=U}}function HW(){}function T4(o,l,h,g){if(o.tag!==5)throw Error(n(476));var x=N9(o).queue;E9(o,x,l,Y,h===null?HW:function(){return j9(o),h(g)})}function N9(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:Y},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function j9(o){var l=N9(o);l.next===null&&(l=o.alternate.memoizedState),zf(o,l.next.queue,{},La())}function A4(){return gi(nm)}function k9(){return On().memoizedState}function C9(){return On().memoizedState}function GW(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=La();o=sc(h);var g=oc(l,o,h);g!==null&&(ga(g,l,h),Pf(g,l,h)),l={cache:e4()},o.payload=l;return}l=l.return}}function KW(o,l,h){var g=La();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},P1(o)?I9(l,h):(h=F2(o,l,h,g),h!==null&&(ga(h,o,g),R9(h,l,g)))}function O9(o,l,h){var g=La();zf(o,l,h,g)}function zf(o,l,h,g){var x={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(P1(o))I9(l,x);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var U=l.lastRenderedState,H=_(U,h);if(x.hasEagerState=!0,x.eagerState=H,Oa(H,U))return p1(o,l,x,0),Fr===null&&m1(),!1}catch{}finally{}if(h=F2(o,l,x,g),h!==null)return ga(h,o,g),R9(h,l,g),!0}return!1}function E4(o,l,h,g){if(g={lane:2,revertLane:iw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},P1(o)){if(l)throw Error(n(479))}else l=F2(o,h,g,2),l!==null&&ga(l,o,2)}function P1(o){var l=o.alternate;return o===Ft||l!==null&&l===Ft}function I9(o,l){md=j1=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function R9(o,l,h){if((h&4194048)!==0){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Oi(o,h)}}var $f={readContext:gi,use:O1,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};$f.useEffectEvent=vn;var M9={readContext:gi,use:O1,useCallback:function(o,l){return Xi().memoizedState=[o,l===void 0?null:l],o},useContext:gi,useEffect:y9,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,R1(4194308,4,w9.bind(null,l,o),h)},useLayoutEffect:function(o,l){return R1(4194308,4,o,l)},useInsertionEffect:function(o,l){R1(4,2,o,l)},useMemo:function(o,l){var h=Xi();l=l===void 0?null:l;var g=o();if(Mu){Qt(!0);try{o()}finally{Qt(!1)}}return h.memoizedState=[g,l],g},useReducer:function(o,l,h){var g=Xi();if(h!==void 0){var x=h(l);if(Mu){Qt(!0);try{h(l)}finally{Qt(!1)}}}else x=l;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=KW.bind(null,Ft,o),[g.memoizedState,o]},useRef:function(o){var l=Xi();return o={current:o},l.memoizedState=o},useState:function(o){o=b4(o);var l=o.queue,h=O9.bind(null,Ft,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:_4,useDeferredValue:function(o,l){var h=Xi();return S4(h,o,l)},useTransition:function(){var o=b4(!1);return o=E9.bind(null,Ft,o.queue,!0,!1),Xi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var g=Ft,x=Xi();if(cr){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Fr===null)throw Error(n(349));(nr&127)!==0||t9(g,l,h)}x.memoizedState=h;var _={value:h,getSnapshot:l};return x.queue=_,y9(n9.bind(null,g,_,o),[o]),g.flags|=2048,gd(9,{destroy:void 0},r9.bind(null,g,_,h,l),null),h},useId:function(){var o=Xi(),l=Fr.identifierPrefix;if(cr){var h=uo,g=co;h=(g&~(1<<32-Wt(g)-1)).toString(32)+h,l="_"+l+"R_"+h,h=k1++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=zW++,l="_"+l+"r_"+h.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:A4,useFormState:h9,useActionState:h9,useOptimistic:function(o){var l=Xi();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=E4.bind(null,Ft,!0,h),h.dispatch=l,[o,l]},useMemoCache:g4,useCacheRefresh:function(){return Xi().memoizedState=GW.bind(null,Ft)},useEffectEvent:function(o){var l=Xi(),h={impl:o};return l.memoizedState=h,function(){if((wr&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},N4={readContext:gi,use:O1,useCallback:S9,useContext:gi,useEffect:w4,useImperativeHandle:_9,useInsertionEffect:b9,useLayoutEffect:x9,useMemo:T9,useReducer:I1,useRef:g9,useState:function(){return I1(Wo)},useDebugValue:_4,useDeferredValue:function(o,l){var h=On();return A9(h,Mr.memoizedState,o,l)},useTransition:function(){var o=I1(Wo)[0],l=On().memoizedState;return[typeof o=="boolean"?o:Uf(o),l]},useSyncExternalStore:e9,useId:k9,useHostTransitionStatus:A4,useFormState:f9,useActionState:f9,useOptimistic:function(o,l){var h=On();return s9(h,Mr,o,l)},useMemoCache:g4,useCacheRefresh:C9};N4.useEffectEvent=v9;var P9={readContext:gi,use:O1,useCallback:S9,useContext:gi,useEffect:w4,useImperativeHandle:_9,useInsertionEffect:b9,useLayoutEffect:x9,useMemo:T9,useReducer:v4,useRef:g9,useState:function(){return v4(Wo)},useDebugValue:_4,useDeferredValue:function(o,l){var h=On();return Mr===null?S4(h,o,l):A9(h,Mr.memoizedState,o,l)},useTransition:function(){var o=v4(Wo)[0],l=On().memoizedState;return[typeof o=="boolean"?o:Uf(o),l]},useSyncExternalStore:e9,useId:k9,useHostTransitionStatus:A4,useFormState:p9,useActionState:p9,useOptimistic:function(o,l){var h=On();return Mr!==null?s9(h,Mr,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:g4,useCacheRefresh:C9};P9.useEffectEvent=v9;function j4(o,l,h,g){l=o.memoizedState,h=h(g,l),h=h==null?l:p({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var k4={enqueueSetState:function(o,l,h){o=o._reactInternals;var g=La(),x=sc(g);x.payload=l,h!=null&&(x.callback=h),l=oc(o,x,g),l!==null&&(ga(l,o,g),Pf(l,o,g))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var g=La(),x=sc(g);x.tag=1,x.payload=l,h!=null&&(x.callback=h),l=oc(o,x,g),l!==null&&(ga(l,o,g),Pf(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=La(),g=sc(h);g.tag=2,l!=null&&(g.callback=l),l=oc(o,g,h),l!==null&&(ga(l,o,h),Pf(l,o,h))}};function D9(o,l,h,g,x,_,U){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,U):l.prototype&&l.prototype.isPureReactComponent?!Nf(h,g)||!Nf(x,_):!0}function L9(o,l,h,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==o&&k4.enqueueReplaceState(l,l.state,null)}function Pu(o,l){var h=l;if("ref"in l){h={};for(var g in l)g!=="ref"&&(h[g]=l[g])}if(o=o.defaultProps){h===l&&(h=p({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function B9(o){f1(o)}function U9(o){console.error(o)}function z9(o){f1(o)}function D1(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function $9(o,l,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function C4(o,l,h){return h=sc(h),h.tag=3,h.payload={element:null},h.callback=function(){D1(o,l)},h}function V9(o){return o=sc(o),o.tag=3,o}function F9(o,l,h,g){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var _=g.value;o.payload=function(){return x(_)},o.callback=function(){$9(l,h,g)}}var U=h.stateNode;U!==null&&typeof U.componentDidCatch=="function"&&(o.callback=function(){$9(l,h,g),typeof x!="function"&&(fc===null?fc=new Set([this]):fc.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function WW(o,l,h,g,x){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=h.alternate,l!==null&&ld(l,h,x,!0),h=Ra.current,h!==null){switch(h.tag){case 31:case 13:return ls===null?W1():h.alternate===null&&bn===0&&(bn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,g===S1?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([g]):l.add(g),tw(o,g,x)),!1;case 22:return h.flags|=65536,g===S1?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([g]):h.add(g)),tw(o,g,x)),!1}throw Error(n(435,h.tag))}return tw(o,g,x),W1(),!1}if(cr)return l=Ra.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==X2&&(o=Error(n(422),{cause:g}),Cf(is(o,h)))):(g!==X2&&(l=Error(n(423),{cause:g}),Cf(is(l,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=is(g,h),x=C4(o.stateNode,g,x),s4(o,x),bn!==4&&(bn=2)),!1;var _=Error(n(520),{cause:g});if(_=is(_,h),Xf===null?Xf=[_]:Xf.push(_),bn!==4&&(bn=2),l===null)return!0;g=is(g,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=C4(h.stateNode,g,o),s4(h,o),!1;case 1:if(l=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fc===null||!fc.has(_))))return h.flags|=65536,x&=-x,h.lanes|=x,x=V9(x),F9(x,o,h,g),s4(h,x),!1}h=h.return}while(h!==null);return!1}var O4=Error(n(461)),zn=!1;function yi(o,l,h,g){l.child=o===null?KN(l,null,h,g):Ru(l,o.child,h,g)}function q9(o,l,h,g,x){h=h.render;var _=l.ref;if("ref"in g){var U={};for(var H in g)H!=="ref"&&(U[H]=g[H])}else U=g;return ku(l),g=h4(o,l,h,U,_,x),H=f4(),o!==null&&!zn?(m4(o,l,x),Xo(o,l,x)):(cr&&H&&K2(l),l.flags|=1,yi(o,l,g,x),l.child)}function H9(o,l,h,g,x){if(o===null){var _=h.type;return typeof _=="function"&&!q2(_)&&_.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=_,G9(o,l,_,g,x)):(o=y1(h.type,null,g,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!U4(o,x)){var U=_.memoizedProps;if(h=h.compare,h=h!==null?h:Nf,h(U,g)&&o.ref===l.ref)return Xo(o,l,x)}return l.flags|=1,o=Fo(_,g),o.ref=l.ref,o.return=l,l.child=o}function G9(o,l,h,g,x){if(o!==null){var _=o.memoizedProps;if(Nf(_,g)&&o.ref===l.ref)if(zn=!1,l.pendingProps=g=_,U4(o,x))(o.flags&131072)!==0&&(zn=!0);else return l.lanes=o.lanes,Xo(o,l,x)}return I4(o,l,h,g,x)}function K9(o,l,h,g){var x=g.children,_=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,o!==null){for(g=l.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~_}else g=0,l.child=null;return W9(o,l,_,h,g)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&w1(l,_!==null?_.cachePool:null),_!==null?QN(l,_):l4(),YN(l);else return g=l.lanes=536870912,W9(o,l,_!==null?_.baseLanes|h:h,h,g)}else _!==null?(w1(l,_.cachePool),QN(l,_),cc(),l.memoizedState=null):(o!==null&&w1(l,null),l4(),cc());return yi(o,l,x,h),l.child}function Vf(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function W9(o,l,h,g,x){var _=r4();return _=_===null?null:{parent:Bn._currentValue,pool:_},l.memoizedState={baseLanes:h,cachePool:_},o!==null&&w1(l,null),l4(),YN(l),o!==null&&ld(o,l,g,!0),l.childLanes=x,null}function L1(o,l){return l=U1({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function X9(o,l,h){return Ru(l,o.child,null,h),o=L1(l,l.pendingProps),o.flags|=2,Ma(l),l.memoizedState=null,o}function XW(o,l,h){var g=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(cr){if(g.mode==="hidden")return o=L1(l,g),l.lanes=536870912,Vf(null,o);if(u4(l),(o=en)?(o=ok(o,os),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:tc!==null?{id:co,overflow:uo}:null,retryLane:536870912,hydrationErrors:null},h=IN(o),h.return=l,l.child=h,pi=l,en=null)):o=null,o===null)throw nc(l);return l.lanes=536870912,null}return L1(l,g)}var _=o.memoizedState;if(_!==null){var U=_.dehydrated;if(u4(l),x)if(l.flags&256)l.flags&=-257,l=X9(o,l,h);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(zn||ld(o,l,h,!1),x=(h&o.childLanes)!==0,zn||x){if(g=Fr,g!==null&&(U=Gi(g,h),U!==0&&U!==_.retryLane))throw _.retryLane=U,Au(o,U),ga(g,o,U),O4;W1(),l=X9(o,l,h)}else o=_.treeContext,en=cs(U.nextSibling),pi=l,cr=!0,rc=null,os=!1,o!==null&&PN(l,o),l=L1(l,g),l.flags|=4096;return l}return o=Fo(o.child,{mode:g.mode,children:g.children}),o.ref=l.ref,l.child=o,o.return=l,o}function B1(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function I4(o,l,h,g,x){return ku(l),h=h4(o,l,h,g,void 0,x),g=f4(),o!==null&&!zn?(m4(o,l,x),Xo(o,l,x)):(cr&&g&&K2(l),l.flags|=1,yi(o,l,h,x),l.child)}function Q9(o,l,h,g,x,_){return ku(l),l.updateQueue=null,h=JN(l,g,h,x),ZN(o),g=f4(),o!==null&&!zn?(m4(o,l,_),Xo(o,l,_)):(cr&&g&&K2(l),l.flags|=1,yi(o,l,h,_),l.child)}function Y9(o,l,h,g,x){if(ku(l),l.stateNode===null){var _=id,U=h.contextType;typeof U=="object"&&U!==null&&(_=gi(U)),_=new h(g,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=k4,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=g,_.state=l.memoizedState,_.refs={},i4(l),U=h.contextType,_.context=typeof U=="object"&&U!==null?gi(U):id,_.state=l.memoizedState,U=h.getDerivedStateFromProps,typeof U=="function"&&(j4(l,h,U,g),_.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(U=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),U!==_.state&&k4.enqueueReplaceState(_,_.state,null),Lf(l,g,_,x),Df(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(o===null){_=l.stateNode;var H=l.memoizedProps,se=Pu(h,H);_.props=se;var Se=_.context,Re=h.contextType;U=id,typeof Re=="object"&&Re!==null&&(U=gi(Re));var Be=h.getDerivedStateFromProps;Re=typeof Be=="function"||typeof _.getSnapshotBeforeUpdate=="function",H=l.pendingProps!==H,Re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H||Se!==U)&&L9(l,_,g,U),ac=!1;var Ae=l.memoizedState;_.state=Ae,Lf(l,g,_,x),Df(),Se=l.memoizedState,H||Ae!==Se||ac?(typeof Be=="function"&&(j4(l,h,Be,g),Se=l.memoizedState),(se=ac||D9(l,h,se,g,Ae,Se,U))?(Re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=Se),_.props=g,_.state=Se,_.context=U,g=se):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{_=l.stateNode,a4(o,l),U=l.memoizedProps,Re=Pu(h,U),_.props=Re,Be=l.pendingProps,Ae=_.context,Se=h.contextType,se=id,typeof Se=="object"&&Se!==null&&(se=gi(Se)),H=h.getDerivedStateFromProps,(Se=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(U!==Be||Ae!==se)&&L9(l,_,g,se),ac=!1,Ae=l.memoizedState,_.state=Ae,Lf(l,g,_,x),Df();var je=l.memoizedState;U!==Be||Ae!==je||ac||o!==null&&o.dependencies!==null&&b1(o.dependencies)?(typeof H=="function"&&(j4(l,h,H,g),je=l.memoizedState),(Re=ac||D9(l,h,Re,g,Ae,je,se)||o!==null&&o.dependencies!==null&&b1(o.dependencies))?(Se||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,je,se),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,je,se)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=je),_.props=g,_.state=je,_.context=se,g=Re):(typeof _.componentDidUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&Ae===o.memoizedState||(l.flags|=1024),g=!1)}return _=g,B1(o,l),g=(l.flags&128)!==0,_||g?(_=l.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&g?(l.child=Ru(l,o.child,null,x),l.child=Ru(l,null,h,x)):yi(o,l,h,x),l.memoizedState=_.state,o=l.child):o=Xo(o,l,x),o}function Z9(o,l,h,g){return Nu(),l.flags|=256,yi(o,l,h,g),l.child}var R4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M4(o){return{baseLanes:o,cachePool:$N()}}function P4(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Da),o}function J9(o,l,h){var g=l.pendingProps,x=!1,_=(l.flags&128)!==0,U;if((U=_)||(U=o!==null&&o.memoizedState===null?!1:(Cn.current&2)!==0),U&&(x=!0,l.flags&=-129),U=(l.flags&32)!==0,l.flags&=-33,o===null){if(cr){if(x?lc(l):cc(),(o=en)?(o=ok(o,os),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:tc!==null?{id:co,overflow:uo}:null,retryLane:536870912,hydrationErrors:null},h=IN(o),h.return=l,l.child=h,pi=l,en=null)):o=null,o===null)throw nc(l);return yw(o)?l.lanes=32:l.lanes=536870912,null}var H=g.children;return g=g.fallback,x?(cc(),x=l.mode,H=U1({mode:"hidden",children:H},x),g=Eu(g,x,h,null),H.return=l,g.return=l,H.sibling=g,l.child=H,g=l.child,g.memoizedState=M4(h),g.childLanes=P4(o,U,h),l.memoizedState=R4,Vf(null,g)):(lc(l),D4(l,H))}var se=o.memoizedState;if(se!==null&&(H=se.dehydrated,H!==null)){if(_)l.flags&256?(lc(l),l.flags&=-257,l=L4(o,l,h)):l.memoizedState!==null?(cc(),l.child=o.child,l.flags|=128,l=null):(cc(),H=g.fallback,x=l.mode,g=U1({mode:"visible",children:g.children},x),H=Eu(H,x,h,null),H.flags|=2,g.return=l,H.return=l,g.sibling=H,l.child=g,Ru(l,o.child,null,h),g=l.child,g.memoizedState=M4(h),g.childLanes=P4(o,U,h),l.memoizedState=R4,l=Vf(null,g));else if(lc(l),yw(H)){if(U=H.nextSibling&&H.nextSibling.dataset,U)var Se=U.dgst;U=Se,g=Error(n(419)),g.stack="",g.digest=U,Cf({value:g,source:null,stack:null}),l=L4(o,l,h)}else if(zn||ld(o,l,h,!1),U=(h&o.childLanes)!==0,zn||U){if(U=Fr,U!==null&&(g=Gi(U,h),g!==0&&g!==se.retryLane))throw se.retryLane=g,Au(o,g),ga(U,o,g),O4;gw(H)||W1(),l=L4(o,l,h)}else gw(H)?(l.flags|=192,l.child=o.child,l=null):(o=se.treeContext,en=cs(H.nextSibling),pi=l,cr=!0,rc=null,os=!1,o!==null&&PN(l,o),l=D4(l,g.children),l.flags|=4096);return l}return x?(cc(),H=g.fallback,x=l.mode,se=o.child,Se=se.sibling,g=Fo(se,{mode:"hidden",children:g.children}),g.subtreeFlags=se.subtreeFlags&65011712,Se!==null?H=Fo(Se,H):(H=Eu(H,x,h,null),H.flags|=2),H.return=l,g.return=l,g.sibling=H,l.child=g,Vf(null,g),g=l.child,H=o.child.memoizedState,H===null?H=M4(h):(x=H.cachePool,x!==null?(se=Bn._currentValue,x=x.parent!==se?{parent:se,pool:se}:x):x=$N(),H={baseLanes:H.baseLanes|h,cachePool:x}),g.memoizedState=H,g.childLanes=P4(o,U,h),l.memoizedState=R4,Vf(o.child,g)):(lc(l),h=o.child,o=h.sibling,h=Fo(h,{mode:"visible",children:g.children}),h.return=l,h.sibling=null,o!==null&&(U=l.deletions,U===null?(l.deletions=[o],l.flags|=16):U.push(o)),l.child=h,l.memoizedState=null,h)}function D4(o,l){return l=U1({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function U1(o,l){return o=Ia(22,o,null,l),o.lanes=0,o}function L4(o,l,h){return Ru(l,o.child,null,h),o=D4(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function ej(o,l,h){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),Z2(o.return,l,h)}function B4(o,l,h,g,x,_){var U=o.memoizedState;U===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:x,treeForkCount:_}:(U.isBackwards=l,U.rendering=null,U.renderingStartTime=0,U.last=g,U.tail=h,U.tailMode=x,U.treeForkCount=_)}function tj(o,l,h){var g=l.pendingProps,x=g.revealOrder,_=g.tail;g=g.children;var U=Cn.current,H=(U&2)!==0;if(H?(U=U&1|2,l.flags|=128):U&=1,de(Cn,U),yi(o,l,g,h),g=cr?kf:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ej(o,h,l);else if(o.tag===19)ej(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&N1(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),B4(l,!1,x,h,_,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&N1(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}B4(l,!0,h,null,_,g);break;case"together":B4(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Xo(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),hc|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(ld(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=Fo(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Fo(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function U4(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&b1(o)))}function QW(o,l,h){switch(l.tag){case 3:Je(l,l.stateNode.containerInfo),ic(l,Bn,o.memoizedState.cache),Nu();break;case 27:case 5:ce(l);break;case 4:Je(l,l.stateNode.containerInfo);break;case 10:ic(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,u4(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(lc(l),l.flags|=128,null):(h&l.child.childLanes)!==0?J9(o,l,h):(lc(l),o=Xo(o,l,h),o!==null?o.sibling:null);lc(l);break;case 19:var x=(o.flags&128)!==0;if(g=(h&l.childLanes)!==0,g||(ld(o,l,h,!1),g=(h&l.childLanes)!==0),x){if(g)return tj(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),de(Cn,Cn.current),g)break;return null;case 22:return l.lanes=0,K9(o,l,h,l.pendingProps);case 24:ic(l,Bn,o.memoizedState.cache)}return Xo(o,l,h)}function rj(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)zn=!0;else{if(!U4(o,h)&&(l.flags&128)===0)return zn=!1,QW(o,l,h);zn=(o.flags&131072)!==0}else zn=!1,cr&&(l.flags&1048576)!==0&&MN(l,kf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(o=Ou(l.elementType),l.type=o,typeof o=="function")q2(o)?(g=Pu(o,g),l.tag=1,l=Y9(null,l,o,g,h)):(l.tag=0,l=I4(null,l,o,g,h));else{if(o!=null){var x=o.$$typeof;if(x===z){l.tag=11,l=q9(null,l,o,g,h);break e}else if(x===E){l.tag=14,l=H9(null,l,o,g,h);break e}}throw l=Q(o)||o,Error(n(306,l,""))}}return l;case 0:return I4(o,l,l.type,l.pendingProps,h);case 1:return g=l.type,x=Pu(g,l.pendingProps),Y9(o,l,g,x,h);case 3:e:{if(Je(l,l.stateNode.containerInfo),o===null)throw Error(n(387));g=l.pendingProps;var _=l.memoizedState;x=_.element,a4(o,l),Lf(l,g,null,h);var U=l.memoizedState;if(g=U.cache,ic(l,Bn,g),g!==_.cache&&J2(l,[Bn],h,!0),Df(),g=U.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:U.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=Z9(o,l,g,h);break e}else if(g!==x){x=is(Error(n(424)),l),Cf(x),l=Z9(o,l,g,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(en=cs(o.firstChild),pi=l,cr=!0,rc=null,os=!0,h=KN(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Nu(),g===x){l=Xo(o,l,h);break e}yi(o,l,g,h)}l=l.child}return l;case 26:return B1(o,l),o===null?(h=fk(l.type,null,l.pendingProps,null))?l.memoizedState=h:cr||(h=l.type,o=l.pendingProps,g=ty(pe.current).createElement(h),g[Er]=l,g[Gr]=o,vi(g,h,o),Yt(g),l.stateNode=g):l.memoizedState=fk(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return ce(l),o===null&&cr&&(g=l.stateNode=uk(l.type,l.pendingProps,pe.current),pi=l,os=!0,x=en,yc(l.type)?(vw=x,en=cs(g.firstChild)):en=x),yi(o,l,l.pendingProps.children,h),B1(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&cr&&((x=g=en)&&(g=EX(g,l.type,l.pendingProps,os),g!==null?(l.stateNode=g,pi=l,en=cs(g.firstChild),os=!1,x=!0):x=!1),x||nc(l)),ce(l),x=l.type,_=l.pendingProps,U=o!==null?o.memoizedProps:null,g=_.children,fw(x,_)?g=null:U!==null&&fw(x,U)&&(l.flags|=32),l.memoizedState!==null&&(x=h4(o,l,$W,null,null,h),nm._currentValue=x),B1(o,l),yi(o,l,g,h),l.child;case 6:return o===null&&cr&&((o=h=en)&&(h=NX(h,l.pendingProps,os),h!==null?(l.stateNode=h,pi=l,en=null,o=!0):o=!1),o||nc(l)),null;case 13:return J9(o,l,h);case 4:return Je(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Ru(l,null,g,h):yi(o,l,g,h),l.child;case 11:return q9(o,l,l.type,l.pendingProps,h);case 7:return yi(o,l,l.pendingProps,h),l.child;case 8:return yi(o,l,l.pendingProps.children,h),l.child;case 12:return yi(o,l,l.pendingProps.children,h),l.child;case 10:return g=l.pendingProps,ic(l,l.type,g.value),yi(o,l,g.children,h),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,ku(l),x=gi(x),g=g(x),l.flags|=1,yi(o,l,g,h),l.child;case 14:return H9(o,l,l.type,l.pendingProps,h);case 15:return G9(o,l,l.type,l.pendingProps,h);case 19:return tj(o,l,h);case 31:return XW(o,l,h);case 22:return K9(o,l,h,l.pendingProps);case 24:return ku(l),g=gi(Bn),o===null?(x=r4(),x===null&&(x=Fr,_=e4(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=h),x=_),l.memoizedState={parent:g,cache:x},i4(l),ic(l,Bn,x)):((o.lanes&h)!==0&&(a4(o,l),Lf(l,null,null,h),Df()),x=o.memoizedState,_=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),ic(l,Bn,g)):(g=_.cache,ic(l,Bn,g),g!==x.cache&&J2(l,[Bn],h,!0))),yi(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function Qo(o){o.flags|=4}function z4(o,l,h,g,x){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(kj())o.flags|=8192;else throw Iu=S1,n4}else o.flags&=-16777217}function nj(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!vk(l))if(kj())o.flags|=8192;else throw Iu=S1,n4}function z1(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?eo():536870912,o.lanes|=l,xd|=l)}function Ff(o,l){if(!cr)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function tn(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=h,l}function YW(o,l,h){var g=l.pendingProps;switch(W2(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(l),null;case 1:return tn(l),null;case 3:return h=l.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Go(Bn),Ne(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(od(l)?Qo(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Q2())),tn(l),null;case 26:var x=l.type,_=l.memoizedState;return o===null?(Qo(l),_!==null?(tn(l),nj(l,_)):(tn(l),z4(l,x,null,g,h))):_?_!==o.memoizedState?(Qo(l),tn(l),nj(l,_)):(tn(l),l.flags&=-16777217):(o=o.memoizedProps,o!==g&&Qo(l),tn(l),z4(l,x,o,g,h)),null;case 27:if(Ce(l),h=pe.current,x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Qo(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return tn(l),null}o=J.current,od(l)?DN(l):(o=uk(x,g,h),l.stateNode=o,Qo(l))}return tn(l),null;case 5:if(Ce(l),x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&Qo(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return tn(l),null}if(_=J.current,od(l))DN(l);else{var U=ty(pe.current);switch(_){case 1:_=U.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=U.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=U.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=U.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=U.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?U.createElement("select",{is:g.is}):U.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?U.createElement(x,{is:g.is}):U.createElement(x)}}_[Er]=l,_[Gr]=g;e:for(U=l.child;U!==null;){if(U.tag===5||U.tag===6)_.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===l)break e;for(;U.sibling===null;){if(U.return===null||U.return===l)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}l.stateNode=_;e:switch(vi(_,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&Qo(l)}}return tn(l),z4(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,h),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==g&&Qo(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(o=pe.current,od(l)){if(o=l.stateNode,h=l.memoizedProps,g=null,x=pi,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[Er]=l,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||Jj(o.nodeValue,h)),o||nc(l,!0)}else o=ty(o).createTextNode(g),o[Er]=l,l.stateNode=o}return tn(l),null;case 31:if(h=l.memoizedState,o===null||o.memoizedState!==null){if(g=od(l),h!==null){if(o===null){if(!g)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[Er]=l}else Nu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),o=!1}else h=Q2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return l.flags&256?(Ma(l),l):(Ma(l),null);if((l.flags&128)!==0)throw Error(n(558))}return tn(l),null;case 13:if(g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=od(l),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Er]=l}else Nu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;tn(l),x=!1}else x=Q2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Ma(l),l):(Ma(l),null)}return Ma(l),(l.flags&128)!==0?(l.lanes=h,l):(h=g!==null,o=o!==null&&o.memoizedState!==null,h&&(g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==x&&(g.flags|=2048)),h!==o&&h&&(l.child.flags|=8192),z1(l,l.updateQueue),tn(l),null);case 4:return Ne(),o===null&&lw(l.stateNode.containerInfo),tn(l),null;case 10:return Go(l.type),tn(l),null;case 19:if(ne(Cn),g=l.memoizedState,g===null)return tn(l),null;if(x=(l.flags&128)!==0,_=g.rendering,_===null)if(x)Ff(g,!1);else{if(bn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=N1(o),_!==null){for(l.flags|=128,Ff(g,!1),o=_.updateQueue,l.updateQueue=o,z1(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)ON(h,o),h=h.sibling;return de(Cn,Cn.current&1|2),cr&&qo(l,g.treeForkCount),l.child}o=o.sibling}g.tail!==null&&De()>H1&&(l.flags|=128,x=!0,Ff(g,!1),l.lanes=4194304)}else{if(!x)if(o=N1(_),o!==null){if(l.flags|=128,x=!0,o=o.updateQueue,l.updateQueue=o,z1(l,o),Ff(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!cr)return tn(l),null}else 2*De()-g.renderingStartTime>H1&&h!==536870912&&(l.flags|=128,x=!0,Ff(g,!1),l.lanes=4194304);g.isBackwards?(_.sibling=l.child,l.child=_):(o=g.last,o!==null?o.sibling=_:l.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=De(),o.sibling=null,h=Cn.current,de(Cn,x?h&1|2:h&1),cr&&qo(l,g.treeForkCount),o):(tn(l),null);case 22:case 23:return Ma(l),c4(),g=l.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(h&536870912)!==0&&(l.flags&128)===0&&(tn(l),l.subtreeFlags&6&&(l.flags|=8192)):tn(l),h=l.updateQueue,h!==null&&z1(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048),o!==null&&ne(Cu),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Go(Bn),tn(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function ZW(o,l){switch(W2(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Go(Bn),Ne(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return Ce(l),null;case 31:if(l.memoizedState!==null){if(Ma(l),l.alternate===null)throw Error(n(340));Nu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(Ma(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Nu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return ne(Cn),null;case 4:return Ne(),null;case 10:return Go(l.type),null;case 22:case 23:return Ma(l),c4(),o!==null&&ne(Cu),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Go(Bn),null;case 25:return null;default:return null}}function ij(o,l){switch(W2(l),l.tag){case 3:Go(Bn),Ne();break;case 26:case 27:case 5:Ce(l);break;case 4:Ne();break;case 31:l.memoizedState!==null&&Ma(l);break;case 13:Ma(l);break;case 19:ne(Cn);break;case 10:Go(l.type);break;case 22:case 23:Ma(l),c4(),o!==null&&ne(Cu);break;case 24:Go(Bn)}}function qf(o,l){try{var h=l.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var x=g.next;h=x;do{if((h.tag&o)===o){g=void 0;var _=h.create,U=h.inst;g=_(),U.destroy=g}h=h.next}while(h!==x)}}catch(H){kr(l,l.return,H)}}function uc(o,l,h){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var _=x.next;g=_;do{if((g.tag&o)===o){var U=g.inst,H=U.destroy;if(H!==void 0){U.destroy=void 0,x=l;var se=h,Se=H;try{Se()}catch(Re){kr(x,se,Re)}}}g=g.next}while(g!==_)}}catch(Re){kr(l,l.return,Re)}}function aj(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{XN(l,h)}catch(g){kr(o,o.return,g)}}}function sj(o,l,h){h.props=Pu(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){kr(o,l,g)}}function Hf(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(x){kr(o,l,x)}}function ho(o,l){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(x){kr(o,l,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){kr(o,l,x)}else h.current=null}function oj(o){var l=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(x){kr(o,o.return,x)}}function $4(o,l,h){try{var g=o.stateNode;xX(g,o.type,h,l),g[Gr]=l}catch(x){kr(o,o.return,x)}}function lj(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&yc(o.type)||o.tag===4}function V4(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&yc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function F4(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=ni));else if(g!==4&&(g===27&&yc(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(F4(o,l,h),o=o.sibling;o!==null;)F4(o,l,h),o=o.sibling}function $1(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(g!==4&&(g===27&&yc(o.type)&&(h=o.stateNode),o=o.child,o!==null))for($1(o,l,h),o=o.sibling;o!==null;)$1(o,l,h),o=o.sibling}function cj(o){var l=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);vi(l,g,h),l[Er]=o,l[Gr]=h}catch(_){kr(o,o.return,_)}}var Yo=!1,$n=!1,q4=!1,uj=typeof WeakSet=="function"?WeakSet:Set,si=null;function JW(o,l){if(o=o.containerInfo,dw=ly,o=_N(o),L2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var x=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var U=0,H=-1,se=-1,Se=0,Re=0,Be=o,Ae=null;t:for(;;){for(var je;Be!==h||x!==0&&Be.nodeType!==3||(H=U+x),Be!==_||g!==0&&Be.nodeType!==3||(se=U+g),Be.nodeType===3&&(U+=Be.nodeValue.length),(je=Be.firstChild)!==null;)Ae=Be,Be=je;for(;;){if(Be===o)break t;if(Ae===h&&++Se===x&&(H=U),Ae===_&&++Re===g&&(se=U),(je=Be.nextSibling)!==null)break;Be=Ae,Ae=Be.parentNode}Be=je}h=H===-1||se===-1?null:{start:H,end:se}}else h=null}h=h||{start:0,end:0}}else h=null;for(hw={focusedElem:o,selectionRange:h},ly=!1,si=l;si!==null;)if(l=si,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,si=o;else for(;si!==null;){switch(l=si,_=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=l,x=_.memoizedProps,_=_.memoizedState,g=h.stateNode;try{var bt=Pu(h.type,x);o=g.getSnapshotBeforeUpdate(bt,_),g.__reactInternalSnapshotBeforeUpdate=o}catch(Ot){kr(h,h.return,Ot)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)pw(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":pw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,si=o;break}si=l.return}}function dj(o,l,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:Jo(o,h),g&4&&qf(5,h);break;case 1:if(Jo(o,h),g&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(U){kr(h,h.return,U)}else{var x=Pu(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(x,l,o.__reactInternalSnapshotBeforeUpdate)}catch(U){kr(h,h.return,U)}}g&64&&aj(h),g&512&&Hf(h,h.return);break;case 3:if(Jo(o,h),g&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{XN(o,l)}catch(U){kr(h,h.return,U)}}break;case 27:l===null&&g&4&&cj(h);case 26:case 5:Jo(o,h),l===null&&g&4&&oj(h),g&512&&Hf(h,h.return);break;case 12:Jo(o,h);break;case 31:Jo(o,h),g&4&&mj(o,h);break;case 13:Jo(o,h),g&4&&pj(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=lX.bind(null,h),jX(o,h))));break;case 22:if(g=h.memoizedState!==null||Yo,!g){l=l!==null&&l.memoizedState!==null||$n,x=Yo;var _=$n;Yo=g,($n=l)&&!_?el(o,h,(h.subtreeFlags&8772)!==0):Jo(o,h),Yo=x,$n=_}break;case 30:break;default:Jo(o,h)}}function hj(o){var l=o.alternate;l!==null&&(o.alternate=null,hj(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&pt(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var an=null,ha=!1;function Zo(o,l,h){for(h=h.child;h!==null;)fj(o,l,h),h=h.sibling}function fj(o,l,h){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(jn,h)}catch{}switch(h.tag){case 26:$n||ho(h,l),Zo(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:$n||ho(h,l);var g=an,x=ha;yc(h.type)&&(an=h.stateNode,ha=!1),Zo(o,l,h),em(h.stateNode),an=g,ha=x;break;case 5:$n||ho(h,l);case 6:if(g=an,x=ha,an=null,Zo(o,l,h),an=g,ha=x,an!==null)if(ha)try{(an.nodeType===9?an.body:an.nodeName==="HTML"?an.ownerDocument.body:an).removeChild(h.stateNode)}catch(_){kr(h,l,_)}else try{an.removeChild(h.stateNode)}catch(_){kr(h,l,_)}break;case 18:an!==null&&(ha?(o=an,ak(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),jd(o)):ak(an,h.stateNode));break;case 4:g=an,x=ha,an=h.stateNode.containerInfo,ha=!0,Zo(o,l,h),an=g,ha=x;break;case 0:case 11:case 14:case 15:uc(2,h,l),$n||uc(4,h,l),Zo(o,l,h);break;case 1:$n||(ho(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"&&sj(h,l,g)),Zo(o,l,h);break;case 21:Zo(o,l,h);break;case 22:$n=(g=$n)||h.memoizedState!==null,Zo(o,l,h),$n=g;break;default:Zo(o,l,h)}}function mj(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{jd(o)}catch(h){kr(l,l.return,h)}}}function pj(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{jd(o)}catch(h){kr(l,l.return,h)}}function eX(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new uj),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new uj),l;default:throw Error(n(435,o.tag))}}function V1(o,l){var h=eX(o);l.forEach(function(g){if(!h.has(g)){h.add(g);var x=cX.bind(null,o,g);g.then(x,x)}})}function fa(o,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var x=h[g],_=o,U=l,H=U;e:for(;H!==null;){switch(H.tag){case 27:if(yc(H.type)){an=H.stateNode,ha=!1;break e}break;case 5:an=H.stateNode,ha=!1;break e;case 3:case 4:an=H.stateNode.containerInfo,ha=!0;break e}H=H.return}if(an===null)throw Error(n(160));fj(_,U,x),an=null,ha=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)gj(l,o),l=l.sibling}var Ps=null;function gj(o,l){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:fa(l,o),ma(o),g&4&&(uc(3,o,o.return),qf(3,o),uc(5,o,o.return));break;case 1:fa(l,o),ma(o),g&512&&($n||h===null||ho(h,h.return)),g&64&&Yo&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var x=Ps;if(fa(l,o),ma(o),g&512&&($n||h===null||ho(h,h.return)),g&4){var _=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":_=x.getElementsByTagName("title")[0],(!_||_[la]||_[Er]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(g),x.head.insertBefore(_,x.querySelector("head > title"))),vi(_,g,h),_[Er]=o,Yt(_),g=_;break e;case"link":var U=gk("link","href",x).get(g+(h.href||""));if(U){for(var H=0;H<U.length;H++)if(_=U[H],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){U.splice(H,1);break t}}_=x.createElement(g),vi(_,g,h),x.head.appendChild(_);break;case"meta":if(U=gk("meta","content",x).get(g+(h.content||""))){for(H=0;H<U.length;H++)if(_=U[H],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){U.splice(H,1);break t}}_=x.createElement(g),vi(_,g,h),x.head.appendChild(_);break;default:throw Error(n(468,g))}_[Er]=o,Yt(_),g=_}o.stateNode=g}else yk(x,o.type,o.stateNode);else o.stateNode=pk(x,g,o.memoizedProps);else _!==g?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,g===null?yk(x,o.type,o.stateNode):pk(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&$4(o,o.memoizedProps,h.memoizedProps)}break;case 27:fa(l,o),ma(o),g&512&&($n||h===null||ho(h,h.return)),h!==null&&g&4&&$4(o,o.memoizedProps,h.memoizedProps);break;case 5:if(fa(l,o),ma(o),g&512&&($n||h===null||ho(h,h.return)),o.flags&32){x=o.stateNode;try{rs(x,"")}catch(bt){kr(o,o.return,bt)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,$4(o,x,h!==null?h.memoizedProps:x)),g&1024&&(q4=!0);break;case 6:if(fa(l,o),ma(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(bt){kr(o,o.return,bt)}}break;case 3:if(iy=null,x=Ps,Ps=ry(l.containerInfo),fa(l,o),Ps=x,ma(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{jd(l.containerInfo)}catch(bt){kr(o,o.return,bt)}q4&&(q4=!1,yj(o));break;case 4:g=Ps,Ps=ry(o.stateNode.containerInfo),fa(l,o),ma(o),Ps=g;break;case 12:fa(l,o),ma(o);break;case 31:fa(l,o),ma(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,V1(o,g)));break;case 13:fa(l,o),ma(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(q1=De()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,V1(o,g)));break;case 22:x=o.memoizedState!==null;var se=h!==null&&h.memoizedState!==null,Se=Yo,Re=$n;if(Yo=Se||x,$n=Re||se,fa(l,o),$n=Re,Yo=Se,ma(o),g&8192)e:for(l=o.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(h===null||se||Yo||$n||Du(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){se=h=l;try{if(_=se.stateNode,x)U=_.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none";else{H=se.stateNode;var Be=se.memoizedProps.style,Ae=Be!=null&&Be.hasOwnProperty("display")?Be.display:null;H.style.display=Ae==null||typeof Ae=="boolean"?"":(""+Ae).trim()}}catch(bt){kr(se,se.return,bt)}}}else if(l.tag===6){if(h===null){se=l;try{se.stateNode.nodeValue=x?"":se.memoizedProps}catch(bt){kr(se,se.return,bt)}}}else if(l.tag===18){if(h===null){se=l;try{var je=se.stateNode;x?sk(je,!0):sk(se.stateNode,!1)}catch(bt){kr(se,se.return,bt)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,V1(o,h))));break;case 19:fa(l,o),ma(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,V1(o,g)));break;case 30:break;case 21:break;default:fa(l,o),ma(o)}}function ma(o){var l=o.flags;if(l&2){try{for(var h,g=o.return;g!==null;){if(lj(g)){h=g;break}g=g.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var x=h.stateNode,_=V4(o);$1(o,_,x);break;case 5:var U=h.stateNode;h.flags&32&&(rs(U,""),h.flags&=-33);var H=V4(o);$1(o,H,U);break;case 3:case 4:var se=h.stateNode.containerInfo,Se=V4(o);F4(o,Se,se);break;default:throw Error(n(161))}}catch(Re){kr(o,o.return,Re)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function yj(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;yj(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Jo(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)dj(o,l.alternate,l),l=l.sibling}function Du(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:uc(4,l,l.return),Du(l);break;case 1:ho(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&sj(l,l.return,h),Du(l);break;case 27:em(l.stateNode);case 26:case 5:ho(l,l.return),Du(l);break;case 22:l.memoizedState===null&&Du(l);break;case 30:Du(l);break;default:Du(l)}o=o.sibling}}function el(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=o,_=l,U=_.flags;switch(_.tag){case 0:case 11:case 15:el(x,_,h),qf(4,_);break;case 1:if(el(x,_,h),g=_,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Se){kr(g,g.return,Se)}if(g=_,x=g.updateQueue,x!==null){var H=g.stateNode;try{var se=x.shared.hiddenCallbacks;if(se!==null)for(x.shared.hiddenCallbacks=null,x=0;x<se.length;x++)WN(se[x],H)}catch(Se){kr(g,g.return,Se)}}h&&U&64&&aj(_),Hf(_,_.return);break;case 27:cj(_);case 26:case 5:el(x,_,h),h&&g===null&&U&4&&oj(_),Hf(_,_.return);break;case 12:el(x,_,h);break;case 31:el(x,_,h),h&&U&4&&mj(x,_);break;case 13:el(x,_,h),h&&U&4&&pj(x,_);break;case 22:_.memoizedState===null&&el(x,_,h),Hf(_,_.return);break;case 30:break;default:el(x,_,h)}l=l.sibling}}function H4(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Of(h))}function G4(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Of(o))}function Ds(o,l,h,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)vj(o,l,h,g),l=l.sibling}function vj(o,l,h,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Ds(o,l,h,g),x&2048&&qf(9,l);break;case 1:Ds(o,l,h,g);break;case 3:Ds(o,l,h,g),x&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Of(o)));break;case 12:if(x&2048){Ds(o,l,h,g),o=l.stateNode;try{var _=l.memoizedProps,U=_.id,H=_.onPostCommit;typeof H=="function"&&H(U,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(se){kr(l,l.return,se)}}else Ds(o,l,h,g);break;case 31:Ds(o,l,h,g);break;case 13:Ds(o,l,h,g);break;case 23:break;case 22:_=l.stateNode,U=l.alternate,l.memoizedState!==null?_._visibility&2?Ds(o,l,h,g):Gf(o,l):_._visibility&2?Ds(o,l,h,g):(_._visibility|=2,yd(o,l,h,g,(l.subtreeFlags&10256)!==0||!1)),x&2048&&H4(U,l);break;case 24:Ds(o,l,h,g),x&2048&&G4(l.alternate,l);break;default:Ds(o,l,h,g)}}function yd(o,l,h,g,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=o,U=l,H=h,se=g,Se=U.flags;switch(U.tag){case 0:case 11:case 15:yd(_,U,H,se,x),qf(8,U);break;case 23:break;case 22:var Re=U.stateNode;U.memoizedState!==null?Re._visibility&2?yd(_,U,H,se,x):Gf(_,U):(Re._visibility|=2,yd(_,U,H,se,x)),x&&Se&2048&&H4(U.alternate,U);break;case 24:yd(_,U,H,se,x),x&&Se&2048&&G4(U.alternate,U);break;default:yd(_,U,H,se,x)}l=l.sibling}}function Gf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,g=l,x=g.flags;switch(g.tag){case 22:Gf(h,g),x&2048&&H4(g.alternate,g);break;case 24:Gf(h,g),x&2048&&G4(g.alternate,g);break;default:Gf(h,g)}l=l.sibling}}var Kf=8192;function vd(o,l,h){if(o.subtreeFlags&Kf)for(o=o.child;o!==null;)bj(o,l,h),o=o.sibling}function bj(o,l,h){switch(o.tag){case 26:vd(o,l,h),o.flags&Kf&&o.memoizedState!==null&&zX(h,Ps,o.memoizedState,o.memoizedProps);break;case 5:vd(o,l,h);break;case 3:case 4:var g=Ps;Ps=ry(o.stateNode.containerInfo),vd(o,l,h),Ps=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=Kf,Kf=16777216,vd(o,l,h),Kf=g):vd(o,l,h));break;default:vd(o,l,h)}}function xj(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Wf(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];si=g,_j(g,o)}xj(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)wj(o),o=o.sibling}function wj(o){switch(o.tag){case 0:case 11:case 15:Wf(o),o.flags&2048&&uc(9,o,o.return);break;case 3:Wf(o);break;case 12:Wf(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,F1(o)):Wf(o);break;default:Wf(o)}}function F1(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];si=g,_j(g,o)}xj(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:uc(8,l,l.return),F1(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,F1(l));break;default:F1(l)}o=o.sibling}}function _j(o,l){for(;si!==null;){var h=si;switch(h.tag){case 0:case 11:case 15:uc(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Of(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,si=g;else e:for(h=o;si!==null;){g=si;var x=g.sibling,_=g.return;if(hj(g),g===h){si=null;break e}if(x!==null){x.return=_,si=x;break e}si=_}}}var tX={getCacheForType:function(o){var l=gi(Bn),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h},cacheSignal:function(){return gi(Bn).controller.signal}},rX=typeof WeakMap=="function"?WeakMap:Map,wr=0,Fr=null,tr=null,nr=0,jr=0,Pa=null,dc=!1,bd=!1,K4=!1,tl=0,bn=0,hc=0,Lu=0,W4=0,Da=0,xd=0,Xf=null,pa=null,X4=!1,q1=0,Sj=0,H1=1/0,G1=null,fc=null,Xn=0,mc=null,wd=null,rl=0,Q4=0,Y4=null,Tj=null,Qf=0,Z4=null;function La(){return(wr&2)!==0&&nr!==0?nr&-nr:W.T!==null?iw():mi()}function Aj(){if(Da===0)if((nr&536870912)===0||cr){var o=Vr;Vr<<=1,(Vr&3932160)===0&&(Vr=262144),Da=o}else Da=536870912;return o=Ra.current,o!==null&&(o.flags|=32),Da}function ga(o,l,h){(o===Fr&&(jr===2||jr===9)||o.cancelPendingCommit!==null)&&(_d(o,0),pc(o,nr,Da,!1)),sa(o,h),((wr&2)===0||o!==Fr)&&(o===Fr&&((wr&2)===0&&(Lu|=h),bn===4&&pc(o,nr,Da,!1)),fo(o))}function Ej(o,l,h){if((wr&6)!==0)throw Error(n(327));var g=!h&&(l&127)===0&&(l&o.expiredLanes)===0||fi(o,l),x=g?aX(o,l):ew(o,l,!0),_=g;do{if(x===0){bd&&!g&&pc(o,l,0,!1);break}else{if(h=o.current.alternate,_&&!nX(h)){x=ew(o,l,!1),_=!1;continue}if(x===2){if(_=l,o.errorRecoveryDisabledLanes&_)var U=0;else U=o.pendingLanes&-536870913,U=U!==0?U:U&536870912?536870912:0;if(U!==0){l=U;e:{var H=o;x=Xf;var se=H.current.memoizedState.isDehydrated;if(se&&(_d(H,U).flags|=256),U=ew(H,U,!1),U!==2){if(K4&&!se){H.errorRecoveryDisabledLanes|=_,Lu|=_,x=4;break e}_=pa,pa=x,_!==null&&(pa===null?pa=_:pa.push.apply(pa,_))}x=U}if(_=!1,x!==2)continue}}if(x===1){_d(o,0),pc(o,l,0,!0);break}e:{switch(g=o,_=x,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:pc(g,l,Da,!dc);break e;case 2:pa=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=q1+300-De(),10<x)){if(pc(g,l,Da,!dc),ur(g,0,!0)!==0)break e;rl=l,g.timeoutHandle=nk(Nj.bind(null,g,h,pa,G1,X4,l,Da,Lu,xd,dc,_,"Throttled",-0,0),x);break e}Nj(g,h,pa,G1,X4,l,Da,Lu,xd,dc,_,null,-0,0)}}break}while(!0);fo(o)}function Nj(o,l,h,g,x,_,U,H,se,Se,Re,Be,Ae,je){if(o.timeoutHandle=-1,Be=l.subtreeFlags,Be&8192||(Be&16785408)===16785408){Be={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ni},bj(l,_,Be);var bt=(_&62914560)===_?q1-De():(_&4194048)===_?Sj-De():0;if(bt=$X(Be,bt),bt!==null){rl=_,o.cancelPendingCommit=bt(Pj.bind(null,o,l,_,h,g,x,U,H,se,Re,Be,null,Ae,je)),pc(o,_,U,!Se);return}}Pj(o,l,_,h,g,x,U,H,se)}function nX(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var x=h[g],_=x.getSnapshot;x=x.value;try{if(!Oa(_(),x))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function pc(o,l,h,g){l&=~W4,l&=~Lu,o.suspendedLanes|=l,o.pingedLanes&=~l,g&&(o.warmLanes|=l),g=o.expirationTimes;for(var x=l;0<x;){var _=31-Wt(x),U=1<<_;g[_]=-1,x&=~U}h!==0&&to(o,h,l)}function K1(){return(wr&6)===0?(Yf(0),!1):!0}function J4(){if(tr!==null){if(jr===0)var o=tr.return;else o=tr,Ho=ju=null,p4(o),hd=null,Rf=0,o=tr;for(;o!==null;)ij(o.alternate,o),o=o.return;tr=null}}function _d(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,SX(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),rl=0,J4(),Fr=o,tr=h=Fo(o.current,null),nr=l,jr=0,Pa=null,dc=!1,bd=fi(o,l),K4=!1,xd=Da=W4=Lu=hc=bn=0,pa=Xf=null,X4=!1,(l&8)!==0&&(l|=l&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=l;0<g;){var x=31-Wt(g),_=1<<x;l|=o[x],g&=~_}return tl=l,m1(),h}function jj(o,l){Ft=null,W.H=$f,l===dd||l===_1?(l=qN(),jr=3):l===n4?(l=qN(),jr=4):jr=l===O4?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Pa=l,tr===null&&(bn=1,D1(o,is(l,o.current)))}function kj(){var o=Ra.current;return o===null?!0:(nr&4194048)===nr?ls===null:(nr&62914560)===nr||(nr&536870912)!==0?o===ls:!1}function Cj(){var o=W.H;return W.H=$f,o===null?$f:o}function Oj(){var o=W.A;return W.A=tX,o}function W1(){bn=4,dc||(nr&4194048)!==nr&&Ra.current!==null||(bd=!0),(hc&134217727)===0&&(Lu&134217727)===0||Fr===null||pc(Fr,nr,Da,!1)}function ew(o,l,h){var g=wr;wr|=2;var x=Cj(),_=Oj();(Fr!==o||nr!==l)&&(G1=null,_d(o,l)),l=!1;var U=bn;e:do try{if(jr!==0&&tr!==null){var H=tr,se=Pa;switch(jr){case 8:J4(),U=6;break e;case 3:case 2:case 9:case 6:Ra.current===null&&(l=!0);var Se=jr;if(jr=0,Pa=null,Sd(o,H,se,Se),h&&bd){U=0;break e}break;default:Se=jr,jr=0,Pa=null,Sd(o,H,se,Se)}}iX(),U=bn;break}catch(Re){jj(o,Re)}while(!0);return l&&o.shellSuspendCounter++,Ho=ju=null,wr=g,W.H=x,W.A=_,tr===null&&(Fr=null,nr=0,m1()),U}function iX(){for(;tr!==null;)Ij(tr)}function aX(o,l){var h=wr;wr|=2;var g=Cj(),x=Oj();Fr!==o||nr!==l?(G1=null,H1=De()+500,_d(o,l)):bd=fi(o,l);e:do try{if(jr!==0&&tr!==null){l=tr;var _=Pa;t:switch(jr){case 1:jr=0,Pa=null,Sd(o,l,_,1);break;case 2:case 9:if(VN(_)){jr=0,Pa=null,Rj(l);break}l=function(){jr!==2&&jr!==9||Fr!==o||(jr=7),fo(o)},_.then(l,l);break e;case 3:jr=7;break e;case 4:jr=5;break e;case 7:VN(_)?(jr=0,Pa=null,Rj(l)):(jr=0,Pa=null,Sd(o,l,_,7));break;case 5:var U=null;switch(tr.tag){case 26:U=tr.memoizedState;case 5:case 27:var H=tr;if(U?vk(U):H.stateNode.complete){jr=0,Pa=null;var se=H.sibling;if(se!==null)tr=se;else{var Se=H.return;Se!==null?(tr=Se,X1(Se)):tr=null}break t}}jr=0,Pa=null,Sd(o,l,_,5);break;case 6:jr=0,Pa=null,Sd(o,l,_,6);break;case 8:J4(),bn=6;break e;default:throw Error(n(462))}}sX();break}catch(Re){jj(o,Re)}while(!0);return Ho=ju=null,W.H=g,W.A=x,wr=h,tr!==null?0:(Fr=null,nr=0,m1(),bn)}function sX(){for(;tr!==null&&!ze();)Ij(tr)}function Ij(o){var l=rj(o.alternate,o,tl);o.memoizedProps=o.pendingProps,l===null?X1(o):tr=l}function Rj(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=Q9(h,l,l.pendingProps,l.type,void 0,nr);break;case 11:l=Q9(h,l,l.pendingProps,l.type.render,l.ref,nr);break;case 5:p4(l);default:ij(h,l),l=tr=ON(l,tl),l=rj(h,l,tl)}o.memoizedProps=o.pendingProps,l===null?X1(o):tr=l}function Sd(o,l,h,g){Ho=ju=null,p4(l),hd=null,Rf=0;var x=l.return;try{if(WW(o,x,l,h,nr)){bn=1,D1(o,is(h,o.current)),tr=null;return}}catch(_){if(x!==null)throw tr=x,_;bn=1,D1(o,is(h,o.current)),tr=null;return}l.flags&32768?(cr||g===1?o=!0:bd||(nr&536870912)!==0?o=!1:(dc=o=!0,(g===2||g===9||g===3||g===6)&&(g=Ra.current,g!==null&&g.tag===13&&(g.flags|=16384))),Mj(l,o)):X1(l)}function X1(o){var l=o;do{if((l.flags&32768)!==0){Mj(l,dc);return}o=l.return;var h=YW(l.alternate,l,tl);if(h!==null){tr=h;return}if(l=l.sibling,l!==null){tr=l;return}tr=l=o}while(l!==null);bn===0&&(bn=5)}function Mj(o,l){do{var h=ZW(o.alternate,o);if(h!==null){h.flags&=32767,tr=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){tr=o;return}tr=o=h}while(o!==null);bn=6,tr=null}function Pj(o,l,h,g,x,_,U,H,se){o.cancelPendingCommit=null;do Q1();while(Xn!==0);if((wr&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=V2,un(o,h,_,U,H,se),o===Fr&&(tr=Fr=null,nr=0),wd=l,mc=o,rl=h,Q4=_,Y4=x,Tj=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,uX(Ke,function(){return zj(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=W.T,W.T=null,x=ee.p,ee.p=2,U=wr,wr|=4;try{JW(o,l,h)}finally{wr=U,ee.p=x,W.T=g}}Xn=1,Dj(),Lj(),Bj()}}function Dj(){if(Xn===1){Xn=0;var o=mc,l=wd,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=W.T,W.T=null;var g=ee.p;ee.p=2;var x=wr;wr|=4;try{gj(l,o);var _=hw,U=_N(o.containerInfo),H=_.focusedElem,se=_.selectionRange;if(U!==H&&H&&H.ownerDocument&&wN(H.ownerDocument.documentElement,H)){if(se!==null&&L2(H)){var Se=se.start,Re=se.end;if(Re===void 0&&(Re=Se),"selectionStart"in H)H.selectionStart=Se,H.selectionEnd=Math.min(Re,H.value.length);else{var Be=H.ownerDocument||document,Ae=Be&&Be.defaultView||window;if(Ae.getSelection){var je=Ae.getSelection(),bt=H.textContent.length,Ot=Math.min(se.start,bt),Dr=se.end===void 0?Ot:Math.min(se.end,bt);!je.extend&&Ot>Dr&&(U=Dr,Dr=Ot,Ot=U);var ve=xN(H,Ot),fe=xN(H,Dr);if(ve&&fe&&(je.rangeCount!==1||je.anchorNode!==ve.node||je.anchorOffset!==ve.offset||je.focusNode!==fe.node||je.focusOffset!==fe.offset)){var we=Be.createRange();we.setStart(ve.node,ve.offset),je.removeAllRanges(),Ot>Dr?(je.addRange(we),je.extend(fe.node,fe.offset)):(we.setEnd(fe.node,fe.offset),je.addRange(we))}}}}for(Be=[],je=H;je=je.parentNode;)je.nodeType===1&&Be.push({element:je,left:je.scrollLeft,top:je.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Be.length;H++){var Le=Be[H];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}ly=!!dw,hw=dw=null}finally{wr=x,ee.p=g,W.T=h}}o.current=l,Xn=2}}function Lj(){if(Xn===2){Xn=0;var o=mc,l=wd,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=W.T,W.T=null;var g=ee.p;ee.p=2;var x=wr;wr|=4;try{dj(o,l.alternate,l)}finally{wr=x,ee.p=g,W.T=h}}Xn=3}}function Bj(){if(Xn===4||Xn===3){Xn=0,re();var o=mc,l=wd,h=rl,g=Tj;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Xn=5:(Xn=0,wd=mc=null,Uj(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(fc=null),kn(h),l=l.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(jn,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=W.T,x=ee.p,ee.p=2,W.T=null;try{for(var _=o.onRecoverableError,U=0;U<g.length;U++){var H=g[U];_(H.value,{componentStack:H.stack})}}finally{W.T=l,ee.p=x}}(rl&3)!==0&&Q1(),fo(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===Z4?Qf++:(Qf=0,Z4=o):Qf=0,Yf(0)}}function Uj(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Of(l)))}function Q1(){return Dj(),Lj(),Bj(),zj()}function zj(){if(Xn!==5)return!1;var o=mc,l=Q4;Q4=0;var h=kn(rl),g=W.T,x=ee.p;try{ee.p=32>h?32:h,W.T=null,h=Y4,Y4=null;var _=mc,U=rl;if(Xn=0,wd=mc=null,rl=0,(wr&6)!==0)throw Error(n(331));var H=wr;if(wr|=4,wj(_.current),vj(_,_.current,U,h),wr=H,Yf(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(jn,_)}catch{}return!0}finally{ee.p=x,W.T=g,Uj(o,l)}}function $j(o,l,h){l=is(h,l),l=C4(o.stateNode,l,2),o=oc(o,l,2),o!==null&&(sa(o,2),fo(o))}function kr(o,l,h){if(o.tag===3)$j(o,o,h);else for(;l!==null;){if(l.tag===3){$j(l,o,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(fc===null||!fc.has(g))){o=is(h,o),h=V9(2),g=oc(l,h,2),g!==null&&(F9(h,g,l,o),sa(g,2),fo(g));break}}l=l.return}}function tw(o,l,h){var g=o.pingCache;if(g===null){g=o.pingCache=new rX;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(h)||(K4=!0,x.add(h),o=oX.bind(null,o,l,h),l.then(o,o))}function oX(o,l,h){var g=o.pingCache;g!==null&&g.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Fr===o&&(nr&h)===h&&(bn===4||bn===3&&(nr&62914560)===nr&&300>De()-q1?(wr&2)===0&&_d(o,0):W4|=h,xd===nr&&(xd=0)),fo(o)}function Vj(o,l){l===0&&(l=eo()),o=Au(o,l),o!==null&&(sa(o,l),fo(o))}function lX(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),Vj(o,h)}function cX(o,l){var h=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),Vj(o,h)}function uX(o,l){return yt(o,l)}var Y1=null,Td=null,rw=!1,Z1=!1,nw=!1,gc=0;function fo(o){o!==Td&&o.next===null&&(Td===null?Y1=Td=o:Td=Td.next=o),Z1=!0,rw||(rw=!0,hX())}function Yf(o,l){if(!nw&&Z1){nw=!0;do for(var h=!1,g=Y1;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var _=0;else{var U=g.suspendedLanes,H=g.pingedLanes;_=(1<<31-Wt(42|o)+1)-1,_&=x&~(U&~H),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,Gj(g,_))}else _=nr,_=ur(g,g===Fr?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||fi(g,_)||(h=!0,Gj(g,_));g=g.next}while(h);nw=!1}}function dX(){Fj()}function Fj(){Z1=rw=!1;var o=0;gc!==0&&_X()&&(o=gc);for(var l=De(),h=null,g=Y1;g!==null;){var x=g.next,_=qj(g,l);_===0?(g.next=null,h===null?Y1=x:h.next=x,x===null&&(Td=h)):(h=g,(o!==0||(_&3)!==0)&&(Z1=!0)),g=x}Xn!==0&&Xn!==5||Yf(o),gc!==0&&(gc=0)}function qj(o,l){for(var h=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var U=31-Wt(_),H=1<<U,se=x[U];se===-1?((H&h)===0||(H&g)!==0)&&(x[U]=Js(H,l)):se<=l&&(o.expiredLanes|=H),_&=~H}if(l=Fr,h=nr,h=ur(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===l&&(jr===2||jr===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&he(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||fi(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(g!==null&&he(g),kn(h)){case 2:case 8:h=Ze;break;case 32:h=Ke;break;case 268435456:h=Tt;break;default:h=Ke}return g=Hj.bind(null,o),h=yt(h,g),o.callbackPriority=l,o.callbackNode=h,l}return g!==null&&g!==null&&he(g),o.callbackPriority=2,o.callbackNode=null,2}function Hj(o,l){if(Xn!==0&&Xn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Q1()&&o.callbackNode!==h)return null;var g=nr;return g=ur(o,o===Fr?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(Ej(o,g,l),qj(o,De()),o.callbackNode!=null&&o.callbackNode===h?Hj.bind(null,o):null)}function Gj(o,l){if(Q1())return null;Ej(o,l,!0)}function hX(){TX(function(){(wr&6)!==0?yt(tt,dX):Fj()})}function iw(){if(gc===0){var o=cd;o===0&&(o=qi,qi<<=1,(qi&261888)===0&&(qi=256)),gc=o}return gc}function Kj(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:so(""+o)}function Wj(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function fX(o,l,h,g,x){if(l==="submit"&&h&&h.stateNode===x){var _=Kj((x[Gr]||null).action),U=g.submitter;U&&(l=(l=U[Gr]||null)?Kj(l.formAction):U.getAttribute("formAction"),l!==null&&(_=l,U=null));var H=new vu("action","action",null,g,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(gc!==0){var se=U?Wj(x,U):new FormData(x);T4(h,{pending:!0,data:se,method:x.method,action:_},null,se)}}else typeof _=="function"&&(H.preventDefault(),se=U?Wj(x,U):new FormData(x),T4(h,{pending:!0,data:se,method:x.method,action:_},_,se))},currentTarget:x}]})}}for(var aw=0;aw<$2.length;aw++){var sw=$2[aw],mX=sw.toLowerCase(),pX=sw[0].toUpperCase()+sw.slice(1);Ms(mX,"on"+pX)}Ms(AN,"onAnimationEnd"),Ms(EN,"onAnimationIteration"),Ms(NN,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(OW,"onTransitionRun"),Ms(IW,"onTransitionStart"),Ms(RW,"onTransitionCancel"),Ms(jN,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zf));function Xj(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],x=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var U=g.length-1;0<=U;U--){var H=g[U],se=H.instance,Se=H.currentTarget;if(H=H.listener,se!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=Se;try{_(x)}catch(Re){f1(Re)}x.currentTarget=null,_=se}else for(U=0;U<g.length;U++){if(H=g[U],se=H.instance,Se=H.currentTarget,H=H.listener,se!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=Se;try{_(x)}catch(Re){f1(Re)}x.currentTarget=null,_=se}}}}function rr(o,l){var h=l[oa];h===void 0&&(h=l[oa]=new Set);var g=o+"__bubble";h.has(g)||(Qj(l,o,2,!1),h.add(g))}function ow(o,l,h){var g=0;l&&(g|=4),Qj(h,o,g,l)}var J1="_reactListening"+Math.random().toString(36).slice(2);function lw(o){if(!o[J1]){o[J1]=!0,Kr.forEach(function(h){h!=="selectionchange"&&(gX.has(h)||ow(h,!1,o),ow(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[J1]||(l[J1]=!0,ow("selectionchange",!1,l))}}function Qj(o,l,h,g){switch(Ak(l)){case 2:var x=qX;break;case 8:x=HX;break;default:x=Sw}h=x.bind(null,l,h,o),x=void 0,!xf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function cw(o,l,h,g,x){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var U=g.tag;if(U===3||U===4){var H=g.stateNode.containerInfo;if(H===x)break;if(U===4)for(U=g.return;U!==null;){var se=U.tag;if((se===3||se===4)&&U.stateNode.containerInfo===x)return;U=U.return}for(;H!==null;){if(U=ue(H),U===null)return;if(se=U.tag,se===5||se===6||se===26||se===27){g=_=U;continue e}H=H.parentNode}}g=g.return}Yg(function(){var Se=_,Re=Q0(h),Be=[];e:{var Ae=kN.get(o);if(Ae!==void 0){var je=vu,bt=o;switch(o){case"keypress":if(yu(h)===0)break e;case"keydown":case"keyup":je=s1;break;case"focusin":bt="focus",je=Yl;break;case"focusout":bt="blur",je=Yl;break;case"beforeblur":case"afterblur":je=Yl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=Jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=e1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=l1;break;case AN:case EN:case NN:je=J0;break;case jN:je=ed;break;case"scroll":case"scrollend":je=Zg;break;case"wheel":je=u1;break;case"copy":case"cut":case"paste":je=r1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Af;break;case"toggle":case"beforetoggle":je=Jl}var Ot=(l&4)!==0,Dr=!Ot&&(o==="scroll"||o==="scrollend"),ve=Ot?Ae!==null?Ae+"Capture":null:Ae;Ot=[];for(var fe=Se,we;fe!==null;){var Le=fe;if(we=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||we===null||ve===null||(Le=ua(fe,ve),Le!=null&&Ot.push(Jf(fe,Le,we))),Dr)break;fe=fe.return}0<Ot.length&&(Ae=new je(Ae,bt,null,h,Re),Be.push({event:Ae,listeners:Ot}))}}if((l&7)===0){e:{if(Ae=o==="mouseover"||o==="pointerover",je=o==="mouseout"||o==="pointerout",Ae&&h!==X0&&(bt=h.relatedTarget||h.fromElement)&&(ue(bt)||bt[dn]))break e;if((je||Ae)&&(Ae=Re.window===Re?Re:(Ae=Re.ownerDocument)?Ae.defaultView||Ae.parentWindow:window,je?(bt=h.relatedTarget||h.toElement,je=Se,bt=bt?ue(bt):null,bt!==null&&(Dr=a(bt),Ot=bt.tag,bt!==Dr||Ot!==5&&Ot!==27&&Ot!==6)&&(bt=null)):(je=null,bt=Se),je!==bt)){if(Ot=Jg,Le="onMouseLeave",ve="onMouseEnter",fe="mouse",(o==="pointerout"||o==="pointerover")&&(Ot=Af,Le="onPointerLeave",ve="onPointerEnter",fe="pointer"),Dr=je==null?Ae:rt(je),we=bt==null?Ae:rt(bt),Ae=new Ot(Le,fe+"leave",je,h,Re),Ae.target=Dr,Ae.relatedTarget=we,Le=null,ue(Re)===Se&&(Ot=new Ot(ve,fe+"enter",bt,h,Re),Ot.target=we,Ot.relatedTarget=Dr,Le=Ot),Dr=Le,je&&bt)t:{for(Ot=yX,ve=je,fe=bt,we=0,Le=ve;Le;Le=Ot(Le))we++;Le=0;for(var Et=fe;Et;Et=Ot(Et))Le++;for(;0<we-Le;)ve=Ot(ve),we--;for(;0<Le-we;)fe=Ot(fe),Le--;for(;we--;){if(ve===fe||fe!==null&&ve===fe.alternate){Ot=ve;break t}ve=Ot(ve),fe=Ot(fe)}Ot=null}else Ot=null;je!==null&&Yj(Be,Ae,je,Ot,!1),bt!==null&&Dr!==null&&Yj(Be,Dr,bt,Ot,!0)}}e:{if(Ae=Se?rt(Se):window,je=Ae.nodeName&&Ae.nodeName.toLowerCase(),je==="select"||je==="input"&&Ae.type==="file")var pr=mN;else if(da(Ae))if(pN)pr=jW;else{pr=EW;var St=AW}else je=Ae.nodeName,!je||je.toLowerCase()!=="input"||Ae.type!=="checkbox"&&Ae.type!=="radio"?Se&&vf(Se.elementType)&&(pr=mN):pr=NW;if(pr&&(pr=pr(o,Se))){_u(Be,pr,h,Re);break e}St&&St(o,Ae,Se),o==="focusout"&&Se&&Ae.type==="number"&&Se.memoizedProps.value!=null&&Bo(Ae,"number",Ae.value)}switch(St=Se?rt(Se):window,o){case"focusin":(da(St)||St.contentEditable==="true")&&(td=St,B2=Se,jf=null);break;case"focusout":jf=B2=td=null;break;case"mousedown":U2=!0;break;case"contextmenu":case"mouseup":case"dragend":U2=!1,SN(Be,h,Re);break;case"selectionchange":if(CW)break;case"keydown":case"keyup":SN(Be,h,Re)}var qt;if(k)e:{switch(o){case"compositionstart":var ir="onCompositionStart";break e;case"compositionend":ir="onCompositionEnd";break e;case"compositionupdate":ir="onCompositionUpdate";break e}ir=void 0}else Zt?Sr(o,h)&&(ir="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(ir="onCompositionStart");ir&&(xe&&h.locale!=="ko"&&(Zt||ir!=="onCompositionStart"?ir==="onCompositionEnd"&&Zt&&(qt=Kl()):(Ca=Re,Y0="value"in Ca?Ca.value:Ca.textContent,Zt=!0)),St=ey(Se,ir),0<St.length&&(ir=new _f(ir,o,null,h,Re),Be.push({event:ir,listeners:St}),qt?ir.data=qt:(qt=Ln(h),qt!==null&&(ir.data=qt)))),(qt=K?ii(o,h):ai(o,h))&&(ir=ey(Se,"onBeforeInput"),0<ir.length&&(St=new _f("onBeforeInput","beforeinput",null,h,Re),Be.push({event:St,listeners:ir}),St.data=qt)),fX(Be,o,Se,h,Re)}Xj(Be,l)})}function Jf(o,l,h){return{instance:o,listener:l,currentTarget:h}}function ey(o,l){for(var h=l+"Capture",g=[];o!==null;){var x=o,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=ua(o,h),x!=null&&g.unshift(Jf(o,x,_)),x=ua(o,l),x!=null&&g.push(Jf(o,x,_))),o.tag===3)return g;o=o.return}return[]}function yX(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Yj(o,l,h,g,x){for(var _=l._reactName,U=[];h!==null&&h!==g;){var H=h,se=H.alternate,Se=H.stateNode;if(H=H.tag,se!==null&&se===g)break;H!==5&&H!==26&&H!==27||Se===null||(se=Se,x?(Se=ua(h,_),Se!=null&&U.unshift(Jf(h,Se,se))):x||(Se=ua(h,_),Se!=null&&U.push(Jf(h,Se,se)))),h=h.return}U.length!==0&&o.push({event:l,listeners:U})}var vX=/\r\n?/g,bX=/\u0000|\uFFFD/g;function Zj(o){return(typeof o=="string"?o:""+o).replace(vX,`
`).replace(bX,"")}function Jj(o,l){return l=Zj(l),Zj(o)===l}function Pr(o,l,h,g,x,_){switch(h){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||rs(o,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&rs(o,""+g);break;case"className":lt(o,"class",g);break;case"tabIndex":lt(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(o,h,g);break;case"style":Xg(o,g,_);break;case"data":if(l!=="object"){lt(o,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=so(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(l!=="input"&&Pr(o,l,"name",x.name,x,null),Pr(o,l,"formEncType",x.formEncType,x,null),Pr(o,l,"formMethod",x.formMethod,x,null),Pr(o,l,"formTarget",x.formTarget,x,null)):(Pr(o,l,"encType",x.encType,x,null),Pr(o,l,"method",x.method,x,null),Pr(o,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=so(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=ni);break;case"onScroll":g!=null&&rr("scroll",o);break;case"onScrollEnd":g!=null&&rr("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=so(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":rr("beforetoggle",o),rr("toggle",o),$e(o,"popover",g);break;case"xlinkActuate":jt(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":jt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":jt(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":jt(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":jt(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":jt(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":jt(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":jt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":jt(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":$e(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=I2.get(h)||h,$e(o,h,g))}}function uw(o,l,h,g,x,_){switch(h){case"style":Xg(o,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"children":typeof g=="string"?rs(o,g):(typeof g=="number"||typeof g=="bigint")&&rs(o,""+g);break;case"onScroll":g!=null&&rr("scroll",o);break;case"onScrollEnd":g!=null&&rr("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ni);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Nr.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),l=h.slice(2,x?h.length-7:void 0),_=o[Gr]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(l,_,x),typeof g=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,g,x);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):$e(o,h,g)}}}function vi(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rr("error",o),rr("load",o);var g=!1,x=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var U=h[_];if(U!=null)switch(_){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Pr(o,l,_,U,h,null)}}x&&Pr(o,l,"srcSet",h.srcSet,h,null),g&&Pr(o,l,"src",h.src,h,null);return;case"input":rr("invalid",o);var H=_=U=x=null,se=null,Se=null;for(g in h)if(h.hasOwnProperty(g)){var Re=h[g];if(Re!=null)switch(g){case"name":x=Re;break;case"type":U=Re;break;case"checked":se=Re;break;case"defaultChecked":Se=Re;break;case"value":_=Re;break;case"defaultValue":H=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(137,l));break;default:Pr(o,l,g,Re,h,null)}}Is(o,_,H,se,Se,U,x,!1);return;case"select":rr("invalid",o),g=U=_=null;for(x in h)if(h.hasOwnProperty(x)&&(H=h[x],H!=null))switch(x){case"value":_=H;break;case"defaultValue":U=H;break;case"multiple":g=H;default:Pr(o,l,x,H,h,null)}l=_,h=U,o.multiple=!!g,l!=null?mr(o,!!g,l,!1):h!=null&&mr(o,!!g,h,!0);return;case"textarea":rr("invalid",o),_=x=g=null;for(U in h)if(h.hasOwnProperty(U)&&(H=h[U],H!=null))switch(U){case"value":g=H;break;case"defaultValue":x=H;break;case"children":_=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:Pr(o,l,U,H,h,null)}Gl(o,g,x,_);return;case"option":for(se in h)if(h.hasOwnProperty(se)&&(g=h[se],g!=null))switch(se){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Pr(o,l,se,g,h,null)}return;case"dialog":rr("beforetoggle",o),rr("toggle",o),rr("cancel",o),rr("close",o);break;case"iframe":case"object":rr("load",o);break;case"video":case"audio":for(g=0;g<Zf.length;g++)rr(Zf[g],o);break;case"image":rr("error",o),rr("load",o);break;case"details":rr("toggle",o);break;case"embed":case"source":case"link":rr("error",o),rr("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in h)if(h.hasOwnProperty(Se)&&(g=h[Se],g!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Pr(o,l,Se,g,h,null)}return;default:if(vf(l)){for(Re in h)h.hasOwnProperty(Re)&&(g=h[Re],g!==void 0&&uw(o,l,Re,g,h,void 0));return}}for(H in h)h.hasOwnProperty(H)&&(g=h[H],g!=null&&Pr(o,l,H,g,h,null))}function xX(o,l,h,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,U=null,H=null,se=null,Se=null,Re=null;for(je in h){var Be=h[je];if(h.hasOwnProperty(je)&&Be!=null)switch(je){case"checked":break;case"value":break;case"defaultValue":se=Be;default:g.hasOwnProperty(je)||Pr(o,l,je,null,g,Be)}}for(var Ae in g){var je=g[Ae];if(Be=h[Ae],g.hasOwnProperty(Ae)&&(je!=null||Be!=null))switch(Ae){case"type":_=je;break;case"name":x=je;break;case"checked":Se=je;break;case"defaultChecked":Re=je;break;case"value":U=je;break;case"defaultValue":H=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(n(137,l));break;default:je!==Be&&Pr(o,l,Ae,je,g,Be)}}er(o,U,H,se,Se,Re,_,x);return;case"select":je=U=H=Ae=null;for(_ in h)if(se=h[_],h.hasOwnProperty(_)&&se!=null)switch(_){case"value":break;case"multiple":je=se;default:g.hasOwnProperty(_)||Pr(o,l,_,null,g,se)}for(x in g)if(_=g[x],se=h[x],g.hasOwnProperty(x)&&(_!=null||se!=null))switch(x){case"value":Ae=_;break;case"defaultValue":H=_;break;case"multiple":U=_;default:_!==se&&Pr(o,l,x,_,g,se)}l=H,h=U,g=je,Ae!=null?mr(o,!!h,Ae,!1):!!g!=!!h&&(l!=null?mr(o,!!h,l,!0):mr(o,!!h,h?[]:"",!1));return;case"textarea":je=Ae=null;for(H in h)if(x=h[H],h.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Pr(o,l,H,null,g,x)}for(U in g)if(x=g[U],_=h[U],g.hasOwnProperty(U)&&(x!=null||_!=null))switch(U){case"value":Ae=x;break;case"defaultValue":je=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==_&&Pr(o,l,U,x,g,_)}gu(o,Ae,je);return;case"option":for(var bt in h)if(Ae=h[bt],h.hasOwnProperty(bt)&&Ae!=null&&!g.hasOwnProperty(bt))switch(bt){case"selected":o.selected=!1;break;default:Pr(o,l,bt,null,g,Ae)}for(se in g)if(Ae=g[se],je=h[se],g.hasOwnProperty(se)&&Ae!==je&&(Ae!=null||je!=null))switch(se){case"selected":o.selected=Ae&&typeof Ae!="function"&&typeof Ae!="symbol";break;default:Pr(o,l,se,Ae,g,je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in h)Ae=h[Ot],h.hasOwnProperty(Ot)&&Ae!=null&&!g.hasOwnProperty(Ot)&&Pr(o,l,Ot,null,g,Ae);for(Se in g)if(Ae=g[Se],je=h[Se],g.hasOwnProperty(Se)&&Ae!==je&&(Ae!=null||je!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(n(137,l));break;default:Pr(o,l,Se,Ae,g,je)}return;default:if(vf(l)){for(var Dr in h)Ae=h[Dr],h.hasOwnProperty(Dr)&&Ae!==void 0&&!g.hasOwnProperty(Dr)&&uw(o,l,Dr,void 0,g,Ae);for(Re in g)Ae=g[Re],je=h[Re],!g.hasOwnProperty(Re)||Ae===je||Ae===void 0&&je===void 0||uw(o,l,Re,Ae,g,je);return}}for(var ve in h)Ae=h[ve],h.hasOwnProperty(ve)&&Ae!=null&&!g.hasOwnProperty(ve)&&Pr(o,l,ve,null,g,Ae);for(Be in g)Ae=g[Be],je=h[Be],!g.hasOwnProperty(Be)||Ae===je||Ae==null&&je==null||Pr(o,l,Be,Ae,g,je)}function ek(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wX(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var x=h[g],_=x.transferSize,U=x.initiatorType,H=x.duration;if(_&&H&&ek(U)){for(U=0,H=x.responseEnd,g+=1;g<h.length;g++){var se=h[g],Se=se.startTime;if(Se>H)break;var Re=se.transferSize,Be=se.initiatorType;Re&&ek(Be)&&(se=se.responseEnd,U+=Re*(se<H?1:(H-Se)/(se-Se)))}if(--g,l+=8*(_+U)/(x.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var dw=null,hw=null;function ty(o){return o.nodeType===9?o:o.ownerDocument}function tk(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rk(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function fw(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var mw=null;function _X(){var o=window.event;return o&&o.type==="popstate"?o===mw?!1:(mw=o,!0):(mw=null,!1)}var nk=typeof setTimeout=="function"?setTimeout:void 0,SX=typeof clearTimeout=="function"?clearTimeout:void 0,ik=typeof Promise=="function"?Promise:void 0,TX=typeof queueMicrotask=="function"?queueMicrotask:typeof ik<"u"?function(o){return ik.resolve(null).then(o).catch(AX)}:nk;function AX(o){setTimeout(function(){throw o})}function yc(o){return o==="head"}function ak(o,l){var h=l,g=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(g===0){o.removeChild(x),jd(l);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")em(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,em(h);for(var _=h.firstChild;_;){var U=_.nextSibling,H=_.nodeName;_[la]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=U}}else h==="body"&&em(o.ownerDocument.body);h=x}while(h);jd(l)}function sk(o,l){var h=o;o=0;do{var g=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=g}while(h)}function pw(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":pw(h),pt(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function EX(o,l,h,g){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[la])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=cs(o.nextSibling),o===null)break}return null}function NX(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=cs(o.nextSibling),o===null))return null;return o}function ok(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=cs(o.nextSibling),o===null))return null;return o}function gw(o){return o.data==="$?"||o.data==="$~"}function yw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function jX(o,l){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||h.readyState!=="loading")l();else{var g=function(){l(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function cs(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var vw=null;function lk(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(l===0)return cs(o.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}o=o.nextSibling}return null}function ck(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return o;l--}else h!=="/$"&&h!=="/&"||l++}o=o.previousSibling}return null}function uk(o,l,h){switch(l=ty(h),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function em(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);pt(o)}var us=new Map,dk=new Set;function ry(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var nl=ee.d;ee.d={f:kX,r:CX,D:OX,C:IX,L:RX,m:MX,X:DX,S:PX,M:LX};function kX(){var o=nl.f(),l=K1();return o||l}function CX(o){var l=qe(o);l!==null&&l.tag===5&&l.type==="form"?j9(l):nl.r(o)}var Ad=typeof document>"u"?null:document;function hk(o,l,h){var g=Ad;if(g&&typeof l=="string"&&l){var x=nn(l);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),dk.has(x)||(dk.add(x),o={rel:o,crossOrigin:h,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),vi(l,"link",o),Yt(l),g.head.appendChild(l)))}}function OX(o){nl.D(o),hk("dns-prefetch",o,null)}function IX(o,l){nl.C(o,l),hk("preconnect",o,l)}function RX(o,l,h){nl.L(o,l,h);var g=Ad;if(g&&o&&l){var x='link[rel="preload"][as="'+nn(l)+'"]';l==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+nn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+nn(h.imageSizes)+'"]')):x+='[href="'+nn(o)+'"]';var _=x;switch(l){case"style":_=Ed(o);break;case"script":_=Nd(o)}us.has(_)||(o=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),us.set(_,o),g.querySelector(x)!==null||l==="style"&&g.querySelector(tm(_))||l==="script"&&g.querySelector(rm(_))||(l=g.createElement("link"),vi(l,"link",o),Yt(l),g.head.appendChild(l)))}}function MX(o,l){nl.m(o,l);var h=Ad;if(h&&o){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+nn(g)+'"][href="'+nn(o)+'"]',_=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Nd(o)}if(!us.has(_)&&(o=p({rel:"modulepreload",href:o},l),us.set(_,o),h.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(rm(_)))return}g=h.createElement("link"),vi(g,"link",o),Yt(g),h.head.appendChild(g)}}}function PX(o,l,h){nl.S(o,l,h);var g=Ad;if(g&&o){var x=Dt(g).hoistableStyles,_=Ed(o);l=l||"default";var U=x.get(_);if(!U){var H={loading:0,preload:null};if(U=g.querySelector(tm(_)))H.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},h),(h=us.get(_))&&bw(o,h);var se=U=g.createElement("link");Yt(se),vi(se,"link",o),se._p=new Promise(function(Se,Re){se.onload=Se,se.onerror=Re}),se.addEventListener("load",function(){H.loading|=1}),se.addEventListener("error",function(){H.loading|=2}),H.loading|=4,ny(U,l,g)}U={type:"stylesheet",instance:U,count:1,state:H},x.set(_,U)}}}function DX(o,l){nl.X(o,l);var h=Ad;if(h&&o){var g=Dt(h).hoistableScripts,x=Nd(o),_=g.get(x);_||(_=h.querySelector(rm(x)),_||(o=p({src:o,async:!0},l),(l=us.get(x))&&xw(o,l),_=h.createElement("script"),Yt(_),vi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function LX(o,l){nl.M(o,l);var h=Ad;if(h&&o){var g=Dt(h).hoistableScripts,x=Nd(o),_=g.get(x);_||(_=h.querySelector(rm(x)),_||(o=p({src:o,async:!0,type:"module"},l),(l=us.get(x))&&xw(o,l),_=h.createElement("script"),Yt(_),vi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function fk(o,l,h,g){var x=(x=pe.current)?ry(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=Ed(h.href),h=Dt(x).hoistableStyles,g=h.get(l),g||(g={type:"style",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=Ed(h.href);var _=Dt(x).hoistableStyles,U=_.get(o);if(U||(x=x.ownerDocument||x,U={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,U),(_=x.querySelector(tm(o)))&&!_._p&&(U.instance=_,U.state.loading=5),us.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},us.set(o,h),_||BX(x,o,h,U.state))),l&&g===null)throw Error(n(528,""));return U}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Nd(h),h=Dt(x).hoistableScripts,g=h.get(l),g||(g={type:"script",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Ed(o){return'href="'+nn(o)+'"'}function tm(o){return'link[rel="stylesheet"]['+o+"]"}function mk(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function BX(o,l,h,g){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=o.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),vi(l,"link",h),Yt(l),o.head.appendChild(l))}function Nd(o){return'[src="'+nn(o)+'"]'}function rm(o){return"script[async]"+o}function pk(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var g=o.querySelector('style[data-href~="'+nn(h.href)+'"]');if(g)return l.instance=g,Yt(g),g;var x=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Yt(g),vi(g,"style",x),ny(g,h.precedence,o),l.instance=g;case"stylesheet":x=Ed(h.href);var _=o.querySelector(tm(x));if(_)return l.state.loading|=4,l.instance=_,Yt(_),_;g=mk(h),(x=us.get(x))&&bw(g,x),_=(o.ownerDocument||o).createElement("link"),Yt(_);var U=_;return U._p=new Promise(function(H,se){U.onload=H,U.onerror=se}),vi(_,"link",g),l.state.loading|=4,ny(_,h.precedence,o),l.instance=_;case"script":return _=Nd(h.src),(x=o.querySelector(rm(_)))?(l.instance=x,Yt(x),x):(g=h,(x=us.get(_))&&(g=p({},h),xw(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),Yt(x),vi(x,"link",g),o.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,ny(g,h.precedence,o));return l.instance}function ny(o,l,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,_=x,U=0;U<g.length;U++){var H=g[U];if(H.dataset.precedence===l)_=H;else if(_!==x)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function bw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function xw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var iy=null;function gk(o,l,h){if(iy===null){var g=new Map,x=iy=new Map;x.set(h,g)}else x=iy,g=x.get(h),g||(g=new Map,x.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var _=h[x];if(!(_[la]||_[Er]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var U=_.getAttribute(l)||"";U=o+U;var H=g.get(U);H?H.push(_):g.set(U,[_])}}return g}function yk(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function UX(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function zX(o,l,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=Ed(g.href),_=l.querySelector(tm(x));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=ay.bind(o),l.then(o,o)),h.state.loading|=4,h.instance=_,Yt(_);return}_=l.ownerDocument||l,g=mk(g),(x=us.get(x))&&bw(g,x),_=_.createElement("link"),Yt(_);var U=_;U._p=new Promise(function(H,se){U.onload=H,U.onerror=se}),vi(_,"link",g),h.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=ay.bind(o),l.addEventListener("load",h),l.addEventListener("error",h))}}var ww=0;function $X(o,l){return o.stylesheets&&o.count===0&&oy(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var g=setTimeout(function(){if(o.stylesheets&&oy(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+l);0<o.imgBytes&&ww===0&&(ww=62500*wX());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&oy(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>ww?50:800)+l);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function ay(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oy(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var sy=null;function oy(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,sy=new Map,l.forEach(VX,o),sy=null,ay.call(o))}function VX(o,l){if(!(l.state.loading&4)){var h=sy.get(o);if(h)var g=h.get(null);else{h=new Map,sy.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var U=x[_];(U.nodeName==="LINK"||U.getAttribute("media")!=="not all")&&(h.set(U.dataset.precedence,U),g=U)}g&&h.set(null,g)}x=l.instance,U=x.getAttribute("data-precedence"),_=h.get(U)||g,_===g&&h.set(null,x),h.set(U,x),this.count++,g=ay.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),_?_.parentNode.insertBefore(x,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),l.state.loading|=4}}var nm={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function FX(o,l,h,g,x,_,U,H,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=U,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function bk(o,l,h,g,x,_,U,H,se,Se,Re,Be){return o=new FX(o,l,h,U,se,Se,Re,Be,H),l=1,_===!0&&(l|=24),_=Ia(3,null,null,l),o.current=_,_.stateNode=o,l=e4(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:g,isDehydrated:h,cache:l},i4(_),o}function xk(o){return o?(o=id,o):id}function wk(o,l,h,g,x,_){x=xk(x),g.context===null?g.context=x:g.pendingContext=x,g=sc(l),g.payload={element:h},_=_===void 0?null:_,_!==null&&(g.callback=_),h=oc(o,g,l),h!==null&&(ga(h,o,l),Pf(h,o,l))}function _k(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function _w(o,l){_k(o,l),(o=o.alternate)&&_k(o,l)}function Sk(o){if(o.tag===13||o.tag===31){var l=Au(o,67108864);l!==null&&ga(l,o,67108864),_w(o,67108864)}}function Tk(o){if(o.tag===13||o.tag===31){var l=La();l=ro(l);var h=Au(o,l);h!==null&&ga(h,o,l),_w(o,l)}}var ly=!0;function qX(o,l,h,g){var x=W.T;W.T=null;var _=ee.p;try{ee.p=2,Sw(o,l,h,g)}finally{ee.p=_,W.T=x}}function HX(o,l,h,g){var x=W.T;W.T=null;var _=ee.p;try{ee.p=8,Sw(o,l,h,g)}finally{ee.p=_,W.T=x}}function Sw(o,l,h,g){if(ly){var x=Tw(g);if(x===null)cw(o,l,g,cy,h),Ek(o,g);else if(KX(x,o,l,h,g))g.stopPropagation();else if(Ek(o,g),l&4&&-1<GX.indexOf(o)){for(;x!==null;){var _=qe(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var U=Ci(_.pendingLanes);if(U!==0){var H=_;for(H.pendingLanes|=2,H.entangledLanes|=2;U;){var se=1<<31-Wt(U);H.entanglements[1]|=se,U&=~se}fo(_),(wr&6)===0&&(H1=De()+500,Yf(0))}}break;case 31:case 13:H=Au(_,2),H!==null&&ga(H,_,2),K1(),_w(_,2)}if(_=Tw(g),_===null&&cw(o,l,g,cy,h),_===x)break;x=_}x!==null&&g.stopPropagation()}else cw(o,l,g,null,h)}}function Tw(o){return o=Q0(o),Aw(o)}var cy=null;function Aw(o){if(cy=null,o=ue(o),o!==null){var l=a(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=s(l),o!==null)return o;o=null}else if(h===31){if(o=c(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return cy=o,null}function Ak(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case tt:return 2;case Ze:return 8;case Ke:case wt:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var Ew=!1,vc=null,bc=null,xc=null,im=new Map,am=new Map,wc=[],GX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ek(o,l){switch(o){case"focusin":case"focusout":vc=null;break;case"dragenter":case"dragleave":bc=null;break;case"mouseover":case"mouseout":xc=null;break;case"pointerover":case"pointerout":im.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(l.pointerId)}}function sm(o,l,h,g,x,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[x]},l!==null&&(l=qe(l),l!==null&&Sk(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function KX(o,l,h,g,x){switch(l){case"focusin":return vc=sm(vc,o,l,h,g,x),!0;case"dragenter":return bc=sm(bc,o,l,h,g,x),!0;case"mouseover":return xc=sm(xc,o,l,h,g,x),!0;case"pointerover":var _=x.pointerId;return im.set(_,sm(im.get(_)||null,o,l,h,g,x)),!0;case"gotpointercapture":return _=x.pointerId,am.set(_,sm(am.get(_)||null,o,l,h,g,x)),!0}return!1}function Nk(o){var l=ue(o.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=s(h),l!==null){o.blockedOn=l,no(o.priority,function(){Tk(h)});return}}else if(l===31){if(l=c(h),l!==null){o.blockedOn=l,no(o.priority,function(){Tk(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function uy(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=Tw(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);X0=g,h.target.dispatchEvent(g),X0=null}else return l=qe(h),l!==null&&Sk(l),o.blockedOn=h,!1;l.shift()}return!0}function jk(o,l,h){uy(o)&&h.delete(l)}function WX(){Ew=!1,vc!==null&&uy(vc)&&(vc=null),bc!==null&&uy(bc)&&(bc=null),xc!==null&&uy(xc)&&(xc=null),im.forEach(jk),am.forEach(jk)}function dy(o,l){o.blockedOn===l&&(o.blockedOn=null,Ew||(Ew=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,WX)))}var hy=null;function kk(o){hy!==o&&(hy=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){hy===o&&(hy=null);for(var l=0;l<o.length;l+=3){var h=o[l],g=o[l+1],x=o[l+2];if(typeof g!="function"){if(Aw(g||h)===null)continue;break}var _=qe(h);_!==null&&(o.splice(l,3),l-=3,T4(_,{pending:!0,data:x,method:h.method,action:g},g,x))}}))}function jd(o){function l(se){return dy(se,o)}vc!==null&&dy(vc,o),bc!==null&&dy(bc,o),xc!==null&&dy(xc,o),im.forEach(l),am.forEach(l);for(var h=0;h<wc.length;h++){var g=wc[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<wc.length&&(h=wc[0],h.blockedOn===null);)Nk(h),h.blockedOn===null&&wc.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var x=h[g],_=h[g+1],U=x[Gr]||null;if(typeof _=="function")U||kk(h);else if(U){var H=null;if(_&&_.hasAttribute("formAction")){if(x=_,U=_[Gr]||null)H=U.formAction;else if(Aw(x)!==null)continue}else H=U.action;typeof H=="function"?h[g+1]=H:(h.splice(g,3),g-=3),kk(h)}}}function Ck(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(U){return x=U})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Nw(o){this._internalRoot=o}fy.prototype.render=Nw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var h=l.current,g=La();wk(h,g,o,l,null,null)},fy.prototype.unmount=Nw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;wk(o.current,2,null,o,null,null),K1(),l[dn]=null}};function fy(o){this._internalRoot=o}fy.prototype.unstable_scheduleHydration=function(o){if(o){var l=mi();o={blockedOn:null,target:o,priority:l};for(var h=0;h<wc.length&&l!==0&&l<wc[h].priority;h++);wc.splice(h,0,o),h===0&&Nk(o)}};var Ok=e.version;if(Ok!=="19.2.4")throw Error(n(527,Ok,"19.2.4"));ee.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=f(l),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var XX={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var my=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!my.isDisabled&&my.supportsFiber)try{jn=my.inject(XX),Kt=my}catch{}}return lm.createRoot=function(o,l){if(!i(o))throw Error(n(299));var h=!1,g="",x=B9,_=U9,U=z9;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(U=l.onRecoverableError)),l=bk(o,1,!1,null,null,h,g,null,x,_,U,Ck),o[dn]=l.current,lw(o),new Nw(l)},lm.hydrateRoot=function(o,l,h){if(!i(o))throw Error(n(299));var g=!1,x="",_=B9,U=U9,H=z9,se=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(U=h.onCaughtError),h.onRecoverableError!==void 0&&(H=h.onRecoverableError),h.formState!==void 0&&(se=h.formState)),l=bk(o,1,!0,l,h??null,g,x,se,_,U,H,Ck),l.context=xk(null),h=l.current,g=La(),g=ro(g),x=sc(g),x.callback=null,oc(h,x,g),h=g,l.current.lanes=h,sa(l,h),fo(l),o[dn]=l.current,lw(o),new fy(l)},lm.version="19.2.4",lm}var Vk;function lQ(){if(Vk)return Cw.exports;Vk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cw.exports=oQ(),Cw.exports}var cQ=lQ();const uQ=_r(cQ);var Li=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Li||{});const Cr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var ol=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(ol||{}),Fk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},dQ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],s=t[r++],c=t[r++],d=((i&7)<<18|(a&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=t[r++],s=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},lz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,c=s?t[i+1]:0,d=i+2<t.length,f=d?t[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|f>>6,b=f&63;d||(b=64,s||(y=64)),n.push(r[m],r[p],r[y],r[b])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(oz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dQ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const f=i<t.length?r[t.charAt(i)]:64;++i;const p=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||c==null||f==null||p==null)throw new hQ;const y=a<<2|c>>4;if(n.push(y),f!==64){const b=c<<4&240|f>>2;if(n.push(b),p!==64){const T=f<<6&192|p;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hQ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fQ=function(t){const e=oz(t);return lz.encodeByteArray(e,!0)},bv=function(t){return fQ(t).replace(/\./g,"")},cz=function(t){try{return lz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=()=>mQ().__FIREBASE_DEFAULTS__,gQ=()=>{if(typeof process>"u"||typeof Fk>"u")return;const t=Fk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yQ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cz(t[1]);return e&&JSON.parse(e)},sx=()=>{try{return pQ()||gQ()||yQ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uz=t=>{var e,r;return(r=(e=sx())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},dz=t=>{const e=uz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},hz=()=>{var t;return(t=sx())===null||t===void 0?void 0:t.config},fz=t=>{var e;return(e=sx())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bv(JSON.stringify(r)),bv(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xQ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function wQ(){var t;const e=(t=sx())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _Q(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SQ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TQ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AQ(){const t=Jn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mz(){return!wQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pz(){try{return typeof indexedDB=="object"}catch{return!1}}function EQ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQ="FirebaseError";class Qs extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=NQ,Object.setPrototypeOf(this,Qs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fg.prototype.create)}}class fg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?jQ(a,n):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Qs(i,c,n)}}function jQ(t,e){return t.replace(kQ,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const kQ=/\{\$([^}]+)}/g;function CQ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],s=e[i];if(qk(a)&&qk(s)){if(!lh(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function qk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function OQ(t,e){const r=new IQ(t,e);return r.subscribe.bind(r)}class IQ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");RQ(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Mw),i.error===void 0&&(i.error=Mw),i.complete===void 0&&(i.complete=Mw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RQ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Mw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t){return t&&t._delegate?t._delegate:t}let Nl=class{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MQ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new vQ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DQ(e))try{this.getOrInitializeService({instanceIdentifier:Ku})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ku){return this.instances.has(e)}getOptions(e=Ku){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&s.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:PQ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ku){return this.component?this.component.multipleInstances?e:Ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PQ(t){return t===Ku?void 0:t}function DQ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new MQ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(sr||(sr={}));const BQ={debug:sr.DEBUG,verbose:sr.VERBOSE,info:sr.INFO,warn:sr.WARN,error:sr.ERROR,silent:sr.SILENT},UQ=sr.INFO,zQ={[sr.DEBUG]:"log",[sr.VERBOSE]:"log",[sr.INFO]:"info",[sr.WARN]:"warn",[sr.ERROR]:"error"},$Q=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=zQ[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class c7{constructor(e){this.name=e,this._logLevel=UQ,this._logHandler=$Q,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sr.DEBUG,...e),this._logHandler(this,sr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sr.VERBOSE,...e),this._logHandler(this,sr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sr.INFO,...e),this._logHandler(this,sr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sr.WARN,...e),this._logHandler(this,sr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sr.ERROR,...e),this._logHandler(this,sr.ERROR,...e)}}const VQ=(t,e)=>e.some(r=>t instanceof r);let Hk,Gk;function FQ(){return Hk||(Hk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qQ(){return Gk||(Gk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gz=new WeakMap,LS=new WeakMap,yz=new WeakMap,Pw=new WeakMap,u7=new WeakMap;function HQ(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{r(Hc(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&gz.set(r,t)}).catch(()=>{}),u7.set(e,t),e}function GQ(t){if(LS.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{r(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});LS.set(t,e)}let BS={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return LS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yz.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Hc(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KQ(t){BS=t(BS)}function WQ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Dw(this),e,...r);return yz.set(n,e.sort?e.sort():[e]),Hc(n)}:qQ().includes(t)?function(...e){return t.apply(Dw(this),e),Hc(gz.get(this))}:function(...e){return Hc(t.apply(Dw(this),e))}}function XQ(t){return typeof t=="function"?WQ(t):(t instanceof IDBTransaction&&GQ(t),VQ(t,FQ())?new Proxy(t,BS):t)}function Hc(t){if(t instanceof IDBRequest)return HQ(t);if(Pw.has(t))return Pw.get(t);const e=XQ(t);return e!==t&&(Pw.set(t,e),u7.set(e,t)),e}const Dw=t=>u7.get(t);function QQ(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),c=Hc(s);return n&&s.addEventListener("upgradeneeded",d=>{n(Hc(s.result),d.oldVersion,d.newVersion,Hc(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const YQ=["get","getKey","getAll","getAllKeys","count"],ZQ=["put","add","delete","clear"],Lw=new Map;function Kk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lw.get(e))return Lw.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=ZQ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||YQ.includes(r)))return;const a=async function(s,...c){const d=this.transaction(s,i?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(c.shift())),(await Promise.all([f[r](...c),i&&d.done]))[0]};return Lw.set(e,a),a}KQ(t=>({...t,get:(e,r,n)=>Kk(e,r)||t.get(e,r,n),has:(e,r)=>!!Kk(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(eY(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function eY(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const US="@firebase/app",Wk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=new c7("@firebase/app"),tY="@firebase/app-compat",rY="@firebase/analytics-compat",nY="@firebase/analytics",iY="@firebase/app-check-compat",aY="@firebase/app-check",sY="@firebase/auth",oY="@firebase/auth-compat",lY="@firebase/database",cY="@firebase/data-connect",uY="@firebase/database-compat",dY="@firebase/functions",hY="@firebase/functions-compat",fY="@firebase/installations",mY="@firebase/installations-compat",pY="@firebase/messaging",gY="@firebase/messaging-compat",yY="@firebase/performance",vY="@firebase/performance-compat",bY="@firebase/remote-config",xY="@firebase/remote-config-compat",wY="@firebase/storage",_Y="@firebase/storage-compat",SY="@firebase/firestore",TY="@firebase/vertexai-preview",AY="@firebase/firestore-compat",EY="firebase",NY="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="[DEFAULT]",jY={[US]:"fire-core",[tY]:"fire-core-compat",[nY]:"fire-analytics",[rY]:"fire-analytics-compat",[aY]:"fire-app-check",[iY]:"fire-app-check-compat",[sY]:"fire-auth",[oY]:"fire-auth-compat",[lY]:"fire-rtdb",[cY]:"fire-data-connect",[uY]:"fire-rtdb-compat",[dY]:"fire-fn",[hY]:"fire-fn-compat",[fY]:"fire-iid",[mY]:"fire-iid-compat",[pY]:"fire-fcm",[gY]:"fire-fcm-compat",[yY]:"fire-perf",[vY]:"fire-perf-compat",[bY]:"fire-rc",[xY]:"fire-rc-compat",[wY]:"fire-gcs",[_Y]:"fire-gcs-compat",[SY]:"fire-fst",[AY]:"fire-fst-compat",[TY]:"fire-vertex","fire-js":"fire-js",[EY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map,kY=new Map,$S=new Map;function Xk(t,e){try{t.container.addComponent(e)}catch(r){jl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Yc(t){const e=t.name;if($S.has(e))return jl.debug(`There were multiple attempts to register component ${e}.`),!1;$S.set(e,t);for(const r of xv.values())Xk(r,t);for(const r of kY.values())Xk(r,t);return!0}function pg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function hl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gc=new fg("app","Firebase",CY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OY{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=NY;function vz(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:zS,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Gc.create("bad-app-name",{appName:String(i)});if(r||(r=hz()),!r)throw Gc.create("no-options");const a=xv.get(i);if(a){if(lh(r,a.options)&&lh(n,a.config))return a;throw Gc.create("duplicate-app",{appName:i})}const s=new LQ(i);for(const d of $S.values())s.addComponent(d);const c=new OY(r,n,s);return xv.set(i,c),c}function d7(t=zS){const e=xv.get(t);if(!e&&t===zS&&hz())return vz();if(!e)throw Gc.create("no-app",{appName:t});return e}function ys(t,e,r){var n;let i=(n=jY[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jl.warn(c.join(" "));return}Yc(new Nl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IY="firebase-heartbeat-database",RY=1,ap="firebase-heartbeat-store";let Bw=null;function bz(){return Bw||(Bw=QQ(IY,RY,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ap)}catch(r){console.warn(r)}}}}).catch(t=>{throw Gc.create("idb-open",{originalErrorMessage:t.message})})),Bw}async function MY(t){try{const r=(await bz()).transaction(ap),n=await r.objectStore(ap).get(xz(t));return await r.done,n}catch(e){if(e instanceof Qs)jl.warn(e.message);else{const r=Gc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jl.warn(r.message)}}}async function Qk(t,e){try{const n=(await bz()).transaction(ap,"readwrite");await n.objectStore(ap).put(e,xz(t)),await n.done}catch(r){if(r instanceof Qs)jl.warn(r.message);else{const n=Gc.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});jl.warn(n.message)}}}function xz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PY=1024,DY=720*60*60*1e3;class LY{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new UY(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Yk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=DY}),this._storage.overwrite(this._heartbeatsCache))}catch(n){jl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Yk(),{heartbeatsToSend:n,unsentEntries:i}=BY(this._heartbeatsCache.heartbeats),a=bv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return jl.warn(r),""}}}function Yk(){return new Date().toISOString().substring(0,10)}function BY(t,e=PY){const r=[];let n=t.slice();for(const i of t){const a=r.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),Zk(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),Zk(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class UY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pz()?EQ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await MY(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return Qk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Zk(t){return bv(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zY(t){Yc(new Nl("platform-logger",e=>new JQ(e),"PRIVATE")),Yc(new Nl("heartbeat",e=>new LY(e),"PRIVATE")),ys(US,Wk,t),ys(US,Wk,"esm2017"),ys("fire-js","")}zY("");var $Y="firebase",VY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys($Y,VY,"app");function h7(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function wz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FY=wz,_z=new fg("auth","Firebase",wz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=new c7("@firebase/auth");function qY(t,...e){wv.logLevel<=sr.WARN&&wv.warn(`Auth (${U0}): ${t}`,...e)}function ev(t,...e){wv.logLevel<=sr.ERROR&&wv.error(`Auth (${U0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t,...e){throw m7(t,...e)}function Ks(t,...e){return m7(t,...e)}function f7(t,e,r){const n=Object.assign(Object.assign({},FY()),{[e]:r});return new fg("auth","Firebase",n).create(e,{appName:t.name})}function d0(t){return f7(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HY(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ao(t,"argument-error"),f7(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function m7(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _z.create(t,...e)}function Bt(t,e,...r){if(!t)throw m7(e,...r)}function fl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ev(e),new Error(e)}function kl(t,e){t||fl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GY(){return Jk()==="http:"||Jk()==="https:"}function Jk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GY()||SQ()||"connection"in navigator)?navigator.onLine:!0}function WY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,r){this.shortDelay=e,this.longDelay=r,kl(r>e,"Short delay should be less than long delay!"),this.isMobile=xQ()||TQ()}get(){return KY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p7(t,e){kl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QY=new gg(3e4,6e4);function g7(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Zh(t,e,r,n,i={}){return Tz(t,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const c=mg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},a);return _Q()||(f.referrerPolicy="no-referrer"),Sz.fetch()(Az(t,t.config.apiHost,r,c),f)})}async function Tz(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},XY),e);try{const i=new ZY(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw gy(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const c=a.ok?s.errorMessage:s.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw gy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw gy(t,"user-disabled",s);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw f7(t,m,f);Ao(t,m)}}catch(i){if(i instanceof Qs)throw i;Ao(t,"network-request-failed",{message:String(i)})}}async function YY(t,e,r,n,i={}){const a=await Zh(t,e,r,n,i);return"mfaPendingCredential"in a&&Ao(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Az(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?p7(t.config,i):`${t.config.apiScheme}://${i}`}class ZY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Ks(this.auth,"network-request-failed")),QY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Ks(t,e,n);return i.customData._tokenResponse=r,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JY(t,e){return Zh(t,"POST","/v1/accounts:delete",e)}async function Ez(t,e){return Zh(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eZ(t,e=!1){const r=$r(t),n=await r.getIdToken(e),i=y7(n);Bt(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Um(Uw(i.auth_time)),issuedAtTime:Um(Uw(i.iat)),expirationTime:Um(Uw(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Uw(t){return Number(t)*1e3}function y7(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return ev("JWT malformed, contained fewer than 3 sections"),null;try{const i=cz(r);return i?JSON.parse(i):(ev("Failed to decode base64 JWT payload"),null)}catch(i){return ev("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eC(t){const e=y7(t);return Bt(e,"internal-error"),Bt(typeof e.exp<"u","internal-error"),Bt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Qs&&tZ(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function tZ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Um(this.lastLoginAt),this.creationTime=Um(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _v(t){var e;const r=t.auth,n=await t.getIdToken(),i=await sp(t,Ez(r,{idToken:n}));Bt(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Nz(a.providerUserInfo):[],c=iZ(t.providerData,s),d=t.isAnonymous,f=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new FS(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function nZ(t){const e=$r(t);await _v(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iZ(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Nz(t){return t.map(e=>{var{providerId:r}=e,n=h7(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aZ(t,e){const r=await Tz(t,{},async()=>{const n=mg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=Az(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Sz.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function sZ(t,e){return Zh(t,"POST","/v2/accounts:revokeToken",g7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Bt(e.idToken,"internal-error"),Bt(typeof e.idToken<"u","internal-error"),Bt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Bt(e.length!==0,"internal-error");const r=eC(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Bt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await aZ(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,s=new Qd;return n&&(Bt(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Bt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Bt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qd,this.toJSON())}_performRefresh(){return fl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t,e){Bt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ml{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=h7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rZ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new FS(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await sp(this,this.stsTokenManager.getToken(this.auth,e));return Bt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return eZ(this,e)}reload(){return nZ(this)}_assign(e){this!==e&&(Bt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ml(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await _v(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hl(this.auth.app))return Promise.reject(d0(this.auth));const e=await this.getIdToken();return await sp(this,JY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,s,c,d,f,m;const p=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(i=r.email)!==null&&i!==void 0?i:void 0,b=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,N=(f=r.createdAt)!==null&&f!==void 0?f:void 0,I=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:z,isAnonymous:O,providerData:B,stsTokenManager:E}=r;Bt(C&&E,e,"internal-error");const A=Qd.fromJSON(this.name,E);Bt(typeof C=="string",e,"internal-error"),Sc(p,e.name),Sc(y,e.name),Bt(typeof z=="boolean",e,"internal-error"),Bt(typeof O=="boolean",e,"internal-error"),Sc(b,e.name),Sc(T,e.name),Sc(S,e.name),Sc(w,e.name),Sc(N,e.name),Sc(I,e.name);const R=new ml({uid:C,auth:e,email:y,emailVerified:z,displayName:p,isAnonymous:O,photoURL:T,phoneNumber:b,tenantId:S,stsTokenManager:A,createdAt:N,lastLoginAt:I});return B&&Array.isArray(B)&&(R.providerData=B.map(F=>Object.assign({},F))),w&&(R._redirectEventId=w),R}static async _fromIdTokenResponse(e,r,n=!1){const i=new Qd;i.updateFromServerResponse(r);const a=new ml({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await _v(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];Bt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Nz(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Qd;c.updateFromIdToken(n);const d=new ml({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new FS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;function pl(t){kl(t instanceof Function,"Expected a class definition");let e=tC.get(t);return e?(kl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}jz.type="NONE";const rC=jz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,r){return`firebase:${t}:${e}:${r}`}class Yd{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=tv(this.userKey,i.apiKey,a),this.fullPersistenceKey=tv("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ml._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Yd(pl(rC),e,n);const i=(await Promise.all(r.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||pl(rC);const s=tv(n,e.config.apiKey,e.name);let c=null;for(const f of r)try{const m=await f._get(s);if(m){const p=ml._fromJSON(e,m);f!==a&&(c=p),a=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Yd(a,e,n):(a=d[0],c&&await a._set(s,c.toJSON()),await Promise.all(r.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new Yd(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Iz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mz(e))return"Blackberry";if(Pz(e))return"Webos";if(Cz(e))return"Safari";if((e.includes("chrome/")||Oz(e))&&!e.includes("edge/"))return"Chrome";if(Rz(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function kz(t=Jn()){return/firefox\//i.test(t)}function Cz(t=Jn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Oz(t=Jn()){return/crios\//i.test(t)}function Iz(t=Jn()){return/iemobile/i.test(t)}function Rz(t=Jn()){return/android/i.test(t)}function Mz(t=Jn()){return/blackberry/i.test(t)}function Pz(t=Jn()){return/webos/i.test(t)}function v7(t=Jn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oZ(t=Jn()){var e;return v7(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lZ(){return AQ()&&document.documentMode===10}function Dz(t=Jn()){return v7(t)||Rz(t)||Pz(t)||Mz(t)||/windows phone/i.test(t)||Iz(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lz(t,e=[]){let r;switch(t){case"Browser":r=nC(Jn());break;case"Worker":r=`${nC(Jn())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${U0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((s,c)=>{try{const d=e(a);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uZ(t,e={}){return Zh(t,"GET","/v2/passwordPolicy",g7(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dZ=6;class hZ{constructor(e){var r,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:dZ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iC(this),this.idTokenSubscription=new iC(this),this.beforeStateQueue=new cZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_z,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=pl(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Yd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Ez(this,{idToken:e}),n=await ml._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(hl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _v(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hl(this.app))return Promise.reject(d0(this));const r=e?$r(e):null;return r&&Bt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Bt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hl(this.app)?Promise.reject(d0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hl(this.app)?Promise.reject(d0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uZ(this),r=new hZ(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await sZ(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&pl(e)||this._popupRedirectResolver;Bt(r,this,"argument-error"),this.redirectPersistenceManager=await Yd.create(this,[pl(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Bt(c,this,"internal-error"),c.then(()=>{s||a(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,i);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&qY(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function ox(t){return $r(t)}class iC{constructor(e){this.auth=e,this.observer=null,this.addObserver=OQ(r=>this.observer=r)}get next(){return Bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mZ(t){b7=t}function pZ(t){return b7.loadJS(t)}function gZ(){return b7.gapiScript}function yZ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vZ(t,e){const r=pg(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(lh(a,e??{}))return i;Ao(i,"already-initialized")}return r.initialize({options:e})}function bZ(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(pl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function xZ(t,e,r){const n=ox(t);Bt(n._canInitEmulator,n,"emulator-config-failed"),Bt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Bz(e),{host:s,port:c}=wZ(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${a}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),_Z()}function Bz(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wZ(t){const e=Bz(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:aC(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:aC(s)}}}function aC(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _Z(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return fl("not implemented")}_getIdTokenResponse(e){return fl("not implemented")}_linkToIdToken(e,r){return fl("not implemented")}_getReauthenticationResolver(e){return fl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zd(t,e){return YY(t,"POST","/v1/accounts:signInWithIdp",g7(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ="http://localhost";class y0 extends Uz{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new y0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ao("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=h7(r,["providerId","signInMethod"]);if(!n||!i)return null;const s=new y0(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return Zd(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Zd(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Zd(e,r)}buildRequest(){const e={requestUri:SZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=mg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends x7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc extends yg{constructor(){super("facebook.com")}static credential(e){return y0._fromParams({providerId:Cc.PROVIDER_ID,signInMethod:Cc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cc.credentialFromTaggedObject(e)}static credentialFromError(e){return Cc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cc.credential(e.oauthAccessToken)}catch{return null}}}Cc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends yg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return y0._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return ul.credential(r,n)}catch{return null}}}ul.GOOGLE_SIGN_IN_METHOD="google.com";ul.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends yg{constructor(){super("github.com")}static credential(e){return y0._fromParams({providerId:Oc.PROVIDER_ID,signInMethod:Oc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oc.credentialFromTaggedObject(e)}static credentialFromError(e){return Oc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oc.credential(e.oauthAccessToken)}catch{return null}}}Oc.GITHUB_SIGN_IN_METHOD="github.com";Oc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends yg{constructor(){super("twitter.com")}static credential(e,r){return y0._fromParams({providerId:Ic.PROVIDER_ID,signInMethod:Ic.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ic.credentialFromTaggedObject(e)}static credentialFromError(e){return Ic.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Ic.credential(r,n)}catch{return null}}}Ic.TWITTER_SIGN_IN_METHOD="twitter.com";Ic.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await ml._fromIdTokenResponse(e,n,i),s=sC(n);return new ch({user:a,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=sC(n);return new ch({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function sC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv extends Qs{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Sv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Sv(e,r,n,i)}}function zz(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sv._fromErrorAndOperation(t,a,e,n):a})}async function TZ(t,e,r=!1){const n=await sp(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ch._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AZ(t,e,r=!1){const{auth:n}=t;if(hl(n.app))return Promise.reject(d0(n));const i="reauthenticate";try{const a=await sp(t,zz(n,i,e,t),r);Bt(a.idToken,n,"internal-error");const s=y7(a.idToken);Bt(s,n,"internal-error");const{sub:c}=s;return Bt(t.uid===c,n,"user-mismatch"),ch._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ao(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EZ(t,e,r=!1){if(hl(t.app))return Promise.reject(d0(t));const n="signIn",i=await zz(t,n,e),a=await ch._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}function NZ(t,e,r,n){return $r(t).onIdTokenChanged(e,r,n)}function jZ(t,e,r){return $r(t).beforeAuthStateChanged(e,r)}function kZ(t,e,r,n){return $r(t).onAuthStateChanged(e,r,n)}function CZ(t){return $r(t).signOut()}const Tv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Tv,"1"),this.storage.removeItem(Tv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OZ=1e3,IZ=10;class Vz extends $z{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Dz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);lZ()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IZ):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},OZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vz.type="LOCAL";const RZ=Vz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz extends $z{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Fz.type="SESSION";const qz=Fz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MZ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new lx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(s).map(async f=>f(r.origin,a)),d=await MZ(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w7(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((c,d)=>{const f=w7("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:r},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(){return window}function DZ(t){_o().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(){return typeof _o().WorkerGlobalScope<"u"&&typeof _o().importScripts=="function"}async function LZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BZ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UZ(){return Hz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz="firebaseLocalStorageDb",zZ=1,Av="firebaseLocalStorage",Kz="fbase_key";class vg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function cx(t,e){return t.transaction([Av],e?"readwrite":"readonly").objectStore(Av)}function $Z(){const t=indexedDB.deleteDatabase(Gz);return new vg(t).toPromise()}function qS(){const t=indexedDB.open(Gz,zZ);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Av,{keyPath:Kz})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Av)?e(n):(n.close(),await $Z(),e(await qS()))})})}async function oC(t,e,r){const n=cx(t,!0).put({[Kz]:e,value:r});return new vg(n).toPromise()}async function VZ(t,e){const r=cx(t,!1).get(e),n=await new vg(r).toPromise();return n===void 0?null:n.value}function lC(t,e){const r=cx(t,!0).delete(e);return new vg(r).toPromise()}const FZ=800,qZ=3;class Wz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qS(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>qZ)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lx._getInstance(UZ()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await LZ(),!this.activeServiceWorker)return;this.sender=new PZ(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qS();return await oC(e,Tv,"1"),await lC(e,Tv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>oC(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>VZ(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>lC(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=cx(i,!1).getAll();return new vg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wz.type="LOCAL";const HZ=Wz;new gg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xz(t,e){return e?pl(e):(Bt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7 extends Uz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zd(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Zd(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Zd(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function GZ(t){return EZ(t.auth,new _7(t),t.bypassAuthState)}function KZ(t){const{auth:e,user:r}=t;return Bt(r,e,"internal-error"),AZ(r,new _7(t),t.bypassAuthState)}async function WZ(t){const{auth:e,user:r}=t;return Bt(r,e,"internal-error"),TZ(r,new _7(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GZ;case"linkViaPopup":case"linkViaRedirect":return WZ;case"reauthViaPopup":case"reauthViaRedirect":return KZ;default:Ao(this.auth,"internal-error")}}resolve(e){kl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XZ=new gg(2e3,1e4);async function QZ(t,e,r){if(hl(t.app))return Promise.reject(Ks(t,"operation-not-supported-in-this-environment"));const n=ox(t);HY(t,e,x7);const i=Xz(n,r);return new n0(n,"signInViaPopup",e,i).executeNotNull()}class n0 extends Qz{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,n0.currentPopupAction&&n0.currentPopupAction.cancel(),n0.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Bt(e,this.auth,"internal-error"),e}async onExecution(){kl(this.filter.length===1,"Popup operations only handle one event");const e=w7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n0.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XZ.get())};e()}}n0.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YZ="pendingRedirect",rv=new Map;class ZZ extends Qz{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=rv.get(this.auth._key());if(!e){try{const n=await JZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}rv.set(this.auth._key(),e)}return this.bypassAuthState||rv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JZ(t,e){const r=rJ(e),n=tJ(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function eJ(t,e){rv.set(t._key(),e)}function tJ(t){return pl(t._redirectPersistence)}function rJ(t){return tv(YZ,t.config.apiKey,t.name)}async function nJ(t,e,r=!1){if(hl(t.app))return Promise.reject(d0(t));const n=ox(t),i=Xz(n,e),s=await new ZZ(n,i,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=600*1e3;class aJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sJ(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!Yz(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Ks(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(cC(e))}saveEventToCache(e){this.cachedEventUids.add(cC(e)),this.lastProcessedEventTime=Date.now()}}function cC(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Yz({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yz(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oJ(t,e={}){return Zh(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cJ=/^https?/;async function uJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oJ(t);for(const r of e)try{if(dJ(r))return}catch{}Ao(t,"unauthorized-domain")}function dJ(t){const e=VS(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!cJ.test(r))return!1;if(lJ.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hJ=new gg(3e4,6e4);function uC(){const t=_o().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function fJ(t){return new Promise((e,r)=>{var n,i,a;function s(){uC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uC(),r(Ks(t,"network-request-failed"))},timeout:hJ.get()})}if(!((i=(n=_o().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=_o().gapi)===null||a===void 0)&&a.load)s();else{const c=yZ("iframefcb");return _o()[c]=()=>{gapi.load?s():r(Ks(t,"network-request-failed"))},pZ(`${gZ()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw nv=null,e})}let nv=null;function mJ(t){return nv=nv||fJ(t),nv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ=new gg(5e3,15e3),gJ="__/auth/iframe",yJ="emulator/auth/iframe",vJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xJ(t){const e=t.config;Bt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?p7(e,yJ):`https://${t.config.authDomain}/${gJ}`,n={apiKey:e.apiKey,appName:t.name,v:U0},i=bJ.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${mg(n).slice(1)}`}async function wJ(t){const e=await mJ(t),r=_o().gapi;return Bt(r,t,"internal-error"),e.open({where:document.body,url:xJ(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vJ,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Ks(t,"network-request-failed"),c=_o().setTimeout(()=>{a(s)},pJ.get());function d(){_o().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _J={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SJ=500,TJ=600,AJ="_blank",EJ="http://localhost";class dC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NJ(t,e,r,n=SJ,i=TJ){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},_J),{width:n.toString(),height:i.toString(),top:a,left:s}),f=Jn().toLowerCase();r&&(c=Oz(f)?AJ:r),kz(f)&&(e=e||EJ,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[b,T])=>`${y}${b}=${T},`,"");if(oZ(f)&&c!=="_self")return jJ(e||"",c),new dC(null);const p=window.open(e||"",c,m);Bt(p,t,"popup-blocked");try{p.focus()}catch{}return new dC(p)}function jJ(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ="__/auth/handler",CJ="emulator/auth/handler",OJ=encodeURIComponent("fac");async function hC(t,e,r,n,i,a){Bt(t.config.authDomain,t,"auth-domain-config-required"),Bt(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:U0,eventId:i};if(e instanceof x7){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",CQ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))s[m]=p}if(e instanceof yg){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(s.scopes=m.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),f=d?`#${OJ}=${encodeURIComponent(d)}`:"";return`${IJ(t)}?${mg(c).slice(1)}${f}`}function IJ({config:t}){return t.emulator?p7(t,CJ):`https://${t.authDomain}/${kJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="webStorageSupport";class RJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qz,this._completeRedirectFn=nJ,this._overrideRedirectResult=eJ}async _openPopup(e,r,n,i){var a;kl((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await hC(e,r,n,VS(),i);return NJ(e,s,w7())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await hC(e,r,n,VS(),i);return DZ(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(kl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await wJ(e),n=new aJ(e);return r.register("authEvent",i=>(Bt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(zw,{type:zw},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[zw];s!==void 0&&r(!!s),Ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=uJ(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Dz()||Cz()||v7()}}const MJ=RJ;var fC="@firebase/auth",mC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LJ(t){Yc(new Nl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;Bt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lz(t)},f=new fZ(n,i,a,d);return bZ(f,r),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Yc(new Nl("auth-internal",e=>{const r=ox(e.getProvider("auth").getImmediate());return(n=>new PJ(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(fC,mC,DJ(t)),ys(fC,mC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=300,UJ=fz("authIdTokenMaxAge")||BJ;let pC=null;const zJ=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>UJ)return;const i=r==null?void 0:r.token;pC!==i&&(pC=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zz(t=d7()){const e=pg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=vZ(t,{popupRedirectResolver:MJ,persistence:[HZ,RZ,qz]}),n=fz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=zJ(a.toString());jZ(r,s,()=>s(r.currentUser)),NZ(r,c=>s(c))}}const i=uz("auth");return i&&xZ(r,`http://${i}`),r}function $J(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mZ({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=Ks("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",$J().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LJ("Browser");var gC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h0,Jz;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,A){function R(){}R.prototype=A.prototype,E.D=A.prototype,E.prototype=new R,E.prototype.constructor=E,E.C=function(F,D,L){for(var M=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)M[Q-2]=arguments[Q];return A.prototype[D].apply(F,M)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,A,R){R||(R=0);var F=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)F[D]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(D=0;16>D;++D)F[D]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=E.g[0],R=E.g[1],D=E.g[2];var L=E.g[3],M=A+(L^R&(D^L))+F[0]+3614090360&4294967295;A=R+(M<<7&4294967295|M>>>25),M=L+(D^A&(R^D))+F[1]+3905402710&4294967295,L=A+(M<<12&4294967295|M>>>20),M=D+(R^L&(A^R))+F[2]+606105819&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(A^D&(L^A))+F[3]+3250441966&4294967295,R=D+(M<<22&4294967295|M>>>10),M=A+(L^R&(D^L))+F[4]+4118548399&4294967295,A=R+(M<<7&4294967295|M>>>25),M=L+(D^A&(R^D))+F[5]+1200080426&4294967295,L=A+(M<<12&4294967295|M>>>20),M=D+(R^L&(A^R))+F[6]+2821735955&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(A^D&(L^A))+F[7]+4249261313&4294967295,R=D+(M<<22&4294967295|M>>>10),M=A+(L^R&(D^L))+F[8]+1770035416&4294967295,A=R+(M<<7&4294967295|M>>>25),M=L+(D^A&(R^D))+F[9]+2336552879&4294967295,L=A+(M<<12&4294967295|M>>>20),M=D+(R^L&(A^R))+F[10]+4294925233&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(A^D&(L^A))+F[11]+2304563134&4294967295,R=D+(M<<22&4294967295|M>>>10),M=A+(L^R&(D^L))+F[12]+1804603682&4294967295,A=R+(M<<7&4294967295|M>>>25),M=L+(D^A&(R^D))+F[13]+4254626195&4294967295,L=A+(M<<12&4294967295|M>>>20),M=D+(R^L&(A^R))+F[14]+2792965006&4294967295,D=L+(M<<17&4294967295|M>>>15),M=R+(A^D&(L^A))+F[15]+1236535329&4294967295,R=D+(M<<22&4294967295|M>>>10),M=A+(D^L&(R^D))+F[1]+4129170786&4294967295,A=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(A^R))+F[6]+3225465664&4294967295,L=A+(M<<9&4294967295|M>>>23),M=D+(A^R&(L^A))+F[11]+643717713&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^A&(D^L))+F[0]+3921069994&4294967295,R=D+(M<<20&4294967295|M>>>12),M=A+(D^L&(R^D))+F[5]+3593408605&4294967295,A=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(A^R))+F[10]+38016083&4294967295,L=A+(M<<9&4294967295|M>>>23),M=D+(A^R&(L^A))+F[15]+3634488961&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^A&(D^L))+F[4]+3889429448&4294967295,R=D+(M<<20&4294967295|M>>>12),M=A+(D^L&(R^D))+F[9]+568446438&4294967295,A=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(A^R))+F[14]+3275163606&4294967295,L=A+(M<<9&4294967295|M>>>23),M=D+(A^R&(L^A))+F[3]+4107603335&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^A&(D^L))+F[8]+1163531501&4294967295,R=D+(M<<20&4294967295|M>>>12),M=A+(D^L&(R^D))+F[13]+2850285829&4294967295,A=R+(M<<5&4294967295|M>>>27),M=L+(R^D&(A^R))+F[2]+4243563512&4294967295,L=A+(M<<9&4294967295|M>>>23),M=D+(A^R&(L^A))+F[7]+1735328473&4294967295,D=L+(M<<14&4294967295|M>>>18),M=R+(L^A&(D^L))+F[12]+2368359562&4294967295,R=D+(M<<20&4294967295|M>>>12),M=A+(R^D^L)+F[5]+4294588738&4294967295,A=R+(M<<4&4294967295|M>>>28),M=L+(A^R^D)+F[8]+2272392833&4294967295,L=A+(M<<11&4294967295|M>>>21),M=D+(L^A^R)+F[11]+1839030562&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^A)+F[14]+4259657740&4294967295,R=D+(M<<23&4294967295|M>>>9),M=A+(R^D^L)+F[1]+2763975236&4294967295,A=R+(M<<4&4294967295|M>>>28),M=L+(A^R^D)+F[4]+1272893353&4294967295,L=A+(M<<11&4294967295|M>>>21),M=D+(L^A^R)+F[7]+4139469664&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^A)+F[10]+3200236656&4294967295,R=D+(M<<23&4294967295|M>>>9),M=A+(R^D^L)+F[13]+681279174&4294967295,A=R+(M<<4&4294967295|M>>>28),M=L+(A^R^D)+F[0]+3936430074&4294967295,L=A+(M<<11&4294967295|M>>>21),M=D+(L^A^R)+F[3]+3572445317&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^A)+F[6]+76029189&4294967295,R=D+(M<<23&4294967295|M>>>9),M=A+(R^D^L)+F[9]+3654602809&4294967295,A=R+(M<<4&4294967295|M>>>28),M=L+(A^R^D)+F[12]+3873151461&4294967295,L=A+(M<<11&4294967295|M>>>21),M=D+(L^A^R)+F[15]+530742520&4294967295,D=L+(M<<16&4294967295|M>>>16),M=R+(D^L^A)+F[2]+3299628645&4294967295,R=D+(M<<23&4294967295|M>>>9),M=A+(D^(R|~L))+F[0]+4096336452&4294967295,A=R+(M<<6&4294967295|M>>>26),M=L+(R^(A|~D))+F[7]+1126891415&4294967295,L=A+(M<<10&4294967295|M>>>22),M=D+(A^(L|~R))+F[14]+2878612391&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~A))+F[5]+4237533241&4294967295,R=D+(M<<21&4294967295|M>>>11),M=A+(D^(R|~L))+F[12]+1700485571&4294967295,A=R+(M<<6&4294967295|M>>>26),M=L+(R^(A|~D))+F[3]+2399980690&4294967295,L=A+(M<<10&4294967295|M>>>22),M=D+(A^(L|~R))+F[10]+4293915773&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~A))+F[1]+2240044497&4294967295,R=D+(M<<21&4294967295|M>>>11),M=A+(D^(R|~L))+F[8]+1873313359&4294967295,A=R+(M<<6&4294967295|M>>>26),M=L+(R^(A|~D))+F[15]+4264355552&4294967295,L=A+(M<<10&4294967295|M>>>22),M=D+(A^(L|~R))+F[6]+2734768916&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~A))+F[13]+1309151649&4294967295,R=D+(M<<21&4294967295|M>>>11),M=A+(D^(R|~L))+F[4]+4149444226&4294967295,A=R+(M<<6&4294967295|M>>>26),M=L+(R^(A|~D))+F[11]+3174756917&4294967295,L=A+(M<<10&4294967295|M>>>22),M=D+(A^(L|~R))+F[2]+718787259&4294967295,D=L+(M<<15&4294967295|M>>>17),M=R+(L^(D|~A))+F[9]+3951481745&4294967295,E.g[0]=E.g[0]+A&4294967295,E.g[1]=E.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+L&4294967295}n.prototype.u=function(E,A){A===void 0&&(A=E.length);for(var R=A-this.blockSize,F=this.B,D=this.h,L=0;L<A;){if(D==0)for(;L<=R;)i(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<A;)if(F[D++]=E.charCodeAt(L++),D==this.blockSize){i(this,F),D=0;break}}else for(;L<A;)if(F[D++]=E[L++],D==this.blockSize){i(this,F),D=0;break}}this.h=D,this.o+=A},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var A=1;A<E.length-8;++A)E[A]=0;var R=8*this.o;for(A=E.length-8;A<E.length;++A)E[A]=R&255,R/=256;for(this.u(E),E=Array(16),A=R=0;4>A;++A)for(var F=0;32>F;F+=8)E[R++]=this.g[A]>>>F&255;return E};function a(E,A){var R=c;return Object.prototype.hasOwnProperty.call(R,E)?R[E]:R[E]=A(E)}function s(E,A){this.h=A;for(var R=[],F=!0,D=E.length-1;0<=D;D--){var L=E[D]|0;F&&L==A||(R[D]=L,F=!1)}this.g=R}var c={};function d(E){return-128<=E&&128>E?a(E,function(A){return new s([A|0],0>A?-1:0)}):new s([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return w(f(-E));for(var A=[],R=1,F=0;E>=R;F++)A[F]=E/R|0,R*=4294967296;return new s(A,0)}function m(E,A){if(E.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E.charAt(0)=="-")return w(m(E.substring(1),A));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=f(Math.pow(A,8)),F=p,D=0;D<E.length;D+=8){var L=Math.min(8,E.length-D),M=parseInt(E.substring(D,D+L),A);8>L?(L=f(Math.pow(A,L)),F=F.j(L).add(f(M))):(F=F.j(R),F=F.add(f(M)))}return F}var p=d(0),y=d(1),b=d(16777216);t=s.prototype,t.m=function(){if(S(this))return-w(this).m();for(var E=0,A=1,R=0;R<this.g.length;R++){var F=this.i(R);E+=(0<=F?F:4294967296+F)*A,A*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(S(this))return"-"+w(this).toString(E);for(var A=f(Math.pow(E,6)),R=this,F="";;){var D=z(R,A).g;R=N(R,D.j(A));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(E);if(R=D,T(R))return L+F;for(;6>L.length;)L="0"+L;F=L+F}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var A=0;A<E.g.length;A++)if(E.g[A]!=0)return!1;return!0}function S(E){return E.h==-1}t.l=function(E){return E=N(this,E),S(E)?-1:T(E)?0:1};function w(E){for(var A=E.g.length,R=[],F=0;F<A;F++)R[F]=~E.g[F];return new s(R,~E.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0,D=0;D<=A;D++){var L=F+(this.i(D)&65535)+(E.i(D)&65535),M=(L>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);F=M>>>16,L&=65535,M&=65535,R[D]=M<<16|L}return new s(R,R[R.length-1]&-2147483648?-1:0)};function N(E,A){return E.add(w(A))}t.j=function(E){if(T(this)||T(E))return p;if(S(this))return S(E)?w(this).j(w(E)):w(w(this).j(E));if(S(E))return w(this.j(w(E)));if(0>this.l(b)&&0>E.l(b))return f(this.m()*E.m());for(var A=this.g.length+E.g.length,R=[],F=0;F<2*A;F++)R[F]=0;for(F=0;F<this.g.length;F++)for(var D=0;D<E.g.length;D++){var L=this.i(F)>>>16,M=this.i(F)&65535,Q=E.i(D)>>>16,Z=E.i(D)&65535;R[2*F+2*D]+=M*Z,I(R,2*F+2*D),R[2*F+2*D+1]+=L*Z,I(R,2*F+2*D+1),R[2*F+2*D+1]+=M*Q,I(R,2*F+2*D+1),R[2*F+2*D+2]+=L*Q,I(R,2*F+2*D+2)}for(F=0;F<A;F++)R[F]=R[2*F+1]<<16|R[2*F];for(F=A;F<2*A;F++)R[F]=0;return new s(R,0)};function I(E,A){for(;(E[A]&65535)!=E[A];)E[A+1]+=E[A]>>>16,E[A]&=65535,A++}function C(E,A){this.g=E,this.h=A}function z(E,A){if(T(A))throw Error("division by zero");if(T(E))return new C(p,p);if(S(E))return A=z(w(E),A),new C(w(A.g),w(A.h));if(S(A))return A=z(E,w(A)),new C(w(A.g),A.h);if(30<E.g.length){if(S(E)||S(A))throw Error("slowDivide_ only works with positive integers.");for(var R=y,F=A;0>=F.l(E);)R=O(R),F=O(F);var D=B(R,1),L=B(F,1);for(F=B(F,2),R=B(R,2);!T(F);){var M=L.add(F);0>=M.l(E)&&(D=D.add(R),L=M),F=B(F,1),R=B(R,1)}return A=N(E,D.j(A)),new C(D,A)}for(D=p;0<=E.l(A);){for(R=Math.max(1,Math.floor(E.m()/A.m())),F=Math.ceil(Math.log(R)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),L=f(R),M=L.j(A);S(M)||0<M.l(E);)R-=F,L=f(R),M=L.j(A);T(L)&&(L=y),D=D.add(L),E=N(E,M)}return new C(D,E)}t.A=function(E){return z(this,E).h},t.and=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)&E.i(F);return new s(R,this.h&E.h)},t.or=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)|E.i(F);return new s(R,this.h|E.h)},t.xor=function(E){for(var A=Math.max(this.g.length,E.g.length),R=[],F=0;F<A;F++)R[F]=this.i(F)^E.i(F);return new s(R,this.h^E.h)};function O(E){for(var A=E.g.length+1,R=[],F=0;F<A;F++)R[F]=E.i(F)<<1|E.i(F-1)>>>31;return new s(R,E.h)}function B(E,A){var R=A>>5;A%=32;for(var F=E.g.length-R,D=[],L=0;L<F;L++)D[L]=0<A?E.i(L+R)>>>A|E.i(L+R+1)<<32-A:E.i(L+R);return new s(D,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Jz=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=m,h0=s}).apply(typeof gC<"u"?gC:typeof self<"u"?self:typeof window<"u"?window:{});var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var e$,Om,t$,iv,HS,r$,n$,i$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,k,$){return v==Array.prototype||v==Object.prototype||(v[k]=$.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof yy=="object"&&yy];for(var k=0;k<v.length;++k){var $=v[k];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var n=r(this);function i(v,k){if(k)e:{var $=n;v=v.split(".");for(var K=0;K<v.length-1;K++){var xe=v[K];if(!(xe in $))break e;$=$[xe]}v=v[v.length-1],K=$[v],k=k(K),k!=K&&k!=null&&e($,v,{configurable:!0,writable:!0,value:k})}}function a(v,k){v instanceof String&&(v+="");var $=0,K=!1,xe={next:function(){if(!K&&$<v.length){var ke=$++;return{value:k(ke,v[ke]),done:!1}}return K=!0,{done:!0,value:void 0}}};return xe[Symbol.iterator]=function(){return xe},xe}i("Array.prototype.values",function(v){return v||function(){return a(this,function(k,$){return $})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var k=typeof v;return k=k!="object"?k:v?Array.isArray(v)?"array":k:"null",k=="array"||k=="object"&&typeof v.length=="number"}function f(v){var k=typeof v;return k=="object"&&v!=null||k=="function"}function m(v,k,$){return v.call.apply(v.bind,arguments)}function p(v,k,$){if(!v)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var xe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(xe,K),v.apply(k,xe)}}return function(){return v.apply(k,arguments)}}function y(v,k,$){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function b(v,k){var $=Array.prototype.slice.call(arguments,1);return function(){var K=$.slice();return K.push.apply(K,arguments),v.apply(this,K)}}function T(v,k){function $(){}$.prototype=k.prototype,v.aa=k.prototype,v.prototype=new $,v.prototype.constructor=v,v.Qb=function(K,xe,ke){for(var nt=Array(arguments.length-2),Sr=2;Sr<arguments.length;Sr++)nt[Sr-2]=arguments[Sr];return k.prototype[xe].apply(K,nt)}}function S(v){const k=v.length;if(0<k){const $=Array(k);for(let K=0;K<k;K++)$[K]=v[K];return $}return[]}function w(v,k){for(let $=1;$<arguments.length;$++){const K=arguments[$];if(d(K)){const xe=v.length||0,ke=K.length||0;v.length=xe+ke;for(let nt=0;nt<ke;nt++)v[xe+nt]=K[nt]}else v.push(K)}}class N{constructor(k,$){this.i=k,this.j=$,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function I(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function z(v){return z[" "](v),v}z[" "]=function(){};var O=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function B(v,k,$){for(const K in v)k.call($,v[K],K,v)}function E(v,k){for(const $ in v)k.call(void 0,v[$],$,v)}function A(v){const k={};for(const $ in v)k[$]=v[$];return k}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(v,k){let $,K;for(let xe=1;xe<arguments.length;xe++){K=arguments[xe];for($ in K)v[$]=K[$];for(let ke=0;ke<R.length;ke++)$=R[ke],Object.prototype.hasOwnProperty.call(K,$)&&(v[$]=K[$])}}function D(v){var k=1;v=v.split(":");const $=[];for(;0<k&&v.length;)$.push(v.shift()),k--;return v.length&&$.push(v.join(":")),$}function L(v){c.setTimeout(()=>{throw v},0)}function M(){var v=ye;let k=null;return v.g&&(k=v.g,v.g=v.g.next,v.g||(v.h=null),k.next=null),k}class Q{constructor(){this.h=this.g=null}add(k,$){const K=Z.get();K.set(k,$),this.h?this.h.next=K:this.g=K,this.h=K}}var Z=new N(()=>new W,v=>v.reset());class W{constructor(){this.next=this.g=this.h=null}set(k,$){this.h=k,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,Y=!1,ye=new Q,oe=()=>{const v=c.Promise.resolve(void 0);ee=()=>{v.then(X)}};var X=()=>{for(var v;v=M();){try{v.h.call(v.g)}catch($){L($)}var k=Z;k.j(v),100>k.h&&(k.h++,v.next=k.g,k.g=v)}Y=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(v,k){this.type=v,this.g=this.target=k,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,k=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const $=()=>{};c.addEventListener("test",$,k),c.removeEventListener("test",$,k)}catch{}return v})();function le(v,k){if(de.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var $=this.type=v.type,K=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=k,k=v.relatedTarget){if(O){e:{try{z(k.nodeName);var xe=!0;break e}catch{}xe=!1}xe||(k=null)}}else $=="mouseover"?k=v.fromElement:$=="mouseout"&&(k=v.toElement);this.relatedTarget=k,K?(this.clientX=K.clientX!==void 0?K.clientX:K.pageX,this.clientY=K.clientY!==void 0?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:pe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&le.aa.h.call(this)}}T(le,de);var pe={2:"touch",3:"pen",4:"mouse"};le.prototype.h=function(){le.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ne(v,k,$,K,xe){this.listener=v,this.proxy=null,this.src=k,this.type=$,this.capture=!!K,this.ha=xe,this.key=++Je,this.da=this.fa=!1}function ce(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Ce(v){this.src=v,this.g={},this.h=0}Ce.prototype.add=function(v,k,$,K,xe){var ke=v.toString();v=this.g[ke],v||(v=this.g[ke]=[],this.h++);var nt=ct(v,k,K,xe);return-1<nt?(k=v[nt],$||(k.fa=!1)):(k=new Ne(k,this.src,ke,!!K,xe),k.fa=$,v.push(k)),k};function Ee(v,k){var $=k.type;if($ in v.g){var K=v.g[$],xe=Array.prototype.indexOf.call(K,k,void 0),ke;(ke=0<=xe)&&Array.prototype.splice.call(K,xe,1),ke&&(ce(k),v.g[$].length==0&&(delete v.g[$],v.h--))}}function ct(v,k,$,K){for(var xe=0;xe<v.length;++xe){var ke=v[xe];if(!ke.da&&ke.listener==k&&ke.capture==!!$&&ke.ha==K)return xe}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),ut={};function dt(v,k,$,K,xe){if(Array.isArray(k)){for(var ke=0;ke<k.length;ke++)dt(v,k[ke],$,K,xe);return null}return $=We($),v&&v[be]?v.K(k,$,f(K)?!!K.capture:!1,xe):Ut(v,k,$,!1,K,xe)}function Ut(v,k,$,K,xe,ke){if(!k)throw Error("Invalid event type");var nt=f(xe)?!!xe.capture:!!xe,Sr=re(v);if(Sr||(v[Qe]=Sr=new Ce(v)),$=Sr.add(k,$,K,nt,ke),$.proxy)return $;if(K=Oe(),$.proxy=K,K.src=v,K.listener=$,v.addEventListener)J||(xe=nt),xe===void 0&&(xe=!1),v.addEventListener(k.toString(),K,xe);else if(v.attachEvent)v.attachEvent(he(k.toString()),K);else if(v.addListener&&v.removeListener)v.addListener(K);else throw Error("addEventListener and attachEvent are unavailable.");return $}function Oe(){function v($){return k.call(v.src,v.listener,$)}const k=ze;return v}function st(v,k,$,K,xe){if(Array.isArray(k))for(var ke=0;ke<k.length;ke++)st(v,k[ke],$,K,xe);else K=f(K)?!!K.capture:!!K,$=We($),v&&v[be]?(v=v.i,k=String(k).toString(),k in v.g&&(ke=v.g[k],$=ct(ke,$,K,xe),-1<$&&(ce(ke[$]),Array.prototype.splice.call(ke,$,1),ke.length==0&&(delete v.g[k],v.h--)))):v&&(v=re(v))&&(k=v.g[k.toString()],v=-1,k&&(v=ct(k,$,K,xe)),($=-1<v?k[v]:null)&&yt($))}function yt(v){if(typeof v!="number"&&v&&!v.da){var k=v.src;if(k&&k[be])Ee(k.i,v);else{var $=v.type,K=v.proxy;k.removeEventListener?k.removeEventListener($,K,v.capture):k.detachEvent?k.detachEvent(he($),K):k.addListener&&k.removeListener&&k.removeListener(K),($=re(k))?(Ee($,v),$.h==0&&($.src=null,k[Qe]=null)):ce(v)}}}function he(v){return v in ut?ut[v]:ut[v]="on"+v}function ze(v,k){if(v.da)v=!0;else{k=new le(k,this);var $=v.listener,K=v.ha||v.src;v.fa&&yt(v),v=$.call(K,k)}return v}function re(v){return v=v[Qe],v instanceof Ce?v:null}var De="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(v){return typeof v=="function"?v:(v[De]||(v[De]=function(k){return v.handleEvent(k)}),v[De])}function tt(){ne.call(this),this.i=new Ce(this),this.M=this,this.F=null}T(tt,ne),tt.prototype[be]=!0,tt.prototype.removeEventListener=function(v,k,$,K){st(this,v,k,$,K)};function Ze(v,k){var $,K=v.F;if(K)for($=[];K;K=K.F)$.push(K);if(v=v.M,K=k.type||k,typeof k=="string")k=new de(k,v);else if(k instanceof de)k.target=k.target||v;else{var xe=k;k=new de(K,v),F(k,xe)}if(xe=!0,$)for(var ke=$.length-1;0<=ke;ke--){var nt=k.g=$[ke];xe=Ke(nt,K,!0,k)&&xe}if(nt=k.g=v,xe=Ke(nt,K,!0,k)&&xe,xe=Ke(nt,K,!1,k)&&xe,$)for(ke=0;ke<$.length;ke++)nt=k.g=$[ke],xe=Ke(nt,K,!1,k)&&xe}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var v=this.i,k;for(k in v.g){for(var $=v.g[k],K=0;K<$.length;K++)ce($[K]);delete v.g[k],v.h--}}this.F=null},tt.prototype.K=function(v,k,$,K){return this.i.add(String(v),k,!1,$,K)},tt.prototype.L=function(v,k,$,K){return this.i.add(String(v),k,!0,$,K)};function Ke(v,k,$,K){if(k=v.i.g[String(k)],!k)return!0;k=k.concat();for(var xe=!0,ke=0;ke<k.length;++ke){var nt=k[ke];if(nt&&!nt.da&&nt.capture==$){var Sr=nt.listener,Ln=nt.ha||nt.src;nt.fa&&Ee(v.i,nt),xe=Sr.call(Ln,K)!==!1&&xe}}return xe&&!K.defaultPrevented}function wt(v,k,$){if(typeof v=="function")$&&(v=y(v,$));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:c.setTimeout(v,k||0)}function Tt(v){v.g=wt(()=>{v.g=null,v.i&&(v.i=!1,Tt(v))},v.l);const k=v.h;v.h=null,v.m.apply(null,k)}class hi extends ne{constructor(k,$){super(),this.m=k,this.l=$,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Tt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(v){ne.call(this),this.h=v,this.g={}}T(Nn,ne);var jn=[];function Kt(v){B(v.g,function(k,$){this.g.hasOwnProperty($)&&yt(k)},v),v.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),Kt(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=c.JSON.stringify,Wt=c.JSON.parse,ki=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function Fi(){}Fi.prototype.h=null;function Ja(v){return v.h||(v.h=v.i())}function qi(){}var Vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){de.call(this,"d")}T(es,de);function Ci(){de.call(this,"c")}T(Ci,de);var ur={},fi=null;function Js(){return fi=fi||new tt}ur.La="serverreachability";function eo(v){de.call(this,ur.La,v)}T(eo,de);function Hi(v){const k=Js();Ze(k,new eo(k))}ur.STAT_EVENT="statevent";function sa(v,k){de.call(this,ur.STAT_EVENT,v),this.stat=k}T(sa,de);function un(v){const k=Js();Ze(k,new sa(k,v))}ur.Ma="timingevent";function to(v,k){de.call(this,ur.Ma,v),this.size=k}T(to,de);function Oi(v,k){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},k)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function ro(v,k,$,K,xe,ke){v.info(function(){if(v.g)if(ke)for(var nt="",Sr=ke.split("&"),Ln=0;Ln<Sr.length;Ln++){var Zt=Sr[Ln].split("=");if(1<Zt.length){var ii=Zt[0];Zt=Zt[1];var ai=ii.split("_");nt=2<=ai.length&&ai[1]=="type"?nt+(ii+"="+Zt+"&"):nt+(ii+"=redacted&")}}else nt=null;else nt=ke;return"XMLHTTP REQ ("+K+") [attempt "+xe+"]: "+k+`
`+$+`
`+nt})}function kn(v,k,$,K,xe,ke,nt){v.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+xe+"]: "+k+`
`+$+`
`+ke+" "+nt})}function mi(v,k,$,K){v.info(function(){return"XMLHTTP TEXT ("+k+"): "+Ii(v,$)+(K?" "+K:"")})}function no(v,k){v.info(function(){return"TIMEOUT: "+k})}Gi.prototype.info=function(){};function Ii(v,k){if(!v.g)return k;if(!k)return null;try{var $=JSON.parse(k);if($){for(v=0;v<$.length;v++)if(Array.isArray($[v])){var K=$[v];if(!(2>K.length)){var xe=K[1];if(Array.isArray(xe)&&!(1>xe.length)){var ke=xe[0];if(ke!="noop"&&ke!="stop"&&ke!="close")for(var nt=1;nt<xe.length;nt++)xe[nt]=""}}}}return Qt($)}catch{return k}}var Er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dn;function oa(){}T(oa,Fi),oa.prototype.g=function(){return new XMLHttpRequest},oa.prototype.i=function(){return{}},dn=new oa;function Ri(v,k,$,K){this.j=v,this.i=k,this.l=$,this.R=K||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new io}function io(){this.i=null,this.g="",this.h=!1}var js={},la={};function pt(v,k,$){v.L=1,v.v=gu(nn(k)),v.m=$,v.P=!0,ue(v,null)}function ue(v,k){v.F=Date.now(),Dt(v),v.A=nn(v.v);var $=v.A,K=v.R;Array.isArray(K)||(K=[String(K)]),Uo($.i,"t",K),v.C=0,$=v.j.J,v.h=new io,v.g=l1(v.j,$?k:null,!v.m),0<v.O&&(v.M=new hi(y(v.Y,v,v.g),v.O)),k=v.U,$=v.g,K=v.ca;var xe="readystatechange";Array.isArray(xe)||(xe&&(jn[0]=xe.toString()),xe=jn);for(var ke=0;ke<xe.length;ke++){var nt=dt($,xe[ke],K||k.handleEvent,!1,k.h||k);if(!nt)break;k.g[nt.key]=nt}k=v.H?A(v.H):{},v.m?(v.u||(v.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,k)):(v.u="GET",v.g.ea(v.A,v.u,null,k)),Hi(),ro(v.i,v.u,v.A,v.l,v.R,v.m)}Ri.prototype.ca=function(v){v=v.target;const k=this.M;k&&Ki(v)==3?k.j():this.Y(v)},Ri.prototype.Y=function(v){try{if(v==this.g)e:{const ai=Ki(this.g);var k=this.g.Ba();const ec=this.g.Z();if(!(3>ai)&&(ai!=3||this.g&&(this.h.h||this.g.oa()||bu(this.g)))){this.J||ai!=4||k==7||(k==8||0>=ec?Hi(3):Hi(2)),Kr(this);var $=this.g.Z();this.X=$;t:if(qe(this)){var K=bu(this.g);v="";var xe=K.length,ke=Ki(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),Nr(this);var nt="";break t}this.h.i=new c.TextDecoder}for(k=0;k<xe;k++)this.h.h=!0,v+=this.h.i.decode(K[k],{stream:!(ke&&k==xe-1)});K.length=0,this.h.g+=v,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=$==200,kn(this.i,this.u,this.A,this.l,this.R,ai,$),this.o){if(this.T&&!this.K){t:{if(this.g){var Sr,Ln=this.g;if((Sr=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(Sr)){var Zt=Sr;break t}}Zt=null}if($=Zt)mi(this.i,this.l,$,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hr(this,$);else{this.o=!1,this.s=3,un(12),Wr(this),Nr(this);break e}}if(this.P){$=!0;let da;for(;!this.J&&this.C<nt.length;)if(da=rt(this,nt),da==la){ai==4&&(this.s=4,un(14),$=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(da==js){this.s=4,un(15),mi(this.i,this.l,nt,"[Invalid Chunk]"),$=!1;break}else mi(this.i,this.l,da,null),hr(this,da);if(qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ai!=4||nt.length!=0||this.h.h||(this.s=1,un(16),$=!1),this.o=this.o&&$,!$)mi(this.i,this.l,nt,"[Invalid Chunked Response]"),Wr(this),Nr(this);else if(0<nt.length&&!this.W){this.W=!0;var ii=this.j;ii.g==this&&ii.ba&&!ii.M&&(ii.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),Tf(ii),ii.M=!0,un(11))}}else mi(this.i,this.l,nt,null),hr(this,nt);ai==4&&Wr(this),this.o&&!this.J&&(ai==4?a1(this.j,this):(this.o=!1,Dt(this)))}else Jg(this.g),$==400&&0<nt.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),Wr(this),Nr(this)}}}catch{}finally{}};function qe(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function rt(v,k){var $=v.C,K=k.indexOf(`
`,$);return K==-1?la:($=Number(k.substring($,K)),isNaN($)?js:(K+=1,K+$>k.length?la:(k=k.slice(K,K+$),v.C=K+$,k)))}Ri.prototype.cancel=function(){this.J=!0,Wr(this)};function Dt(v){v.S=Date.now()+v.I,Yt(v,v.I)}function Yt(v,k){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Oi(y(v.ba,v),k)}function Kr(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Ri.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(no(this.i,this.A),this.L!=2&&(Hi(),un(17)),Wr(this),this.s=2,Nr(this)):Yt(this,this.S-v)};function Nr(v){v.j.G==0||v.J||a1(v.j,v)}function Wr(v){Kr(v);var k=v.M;k&&typeof k.ma=="function"&&k.ma(),v.M=null,Kt(v.U),v.g&&(k=v.g,v.g=null,k.abort(),k.ma())}function hr(v,k){try{var $=v.j;if($.G!=0&&($.g==v||$e($.h,v))){if(!v.K&&$e($.h,v)&&$.G==3){try{var K=$.Da.g.parse(k)}catch{K=null}if(Array.isArray(K)&&K.length==3){var xe=K;if(xe[0]==0){e:if(!$.u){if($.g)if($.g.F+3e3<v.F)Zl($),Yl($);else break e;Sf($),un(18)}}else $.za=xe[1],0<$.za-$.T&&37500>xe[2]&&$.F&&$.v==0&&!$.C&&($.C=Oi(y($.Za,$),6e3));if(1>=Me($.h)&&$.ca){try{$.ca()}catch{}$.ca=void 0}}else $o($,11)}else if((v.K||$.g==v)&&Zl($),!I(k))for(xe=$.Da.g.parse(k),k=0;k<xe.length;k++){let Zt=xe[k];if($.T=Zt[0],Zt=Zt[1],$.G==2)if(Zt[0]=="c"){$.K=Zt[1],$.ia=Zt[2];const ii=Zt[3];ii!=null&&($.la=ii,$.j.info("VER="+$.la));const ai=Zt[4];ai!=null&&($.Aa=ai,$.j.info("SVER="+$.Aa));const ec=Zt[5];ec!=null&&typeof ec=="number"&&0<ec&&(K=1.5*ec,$.L=K,$.j.info("backChannelRequestTimeoutMs_="+K)),K=$;const da=v.g;if(da){const _u=da.g?da.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_u){var ke=K.h;ke.g||_u.indexOf("spdy")==-1&&_u.indexOf("quic")==-1&&_u.indexOf("h2")==-1||(ke.j=ke.l,ke.g=new Set,ke.h&&(lt(ke,ke.h),ke.h=null))}if(K.D){const Vo=da.g?da.g.getResponseHeader("X-HTTP-Session-Id"):null;Vo&&(K.ya=Vo,mr(K.I,K.D,Vo))}}$.G=3,$.l&&$.l.ua(),$.ba&&($.R=Date.now()-v.F,$.j.info("Handshake RTT: "+$.R+"ms")),K=$;var nt=v;if(K.qa=o1(K,K.J?K.ia:null,K.W),nt.K){jt(K.h,nt);var Sr=nt,Ln=K.L;Ln&&(Sr.I=Ln),Sr.B&&(Kr(Sr),Dt(Sr)),K.g=nt}else n1(K);0<$.i.length&&J0($)}else Zt[0]!="stop"&&Zt[0]!="close"||$o($,7);else $.G==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?$o($,7):wf($):Zt[0]!="noop"&&$.l&&$.l.ta(Zt),$.v=0)}}Hi(4)}catch{}}var ao=class{constructor(v,k){this.g=v,this.map=k}};function ks(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ge(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Me(v){return v.h?1:v.g?v.g.size:0}function $e(v,k){return v.h?v.h==k:v.g?v.g.has(k):!1}function lt(v,k){v.g?v.g.add(k):v.h=k}function jt(v,k){v.h&&v.h==k?v.h=null:v.g&&v.g.has(k)&&v.g.delete(k)}ks.prototype.cancel=function(){if(this.i=lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function lr(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let k=v.i;for(const $ of v.g.values())k=k.concat($.D);return k}return S(v.i)}function yn(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var k=[],$=v.length,K=0;K<$;K++)k.push(v[K]);return k}k=[],$=0;for(K in v)k[$++]=v[K];return k}function ca(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var k=[];v=v.length;for(var $=0;$<v;$++)k.push($);return k}k=[],$=0;for(const K in v)k[$++]=K;return k}}}function ts(v,k){if(v.forEach&&typeof v.forEach=="function")v.forEach(k,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,k,void 0);else for(var $=ca(v),K=yn(v),xe=K.length,ke=0;ke<xe;ke++)k.call(void 0,K[ke],$&&$[ke],v)}var Cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hl(v,k){if(v){v=v.split("&");for(var $=0;$<v.length;$++){var K=v[$].indexOf("="),xe=null;if(0<=K){var ke=v[$].substring(0,K);xe=v[$].substring(K+1)}else ke=v[$];k(ke,xe?decodeURIComponent(xe.replace(/\+/g," ")):"")}}}function Os(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Os){this.h=v.h,er(this,v.j),this.o=v.o,this.g=v.g,Is(this,v.s),this.l=v.l;var k=v.i,$=new so;$.i=k.i,k.g&&($.g=new Map(k.g),$.h=k.h),Bo(this,$),this.m=v.m}else v&&(k=String(v).match(Cs))?(this.h=!1,er(this,k[1]||"",!0),this.o=Gl(k[2]||""),this.g=Gl(k[3]||"",!0),Is(this,k[4]),this.l=Gl(k[5]||"",!0),Bo(this,k[6]||"",!0),this.m=Gl(k[7]||"")):(this.h=!1,this.i=new so(null,this.h))}Os.prototype.toString=function(){var v=[],k=this.j;k&&v.push(rs(k,yf,!0),":");var $=this.g;return($||k=="file")&&(v.push("//"),(k=this.o)&&v.push(rs(k,yf,!0),"@"),v.push(encodeURIComponent(String($)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.s,$!=null&&v.push(":",String($))),($=this.l)&&(this.g&&$.charAt(0)!="/"&&v.push("/"),v.push(rs($,$.charAt(0)=="/"?vf:Xg,!0))),($=this.i.toString())&&v.push("?",$),($=this.m)&&v.push("#",rs($,R2)),v.join("")};function nn(v){return new Os(v)}function er(v,k,$){v.j=$?Gl(k,!0):k,v.j&&(v.j=v.j.replace(/:$/,""))}function Is(v,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);v.s=k}else v.s=null}function Bo(v,k,$){k instanceof so?(v.i=k,Qg(v.i,v.h)):($||(k=rs(k,I2)),v.i=new so(k,v.h))}function mr(v,k,$){v.i.set(k,$)}function gu(v){return mr(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Gl(v,k){return v?k?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function rs(v,k,$){return typeof v=="string"?(v=encodeURI(v).replace(k,O2),$&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function O2(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var yf=/[#\/\?@]/g,Xg=/[#\?:]/g,vf=/[#\?]/g,I2=/[#\?@]/g,R2=/#/g;function so(v,k){this.h=this.g=null,this.i=v||null,this.j=!!k}function ni(v){v.g||(v.g=new Map,v.h=0,v.i&&Hl(v.i,function(k,$){v.add(decodeURIComponent(k.replace(/\+/g," ")),$)}))}t=so.prototype,t.add=function(v,k){ni(this),this.i=null,v=ka(this,v);var $=this.g.get(v);return $||this.g.set(v,$=[]),$.push(k),this.h+=1,this};function X0(v,k){ni(v),k=ka(v,k),v.g.has(k)&&(v.i=null,v.h-=v.g.get(k).length,v.g.delete(k))}function Q0(v,k){return ni(v),k=ka(v,k),v.g.has(k)}t.forEach=function(v,k){ni(this),this.g.forEach(function($,K){$.forEach(function(xe){v.call(k,xe,K,this)},this)},this)},t.na=function(){ni(this);const v=Array.from(this.g.values()),k=Array.from(this.g.keys()),$=[];for(let K=0;K<k.length;K++){const xe=v[K];for(let ke=0;ke<xe.length;ke++)$.push(k[K])}return $},t.V=function(v){ni(this);let k=[];if(typeof v=="string")Q0(this,v)&&(k=k.concat(this.g.get(ka(this,v))));else{v=Array.from(this.g.values());for(let $=0;$<v.length;$++)k=k.concat(v[$])}return k},t.set=function(v,k){return ni(this),this.i=null,v=ka(this,v),Q0(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[k]),this.h+=1,this},t.get=function(v,k){return v?(v=this.V(v),0<v.length?String(v[0]):k):k};function Uo(v,k,$){X0(v,k),0<$.length&&(v.i=null,v.g.set(ka(v,k),S($)),v.h+=$.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],k=Array.from(this.g.keys());for(var $=0;$<k.length;$++){var K=k[$];const ke=encodeURIComponent(String(K)),nt=this.V(K);for(K=0;K<nt.length;K++){var xe=ke;nt[K]!==""&&(xe+="="+encodeURIComponent(String(nt[K]))),v.push(xe)}}return this.i=v.join("&")};function ka(v,k){return k=String(k),v.j&&(k=k.toLowerCase()),k}function Qg(v,k){k&&!v.j&&(ni(v),v.i=null,v.g.forEach(function($,K){var xe=K.toLowerCase();K!=xe&&(X0(this,K),Uo(this,xe,$))},v)),v.j=k}function bf(v,k){const $=new Gi;if(c.Image){const K=new Image;K.onload=b(ua,$,"TestLoadImage: loaded",!0,k,K),K.onerror=b(ua,$,"TestLoadImage: error",!1,k,K),K.onabort=b(ua,$,"TestLoadImage: abort",!1,k,K),K.ontimeout=b(ua,$,"TestLoadImage: timeout",!1,k,K),c.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=v}else k(!1)}function Yg(v,k){const $=new Gi,K=new AbortController,xe=setTimeout(()=>{K.abort(),ua($,"TestPingServer: timeout",!1,k)},1e4);fetch(v,{signal:K.signal}).then(ke=>{clearTimeout(xe),ke.ok?ua($,"TestPingServer: ok",!0,k):ua($,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(xe),ua($,"TestPingServer: error",!1,k)})}function ua(v,k,$,K,xe){try{xe&&(xe.onload=null,xe.onerror=null,xe.onabort=null,xe.ontimeout=null),K($)}catch{}}function Rs(){this.g=new ki}function xf(v,k,$){const K=$||"";try{ts(v,function(xe,ke){let nt=xe;f(xe)&&(nt=Qt(xe)),k.push(K+ke+"="+encodeURIComponent(nt))})}catch(xe){throw k.push(K+"type="+encodeURIComponent("_badmap")),xe}}function oo(v){this.l=v.Ub||null,this.j=v.eb||!1}T(oo,Fi),oo.prototype.g=function(){return new Ca(this.l,this.j)},oo.prototype.i=(function(v){return function(){return v}})({});function Ca(v,k){tt.call(this),this.D=v,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ca,tt),t=Ca.prototype,t.open=function(v,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=k,this.readyState=1,Kl(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(k.body=v),(this.D||c).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Kl(this)),this.g&&(this.readyState=3,Kl(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Y0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function Y0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var k=v.value?v.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!v.done}))&&(this.response=this.responseText+=k)}v.done?lo(this):Kl(this),this.readyState==3&&Y0(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,lo(this))},t.Qa=function(v){this.g&&(this.response=v,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Kl(v)}t.setRequestHeader=function(v,k){this.u.append(v,k)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],k=this.h.entries();for(var $=k.next();!$.done;)$=$.value,v.push($[0]+": "+$[1]),$=k.next();return v.join(`\r
`)};function Kl(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function yu(v){let k="";return B(v,function($,K){k+=K,k+=":",k+=$,k+=`\r
`}),k}function Wl(v,k,$){e:{for(K in $){var K=!1;break e}K=!0}K||($=yu($),typeof v=="string"?$!=null&&encodeURIComponent(String($)):mr(v,k,$))}function Jr(v){tt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Jr,tt);var Mi=/^https?$/i,zo=["POST","PUT"];t=Jr.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,k,$,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);k=k?k.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dn.g(),this.v=this.o?Ja(this.o):Ja(dn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(k,String(v),!0),this.B=!1}catch(ke){vu(this,ke);return}if(v=$||"",$=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var xe in K)$.set(xe,K[xe]);else if(typeof K.keys=="function"&&typeof K.get=="function")for(const ke of K.keys())$.set(ke,K.get(ke));else throw Error("Unknown input type for opt_headers: "+String(K));K=Array.from($.keys()).find(ke=>ke.toLowerCase()=="content-type"),xe=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(zo,k,void 0))||K||xe||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ke,nt]of $)this.g.setRequestHeader(ke,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Z0(this),this.u=!0,this.g.send(v),this.u=!1}catch(ke){vu(this,ke)}};function vu(v,k){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=k,v.m=5,Xl(v),Ql(v)}function Xl(v){v.A||(v.A=!0,Ze(v,"complete"),Ze(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ze(this,"complete"),Ze(this,"abort"),Ql(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ql(this,!0)),Jr.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zg(this):this.bb())},t.bb=function(){Zg(this)};function Zg(v){if(v.h&&typeof s<"u"&&(!v.v[1]||Ki(v)!=4||v.Z()!=2)){if(v.u&&Ki(v)==4)wt(v.Ea,0,v);else if(Ze(v,"readystatechange"),Ki(v)==4){v.h=!1;try{const nt=v.Z();e:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var $;if(!($=k)){var K;if(K=nt===0){var xe=String(v.D).match(Cs)[1]||null;!xe&&c.self&&c.self.location&&(xe=c.self.location.protocol.slice(0,-1)),K=!Mi.test(xe?xe.toLowerCase():"")}$=K}if($)Ze(v,"complete"),Ze(v,"success");else{v.m=6;try{var ke=2<Ki(v)?v.g.statusText:""}catch{ke=""}v.l=ke+" ["+v.Z()+"]",Xl(v)}}finally{Ql(v)}}}}function Ql(v,k){if(v.g){Z0(v);const $=v.g,K=v.v[0]?()=>{}:null;v.g=null,v.v=null,k||Ze(v,"ready");try{$.onreadystatechange=K}catch{}}}function Z0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ki(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ki(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var k=this.g.responseText;return v&&k.indexOf(v)==0&&(k=k.substring(v.length)),Wt(k)}};function bu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Jg(v){const k={};v=(v.g&&2<=Ki(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let K=0;K<v.length;K++){if(I(v[K]))continue;var $=D(v[K]);const xe=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const ke=k[xe]||[];k[xe]=ke,ke.push($)}E(k,function(K){return K.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xu(v,k,$){return $&&$.internalChannelParams&&$.internalChannelParams[v]||k}function e1(v){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xu("baseRetryDelayMs",5e3,v),this.cb=xu("retryDelaySeedMs",1e4,v),this.Wa=xu("forwardChannelMaxRetries",2,v),this.wa=xu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ks(v&&v.concurrentRequestLimit),this.Da=new Rs,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=e1.prototype,t.la=8,t.G=1,t.connect=function(v,k,$,K){un(0),this.W=v,this.H=k||{},$&&K!==void 0&&(this.H.OSID=$,this.H.OAID=K),this.F=this.X,this.I=o1(this,null,this.W),J0(this)};function wf(v){if(t1(v),v.G==3){var k=v.U++,$=nn(v.I);if(mr($,"SID",v.K),mr($,"RID",k),mr($,"TYPE","terminate"),wu(v,$),k=new Ri(v,v.j,k),k.L=2,k.v=gu(nn($)),$=!1,c.navigator&&c.navigator.sendBeacon)try{$=c.navigator.sendBeacon(k.v.toString(),"")}catch{}!$&&c.Image&&(new Image().src=k.v,$=!0),$||(k.g=l1(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Dt(k)}Af(v)}function Yl(v){v.g&&(Tf(v),v.g.cancel(),v.g=null)}function t1(v){Yl(v),v.u&&(c.clearTimeout(v.u),v.u=null),Zl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function J0(v){if(!ge(v.h)&&!v.s){v.s=!0;var k=v.Ga;ee||oe(),Y||(ee(),Y=!0),ye.add(k,v),v.B=0}}function M2(v,k){return Me(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=k.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Oi(y(v.Ga,v,k),s1(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const xe=new Ri(this,this.j,v);let ke=this.o;if(this.S&&(ke?(ke=A(ke),F(ke,this.S)):ke=this.S),this.m!==null||this.O||(xe.H=ke,ke=null),this.P)e:{for(var k=0,$=0;$<this.i.length;$++){t:{var K=this.i[$];if("__data__"in K.map&&(K=K.map.__data__,typeof K=="string")){K=K.length;break t}K=void 0}if(K===void 0)break;if(k+=K,4096<k){k=$;break e}if(k===4096||$===this.i.length-1){k=$+1;break e}}k=1e3}else k=1e3;k=_f(this,xe,k),$=nn(this.I),mr($,"RID",v),mr($,"CVER",22),this.D&&mr($,"X-HTTP-Session-Id",this.D),wu(this,$),ke&&(this.O?k="headers="+encodeURIComponent(String(yu(ke)))+"&"+k:this.m&&Wl($,this.m,ke)),lt(this.h,xe),this.Ua&&mr($,"TYPE","init"),this.P?(mr($,"$req",k),mr($,"SID","null"),xe.T=!0,pt(xe,$,null)):pt(xe,$,k),this.G=2}}else this.G==3&&(v?r1(this,v):this.i.length==0||ge(this.h)||r1(this))};function r1(v,k){var $;k?$=k.l:$=v.U++;const K=nn(v.I);mr(K,"SID",v.K),mr(K,"RID",$),mr(K,"AID",v.T),wu(v,K),v.m&&v.o&&Wl(K,v.m,v.o),$=new Ri(v,v.j,$,v.B+1),v.m===null&&($.H=v.o),k&&(v.i=k.D.concat(v.i)),k=_f(v,$,1e3),$.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),lt(v.h,$),pt($,K,k)}function wu(v,k){v.H&&B(v.H,function($,K){mr(k,K,$)}),v.l&&ts({},function($,K){mr(k,K,$)})}function _f(v,k,$){$=Math.min(v.i.length,$);var K=v.l?y(v.l.Na,v.l,v):null;e:{var xe=v.i;let ke=-1;for(;;){const nt=["count="+$];ke==-1?0<$?(ke=xe[0].g,nt.push("ofs="+ke)):ke=0:nt.push("ofs="+ke);let Sr=!0;for(let Ln=0;Ln<$;Ln++){let Zt=xe[Ln].g;const ii=xe[Ln].map;if(Zt-=ke,0>Zt)ke=Math.max(0,xe[Ln].g-100),Sr=!1;else try{xf(ii,nt,"req"+Zt+"_")}catch{K&&K(ii)}}if(Sr){K=nt.join("&");break e}}}return v=v.i.splice(0,$),k.D=v,K}function n1(v){if(!v.g&&!v.u){v.Y=1;var k=v.Fa;ee||oe(),Y||(ee(),Y=!0),ye.add(k,v),v.v=0}}function Sf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Oi(y(v.Fa,v),s1(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,i1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Oi(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Yl(this),i1(this))};function Tf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function i1(v){v.g=new Ri(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var k=nn(v.qa);mr(k,"RID","rpc"),mr(k,"SID",v.K),mr(k,"AID",v.T),mr(k,"CI",v.F?"0":"1"),!v.F&&v.ja&&mr(k,"TO",v.ja),mr(k,"TYPE","xmlhttp"),wu(v,k),v.m&&v.o&&Wl(k,v.m,v.o),v.L&&(v.g.I=v.L);var $=v.g;v=v.ia,$.L=1,$.v=gu(nn(k)),$.m=null,$.P=!0,ue($,v)}t.Za=function(){this.C!=null&&(this.C=null,Yl(this),Sf(this),un(19))};function Zl(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function a1(v,k){var $=null;if(v.g==k){Zl(v),Tf(v),v.g=null;var K=2}else if($e(v.h,k))$=k.D,jt(v.h,k),K=1;else return;if(v.G!=0){if(k.o)if(K==1){$=k.m?k.m.length:0,k=Date.now()-k.F;var xe=v.B;K=Js(),Ze(K,new to(K,$)),J0(v)}else n1(v);else if(xe=k.s,xe==3||xe==0&&0<k.X||!(K==1&&M2(v,k)||K==2&&Sf(v)))switch($&&0<$.length&&(k=v.h,k.i=k.i.concat($)),xe){case 1:$o(v,5);break;case 4:$o(v,10);break;case 3:$o(v,6);break;default:$o(v,2)}}}function s1(v,k){let $=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||($*=2),$*k}function $o(v,k){if(v.j.info("Error code "+k),k==2){var $=y(v.fb,v),K=v.Xa;const xe=!K;K=new Os(K||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||er(K,"https"),gu(K),xe?bf(K.toString(),$):Yg(K.toString(),$)}else un(2);v.G=0,v.l&&v.l.sa(k),Af(v),t1(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function Af(v){if(v.G=0,v.ka=[],v.l){const k=lr(v.h);(k.length!=0||v.i.length!=0)&&(w(v.ka,k),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function o1(v,k,$){var K=$ instanceof Os?nn($):new Os($);if(K.g!="")k&&(K.g=k+"."+K.g),Is(K,K.s);else{var xe=c.location;K=xe.protocol,k=k?k+"."+xe.hostname:xe.hostname,xe=+xe.port;var ke=new Os(null);K&&er(ke,K),k&&(ke.g=k),xe&&Is(ke,xe),$&&(ke.l=$),K=ke}return $=v.D,k=v.ya,$&&k&&mr(K,$,k),mr(K,"VER",v.la),wu(v,K),K}function l1(v,k,$){if(k&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=v.Ca&&!v.pa?new Jr(new oo({eb:$})):new Jr(v.pa),k.Ha(v.J),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function c1(){}t=c1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ed(){}ed.prototype.g=function(v,k){return new Wi(v,k)};function Wi(v,k){tt.call(this),this.g=new e1(k),this.l=v,this.h=k&&k.messageUrlParams||null,v=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(v?v["X-WebChannel-Content-Type"]=k.messageContentType:v={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(v?v["X-WebChannel-Client-Profile"]=k.va:v={"X-WebChannel-Client-Profile":k.va}),this.g.S=v,(v=k&&k.Sb)&&!I(v)&&(this.g.m=v),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!I(k)&&(this.g.D=k,v=this.h,v!==null&&k in v&&(v=this.h,k in v&&delete v[k])),this.j=new Jl(this)}T(Wi,tt),Wi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wi.prototype.close=function(){wf(this.g)},Wi.prototype.o=function(v){var k=this.g;if(typeof v=="string"){var $={};$.__data__=v,v=$}else this.u&&($={},$.__data__=Qt(v),v=$);k.i.push(new ao(k.Ya++,v)),k.G==3&&J0(k)},Wi.prototype.N=function(){this.g.l=null,delete this.j,wf(this.g),delete this.g,Wi.aa.N.call(this)};function u1(v){es.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var k=v.__sm__;if(k){e:{for(const $ in k){v=$;break e}v=void 0}(this.i=v)&&(v=this.i,k=k!==null&&v in k?k[v]:void 0),this.data=k}else this.data=v}T(u1,es);function d1(){Ci.call(this),this.status=1}T(d1,Ci);function Jl(v){this.g=v}T(Jl,c1),Jl.prototype.ua=function(){Ze(this.g,"a")},Jl.prototype.ta=function(v){Ze(this.g,new u1(v))},Jl.prototype.sa=function(v){Ze(this.g,new d1)},Jl.prototype.ra=function(){Ze(this.g,"b")},ed.prototype.createWebChannel=ed.prototype.g,Wi.prototype.send=Wi.prototype.o,Wi.prototype.open=Wi.prototype.m,Wi.prototype.close=Wi.prototype.close,i$=function(){return new ed},n$=function(){return Js()},r$=ur,HS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Er.NO_ERROR=0,Er.TIMEOUT=8,Er.HTTP_ERROR=6,iv=Er,Gr.COMPLETE="complete",t$=Gr,qi.EventType=Vr,Vr.OPEN="a",Vr.CLOSE="b",Vr.ERROR="c",Vr.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Om=qi,Jr.prototype.listenOnce=Jr.prototype.L,Jr.prototype.getLastError=Jr.prototype.Ka,Jr.prototype.getLastErrorCode=Jr.prototype.Ba,Jr.prototype.getStatus=Jr.prototype.Z,Jr.prototype.getResponseJson=Jr.prototype.Oa,Jr.prototype.getResponseText=Jr.prototype.oa,Jr.prototype.send=Jr.prototype.ea,Jr.prototype.setWithCredentials=Jr.prototype.Ha,e$=Jr}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});const yC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ui=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new c7("@firebase/firestore");function zd(){return v0.logLevel}function Ge(t,...e){if(v0.logLevel<=sr.DEBUG){const r=e.map(S7);v0.debug(`Firestore (${Jh}): ${t}`,...r)}}function In(t,...e){if(v0.logLevel<=sr.ERROR){const r=e.map(S7);v0.error(`Firestore (${Jh}): ${t}`,...r)}}function op(t,...e){if(v0.logLevel<=sr.WARN){const r=e.map(S7);v0.warn(`Firestore (${Jh}): ${t}`,...r)}}function S7(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t="Unexpected state"){const e=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+t;throw In(e),new Error(e)}function _t(t,e){t||gt()}function xt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Qs{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Ui.UNAUTHENTICATED)))}shutdown(){}}class qJ{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){_t(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let a=new Ws;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ws,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},c=d=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ws)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_t(typeof n.accessToken=="string"),new VJ(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _t(e===null||typeof e=="string"),new Ui(e)}}class HJ{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GJ{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new HJ(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Ui.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class KJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){_t(this.o===void 0);const n=a=>{a.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,Ge("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(_t(typeof r.token=="string"),this.R=r.token,new KJ(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XJ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=XJ(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function $t(t,e){return t<e?-1:t>e?1:0}function uh(t,e,r){return t.length===e.length&&t.every(((n,i)=>r(n,e[i])))}function s$(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new et(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new et(Ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new et(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gn.fromMillis(Date.now())}static fromDate(e){return gn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new gn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new gn(0,0))}static max(){return new At(new gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,r,n){r===void 0?r=0:r>e.length&&gt(),n===void 0?n=e.length-r:n>e.length-r&&gt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return lp.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof lp?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),s=r.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class yr extends lp{construct(e,r,n){return new yr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new et(Ie.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((i=>i.length>0)))}return new yr(r)}static emptyPath(){return new yr([])}}const QJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends lp{construct(e,r,n){return new pn(e,r,n)}static isValidIdentifier(e){return QJ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new et(Ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new et(Ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new et(Ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(n+=c,i++):(a(),i++)}if(a(),s)throw new et(Ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(r)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.path=e}static fromPath(e){return new ot(yr.fromString(e))}static fromName(e){return new ot(yr.fromString(e).popFirst(5))}static empty(){return new ot(yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return yr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ot(new yr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,r,n,i){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=i}}function GS(t){return t.fields.find((e=>e.kind===2))}function Wu(t){return t.fields.filter((e=>e.kind!==2))}Ev.UNKNOWN_ID=-1;class av{constructor(e,r){this.fieldPath=e,this.kind=r}}class cp{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new cp(0,Qa.min())}}function o$(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=At.fromTimestamp(n===1e9?new gn(r+1,0):new gn(r,n));return new Qa(i,ot.empty(),e)}function l$(t){return new Qa(t.readTime,t.key,-1)}class Qa{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Qa(At.min(),ot.empty(),-1)}static max(){return new Qa(At.max(),ot.empty(),-1)}}function T7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ot.comparator(t.documentKey,e.documentKey),r!==0?r:$t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class u${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function au(t){if(t.code!==Ie.FAILED_PRECONDITION||t.message!==c$)throw t;Ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Te(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Te?r:Te.resolve(r)}catch(r){return Te.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Te.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Te.reject(r)}static resolve(e){return new Te(((r,n)=>{r(e)}))}static reject(e){return new Te(((r,n)=>{n(e)}))}static waitFor(e){return new Te(((r,n)=>{let i=0,a=0,s=!1;e.forEach((c=>{++i,c.next((()=>{++a,s&&a===i&&r()}),(d=>n(d)))})),s=!0,a===i&&r()}))}static or(e){let r=Te.resolve(!1);for(const n of e)r=r.next((i=>i?Te.resolve(i):n()));return r}static forEach(e,r){const n=[];return e.forEach(((i,a)=>{n.push(r.call(this,i,a))})),this.waitFor(n)}static mapArray(e,r){return new Te(((n,i)=>{const a=e.length,s=new Array(a);let c=0;for(let d=0;d<a;d++){const f=d;r(e[f]).next((m=>{s[f]=m,++c,c===a&&n(s)}),(m=>i(m)))}}))}static doWhile(e,r){return new Te(((n,i)=>{const a=()=>{e()===!0?r().next((()=>{a()}),i):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Ws,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new zm(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=A7(n.target.error);this.V.reject(new zm(e,i))}}static open(e,r,n,i){try{return new ux(r,e.transaction(i,n))}catch(a){throw new zm(r,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ZJ(r)}}class Kc{constructor(e,r,n){this.name=e,this.version=r,this.p=n,Kc.S(Jn())===12.2&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ge("SimpleDb","Removing database:",e),Zu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pz())return!1;if(Kc.v())return!0;const e=Jn(),r=Kc.S(e),n=0<r&&r<10,i=d$(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ge("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;r(s)},i.onblocked=()=>{n(new zm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new et(Ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new et(Ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new zm(e,s))},i.onupgradeneeded=a=>{Ge("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.O(s,i.transaction,a.oldVersion,this.version).next((()=>{Ge("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,i){const a=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=ux.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next((f=>(c.g(),f))).catch((f=>(c.abort(f),Te.reject(f)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,f=d.name!=="FirebaseError"&&s<3;if(Ge("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function d$(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class YJ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Zu(this.B.delete())}}class zm extends et{constructor(e,r){super(Ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function su(t){return t.name==="IndexedDbTransactionError"}class ZJ{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(Ge("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(Ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zu(n)}add(e){return Ge("SimpleDb","ADD",this.store.name,e,e),Zu(this.store.add(e))}get(e){return Zu(this.store.get(e)).next((r=>(r===void 0&&(r=null),Ge("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return Ge("SimpleDb","DELETE",this.store.name,e),Zu(this.store.delete(e))}count(){return Ge("SimpleDb","COUNT",this.store.name),Zu(this.store.count())}U(e,r){const n=this.options(e,r),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new Te(((s,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{s(d.target.result)}}))}{const a=this.cursor(n),s=[];return this.W(a,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Te(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}j(e,r){Ge("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const i=this.cursor(n);return this.W(i,((a,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const i=this.cursor(n);return this.W(i,r)}Y(e){const r=this.cursor({});return new Te(((n,i)=>{r.onerror=a=>{const s=A7(a.target.error);i(s)},r.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new Te(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void i();const d=new YJ(c),f=r(c.primaryKey,c.value,d);if(f instanceof Te){const m=f.catch((p=>(d.done(),Te.reject(p))));n.push(m)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Te.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Zu(t){return new Te(((e,r)=>{t.onsuccess=n=>{const i=n.target.result;e(i)},t.onerror=n=>{const i=A7(n.target.error);r(i)}}))}let vC=!1;function A7(t){const e=Kc.S(Jn());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new et("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vC||(vC=!0,setTimeout((()=>{throw n}),0)),n}}return t}class JJ{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ge("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){su(r)?Ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await au(r)}await this.X(6e4)}))}}class eee{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let i=r,a=!0;return Te.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return Ge("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next((c=>{i-=c,n.add(s)}));a=!1})))).next((()=>r-i))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((i=>this.localStore.localDocuments.getNextDocuments(e,r,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(i,a))).next((c=>(Ge("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((i,a)=>{const s=l$(a);T7(s,n)>0&&(n=s)})),new Qa(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_a.oe=-1;function bg(t){return t==null}function up(t){return t===0&&1/t==-1/0}function h$(t){return typeof t=="number"&&Number.isInteger(t)&&!up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=bC(e)),e=tee(t.get(r),e);return bC(e)}function tee(t,e){let r=e;const n=t.length;for(let i=0;i<n;i++){const a=t.charAt(i);switch(a){case"\0":r+="";break;case"":r+="";break;default:r+=a}}return r}function bC(t){return t+""}function go(t){const e=t.length;if(_t(e>=2),e===2)return _t(t.charAt(0)===""&&t.charAt(1)===""),yr.emptyPath();const r=e-2,n=[];let i="";for(let a=0;a<e;){const s=t.indexOf("",a);switch((s<0||s>r)&&gt(),t.charAt(s+1)){case"":const c=t.substring(a,s);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:gt()}a=s+2}return new yr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t,e){return[t,na(e)]}function f$(t,e,r){return[t,na(e),r]}const ree={},nee=["prefixPath","collectionGroup","readTime","documentId"],iee=["prefixPath","collectionGroup","documentId"],aee=["collectionGroup","readTime","prefixPath","documentId"],see=["canonicalId","targetId"],oee=["targetId","path"],lee=["path","targetId"],cee=["collectionId","parent"],uee=["indexId","uid"],dee=["uid","sequenceNumber"],hee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fee=["indexId","uid","orderedDocumentKey"],mee=["userId","collectionPath","documentId"],pee=["userId","collectionPath","largestBatchId"],gee=["userId","collectionGroup","largestBatchId"],m$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yee=[...m$,"documentOverlays"],p$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],g$=p$,E7=[...g$,"indexConfiguration","indexState","indexEntries"],vee=E7,bee=[...E7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS extends u${constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function ti(t,e){const r=xt(t);return Kc.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function z0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function y$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,r){this.comparator=e,this.root=r||_i.EMPTY}insert(e,r){return new Zr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new Zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vy(this.root,e,this.comparator,!1)}getReverseIterator(){return new vy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vy(this.root,e,this.comparator,!0)}}class vy{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??_i.RED,this.left=i??_i.EMPTY,this.right=a??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new _i(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return _i.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1;_i.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,r,n,i,a){return this}insert(e,r,n){return new _i(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new _C(this.data.getIterator())}getIteratorFrom(e){return new _C(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new zr(this.comparator);return r.data=e,r}}class _C{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function kd(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Sa([])}unionWith(e){let r=new zr(pn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Sa(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return uh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new v$("Invalid base64 string: "+a):a}})(e);return new Dn(r)}static fromUint8Array(e){const r=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Dn.EMPTY_BYTE_STRING=new Dn("");const xee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(t){if(_t(!!t),typeof t=="string"){let e=0;const r=xee.exec(t);if(_t(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:sn(t.seconds),nanos:sn(t.nanos)}}function sn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zc(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function j7(t){const e=t.mapValue.fields.__previous_value__;return N7(e)?j7(e):e}function dp(t){const e=Cl(t.mapValue.fields.__local_write_time__.timestampValue);return new gn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wee{constructor(e,r,n,i,a,s,c,d,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}}class b0{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new b0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof b0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ov={nullValue:"NULL_VALUE"};function x0(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?N7(t)?4:b$(t)?9007199254740991:dx(t)?10:11:gt()}function Eo(t,e){if(t===e)return!0;const r=x0(t);if(r!==x0(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dp(t).isEqual(dp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Cl(i.timestampValue),c=Cl(a.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Zc(i.bytesValue).isEqual(Zc(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return sn(i.geoPointValue.latitude)===sn(a.geoPointValue.latitude)&&sn(i.geoPointValue.longitude)===sn(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return sn(i.integerValue)===sn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=sn(i.doubleValue),c=sn(a.doubleValue);return s===c?up(s)===up(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return uh(t.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},c=a.mapValue.fields||{};if(wC(s)!==wC(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!Eo(s[d],c[d])))return!1;return!0})(t,e);default:return gt()}}function hp(t,e){return(t.values||[]).find((r=>Eo(r,e)))!==void 0}function Jc(t,e){if(t===e)return 0;const r=x0(t),n=x0(e);if(r!==n)return $t(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return $t(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const c=sn(a.integerValue||a.doubleValue),d=sn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return SC(t.timestampValue,e.timestampValue);case 4:return SC(dp(t),dp(e));case 5:return $t(t.stringValue,e.stringValue);case 6:return(function(a,s){const c=Zc(a),d=Zc(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const c=a.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=$t(c[f],d[f]);if(m!==0)return m}return $t(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const c=$t(sn(a.latitude),sn(s.latitude));return c!==0?c:$t(sn(a.longitude),sn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return TC(t.arrayValue,e.arrayValue);case 10:return(function(a,s){var c,d,f,m;const p=a.fields||{},y=s.fields||{},b=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=$t(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:TC(b,T)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Lc.mapValue&&s===Lc.mapValue)return 0;if(a===Lc.mapValue)return 1;if(s===Lc.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const y=$t(d[p],m[p]);if(y!==0)return y;const b=Jc(c[d[p]],f[m[p]]);if(b!==0)return b}return $t(d.length,m.length)})(t.mapValue,e.mapValue);default:throw gt()}}function SC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $t(t,e);const r=Cl(t),n=Cl(e),i=$t(r.seconds,n.seconds);return i!==0?i:$t(r.nanos,n.nanos)}function TC(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Jc(r[i],n[i]);if(a)return a}return $t(r.length,n.length)}function dh(t){return WS(t)}function WS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=Cl(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Zc(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return ot.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=WS(a);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${WS(r.fields[s])}`;return i+"}"})(t.mapValue):gt()}function fp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function XS(t){return!!t&&"integerValue"in t}function mp(t){return!!t&&"arrayValue"in t}function AC(t){return!!t&&"nullValue"in t}function EC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lv(t){return!!t&&"mapValue"in t}function dx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function $m(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return z0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=$m(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=$m(t.arrayValue.values[r]);return e}return Object.assign({},t)}function b$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const x$={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function _ee(t){return"nullValue"in t?ov:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?fp(b0.empty(),ot.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?dx(t)?x$:{mapValue:{}}:gt()}function See(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?fp(b0.empty(),ot.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?x$:"mapValue"in t?dx(t)?{mapValue:{}}:Lc:gt()}function NC(t,e){const r=Jc(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function jC(t,e){const r=Jc(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.value=e}static empty(){return new Ei({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!lv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=$m(r)}setAll(e){let r=pn.emptyPath(),n={},i=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,i),n={},i=[],r=c.popLast()}s?n[c.lastSegment()]=$m(s):i.push(c.lastSegment())}));const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());lv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];lv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){z0(r,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new Ei($m(this.value))}}function w$(t){const e=[];return z0(t.fields,((r,n)=>{const i=new pn([r]);if(lv(n)){const a=w$(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new Sa(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,r,n,i,a,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=c}static newInvalidDocument(e){return new on(e,0,At.min(),At.min(),At.min(),Ei.empty(),0)}static newFoundDocument(e,r,n,i){return new on(e,1,r,At.min(),n,i,0)}static newNoDocument(e,r){return new on(e,2,r,At.min(),At.min(),Ei.empty(),0)}static newUnknownDocument(e,r){return new on(e,3,r,At.min(),At.min(),Ei.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,r){this.position=e,this.inclusive=r}}function kC(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?n=ot.comparator(ot.fromName(s.referenceValue),r.key):n=Jc(s,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function CC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Eo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,r="asc"){this.field=e,this.dir=r}}function Tee(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _$=class{};class or extends _${constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Aee(e,r,n):r==="array-contains"?new jee(e,n):r==="in"?new j$(e,n):r==="not-in"?new kee(e,n):r==="array-contains-any"?new Cee(e,n):new or(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Eee(e,n):new Nee(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Jc(r,this.value)):r!==null&&x0(this.value)===x0(r)&&this.matchesComparison(Jc(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends _${constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Or(e,r)}matches(e){return fh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fh(t){return t.op==="and"}function QS(t){return t.op==="or"}function k7(t){return S$(t)&&fh(t)}function S$(t){for(const e of t.filters)if(e instanceof Or)return!1;return!0}function YS(t){if(t instanceof or)return t.field.canonicalString()+t.op.toString()+dh(t.value);if(k7(t))return t.filters.map((e=>YS(e))).join(",");{const e=t.filters.map((r=>YS(r))).join(",");return`${t.op}(${e})`}}function T$(t,e){return t instanceof or?(function(n,i){return i instanceof or&&n.op===i.op&&n.field.isEqual(i.field)&&Eo(n.value,i.value)})(t,e):t instanceof Or?(function(n,i){return i instanceof Or&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,c)=>a&&T$(s,i.filters[c])),!0):!1})(t,e):void gt()}function A$(t,e){const r=t.filters.concat(e);return Or.create(r,t.op)}function E$(t){return t instanceof or?(function(r){return`${r.field.canonicalString()} ${r.op} ${dh(r.value)}`})(t):t instanceof Or?(function(r){return r.op.toString()+" {"+r.getFilters().map(E$).join(" ,")+"}"})(t):"Filter"}class Aee extends or{constructor(e,r,n){super(e,r,n),this.key=ot.fromName(n.referenceValue)}matches(e){const r=ot.comparator(e.key,this.key);return this.matchesComparison(r)}}class Eee extends or{constructor(e,r){super(e,"in",r),this.keys=N$("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Nee extends or{constructor(e,r){super(e,"not-in",r),this.keys=N$("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function N$(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>ot.fromName(n.referenceValue)))}class jee extends or{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return mp(r)&&hp(r.arrayValue,this.value)}}class j$ extends or{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&hp(this.value.arrayValue,r)}}class kee extends or{constructor(e,r){super(e,"not-in",r)}matches(e){if(hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!hp(this.value.arrayValue,r)}}class Cee extends or{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!mp(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>hp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{constructor(e,r=null,n=[],i=[],a=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=c,this.ue=null}}function ZS(t,e=null,r=[],n=[],i=null,a=null,s=null){return new Oee(t,e,r,n,i,a,s)}function w0(t){const e=xt(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>YS(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),bg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>dh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>dh(n))).join(",")),e.ue=r}return e.ue}function xg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Tee(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!T$(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!CC(t.startAt,e.startAt)&&CC(t.endAt,e.endAt)}function Nv(t){return ot.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function jv(t,e){return t.filters.filter((r=>r instanceof or&&r.field.isEqual(e)))}function OC(t,e,r){let n=ov,i=!0;for(const a of jv(t,e)){let s=ov,c=!0;switch(a.op){case"<":case"<=":s=_ee(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,c=!1;break;case"!=":case"not-in":s=ov}NC({value:n,inclusive:i},{value:s,inclusive:c})<0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];NC({value:n,inclusive:i},{value:s,inclusive:r.inclusive})<0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}function IC(t,e,r){let n=Lc,i=!0;for(const a of jv(t,e)){let s=Lc,c=!0;switch(a.op){case">=":case">":s=See(a.value),c=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,c=!1;break;case"!=":case"not-in":s=Lc}jC({value:n,inclusive:i},{value:s,inclusive:c})>0&&(n=s,i=c)}if(r!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=r.position[a];jC({value:n,inclusive:i},{value:s,inclusive:r.inclusive})>0&&(n=s,i=r.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,r=null,n=[],i=[],a=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function k$(t,e,r,n,i,a,s,c){return new ef(t,e,r,n,i,a,s,c)}function wg(t){return new ef(t)}function RC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function C$(t){return t.collectionGroup!==null}function Vm(t){const e=xt(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new zr(pn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new pp(a,n))})),r.has(pn.keyField().canonicalString())||e.ce.push(new pp(pn.keyField(),n))}return e.ce}function Ga(t){const e=xt(t);return e.le||(e.le=Iee(e,Vm(t))),e.le}function Iee(t,e){if(t.limitType==="F")return ZS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new pp(i.field,a)}));const r=t.endAt?new hh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new hh(t.startAt.position,t.startAt.inclusive):null;return ZS(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function JS(t,e){const r=t.filters.concat([e]);return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function kv(t,e,r){return new ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function hx(t,e){return xg(Ga(t),Ga(e))&&t.limitType===e.limitType}function O$(t){return`${w0(Ga(t))}|lt:${t.limitType}`}function $d(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((i=>E$(i))).join(", ")}]`),bg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((i=>dh(i))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((i=>dh(i))).join(",")),`Target(${n})`})(Ga(t))}; limitType=${t.limitType})`}function _g(t,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):ot.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(t,e)&&(function(n,i){for(const a of Vm(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(n,i){return!(n.startAt&&!(function(s,c,d){const f=kC(s,c,d);return s.inclusive?f<=0:f<0})(n.startAt,Vm(n),i)||n.endAt&&!(function(s,c,d){const f=kC(s,c,d);return s.inclusive?f>=0:f>0})(n.endAt,Vm(n),i))})(t,e)}function I$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function R$(t){return(e,r)=>{let n=!1;for(const i of Vm(t)){const a=Ree(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function Ree(t,e,r){const n=t.field.isKeyField()?ot.comparator(e.key,r.key):(function(a,s,c){const d=s.data.field(a),f=c.data.field(a);return d!==null&&f!==null?Jc(d,f):gt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return gt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){z0(this.inner,((r,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return y$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=new Zr(ot.comparator);function Fa(){return Mee}const M$=new Zr(ot.comparator);function Im(...t){let e=M$;for(const r of t)e=e.insert(r.key,r);return e}function P$(t){let e=M$;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function yo(){return Fm()}function D$(){return Fm()}function Fm(){return new ou((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Pee=new Zr(ot.comparator),Dee=new zr(ot.comparator);function Jt(...t){let e=Dee;for(const r of t)e=e.add(r);return e}const Lee=new zr($t);function C7(){return Lee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O7(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:up(e)?"-0":e}}function L$(t){return{integerValue:""+t}}function Bee(t,e){return h$(e)?L$(e):O7(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this._=void 0}}function Uee(t,e,r){return t instanceof gp?(function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&N7(a)&&(a=j7(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}})(r,e):t instanceof _0?U$(t,e):t instanceof mh?z$(t,e):(function(i,a){const s=B$(i,a),c=MC(s)+MC(i.Pe);return XS(s)&&XS(i.Pe)?L$(c):O7(i.serializer,c)})(t,e)}function zee(t,e,r){return t instanceof _0?U$(t,e):t instanceof mh?z$(t,e):r}function B$(t,e){return t instanceof yp?(function(n){return XS(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class gp extends fx{}class _0 extends fx{constructor(e){super(),this.elements=e}}function U$(t,e){const r=$$(e);for(const n of t.elements)r.some((i=>Eo(i,n)))||r.push(n);return{arrayValue:{values:r}}}class mh extends fx{constructor(e){super(),this.elements=e}}function z$(t,e){let r=$$(e);for(const n of t.elements)r=r.filter((i=>!Eo(i,n)));return{arrayValue:{values:r}}}class yp extends fx{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function MC(t){return sn(t.integerValue||t.doubleValue)}function $$(t){return mp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(e,r){this.field=e,this.transform=r}}function $ee(t,e){return t.field.isEqual(e.field)&&(function(n,i){return n instanceof _0&&i instanceof _0||n instanceof mh&&i instanceof mh?uh(n.elements,i.elements,Eo):n instanceof yp&&i instanceof yp?Eo(n.Pe,i.Pe):n instanceof gp&&i instanceof gp})(t.transform,e.transform)}class Vee{constructor(e,r){this.version=e,this.transformResults=r}}class Rn{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mx{}function F$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sg(t.key,Rn.none()):new tf(t.key,t.data,Rn.none());{const r=t.data,n=Ei.empty();let i=new zr(pn.comparator);for(let a of e.fields)if(!i.has(a)){let s=r.field(a);s===null&&a.length>1&&(a=a.popLast(),s=r.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new Ul(t.key,n,new Sa(i.toArray()),Rn.none())}}function Fee(t,e,r){t instanceof tf?(function(i,a,s){const c=i.value.clone(),d=DC(i.fieldTransforms,a,s.transformResults);c.setAll(d),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof Ul?(function(i,a,s){if(!cv(i.precondition,a))return void a.convertToUnknownDocument(s.version);const c=DC(i.fieldTransforms,a,s.transformResults),d=a.data;d.setAll(q$(i)),d.setAll(c),a.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function qm(t,e,r,n){return t instanceof tf?(function(a,s,c,d){if(!cv(a.precondition,s))return c;const f=a.value.clone(),m=LC(a.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(t,e,r,n):t instanceof Ul?(function(a,s,c,d){if(!cv(a.precondition,s))return c;const f=LC(a.fieldTransforms,d,s),m=s.data;return m.setAll(q$(a)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(t,e,r,n):(function(a,s,c){return cv(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function qee(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=B$(n.transform,i||null);a!=null&&(r===null&&(r=Ei.empty()),r.set(n.field,a))}return r||null}function PC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&uh(n,i,((a,s)=>$ee(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tf extends mx{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ul extends mx{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function q$(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function DC(t,e,r){const n=new Map;_t(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],s=a.transform,c=e.data.field(a.field);n.set(a.field,zee(s,c,r[i]))}return n}function LC(t,e,r){const n=new Map;for(const i of t){const a=i.transform,s=r.data.field(i.field);n.set(i.field,Uee(a,s,e))}return n}class Sg extends mx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class I7 extends mx{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Fee(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=qm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=qm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=D$();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let c=this.applyToLocalView(s,a.mutatedFields);c=r.has(i.key)?null:c;const d=F$(s,c);d!==null&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(At.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),Jt())}isEqual(e){return this.batchId===e.batchId&&uh(this.mutations,e.mutations,((r,n)=>PC(r,n)))&&uh(this.baseMutations,e.baseMutations,((r,n)=>PC(r,n)))}}class M7{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){_t(e.mutations.length===n.length);let i=(function(){return Pee})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new M7(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hee{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn,dr;function H$(t){switch(t){default:return gt();case Ie.CANCELLED:case Ie.UNKNOWN:case Ie.DEADLINE_EXCEEDED:case Ie.RESOURCE_EXHAUSTED:case Ie.INTERNAL:case Ie.UNAVAILABLE:case Ie.UNAUTHENTICATED:return!1;case Ie.INVALID_ARGUMENT:case Ie.NOT_FOUND:case Ie.ALREADY_EXISTS:case Ie.PERMISSION_DENIED:case Ie.FAILED_PRECONDITION:case Ie.ABORTED:case Ie.OUT_OF_RANGE:case Ie.UNIMPLEMENTED:case Ie.DATA_LOSS:return!0}}function G$(t){if(t===void 0)return In("GRPC error has no .code"),Ie.UNKNOWN;switch(t){case Vn.OK:return Ie.OK;case Vn.CANCELLED:return Ie.CANCELLED;case Vn.UNKNOWN:return Ie.UNKNOWN;case Vn.DEADLINE_EXCEEDED:return Ie.DEADLINE_EXCEEDED;case Vn.RESOURCE_EXHAUSTED:return Ie.RESOURCE_EXHAUSTED;case Vn.INTERNAL:return Ie.INTERNAL;case Vn.UNAVAILABLE:return Ie.UNAVAILABLE;case Vn.UNAUTHENTICATED:return Ie.UNAUTHENTICATED;case Vn.INVALID_ARGUMENT:return Ie.INVALID_ARGUMENT;case Vn.NOT_FOUND:return Ie.NOT_FOUND;case Vn.ALREADY_EXISTS:return Ie.ALREADY_EXISTS;case Vn.PERMISSION_DENIED:return Ie.PERMISSION_DENIED;case Vn.FAILED_PRECONDITION:return Ie.FAILED_PRECONDITION;case Vn.ABORTED:return Ie.ABORTED;case Vn.OUT_OF_RANGE:return Ie.OUT_OF_RANGE;case Vn.UNIMPLEMENTED:return Ie.UNIMPLEMENTED;case Vn.DATA_LOSS:return Ie.DATA_LOSS;default:return gt()}}(dr=Vn||(Vn={}))[dr.OK=0]="OK",dr[dr.CANCELLED=1]="CANCELLED",dr[dr.UNKNOWN=2]="UNKNOWN",dr[dr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dr[dr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dr[dr.NOT_FOUND=5]="NOT_FOUND",dr[dr.ALREADY_EXISTS=6]="ALREADY_EXISTS",dr[dr.PERMISSION_DENIED=7]="PERMISSION_DENIED",dr[dr.UNAUTHENTICATED=16]="UNAUTHENTICATED",dr[dr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dr[dr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dr[dr.ABORTED=10]="ABORTED",dr[dr.OUT_OF_RANGE=11]="OUT_OF_RANGE",dr[dr.UNIMPLEMENTED=12]="UNIMPLEMENTED",dr[dr.INTERNAL=13]="INTERNAL",dr[dr.UNAVAILABLE=14]="UNAVAILABLE",dr[dr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gee(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kee=new h0([4294967295,4294967295],0);function BC(t){const e=Gee().encode(t),r=new Jz;return r.update(e),new Uint8Array(r.digest())}function UC(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new h0([r,n],0),new h0([i,a],0)]}class D7{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Rm(`Invalid padding: ${r}`);if(n<0)throw new Rm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Rm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Rm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=h0.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(h0.fromNumber(n)));return i.compare(Kee)===1&&(i=new h0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=BC(e),[n,i]=UC(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);if(!this.de(s))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new D7(a,i,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=BC(e),[n,i]=UC(r);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Rm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Ag.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Tg(At.min(),i,new Zr($t),Fa(),Jt())}}class Ag{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ag(n,r,Jt(),Jt(),Jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class K${constructor(e,r){this.targetId=e,this.me=r}}class W${constructor(e,r,n=Dn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class zC{constructor(){this.fe=0,this.ge=VC(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Jt(),r=Jt(),n=Jt();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:gt()}})),new Ag(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=VC()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Wee{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fa(),this.qe=$C(),this.Qe=new Zr($t)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:gt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,i)=>{this.ze(i)&&r(i)}))}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(Nv(a))if(n===0){const s=new ot(a.path);this.Ue(r,s,on.newNoDocument(s,At.min()))}else _t(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,f)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let s,c;try{s=Zc(n).toUint8Array()}catch(d){if(d instanceof v$)return op("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new D7(s,i,a)}catch(d){return op(d instanceof Rm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach((a=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,a,null),i++)})),i}rt(e){const r=new Map;this.Be.forEach(((a,s)=>{const c=this.Je(s);if(c){if(a.current&&Nv(c.target)){const d=new ot(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,on.newNoDocument(d,e))}a.be&&(r.set(s,a.ve()),a.Ce())}}));let n=Jt();this.qe.forEach(((a,s)=>{let c=!0;s.forEachWhile((d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(a))})),this.ke.forEach(((a,s)=>s.setReadTime(e)));const i=new Tg(e,r,this.Qe,this.ke,n);return this.ke=Fa(),this.qe=$C(),this.Qe=new Zr($t),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new zC,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new zr($t),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ge("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zC),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function $C(){return new Zr(ot.comparator)}function VC(){return new Zr(ot.comparator)}const Xee={asc:"ASCENDING",desc:"DESCENDING"},Qee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yee={and:"AND",or:"OR"};class Zee{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function eT(t,e){return t.useProto3Json||bg(e)?e:{value:e}}function ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jee(t,e){return ph(t,e.toTimestamp())}function ci(t){return _t(!!t),At.fromTimestamp((function(r){const n=Cl(r);return new gn(n.seconds,n.nanos)})(t))}function L7(t,e){return tT(t,e).canonicalString()}function tT(t,e){const r=(function(i){return new yr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?r:r.child(e)}function Q$(t){const e=yr.fromString(t);return _t(aV(e)),e}function vp(t,e){return L7(t.databaseId,e.path)}function xl(t,e){const r=Q$(e);if(r.get(1)!==t.databaseId.projectId)throw new et(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new et(Ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ot(J$(r))}function Y$(t,e){return L7(t.databaseId,e)}function Z$(t){const e=Q$(t);return e.length===4?yr.emptyPath():J$(e)}function rT(t){return new yr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J$(t){return _t(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function FC(t,e,r){return{name:vp(t,e),fields:r.value.mapValue.fields}}function ete(t,e,r){const n=xl(t,e.name),i=ci(e.updateTime),a=e.createTime?ci(e.createTime):At.min(),s=new Ei({mapValue:{fields:e.fields}}),c=on.newFoundDocument(n,i,a,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function tte(t,e){return"found"in e?(function(n,i){_t(!!i.found),i.found.name,i.found.updateTime;const a=xl(n,i.found.name),s=ci(i.found.updateTime),c=i.found.createTime?ci(i.found.createTime):At.min(),d=new Ei({mapValue:{fields:i.found.fields}});return on.newFoundDocument(a,s,c,d)})(t,e):"missing"in e?(function(n,i){_t(!!i.missing),_t(!!i.readTime);const a=xl(n,i.missing),s=ci(i.readTime);return on.newNoDocument(a,s)})(t,e):gt()}function rte(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:gt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,m){return f.useProto3Json?(_t(m===void 0||typeof m=="string"),Dn.fromBase64String(m||"")):(_t(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Dn.fromUint8Array(m||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(f){const m=f.code===void 0?Ie.UNKNOWN:G$(f.code);return new et(m,f.message||"")})(s);r=new W$(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=xl(t,n.document.name),a=ci(n.document.updateTime),s=n.document.createTime?ci(n.document.createTime):At.min(),c=new Ei({mapValue:{fields:n.document.fields}}),d=on.newFoundDocument(i,a,s,c),f=n.targetIds||[],m=n.removedTargetIds||[];r=new uv(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=xl(t,n.document),a=n.readTime?ci(n.readTime):At.min(),s=on.newNoDocument(i,a),c=n.removedTargetIds||[];r=new uv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=xl(t,n.document),a=n.removedTargetIds||[];r=new uv([],a,i,null)}else{if(!("filter"in e))return gt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new Hee(i,a),c=n.targetId;r=new K$(c,s)}}return r}function bp(t,e){let r;if(e instanceof tf)r={update:FC(t,e.key,e.value)};else if(e instanceof Sg)r={delete:vp(t,e.key)};else if(e instanceof Ul)r={update:FC(t,e.key,e.data),updateMask:lte(e.fieldMask)};else{if(!(e instanceof I7))return gt();r={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const c=s.transform;if(c instanceof gp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof mh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof yp)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw gt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:Jee(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:gt()})(t,e.precondition)),r}function nT(t,e){const r=e.currentDocument?(function(a){return a.updateTime!==void 0?Rn.updateTime(ci(a.updateTime)):a.exists!==void 0?Rn.exists(a.exists):Rn.none()})(e.currentDocument):Rn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,c){let d=null;if("setToServerValue"in c)_t(c.setToServerValue==="REQUEST_TIME"),d=new gp;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];d=new _0(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];d=new mh(m)}else"increment"in c?d=new yp(s,c.increment):gt();const f=pn.fromServerFormat(c.fieldPath);return new V$(f,d)})(t,i))):[];if(e.update){e.update.name;const i=xl(t,e.update.name),a=new Ei({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const f=d.fieldPaths||[];return new Sa(f.map((m=>pn.fromServerFormat(m))))})(e.updateMask);return new Ul(i,a,s,r,n)}return new tf(i,a,r,n)}if(e.delete){const i=xl(t,e.delete);return new Sg(i,r)}if(e.verify){const i=xl(t,e.verify);return new I7(i,r)}return gt()}function nte(t,e){return t&&t.length>0?(_t(e!==void 0),t.map((r=>(function(i,a){let s=i.updateTime?ci(i.updateTime):ci(a);return s.isEqual(At.min())&&(s=ci(a)),new Vee(s,i.transformResults||[])})(r,e)))):[]}function eV(t,e){return{documents:[Y$(t,e.path)]}}function tV(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Y$(t,i);const a=(function(f){if(f.length!==0)return iV(Or.create(f,"and"))})(e.filters);a&&(r.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:Vd(y.field),direction:ate(y.dir)}})(m)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=eT(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:r,parent:i}}function rV(t){let e=Z$(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){_t(n===1);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];r.where&&(a=(function(p){const y=nV(p);return y instanceof Or&&k7(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(p){return p.map((y=>(function(T){return new pp(Fd(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,bg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(p){const y=!!p.before,b=p.values||[];return new hh(b,y)})(r.startAt));let f=null;return r.endAt&&(f=(function(p){const y=!p.before,b=p.values||[];return new hh(b,y)})(r.endAt)),k$(e,i,s,a,c,"F",d,f)}function ite(t,e){const r=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function nV(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Fd(r.unaryFilter.field);return or.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Fd(r.unaryFilter.field);return or.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Fd(r.unaryFilter.field);return or.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fd(r.unaryFilter.field);return or.create(s,"!=",{nullValue:"NULL_VALUE"});default:return gt()}})(t):t.fieldFilter!==void 0?(function(r){return or.create(Fd(r.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return Or.create(r.compositeFilter.filters.map((n=>nV(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt()}})(r.compositeFilter.op))})(t):gt()}function ate(t){return Xee[t]}function ste(t){return Qee[t]}function ote(t){return Yee[t]}function Vd(t){return{fieldPath:t.canonicalString()}}function Fd(t){return pn.fromServerFormat(t.fieldPath)}function iV(t){return t instanceof or?(function(r){if(r.op==="=="){if(EC(r.value))return{unaryFilter:{field:Vd(r.field),op:"IS_NAN"}};if(AC(r.value))return{unaryFilter:{field:Vd(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(EC(r.value))return{unaryFilter:{field:Vd(r.field),op:"IS_NOT_NAN"}};if(AC(r.value))return{unaryFilter:{field:Vd(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(r.field),op:ste(r.op),value:r.value}}})(t):t instanceof Or?(function(r){const n=r.getFilters().map((i=>iV(i)));return n.length===1?n[0]:{compositeFilter:{op:ote(r.op),filters:n}}})(t):gt()}function lte(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function aV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,r,n,i,a=At.min(),s=At.min(),c=Dn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e){this.ct=e}}function cte(t,e){let r;if(e.document)r=ete(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ot.fromSegments(e.noDocument.path),i=T0(e.noDocument.readTime);r=on.newNoDocument(n,i),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const n=ot.fromSegments(e.unknownDocument.path),i=T0(e.unknownDocument.version);r=on.newUnknownDocument(n,i)}}return e.readTime&&r.setReadTime((function(i){const a=new gn(i[0],i[1]);return At.fromTimestamp(a)})(e.readTime)),r}function qC(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:Cv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:vp(a,s.key),fields:s.data.value.mapValue.fields,updateTime:ph(a,s.version.toTimestamp()),createTime:ph(a,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:S0(e.version)};else{if(!e.isUnknownDocument())return gt();n.unknownDocument={path:r.path.toArray(),version:S0(e.version)}}return n}function Cv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function S0(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function T0(t){const e=new gn(t.seconds,t.nanoseconds);return At.fromTimestamp(e)}function Ju(t,e){const r=(e.baseMutations||[]).map((a=>nT(t.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>nT(t.ct,a))),i=gn.fromMillis(e.localWriteTimeMs);return new R7(e.batchId,i,r,n)}function Mm(t){const e=T0(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?T0(t.lastLimboFreeSnapshotVersion):At.min();let n;return n=(function(a){return a.documents!==void 0})(t.query)?(function(a){return _t(a.documents.length===1),Ga(wg(Z$(a.documents[0])))})(t.query):(function(a){return Ga(rV(a))})(t.query),new gl(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,Dn.fromBase64String(t.resumeToken))}function oV(t,e){const r=S0(e.snapshotVersion),n=S0(e.lastLimboFreeSnapshotVersion);let i;i=Nv(e.target)?eV(t.ct,e.target):tV(t.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:w0(e.target),readTime:r,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function lV(t){const e=rV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kv(e,e.limit,"L"):e}function $w(t,e){return new P7(e.largestBatchId,nT(t.ct,e.overlayMutation))}function HC(t,e){const r=e.path.lastSegment();return[t,na(e.path.popLast()),r]}function GC(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:S0(n.readTime),documentKey:na(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{getBundleMetadata(e,r){return KC(e).get(r).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:T0(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,r){return KC(e).put((function(i){return{bundleId:i.id,createTime:S0(ci(i.createTime)),version:i.version}})(r))}getNamedQuery(e,r){return WC(e).get(r).next((n=>{if(n)return(function(a){return{name:a.name,query:lV(a.bundledQuery),readTime:T0(a.readTime)}})(n)}))}saveNamedQuery(e,r){return WC(e).put((function(i){return{name:i.name,readTime:S0(ci(i.readTime)),bundledQuery:i.bundledQuery}})(r))}}function KC(t){return ti(t,"bundles")}function WC(t){return ti(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new px(e,n)}getOverlay(e,r){return cm(e).get(HC(this.userId,r)).next((n=>n?$w(this.serializer,n):null))}getOverlays(e,r){const n=yo();return Te.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){const i=[];return n.forEach(((a,s)=>{const c=new P7(r,s);i.push(this.ht(e,c))})),Te.waitFor(i)}removeOverlaysForBatchId(e,r,n){const i=new Set;r.forEach((s=>i.add(na(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(cm(e).j("collectionPathOverlayIndex",c))})),Te.waitFor(a)}getOverlaysForCollection(e,r,n){const i=yo(),a=na(r),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return cm(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const f=$w(this.serializer,d);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,r,n,i){const a=yo();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return cm(e).J({index:"collectionGroupOverlayIndex",range:c},((d,f,m)=>{const p=$w(this.serializer,f);a.size()<i||p.largestBatchId===s?(a.set(p.getKey(),p),s=p.largestBatchId):m.done()})).next((()=>a))}ht(e,r){return cm(e).put((function(i,a,s){const[c,d,f]=HC(a,s.mutation.key);return{userId:a,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:bp(i.ct,s.mutation)}})(this.serializer,this.userId,r))}}function cm(t){return ti(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dte{Pt(e){return ti(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?Dn.fromUint8Array(n):Dn.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(sn(e.integerValue));else if("doubleValue"in e){const n=sn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),up(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=Cl(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Zc(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?b$(e)?this.dt(r,Number.MAX_SAFE_INTEGER):dx(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):gt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const i of Object.keys(n))this.Vt(i,r),this.Tt(n[i],r)}wt(e,r){var n,i;const a=e.fields||{};this.dt(r,53);const s="value",c=((i=(n=a[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(r,15),r.At(sn(c)),this.Vt(s,r),this.Tt(a[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const i of n)this.Tt(i,r)}yt(e,r){this.dt(r,37),ot.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}e0.vt=new e0;function hte(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function XC(t){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=hte(255&n[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class fte{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=r.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=r.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const r=this.qt(e),n=XC(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=255&r[i]}Kt(e){const r=this.qt(e),n=XC(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=r.length-n;i<r.length;++i)this.buffer[this.position++]=~(255&r[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let i=1;i<r.length;++i)r[i]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class mte{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class pte{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class um{constructor(){this.jt=new fte,this.Ht=new mte(this.jt),this.Jt=new pte(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,r,n,i){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new t0(this.indexId,this.documentKey,this.arrayValue,n)}}function Tc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=QC(t.arrayValue,e.arrayValue),r!==0?r:(r=QC(t.directionalValue,e.directionalValue),r!==0?r:ot.comparator(t.documentKey,e.documentKey)))}function QC(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.Xt=new zr(((r,n)=>pn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(_t(e.collectionGroup===this.collectionId),this.nn)return!1;const r=GS(e);if(r!==void 0&&!this.sn(r))return!1;const n=Wu(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.sn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new zr(pn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new av(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new av(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new av(n.field,n.dir==="asc"?0:1)));return new Ev(Ev.UNKNOWN_ID,this.collectionId,r,cp.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cV(t){var e,r;if(_t(t instanceof or||t instanceof Or),t instanceof or){if(t instanceof j$){const i=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((a=>or.create(t.field,"==",a))))||[];return Or.create(i,"or")}return t}const n=t.filters.map((i=>cV(i)));return Or.create(n,t.op)}function gte(t){if(t.getFilters().length===0)return[];const e=sT(cV(t));return _t(uV(e)),iT(e)||aT(e)?[e]:e.getFilters()}function iT(t){return t instanceof or}function aT(t){return t instanceof Or&&k7(t)}function uV(t){return iT(t)||aT(t)||(function(r){if(r instanceof Or&&QS(r)){for(const n of r.getFilters())if(!iT(n)&&!aT(n))return!1;return!0}return!1})(t)}function sT(t){if(_t(t instanceof or||t instanceof Or),t instanceof or)return t;if(t.filters.length===1)return sT(t.filters[0]);const e=t.filters.map((n=>sT(n)));let r=Or.create(e,t.op);return r=Ov(r),uV(r)?r:(_t(r instanceof Or),_t(fh(r)),_t(r.filters.length>1),r.filters.reduce(((n,i)=>B7(n,i))))}function B7(t,e){let r;return _t(t instanceof or||t instanceof Or),_t(e instanceof or||e instanceof Or),r=t instanceof or?e instanceof or?(function(i,a){return Or.create([i,a],"and")})(t,e):ZC(t,e):e instanceof or?ZC(e,t):(function(i,a){if(_t(i.filters.length>0&&a.filters.length>0),fh(i)&&fh(a))return A$(i,a.getFilters());const s=QS(i)?i:a,c=QS(i)?a:i,d=s.filters.map((f=>B7(f,c)));return Or.create(d,"or")})(t,e),Ov(r)}function ZC(t,e){if(fh(e))return A$(e,t.getFilters());{const r=e.filters.map((n=>B7(t,n)));return Or.create(r,"or")}}function Ov(t){if(_t(t instanceof or||t instanceof Or),t instanceof or)return t;const e=t.getFilters();if(e.length===1)return Ov(e[0]);if(S$(t))return t;const r=e.map((i=>Ov(i))),n=[];return r.forEach((i=>{i instanceof or?n.push(i):i instanceof Or&&(i.op===t.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:Or.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yte{constructor(){this.un=new U7}addToCollectionParentIndex(e,r){return this.un.add(r),Te.resolve()}getCollectionParents(e,r){return Te.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Te.resolve()}deleteFieldIndex(e,r){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,r){return Te.resolve()}getDocumentsMatchingTarget(e,r){return Te.resolve(null)}getIndexType(e,r){return Te.resolve(0)}getFieldIndexes(e,r){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,r){return Te.resolve(Qa.min())}getMinOffsetFromCollectionGroup(e,r){return Te.resolve(Qa.min())}updateCollectionGroup(e,r,n){return Te.resolve()}updateIndexEntries(e,r){return Te.resolve()}}class U7{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new zr(yr.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new zr(yr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by=new Uint8Array(0);class vte{constructor(e,r){this.databaseId=r,this.cn=new U7,this.ln=new ou((n=>w0(n)),((n,i)=>xg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),i=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const a={collectionId:n,parent:na(i)};return JC(e).put(a)}return Te.resolve()}getCollectionParents(e,r){const n=[],i=IDBKeyRange.bound([r,""],[s$(r),""],!1,!0);return JC(e).U(i).next((a=>{for(const s of a){if(s.collectionId!==r)break;n.push(go(s.parent))}return n}))}addFieldIndex(e,r){const n=dm(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete i.indexId;const a=n.add(i);if(r.indexState){const s=Od(e);return a.next((c=>{s.put(GC(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return a.next()}deleteFieldIndex(e,r){const n=dm(e),i=Od(e),a=Cd(e);return n.delete(r.indexId).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=dm(e),n=Cd(e),i=Od(e);return r.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,r){return Te.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new YC(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,r){const n=Cd(e);let i=!0;const a=new Map;return Te.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{i&&(i=!!c),a.set(s,c)})))).next((()=>{if(i){let s=Jt();const c=[];return Te.forEach(a,((d,f)=>{Ge("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((z=>`${z.fieldPath}:${z.kind}`)).join(",")}`})(d)} to execute ${w0(r)}`);const m=(function(C,z){const O=GS(z);if(O===void 0)return null;for(const B of jv(C,O.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null})(f,d),p=(function(C,z){const O=new Map;for(const B of Wu(z))for(const E of jv(C,B.fieldPath))switch(E.op){case"==":case"in":O.set(B.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return O.set(B.fieldPath.canonicalString(),E.value),Array.from(O.values())}return null})(f,d),y=(function(C,z){const O=[];let B=!0;for(const E of Wu(z)){const A=E.kind===0?OC(C,E.fieldPath,C.startAt):IC(C,E.fieldPath,C.startAt);O.push(A.value),B&&(B=A.inclusive)}return new hh(O,B)})(f,d),b=(function(C,z){const O=[];let B=!0;for(const E of Wu(z)){const A=E.kind===0?IC(C,E.fieldPath,C.endAt):OC(C,E.fieldPath,C.endAt);O.push(A.value),B&&(B=A.inclusive)}return new hh(O,B)})(f,d),T=this.In(d,f,y),S=this.In(d,f,b),w=this.Tn(d,f,p),N=this.En(d.indexId,m,T,y.inclusive,S,b.inclusive,w);return Te.forEach(N,(I=>n.G(I,r.limit).next((C=>{C.forEach((z=>{const O=ot.fromSegments(z.documentKey);s.has(O)||(s=s.add(O),c.push(O))}))}))))})).next((()=>c))}return Te.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=gte(Or.create(e.filters,"and")).map((n=>ZS(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,i,a,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,a.length),f=d/(r!=null?r.length:1),m=[];for(let p=0;p<d;++p){const y=r?this.dn(r[p/f]):by,b=this.An(e,y,n[p%f],i),T=this.Rn(e,y,a[p%f],s),S=c.map((w=>this.An(e,y,w,!0)));m.push(...this.createRange(b,T,S))}return m}An(e,r,n,i){const a=new t0(e,ot.empty(),r,n);return i?a:a.Zt()}Rn(e,r,n,i){const a=new t0(e,ot.empty(),r,n);return i?a.Zt():a}Pn(e,r){const n=new YC(r),i=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const c of a)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const i=this.hn(r);return Te.forEach(i,(a=>this.Pn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(d){let f=new zr(pn.comparator),m=!1;for(const p of d.filters)for(const y of p.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?m=!0:f=f.add(y.field));for(const p of d.orderBy)p.field.isKeyField()||(f=f.add(p.field));return f.size+(m?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&i.length>1&&n===2?1:n))}Vn(e,r){const n=new um;for(const i of Wu(e)){const a=r.data.field(i.fieldPath);if(a==null)return null;const s=n.Yt(i.kind);e0.vt.It(a,s)}return n.zt()}dn(e){const r=new um;return e0.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new um;return e0.vt.It(fp(this.databaseId,r),n.Yt((function(a){const s=Wu(a);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let i=[];i.push(new um);let a=0;for(const s of Wu(e)){const c=n[a++];for(const d of i)if(this.fn(r,s.fieldPath)&&mp(c))i=this.gn(i,s,c);else{const f=d.Yt(s.kind);e0.vt.It(c,f)}}return this.pn(i)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const c of i){const d=new um;d.seed(c.zt()),e0.vt.It(s,d.Yt(r.kind)),a.push(d)}return a}fn(e,r){return!!e.filters.find((n=>n instanceof or&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=dm(e),i=Od(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((a=>{const s=[];return Te.forEach(a,(c=>i.get([c.indexId,this.uid]).next((d=>{s.push((function(m,p){const y=p?new cp(p.sequenceNumber,new Qa(T0(p.readTime),new ot(go(p.documentKey)),p.largestBatchId)):cp.empty(),b=m.fields.map((([T,S])=>new av(pn.fromServerFormat(T),S)));return new Ev(m.indexId,m.collectionGroup,b,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:$t(n.collectionGroup,i.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const i=dm(e),a=Od(e);return this.yn(e).next((s=>i.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Te.forEach(c,(d=>a.put(GC(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return Te.forEach(r,((i,a)=>{const s=n.get(i.collectionGroup);return(s?Te.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(n.set(i.collectionGroup,c),Te.forEach(c,(d=>this.wn(e,i,d).next((f=>{const m=this.Sn(a,d);return f.isEqual(m)?Te.resolve():this.bn(e,a,d,f,m)})))))))}))}Dn(e,r,n,i){return Cd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,i){return Cd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const i=Cd(e);let a=new zr(Tc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{a=a.add(new t0(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>a))}Sn(e,r){let n=new zr(Tc);const i=this.Vn(r,e);if(i==null)return n;const a=GS(r);if(a!=null){const s=e.data.field(a.fieldPath);if(mp(s))for(const c of s.arrayValue.values||[])n=n.add(new t0(r.indexId,e.key,this.dn(c),i))}else n=n.add(new t0(r.indexId,e.key,by,i));return n}bn(e,r,n,i,a){Ge("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,f,m,p,y){const b=d.getIterator(),T=f.getIterator();let S=kd(b),w=kd(T);for(;S||w;){let N=!1,I=!1;if(S&&w){const C=m(S,w);C<0?I=!0:C>0&&(N=!0)}else S!=null?I=!0:N=!0;N?(p(w),w=kd(T)):I?(y(S),S=kd(b)):(S=kd(b),w=kd(T))}})(i,a,Tc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),Te.waitFor(s)}yn(e){let r=1;return Od(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),r=i.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>Tc(s,c))).filter(((s,c,d)=>!c||Tc(s,d[c-1])!==0));const i=[];i.push(e);for(const s of n){const c=Tc(s,e),d=Tc(s,r);if(c===0)i[0]=e.Zt();else if(c>0&&d<0)i.push(s),i.push(s.Zt());else if(d>0)break}i.push(r);const a=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const c=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,by,[]],d=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,by,[]];a.push(IDBKeyRange.bound(c,d))}return a}Cn(e,r){return Tc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(eO)}getMinOffset(e,r){return Te.mapArray(this.hn(r),(n=>this.Pn(e,n).next((i=>i||gt())))).next(eO)}}function JC(t){return ti(t,"collectionParents")}function Cd(t){return ti(t,"indexEntries")}function dm(t){return ti(t,"indexConfiguration")}function Od(t){return ti(t,"indexState")}function eO(t){_t(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const i=t[n].indexState.offset;T7(i,e)<0&&(e=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new Qa(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class va{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new va(e,va.DEFAULT_COLLECTION_PERCENTILE,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(t,e,r){const n=t.store("mutations"),i=t.store("documentMutations"),a=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((m,p,y)=>(c++,y.delete())));a.push(d.next((()=>{_t(c===1)})));const f=[];for(const m of r.mutations){const p=f$(e,m.key.path,r.batchId);a.push(i.delete(p)),f.push(m.key)}return Te.waitFor(a).next((()=>f))}function Iv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw gt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */va.DEFAULT_COLLECTION_PERCENTILE=10,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,va.DEFAULT=new va(41943040,va.DEFAULT_COLLECTION_PERCENTILE,va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),va.DISABLED=new va(-1,0,0);class gx{constructor(e,r,n,i){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,r,n,i){_t(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new gx(a,r,n,i)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).J({index:"userMutationsIndex",range:n},((i,a,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,i){const a=qd(e),s=Ac(e);return s.add({}).next((c=>{_t(typeof c=="number");const d=new R7(c,r,n,i),f=(function(b,T,S){const w=S.baseMutations.map((I=>bp(b.ct,I))),N=S.mutations.map((I=>bp(b.ct,I)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:N}})(this.serializer,this.userId,d),m=[];let p=new zr(((y,b)=>$t(y.canonicalString(),b.canonicalString())));for(const y of i){const b=f$(this.userId,y.key.path,c);p=p.add(y.key.path.popLast()),m.push(s.put(f)),m.push(a.put(b,ree))}return p.forEach((y=>{m.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Te.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,r){return Ac(e).get(r).next((n=>n?(_t(n.userId===this.userId),Ju(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Te.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const i=n.keys();return this.Fn[r]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return Ac(e).J({index:"userMutationsIndex",range:i},((s,c,d)=>{c.userId===this.userId&&(_t(c.batchId>=n),a=Ju(this.serializer,c)),d.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ac(e).J({index:"userMutationsIndex",range:r,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ac(e).U("userMutationsIndex",r).next((n=>n.map((i=>Ju(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=sv(this.userId,r.path),i=IDBKeyRange.lowerBound(n),a=[];return qd(e).J({range:i},((s,c,d)=>{const[f,m,p]=s,y=go(m);if(f===this.userId&&r.path.isEqual(y))return Ac(e).get(p).next((b=>{if(!b)throw gt();_t(b.userId===this.userId),a.push(Ju(this.serializer,b))}));d.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new zr($t);const i=[];return r.forEach((a=>{const s=sv(this.userId,a.path),c=IDBKeyRange.lowerBound(s),d=qd(e).J({range:c},((f,m,p)=>{const[y,b,T]=f,S=go(b);y===this.userId&&a.path.isEqual(S)?n=n.add(T):p.done()}));i.push(d)})),Te.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1,a=sv(this.userId,n),s=IDBKeyRange.lowerBound(a);let c=new zr($t);return qd(e).J({range:s},((d,f,m)=>{const[p,y,b]=d,T=go(y);p===this.userId&&n.isPrefixOf(T)?T.length===i&&(c=c.add(b)):m.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],i=[];return r.forEach((a=>{i.push(Ac(e).get(a).next((s=>{if(s===null)throw gt();_t(s.userId===this.userId),n.push(Ju(this.serializer,s))})))})),Te.waitFor(i).next((()=>n))}removeMutationBatch(e,r){return dV(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Te.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Te.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return qd(e).J({range:n},((a,s,c)=>{if(a[0]===this.userId){const d=go(a[1]);i.push(d)}else c.done()})).next((()=>{_t(i.length===0)}))}))}containsKey(e,r){return hV(e,this.userId,r)}Nn(e){return fV(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function hV(t,e,r){const n=sv(e,r.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return qd(t).J({range:a,H:!0},((c,d,f)=>{const[m,p,y]=c;m===e&&p===i&&(s=!0),f.done()})).next((()=>s))}function Ac(t){return ti(t,"mutations")}function qd(t){return ti(t,"documentMutations")}function fV(t){return ti(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new A0(0)}static kn(){return new A0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bte{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new A0(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>At.fromTimestamp(new gn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=r,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),r>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=r),this.Qn(e,i))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>Id(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(_t(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let i=0;const a=[];return Id(e).J(((s,c)=>{const d=Mm(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))})).next((()=>Te.waitFor(a))).next((()=>i))}forEachTarget(e,r){return Id(e).J(((n,i)=>{const a=Mm(i);r(a)}))}qn(e){return rO(e).get("targetGlobalKey").next((r=>(_t(r!==null),r)))}Qn(e,r){return rO(e).put("targetGlobalKey",r)}Kn(e,r){return Id(e).put(oV(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=w0(r),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return Id(e).J({range:i,index:"queryTargetsIndex"},((s,c,d)=>{const f=Mm(c);xg(r,f.target)&&(a=f,d.done())})).next((()=>a))}addMatchingKeys(e,r,n){const i=[],a=Rc(e);return r.forEach((s=>{const c=na(s.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,s))})),Te.waitFor(i)}removeMatchingKeys(e,r,n){const i=Rc(e);return Te.forEach(r,(a=>{const s=na(a.path);return Te.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,r){const n=Rc(e),i=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),i=Rc(e);let a=Jt();return i.J({range:n,H:!0},((s,c,d)=>{const f=go(s[1]),m=new ot(f);a=a.add(m)})).next((()=>a))}containsKey(e,r){const n=na(r.path),i=IDBKeyRange.bound([n],[s$(n)],!1,!0);let a=0;return Rc(e).J({index:"documentTargetsIndex",H:!0,range:i},(([s,c],d,f)=>{s!==0&&(a++,f.done())})).next((()=>a>0))}ot(e,r){return Id(e).get(r).next((n=>n?Mm(n):null))}}function Id(t){return ti(t,"targets")}function rO(t){return ti(t,"targetGlobal")}function Rc(t){return ti(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO([t,e],[r,n]){const i=$t(t,r);return i===0?$t(e,n):i}class xte{constructor(e){this.Un=e,this.buffer=new zr(nO),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();nO(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class wte{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){su(r)?Ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await au(r)}await this.Hn(3e5)}))}}class _te{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Te.resolve(_a.oe);const n=new xte(r);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(tO)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tO):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,i,a,s,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,c=Date.now(),this.removeTargets(e,n,r)))).next((p=>(a=p,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),zd()<=sr.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${p} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function Ste(t,e){return new _te(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(e,r){this.db=e,this.garbageCollector=Ste(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((i=>n+i))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,i)=>r(i)))}addReference(e,r,n){return xy(e,n)}removeReference(e,r,n){return xy(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return xy(e,r)}nr(e,r){return(function(i,a){let s=!1;return fV(i).Y((c=>hV(i,c,a).next((d=>(d&&(s=!0),Te.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((f=>{if(!f)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,At.min()),Rc(e).delete((function(p){return[0,na(p.path)]})(s)))))}));i.push(d)}})).next((()=>Te.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return xy(e,r)}tr(e,r){const n=Rc(e);let i,a=_a.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:f})=>{s===0?(a!==_a.oe&&r(new ot(go(i)),a),a=f,i=d):a=_a.oe})).next((()=>{a!==_a.oe&&r(new ot(go(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xy(t,e){return Rc(t).put((function(n,i){return{targetId:0,path:na(n.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.changes=new ou((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Te.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return Bu(e).put(n)}removeEntry(e,r,n){return Bu(e).delete((function(a,s){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Cv(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=on.newInvalidDocument(r);return Bu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hm(r))},((i,a)=>{n=this.ir(r,a)})).next((()=>n))}sr(e,r){let n={size:0,document:on.newInvalidDocument(r)};return Bu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(hm(r))},((i,a)=>{n={document:this.ir(r,a),size:Iv(a)}})).next((()=>n))}getEntries(e,r){let n=Fa();return this._r(e,r,((i,a)=>{const s=this.ir(i,a);n=n.insert(i,s)})).next((()=>n))}ar(e,r){let n=Fa(),i=new Zr(ot.comparator);return this._r(e,r,((a,s)=>{const c=this.ir(a,s);n=n.insert(a,c),i=i.insert(a,Iv(s))})).next((()=>({documents:n,ur:i})))}_r(e,r,n){if(r.isEmpty())return Te.resolve();let i=new zr(sO);r.forEach((d=>i=i.add(d)));const a=IDBKeyRange.bound(hm(i.first()),hm(i.last())),s=i.getIterator();let c=s.getNext();return Bu(e).J({index:"documentKeyIndex",range:a},((d,f,m)=>{const p=ot.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&sO(c,p)<0;)n(c,null),c=s.getNext();c&&c.isEqual(p)&&(n(c,f),c=s.hasNext()?s.getNext():null),c?m.$(hm(c)):m.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,i,a){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),Cv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bu(e).U(IDBKeyRange.bound(c,d,!0)).next((f=>{a==null||a.incrementDocumentReadCount(f.length);let m=Fa();for(const p of f){const y=this.ir(ot.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);y.isFoundDocument()&&(_g(r,y)||i.has(y.key))&&(m=m.insert(y.key,y))}return m}))}getAllFromCollectionGroup(e,r,n,i){let a=Fa();const s=aO(r,n),c=aO(r,Qa.max());return Bu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,f,m)=>{const p=this.ir(ot.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(p.key,p),a.size===i&&m.done()})).next((()=>a))}newChangeBuffer(e){return new Ete(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return iO(e).get("remoteDocumentGlobalKey").next((r=>(_t(!!r),r)))}rr(e,r){return iO(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=cte(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(At.min())))return n}return on.newInvalidDocument(e)}}function pV(t){return new Ate(t)}class Ete extends mV{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new ou((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const r=[];let n=0,i=new zr(((a,s)=>$t(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const c=this.lr.get(a);if(r.push(this.cr.removeEntry(e,a,c.readTime)),s.isValidDocument()){const d=qC(this.cr.serializer,s);i=i.add(a.path.popLast());const f=Iv(d);n+=f-c.size,r.push(this.cr.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=qC(this.cr.serializer,s.convertToNoDocument(At.min()));r.push(this.cr.addEntry(e,a,d))}})),i.forEach((a=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),r.push(this.cr.updateMetadata(e,n)),Te.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:i})=>(i.forEach(((a,s)=>{this.lr.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function iO(t){return ti(t,"remoteDocumentGlobal")}function Bu(t){return ti(t,"remoteDocumentsV14")}function hm(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aO(t,e){const r=e.documentKey.path.toArray();return[t,Cv(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function sO(t,e){const r=t.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<r.length-2&&a<n.length-2;++a)if(i=$t(r[a],n[a]),i)return i;return i=$t(r.length,n.length),i||(i=$t(r[r.length-2],n[n.length-2]),i||$t(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nte{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,r)))).next((i=>(n!==null&&qm(n.mutation,i,Sa.empty(),gn.now()),i)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,Jt()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=Jt()){const i=yo();return this.populateOverlays(e,i,r).next((()=>this.computeViews(e,r,i,n).next((a=>{let s=Im();return a.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=yo();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,Jt())))}populateOverlays(e,r,n){const i=[];return n.forEach((a=>{r.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,i){let a=Fa();const s=Fm(),c=(function(){return Fm()})();return r.forEach(((d,f)=>{const m=n.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof Ul)?a=a.insert(f.key,f):m!==void 0?(s.set(f.key,m.mutation.getFieldMask()),qm(m.mutation,f,m.mutation.getFieldMask(),gn.now())):s.set(f.key,Sa.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,m)=>s.set(f,m))),r.forEach(((f,m)=>{var p;return c.set(f,new Nte(m,(p=s.get(f))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=Fm();let i=new Zr(((s,c)=>s-c)),a=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const f=r.get(d);if(f===null)return;let m=n.get(d)||Sa.empty();m=c.applyToLocalView(f,m),n.set(d,m);const p=(i.get(c.batchId)||Jt()).add(d);i=i.insert(c.batchId,p)}))})).next((()=>{const s=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,p=D$();m.forEach((y=>{if(!a.has(y)){const b=F$(r.get(y),n.get(y));b!==null&&p.set(y,b),a=a.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return Te.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,i){return(function(s){return ot.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):C$(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):Te.resolve(yo());let c=-1,d=a;return s.next((f=>Te.forEach(f,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?Te.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,Jt()))).next((m=>({batchId:c,changes:P$(m)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ot(r)).next((n=>{let i=Im();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let s=Im();return this.indexManager.getCollectionParents(e,a).next((c=>Te.forEach(c,(d=>{const f=(function(p,y){return new ef(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(r,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((m=>{m.forEach(((p,y)=>{s=s.insert(p,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i)))).next((s=>{a.forEach(((d,f)=>{const m=f.getKey();s.get(m)===null&&(s=s.insert(m,on.newInvalidDocument(m)))}));let c=Im();return s.forEach(((d,f)=>{const m=a.get(d);m!==void 0&&qm(m.mutation,f,Sa.empty(),gn.now()),_g(r,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jte{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Te.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(i){return{id:i.id,version:i.version,createTime:ci(i.createTime)}})(r)),Te.resolve()}getNamedQuery(e,r){return Te.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(i){return{name:i.name,query:lV(i.bundledQuery),readTime:ci(i.readTime)}})(r)),Te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kte{constructor(){this.overlays=new Zr(ot.comparator),this.Ir=new Map}getOverlay(e,r){return Te.resolve(this.overlays.get(r))}getOverlays(e,r){const n=yo();return Te.forEach(r,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((i,a)=>{this.ht(e,r,a)})),Te.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),Te.resolve()}getOverlaysForCollection(e,r,n){const i=yo(),a=r.length+1,s=new ot(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!r.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return Te.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new Zr(((f,m)=>f-m));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===r&&f.largestBatchId>n){let m=a.get(f.largestBatchId);m===null&&(m=yo(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=yo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=i)););return Te.resolve(c)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new P7(r,n));let a=this.Ir.get(r);a===void 0&&(a=Jt(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte{constructor(){this.sessionToken=Dn.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(){this.Tr=new zr(oi.Er),this.dr=new zr(oi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new oi(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new oi(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new ot(new yr([])),n=new oi(r,e),i=new oi(r,e+1),a=[];return this.dr.forEachInRange([n,i],(s=>{this.Vr(s),a.push(s.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new ot(new yr([])),n=new oi(r,e),i=new oi(r,e+1);let a=Jt();return this.dr.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const r=new oi(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class oi{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return ot.comparator(e.key,r.key)||$t(e.wr,r.wr)}static Ar(e,r){return $t(e.wr,r.wr)||ot.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new zr(oi.Er)}checkEmpty(e){return Te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new R7(a,r,n,i);this.mutationQueue.push(s);for(const c of i)this.br=this.br.add(new oi(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Te.resolve(s)}lookupMutationBatch(e,r){return Te.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return Te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new oi(r,0),i=new oi(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],(s=>{const c=this.Dr(s.wr);a.push(c)})),Te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new zr($t);return r.forEach((i=>{const a=new oi(i,0),s=new oi(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],(c=>{n=n.add(c.wr)}))})),Te.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;ot.isDocumentKey(a)||(a=a.child(""));const s=new oi(new ot(a),0);let c=new zr($t);return this.br.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.wr)),!0)}),s),Te.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&r.push(i)})),r}removeMutationBatch(e,r){_t(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Te.forEach(r.mutations,(i=>{const a=new oi(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new oi(r,0),i=this.br.firstAfterOrEqual(n);return Te.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e){this.Mr=e,this.docs=(function(){return new Zr(ot.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Te.resolve(n?n.document.mutableCopy():on.newInvalidDocument(r))}getEntries(e,r){let n=Fa();return r.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():on.newInvalidDocument(i))})),Te.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=Fa();const s=r.path,c=new ot(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||T7(l$(m),n)<=0||(i.has(m.key)||_g(r,m))&&(a=a.insert(m.key,m.mutableCopy()))}return Te.resolve(a)}getAllFromCollectionGroup(e,r,n,i){gt()}Or(e,r){return Te.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new Rte(this)}getSize(e){return Te.resolve(this.size)}}class Rte extends mV{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),Te.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mte{constructor(e){this.persistence=e,this.Nr=new ou((r=>w0(r)),xg),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Lr=0,this.Br=new z7,this.targetCount=0,this.kr=A0.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,i)=>r(i))),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Te.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new A0(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Te.resolve()}updateTargetData(e,r){return this.Kn(r),Te.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Te.waitFor(a).next((()=>i))}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Te.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Te.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),Te.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Te.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Te.resolve(n)}containsKey(e,r){return Te.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r){this.qr={},this.overlays={},this.Qr=new _a(0),this.Kr=!1,this.Kr=!0,this.$r=new Cte,this.referenceDelegate=e(this),this.Ur=new Mte(this),this.indexManager=new yte,this.remoteDocumentCache=(function(i){return new Ite(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new sV(r),this.Gr=new jte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new kte,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new Ote(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ge("MemoryPersistence","Starting transaction:",e);const i=new Pte(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,r){return Te.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Pte extends u${constructor(e){super(),this.currentSequenceNumber=e}}class yx{constructor(e){this.persistence=e,this.Jr=new z7,this.Yr=null}static Zr(e){return new yx(e)}get Xr(){if(this.Yr)return this.Yr;throw gt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Te.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Te.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Te.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Xr,(n=>{const i=ot.fromPath(n);return this.ei(e,i).next((a=>{a||r.removeEntry(i,At.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Te.or([()=>Te.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{constructor(e){this.serializer=e}O(e,r,n,i){const a=new ux("createOrUpgrade",r);n<1&&i>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0}),d.createObjectStore("documentMutations")})(e),oO(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=Te.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),oO(e)),s=s.next((()=>(function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(d,f){return f.store("mutations").U().next((m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0});const p=f.store("mutations"),y=m.map((b=>p.put(b)));return Te.waitFor(y)}))})(e,a)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.ni(a)))),n<6&&i>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&i>=7&&(s=s.next((()=>this.ii(a)))),n<8&&i>=8&&(s=s.next((()=>this.si(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.oi(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:mee});f.createIndex("collectionPathOverlayIndex",pee,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",gee,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:nee});f.createIndex("documentKeyIndex",iee),f.createIndex("collectionGroupIndex",aee)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.ai(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:uee}).createIndex("sequenceNumberIndex",dee,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:hee}).createIndex("documentKeyIndex",fee,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,i)=>{r+=Iv(i)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((i=>Te.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>Te.forEach(c,(d=>{_t(d.userId===a.userId);const f=Ju(this.serializer,d);return dV(e,a.userId,f).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return n.J(((s,c)=>{const d=new yr(s),f=(function(p){return[0,na(p)]})(d);a.push(r.get(f).next((m=>m?Te.resolve():(p=>r.put({targetId:0,path:na(p),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>Te.waitFor(a)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:cee});const n=r.store("collectionParents"),i=new U7,a=s=>{if(i.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:na(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new yr(s);return a(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],f)=>{const m=go(c);return a(m.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,i)=>{const a=Mm(i),s=oV(this.serializer,a);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),i=[];return n.J(((a,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(p){return p.document?new ot(yr.fromString(p.document.name).popFirst(5)):p.noDocument?ot.fromSegments(p.noDocument.path):p.unknownDocument?ot.fromSegments(p.unknownDocument.path):gt()})(s).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(c.put(f))})).next((()=>Te.waitFor(i)))}ai(e,r){const n=r.store("mutations"),i=pV(this.serializer),a=new yV(yx.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var f;let m=(f=c.get(d.userId))!==null&&f!==void 0?f:Jt();Ju(this.serializer,d).keys().forEach((p=>m=m.add(p))),c.set(d.userId,m)})),Te.forEach(c,((d,f)=>{const m=new Ui(f),p=px.lt(this.serializer,m),y=a.getIndexManager(m),b=gx.lt(m,this.serializer,y,a.referenceDelegate);return new gV(i,b,p,y).recalculateAndSaveOverlaysForDocumentKeys(new KS(r,_a.oe),d).next()}))}))}}function oO(t){t.createObjectStore("targetDocuments",{keyPath:oee}).createIndex("documentTargetsIndex",lee,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",see,{unique:!0}),t.createObjectStore("targetGlobal")}const Vw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $7{constructor(e,r,n,i,a,s,c,d,f,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=a,this.window=s,this.document=c,this.ci=f,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!$7.D())throw new et(Ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Tte(this,i),this.Ai=r+"main",this.serializer=new sV(d),this.Ri=new Kc(this.Ai,this.hi,new Dte(this.serializer)),this.$r=new dte,this.Ur=new bte(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pV(this.serializer),this.Gr=new ute,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new et(Ie.FAILED_PRECONDITION,Vw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new _a(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>wy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(su(e))return Ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return fm(e).get("owner").next((r=>Te.resolve(this.vi(r))))}Ci(e){return wy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=ti(r,"clientMetadata");return n.U().next((i=>{const a=this.xi(i,18e5),s=i.filter((c=>a.indexOf(c)===-1));return Te.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Te.resolve(!0):fm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new et(Ie.FAILED_PRECONDITION,Vw);return!1}}return!(!this.networkEnabled||!this.inForeground)||wy(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&Ge("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new KS(e,_a.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>wy(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return gx.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vte(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return px.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ge("IndexedDbPersistence","Starting transaction:",e);const i=r==="readonly"?"readonly":"readwrite",a=(function(d){return d===17?bee:d===16?vee:d===15?E7:d===14?g$:d===13?p$:d===12?yee:d===11?m$:void gt()})(this.hi);let s;return this.Ri.runTransaction(e,i,a,(c=>(s=new KS(c,this.Qr?this.Qr.next():_a.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw In(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new et(Ie.FAILED_PRECONDITION,c$);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return fm(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new et(Ie.FAILED_PRECONDITION,Vw)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fm(e).put("owner",r)}static D(){return Kc.D()}bi(e){const r=fm(e);return r.get("owner").next((n=>this.vi(n)?(Ge("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Te.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(In(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;mz()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return Ge("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return In("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){In("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fm(t){return ti(t,"owner")}function wy(t){return ti(t,"clientMetadata")}function vV(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Jt(),i=Jt();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new V7(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return mz()?8:d$(Jn())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.Zi(e,r,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Lte;return this.Xi(e,r,s).next((c=>{if(a.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>a.result))}es(e,r,n,i){return n.documentReadCount<this.ji?(zd()<=sr.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",$d(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Te.resolve()):(zd()<=sr.DEBUG&&Ge("QueryEngine","Query:",$d(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(zd()<=sr.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",$d(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ga(r))):Te.resolve())}Yi(e,r){if(RC(r))return Te.resolve(null);let n=Ga(r);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(r.limit!==null&&i===1&&(r=kv(r,null,"F"),n=Ga(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=Jt(...a);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.ts(r,c);return this.ns(r,f,s,d.readTime)?this.Yi(e,kv(r,null,"F")):this.rs(e,f,r,d)}))))})))))}Zi(e,r,n,i){return RC(r)||i.isEqual(At.min())?Te.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const s=this.ts(r,a);return this.ns(r,s,n,i)?Te.resolve(null):(zd()<=sr.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$d(r)),this.rs(e,s,r,o$(i,-1)).next((c=>c)))}))}ts(e,r){let n=new zr(R$(e));return r.forEach(((i,a)=>{_g(e,a)&&(n=n.add(a))})),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return zd()<=sr.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",$d(r)),this.Ji.getDocumentsMatchingQuery(e,r,Qa.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((a=>(r.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Zr($t),this._s=new ou((a=>w0(a)),xg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function xV(t,e,r,n){return new Bte(t,e,r,n)}async function wV(t,e){const r=xt(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],c=[];let d=Jt();for(const f of i){s.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of a){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return r.localDocuments.getDocuments(n,d).next((f=>({hs:f,removedBatchIds:s,addedBatchIds:c})))}))}))}function Ute(t,e){const r=xt(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,m){const p=f.batch,y=p.keys();let b=Te.resolve();return y.forEach((T=>{b=b.next((()=>m.getEntry(d,T))).next((S=>{const w=f.docVersions.get(T);_t(w!==null),S.version.compareTo(w)<0&&(p.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),m.addEntry(S)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(r,n,e,a).next((()=>a.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Jt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,i)))}))}function _V(t){const e=xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function zte(t,e){const r=xt(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];e.targetChanges.forEach(((m,p)=>{const y=i.get(p);if(!y)return;c.push(r.Ur.removeMatchingKeys(a,m.removedDocuments,p).next((()=>r.Ur.addMatchingKeys(a,m.addedDocuments,p))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(Dn.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,n)),i=i.insert(p,b),(function(S,w,N){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(y,b,m)&&c.push(r.Ur.updateTargetData(a,b))}));let d=Fa(),f=Jt();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push($te(a,s,e.documentUpdates).next((m=>{d=m.Ps,f=m.Is}))),!n.isEqual(At.min())){const m=r.Ur.getLastRemoteSnapshotVersion(a).next((p=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));c.push(m)}return Te.waitFor(c).next((()=>s.apply(a))).next((()=>r.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(r.os=i,a)))}function $te(t,e,r){let n=Jt(),i=Jt();return r.forEach((a=>n=n.add(a))),e.getEntries(t,n).next((a=>{let s=Fa();return r.forEach(((c,d)=>{const f=a.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(At.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):Ge("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ps:s,Is:i}}))}function Vte(t,e){const r=xt(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function Rv(t,e){const r=xt(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return r.Ur.getTargetData(n,e).next((a=>a?(i=a,Te.resolve(i)):r.Ur.allocateTargetId(n).next((s=>(i=new gl(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function gh(t,e,r){const n=xt(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!su(s))throw s;Ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function oT(t,e,r){const n=xt(t);let i=At.min(),a=Jt();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,f,m){const p=xt(d),y=p._s.get(m);return y!==void 0?Te.resolve(p.os.get(y)):p.Ur.getTargetData(f,m)})(n,s,Ga(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{a=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?i:At.min(),r?a:Jt()))).next((c=>(AV(n,I$(e),c),{documents:c,Ts:a})))))}function SV(t,e){const r=xt(t),n=xt(r.Ur),i=r.os.get(e);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((s=>s?s.target:null))))}function TV(t,e){const r=xt(t),n=r.us.get(e)||At.min();return r.persistence.runTransaction("Get new document changes","readonly",(i=>r.cs.getAllFromCollectionGroup(i,e,o$(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(AV(r,e,i),i)))}function AV(t,e,r){let n=t.us.get(e)||At.min();r.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),t.us.set(e,n)}function lO(t,e){return`firestore_clients_${t}_${e}`}function cO(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Fw(t,e){return`firestore_targets_${t}_${e}`}class Mv{constructor(e,r,n,i){this.user=e,this.batchId=r,this.state=n,this.error=i}static Rs(e,r,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new et(i.error.code,i.error.message))),s?new Mv(e,r,i.state,a):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new et(n.error.code,n.error.message))),a?new Hm(e,n.state,i):(In("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pv{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=C7();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=h$(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new Pv(e,a):(In("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class F7{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new F7(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lT{constructor(){this.activeTargetIds=C7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qw{constructor(e,r,n,i,a){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Zr($t),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=lO(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new lT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(lO(this.persistenceKey,n));if(i){const a=Pv.Rs(n,i);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Fw(this.persistenceKey,e));if(i){const a=Hm.Rs(e,i);a&&(n=a.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fw(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return Ge("SharedClientState","READ",e,r),r}setItem(e,r){Ge("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){Ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(Ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(a){let s=_a.oe;if(a!=null)try{const c=JSON.parse(a);_t(typeof c=="number"),s=c}catch(c){In("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==_a.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const i=new Mv(this.currentUser,e,r,n),a=cO(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Vs())}Qs(e){const r=cO(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const i=Fw(this.persistenceKey,e),a=new Hm(e,r,n);this.setItem(i,a.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return Pv.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Mv.Rs(new Ui(a),i,r)}Ys(e,r){const n=this.Ms.exec(e),i=Number(n[1]);return Hm.Rs(i,r)}Ls(e){return F7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(n),s=[],c=[];return a.forEach((d=>{i.has(d)||s.push(d)})),i.forEach((d=>{a.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=C7();return e.forEach(((n,i)=>{r=r.unionWith(i.activeTargetIds)})),r}}class EV{constructor(){this.so=new lT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new lT,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fte{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y=null;function Hw(){return _y===null?_y=(function(){return 268435456+Math.round(2147483648*Math.random())})():_y++,"0x"+_y.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hte{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="WebChannelConnection";class Gte extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,s){const c=Hw(),d=this.xo(r,n.toUriEncodedString());Ge("RestConnection",`Sending RPC '${r}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,a,s),this.No(r,d,f,i).then((m=>(Ge("RestConnection",`Received RPC '${r}' ${c}: `,m),m)),(m=>{throw op("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",d,"request:",i),m}))}Lo(r,n,i,a,s,c){return this.Mo(r,n,i,a,s)}Oo(r,n,i){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jh})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>r[s]=a)),i&&i.headers.forEach(((a,s)=>r[s]=a))}xo(r,n){const i=qte[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=Hw();return new Promise(((s,c)=>{const d=new e$;d.setWithCredentials(!0),d.listenOnce(t$.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case iv.NO_ERROR:const m=d.getResponseJson();Ge(Di,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),s(m);break;case iv.TIMEOUT:Ge(Di,`RPC '${e}' ${a} timed out`),c(new et(Ie.DEADLINE_EXCEEDED,"Request time out"));break;case iv.HTTP_ERROR:const p=d.getStatus();if(Ge(Di,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=(function(w){const N=w.toLowerCase().replace(/_/g,"-");return Object.values(Ie).indexOf(N)>=0?N:Ie.UNKNOWN})(b.status);c(new et(T,b.message))}else c(new et(Ie.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new et(Ie.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{Ge(Di,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);Ge(Di,`RPC '${e}' ${a} sending request:`,i),d.send(r,"POST",f,n,15)}))}Bo(e,r,n){const i=Hw(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i$(),c=n$(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const m=a.join("");Ge(Di,`Creating RPC '${e}' stream ${i}: ${m}`,d);const p=s.createWebChannel(m,d);let y=!1,b=!1;const T=new Hte({Io:w=>{b?Ge(Di,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(Ge(Di,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Ge(Di,`RPC '${e}' stream ${i} sending:`,w),p.send(w))},To:()=>p.close()}),S=(w,N,I)=>{w.listen(N,(C=>{try{I(C)}catch(z){setTimeout((()=>{throw z}),0)}}))};return S(p,Om.EventType.OPEN,(()=>{b||(Ge(Di,`RPC '${e}' stream ${i} transport opened.`),T.yo())})),S(p,Om.EventType.CLOSE,(()=>{b||(b=!0,Ge(Di,`RPC '${e}' stream ${i} transport closed`),T.So())})),S(p,Om.EventType.ERROR,(w=>{b||(b=!0,op(Di,`RPC '${e}' stream ${i} transport errored:`,w),T.So(new et(Ie.UNAVAILABLE,"The operation could not be completed")))})),S(p,Om.EventType.MESSAGE,(w=>{var N;if(!b){const I=w.data[0];_t(!!I);const C=I,z=C.error||((N=C[0])===null||N===void 0?void 0:N.error);if(z){Ge(Di,`RPC '${e}' stream ${i} received error:`,z);const O=z.status;let B=(function(R){const F=Vn[R];if(F!==void 0)return G$(F)})(O),E=z.message;B===void 0&&(B=Ie.INTERNAL,E="Unknown error status: "+O+" with message "+z.message),b=!0,T.So(new et(B,E)),p.close()}else Ge(Di,`RPC '${e}' stream ${i} received:`,I),T.bo(I)}})),S(c,r$.STAT_EVENT,(w=>{w.stat===HS.PROXY?Ge(Di,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===HS.NOPROXY&&Ge(Di,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(){return typeof window<"u"?window:null}function dv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t){return new Zee(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&Ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,r,n,i,a,s,c,d){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new q7(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ie.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===r&&this.P_(n,i)}),(n=>{e((()=>{const i=new et(Ie.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(Ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Kte extends jV{constructor(e,r,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=rte(this.serializer,e),n=(function(a){if(!("targetChange"in a))return At.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?At.min():s.readTime?ci(s.readTime):At.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=rT(this.serializer),r.addTarget=(function(a,s){let c;const d=s.target;if(c=Nv(d)?{documents:eV(a,d)}:{query:tV(a,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=X$(a,s.resumeToken);const f=eT(a,s.expectedCount);f!==null&&(c.expectedCount=f)}else if(s.snapshotVersion.compareTo(At.min())>0){c.readTime=ph(a,s.snapshotVersion.toTimestamp());const f=eT(a,s.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const n=ite(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=rT(this.serializer),r.removeTarget=e,this.a_(r)}}class Wte extends jV{constructor(e,r,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return _t(!!e.streamToken),this.lastStreamToken=e.streamToken,_t(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=nte(e.writeResults,e.commitTime),n=ci(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=rT(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>bp(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xte extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new et(Ie.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Mo(e,tT(r,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new et(Ie.UNKNOWN,a.toString())}))}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,tT(r,n),i,s,c,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Ie.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Qte{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):Ge("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yte{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((s=>{n.enqueueAndForget((async()=>{$0(this)&&(Ge("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const f=xt(d);f.L_.add(4),await Eg(f),f.q_.set("Unknown"),f.L_.delete(4),await bx(f)})(this))}))})),this.q_=new Qte(n,i)}}async function bx(t){if($0(t))for(const e of t.B_)await e(!0)}async function Eg(t){for(const e of t.B_)await e(!1)}function xx(t,e){const r=xt(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),K7(r)?G7(r):nf(r).r_()&&H7(r,e))}function yh(t,e){const r=xt(t),n=nf(r);r.N_.delete(e),n.r_()&&kV(r,e),r.N_.size===0&&(n.r_()?n.o_():$0(r)&&r.q_.set("Unknown"))}function H7(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}nf(t).A_(e)}function kV(t,e){t.Q_.xe(e),nf(t).R_(e)}function G7(t){t.Q_=new Wee({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nf(t).start(),t.q_.v_()}function K7(t){return $0(t)&&!nf(t).n_()&&t.N_.size>0}function $0(t){return xt(t).L_.size===0}function CV(t){t.Q_=void 0}async function Zte(t){t.q_.set("Online")}async function Jte(t){t.N_.forEach(((e,r)=>{H7(t,e)}))}async function ere(t,e){CV(t),K7(t)?(t.q_.M_(e),G7(t)):t.q_.set("Unknown")}async function tre(t,e,r){if(t.q_.set("Online"),e instanceof W$&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})(t,e)}catch(n){Ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Dv(t,n)}else if(e instanceof uv?t.Q_.Ke(e):e instanceof K$?t.Q_.He(e):t.Q_.We(e),!r.isEqual(At.min()))try{const n=await _V(t.localStore);r.compareTo(n)>=0&&await(function(a,s){const c=a.Q_.rt(s);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.N_.get(f);m&&a.N_.set(f,m.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,f)=>{const m=a.N_.get(d);if(!m)return;a.N_.set(d,m.withResumeToken(Dn.EMPTY_BYTE_STRING,m.snapshotVersion)),kV(a,d);const p=new gl(m.target,d,f,m.sequenceNumber);H7(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){Ge("RemoteStore","Failed to raise snapshot:",n),await Dv(t,n)}}async function Dv(t,e,r){if(!su(e))throw e;t.L_.add(1),await Eg(t),t.q_.set("Offline"),r||(r=()=>_V(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ge("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await bx(t)}))}function OV(t,e){return e().catch((r=>Dv(t,r,e)))}async function rf(t){const e=xt(t),r=eu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;rre(e);)try{const i=await Vte(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,nre(e,i)}catch(i){await Dv(e,i)}IV(e)&&RV(e)}function rre(t){return $0(t)&&t.O_.length<10}function nre(t,e){t.O_.push(e);const r=eu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function IV(t){return $0(t)&&!eu(t).n_()&&t.O_.length>0}function RV(t){eu(t).start()}async function ire(t){eu(t).p_()}async function are(t){const e=eu(t);for(const r of t.O_)e.m_(r.mutations)}async function sre(t,e,r){const n=t.O_.shift(),i=M7.from(n,e,r);await OV(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await rf(t)}async function ore(t,e){e&&eu(t).V_&&await(async function(n,i){if((function(s){return H$(s)&&s!==Ie.ABORTED})(i.code)){const a=n.O_.shift();eu(n).s_(),await OV(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await rf(n)}})(t,e),IV(t)&&RV(t)}async function dO(t,e){const r=xt(t);r.asyncQueue.verifyOperationInProgress(),Ge("RemoteStore","RemoteStore received new credentials");const n=$0(r);r.L_.add(3),await Eg(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await bx(r)}async function cT(t,e){const r=xt(t);e?(r.L_.delete(2),await bx(r)):e||(r.L_.add(2),await Eg(r),r.q_.set("Unknown"))}function nf(t){return t.K_||(t.K_=(function(r,n,i){const a=xt(r);return a.w_(),new Kte(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:Zte.bind(null,t),Ro:Jte.bind(null,t),mo:ere.bind(null,t),d_:tre.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),K7(t)?G7(t):t.q_.set("Unknown")):(await t.K_.stop(),CV(t))}))),t.K_}function eu(t){return t.U_||(t.U_=(function(r,n,i){const a=xt(r);return a.w_(),new Wte(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ire.bind(null,t),mo:ore.bind(null,t),f_:are.bind(null,t),g_:sre.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await rf(t)):(await t.U_.stop(),t.O_.length>0&&(Ge("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Ws,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const s=Date.now()+n,c=new W7(e,r,s,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function X7(t,e){if(In("AsyncQueue",`${e}: ${t}`),su(t))return new et(Ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this.comparator=e?(r,n)=>e(r,n)||ot.comparator(r.key,n.key):(r,n)=>ot.comparator(r.key,n.key),this.keyedMap=Im(),this.sortedSet=new Zr(this.comparator)}static emptySet(e){return new Jd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Jd)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Jd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.W_=new Zr(ot.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):gt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class vh{constructor(e,r,n,i,a,s,c,d,f){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,r,n,i,a){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new vh(e,r,Jd.emptySet(r),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lre{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class cre{constructor(){this.queries=fO(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=xt(r),a=i.queries;i.queries=fO(),a.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new et(Ie.ABORTED,"Firestore shutting down"))}}function fO(){return new ou((t=>O$(t)),hx)}async function Q7(t,e){const r=xt(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new lre,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(s){const c=X7(s,`Initialization of query '${$d(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&Z7(r)}async function Y7(t,e){const r=xt(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function ure(t,e){const r=xt(t);let n=!1;for(const i of e){const a=i.query,s=r.queries.get(a);if(s){for(const c of s.j_)c.X_(i)&&(n=!0);s.z_=i}}n&&Z7(r)}function dre(t,e,r){const n=xt(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function Z7(t){t.Y_.forEach((e=>{e.next()}))}var uT,mO;(mO=uT||(uT={})).ea="default",mO.Cache="cache";class J7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new vh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==uT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.key=e}}class PV{constructor(e){this.key=e}}class hre{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Jt(),this.mutatedKeys=Jt(),this.Aa=R$(e),this.Ra=new Jd(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new hO,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,s=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,p)=>{const y=i.get(m),b=_g(this.query,p)?p:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;y&&b?y.data.isEqual(b.data)?T!==S&&(n.track({type:3,doc:b}),w=!0):this.ga(y,b)||(n.track({type:2,doc:b}),w=!0,(d&&this.Aa(b,d)>0||f&&this.Aa(b,f)<0)&&(c=!0)):!y&&b?(n.track({type:0,doc:b}),w=!0):y&&!b&&(n.track({type:1,doc:y}),w=!0,(d||f)&&(c=!0)),w&&(b?(s=s.add(b),a=S?a.add(m):a.delete(m)):(s=s.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{Ra:s,fa:n,ns:c,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((m,p)=>(function(b,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return S(b)-S(T)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),i=i!=null&&i;const c=r&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,f=d!==this.Ea;return this.Ea=d,s.length!==0||f?{snapshot:new vh(this.query,e.Ra,a,s,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hO,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Jt(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new PV(n))})),this.da.forEach((n=>{e.has(n)||r.push(new MV(n))})),r}ba(e){this.Ta=e.Ts,this.da=Jt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return vh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fre{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class mre{constructor(e){this.key=e,this.va=!1}}class pre{constructor(e,r,n,i,a,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ou((c=>O$(c)),hx),this.Ma=new Map,this.xa=new Set,this.Oa=new Zr(ot.comparator),this.Na=new Map,this.La=new z7,this.Ba={},this.ka=new Map,this.qa=A0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gre(t,e,r=!0){const n=wx(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await DV(n,e,r,!0),i}async function yre(t,e){const r=wx(t);await DV(r,e,!0,!1)}async function DV(t,e,r,n){const i=await Rv(t.localStore,Ga(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,r);let c;return n&&(c=await e8(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&r&&xx(t.remoteStore,i),c}async function e8(t,e,r,n,i){t.Ka=(p,y,b)=>(async function(S,w,N,I){let C=w.view.ma(N);C.ns&&(C=await oT(S.localStore,w.query,!1).then((({documents:E})=>w.view.ma(E,C))));const z=I&&I.targetChanges.get(w.targetId),O=I&&I.targetMismatches.get(w.targetId)!=null,B=w.view.applyChanges(C,S.isPrimaryClient,z,O);return dT(S,w.targetId,B.wa),B.snapshot})(t,p,y,b);const a=await oT(t.localStore,e,!0),s=new hre(e,a.Ts),c=s.ma(a.documents),d=Ag.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),f=s.applyChanges(c,t.isPrimaryClient,d);dT(t,r,f.wa);const m=new fre(e,r,s);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),f.snapshot}async function vre(t,e,r){const n=xt(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter((s=>!hx(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await gh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),r&&yh(n.remoteStore,i.targetId),bh(n,i.targetId)})).catch(au)):(bh(n,i.targetId),await gh(n.localStore,i.targetId,!0))}async function bre(t,e){const r=xt(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),yh(r.remoteStore,n.targetId))}async function xre(t,e,r){const n=i8(t);try{const i=await(function(s,c){const d=xt(s),f=gn.now(),m=c.reduce(((b,T)=>b.add(T.key)),Jt());let p,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=Fa(),S=Jt();return d.cs.getEntries(b,m).next((w=>{T=w,T.forEach(((N,I)=>{I.isValidDocument()||(S=S.add(N))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,T))).next((w=>{p=w;const N=[];for(const I of c){const C=qee(I,p.get(I.key).overlayedDocument);C!=null&&N.push(new Ul(I.key,C,w$(C.value.mapValue),Rn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,N,c)})).next((w=>{y=w;const N=w.applyToLocalDocumentSet(p,S);return d.documentOverlayCache.saveOverlays(b,w.batchId,N)}))})).then((()=>({batchId:y.batchId,changes:P$(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,c,d){let f=s.Ba[s.currentUser.toKey()];f||(f=new Zr($t)),f=f.insert(c,d),s.Ba[s.currentUser.toKey()]=f})(n,i.batchId,r),await lu(n,i.changes),await rf(n.remoteStore)}catch(i){const a=X7(i,"Failed to persist write");r.reject(a)}}async function LV(t,e){const r=xt(t);try{const n=await zte(r.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=r.Na.get(a);s&&(_t(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?_t(s.va):i.removedDocuments.size>0&&(_t(s.va),s.va=!1))})),await lu(r,n,e)}catch(n){await au(n)}}function pO(t,e,r){const n=xt(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach(((a,s)=>{const c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(s,c){const d=xt(s);d.onlineState=c;let f=!1;d.queries.forEach(((m,p)=>{for(const y of p.j_)y.Z_(c)&&(f=!0)})),f&&Z7(d)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function wre(t,e,r){const n=xt(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let s=new Zr(ot.comparator);s=s.insert(a,on.newNoDocument(a,At.min()));const c=Jt().add(a),d=new Tg(At.min(),new Map,new Zr($t),s,c);await LV(n,d),n.Oa=n.Oa.remove(a),n.Na.delete(e),n8(n)}else await gh(n.localStore,e,!1).then((()=>bh(n,e,r))).catch(au)}async function _re(t,e){const r=xt(t),n=e.batch.batchId;try{const i=await Ute(r.localStore,e);r8(r,n,null),t8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await lu(r,i)}catch(i){await au(i)}}async function Sre(t,e,r){const n=xt(t);try{const i=await(function(s,c){const d=xt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next((p=>(_t(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(f,p)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(n.localStore,e);r8(n,e,r),t8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await lu(n,i)}catch(i){await au(i)}}function t8(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function r8(t,e,r){const n=xt(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function bh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||BV(t,n)}))}function BV(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(yh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),n8(t))}function dT(t,e,r){for(const n of r)n instanceof MV?(t.La.addReference(n.key,e),Tre(t,n)):n instanceof PV?(Ge("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||BV(t,n.key)):gt()}function Tre(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ge("SyncEngine","New document in limbo: "+r),t.xa.add(n),n8(t))}function n8(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new ot(yr.fromString(e)),n=t.qa.next();t.Na.set(n,new mre(r)),t.Oa=t.Oa.insert(r,n),xx(t.remoteStore,new gl(Ga(wg(r.path)),n,"TargetPurposeLimboResolution",_a.oe))}}async function lu(t,e,r){const n=xt(t),i=[],a=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((f=>{var m;if((f||r)&&n.isPrimaryClient){const p=f?!f.fromCache:(m=r==null?void 0:r.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){i.push(f);const p=V7.Wi(d.targetId,f);a.push(p)}})))})),await Promise.all(s),n.Ca.d_(i),await(async function(d,f){const m=xt(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Te.forEach(f,(y=>Te.forEach(y.$i,(b=>m.persistence.referenceDelegate.addReference(p,y.targetId,b))).next((()=>Te.forEach(y.Ui,(b=>m.persistence.referenceDelegate.removeReference(p,y.targetId,b)))))))))}catch(p){if(!su(p))throw p;Ge("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const y=p.targetId;if(!p.fromCache){const b=m.os.get(y),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T);m.os=m.os.insert(y,S)}}})(n.localStore,a))}async function Are(t,e){const r=xt(t);if(!r.currentUser.isEqual(e)){Ge("SyncEngine","User change. New user:",e.toKey());const n=await wV(r.localStore,e);r.currentUser=e,(function(a,s){a.ka.forEach((c=>{c.forEach((d=>{d.reject(new et(Ie.CANCELLED,s))}))})),a.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await lu(r,n.hs)}}function Ere(t,e){const r=xt(t),n=r.Na.get(e);if(n&&n.va)return Jt().add(n.key);{let i=Jt();const a=r.Ma.get(e);if(!a)return i;for(const s of a){const c=r.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}async function Nre(t,e){const r=xt(t),n=await oT(r.localStore,e.query,!0),i=e.view.ba(n);return r.isPrimaryClient&&dT(r,e.targetId,i.wa),i}async function jre(t,e){const r=xt(t);return TV(r.localStore,e).then((n=>lu(r,n)))}async function kre(t,e,r,n){const i=xt(t),a=await(function(c,d){const f=xt(c),m=xt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(p=>m.Mn(p,d).next((y=>y?f.localDocuments.getDocuments(p,y):Te.resolve(null)))))})(i.localStore,e);a!==null?(r==="pending"?await rf(i.remoteStore):r==="acknowledged"||r==="rejected"?(r8(i,e,n||null),t8(i,e),(function(c,d){xt(xt(c).mutationQueue).On(d)})(i.localStore,e)):gt(),await lu(i,a)):Ge("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Cre(t,e){const r=xt(t);if(wx(r),i8(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),i=await gO(r,n.toArray());r.Qa=!0,await cT(r.remoteStore,!0);for(const a of i)xx(r.remoteStore,a)}else if(e===!1&&r.Qa!==!1){const n=[];let i=Promise.resolve();r.Ma.forEach(((a,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then((()=>(bh(r,s),gh(r.localStore,s,!0)))),yh(r.remoteStore,s)})),await i,await gO(r,n),(function(s){const c=xt(s);c.Na.forEach(((d,f)=>{yh(c.remoteStore,f)})),c.La.pr(),c.Na=new Map,c.Oa=new Zr(ot.comparator)})(r),r.Qa=!1,await cT(r.remoteStore,!1)}}async function gO(t,e,r){const n=xt(t),i=[],a=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await Rv(n.localStore,Ga(d[0]));for(const f of d){const m=n.Fa.get(f),p=await Nre(n,m);p.snapshot&&a.push(p.snapshot)}}else{const f=await SV(n.localStore,s);c=await Rv(n.localStore,f),await e8(n,UV(f),s,!1,c.resumeToken)}i.push(c)}return n.Ca.d_(a),i}function UV(t){return k$(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ore(t){return(function(r){return xt(xt(r).persistence).Qi()})(xt(t).localStore)}async function Ire(t,e,r,n){const i=xt(t);if(i.Qa)return void Ge("SyncEngine","Ignoring unexpected query state notification.");const a=i.Ma.get(e);if(a&&a.length>0)switch(r){case"current":case"not-current":{const s=await TV(i.localStore,I$(a[0])),c=Tg.createSynthesizedRemoteEventForCurrentChange(e,r==="current",Dn.EMPTY_BYTE_STRING);await lu(i,s,c);break}case"rejected":await gh(i.localStore,e,!0),bh(i,e,n);break;default:gt()}}async function Rre(t,e,r){const n=wx(t);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Ge("SyncEngine","Adding an already active target "+i);continue}const a=await SV(n.localStore,i),s=await Rv(n.localStore,a);await e8(n,UV(a),s.targetId,!1,s.resumeToken),xx(n.remoteStore,s)}for(const i of r)n.Ma.has(i)&&await gh(n.localStore,i,!1).then((()=>{yh(n.remoteStore,i),bh(n,i)})).catch(au)}}function wx(t){const e=xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ere.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wre.bind(null,e),e.Ca.d_=ure.bind(null,e.eventManager),e.Ca.$a=dre.bind(null,e.eventManager),e}function i8(t){const e=xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_re.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sre.bind(null,e),e}class xp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return xV(this.persistence,new bV,e.initialUser,this.serializer)}Ga(e){return new yV(yx.Zr,this.serializer)}Wa(e){return new EV}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xp.provider={build:()=>new xp};class zV extends xp{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await i8(this.Ja.syncEngine),await rf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return xV(this.persistence,new bV,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new wte(n,e.asyncQueue,r)}Ha(e,r){const n=new eee(r,this.persistence);return new JJ(e.asyncQueue,n)}Ga(e){const r=vV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?va.withCacheSize(this.cacheSizeBytes):va.DEFAULT;return new $7(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,NV(),dv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new EV}}class Mre extends zV{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof qw&&(this.sharedClientState.syncEngine={no:kre.bind(null,r),ro:Ire.bind(null,r),io:Rre.bind(null,r),Qi:Ore.bind(null,r),eo:jre.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Cre(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=NV();if(!qw.D(r))throw new et(Ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=vV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qw(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class wp{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>pO(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Are.bind(null,this.syncEngine),await cT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cre})()}createDatastore(e){const r=vx(e.databaseInfo.databaseId),n=(function(a){return new Gte(a)})(e.databaseInfo);return(function(a,s,c,d){return new Xte(a,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,i,a,s,c){return new Yte(n,i,a,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>pO(this.syncEngine,r,0)),(function(){return uO.D()?new uO:new Fte})())}createSyncEngine(e,r){return(function(i,a,s,c,d,f,m){const p=new pre(i,a,s,c,d,f);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(i){const a=xt(i);Ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Eg(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}wp.provider={build:()=>new wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):In("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pre{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new et(Ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(i,a){const s=xt(i),c={documents:a.map((p=>vp(s.serializer,p)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,yr.emptyPath(),c,a.length),f=new Map;d.forEach((p=>{const y=tte(s.serializer,p);f.set(y.key.toString(),y)}));const m=[];return a.forEach((p=>{const y=f.get(p.toString());_t(!!y),m.push(y)})),m})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const i=ot.fromPath(n);this.mutations.push(new I7(i,this.precondition(i)))})),await(async function(n,i){const a=xt(n),s={writes:i.map((c=>bp(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,yr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw gt();r=At.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new et(Ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(At.min())?Rn.exists(!1):Rn.updateTime(r):Rn.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(At.min()))throw new et(Ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(r)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dre{constructor(e,r,n,i,a){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=i,this.deferred=a,this._u=n.maxAttempts,this.t_=new q7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Pre(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!bg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!H$(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(e,r,n,i,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Ui.UNAUTHENTICATED,this.clientId=a$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{Ge("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Ge("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ws;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=X7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Gw(t,e){t.asyncQueue.verifyOperationInProgress(),Ge("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async i=>{n.isEqual(i)||(await wV(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function yO(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Bre(t);Ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>dO(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,i)=>dO(e.remoteStore,i))),t._onlineComponents=e}async function Bre(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gw(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ie.FAILED_PRECONDITION||i.code===Ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(r))throw r;op("Error using user provided cache. Falling back to memory cache: "+r),await Gw(t,new xp)}}else Ge("FirestoreClient","Using default OfflineComponentProvider"),await Gw(t,new xp);return t._offlineComponents}async function s8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ge("FirestoreClient","Using user provided OnlineComponentProvider"),await yO(t,t._uninitializedComponentsProvider._online)):(Ge("FirestoreClient","Using default OnlineComponentProvider"),await yO(t,new wp))),t._onlineComponents}function Ure(t){return s8(t).then((e=>e.syncEngine))}function zre(t){return s8(t).then((e=>e.datastore))}async function Lv(t){const e=await s8(t),r=e.eventManager;return r.onListen=gre.bind(null,e.syncEngine),r.onUnlisten=vre.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=yre.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=bre.bind(null,e.syncEngine),r}function $re(t,e,r={}){const n=new Ws;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new a8({next:y=>{m.Za(),s.enqueueAndForget((()=>Y7(a,p)));const b=y.docs.has(c);!b&&y.fromCache?f.reject(new et(Ie.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&d&&d.source==="server"?f.reject(new et(Ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new J7(wg(c.path),m,{includeMetadataChanges:!0,_a:!0});return Q7(a,p)})(await Lv(t),t.asyncQueue,e,r,n))),n.promise}function Vre(t,e,r={}){const n=new Ws;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new a8({next:y=>{m.Za(),s.enqueueAndForget((()=>Y7(a,p))),y.fromCache&&d.source==="server"?f.reject(new et(Ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new J7(c,m,{includeMetadataChanges:!0,_a:!0});return Q7(a,p)})(await Lv(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t,e,r){if(!r)throw new et(Ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Fre(t,e,r,n){if(e===!0&&n===!0)throw new et(Ie.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function bO(t){if(!ot.isDocumentKey(t))throw new et(Ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xO(t){if(ot.isDocumentKey(t))throw new et(Ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function _x(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":gt()}function Aa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=_x(t);throw new et(Ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function qre(t,e){if(e<=0)throw new et(Ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$V((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new et(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new et(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new et(Ie.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o8{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wO({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wO(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new FJ;switch(n.type){case"firstParty":return new GJ(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new et(Ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=vO.get(r);n&&(Ge("ComponentProvider","Removing Datastore"),vO.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zl(this.firestore,e,this._query)}}class Ni{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ni(this.firestore,e,this._key)}}class Wc extends zl{constructor(e,r,n){super(e,r,wg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ni(this.firestore,null,new ot(e))}withConverter(e){return new Wc(this.firestore,e,this._path)}}function ar(t,e,...r){if(t=$r(t),VV("collection","path",e),t instanceof o8){const n=yr.fromString(e,...r);return xO(n),new Wc(t,null,n)}{if(!(t instanceof Ni||t instanceof Wc))throw new et(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yr.fromString(e,...r));return xO(n),new Wc(t.firestore,null,n)}}function ft(t,e,...r){if(t=$r(t),arguments.length===1&&(e=a$.newId()),VV("doc","path",e),t instanceof o8){const n=yr.fromString(e,...r);return bO(n),new Ni(t,null,new ot(n))}{if(!(t instanceof Ni||t instanceof Wc))throw new et(Ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(yr.fromString(e,...r));return bO(n),new Ni(t.firestore,t instanceof Wc?t.converter:null,new ot(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new q7(this,"async_queue_retry"),this.Vu=()=>{const n=dv();n&&Ge("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=dv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=dv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new Ws;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!su(e))throw e;Ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw In("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const i=W7.createAndSchedule(this,e,r,n,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&gt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function SO(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const i=r;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(t,["next","error","complete"])}class No extends o8{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=new _O,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _O(e),this._firestoreClient=void 0,await e}}}function Hre(t,e,r){r||(r="(default)");const n=pg(t,"firestore");if(n.isInitialized(r)){const i=n.getImmediate({identifier:r}),a=n.getOptions(r);if(lh(a,e))return i;throw new et(Ie.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new et(Ie.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new et(Ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function Ng(t){if(t._terminated)throw new et(Ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Gre(t),t._firestoreClient}function Gre(t){var e,r,n;const i=t._freezeSettings(),a=(function(c,d,f,m){return new wee(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,$V(m.experimentalLongPollingOptions),m.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Lre(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new E0(Dn.fromBase64String(e))}catch(r){throw new et(Ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new E0(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new et(Ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new et(Ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new et(Ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kre=/^__.*__$/;class Wre{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms):new tf(e,this.data,r,this.fieldTransforms)}}class FV{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ul(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function qV(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Tx{constructor(e,r,n,i,a,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Tx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qV(this.Cu)&&Kre.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Xre{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||vx(e)}Qu(e,r,n,i=!1){return new Tx({Cu:e,methodName:r,qu:n,path:pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kg(t){const e=t._freezeSettings(),r=vx(t._databaseId);return new Xre(t._databaseId,!!e.ignoreUndefinedProperties,r)}function u8(t,e,r,n,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,r,i);h8("Data must be an object, but it was:",s,n);const c=KV(n,s);let d,f;if(a.merge)d=new Sa(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const y=hT(e,p,r);if(!s.contains(y))throw new et(Ie.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);XV(m,y)||m.push(y)}d=new Sa(m),f=s.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,f=s.fieldTransforms;return new Wre(new Ei(c),d,f)}class Ax extends Sx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ax}}function Qre(t,e,r){return new Tx({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class d8 extends Sx{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=Qre(this,e,!0),n=this.Ku.map((a=>af(a,r))),i=new _0(n);return new V$(e.path,i)}isEqual(e){return e instanceof d8&&lh(this.Ku,e.Ku)}}function HV(t,e,r,n){const i=t.Qu(1,e,r);h8("Data must be an object, but it was:",i,n);const a=[],s=Ei.empty();z0(n,((d,f)=>{const m=f8(e,d,r);f=$r(f);const p=i.Nu(m);if(f instanceof Ax)a.push(m);else{const y=af(f,p);y!=null&&(a.push(m),s.set(m,y))}}));const c=new Sa(a);return new FV(s,c,i.fieldTransforms)}function GV(t,e,r,n,i,a){const s=t.Qu(1,e,r),c=[hT(e,n,r)],d=[i];if(a.length%2!=0)throw new et(Ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(hT(e,a[y])),d.push(a[y+1]);const f=[],m=Ei.empty();for(let y=c.length-1;y>=0;--y)if(!XV(f,c[y])){const b=c[y];let T=d[y];T=$r(T);const S=s.Nu(b);if(T instanceof Ax)f.push(b);else{const w=af(T,S);w!=null&&(f.push(b),m.set(b,w))}}const p=new Sa(f);return new FV(m,p,s.fieldTransforms)}function Yre(t,e,r,n=!1){return af(r,t.Qu(n?4:3,e))}function af(t,e){if(WV(t=$r(t)))return h8("Unsupported field value:",e,t),KV(t,e);if(t instanceof Sx)return(function(n,i){if(!qV(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const c of n){let d=af(c,i.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),s++}return{arrayValue:{values:a}}})(t,e)}return(function(n,i){if((n=$r(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Bee(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=gn.fromDate(n);return{timestampValue:ph(i.serializer,a)}}if(n instanceof gn){const a=new gn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ph(i.serializer,a)}}if(n instanceof l8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof E0)return{bytesValue:X$(i.serializer,n._byteString)};if(n instanceof Ni){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:L7(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof c8)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return O7(c.serializer,d)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${_x(n)}`)})(t,e)}function KV(t,e){const r={};return y$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):z0(t,((n,i)=>{const a=af(i,e.Mu(n));a!=null&&(r[n]=a)})),{mapValue:{fields:r}}}function WV(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gn||t instanceof l8||t instanceof E0||t instanceof Ni||t instanceof Sx||t instanceof c8)}function h8(t,e,r){if(!WV(r)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(r)){const n=_x(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function hT(t,e,r){if((e=$r(e))instanceof jg)return e._internalPath;if(typeof e=="string")return f8(t,e);throw Bv("Field path arguments must be of type string or ",t,!1,void 0,r)}const Zre=new RegExp("[~\\*/\\[\\]]");function f8(t,e,r){if(e.search(Zre)>=0)throw Bv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new jg(...e.split("."))._internalPath}catch{throw Bv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Bv(t,e,r,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||s)&&(d+=" (found",a&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new et(Ie.INVALID_ARGUMENT,c+t+d)}function XV(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ni(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Ex("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class Jre extends Uv{data(){return super.data()}}function Ex(t,e){return typeof e=="string"?f8(t,e):e instanceof jg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m8{}class p8 extends m8{}function hn(t,e,...r){let n=[];e instanceof m8&&n.push(e),n=n.concat(r),(function(a){const s=a.filter((d=>d instanceof g8)).length,c=a.filter((d=>d instanceof Nx)).length;if(s>1||s>0&&c>0)throw new et(Ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)t=i._apply(t);return t}class Nx extends p8{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Nx(e,r,n)}_apply(e){const r=this._parse(e);return YV(e._query,r),new zl(e.firestore,e.converter,JS(e._query,r))}_parse(e){const r=kg(e.firestore);return(function(a,s,c,d,f,m,p){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new et(Ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){AO(p,m);const b=[];for(const T of p)b.push(TO(d,a,T));y={arrayValue:{values:b}}}else y=TO(d,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||AO(p,m),y=Yre(c,s,p,m==="in"||m==="not-in");return or.create(f,m,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function xn(t,e,r){const n=e,i=Ex("where",t);return Nx._create(i,n,r)}class g8 extends m8{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new g8(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:Or.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(i,a){let s=i;const c=a.getFlattenedFilters();for(const d of c)YV(s,d),s=JS(s,d)})(e._query,r),new zl(e.firestore,e.converter,JS(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class y8 extends p8{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new y8(e,r)}_apply(e){const r=(function(i,a,s){if(i.startAt!==null)throw new et(Ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(Ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pp(a,s)})(e._query,this._field,this._direction);return new zl(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new ef(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,r))}}function mm(t,e="asc"){const r=e,n=Ex("orderBy",t);return y8._create(n,r)}class v8 extends p8{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new v8(e,r,n)}_apply(e){return new zl(e.firestore,e.converter,kv(e._query,this._limit,this._limitType))}}function Uu(t){return qre("limit",t),v8._create("limit",t,"F")}function TO(t,e,r){if(typeof(r=$r(r))=="string"){if(r==="")throw new et(Ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!C$(e)&&r.indexOf("/")!==-1)throw new et(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(yr.fromString(r));if(!ot.isDocumentKey(n))throw new et(Ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return fp(t,new ot(n))}if(r instanceof Ni)return fp(t,r._key);throw new et(Ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_x(r)}.`)}function AO(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YV(t,e){const r=(function(i,a){for(const s of i)for(const c of s.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new et(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class ZV{convertValue(e,r="none"){switch(x0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Zc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw gt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return z0(e,((i,a)=>{n[i]=this.convertValue(a,r)})),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((s=>sn(s.doubleValue)));return new c8(a)}convertGeoPoint(e){return new l8(sn(e.latitude),sn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=j7(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(dp(e));default:return null}}convertTimestamp(e){const r=Cl(e);return new gn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=yr.fromString(e);_t(aV(n));const i=new b0(n.get(1),n.get(3)),a=new ot(n.popFirst(5));return i.isEqual(r)||In(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class ene extends ZV{constructor(e){super(),this.firestore=e}convertBytes(e){return new E0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class x8 extends Uv{constructor(e,r,n,i,a,s){super(e,r,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new hv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Ex("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class hv extends x8{data(e={}){return super.data(e)}}class JV{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Hd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new hv(this._firestore,this._userDataWriter,n.key,n,new Hd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new et(Ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((c=>{const d=new hv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new hv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Hd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:tne(c.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function tne(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(t){t=Aa(t,Ni);const e=Aa(t.firestore,No);return $re(Ng(e),t._key).then((r=>eF(e,t,r)))}class jx extends ZV{constructor(e){super(),this.firestore=e}convertBytes(e){return new E0(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ni(this.firestore,null,r)}}function pm(t){t=Aa(t,zl);const e=Aa(t.firestore,No),r=Ng(e),n=new jx(e);return QV(t._query),Vre(r,t._query).then((i=>new JV(e,n,t,i)))}function Ji(t,e,r){t=Aa(t,Ni);const n=Aa(t.firestore,No),i=b8(t.converter,e,r);return kx(n,[u8(kg(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,Rn.none())])}function Lr(t,e,r,...n){t=Aa(t,Ni);const i=Aa(t.firestore,No),a=kg(i);let s;return s=typeof(e=$r(e))=="string"||e instanceof jg?GV(a,"updateDoc",t._key,e,r,n):HV(a,"updateDoc",t._key,e),kx(i,[s.toMutation(t._key,Rn.exists(!0))])}function Ba(t){return kx(Aa(t.firestore,No),[new Sg(t._key,Rn.none())])}function Rd(t,e){const r=Aa(t.firestore,No),n=ft(t),i=b8(t.converter,e);return kx(r,[u8(kg(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Rn.exists(!1))]).then((()=>n))}function xi(t,...e){var r,n,i;t=$r(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||SO(e[s])||(a=e[s],s++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(SO(e[s])){const p=e[s];e[s]=(r=p.next)===null||r===void 0?void 0:r.bind(p),e[s+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let d,f,m;if(t instanceof Ni)f=Aa(t.firestore,No),m=wg(t._key.path),d={next:p=>{e[s]&&e[s](eF(f,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Aa(t,zl);f=Aa(p.firestore,No),m=p._query;const y=new jx(f);d={next:b=>{e[s]&&e[s](new JV(f,y,p,b))},error:e[s+1],complete:e[s+2]},QV(t._query)}return(function(y,b,T,S){const w=new a8(S),N=new J7(b,w,T);return y.asyncQueue.enqueueAndForget((async()=>Q7(await Lv(y),N))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>Y7(await Lv(y),N)))}})(Ng(f),m,c,d)}function kx(t,e){return(function(n,i){const a=new Ws;return n.asyncQueue.enqueueAndForget((async()=>xre(await Ure(n),i,a))),a.promise})(Ng(t),e)}function eF(t,e,r){const n=r.docs.get(e._key),i=new jx(t);return new x8(t,i,e._key,n,new Hd(r.hasPendingWrites,r.fromCache),e.converter)}class rne{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=sne(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function nne(t){return new rne(t)}class ine{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wp.provider,this._offlineComponentProvider={build:r=>new zV(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class ane{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=wp.provider,this._offlineComponentProvider={build:r=>new Mre(r,e==null?void 0:e.cacheSizeBytes)}}}function sne(t){return new ine(void 0)}function one(){return new ane}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lne={maxAttempts:5};function gm(t,e){if((t=$r(t)).firestore!==e)throw new et(Ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cne extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=kg(r)}get(r){const n=gm(r,this._firestore),i=new ene(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return gt();const s=a[0];if(s.isFoundDocument())return new Uv(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Uv(this._firestore,i,n._key,null,n.converter);throw gt()}))}set(r,n,i){const a=gm(r,this._firestore),s=b8(a.converter,n,i),c=u8(this._dataReader,"Transaction.set",a._key,s,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(r,n,i,...a){const s=gm(r,this._firestore);let c;return c=typeof(n=$r(n))=="string"||n instanceof jg?GV(this._dataReader,"Transaction.update",s._key,n,i,a):HV(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=gm(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=gm(e,this._firestore),n=new jx(this._firestore);return super.get(e).then((i=>new x8(this._firestore,n,r._key,i._document,new Hd(!1,!1),r.converter)))}}function Kw(t,e,r){t=Aa(t,No);const n=Object.assign(Object.assign({},lne),r);return(function(a){if(a.maxAttempts<1)throw new et(Ie.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,s,c){const d=new Ws;return a.asyncQueue.enqueueAndForget((async()=>{const f=await zre(a);new Dre(a.asyncQueue,f,c,s,d).au()})),d.promise})(Ng(t),(i=>e(new cne(t,i))),n)}function une(...t){return new d8("arrayUnion",t)}(function(e,r=!0){(function(i){Jh=i})(U0),Yc(new Nl("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),c=new No(new qJ(n.getProvider("auth-internal")),new WJ(n.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new et(Ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new b0(f.options.projectId,m)})(s,i),s);return a=Object.assign({useFetchStreams:r},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),ys(yC,"4.7.3",e),ys(yC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF="firebasestorage.googleapis.com",rF="storageBucket",dne=120*1e3,hne=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends Qs{constructor(e,r,n=0){super(Ww(e),`Firebase Storage: ${r} (${Ww(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,En.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ww(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var An;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(An||(An={}));function Ww(t){return"storage/"+t}function w8(){const t="An unknown error occurred, please check the error payload for server response.";return new En(An.UNKNOWN,t)}function fne(t){return new En(An.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function mne(t){return new En(An.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pne(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new En(An.UNAUTHENTICATED,t)}function gne(){return new En(An.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yne(t){return new En(An.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vne(){return new En(An.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bne(){return new En(An.CANCELED,"User canceled the upload/download.")}function xne(t){return new En(An.INVALID_URL,"Invalid URL '"+t+"'.")}function wne(t){return new En(An.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _ne(){return new En(An.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rF+"' property when initializing the app?")}function Sne(){return new En(An.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Tne(){return new En(An.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Ane(t){return new En(An.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function fT(t){return new En(An.INVALID_ARGUMENT,t)}function nF(){return new En(An.APP_DELETED,"The Firebase app was deleted.")}function Ene(t){return new En(An.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gm(t,e){return new En(An.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ym(t){throw new En(An.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=qa.makeFromUrl(e,r)}catch{return new qa(e,"")}if(n.path==="")return n;throw wne(e)}static makeFromUrl(e,r){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+i+s,"i"),d={bucket:1,path:3};function f(z){z.path_=decodeURIComponent(z.path)}const m="v[A-Za-z0-9_]+",p=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${m}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},S=r===tF?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",N=new RegExp(`^https?://${S}/${i}/${w}`,"i"),C=[{regex:c,indices:d,postModify:a},{regex:b,indices:T,postModify:f},{regex:N,indices:{bucket:1,path:2},postModify:f}];for(let z=0;z<C.length;z++){const O=C[z],B=O.regex.exec(e);if(B){const E=B[O.indices.bucket];let A=B[O.indices.path];A||(A=""),n=new qa(E,A),O.postModify(n);break}}if(n==null)throw xne(e);return n}}class Nne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jne(t,e,r){let n=1,i=null,a=null,s=!1,c=0;function d(){return c===2}let f=!1;function m(...w){f||(f=!0,e.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,t(b,d())},w)}function y(){a&&clearTimeout(a)}function b(w,...N){if(f){y();return}if(w){y(),m.call(null,w,...N);return}if(d()||s){y(),m.call(null,w,...N);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,p(C)}let T=!1;function S(w){T||(T=!0,y(),!f&&(i!==null?(w||(c=2),clearTimeout(i),p(0)):w||(c=1)))}return p(0),a=setTimeout(()=>{s=!0,S(!0)},r),S}function kne(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cne(t){return t!==void 0}function One(t){return typeof t=="object"&&!Array.isArray(t)}function _8(t){return typeof t=="string"||t instanceof String}function EO(t){return S8()&&t instanceof Blob}function S8(){return typeof Blob<"u"}function NO(t,e,r,n){if(n<e)throw fT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw fT(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function iF(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);r=r+i+"&"}return r=r.slice(0,-1),r}var f0;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(f0||(f0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ine(t,e){const r=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return r||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e,r,n,i,a,s,c,d,f,m,p,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new Sy(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const c=a.getErrorCode()===f0.NO_ERROR,d=a.getStatus();if(!c||Ine(d,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===f0.ABORT;n(!1,new Sy(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new Sy(f,a))})},r=(n,i)=>{const a=this.resolve_,s=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());Cne(d)?a(d):a()}catch(d){s(d)}else if(c!==null){const d=w8();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(i.canceled){const d=this.appDelete_?nF():bne();s(d)}else{const d=vne();s(d)}};this.canceled_?r(!1,new Sy(!1,null,!0)):this.backoffId_=jne(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sy{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Mne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Pne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Dne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Lne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Bne(t,e,r,n,i,a,s=!0){const c=iF(t.urlParams),d=t.url+c,f=Object.assign({},t.headers);return Dne(f,e),Mne(f,r),Pne(f,a),Lne(f,n),new Rne(d,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Une(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zne(...t){const e=Une();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(S8())return new Blob(t);throw new En(An.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $ne(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vne(t){if(typeof atob>"u")throw Ane("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xw{constructor(e,r){this.data=e,this.contentType=r||null}}function Fne(t,e){switch(t){case vo.RAW:return new Xw(aF(e));case vo.BASE64:case vo.BASE64URL:return new Xw(sF(t,e));case vo.DATA_URL:return new Xw(Hne(e),Gne(e))}throw w8()}function aF(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=t.charCodeAt(++r);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function qne(t){let e;try{e=decodeURIComponent(t)}catch{throw Gm(vo.DATA_URL,"Malformed data URL.")}return aF(e)}function sF(t,e){switch(t){case vo.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw Gm(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case vo.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw Gm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Vne(e)}catch(i){throw i.message.includes("polyfill")?i:Gm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}class oF{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw Gm(vo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Kne(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Hne(t){const e=new oF(t);return e.base64?sF(vo.BASE64,e.rest):qne(e.rest)}function Gne(t){return new oF(t).contentType}function Kne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,r){let n=0,i="";EO(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,r){if(EO(this.data_)){const n=this.data_,i=$ne(n,e,r);return i===null?null:new Mc(i)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new Mc(n,!0)}}static getBlob(...e){if(S8()){const r=e.map(n=>n instanceof Mc?n.data_:n);return new Mc(zne.apply(null,r))}else{const r=e.map(s=>_8(s)?Fne(vo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)i[a++]=s[c]}),new Mc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){let e;try{e=JSON.parse(t)}catch{return null}return One(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Xne(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function cF(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qne(t,e){return e}class Qi{constructor(e,r,n,i){this.server=e,this.local=r||e,this.writable=!!n,this.xform=i||Qne}}let Ty=null;function Yne(t){return!_8(t)||t.length<2?t:cF(t)}function uF(){if(Ty)return Ty;const t=[];t.push(new Qi("bucket")),t.push(new Qi("generation")),t.push(new Qi("metageneration")),t.push(new Qi("name","fullPath",!0));function e(a,s){return Yne(s)}const r=new Qi("name");r.xform=e,t.push(r);function n(a,s){return s!==void 0?Number(s):s}const i=new Qi("size");return i.xform=n,t.push(i),t.push(new Qi("timeCreated")),t.push(new Qi("updated")),t.push(new Qi("md5Hash",null,!0)),t.push(new Qi("cacheControl",null,!0)),t.push(new Qi("contentDisposition",null,!0)),t.push(new Qi("contentEncoding",null,!0)),t.push(new Qi("contentLanguage",null,!0)),t.push(new Qi("contentType",null,!0)),t.push(new Qi("metadata","customMetadata",!0)),Ty=t,Ty}function Zne(t,e){function r(){const n=t.bucket,i=t.fullPath,a=new qa(n,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:r})}function Jne(t,e,r){const n={};n.type="file";const i=r.length;for(let a=0;a<i;a++){const s=r[a];n[s.local]=s.xform(n,e[s.server])}return Zne(n,t),n}function dF(t,e,r){const n=lF(e);return n===null?null:Jne(t,n,r)}function eie(t,e,r,n){const i=lF(e);if(i===null||!_8(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const m=t.bucket,p=t.fullPath,y="/b/"+s(m)+"/o/"+s(p),b=Cx(y,r,n),T=iF({alt:"media",token:f});return b+T})[0]}function tie(t,e){const r={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(r[a.server]=t[a.local])}return JSON.stringify(r)}class T8{constructor(e,r,n,i){this.url=e,this.method=r,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(t){if(!t)throw w8()}function rie(t,e){function r(n,i){const a=dF(t,i,e);return hF(a!==null),a}return r}function nie(t,e){function r(n,i){const a=dF(t,i,e);return hF(a!==null),eie(a,i,t.host,t._protocol)}return r}function fF(t){function e(r,n){let i;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?i=gne():i=pne():r.getStatus()===402?i=mne(t.bucket):r.getStatus()===403?i=yne(t.path):i=n,i.status=r.getStatus(),i.serverResponse=n.serverResponse,i}return e}function mF(t){const e=fF(t);function r(n,i){let a=e(n,i);return n.getStatus()===404&&(a=fne(t.path)),a.serverResponse=i.serverResponse,a}return r}function iie(t,e,r){const n=e.fullServerUrl(),i=Cx(n,t.host,t._protocol),a="GET",s=t.maxOperationRetryTime,c=new T8(i,a,nie(t,r),s);return c.errorHandler=mF(e),c}function aie(t,e){const r=e.fullServerUrl(),n=Cx(r,t.host,t._protocol),i="DELETE",a=t.maxOperationRetryTime;function s(d,f){}const c=new T8(n,i,s,a);return c.successCodes=[200,204],c.errorHandler=mF(e),c}function sie(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oie(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=sie(null,e)),n}function lie(t,e,r,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let z=0;z<2;z++)C=C+Math.random().toString().slice(2);return C}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const f=oie(e,n,i),m=tie(f,r),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+d+"--",b=Mc.getBlob(p,n,y);if(b===null)throw Sne();const T={name:f.fullPath},S=Cx(a,t.host,t._protocol),w="POST",N=t.maxUploadRetryTime,I=new T8(S,w,rie(t,r),N);return I.urlParams=T,I.headers=s,I.body=b.uploadData(),I.errorHandler=fF(e),I}class cie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=f0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=f0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=f0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,i){if(this.sent_)throw ym("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ym("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ym("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ym("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ym("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uie extends cie{initXhr(){this.xhr_.responseType="text"}}function A8(){return new uie}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,r){this._service=e,r instanceof qa?this._location=r:this._location=qa.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new N0(e,r)}get root(){const e=new qa(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cF(this._location.path)}get storage(){return this._service}get parent(){const e=Wne(this._location.path);if(e===null)return null;const r=new qa(this._location.bucket,e);return new N0(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Ene(e)}}function die(t,e,r){t._throwIfRoot("uploadBytes");const n=lie(t.storage,t._location,uF(),new Mc(e,!0),r);return t.storage.makeRequestWithTokens(n,A8).then(i=>({metadata:i,ref:t}))}function hie(t){t._throwIfRoot("getDownloadURL");const e=iie(t.storage,t._location,uF());return t.storage.makeRequestWithTokens(e,A8).then(r=>{if(r===null)throw Tne();return r})}function fie(t){t._throwIfRoot("deleteObject");const e=aie(t.storage,t._location);return t.storage.makeRequestWithTokens(e,A8)}function mie(t,e){const r=Xne(t._location.path,e),n=new qa(t._location.bucket,r);return new N0(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pie(t){return/^[A-Za-z]+:\/\//.test(t)}function gie(t,e){return new N0(t,e)}function pF(t,e){if(t instanceof E8){const r=t;if(r._bucket==null)throw _ne();const n=new N0(r,r._bucket);return e!=null?pF(n,e):n}else return e!==void 0?mie(t,e):t}function yie(t,e){if(e&&pie(e)){if(t instanceof E8)return gie(t,e);throw fT("To use ref(service, url), the first argument must be a Storage instance.")}else return pF(t,e)}function jO(t,e){const r=e==null?void 0:e[rF];return r==null?null:qa.makeFromBucketSpec(r,t)}function vie(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:bQ(i,t.app.options.projectId))}class E8{constructor(e,r,n,i,a){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=tF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dne,this._maxUploadRetryTime=hne,this._requests=new Set,i!=null?this._bucket=qa.makeFromBucketSpec(i,this._host):this._bucket=jO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qa.makeFromBucketSpec(this._url,e):this._bucket=jO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new N0(this,e)}_makeRequest(e,r,n,i,a=!0){if(this._deleted)return new Nne(nF());{const s=Bne(e,this._appId,n,i,r,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,i).getPromise()}}const kO="@firebase/storage",CO="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="storage";function mT(t,e,r){return t=$r(t),die(t,e,r)}function zv(t){return t=$r(t),hie(t)}function bie(t){return t=$r(t),fie(t)}function Km(t,e){return t=$r(t),yie(t,e)}function xie(t=d7(),e){t=$r(t);const n=pg(t,gF).getImmediate({identifier:e}),i=dz("storage");return i&&wie(n,...i),n}function wie(t,e,r,n={}){vie(t,e,r,n)}function _ie(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new E8(r,n,i,e,U0)}function Sie(){Yc(new Nl(gF,_ie,"PUBLIC").setMultipleInstances(!0)),ys(kO,CO,""),ys(kO,CO,"esm2017")}Sie();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tie="type.googleapis.com/google.protobuf.Int64Value",Aie="type.googleapis.com/google.protobuf.UInt64Value";function yF(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function pT(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>pT(e));if(typeof t=="function"||typeof t=="object")return yF(t,e=>pT(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $v(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Tie:case Aie:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$v(e)):typeof t=="function"||typeof t=="object"?yF(t,e=>$v(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class eh extends Qs{constructor(e,r,n){super(`${N8}/${e}`,r||""),this.details=n}}function Eie(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Nie(t,e){let r=Eie(t),n=r,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!OO[s])return new eh("internal","internal");r=OO[s],n=s}const c=a.message;typeof c=="string"&&(n=c),i=a.details,i!==void 0&&(i=$v(i))}}catch{}return r==="ok"?null:new eh(r,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jie{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="us-central1";function kie(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new eh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class Cie{constructor(e,r,n,i,a=gT,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new jie(r,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=gT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Oie(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function Iie(t,e,r){return(n=>Mie(t,e,n,{}))}async function Rie(t,e,r,n){r["Content-Type"]="application/json";let i;try{i=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function Mie(t,e,r,n){const i=t._url(e);return Pie(t,i,r,n)}async function Pie(t,e,r,n){r=pT(r);const i={data:r},a={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=kie(c),f=await Promise.race([Rie(e,i,a,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!f)throw new eh("cancelled","Firebase Functions instance was deleted.");const m=Nie(f.status,f.json);if(m)throw m;if(!f.json)throw new eh("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new eh("internal","Response is missing data field.");return{data:$v(p)}}const IO="@firebase/functions",RO="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Die="auth-internal",Lie="app-check-internal",Bie="messaging-internal";function Uie(t,e){const r=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),s=n.getProvider(Die),c=n.getProvider(Bie),d=n.getProvider(Lie);return new Cie(a,s,c,d,i,t)};Yc(new Nl(N8,r,"PUBLIC").setMultipleInstances(!0)),ys(IO,RO,e),ys(IO,RO,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zie(t=d7(),e=gT){const n=pg($r(t),N8).getImmediate({identifier:e}),i=dz("functions");return i&&$ie(n,...i),n}function $ie(t,e,r){Oie($r(t),e,r)}function Ir(t,e,r){return Iie($r(t),e)}Uie(fetch.bind(self));const vF={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Vie=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Vie)if(!vF[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const Ox=vz(vF),yT=Zz(Ox),Fie=new ul,Ve=Hre(Ox,{localCache:nne({tabManager:one()})}),Wm=xie(Ox),Rr=zie(Ox),qie=Ir(Rr,"awardXP"),Hie=Ir(Rr,"acceptQuest"),Gie=Ir(Rr,"deployMission"),Kie=Ir(Rr,"resolveQuest"),Wie=Ir(Rr,"equipItem"),Xie=Ir(Rr,"unequipItem"),Qie=Ir(Rr,"disenchantItem"),Yie=Ir(Rr,"craftItem"),Zie=Ir(Rr,"adminUpdateInventory"),Jie=Ir(Rr,"adminUpdateEquipped"),eae=Ir(Rr,"submitEngagement"),tae=Ir(Rr,"sendClassMessage");Ir(Rr,"uploadQuestionBank");const bF=Ir(Rr,"awardQuestionXP"),rae=Ir(Rr,"updateStreak"),nae=Ir(Rr,"claimDailyLogin"),iae=Ir(Rr,"spinFortuneWheel"),aae=Ir(Rr,"unlockSkill"),sae=Ir(Rr,"addSocket"),oae=Ir(Rr,"socketGem"),lae=Ir(Rr,"dealBossDamage"),cae=Ir(Rr,"answerBossQuiz"),uae=Ir(Rr,"createParty"),dae=Ir(Rr,"joinParty"),hae=Ir(Rr,"completeTutoring"),fae=Ir(Rr,"claimKnowledgeLoot"),mae=Ir(Rr,"purchaseCosmetic"),pae=Ir(Rr,"claimDailyChallenge"),gae=Ir(Rr,"dismissAlert"),Vv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),Xu={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xF=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=V.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...c},d)=>V.createElement("svg",{ref:d,...vae,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:xF("lucide",i),...c},[...s.map(([f,m])=>V.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(t,e)=>{const r=V.forwardRef(({className:n,...i},a)=>V.createElement(bae,{ref:a,iconNode:e,className:xF(`lucide-${yae(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=Ue("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=Ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=Ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=Ue("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=Ue("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=Ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=Ue("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=Ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Ue("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=Ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Ue("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=Ue("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=Ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=Ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=Ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=Ue("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=Ue("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=Ue("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=Ue("Component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=Ue("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Ue("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=Ue("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=Ue("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=Ue("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=Ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=Ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=Ue("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=Ue("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=Ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=Ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=Ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=Ue("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=Ue("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=Ue("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=Ue("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ue("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=Ue("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=Ue("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=Ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=Ue("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=Ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=Ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=Ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Ue("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Ue("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Ue("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=Ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Ue("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=Ue("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=Ue("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=Ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=Ue("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=Ue("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Ue("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=Ue("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=Ue("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=Ue("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=Ue("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=Ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=Ue("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=Ue("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=Ue("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=Ue("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=Ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=Ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=Ue("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=Ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=Ue("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=Ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=Ue("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=Ue("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=Ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ese=Ue("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=Ue("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=Ue("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tse=Ue("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rse=Ue("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=Ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nse=Ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=Ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=Ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=Ue("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ise=Ue("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ase=Ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=Ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=Ue("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sse=Ue("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ose=Ue("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lse=Ue("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cse="kellporter2@paps.net",OF="Mr. Porter",use=[{name:"Dashboard",icon:u.jsx(Uae,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:u.jsx(Rx,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:u.jsx(tu,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:u.jsx(jo,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:u.jsx(I8,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:u.jsx(th,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:u.jsx(jo,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:u.jsx(j0,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:u.jsx(Pae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:u.jsx(kae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:u.jsx(wh,{className:"w-5 h-5"}),role:"STUDENT"}],HO=new Set,Ls=(t,e,r)=>HO.has(t)?()=>{}:xi(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&HO.add(t)}),Fe={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Ls("xp_events",ar(Ve,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await Ji(ft(Ve,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Ba(ft(Ve,"xp_events",t))},subscribeToQuests:t=>Ls("quests",ar(Ve,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await Ji(ft(Ve,"quests",t.id),t)},deleteQuest:async t=>{await Ba(ft(Ve,"quests",t))},acceptQuest:async(t,e)=>{await Hie({questId:e})},deployMission:async(t,e)=>{await Gie({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await Kie({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Fe.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await Wie({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await Xie({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await Qie({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await Yie({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await Zie({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await Jie({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=ft(Ve,"users",t);r?await Lr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await Lr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const i=new Date(t.mutedUntil);if(i>new Date)throw new Error(`You are muted until ${i.toLocaleTimeString()}.`)}await tae({content:e,channelId:r,classType:n})}catch(i){throw console.error("Error sending message:",i),i}},toggleReaction:async(t,e,r)=>{const n=ft(Ve,"class_messages",t);await Kw(Ve,async i=>{const a=await i.get(n);if(!a.exists())return;const c={...a.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(f=>{c[f]=(c[f]||[]).filter(m=>m!==r),c[f].length===0&&delete c[f]}),d||(c[e]||(c[e]=[]),c[e].push(r)),i.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=ft(Ve,"class_messages",t);await Kw(Ve,async n=>{const i=await n.get(r);if(!i.exists())return;const s=[...i.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=ft(Ve,"class_messages",t);await Lr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Ba(ft(Ve,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=hn(ar(Ve,"class_messages"),xn("isFlagged","==",!0),Uu(50));return xi(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=ft(Ve,"class_messages",t);await Lr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Fe.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await Lr(ft(Ve,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},subscribeToChannelMessages:(t,e)=>{const r=hn(ar(Ve,"class_messages"),xn("channelId","==",t),Uu(100));return xi(r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime()),e(i)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:t=>{const e=hn(ar(Ve,"conversations"),mm("lastMessageAt","desc"));return xi(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=hn(ar(Ve,`conversations/${t}/messages`),mm("timestamp","asc"));return xi(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Li.ADMIN?OF:e.name,content:r,timestamp:new Date().toISOString()};await Rd(ar(Ve,`conversations/${t}/messages`),n),await Lr(ft(Ve,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await Lr(ft(Ve,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=hn(ar(Ve,"chat_flags"),xn("isResolved","==",!1));return xi(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await Lr(ft(Ve,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=hn(ar(Ve,"chat_flags"),xn("messageId","==",t),xn("isResolved","==",!1)),n=(await pm(e)).docs.map(i=>Lr(i.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=hn(ar(Ve,"evidence"),xn("studentId","==",t),xn("weekId","==",e));return xi(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));r(a)},i=>console.error("Evidence subscription error:",i))},uploadEvidence:async t=>{await Ji(ft(Ve,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const i=Km(Wm,n.imageUrl);return bie(i).catch(a=>console.warn("File missing:",a))});await Promise.all(e);const r=t.map(n=>Ba(ft(Ve,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await Ji(ft(Ve,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=ft(Ve,"users",t);await Lr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await Lr(ft(Ve,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await Lr(ft(Ve,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=ar(Ve,"users");return xi(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,...a}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=ar(Ve,"assignments");return xi(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,title:a.title,description:a.description,classType:a.classType,status:a.status,unit:a.unit||"Unassigned Unit",category:a.category||"Supplemental",htmlContent:a.htmlContent,contentUrl:a.contentUrl,resources:a.resources||[],publicComments:(a.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:a.dueDate}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=hn(ar(Ve,"submissions"),mm("submittedAt","desc"),Uu(200));return xi(e,r=>{const n=r.docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId,userName:a.userName,assignmentId:a.assignmentId,assignmentTitle:a.assignmentTitle,metrics:a.metrics||Vv(),submittedAt:a.submittedAt,status:a.status,score:a.score,hasUnreadAdmin:a.hasUnreadAdmin||!1,hasUnreadStudent:a.hasUnreadStudent||!1,isPinned:a.isPinned||!1,isArchived:a.isArchived||!1,privateComments:(a.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=hn(ar(Ve,"submissions"),xn("userId","==",t),Uu(50));return xi(r,n=>{const i=n.docs.map(a=>{const s=a.data();return{id:a.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Vv(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((a,s)=>new Date(s.submittedAt||"").getTime()-new Date(a.submittedAt||"").getTime());e(i)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=ar(Ve,"allowed_emails");return xi(e,r=>{const n=r.docs.map(i=>({email:i.id,classType:i.data().classType,classTypes:i.data().classTypes||[i.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=ar(Ve,"class_configs");return xi(e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null};t.id?await Ji(ft(Ve,"assignments",t.id),e,{merge:!0}):await Rd(ar(Ve,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await Lr(ft(Ve,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Ba(ft(Ve,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=ft(Ve,"allowed_emails",t),n=await Ti(r),i=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],a=Array.from(new Set([...i,e]));await Ji(r,{classType:e,classTypes:a});const s=hn(ar(Ve,"users"),xn("email","==",t)),c=await pm(s);await Promise.all(c.docs.map(async d=>{const f=d.data(),m=f.enrolledClasses||(f.classType?[f.classType]:[]),p=Array.from(new Set([...m,e]));await Lr(ft(Ve,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:p})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await Lr(ft(Ve,"allowed_emails",t),{section:e});const r=hn(ar(Ve,"users"),xn("email","==",t)),n=await pm(r);await Promise.all(n.docs.map(async i=>{await Lr(ft(Ve,"users",i.id),{section:e})}))}catch(r){console.error(r)}},removeFromWhitelist:async t=>{try{await Ba(ft(Ve,"allowed_emails",t));const e=hn(ar(Ve,"users"),xn("email","==",t)),r=await pm(e);await Promise.all(r.docs.map(async n=>{await Lr(ft(Ve,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=ft(Ve,"users",t),n=await Ti(r);if(n.exists()){const i=n.data(),a=i.enrolledClasses||(i.classType?[i.classType]:[]),s=Array.from(new Set([...a,e]));await Lr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=i.email;if(c){const d=await Ti(ft(Ve,"allowed_emails",c)),f=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],m=Array.from(new Set([...f,e]));await Ji(ft(Ve,"allowed_emails",c),{classType:e,classTypes:m})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Ti(ft(Ve,"users",t));if(e.exists()){const r=e.data().email;await Ba(ft(Ve,"allowed_emails",r))}await Ba(ft(Ve,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await Ji(ft(Ve,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=ft(Ve,"users",t),n=await Ti(r);if(!n.exists())return;const a=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,a&&await Ba(ft(Ve,"allowed_emails",a))):(s.isWhitelisted=!0,a&&await Ji(ft(Ve,"allowed_emails",a),{classType:e[0],classTypes:e})),await Lr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=ft(Ve,"users",t),n=await Ti(r);if(n.exists()){const i=n.data().enrolledClasses||[],a=Array.from(new Set([...i,e]));await Lr(r,{classType:e,enrolledClasses:a,isWhitelisted:!0});const s=n.data().email;s&&await Ji(ft(Ve,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await Lr(ft(Ve,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await qie({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,i,a)=>(await eae({assignmentId:r,assignmentTitle:n,userName:e,metrics:i,classType:a})).data,subscribeToLeaderboard:t=>{const e=hn(ar(Ve,"users"),xn("role","==","STUDENT"));return xi(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await Ji(ft(Ve,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Ba(ft(Ve,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Km(Wm,`resources/${e}_${t.name}`);return await mT(r,t),await zv(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=Km(Wm,`resources/html/${e}_${t.name}`);return await mT(r,t),await zv(r)},subscribeToAnnouncements:t=>{const e=hn(ar(Ve,"announcements"),mm("createdAt","desc"),Uu(20));return Ls("announcements",e,r=>{const n=new Date,i=r.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||new Date(a.expiresAt)>n);t(i)})},createAnnouncement:async t=>{await Rd(ar(Ve,"announcements"),t)},deleteAnnouncement:async t=>{await Ba(ft(Ve,"announcements",t))},dismissAnnouncement:async(t,e)=>{await Lr(ft(Ve,"users",t),{"gamification.dismissedAnnouncements":une(e)})},subscribeToNotifications:(t,e)=>{const r=hn(ar(Ve,"notifications"),xn("userId","==",t),mm("timestamp","desc"),Uu(50));return xi(r,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await Lr(ft(Ve,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=hn(ar(Ve,"notifications"),xn("userId","==",t),xn("isRead","==",!1)),n=(await pm(e)).docs.map(i=>Lr(i.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await Rd(ar(Ve,"notifications"),t)},notifyUsers:async(t,e,r,n,i)=>{const a=t.map(s=>Rd(ar(Ve,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:i||{}}));await Promise.all(a)},updateCodename:async(t,e)=>{await Lr(ft(Ve,"users",t),{"gamification.codename":e})},updateEngagementStreak:async()=>(await rae({})).data,claimDailyLogin:async()=>(await nae({})).data,spinFortuneWheel:async t=>(await iae({classType:t})).data,unlockSkill:async(t,e)=>(await aae({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await sae({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await oae({itemId:t,gemId:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=hn(ar(Ve,"boss_encounters"),xn("isActive","==",!0));return Ls("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},dealBossDamage:async(t,e,r)=>(await lae({bossId:t,damage:e,userName:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=hn(ar(Ve,"boss_quizzes"),xn("isActive","==",!0));return Ls("boss_quizzes",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.classType===t||a.classType==="GLOBAL");e(i)})},answerBossQuiz:async(t,e,r)=>(await cae({quizId:t,questionId:e,answer:r})).data,createParty:async(t,e)=>(await uae({questId:t,userName:e})).data,joinParty:async(t,e)=>(await dae({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>xi(ft(Ve,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await Rd(ar(Ve,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await Lr(ft(Ve,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},subscribeToTutoringSessions:(t,e)=>{const r=hn(ar(Ve,"tutoring_sessions"),xn("classType","==",t),Uu(50));return Ls("tutoring_sessions",r,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()),e(i)})},completeTutoring:async(t,e)=>(await hae({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=hn(ar(Ve,"knowledge_gates"),xn("isActive","==",!0));return Ls("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await fae({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=hn(ar(Ve,"seasonal_cosmetics"),xn("isAvailable","==",!0));return Ls("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await mae({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await Lr(ft(Ve,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=hn(ar(Ve,"daily_challenges"),xn("date","==",e));return Ls("daily_challenges",r,n=>{t(n.docs.map(i=>({id:i.id,...i.data()})))})},claimDailyChallenge:async(t,e)=>(await pae({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const i=ft(Ve,"users",t);await Kw(Ve,async a=>{var f;const s=await a.get(i);if(!s.exists())return;const c=((f=s.data().gamification)==null?void 0:f.activeDailyChallenges)||[];if(c.find(m=>m.challengeId===e)){const m=c.map(p=>p.challengeId===e?{...p,progress:r,completed:n}:p);a.update(i,{"gamification.activeDailyChallenges":m})}else a.update(i,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Ti(ft(Ve,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=hn(ar(Ve,"student_alerts"),xn("isDismissed","==",!1));return Ls("student_alerts",e,r=>{const n=r.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[a.riskLevel]||0)-(s[i.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await gae({alertId:t})},subscribeToStudentBuckets:t=>Ls("student_buckets",ar(Ve,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)})},IF=V.createContext(null),Vi=()=>{const t=V.useContext(IF);if(!t)throw new Error("useToast must be used within ToastProvider");return t},dse={success:u.jsx(Tn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:u.jsx(ws,{className:"w-5 h-5 text-red-400 shrink-0"}),info:u.jsx(_F,{className:"w-5 h-5 text-blue-400 shrink-0"})},hse={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},fse=({children:t})=>{const[e,r]=V.useState([]),n=V.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(f=>[...f,{id:d,message:s,type:c}]),setTimeout(()=>{r(f=>f.filter(m=>m.id!==d))},4e3)},[]),i=V.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),a={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return u.jsxs(IF.Provider,{value:a,children:[t,u.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>u.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${hse[s.type]}`,children:[dse[s.type],u.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),u.jsx("button",{onClick:()=>i(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:u.jsx(Ya,{className:"w-4 h-4"})})]},s.id))})]})},mse=()=>{const[t,e]=V.useState(navigator.onLine),[r,n]=V.useState(!1);return V.useEffect(()=>{const i=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{e(!1),n(!1)};return window.addEventListener("online",i),window.addEventListener("offline",a),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}},[]),t&&!r?null:u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?u.jsxs(u.Fragment,{children:[u.jsx(lse,{className:"w-4 h-4"}),"Connection restored"]}):u.jsxs(u.Fragment,{children:[u.jsx(ose,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})},Ka=({isOpen:t,onClose:e,title:r,children:n,maxWidth:i="max-w-md"})=>(V.useEffect(()=>{const a=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),t?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${i} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[u.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:u.jsx(Ya,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),pse=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[i,a]=ae.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=ae.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,f]=ae.useState(!1),m=Vi(),p=S=>{a(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;f(!0);try{await n(i),s!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Fe.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),m.error("Failed to save settings.")}finally{f(!1)}},b=({icon:S,title:w,description:N,value:I,onToggle:C})=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${I?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:u.jsx(S,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-white text-sm",children:w}),u.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:N})]})]}),u.jsx("button",{onClick:C,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${I?"bg-purple-600":"bg-white/20"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${I?"translate-x-6":"translate-x-1"}`})})]});return u.jsx(Ka,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:Hae,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:i.liveBackground,onToggle:()=>p("liveBackground")}),u.jsx(b,{icon:Nae,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:i.performanceMode,onToggle:()=>p("performanceMode")})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:vs,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:i.privacyMode,onToggle:()=>p("privacyMode")}),i.privacyMode&&u.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),u.jsx("input",{type:"text",value:s,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:Kae,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:i.compactView,onToggle:()=>p("compactView")}),u.jsx(b,{icon:sse,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:i.soundEffects!==!1,onToggle:()=>a(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),u.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?u.jsx(Ha,{className:"w-5 h-5 animate-spin"}):u.jsx(jF,{className:"w-5 h-5"}),"Apply Changes"]})]})})},gse=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:i})=>{var T,S;const[a,s]=V.useState(""),[c,d]=V.useState(!1),[f,m]=V.useState(!1),p=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};V.useEffect(()=>{if(!p.liveBackground){s("");return}(async()=>{try{const N=Km(Wm,"public/background.mp4"),I=await zv(N);s(I)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[p.liveBackground]);const y=async w=>{await Fe.updateUserSettings(t.id,w)},b=()=>{const w=use.filter(N=>!(N.role==="ADMIN"&&t.role!==Li.ADMIN||N.role==="STUDENT"&&t.role!==Li.STUDENT));return u.jsx(u.Fragment,{children:w.map(N=>u.jsxs("button",{onClick:()=>{n(N.name),m(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${p.compactView?"py-2.5":"py-3"} ${r===N.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[u.jsx("span",{className:`${r===N.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:N.icon}),u.jsx("span",{className:"font-medium text-sm",children:N.name})]},N.name))})};return u.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${p.performanceMode?"perf-mode":""}`,children:[u.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),p.liveBackground&&a&&u.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:u.jsx("source",{src:a,type:"video/mp4"})},a)}),u.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${p.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${p.performanceMode?"":"backdrop-blur-[3px]"}`}),u.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:u.jsx(wh,{className:"w-5 h-5 text-white"})}),u.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),u.jsx("button",{onClick:()=>m(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:u.jsx($ae,{className:"w-6 h-6"})})]}),f&&u.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[u.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>m(!1)}),u.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-white",children:p.privacyMode?((T=t.gamification)==null?void 0:T.codename)||"Agent":t.name}),u.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-white",children:u.jsx(Ya,{className:"w-6 h-6"})})]}),u.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:u.jsx(b,{})}),u.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[u.jsxs("button",{onClick:()=>{d(!0),m(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[u.jsx(Ap,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Settings"})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[u.jsx(BO,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),u.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${p.compactView?"w-60":"w-72"}`,children:u.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${p.performanceMode?"":"backdrop-blur-2xl"}`,children:[u.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[u.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:u.jsx(wh,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),u.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Li.ADMIN?"Admin System":"Operative Terminal"})]})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:u.jsx(b,{})}),u.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold truncate text-white",children:p.privacyMode?((S=t.gamification)==null?void 0:S.codename)||"Agent":t.name}),u.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),u.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:u.jsx(Ap,{className:"w-4 h-4"})})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[u.jsx(BO,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),u.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${p.performanceMode?"no-anim":"animate-slide-up"}`,children:u.jsx("div",{className:"max-w-7xl mx-auto h-full",children:i})}),u.jsx(pse,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class ba{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new ba(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Wa{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Wa(r,ba.range(this,e))}}class Ye{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;i=s.start,a=s.end,i===c.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var d=c.slice(i,a).replace(/[^]/g,"$&"),f;i>15?f=""+c.slice(i-15,i):f=c.slice(0,i);var m;a+15<c.length?m=c.slice(a,a+15)+"":m=c.slice(a),n+=f+d+m}var p=new Error(n);return p.name="ParseError",p.__proto__=Ye.prototype,p.position=i,i!=null&&a!=null&&(p.length=a-i),p.rawMessage=e,p}}Ye.prototype.__proto__=Error.prototype;var yse=function(e,r){return e===void 0?r:e},vse=/([A-Z])/g,bse=function(e){return e.replace(vse,"-$1").toLowerCase()},xse={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},wse=/[&><"']/g;function _se(t){return String(t).replace(wse,e=>xse[e])}var RF=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Sse=function(e){var r=RF(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Tse=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Ase=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},br={deflt:yse,escape:_se,hyphenate:bse,getBaseElem:RF,isCharacterBox:Sse,protocolFromUrl:Ase},mv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Ese(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class P8{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in mv)if(mv.hasOwnProperty(r)){var n=mv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Ese(n)}}reportNonstrict(e,r,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,r,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new Ye("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var i=this.strict;if(typeof i=="function")try{i=i(e,r,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=br.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Ec{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return po[Nse[this.id]]}sub(){return po[jse[this.id]]}fracNum(){return po[kse[this.id]]}fracDen(){return po[Cse[this.id]]}cramp(){return po[Ose[this.id]]}text(){return po[Ise[this.id]]}isTight(){return this.size>=2}}var D8=0,Gv=1,rh=2,wl=3,Np=4,ps=5,_h=6,ta=7,po=[new Ec(D8,0,!1),new Ec(Gv,0,!0),new Ec(rh,1,!1),new Ec(wl,1,!0),new Ec(Np,2,!1),new Ec(ps,2,!0),new Ec(_h,3,!1),new Ec(ta,3,!0)],Nse=[Np,ps,Np,ps,_h,ta,_h,ta],jse=[ps,ps,ps,ps,ta,ta,ta,ta],kse=[rh,wl,Np,ps,_h,ta,_h,ta],Cse=[wl,wl,ps,ps,ta,ta,ta,ta],Ose=[Gv,Gv,wl,wl,ps,ps,ta,ta],Ise=[D8,Gv,rh,wl,rh,wl,rh,wl],Ct={DISPLAY:po[D8],TEXT:po[rh],SCRIPT:po[Np],SCRIPTSCRIPT:po[_h]},ST=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Rse(t){for(var e=0;e<ST.length;e++)for(var r=ST[e],n=0;n<r.blocks.length;n++){var i=r.blocks[n];if(t>=i[0]&&t<=i[1])return r.name}return null}var pv=[];ST.forEach(t=>t.blocks.forEach(e=>pv.push(...e)));function MF(t){for(var e=0;e<pv.length;e+=2)if(t>=pv[e]&&t<=pv[e+1])return!0;return!1}var Md=80,Mse=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Pse=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Dse=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Lse=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},Bse=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},Use=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},zse=function(e,r,n){var i=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},$se=function(e,r,n){r=1e3*r;var i="";switch(e){case"sqrtMain":i=Mse(r,Md);break;case"sqrtSize1":i=Pse(r,Md);break;case"sqrtSize2":i=Dse(r,Md);break;case"sqrtSize3":i=Lse(r,Md);break;case"sqrtSize4":i=Bse(r,Md);break;case"sqrtTall":i=zse(r,Md,n)}return i},Vse=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},GO={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Fse=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Og{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var bo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ey={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},KO={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function qse(t,e){bo[t]=e}function L8(t,e,r){if(!bo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),i=bo[e][n];if(!i&&t[0]in KO&&(n=KO[t[0]].charCodeAt(0),i=bo[e][n]),!i&&r==="text"&&MF(n)&&(i=bo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Jw={};function Hse(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!Jw[e]){var r=Jw[e]={cssEmPerMu:Ey.quad[e]/18};for(var n in Ey)Ey.hasOwnProperty(n)&&(r[n]=Ey[n][e])}return Jw[e]}var Gse=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],WO=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],XO=function(e,r){return r.size<2?e:Gse[e-1][r.size-1]};class cl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||cl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=WO[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new cl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:XO(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:WO[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=XO(cl.BASESIZE,e);return this.size===r&&this.textSize===cl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==cl.BASESIZE?["sizing","reset-size"+this.size,"size"+cl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Hse(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}cl.BASESIZE=6;var TT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Kse={ex:!0,em:!0,mu:!0},PF=function(e){return typeof e!="string"&&(e=e.unit),e in TT||e in Kse||e==="ex"},mn=function(e,r){var n;if(e.unit in TT)n=TT[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var i;if(r.style.isTight()?i=r.havingStyle(r.style.text()):i=r,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new Ye("Invalid unit: '"+e.unit+"'");i!==r&&(n*=i.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},it=function(e){return+e.toFixed(4)+"em"},ru=function(e){return e.filter(r=>r).join(" ")},DF=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var i=r.getColor();i&&(this.style.color=i)}},LF=function(e){var r=document.createElement(e);r.className=ru(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&r.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},Wse=/[\s"'>/=\x00-\x1f]/,BF=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+br.escape(ru(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=br.hyphenate(i)+":"+this.style[i]+";");n&&(r+=' style="'+br.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(Wse.test(a))throw new Ye("Invalid attribute name '"+a+"'");r+=" "+a+'="'+br.escape(this.attributes[a])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class Ig{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,DF.call(this,e,n,i),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return LF.call(this,"span")}toMarkup(){return BF.call(this,"span")}}class B8{constructor(e,r,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,DF.call(this,r,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return LF.call(this,"a")}toMarkup(){return BF.call(this,"a")}}class Xse{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+br.escape(this.src)+'"'+(' alt="'+br.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=br.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+br.escape(r)+'"'),e+="'/>",e}}var Qse={:"",:"",:"",:""};class _s{constructor(e,r,n,i,a,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var f=Rse(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[]/.test(this.text)&&(this.text=Qse[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=it(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=ru(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=br.escape(ru(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=br.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,r+=' style="'+br.escape(n)+'"');var a=br.escape(this.text);return e?(r+=">",r+=a,r+="</span>",r):a}}class Il{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+br.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class nu{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",GO[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+br.escape(this.alternate)+'"/>':'<path d="'+br.escape(GO[this.pathName])+'"/>'}}class AT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+br.escape(this.attributes[r])+'"');return e+="/>",e}}function QO(t){if(t instanceof _s)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function Yse(t){if(t instanceof Ig)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var Zse={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Jse={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Yr={math:{},text:{}};function j(t,e,r,n,i,a){Yr[t][i]={font:e,group:r,replace:n},a&&n&&(Yr[t][n]=Yr[t][i])}var P="math",He="text",q="main",te="ams",cn="accent-token",mt="bin",aa="close",sf="inner",kt="mathord",Wn="op-token",Za="open",Mx="punct",ie="rel",$l="spacing",me="textord";j(P,q,ie,"","\\equiv",!0);j(P,q,ie,"","\\prec",!0);j(P,q,ie,"","\\succ",!0);j(P,q,ie,"","\\sim",!0);j(P,q,ie,"","\\perp");j(P,q,ie,"","\\preceq",!0);j(P,q,ie,"","\\succeq",!0);j(P,q,ie,"","\\simeq",!0);j(P,q,ie,"","\\mid",!0);j(P,q,ie,"","\\ll",!0);j(P,q,ie,"","\\gg",!0);j(P,q,ie,"","\\asymp",!0);j(P,q,ie,"","\\parallel");j(P,q,ie,"","\\bowtie",!0);j(P,q,ie,"","\\smile",!0);j(P,q,ie,"","\\sqsubseteq",!0);j(P,q,ie,"","\\sqsupseteq",!0);j(P,q,ie,"","\\doteq",!0);j(P,q,ie,"","\\frown",!0);j(P,q,ie,"","\\ni",!0);j(P,q,ie,"","\\propto",!0);j(P,q,ie,"","\\vdash",!0);j(P,q,ie,"","\\dashv",!0);j(P,q,ie,"","\\owns");j(P,q,Mx,".","\\ldotp");j(P,q,Mx,"","\\cdotp");j(P,q,me,"#","\\#");j(He,q,me,"#","\\#");j(P,q,me,"&","\\&");j(He,q,me,"&","\\&");j(P,q,me,"","\\aleph",!0);j(P,q,me,"","\\forall",!0);j(P,q,me,"","\\hbar",!0);j(P,q,me,"","\\exists",!0);j(P,q,me,"","\\nabla",!0);j(P,q,me,"","\\flat",!0);j(P,q,me,"","\\ell",!0);j(P,q,me,"","\\natural",!0);j(P,q,me,"","\\clubsuit",!0);j(P,q,me,"","\\wp",!0);j(P,q,me,"","\\sharp",!0);j(P,q,me,"","\\diamondsuit",!0);j(P,q,me,"","\\Re",!0);j(P,q,me,"","\\heartsuit",!0);j(P,q,me,"","\\Im",!0);j(P,q,me,"","\\spadesuit",!0);j(P,q,me,"","\\S",!0);j(He,q,me,"","\\S");j(P,q,me,"","\\P",!0);j(He,q,me,"","\\P");j(P,q,me,"","\\dag");j(He,q,me,"","\\dag");j(He,q,me,"","\\textdagger");j(P,q,me,"","\\ddag");j(He,q,me,"","\\ddag");j(He,q,me,"","\\textdaggerdbl");j(P,q,aa,"","\\rmoustache",!0);j(P,q,Za,"","\\lmoustache",!0);j(P,q,aa,"","\\rgroup",!0);j(P,q,Za,"","\\lgroup",!0);j(P,q,mt,"","\\mp",!0);j(P,q,mt,"","\\ominus",!0);j(P,q,mt,"","\\uplus",!0);j(P,q,mt,"","\\sqcap",!0);j(P,q,mt,"","\\ast");j(P,q,mt,"","\\sqcup",!0);j(P,q,mt,"","\\bigcirc",!0);j(P,q,mt,"","\\bullet",!0);j(P,q,mt,"","\\ddagger");j(P,q,mt,"","\\wr",!0);j(P,q,mt,"","\\amalg");j(P,q,mt,"&","\\And");j(P,q,ie,"","\\longleftarrow",!0);j(P,q,ie,"","\\Leftarrow",!0);j(P,q,ie,"","\\Longleftarrow",!0);j(P,q,ie,"","\\longrightarrow",!0);j(P,q,ie,"","\\Rightarrow",!0);j(P,q,ie,"","\\Longrightarrow",!0);j(P,q,ie,"","\\leftrightarrow",!0);j(P,q,ie,"","\\longleftrightarrow",!0);j(P,q,ie,"","\\Leftrightarrow",!0);j(P,q,ie,"","\\Longleftrightarrow",!0);j(P,q,ie,"","\\mapsto",!0);j(P,q,ie,"","\\longmapsto",!0);j(P,q,ie,"","\\nearrow",!0);j(P,q,ie,"","\\hookleftarrow",!0);j(P,q,ie,"","\\hookrightarrow",!0);j(P,q,ie,"","\\searrow",!0);j(P,q,ie,"","\\leftharpoonup",!0);j(P,q,ie,"","\\rightharpoonup",!0);j(P,q,ie,"","\\swarrow",!0);j(P,q,ie,"","\\leftharpoondown",!0);j(P,q,ie,"","\\rightharpoondown",!0);j(P,q,ie,"","\\nwarrow",!0);j(P,q,ie,"","\\rightleftharpoons",!0);j(P,te,ie,"","\\nless",!0);j(P,te,ie,"","\\@nleqslant");j(P,te,ie,"","\\@nleqq");j(P,te,ie,"","\\lneq",!0);j(P,te,ie,"","\\lneqq",!0);j(P,te,ie,"","\\@lvertneqq");j(P,te,ie,"","\\lnsim",!0);j(P,te,ie,"","\\lnapprox",!0);j(P,te,ie,"","\\nprec",!0);j(P,te,ie,"","\\npreceq",!0);j(P,te,ie,"","\\precnsim",!0);j(P,te,ie,"","\\precnapprox",!0);j(P,te,ie,"","\\nsim",!0);j(P,te,ie,"","\\@nshortmid");j(P,te,ie,"","\\nmid",!0);j(P,te,ie,"","\\nvdash",!0);j(P,te,ie,"","\\nvDash",!0);j(P,te,ie,"","\\ntriangleleft");j(P,te,ie,"","\\ntrianglelefteq",!0);j(P,te,ie,"","\\subsetneq",!0);j(P,te,ie,"","\\@varsubsetneq");j(P,te,ie,"","\\subsetneqq",!0);j(P,te,ie,"","\\@varsubsetneqq");j(P,te,ie,"","\\ngtr",!0);j(P,te,ie,"","\\@ngeqslant");j(P,te,ie,"","\\@ngeqq");j(P,te,ie,"","\\gneq",!0);j(P,te,ie,"","\\gneqq",!0);j(P,te,ie,"","\\@gvertneqq");j(P,te,ie,"","\\gnsim",!0);j(P,te,ie,"","\\gnapprox",!0);j(P,te,ie,"","\\nsucc",!0);j(P,te,ie,"","\\nsucceq",!0);j(P,te,ie,"","\\succnsim",!0);j(P,te,ie,"","\\succnapprox",!0);j(P,te,ie,"","\\ncong",!0);j(P,te,ie,"","\\@nshortparallel");j(P,te,ie,"","\\nparallel",!0);j(P,te,ie,"","\\nVDash",!0);j(P,te,ie,"","\\ntriangleright");j(P,te,ie,"","\\ntrianglerighteq",!0);j(P,te,ie,"","\\@nsupseteqq");j(P,te,ie,"","\\supsetneq",!0);j(P,te,ie,"","\\@varsupsetneq");j(P,te,ie,"","\\supsetneqq",!0);j(P,te,ie,"","\\@varsupsetneqq");j(P,te,ie,"","\\nVdash",!0);j(P,te,ie,"","\\precneqq",!0);j(P,te,ie,"","\\succneqq",!0);j(P,te,ie,"","\\@nsubseteqq");j(P,te,mt,"","\\unlhd");j(P,te,mt,"","\\unrhd");j(P,te,ie,"","\\nleftarrow",!0);j(P,te,ie,"","\\nrightarrow",!0);j(P,te,ie,"","\\nLeftarrow",!0);j(P,te,ie,"","\\nRightarrow",!0);j(P,te,ie,"","\\nleftrightarrow",!0);j(P,te,ie,"","\\nLeftrightarrow",!0);j(P,te,ie,"","\\vartriangle");j(P,te,me,"","\\hslash");j(P,te,me,"","\\triangledown");j(P,te,me,"","\\lozenge");j(P,te,me,"","\\circledS");j(P,te,me,"","\\circledR");j(He,te,me,"","\\circledR");j(P,te,me,"","\\measuredangle",!0);j(P,te,me,"","\\nexists");j(P,te,me,"","\\mho");j(P,te,me,"","\\Finv",!0);j(P,te,me,"","\\Game",!0);j(P,te,me,"","\\backprime");j(P,te,me,"","\\blacktriangle");j(P,te,me,"","\\blacktriangledown");j(P,te,me,"","\\blacksquare");j(P,te,me,"","\\blacklozenge");j(P,te,me,"","\\bigstar");j(P,te,me,"","\\sphericalangle",!0);j(P,te,me,"","\\complement",!0);j(P,te,me,"","\\eth",!0);j(He,q,me,"","");j(P,te,me,"","\\diagup");j(P,te,me,"","\\diagdown");j(P,te,me,"","\\square");j(P,te,me,"","\\Box");j(P,te,me,"","\\Diamond");j(P,te,me,"","\\yen",!0);j(He,te,me,"","\\yen",!0);j(P,te,me,"","\\checkmark",!0);j(He,te,me,"","\\checkmark");j(P,te,me,"","\\beth",!0);j(P,te,me,"","\\daleth",!0);j(P,te,me,"","\\gimel",!0);j(P,te,me,"","\\digamma",!0);j(P,te,me,"","\\varkappa");j(P,te,Za,"","\\@ulcorner",!0);j(P,te,aa,"","\\@urcorner",!0);j(P,te,Za,"","\\@llcorner",!0);j(P,te,aa,"","\\@lrcorner",!0);j(P,te,ie,"","\\leqq",!0);j(P,te,ie,"","\\leqslant",!0);j(P,te,ie,"","\\eqslantless",!0);j(P,te,ie,"","\\lesssim",!0);j(P,te,ie,"","\\lessapprox",!0);j(P,te,ie,"","\\approxeq",!0);j(P,te,mt,"","\\lessdot");j(P,te,ie,"","\\lll",!0);j(P,te,ie,"","\\lessgtr",!0);j(P,te,ie,"","\\lesseqgtr",!0);j(P,te,ie,"","\\lesseqqgtr",!0);j(P,te,ie,"","\\doteqdot");j(P,te,ie,"","\\risingdotseq",!0);j(P,te,ie,"","\\fallingdotseq",!0);j(P,te,ie,"","\\backsim",!0);j(P,te,ie,"","\\backsimeq",!0);j(P,te,ie,"","\\subseteqq",!0);j(P,te,ie,"","\\Subset",!0);j(P,te,ie,"","\\sqsubset",!0);j(P,te,ie,"","\\preccurlyeq",!0);j(P,te,ie,"","\\curlyeqprec",!0);j(P,te,ie,"","\\precsim",!0);j(P,te,ie,"","\\precapprox",!0);j(P,te,ie,"","\\vartriangleleft");j(P,te,ie,"","\\trianglelefteq");j(P,te,ie,"","\\vDash",!0);j(P,te,ie,"","\\Vvdash",!0);j(P,te,ie,"","\\smallsmile");j(P,te,ie,"","\\smallfrown");j(P,te,ie,"","\\bumpeq",!0);j(P,te,ie,"","\\Bumpeq",!0);j(P,te,ie,"","\\geqq",!0);j(P,te,ie,"","\\geqslant",!0);j(P,te,ie,"","\\eqslantgtr",!0);j(P,te,ie,"","\\gtrsim",!0);j(P,te,ie,"","\\gtrapprox",!0);j(P,te,mt,"","\\gtrdot");j(P,te,ie,"","\\ggg",!0);j(P,te,ie,"","\\gtrless",!0);j(P,te,ie,"","\\gtreqless",!0);j(P,te,ie,"","\\gtreqqless",!0);j(P,te,ie,"","\\eqcirc",!0);j(P,te,ie,"","\\circeq",!0);j(P,te,ie,"","\\triangleq",!0);j(P,te,ie,"","\\thicksim");j(P,te,ie,"","\\thickapprox");j(P,te,ie,"","\\supseteqq",!0);j(P,te,ie,"","\\Supset",!0);j(P,te,ie,"","\\sqsupset",!0);j(P,te,ie,"","\\succcurlyeq",!0);j(P,te,ie,"","\\curlyeqsucc",!0);j(P,te,ie,"","\\succsim",!0);j(P,te,ie,"","\\succapprox",!0);j(P,te,ie,"","\\vartriangleright");j(P,te,ie,"","\\trianglerighteq");j(P,te,ie,"","\\Vdash",!0);j(P,te,ie,"","\\shortmid");j(P,te,ie,"","\\shortparallel");j(P,te,ie,"","\\between",!0);j(P,te,ie,"","\\pitchfork",!0);j(P,te,ie,"","\\varpropto");j(P,te,ie,"","\\blacktriangleleft");j(P,te,ie,"","\\therefore",!0);j(P,te,ie,"","\\backepsilon");j(P,te,ie,"","\\blacktriangleright");j(P,te,ie,"","\\because",!0);j(P,te,ie,"","\\llless");j(P,te,ie,"","\\gggtr");j(P,te,mt,"","\\lhd");j(P,te,mt,"","\\rhd");j(P,te,ie,"","\\eqsim",!0);j(P,q,ie,"","\\Join");j(P,te,ie,"","\\Doteq",!0);j(P,te,mt,"","\\dotplus",!0);j(P,te,mt,"","\\smallsetminus");j(P,te,mt,"","\\Cap",!0);j(P,te,mt,"","\\Cup",!0);j(P,te,mt,"","\\doublebarwedge",!0);j(P,te,mt,"","\\boxminus",!0);j(P,te,mt,"","\\boxplus",!0);j(P,te,mt,"","\\divideontimes",!0);j(P,te,mt,"","\\ltimes",!0);j(P,te,mt,"","\\rtimes",!0);j(P,te,mt,"","\\leftthreetimes",!0);j(P,te,mt,"","\\rightthreetimes",!0);j(P,te,mt,"","\\curlywedge",!0);j(P,te,mt,"","\\curlyvee",!0);j(P,te,mt,"","\\circleddash",!0);j(P,te,mt,"","\\circledast",!0);j(P,te,mt,"","\\centerdot");j(P,te,mt,"","\\intercal",!0);j(P,te,mt,"","\\doublecap");j(P,te,mt,"","\\doublecup");j(P,te,mt,"","\\boxtimes",!0);j(P,te,ie,"","\\dashrightarrow",!0);j(P,te,ie,"","\\dashleftarrow",!0);j(P,te,ie,"","\\leftleftarrows",!0);j(P,te,ie,"","\\leftrightarrows",!0);j(P,te,ie,"","\\Lleftarrow",!0);j(P,te,ie,"","\\twoheadleftarrow",!0);j(P,te,ie,"","\\leftarrowtail",!0);j(P,te,ie,"","\\looparrowleft",!0);j(P,te,ie,"","\\leftrightharpoons",!0);j(P,te,ie,"","\\curvearrowleft",!0);j(P,te,ie,"","\\circlearrowleft",!0);j(P,te,ie,"","\\Lsh",!0);j(P,te,ie,"","\\upuparrows",!0);j(P,te,ie,"","\\upharpoonleft",!0);j(P,te,ie,"","\\downharpoonleft",!0);j(P,q,ie,"","\\origof",!0);j(P,q,ie,"","\\imageof",!0);j(P,te,ie,"","\\multimap",!0);j(P,te,ie,"","\\leftrightsquigarrow",!0);j(P,te,ie,"","\\rightrightarrows",!0);j(P,te,ie,"","\\rightleftarrows",!0);j(P,te,ie,"","\\twoheadrightarrow",!0);j(P,te,ie,"","\\rightarrowtail",!0);j(P,te,ie,"","\\looparrowright",!0);j(P,te,ie,"","\\curvearrowright",!0);j(P,te,ie,"","\\circlearrowright",!0);j(P,te,ie,"","\\Rsh",!0);j(P,te,ie,"","\\downdownarrows",!0);j(P,te,ie,"","\\upharpoonright",!0);j(P,te,ie,"","\\downharpoonright",!0);j(P,te,ie,"","\\rightsquigarrow",!0);j(P,te,ie,"","\\leadsto");j(P,te,ie,"","\\Rrightarrow",!0);j(P,te,ie,"","\\restriction");j(P,q,me,"","`");j(P,q,me,"$","\\$");j(He,q,me,"$","\\$");j(He,q,me,"$","\\textdollar");j(P,q,me,"%","\\%");j(He,q,me,"%","\\%");j(P,q,me,"_","\\_");j(He,q,me,"_","\\_");j(He,q,me,"_","\\textunderscore");j(P,q,me,"","\\angle",!0);j(P,q,me,"","\\infty",!0);j(P,q,me,"","\\prime");j(P,q,me,"","\\triangle");j(P,q,me,"","\\Gamma",!0);j(P,q,me,"","\\Delta",!0);j(P,q,me,"","\\Theta",!0);j(P,q,me,"","\\Lambda",!0);j(P,q,me,"","\\Xi",!0);j(P,q,me,"","\\Pi",!0);j(P,q,me,"","\\Sigma",!0);j(P,q,me,"","\\Upsilon",!0);j(P,q,me,"","\\Phi",!0);j(P,q,me,"","\\Psi",!0);j(P,q,me,"","\\Omega",!0);j(P,q,me,"A","");j(P,q,me,"B","");j(P,q,me,"E","");j(P,q,me,"Z","");j(P,q,me,"H","");j(P,q,me,"I","");j(P,q,me,"K","");j(P,q,me,"M","");j(P,q,me,"N","");j(P,q,me,"O","");j(P,q,me,"P","");j(P,q,me,"T","");j(P,q,me,"X","");j(P,q,me,"","\\neg",!0);j(P,q,me,"","\\lnot");j(P,q,me,"","\\top");j(P,q,me,"","\\bot");j(P,q,me,"","\\emptyset");j(P,te,me,"","\\varnothing");j(P,q,kt,"","\\alpha",!0);j(P,q,kt,"","\\beta",!0);j(P,q,kt,"","\\gamma",!0);j(P,q,kt,"","\\delta",!0);j(P,q,kt,"","\\epsilon",!0);j(P,q,kt,"","\\zeta",!0);j(P,q,kt,"","\\eta",!0);j(P,q,kt,"","\\theta",!0);j(P,q,kt,"","\\iota",!0);j(P,q,kt,"","\\kappa",!0);j(P,q,kt,"","\\lambda",!0);j(P,q,kt,"","\\mu",!0);j(P,q,kt,"","\\nu",!0);j(P,q,kt,"","\\xi",!0);j(P,q,kt,"","\\omicron",!0);j(P,q,kt,"","\\pi",!0);j(P,q,kt,"","\\rho",!0);j(P,q,kt,"","\\sigma",!0);j(P,q,kt,"","\\tau",!0);j(P,q,kt,"","\\upsilon",!0);j(P,q,kt,"","\\phi",!0);j(P,q,kt,"","\\chi",!0);j(P,q,kt,"","\\psi",!0);j(P,q,kt,"","\\omega",!0);j(P,q,kt,"","\\varepsilon",!0);j(P,q,kt,"","\\vartheta",!0);j(P,q,kt,"","\\varpi",!0);j(P,q,kt,"","\\varrho",!0);j(P,q,kt,"","\\varsigma",!0);j(P,q,kt,"","\\varphi",!0);j(P,q,mt,"","*",!0);j(P,q,mt,"+","+");j(P,q,mt,"","-",!0);j(P,q,mt,"","\\cdot",!0);j(P,q,mt,"","\\circ",!0);j(P,q,mt,"","\\div",!0);j(P,q,mt,"","\\pm",!0);j(P,q,mt,"","\\times",!0);j(P,q,mt,"","\\cap",!0);j(P,q,mt,"","\\cup",!0);j(P,q,mt,"","\\setminus",!0);j(P,q,mt,"","\\land");j(P,q,mt,"","\\lor");j(P,q,mt,"","\\wedge",!0);j(P,q,mt,"","\\vee",!0);j(P,q,me,"","\\surd");j(P,q,Za,"","\\langle",!0);j(P,q,Za,"","\\lvert");j(P,q,Za,"","\\lVert");j(P,q,aa,"?","?");j(P,q,aa,"!","!");j(P,q,aa,"","\\rangle",!0);j(P,q,aa,"","\\rvert");j(P,q,aa,"","\\rVert");j(P,q,ie,"=","=");j(P,q,ie,":",":");j(P,q,ie,"","\\approx",!0);j(P,q,ie,"","\\cong",!0);j(P,q,ie,"","\\ge");j(P,q,ie,"","\\geq",!0);j(P,q,ie,"","\\gets");j(P,q,ie,">","\\gt",!0);j(P,q,ie,"","\\in",!0);j(P,q,ie,"","\\@not");j(P,q,ie,"","\\subset",!0);j(P,q,ie,"","\\supset",!0);j(P,q,ie,"","\\subseteq",!0);j(P,q,ie,"","\\supseteq",!0);j(P,te,ie,"","\\nsubseteq",!0);j(P,te,ie,"","\\nsupseteq",!0);j(P,q,ie,"","\\models");j(P,q,ie,"","\\leftarrow",!0);j(P,q,ie,"","\\le");j(P,q,ie,"","\\leq",!0);j(P,q,ie,"<","\\lt",!0);j(P,q,ie,"","\\rightarrow",!0);j(P,q,ie,"","\\to");j(P,te,ie,"","\\ngeq",!0);j(P,te,ie,"","\\nleq",!0);j(P,q,$l,"","\\ ");j(P,q,$l,"","\\space");j(P,q,$l,"","\\nobreakspace");j(He,q,$l,"","\\ ");j(He,q,$l,""," ");j(He,q,$l,"","\\space");j(He,q,$l,"","\\nobreakspace");j(P,q,$l,null,"\\nobreak");j(P,q,$l,null,"\\allowbreak");j(P,q,Mx,",",",");j(P,q,Mx,";",";");j(P,te,mt,"","\\barwedge",!0);j(P,te,mt,"","\\veebar",!0);j(P,q,mt,"","\\odot",!0);j(P,q,mt,"","\\oplus",!0);j(P,q,mt,"","\\otimes",!0);j(P,q,me,"","\\partial",!0);j(P,q,mt,"","\\oslash",!0);j(P,te,mt,"","\\circledcirc",!0);j(P,te,mt,"","\\boxdot",!0);j(P,q,mt,"","\\bigtriangleup");j(P,q,mt,"","\\bigtriangledown");j(P,q,mt,"","\\dagger");j(P,q,mt,"","\\diamond");j(P,q,mt,"","\\star");j(P,q,mt,"","\\triangleleft");j(P,q,mt,"","\\triangleright");j(P,q,Za,"{","\\{");j(He,q,me,"{","\\{");j(He,q,me,"{","\\textbraceleft");j(P,q,aa,"}","\\}");j(He,q,me,"}","\\}");j(He,q,me,"}","\\textbraceright");j(P,q,Za,"{","\\lbrace");j(P,q,aa,"}","\\rbrace");j(P,q,Za,"[","\\lbrack",!0);j(He,q,me,"[","\\lbrack",!0);j(P,q,aa,"]","\\rbrack",!0);j(He,q,me,"]","\\rbrack",!0);j(P,q,Za,"(","\\lparen",!0);j(P,q,aa,")","\\rparen",!0);j(He,q,me,"<","\\textless",!0);j(He,q,me,">","\\textgreater",!0);j(P,q,Za,"","\\lfloor",!0);j(P,q,aa,"","\\rfloor",!0);j(P,q,Za,"","\\lceil",!0);j(P,q,aa,"","\\rceil",!0);j(P,q,me,"\\","\\backslash");j(P,q,me,"","|");j(P,q,me,"","\\vert");j(He,q,me,"|","\\textbar",!0);j(P,q,me,"","\\|");j(P,q,me,"","\\Vert");j(He,q,me,"","\\textbardbl");j(He,q,me,"~","\\textasciitilde");j(He,q,me,"\\","\\textbackslash");j(He,q,me,"^","\\textasciicircum");j(P,q,ie,"","\\uparrow",!0);j(P,q,ie,"","\\Uparrow",!0);j(P,q,ie,"","\\downarrow",!0);j(P,q,ie,"","\\Downarrow",!0);j(P,q,ie,"","\\updownarrow",!0);j(P,q,ie,"","\\Updownarrow",!0);j(P,q,Wn,"","\\coprod");j(P,q,Wn,"","\\bigvee");j(P,q,Wn,"","\\bigwedge");j(P,q,Wn,"","\\biguplus");j(P,q,Wn,"","\\bigcap");j(P,q,Wn,"","\\bigcup");j(P,q,Wn,"","\\int");j(P,q,Wn,"","\\intop");j(P,q,Wn,"","\\iint");j(P,q,Wn,"","\\iiint");j(P,q,Wn,"","\\prod");j(P,q,Wn,"","\\sum");j(P,q,Wn,"","\\bigotimes");j(P,q,Wn,"","\\bigoplus");j(P,q,Wn,"","\\bigodot");j(P,q,Wn,"","\\oint");j(P,q,Wn,"","\\oiint");j(P,q,Wn,"","\\oiiint");j(P,q,Wn,"","\\bigsqcup");j(P,q,Wn,"","\\smallint");j(He,q,sf,"","\\textellipsis");j(P,q,sf,"","\\mathellipsis");j(He,q,sf,"","\\ldots",!0);j(P,q,sf,"","\\ldots",!0);j(P,q,sf,"","\\@cdots",!0);j(P,q,sf,"","\\ddots",!0);j(P,q,me,"","\\varvdots");j(He,q,me,"","\\varvdots");j(P,q,cn,"","\\acute");j(P,q,cn,"","\\grave");j(P,q,cn,"","\\ddot");j(P,q,cn,"~","\\tilde");j(P,q,cn,"","\\bar");j(P,q,cn,"","\\breve");j(P,q,cn,"","\\check");j(P,q,cn,"^","\\hat");j(P,q,cn,"","\\vec");j(P,q,cn,"","\\dot");j(P,q,cn,"","\\mathring");j(P,q,kt,"","\\@imath");j(P,q,kt,"","\\@jmath");j(P,q,me,"","");j(P,q,me,"","");j(He,q,me,"","\\i",!0);j(He,q,me,"","\\j",!0);j(He,q,me,"","\\ss",!0);j(He,q,me,"","\\ae",!0);j(He,q,me,"","\\oe",!0);j(He,q,me,"","\\o",!0);j(He,q,me,"","\\AE",!0);j(He,q,me,"","\\OE",!0);j(He,q,me,"","\\O",!0);j(He,q,cn,"","\\'");j(He,q,cn,"","\\`");j(He,q,cn,"","\\^");j(He,q,cn,"","\\~");j(He,q,cn,"","\\=");j(He,q,cn,"","\\u");j(He,q,cn,"","\\.");j(He,q,cn,"","\\c");j(He,q,cn,"","\\r");j(He,q,cn,"","\\v");j(He,q,cn,"",'\\"');j(He,q,cn,"","\\H");j(He,q,cn,"","\\textcircled");var UF={"--":!0,"---":!0,"``":!0,"''":!0};j(He,q,me,"","--",!0);j(He,q,me,"","\\textendash");j(He,q,me,"","---",!0);j(He,q,me,"","\\textemdash");j(He,q,me,"","`",!0);j(He,q,me,"","\\textquoteleft");j(He,q,me,"","'",!0);j(He,q,me,"","\\textquoteright");j(He,q,me,"","``",!0);j(He,q,me,"","\\textquotedblleft");j(He,q,me,"","''",!0);j(He,q,me,"","\\textquotedblright");j(P,q,me,"","\\degree",!0);j(He,q,me,"","\\degree");j(He,q,me,"","\\textdegree",!0);j(P,q,me,"","\\pounds");j(P,q,me,"","\\mathsterling",!0);j(He,q,me,"","\\pounds");j(He,q,me,"","\\textsterling",!0);j(P,te,me,"","\\maltese");j(He,te,me,"","\\maltese");var YO='0123456789/@."';for(var e5=0;e5<YO.length;e5++){var ZO=YO.charAt(e5);j(P,q,me,ZO,ZO)}var JO='0123456789!@*()-=+";:?/.,';for(var t5=0;t5<JO.length;t5++){var eI=JO.charAt(t5);j(He,q,me,eI,eI)}var Kv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var r5=0;r5<Kv.length;r5++){var Ny=Kv.charAt(r5);j(P,q,kt,Ny,Ny),j(He,q,me,Ny,Ny)}j(P,te,me,"C","");j(He,te,me,"C","");j(P,te,me,"H","");j(He,te,me,"H","");j(P,te,me,"N","");j(He,te,me,"N","");j(P,te,me,"P","");j(He,te,me,"P","");j(P,te,me,"Q","");j(He,te,me,"Q","");j(P,te,me,"R","");j(He,te,me,"R","");j(P,te,me,"Z","");j(He,te,me,"Z","");j(P,q,kt,"h","");j(He,q,kt,"h","");var Rt="";for(var Yi=0;Yi<Kv.length;Yi++){var wn=Kv.charAt(Yi);Rt=String.fromCharCode(55349,56320+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56372+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56424+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56580+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56684+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56736+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56788+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56840+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56944+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Yi<26&&(Rt=String.fromCharCode(55349,56632+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt),Rt=String.fromCharCode(55349,56476+Yi),j(P,q,kt,wn,Rt),j(He,q,me,wn,Rt))}Rt="";j(P,q,kt,"k",Rt);j(He,q,me,"k",Rt);for(var zu=0;zu<10;zu++){var Nc=zu.toString();Rt=String.fromCharCode(55349,57294+zu),j(P,q,kt,Nc,Rt),j(He,q,me,Nc,Rt),Rt=String.fromCharCode(55349,57314+zu),j(P,q,kt,Nc,Rt),j(He,q,me,Nc,Rt),Rt=String.fromCharCode(55349,57324+zu),j(P,q,kt,Nc,Rt),j(He,q,me,Nc,Rt),Rt=String.fromCharCode(55349,57334+zu),j(P,q,kt,Nc,Rt),j(He,q,me,Nc,Rt)}var ET="";for(var n5=0;n5<ET.length;n5++){var jy=ET.charAt(n5);j(P,q,kt,jy,jy),j(He,q,me,jy,jy)}var ky=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],tI=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],eoe=function(e,r){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=r==="math"?0:1;if(119808<=a&&a<120484){var c=Math.floor((a-119808)/26);return[ky[c][2],ky[c][s]]}else if(120782<=a&&a<=120831){var d=Math.floor((a-120782)/10);return[tI[d][2],tI[d][s]]}else{if(a===120485||a===120486)return[ky[0][2],ky[0][s]];if(120486<a&&a<120782)return["",""];throw new Ye("Unsupported character: "+e)}},Px=function(e,r,n){return Yr[n][e]&&Yr[n][e].replace&&(e=Yr[n][e].replace),{value:e,metrics:L8(e,r,n)}},$s=function(e,r,n,i,a){var s=Px(e,r,n),c=s.metrics;e=s.value;var d;if(c){var f=c.italic;(n==="text"||i&&i.font==="mathit")&&(f=0),d=new _s(e,c.height,c.depth,f,c.skew,c.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new _s(e,0,0,0,0,0,a);if(i){d.maxFontSize=i.sizeMultiplier,i.style.isTight()&&d.classes.push("mtight");var m=i.getColor();m&&(d.style.color=m)}return d},toe=function(e,r,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&Px(e,"Main-Bold",r).metrics?$s(e,"Main-Bold",r,n,i.concat(["mathbf"])):e==="\\"||Yr[r][e].font==="main"?$s(e,"Main-Regular",r,n,i):$s(e,"AMS-Regular",r,n,i.concat(["amsrm"]))},roe=function(e,r,n,i,a){return a!=="textord"&&Px(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},noe=function(e,r,n){var i=e.mode,a=e.text,s=["mord"],c=i==="math"||i==="text"&&r.font,d=c?r.font:r.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=eoe(a,i)),f.length>0)return $s(a,f,i,r,s.concat(m));if(d){var p,y;if(d==="boldsymbol"){var b=roe(a,i,r,s,n);p=b.fontName,y=[b.fontClass]}else c?(p=VF[d].fontName,y=[d]):(p=Cy(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(Px(a,p,i).metrics)return $s(a,p,i,r,s.concat(y));if(UF.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<a.length;S++)T.push($s(a[S],p,i,r,s.concat(y)));return $F(T)}}if(n==="mathord")return $s(a,"Math-Italic",i,r,s.concat(["mathnormal"]));if(n==="textord"){var w=Yr[i][a]&&Yr[i][a].font;if(w==="ams"){var N=Cy("amsrm",r.fontWeight,r.fontShape);return $s(a,N,i,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var I=Cy("textrm",r.fontWeight,r.fontShape);return $s(a,I,i,r,s.concat(r.fontWeight,r.fontShape))}else{var C=Cy(w,r.fontWeight,r.fontShape);return $s(a,C,i,r,s.concat(C,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},ioe=(t,e)=>{if(ru(t.classes)!==ru(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&t.style[i]!==e.style[i])return!1;return!0},aoe=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof _s&&n instanceof _s&&ioe(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},U8=function(e){for(var r=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=i},ya=function(e,r,n,i){var a=new Ig(e,r,n,i);return U8(a),a},zF=(t,e,r,n)=>new Ig(t,e,r,n),soe=function(e,r,n){var i=ya([e],[],r);return i.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),i.style.borderBottomWidth=it(i.height),i.maxFontSize=1,i},ooe=function(e,r,n,i){var a=new B8(e,r,n,i);return U8(a),a},$F=function(e){var r=new Og(e);return U8(r),r},loe=function(e,r){return e instanceof Og?ya([],[e],r):e},coe=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],i=-r[0].shift-r[0].elem.depth,a=i,s=1;s<r.length;s++){var c=-r[s].shift-a-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);a=a+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:i}}var f;if(e.positionType==="top"){for(var m=e.positionData,p=0;p<e.children.length;p++){var y=e.children[p];m-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}f=m}else if(e.positionType==="bottom")f=-e.positionData;else{var b=e.children[0];if(b.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-b.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-b.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},uoe=function(e,r){for(var{children:n,depth:i}=coe(e),a=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;a=Math.max(a,d.maxFontSize,d.height)}}a+=2;var f=ya(["pstrut"],[]);f.style.height=it(a);for(var m=[],p=i,y=i,b=i,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")b+=S.size;else{var w=S.elem,N=S.wrapperClasses||[],I=S.wrapperStyle||{},C=ya(N,[f,w],void 0,I);C.style.top=it(-a-b-w.depth),S.marginLeft&&(C.style.marginLeft=S.marginLeft),S.marginRight&&(C.style.marginRight=S.marginRight),m.push(C),b+=w.height+w.depth}p=Math.min(p,b),y=Math.max(y,b)}var z=ya(["vlist"],m);z.style.height=it(y);var O;if(p<0){var B=ya([],[]),E=ya(["vlist"],[B]);E.style.height=it(-p);var A=ya(["vlist-s"],[new _s("")]);O=[ya(["vlist-r"],[z,A]),ya(["vlist-r"],[E])]}else O=[ya(["vlist-r"],[z])];var R=ya(["vlist-t"],O);return O.length===2&&R.classes.push("vlist-t2"),R.height=y,R.depth=-p,R},doe=(t,e)=>{var r=ya(["mspace"],[],e),n=mn(t,e);return r.style.marginRight=it(n),r},Cy=function(e,r,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",i+"-"+a},VF={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},FF={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},hoe=function(e,r){var[n,i,a]=FF[e],s=new nu(n),c=new Il([s],{width:it(i),height:it(a),style:"width:"+it(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),d=zF(["overlay"],[c],r);return d.height=a,d.style.height=it(a),d.style.width=it(i),d},_e={fontMap:VF,makeSymbol:$s,mathsym:toe,makeSpan:ya,makeSvgSpan:zF,makeLineSpan:soe,makeAnchor:ooe,makeFragment:$F,wrapFragment:loe,makeVList:uoe,makeOrd:noe,makeGlue:doe,staticSvg:hoe,svgData:FF,tryCombineChars:aoe},fn={number:3,unit:"mu"},$u={number:4,unit:"mu"},il={number:5,unit:"mu"},foe={mord:{mop:fn,mbin:$u,mrel:il,minner:fn},mop:{mord:fn,mop:fn,mrel:il,minner:fn},mbin:{mord:$u,mop:$u,mopen:$u,minner:$u},mrel:{mord:il,mop:il,mopen:il,minner:il},mopen:{},mclose:{mop:fn,mbin:$u,mrel:il,minner:fn},mpunct:{mord:fn,mop:fn,mrel:il,mopen:fn,mclose:fn,mpunct:fn,minner:fn},minner:{mord:fn,mop:fn,mbin:$u,mrel:il,mopen:fn,mpunct:fn,minner:fn}},moe={mord:{mop:fn},mop:{mord:fn,mop:fn},mbin:{},mrel:{},mopen:{},mclose:{mop:fn},mpunct:{},minner:{mop:fn}},qF={},Wv={},Xv={};function ht(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},d=0;d<r.length;++d)qF[r[d]]=c;e&&(a&&(Wv[e]=a),s&&(Xv[e]=s))}function V0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;ht({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var Qv=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Mn=function(e){return e.type==="ordgroup"?e.body:[e]},Rl=_e.makeSpan,poe=["leftmost","mbin","mopen","mrel","mop","mpunct"],goe=["rightmost","mrel","mclose","mpunct"],yoe={display:Ct.DISPLAY,text:Ct.TEXT,script:Ct.SCRIPT,scriptscript:Ct.SCRIPTSCRIPT},voe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ei=function(e,r,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var c=fr(e[s],r);if(c instanceof Og){var d=c.children;a.push(...d)}else a.push(c)}if(_e.tryCombineChars(a),!n)return a;var f=r;if(e.length===1){var m=e[0];m.type==="sizing"?f=r.havingSize(m.size):m.type==="styling"&&(f=r.havingStyle(yoe[m.style]))}var p=Rl([i[0]||"leftmost"],[],r),y=Rl([i[1]||"rightmost"],[],r),b=n==="root";return rI(a,(T,S)=>{var w=S.classes[0],N=T.classes[0];w==="mbin"&&goe.includes(N)?S.classes[0]="mord":N==="mbin"&&poe.includes(w)&&(T.classes[0]="mord")},{node:p},y,b),rI(a,(T,S)=>{var w=NT(S),N=NT(T),I=w&&N?T.hasClass("mtight")?moe[w][N]:foe[w][N]:null;if(I)return _e.makeGlue(I,f)},{node:p},y,b),a},rI=function t(e,r,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var c=e[s],d=HF(c);if(d){t(d.children,r,n,null,a);continue}var f=!c.hasClass("mspace");if(f){var m=r(c,n.node);m&&(n.insertAfter?n.insertAfter(m):(e.unshift(m),s++))}f?n.node=c:a&&c.hasClass("newline")&&(n.node=Rl(["leftmost"])),n.insertAfter=(p=>y=>{e.splice(p+1,0,y),s++})(s)}i&&e.pop()},HF=function(e){return e instanceof Og||e instanceof B8||e instanceof Ig&&e.hasClass("enclosing")?e:null},boe=function t(e,r){var n=HF(e);if(n){var i=n.children;if(i.length){if(r==="right")return t(i[i.length-1],"right");if(r==="left")return t(i[0],"left")}}return e},NT=function(e,r){return e?(r&&(e=boe(e,r)),voe[e.classes[0]]||null):null},jp=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Rl(r.concat(n))},fr=function(e,r,n){if(!e)return Rl();if(Wv[e.type]){var i=Wv[e.type](e,r);if(n&&r.size!==n.size){i=Rl(r.sizingClasses(n),[i],r);var a=r.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new Ye("Got group of unknown type: '"+e.type+"'")};function Oy(t,e){var r=Rl(["base"],t,e),n=Rl(["strut"]);return n.style.height=it(r.height+r.depth),r.depth&&(n.style.verticalAlign=it(-r.depth)),r.children.unshift(n),r}function jT(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=ei(t,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(a.push(Oy(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(Oy(s,e)),s=[]),a.push(n[c]));s.length>0&&a.push(Oy(s,e));var f;r?(f=Oy(ei(r,e,!0)),f.classes=["tag"],a.push(f)):i&&a.push(i);var m=Rl(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=it(m.height+m.depth),m.depth&&(p.style.verticalAlign=it(-m.depth))}return m}function GF(t){return new Og(t)}class $a{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=ru(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof xo&&this.children[n+1]instanceof xo){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof xo;)i+=this.children[++n].toText();e.appendChild(new xo(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=br.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+br.escape(ru(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class xo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return br.escape(this.toText())}toText(){return this.text}}class xoe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",it(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+it(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Xe={MathNode:$a,TextNode:xo,SpaceNode:xoe,newDocumentFragment:GF},Ss=function(e,r,n){return Yr[r][e]&&Yr[r][e].replace&&e.charCodeAt(0)!==55349&&!(UF.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Yr[r][e].replace),new Xe.TextNode(e)},z8=function(e){return e.length===1?e[0]:new Xe.MathNode("mrow",e)},$8=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;Yr[i][a]&&Yr[i][a].replace&&(a=Yr[i][a].replace);var s=_e.fontMap[n].fontName;return L8(a,s,i)?_e.fontMap[n].variant:null};function i5(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof xo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof xo&&r.text===","}else return!1}var Na=function(e,r,n){if(e.length===1){var i=Hr(e[0],r);return n&&i instanceof $a&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,c=0;c<e.length;c++){var d=Hr(e[c],r);if(d instanceof $a&&s instanceof $a){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(i5(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&i5(s))d.children=[...s.children,...d.children],a.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||i5(s))){var f=d.children[0];f instanceof $a&&f.type==="mn"&&(f.children=[...s.children,...f.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var m=s.children[0];if(m instanceof xo&&m.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var p=d.children[0];p instanceof xo&&p.text.length>0&&(p.text=p.text.slice(0,1)+""+p.text.slice(1),a.pop())}}}a.push(d),s=d}return a},iu=function(e,r,n){return z8(Na(e,r,n))},Hr=function(e,r){if(!e)return new Xe.MathNode("mrow");if(Xv[e.type]){var n=Xv[e.type](e,r);return n}else throw new Ye("Got group of unknown type: '"+e.type+"'")};function nI(t,e,r,n,i){var a=Na(t,r),s;a.length===1&&a[0]instanceof $a&&["mrow","mtable"].includes(a[0].type)?s=a[0]:s=new Xe.MathNode("mrow",a);var c=new Xe.MathNode("annotation",[new Xe.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new Xe.MathNode("semantics",[s,c]),f=new Xe.MathNode("math",[d]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&f.setAttribute("display","block");var m=i?"katex":"katex-mathml";return _e.makeSpan([m],[f])}var KF=function(e){return new cl({style:e.displayMode?Ct.DISPLAY:Ct.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},WF=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=_e.makeSpan(n,[e])}return e},woe=function(e,r,n){var i=KF(n),a;if(n.output==="mathml")return nI(e,r,i,n.displayMode,!0);if(n.output==="html"){var s=jT(e,i);a=_e.makeSpan(["katex"],[s])}else{var c=nI(e,r,i,n.displayMode,!1),d=jT(e,i);a=_e.makeSpan(["katex"],[c,d])}return WF(a,n)},_oe=function(e,r,n){var i=KF(n),a=jT(e,i),s=_e.makeSpan(["katex"],[a]);return WF(s,n)},Soe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Toe=function(e){var r=new Xe.MathNode("mo",[new Xe.TextNode(Soe[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Aoe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Eoe=function(e){return e.type==="ordgroup"?e.body.length:1},Noe=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var f=e,m=Eoe(f.base),p,y,b;if(m>5)d==="widehat"||d==="widecheck"?(p=420,c=2364,b=.42,y=d+"4"):(p=312,c=2340,b=.34,y="tilde4");else{var T=[1,1,2,2,3,3][m];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],p=[0,239,300,360,420][T],b=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],p=[0,260,286,306,312][T],b=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new nu(y),w=new Il([S],{width:"100%",height:it(b),viewBox:"0 0 "+c+" "+p,preserveAspectRatio:"none"});return{span:_e.makeSvgSpan([],[w],r),minWidth:0,height:b}}else{var N=[],I=Aoe[d],[C,z,O]=I,B=O/1e3,E=C.length,A,R;if(E===1){var F=I[3];A=["hide-tail"],R=[F]}else if(E===2)A=["halfarrow-left","halfarrow-right"],R=["xMinYMin","xMaxYMin"];else if(E===3)A=["brace-left","brace-center","brace-right"],R=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var D=0;D<E;D++){var L=new nu(C[D]),M=new Il([L],{width:"400em",height:it(B),viewBox:"0 0 "+c+" "+O,preserveAspectRatio:R[D]+" slice"}),Q=_e.makeSvgSpan([A[D]],[M],r);if(E===1)return{span:Q,minWidth:z,height:B};Q.style.height=it(B),N.push(Q)}return{span:_e.makeSpan(["stretchy"],N,r),minWidth:z,height:B}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=it(s),a>0&&(i.style.minWidth=it(a)),i},joe=function(e,r,n,i,a){var s,c=e.height+e.depth+n+i;if(/fbox|color|angl/.test(r)){if(s=_e.makeSpan(["stretchy",r],[],a),r==="fbox"){var d=a.color&&a.getColor();d&&(s.style.borderColor=d)}}else{var f=[];/^[bx]cancel$/.test(r)&&f.push(new AT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&f.push(new AT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new Il(f,{width:"100%",height:it(c)});s=_e.makeSvgSpan([],[m],a)}return s.height=c,s.style.height=it(c),s},Ml={encloseSpan:joe,mathMLnode:Toe,svgSpan:Noe};function Gt(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function V8(t){var e=Dx(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Dx(t){return t&&(t.type==="atom"||Jse.hasOwnProperty(t.type))?t:null}var F8=(t,e)=>{var r,n,i;t&&t.type==="supsub"?(n=Gt(t.base,"accent"),r=n.base,t.base=r,i=Yse(fr(t,e)),t.base=n):(n=Gt(t,"accent"),r=n.base);var a=fr(r,e.havingCrampedStyle()),s=n.isShifty&&br.isCharacterBox(r),c=0;if(s){var d=br.getBaseElem(r),f=fr(d,e.havingCrampedStyle());c=QO(f).skew}var m=n.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=Ml.svgSpan(n,e),y=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+it(2*c)+")",marginLeft:it(2*c)}:void 0}]},e);else{var b,T;n.label==="\\vec"?(b=_e.staticSvg("vec",e),T=_e.svgData.vec[1]):(b=_e.makeOrd({mode:n.mode,text:n.label},e,"textord"),b=QO(b),b.italic=0,T=b.width,m&&(p+=b.depth)),y=_e.makeSpan(["accent-body"],[b]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),p=a.height);var w=c;S||(w-=T/2),y.style.left=it(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:y}]},e)}var N=_e.makeSpan(["mord","accent"],[y],e);return i?(i.children[0]=N,i.height=Math.max(N.height,i.height),i.classes[0]="mord",i):N},XF=(t,e)=>{var r=t.isStretchy?Ml.mathMLnode(t.label):new Xe.MathNode("mo",[Ss(t.label,t.mode)]),n=new Xe.MathNode("mover",[Hr(t.base,e),r]);return n.setAttribute("accent","true"),n},koe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));ht({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=Qv(e[0]),n=!koe.test(t.funcName),i=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:i,base:r}},htmlBuilder:F8,mathmlBuilder:XF});ht({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:F8,mathmlBuilder:XF});ht({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:i}},htmlBuilder:(t,e)=>{var r=fr(t.base,e),n=Ml.svgSpan(t,e),i=t.label==="\\utilde"?.12:0,a=_e.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:r}]},e);return _e.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(t,e)=>{var r=Ml.mathMLnode(t.label),n=new Xe.MathNode("munder",[Hr(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Iy=t=>{var e=new Xe.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};ht({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:i}=t;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),i=_e.wrapFragment(fr(t.body,n,e),e),a=t.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=_e.wrapFragment(fr(t.below,n,e),e),s.classes.push(a+"-arrow-pad"));var c=Ml.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,f=-e.fontMetrics().axisHeight-.5*c.height-.111;(i.depth>.25||t.label==="\\xleftequilibrium")&&(f-=i.depth);var m;if(s){var p=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;m=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:p}]},e)}else m=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d}]},e);return m.children[0].children[0].children[1].classes.push("svg-align"),_e.makeSpan(["mrel","x-arrow"],[m],e)},mathmlBuilder(t,e){var r=Ml.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var i=Iy(Hr(t.body,e));if(t.below){var a=Iy(Hr(t.below,e));n=new Xe.MathNode("munderover",[r,a,i])}else n=new Xe.MathNode("mover",[r,i])}else if(t.below){var s=Iy(Hr(t.below,e));n=new Xe.MathNode("munder",[r,s])}else n=Iy(),n=new Xe.MathNode("mover",[r,n]);return n}});var Coe=_e.makeSpan;function QF(t,e){var r=ei(t.body,e,!0);return Coe([t.mclass],r,e)}function YF(t,e){var r,n=Na(t.body,e);return t.mclass==="minner"?r=new Xe.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new Xe.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new Xe.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}ht({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Mn(i),isCharacterBox:br.isCharacterBox(i)}},htmlBuilder:QF,mathmlBuilder:YF});var Lx=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};ht({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:Lx(e[0]),body:Mn(e[1]),isCharacterBox:br.isCharacterBox(e[1])}}});ht({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,i=e[1],a=e[0],s;n!=="\\stackrel"?s=Lx(i):s="mrel";var c={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Mn(i)},d={type:"supsub",mode:a.mode,base:c,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:br.isCharacterBox(d)}},htmlBuilder:QF,mathmlBuilder:YF});ht({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:Lx(e[0]),body:Mn(e[0])}},htmlBuilder(t,e){var r=ei(t.body,e,!0),n=_e.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Na(t.body,e),n=new Xe.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Ooe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},iI=()=>({type:"styling",body:[],mode:"math",style:"display"}),aI=t=>t.type==="textord"&&t.text==="@",Ioe=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Roe(t,e,r){var n=Ooe[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=r.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[a],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[i,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Moe(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ye("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],c=iI(),d=0;d<s.length;d++)if(!aI(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var f=V8(s[d]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var y=!0,b=d+1;b<s.length;b++){if(Ioe(s[b],f)){y=!1,d=b;break}if(aI(s[b]))throw new Ye("Missing a "+f+" character to complete a CD arrow.",s[b]);m[p].body.push(s[b])}if(y)throw new Ye("Missing a "+f+" character to complete a CD arrow.",s[d])}else throw new Ye('Expected one of "<>AV=|." after @',s[d]);var T=Roe(f,m,t),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),c=iI()}a%2===0?n.push(c):n.shift(),n=[],i.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}ht({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=_e.wrapFragment(fr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=it(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new Xe.MathNode("mrow",[Hr(t.label,e)]);return r=new Xe.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new Xe.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});ht({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=_e.wrapFragment(fr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new Xe.MathNode("mrow",[Hr(t.fragment,e)])}});ht({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Gt(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var c=Gt(i[s],"textord");a+=c.text}var d=parseInt(a),f;if(isNaN(d))throw new Ye("\\@char has non-numeric argument "+a);if(d<0||d>=1114111)throw new Ye("\\@char with invalid code point "+a);return d<=65535?f=String.fromCharCode(d):(d-=65536,f=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:f}}});var ZF=(t,e)=>{var r=ei(t.body,e.withColor(t.color),!1);return _e.makeFragment(r)},JF=(t,e)=>{var r=Na(t.body,e.withColor(t.color)),n=new Xe.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};ht({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Gt(e[0],"color-token").color,i=e[1];return{type:"color",mode:r.mode,color:n,body:Mn(i)}},htmlBuilder:ZF,mathmlBuilder:JF});ht({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,i=Gt(e[0],"color-token").color;r.gullet.macros.set("\\current@color",i);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:i,body:a}},htmlBuilder:ZF,mathmlBuilder:JF});ht({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&Gt(i,"size").value}},htmlBuilder(t,e){var r=_e.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=it(mn(t.size,e)))),r},mathmlBuilder(t,e){var r=new Xe.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",it(mn(t.size,e)))),r}});var kT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},eq=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ye("Expected a control sequence",t);return e},Poe=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},tq=(t,e,r,n)=>{var i=t.gullet.macros.get(r.text);i==null&&(r.noexpand=!0,i={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,i,n)};ht({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(kT[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=kT[n.text]),Gt(e.parseFunction(),"internal");throw new Ye("Invalid token after macro prefix",n)}});ht({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Ye("Expected a control sequence",n);for(var a=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Ye('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new Ye('Argument number "'+n.text+'" out of order');a++,c.push([])}else{if(n.text==="EOF")throw new Ye("Expected a macro definition");c[a].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(i,{tokens:d,numArgs:a,delimiters:c},r===kT[r]),{type:"internal",mode:e.mode}}});ht({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=eq(e.gullet.popToken());e.gullet.consumeSpaces();var i=Poe(e);return tq(e,n,i,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});ht({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=eq(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return tq(e,n,a,r==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Pm=function(e,r,n){var i=Yr.math[e]&&Yr.math[e].replace,a=L8(i||e,r,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return a},q8=function(e,r,n,i){var a=n.havingBaseStyle(r),s=_e.makeSpan(i.concat(a.sizingClasses(n)),[e],n),c=a.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=a.sizeMultiplier,s},rq=function(e,r,n){var i=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/i.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=it(a),e.height-=a,e.depth+=a},Doe=function(e,r,n,i,a,s){var c=_e.makeSymbol(e,"Main-Regular",a,i),d=q8(c,r,i,s);return n&&rq(d,i,r),d},Loe=function(e,r,n,i){return _e.makeSymbol(e,"Size"+r+"-Regular",n,i)},nq=function(e,r,n,i,a,s){var c=Loe(e,r,a,i),d=q8(_e.makeSpan(["delimsizing","size"+r],[c],i),Ct.TEXT,i,s);return n&&rq(d,i,Ct.TEXT),d},a5=function(e,r,n){var i;r==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=_e.makeSpan(["delimsizinginner",i],[_e.makeSpan([],[_e.makeSymbol(e,r,n)])]);return{type:"elem",elem:a}},s5=function(e,r,n){var i=bo["Size4-Regular"][e.charCodeAt(0)]?bo["Size4-Regular"][e.charCodeAt(0)][4]:bo["Size1-Regular"][e.charCodeAt(0)][4],a=new nu("inner",Vse(e,Math.round(1e3*r))),s=new Il([a],{width:it(i),height:it(r),style:"width:"+it(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=_e.makeSvgSpan([],[s],n);return c.height=r,c.style.height=it(r),c.style.width=it(i),{type:"elem",elem:c}},CT=.008,Ry={type:"kern",size:-1*CT},Boe=["|","\\lvert","\\rvert","\\vert"],Uoe=["\\|","\\lVert","\\rVert","\\Vert"],iq=function(e,r,n,i,a,s){var c,d,f,m,p="",y=0;c=f=m=e,d=null;var b="Size1-Regular";e==="\\uparrow"?f=m="":e==="\\Uparrow"?f=m="":e==="\\downarrow"?c=f="":e==="\\Downarrow"?c=f="":e==="\\updownarrow"?(c="\\uparrow",f="",m="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",f="",m="\\Downarrow"):Boe.includes(e)?(f="",p="vert",y=333):Uoe.includes(e)?(f="",p="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",f="",m="",b="Size4-Regular",p="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",f="",m="",b="Size4-Regular",p="rbrack",y=667):e==="\\lfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="lfloor",y=667):e==="\\lceil"||e===""?(c="",f=m="",b="Size4-Regular",p="lceil",y=667):e==="\\rfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="rfloor",y=667):e==="\\rceil"||e===""?(c="",f=m="",b="Size4-Regular",p="rceil",y=667):e==="("||e==="\\lparen"?(c="",f="",m="",b="Size4-Regular",p="lparen",y=875):e===")"||e==="\\rparen"?(c="",f="",m="",b="Size4-Regular",p="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\lgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\rgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",m="",f="",b="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",m="",f="",b="Size4-Regular");var T=Pm(c,b,a),S=T.height+T.depth,w=Pm(f,b,a),N=w.height+w.depth,I=Pm(m,b,a),C=I.height+I.depth,z=0,O=1;if(d!==null){var B=Pm(d,b,a);z=B.height+B.depth,O=2}var E=S+C+z,A=Math.max(0,Math.ceil((r-E)/(O*N))),R=E+A*O*N,F=i.fontMetrics().axisHeight;n&&(F*=i.sizeMultiplier);var D=R/2-F,L=[];if(p.length>0){var M=R-S-C,Q=Math.round(R*1e3),Z=Fse(p,Math.round(M*1e3)),W=new nu(p,Z),ee=(y/1e3).toFixed(3)+"em",Y=(Q/1e3).toFixed(3)+"em",ye=new Il([W],{width:ee,height:Y,viewBox:"0 0 "+y+" "+Q}),oe=_e.makeSvgSpan([],[ye],i);oe.height=Q/1e3,oe.style.width=ee,oe.style.height=Y,L.push({type:"elem",elem:oe})}else{if(L.push(a5(m,b,a)),L.push(Ry),d===null){var X=R-S-C+2*CT;L.push(s5(f,X,i))}else{var ne=(R-S-C-z)/2+2*CT;L.push(s5(f,ne,i)),L.push(Ry),L.push(a5(d,b,a)),L.push(Ry),L.push(s5(f,ne,i))}L.push(Ry),L.push(a5(c,b,a))}var de=i.havingBaseStyle(Ct.TEXT),J=_e.makeVList({positionType:"bottom",positionData:D,children:L},de);return q8(_e.makeSpan(["delimsizing","mult"],[J],de),Ct.TEXT,i,s)},o5=80,l5=.08,c5=function(e,r,n,i,a){var s=$se(e,i,n),c=new nu(e,s),d=new Il([c],{width:"400em",height:it(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return _e.makeSvgSpan(["hide-tail"],[d],a)},zoe=function(e,r){var n=r.havingBaseSizing(),i=lq("\\surd",e*n.sizeMultiplier,oq,n),a=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,f=0,m=0,p;return i.type==="small"?(m=1e3+1e3*s+o5,e<1?a=1:e<1.4&&(a=.7),d=(1+s+l5)/a,f=(1+s)/a,c=c5("sqrtMain",d,m,s,r),c.style.minWidth="0.853em",p=.833/a):i.type==="large"?(m=(1e3+o5)*Xm[i.size],f=(Xm[i.size]+s)/a,d=(Xm[i.size]+s+l5)/a,c=c5("sqrtSize"+i.size,d,m,s,r),c.style.minWidth="1.02em",p=1/a):(d=e+s+l5,f=e+s,m=Math.floor(1e3*e+s)+o5,c=c5("sqrtTall",d,m,s,r),c.style.minWidth="0.742em",p=1.056),c.height=f,c.style.height=it(d),{span:c,advanceWidth:p,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*a}},aq=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],$oe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],sq=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Xm=[0,1.2,1.8,2.4,3],Voe=function(e,r,n,i,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),aq.includes(e)||sq.includes(e))return nq(e,r,!1,n,i,a);if($oe.includes(e))return iq(e,Xm[r],!1,n,i,a);throw new Ye("Illegal delimiter: '"+e+"'")},Foe=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],qoe=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"stack"}],oq=[{type:"small",style:Ct.SCRIPTSCRIPT},{type:"small",style:Ct.SCRIPT},{type:"small",style:Ct.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Hoe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},lq=function(e,r,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var c=Pm(e,Hoe(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var f=i.havingBaseStyle(n[s].style);d*=f.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},cq=function(e,r,n,i,a,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;sq.includes(e)?c=Foe:aq.includes(e)?c=oq:c=qoe;var d=lq(e,r,c,i);return d.type==="small"?Doe(e,d.style,n,i,a,s):d.type==="large"?nq(e,d.size,n,i,a,s):iq(e,r,n,i,a,s)},Goe=function(e,r,n,i,a,s){var c=i.fontMetrics().axisHeight*i.sizeMultiplier,d=901,f=5/i.fontMetrics().ptPerEm,m=Math.max(r-c,n+c),p=Math.max(m/500*d,2*m-f);return cq(e,p,!0,i,a,s)},_l={sqrtImage:zoe,sizedDelim:Voe,sizeToMaxHeight:Xm,customSizedDelim:cq,leftRightDelim:Goe},sI={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Koe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Bx(t,e){var r=Dx(t);if(r&&Koe.includes(r.text))return r;throw r?new Ye("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Ye("Invalid delimiter type '"+t.type+"'",t)}ht({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=Bx(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:sI[t.funcName].size,mclass:sI[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?_e.makeSpan([t.mclass]):_l.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(Ss(t.delim,t.mode));var r=new Xe.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=it(_l.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function oI(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}ht({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Ye("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Bx(e[0],t).text,color:r}}});ht({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Bx(e[0],t),n=t.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=Gt(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(t,e)=>{oI(t);for(var r=ei(t.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<r.length;s++)r[s].isMiddle?a=!0:(n=Math.max(r[s].height,n),i=Math.max(r[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var c;if(t.left==="."?c=jp(e,["mopen"]):c=_l.leftRightDelim(t.left,n,i,e,t.mode,["mopen"]),r.unshift(c),a)for(var d=1;d<r.length;d++){var f=r[d],m=f.isMiddle;m&&(r[d]=_l.leftRightDelim(m.delim,n,i,m.options,t.mode,[]))}var p;if(t.right===".")p=jp(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;p=_l.leftRightDelim(t.right,n,i,y,t.mode,["mclose"])}return r.push(p),_e.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{oI(t);var r=Na(t.body,e);if(t.left!=="."){var n=new Xe.MathNode("mo",[Ss(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var i=new Xe.MathNode("mo",[Ss(t.right,t.mode)]);i.setAttribute("fence","true"),t.rightColor&&i.setAttribute("mathcolor",t.rightColor),r.push(i)}return z8(r)}});ht({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Bx(e[0],t);if(!t.parser.leftrightDepth)throw new Ye("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=jp(e,[]);else{r=_l.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?Ss("|","text"):Ss(t.delim,t.mode),n=new Xe.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var H8=(t,e)=>{var r=_e.wrapFragment(fr(t.body,e),e),n=t.label.slice(1),i=e.sizeMultiplier,a,s=0,c=br.isCharacterBox(t.body);if(n==="sout")a=_e.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=mn({number:.6,unit:"pt"},e),f=mn({number:.35,unit:"ex"},e),m=e.havingBaseSizing();i=i/m.sizeMultiplier;var p=r.height+r.depth+d+f;r.style.paddingLeft=it(p/2+d);var y=Math.floor(1e3*p*i),b=Use(y),T=new Il([new nu("phase",b)],{width:"400em",height:it(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=_e.makeSvgSpan(["hide-tail"],[T],e),a.style.height=it(p),s=r.depth+d+f}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,N=0;/box/.test(n)?(N=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:N),w=S):n==="angl"?(N=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*N,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),a=Ml.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=it(N)):n==="angl"&&N!==.049&&(a.style.borderTopWidth=it(N),a.style.borderRightWidth=it(N)),s=r.depth+w,t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,t.borderColor&&(a.style.borderColor=t.borderColor))}var I;if(t.backgroundColor)I=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];I=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:C}]},e)}return/cancel/.test(n)&&(I.height=r.height,I.depth=r.depth),/cancel/.test(n)&&!c?_e.makeSpan(["mord","cancel-lap"],[I],e):_e.makeSpan(["mord"],[I],e)},G8=(t,e)=>{var r=0,n=new Xe.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Hr(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};ht({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=Gt(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:H8,mathmlBuilder:G8});ht({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:i}=t,a=Gt(e[0],"color-token").color,s=Gt(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:c}},htmlBuilder:H8,mathmlBuilder:G8});ht({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});ht({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"enclose",mode:r.mode,label:n,body:i}},htmlBuilder:H8,mathmlBuilder:G8});ht({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var uq={};function Io(t){for(var{type:e,names:r,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},d=0;d<r.length;++d)uq[r[d]]=c;a&&(Wv[e]=a),s&&(Xv[e]=s)}var dq={};function G(t,e){dq[t]=e}function lI(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var Ux=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Ye("{"+t.envName+"} can be used only in display mode.")};function K8(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function cu(t,e,r){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:y}=e;if(t.gullet.beginGroup(),f||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var b=t.gullet.expandMacroAsText("\\arraystretch");if(b==null)s=1;else if(s=parseFloat(b),!s||s<0)throw new Ye("Invalid \\arraystretch: "+b)}t.gullet.beginGroup();var T=[],S=[T],w=[],N=[],I=d!=null?[]:void 0;function C(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function z(){I&&(t.gullet.macros.get("\\df@tag")?(I.push(t.subparse([new Wa("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),N.push(lI(t));;){var O=t.parseExpression(!1,f?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),O={type:"ordgroup",mode:t.mode,body:O},r&&(O={type:"styling",mode:t.mode,style:r,body:[O]}),T.push(O);var B=t.fetch().text;if(B==="&"){if(p&&T.length===p){if(f||c)throw new Ye("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(B==="\\end"){z(),T.length===1&&O.type==="styling"&&O.body[0].body.length===0&&(S.length>1||!m)&&S.pop(),N.length<S.length+1&&N.push([]);break}else if(B==="\\\\"){t.consume();var E=void 0;t.gullet.future().text!==" "&&(E=t.parseSizeGroup(!0)),w.push(E?E.value:null),z(),N.push(lI(t)),T=[],S.push(T),C()}else throw new Ye("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:i,arraystretch:s,body:S,cols:a,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:N,colSeparationType:c,tags:I,leqno:y}}function W8(t){return t.slice(0,1)==="d"?"display":"text"}var Ro=function(e,r){var n,i,a=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(a),f=[],m=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),p=1/r.fontMetrics().ptPerEm,y=5*p;if(e.colSeparationType&&e.colSeparationType==="small"){var b=r.havingStyle(Ct.SCRIPT).sizeMultiplier;y=.2778*(b/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?mn({number:3,unit:"ex"},r):12*p,S=3*p,w=e.arraystretch*T,N=.7*w,I=.3*w,C=0;function z(Oe){for(var st=0;st<Oe.length;++st)st>0&&(C+=.25),f.push({pos:C,isDashed:Oe[st]})}for(z(s[0]),n=0;n<e.body.length;++n){var O=e.body[n],B=N,E=I;c<O.length&&(c=O.length);var A=new Array(O.length);for(i=0;i<O.length;++i){var R=fr(O[i],r);E<R.depth&&(E=R.depth),B<R.height&&(B=R.height),A[i]=R}var F=e.rowGaps[n],D=0;F&&(D=mn(F,r),D>0&&(D+=I,E<D&&(E=D),D=0)),e.addJot&&(E+=S),A.height=B,A.depth=E,C+=B,A.pos=C,C+=E+D,d[n]=A,z(s[n+1])}var L=C/2+r.fontMetrics().axisHeight,M=e.cols||[],Q=[],Z,W,ee=[];if(e.tags&&e.tags.some(Oe=>Oe))for(n=0;n<a;++n){var Y=d[n],ye=Y.pos-L,oe=e.tags[n],X=void 0;oe===!0?X=_e.makeSpan(["eqn-num"],[],r):oe===!1?X=_e.makeSpan([],[],r):X=_e.makeSpan([],ei(oe,r,!0),r),X.depth=Y.depth,X.height=Y.height,ee.push({type:"elem",elem:X,shift:ye})}for(i=0,W=0;i<c||W<M.length;++i,++W){for(var ne=M[W]||{},de=!0;ne.type==="separator";){if(de||(Z=_e.makeSpan(["arraycolsep"],[]),Z.style.width=it(r.fontMetrics().doubleRuleSep),Q.push(Z)),ne.separator==="|"||ne.separator===":"){var J=ne.separator==="|"?"solid":"dashed",le=_e.makeSpan(["vertical-separator"],[],r);le.style.height=it(C),le.style.borderRightWidth=it(m),le.style.borderRightStyle=J,le.style.margin="0 "+it(-m/2);var pe=C-L;pe&&(le.style.verticalAlign=it(-pe)),Q.push(le)}else throw new Ye("Invalid separator type: "+ne.separator);W++,ne=M[W]||{},de=!1}if(!(i>=c)){var be=void 0;(i>0||e.hskipBeforeAndAfter)&&(be=br.deflt(ne.pregap,y),be!==0&&(Z=_e.makeSpan(["arraycolsep"],[]),Z.style.width=it(be),Q.push(Z)));var Je=[];for(n=0;n<a;++n){var Ne=d[n],ce=Ne[i];if(ce){var Ce=Ne.pos-L;ce.depth=Ne.depth,ce.height=Ne.height,Je.push({type:"elem",elem:ce,shift:Ce})}}Je=_e.makeVList({positionType:"individualShift",children:Je},r),Je=_e.makeSpan(["col-align-"+(ne.align||"c")],[Je]),Q.push(Je),(i<c-1||e.hskipBeforeAndAfter)&&(be=br.deflt(ne.postgap,y),be!==0&&(Z=_e.makeSpan(["arraycolsep"],[]),Z.style.width=it(be),Q.push(Z)))}}if(d=_e.makeSpan(["mtable"],Q),f.length>0){for(var Ee=_e.makeLineSpan("hline",r,m),ct=_e.makeLineSpan("hdashline",r,m),Qe=[{type:"elem",elem:d,shift:0}];f.length>0;){var ut=f.pop(),dt=ut.pos-L;ut.isDashed?Qe.push({type:"elem",elem:ct,shift:dt}):Qe.push({type:"elem",elem:Ee,shift:dt})}d=_e.makeVList({positionType:"individualShift",children:Qe},r)}if(ee.length===0)return _e.makeSpan(["mord"],[d],r);var Ut=_e.makeVList({positionType:"individualShift",children:ee},r);return Ut=_e.makeSpan(["tag"],[Ut],r),_e.makeFragment([d,Ut])},Woe={c:"center ",l:"left ",r:"right "},Mo=function(e,r){for(var n=[],i=new Xe.MathNode("mtd",[],["mtr-glue"]),a=new Xe.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],f=0;f<c.length;f++)d.push(new Xe.MathNode("mtd",[Hr(c[f],r)]));e.tags&&e.tags[s]&&(d.unshift(i),d.push(i),e.leqno?d.unshift(a):d.push(a)),n.push(new Xe.MathNode("mtr",d))}var m=new Xe.MathNode("mtable",n),p=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);m.setAttribute("rowspacing",it(p));var y="",b="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,N=0,I=T.length;T[0].type==="separator"&&(y+="top ",N=1),T[T.length-1].type==="separator"&&(y+="bottom ",I-=1);for(var C=N;C<I;C++)T[C].type==="align"?(b+=Woe[T[C].align],w&&(S+="none "),w=!0):T[C].type==="separator"&&w&&(S+=T[C].separator==="|"?"solid ":"dashed ",w=!1);m.setAttribute("columnalign",b.trim()),/[sd]/.test(S)&&m.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var z=e.cols||[],O="",B=1;B<z.length;B++)O+=B%2?"0em ":"1em ";m.setAttribute("columnspacing",O.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var E="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var R=1;R<A.length-1;R++)E+=A[R].length===0?"none ":A[R][0]?"dashed ":"solid ";return/[sd]/.test(E)&&m.setAttribute("rowlines",E.trim()),y!==""&&(m=new Xe.MathNode("menclose",[m]),m.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(m=new Xe.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},hq=function(e,r){e.envName.indexOf("ed")===-1&&Ux(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=cu(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:K8(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,f={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var m="",p=0;p<r[0].body.length;p++){var y=Gt(r[0].body[p],"textord");m+=y.text}c=Number(m),d=c*2}var b=!d;s.body.forEach(function(N){for(var I=1;I<N.length;I+=2){var C=Gt(N[I],"styling"),z=Gt(C.body[0],"ordgroup");z.body.unshift(f)}if(b)d<N.length&&(d=N.length);else{var O=N.length/2;if(c<O)throw new Ye("Too many math in a row: "+("expected "+c+", but got "+O),N[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&b&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=b?"align":"alignat",s};Io({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=Dx(e[0]),n=r?[e[0]]:Gt(e[0],"ordgroup").body,i=n.map(function(s){var c=V8(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Ye("Unknown column alignment: "+d,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return cu(t.parser,a,W8(t.envName))},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var i=t.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),r=i.fetch().text,"lcr".indexOf(r)===-1)throw new Ye("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:r}]}}var a=cu(t.parser,n,W8(t.envName)),s=Math.max(0,...a.body.map(c=>c.length));return a.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=cu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=Dx(e[0]),n=r?[e[0]]:Gt(e[0],"ordgroup").body,i=n.map(function(s){var c=V8(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Ye("Unknown column alignment: "+d,s)});if(i.length>1)throw new Ye("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=cu(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Ye("{subarray} can contain only one column");return a},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=cu(t.parser,e,W8(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:hq,htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&Ux(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:K8(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return cu(t.parser,e,"display")},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:hq,htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Ux(t);var e={autoTag:K8(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return cu(t.parser,e,"display")},htmlBuilder:Ro,mathmlBuilder:Mo});Io({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Ux(t),Moe(t.parser)},htmlBuilder:Ro,mathmlBuilder:Mo});G("\\nonumber","\\gdef\\@eqnsw{0}");G("\\notag","\\nonumber");ht({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Ye(t.funcName+" valid only within array environment")}});var cI=uq;ht({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];if(i.type!=="ordgroup")throw new Ye("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=Gt(i.body[s],"textord").text;if(n==="\\begin"){if(!cI.hasOwnProperty(a))throw new Ye("No such environment: "+a,i);var c=cI[a],{args:d,optArgs:f}=r.parseArguments("\\begin{"+a+"}",c),m={mode:r.mode,envName:a,parser:r},p=c.handler(m,d,f);r.expect("\\end",!1);var y=r.nextToken,b=Gt(r.parseFunction(),"environment");if(b.name!==a)throw new Ye("Mismatch: \\begin{"+a+"} matched by \\end{"+b.name+"}",y);return p}return{type:"environment",mode:r.mode,name:a,nameGroup:i}}});var fq=(t,e)=>{var r=t.font,n=e.withFont(r);return fr(t.body,n)},mq=(t,e)=>{var r=t.font,n=e.withFont(r);return Hr(t.body,n)},uI={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};ht({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=Qv(e[0]),a=n;return a in uI&&(a=uI[a]),{type:"font",mode:r.mode,font:a.slice(1),body:i}},htmlBuilder:fq,mathmlBuilder:mq});ht({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],i=br.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Lx(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});ht({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:i}=t,{mode:a}=r,s=r.parseExpression(!0,i),c="math"+n.slice(1);return{type:"font",mode:a,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:fq,mathmlBuilder:mq});var pq=(t,e)=>{var r=e;return t==="display"?r=r.id>=Ct.SCRIPT.id?r.text():Ct.DISPLAY:t==="text"&&r.size===Ct.DISPLAY.size?r=Ct.TEXT:t==="script"?r=Ct.SCRIPT:t==="scriptscript"&&(r=Ct.SCRIPTSCRIPT),r},X8=(t,e)=>{var r=pq(t.size,e.style),n=r.fracNum(),i=r.fracDen(),a;a=e.havingStyle(n);var s=fr(t.numer,a,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}a=e.havingStyle(i);var f=fr(t.denom,a,e),m,p,y;t.hasBarLine?(t.barSize?(p=mn(t.barSize,e),m=_e.makeLineSpan("frac-line",e,p)):m=_e.makeLineSpan("frac-line",e),p=m.height,y=m.height):(m=null,p=0,y=e.fontMetrics().defaultRuleThickness);var b,T,S;r.size===Ct.DISPLAY.size||t.size==="display"?(b=e.fontMetrics().num1,p>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(p>0?(b=e.fontMetrics().num2,T=y):(b=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(m){var I=e.fontMetrics().axisHeight;b-s.depth-(I+.5*p)<T&&(b+=T-(b-s.depth-(I+.5*p))),I-.5*p-(f.height-S)<T&&(S+=T-(I-.5*p-(f.height-S)));var C=-(I-.5*p);w=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:m,shift:C},{type:"elem",elem:s,shift:-b}]},e)}else{var N=b-s.depth-(f.height-S);N<T&&(b+=.5*(T-N),S+=.5*(T-N)),w=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:s,shift:-b}]},e)}a=e.havingStyle(r),w.height*=a.sizeMultiplier/e.sizeMultiplier,w.depth*=a.sizeMultiplier/e.sizeMultiplier;var z;r.size===Ct.DISPLAY.size?z=e.fontMetrics().delim1:r.size===Ct.SCRIPTSCRIPT.size?z=e.havingStyle(Ct.SCRIPT).fontMetrics().delim2:z=e.fontMetrics().delim2;var O,B;return t.leftDelim==null?O=jp(e,["mopen"]):O=_l.customSizedDelim(t.leftDelim,z,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?B=_e.makeSpan([]):t.rightDelim==null?B=jp(e,["mclose"]):B=_l.customSizedDelim(t.rightDelim,z,!0,e.havingStyle(r),t.mode,["mclose"]),_e.makeSpan(["mord"].concat(a.sizingClasses(e)),[O,_e.makeSpan(["mfrac"],[w]),B],e)},Q8=(t,e)=>{var r=new Xe.MathNode("mfrac",[Hr(t.numer,e),Hr(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=mn(t.barSize,e);r.setAttribute("linethickness",it(n))}var i=pq(t.size,e.style);if(i.size!==e.style.size){r=new Xe.MathNode("mstyle",[r]);var a=i.size===Ct.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new Xe.MathNode("mo",[new Xe.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new Xe.MathNode("mo",[new Xe.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return z8(s)}return r};ht({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1],s,c=null,d=null,f="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:c,rightDelim:d,size:f,barSize:null}},htmlBuilder:X8,mathmlBuilder:Q8});ht({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});ht({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,i;switch(r){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var dI=["display","text","script","scriptscript"],hI=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};ht({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],i=e[5],a=Qv(e[0]),s=a.type==="atom"&&a.family==="open"?hI(a.text):null,c=Qv(e[1]),d=c.type==="atom"&&c.family==="close"?hI(c.text):null,f=Gt(e[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var y="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){var T=Gt(b.body[0],"textord");y=dI[Number(T.text)]}}else b=Gt(b,"textord"),y=dI[Number(b.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:i,continued:!1,hasBarLine:m,barSize:p,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:X8,mathmlBuilder:Q8});ht({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:i}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Gt(e[0],"size").value,token:i}}});ht({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0],a=Tse(Gt(e[1],"infix").size),s=e[2],c=a.number>0;return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:c,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:X8,mathmlBuilder:Q8});var gq=(t,e)=>{var r=e.style,n,i;t.type==="supsub"?(n=t.sup?fr(t.sup,e.havingStyle(r.sup()),e):fr(t.sub,e.havingStyle(r.sub()),e),i=Gt(t.base,"horizBrace")):i=Gt(t,"horizBrace");var a=fr(i.base,e.havingBaseStyle(Ct.DISPLAY)),s=Ml.svgSpan(i,e),c;if(i.isOver?(c=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=_e.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=_e.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e);i.isOver?c=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=_e.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return _e.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e)},Xoe=(t,e)=>{var r=Ml.mathMLnode(t.label);return new Xe.MathNode(t.isOver?"mover":"munder",[Hr(t.base,e),r])};ht({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:gq,mathmlBuilder:Xoe});ht({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],i=Gt(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:r.mode,href:i,body:Mn(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=ei(t.body,e,!1);return _e.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=iu(t.body,e);return r instanceof $a||(r=new $a("mrow",[r])),r.setAttribute("href",t.href),r}});ht({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Gt(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:i};return{type:"href",mode:r.mode,href:n,body:Mn(c)}}});ht({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Mn(e[0])}},htmlBuilder(t,e){var r=ei(t.body,e,!1);return _e.makeFragment(r)},mathmlBuilder(t,e){return new Xe.MathNode("mrow",Na(t.body,e))}});ht({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:i}=t,a=Gt(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=a,c={command:"\\htmlClass",class:a};break;case"\\htmlId":d.id=a,c={command:"\\htmlId",id:a};break;case"\\htmlStyle":d.style=a,c={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m],y=p.indexOf("=");if(y<0)throw new Ye("\\htmlData key/value '"+p+"' missing equals sign");var b=p.slice(0,y),T=p.slice(y+1);d["data-"+b.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:Mn(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=ei(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var i=_e.makeSpan(n,r,e);for(var a in t.attributes)a!=="class"&&t.attributes.hasOwnProperty(a)&&i.setAttribute(a,t.attributes[a]);return i},mathmlBuilder:(t,e)=>iu(t.body,e)});ht({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Mn(e[0]),mathml:Mn(e[1])}},htmlBuilder:(t,e)=>{var r=ei(t.html,e,!1);return _e.makeFragment(r)},mathmlBuilder:(t,e)=>iu(t.mathml,e)});var u5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Ye("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!PF(n))throw new Ye("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};ht({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=Gt(r[0],"raw").string,f=d.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var y=p[1].trim();switch(p[0].trim()){case"alt":c=y;break;case"width":i=u5(y);break;case"height":a=u5(y);break;case"totalheight":s=u5(y);break;default:throw new Ye("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var b=Gt(e[0],"url").url;return c===""&&(c=b,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:b})?{type:"includegraphics",mode:n.mode,alt:c,width:i,height:a,totalheight:s,src:b}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=mn(t.height,e),n=0;t.totalheight.number>0&&(n=mn(t.totalheight,e)-r);var i=0;t.width.number>0&&(i=mn(t.width,e));var a={height:it(r+n)};i>0&&(a.width=it(i)),n>0&&(a.verticalAlign=it(-n));var s=new Xse(t.src,t.alt,a);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new Xe.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=mn(t.height,e),i=0;if(t.totalheight.number>0&&(i=mn(t.totalheight,e)-n,r.setAttribute("valign",it(-i))),r.setAttribute("height",it(n+i)),t.width.number>0){var a=mn(t.width,e);r.setAttribute("width",it(a))}return r.setAttribute("src",t.src),r}});ht({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=Gt(e[0],"size");if(r.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:i.value}},htmlBuilder(t,e){return _e.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=mn(t.dimension,e);return new Xe.SpaceNode(r)}});ht({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:i}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=_e.makeSpan([],[fr(t.body,e)]),r=_e.makeSpan(["inner"],[r],e)):r=_e.makeSpan(["inner"],[fr(t.body,e)]);var n=_e.makeSpan(["fix"],[]),i=_e.makeSpan([t.alignment],[r,n],e),a=_e.makeSpan(["strut"]);return a.style.height=it(i.height+i.depth),i.depth&&(a.style.verticalAlign=it(-i.depth)),i.children.unshift(a),i=_e.makeSpan(["thinbox"],[i],e),_e.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(t,e)=>{var r=new Xe.MathNode("mpadded",[Hr(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});ht({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,i=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}});ht({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Ye("Mismatched "+t.funcName)}});var fI=(t,e)=>{switch(e.style.size){case Ct.DISPLAY.size:return t.display;case Ct.TEXT.size:return t.text;case Ct.SCRIPT.size:return t.script;case Ct.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};ht({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Mn(e[0]),text:Mn(e[1]),script:Mn(e[2]),scriptscript:Mn(e[3])}},htmlBuilder:(t,e)=>{var r=fI(t,e),n=ei(r,e,!1);return _e.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=fI(t,e);return iu(r,e)}});var yq=(t,e,r,n,i,a,s)=>{t=_e.makeSpan([],[t]);var c=r&&br.isCharacterBox(r),d,f;if(e){var m=fr(e,n.havingStyle(i.sup()),n);f={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-m.depth)}}if(r){var p=fr(r,n.havingStyle(i.sub()),n);d={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}var y;if(f&&d){var b=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=_e.makeVList({positionType:"bottom",positionData:b,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:it(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:it(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=_e.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:it(-a)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(f){var S=t.depth+s;y=_e.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:it(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&a!==0&&!c){var N=_e.makeSpan(["mspace"],[],n);N.style.marginRight=it(a),w.unshift(N)}return _e.makeSpan(["mop","op-limits"],w,n)},vq=["\\smallint"],of=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=Gt(t.base,"op"),i=!0):a=Gt(t,"op");var s=e.style,c=!1;s.size===Ct.DISPLAY.size&&a.symbol&&!vq.includes(a.name)&&(c=!0);var d;if(a.symbol){var f=c?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),d=_e.makeSymbol(a.name,f,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),m.length>0){var p=d.italic,y=_e.staticSvg(m+"Size"+(c?"2":"1"),e);d=_e.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),a.name="\\"+m,d.classes.unshift("mop"),d.italic=p}}else if(a.body){var b=ei(a.body,e,!0);b.length===1&&b[0]instanceof _s?(d=b[0],d.classes[0]="mop"):d=_e.makeSpan(["mop"],b,e)}else{for(var T=[],S=1;S<a.name.length;S++)T.push(_e.mathsym(a.name[S],a.mode,e));d=_e.makeSpan(["mop"],T,e)}var w=0,N=0;return(d instanceof _s||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,N=d.italic),i?yq(d,r,n,e,s,N,w):(w&&(d.style.position="relative",d.style.top=it(w)),d)},Rg=(t,e)=>{var r;if(t.symbol)r=new $a("mo",[Ss(t.name,t.mode)]),vq.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new $a("mo",Na(t.body,e));else{r=new $a("mi",[new xo(t.name.slice(1))]);var n=new $a("mo",[Ss("","text")]);t.parentIsSupSub?r=new $a("mrow",[r,n]):r=GF([r,n])}return r},Qoe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};ht({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=n;return i.length===1&&(i=Qoe[i]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:of,mathmlBuilder:Rg});ht({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Mn(n)}},htmlBuilder:of,mathmlBuilder:Rg});var Yoe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};ht({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:of,mathmlBuilder:Rg});ht({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:of,mathmlBuilder:Rg});ht({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=Yoe[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:of,mathmlBuilder:Rg});var bq=(t,e)=>{var r,n,i=!1,a;t.type==="supsub"?(r=t.sup,n=t.sub,a=Gt(t.base,"operatorname"),i=!0):a=Gt(t,"operatorname");var s;if(a.body.length>0){for(var c=a.body.map(p=>{var y=p.text;return typeof y=="string"?{type:"textord",mode:p.mode,text:y}:p}),d=ei(c,e.withFont("mathrm"),!0),f=0;f<d.length;f++){var m=d[f];m instanceof _s&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=_e.makeSpan(["mop"],d,e)}else s=_e.makeSpan(["mop"],[],e);return i?yq(s,r,n,e,e.style,0,0):s},Zoe=(t,e)=>{for(var r=Na(t.body,e.withFont("mathrm")),n=!0,i=0;i<r.length;i++){var a=r[i];if(!(a instanceof Xe.SpaceNode))if(a instanceof Xe.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof Xe.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(m=>m.toText()).join("");r=[new Xe.TextNode(c)]}var d=new Xe.MathNode("mi",r);d.setAttribute("mathvariant","normal");var f=new Xe.MathNode("mo",[Ss("","text")]);return t.parentIsSupSub?new Xe.MathNode("mrow",[d,f]):Xe.newDocumentFragment([d,f])};ht({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,i=e[0];return{type:"operatorname",mode:r.mode,body:Mn(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:bq,mathmlBuilder:Zoe});G("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");V0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?_e.makeFragment(ei(t.body,e,!1)):_e.makeSpan(["mord"],ei(t.body,e,!0),e)},mathmlBuilder(t,e){return iu(t.body,e,!0)}});ht({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=fr(t.body,e.havingCrampedStyle()),n=_e.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return _e.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(t,e){var r=new Xe.MathNode("mo",[new Xe.TextNode("")]);r.setAttribute("stretchy","true");var n=new Xe.MathNode("mover",[Hr(t.body,e),r]);return n.setAttribute("accent","true"),n}});ht({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Mn(n)}},htmlBuilder:(t,e)=>{var r=ei(t.body,e.withPhantom(),!1);return _e.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Na(t.body,e);return new Xe.MathNode("mphantom",r)}});ht({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=_e.makeSpan([],[fr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),_e.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Na(Mn(t.body),e),n=new Xe.MathNode("mphantom",r),i=new Xe.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});ht({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=_e.makeSpan(["inner"],[fr(t.body,e.withPhantom())]),n=_e.makeSpan(["fix"],[]);return _e.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Na(Mn(t.body),e),n=new Xe.MathNode("mphantom",r),i=new Xe.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});ht({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Gt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:i}},htmlBuilder(t,e){var r=fr(t.body,e),n=mn(t.dy,e);return _e.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new Xe.MathNode("mpadded",[Hr(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});ht({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});ht({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,i=r[0],a=Gt(e[0],"size"),s=Gt(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&Gt(i,"size").value,width:a.value,height:s.value}},htmlBuilder(t,e){var r=_e.makeSpan(["mord","rule"],[],e),n=mn(t.width,e),i=mn(t.height,e),a=t.shift?mn(t.shift,e):0;return r.style.borderRightWidth=it(n),r.style.borderTopWidth=it(i),r.style.bottom=it(a),r.width=n,r.height=i+a,r.depth=-a,r.maxFontSize=i*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=mn(t.width,e),n=mn(t.height,e),i=t.shift?mn(t.shift,e):0,a=e.color&&e.getColor()||"black",s=new Xe.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",it(r)),s.setAttribute("height",it(n));var c=new Xe.MathNode("mpadded",[s]);return i>=0?c.setAttribute("height",it(i)):(c.setAttribute("height",it(i)),c.setAttribute("depth",it(-i))),c.setAttribute("voffset",it(i)),c}});function xq(t,e,r){for(var n=ei(t,e,!1),i=e.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(r)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+r.size),n[a].height*=i,n[a].depth*=i}return _e.makeFragment(n)}var mI=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Joe=(t,e)=>{var r=e.havingSize(t.size);return xq(t.body,r,e)};ht({type:"sizing",names:mI,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!1,r);return{type:"sizing",mode:i.mode,size:mI.indexOf(n)+1,body:a}},htmlBuilder:Joe,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Na(t.body,r),i=new Xe.MathNode("mstyle",n);return i.setAttribute("mathsize",it(r.sizeMultiplier)),i}});ht({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,i=!1,a=!1,s=r[0]&&Gt(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var f=s.body[d];if(c=f.text,c==="t")i=!0;else if(c==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var m=e[0];return{type:"smash",mode:n.mode,body:m,smashHeight:i,smashDepth:a}},htmlBuilder:(t,e)=>{var r=_e.makeSpan([],[fr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var i=0;i<r.children.length;i++)r.children[i].depth=0;var a=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return _e.makeSpan(["mord"],[a],e)},mathmlBuilder:(t,e)=>{var r=new Xe.MathNode("mpadded",[Hr(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});ht({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,i=r[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(t,e){var r=fr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=_e.wrapFragment(r,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<Ct.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,c=r.height+r.depth+s+i,{span:d,ruleWidth:f,advanceWidth:m}=_l.sqrtImage(c,e),p=d.height-f;p>r.height+r.depth+s&&(s=(s+p-r.height-r.depth)/2);var y=d.height-r.height-s-f;r.style.paddingLeft=it(m);var b=_e.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:f}]},e);if(t.index){var T=e.havingStyle(Ct.SCRIPTSCRIPT),S=fr(t.index,T,e),w=.6*(b.height-b.depth),N=_e.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),I=_e.makeSpan(["root"],[N]);return _e.makeSpan(["mord","sqrt"],[I,b],e)}else return _e.makeSpan(["mord","sqrt"],[b],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new Xe.MathNode("mroot",[Hr(r,e),Hr(n,e)]):new Xe.MathNode("msqrt",[Hr(r,e)])}});var pI={display:Ct.DISPLAY,text:Ct.TEXT,script:Ct.SCRIPT,scriptscript:Ct.SCRIPTSCRIPT};ht({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:i}=t,a=i.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(t,e){var r=pI[t.style],n=e.havingStyle(r).withFont("");return xq(t.body,n,e)},mathmlBuilder(t,e){var r=pI[t.style],n=e.havingStyle(r),i=Na(t.body,n),a=new Xe.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return a.setAttribute("scriptlevel",c[0]),a.setAttribute("displaystyle",c[1]),a}});var ele=function(e,r){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(r.style.size===Ct.DISPLAY.size||n.alwaysHandleSupSub);return i?of:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===Ct.DISPLAY.size||n.limits);return a?bq:null}else{if(n.type==="accent")return br.isCharacterBox(n.base)?F8:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?gq:null}else return null}else return null};V0({type:"supsub",htmlBuilder(t,e){var r=ele(t,e);if(r)return r(t,e);var{base:n,sup:i,sub:a}=t,s=fr(n,e),c,d,f=e.fontMetrics(),m=0,p=0,y=n&&br.isCharacterBox(n);if(i){var b=e.havingStyle(e.style.sup());c=fr(i,b,e),y||(m=s.height-b.fontMetrics().supDrop*b.sizeMultiplier/e.sizeMultiplier)}if(a){var T=e.havingStyle(e.style.sub());d=fr(a,T,e),y||(p=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===Ct.DISPLAY?S=f.sup1:e.style.cramped?S=f.sup3:S=f.sup2;var w=e.sizeMultiplier,N=it(.5/f.ptPerEm/w),I=null;if(d){var C=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof _s||C)&&(I=it(-s.italic))}var z;if(c&&d){m=Math.max(m,S,c.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var O=f.defaultRuleThickness,B=4*O;if(m-c.depth-(d.height-p)<B){p=B-(m-c.depth)+d.height;var E=.8*f.xHeight-(m-c.depth);E>0&&(m+=E,p-=E)}var A=[{type:"elem",elem:d,shift:p,marginRight:N,marginLeft:I},{type:"elem",elem:c,shift:-m,marginRight:N}];z=_e.makeVList({positionType:"individualShift",children:A},e)}else if(d){p=Math.max(p,f.sub1,d.height-.8*f.xHeight);var R=[{type:"elem",elem:d,marginLeft:I,marginRight:N}];z=_e.makeVList({positionType:"shift",positionData:p,children:R},e)}else if(c)m=Math.max(m,S,c.depth+.25*f.xHeight),z=_e.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:c,marginRight:N}]},e);else throw new Error("supsub must have either sup or sub.");var F=NT(s,"right")||"mord";return _e.makeSpan([F],[s,_e.makeSpan(["msupsub"],[z])],e)},mathmlBuilder(t,e){var r=!1,n,i;t.base&&t.base.type==="horizBrace"&&(i=!!t.sup,i===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var a=[Hr(t.base,e)];t.sub&&a.push(Hr(t.sub,e)),t.sup&&a.push(Hr(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var f=t.base;f&&f.type==="op"&&f.limits&&e.style===Ct.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(e.style===Ct.DISPLAY||f.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===Ct.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===Ct.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===Ct.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===Ct.DISPLAY)?s="mover":s="msup"}return new Xe.MathNode(s,a)}});V0({type:"atom",htmlBuilder(t,e){return _e.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new Xe.MathNode("mo",[Ss(t.text,t.mode)]);if(t.family==="bin"){var n=$8(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var wq={mi:"italic",mn:"normal",mtext:"normal"};V0({type:"mathord",htmlBuilder(t,e){return _e.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new Xe.MathNode("mi",[Ss(t.text,t.mode,e)]),n=$8(t,e)||"italic";return n!==wq[r.type]&&r.setAttribute("mathvariant",n),r}});V0({type:"textord",htmlBuilder(t,e){return _e.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=Ss(t.text,t.mode,e),n=$8(t,e)||"normal",i;return t.mode==="text"?i=new Xe.MathNode("mtext",[r]):/[0-9]/.test(t.text)?i=new Xe.MathNode("mn",[r]):t.text==="\\prime"?i=new Xe.MathNode("mo",[r]):i=new Xe.MathNode("mi",[r]),n!==wq[i.type]&&i.setAttribute("mathvariant",n),i}});var d5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},h5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};V0({type:"spacing",htmlBuilder(t,e){if(h5.hasOwnProperty(t.text)){var r=h5[t.text].className||"";if(t.mode==="text"){var n=_e.makeOrd(t,e,"textord");return n.classes.push(r),n}else return _e.makeSpan(["mspace",r],[_e.mathsym(t.text,t.mode,e)],e)}else{if(d5.hasOwnProperty(t.text))return _e.makeSpan(["mspace",d5[t.text]],[],e);throw new Ye('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(h5.hasOwnProperty(t.text))r=new Xe.MathNode("mtext",[new Xe.TextNode("")]);else{if(d5.hasOwnProperty(t.text))return new Xe.MathNode("mspace");throw new Ye('Unknown type of space "'+t.text+'"')}return r}});var gI=()=>{var t=new Xe.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};V0({type:"tag",mathmlBuilder(t,e){var r=new Xe.MathNode("mtable",[new Xe.MathNode("mtr",[gI(),new Xe.MathNode("mtd",[iu(t.body,e)]),gI(),new Xe.MathNode("mtd",[iu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var yI={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},vI={"\\textbf":"textbf","\\textmd":"textmd"},tle={"\\textit":"textit","\\textup":"textup"},bI=(t,e)=>{var r=t.font;if(r){if(yI[r])return e.withTextFontFamily(yI[r]);if(vI[r])return e.withTextFontWeight(vI[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(tle[r])};ht({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,i=e[0];return{type:"text",mode:r.mode,body:Mn(i),font:n}},htmlBuilder(t,e){var r=bI(t,e),n=ei(t.body,r,!0);return _e.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=bI(t,e);return iu(t.body,r)}});ht({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=fr(t.body,e),n=_e.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=_e.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r}]},e);return _e.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(t,e){var r=new Xe.MathNode("mo",[new Xe.TextNode("")]);r.setAttribute("stretchy","true");var n=new Xe.MathNode("munder",[Hr(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});ht({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=fr(t.body,e),n=e.fontMetrics().axisHeight,i=.5*(r.height-n-(r.depth+n));return _e.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new Xe.MathNode("mpadded",[Hr(t.body,e)],["vcenter"])}});ht({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Ye("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=xI(t),n=[],i=e.havingStyle(e.style.text()),a=0;a<r.length;a++){var s=r[a];s==="~"&&(s="\\textasciitilde"),n.push(_e.makeSymbol(s,"Typewriter-Regular",t.mode,i,["mord","texttt"]))}return _e.makeSpan(["mord","text"].concat(i.sizingClasses(e)),_e.tryCombineChars(n),i)},mathmlBuilder(t,e){var r=new Xe.TextNode(xI(t)),n=new Xe.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var xI=t=>t.body.replace(/ /g,t.star?"":""),Bc=qF,_q=`[ \r
	]`,rle="\\\\[a-zA-Z@]+",nle="\\\\[^\uD800-\uDFFF]",ile="("+rle+")"+_q+"*",ale=`\\\\(
|[ \r	]+
?)[ \r	]*`,OT="[-]",sle=new RegExp(OT+"+$"),ole="("+_q+"+)|"+(ale+"|")+"([!-\\[\\]---]"+(OT+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(OT+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+ile)+("|"+nle+")");class wI{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(ole,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Wa("EOF",new ba(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Ye("Unexpected character: '"+e[r]+"'",new Wa(e[r],new ba(this,r,r+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Wa(i,new ba(this,r,this.tokenRegex.lastIndex))}}class lle{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ye("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var cle=dq;G("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});G("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});G("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});G("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});G("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});G("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");G("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var _I={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};G("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ye("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=_I[e.text],n==null||n>=r)throw new Ye("Invalid base-"+r+" digit "+e.text);for(var i;(i=_I[t.future().text])!=null&&i<r;)n*=r,n+=i,t.popToken()}return"\\@char{"+n+"}"});var Y8=(t,e,r,n)=>{var i=t.consumeArg().tokens;if(i.length!==1)throw new Ye("\\newcommand's first argument must be a macro name");var a=i[0].text,s=t.isDefined(a);if(s&&!e)throw new Ye("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!r)throw new Ye("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var c=0;if(i=t.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var d="",f=t.expandNextToken();f.text!=="]"&&f.text!=="EOF";)d+=f.text,f=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Ye("Invalid number of arguments: "+d);c=parseInt(d),i=t.consumeArg().tokens}return s&&n||t.macros.set(a,{tokens:i,numArgs:c}),""};G("\\newcommand",t=>Y8(t,!1,!0,!1));G("\\renewcommand",t=>Y8(t,!0,!1,!1));G("\\providecommand",t=>Y8(t,!0,!0,!0));G("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});G("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});G("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),Bc[r],Yr.math[r],Yr.text[r]),""});G("\\bgroup","{");G("\\egroup","}");G("~","\\nobreakspace");G("\\lq","`");G("\\rq","'");G("\\aa","\\r a");G("\\AA","\\r A");G("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");G("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");G("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");G("","\\mathscr{B}");G("","\\mathscr{E}");G("","\\mathscr{F}");G("","\\mathscr{H}");G("","\\mathscr{I}");G("","\\mathscr{L}");G("","\\mathscr{M}");G("","\\mathscr{R}");G("","\\mathfrak{C}");G("","\\mathfrak{H}");G("","\\mathfrak{Z}");G("\\Bbbk","\\Bbb{k}");G("","\\cdotp");G("\\llap","\\mathllap{\\textrm{#1}}");G("\\rlap","\\mathrlap{\\textrm{#1}}");G("\\clap","\\mathclap{\\textrm{#1}}");G("\\mathstrut","\\vphantom{(}");G("\\underbar","\\underline{\\text{#1}}");G("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');G("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");G("\\ne","\\neq");G("","\\neq");G("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");G("","\\notin");G("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");G("","\\perp");G("","\\mathclose{!\\mkern-0.8mu!}");G("","\\notni");G("","\\ulcorner");G("","\\urcorner");G("","\\llcorner");G("","\\lrcorner");G("","\\copyright");G("","\\textregistered");G("","\\textregistered");G("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');G("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');G("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');G("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');G("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");G("","\\vdots");G("\\varGamma","\\mathit{\\Gamma}");G("\\varDelta","\\mathit{\\Delta}");G("\\varTheta","\\mathit{\\Theta}");G("\\varLambda","\\mathit{\\Lambda}");G("\\varXi","\\mathit{\\Xi}");G("\\varPi","\\mathit{\\Pi}");G("\\varSigma","\\mathit{\\Sigma}");G("\\varUpsilon","\\mathit{\\Upsilon}");G("\\varPhi","\\mathit{\\Phi}");G("\\varPsi","\\mathit{\\Psi}");G("\\varOmega","\\mathit{\\Omega}");G("\\substack","\\begin{subarray}{c}#1\\end{subarray}");G("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");G("\\boxed","\\fbox{$\\displaystyle{#1}$}");G("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");G("\\implies","\\DOTSB\\;\\Longrightarrow\\;");G("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");G("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");G("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var SI={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};G("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in SI?e=SI[r]:(r.slice(0,4)==="\\not"||r in Yr.math&&["bin","rel"].includes(Yr.math[r].group))&&(e="\\dotsb"),e});var Z8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};G("\\dotso",function(t){var e=t.future().text;return e in Z8?"\\ldots\\,":"\\ldots"});G("\\dotsc",function(t){var e=t.future().text;return e in Z8&&e!==","?"\\ldots\\,":"\\ldots"});G("\\cdots",function(t){var e=t.future().text;return e in Z8?"\\@cdots\\,":"\\@cdots"});G("\\dotsb","\\cdots");G("\\dotsm","\\cdots");G("\\dotsi","\\!\\cdots");G("\\dotsx","\\ldots\\,");G("\\DOTSI","\\relax");G("\\DOTSB","\\relax");G("\\DOTSX","\\relax");G("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");G("\\,","\\tmspace+{3mu}{.1667em}");G("\\thinspace","\\,");G("\\>","\\mskip{4mu}");G("\\:","\\tmspace+{4mu}{.2222em}");G("\\medspace","\\:");G("\\;","\\tmspace+{5mu}{.2777em}");G("\\thickspace","\\;");G("\\!","\\tmspace-{3mu}{.1667em}");G("\\negthinspace","\\!");G("\\negmedspace","\\tmspace-{4mu}{.2222em}");G("\\negthickspace","\\tmspace-{5mu}{.277em}");G("\\enspace","\\kern.5em ");G("\\enskip","\\hskip.5em\\relax");G("\\quad","\\hskip1em\\relax");G("\\qquad","\\hskip2em\\relax");G("\\tag","\\@ifstar\\tag@literal\\tag@paren");G("\\tag@paren","\\tag@literal{({#1})}");G("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Ye("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});G("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");G("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");G("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");G("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");G("\\newline","\\\\\\relax");G("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Sq=it(bo["Main-Regular"][84][1]-.7*bo["Main-Regular"][65][1]);G("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Sq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");G("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Sq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");G("\\hspace","\\@ifstar\\@hspacer\\@hspace");G("\\@hspace","\\hskip #1\\relax");G("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");G("\\ordinarycolon",":");G("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");G("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');G("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');G("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');G("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');G("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');G("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');G("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');G("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');G("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');G("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');G("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');G("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');G("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');G("","\\dblcolon");G("","\\eqcolon");G("","\\coloneqq");G("","\\eqqcolon");G("","\\Coloneqq");G("\\ratio","\\vcentcolon");G("\\coloncolon","\\dblcolon");G("\\colonequals","\\coloneqq");G("\\coloncolonequals","\\Coloneqq");G("\\equalscolon","\\eqqcolon");G("\\equalscoloncolon","\\Eqqcolon");G("\\colonminus","\\coloneq");G("\\coloncolonminus","\\Coloneq");G("\\minuscolon","\\eqcolon");G("\\minuscoloncolon","\\Eqcolon");G("\\coloncolonapprox","\\Colonapprox");G("\\coloncolonsim","\\Colonsim");G("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");G("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");G("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");G("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");G("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");G("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");G("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");G("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");G("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");G("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");G("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");G("\\ngeqq","\\html@mathml{\\@ngeqq}{}");G("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");G("\\nleqq","\\html@mathml{\\@nleqq}{}");G("\\nleqslant","\\html@mathml{\\@nleqslant}{}");G("\\nshortmid","\\html@mathml{\\@nshortmid}{}");G("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");G("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");G("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");G("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");G("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");G("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");G("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");G("\\imath","\\html@mathml{\\@imath}{}");G("\\jmath","\\html@mathml{\\@jmath}{}");G("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");G("","\\llbracket");G("","\\rrbracket");G("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");G("","\\lBrace");G("","\\rBrace");G("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");G("","\\minuso");G("\\darr","\\downarrow");G("\\dArr","\\Downarrow");G("\\Darr","\\Downarrow");G("\\lang","\\langle");G("\\rang","\\rangle");G("\\uarr","\\uparrow");G("\\uArr","\\Uparrow");G("\\Uarr","\\Uparrow");G("\\N","\\mathbb{N}");G("\\R","\\mathbb{R}");G("\\Z","\\mathbb{Z}");G("\\alef","\\aleph");G("\\alefsym","\\aleph");G("\\Alpha","\\mathrm{A}");G("\\Beta","\\mathrm{B}");G("\\bull","\\bullet");G("\\Chi","\\mathrm{X}");G("\\clubs","\\clubsuit");G("\\cnums","\\mathbb{C}");G("\\Complex","\\mathbb{C}");G("\\Dagger","\\ddagger");G("\\diamonds","\\diamondsuit");G("\\empty","\\emptyset");G("\\Epsilon","\\mathrm{E}");G("\\Eta","\\mathrm{H}");G("\\exist","\\exists");G("\\harr","\\leftrightarrow");G("\\hArr","\\Leftrightarrow");G("\\Harr","\\Leftrightarrow");G("\\hearts","\\heartsuit");G("\\image","\\Im");G("\\infin","\\infty");G("\\Iota","\\mathrm{I}");G("\\isin","\\in");G("\\Kappa","\\mathrm{K}");G("\\larr","\\leftarrow");G("\\lArr","\\Leftarrow");G("\\Larr","\\Leftarrow");G("\\lrarr","\\leftrightarrow");G("\\lrArr","\\Leftrightarrow");G("\\Lrarr","\\Leftrightarrow");G("\\Mu","\\mathrm{M}");G("\\natnums","\\mathbb{N}");G("\\Nu","\\mathrm{N}");G("\\Omicron","\\mathrm{O}");G("\\plusmn","\\pm");G("\\rarr","\\rightarrow");G("\\rArr","\\Rightarrow");G("\\Rarr","\\Rightarrow");G("\\real","\\Re");G("\\reals","\\mathbb{R}");G("\\Reals","\\mathbb{R}");G("\\Rho","\\mathrm{P}");G("\\sdot","\\cdot");G("\\sect","\\S");G("\\spades","\\spadesuit");G("\\sub","\\subset");G("\\sube","\\subseteq");G("\\supe","\\supseteq");G("\\Tau","\\mathrm{T}");G("\\thetasym","\\vartheta");G("\\weierp","\\wp");G("\\Zeta","\\mathrm{Z}");G("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");G("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");G("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");G("\\bra","\\mathinner{\\langle{#1}|}");G("\\ket","\\mathinner{|{#1}\\rangle}");G("\\braket","\\mathinner{\\langle{#1}\\rangle}");G("\\Bra","\\left\\langle#1\\right|");G("\\Ket","\\left|#1\\right\\rangle");var Tq=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=p=>y=>{t&&(y.macros.set("|",s),i.length&&y.macros.set("\\|",c));var b=p;if(!p&&i.length){var T=y.future();T.text==="|"&&(y.popToken(),b=!0)}return{tokens:b?i:n,numArgs:0}};e.macros.set("|",d(!1)),i.length&&e.macros.set("\\|",d(!0));var f=e.consumeArg().tokens,m=e.expandTokens([...a,...f,...r]);return e.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};G("\\bra@ket",Tq(!1));G("\\bra@set",Tq(!0));G("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");G("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");G("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");G("\\angln","{\\angl n}");G("\\blue","\\textcolor{##6495ed}{#1}");G("\\orange","\\textcolor{##ffa500}{#1}");G("\\pink","\\textcolor{##ff00af}{#1}");G("\\red","\\textcolor{##df0030}{#1}");G("\\green","\\textcolor{##28ae7b}{#1}");G("\\gray","\\textcolor{gray}{#1}");G("\\purple","\\textcolor{##9d38bd}{#1}");G("\\blueA","\\textcolor{##ccfaff}{#1}");G("\\blueB","\\textcolor{##80f6ff}{#1}");G("\\blueC","\\textcolor{##63d9ea}{#1}");G("\\blueD","\\textcolor{##11accd}{#1}");G("\\blueE","\\textcolor{##0c7f99}{#1}");G("\\tealA","\\textcolor{##94fff5}{#1}");G("\\tealB","\\textcolor{##26edd5}{#1}");G("\\tealC","\\textcolor{##01d1c1}{#1}");G("\\tealD","\\textcolor{##01a995}{#1}");G("\\tealE","\\textcolor{##208170}{#1}");G("\\greenA","\\textcolor{##b6ffb0}{#1}");G("\\greenB","\\textcolor{##8af281}{#1}");G("\\greenC","\\textcolor{##74cf70}{#1}");G("\\greenD","\\textcolor{##1fab54}{#1}");G("\\greenE","\\textcolor{##0d923f}{#1}");G("\\goldA","\\textcolor{##ffd0a9}{#1}");G("\\goldB","\\textcolor{##ffbb71}{#1}");G("\\goldC","\\textcolor{##ff9c39}{#1}");G("\\goldD","\\textcolor{##e07d10}{#1}");G("\\goldE","\\textcolor{##a75a05}{#1}");G("\\redA","\\textcolor{##fca9a9}{#1}");G("\\redB","\\textcolor{##ff8482}{#1}");G("\\redC","\\textcolor{##f9685d}{#1}");G("\\redD","\\textcolor{##e84d39}{#1}");G("\\redE","\\textcolor{##bc2612}{#1}");G("\\maroonA","\\textcolor{##ffbde0}{#1}");G("\\maroonB","\\textcolor{##ff92c6}{#1}");G("\\maroonC","\\textcolor{##ed5fa6}{#1}");G("\\maroonD","\\textcolor{##ca337c}{#1}");G("\\maroonE","\\textcolor{##9e034e}{#1}");G("\\purpleA","\\textcolor{##ddd7ff}{#1}");G("\\purpleB","\\textcolor{##c6b9fc}{#1}");G("\\purpleC","\\textcolor{##aa87ff}{#1}");G("\\purpleD","\\textcolor{##7854ab}{#1}");G("\\purpleE","\\textcolor{##543b78}{#1}");G("\\mintA","\\textcolor{##f5f9e8}{#1}");G("\\mintB","\\textcolor{##edf2df}{#1}");G("\\mintC","\\textcolor{##e0e5cc}{#1}");G("\\grayA","\\textcolor{##f6f7f7}{#1}");G("\\grayB","\\textcolor{##f0f1f2}{#1}");G("\\grayC","\\textcolor{##e3e5e6}{#1}");G("\\grayD","\\textcolor{##d6d8da}{#1}");G("\\grayE","\\textcolor{##babec2}{#1}");G("\\grayF","\\textcolor{##888d93}{#1}");G("\\grayG","\\textcolor{##626569}{#1}");G("\\grayH","\\textcolor{##3b3e40}{#1}");G("\\grayI","\\textcolor{##21242c}{#1}");G("\\kaBlue","\\textcolor{##314453}{#1}");G("\\kaGreen","\\textcolor{##71B307}{#1}");var Aq={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class ule{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new lle(cle,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new wI(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:r,end:n}=this.consumeArg());return this.pushToken(new Wa("EOF",n.loc)),this.pushTokens(i),new Wa("",ba.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,c=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new Ye("Extra }",a)}else if(a.text==="EOF")throw new Ye("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[c]==="{")&&a.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return i.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:i,end:a}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Ye("The length of delimiters doesn't match the number of args!");for(var n=r[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new Ye("Use of the macro doesn't match its definition",a)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ye("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,i=r.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new Ye("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var c=a.length-1;c>=0;--c){var d=a[c];if(d.text==="#"){if(c===0)throw new Ye("Incomplete placeholder at end of macro body",d);if(d=a[--c],d.text==="#")a.splice(c+1,1);else if(/^[1-9]$/.test(d.text))a.splice(c,2,...s[+d.text-1]);else throw new Ye("Not a valid argument number",d)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Wa(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),r.push(i)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof r=="function"?r(this):r;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var c=new wI(i,this.settings),d=[],f=c.lex();f.text!=="EOF";)d.push(f),f=c.lex();d.reverse();var m={tokens:d,numArgs:a};return m}return i}isDefined(e){return this.macros.has(e)||Bc.hasOwnProperty(e)||Yr.math.hasOwnProperty(e)||Yr.text.hasOwnProperty(e)||Aq.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Bc.hasOwnProperty(e)&&!Bc[e].primitive}}var TI=/^[]/,My=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),f5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},AI={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class zx{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new ule(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Ye("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Wa("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(zx.endOfExpression.indexOf(i.text)!==-1||r&&i.text===r||e&&Bc[i.text]&&Bc[i.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(r!==-1)throw new Ye("only one infix operator per group",e[i].token);r=i,n=e[i].replaceWith}if(r!==-1&&n){var a,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var f;return n==="\\\\abovefrac"?f=this.callFunction(n,[a,e[r],s],[]):f=this.callFunction(n,[a,s],[]),[f]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new Ye("Expected group after '"+n+"'",r);return i}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var s=a.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new Ye("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new Ye("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new Ye("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new Ye("Double superscript",a);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(My[a.text]){var f=TI.test(a.text),m=[];for(m.push(new Wa(My[a.text])),this.consume();;){var p=this.fetch().text;if(!My[p]||TI.test(p)!==f)break;m.unshift(new Wa(My[p])),this.consume()}var y=this.subparse(m);f?i={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||i?{type:"supsub",mode:this.mode,base:r,sup:n,sub:i}:r}parseFunction(e,r){var n=this.fetch(),i=n.text,a=Bc[i];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new Ye("Got function '"+i+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new Ye("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new Ye("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(i,a);return this.callFunction(i,s,c,n,e)}callFunction(e,r,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},c=Bc[e];if(c&&c.handler)return c.handler(s,r,n);throw new Ye("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&a[0]==null)&&(c="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)a.push(f);else if(f!=null)i.push(f);else throw new Ye("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new Ye("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new Ye("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Ye("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,r){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new Ye("Invalid "+r+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Ye("Invalid color: '"+r.text+"'",r);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!i)throw new Ye("Invalid size: '"+r.text+"'",r);var a={number:+(i[1]+i[2]),unit:i[3]};if(!PF(a))throw new Ye("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(i),s}parseGroup(e,r){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:ba.range(n,d),body:c,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!Aq.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Ye("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:ba.range(i,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:ba.range(i,e[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:ba.range(i,e[n+1]),text:a+a}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Ye(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}AI.hasOwnProperty(r[0])&&!Yr[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=AI[r[0]]+r.slice(1));var a=sle.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var s;if(Yr[this.mode][r]){this.settings.strict&&this.mode==="math"&&ET.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Yr[this.mode][r].group,d=ba.range(e),f;if(Zse.hasOwnProperty(c)){var m=c;f={type:"atom",mode:this.mode,family:m,loc:d,text:r}}else f={type:c,mode:this.mode,loc:d,text:r};s=f}else if(r.charCodeAt(0)>=128)this.settings.strict&&(MF(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:ba.range(e),text:r};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var y=a[0][p];if(!f5[y])throw new Ye("Unknown accent ' "+y+"'",e);var b=f5[y][this.mode]||f5[y].text;if(!b)throw new Ye("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:ba.range(e),label:b,isStretchy:!1,isShifty:!0,base:s}}return s}}zx.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var J8=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new zx(e,r);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Ye("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new Wa("\\df@tag")])}]}return i},Eq=function(e,r,n){r.textContent="";var i=eE(e,n).toNode();r.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Eq=function(){throw new Ye("KaTeX doesn't work in quirks mode.")});var dle=function(e,r){var n=eE(e,r).toMarkup();return n},hle=function(e,r){var n=new P8(r);return J8(e,n)},Nq=function(e,r,n){if(n.throwOnError||!(e instanceof Ye))throw e;var i=_e.makeSpan(["katex-error"],[new _s(r)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},eE=function(e,r){var n=new P8(r);try{var i=J8(e,n);return woe(i,e,n)}catch(a){return Nq(a,e,n)}},fle=function(e,r){var n=new P8(r);try{var i=J8(e,n);return _oe(i,e,n)}catch(a){return Nq(a,e,n)}},mle="0.16.28",ple={Span:Ig,Anchor:B8,SymbolNode:_s,SvgNode:Il,PathNode:nu,LineNode:AT},Yv={version:mle,render:Eq,renderToString:dle,ParseError:Ye,SETTINGS_SCHEMA:mv,__parse:hle,__renderToDomTree:eE,__renderToHTMLTree:fle,__setFontMetrics:qse,__defineSymbol:j,__defineFunction:ht,__defineMacro:G,__domTree:ple};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function IT(t,e){return IT=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},IT(t,e)}function gle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gv(t,e,r){return gle()?gv=Reflect.construct:gv=function(i,a,s){var c=[null];c.push.apply(c,a);var d=Function.bind.apply(i,c),f=new d;return s&&IT(f,s.prototype),f},gv.apply(null,arguments)}function zs(t){return yle(t)||vle(t)||ble(t)||xle()}function yle(t){if(Array.isArray(t))return RT(t)}function vle(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ble(t,e){if(t){if(typeof t=="string")return RT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RT(t,e)}}function RT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var wle=Object.hasOwnProperty,EI=Object.setPrototypeOf,_le=Object.isFrozen,Sle=Object.getPrototypeOf,Tle=Object.getOwnPropertyDescriptor,ia=Object.freeze,Ts=Object.seal,Ale=Object.create,jq=typeof Reflect<"u"&&Reflect,Zv=jq.apply,MT=jq.construct;Zv||(Zv=function(e,r,n){return e.apply(r,n)});ia||(ia=function(e){return e});Ts||(Ts=function(e){return e});MT||(MT=function(e,r){return gv(e,zs(r))});var Ele=As(Array.prototype.forEach),NI=As(Array.prototype.pop),vm=As(Array.prototype.push),yv=As(String.prototype.toLowerCase),m5=As(String.prototype.toString),jI=As(String.prototype.match),Bs=As(String.prototype.replace),Nle=As(String.prototype.indexOf),jle=As(String.prototype.trim),bi=As(RegExp.prototype.test),p5=kle(TypeError);function As(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Zv(t,e,n)}}function kle(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return MT(t,r)}}function Xt(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:yv,EI&&EI(t,null);for(var i=e.length;i--;){var a=e[i];if(typeof a=="string"){var s=r(a);s!==a&&(_le(e)||(e[i]=s),a=s)}t[a]=!0}return t}function Vu(t){var e=Ale(null),r;for(r in t)Zv(wle,t,[r])===!0&&(e[r]=t[r]);return e}function Py(t,e){for(;t!==null;){var r=Tle(t,e);if(r){if(r.get)return As(r.get);if(typeof r.value=="function")return As(r.value)}t=Sle(t)}function n(i){return console.warn("fallback value for",i),null}return n}var kI=ia(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),g5=ia(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),y5=ia(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cle=ia(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),v5=ia(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ole=ia(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),CI=ia(["#text"]),OI=ia(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),b5=ia(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),II=ia(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Dy=ia(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ile=Ts(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Rle=Ts(/<%[\w\W]*|[\w\W]*%>/gm),Mle=Ts(/\${[\w\W]*}/gm),Ple=Ts(/^data-[\-\w.\u00B7-\uFFFF]+$/),Dle=Ts(/^aria-[\-\w]+$/),Lle=Ts(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ble=Ts(/^(?:\w+script|data):/i),Ule=Ts(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zle=Ts(/^html$/i),$le=Ts(/^[a-z][.\w]*(-[.\w]+)+$/i),Vle=function(){return typeof window>"u"?null:window},Fle=function(e,r){if(Pc(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(i)&&(n=r.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function kq(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vle(),e=function(ue){return kq(ue)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,i=t.DocumentFragment,a=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,f=t.NamedNodeMap,m=f===void 0?t.NamedNodeMap||t.MozNamedAttrMap:f,p=t.HTMLFormElement,y=t.DOMParser,b=t.trustedTypes,T=c.prototype,S=Py(T,"cloneNode"),w=Py(T,"nextSibling"),N=Py(T,"childNodes"),I=Py(T,"parentNode");if(typeof a=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var z=Fle(b,r),O=z?z.createHTML(""):"",B=n,E=B.implementation,A=B.createNodeIterator,R=B.createDocumentFragment,F=B.getElementsByTagName,D=r.importNode,L={};try{L=Vu(n).documentMode?n.documentMode:{}}catch{}var M={};e.isSupported=typeof I=="function"&&E&&E.createHTMLDocument!==void 0&&L!==9;var Q=Ile,Z=Rle,W=Mle,ee=Ple,Y=Dle,ye=Ble,oe=Ule,X=$le,ne=Lle,de=null,J=Xt({},[].concat(zs(kI),zs(g5),zs(y5),zs(v5),zs(CI))),le=null,pe=Xt({},[].concat(zs(OI),zs(b5),zs(II),zs(Dy))),be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Je=null,Ne=null,ce=!0,Ce=!0,Ee=!1,ct=!0,Qe=!1,ut=!0,dt=!1,Ut=!1,Oe=!1,st=!1,yt=!1,he=!1,ze=!0,re=!1,De="user-content-",We=!0,tt=!1,Ze={},Ke=null,wt=Xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Tt=null,hi=Xt({},["audio","video","img","source","image","track"]),Nn=null,jn=Xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Kt="http://www.w3.org/1998/Math/MathML",Qt="http://www.w3.org/2000/svg",Wt="http://www.w3.org/1999/xhtml",ki=Wt,Fi=!1,Ja=null,qi=Xt({},[Kt,Qt,Wt],m5),Vr,es=["application/xhtml+xml","text/html"],Ci="text/html",ur,fi=null,Js=n.createElement("form"),eo=function(ue){return ue instanceof RegExp||ue instanceof Function},Hi=function(ue){fi&&fi===ue||((!ue||Pc(ue)!=="object")&&(ue={}),ue=Vu(ue),Vr=es.indexOf(ue.PARSER_MEDIA_TYPE)===-1?Vr=Ci:Vr=ue.PARSER_MEDIA_TYPE,ur=Vr==="application/xhtml+xml"?m5:yv,de="ALLOWED_TAGS"in ue?Xt({},ue.ALLOWED_TAGS,ur):J,le="ALLOWED_ATTR"in ue?Xt({},ue.ALLOWED_ATTR,ur):pe,Ja="ALLOWED_NAMESPACES"in ue?Xt({},ue.ALLOWED_NAMESPACES,m5):qi,Nn="ADD_URI_SAFE_ATTR"in ue?Xt(Vu(jn),ue.ADD_URI_SAFE_ATTR,ur):jn,Tt="ADD_DATA_URI_TAGS"in ue?Xt(Vu(hi),ue.ADD_DATA_URI_TAGS,ur):hi,Ke="FORBID_CONTENTS"in ue?Xt({},ue.FORBID_CONTENTS,ur):wt,Je="FORBID_TAGS"in ue?Xt({},ue.FORBID_TAGS,ur):{},Ne="FORBID_ATTR"in ue?Xt({},ue.FORBID_ATTR,ur):{},Ze="USE_PROFILES"in ue?ue.USE_PROFILES:!1,ce=ue.ALLOW_ARIA_ATTR!==!1,Ce=ue.ALLOW_DATA_ATTR!==!1,Ee=ue.ALLOW_UNKNOWN_PROTOCOLS||!1,ct=ue.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qe=ue.SAFE_FOR_TEMPLATES||!1,ut=ue.SAFE_FOR_XML!==!1,dt=ue.WHOLE_DOCUMENT||!1,st=ue.RETURN_DOM||!1,yt=ue.RETURN_DOM_FRAGMENT||!1,he=ue.RETURN_TRUSTED_TYPE||!1,Oe=ue.FORCE_BODY||!1,ze=ue.SANITIZE_DOM!==!1,re=ue.SANITIZE_NAMED_PROPS||!1,We=ue.KEEP_CONTENT!==!1,tt=ue.IN_PLACE||!1,ne=ue.ALLOWED_URI_REGEXP||ne,ki=ue.NAMESPACE||Wt,be=ue.CUSTOM_ELEMENT_HANDLING||{},ue.CUSTOM_ELEMENT_HANDLING&&eo(ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(be.tagNameCheck=ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&eo(ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(be.attributeNameCheck=ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ue.CUSTOM_ELEMENT_HANDLING&&typeof ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(be.allowCustomizedBuiltInElements=ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(Ce=!1),yt&&(st=!0),Ze&&(de=Xt({},zs(CI)),le=[],Ze.html===!0&&(Xt(de,kI),Xt(le,OI)),Ze.svg===!0&&(Xt(de,g5),Xt(le,b5),Xt(le,Dy)),Ze.svgFilters===!0&&(Xt(de,y5),Xt(le,b5),Xt(le,Dy)),Ze.mathMl===!0&&(Xt(de,v5),Xt(le,II),Xt(le,Dy))),ue.ADD_TAGS&&(de===J&&(de=Vu(de)),Xt(de,ue.ADD_TAGS,ur)),ue.ADD_ATTR&&(le===pe&&(le=Vu(le)),Xt(le,ue.ADD_ATTR,ur)),ue.ADD_URI_SAFE_ATTR&&Xt(Nn,ue.ADD_URI_SAFE_ATTR,ur),ue.FORBID_CONTENTS&&(Ke===wt&&(Ke=Vu(Ke)),Xt(Ke,ue.FORBID_CONTENTS,ur)),We&&(de["#text"]=!0),dt&&Xt(de,["html","head","body"]),de.table&&(Xt(de,["tbody"]),delete Je.tbody),ia&&ia(ue),fi=ue)},sa=Xt({},["mi","mo","mn","ms","mtext"]),un=Xt({},["annotation-xml"]),to=Xt({},["title","style","font","a","script"]),Oi=Xt({},g5);Xt(Oi,y5),Xt(Oi,Cle);var Gi=Xt({},v5);Xt(Gi,Ole);var ro=function(ue){var qe=I(ue);(!qe||!qe.tagName)&&(qe={namespaceURI:ki,tagName:"template"});var rt=yv(ue.tagName),Dt=yv(qe.tagName);return Ja[ue.namespaceURI]?ue.namespaceURI===Qt?qe.namespaceURI===Wt?rt==="svg":qe.namespaceURI===Kt?rt==="svg"&&(Dt==="annotation-xml"||sa[Dt]):!!Oi[rt]:ue.namespaceURI===Kt?qe.namespaceURI===Wt?rt==="math":qe.namespaceURI===Qt?rt==="math"&&un[Dt]:!!Gi[rt]:ue.namespaceURI===Wt?qe.namespaceURI===Qt&&!un[Dt]||qe.namespaceURI===Kt&&!sa[Dt]?!1:!Gi[rt]&&(to[rt]||!Oi[rt]):!!(Vr==="application/xhtml+xml"&&Ja[ue.namespaceURI]):!1},kn=function(ue){vm(e.removed,{element:ue});try{ue.parentNode.removeChild(ue)}catch{try{ue.outerHTML=O}catch{ue.remove()}}},mi=function(ue,qe){try{vm(e.removed,{attribute:qe.getAttributeNode(ue),from:qe})}catch{vm(e.removed,{attribute:null,from:qe})}if(qe.removeAttribute(ue),ue==="is"&&!le[ue])if(st||yt)try{kn(qe)}catch{}else try{qe.setAttribute(ue,"")}catch{}},no=function(ue){var qe,rt;if(Oe)ue="<remove></remove>"+ue;else{var Dt=jI(ue,/^[\r\n\t ]+/);rt=Dt&&Dt[0]}Vr==="application/xhtml+xml"&&ki===Wt&&(ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ue+"</body></html>");var Yt=z?z.createHTML(ue):ue;if(ki===Wt)try{qe=new y().parseFromString(Yt,Vr)}catch{}if(!qe||!qe.documentElement){qe=E.createDocument(ki,"template",null);try{qe.documentElement.innerHTML=Fi?O:Yt}catch{}}var Kr=qe.body||qe.documentElement;return ue&&rt&&Kr.insertBefore(n.createTextNode(rt),Kr.childNodes[0]||null),ki===Wt?F.call(qe,dt?"html":"body")[0]:dt?qe.documentElement:Kr},Ii=function(ue){return A.call(ue.ownerDocument||ue,ue,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Er=function(ue){return ue instanceof p&&(typeof ue.nodeName!="string"||typeof ue.textContent!="string"||typeof ue.removeChild!="function"||!(ue.attributes instanceof m)||typeof ue.removeAttribute!="function"||typeof ue.setAttribute!="function"||typeof ue.namespaceURI!="string"||typeof ue.insertBefore!="function"||typeof ue.hasChildNodes!="function")},Gr=function(ue){return Pc(s)==="object"?ue instanceof s:ue&&Pc(ue)==="object"&&typeof ue.nodeType=="number"&&typeof ue.nodeName=="string"},dn=function(ue,qe,rt){M[ue]&&Ele(M[ue],function(Dt){Dt.call(e,qe,rt,fi)})},oa=function(ue){var qe;if(dn("beforeSanitizeElements",ue,null),Er(ue)||bi(/[\u0080-\uFFFF]/,ue.nodeName))return kn(ue),!0;var rt=ur(ue.nodeName);if(dn("uponSanitizeElement",ue,{tagName:rt,allowedTags:de}),ue.hasChildNodes()&&!Gr(ue.firstElementChild)&&(!Gr(ue.content)||!Gr(ue.content.firstElementChild))&&bi(/<[/\w]/g,ue.innerHTML)&&bi(/<[/\w]/g,ue.textContent)||rt==="select"&&bi(/<template/i,ue.innerHTML)||ue.nodeType===7||ut&&ue.nodeType===8&&bi(/<[/\w]/g,ue.data))return kn(ue),!0;if(!de[rt]||Je[rt]){if(!Je[rt]&&io(rt)&&(be.tagNameCheck instanceof RegExp&&bi(be.tagNameCheck,rt)||be.tagNameCheck instanceof Function&&be.tagNameCheck(rt)))return!1;if(We&&!Ke[rt]){var Dt=I(ue)||ue.parentNode,Yt=N(ue)||ue.childNodes;if(Yt&&Dt)for(var Kr=Yt.length,Nr=Kr-1;Nr>=0;--Nr){var Wr=S(Yt[Nr],!0);Wr.__removalCount=(ue.__removalCount||0)+1,Dt.insertBefore(Wr,w(ue))}}return kn(ue),!0}return ue instanceof c&&!ro(ue)||(rt==="noscript"||rt==="noembed"||rt==="noframes")&&bi(/<\/no(script|embed|frames)/i,ue.innerHTML)?(kn(ue),!0):(Qe&&ue.nodeType===3&&(qe=ue.textContent,qe=Bs(qe,Q," "),qe=Bs(qe,Z," "),qe=Bs(qe,W," "),ue.textContent!==qe&&(vm(e.removed,{element:ue.cloneNode()}),ue.textContent=qe)),dn("afterSanitizeElements",ue,null),!1)},Ri=function(ue,qe,rt){if(ze&&(qe==="id"||qe==="name")&&(rt in n||rt in Js))return!1;if(!(Ce&&!Ne[qe]&&bi(ee,qe))){if(!(ce&&bi(Y,qe))){if(!le[qe]||Ne[qe]){if(!(io(ue)&&(be.tagNameCheck instanceof RegExp&&bi(be.tagNameCheck,ue)||be.tagNameCheck instanceof Function&&be.tagNameCheck(ue))&&(be.attributeNameCheck instanceof RegExp&&bi(be.attributeNameCheck,qe)||be.attributeNameCheck instanceof Function&&be.attributeNameCheck(qe))||qe==="is"&&be.allowCustomizedBuiltInElements&&(be.tagNameCheck instanceof RegExp&&bi(be.tagNameCheck,rt)||be.tagNameCheck instanceof Function&&be.tagNameCheck(rt))))return!1}else if(!Nn[qe]){if(!bi(ne,Bs(rt,oe,""))){if(!((qe==="src"||qe==="xlink:href"||qe==="href")&&ue!=="script"&&Nle(rt,"data:")===0&&Tt[ue])){if(!(Ee&&!bi(ye,Bs(rt,oe,"")))){if(rt)return!1}}}}}}return!0},io=function(ue){return ue!=="annotation-xml"&&jI(ue,X)},js=function(ue){var qe,rt,Dt,Yt;dn("beforeSanitizeAttributes",ue,null);var Kr=ue.attributes;if(!(!Kr||Er(ue))){var Nr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le};for(Yt=Kr.length;Yt--;){qe=Kr[Yt];var Wr=qe,hr=Wr.name,ao=Wr.namespaceURI;if(rt=hr==="value"?qe.value:jle(qe.value),Dt=ur(hr),Nr.attrName=Dt,Nr.attrValue=rt,Nr.keepAttr=!0,Nr.forceKeepAttr=void 0,dn("uponSanitizeAttribute",ue,Nr),rt=Nr.attrValue,!Nr.forceKeepAttr&&(mi(hr,ue),!!Nr.keepAttr)){if(!ct&&bi(/\/>/i,rt)){mi(hr,ue);continue}Qe&&(rt=Bs(rt,Q," "),rt=Bs(rt,Z," "),rt=Bs(rt,W," "));var ks=ur(ue.nodeName);if(Ri(ks,Dt,rt)){if(re&&(Dt==="id"||Dt==="name")&&(mi(hr,ue),rt=De+rt),ut&&bi(/((--!?|])>)|<\/(style|title)/i,rt)){mi(hr,ue);continue}if(z&&Pc(b)==="object"&&typeof b.getAttributeType=="function"&&!ao)switch(b.getAttributeType(ks,Dt)){case"TrustedHTML":{rt=z.createHTML(rt);break}case"TrustedScriptURL":{rt=z.createScriptURL(rt);break}}try{ao?ue.setAttributeNS(ao,hr,rt):ue.setAttribute(hr,rt),Er(ue)?kn(ue):NI(e.removed)}catch{}}}}dn("afterSanitizeAttributes",ue,null)}},la=function pt(ue){var qe,rt=Ii(ue);for(dn("beforeSanitizeShadowDOM",ue,null);qe=rt.nextNode();)dn("uponSanitizeShadowNode",qe,null),oa(qe),js(qe),qe.content instanceof i&&pt(qe.content);dn("afterSanitizeShadowDOM",ue,null)};return e.sanitize=function(pt){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},qe,rt,Dt,Yt,Kr;if(Fi=!pt,Fi&&(pt="<!-->"),typeof pt!="string"&&!Gr(pt))if(typeof pt.toString=="function"){if(pt=pt.toString(),typeof pt!="string")throw p5("dirty is not a string, aborting")}else throw p5("toString is not a function");if(!e.isSupported){if(Pc(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof pt=="string")return t.toStaticHTML(pt);if(Gr(pt))return t.toStaticHTML(pt.outerHTML)}return pt}if(Ut||Hi(ue),e.removed=[],typeof pt=="string"&&(tt=!1),tt){if(pt.nodeName){var Nr=ur(pt.nodeName);if(!de[Nr]||Je[Nr])throw p5("root node is forbidden and cannot be sanitized in-place")}}else if(pt instanceof s)qe=no("<!---->"),rt=qe.ownerDocument.importNode(pt,!0),rt.nodeType===1&&rt.nodeName==="BODY"||rt.nodeName==="HTML"?qe=rt:qe.appendChild(rt);else{if(!st&&!Qe&&!dt&&pt.indexOf("<")===-1)return z&&he?z.createHTML(pt):pt;if(qe=no(pt),!qe)return st?null:he?O:""}qe&&Oe&&kn(qe.firstChild);for(var Wr=Ii(tt?pt:qe);Dt=Wr.nextNode();)Dt.nodeType===3&&Dt===Yt||(oa(Dt),js(Dt),Dt.content instanceof i&&la(Dt.content),Yt=Dt);if(Yt=null,tt)return pt;if(st){if(yt)for(Kr=R.call(qe.ownerDocument);qe.firstChild;)Kr.appendChild(qe.firstChild);else Kr=qe;return(le.shadowroot||le.shadowrootmod)&&(Kr=D.call(r,Kr,!0)),Kr}var hr=dt?qe.outerHTML:qe.innerHTML;return dt&&de["!doctype"]&&qe.ownerDocument&&qe.ownerDocument.doctype&&qe.ownerDocument.doctype.name&&bi(zle,qe.ownerDocument.doctype.name)&&(hr="<!DOCTYPE "+qe.ownerDocument.doctype.name+`>
`+hr),Qe&&(hr=Bs(hr,Q," "),hr=Bs(hr,Z," "),hr=Bs(hr,W," ")),z&&he?z.createHTML(hr):hr},e.setConfig=function(pt){Hi(pt),Ut=!0},e.clearConfig=function(){fi=null,Ut=!1},e.isValidAttribute=function(pt,ue,qe){fi||Hi({});var rt=ur(pt),Dt=ur(ue);return Ri(rt,Dt,qe)},e.addHook=function(pt,ue){typeof ue=="function"&&(M[pt]=M[pt]||[],vm(M[pt],ue))},e.removeHook=function(pt){if(M[pt])return NI(M[pt])},e.removeHooks=function(pt){M[pt]&&(M[pt]=[])},e.removeAllHooks=function(){M={}},e}var Cq=kq();let x5=null,Oq=!0;function qle(t){Oq=t}function Hle(){if(!x5){const t=window.AudioContext||window.webkitAudioContext;x5=new t}return x5}function Pt(t,e,r="sine",n=.15){if(Oq)try{const i=Hle(),a=i.createOscillator(),s=i.createGain();a.type=r,a.frequency.setValueAtTime(t,i.currentTime),s.gain.setValueAtTime(n,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),a.connect(s),s.connect(i.destination),a.start(i.currentTime),a.stop(i.currentTime+e)}catch{}}const Si={xpGain:()=>{Pt(600,.1,"sine",.1),setTimeout(()=>Pt(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Pt(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{Pt(1200,.15,"sine",.08),setTimeout(()=>Pt(1500,.12,"sine",.06),100),setTimeout(()=>Pt(1800,.2,"triangle",.05),180)},questAccept:()=>{Pt(440,.15,"square",.06),setTimeout(()=>Pt(660,.2,"square",.06),120)},questDeploy:()=>{Pt(880,.12,"sawtooth",.05),setTimeout(()=>Pt(660,.12,"sawtooth",.05),100),setTimeout(()=>Pt(550,.2,"sawtooth",.04),200)},equip:()=>{Pt(200,.05,"square",.1),setTimeout(()=>Pt(400,.08,"sine",.08),50)},salvage:()=>{Pt(300,.15,"sawtooth",.06),setTimeout(()=>Pt(200,.2,"sawtooth",.04),100),setTimeout(()=>Pt(100,.3,"sawtooth",.03),200)},craft:()=>{Pt(150,.08,"square",.1),setTimeout(()=>Pt(800,.2,"triangle",.08),60)},error:()=>{Pt(200,.15,"square",.08),setTimeout(()=>Pt(150,.2,"square",.06),120)},messageSend:()=>{Pt(500,.06,"sine",.05)},notification:()=>{Pt(800,.1,"sine",.06),setTimeout(()=>Pt(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>Pt(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{Pt(523,.12,"sine",.08),setTimeout(()=>Pt(659,.12,"sine",.07),100),setTimeout(()=>Pt(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>Pt(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{Pt(523,.15,"triangle",.1),setTimeout(()=>Pt(784,.15,"triangle",.1),120),setTimeout(()=>Pt(1047,.3,"sine",.12),240)},skillUnlock:()=>{Pt(300,.1,"sawtooth",.06),setTimeout(()=>Pt(600,.1,"sawtooth",.06),80),setTimeout(()=>Pt(900,.15,"sine",.08),160)},bossHit:()=>{Pt(100,.1,"square",.12),setTimeout(()=>Pt(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>Pt(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{Pt(1200,.08,"sine",.08),setTimeout(()=>Pt(1600,.1,"sine",.06),60),setTimeout(()=>Pt(2e3,.15,"triangle",.04),120)},partyJoin:()=>{Pt(440,.1,"sine",.06),setTimeout(()=>Pt(554,.1,"sine",.06),80),setTimeout(()=>Pt(659,.15,"sine",.05),160)},chestOpen:()=>{Pt(200,.15,"square",.06),setTimeout(()=>Pt(300,.1,"square",.05),100),setTimeout(()=>Pt(500,.1,"triangle",.06),200),setTimeout(()=>Pt(800,.2,"sine",.08),350)}},Gle=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:i,classType:a})=>{const s=V.useRef(Vv()),c=V.useRef(Date.now()),d=V.useRef(t),[f,m]=V.useState(!0),[p,y]=V.useState(0),[b,T]=V.useState(!1),[S,w]=V.useState(null),[N,I]=V.useState(0),[C,z]=V.useState(0),O=V.useRef(null),B=V.useRef(null),E=V.useRef(null),A=V.useRef(new Set),[R,F]=V.useState(!1);V.useEffect(()=>{d.current=t},[t]);const D=V.useCallback(()=>{c.current=Date.now(),f||m(!0)},[f]);V.useEffect(()=>{const M=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),f||m(!0)):f&&m(!1)},1e3);return()=>clearInterval(M)},[f]),V.useEffect(()=>{const M=["mousemove","keydown","scroll","click"];return M.forEach(Q=>window.addEventListener(Q,D)),()=>M.forEach(Q=>window.removeEventListener(Q,D))},[D]),V.useEffect(()=>()=>{d.current(s.current)},[]),V.useEffect(()=>{if(!n||!i)return;const M=async Q=>{var ye,oe,X,ne,de,J,le,pe;const Z=O.current;if(!Z)return;const W=Z.src?new URL(Z.src).origin:"";if(Q.origin!==window.location.origin&&Q.origin!==W)return;const ee=Q.origin,Y=Q.data;if(!(!Y||typeof Y!="object"||!((ye=Y.type)!=null&&ye.startsWith("portal-"))))switch(D(),Y.type){case"portal-ready":{T(!0);try{const be=await Ti(ft(Ve,"practice_progress",`${n}_${i}`)),Je=be.exists()?be.data():null,Ne=Je?{state:Je.state||null,currentQuestion:Je.currentQuestion??0}:null,ce=(Je==null?void 0:Je.answeredQuestions)||[];ce.forEach(Ce=>A.current.add(Ce)),I(ce.length),(oe=Z.contentWindow)==null||oe.postMessage({type:"portal-init",payload:{userId:n,savedState:Ne}},ee)}catch(be){console.error("Bridge: Failed to load saved state",be),(X=Z.contentWindow)==null||X.postMessage({type:"portal-init",payload:{userId:n,savedState:null}},ee)}break}case"portal-save":{const{state:be,currentQuestion:Je}=Y.payload||{};if(!be)break;try{await Ji(ft(Ve,"practice_progress",`${n}_${i}`),{userId:n,assignmentId:i,state:be,currentQuestion:Je??0,answeredQuestions:Array.from(A.current),lastUpdated:new Date().toISOString()},{merge:!0}),(ne=Z.contentWindow)==null||ne.postMessage({type:"portal-save-ok"},ee)}catch(Ne){console.error("Bridge: Save failed",Ne),(de=Z.contentWindow)==null||de.postMessage({type:"portal-save-error"},ee)}break}case"portal-answer":{const{questionId:be,correct:Je,attempts:Ne}=Y.payload||{};if(!be)break;if(Je&&!A.current.has(be)){A.current.add(be),I(Ce=>Ce+1);const ce=Ne===1?15:10;try{const Ee=(await bF({assignmentId:i,questionId:be,xpAmount:ce,classType:a||"Uncategorized"})).data;if(Ee.awarded){const ct=Ee.serverXP||ce;z(Qe=>Qe+ct),w({text:`+${ct} XP`,type:"success"}),Si.xpGain(),setTimeout(()=>w(null),2e3)}(J=Z.contentWindow)==null||J.postMessage({type:"portal-xp-result",payload:{questionId:be,awarded:Ee.awarded,xp:Ee.serverXP||ce}},ee)}catch(Ce){console.error("Bridge: XP award failed",Ce),(le=Z.contentWindow)==null||le.postMessage({type:"portal-xp-result",payload:{questionId:be,awarded:!1,xp:0}},ee)}}else Je&&((pe=Z.contentWindow)==null||pe.postMessage({type:"portal-xp-result",payload:{questionId:be,awarded:!1,xp:0}},ee));break}}};return window.addEventListener("message",M),()=>window.removeEventListener("message",M)},[n,i,a,D]);const L=V.useCallback(()=>{const M=E.current;M&&(document.fullscreenElement?document.exitFullscreen():M.requestFullscreen().catch(()=>{F(Q=>!Q)}))},[]);return V.useEffect(()=>{const M=()=>F(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",M),()=>document.removeEventListener("fullscreenchange",M)},[]),V.useEffect(()=>{if(B.current&&r){const M=r.replace(/\$(.*?)\$/g,(Q,Z)=>{try{return Yv.renderToString(Z,{throwOnError:!1})}catch{return Z}});B.current.innerHTML=Cq.sanitize(M,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${f?"text-green-400":"text-yellow-500"}`,children:[f?u.jsx(k8,{className:"w-4 h-4"}):u.jsx(xs,{className:"w-4 h-4 animate-pulse"}),f?"Active Session":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(p/60),"m ",p%60,"s"]}),b&&N>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[u.jsx(Tn,{className:"w-3 h-3"})," ",N," answered"]}),b&&C>0&&u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[u.jsx(Hn,{className:"w-3 h-3"})," ",C," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[e&&u.jsxs("button",{onClick:L,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:R?"Exit full screen (Esc)":"Full screen",children:[R?u.jsx(TF,{className:"w-3 h-3"}):u.jsx(xT,{className:"w-3 h-3"}),R?"Exit Full Screen":"Full Screen"]}),b&&u.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[u.jsx(Hn,{className:"w-3 h-3"})," XP Linked"]}),!f&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(ws,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&u.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:u.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?u.jsx(Tn,{className:"w-4 h-4"}):u.jsx(_p,{className:"w-4 h-4"}),S.text]})}),u.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?u.jsx("div",{ref:E,className:"flex-1 flex flex-col bg-white",children:u.jsx("iframe",{ref:O,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:D})}):u.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:u.jsxs("div",{className:"text-center",children:[u.jsx(Sp,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),u.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&u.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[u.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[u.jsx(xT,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),u.jsx("div",{ref:B,className:"proctor-content text-sm leading-relaxed"})]})]})]})},Kle=()=>{const[t,e]=V.useState(!1),[r,n]=V.useState(null),i=async()=>{e(!0),n(null);try{await QZ(yT,Fie)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},a=r&&r.includes("api-key-not-valid");return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[u.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:u.jsxs("div",{className:"p-10 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&u.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(ws,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"break-words",children:[u.jsx("strong",{children:"Login Failed:"})," ",r]})]}),a&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[u.jsx(Iae,{className:"w-4 h-4"}),"Action Required:"]}),u.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",u.jsx("code",{children:"lib/firebase.ts"})," and replace",u.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),u.jsx("button",{onClick:i,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Sign in with Google"})]})}),u.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),u.jsx("span",{children:""}),u.jsx("span",{children:"Firebase Auth"})]})]})})]})},Iq=V.createContext(null),uu=()=>{const t=V.useContext(Iq);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},Wle=({children:t})=>{const[e,r]=V.useState({isOpen:!1,options:{message:""}}),n=V.useRef(null),i=V.useRef(null),a=V.useCallback(m=>new Promise(p=>{n.current=p,r({isOpen:!0,options:m})}),[]),s=V.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!0),n.current=null,r(p=>({...p,isOpen:!1}))},[]),c=V.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!1),n.current=null,r(p=>({...p,isOpen:!1}))},[]);V.useEffect(()=>{if(e.isOpen){const m=setTimeout(()=>{var p;(p=i.current)==null||p.focus()},50);return()=>clearTimeout(m)}},[e.isOpen]),V.useEffect(()=>{if(!e.isOpen)return;const m=p=>{p.key==="Escape"&&c(),p.key==="Enter"&&s()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,f={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return u.jsxs(Iq.Provider,{value:{confirm:a},children:[t,e.isOpen&&u.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),u.jsxs("div",{className:`relative bg-gray-900 border ${f.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[u.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[u.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${f.icon} shrink-0`,children:u.jsx(ws,{className:"w-5 h-5"})}),u.jsxs("div",{children:[e.options.title&&u.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),u.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),u.jsx("button",{ref:i,onClick:s,className:`flex-1 py-2.5 ${f.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),u.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},RI={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:u.jsx(_F,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:u.jsx(ws,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:u.jsx(Gae,{className:"w-4 h-4"})}},Xle=({announcements:t,studentIds:e})=>{const{confirm:r}=uu(),n=Vi(),[i,a]=V.useState(!1),[s,c]=V.useState(""),[d,f]=V.useState(""),[m,p]=V.useState("INFO"),[y,b]=V.useState("GLOBAL"),T=async()=>{if(!(!s.trim()||!d.trim()))try{await Fe.createAnnouncement({title:s.trim(),content:d.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN"}),await Fe.notifyUsers(e,"ANNOUNCEMENT",s.trim(),d.trim().slice(0,100)),c(""),f(""),a(!1),n.success("Announcement broadcast sent.")}catch{n.error("Failed to create announcement.")}},S=async w=>{await r({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Fe.deleteAnnouncement(w)};return u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(wT,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[u.jsx(Ol,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?u.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[u.jsx(wT,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(w=>{const N=RI[w.priority]||RI.INFO;return u.jsxs("div",{className:`p-3 ${N.bg} border ${N.border} rounded-xl flex justify-between items-start`,children:[u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:`mt-0.5 ${N.text}`,children:N.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-white",children:w.title}),u.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.content}),u.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[w.classType==="GLOBAL"?"All Classes":w.classType,"  ",new Date(w.createdAt).toLocaleDateString()]})]})]}),u.jsx("button",{onClick:()=>S(w.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:u.jsx($i,{className:"w-3.5 h-3.5"})})]},w.id)})}),u.jsx(Ka,{isOpen:i,onClose:()=>a(!1),title:"New Announcement",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),u.jsx("input",{type:"text",value:s,onChange:w=>c(w.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),u.jsx("textarea",{value:d,onChange:w=>f(w.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),u.jsxs("select",{value:m,onChange:w=>p(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"INFO",children:"Info"}),u.jsx("option",{value:"WARNING",children:"Warning"}),u.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),u.jsxs("select",{value:y,onChange:w=>b(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Cr).filter(w=>w!=="Uncategorized").map(w=>u.jsx("option",{value:w,children:w},w))]})]})]}),u.jsx("button",{onClick:T,disabled:!s.trim()||!d.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},MI=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],Qle=["I","II","III","IV","V"],Yle=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Sh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,MI.length-1),i=MI[n]||"Unknownium",a=Qle[r],s=n+1,c=Yle(s);return{rankName:`${i} ${a}`,tierColor:c.color,tierGlow:c.glow}},Fu={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50},PI=t=>{const e=t.affixes.reduce((i,a)=>i+a.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},tE=t=>{var i;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((i=t.gamification)!=null&&i.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(a=>{a.stats&&Object.entries(a.stats).forEach(([s,c])=>{e[s]+=c})}),e},Th=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let i=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&i.length===0&&(i=[10]);const a=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=a*10+s}),Math.floor(e))},Xr=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function k0(t,e){var i;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(i=r.classProfiles)==null?void 0:i[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const Zle=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:i})=>{var I,C,z,O,B,E,A,R,F,D;const a=((I=t.gamification)==null?void 0:I.level)||1,s=((C=t.gamification)==null?void 0:C.xp)||0,c=((z=t.gamification)==null?void 0:z.currency)||0,d=Sh(a),f=tE(t),m=t.enrolledClasses||(t.classType?[t.classType]:[]),p=((B=(O=t.gamification)==null?void 0:O.completedQuests)==null?void 0:B.length)||0,y=((A=(E=t.gamification)==null?void 0:E.activeQuests)==null?void 0:A.filter(L=>L.status==="ACCEPTED"||L.status==="DEPLOYED").length)||0,b=V.useMemo(()=>m.map(L=>{var ye,oe;const M=((oe=(ye=t.gamification)==null?void 0:ye.classXp)==null?void 0:oe[L])||0,Q=k0(t,L),Z=Th(Q.equipped),W=Q.inventory.length,ee=e.filter(X=>{const ne=r.find(de=>de.id===X.assignmentId);return(ne==null?void 0:ne.classType)===L}),Y=Math.round(ee.reduce((X,ne)=>{var de;return X+(((de=ne.metrics)==null?void 0:de.engagementTime)||0)},0)/60);return{cls:L,classXp:M,gearScore:Z,inventoryCount:W,resourcesViewed:ee.length,totalTime:Y}}),[t,e,r,m]),T=V.useMemo(()=>e.filter(L=>L.submittedAt).sort((L,M)=>new Date(M.submittedAt).getTime()-new Date(L.submittedAt).getTime()).slice(0,10).map(L=>{var M,Q;return{...L,assignmentTitle:((M=r.find(Z=>Z.id===L.assignmentId))==null?void 0:M.title)||L.assignmentTitle,classType:((Q=r.find(Z=>Z.id===L.assignmentId))==null?void 0:Q.classType)||"Unknown"}}),[e,r]),S=Math.round(e.reduce((L,M)=>{var Q;return L+(((Q=M.metrics)==null?void 0:Q.engagementTime)||0)},0)/60),w=V.useMemo(()=>{const L=new Set;e.forEach(Y=>{if(Y.submittedAt){const ye=new Date(Y.submittedAt),oe=ye.getFullYear(),X=new Date(oe,0,1),ne=Math.ceil(((ye.getTime()-X.getTime())/864e5+X.getDay()+1)/7);L.add(`${oe}-W${ne}`)}});const M=new Date,Q=M.getFullYear(),Z=new Date(Q,0,1),W=Math.ceil(((M.getTime()-Z.getTime())/864e5+Z.getDay()+1)/7);let ee=0;for(let Y=W;Y>0&&L.has(`${Q}-W${Y}`);Y--)ee++;return ee},[e]),N=V.useMemo(()=>{const L=[],M=new Date;for(let oe=6;oe>=0;oe--){const X=new Date(M);X.setDate(X.getDate()-oe);const ne=X.toISOString().split("T")[0],de=e.filter(le=>{var pe;return(pe=le.submittedAt)==null?void 0:pe.startsWith(ne)}),J=de.reduce((le,pe)=>{var be;return le+(((be=pe.metrics)==null?void 0:be.engagementTime)||0)},0);L.push({label:X.toLocaleDateString([],{weekday:"short"}),time:Math.round(J/60),subs:de.length})}const Q=L.slice(4).reduce((oe,X)=>oe+X.time,0),Z=L.slice(0,4).reduce((oe,X)=>oe+X.time,0),W=Q/3,ee=Z/4,Y=W>ee*1.2?"up":W<ee*.6?"down":"flat",ye=Math.max(1,...L.map(oe=>oe.time));return{days:L,trend:Y,maxTime:ye}},[e]);return u.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:i}),u.jsxs("div",{className:"relative w-full max-w-lg bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[u.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${d.tierGlow} shadow-xl`,children:t.avatarUrl?u.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${d.tierColor.split(" ")[0]}`}):u.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${d.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${d.tierColor.split(" ")[1]}`,children:d.rankName}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",a]})]}),((R=t.gamification)==null?void 0:R.codename)&&u.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),u.jsx("button",{onClick:i,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:u.jsx(Ya,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(Hn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:s.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(xs,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[S,"m"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(Xs,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(bT,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:p}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(UO,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:c}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(O8,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[w,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),u.jsx("div",{className:"space-y-2",children:Object.entries(f).map(([L,M])=>u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:L}),u.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,M)}%`}})}),u.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:M})]},L))})]}),n.length>0&&(()=>{const L=n[0],M=Xu[L.bucket];return M?u.jsxs("div",{className:`border rounded-2xl p-4 ${M.borderColor} ${M.bgColor}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),u.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${M.color} border ${M.borderColor}`,children:M.label})]}),u.jsx("p",{className:"text-xs text-gray-300 mb-3",children:M.description}),u.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[u.jsxs("span",{children:["ES: ",L.engagementScore]}),u.jsxs("span",{children:["Subs: ",L.metrics.submissionCount]}),u.jsxs("span",{children:["Days Active: ",L.metrics.activityDays,"/7"]}),u.jsxs("span",{children:["Paste Ratio: ",Math.round(L.metrics.avgPasteRatio*100),"%"]}),u.jsxs("span",{children:["Time: ",Math.round(L.metrics.totalTime/60),"m"]})]}),u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[u.jsx(SF,{className:"w-3.5 h-3.5 text-amber-400"}),u.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),u.jsx("p",{className:"text-xs text-gray-300 mb-2",children:L.recommendation.action}),u.jsx("div",{className:"flex flex-wrap gap-1.5",children:L.recommendation.categories.map(Q=>u.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:Q},Q))})]}),(()=>{const Q=r.filter(Z=>Z.classType===L.classType&&Z.status==="ACTIVE"&&L.recommendation.categories.includes(Z.category||"Supplemental")).slice(0,3);return Q.length===0?null:u.jsxs("div",{className:"mt-3",children:[u.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),u.jsx("div",{className:"space-y-1",children:Q.map(Z=>u.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[u.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:Z.category}),u.jsx("span",{className:"text-white truncate",children:Z.title})]},Z.id))})]})})()]}):null})(),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),u.jsxs("div",{className:"flex items-center gap-1",children:[N.trend==="up"&&u.jsx(M8,{className:"w-3.5 h-3.5 text-green-400"}),N.trend==="down"&&u.jsx(nse,{className:"w-3.5 h-3.5 text-red-400"}),N.trend==="flat"&&u.jsx(Fae,{className:"w-3.5 h-3.5 text-gray-400"}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${N.trend==="up"?"text-green-400":N.trend==="down"?"text-red-400":"text-gray-400"}`,children:N.trend==="up"?"Trending Up":N.trend==="down"?"Declining":"Stable"})]})]}),u.jsx("div",{className:"flex items-end gap-1 h-16",children:N.days.map((L,M)=>{const Q=N.maxTime>0?Math.max(2,L.time/N.maxTime*100):2,Z=M===N.days.length-1;return u.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[u.jsx("div",{className:`w-full rounded-t transition-all ${L.time>0?Z?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${Q}%`}}),u.jsx("span",{className:"text-[8px] text-gray-500",children:L.label}),u.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[L.time,"m  ",L.subs," sub",L.subs!==1?"s":""]})]},M)})})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),u.jsx("div",{className:"space-y-3",children:b.map(L=>u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:L.cls}),u.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[L.classXp.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[u.jsxs("span",{children:[u.jsx(vs,{className:"w-3 h-3 inline mr-0.5"}),L.gearScore," GS"]}),u.jsxs("span",{children:[u.jsx(UO,{className:"w-3 h-3 inline mr-0.5"}),L.inventoryCount," items"]}),u.jsxs("span",{children:[u.jsx(Xs,{className:"w-3 h-3 inline mr-0.5"}),L.resourcesViewed," viewed"]}),u.jsxs("span",{children:[u.jsx(xs,{className:"w-3 h-3 inline mr-0.5"}),L.totalTime,"m"]})]})]},L.cls))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),T.length===0?u.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):u.jsx("div",{className:"space-y-2",children:T.map(L=>{var Q;const M=Math.round((((Q=L.metrics)==null?void 0:Q.engagementTime)||0)/60);return u.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${M>=5?"bg-green-500":M>=1?"bg-yellow-500":"bg-gray-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs text-white font-bold truncate",children:L.assignmentTitle}),u.jsxs("div",{className:"text-[10px] text-gray-500",children:[L.classType,"  ",M,"m engaged"]})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:L.submittedAt?new Date(L.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},L.id)})})]}),y>0&&u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),u.jsx("div",{className:"space-y-2",children:(D=(F=t.gamification)==null?void 0:F.activeQuests)==null?void 0:D.filter(L=>L.status==="ACCEPTED"||L.status==="DEPLOYED").map(L=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(bT,{className:`w-3.5 h-3.5 ${L.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),u.jsx("span",{className:"text-xs text-white",children:L.questId})]}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${L.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:L.status})]},L.questId))})]}),u.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[u.jsxs("div",{children:["Email: ",t.email]}),u.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),u.jsxs("div",{children:["Enrolled: ",m.join(", ")||"None"]}),u.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),u.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&u.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})]})},Jle=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=uu(),[i,a]=V.useState(null),[s,c]=V.useState([]),[d,f]=V.useState([]),[m,p]=V.useState([]),[y,b]=V.useState([]),[T,S]=V.useState(Date.now()),[w,N]=V.useState(null),[I,C]=V.useState("xp"),[z,O]=V.useState("desc"),B=J=>{I===J?O(le=>le==="asc"?"desc":"asc"):(C(J),O("asc"))},E=({label:J,col:le,className:pe})=>u.jsx("th",{className:`cursor-pointer select-none group p-3 ${pe??""}`,onClick:()=>B(le),children:u.jsxs("div",{className:`flex items-center gap-1 ${pe!=null&&pe.includes("text-center")?"justify-center":pe!=null&&pe.includes("text-right")?"justify-end":"justify-start"}`,children:[u.jsx("span",{children:J}),u.jsxs("span",{className:"flex flex-col gap-px",children:[u.jsx(j8,{className:`w-2.5 h-2.5 -mb-0.5 ${I===le&&z==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),u.jsx(Ea,{className:`w-2.5 h-2.5 -mt-0.5 ${I===le&&z==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});V.useEffect(()=>{const J=Fe.subscribeToChatFlags(c),le=Fe.subscribeToAnnouncements(f),pe=Fe.subscribeToStudentAlerts(p),be=Fe.subscribeToStudentBuckets(b),Je=setInterval(()=>S(Date.now()),6e4);return()=>{J(),le(),pe(),be(),clearInterval(Je)}},[]);const A=t.filter(J=>J.role==="STUDENT"),R=V.useMemo(()=>{const J=new Map;for(const le of m){const pe=J.get(le.studentId),be={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!pe||(be[le.riskLevel]||0)>(be[pe.riskLevel]||0))&&J.set(le.studentId,le)}return J},[m]),F=V.useMemo(()=>{const J=new Map;for(const le of y)J.has(le.studentId)||J.set(le.studentId,le);return J},[y]),D=V.useMemo(()=>{const J={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},le=new Set;for(const pe of y)le.has(pe.studentId)||(le.add(pe.studentId),J[pe.bucket]!==void 0&&J[pe.bucket]++);return J},[y]),L=A.length,M=Math.round(A.reduce((J,le)=>{var pe;return J+(((pe=le.stats)==null?void 0:pe.totalTime)||0)},0)/(L||1)),Q=A.reduce((J,le)=>{var pe;return J+(((pe=le.stats)==null?void 0:pe.problemsCompleted)||0)},0),Z=A.reduce((J,le)=>{var pe;return J+(((pe=le.gamification)==null?void 0:pe.xp)||0)},0),W=A.filter(J=>J.mutedUntil&&new Date(J.mutedUntil).getTime()>T),ee=async J=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Fe.muteUser(J,0)},Y=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Fe.INDEFINITE_MUTE}],ye=async(J,le)=>{await Fe.muteUser(J,le),N(null)},oe=async(J,le)=>{const pe=new Date(le).getTime(),be=new Date(Math.max(pe,Date.now())+3600*1e3),Je=Math.ceil((be.getTime()-Date.now())/6e4);await Fe.muteUser(J,Je)},X=({label:J,value:le,icon:pe,color:be})=>u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[u.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${be}`,children:pe}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:le}),u.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:J})]}),u.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${be}`})]}),ne=J=>{const pe=new Date(J).getTime()-T;if(pe<=0)return"Expired";const be=Math.ceil(pe/6e4);return be>60?`${Math.ceil(be/60)} hrs`:`${be} mins`},de=J=>{if(!J)return"Never";const le=new Date(J),pe=Date.now()-le.getTime(),be=Math.floor(pe/6e4);if(be<1)return"Just now";if(be<60)return`${be}m ago`;const Je=Math.floor(be/60);return Je<24?`${Je}h ago`:le.toLocaleDateString()};return u.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[u.jsx("div",{className:"flex justify-between items-end",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),u.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(X,{label:"Total Students",value:L,icon:u.jsx(tu,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),u.jsx(X,{label:"Total XP Awarded",value:Z.toLocaleString(),icon:u.jsx(Hn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),u.jsx(X,{label:"Resources Viewed",value:Q,icon:u.jsx(C8,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),u.jsx(X,{label:"Avg Active Time",value:`${M}m`,icon:u.jsx(xs,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?u.jsx(ws,{className:"w-5 h-5"}):u.jsx(Rx,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(Fv,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):u.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(J=>u.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-bold text-white",children:[J.senderName," ",u.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",J.classType]})]}),u.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',J.content,'"']})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(J.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsxs("button",{onClick:async()=>{await Fe.resolveFlag(J.id),J.messageId&&await Fe.unflagMessage(J.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx(Cg,{className:"w-3 h-3"})," Dismiss"]}),u.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Fe.resolveFlag(J.id),J.messageId&&await Fe.deleteMessage(J.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx($i,{className:"w-3 h-3"})," Delete"]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>N(w===J.id?null:J.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:u.jsx(qv,{className:"w-3 h-3"})}),w===J.id&&u.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[u.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",J.senderName]}),Y.map(le=>u.jsx("button",{onClick:()=>ye(J.senderId,le.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:le.label},le.minutes))]})]})]})]},J.id))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[u.jsx(qv,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),W.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(tu,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[u.jsx("th",{className:"pb-2",children:"Operative"}),u.jsx("th",{className:"pb-2",children:"Remaining"}),u.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:W.map(J=>u.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[u.jsxs("td",{className:"py-3",children:[u.jsx("div",{className:"text-sm font-bold text-white",children:J.name}),u.jsx("div",{className:"text-[10px] text-gray-500",children:J.classType})]}),u.jsx("td",{className:"py-3",children:u.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:ne(J.mutedUntil)})}),u.jsx("td",{className:"py-3 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>oe(J.id,J.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:u.jsx(Hv,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>ee(J.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:u.jsx(Fv,{className:"w-3.5 h-3.5"})})]})})]},J.id))})]})})]})]}),m.length>0&&u.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[u.jsx(MO,{className:"w-5 h-5"}),"Early Warning System"]}),u.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[m.length," Alert",m.length!==1?"s":""]})]}),u.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:m.map(J=>{const le={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},pe={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},be=J.bucket?Xu[J.bucket]:null;return u.jsx("div",{className:`border p-4 rounded-xl ${le[J.riskLevel]||le.LOW}`,children:u.jsxs("div",{className:"flex justify-between items-start gap-3",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[u.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${pe[J.riskLevel]||pe.LOW}`,children:J.riskLevel}),be&&u.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${be.bgColor} ${be.color} ${be.borderColor} border`,children:be.label}),u.jsx("span",{className:"text-sm font-bold text-white truncate",children:J.studentName}),u.jsx("span",{className:"text-[10px] text-gray-500",children:J.classType})]}),u.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:J.message}),be&&u.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:be.description}),u.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[u.jsxs("span",{children:["ES: ",J.engagementScore]}),u.jsxs("span",{children:["Class Avg: ",J.classMean]}),u.jsx("span",{children:new Date(J.createdAt).toLocaleDateString()})]})]}),u.jsxs("div",{className:"flex gap-2 shrink-0",children:[u.jsx("button",{onClick:()=>a(J.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),u.jsx("button",{onClick:async()=>{await Fe.dismissAlert(J.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},J.id)})})]}),y.length>0&&u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(MO,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),u.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Xu).map(J=>{const le=Xu[J],pe=D[J];return u.jsxs("div",{className:`border rounded-xl p-3 ${le.borderColor} ${le.bgColor} transition hover:scale-[1.02]`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("span",{className:`text-xs font-bold ${le.color}`,children:le.label}),u.jsx("span",{className:"text-lg font-bold text-white",children:pe})]}),u.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:le.description})]},J)})}),(()=>{const J=Object.values(D).reduce((le,pe)=>le+pe,0);return J===0?null:u.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Xu).map(le=>{const pe=D[le]/J*100;if(pe===0)return null;const be={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return u.jsx("div",{className:`${be[le]||"bg-gray-500"} transition-all`,style:{width:`${pe}%`},title:`${Xu[le].label}: ${D[le]} (${Math.round(pe)}%)`},le)})})})()]}),u.jsx("div",{className:"mt-8",children:u.jsx(Xle,{announcements:d,studentIds:A.map(J=>J.id)})}),u.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[u.jsx(E,{label:"Student",col:"name"}),u.jsx(E,{label:"Class",col:"class"}),u.jsx(E,{label:"Last Seen",col:"lastSeen",className:"text-center"}),u.jsx(E,{label:"Total Time",col:"time",className:"text-center"}),u.jsx(E,{label:"Resources",col:"resources",className:"text-center"}),u.jsx(E,{label:"XP",col:"xp",className:"text-right"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const J=[...A].sort((pe,be)=>{var Je,Ne,ce,Ce,Ee,ct;switch(I){case"name":return z==="asc"?pe.name.localeCompare(be.name):be.name.localeCompare(pe.name);case"class":return z==="asc"?(pe.classType||"").localeCompare(be.classType||""):(be.classType||"").localeCompare(pe.classType||"");case"lastSeen":{const Qe=pe.lastLoginAt?new Date(pe.lastLoginAt).getTime():0,ut=be.lastLoginAt?new Date(be.lastLoginAt).getTime():0;return z==="asc"?Qe-ut:ut-Qe}case"time":{const Qe=((Je=pe.stats)==null?void 0:Je.totalTime)||0,ut=((Ne=be.stats)==null?void 0:Ne.totalTime)||0;return z==="asc"?Qe-ut:ut-Qe}case"resources":{const Qe=((ce=pe.stats)==null?void 0:ce.problemsCompleted)||0,ut=((Ce=be.stats)==null?void 0:Ce.problemsCompleted)||0;return z==="asc"?Qe-ut:ut-Qe}case"xp":default:{const Qe=((Ee=pe.gamification)==null?void 0:Ee.xp)||0,ut=((ct=be.gamification)==null?void 0:ct.xp)||0;return z==="asc"?Qe-ut:ut-Qe}}}),le=Math.max(1,...A.map(pe=>{var be;return((be=pe.gamification)==null?void 0:be.xp)||0}));return J.map(pe=>{var Ut,Oe,st;const be=((Ut=pe.gamification)==null?void 0:Ut.xp)||0,Je=Math.round(be/le*100),Ne=pe.lastLoginAt,ce=Ne?Date.now()-new Date(Ne).getTime():1/0,Ce=ce<36e5?"text-green-400":ce<864e5?"text-yellow-400":ce<1/0?"text-red-400":"text-gray-600",Ee=ce<36e5?"bg-green-500":ce<864e5?"bg-yellow-500":ce<1/0?"bg-red-500":"bg-gray-600",ct=R.get(pe.id),Qe={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ut=F.get(pe.id),dt=ut?Xu[ut.bucket]:null;return u.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(ct==null?void 0:ct.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>a(pe.id),children:[u.jsx("td",{className:"p-3 font-bold text-white",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[pe.avatarUrl?u.jsx("img",{src:pe.avatarUrl,alt:pe.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:pe.name.charAt(0)}),u.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Ee}`})]}),u.jsx("span",{className:"truncate max-w-[120px]",children:pe.name}),ct&&Qe[ct.riskLevel]&&u.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${Qe[ct.riskLevel]}`,title:`${ct.riskLevel} risk: ${ct.reason}`}),dt&&u.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${dt.bgColor} ${dt.color} border ${dt.borderColor}`,title:dt.description,children:dt.label})]})}),u.jsx("td",{className:"p-3 text-sm text-gray-400",children:pe.classType}),u.jsx("td",{className:`p-3 text-center text-xs font-mono ${Ce}`,children:de(pe.lastLoginAt)}),u.jsxs("td",{className:"p-3 text-center text-white",children:[((Oe=pe.stats)==null?void 0:Oe.totalTime)||0,"m"]}),u.jsx("td",{className:"p-3 text-center text-white",children:((st=pe.stats)==null?void 0:st.problemsCompleted)||0}),u.jsx("td",{className:"p-3 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Je}%`}})}),u.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:be})]})})]},pe.id)})})()})]})})]}),i&&(()=>{const J=A.find(le=>le.id===i);return J?u.jsx(Zle,{student:J,submissions:r.filter(le=>le.userId===i),assignments:e,bucketProfiles:y.filter(le=>le.studentId===i),onClose:()=>a(null)}):null})()]})},ece=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const i=Vi(),{confirm:a}=uu(),[s,c]=V.useState(new Set),[d,f]=V.useState(Cr.AP_PHYSICS),[m,p]=V.useState(!1),[y,b]=V.useState(!1),[T,S]=V.useState({}),w=(re,De)=>{S(We=>{const tt=We[re]||{col:"name",dir:"asc"};return{...We,[re]:{col:De,dir:tt.col===De&&tt.dir==="asc"?"desc":"asc"}}})},N=({label:re,col:De,type:We,className:tt})=>{const Ze=T[We]||{col:"name",dir:"asc"},Ke=Ze.col===De;return u.jsx("th",{className:`cursor-pointer select-none group p-4 ${tt??""}`,onClick:()=>w(We,De),children:u.jsxs("div",{className:`flex items-center gap-1 ${tt!=null&&tt.includes("text-center")?"justify-center":"justify-start"}`,children:[u.jsx("span",{children:re}),u.jsxs("span",{className:"flex flex-col gap-px",children:[u.jsx(j8,{className:`w-2.5 h-2.5 -mb-0.5 ${Ke&&Ze.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),u.jsx(Ea,{className:`w-2.5 h-2.5 -mt-0.5 ${Ke&&Ze.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[I,C]=V.useState(""),[z,O]=V.useState(Cr.AP_PHYSICS),[B,E]=V.useState(""),[A,R]=V.useState(""),[F,D]=V.useState(!1),[L,M]=V.useState(!1),[Q,Z]=V.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[W,ee]=V.useState(10),[Y,ye]=V.useState("single"),[oe,X]=V.useState([]),[ne,de]=V.useState(!1),J=V.useRef(null),le=t.filter(re=>re.role==="STUDENT"),pe=V.useMemo(()=>e.filter(re=>!t.some(De=>De.email.toLowerCase()===re.email.toLowerCase())),[e,t]),be=V.useMemo(()=>[...Array.from(new Set([...Object.values(Cr).filter(De=>De!==Cr.UNCATEGORIZED),...r.map(De=>De.className)])).sort(),Cr.UNCATEGORIZED],[r]),Je=re=>{const De=le.filter(Ze=>{var Ke,wt;return((Ke=Ze.enrolledClasses)==null?void 0:Ke.includes(re))||re===Cr.UNCATEGORIZED&&(((wt=Ze.enrolledClasses)==null?void 0:wt.length)===0||!Ze.enrolledClasses)}),We=De.every(Ze=>s.has(Ze.id)),tt=new Set(s);De.forEach(Ze=>{We?tt.delete(Ze.id):tt.add(Ze.id)}),c(tt)},Ne=re=>{const De=new Set(s);De.has(re)?De.delete(re):De.add(re),c(De)},ce=async()=>{if(s.size>0){const re=Array.from(s).map(async De=>{const We=t.find(tt=>tt.id===De);if(We){const tt=We.enrolledClasses||[],Ze=Array.from(new Set([...tt.filter(Ke=>Ke!==Cr.UNCATEGORIZED),d]));await Fe.updateUserEnrolledClasses(De,Ze)}});await Promise.all(re),c(new Set)}},Ce=async re=>{if(s.size>0){if(!await a({message:`Remove ${s.size} students from ${re}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const De=Array.from(s).map(async We=>{const tt=t.find(Ze=>Ze.id===We);if(tt){const Ke=(tt.enrolledClasses||[]).filter(wt=>wt!==re);await Fe.updateUserEnrolledClasses(We,Ke)}});await Promise.all(De),c(new Set)}},Ee=async(re,De)=>{if(await a({message:`Remove ${re.name} from ${De}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const tt=(re.enrolledClasses||[]).filter(Ze=>Ze!==De);await Fe.updateUserEnrolledClasses(re.id,tt)}},ct=async(re,De)=>{await a({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${De}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Fe.removeUser(re)},Qe=async re=>{re!==Cr.UNCATEGORIZED&&await a({message:`Delete group config ${re}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Fe.deleteClassConfig(re)},ut=async re=>{await a({message:`Cancel invite for ${re}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Fe.removeFromWhitelist(re)},dt=(re,De)=>{re!==Cr.UNCATEGORIZED&&(R(re),D(!0),De?(Z(De.features),ee(De.xpPerMinute||10)):(Z({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),ee(10)),b(!0))},Ut=re=>{re.preventDefault(),n(I,z),B.trim()&&Fe.updateWhitelistSection(I,B.trim()),C(""),E(""),p(!1)},Oe=re=>{var tt;const De=(tt=re.target.files)==null?void 0:tt[0];if(!De)return;const We=new FileReader;We.onload=Ze=>{var Kt,Qt;const Ke=(Kt=Ze.target)==null?void 0:Kt.result;if(!Ke)return;const wt=Ke.split(/\r?\n/).filter(Wt=>Wt.trim()),Tt=(Qt=wt[0])!=null&&Qt.toLowerCase().includes("email")?1:0,hi=new Set(e.map(Wt=>Wt.email.toLowerCase())),Nn=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,jn=wt.slice(Tt).map(Wt=>{const ki=Wt.includes("	")?Wt.split("	"):Wt.split(","),Fi=(ki[0]||"").trim().toLowerCase(),Ja=(ki[1]||"").trim()||Cr.AP_PHYSICS,qi=(ki[2]||"").trim();let Vr="pending";return Nn.test(Fi)?hi.has(Fi)&&(Vr="duplicate"):Vr="invalid",{email:Fi,classType:Ja,section:qi,status:Vr}}).filter(Wt=>Wt.email.length>0);X(jn)},We.readAsText(De),re.target.value=""},st=async()=>{const re=oe.filter(We=>We.status==="pending");if(re.length===0)return;de(!0);let De=0;for(const We of re)try{await Fe.addToWhitelist(We.email,We.classType),We.section&&await Fe.updateWhitelistSection(We.email,We.section),We.status="success",De++}catch{We.status="invalid"}X([...oe]),de(!1),i.success(`${De} operative${De!==1?"s":""} imported successfully.`),oe.every(We=>We.status==="success"||We.status==="duplicate")&&setTimeout(()=>{p(!1),X([]),ye("single")},1500)},yt=async re=>{if(re.preventDefault(),!!A){M(!0);try{await Fe.saveClassConfig({id:A,className:A,features:Q,xpPerMinute:W}),R(""),b(!1),D(!1)}catch(De){console.error("Failed to save config:",De),i.error("Failed to save class configuration.")}finally{M(!1)}}},he=re=>{if(!re)return"Never";const De=new Date(re),We=Date.now()-De.getTime(),tt=Math.floor(We/6e4);if(tt<60)return`${tt}m ago`;const Ze=Math.floor(tt/60);return Ze<24?`${Ze}h ago`:De.toLocaleDateString()},ze=re=>{const De=re===Cr.UNCATEGORIZED,We=T[re]||{col:"name",dir:"asc"},tt=[...le.filter(Ke=>{var wt;return((wt=Ke.enrolledClasses)==null?void 0:wt.includes(re))||De&&(!Ke.enrolledClasses||Ke.enrolledClasses.length===0)})].sort((Ke,wt)=>{var Tt,hi,Nn,jn;switch(We.col){case"status":{const Kt=Ke.isWhitelisted?1:0,Qt=wt.isWhitelisted?1:0;return We.dir==="asc"?Kt-Qt:Qt-Kt}case"lastSeen":{const Kt=Ke.lastLoginAt?new Date(Ke.lastLoginAt).getTime():0,Qt=wt.lastLoginAt?new Date(wt.lastLoginAt).getTime():0;return We.dir==="asc"?Kt-Qt:Qt-Kt}case"xp":{const Kt=((hi=(Tt=Ke.gamification)==null?void 0:Tt.classXp)==null?void 0:hi[re])||0,Qt=((jn=(Nn=wt.gamification)==null?void 0:Nn.classXp)==null?void 0:jn[re])||0;return We.dir==="asc"?Kt-Qt:Qt-Kt}case"name":default:return We.dir==="asc"?Ke.name.localeCompare(wt.name):wt.name.localeCompare(Ke.name)}}),Ze=r.find(Ke=>Ke.className===re);return u.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${De?"opacity-90":""}`,children:[u.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${De?"bg-orange-500/10":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h3",{className:`font-bold text-lg tracking-wide ${De?"text-orange-300":"text-white"}`,children:[De&&u.jsx(Eae,{className:"w-5 h-5 inline mr-2 mb-1"}),re]}),u.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${De?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[tt.length," Registered"]}),!De&&u.jsx("button",{onClick:()=>dt(re,Ze),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:u.jsx(Ap,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex gap-2",children:[s.size>0&&Array.from(s).some(Ke=>tt.find(wt=>wt.id===Ke))&&u.jsxs("button",{onClick:()=>Ce(re),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[u.jsx(ise,{className:"w-3 h-3"})," Remove Selected"]}),!De&&u.jsxs("button",{onClick:()=>Qe(re),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[u.jsx($i,{className:"w-3 h-3"}),"Config"]})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[u.jsx("th",{className:"w-12 p-4 text-center",children:tt.length>0&&u.jsx("button",{onClick:()=>Je(re),className:"hover:text-purple-400 transition",children:u.jsx(FO,{className:"w-4 h-4"})})}),u.jsx(N,{label:"Operative",col:"name",type:re}),u.jsx(N,{label:"System Status",col:"status",type:re,className:"text-center"}),u.jsx(N,{label:"Last Seen",col:"lastSeen",type:re,className:"text-center"}),u.jsx(N,{label:"Class XP",col:"xp",type:re,className:"text-center"}),u.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:tt.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 italic text-sm",children:De?"No restricted operatives found.":"No students registered in this roster yet."})}):tt.map(Ke=>{var Tt,hi,Nn,jn;const wt=((hi=(Tt=Ke.gamification)==null?void 0:Tt.classXp)==null?void 0:hi[re])||0;return u.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(Ke.id)?"bg-purple-500/10":""}`,children:[u.jsx("td",{className:"p-4 text-center",children:u.jsx("button",{onClick:()=>Ne(Ke.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(Ke.id)?u.jsx(ese,{className:"w-4 h-4 text-purple-500"}):u.jsx(FO,{className:"w-4 h-4 group-hover:text-gray-400"})})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Ke.avatarUrl,alt:Ke.name,className:"w-8 h-8 rounded-full border border-white/10"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Ke.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[Ke.email,Ke.section?`  ${Ke.section}`:""]})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Ke.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Ke.isWhitelisted?u.jsx($O,{className:"w-3 h-3"}):u.jsx(Rx,{className:"w-3 h-3"}),Ke.isWhitelisted?"Authorized":"Restricted"]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[u.jsx(xs,{className:"w-3 h-3"}),he(Ke.lastLoginAt)]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-lg text-purple-300",children:wt.toLocaleString()}),(((Nn=Ke.enrolledClasses)==null?void 0:Nn.length)||0)>1&&u.jsxs("details",{className:"mt-1",children:[u.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),u.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(jn=Ke.enrolledClasses)==null?void 0:jn.map(Kt=>{var Qt,Wt;return u.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[u.jsx("span",{className:`truncate ${Kt===re?"text-purple-400 font-bold":"text-gray-500"}`,children:Kt}),u.jsx("span",{className:"text-gray-400 font-mono",children:(((Wt=(Qt=Ke.gamification)==null?void 0:Qt.classXp)==null?void 0:Wt[Kt])||0).toLocaleString()})]},Kt)})})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsx("div",{className:"flex items-center justify-center gap-2",children:u.jsx("button",{onClick:()=>De?ct(Ke.id,Ke.name):Ee(Ke,re),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:De?"Permanently Delete":"Remove from this Class",children:u.jsx(Ya,{className:"w-4 h-4"})})})})]},Ke.id)})})]})})]},re)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),u.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[u.jsxs("button",{onClick:()=>{R(""),Z({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),D(!1),b(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[u.jsx(Ap,{className:"w-4 h-4"}),"Class Config"]}),u.jsxs("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[u.jsx(qO,{className:"w-4 h-4"}),"Invite Student"]})]})]}),pe.length>0&&u.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[u.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[u.jsx(zae,{className:"w-4 h-4"})," Pending Class Invitations (",pe.length,")"]}),u.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),u.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:pe.map(re=>u.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:re.email}),u.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[u.jsx($O,{className:"w-3 h-3 text-amber-500"}),u.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(re.classTypes||[re.classType]).join(", ")," Access"]})]})]}),u.jsx("button",{onClick:()=>ut(re.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:u.jsx($i,{className:"w-3.5 h-3.5"})})]},re.email))})]}),u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[u.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),u.jsxs("div",{className:"relative w-full sm:w-auto",children:[u.jsx("select",{value:d,onChange:re=>f(re.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:be.filter(re=>re!==Cr.UNCATEGORIZED).map(re=>u.jsxs("option",{value:re,children:["Apply ",re," Access"]},re))}),u.jsx(Ea,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),u.jsxs("button",{onClick:ce,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[u.jsx(Ol,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),u.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),u.jsx("div",{className:"pb-12",children:be.map(re=>ze(re))}),u.jsxs(Ka,{isOpen:m,onClose:()=>{p(!1),X([]),ye("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[u.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[u.jsxs("button",{onClick:()=>{ye("single"),X([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Y==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(qO,{className:"w-3.5 h-3.5"})," Single"]}),u.jsxs("button",{onClick:()=>ye("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Y==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(Ep,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),Y==="single"?u.jsxs("form",{onSubmit:Ut,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),u.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:I,onChange:re=>C(re.target.value),placeholder:"student@gmail.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),u.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:z,onChange:re=>O(re.target.value),children:be.filter(re=>re!==Cr.UNCATEGORIZED).map(re=>u.jsx("option",{value:re,children:re},re))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),u.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:B,onChange:re=>E(re.target.value),placeholder:"e.g. Period 3, Block A"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),u.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[u.jsx("input",{type:"file",ref:J,accept:".csv,.tsv,.txt",onChange:Oe,className:"hidden"}),oe.length===0?u.jsxs(u.Fragment,{children:[u.jsx(Ep,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),u.jsx("button",{onClick:()=>{var re;return(re=J.current)==null?void 0:re.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",u.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),u.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),u.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:u.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",u.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",u.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",u.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):u.jsxs(u.Fragment,{children:[u.jsx(C8,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),u.jsxs("p",{className:"text-sm font-bold text-white",children:[oe.length," records parsed"]}),u.jsx("button",{onClick:()=>{X([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),oe.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:u.jsxs("table",{className:"w-full text-left text-xs",children:[u.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[u.jsx("th",{className:"p-2 pl-3",children:"Email"}),u.jsx("th",{className:"p-2",children:"Class"}),u.jsx("th",{className:"p-2",children:"Section"}),u.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:oe.map((re,De)=>u.jsxs("tr",{className:re.status==="invalid"?"bg-red-500/5":re.status==="duplicate"?"bg-yellow-500/5":re.status==="success"?"bg-green-500/5":"",children:[u.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:re.email}),u.jsx("td",{className:"p-2 text-gray-400",children:re.classType}),u.jsx("td",{className:"p-2 text-gray-500",children:re.section||""}),u.jsx("td",{className:"p-2 pr-3 text-right",children:u.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${re.status==="pending"?"bg-blue-500/20 text-blue-400":re.status==="success"?"bg-green-500/20 text-green-400":re.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:re.status})})]},De))})]})}),u.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("span",{className:"text-blue-400",children:[oe.filter(re=>re.status==="pending").length," ready"]}),u.jsxs("span",{className:"text-yellow-400",children:[oe.filter(re=>re.status==="duplicate").length," duplicates"]}),u.jsxs("span",{className:"text-red-400",children:[oe.filter(re=>re.status==="invalid").length," invalid"]}),oe.some(re=>re.status==="success")&&u.jsxs("span",{className:"text-green-400",children:[oe.filter(re=>re.status==="success").length," imported"]})]})}),oe.filter(re=>re.status==="duplicate").length>0&&u.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[u.jsx(ws,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),u.jsx("button",{onClick:st,disabled:ne||oe.filter(re=>re.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?u.jsxs(u.Fragment,{children:[u.jsx(Ha,{className:"w-4 h-4 animate-spin"})," Importing..."]}):u.jsxs(u.Fragment,{children:["Import ",oe.filter(re=>re.status==="pending").length," Operatives"]})})]})]})]}),u.jsx(Ka,{isOpen:y,onClose:()=>b(!1),title:F?"Edit Class Node Config":"Initialize New Class Node",children:u.jsxs("form",{onSubmit:yt,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),u.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:re=>R(re.target.value),placeholder:"e.g. AP Physics Period 4"}),F&&u.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),u.jsxs("div",{className:"border-t border-white/10 pt-4",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsLab,onChange:re=>Z({...Q,physicsLab:re.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.evidenceLocker,onChange:re=>Z({...Q,evidenceLocker:re.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.leaderboard,onChange:re=>Z({...Q,leaderboard:re.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsTools,onChange:re=>Z({...Q,physicsTools:re.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.communications,onChange:re=>Z({...Q,communications:re.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"number",min:1,max:100,value:W,onChange:re=>ee(Math.max(1,Math.min(100,parseInt(re.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),u.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),u.jsx("button",{type:"submit",disabled:L,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${L?"opacity-70 cursor-not-allowed":""}`,children:L?u.jsxs(u.Fragment,{children:[u.jsx(Ha,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):F?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},jc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},DI={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},tce=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,rce=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,nce=({assignment:t,isOpen:e,onClose:r})=>{const n=Vi(),i=V.useRef(null),[a,s]=V.useState([]),[c,d]=V.useState(!0),[f,m]=V.useState(!1),[p,y]=V.useState(t.category==="Practice Set"?"reading":"manage"),[b,T]=V.useState(null),[S,w]=V.useState(null),[N,I]=V.useState(""),[C,z]=V.useState(null),[O,B]=V.useState(!1),[E,A]=V.useState(null),[R,F]=V.useState({}),[D,L]=V.useState(null),[M,Q]=V.useState(!0),[Z,W]=V.useState(null),[ee,Y]=V.useState(null),[ye,oe]=V.useState(null),[X,ne]=V.useState(!1),de=V.useRef(null),J=t.category==="Practice Set";V.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const st=await Ti(ft(Ve,"question_banks",t.id));st.exists()?s(st.data().questions||[]):s([]);const yt=await Ti(ft(Ve,"reading_materials",t.id));yt.exists()?W(yt.data()):W(null)}catch(st){console.error("Failed to load bank:",st),s([])}finally{d(!1)}})()},[e,t.id]);const le=async Oe=>{m(!0);try{await Ji(ft(Ve,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Oe,questionCount:Oe.length,updatedAt:new Date().toISOString()}),s(Oe)}catch(st){n.error("Failed to save: "+(st instanceof Error?st.message:"Unknown error"))}finally{m(!1)}},pe=async Oe=>{const st=a.filter(yt=>yt.id!==Oe);await le(st),n.success("Question removed."),C===Oe&&z(null)},be=async()=>{try{await Ba(ft(Ve,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},Je=()=>{navigator.clipboard.writeText(tce(t.title,t.classType,t.description)),B(!0),setTimeout(()=>B(!1),2e3),n.success("Prompt copied!")},Ne=()=>{navigator.clipboard.writeText(rce(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},ce=async Oe=>{var yt;const st=(yt=Oe.target.files)==null?void 0:yt[0];if(st){oe(null),Y(null);try{let ze=(await st.text()).replace(/```json\s*|```\s*/g,"").trim();ze=ze.replace(/[\x00-\x1F\x7F]/g,We=>We===`
`||We==="\r"||We==="	"?" ":"");let re;try{re=JSON.parse(ze)}catch{const We=ze.match(/\{[\s\S]*\}/);if(We)re=JSON.parse(We[0]);else throw new Error("No JSON object found.")}if(!re.title||!re.sections||!Array.isArray(re.sections))throw new Error("Missing required fields: title and sections array.");const De=re.sections.filter(We=>!We.title||!We.content);if(De.length>0)throw new Error(`${De.length} section(s) missing title or content.`);Y(re)}catch(he){oe(he instanceof Error?he.message:"Parse failed.")}de.current&&(de.current.value="")}},Ce=async()=>{if(ee){m(!0);try{await Ji(ft(Ve,"reading_materials",t.id),{...ee,assignmentId:t.id,updatedAt:new Date().toISOString()}),W(ee),Y(null),n.success(`Study material uploaded: ${ee.sections.length} sections!`)}catch(Oe){n.error("Failed to save: "+(Oe instanceof Error?Oe.message:"Unknown error"))}finally{m(!1)}}},Ee=async()=>{m(!0);try{await Ba(ft(Ve,"reading_materials",t.id)),W(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{m(!1)}},ct=async Oe=>{var yt;const st=(yt=Oe.target.files)==null?void 0:yt[0];if(st){L(null),A(null);try{let ze=(await st.text()).replace(/```json\s*|```\s*/g,"").trim();ze=ze.replace(/[\x00-\x1F\x7F]/g,Ze=>Ze===`
`||Ze==="\r"||Ze==="	"?" ":"");let re;try{re=JSON.parse(ze)}catch{const Ze=ze.match(/\[[\s\S]*\]/);if(Ze)try{re=JSON.parse(Ze[0])}catch{const Ke=Ze[0];let wt=null;for(let Tt=Ke.length-1;Tt>0;Tt--)if(Ke[Tt]==="}")try{wt=JSON.parse(Ke.slice(0,Tt+1)+"]");break}catch{}if(wt)re=wt;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Ke=null;const wt="["+ze;for(let Tt=wt.length-1;Tt>0;Tt--)if(wt[Tt]==="}")try{Ke=JSON.parse(wt.slice(0,Tt+1)+"]");break}catch{}if(Ke)re=Ke;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(re)||re.length===0)throw new Error("Must be a non-empty JSON array.");const De=re.filter(Ze=>Ze.id&&Ze.tier&&Ze.type&&Ze.stem&&Ze.options&&Ze.correctAnswer),We=re.length-De.length;if(De.length===0){L("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const tt={};De.forEach(Ze=>{const Ke=Ze.tier;tt[Ke]=(tt[Ke]||0)+1}),A(De),F(tt),We>0&&n.success(`Parsed ${De.length} questions (${We} skipped  missing fields).`)}catch(he){L(he instanceof Error?he.message:"Parse failed.")}i.current&&(i.current.value="")}},Qe=async()=>{if(!E)return;let Oe;if(M&&a.length>0){const st=new Set(a.map(he=>he.id)),yt=E.map((he,ze)=>({...he,id:st.has(he.id)?`${he.id}_${Date.now()}_${ze}`:he.id}));Oe=[...a,...yt]}else Oe=E;await le(Oe),n.success(`${M?"Added":"Replaced with"} ${E.length} questions. Total: ${Oe.length}`),A(null),y("manage")},ut=V.useMemo(()=>{let Oe=a;if(b&&(Oe=Oe.filter(st=>st.tier===b)),S&&(Oe=Oe.filter(st=>st.type===S)),N){const st=N.toLowerCase();Oe=Oe.filter(yt=>yt.stem.toLowerCase().includes(st)||yt.id.toLowerCase().includes(st))}return Oe},[a,b,S,N]),dt=V.useMemo(()=>{const Oe={1:0,2:0,3:0};return a.forEach(st=>{Oe[st.tier]=(Oe[st.tier]||0)+1}),Oe},[a]),Ut=V.useMemo(()=>{const Oe={};return a.forEach(st=>{Oe[st.type]=(Oe[st.type]||0)+1}),Oe},[a]);return e?u.jsx(Ka,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:u.jsxs("div",{className:"text-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[u.jsx(Yw,{className:"w-5 h-5 text-purple-400 shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),u.jsx("div",{className:"text-xs mt-1",children:c?u.jsx("span",{className:"text-gray-500",children:"Loading..."}):a.length>0?u.jsxs("span",{className:"text-emerald-400",children:[a.length," questions loaded"]}):u.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),a.length>0&&!c&&u.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Oe=>u.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${jc[Oe].bg} ${jc[Oe].border} border`,children:[u.jsx("div",{className:`text-sm font-bold ${jc[Oe].text}`,children:dt[Oe]}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Oe]})]},Oe))})]}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[!J&&u.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Yw,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",a.length,")"]}),!J&&u.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Ol,{className:"w-3.5 h-3.5 inline mr-1.5"}),a.length>0?"Add More":"Create Bank"]}),u.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Xs,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",Z?`(${Z.sections.length})`:""]})]}),p==="manage"&&u.jsx("div",{className:"space-y-3",children:c?u.jsx("div",{className:"py-12 text-center",children:u.jsx(Ha,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):a.length===0?u.jsxs("div",{className:"py-12 text-center",children:[u.jsx(Yw,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[u.jsx(kF,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),u.jsx("input",{value:N,onChange:Oe=>I(Oe.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Oe=>u.jsxs("button",{onClick:()=>T(b===Oe?null:Oe),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b===Oe?`${jc[Oe].bg} ${jc[Oe].text} ${jc[Oe].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Oe," (",dt[Oe],")"]},Oe))]})]}),Object.keys(Ut).length>1&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Ut).sort((Oe,st)=>st[1]-Oe[1]).map(([Oe,st])=>u.jsxs("button",{onClick:()=>w(S===Oe?null:Oe),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Oe?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[DI[Oe]||Oe," (",st,")"]},Oe))}),u.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:ut.length===0?u.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):ut.map(Oe=>{const st=jc[Oe.tier]||jc[1],yt=C===Oe.id;return u.jsxs("div",{className:`rounded-xl border transition ${yt?`${st.border} ${st.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[u.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>z(yt?null:Oe.id),children:[u.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${st.bg} ${st.text}`,children:["T",Oe.tier]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[u.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Oe.id}),u.jsx("span",{className:"text-[8px] text-gray-600",children:""}),u.jsx("span",{className:"text-[8px] text-gray-500",children:DI[Oe.type]||Oe.type}),u.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Hn,{className:"w-2.5 h-2.5"}),Oe.xp]})]}),u.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Oe.stem})]}),u.jsx(m0,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${yt?"rotate-90":""}`})]}),yt&&u.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Oe.context&&u.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Oe.context}),u.jsx("div",{className:"space-y-1",children:Oe.options.map(he=>{const ze=Array.isArray(Oe.correctAnswer)?Oe.correctAnswer.includes(he.id):Oe.correctAnswer===he.id;return u.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${ze?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[u.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[he.id.toUpperCase(),"."]}),u.jsx("span",{children:he.text}),ze&&u.jsx(Tn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},he.id)})}),u.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Oe.explanation]}),Oe.linkedFollowUp&&u.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold",children:"Follow-up: "}),Oe.linkedFollowUp.stem]}),u.jsxs("button",{onClick:()=>pe(Oe.id),disabled:f,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[u.jsx($i,{className:"w-3 h-3"})," Delete Question"]})]})]},Oe.id)})}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[u.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",ut.length," of ",a.length]}),u.jsxs("button",{onClick:be,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx($i,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),p==="add"&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),u.jsx("button",{onClick:Je,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${O?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:O?u.jsxs(u.Fragment,{children:[u.jsx(Tn,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(vT,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),u.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",u.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[u.jsx(LO,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:i,type:"file",accept:".json,.txt",onChange:ct,className:"hidden"})]})]}),D&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(ws,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:D})]}),E&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Tn,{className:"w-4 h-4 text-emerald-400"}),u.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[E.length," questions parsed"]})]}),u.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Oe=>u.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[u.jsx("div",{className:"text-base font-bold text-white",children:R[Oe]||0}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Oe]})]},Oe))}),a.length>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>Q(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${M?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[u.jsx(Ol,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",a.length," + ",E.length,")"]}),u.jsxs("button",{onClick:()=>Q(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${M?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[u.jsx(_p,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Qe,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Ha,{className:"w-4 h-4 animate-spin"}):u.jsx(Ep,{className:"w-4 h-4"}),f?"Saving...":`Upload ${E.length} Questions`]}),u.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx($i,{className:"w-4 h-4"})})]})]})]}),p==="reading"&&u.jsxs("div",{className:"space-y-5",children:[Z?u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Xs,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),u.jsxs("button",{onClick:Ee,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx($i,{className:"w-3 h-3"})," Remove"]})]}),Z.description&&u.jsx("p",{className:"text-xs text-gray-400",children:Z.description}),u.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[u.jsxs("span",{children:[Z.sections.length," sections"]}),Z.estimatedMinutes&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsxs("span",{children:["~",Z.estimatedMinutes," min read"]})]})]}),u.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:Z.sections.map((Oe,st)=>u.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:st+1}),u.jsx("span",{className:"truncate",children:Oe.title})]},st))})]}):u.jsxs("div",{className:"py-6 text-center",children:[u.jsx(Xs,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),u.jsx("button",{onClick:Ne,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?u.jsxs(u.Fragment,{children:[u.jsx(Tn,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(vT,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[u.jsx(LO,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:de,type:"file",accept:".json,.txt",onChange:ce,className:"hidden"})]})]}),ye&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(ws,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:ye})]}),ee&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Tn,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:ee.title})]}),u.jsxs("p",{className:"text-xs text-gray-400",children:[ee.sections.length," sections  ~",ee.estimatedMinutes||"?"," min read"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Ce,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Ha,{className:"w-4 h-4 animate-spin"}):u.jsx(Ep,{className:"w-4 h-4"}),f?"Saving...":"Upload Study Material"]}),u.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx($i,{className:"w-4 h-4"})})]})]})]}),f&&u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[u.jsx(Ha,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},LI=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],ice={Textbook:u.jsx(Xs,{className:"w-4 h-4"}),Simulation:u.jsx(k8,{className:"w-4 h-4"}),"Lab Guide":u.jsx(Ix,{className:"w-4 h-4"}),"Practice Set":u.jsx(jo,{className:"w-4 h-4"}),Article:u.jsx(AF,{className:"w-4 h-4"}),"Video Lesson":u.jsx(CF,{className:"w-4 h-4"}),Supplemental:u.jsx(I8,{className:"w-4 h-4"})},ace=({assignments:t,submissions:e,classConfigs:r,onCreateAssignment:n,onPreviewAssignment:i})=>{const a=Vi(),{confirm:s}=uu(),[c,d]=V.useState(!1),[f,m]=V.useState(!1),[p,y]=V.useState(!1),[b,T]=V.useState("All Classes"),[S,w]=V.useState("All Categories"),[N,I]=V.useState(new Set),[C,z]=V.useState(null),[O,B]=V.useState({title:"",description:"",status:ol.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[E,A]=V.useState(new Set([Cr.AP_PHYSICS])),[R,F]=V.useState(!1),D=V.useMemo(()=>{const Y=Object.values(Cr).filter(oe=>oe!==Cr.UNCATEGORIZED),ye=(r||[]).map(oe=>oe.className);return Array.from(new Set(["All Classes",...Y,...ye]))},[r]),L=V.useMemo(()=>t.filter(Y=>{const ye=b==="All Classes"||Y.classType===b,oe=S==="All Categories"||Y.category===S;return ye&&oe}),[t,b,S]),M=V.useMemo(()=>{const Y={};return L.forEach(ye=>{const oe=b==="All Classes"?`${ye.classType.toUpperCase()}  ${ye.unit||"Unassigned"}`:ye.unit||"Unassigned";Y[oe]||(Y[oe]=[]),Y[oe].push(ye)}),Object.keys(Y).sort().reduce((ye,oe)=>(ye[oe]=Y[oe],ye),{})},[L,b]),Q=async Y=>{if(Y.preventDefault(),E.size===0){a.error("Select a target class.");return}y(!0);try{f&&O.id?await n({...O,classType:Array.from(E)[0]}):await Promise.all(Array.from(E).map(ye=>n({...O,classType:ye}))),d(!1),m(!1)}catch(ye){console.error(ye)}finally{y(!1)}},Z=Y=>{B(Y),A(new Set([Y.classType])),m(!0),d(!0)},W=async Y=>{const ye=Y.status===ol.ACTIVE?ol.ARCHIVED:ol.ACTIVE;await Fe.updateAssignmentStatus(Y.id,ye)},ee=V.useMemo(()=>[...Array.isArray(e)?e:[]].sort((ye,oe)=>{const X=new Date(ye.submittedAt||0).getTime();return new Date(oe.submittedAt||0).getTime()-X}),[e]);return u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),u.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),u.jsxs("button",{onClick:()=>{B({title:"",description:"",status:ol.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),m(!1),d(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[u.jsx(Ol,{className:"w-5 h-5"})," Deploy Resource"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:b,onChange:Y=>T(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:D.map(Y=>u.jsx("option",{value:Y,children:Y},Y))}),u.jsx(Ea,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:S,onChange:Y=>w(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),LI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))]}),u.jsx(Ea,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(M).map(([Y,ye])=>u.jsxs("div",{className:"mb-6 last:mb-0",children:[u.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[u.jsx("button",{onClick:()=>{const oe=new Set(N);oe.has(Y)?oe.delete(Y):oe.add(Y),I(oe)},className:"text-gray-400 hover:text-white transition",children:N.has(Y)?u.jsx(Ea,{className:"w-4 h-4"}):u.jsx(m0,{className:"w-4 h-4"})}),u.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Y}),u.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!N.has(Y)&&u.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:ye.map(oe=>u.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${oe.status===ol.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${oe.status===ol.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:ice[oe.category||"Supplemental"]}),u.jsxs("div",{className:"truncate flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:oe.title}),u.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:oe.classType})]}),u.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:oe.description})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[u.jsx("button",{onClick:()=>z(oe),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:u.jsx(xh,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i==null?void 0:i(oe.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:u.jsx(qae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>Z(oe),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:u.jsx(Wae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>W(oe),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:oe.status===ol.ACTIVE?u.jsx(xae,{className:"w-4 h-4"}):u.jsx(Sp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:async()=>{await s({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Fe.deleteAssignment(oe.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:u.jsx($i,{className:"w-4 h-4"})})]})]},oe.id))})]},Y))})]}),u.jsx("div",{className:"lg:col-span-4",children:u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[u.jsx(xs,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),u.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[ee.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[u.jsx(xs,{className:"w-10 h-10 text-gray-700 mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),ee.map(Y=>u.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Y.userName}),u.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Y.assignmentTitle})]}),u.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Y.score)," XP"]})]}),u.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[u.jsxs("span",{children:[Math.round(Y.metrics.engagementTime/60),"m active"]}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Y.submittedAt||"").toLocaleDateString()})]})]},Y.id))]})]})})]}),u.jsx(Ka,{isOpen:c,onClose:()=>d(!1),title:f?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:u.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:O.title,onChange:Y=>B({...O,title:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:O.unit,onChange:Y=>B({...O,unit:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),u.jsx("select",{value:O.category,onChange:Y=>B({...O,category:Y.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:LI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:D.filter(Y=>Y!=="All Classes").map(Y=>u.jsx("button",{type:"button",onClick:()=>{const ye=new Set(E);ye.has(Y)?ye.size>1&&ye.delete(Y):ye.add(Y),A(ye)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${E.has(Y)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Y},Y))})]}),u.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[u.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),u.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Y=>{var ye;if((ye=Y.target.files)!=null&&ye[0]){F(!0);try{const oe=await Fe.uploadHtmlResource(Y.target.files[0]);B({...O,contentUrl:oe}),a.success("File uploaded!")}catch(oe){a.error("Upload failed: "+(oe instanceof Error?oe.message:"Unknown error"))}finally{F(!1)}}}}),R&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[u.jsx(Ha,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!R&&O.contentUrl&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[u.jsx(Fv,{className:"w-4 h-4"})," Resource uploaded"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",u.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),u.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:O.description,onChange:Y=>B({...O,description:Y.target.value})})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:p?u.jsx(Ha,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),C&&u.jsx(nce,{assignment:C,isOpen:!!C,onClose:()=>z(null)})]})},sce=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],oce=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:i})=>{var m,p;const[a,s]=V.useState(null),c=V.useMemo(()=>{var b;if(!t)return[];const y=Object.keys(((b=t.gamification)==null?void 0:b.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=a&&c.includes(a)?a:c[0]||"_legacy",f=V.useMemo(()=>{var b,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((b=t.gamification)==null?void 0:b.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=k0(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?u.jsx(Ka,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:u.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[u.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((m=t.gamification)==null?void 0:m.level)||1]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-cyan-400",children:((p=t.gamification)==null?void 0:p.currency)||0})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>i(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:u.jsx(Ol,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:u.jsx(Ya,{className:"w-4 h-4"})})]})]})]}),c.length>1&&u.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>u.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),u.jsxs("div",{className:"border-b border-white/5 pb-6",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&u.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),u.jsx("div",{className:"flex gap-2 flex-wrap",children:sce.map(y=>{var T;const b=(T=f.equipped)==null?void 0:T[y];return u.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${b?Xr(b.rarity).border+" "+Xr(b.rarity).bg:"border-white/10 bg-black/20"}`,children:b?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:b.name}),u.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:u.jsx(Ya,{className:"w-3 h-3"})})]}):u.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),u.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[f.inventory.map((y,b)=>u.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${Xr(y.rarity).border}`,children:[u.jsx("div",{className:`text-[8px] font-bold ${Xr(y.rarity).text} text-center truncate w-full`,children:y.name}),u.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:u.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:u.jsx($i,{className:"w-4 h-4"})})})]},b)),f.inventory.length===0&&u.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},lce=[10,50,100,-10,-50,-100],cce=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,i]=V.useState(50);if(!t)return null;const a=()=>{r(t,n),i(50)};return u.jsx(Ka,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[u.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),u.jsx("p",{className:"text-xs text-gray-500",children:t.email}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:lce.map(c=>u.jsx("button",{onClick:()=>i(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),u.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>i(parseInt(c.target.value)||0)})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:a,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},uce=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&u.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,i)=>{const a=n.quest.type==="CUSTOM";return u.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),u.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[u.jsx(jo,{className:"w-3 h-3"}),n.quest.title]})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[u.jsxs("div",{className:"text-center md:text-right",children:[u.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),u.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[u.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:a?"Manual Review":"Auto-Check"}),u.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:a?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!a&&n.roll===0&&u.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:u.jsx(jae,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),u.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:u.jsx(Cg,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:u.jsx(Ya,{className:"w-5 h-5"})})]})]})]})]},i)})]}),BI={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:""},dce=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:i,isSubmitting:a})=>{const s=r.type==="SKILL_CHECK";return u.jsx(Ka,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:u.jsxs("form",{onSubmit:i,className:"space-y-4 text-gray-200 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),u.jsx("input",{value:r.title,onChange:c=>n({...r,title:c.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),u.jsx("textarea",{value:r.description,onChange:c=>n({...r,description:c.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),u.jsxs("select",{value:r.type,onChange:c=>n({...r,type:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[u.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),u.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),u.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),u.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),u.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),u.jsxs("select",{value:r.targetClass,onChange:c=>n({...r,targetClass:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[u.jsx("option",{value:"",children:"All Classes"}),Object.values(Cr).filter(c=>c!=="Uncategorized").map(c=>u.jsx("option",{value:c,children:c},c))]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",u.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),u.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:c=>n({...r,startsAt:c.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",u.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),u.jsx("input",{type:"number",value:r.durationHours||"",onChange:c=>n({...r,durationHours:parseInt(c.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[u.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),u.jsx("input",{type:"number",value:r.xpReward,onChange:c=>n({...r,xpReward:parseInt(c.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),u.jsx("input",{type:"number",value:r.fluxReward,onChange:c=>n({...r,fluxReward:parseInt(c.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),u.jsxs("select",{value:r.lootRarity,onChange:c=>n({...r,lootRarity:c.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[u.jsx("option",{value:"",children:"None"}),u.jsx("option",{value:"COMMON",children:"Common"}),u.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),u.jsx("option",{value:"RARE",children:"Rare"}),u.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),u.jsx("div",{className:"flex items-center gap-4",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:c=>n({...r,isGroup:c.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),s&&u.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[u.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),u.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),u.jsx("input",{type:"number",value:r.techReq||"",onChange:c=>n({...r,techReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),u.jsx("input",{type:"number",value:r.focusReq||"",onChange:c=>n({...r,focusReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),u.jsx("input",{type:"number",value:r.analysisReq||"",onChange:c=>n({...r,analysisReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),u.jsx("input",{type:"number",value:r.charismaReq||"",onChange:c=>n({...r,charismaReq:parseInt(c.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),u.jsx("input",{type:"number",value:r.dieSides,onChange:c=>n({...r,dieSides:parseInt(c.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),u.jsx("input",{type:"text",value:r.consequence,onChange:c=>n({...r,consequence:c.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),u.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:a?"Transmitting...":"Broadcast Mission"})]})})},hce=({users:t})=>{const e=Vi(),{confirm:r}=uu(),[n,i]=V.useState("OPERATIVES"),[a,s]=V.useState(""),[c,d]=V.useState("All Classes"),[f,m]=V.useState("All Sections"),[p,y]=V.useState("xp"),[b,T]=V.useState("desc"),S=he=>{p===he?T(ze=>ze==="asc"?"desc":"asc"):(y(he),T("asc"))},w=({label:he,col:ze,className:re})=>u.jsx("th",{className:`cursor-pointer select-none group pb-4 ${re??""}`,onClick:()=>S(ze),children:u.jsxs("div",{className:`flex items-center gap-1 ${re!=null&&re.includes("text-center")?"justify-center":re!=null&&re.includes("text-right")?"justify-end":"justify-start"}`,children:[u.jsx("span",{children:he}),u.jsxs("span",{className:"flex flex-col gap-px",children:[u.jsx(j8,{className:`w-2.5 h-2.5 -mb-0.5 ${p===ze&&b==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),u.jsx(Ea,{className:`w-2.5 h-2.5 -mt-0.5 ${p===ze&&b==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[N,I]=V.useState([]),[C,z]=V.useState([]),[O,B]=V.useState(null),[E,A]=V.useState(null),[R,F]=V.useState(!1),[D,L]=V.useState(!1),[M,Q]=V.useState(BI),[Z,W]=V.useState(!1),[ee,Y]=V.useState([]),[ye,oe]=V.useState(null),[X,ne]=V.useState(""),[de,J]=V.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Cr.AP_PHYSICS});V.useEffect(()=>{const he=Fe.subscribeToXPEvents(I),ze=Fe.subscribeToQuests(z);return()=>{he(),ze()}},[]),V.useEffect(()=>{const he=[];t.forEach(ze=>{var re,De;(De=(re=ze.gamification)==null?void 0:re.activeQuests)==null||De.forEach(We=>{const tt=C.find(Ze=>Ze.id===We.questId);tt&&(We.status==="DEPLOYED"||We.status==="ACCEPTED")&&he.push({user:ze,quest:tt,status:We.status,roll:We.deploymentRoll,acceptedAt:We.acceptedAt})})}),Y(he)},[t,C,n]);const le=V.useMemo(()=>t.filter(he=>he.role==="STUDENT"),[t]),pe=V.useMemo(()=>{const he=new Set;return le.forEach(ze=>{ze.section&&he.add(ze.section)}),Array.from(he).sort()},[le]),be=he=>{var re,De;const ze=(re=he.gamification)==null?void 0:re.classProfiles;return ze&&Object.keys(ze).length>0?Object.values(ze).reduce((We,tt)=>We+Th(tt.equipped),0):Th((De=he.gamification)==null?void 0:De.equipped)},Je=V.useMemo(()=>le.filter(he=>{var We;const ze=he.name.toLowerCase().includes(a.toLowerCase())||he.email.toLowerCase().includes(a.toLowerCase()),re=c==="All Classes"||he.classType===c||((We=he.enrolledClasses)==null?void 0:We.includes(c)),De=f==="All Sections"||he.section===f;return ze&&re&&De}).sort((he,ze)=>{var re,De,We,tt,Ze,Ke;switch(p){case"name":return b==="asc"?he.name.localeCompare(ze.name):ze.name.localeCompare(he.name);case"class":return b==="asc"?(he.classType||"").localeCompare(ze.classType||""):(ze.classType||"").localeCompare(he.classType||"");case"level":{const wt=((re=he.gamification)==null?void 0:re.level)||1,Tt=((De=ze.gamification)==null?void 0:De.level)||1;return b==="asc"?wt-Tt:Tt-wt}case"flux":{const wt=((We=he.gamification)==null?void 0:We.currency)||0,Tt=((tt=ze.gamification)==null?void 0:tt.currency)||0;return b==="asc"?wt-Tt:Tt-wt}case"gear":{const wt=be(he),Tt=be(ze);return b==="asc"?wt-Tt:Tt-wt}case"xp":default:{const wt=((Ze=he.gamification)==null?void 0:Ze.xp)||0,Tt=((Ke=ze.gamification)==null?void 0:Ke.xp)||0;return b==="asc"?wt-Tt:Tt-wt}}}),[le,a,c,f,p,b]),Ne=async(he,ze)=>{try{await Fe.adjustUserXP(he.id,ze,he.classType||Cr.UNCATEGORIZED),e.success(`${ze>0?"+":""}${ze} XP applied to ${he.name}.`)}catch{e.error("Failed to adjust XP.")}B(null)},ce=async he=>{he.preventDefault();const ze={id:Math.random().toString(36).substring(2,9),title:de.title,multiplier:de.multiplier,isActive:!0,type:de.type};de.type==="CLASS_SPECIFIC"&&(ze.targetClass=de.targetClass),await Fe.saveXPEvent(ze),F(!1),J({title:"",multiplier:2,type:"GLOBAL",targetClass:Cr.AP_PHYSICS})},Ce=async he=>{he.preventDefault(),W(!0);try{const ze={};M.techReq>0&&(ze.tech=M.techReq),M.focusReq>0&&(ze.focus=M.focusReq),M.analysisReq>0&&(ze.analysis=M.analysisReq),M.charismaReq>0&&(ze.charisma=M.charismaReq);const re=new Date;re.setHours(re.getHours()+(M.durationHours||0));const De={id:Math.random().toString(36).substring(2,9),title:M.title,description:M.description,xpReward:M.xpReward,fluxReward:M.fluxReward,isActive:!0,type:M.type,statRequirements:ze,startsAt:M.startsAt?new Date(M.startsAt).toISOString():null,expiresAt:M.durationHours>0?re.toISOString():null,itemRewardRarity:M.lootRarity||null,rollDieSides:M.dieSides||20,consequenceText:M.consequence||null,isGroupQuest:M.isGroup,targetClass:M.targetClass||void 0};await Fe.saveQuest(De),e.success(`Mission "${De.title}" deployed.`),Q(BI),L(!1)}catch(ze){console.error("Failed to issue mission:",ze),e.error("Failed to issue mission.")}finally{W(!1)}},Ee=async he=>{await Fe.saveXPEvent({...he,isActive:!he.isActive})},ct=async he=>{const ze={...he,isActive:!he.isActive};ze.isActive&&(ze.expiresAt=null),await Fe.saveQuest(ze)},Qe=async(he,ze,re)=>{var tt,Ze;if(!await r({message:`Confiscate ${ze.name} from ${he.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const We=(re?k0(he,re):{inventory:((tt=he.gamification)==null?void 0:tt.inventory)||[]}).inventory.filter(Ke=>Ke.id!==ze.id);await Fe.adminUpdateInventory(he.id,We,((Ze=he.gamification)==null?void 0:Ze.currency)||0,re),A(Ke=>{var wt,Tt;return Ke?re&&((Tt=(wt=Ke.gamification)==null?void 0:wt.classProfiles)!=null&&Tt[re])?{...Ke,gamification:{...Ke.gamification,classProfiles:{...Ke.gamification.classProfiles,[re]:{...Ke.gamification.classProfiles[re],inventory:We}}}}:{...Ke,gamification:{...Ke.gamification,inventory:We}}:null})},ut=async(he,ze,re)=>{var tt;if(!await r({message:`Force unequip ${ze} from ${he.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const We={...(re?k0(he,re):{equipped:{...(tt=he.gamification)==null?void 0:tt.equipped}}).equipped};delete We[ze],await Fe.adminUpdateEquipped(he.id,We,re),A(Ze=>{var Ke,wt;return Ze?re&&((wt=(Ke=Ze.gamification)==null?void 0:Ke.classProfiles)!=null&&wt[re])?{...Ze,gamification:{...Ze.gamification,classProfiles:{...Ze.gamification.classProfiles,[re]:{...Ze.gamification.classProfiles[re],equipped:We}}}}:{...Ze,gamification:{...Ze.gamification,equipped:We}}:null})},dt=async(he,ze)=>{var De,We;const re=Math.max(0,(((De=he.gamification)==null?void 0:De.currency)||0)+ze);await Fe.adminUpdateInventory(he.id,((We=he.gamification)==null?void 0:We.inventory)||[],re),A(tt=>tt?{...tt,gamification:{...tt.gamification,currency:re}}:null)},Ut=async(he,ze,re,De)=>{try{await Fe.resolveQuest(he,ze,re,De),e.success(re?`Mission "${ze.title}" approved.`:`Mission "${ze.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},Oe=async he=>{const ze=he.quest.rollDieSides||20,re=Math.floor(Math.random()*ze)+1;e.info(`Rolled a ${re} on a D${ze}. ${re===ze?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Ut(he.user.id,he.quest,re===ze,he.user.classType)},st=async he=>{try{await Fe.updateCodename(he,X.trim().slice(0,24)),e.success("Code name updated.")}catch{e.error("Failed to update code name.")}oe(null)},yt=({id:he,label:ze,icon:re})=>u.jsxs("button",{onClick:()=>i(he),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===he?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[u.jsx(re,{className:"w-4 h-4"}),ze]});return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),u.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),u.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&u.jsxs("button",{onClick:()=>F(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[u.jsx(Yae,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&u.jsxs("button",{onClick:()=>L(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[u.jsx(Sae,{className:"w-4 h-4"})," Issue Mission"]})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[u.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[u.jsx(yt,{id:"OPERATIVES",label:"Operatives",icon:vs}),u.jsx(yt,{id:"PROTOCOLS",label:"XP Protocols",icon:Hn}),u.jsx(yt,{id:"MISSIONS",label:"Missions",icon:jo}),u.jsx(yt,{id:"MISSION_CONTROL",label:"Mission Control",icon:th})]}),u.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(kF,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),u.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:a,onChange:he=>s(he.target.value)})]}),u.jsxs("div",{className:"flex gap-2 items-center",children:[u.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[Je.length," operatives"]}),u.jsxs("div",{className:"relative",children:[u.jsx(Rae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),u.jsxs("select",{value:c,onChange:he=>d(he.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Classes"}),Object.values(Cr).map(he=>u.jsx("option",{value:he,children:he},he))]}),u.jsx(Ea,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),pe.length>0&&u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:f,onChange:he=>m(he.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Sections"}),pe.map(he=>u.jsx("option",{value:he,children:he},he))]}),u.jsx(Ea,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[u.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),u.jsx(w,{label:"Class",col:"class"}),u.jsx(w,{label:"Level",col:"level",className:"text-center"}),u.jsx(w,{label:"XP",col:"xp",className:"text-center"}),u.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),u.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),u.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:Je.map(he=>{var We,tt,Ze,Ke,wt;const ze=((We=he.gamification)==null?void 0:We.level)||1,re=((tt=he.gamification)==null?void 0:tt.currency)||0,De=he.enrolledClasses||(he.classType?[he.classType]:[]);return u.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[u.jsx("td",{className:"py-3 pl-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:he.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:he.name}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-sm text-gray-200",children:he.name}),ye===he.id?u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("input",{autoFocus:!0,value:X,onChange:Tt=>ne(Tt.target.value),maxLength:24,onKeyDown:Tt=>{Tt.key==="Enter"&&st(he.id),Tt.key==="Escape"&&oe(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),u.jsx("button",{onClick:()=>st(he.id),className:"text-green-400 hover:text-green-300",children:u.jsx(Cg,{className:"w-3 h-3"})}),u.jsx("button",{onClick:()=>oe(null),className:"text-gray-500 hover:text-gray-300",children:u.jsx(Ya,{className:"w-3 h-3"})})]}):u.jsxs("button",{onClick:()=>{var Tt;oe(he.id),ne(((Tt=he.gamification)==null?void 0:Tt.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((Ze=he.gamification)==null?void 0:Ze.codename)||"UNASSIGNED",u.jsx(Xae,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]})]})]})}),u.jsx("td",{className:"py-3",children:u.jsx("div",{className:"flex flex-wrap gap-1",children:De.map(Tt=>u.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Tt},Tt))})}),u.jsx("td",{className:"py-3 text-center",children:u.jsx("span",{className:"text-lg font-black text-white",children:ze})}),u.jsx("td",{className:"py-3 text-center",children:u.jsx("span",{className:"text-sm font-bold text-gray-300",children:((wt=(Ke=he.gamification)==null?void 0:Ke.xp)==null?void 0:wt.toLocaleString())||0})}),u.jsx("td",{className:"py-3 text-center",children:u.jsx("span",{className:"text-sm font-bold text-cyan-400",children:re})}),u.jsx("td",{className:"py-3 text-center",children:u.jsx("span",{className:"text-sm font-bold text-yellow-400",children:be(he)})}),u.jsx("td",{className:"py-3 text-right pr-4",children:u.jsxs("div",{className:"flex justify-end gap-1.5",children:[u.jsxs("button",{onClick:()=>A(he),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[u.jsx(th,{className:"w-3 h-3"})," Inventory"]}),u.jsxs("button",{onClick:()=>B(he),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[u.jsx(Ol,{className:"w-3 h-3"})," XP"]})]})})]},he.id)})})]})})]}),n==="PROTOCOLS"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[N.map(he=>u.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${he.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[he.isActive&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${he.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:u.jsx(Hn,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>Fe.deleteXPEvent(he.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx($i,{className:"w-4 h-4"})})]}),u.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:he.title}),u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[he.multiplier,"x"]}),u.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:he.type==="GLOBAL"?"Global Uplink":he.targetClass}),u.jsx("button",{onClick:()=>Ee(he),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${he.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:he.isActive?"Active":"Offline"})]})]},he.id)),u.jsxs("button",{onClick:()=>F(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:u.jsx(Ol,{className:"w-6 h-6"})}),u.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&u.jsx("div",{className:"space-y-4",children:C.map(he=>u.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${he.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${he.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:u.jsx(j0,{className:"w-7 h-7"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-white",children:he.title}),u.jsx("p",{className:"text-sm text-gray-500",children:he.description}),he.statRequirements&&u.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(he.statRequirements).map(([ze,re])=>u.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[re," ",ze]},ze))}),u.jsxs("div",{className:"flex gap-3 mt-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:he.type}),u.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",he.xpReward," XP"]}),he.itemRewardRarity&&u.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),u.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:he.targetClass||"All Classes"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>ct(he),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${he.isActive?"bg-purple-600":"bg-gray-700"}`,children:u.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${he.isActive?"translate-x-6":""}`})}),u.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:he.isActive?"Active":"Standby"})]}),u.jsx("button",{onClick:()=>Fe.deleteQuest(he.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx($i,{className:"w-4 h-4"})})]})]},he.id))}),n==="MISSION_CONTROL"&&u.jsx(uce,{deployments:ee,onResolveQuest:Ut,onRollForSalvation:Oe})]})]}),u.jsx(oce,{user:E,onClose:()=>A(null),onDeleteItem:Qe,onUnequipItem:ut,onGrantFlux:dt}),u.jsx(dce,{isOpen:D,onClose:()=>L(!1),form:M,setForm:Q,onSubmit:Ce,isSubmitting:Z}),u.jsx(Ka,{isOpen:R,onClose:()=>F(!1),title:"New XP Protocol Deployment",children:u.jsxs("form",{onSubmit:ce,className:"space-y-4 text-gray-100 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),u.jsx("input",{value:de.title,onChange:he=>J({...de,title:he.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),u.jsx("input",{type:"number",step:"0.5",value:de.multiplier,onChange:he=>J({...de,multiplier:parseFloat(he.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),u.jsxs("select",{value:de.type,onChange:he=>J({...de,type:he.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[u.jsx("option",{value:"GLOBAL",children:"Global Node"}),u.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),de.type==="CLASS_SPECIFIC"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),u.jsx("select",{value:de.targetClass,onChange:he=>J({...de,targetClass:he.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Cr).map(he=>u.jsx("option",{value:he,children:he},he))})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),u.jsx(cce,{user:O,onClose:()=>B(null),onAdjust:Ne})]})},fce={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:u.jsx(EF,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:u.jsx(wF,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:u.jsx(M8,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},mce=({onToggleChat:t})=>{const[e,r]=V.useState(null),[n,i]=V.useState(!1),a=c=>{e===c?r(null):(r(c),i(!1))};if(!e)return u.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[u.jsxs("button",{onClick:()=>a("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[u.jsx(M8,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),u.jsxs("button",{onClick:()=>a("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[u.jsx(wF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),u.jsxs("button",{onClick:()=>a("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[u.jsx(EF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&u.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[u.jsx(_T,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=fce[e];return u.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[u.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),u.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>i(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?u.jsx(xT,{className:"w-4 h-4"}):u.jsx(TF,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>r(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:u.jsx(Ya,{className:"w-4 h-4"})})]})]}),!n&&u.jsx("div",{className:"flex-1 bg-white relative",children:u.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},pce=["","","","","","","",""],gce=["","","","","","","","","","","","","","","","","","","","","","","","","",""],yce=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:i,onOpenResource:a})=>{var Ne;const{confirm:s}=uu(),[c,d]=V.useState([]),[f,m]=V.useState(""),[p,y]=V.useState("Main"),[b,T]=V.useState(!1),[S,w]=V.useState(!1),[N,I]=V.useState(null),[C,z]=V.useState(null),[O,B]=V.useState([]),[E,A]=V.useState(null),R=V.useRef(null),F=V.useRef(null),D=V.useRef(null),L=V.useMemo(()=>Object.values(Cr).filter(ce=>{var Qe;if(ce===Cr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Ce=i.find(ut=>ut.className===ce),Ee=(Qe=t.enrolledClasses)==null?void 0:Qe.includes(ce),ct=Ce?Ce.features.communications:!0;return Ee&&ct}),[i,t.role,t.enrolledClasses]),[M,Q]=V.useState(L[0]||"");V.useEffect(()=>{(!M||!L.includes(M))&&L.length>0&&Q(L[0])},[L]);const Z=V.useMemo(()=>p==="Resources"&&C?`res_${C}`:p==="Resources"&&!C||!M?"":`class_${M.replace(/\s+/g,"_").toLowerCase()}`,[M,p,C]),W=V.useRef(null),ee=V.useMemo(()=>n.filter(ce=>ce.classType===M&&ce.status!=="DRAFT"),[n,M]),Y=V.useMemo(()=>c.filter(ce=>{var Ce;return ce.isGlobalPinned||((Ce=ce.pinnedBy)==null?void 0:Ce.includes(t.id))}),[c,t.id]),ye=V.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]);V.useEffect(()=>{if(!e)return;let ce="";if(p==="Resources"&&C?ce=`res_${C}`:(p==="Main"||p==="Bookmarks")&&(ce=`class_${M.replace(/\s+/g,"_").toLowerCase()}`),!ce)return;T(!0);const Ce=Fe.subscribeToChannelMessages(ce,Ee=>{d(Ee),T(!1)});return()=>{Ce()}},[e,M,p,C]),V.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const ce=Fe.subscribeToFlaggedMessages(Ce=>{B(Ce)});return()=>ce()},[e,t.role]),V.useEffect(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},[c,b,p,C]),V.useEffect(()=>{const ce=Ce=>{R.current&&!R.current.contains(Ce.target)&&w(!1),F.current&&!F.current.contains(Ce.target)&&I(null)};return document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[]),V.useEffect(()=>{if(!e)return;const ce=Ce=>{Ce.key==="Escape"&&r()};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[e,r]);const oe=V.useCallback(async ce=>{if(ce.preventDefault(),!(!f.trim()||!Z)&&!ye)try{await Fe.sendMessage(t,f,Z,M),m(""),w(!1)}catch(Ce){console.error("Failed to send message:",Ce)}},[f,Z,ye,t,M]),X=V.useCallback(async(ce,Ce)=>{try{await Fe.toggleReaction(ce,Ce,t.id),I(null)}catch(Ee){console.error(Ee)}},[t.id]),ne=V.useCallback(async ce=>{try{await Fe.togglePersonalPin(ce,t.id)}catch(Ce){console.error(Ce)}},[t.id]),de=V.useCallback(async(ce,Ce)=>{try{await Fe.toggleGlobalPin(ce,!Ce)}catch(Ee){console.error(Ee)}},[]),J=async ce=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Fe.deleteMessage(ce)}catch(Ce){console.error(Ce)}},le=async ce=>{try{await Fe.unflagMessage(ce),await Fe.resolveFlagByMessageId(ce)}catch(Ce){console.error(Ce)}},pe=async ce=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Fe.resolveFlagByMessageId(ce),await Fe.deleteMessage(ce)}catch(Ce){console.error(Ce)}},be=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Fe.INDEFINITE_MUTE}],Je=async ce=>{if(E){try{await Fe.muteUser(E.senderId,ce)}catch(Ce){console.error(Ce)}A(null)}};return V.useEffect(()=>{const ce=Ce=>{D.current&&!D.current.contains(Ce.target)&&A(null)};return E&&document.addEventListener("mousedown",ce),()=>document.removeEventListener("mousedown",ce)},[E]),e?u.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[p==="Resources"&&C?u.jsx("button",{onClick:()=>z(null),className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:u.jsx(Aae,{className:"w-5 h-5"})}):u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:u.jsx(_T,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:p==="Moderation"?"Moderation Queue":p==="Resources"?C?(Ne=ee.find(ce=>ce.id===C))==null?void 0:Ne.title:"Class Resources":M}),p!=="Resources"&&p!=="Moderation"&&L.length>1&&u.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[u.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:M}),u.jsx(Ea,{className:"w-3 h-3 text-gray-500 ml-1"}),u.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:M,onChange:ce=>Q(ce.target.value),children:L.map(ce=>u.jsx("option",{value:ce,children:ce},ce))})]})]})]}),u.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:u.jsx(Ya,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[u.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${p==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(_T,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${p==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(Xs,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${p==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(PO,{className:"w-5 h-5"})}),t.role==="ADMIN"&&u.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${p==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[u.jsx(vs,{className:"w-5 h-5"}),O.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:O.length})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative",children:[p==="Resources"&&!C&&u.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:u.jsx("div",{className:"space-y-2",children:ee.map(ce=>u.jsxs("div",{onClick:()=>z(ce.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:u.jsx(Dae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ce.title}),u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:ce.unit})]})]}),u.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),a==null||a(ce.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:u.jsx(Oae,{className:"w-4 h-4"})})]},ce.id))})}),p==="Moderation"&&t.role==="ADMIN"&&u.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(ws,{className:"w-4 h-4 text-red-400"}),u.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),u.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[O.length," item",O.length!==1?"s":""]})]}),O.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[u.jsx(vs,{className:"w-10 h-10 mb-3 opacity-30"}),u.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):u.jsx("div",{className:"space-y-3",children:O.map(ce=>{var Ce;return u.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300",children:ce.senderName}),u.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(ce.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-sm text-gray-200 mb-1",children:ce.content}),ce.systemNote&&u.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:ce.systemNote}),u.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:((Ce=ce.channelId)==null?void 0:Ce.replace("class_","").replace(/_/g," "))||"unknown channel"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>le(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[u.jsx(Cg,{className:"w-3.5 h-3.5"})," Approve"]}),u.jsxs("button",{onClick:()=>pe(ce.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[u.jsx($i,{className:"w-3.5 h-3.5"})," Delete"]}),u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===`flag-${ce.id}`?null:{id:`flag-${ce.id}`,senderId:ce.senderId,senderName:ce.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:u.jsx(qv,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===`flag-${ce.id}`&&u.jsxs("div",{ref:D,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[u.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),be.map(Ee=>u.jsx("button",{onClick:()=>Je(Ee.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:Ee.label},Ee.minutes))]})]})]})]},ce.id)})})]}),(p==="Main"||p==="Bookmarks"||p==="Resources"&&C)&&u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:W,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(p==="Bookmarks"?Y:c).map((ce,Ce,Ee)=>{var ut;const ct=ce.senderId===t.id,Qe=Ce>0&&Ee[Ce-1].senderId===ce.senderId&&new Date(ce.timestamp).getTime()-new Date(Ee[Ce-1].timestamp).getTime()<3e5;return u.jsxs("div",{className:`group flex flex-col ${ct?"items-end":"items-start"} ${Qe?"mt-1":"mt-4"}`,children:[!Qe&&u.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[u.jsx("span",{className:`text-xs font-bold ${ct?"text-indigo-400":"text-gray-300"}`,children:ce.senderName}),u.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ce.isGlobalPinned&&u.jsx(zO,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),u.jsxs("div",{className:"relative max-w-[85%]",children:[u.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${ct?"right-0":"left-0"} z-30`,children:[u.jsx("button",{onClick:()=>I(ce.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:u.jsx(VO,{className:"w-3.5 h-3.5 text-yellow-400"})}),u.jsx("button",{onClick:()=>ne(ce.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(ut=ce.pinnedBy)!=null&&ut.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:u.jsx(PO,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>de(ce.id,!!ce.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${ce.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:u.jsx(zO,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>J(ce.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:u.jsx($i,{className:"w-3.5 h-3.5"})}),ce.senderId!==t.id&&u.jsxs("div",{className:"relative",children:[u.jsx("button",{onClick:()=>A((E==null?void 0:E.id)===ce.id?null:{id:ce.id,senderId:ce.senderId,senderName:ce.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:u.jsx(qv,{className:"w-3.5 h-3.5"})}),(E==null?void 0:E.id)===ce.id&&u.jsxs("div",{ref:D,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[u.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ce.senderName]}),be.map(dt=>u.jsx("button",{onClick:()=>Je(dt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:dt.label},dt.minutes))]})]})]})]}),N===ce.id&&u.jsx("div",{ref:F,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${ct?"right-0":"left-0"}`,children:pce.map(dt=>u.jsx("button",{onClick:()=>X(ce.id,dt),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:dt},dt))}),u.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${ct?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${ce.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${ce.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:ce.content}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:ce.reactions&&Object.entries(ce.reactions).map(([dt,Ut])=>{const Oe=Ut;return Oe.length>0&&u.jsxs("button",{onClick:()=>X(ce.id,dt),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${Oe.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[dt," ",Oe.length]},dt)})})]})]},ce.id)})}),u.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:u.jsxs("form",{onSubmit:oe,className:"relative flex items-center gap-2",children:[S&&u.jsx("div",{ref:R,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:gce.map(ce=>u.jsx("button",{type:"button",onClick:()=>m(Ce=>Ce+ce),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:ce},ce))}),u.jsx("button",{type:"button",onClick:()=>w(!S),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:u.jsx(VO,{className:"w-5 h-5"})}),u.jsx("input",{type:"text",value:f,onChange:ce=>m(ce.target.value),placeholder:ye?"Transmission Disabled":"Type message...",disabled:!Z||ye,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),u.jsx("button",{type:"submit",disabled:!Z||ye||!f.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:u.jsx(Zae,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function Rq(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Rq(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ht(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Rq(t))&&(n&&(n+=" "),n+=e);return n}var w5,UI;function ja(){if(UI)return w5;UI=1;var t=Array.isArray;return w5=t,w5}var _5,zI;function Mq(){if(zI)return _5;zI=1;var t=typeof py=="object"&&py&&py.Object===Object&&py;return _5=t,_5}var S5,$I;function Po(){if($I)return S5;$I=1;var t=Mq(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return S5=r,S5}var T5,VI;function Mg(){if(VI)return T5;VI=1;var t=Po(),e=t.Symbol;return T5=e,T5}var A5,FI;function vce(){if(FI)return A5;FI=1;var t=Mg(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function a(s){var c=r.call(s,i),d=s[i];try{s[i]=void 0;var f=!0}catch{}var m=n.call(s);return f&&(c?s[i]=d:delete s[i]),m}return A5=a,A5}var E5,qI;function bce(){if(qI)return E5;qI=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return E5=r,E5}var N5,HI;function Vl(){if(HI)return N5;HI=1;var t=Mg(),e=vce(),r=bce(),n="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):r(c)}return N5=s,N5}var j5,GI;function Fl(){if(GI)return j5;GI=1;function t(e){return e!=null&&typeof e=="object"}return j5=t,j5}var k5,KI;function lf(){if(KI)return k5;KI=1;var t=Vl(),e=Fl(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return k5=n,k5}var C5,WI;function rE(){if(WI)return C5;WI=1;var t=ja(),e=lf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(t(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||e(a)?!0:n.test(a)||!r.test(a)||s!=null&&a in Object(s)}return C5=i,C5}var O5,XI;function du(){if(XI)return O5;XI=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return O5=t,O5}var I5,QI;function nE(){if(QI)return I5;QI=1;var t=Vl(),e=du(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==i||d==r||d==a}return I5=s,I5}var R5,YI;function xce(){if(YI)return R5;YI=1;var t=Po(),e=t["__core-js_shared__"];return R5=e,R5}var M5,ZI;function wce(){if(ZI)return M5;ZI=1;var t=xce(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return M5=r,M5}var P5,JI;function Pq(){if(JI)return P5;JI=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return P5=r,P5}var D5,eR;function _ce(){if(eR)return D5;eR=1;var t=nE(),e=wce(),r=du(),n=Pq(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,f=c.hasOwnProperty,m=RegExp("^"+d.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!r(y)||e(y))return!1;var b=t(y)?m:a;return b.test(n(y))}return D5=p,D5}var L5,tR;function Sce(){if(tR)return L5;tR=1;function t(e,r){return e==null?void 0:e[r]}return L5=t,L5}var B5,rR;function F0(){if(rR)return B5;rR=1;var t=_ce(),e=Sce();function r(n,i){var a=e(n,i);return t(a)?a:void 0}return B5=r,B5}var U5,nR;function $x(){if(nR)return U5;nR=1;var t=F0(),e=t(Object,"create");return U5=e,U5}var z5,iR;function Tce(){if(iR)return z5;iR=1;var t=$x();function e(){this.__data__=t?t(null):{},this.size=0}return z5=e,z5}var $5,aR;function Ace(){if(aR)return $5;aR=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return $5=t,$5}var V5,sR;function Ece(){if(sR)return V5;sR=1;var t=$x(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(a){var s=this.__data__;if(t){var c=s[a];return c===e?void 0:c}return n.call(s,a)?s[a]:void 0}return V5=i,V5}var F5,oR;function Nce(){if(oR)return F5;oR=1;var t=$x(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var a=this.__data__;return t?a[i]!==void 0:r.call(a,i)}return F5=n,F5}var q5,lR;function jce(){if(lR)return q5;lR=1;var t=$x(),e="__lodash_hash_undefined__";function r(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=t&&i===void 0?e:i,this}return q5=r,q5}var H5,cR;function kce(){if(cR)return H5;cR=1;var t=Tce(),e=Ace(),r=Ece(),n=Nce(),i=jce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,H5=a,H5}var G5,uR;function Cce(){if(uR)return G5;uR=1;function t(){this.__data__=[],this.size=0}return G5=t,G5}var K5,dR;function iE(){if(dR)return K5;dR=1;function t(e,r){return e===r||e!==e&&r!==r}return K5=t,K5}var W5,hR;function Vx(){if(hR)return W5;hR=1;var t=iE();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return W5=e,W5}var X5,fR;function Oce(){if(fR)return X5;fR=1;var t=Vx(),e=Array.prototype,r=e.splice;function n(i){var a=this.__data__,s=t(a,i);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():r.call(a,s,1),--this.size,!0}return X5=n,X5}var Q5,mR;function Ice(){if(mR)return Q5;mR=1;var t=Vx();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return Q5=e,Q5}var Y5,pR;function Rce(){if(pR)return Y5;pR=1;var t=Vx();function e(r){return t(this.__data__,r)>-1}return Y5=e,Y5}var Z5,gR;function Mce(){if(gR)return Z5;gR=1;var t=Vx();function e(r,n){var i=this.__data__,a=t(i,r);return a<0?(++this.size,i.push([r,n])):i[a][1]=n,this}return Z5=e,Z5}var J5,yR;function Fx(){if(yR)return J5;yR=1;var t=Cce(),e=Oce(),r=Ice(),n=Rce(),i=Mce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,J5=a,J5}var e3,vR;function aE(){if(vR)return e3;vR=1;var t=F0(),e=Po(),r=t(e,"Map");return e3=r,e3}var t3,bR;function Pce(){if(bR)return t3;bR=1;var t=kce(),e=Fx(),r=aE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return t3=n,t3}var r3,xR;function Dce(){if(xR)return r3;xR=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return r3=t,r3}var n3,wR;function qx(){if(wR)return n3;wR=1;var t=Dce();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return n3=e,n3}var i3,_R;function Lce(){if(_R)return i3;_R=1;var t=qx();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return i3=e,i3}var a3,SR;function Bce(){if(SR)return a3;SR=1;var t=qx();function e(r){return t(this,r).get(r)}return a3=e,a3}var s3,TR;function Uce(){if(TR)return s3;TR=1;var t=qx();function e(r){return t(this,r).has(r)}return s3=e,s3}var o3,AR;function zce(){if(AR)return o3;AR=1;var t=qx();function e(r,n){var i=t(this,r),a=i.size;return i.set(r,n),this.size+=i.size==a?0:1,this}return o3=e,o3}var l3,ER;function sE(){if(ER)return l3;ER=1;var t=Pce(),e=Lce(),r=Bce(),n=Uce(),i=zce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,l3=a,l3}var c3,NR;function Dq(){if(NR)return c3;NR=1;var t=sE(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,c=i?i.apply(this,s):s[0],d=a.cache;if(d.has(c))return d.get(c);var f=n.apply(this,s);return a.cache=d.set(c,f)||d,f};return a.cache=new(r.Cache||t),a}return r.Cache=t,c3=r,c3}var u3,jR;function $ce(){if(jR)return u3;jR=1;var t=Dq(),e=500;function r(n){var i=t(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return u3=r,u3}var d3,kR;function Vce(){if(kR)return d3;kR=1;var t=$ce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,c,d,f){a.push(d?f.replace(r,"$1"):c||s)}),a});return d3=n,d3}var h3,CR;function oE(){if(CR)return h3;CR=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=r(e[n],n,e);return a}return h3=t,h3}var f3,OR;function Fce(){if(OR)return f3;OR=1;var t=Mg(),e=oE(),r=ja(),n=lf(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return a?a.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return f3=s,f3}var m3,IR;function Lq(){if(IR)return m3;IR=1;var t=Fce();function e(r){return r==null?"":t(r)}return m3=e,m3}var p3,RR;function Bq(){if(RR)return p3;RR=1;var t=ja(),e=rE(),r=Vce(),n=Lq();function i(a,s){return t(a)?a:e(a,s)?[a]:r(n(a))}return p3=i,p3}var g3,MR;function Hx(){if(MR)return g3;MR=1;var t=lf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return g3=e,g3}var y3,PR;function lE(){if(PR)return y3;PR=1;var t=Bq(),e=Hx();function r(n,i){i=t(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return y3=r,y3}var v3,DR;function Uq(){if(DR)return v3;DR=1;var t=lE();function e(r,n,i){var a=r==null?void 0:t(r,n);return a===void 0?i:a}return v3=e,v3}var qce=Uq();const bs=_r(qce);var b3,LR;function Hce(){if(LR)return b3;LR=1;function t(e){return e==null}return b3=t,b3}var Gce=Hce();const Vt=_r(Gce);var x3,BR;function Kce(){if(BR)return x3;BR=1;var t=Vl(),e=ja(),r=Fl(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==n}return x3=i,x3}var Wce=Kce();const C0=_r(Wce);var Xce=nE();const Lt=_r(Xce);var Qce=du();const cf=_r(Qce);var w3={exports:{}},Tr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR;function Yce(){if(UR)return Tr;UR=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var N=w.$$typeof;switch(N){case t:switch(w=w.type,w){case r:case i:case n:case f:case m:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case p:case a:return w;default:return N}}case e:return N}}}return Tr.ContextConsumer=s,Tr.ContextProvider=a,Tr.Element=t,Tr.ForwardRef=d,Tr.Fragment=r,Tr.Lazy=y,Tr.Memo=p,Tr.Portal=e,Tr.Profiler=i,Tr.StrictMode=n,Tr.Suspense=f,Tr.SuspenseList=m,Tr.isAsyncMode=function(){return!1},Tr.isConcurrentMode=function(){return!1},Tr.isContextConsumer=function(w){return S(w)===s},Tr.isContextProvider=function(w){return S(w)===a},Tr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},Tr.isForwardRef=function(w){return S(w)===d},Tr.isFragment=function(w){return S(w)===r},Tr.isLazy=function(w){return S(w)===y},Tr.isMemo=function(w){return S(w)===p},Tr.isPortal=function(w){return S(w)===e},Tr.isProfiler=function(w){return S(w)===i},Tr.isStrictMode=function(w){return S(w)===n},Tr.isSuspense=function(w){return S(w)===f},Tr.isSuspenseList=function(w){return S(w)===m},Tr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===i||w===n||w===f||w===m||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===p||w.$$typeof===a||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},Tr.typeOf=S,Tr}var zR;function Zce(){return zR||(zR=1,w3.exports=Yce()),w3.exports}var Jce=Zce(),_3,$R;function zq(){if($R)return _3;$R=1;var t=Vl(),e=Fl(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return _3=n,_3}var S3,VR;function eue(){if(VR)return S3;VR=1;var t=zq();function e(r){return t(r)&&r!=+r}return S3=e,S3}var tue=eue();const Pg=_r(tue);var rue=zq();const nue=_r(rue);var qs=function(e){return e===0?0:e>0?1:-1},i0=function(e){return C0(e)&&e.indexOf("%")===e.length-1},at=function(e){return nue(e)&&!Pg(e)},iue=function(e){return Vt(e)},Zn=function(e){return at(e)||C0(e)},aue=0,Dg=function(e){var r=++aue;return"".concat(e||"").concat(r)},Hs=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!at(e)&&!C0(e))return n;var a;if(i0(e)){var s=e.indexOf("%");a=r*parseFloat(e.slice(0,s))/100}else a=+e;return Pg(a)&&(a=n),i&&a>r&&(a=r),a},Dc=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},sue=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},xa=function(e,r){return at(e)&&at(r)?function(n){return e+n*(r-e)}:function(){return r}};function Jv(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):bs(n,e))===r})}var oue=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,i=0,a=0,s=0,c=1/0,d=-1/0,f=0,m=0,p=0;p<r;p++)f=e[p].cx||0,m=e[p].cy||0,n+=f,i+=m,a+=f*m,s+=f*f,c=Math.min(c,f),d=Math.max(d,f);var y=r*s!==n*n?(r*a-n*i)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(i-y*n)/r}},lue=function(e,r){return at(e)&&at(r)?e-r:C0(e)&&C0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function nh(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function PT(t){"@babel/helpers - typeof";return PT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},PT(t)}var cue=["viewBox","children"],uue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],FR=["points","pathLength"],T3={svg:cue,polygon:FR,polyline:FR},cE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],eb=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(V.isValidElement(e)&&(n=e.props),!cf(n))return null;var i={};return Object.keys(n).forEach(function(a){cE.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},due=function(e,r,n){return function(i){return e(r,n,i),null}},O0=function(e,r,n){if(!cf(e)||PT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];cE.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=due(s,r,n))}),i},hue=["children"],fue=["children"];function qR(t,e){if(t==null)return{};var r=mue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var HR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Sl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},GR=null,A3=null,uE=function t(e){if(e===GR&&Array.isArray(A3))return A3;var r=[];return V.Children.forEach(e,function(n){Vt(n)||(Jce.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),A3=r,GR=e,r};function Xa(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Sl(i)}):n=[Sl(e)],uE(t).forEach(function(i){var a=bs(i,"type.displayName")||bs(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function za(t,e){var r=Xa(t,e);return r&&r[0]}var KR=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!at(n)||n<=0||!at(i)||i<=0)},pue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gue=function(e){return e&&e.type&&C0(e.type)&&pue.indexOf(e.type)>=0},yue=function(e,r,n,i){var a,s=(a=T3==null?void 0:T3[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Lt(e)&&(i&&s.includes(r)||uue.includes(r))||n&&cE.includes(r)},Nt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(V.isValidElement(e)&&(i=e.props),!cf(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;yue((c=i)===null||c===void 0?void 0:c[s],s,r,n)&&(a[s]=i[s])}),a},DT=function t(e,r){if(e===r)return!0;var n=V.Children.count(e);if(n!==V.Children.count(r))return!1;if(n===0)return!0;if(n===1)return WR(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=e[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!WR(a,s))return!1}return!0},WR=function(e,r){if(Vt(e)&&Vt(r))return!0;if(!Vt(e)&&!Vt(r)){var n=e.props||{},i=n.children,a=qR(n,hue),s=r.props||{},c=s.children,d=qR(s,fue);return i&&c?nh(a,d)&&DT(i,c):!i&&!c?nh(a,d):!1}return!1},XR=function(e,r){var n=[],i={};return uE(e).forEach(function(a,s){if(gue(a))n.push(a);else if(a){var c=Sl(a.type),d=r[c]||{},f=d.handler,m=d.once;if(f&&(!m||!i[c])){var p=f(a,c,s);n.push(p),i[c]=!0}}}),n},vue=function(e){var r=e&&e.type;return r&&HR[r]?HR[r]:null},bue=function(e,r){return uE(r).indexOf(e)},xue=["children","width","height","viewBox","className","style","title","desc"];function LT(){return LT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LT.apply(this,arguments)}function wue(t,e){if(t==null)return{};var r=_ue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _ue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function BT(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,a=t.className,s=t.style,c=t.title,d=t.desc,f=wue(t,xue),m=i||{width:r,height:n,x:0,y:0},p=Ht("recharts-surface",a);return ae.createElement("svg",LT({},Nt(f,!0,"svg"),{className:p,width:r,height:n,style:s,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),ae.createElement("title",null,c),ae.createElement("desc",null,d),e)}var Sue=["children","className"];function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UT.apply(this,arguments)}function Tue(t,e){if(t==null)return{};var r=Aue(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Aue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var vr=ae.forwardRef(function(t,e){var r=t.children,n=t.className,i=Tue(t,Sue),a=Ht("recharts-layer",n);return ae.createElement("g",UT({className:a},Nt(i,!0),{ref:e}),r)}),Tl=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},E3,QR;function Eue(){if(QR)return E3;QR=1;function t(e,r,n){var i=-1,a=e.length;r<0&&(r=-r>a?0:a+r),n=n>a?a:n,n<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+r];return s}return E3=t,E3}var N3,YR;function Nue(){if(YR)return N3;YR=1;var t=Eue();function e(r,n,i){var a=r.length;return i=i===void 0?a:i,!n&&i>=a?r:t(r,n,i)}return N3=e,N3}var j3,ZR;function $q(){if(ZR)return j3;ZR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+i+a+"]");function d(f){return c.test(f)}return j3=d,j3}var k3,JR;function jue(){if(JR)return k3;JR=1;function t(e){return e.split("")}return k3=t,k3}var C3,eM;function kue(){if(eM)return C3;eM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,a="\\ufe0e\\ufe0f",s="["+t+"]",c="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+d+")",m="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",T=f+"?",S="["+a+"]?",w="(?:"+b+"(?:"+[m,p,y].join("|")+")"+S+T+")*",N=S+T+w,I="(?:"+[m+c+"?",c,p,y,s].join("|")+")",C=RegExp(d+"(?="+d+")|"+I+N,"g");function z(O){return O.match(C)||[]}return C3=z,C3}var O3,tM;function Cue(){if(tM)return O3;tM=1;var t=jue(),e=$q(),r=kue();function n(i){return e(i)?r(i):t(i)}return O3=n,O3}var I3,rM;function Oue(){if(rM)return I3;rM=1;var t=Nue(),e=$q(),r=Cue(),n=Lq();function i(a){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),f=c?t(c,1).join(""):s.slice(1);return d[a]()+f}}return I3=i,I3}var R3,nM;function Iue(){if(nM)return R3;nM=1;var t=Oue(),e=t("toUpperCase");return R3=e,R3}var Rue=Iue();const Gx=_r(Rue);function Qr(t){return function(){return t}}const Vq=Math.cos,tb=Math.sin,Ys=Math.sqrt,rb=Math.PI,Kx=2*rb,zT=Math.PI,$T=2*zT,Qu=1e-6,Mue=$T-Qu;function Fq(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Pue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fq;const r=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Due{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fq:Pue(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,a,s){this._append`C${+e},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,n,i,a){if(e=+e,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,d=n-e,f=i-r,m=s-e,p=c-r,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>Qu)if(!(Math.abs(p*d-f*m)>Qu)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let b=n-s,T=i-c,S=d*d+f*f,w=b*b+T*T,N=Math.sqrt(S),I=Math.sqrt(y),C=a*Math.tan((zT-Math.acos((S+y-w)/(2*N*I)))/2),z=C/I,O=C/N;Math.abs(z-1)>Qu&&this._append`L${e+z*m},${r+z*p}`,this._append`A${a},${a},0,0,${+(p*b>m*T)},${this._x1=e+O*d},${this._y1=r+O*f}`}}arc(e,r,n,i,a,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),d=n*Math.sin(i),f=e+c,m=r+d,p=1^s,y=s?i-a:a-i;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Qu||Math.abs(this._y1-m)>Qu)&&this._append`L${f},${m}`,n&&(y<0&&(y=y%$T+$T),y>Mue?this._append`A${n},${n},0,1,${p},${e-c},${r-d}A${n},${n},0,1,${p},${this._x1=f},${this._y1=m}`:y>Qu&&this._append`A${n},${n},0,${+(y>=zT)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function dE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Due(e)}function hE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qq(t){this._context=t}qq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Wx(t){return new qq(t)}function Hq(t){return t[0]}function Gq(t){return t[1]}function Kq(t,e){var r=Qr(!0),n=null,i=Wx,a=null,s=dE(c);t=typeof t=="function"?t:t===void 0?Hq:Qr(t),e=typeof e=="function"?e:e===void 0?Gq:Qr(e);function c(d){var f,m=(d=hE(d)).length,p,y=!1,b;for(n==null&&(a=i(b=s())),f=0;f<=m;++f)!(f<m&&r(p=d[f],f,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(p,f,d),+e(p,f,d));if(b)return a=null,b+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Qr(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Qr(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Qr(!!d),c):r},c.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),c):i},c.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),c):n},c}function Ly(t,e,r){var n=null,i=Qr(!0),a=null,s=Wx,c=null,d=dE(f);t=typeof t=="function"?t:t===void 0?Hq:Qr(+t),e=typeof e=="function"?e:Qr(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?Gq:Qr(+r);function f(p){var y,b,T,S=(p=hE(p)).length,w,N=!1,I,C=new Array(S),z=new Array(S);for(a==null&&(c=s(I=d())),y=0;y<=S;++y){if(!(y<S&&i(w=p[y],y,p))===N)if(N=!N)b=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=b;--T)c.point(C[T],z[T]);c.lineEnd(),c.areaEnd()}N&&(C[y]=+t(w,y,p),z[y]=+e(w,y,p),c.point(n?+n(w,y,p):C[y],r?+r(w,y,p):z[y]))}if(I)return c=null,I+""||null}function m(){return Kq().defined(i).curve(s).context(a)}return f.x=function(p){return arguments.length?(t=typeof p=="function"?p:Qr(+p),n=null,f):t},f.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Qr(+p),f):t},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Qr(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Qr(+p),r=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Qr(+p),f):e},f.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Qr(+p),f):r},f.lineX0=f.lineY0=function(){return m().x(t).y(e)},f.lineY1=function(){return m().x(t).y(r)},f.lineX1=function(){return m().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Qr(!!p),f):i},f.curve=function(p){return arguments.length?(s=p,a!=null&&(c=s(a)),f):s},f.context=function(p){return arguments.length?(p==null?a=c=null:c=s(a=p),f):a},f}class Wq{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function Lue(t){return new Wq(t,!0)}function Bue(t){return new Wq(t,!1)}const fE={draw(t,e){const r=Ys(e/rb);t.moveTo(r,0),t.arc(0,0,r,0,Kx)}},Uue={draw(t,e){const r=Ys(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},Xq=Ys(1/3),zue=Xq*2,$ue={draw(t,e){const r=Ys(e/zue),n=r*Xq;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},Vue={draw(t,e){const r=Ys(e),n=-r/2;t.rect(n,n,r,r)}},Fue=.8908130915292852,Qq=tb(rb/10)/tb(7*rb/10),que=tb(Kx/10)*Qq,Hue=-Vq(Kx/10)*Qq,Gue={draw(t,e){const r=Ys(e*Fue),n=que*r,i=Hue*r;t.moveTo(0,-r),t.lineTo(n,i);for(let a=1;a<5;++a){const s=Kx*a/5,c=Vq(s),d=tb(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*i,d*n+c*i)}t.closePath()}},M3=Ys(3),Kue={draw(t,e){const r=-Ys(e/(M3*3));t.moveTo(0,r*2),t.lineTo(-M3*r,-r),t.lineTo(M3*r,-r),t.closePath()}},ds=-.5,hs=Ys(3)/2,VT=1/Ys(12),Wue=(VT/2+1)*3,Xue={draw(t,e){const r=Ys(e/Wue),n=r/2,i=r*VT,a=n,s=r*VT+r,c=-a,d=s;t.moveTo(n,i),t.lineTo(a,s),t.lineTo(c,d),t.lineTo(ds*n-hs*i,hs*n+ds*i),t.lineTo(ds*a-hs*s,hs*a+ds*s),t.lineTo(ds*c-hs*d,hs*c+ds*d),t.lineTo(ds*n+hs*i,ds*i-hs*n),t.lineTo(ds*a+hs*s,ds*s-hs*a),t.lineTo(ds*c+hs*d,ds*d-hs*c),t.closePath()}};function Que(t,e){let r=null,n=dE(i);t=typeof t=="function"?t:Qr(t||fE),e=typeof e=="function"?e:Qr(e===void 0?64:+e);function i(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Qr(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Qr(+a),i):e},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function nb(){}function ib(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function Yq(t){this._context=t}Yq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ib(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ib(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Yue(t){return new Yq(t)}function Zq(t){this._context=t}Zq.prototype={areaStart:nb,areaEnd:nb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ib(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Zue(t){return new Zq(t)}function Jq(t){this._context=t}Jq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ib(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jue(t){return new Jq(t)}function eH(t){this._context=t}eH.prototype={areaStart:nb,areaEnd:nb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function e0e(t){return new eH(t)}function iM(t){return t<0?-1:1}function aM(t,e,r){var n=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(n||i<0&&-0),s=(r-t._y1)/(i||n<0&&-0),c=(a*i+s*n)/(n+i);return(iM(a)+iM(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function sM(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function P3(t,e,r){var n=t._x0,i=t._y0,a=t._x1,s=t._y1,c=(a-n)/3;t._context.bezierCurveTo(n+c,i+c*e,a-c,s-c*r,a,s)}function ab(t){this._context=t}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P3(this,this._t0,sM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,P3(this,sM(this,r=aM(this,t,e)),r);break;default:P3(this,this._t0,r=aM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function tH(t){this._context=new rH(t)}(tH.prototype=Object.create(ab.prototype)).point=function(t,e){ab.prototype.point.call(this,e,t)};function rH(t){this._context=t}rH.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,a){this._context.bezierCurveTo(e,t,n,r,a,i)}};function t0e(t){return new ab(t)}function r0e(t){return new tH(t)}function nH(t){this._context=t}nH.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=oM(t),i=oM(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function oM(t){var e,r=t.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[r-1]=s[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function n0e(t){return new nH(t)}function Xx(t,e){this._context=t,this._t=e}Xx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function i0e(t){return new Xx(t,.5)}function a0e(t){return new Xx(t,0)}function s0e(t){return new Xx(t,1)}function Ah(t,e){if((s=t.length)>1)for(var r=1,n,i,a=t[e[0]],s,c=a.length;r<s;++r)for(i=a,a=t[e[r]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function FT(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function o0e(t,e){return t[e]}function l0e(t){const e=[];return e.key=t,e}function c0e(){var t=Qr([]),e=FT,r=Ah,n=o0e;function i(a){var s=Array.from(t.apply(this,arguments),l0e),c,d=s.length,f=-1,m;for(const p of a)for(c=0,++f;c<d;++c)(s[c][f]=[0,+n(p,s[c].key,f,a)]).data=p;for(c=0,m=hE(e(s));c<d;++c)s[m[c]].index=c;return r(s,m),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Qr(Array.from(a)),i):t},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Qr(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?FT:typeof a=="function"?a:Qr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(r=a??Ah,i):r},i}function u0e(t,e){if((n=t.length)>0){for(var r,n,i=0,a=t[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=t[r][i][1]||0;if(s)for(r=0;r<n;++r)t[r][i][1]/=s}Ah(t,e)}}function d0e(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,a=n.length;r<a;++r){for(var s=0,c=0;s<i;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}Ah(t,e)}}function h0e(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var c=0,d=0,f=0;c<s;++c){for(var m=t[e[c]],p=m[n][1]||0,y=m[n-1][1]||0,b=(p-y)/2,T=0;T<c;++T){var S=t[e[T]],w=S[n][1]||0,N=S[n-1][1]||0;b+=w-N}d+=p,f+=b*p}i[n-1][1]+=i[n-1][0]=r,d&&(r-=f/d)}i[n-1][1]+=i[n-1][0]=r,Ah(t,e)}}function kp(t){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(t)}var f0e=["type","size","sizeType"];function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qT.apply(this,arguments)}function lM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(r),!0).forEach(function(n){m0e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m0e(t,e,r){return e=p0e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p0e(t){var e=g0e(t,"string");return kp(e)=="symbol"?e:e+""}function g0e(t,e){if(kp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y0e(t,e){if(t==null)return{};var r=v0e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function v0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var iH={symbolCircle:fE,symbolCross:Uue,symbolDiamond:$ue,symbolSquare:Vue,symbolStar:Gue,symbolTriangle:Kue,symbolWye:Xue},b0e=Math.PI/180,x0e=function(e){var r="symbol".concat(Gx(e));return iH[r]||fE},w0e=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*b0e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},_0e=function(e,r){iH["symbol".concat(Gx(e))]=r},Qx=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,a=i===void 0?64:i,s=e.sizeType,c=s===void 0?"area":s,d=y0e(e,f0e),f=cM(cM({},d),{},{type:n,size:a,sizeType:c}),m=function(){var w=x0e(n),N=Que().type(w).size(w0e(a,c,n));return N()},p=f.className,y=f.cx,b=f.cy,T=Nt(f,!0);return y===+y&&b===+b&&a===+a?ae.createElement("path",qT({},T,{className:Ht("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(b,")"),d:m()})):null};Qx.registerSymbol=_0e;function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HT.apply(this,arguments)}function uM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function S0e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(r),!0).forEach(function(n){Cp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uM(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function T0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A0e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sH(n.key),n)}}function E0e(t,e,r){return e&&A0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function N0e(t,e,r){return e=sb(e),j0e(t,aH()?Reflect.construct(e,r||[],sb(t).constructor):e.apply(t,r))}function j0e(t,e){if(e&&(Eh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k0e(t)}function k0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aH=function(){return!!t})()}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sb(t)}function C0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GT(t,e)}function Cp(t,e,r){return e=sH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sH(t){var e=O0e(t,"string");return Eh(e)=="symbol"?e:e+""}function O0e(t,e){if(Eh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fs=32,mE=(function(t){function e(){return T0e(this,e),N0e(this,e,arguments)}return C0e(e,t),E0e(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=fs/2,s=fs/6,c=fs/3,d=n.inactive?i:n.color;if(n.type==="plainline")return ae.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:fs,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return ae.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(fs,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return ae.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(fs/8,"h").concat(fs,"v").concat(fs*3/4,"h").concat(-fs,"z"),className:"recharts-legend-icon"});if(ae.isValidElement(n.legendIcon)){var f=S0e({},n);return delete f.legendIcon,ae.cloneElement(n.legendIcon,f)}return ae.createElement(Qx,{fill:d,cx:a,cy:a,size:fs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,d=i.formatter,f=i.inactiveColor,m={x:0,y:0,width:fs,height:fs},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(b,T){var S=b.formatter||d,w=Ht(Cp(Cp({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",b.inactive));if(b.type==="none")return null;var N=Lt(b.value)?null:b.value;Tl(!Lt(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=b.inactive?f:b.color;return ae.createElement("li",HT({className:w,style:p,key:"legend-item-".concat(T)},O0(n.props,b,T)),ae.createElement(BT,{width:s,height:s,viewBox:m,style:y},n.renderIcon(b)),ae.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},S?S(N,b,T):N))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ae.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(V.PureComponent);Cp(mE,"displayName","Legend");Cp(mE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var D3,dM;function I0e(){if(dM)return D3;dM=1;var t=Fx();function e(){this.__data__=new t,this.size=0}return D3=e,D3}var L3,hM;function R0e(){if(hM)return L3;hM=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return L3=t,L3}var B3,fM;function M0e(){if(fM)return B3;fM=1;function t(e){return this.__data__.get(e)}return B3=t,B3}var U3,mM;function P0e(){if(mM)return U3;mM=1;function t(e){return this.__data__.has(e)}return U3=t,U3}var z3,pM;function D0e(){if(pM)return z3;pM=1;var t=Fx(),e=aE(),r=sE(),n=200;function i(a,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([a,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(a,s),this.size=c.size,this}return z3=i,z3}var $3,gM;function oH(){if(gM)return $3;gM=1;var t=Fx(),e=I0e(),r=R0e(),n=M0e(),i=P0e(),a=D0e();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,$3=s,$3}var V3,yM;function L0e(){if(yM)return V3;yM=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return V3=e,V3}var F3,vM;function B0e(){if(vM)return F3;vM=1;function t(e){return this.__data__.has(e)}return F3=t,F3}var q3,bM;function lH(){if(bM)return q3;bM=1;var t=sE(),e=L0e(),r=B0e();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new t;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,q3=n,q3}var H3,xM;function cH(){if(xM)return H3;xM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return H3=t,H3}var G3,wM;function uH(){if(wM)return G3;wM=1;function t(e,r){return e.has(r)}return G3=t,G3}var K3,_M;function dH(){if(_M)return K3;_M=1;var t=lH(),e=cH(),r=uH(),n=1,i=2;function a(s,c,d,f,m,p){var y=d&n,b=s.length,T=c.length;if(b!=T&&!(y&&T>b))return!1;var S=p.get(s),w=p.get(c);if(S&&w)return S==c&&w==s;var N=-1,I=!0,C=d&i?new t:void 0;for(p.set(s,c),p.set(c,s);++N<b;){var z=s[N],O=c[N];if(f)var B=y?f(O,z,N,c,s,p):f(z,O,N,s,c,p);if(B!==void 0){if(B)continue;I=!1;break}if(C){if(!e(c,function(E,A){if(!r(C,A)&&(z===E||m(z,E,d,f,p)))return C.push(A)})){I=!1;break}}else if(!(z===O||m(z,O,d,f,p))){I=!1;break}}return p.delete(s),p.delete(c),I}return K3=a,K3}var W3,SM;function U0e(){if(SM)return W3;SM=1;var t=Po(),e=t.Uint8Array;return W3=e,W3}var X3,TM;function z0e(){if(TM)return X3;TM=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,a){n[++r]=[a,i]}),n}return X3=t,X3}var Q3,AM;function pE(){if(AM)return Q3;AM=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return Q3=t,Q3}var Y3,EM;function $0e(){if(EM)return Y3;EM=1;var t=Mg(),e=U0e(),r=iE(),n=dH(),i=z0e(),a=pE(),s=1,c=2,d="[object Boolean]",f="[object Date]",m="[object Error]",p="[object Map]",y="[object Number]",b="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",N="[object ArrayBuffer]",I="[object DataView]",C=t?t.prototype:void 0,z=C?C.valueOf:void 0;function O(B,E,A,R,F,D,L){switch(A){case I:if(B.byteLength!=E.byteLength||B.byteOffset!=E.byteOffset)return!1;B=B.buffer,E=E.buffer;case N:return!(B.byteLength!=E.byteLength||!D(new e(B),new e(E)));case d:case f:case y:return r(+B,+E);case m:return B.name==E.name&&B.message==E.message;case b:case S:return B==E+"";case p:var M=i;case T:var Q=R&s;if(M||(M=a),B.size!=E.size&&!Q)return!1;var Z=L.get(B);if(Z)return Z==E;R|=c,L.set(B,E);var W=n(M(B),M(E),R,F,D,L);return L.delete(B),W;case w:if(z)return z.call(B)==z.call(E)}return!1}return Y3=O,Y3}var Z3,NM;function hH(){if(NM)return Z3;NM=1;function t(e,r){for(var n=-1,i=r.length,a=e.length;++n<i;)e[a+n]=r[n];return e}return Z3=t,Z3}var J3,jM;function V0e(){if(jM)return J3;jM=1;var t=hH(),e=ja();function r(n,i,a){var s=i(n);return e(n)?s:t(s,a(n))}return J3=r,J3}var e6,kM;function F0e(){if(kM)return e6;kM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var c=e[n];r(c,n,e)&&(s[a++]=c)}return s}return e6=t,e6}var t6,CM;function q0e(){if(CM)return t6;CM=1;function t(){return[]}return t6=t,t6}var r6,OM;function H0e(){if(OM)return r6;OM=1;var t=F0e(),e=q0e(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),t(i(s),function(c){return n.call(s,c)}))}:e;return r6=a,r6}var n6,IM;function G0e(){if(IM)return n6;IM=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return n6=t,n6}var i6,RM;function K0e(){if(RM)return i6;RM=1;var t=Vl(),e=Fl(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return i6=n,i6}var a6,MM;function gE(){if(MM)return a6;MM=1;var t=K0e(),e=Fl(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return a6=a,a6}var Dm={exports:{}},s6,PM;function W0e(){if(PM)return s6;PM=1;function t(){return!1}return s6=t,s6}Dm.exports;var DM;function fH(){return DM||(DM=1,(function(t,e){var r=Po(),n=W0e(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||n;t.exports=f})(Dm,Dm.exports)),Dm.exports}var o6,LM;function yE(){if(LM)return o6;LM=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var a=typeof n;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return o6=r,o6}var l6,BM;function vE(){if(BM)return l6;BM=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return l6=e,l6}var c6,UM;function X0e(){if(UM)return c6;UM=1;var t=Vl(),e=vE(),r=Fl(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",m="[object Number]",p="[object Object]",y="[object RegExp]",b="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",N="[object DataView]",I="[object Float32Array]",C="[object Float64Array]",z="[object Int8Array]",O="[object Int16Array]",B="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",R="[object Uint16Array]",F="[object Uint32Array]",D={};D[I]=D[C]=D[z]=D[O]=D[B]=D[E]=D[A]=D[R]=D[F]=!0,D[n]=D[i]=D[w]=D[a]=D[N]=D[s]=D[c]=D[d]=D[f]=D[m]=D[p]=D[y]=D[b]=D[T]=D[S]=!1;function L(M){return r(M)&&e(M.length)&&!!D[t(M)]}return c6=L,c6}var u6,zM;function mH(){if(zM)return u6;zM=1;function t(e){return function(r){return e(r)}}return u6=t,u6}var Lm={exports:{}};Lm.exports;var $M;function Q0e(){return $M||($M=1,(function(t,e){var r=Mq(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===n,s=a&&r.process,c=(function(){try{var d=i&&i.require&&i.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(Lm,Lm.exports)),Lm.exports}var d6,VM;function pH(){if(VM)return d6;VM=1;var t=X0e(),e=mH(),r=Q0e(),n=r&&r.isTypedArray,i=n?e(n):t;return d6=i,d6}var h6,FM;function Y0e(){if(FM)return h6;FM=1;var t=G0e(),e=gE(),r=ja(),n=fH(),i=yE(),a=pH(),s=Object.prototype,c=s.hasOwnProperty;function d(f,m){var p=r(f),y=!p&&e(f),b=!p&&!y&&n(f),T=!p&&!y&&!b&&a(f),S=p||y||b||T,w=S?t(f.length,String):[],N=w.length;for(var I in f)(m||c.call(f,I))&&!(S&&(I=="length"||b&&(I=="offset"||I=="parent")||T&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||i(I,N)))&&w.push(I);return w}return h6=d,h6}var f6,qM;function Z0e(){if(qM)return f6;qM=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return f6=e,f6}var m6,HM;function gH(){if(HM)return m6;HM=1;function t(e,r){return function(n){return e(r(n))}}return m6=t,m6}var p6,GM;function J0e(){if(GM)return p6;GM=1;var t=gH(),e=t(Object.keys,Object);return p6=e,p6}var g6,KM;function ede(){if(KM)return g6;KM=1;var t=Z0e(),e=J0e(),r=Object.prototype,n=r.hasOwnProperty;function i(a){if(!t(a))return e(a);var s=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&s.push(c);return s}return g6=i,g6}var y6,WM;function Lg(){if(WM)return y6;WM=1;var t=nE(),e=vE();function r(n){return n!=null&&e(n.length)&&!t(n)}return y6=r,y6}var v6,XM;function Yx(){if(XM)return v6;XM=1;var t=Y0e(),e=ede(),r=Lg();function n(i){return r(i)?t(i):e(i)}return v6=n,v6}var b6,QM;function tde(){if(QM)return b6;QM=1;var t=V0e(),e=H0e(),r=Yx();function n(i){return t(i,r,e)}return b6=n,b6}var x6,YM;function rde(){if(YM)return x6;YM=1;var t=tde(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(a,s,c,d,f,m){var p=c&e,y=t(a),b=y.length,T=t(s),S=T.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var N=y[w];if(!(p?N in s:n.call(s,N)))return!1}var I=m.get(a),C=m.get(s);if(I&&C)return I==s&&C==a;var z=!0;m.set(a,s),m.set(s,a);for(var O=p;++w<b;){N=y[w];var B=a[N],E=s[N];if(d)var A=p?d(E,B,N,s,a,m):d(B,E,N,a,s,m);if(!(A===void 0?B===E||f(B,E,c,d,m):A)){z=!1;break}O||(O=N=="constructor")}if(z&&!O){var R=a.constructor,F=s.constructor;R!=F&&"constructor"in a&&"constructor"in s&&!(typeof R=="function"&&R instanceof R&&typeof F=="function"&&F instanceof F)&&(z=!1)}return m.delete(a),m.delete(s),z}return x6=i,x6}var w6,ZM;function nde(){if(ZM)return w6;ZM=1;var t=F0(),e=Po(),r=t(e,"DataView");return w6=r,w6}var _6,JM;function ide(){if(JM)return _6;JM=1;var t=F0(),e=Po(),r=t(e,"Promise");return _6=r,_6}var S6,eP;function yH(){if(eP)return S6;eP=1;var t=F0(),e=Po(),r=t(e,"Set");return S6=r,S6}var T6,tP;function ade(){if(tP)return T6;tP=1;var t=F0(),e=Po(),r=t(e,"WeakMap");return T6=r,T6}var A6,rP;function sde(){if(rP)return A6;rP=1;var t=nde(),e=aE(),r=ide(),n=yH(),i=ade(),a=Vl(),s=Pq(),c="[object Map]",d="[object Object]",f="[object Promise]",m="[object Set]",p="[object WeakMap]",y="[object DataView]",b=s(t),T=s(e),S=s(r),w=s(n),N=s(i),I=a;return(t&&I(new t(new ArrayBuffer(1)))!=y||e&&I(new e)!=c||r&&I(r.resolve())!=f||n&&I(new n)!=m||i&&I(new i)!=p)&&(I=function(C){var z=a(C),O=z==d?C.constructor:void 0,B=O?s(O):"";if(B)switch(B){case b:return y;case T:return c;case S:return f;case w:return m;case N:return p}return z}),A6=I,A6}var E6,nP;function ode(){if(nP)return E6;nP=1;var t=oH(),e=dH(),r=$0e(),n=rde(),i=sde(),a=ja(),s=fH(),c=pH(),d=1,f="[object Arguments]",m="[object Array]",p="[object Object]",y=Object.prototype,b=y.hasOwnProperty;function T(S,w,N,I,C,z){var O=a(S),B=a(w),E=O?m:i(S),A=B?m:i(w);E=E==f?p:E,A=A==f?p:A;var R=E==p,F=A==p,D=E==A;if(D&&s(S)){if(!s(w))return!1;O=!0,R=!1}if(D&&!R)return z||(z=new t),O||c(S)?e(S,w,N,I,C,z):r(S,w,E,N,I,C,z);if(!(N&d)){var L=R&&b.call(S,"__wrapped__"),M=F&&b.call(w,"__wrapped__");if(L||M){var Q=L?S.value():S,Z=M?w.value():w;return z||(z=new t),C(Q,Z,N,I,z)}}return D?(z||(z=new t),n(S,w,N,I,C,z)):!1}return E6=T,E6}var N6,iP;function bE(){if(iP)return N6;iP=1;var t=ode(),e=Fl();function r(n,i,a,s,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,a,s,r,c)}return N6=r,N6}var j6,aP;function lde(){if(aP)return j6;aP=1;var t=oH(),e=bE(),r=1,n=2;function i(a,s,c,d){var f=c.length,m=f,p=!d;if(a==null)return!m;for(a=Object(a);f--;){var y=c[f];if(p&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++f<m;){y=c[f];var b=y[0],T=a[b],S=y[1];if(p&&y[2]){if(T===void 0&&!(b in a))return!1}else{var w=new t;if(d)var N=d(T,S,b,a,s,w);if(!(N===void 0?e(S,T,r|n,d,w):N))return!1}}return!0}return j6=i,j6}var k6,sP;function vH(){if(sP)return k6;sP=1;var t=du();function e(r){return r===r&&!t(r)}return k6=e,k6}var C6,oP;function cde(){if(oP)return C6;oP=1;var t=vH(),e=Yx();function r(n){for(var i=e(n),a=i.length;a--;){var s=i[a],c=n[s];i[a]=[s,c,t(c)]}return i}return C6=r,C6}var O6,lP;function bH(){if(lP)return O6;lP=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return O6=t,O6}var I6,cP;function ude(){if(cP)return I6;cP=1;var t=lde(),e=cde(),r=bH();function n(i){var a=e(i);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===i||t(s,i,a)}}return I6=n,I6}var R6,uP;function dde(){if(uP)return R6;uP=1;function t(e,r){return e!=null&&r in Object(e)}return R6=t,R6}var M6,dP;function hde(){if(dP)return M6;dP=1;var t=Bq(),e=gE(),r=ja(),n=yE(),i=vE(),a=Hx();function s(c,d,f){d=t(d,c);for(var m=-1,p=d.length,y=!1;++m<p;){var b=a(d[m]);if(!(y=c!=null&&f(c,b)))break;c=c[b]}return y||++m!=p?y:(p=c==null?0:c.length,!!p&&i(p)&&n(b,p)&&(r(c)||e(c)))}return M6=s,M6}var P6,hP;function fde(){if(hP)return P6;hP=1;var t=dde(),e=hde();function r(n,i){return n!=null&&e(n,i,t)}return P6=r,P6}var D6,fP;function mde(){if(fP)return D6;fP=1;var t=bE(),e=Uq(),r=fde(),n=rE(),i=vH(),a=bH(),s=Hx(),c=1,d=2;function f(m,p){return n(m)&&i(p)?a(s(m),p):function(y){var b=e(y,m);return b===void 0&&b===p?r(y,m):t(p,b,c|d)}}return D6=f,D6}var L6,mP;function uf(){if(mP)return L6;mP=1;function t(e){return e}return L6=t,L6}var B6,pP;function pde(){if(pP)return B6;pP=1;function t(e){return function(r){return r==null?void 0:r[e]}}return B6=t,B6}var U6,gP;function gde(){if(gP)return U6;gP=1;var t=lE();function e(r){return function(n){return t(n,r)}}return U6=e,U6}var z6,yP;function yde(){if(yP)return z6;yP=1;var t=pde(),e=gde(),r=rE(),n=Hx();function i(a){return r(a)?t(n(a)):e(a)}return z6=i,z6}var $6,vP;function Do(){if(vP)return $6;vP=1;var t=ude(),e=mde(),r=uf(),n=ja(),i=yde();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):i(s)}return $6=a,$6}var V6,bP;function xH(){if(bP)return V6;bP=1;function t(e,r,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(r(e[s],s,e))return s;return-1}return V6=t,V6}var F6,xP;function vde(){if(xP)return F6;xP=1;function t(e){return e!==e}return F6=t,F6}var q6,wP;function bde(){if(wP)return q6;wP=1;function t(e,r,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===r)return i;return-1}return q6=t,q6}var H6,_P;function xde(){if(_P)return H6;_P=1;var t=xH(),e=vde(),r=bde();function n(i,a,s){return a===a?r(i,a,s):t(i,e,s)}return H6=n,H6}var G6,SP;function wde(){if(SP)return G6;SP=1;var t=xde();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return G6=e,G6}var K6,TP;function _de(){if(TP)return K6;TP=1;function t(e,r,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(r,e[i]))return!0;return!1}return K6=t,K6}var W6,AP;function Sde(){if(AP)return W6;AP=1;function t(){}return W6=t,W6}var X6,EP;function Tde(){if(EP)return X6;EP=1;var t=yH(),e=Sde(),r=pE(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(a){return new t(a)}:e;return X6=i,X6}var Q6,NP;function Ade(){if(NP)return Q6;NP=1;var t=lH(),e=wde(),r=_de(),n=uH(),i=Tde(),a=pE(),s=200;function c(d,f,m){var p=-1,y=e,b=d.length,T=!0,S=[],w=S;if(m)T=!1,y=r;else if(b>=s){var N=f?null:i(d);if(N)return a(N);T=!1,y=n,w=new t}else w=f?[]:S;e:for(;++p<b;){var I=d[p],C=f?f(I):I;if(I=m||I!==0?I:0,T&&C===C){for(var z=w.length;z--;)if(w[z]===C)continue e;f&&w.push(C),S.push(I)}else y(w,C,m)||(w!==S&&w.push(C),S.push(I))}return S}return Q6=c,Q6}var Y6,jP;function Ede(){if(jP)return Y6;jP=1;var t=Do(),e=Ade();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return Y6=r,Y6}var Nde=Ede();const kP=_r(Nde);function wH(t,e,r){return e===!0?kP(t,r):Lt(e)?kP(t,e):t}function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}var jde=["ref"];function CP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function al(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(r),!0).forEach(function(n){Zx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SH(n.key),n)}}function Cde(t,e,r){return e&&OP(t.prototype,e),r&&OP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ode(t,e,r){return e=ob(e),Ide(t,_H()?Reflect.construct(e,r||[],ob(t).constructor):e.apply(t,r))}function Ide(t,e){if(e&&(Nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rde(t)}function Rde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _H(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_H=function(){return!!t})()}function ob(t){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(t)}function Mde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KT(t,e)}function KT(t,e){return KT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KT(t,e)}function Zx(t,e,r){return e=SH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SH(t){var e=Pde(t,"string");return Nh(e)=="symbol"?e:e+""}function Pde(t,e){if(Nh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Dde(t,e){if(t==null)return{};var r=Lde(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Lde(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Bde(t){return t.value}function Ude(t,e){if(ae.isValidElement(t))return ae.cloneElement(t,e);if(typeof t=="function")return ae.createElement(t,e);e.ref;var r=Dde(e,jde);return ae.createElement(mE,r)}var IP=1,ih=(function(t){function e(){var r;kde(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=Ode(this,e,[].concat(i)),Zx(r,"lastBoundingBox",{width:-1,height:-1}),r}return Mde(e,t),Cde(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>IP||Math.abs(i.height-this.lastBoundingBox.height)>IP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?al({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,d=i.margin,f=i.chartWidth,m=i.chartHeight,p,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var b=this.getBBoxSnapshot();p={left:((f||0)-b.width)/2}}else p=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((m||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return al(al({},p),y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,c=i.height,d=i.wrapperStyle,f=i.payloadUniqBy,m=i.payload,p=al(al({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ae.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(b){n.wrapperNode=b}},Ude(a,al(al({},this.props),{},{payload:wH(m,f,Bde)})))}}],[{key:"getWithHeight",value:function(n,i){var a=al(al({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&at(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])})(V.PureComponent);Zx(ih,"displayName","Legend");Zx(ih,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Z6,RP;function zde(){if(RP)return Z6;RP=1;var t=Mg(),e=gE(),r=ja(),n=t?t.isConcatSpreadable:void 0;function i(a){return r(a)||e(a)||!!(n&&a&&a[n])}return Z6=i,Z6}var J6,MP;function TH(){if(MP)return J6;MP=1;var t=hH(),e=zde();function r(n,i,a,s,c){var d=-1,f=n.length;for(a||(a=e),c||(c=[]);++d<f;){var m=n[d];i>0&&a(m)?i>1?r(m,i-1,a,s,c):t(c,m):s||(c[c.length]=m)}return c}return J6=r,J6}var e_,PP;function $de(){if(PP)return e_;PP=1;function t(e){return function(r,n,i){for(var a=-1,s=Object(r),c=i(r),d=c.length;d--;){var f=c[e?d:++a];if(n(s[f],f,s)===!1)break}return r}}return e_=t,e_}var t_,DP;function Vde(){if(DP)return t_;DP=1;var t=$de(),e=t();return t_=e,t_}var r_,LP;function AH(){if(LP)return r_;LP=1;var t=Vde(),e=Yx();function r(n,i){return n&&t(n,i,e)}return r_=r,r_}var n_,BP;function Fde(){if(BP)return n_;BP=1;var t=Lg();function e(r,n){return function(i,a){if(i==null)return i;if(!t(i))return r(i,a);for(var s=i.length,c=n?s:-1,d=Object(i);(n?c--:++c<s)&&a(d[c],c,d)!==!1;);return i}}return n_=e,n_}var i_,UP;function xE(){if(UP)return i_;UP=1;var t=AH(),e=Fde(),r=e(t);return i_=r,i_}var a_,zP;function EH(){if(zP)return a_;zP=1;var t=xE(),e=Lg();function r(n,i){var a=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,f){s[++a]=i(c,d,f)}),s}return a_=r,a_}var s_,$P;function qde(){if($P)return s_;$P=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return s_=t,s_}var o_,VP;function Hde(){if(VP)return o_;VP=1;var t=lf();function e(r,n){if(r!==n){var i=r!==void 0,a=r===null,s=r===r,c=t(r),d=n!==void 0,f=n===null,m=n===n,p=t(n);if(!f&&!p&&!c&&r>n||c&&d&&m&&!f&&!p||a&&d&&m||!i&&m||!s)return 1;if(!a&&!c&&!p&&r<n||p&&i&&s&&!a&&!c||f&&i&&s||!d&&s||!m)return-1}return 0}return o_=e,o_}var l_,FP;function Gde(){if(FP)return l_;FP=1;var t=Hde();function e(r,n,i){for(var a=-1,s=r.criteria,c=n.criteria,d=s.length,f=i.length;++a<d;){var m=t(s[a],c[a]);if(m){if(a>=f)return m;var p=i[a];return m*(p=="desc"?-1:1)}}return r.index-n.index}return l_=e,l_}var c_,qP;function Kde(){if(qP)return c_;qP=1;var t=oE(),e=lE(),r=Do(),n=EH(),i=qde(),a=mH(),s=Gde(),c=uf(),d=ja();function f(m,p,y){p.length?p=t(p,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):p=[c];var b=-1;p=t(p,a(r));var T=n(m,function(S,w,N){var I=t(p,function(C){return C(S)});return{criteria:I,index:++b,value:S}});return i(T,function(S,w){return s(S,w,y)})}return c_=f,c_}var u_,HP;function Wde(){if(HP)return u_;HP=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return u_=t,u_}var d_,GP;function Xde(){if(GP)return d_;GP=1;var t=Wde(),e=Math.max;function r(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,c=-1,d=e(s.length-i,0),f=Array(d);++c<d;)f[c]=s[i+c];c=-1;for(var m=Array(i+1);++c<i;)m[c]=s[c];return m[i]=a(f),t(n,this,m)}}return d_=r,d_}var h_,KP;function Qde(){if(KP)return h_;KP=1;function t(e){return function(){return e}}return h_=t,h_}var f_,WP;function NH(){if(WP)return f_;WP=1;var t=F0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return f_=e,f_}var m_,XP;function Yde(){if(XP)return m_;XP=1;var t=Qde(),e=NH(),r=uf(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return m_=n,m_}var p_,QP;function Zde(){if(QP)return p_;QP=1;var t=800,e=16,r=Date.now;function n(i){var a=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return p_=n,p_}var g_,YP;function Jde(){if(YP)return g_;YP=1;var t=Yde(),e=Zde(),r=e(t);return g_=r,g_}var y_,ZP;function ehe(){if(ZP)return y_;ZP=1;var t=uf(),e=Xde(),r=Jde();function n(i,a){return r(e(i,a,t),i+"")}return y_=n,y_}var v_,JP;function Jx(){if(JP)return v_;JP=1;var t=iE(),e=Lg(),r=yE(),n=du();function i(a,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],a):!1}return v_=i,v_}var b_,eD;function the(){if(eD)return b_;eD=1;var t=TH(),e=Kde(),r=ehe(),n=Jx(),i=r(function(a,s){if(a==null)return[];var c=s.length;return c>1&&n(a,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,t(s,1),[])});return b_=i,b_}var rhe=the();const wE=_r(rhe);function Op(t){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(t)}function WT(){return WT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WT.apply(this,arguments)}function nhe(t,e){return ohe(t)||she(t,e)||ahe(t,e)||ihe()}function ihe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ahe(t,e){if(t){if(typeof t=="string")return tD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tD(t,e)}}function tD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function she(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function ohe(t){if(Array.isArray(t))return t}function rD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function x_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rD(Object(r),!0).forEach(function(n){lhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lhe(t,e,r){return e=che(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function che(t){var e=uhe(t,"string");return Op(e)=="symbol"?e:e+""}function uhe(t,e){if(Op(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dhe(t){return Array.isArray(t)&&Zn(t[0])&&Zn(t[1])?t.join(" ~ "):t}var hhe=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,f=d===void 0?{}:d,m=e.payload,p=e.formatter,y=e.itemSorter,b=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,N=e.accessibilityLayer,I=N===void 0?!1:N,C=function(){if(m&&m.length){var L={padding:0,margin:0},M=(y?wE(m,y):m).map(function(Q,Z){if(Q.type==="none")return null;var W=x_({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},c),ee=Q.formatter||p||dhe,Y=Q.value,ye=Q.name,oe=Y,X=ye;if(ee&&oe!=null&&X!=null){var ne=ee(Y,ye,Q,Z,m);if(Array.isArray(ne)){var de=nhe(ne,2);oe=de[0],X=de[1]}else oe=ne}return ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Z),style:W},Zn(X)?ae.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Zn(X)?ae.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ae.createElement("span",{className:"recharts-tooltip-item-value"},oe),ae.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return ae.createElement("ul",{className:"recharts-tooltip-item-list",style:L},M)}return null},z=x_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),O=x_({margin:0},f),B=!Vt(S),E=B?S:"",A=Ht("recharts-default-tooltip",b),R=Ht("recharts-tooltip-label",T);B&&w&&m!==void 0&&m!==null&&(E=w(S,m));var F=I?{role:"status","aria-live":"assertive"}:{};return ae.createElement("div",WT({className:A,style:z},F),ae.createElement("p",{className:R,style:O},ae.isValidElement(E)?E:"".concat(E)),C())};function Ip(t){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ip(t)}function By(t,e,r){return e=fhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fhe(t){var e=mhe(t,"string");return Ip(e)=="symbol"?e:e+""}function mhe(t,e){if(Ip(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bm="recharts-tooltip-wrapper",phe={visibility:"hidden"};function ghe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Ht(bm,By(By(By(By({},"".concat(bm,"-right"),at(r)&&e&&at(e.x)&&r>=e.x),"".concat(bm,"-left"),at(r)&&e&&at(e.x)&&r<e.x),"".concat(bm,"-bottom"),at(n)&&e&&at(e.y)&&n>=e.y),"".concat(bm,"-top"),at(n)&&e&&at(e.y)&&n<e.y))}function nD(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,f=t.viewBoxDimension;if(a&&at(a[n]))return a[n];var m=r[n]-c-i,p=r[n]+i;if(e[n])return s[n]?m:p;if(s[n]){var y=m,b=d[n];return y<b?Math.max(p,d[n]):Math.max(m,d[n])}var T=p+c,S=d[n]+f;return T>S?Math.max(m,d[n]):Math.max(p,d[n])}function yhe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function vhe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,f,m,p;return s.height>0&&s.width>0&&r?(m=nD({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),p=nD({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),f=yhe({translateX:m,translateY:p,useTranslate3d:c})):f=phe,{cssProperties:f,cssClasses:ghe({translateX:m,translateY:p,coordinate:r})}}function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function iD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(r),!0).forEach(function(n){QT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xhe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kH(n.key),n)}}function whe(t,e,r){return e&&xhe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _he(t,e,r){return e=lb(e),She(t,jH()?Reflect.construct(e,r||[],lb(t).constructor):e.apply(t,r))}function She(t,e){if(e&&(jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return The(t)}function The(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jH=function(){return!!t})()}function lb(t){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(t)}function Ahe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XT(t,e)}function QT(t,e,r){return e=kH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kH(t){var e=Ehe(t,"string");return jh(e)=="symbol"?e:e+""}function Ehe(t,e){if(jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var sD=1,Nhe=(function(t){function e(){var r;bhe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=_he(this,e,[].concat(i)),QT(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),QT(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,f,m;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(f=(m=r.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&f!==void 0?f:0}})}}),r}return Ahe(e,t),whe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>sD||Math.abs(n.height-this.state.lastBoundingBox.height)>sD)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.children,m=i.coordinate,p=i.hasPayload,y=i.isAnimationActive,b=i.offset,T=i.position,S=i.reverseDirection,w=i.useTranslate3d,N=i.viewBox,I=i.wrapperStyle,C=vhe({allowEscapeViewBox:s,coordinate:m,offsetTopLeft:b,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:N}),z=C.cssClasses,O=C.cssProperties,B=aD(aD({transition:y&&a?"transform ".concat(c,"ms ").concat(d):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&p?"visible":"hidden",position:"absolute",top:0,left:0},I);return ae.createElement("div",{tabIndex:-1,className:z,style:B,ref:function(A){n.wrapperNode=A}},f)}}])})(V.PureComponent),jhe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},q0={isSsr:jhe()};function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function oD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lD(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(r),!0).forEach(function(n){_E(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function khe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Che(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OH(n.key),n)}}function Ohe(t,e,r){return e&&Che(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ihe(t,e,r){return e=cb(e),Rhe(t,CH()?Reflect.construct(e,r||[],cb(t).constructor):e.apply(t,r))}function Rhe(t,e){if(e&&(kh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mhe(t)}function Mhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CH=function(){return!!t})()}function cb(t){return cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cb(t)}function Phe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},YT(t,e)}function _E(t,e,r){return e=OH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OH(t){var e=Dhe(t,"string");return kh(e)=="symbol"?e:e+""}function Dhe(t,e){if(kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Lhe(t){return t.dataKey}function Bhe(t,e){return ae.isValidElement(t)?ae.cloneElement(t,e):typeof t=="function"?ae.createElement(t,e):ae.createElement(hhe,e)}var mo=(function(t){function e(){return khe(this,e),Ihe(this,e,arguments)}return Phe(e,t),Ohe(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.content,m=i.coordinate,p=i.filterNull,y=i.isAnimationActive,b=i.offset,T=i.payload,S=i.payloadUniqBy,w=i.position,N=i.reverseDirection,I=i.useTranslate3d,C=i.viewBox,z=i.wrapperStyle,O=T??[];p&&O.length&&(O=wH(T.filter(function(E){return E.value!=null&&(E.hide!==!0||n.props.includeHidden)}),S,Lhe));var B=O.length>0;return ae.createElement(Nhe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:a,coordinate:m,hasPayload:B,offset:b,position:w,reverseDirection:N,useTranslate3d:I,viewBox:C,wrapperStyle:z},Bhe(f,lD(lD({},this.props),{},{payload:O})))}}])})(V.PureComponent);_E(mo,"displayName","Tooltip");_E(mo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!q0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var w_,cD;function Uhe(){if(cD)return w_;cD=1;var t=Po(),e=function(){return t.Date.now()};return w_=e,w_}var __,uD;function zhe(){if(uD)return __;uD=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return __=e,__}var S_,dD;function $he(){if(dD)return S_;dD=1;var t=zhe(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return S_=r,S_}var T_,hD;function IH(){if(hD)return T_;hD=1;var t=$he(),e=du(),r=lf(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(f){if(typeof f=="number")return f;if(r(f))return n;if(e(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=e(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=t(f);var p=a.test(f);return p||s.test(f)?c(f.slice(2),p?2:8):i.test(f)?n:+f}return T_=d,T_}var A_,fD;function Vhe(){if(fD)return A_;fD=1;var t=du(),e=Uhe(),r=IH(),n="Expected a function",i=Math.max,a=Math.min;function s(c,d,f){var m,p,y,b,T,S,w=0,N=!1,I=!1,C=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(f)&&(N=!!f.leading,I="maxWait"in f,y=I?i(r(f.maxWait)||0,d):y,C="trailing"in f?!!f.trailing:C);function z(M){var Q=m,Z=p;return m=p=void 0,w=M,b=c.apply(Z,Q),b}function O(M){return w=M,T=setTimeout(A,d),N?z(M):b}function B(M){var Q=M-S,Z=M-w,W=d-Q;return I?a(W,y-Z):W}function E(M){var Q=M-S,Z=M-w;return S===void 0||Q>=d||Q<0||I&&Z>=y}function A(){var M=e();if(E(M))return R(M);T=setTimeout(A,B(M))}function R(M){return T=void 0,C&&m?z(M):(m=p=void 0,b)}function F(){T!==void 0&&clearTimeout(T),w=0,m=S=p=T=void 0}function D(){return T===void 0?b:R(e())}function L(){var M=e(),Q=E(M);if(m=arguments,p=this,S=M,Q){if(T===void 0)return O(S);if(I)return clearTimeout(T),T=setTimeout(A,d),z(S)}return T===void 0&&(T=setTimeout(A,d)),b}return L.cancel=F,L.flush=D,L}return A_=s,A_}var E_,mD;function Fhe(){if(mD)return E_;mD=1;var t=Vhe(),e=du(),r="Expected a function";function n(i,a,s){var c=!0,d=!0;if(typeof i!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(i,a,{leading:c,maxWait:a,trailing:d})}return E_=n,E_}var qhe=Fhe();const RH=_r(qhe);function Rp(t){"@babel/helpers - typeof";return Rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rp(t)}function pD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Uy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pD(Object(r),!0).forEach(function(n){Hhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hhe(t,e,r){return e=Ghe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ghe(t){var e=Khe(t,"string");return Rp(e)=="symbol"?e:e+""}function Khe(t,e){if(Rp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Whe(t,e){return Zhe(t)||Yhe(t,e)||Qhe(t,e)||Xhe()}function Xhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qhe(t,e){if(t){if(typeof t=="string")return gD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gD(t,e)}}function gD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Yhe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Zhe(t){if(Array.isArray(t))return t}var MH=V.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=t.width,s=a===void 0?"100%":a,c=t.height,d=c===void 0?"100%":c,f=t.minWidth,m=f===void 0?0:f,p=t.minHeight,y=t.maxHeight,b=t.children,T=t.debounce,S=T===void 0?0:T,w=t.id,N=t.className,I=t.onResize,C=t.style,z=C===void 0?{}:C,O=V.useRef(null),B=V.useRef();B.current=I,V.useImperativeHandle(e,function(){return Object.defineProperty(O.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),O.current},configurable:!0})});var E=V.useState({containerWidth:i.width,containerHeight:i.height}),A=Whe(E,2),R=A[0],F=A[1],D=V.useCallback(function(M,Q){F(function(Z){var W=Math.round(M),ee=Math.round(Q);return Z.containerWidth===W&&Z.containerHeight===ee?Z:{containerWidth:W,containerHeight:ee}})},[]);V.useEffect(function(){var M=function(ye){var oe,X=ye[0].contentRect,ne=X.width,de=X.height;D(ne,de),(oe=B.current)===null||oe===void 0||oe.call(B,ne,de)};S>0&&(M=RH(M,S,{trailing:!0,leading:!1}));var Q=new ResizeObserver(M),Z=O.current.getBoundingClientRect(),W=Z.width,ee=Z.height;return D(W,ee),Q.observe(O.current),function(){Q.disconnect()}},[D,S]);var L=V.useMemo(function(){var M=R.containerWidth,Q=R.containerHeight;if(M<0||Q<0)return null;Tl(i0(s)||i0(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Tl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Z=i0(s)?M:s,W=i0(d)?Q:d;r&&r>0&&(Z?W=Z/r:W&&(Z=W*r),y&&W>y&&(W=y)),Tl(Z>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Z,W,s,d,m,p,r);var ee=!Array.isArray(b)&&Sl(b.type).endsWith("Chart");return ae.Children.map(b,function(Y){return ae.isValidElement(Y)?V.cloneElement(Y,Uy({width:Z,height:W},ee?{style:Uy({height:"100%",width:"100%",maxHeight:W,maxWidth:Z},Y.props.style)}:{})):Y})},[r,b,d,y,p,m,R,s]);return ae.createElement("div",{id:w?"".concat(w):void 0,className:Ht("recharts-responsive-container",N),style:Uy(Uy({},z),{},{width:s,height:d,minWidth:m,minHeight:p,maxHeight:y}),ref:O},L)}),SE=function(e){return null};SE.displayName="Cell";function Mp(t){"@babel/helpers - typeof";return Mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mp(t)}function yD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ZT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(r),!0).forEach(function(n){Jhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Jhe(t,e,r){return e=efe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function efe(t){var e=tfe(t,"string");return Mp(e)=="symbol"?e:e+""}function tfe(t,e){if(Mp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pd={widthCache:{},cacheCount:0},rfe=2e3,nfe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},vD="recharts_measurement_span";function ife(t){var e=ZT({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var Qm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||q0.isSsr)return{width:0,height:0};var n=ife(r),i=JSON.stringify({text:e,copyStyle:n});if(Pd.widthCache[i])return Pd.widthCache[i];try{var a=document.getElementById(vD);a||(a=document.createElement("span"),a.setAttribute("id",vD),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=ZT(ZT({},nfe),n);Object.assign(a.style,s),a.textContent="".concat(e);var c=a.getBoundingClientRect(),d={width:c.width,height:c.height};return Pd.widthCache[i]=d,++Pd.cacheCount>rfe&&(Pd.cacheCount=0,Pd.widthCache={}),d}catch{return{width:0,height:0}}},afe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Pp(t){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pp(t)}function ub(t,e){return cfe(t)||lfe(t,e)||ofe(t,e)||sfe()}function sfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ofe(t,e){if(t){if(typeof t=="string")return bD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bD(t,e)}}function bD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lfe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function cfe(t){if(Array.isArray(t))return t}function ufe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hfe(n.key),n)}}function dfe(t,e,r){return e&&xD(t.prototype,e),r&&xD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function hfe(t){var e=ffe(t,"string");return Pp(e)=="symbol"?e:e+""}function ffe(t,e){if(Pp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_D=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mfe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pfe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,PH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gfe=Object.keys(PH),Gd="NaN";function yfe(t,e){return t*PH[e]}var zy=(function(){function t(e,r){ufe(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!mfe.test(r)&&(this.num=NaN,this.unit=""),gfe.includes(r)&&(this.num=yfe(e,r),this.unit="px")}return dfe(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=pfe.exec(r))!==null&&n!==void 0?n:[],a=ub(i,3),s=a[1],c=a[2];return new t(parseFloat(s),c??"")}}])})();function DH(t){if(t.includes(Gd))return Gd;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=wD.exec(e))!==null&&r!==void 0?r:[],i=ub(n,4),a=i[1],s=i[2],c=i[3],d=zy.parse(a??""),f=zy.parse(c??""),m=s==="*"?d.multiply(f):d.divide(f);if(m.isNaN())return Gd;e=e.replace(wD,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=_D.exec(e))!==null&&p!==void 0?p:[],b=ub(y,4),T=b[1],S=b[2],w=b[3],N=zy.parse(T??""),I=zy.parse(w??""),C=S==="+"?N.add(I):N.subtract(I);if(C.isNaN())return Gd;e=e.replace(_D,C.toString())}return e}var SD=/\(([^()]*)\)/;function vfe(t){for(var e=t;e.includes("(");){var r=SD.exec(e),n=ub(r,2),i=n[1];e=e.replace(SD,DH(i))}return e}function bfe(t){var e=t.replace(/\s+/g,"");return e=vfe(e),e=DH(e),e}function xfe(t){try{return bfe(t)}catch{return Gd}}function N_(t){var e=xfe(t.slice(5,-1));return e===Gd?"":e}var wfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_fe=["dx","dy","angle","className","breakAll"];function JT(){return JT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JT.apply(this,arguments)}function TD(t,e){if(t==null)return{};var r=Sfe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Sfe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function AD(t,e){return Nfe(t)||Efe(t,e)||Afe(t,e)||Tfe()}function Tfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Afe(t,e){if(t){if(typeof t=="string")return ED(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ED(t,e)}}function ED(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Efe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Nfe(t){if(Array.isArray(t))return t}var LH=/[ \f\n\r\t\v\u2028\u2029]+/,BH=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var a=[];Vt(r)||(n?a=r.toString().split(""):a=r.toString().split(LH));var s=a.map(function(d){return{word:d,width:Qm(d,i).width}}),c=n?0:Qm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},jfe=function(e,r,n,i,a){var s=e.maxLines,c=e.children,d=e.style,f=e.breakAll,m=at(s),p=c,y=function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Z.reduce(function(W,ee){var Y=ee.word,ye=ee.width,oe=W[W.length-1];if(oe&&(i==null||a||oe.width+ye+n<Number(i)))oe.words.push(Y),oe.width+=ye+n;else{var X={words:[Y],width:ye};W.push(X)}return W},[])},b=y(r),T=function(Z){return Z.reduce(function(W,ee){return W.width>ee.width?W:ee})};if(!m)return b;for(var S="",w=function(Z){var W=p.slice(0,Z),ee=BH({breakAll:f,style:d,children:W+S}).wordsWithComputedWidth,Y=y(ee),ye=Y.length>s||T(Y).width>Number(i);return[ye,Y]},N=0,I=p.length-1,C=0,z;N<=I&&C<=p.length-1;){var O=Math.floor((N+I)/2),B=O-1,E=w(B),A=AD(E,2),R=A[0],F=A[1],D=w(O),L=AD(D,1),M=L[0];if(!R&&!M&&(N=O+1),R&&M&&(I=O-1),!R&&M){z=F;break}C++}return z||b},ND=function(e){var r=Vt(e)?[]:e.toString().split(LH);return[{words:r}]},kfe=function(e){var r=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!q0.isSsr){var d,f,m=BH({breakAll:s,children:i,style:a});if(m){var p=m.wordsWithComputedWidth,y=m.spaceWidth;d=p,f=y}else return ND(i);return jfe({breakAll:s,children:i,maxLines:c,style:a},d,f,r,n)}return ND(i)},jD="#808080",Ch=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,f=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,y=e.textAnchor,b=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,N=w===void 0?jD:w,I=TD(e,wfe),C=V.useMemo(function(){return kfe({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:p,style:I.style,width:I.width})},[I.breakAll,I.children,I.maxLines,p,I.style,I.width]),z=I.dx,O=I.dy,B=I.angle,E=I.className,A=I.breakAll,R=TD(I,_fe);if(!Zn(n)||!Zn(a))return null;var F=n+(at(z)?z:0),D=a+(at(O)?O:0),L;switch(S){case"start":L=N_("calc(".concat(f,")"));break;case"middle":L=N_("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(f," / 2))"));break;default:L=N_("calc(".concat(C.length-1," * -").concat(c,")"));break}var M=[];if(p){var Q=C[0].width,Z=I.width;M.push("scale(".concat((at(Z)?Z/Q:1)/Q,")"))}return B&&M.push("rotate(".concat(B,", ").concat(F,", ").concat(D,")")),M.length&&(R.transform=M.join(" ")),ae.createElement("text",JT({},Nt(R,!0),{x:F,y:D,className:Ht("recharts-text",E),textAnchor:b,fill:N.includes("url")?jD:N}),C.map(function(W,ee){var Y=W.words.join(A?"":" ");return ae.createElement("tspan",{x:F,dy:ee===0?L:c,key:"".concat(Y,"-").concat(ee)},Y)}))};function Xc(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cfe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TE(t){let e,r,n;t.length!==2?(e=Xc,r=(c,d)=>Xc(t(c),d),n=(c,d)=>t(c)-d):(e=t===Xc||t===Cfe?t:Ofe,r=t,n=t);function i(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<0?f=p+1:m=p}while(f<m)}return f}function a(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;r(c[p],d)<=0?f=p+1:m=p}while(f<m)}return f}function s(c,d,f=0,m=c.length){const p=i(c,d,f,m-1);return p>f&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:i,center:s,right:a}}function Ofe(){return 0}function UH(t){return t===null?NaN:+t}function*Ife(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const Rfe=TE(Xc),Bg=Rfe.right;TE(UH).center;class kD extends Map{constructor(e,r=Dfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(CD(this,e))}has(e){return super.has(CD(this,e))}set(e,r){return super.set(Mfe(this,e),r)}delete(e){return super.delete(Pfe(this,e))}}function CD({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function Mfe({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function Pfe({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function Dfe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Lfe(t=Xc){if(t===Xc)return zH;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function zH(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Bfe=Math.sqrt(50),Ufe=Math.sqrt(10),zfe=Math.sqrt(2);function db(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Bfe?10:a>=Ufe?5:a>=zfe?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/s,c=Math.round(t*f),d=Math.round(e*f),c/f<t&&++c,d/f>e&&--d,f=-f):(f=Math.pow(10,i)*s,c=Math.round(t/f),d=Math.round(e/f),c*f<t&&++c,d*f>e&&--d),d<c&&.5<=r&&r<2?db(t,e,r*2):[c,d,f]}function eA(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,a,s]=n?db(e,t,r):db(t,e,r);if(!(a>=i))return[];const c=a-i+1,d=new Array(c);if(n)if(s<0)for(let f=0;f<c;++f)d[f]=(a-f)/-s;else for(let f=0;f<c;++f)d[f]=(a-f)*s;else if(s<0)for(let f=0;f<c;++f)d[f]=(i+f)/-s;else for(let f=0;f<c;++f)d[f]=(i+f)*s;return d}function tA(t,e,r){return e=+e,t=+t,r=+r,db(t,e,r)[2]}function rA(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?tA(e,t,r):tA(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function OD(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function ID(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function $H(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?zH:Lfe(i);n>r;){if(n-r>600){const d=n-r+1,f=e-r+1,m=Math.log(d),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(d-p)/d)*(f-d/2<0?-1:1),b=Math.max(r,Math.floor(e-f*p/d+y)),T=Math.min(n,Math.floor(e+(d-f)*p/d+y));$H(t,e,b,T,i)}const a=t[e];let s=r,c=n;for(xm(t,r,e),i(t[n],a)>0&&xm(t,r,n);s<c;){for(xm(t,s,c),++s,--c;i(t[s],a)<0;)++s;for(;i(t[c],a)>0;)--c}i(t[r],a)===0?xm(t,r,c):(++c,xm(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function xm(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function $fe(t,e,r){if(t=Float64Array.from(Ife(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return ID(t);if(e>=1)return OD(t);var n,i=(n-1)*e,a=Math.floor(i),s=OD($H(t,a).subarray(0,a+1)),c=ID(t.subarray(a+1));return s+(c-s)*(i-a)}}function Vfe(t,e,r=UH){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,a=Math.floor(i),s=+r(t[a],a,t),c=+r(t[a+1],a+1,t);return s+(c-s)*(i-a)}}function Ffe(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(i);++n<i;)a[n]=t+n*r;return a}function Ns(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ql(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const nA=Symbol("implicit");function AE(){var t=new kD,e=[],r=[],n=nA;function i(a){let s=t.get(a);if(s===void 0){if(n!==nA)return n;t.set(a,s=e.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new kD;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return AE(e,r).unknown(n)},Ns.apply(i,arguments),i}function Dp(){var t=AE().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,a,s,c=!1,d=0,f=0,m=.5;delete t.unknown;function p(){var y=e().length,b=i<n,T=b?i:n,S=b?n:i;a=(S-T)/Math.max(1,y-d+f*2),c&&(a=Math.floor(a)),T+=(S-T-a*(y-d))*m,s=a*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=Ffe(y).map(function(N){return T+a*N});return r(b?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([n,i]=y,n=+n,i=+i,p()):[n,i]},t.rangeRound=function(y){return[n,i]=y,n=+n,i=+i,c=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,f=+y),p()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},t.paddingOuter=function(y){return arguments.length?(f=+y,p()):f},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return Dp(e(),[n,i]).round(c).paddingInner(d).paddingOuter(f).align(m)},Ns.apply(p(),arguments)}function VH(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return VH(e())},t}function Ym(){return VH(Dp.apply(null,arguments).paddingInner(1))}function EE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function FH(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ug(){}var Lp=.7,hb=1/Lp,ah="\\s*([+-]?\\d+)\\s*",Bp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",So="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qfe=/^#([0-9a-f]{3,8})$/,Hfe=new RegExp(`^rgb\\(${ah},${ah},${ah}\\)$`),Gfe=new RegExp(`^rgb\\(${So},${So},${So}\\)$`),Kfe=new RegExp(`^rgba\\(${ah},${ah},${ah},${Bp}\\)$`),Wfe=new RegExp(`^rgba\\(${So},${So},${So},${Bp}\\)$`),Xfe=new RegExp(`^hsl\\(${Bp},${So},${So}\\)$`),Qfe=new RegExp(`^hsla\\(${Bp},${So},${So},${Bp}\\)$`),RD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};EE(Ug,Up,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:MD,formatHex:MD,formatHex8:Yfe,formatHsl:Zfe,formatRgb:PD,toString:PD});function MD(){return this.rgb().formatHex()}function Yfe(){return this.rgb().formatHex8()}function Zfe(){return qH(this).formatHsl()}function PD(){return this.rgb().formatRgb()}function Up(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=qfe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?DD(e):r===3?new Ta(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?$y(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?$y(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Hfe.exec(t))?new Ta(e[1],e[2],e[3],1):(e=Gfe.exec(t))?new Ta(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Kfe.exec(t))?$y(e[1],e[2],e[3],e[4]):(e=Wfe.exec(t))?$y(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xfe.exec(t))?UD(e[1],e[2]/100,e[3]/100,1):(e=Qfe.exec(t))?UD(e[1],e[2]/100,e[3]/100,e[4]):RD.hasOwnProperty(t)?DD(RD[t]):t==="transparent"?new Ta(NaN,NaN,NaN,0):null}function DD(t){return new Ta(t>>16&255,t>>8&255,t&255,1)}function $y(t,e,r,n){return n<=0&&(t=e=r=NaN),new Ta(t,e,r,n)}function Jfe(t){return t instanceof Ug||(t=Up(t)),t?(t=t.rgb(),new Ta(t.r,t.g,t.b,t.opacity)):new Ta}function iA(t,e,r,n){return arguments.length===1?Jfe(t):new Ta(t,e,r,n??1)}function Ta(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}EE(Ta,iA,FH(Ug,{brighter(t){return t=t==null?hb:Math.pow(hb,t),new Ta(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new Ta(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ta(p0(this.r),p0(this.g),p0(this.b),fb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LD,formatHex:LD,formatHex8:eme,formatRgb:BD,toString:BD}));function LD(){return`#${a0(this.r)}${a0(this.g)}${a0(this.b)}`}function eme(){return`#${a0(this.r)}${a0(this.g)}${a0(this.b)}${a0((isNaN(this.opacity)?1:this.opacity)*255)}`}function BD(){const t=fb(this.opacity);return`${t===1?"rgb(":"rgba("}${p0(this.r)}, ${p0(this.g)}, ${p0(this.b)}${t===1?")":`, ${t})`}`}function fb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function p0(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function a0(t){return t=p0(t),(t<16?"0":"")+t.toString(16)}function UD(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Fs(t,e,r,n)}function qH(t){if(t instanceof Fs)return new Fs(t.h,t.s,t.l,t.opacity);if(t instanceof Ug||(t=Up(t)),!t)return new Fs;if(t instanceof Fs)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),a=Math.max(e,r,n),s=NaN,c=a-i,d=(a+i)/2;return c?(e===a?s=(r-n)/c+(r<n)*6:r===a?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?a+i:2-a-i,s*=60):c=d>0&&d<1?0:s,new Fs(s,c,d,t.opacity)}function tme(t,e,r,n){return arguments.length===1?qH(t):new Fs(t,e,r,n??1)}function Fs(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}EE(Fs,tme,FH(Ug,{brighter(t){return t=t==null?hb:Math.pow(hb,t),new Fs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Lp:Math.pow(Lp,t),new Fs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Ta(j_(t>=240?t-240:t+120,i,n),j_(t,i,n),j_(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Fs(zD(this.h),Vy(this.s),Vy(this.l),fb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fb(this.opacity);return`${t===1?"hsl(":"hsla("}${zD(this.h)}, ${Vy(this.s)*100}%, ${Vy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function zD(t){return t=(t||0)%360,t<0?t+360:t}function Vy(t){return Math.max(0,Math.min(1,t||0))}function j_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const NE=t=>()=>t;function rme(t,e){return function(r){return t+r*e}}function nme(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function ime(t){return(t=+t)==1?HH:function(e,r){return r-e?nme(e,r,t):NE(isNaN(e)?r:e)}}function HH(t,e){var r=e-t;return r?rme(t,r):NE(isNaN(t)?e:t)}const $D=(function t(e){var r=ime(e);function n(i,a){var s=r((i=iA(i)).r,(a=iA(a)).r),c=r(i.g,a.g),d=r(i.b,a.b),f=HH(i.opacity,a.opacity);return function(m){return i.r=s(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return n.gamma=t,n})(1);function ame(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=t[i]*(1-a)+e[i]*a;return n}}function sme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ome(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=df(t[s],e[s]);for(;s<r;++s)a[s]=e[s];return function(c){for(s=0;s<n;++s)a[s]=i[s](c);return a}}function lme(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function mb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function cme(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=df(t[i],e[i]):n[i]=e[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var aA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k_=new RegExp(aA.source,"g");function ume(t){return function(){return t}}function dme(t){return function(e){return t(e)+""}}function hme(t,e){var r=aA.lastIndex=k_.lastIndex=0,n,i,a,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=aA.exec(t))&&(i=k_.exec(e));)(a=i.index)>r&&(a=e.slice(r,a),c[s]?c[s]+=a:c[++s]=a),(n=n[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,d.push({i:s,x:mb(n,i)})),r=k_.lastIndex;return r<e.length&&(a=e.slice(r),c[s]?c[s]+=a:c[++s]=a),c.length<2?d[0]?dme(d[0].x):ume(e):(e=d.length,function(f){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(f);return c.join("")})}function df(t,e){var r=typeof e,n;return e==null||r==="boolean"?NE(e):(r==="number"?mb:r==="string"?(n=Up(e))?(e=n,$D):hme:e instanceof Up?$D:e instanceof Date?lme:sme(e)?ame:Array.isArray(e)?ome:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?cme:mb)(t,e)}function jE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function fme(t,e){e===void 0&&(e=t,t=df);for(var r=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(i,i=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[c](s-c)}}function mme(t){return function(){return t}}function pb(t){return+t}var VD=[0,1];function ra(t){return t}function sA(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:mme(isNaN(e)?NaN:.5)}function pme(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function gme(t,e,r){var n=t[0],i=t[1],a=e[0],s=e[1];return i<n?(n=sA(i,n),a=r(s,a)):(n=sA(n,i),a=r(a,s)),function(c){return a(n(c))}}function yme(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=sA(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(c){var d=Bg(t,c,1,n)-1;return a[d](i[d](c))}}function zg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function e2(){var t=VD,e=VD,r=df,n,i,a,s=ra,c,d,f;function m(){var y=Math.min(t.length,e.length);return s!==ra&&(s=pme(t[0],t[y-1])),c=y>2?yme:gme,d=f=null,p}function p(y){return y==null||isNaN(y=+y)?a:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return p.invert=function(y){return s(i((f||(f=c(e,t.map(n),mb)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,pb),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),r=jE,m()},p.clamp=function(y){return arguments.length?(s=y?!0:ra,m()):s!==ra},p.interpolate=function(y){return arguments.length?(r=y,m()):r},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,b){return n=y,i=b,m()}}function kE(){return e2()(ra,ra)}function vme(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function gb(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Oh(t){return t=gb(Math.abs(t)),t?t[1]:NaN}function bme(t,e){return function(r,n){for(var i=r.length,a=[],s=0,c=t[0],d=0;i>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),a.push(r.substring(i-=c,i+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return a.reverse().join(e)}}function xme(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var wme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zp(t){if(!(e=wme.exec(t)))throw new Error("invalid format: "+t);var e;return new CE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}zp.prototype=CE.prototype;function CE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}CE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _me(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var yb;function Sme(t,e){var r=gb(t,e);if(!r)return yb=void 0,t.toPrecision(e);var n=r[0],i=r[1],a=i-(yb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+gb(t,Math.max(0,e+a-1))[0]}function FD(t,e){var r=gb(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const qD={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:vme,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>FD(t*100,e),r:FD,s:Sme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function HD(t){return t}var GD=Array.prototype.map,KD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Tme(t){var e=t.grouping===void 0||t.thousands===void 0?HD:bme(GD.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?HD:xme(GD.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function f(p,y){p=zp(p);var b=p.fill,T=p.align,S=p.sign,w=p.symbol,N=p.zero,I=p.width,C=p.comma,z=p.precision,O=p.trim,B=p.type;B==="n"?(C=!0,B="g"):qD[B]||(z===void 0&&(z=12),O=!0,B="g"),(N||b==="0"&&T==="=")&&(N=!0,b="0",T="=");var E=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(B)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),R=qD[B],F=/[defgprs%]/.test(B);z=z===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,z)):Math.max(0,Math.min(20,z));function D(L){var M=E,Q=A,Z,W,ee;if(B==="c")Q=R(L)+Q,L="";else{L=+L;var Y=L<0||1/L<0;if(L=isNaN(L)?d:R(Math.abs(L),z),O&&(L=_me(L)),Y&&+L==0&&S!=="+"&&(Y=!1),M=(Y?S==="("?S:c:S==="-"||S==="("?"":S)+M,Q=(B==="s"&&!isNaN(L)&&yb!==void 0?KD[8+yb/3]:"")+Q+(Y&&S==="("?")":""),F){for(Z=-1,W=L.length;++Z<W;)if(ee=L.charCodeAt(Z),48>ee||ee>57){Q=(ee===46?i+L.slice(Z+1):L.slice(Z))+Q,L=L.slice(0,Z);break}}}C&&!N&&(L=e(L,1/0));var ye=M.length+L.length+Q.length,oe=ye<I?new Array(I-ye+1).join(b):"";switch(C&&N&&(L=e(oe+L,oe.length?I-Q.length:1/0),oe=""),T){case"<":L=M+L+Q+oe;break;case"=":L=M+oe+L+Q;break;case"^":L=oe.slice(0,ye=oe.length>>1)+M+L+Q+oe.slice(ye);break;default:L=oe+M+L+Q;break}return a(L)}return D.toString=function(){return p+""},D}function m(p,y){var b=Math.max(-8,Math.min(8,Math.floor(Oh(y)/3)))*3,T=Math.pow(10,-b),S=f((p=zp(p),p.type="f",p),{suffix:KD[8+b/3]});return function(w){return S(T*w)}}return{format:f,formatPrefix:m}}var Fy,OE,GH;Ame({thousands:",",grouping:[3],currency:["$",""]});function Ame(t){return Fy=Tme(t),OE=Fy.format,GH=Fy.formatPrefix,Fy}function Eme(t){return Math.max(0,-Oh(Math.abs(t)))}function Nme(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Oh(e)/3)))*3-Oh(Math.abs(t)))}function jme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Oh(e)-Oh(t))+1}function KH(t,e,r,n){var i=rA(t,e,r),a;switch(n=zp(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=Nme(i,s))&&(n.precision=a),GH(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=jme(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Eme(i))&&(n.precision=a-(n.type==="%")*2);break}}return OE(n)}function hu(t){var e=t.domain;return t.ticks=function(r){var n=e();return eA(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return KH(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,a=n.length-1,s=n[i],c=n[a],d,f,m=10;for(c<s&&(f=s,s=c,c=f,f=i,i=a,a=f);m-- >0;){if(f=tA(s,c,r),f===d)return n[i]=s,n[a]=c,e(n);if(f>0)s=Math.floor(s/f)*f,c=Math.ceil(c/f)*f;else if(f<0)s=Math.ceil(s*f)/f,c=Math.floor(c*f)/f;else break;d=f}return t},t}function vb(){var t=kE();return t.copy=function(){return zg(t,vb())},Ns.apply(t,arguments),hu(t)}function WH(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,pb),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return WH(t).unknown(e)},t=arguments.length?Array.from(t,pb):[0,1],hu(r)}function XH(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],a=t[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),t[r]=e.floor(i),t[n]=e.ceil(a),t}function WD(t){return Math.log(t)}function XD(t){return Math.exp(t)}function kme(t){return-Math.log(-t)}function Cme(t){return-Math.exp(-t)}function Ome(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ime(t){return t===10?Ome:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Rme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function QD(t){return(e,r)=>-t(-e,r)}function IE(t){const e=t(WD,XD),r=e.domain;let n=10,i,a;function s(){return i=Rme(n),a=Ime(n),r()[0]<0?(i=QD(i),a=QD(a),t(kme,Cme)):t(WD,XD),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let f=d[0],m=d[d.length-1];const p=m<f;p&&([f,m]=[m,f]);let y=i(f),b=i(m),T,S;const w=c==null?10:+c;let N=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),f>0){for(;y<=b;++y)for(T=1;T<n;++T)if(S=y<0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;N.push(S)}}else for(;y<=b;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;N.push(S)}N.length*2<w&&(N=eA(f,m,w))}else N=eA(y,b,Math.min(b-y,w)).map(a);return p?N.reverse():N},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=zp(d)).precision==null&&(d.trim=!0),d=OE(d)),c===1/0)return d;const f=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*n<n-.5&&(p*=n),p<=f?d(m):""}},e.nice=()=>r(XH(r(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function QH(){const t=IE(e2()).domain([1,10]);return t.copy=()=>zg(t,QH()).base(t.base()),Ns.apply(t,arguments),t}function YD(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ZD(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function RE(t){var e=1,r=t(YD(e),ZD(e));return r.constant=function(n){return arguments.length?t(YD(e=+n),ZD(e)):e},hu(r)}function YH(){var t=RE(e2());return t.copy=function(){return zg(t,YH()).constant(t.constant())},Ns.apply(t,arguments)}function JD(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Mme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Pme(t){return t<0?-t*t:t*t}function ME(t){var e=t(ra,ra),r=1;function n(){return r===1?t(ra,ra):r===.5?t(Mme,Pme):t(JD(r),JD(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},hu(e)}function PE(){var t=ME(e2());return t.copy=function(){return zg(t,PE()).exponent(t.exponent())},Ns.apply(t,arguments),t}function Dme(){return PE.apply(null,arguments).exponent(.5)}function eL(t){return Math.sign(t)*t*t}function Lme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ZH(){var t=kE(),e=[0,1],r=!1,n;function i(a){var s=Lme(t(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return t.invert(eL(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,pb)).map(eL)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ZH(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Ns.apply(i,arguments),hu(i)}function JH(){var t=[],e=[],r=[],n;function i(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=Vfe(t,s/c);return a}function a(s){return s==null||isNaN(s=+s)?n:e[Bg(r,s)]}return a.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Xc),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return JH().domain(t).range(e).unknown(n)},Ns.apply(a,arguments)}function eG(){var t=0,e=1,r=1,n=[.5],i=[0,1],a;function s(d){return d!=null&&d<=d?i[Bg(n,d,0,r)]:a}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(i=Array.from(d)).length-1,c()):i.slice()},s.invertExtent=function(d){var f=i.indexOf(d);return f<0?[NaN,NaN]:f<1?[t,n[0]]:f>=r?[n[r-1],e]:[n[f-1],n[f]]},s.unknown=function(d){return arguments.length&&(a=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return eG().domain([t,e]).range(i).unknown(a)},Ns.apply(hu(s),arguments)}function tG(){var t=[.5],e=[0,1],r,n=1;function i(a){return a!=null&&a<=a?e[Bg(t,a,0,n)]:r}return i.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return tG().domain(t).range(e).unknown(r)},Ns.apply(i,arguments)}const C_=new Date,O_=new Date;function ri(t,e,r,n){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const d=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return d;let f;do d.push(f=new Date(+a)),e(a,c),t(a);while(f<a&&a<s);return d},i.filter=a=>ri(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!a(s););else for(;--c>=0;)for(;e(s,1),!a(s););}),r&&(i.count=(a,s)=>(C_.setTime(+a),O_.setTime(+s),t(C_),t(O_),Math.floor(r(C_,O_))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const bb=ri(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);bb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ri(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):bb);bb.range;const yl=1e3,gs=yl*60,vl=gs*60,Pl=vl*24,DE=Pl*7,tL=Pl*30,I_=Pl*365,s0=ri(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*yl)},(t,e)=>(e-t)/yl,t=>t.getUTCSeconds());s0.range;const LE=ri(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yl)},(t,e)=>{t.setTime(+t+e*gs)},(t,e)=>(e-t)/gs,t=>t.getMinutes());LE.range;const BE=ri(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*gs)},(t,e)=>(e-t)/gs,t=>t.getUTCMinutes());BE.range;const UE=ri(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yl-t.getMinutes()*gs)},(t,e)=>{t.setTime(+t+e*vl)},(t,e)=>(e-t)/vl,t=>t.getHours());UE.range;const zE=ri(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vl)},(t,e)=>(e-t)/vl,t=>t.getUTCHours());zE.range;const $g=ri(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*gs)/Pl,t=>t.getDate()-1);$g.range;const t2=ri(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>t.getUTCDate()-1);t2.range;const rG=ri(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Pl,t=>Math.floor(t/Pl));rG.range;function H0(t){return ri(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*gs)/DE)}const r2=H0(0),xb=H0(1),Bme=H0(2),Ume=H0(3),Ih=H0(4),zme=H0(5),$me=H0(6);r2.range;xb.range;Bme.range;Ume.range;Ih.range;zme.range;$me.range;function G0(t){return ri(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/DE)}const n2=G0(0),wb=G0(1),Vme=G0(2),Fme=G0(3),Rh=G0(4),qme=G0(5),Hme=G0(6);n2.range;wb.range;Vme.range;Fme.range;Rh.range;qme.range;Hme.range;const $E=ri(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());$E.range;const VE=ri(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());VE.range;const Dl=ri(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Dl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ri(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Dl.range;const Ll=ri(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ll.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ri(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ll.range;function nG(t,e,r,n,i,a){const s=[[s0,1,yl],[s0,5,5*yl],[s0,15,15*yl],[s0,30,30*yl],[a,1,gs],[a,5,5*gs],[a,15,15*gs],[a,30,30*gs],[i,1,vl],[i,3,3*vl],[i,6,6*vl],[i,12,12*vl],[n,1,Pl],[n,2,2*Pl],[r,1,DE],[e,1,tL],[e,3,3*tL],[t,1,I_]];function c(f,m,p){const y=m<f;y&&([f,m]=[m,f]);const b=p&&typeof p.range=="function"?p:d(f,m,p),T=b?b.range(f,+m+1):[];return y?T.reverse():T}function d(f,m,p){const y=Math.abs(m-f)/p,b=TE(([,,w])=>w).right(s,y);if(b===s.length)return t.every(rA(f/I_,m/I_,p));if(b===0)return bb.every(Math.max(rA(f,m,p),1));const[T,S]=s[y/s[b-1][2]<s[b][2]/y?b-1:b];return T.every(S)}return[c,d]}const[Gme,Kme]=nG(Ll,VE,n2,rG,zE,BE),[Wme,Xme]=nG(Dl,$E,r2,$g,UE,LE);function R_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function M_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wm(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Qme(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,a=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,f=_m(i),m=Sm(i),p=_m(a),y=Sm(a),b=_m(s),T=Sm(s),S=_m(c),w=Sm(c),N=_m(d),I=Sm(d),C={a:ee,A:Y,b:ye,B:oe,c:null,d:oL,e:oL,f:bpe,g:kpe,G:Ope,H:gpe,I:ype,j:vpe,L:iG,m:xpe,M:wpe,p:X,q:ne,Q:uL,s:dL,S:_pe,u:Spe,U:Tpe,V:Ape,w:Epe,W:Npe,x:null,X:null,y:jpe,Y:Cpe,Z:Ipe,"%":cL},z={a:de,A:J,b:le,B:pe,c:null,d:lL,e:lL,f:Dpe,g:Gpe,G:Wpe,H:Rpe,I:Mpe,j:Ppe,L:sG,m:Lpe,M:Bpe,p:be,q:Je,Q:uL,s:dL,S:Upe,u:zpe,U:$pe,V:Vpe,w:Fpe,W:qpe,x:null,X:null,y:Hpe,Y:Kpe,Z:Xpe,"%":cL},O={a:F,A:D,b:L,B:M,c:Q,d:aL,e:aL,f:hpe,g:iL,G:nL,H:sL,I:sL,j:lpe,L:dpe,m:ope,M:cpe,p:R,q:spe,Q:mpe,s:ppe,S:upe,u:tpe,U:rpe,V:npe,w:epe,W:ipe,x:Z,X:W,y:iL,Y:nL,Z:ape,"%":fpe};C.x=B(r,C),C.X=B(n,C),C.c=B(e,C),z.x=B(r,z),z.X=B(n,z),z.c=B(e,z);function B(Ne,ce){return function(Ce){var Ee=[],ct=-1,Qe=0,ut=Ne.length,dt,Ut,Oe;for(Ce instanceof Date||(Ce=new Date(+Ce));++ct<ut;)Ne.charCodeAt(ct)===37&&(Ee.push(Ne.slice(Qe,ct)),(Ut=rL[dt=Ne.charAt(++ct)])!=null?dt=Ne.charAt(++ct):Ut=dt==="e"?" ":"0",(Oe=ce[dt])&&(dt=Oe(Ce,Ut)),Ee.push(dt),Qe=ct+1);return Ee.push(Ne.slice(Qe,ct)),Ee.join("")}}function E(Ne,ce){return function(Ce){var Ee=wm(1900,void 0,1),ct=A(Ee,Ne,Ce+="",0),Qe,ut;if(ct!=Ce.length)return null;if("Q"in Ee)return new Date(Ee.Q);if("s"in Ee)return new Date(Ee.s*1e3+("L"in Ee?Ee.L:0));if(ce&&!("Z"in Ee)&&(Ee.Z=0),"p"in Ee&&(Ee.H=Ee.H%12+Ee.p*12),Ee.m===void 0&&(Ee.m="q"in Ee?Ee.q:0),"V"in Ee){if(Ee.V<1||Ee.V>53)return null;"w"in Ee||(Ee.w=1),"Z"in Ee?(Qe=M_(wm(Ee.y,0,1)),ut=Qe.getUTCDay(),Qe=ut>4||ut===0?wb.ceil(Qe):wb(Qe),Qe=t2.offset(Qe,(Ee.V-1)*7),Ee.y=Qe.getUTCFullYear(),Ee.m=Qe.getUTCMonth(),Ee.d=Qe.getUTCDate()+(Ee.w+6)%7):(Qe=R_(wm(Ee.y,0,1)),ut=Qe.getDay(),Qe=ut>4||ut===0?xb.ceil(Qe):xb(Qe),Qe=$g.offset(Qe,(Ee.V-1)*7),Ee.y=Qe.getFullYear(),Ee.m=Qe.getMonth(),Ee.d=Qe.getDate()+(Ee.w+6)%7)}else("W"in Ee||"U"in Ee)&&("w"in Ee||(Ee.w="u"in Ee?Ee.u%7:"W"in Ee?1:0),ut="Z"in Ee?M_(wm(Ee.y,0,1)).getUTCDay():R_(wm(Ee.y,0,1)).getDay(),Ee.m=0,Ee.d="W"in Ee?(Ee.w+6)%7+Ee.W*7-(ut+5)%7:Ee.w+Ee.U*7-(ut+6)%7);return"Z"in Ee?(Ee.H+=Ee.Z/100|0,Ee.M+=Ee.Z%100,M_(Ee)):R_(Ee)}}function A(Ne,ce,Ce,Ee){for(var ct=0,Qe=ce.length,ut=Ce.length,dt,Ut;ct<Qe;){if(Ee>=ut)return-1;if(dt=ce.charCodeAt(ct++),dt===37){if(dt=ce.charAt(ct++),Ut=O[dt in rL?ce.charAt(ct++):dt],!Ut||(Ee=Ut(Ne,Ce,Ee))<0)return-1}else if(dt!=Ce.charCodeAt(Ee++))return-1}return Ee}function R(Ne,ce,Ce){var Ee=f.exec(ce.slice(Ce));return Ee?(Ne.p=m.get(Ee[0].toLowerCase()),Ce+Ee[0].length):-1}function F(Ne,ce,Ce){var Ee=b.exec(ce.slice(Ce));return Ee?(Ne.w=T.get(Ee[0].toLowerCase()),Ce+Ee[0].length):-1}function D(Ne,ce,Ce){var Ee=p.exec(ce.slice(Ce));return Ee?(Ne.w=y.get(Ee[0].toLowerCase()),Ce+Ee[0].length):-1}function L(Ne,ce,Ce){var Ee=N.exec(ce.slice(Ce));return Ee?(Ne.m=I.get(Ee[0].toLowerCase()),Ce+Ee[0].length):-1}function M(Ne,ce,Ce){var Ee=S.exec(ce.slice(Ce));return Ee?(Ne.m=w.get(Ee[0].toLowerCase()),Ce+Ee[0].length):-1}function Q(Ne,ce,Ce){return A(Ne,e,ce,Ce)}function Z(Ne,ce,Ce){return A(Ne,r,ce,Ce)}function W(Ne,ce,Ce){return A(Ne,n,ce,Ce)}function ee(Ne){return s[Ne.getDay()]}function Y(Ne){return a[Ne.getDay()]}function ye(Ne){return d[Ne.getMonth()]}function oe(Ne){return c[Ne.getMonth()]}function X(Ne){return i[+(Ne.getHours()>=12)]}function ne(Ne){return 1+~~(Ne.getMonth()/3)}function de(Ne){return s[Ne.getUTCDay()]}function J(Ne){return a[Ne.getUTCDay()]}function le(Ne){return d[Ne.getUTCMonth()]}function pe(Ne){return c[Ne.getUTCMonth()]}function be(Ne){return i[+(Ne.getUTCHours()>=12)]}function Je(Ne){return 1+~~(Ne.getUTCMonth()/3)}return{format:function(Ne){var ce=B(Ne+="",C);return ce.toString=function(){return Ne},ce},parse:function(Ne){var ce=E(Ne+="",!1);return ce.toString=function(){return Ne},ce},utcFormat:function(Ne){var ce=B(Ne+="",z);return ce.toString=function(){return Ne},ce},utcParse:function(Ne){var ce=E(Ne+="",!0);return ce.toString=function(){return Ne},ce}}}var rL={"-":"",_:" ",0:"0"},di=/^\s*\d+/,Yme=/^%/,Zme=/[\\^$*+?|[\]().{}]/g;function xr(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(e)+i:i)}function Jme(t){return t.replace(Zme,"\\$&")}function _m(t){return new RegExp("^(?:"+t.map(Jme).join("|")+")","i")}function Sm(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function epe(t,e,r){var n=di.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function tpe(t,e,r){var n=di.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function rpe(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function npe(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function ipe(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function nL(t,e,r){var n=di.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function iL(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function ape(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function spe(t,e,r){var n=di.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function ope(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function aL(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function lpe(t,e,r){var n=di.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function sL(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function cpe(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function upe(t,e,r){var n=di.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function dpe(t,e,r){var n=di.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function hpe(t,e,r){var n=di.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function fpe(t,e,r){var n=Yme.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function mpe(t,e,r){var n=di.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function ppe(t,e,r){var n=di.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function oL(t,e){return xr(t.getDate(),e,2)}function gpe(t,e){return xr(t.getHours(),e,2)}function ype(t,e){return xr(t.getHours()%12||12,e,2)}function vpe(t,e){return xr(1+$g.count(Dl(t),t),e,3)}function iG(t,e){return xr(t.getMilliseconds(),e,3)}function bpe(t,e){return iG(t,e)+"000"}function xpe(t,e){return xr(t.getMonth()+1,e,2)}function wpe(t,e){return xr(t.getMinutes(),e,2)}function _pe(t,e){return xr(t.getSeconds(),e,2)}function Spe(t){var e=t.getDay();return e===0?7:e}function Tpe(t,e){return xr(r2.count(Dl(t)-1,t),e,2)}function aG(t){var e=t.getDay();return e>=4||e===0?Ih(t):Ih.ceil(t)}function Ape(t,e){return t=aG(t),xr(Ih.count(Dl(t),t)+(Dl(t).getDay()===4),e,2)}function Epe(t){return t.getDay()}function Npe(t,e){return xr(xb.count(Dl(t)-1,t),e,2)}function jpe(t,e){return xr(t.getFullYear()%100,e,2)}function kpe(t,e){return t=aG(t),xr(t.getFullYear()%100,e,2)}function Cpe(t,e){return xr(t.getFullYear()%1e4,e,4)}function Ope(t,e){var r=t.getDay();return t=r>=4||r===0?Ih(t):Ih.ceil(t),xr(t.getFullYear()%1e4,e,4)}function Ipe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xr(e/60|0,"0",2)+xr(e%60,"0",2)}function lL(t,e){return xr(t.getUTCDate(),e,2)}function Rpe(t,e){return xr(t.getUTCHours(),e,2)}function Mpe(t,e){return xr(t.getUTCHours()%12||12,e,2)}function Ppe(t,e){return xr(1+t2.count(Ll(t),t),e,3)}function sG(t,e){return xr(t.getUTCMilliseconds(),e,3)}function Dpe(t,e){return sG(t,e)+"000"}function Lpe(t,e){return xr(t.getUTCMonth()+1,e,2)}function Bpe(t,e){return xr(t.getUTCMinutes(),e,2)}function Upe(t,e){return xr(t.getUTCSeconds(),e,2)}function zpe(t){var e=t.getUTCDay();return e===0?7:e}function $pe(t,e){return xr(n2.count(Ll(t)-1,t),e,2)}function oG(t){var e=t.getUTCDay();return e>=4||e===0?Rh(t):Rh.ceil(t)}function Vpe(t,e){return t=oG(t),xr(Rh.count(Ll(t),t)+(Ll(t).getUTCDay()===4),e,2)}function Fpe(t){return t.getUTCDay()}function qpe(t,e){return xr(wb.count(Ll(t)-1,t),e,2)}function Hpe(t,e){return xr(t.getUTCFullYear()%100,e,2)}function Gpe(t,e){return t=oG(t),xr(t.getUTCFullYear()%100,e,2)}function Kpe(t,e){return xr(t.getUTCFullYear()%1e4,e,4)}function Wpe(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Rh(t):Rh.ceil(t),xr(t.getUTCFullYear()%1e4,e,4)}function Xpe(){return"+0000"}function cL(){return"%"}function uL(t){return+t}function dL(t){return Math.floor(+t/1e3)}var Dd,lG,cG;Qpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qpe(t){return Dd=Qme(t),lG=Dd.format,Dd.parse,cG=Dd.utcFormat,Dd.utcParse,Dd}function Ype(t){return new Date(t)}function Zpe(t){return t instanceof Date?+t:+new Date(+t)}function FE(t,e,r,n,i,a,s,c,d,f){var m=kE(),p=m.invert,y=m.domain,b=f(".%L"),T=f(":%S"),S=f("%I:%M"),w=f("%I %p"),N=f("%a %d"),I=f("%b %d"),C=f("%B"),z=f("%Y");function O(B){return(d(B)<B?b:c(B)<B?T:s(B)<B?S:a(B)<B?w:n(B)<B?i(B)<B?N:I:r(B)<B?C:z)(B)}return m.invert=function(B){return new Date(p(B))},m.domain=function(B){return arguments.length?y(Array.from(B,Zpe)):y().map(Ype)},m.ticks=function(B){var E=y();return t(E[0],E[E.length-1],B??10)},m.tickFormat=function(B,E){return E==null?O:f(E)},m.nice=function(B){var E=y();return(!B||typeof B.range!="function")&&(B=e(E[0],E[E.length-1],B??10)),B?y(XH(E,B)):m},m.copy=function(){return zg(m,FE(t,e,r,n,i,a,s,c,d,f))},m}function Jpe(){return Ns.apply(FE(Wme,Xme,Dl,$E,r2,$g,UE,LE,s0,lG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ege(){return Ns.apply(FE(Gme,Kme,Ll,VE,n2,t2,zE,BE,s0,cG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function i2(){var t=0,e=1,r,n,i,a,s=ra,c=!1,d;function f(p){return p==null||isNaN(p=+p)?d:s(i===0?.5:(p=(a(p)-r)*i,c?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([t,e]=p,r=a(t=+t),n=a(e=+e),i=r===n?0:1/(n-r),f):[t,e]},f.clamp=function(p){return arguments.length?(c=!!p,f):c},f.interpolator=function(p){return arguments.length?(s=p,f):s};function m(p){return function(y){var b,T;return arguments.length?([b,T]=y,s=p(b,T),f):[s(0),s(1)]}}return f.range=m(df),f.rangeRound=m(jE),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return a=p,r=p(t),n=p(e),i=r===n?0:1/(n-r),f}}function fu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uG(){var t=hu(i2()(ra));return t.copy=function(){return fu(t,uG())},ql.apply(t,arguments)}function dG(){var t=IE(i2()).domain([1,10]);return t.copy=function(){return fu(t,dG()).base(t.base())},ql.apply(t,arguments)}function hG(){var t=RE(i2());return t.copy=function(){return fu(t,hG()).constant(t.constant())},ql.apply(t,arguments)}function qE(){var t=ME(i2());return t.copy=function(){return fu(t,qE()).exponent(t.exponent())},ql.apply(t,arguments)}function tge(){return qE.apply(null,arguments).exponent(.5)}function fG(){var t=[],e=ra;function r(n){if(n!=null&&!isNaN(n=+n))return e((Bg(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Xc),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>$fe(t,a/n))},r.copy=function(){return fG(e).domain(t)},ql.apply(r,arguments)}function a2(){var t=0,e=.5,r=1,n=1,i,a,s,c,d,f=ra,m,p=!1,y;function b(S){return isNaN(S=+S)?y:(S=.5+((S=+m(S))-a)*(n*S<n*a?c:d),f(p?Math.max(0,Math.min(1,S)):S))}b.domain=function(S){return arguments.length?([t,e,r]=S,i=m(t=+t),a=m(e=+e),s=m(r=+r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b):[t,e,r]},b.clamp=function(S){return arguments.length?(p=!!S,b):p},b.interpolator=function(S){return arguments.length?(f=S,b):f};function T(S){return function(w){var N,I,C;return arguments.length?([N,I,C]=w,f=fme(S,[N,I,C]),b):[f(0),f(.5),f(1)]}}return b.range=T(df),b.rangeRound=T(jE),b.unknown=function(S){return arguments.length?(y=S,b):y},function(S){return m=S,i=S(t),a=S(e),s=S(r),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b}}function mG(){var t=hu(a2()(ra));return t.copy=function(){return fu(t,mG())},ql.apply(t,arguments)}function pG(){var t=IE(a2()).domain([.1,1,10]);return t.copy=function(){return fu(t,pG()).base(t.base())},ql.apply(t,arguments)}function gG(){var t=RE(a2());return t.copy=function(){return fu(t,gG()).constant(t.constant())},ql.apply(t,arguments)}function HE(){var t=ME(a2());return t.copy=function(){return fu(t,HE()).exponent(t.exponent())},ql.apply(t,arguments)}function rge(){return HE.apply(null,arguments).exponent(.5)}const hL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dp,scaleDiverging:mG,scaleDivergingLog:pG,scaleDivergingPow:HE,scaleDivergingSqrt:rge,scaleDivergingSymlog:gG,scaleIdentity:WH,scaleImplicit:nA,scaleLinear:vb,scaleLog:QH,scaleOrdinal:AE,scalePoint:Ym,scalePow:PE,scaleQuantile:JH,scaleQuantize:eG,scaleRadial:ZH,scaleSequential:uG,scaleSequentialLog:dG,scaleSequentialPow:qE,scaleSequentialQuantile:fG,scaleSequentialSqrt:tge,scaleSequentialSymlog:hG,scaleSqrt:Dme,scaleSymlog:YH,scaleThreshold:tG,scaleTime:Jpe,scaleUtc:ege,tickFormat:KH},Symbol.toStringTag,{value:"Module"}));var P_,fL;function s2(){if(fL)return P_;fL=1;var t=lf();function e(r,n,i){for(var a=-1,s=r.length;++a<s;){var c=r[a],d=n(c);if(d!=null&&(f===void 0?d===d&&!t(d):i(d,f)))var f=d,m=c}return m}return P_=e,P_}var D_,mL;function yG(){if(mL)return D_;mL=1;function t(e,r){return e>r}return D_=t,D_}var L_,pL;function nge(){if(pL)return L_;pL=1;var t=s2(),e=yG(),r=uf();function n(i){return i&&i.length?t(i,r,e):void 0}return L_=n,L_}var ige=nge();const o2=_r(ige);var B_,gL;function vG(){if(gL)return B_;gL=1;function t(e,r){return e<r}return B_=t,B_}var U_,yL;function age(){if(yL)return U_;yL=1;var t=s2(),e=vG(),r=uf();function n(i){return i&&i.length?t(i,r,e):void 0}return U_=n,U_}var sge=age();const l2=_r(sge);var z_,vL;function oge(){if(vL)return z_;vL=1;var t=oE(),e=Do(),r=EH(),n=ja();function i(a,s){var c=n(a)?t:r;return c(a,e(s,3))}return z_=i,z_}var $_,bL;function lge(){if(bL)return $_;bL=1;var t=TH(),e=oge();function r(n,i){return t(e(n,i),1)}return $_=r,$_}var cge=lge();const uge=_r(cge);var V_,xL;function dge(){if(xL)return V_;xL=1;var t=bE();function e(r,n){return t(r,n)}return V_=e,V_}var hge=dge();const Vg=_r(hge);var hf=1e9,fge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},KE,ln=!0,Es="[DecimalError] ",g0=Es+"Invalid argument: ",GE=Es+"Exponent out of range: ",ff=Math.floor,Yu=Math.pow,mge=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Va,li=1e7,rn=7,bG=9007199254740991,_b=ff(bG/rn),vt={};vt.absoluteValue=vt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};vt.comparedTo=vt.cmp=function(t){var e,r,n,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(n=a.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};vt.decimalPlaces=vt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};vt.dividedBy=vt.div=function(t){return Al(this,new this.constructor(t))};vt.dividedToIntegerBy=vt.idiv=function(t){var e=this,r=e.constructor;return qr(Al(e,new r(t),0,1),r.precision)};vt.equals=vt.eq=function(t){return!this.cmp(t)};vt.exponent=function(){return Gn(this)};vt.greaterThan=vt.gt=function(t){return this.cmp(t)>0};vt.greaterThanOrEqualTo=vt.gte=function(t){return this.cmp(t)>=0};vt.isInteger=vt.isint=function(){return this.e>this.d.length-2};vt.isNegative=vt.isneg=function(){return this.s<0};vt.isPositive=vt.ispos=function(){return this.s>0};vt.isZero=function(){return this.s===0};vt.lessThan=vt.lt=function(t){return this.cmp(t)<0};vt.lessThanOrEqualTo=vt.lte=function(t){return this.cmp(t)<1};vt.logarithm=vt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,a=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Va))throw Error(Es+"NaN");if(r.s<1)throw Error(Es+(r.s?"NaN":"-Infinity"));return r.eq(Va)?new n(0):(ln=!1,e=Al($p(r,a),$p(t,a),a),ln=!0,qr(e,i))};vt.minus=vt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_G(e,t):xG(e,(t.s=-t.s,t))};vt.modulo=vt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Es+"NaN");return r.s?(ln=!1,e=Al(r,t,0,1).times(t),ln=!0,r.minus(e)):qr(new n(r),i)};vt.naturalExponential=vt.exp=function(){return wG(this)};vt.naturalLogarithm=vt.ln=function(){return $p(this)};vt.negated=vt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};vt.plus=vt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?xG(e,t):_G(e,(t.s=-t.s,t))};vt.precision=vt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(g0+t);if(e=Gn(i)+1,n=i.d.length-1,r=n*rn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};vt.squareRoot=vt.sqrt=function(){var t,e,r,n,i,a,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(Es+"NaN")}for(t=Gn(c),ln=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=wo(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ff((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(i.toString()),r=d.precision,i=s=r+3;;)if(a=n,n=a.plus(Al(c,a,s+2)).times(.5),wo(a.d).slice(0,s)===(e=wo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(qr(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;s+=4}return ln=!0,qr(n,r)};vt.times=vt.mul=function(t){var e,r,n,i,a,s,c,d,f,m=this,p=m.constructor,y=m.d,b=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,r=m.e+t.e,d=y.length,f=b.length,d<f&&(a=y,y=b,b=a,s=d,d=f,f=s),a=[],s=d+f,n=s;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=d+n;i>n;)c=a[i]+b[n]*y[i-n-1]+e,a[i--]=c%li|0,e=c/li|0;a[i]=(a[i]+e)%li|0}for(;!a[--s];)a.pop();return e?++r:a.shift(),t.d=a,t.e=r,ln?qr(t,p.precision):t};vt.toDecimalPlaces=vt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ko(t,0,hf),e===void 0?e=n.rounding:ko(e,0,8),qr(r,t+Gn(r)+1,e))};vt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=I0(n,!0):(ko(t,0,hf),e===void 0?e=i.rounding:ko(e,0,8),n=qr(new i(n),t+1,e),r=I0(n,!0,t+1)),r};vt.toFixed=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?I0(i):(ko(t,0,hf),e===void 0?e=a.rounding:ko(e,0,8),n=qr(new a(i),t+Gn(i)+1,e),r=I0(n.abs(),!1,t+Gn(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};vt.toInteger=vt.toint=function(){var t=this,e=t.constructor;return qr(new e(t),Gn(t)+1,e.rounding)};vt.toNumber=function(){return+this};vt.toPower=vt.pow=function(t){var e,r,n,i,a,s,c=this,d=c.constructor,f=12,m=+(t=new d(t));if(!t.s)return new d(Va);if(c=new d(c),!c.s){if(t.s<1)throw Error(Es+"Infinity");return c}if(c.eq(Va))return c;if(n=d.precision,t.eq(Va))return qr(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,a=c.s,s){if((r=m<0?-m:m)<=bG){for(i=new d(Va),e=Math.ceil(n/rn+4),ln=!1;r%2&&(i=i.times(c),_L(i.d,e)),r=ff(r/2),r!==0;)c=c.times(c),_L(c.d,e);return ln=!0,t.s<0?new d(Va).div(i):qr(i,n)}}else if(a<0)throw Error(Es+"NaN");return a=a<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,ln=!1,i=t.times($p(c,n+f)),ln=!0,i=wG(i),i.s=a,i};vt.toPrecision=function(t,e){var r,n,i=this,a=i.constructor;return t===void 0?(r=Gn(i),n=I0(i,r<=a.toExpNeg||r>=a.toExpPos)):(ko(t,1,hf),e===void 0?e=a.rounding:ko(e,0,8),i=qr(new a(i),t,e),r=Gn(i),n=I0(i,t<=r||r<=a.toExpNeg,t)),n};vt.toSignificantDigits=vt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ko(t,1,hf),e===void 0?e=n.rounding:ko(e,0,8)),qr(new n(r),t,e)};vt.toString=vt.valueOf=vt.val=vt.toJSON=vt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Gn(t),r=t.constructor;return I0(t,e<=r.toExpNeg||e>=r.toExpPos)};function xG(t,e){var r,n,i,a,s,c,d,f,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),ln?qr(e,p):e;if(d=t.d,f=e.d,s=t.e,i=e.e,d=d.slice(),a=s-i,a){for(a<0?(n=d,a=-a,c=f.length):(n=f,i=s,c=d.length),s=Math.ceil(p/rn),c=s>c?s+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=d.length,a=f.length,c-a<0&&(a=c,n=f,f=d,d=n),r=0;a;)r=(d[--a]=d[a]+f[a]+r)/li|0,d[a]%=li;for(r&&(d.unshift(r),++i),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=i,ln?qr(e,p):e}function ko(t,e,r){if(t!==~~t||t<e||t>r)throw Error(g0+t)}function wo(t){var e,r,n,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)n=t[e]+"",r=rn-n.length,r&&(a+=kc(r)),a+=n;s=t[e],n=s+"",r=rn-n.length,r&&(a+=kc(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Al=(function(){function t(n,i){var a,s=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+s,n[c]=a%li|0,s=a/li|0;return s&&n.unshift(s),n}function e(n,i,a,s){var c,d;if(a!=s)d=a>s?1:-1;else for(c=d=0;c<a;c++)if(n[c]!=i[c]){d=n[c]>i[c]?1:-1;break}return d}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*li+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var c,d,f,m,p,y,b,T,S,w,N,I,C,z,O,B,E,A,R=n.constructor,F=n.s==i.s?1:-1,D=n.d,L=i.d;if(!n.s)return new R(n);if(!i.s)throw Error(Es+"Division by zero");for(d=n.e-i.e,E=L.length,O=D.length,b=new R(F),T=b.d=[],f=0;L[f]==(D[f]||0);)++f;if(L[f]>(D[f]||0)&&--d,a==null?I=a=R.precision:s?I=a+(Gn(n)-Gn(i))+1:I=a,I<0)return new R(0);if(I=I/rn+2|0,f=0,E==1)for(m=0,L=L[0],I++;(f<O||m)&&I--;f++)C=m*li+(D[f]||0),T[f]=C/L|0,m=C%L|0;else{for(m=li/(L[0]+1)|0,m>1&&(L=t(L,m),D=t(D,m),E=L.length,O=D.length),z=E,S=D.slice(0,E),w=S.length;w<E;)S[w++]=0;A=L.slice(),A.unshift(0),B=L[0],L[1]>=li/2&&++B;do m=0,c=e(L,S,E,w),c<0?(N=S[0],E!=w&&(N=N*li+(S[1]||0)),m=N/B|0,m>1?(m>=li&&(m=li-1),p=t(L,m),y=p.length,w=S.length,c=e(p,S,y,w),c==1&&(m--,r(p,E<y?A:L,y))):(m==0&&(c=m=1),p=L.slice()),y=p.length,y<w&&p.unshift(0),r(S,p,w),c==-1&&(w=S.length,c=e(L,S,E,w),c<1&&(m++,r(S,E<w?A:L,w))),w=S.length):c===0&&(m++,S=[0]),T[f++]=m,c&&S[0]?S[w++]=D[z]||0:(S=[D[z]],w=1);while((z++<O||S[0]!==void 0)&&I--)}return T[0]||T.shift(),b.e=d,qr(b,s?a+Gn(b)+1:a)}})();function wG(t,e){var r,n,i,a,s,c,d=0,f=0,m=t.constructor,p=m.precision;if(Gn(t)>16)throw Error(GE+Gn(t));if(!t.s)return new m(Va);for(ln=!1,c=p,s=new m(.03125);t.abs().gte(.1);)t=t.times(s),f+=5;for(n=Math.log(Yu(2,f))/Math.LN10*2+5|0,c+=n,r=i=a=new m(Va),m.precision=c;;){if(i=qr(i.times(t),c),r=r.times(++d),s=a.plus(Al(i,r,c)),wo(s.d).slice(0,c)===wo(a.d).slice(0,c)){for(;f--;)a=qr(a.times(a),c);return m.precision=p,e==null?(ln=!0,qr(a,p)):a}a=s}}function Gn(t){for(var e=t.e*rn,r=t.d[0];r>=10;r/=10)e++;return e}function F_(t,e,r){if(e>t.LN10.sd())throw ln=!0,r&&(t.precision=r),Error(Es+"LN10 precision limit exceeded");return qr(new t(t.LN10),e)}function kc(t){for(var e="";t--;)e+="0";return e}function $p(t,e){var r,n,i,a,s,c,d,f,m,p=1,y=10,b=t,T=b.d,S=b.constructor,w=S.precision;if(b.s<1)throw Error(Es+(b.s?"NaN":"-Infinity"));if(b.eq(Va))return new S(0);if(e==null?(ln=!1,f=w):f=e,b.eq(10))return e==null&&(ln=!0),F_(S,f);if(f+=y,S.precision=f,r=wo(T),n=r.charAt(0),a=Gn(b),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(t),r=wo(b.d),n=r.charAt(0),p++;a=Gn(b),n>1?(b=new S("0."+r),a++):b=new S(n+"."+r.slice(1))}else return d=F_(S,f+2,w).times(a+""),b=$p(new S(n+"."+r.slice(1)),f-y).plus(d),S.precision=w,e==null?(ln=!0,qr(b,w)):b;for(c=s=b=Al(b.minus(Va),b.plus(Va),f),m=qr(b.times(b),f),i=3;;){if(s=qr(s.times(m),f),d=c.plus(Al(s,new S(i),f)),wo(d.d).slice(0,f)===wo(c.d).slice(0,f))return c=c.times(2),a!==0&&(c=c.plus(F_(S,f+2,w).times(a+""))),c=Al(c,new S(p),f),S.precision=w,e==null?(ln=!0,qr(c,w)):c;c=d,i+=2}}function wL(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=ff(r/rn),t.d=[],n=(r+1)%rn,r<0&&(n+=rn),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=rn;n<i;)t.d.push(+e.slice(n,n+=rn));e=e.slice(n),n=rn-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),ln&&(t.e>_b||t.e<-_b))throw Error(GE+r)}else t.s=0,t.e=0,t.d=[0];return t}function qr(t,e,r){var n,i,a,s,c,d,f,m,p=t.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=rn,i=e,f=p[m=0];else{if(m=Math.ceil((n+1)/rn),a=p.length,m>=a)return t;for(f=a=p[m],s=1;a>=10;a/=10)s++;n%=rn,i=n-rn+s}if(r!==void 0&&(a=Yu(10,s-i-1),c=f/a%10|0,d=e<0||p[m+1]!==void 0||f%a,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?i>0?f/Yu(10,s-i):0:p[m-1])%10&1||r==(t.s<0?8:7))),e<1||!p[0])return d?(a=Gn(t),p.length=1,e=e-a-1,p[0]=Yu(10,(rn-e%rn)%rn),t.e=ff(-e/rn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(n==0?(p.length=m,a=1,m--):(p.length=m+1,a=Yu(10,rn-n),p[m]=i>0?(f/Yu(10,s-i)%Yu(10,i)|0)*a:0),d)for(;;)if(m==0){(p[0]+=a)==li&&(p[0]=1,++t.e);break}else{if(p[m]+=a,p[m]!=li)break;p[m--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(ln&&(t.e>_b||t.e<-_b))throw Error(GE+Gn(t));return t}function _G(t,e){var r,n,i,a,s,c,d,f,m,p,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),ln?qr(e,b):e;if(d=t.d,p=e.d,n=e.e,f=t.e,d=d.slice(),s=f-n,s){for(m=s<0,m?(r=d,s=-s,c=p.length):(r=p,n=f,c=d.length),i=Math.max(Math.ceil(b/rn),c)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=d.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(d[i]!=p[i]){m=d[i]<p[i];break}s=0}for(m&&(r=d,d=p,p=r,e.s=-e.s),c=d.length,i=p.length-c;i>0;--i)d[c++]=0;for(i=p.length;i>s;){if(d[--i]<p[i]){for(a=i;a&&d[--a]===0;)d[a]=li-1;--d[a],d[i]+=li}d[i]-=p[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,ln?qr(e,b):e):new y(0)}function I0(t,e,r){var n,i=Gn(t),a=wo(t.d),s=a.length;return e?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+kc(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+kc(-i-1)+a,r&&(n=r-s)>0&&(a+=kc(n))):i>=s?(a+=kc(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+kc(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=kc(n))),t.s<0?"-"+a:a}function _L(t,e){if(t.length>e)return t.length=e,!0}function SG(t){var e,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(g0+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return wL(s,a.toString())}else if(typeof a!="string")throw Error(g0+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,mge.test(a))wL(s,a);else throw Error(g0+a)}if(i.prototype=vt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=SG,i.config=i.set=pge,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function pge(t){if(!t||typeof t!="object")throw Error(Es+"Object expected");var e,r,n,i=["precision",1,hf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(ff(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(g0+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(g0+r+": "+n);return this}var KE=SG(fge);Va=new KE(1);const Br=KE;function gge(t){return xge(t)||bge(t)||vge(t)||yge()}function yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vge(t,e){if(t){if(typeof t=="string")return oA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oA(t,e)}}function bge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function xge(t){if(Array.isArray(t))return oA(t)}function oA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wge=function(e){return e},TG={},AG=function(e){return e===TG},SL=function(e){return function r(){return arguments.length===0||arguments.length===1&&AG(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},_ge=function t(e,r){return e===1?r:SL(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==TG}).length;return s>=e?r.apply(void 0,i):t(e-s,SL(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=i.map(function(p){return AG(p)?d.shift():p});return r.apply(void 0,gge(m).concat(d))}))})},c2=function(e){return _ge(e.length,e)},lA=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},Sge=c2(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Tge=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return wge;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,d){return d(c)},a.apply(void 0,arguments))}},cA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},EG=function(e){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(c,d){return c===r[d]})||(r=a,n=e.apply(void 0,a)),n}};function Age(t){var e;return t===0?e=1:e=Math.floor(new Br(t).abs().log(10).toNumber())+1,e}function Ege(t,e,r){for(var n=new Br(t),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var Nge=c2(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),jge=c2(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),kge=c2(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const u2={rangeStep:Ege,getDigitCount:Age,interpolateNumber:Nge,uninterpolateNumber:jge,uninterpolateTruncation:kge};function uA(t){return Ige(t)||Oge(t)||NG(t)||Cge()}function Cge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oge(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Ige(t){if(Array.isArray(t))return dA(t)}function Vp(t,e){return Pge(t)||Mge(t,e)||NG(t,e)||Rge()}function Rge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NG(t,e){if(t){if(typeof t=="string")return dA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dA(t,e)}}function dA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mge(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function Pge(t){if(Array.isArray(t))return t}function jG(t){var e=Vp(t,2),r=e[0],n=e[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function kG(t,e,r){if(t.lte(0))return new Br(0);var n=u2.getDigitCount(t.toNumber()),i=new Br(10).pow(n),a=t.div(i),s=n!==1?.05:.1,c=new Br(Math.ceil(a.div(s).toNumber())).add(r).mul(s),d=c.mul(i);return e?d:new Br(Math.ceil(d))}function Dge(t,e,r){var n=1,i=new Br(t);if(!i.isint()&&r){var a=Math.abs(t);a<1?(n=new Br(10).pow(u2.getDigitCount(t)-1),i=new Br(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Br(Math.floor(t)))}else t===0?i=new Br(Math.floor((e-1)/2)):r||(i=new Br(Math.floor(t)));var s=Math.floor((e-1)/2),c=Tge(Sge(function(d){return i.add(new Br(d-s).mul(n)).toNumber()}),lA);return c(0,e)}function CG(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Br(0),tickMin:new Br(0),tickMax:new Br(0)};var a=kG(new Br(e).sub(t).div(r-1),n,i),s;t<=0&&e>=0?s=new Br(0):(s=new Br(t).add(e).div(2),s=s.sub(new Br(s).mod(a)));var c=Math.ceil(s.sub(t).div(a).toNumber()),d=Math.ceil(new Br(e).sub(s).div(a).toNumber()),f=c+d+1;return f>r?CG(t,e,r,n,i+1):(f<r&&(d=e>0?d+(r-f):d,c=e>0?c:c+(r-f)),{step:a,tickMin:s.sub(new Br(c).mul(a)),tickMax:s.add(new Br(d).mul(a))})}function Lge(t){var e=Vp(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=jG([r,n]),d=Vp(c,2),f=d[0],m=d[1];if(f===-1/0||m===1/0){var p=m===1/0?[f].concat(uA(lA(0,i-1).map(function(){return 1/0}))):[].concat(uA(lA(0,i-1).map(function(){return-1/0})),[m]);return r>n?cA(p):p}if(f===m)return Dge(f,i,a);var y=CG(f,m,s,a),b=y.step,T=y.tickMin,S=y.tickMax,w=u2.rangeStep(T,S.add(new Br(.1).mul(b)),b);return r>n?cA(w):w}function Bge(t,e){var r=Vp(t,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=jG([n,i]),c=Vp(s,2),d=c[0],f=c[1];if(d===-1/0||f===1/0)return[n,i];if(d===f)return[d];var m=Math.max(e,2),p=kG(new Br(f).sub(d).div(m-1),a,0),y=[].concat(uA(u2.rangeStep(new Br(d),new Br(f).sub(new Br(.99).mul(p)),p)),[f]);return n>i?cA(y):y}var Uge=EG(Lge),zge=EG(Bge),$ge="Invariant failed";function R0(t,e){throw new Error($ge)}var Vge=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Mh(t){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(t)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Sb.apply(this,arguments)}function Fge(t,e){return Kge(t)||Gge(t,e)||Hge(t,e)||qge()}function qge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hge(t,e){if(t){if(typeof t=="string")return TL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TL(t,e)}}function TL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Kge(t){if(Array.isArray(t))return t}function Wge(t,e){if(t==null)return{};var r=Xge(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Xge(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Qge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RG(n.key),n)}}function Zge(t,e,r){return e&&Yge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jge(t,e,r){return e=Tb(e),e1e(t,OG()?Reflect.construct(e,r||[],Tb(t).constructor):e.apply(t,r))}function e1e(t,e){if(e&&(Mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t1e(t)}function t1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OG=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tb(t)}function r1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hA(t,e)}function hA(t,e){return hA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},hA(t,e)}function IG(t,e,r){return e=RG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RG(t){var e=n1e(t,"string");return Mh(e)=="symbol"?e:e+""}function n1e(t,e){if(Mh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fg=(function(t){function e(){return Qge(this,e),Jge(this,e,arguments)}return r1e(e,t),Zge(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,c=n.dataKey,d=n.data,f=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,y=Wge(n,Vge),b=Nt(y,!1);this.props.direction==="x"&&m.type!=="number"&&R0();var T=d.map(function(S){var w=f(S,c),N=w.x,I=w.y,C=w.value,z=w.errorVal;if(!z)return null;var O=[],B,E;if(Array.isArray(z)){var A=Fge(z,2);B=A[0],E=A[1]}else B=E=z;if(a==="vertical"){var R=m.scale,F=I+i,D=F+s,L=F-s,M=R(C-B),Q=R(C+E);O.push({x1:Q,y1:D,x2:Q,y2:L}),O.push({x1:M,y1:F,x2:Q,y2:F}),O.push({x1:M,y1:D,x2:M,y2:L})}else if(a==="horizontal"){var Z=p.scale,W=N+i,ee=W-s,Y=W+s,ye=Z(C-B),oe=Z(C+E);O.push({x1:ee,y1:oe,x2:Y,y2:oe}),O.push({x1:W,y1:ye,x2:W,y2:oe}),O.push({x1:ee,y1:ye,x2:Y,y2:ye})}return ae.createElement(vr,Sb({className:"recharts-errorBar",key:"bar-".concat(O.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},b),O.map(function(X){return ae.createElement("line",Sb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return ae.createElement(vr,{className:"recharts-errorBars"},T)}}])})(ae.Component);IG(Fg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});IG(Fg,"displayName","ErrorBar");function Fp(t){"@babel/helpers - typeof";return Fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fp(t)}function AL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function qu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(r),!0).forEach(function(n){i1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i1e(t,e,r){return e=a1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a1e(t){var e=s1e(t,"string");return Fp(e)=="symbol"?e:e+""}function s1e(t,e){if(Fp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MG=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=za(r,ih);if(!s)return null;var c=ih.defaultProps,d=c!==void 0?qu(qu({},c),s.props):{},f;return s.props&&s.props.payload?f=s.props&&s.props.payload:a==="children"?f=(n||[]).reduce(function(m,p){var y=p.item,b=p.props,T=b.sectors||b.data||[];return m.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):f=(n||[]).map(function(m){var p=m.item,y=p.type.defaultProps,b=y!==void 0?qu(qu({},y),p.props):{},T=b.dataKey,S=b.name,w=b.legendType,N=b.hide;return{inactive:N,dataKey:T,type:d.iconType||w||"square",color:WE(p),value:S||T,payload:b}}),qu(qu(qu({},d),ih.getWithHeight(s,i)),{},{payload:f,item:s})};function qp(t){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(t)}function EL(t){return u1e(t)||c1e(t)||l1e(t)||o1e()}function o1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l1e(t,e){if(t){if(typeof t=="string")return fA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fA(t,e)}}function c1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function u1e(t){if(Array.isArray(t))return fA(t)}function fA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Sn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(r),!0).forEach(function(n){sh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sh(t,e,r){return e=d1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d1e(t){var e=h1e(t,"string");return qp(e)=="symbol"?e:e+""}function h1e(t,e){if(qp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ji(t,e,r){return Vt(t)||Vt(e)?r:Zn(e)?bs(t,e,r):Lt(e)?e(t):r}function Zm(t,e,r,n){var i=uge(t,function(c){return ji(c,e)});if(r==="number"){var a=i.filter(function(c){return at(c)||parseFloat(c)});return a.length?[l2(a),o2(a)]:[1/0,-1/0]}var s=n?i.filter(function(c){return!Vt(c)}):i;return s.map(function(c){return Zn(c)||c instanceof Date?c:""})}var f1e=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var d=a.range,f=0;f<c;f++){var m=f>0?i[f-1].coordinate:i[c-1].coordinate,p=i[f].coordinate,y=f>=c-1?i[0].coordinate:i[f+1].coordinate,b=void 0;if(qs(p-m)!==qs(y-p)){var T=[];if(qs(y-p)===qs(d[1]-d[0])){b=y;var S=p+d[1]-d[0];T[0]=Math.min(S,(S+m)/2),T[1]=Math.max(S,(S+m)/2)}else{b=m;var w=y+d[1]-d[0];T[0]=Math.min(p,(w+p)/2),T[1]=Math.max(p,(w+p)/2)}var N=[Math.min(p,(b+p)/2),Math.max(p,(b+p)/2)];if(e>N[0]&&e<=N[1]||e>=T[0]&&e<=T[1]){s=i[f].index;break}}else{var I=Math.min(m,y),C=Math.max(m,y);if(e>(I+p)/2&&e<=(C+p)/2){s=i[f].index;break}}}else for(var z=0;z<c;z++)if(z===0&&e<=(n[z].coordinate+n[z+1].coordinate)/2||z>0&&z<c-1&&e>(n[z].coordinate+n[z-1].coordinate)/2&&e<=(n[z].coordinate+n[z+1].coordinate)/2||z===c-1&&e>(n[z].coordinate+n[z-1].coordinate)/2){s=n[z].index;break}return s},WE=function(e){var r,n=e,i=n.type.displayName,a=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Sn(Sn({},e.type.defaultProps),e.props):e.props,s=a.stroke,c=a.fill,d;switch(i){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},m1e=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),d=0,f=c.length;d<f;d++)for(var m=a[c[d]].stackGroups,p=Object.keys(m),y=0,b=p.length;y<b;y++){var T=m[p[y]],S=T.items,w=T.cateAxisId,N=S.filter(function(E){return Sl(E.type).indexOf("Bar")>=0});if(N&&N.length){var I=N[0].type.defaultProps,C=I!==void 0?Sn(Sn({},I),N[0].props):N[0].props,z=C.barSize,O=C[w];s[O]||(s[O]=[]);var B=Vt(z)?r:z;s[O].push({item:N[0],stackList:N.slice(1),barSize:Vt(B)?void 0:Hs(B,n,0)})}}return s},p1e=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,c=e.maxBarSize,d=s.length;if(d<1)return null;var f=Hs(r,i,0,!0),m,p=[];if(s[0].barSize===+s[0].barSize){var y=!1,b=i/d,T=s.reduce(function(z,O){return z+O.barSize||0},0);T+=(d-1)*f,T>=i&&(T-=(d-1)*f,f=0),T>=i&&b>0&&(y=!0,b*=.9,T=d*b);var S=(i-T)/2>>0,w={offset:S-f,size:0};m=s.reduce(function(z,O){var B={item:O.item,position:{offset:w.offset+w.size+f,size:y?b:O.barSize}},E=[].concat(EL(z),[B]);return w=E[E.length-1].position,O.stackList&&O.stackList.length&&O.stackList.forEach(function(A){E.push({item:A,position:w})}),E},p)}else{var N=Hs(n,i,0,!0);i-2*N-(d-1)*f<=0&&(f=0);var I=(i-2*N-(d-1)*f)/d;I>1&&(I>>=0);var C=c===+c?Math.min(I,c):I;m=s.reduce(function(z,O,B){var E=[].concat(EL(z),[{item:O.item,position:{offset:N+(I+f)*B+(I-C)/2,size:C}}]);return O.stackList&&O.stackList.length&&O.stackList.forEach(function(A){E.push({item:A,position:E[E.length-1].position})}),E},p)}return m},g1e=function(e,r,n,i){var a=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),f=MG({children:a,legendWidth:d});if(f){var m=i||{},p=m.width,y=m.height,b=f.align,T=f.verticalAlign,S=f.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&b!=="center"&&at(e[b]))return Sn(Sn({},e),{},sh({},b,e[b]+(p||0)));if((S==="horizontal"||S==="vertical"&&b==="center")&&T!=="middle"&&at(e[T]))return Sn(Sn({},e),{},sh({},T,e[T]+(y||0)))}return e},y1e=function(e,r,n){return Vt(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},PG=function(e,r,n,i,a){var s=r.props.children,c=Xa(s,Fg).filter(function(f){return y1e(i,a,f.props.direction)});if(c&&c.length){var d=c.map(function(f){return f.props.dataKey});return e.reduce(function(f,m){var p=ji(m,n);if(Vt(p))return f;var y=Array.isArray(p)?[l2(p),o2(p)]:[p,p],b=d.reduce(function(T,S){var w=ji(m,S,0),N=y[0]-Math.abs(Array.isArray(w)?w[0]:w),I=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(N,T[0]),Math.max(I,T[1])]},[1/0,-1/0]);return[Math.min(b[0],f[0]),Math.max(b[1],f[1])]},[1/0,-1/0])}return null},v1e=function(e,r,n,i,a){var s=r.map(function(c){return PG(e,c,n,a,i)}).filter(function(c){return!Vt(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},DG=function(e,r,n,i,a){var s=r.map(function(d){var f=d.props.dataKey;return n==="number"&&f&&PG(e,d,f,i)||Zm(e,f,n,a)});if(n==="number")return s.reduce(function(d,f){return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,f){for(var m=0,p=f.length;m<p;m++)c[f[m]]||(c[f[m]]=!0,d.push(f[m]));return d},[])},LG=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},BG=function(e,r,n,i){if(i)return e.map(function(d){return d.coordinate});var a,s,c=e.map(function(d){return d.coordinate===r&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate});return a||c.push(r),s||c.push(n),c},bl=function(e,r,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,f=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/d:0;if(f=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?qs(c[0]-c[1])*2*f:f,r&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var y=a?a.indexOf(p):p;return{coordinate:i(y)+f,value:p,offset:f}});return m.filter(function(p){return!Pg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:i(p)+f,value:p,index:y,offset:f}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+f,value:p,offset:f}}):i.domain().map(function(p,y){return{coordinate:i(p)+f,value:a?a[p]:p,index:y,offset:f}})},q_=new WeakMap,qy=function(e,r){if(typeof r!="function")return e;q_.has(e)||q_.set(e,new WeakMap);var n=q_.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},UG=function(e,r,n){var i=e.scale,a=e.type,s=e.layout,c=e.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:Dp(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:vb(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ym(),realScaleType:"point"}:a==="category"?{scale:Dp(),realScaleType:"band"}:{scale:vb(),realScaleType:"linear"};if(C0(i)){var d="scale".concat(Gx(i));return{scale:(hL[d]||Ym)(),realScaleType:hL[d]?d:"point"}}return Lt(i)?{scale:i}:{scale:Ym(),realScaleType:"point"}},jL=1e-4,zG=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),a=Math.min(i[0],i[1])-jL,s=Math.max(i[0],i[1])+jL,c=e(r[0]),d=e(r[n-1]);(c<a||c>s||d<a||d>s)&&e.domain([r[0],r[n-1]])}},b1e=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},x1e=function(e,r){if(!r||r.length!==2||!at(r[0])||!at(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[e[0],e[1]];return(!at(e[0])||e[0]<n)&&(a[0]=n),(!at(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},w1e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,c=0;c<r;++c){var d=Pg(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=a,e[c][n][1]=a+d,a=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},_1e=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var c=Pg(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=a,e[s][n][1]=a+c,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},S1e={sign:w1e,expand:u0e,none:Ah,silhouette:d0e,wiggle:h0e,positive:_1e},T1e=function(e,r,n){var i=r.map(function(c){return c.props.dataKey}),a=S1e[n],s=c0e().keys(i).value(function(c,d){return+ji(c,d,0)}).order(FT).offset(a);return s(e)},A1e=function(e,r,n,i,a,s){if(!e)return null;var c=s?r.reverse():r,d={},f=c.reduce(function(p,y){var b,T=(b=y.type)!==null&&b!==void 0&&b.defaultProps?Sn(Sn({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return p;var N=T[n],I=p[N]||{hasStack:!1,stackGroups:{}};if(Zn(S)){var C=I.stackGroups[S]||{numericAxisId:n,cateAxisId:i,items:[]};C.items.push(y),I.hasStack=!0,I.stackGroups[S]=C}else I.stackGroups[Dg("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[y]};return Sn(Sn({},p),{},sh({},N,I))},d),m={};return Object.keys(f).reduce(function(p,y){var b=f[y];if(b.hasStack){var T={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(S,w){var N=b.stackGroups[w];return Sn(Sn({},S),{},sh({},w,{numericAxisId:n,cateAxisId:i,items:N.items,stackedData:T1e(e,N.items,a)}))},T)}return Sn(Sn({},p),{},sh({},y,b))},m)},$G=function(e,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var f=e.domain();if(!f.length)return null;var m=Uge(f,a,c);return e.domain([l2(m),o2(m)]),{niceTicks:m}}if(a&&i==="number"){var p=e.domain(),y=zge(p,a,c);return{niceTicks:y}}return null};function kL(t){var e=t.axis,r=t.ticks,n=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Vt(i[e.dataKey])){var c=Jv(r,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var d=ji(i,Vt(s)?e.dataKey:s);return Vt(d)?null:e.scale(d)}var CL=function(e){var r=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+i:null;var d=ji(s,r.dataKey,r.domain[c]);return Vt(d)?null:r.scale(d)-a/2+i},E1e=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},N1e=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Sn(Sn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Zn(a)){var s=r[a];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},j1e=function(e){return e.reduce(function(r,n){return[l2(n.concat([r[0]]).filter(at)),o2(n.concat([r[1]]).filter(at))]},[1/0,-1/0])},VG=function(e,r,n){return Object.keys(e).reduce(function(i,a){var s=e[a],c=s.stackedData,d=c.reduce(function(f,m){var p=j1e(m.slice(r,n+1));return[Math.min(f[0],p[0]),Math.max(f[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},OL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,IL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mA=function(e,r,n){if(Lt(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(at(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(OL.test(e[0])){var a=+OL.exec(e[0])[1];i[0]=r[0]-a}else Lt(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(at(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(IL.test(e[1])){var s=+IL.exec(e[1])[1];i[1]=r[1]+s}else Lt(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},Ab=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var a=wE(r,function(p){return p.coordinate}),s=1/0,c=1,d=a.length;c<d;c++){var f=a[c],m=a[c-1];s=Math.min((f.coordinate||0)-(m.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},RL=function(e,r,n){return!e||!e.length||Vg(e,bs(n,"type.defaultProps.domain"))?r:e},FG=function(e,r){var n=e.type.defaultProps?Sn(Sn({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,f=n.chartType,m=n.hide;return Sn(Sn({},Nt(e,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:WE(e),value:ji(r,i),type:d,payload:r,chartType:f,hide:m})};function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}function ML(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ll(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(r),!0).forEach(function(n){qG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function qG(t,e,r){return e=k1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function k1e(t){var e=C1e(t,"string");return Hp(e)=="symbol"?e:e+""}function C1e(t,e){if(Hp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1e(t,e){return P1e(t)||M1e(t,e)||R1e(t,e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R1e(t,e){if(t){if(typeof t=="string")return PL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PL(t,e)}}function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M1e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function P1e(t){if(Array.isArray(t))return t}var Eb=Math.PI/180,D1e=function(e){return e*180/Math.PI},Ur=function(e,r,n,i){return{x:e+Math.cos(-Eb*i)*n,y:r+Math.sin(-Eb*i)*n}},L1e=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},B1e=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.startAngle,f=e.endAngle,m=Hs(e.cx,s,s/2),p=Hs(e.cy,c,c/2),y=L1e(s,c,n),b=Hs(e.innerRadius,y,0),T=Hs(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,N){var I=r[N],C=I.domain,z=I.reversed,O;if(Vt(I.range))i==="angleAxis"?O=[d,f]:i==="radiusAxis"&&(O=[b,T]),z&&(O=[O[1],O[0]]);else{O=I.range;var B=O,E=O1e(B,2);d=E[0],f=E[1]}var A=UG(I,a),R=A.realScaleType,F=A.scale;F.domain(C).range(O),zG(F);var D=$G(F,ll(ll({},I),{},{realScaleType:R})),L=ll(ll(ll({},I),D),{},{range:O,radius:T,realScaleType:R,scale:F,cx:m,cy:p,innerRadius:b,outerRadius:T,startAngle:d,endAngle:f});return ll(ll({},w),{},qG({},N,L))},{})},U1e=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},z1e=function(e,r){var n=e.x,i=e.y,a=r.cx,s=r.cy,c=U1e({x:n,y:i},{x:a,y:s});if(c<=0)return{radius:c};var d=(n-a)/c,f=Math.acos(d);return i>s&&(f=2*Math.PI-f),{radius:c,angle:D1e(f),angleInRadian:f}},$1e=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},V1e=function(e,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),c=Math.min(a,s);return e+c*360},DL=function(e,r){var n=e.x,i=e.y,a=z1e({x:n,y:i},r),s=a.radius,c=a.angle,d=r.innerRadius,f=r.outerRadius;if(s<d||s>f)return!1;if(s===0)return!0;var m=$1e(r),p=m.startAngle,y=m.endAngle,b=c,T;if(p<=y){for(;b>y;)b-=360;for(;b<p;)b+=360;T=b>=p&&b<=y}else{for(;b>p;)b-=360;for(;b<y;)b+=360;T=b>=y&&b<=p}return T?ll(ll({},r),{},{radius:s,angle:V1e(b,r)}):null},HG=function(e){return!V.isValidElement(e)&&!Lt(e)&&typeof e!="boolean"?e.className:""};function Gp(t){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(t)}var F1e=["offset"];function q1e(t){return W1e(t)||K1e(t)||G1e(t)||H1e()}function H1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G1e(t,e){if(t){if(typeof t=="string")return pA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pA(t,e)}}function K1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function W1e(t){if(Array.isArray(t))return pA(t)}function pA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X1e(t,e){if(t==null)return{};var r=Q1e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Q1e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function LL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Yn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LL(Object(r),!0).forEach(function(n){Y1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Y1e(t,e,r){return e=Z1e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z1e(t){var e=J1e(t,"string");return Gp(e)=="symbol"?e:e+""}function J1e(t,e){if(Gp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kp.apply(this,arguments)}var eye=function(e){var r=e.value,n=e.formatter,i=Vt(e.children)?r:e.children;return Lt(n)?n(i):i},tye=function(e,r){var n=qs(r-e),i=Math.min(Math.abs(r-e),360);return n*i},rye=function(e,r,n){var i=e.position,a=e.viewBox,s=e.offset,c=e.className,d=a,f=d.cx,m=d.cy,p=d.innerRadius,y=d.outerRadius,b=d.startAngle,T=d.endAngle,S=d.clockWise,w=(p+y)/2,N=tye(b,T),I=N>=0?1:-1,C,z;i==="insideStart"?(C=b+I*s,z=S):i==="insideEnd"?(C=T-I*s,z=!S):i==="end"&&(C=T+I*s,z=S),z=N<=0?z:!z;var O=Ur(f,m,w,C),B=Ur(f,m,w,C+(z?1:-1)*359),E="M".concat(O.x,",").concat(O.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(z?0:1,`,
    `).concat(B.x,",").concat(B.y),A=Vt(e.id)?Dg("recharts-radial-line-"):e.id;return ae.createElement("text",Kp({},n,{dominantBaseline:"central",className:Ht("recharts-radial-bar-label",c)}),ae.createElement("defs",null,ae.createElement("path",{id:A,d:E})),ae.createElement("textPath",{xlinkHref:"#".concat(A)},r))},nye=function(e){var r=e.viewBox,n=e.offset,i=e.position,a=r,s=a.cx,c=a.cy,d=a.innerRadius,f=a.outerRadius,m=a.startAngle,p=a.endAngle,y=(m+p)/2;if(i==="outside"){var b=Ur(s,c,f+n,y),T=b.x,S=b.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+f)/2,N=Ur(s,c,w,y),I=N.x,C=N.y;return{x:I,y:C,textAnchor:"middle",verticalAnchor:"middle"}},iye=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=r,c=s.x,d=s.y,f=s.width,m=s.height,p=m>=0?1:-1,y=p*i,b=p>0?"end":"start",T=p>0?"start":"end",S=f>=0?1:-1,w=S*i,N=S>0?"end":"start",I=S>0?"start":"end";if(a==="top"){var C={x:c+f/2,y:d-p*i,textAnchor:"middle",verticalAnchor:b};return Yn(Yn({},C),n?{height:Math.max(d-n.y,0),width:f}:{})}if(a==="bottom"){var z={x:c+f/2,y:d+m+y,textAnchor:"middle",verticalAnchor:T};return Yn(Yn({},z),n?{height:Math.max(n.y+n.height-(d+m),0),width:f}:{})}if(a==="left"){var O={x:c-w,y:d+m/2,textAnchor:N,verticalAnchor:"middle"};return Yn(Yn({},O),n?{width:Math.max(O.x-n.x,0),height:m}:{})}if(a==="right"){var B={x:c+f+w,y:d+m/2,textAnchor:I,verticalAnchor:"middle"};return Yn(Yn({},B),n?{width:Math.max(n.x+n.width-B.x,0),height:m}:{})}var E=n?{width:f,height:m}:{};return a==="insideLeft"?Yn({x:c+w,y:d+m/2,textAnchor:I,verticalAnchor:"middle"},E):a==="insideRight"?Yn({x:c+f-w,y:d+m/2,textAnchor:N,verticalAnchor:"middle"},E):a==="insideTop"?Yn({x:c+f/2,y:d+y,textAnchor:"middle",verticalAnchor:T},E):a==="insideBottom"?Yn({x:c+f/2,y:d+m-y,textAnchor:"middle",verticalAnchor:b},E):a==="insideTopLeft"?Yn({x:c+w,y:d+y,textAnchor:I,verticalAnchor:T},E):a==="insideTopRight"?Yn({x:c+f-w,y:d+y,textAnchor:N,verticalAnchor:T},E):a==="insideBottomLeft"?Yn({x:c+w,y:d+m-y,textAnchor:I,verticalAnchor:b},E):a==="insideBottomRight"?Yn({x:c+f-w,y:d+m-y,textAnchor:N,verticalAnchor:b},E):cf(a)&&(at(a.x)||i0(a.x))&&(at(a.y)||i0(a.y))?Yn({x:c+Hs(a.x,f),y:d+Hs(a.y,m),textAnchor:"end",verticalAnchor:"end"},E):Yn({x:c+f/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},E)},aye=function(e){return"cx"in e&&at(e.cx)};function Ai(t){var e=t.offset,r=e===void 0?5:e,n=X1e(t,F1e),i=Yn({offset:r},n),a=i.viewBox,s=i.position,c=i.value,d=i.children,f=i.content,m=i.className,p=m===void 0?"":m,y=i.textBreakAll;if(!a||Vt(c)&&Vt(d)&&!V.isValidElement(f)&&!Lt(f))return null;if(V.isValidElement(f))return V.cloneElement(f,i);var b;if(Lt(f)){if(b=V.createElement(f,i),V.isValidElement(b))return b}else b=eye(i);var T=aye(a),S=Nt(i,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return rye(i,b,S);var w=T?nye(i):iye(i);return ae.createElement(Ch,Kp({className:Ht("recharts-label",p)},S,w,{breakAll:y}),b)}Ai.displayName="Label";var GG=function(e){var r=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,f=e.innerRadius,m=e.outerRadius,p=e.x,y=e.y,b=e.top,T=e.left,S=e.width,w=e.height,N=e.clockWise,I=e.labelViewBox;if(I)return I;if(at(S)&&at(w)){if(at(p)&&at(y))return{x:p,y,width:S,height:w};if(at(b)&&at(T))return{x:b,y:T,width:S,height:w}}return at(p)&&at(y)?{x:p,y,width:0,height:0}:at(r)&&at(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:f||0,outerRadius:m||d||c||0,clockWise:N}:e.viewBox?e.viewBox:{}},sye=function(e,r){return e?e===!0?ae.createElement(Ai,{key:"label-implicit",viewBox:r}):Zn(e)?ae.createElement(Ai,{key:"label-implicit",viewBox:r,value:e}):V.isValidElement(e)?e.type===Ai?V.cloneElement(e,{key:"label-implicit",viewBox:r}):ae.createElement(Ai,{key:"label-implicit",content:e,viewBox:r}):Lt(e)?ae.createElement(Ai,{key:"label-implicit",content:e,viewBox:r}):cf(e)?ae.createElement(Ai,Kp({viewBox:r},e,{key:"label-implicit"})):null:null},oye=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=GG(e),s=Xa(i,Ai).map(function(d,f){return V.cloneElement(d,{viewBox:r||a,key:"label-".concat(f)})});if(!n)return s;var c=sye(e.label,r||a);return[c].concat(q1e(s))};Ai.parseViewBox=GG;Ai.renderCallByParent=oye;var H_,BL;function lye(){if(BL)return H_;BL=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return H_=t,H_}var cye=lye();const KG=_r(cye);function Wp(t){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(t)}var uye=["valueAccessor"],dye=["data","dataKey","clockWise","id","textBreakAll"];function hye(t){return gye(t)||pye(t)||mye(t)||fye()}function fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(t,e){if(t){if(typeof t=="string")return gA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gA(t,e)}}function pye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gye(t){if(Array.isArray(t))return gA(t)}function gA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nb.apply(this,arguments)}function UL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(r),!0).forEach(function(n){yye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yye(t,e,r){return e=vye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vye(t){var e=bye(t,"string");return Wp(e)=="symbol"?e:e+""}function bye(t,e){if(Wp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $L(t,e){if(t==null)return{};var r=xye(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function xye(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var wye=function(e){return Array.isArray(e.value)?KG(e.value):e.value};function El(t){var e=t.valueAccessor,r=e===void 0?wye:e,n=$L(t,uye),i=n.data,a=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,f=$L(n,dye);return!i||!i.length?null:ae.createElement(vr,{className:"recharts-label-list"},i.map(function(m,p){var y=Vt(a)?r(m,p):ji(m&&m.payload,a),b=Vt(c)?{}:{id:"".concat(c,"-").concat(p)};return ae.createElement(Ai,Nb({},Nt(m,!0),f,b,{parentViewBox:m.parentViewBox,value:y,textBreakAll:d,viewBox:Ai.parseViewBox(Vt(s)?m:zL(zL({},m),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}El.displayName="LabelList";function _ye(t,e){return t?t===!0?ae.createElement(El,{key:"labelList-implicit",data:e}):ae.isValidElement(t)||Lt(t)?ae.createElement(El,{key:"labelList-implicit",data:e,content:t}):cf(t)?ae.createElement(El,Nb({data:e},t,{key:"labelList-implicit"})):null:null}function Sye(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Xa(n,El).map(function(s,c){return V.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return i;var a=_ye(t.label,e);return[a].concat(hye(i))}El.renderCallByParent=Sye;function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function yA(){return yA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yA.apply(this,arguments)}function VL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function FL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(r),!0).forEach(function(n){Tye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tye(t,e,r){return e=Aye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Aye(t){var e=Eye(t,"string");return Xp(e)=="symbol"?e:e+""}function Eye(t,e){if(Xp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nye=function(e,r){var n=qs(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},Hy=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,f=e.cornerIsExternal,m=d*(c?1:-1)+i,p=Math.asin(d/m)/Eb,y=f?a:a+s*p,b=Ur(r,n,m,y),T=Ur(r,n,i,y),S=f?a-s*p:a,w=Ur(r,n,m*Math.cos(p*Eb),S);return{center:b,circleTangency:T,lineTangency:w,theta:p}},WG=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,c=e.endAngle,d=Nye(s,c),f=s+d,m=Ur(r,n,a,s),p=Ur(r,n,a,f),y="M ".concat(m.x,",").concat(m.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var b=Ur(r,n,i,s),T=Ur(r,n,i,f);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=f),`,
            `).concat(b.x,",").concat(b.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},jye=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,f=e.startAngle,m=e.endAngle,p=qs(m-f),y=Hy({cx:r,cy:n,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),b=y.circleTangency,T=y.lineTangency,S=y.theta,w=Hy({cx:r,cy:n,radius:a,angle:m,sign:-p,cornerRadius:s,cornerIsExternal:d}),N=w.circleTangency,I=w.lineTangency,C=w.theta,z=d?Math.abs(f-m):Math.abs(f-m)-S-C;if(z<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):WG({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:m});var O="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(z>180),",").concat(+(p<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(I.x,",").concat(I.y,`
  `);if(i>0){var B=Hy({cx:r,cy:n,radius:i,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),E=B.circleTangency,A=B.lineTangency,R=B.theta,F=Hy({cx:r,cy:n,radius:i,angle:m,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),D=F.circleTangency,L=F.lineTangency,M=F.theta,Q=d?Math.abs(f-m):Math.abs(f-m)-R-M;if(Q<0&&s===0)return"".concat(O,"L").concat(r,",").concat(n,"Z");O+="L".concat(L.x,",").concat(L.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Q>180),",").concat(+(p>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,"Z")}else O+="L".concat(r,",").concat(n,"Z");return O},kye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XG=function(e){var r=FL(FL({},kye),e),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,f=r.cornerIsExternal,m=r.startAngle,p=r.endAngle,y=r.className;if(s<a||m===p)return null;var b=Ht("recharts-sector",y),T=s-a,S=Hs(c,T,0,!0),w;return S>0&&Math.abs(m-p)<360?w=jye({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:p}):w=WG({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:m,endAngle:p}),ae.createElement("path",yA({},Nt(r,!0),{className:b,d:w,role:"img"}))};function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function vA(){return vA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vA.apply(this,arguments)}function qL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qL(Object(r),!0).forEach(function(n){Cye(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cye(t,e,r){return e=Oye(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oye(t){var e=Iye(t,"string");return Qp(e)=="symbol"?e:e+""}function Iye(t,e){if(Qp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GL={curveBasisClosed:Zue,curveBasisOpen:Jue,curveBasis:Yue,curveBumpX:Lue,curveBumpY:Bue,curveLinearClosed:e0e,curveLinear:Wx,curveMonotoneX:t0e,curveMonotoneY:r0e,curveNatural:n0e,curveStep:i0e,curveStepAfter:s0e,curveStepBefore:a0e},Gy=function(e){return e.x===+e.x&&e.y===+e.y},Tm=function(e){return e.x},Am=function(e){return e.y},Rye=function(e,r){if(Lt(e))return e;var n="curve".concat(Gx(e));return(n==="curveMonotone"||n==="curveBump")&&r?GL["".concat(n).concat(r==="vertical"?"Y":"X")]:GL[n]||Wx},Mye=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,a=i===void 0?[]:i,s=e.baseLine,c=e.layout,d=e.connectNulls,f=d===void 0?!1:d,m=Rye(n,c),p=f?a.filter(function(S){return Gy(S)}):a,y;if(Array.isArray(s)){var b=f?s.filter(function(S){return Gy(S)}):s,T=p.map(function(S,w){return HL(HL({},S),{},{base:b[w]})});return c==="vertical"?y=Ly().y(Am).x1(Tm).x0(function(S){return S.base.x}):y=Ly().x(Tm).y1(Am).y0(function(S){return S.base.y}),y.defined(Gy).curve(m),y(T)}return c==="vertical"&&at(s)?y=Ly().y(Am).x1(Tm).x0(s):at(s)?y=Ly().x(Tm).y1(Am).y0(s):y=Kq().x(Tm).y(Am),y.defined(Gy).curve(m),y(p)},bA=function(e){var r=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Mye(e):i;return V.createElement("path",vA({},Nt(e,!1),eb(e),{className:Ht("recharts-curve",r),d:s,ref:a}))},G_={exports:{}},K_,KL;function Pye(){if(KL)return K_;KL=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return K_=t,K_}var W_,WL;function Dye(){if(WL)return W_;WL=1;var t=Pye();function e(){}function r(){}return r.resetWarningCache=e,W_=function(){function n(s,c,d,f,m,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return a.PropTypes=a,a},W_}var XL;function Lye(){return XL||(XL=1,G_.exports=Dye()()),G_.exports}var Bye=Lye();const Ar=_r(Bye),{getOwnPropertyNames:Uye,getOwnPropertySymbols:zye}=Object,{hasOwnProperty:$ye}=Object.prototype;function X_(t,e){return function(n,i,a){return t(n,i,a)&&e(n,i,a)}}function Ky(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);const{cache:a}=i,s=a.get(r),c=a.get(n);if(s&&c)return s===n&&c===r;a.set(r,n),a.set(n,r);const d=t(r,n,i);return a.delete(r),a.delete(n),d}}function Vye(t){return t!=null?t[Symbol.toStringTag]:void 0}function QL(t){return Uye(t).concat(zye(t))}const Fye=Object.hasOwn||((t,e)=>$ye.call(t,e));function K0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const qye="__v",Hye="__o",Gye="_owner",{getOwnPropertyDescriptor:YL,keys:ZL}=Object;function Kye(t,e){return t.byteLength===e.byteLength&&jb(new Uint8Array(t),new Uint8Array(e))}function Wye(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Xye(t,e){return t.byteLength===e.byteLength&&jb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Qye(t,e){return K0(t.getTime(),e.getTime())}function Yye(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Zye(t,e){return t===e}function JL(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.entries();let s,c,d=0;for(;(s=a.next())&&!s.done;){const f=e.entries();let m=!1,p=0;for(;(c=f.next())&&!c.done;){if(i[p]){p++;continue}const y=s.value,b=c.value;if(r.equals(y[0],b[0],d,p,t,e,r)&&r.equals(y[1],b[1],y[0],b[0],t,e,r)){m=i[p]=!0;break}p++}if(!m)return!1;d++}return!0}const Jye=K0;function eve(t,e,r){const n=ZL(t);let i=n.length;if(ZL(e).length!==i)return!1;for(;i-- >0;)if(!QG(t,e,r,n[i]))return!1;return!0}function Em(t,e,r){const n=QL(t);let i=n.length;if(QL(e).length!==i)return!1;let a,s,c;for(;i-- >0;)if(a=n[i],!QG(t,e,r,a)||(s=YL(t,a),c=YL(e,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function tve(t,e){return K0(t.valueOf(),e.valueOf())}function rve(t,e){return t.source===e.source&&t.flags===e.flags}function eB(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=t.values();let s,c;for(;(s=a.next())&&!s.done;){const d=e.values();let f=!1,m=0;for(;(c=d.next())&&!c.done;){if(!i[m]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){f=i[m]=!0;break}m++}if(!f)return!1}return!0}function jb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function nve(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function QG(t,e,r,n){return(n===Gye||n===Hye||n===qye)&&(t.$$typeof||e.$$typeof)?!0:Fye(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const ive="[object ArrayBuffer]",ave="[object Arguments]",sve="[object Boolean]",ove="[object DataView]",lve="[object Date]",cve="[object Error]",uve="[object Map]",dve="[object Number]",hve="[object Object]",fve="[object RegExp]",mve="[object Set]",pve="[object String]",gve={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},yve="[object URL]",vve=Object.prototype.toString;function bve({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:T}){return function(w,N,I){if(w===N)return!0;if(w==null||N==null)return!1;const C=typeof w;if(C!==typeof N)return!1;if(C!=="object")return C==="number"?c(w,N,I):C==="function"?a(w,N,I):!1;const z=w.constructor;if(z!==N.constructor)return!1;if(z===Object)return d(w,N,I);if(Array.isArray(w))return e(w,N,I);if(z===Date)return n(w,N,I);if(z===RegExp)return m(w,N,I);if(z===Map)return s(w,N,I);if(z===Set)return p(w,N,I);const O=vve.call(w);if(O===lve)return n(w,N,I);if(O===fve)return m(w,N,I);if(O===uve)return s(w,N,I);if(O===mve)return p(w,N,I);if(O===hve)return typeof w.then!="function"&&typeof N.then!="function"&&d(w,N,I);if(O===yve)return b(w,N,I);if(O===cve)return i(w,N,I);if(O===ave)return d(w,N,I);if(gve[O])return y(w,N,I);if(O===ive)return t(w,N,I);if(O===ove)return r(w,N,I);if(O===sve||O===dve||O===pve)return f(w,N,I);if(T){let B=T[O];if(!B){const E=Vye(w);E&&(B=T[E])}if(B)return B(w,N,I)}return!1}}function xve({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:Kye,areArraysEqual:r?Em:Wye,areDataViewsEqual:Xye,areDatesEqual:Qye,areErrorsEqual:Yye,areFunctionsEqual:Zye,areMapsEqual:r?X_(JL,Em):JL,areNumbersEqual:Jye,areObjectsEqual:r?Em:eve,arePrimitiveWrappersEqual:tve,areRegExpsEqual:rve,areSetsEqual:r?X_(eB,Em):eB,areTypedArraysEqual:r?X_(jb,Em):jb,areUrlsEqual:nve,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const i=Ky(n.areArraysEqual),a=Ky(n.areMapsEqual),s=Ky(n.areObjectsEqual),c=Ky(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return n}function wve(t){return function(e,r,n,i,a,s,c){return t(e,r,c)}}function _ve({circular:t,comparator:e,createState:r,equals:n,strict:i}){if(r)return function(c,d){const{cache:f=t?new WeakMap:void 0,meta:m}=r();return e(c,d,{cache:f,equals:n,meta:m,strict:i})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(c,d){return e(c,d,a)}}const Sve=mu();mu({strict:!0});mu({circular:!0});mu({circular:!0,strict:!0});mu({createInternalComparator:()=>K0});mu({strict:!0,createInternalComparator:()=>K0});mu({circular:!0,createInternalComparator:()=>K0});mu({circular:!0,createInternalComparator:()=>K0,strict:!0});function mu(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:i=!1}=t,a=xve(t),s=bve(a),c=r?r(s):wve(s);return _ve({circular:e,comparator:s,createState:n,equals:c,strict:i})}function Tve(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function tB(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>e?(t(a),r=-1):Tve(i)};requestAnimationFrame(n)}function xA(t){"@babel/helpers - typeof";return xA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xA(t)}function Ave(t){return kve(t)||jve(t)||Nve(t)||Eve()}function Eve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nve(t,e){if(t){if(typeof t=="string")return rB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rB(t,e)}}function rB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kve(t){if(Array.isArray(t))return t}function Cve(){var t={},e=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,c=Ave(s),d=c[0],f=c.slice(1);if(typeof d=="number"){tB(i.bind(null,f),d);return}i(d),tB(i.bind(null,f));return}xA(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}function nB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function iB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(r),!0).forEach(function(n){YG(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function YG(t,e,r){return e=Ove(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ove(t){var e=Ive(t,"string");return Yp(e)==="symbol"?e:String(e)}function Ive(t,e){if(Yp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rve=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},Mve=function(e){return e},Pve=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Jm=function(e,r){return Object.keys(r).reduce(function(n,i){return iB(iB({},n),{},YG({},i,e(i,r[i])))},{})},aB=function(e,r,n){return e.map(function(i){return"".concat(Pve(i)," ").concat(r,"ms ").concat(n)}).join(",")};function Dve(t,e){return Uve(t)||Bve(t,e)||ZG(t,e)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Uve(t){if(Array.isArray(t))return t}function zve(t){return Fve(t)||Vve(t)||ZG(t)||$ve()}function $ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZG(t,e){if(t){if(typeof t=="string")return wA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wA(t,e)}}function Vve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fve(t){if(Array.isArray(t))return wA(t)}function wA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var kb=1e-4,JG=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},eK=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},sB=function(e,r){return function(n){var i=JG(e,r);return eK(i,n)}},qve=function(e,r){return function(n){var i=JG(e,r),a=[].concat(zve(i.map(function(s,c){return s*c}).slice(1)),[0]);return eK(a,n)}},oB=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var f=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),m=Dve(f,4);i=m[0],a=m[1],s=m[2],c=m[3]}}}var p=sB(i,s),y=sB(a,c),b=qve(i,s),T=function(N){return N>1?1:N<0?0:N},S=function(N){for(var I=N>1?1:N,C=I,z=0;z<8;++z){var O=p(C)-I,B=b(C);if(Math.abs(O-I)<kb||B<kb)return y(C);C=T(C-O/B)}return y(C)};return S.isStepper=!1,S},Hve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,a=i===void 0?8:i,s=e.dt,c=s===void 0?17:s,d=function(m,p,y){var b=-(m-p)*n,T=y*a,S=y+(b-T)*c/1e3,w=y*c/1e3+m;return Math.abs(w-p)<kb&&Math.abs(S)<kb?[p,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},Gve=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oB(i);case"spring":return Hve();default:if(i.split("(")[0]==="cubic-bezier")return oB(i)}return typeof i=="function"?i:null};function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function lB(t){return Xve(t)||Wve(t)||tK(t)||Kve()}function Kve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xve(t){if(Array.isArray(t))return SA(t)}function cB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(r),!0).forEach(function(n){_A(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _A(t,e,r){return e=Qve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qve(t){var e=Yve(t,"string");return Zp(e)==="symbol"?e:String(e)}function Yve(t,e){if(Zp(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zve(t,e){return tbe(t)||ebe(t,e)||tK(t,e)||Jve()}function Jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tK(t,e){if(t){if(typeof t=="string")return SA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SA(t,e)}}function SA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ebe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function tbe(t){if(Array.isArray(t))return t}var Cb=function(e,r,n){return e+(r-e)*n},TA=function(e){var r=e.from,n=e.to;return r!==n},rbe=function t(e,r,n){var i=Jm(function(a,s){if(TA(s)){var c=e(s.from,s.to,s.velocity),d=Zve(c,2),f=d[0],m=d[1];return wi(wi({},s),{},{from:f,velocity:m})}return s},r);return n<1?Jm(function(a,s){return TA(s)?wi(wi({},s),{},{velocity:Cb(s.velocity,i[a].velocity,n),from:Cb(s.from,i[a].from,n)}):s},r):t(e,i,n-1)};const nbe=(function(t,e,r,n,i){var a=Rve(t,e),s=a.reduce(function(w,N){return wi(wi({},w),{},_A({},N,[t[N],e[N]]))},{}),c=a.reduce(function(w,N){return wi(wi({},w),{},_A({},N,{from:t[N],velocity:0,to:e[N]}))},{}),d=-1,f,m,p=function(){return null},y=function(){return Jm(function(N,I){return I.from},c)},b=function(){return!Object.values(c).filter(TA).length},T=function(N){f||(f=N);var I=N-f,C=I/r.dt;c=rbe(r,c,C),i(wi(wi(wi({},t),e),y())),f=N,b()||(d=requestAnimationFrame(p))},S=function(N){m||(m=N);var I=(N-m)/n,C=Jm(function(O,B){return Cb.apply(void 0,lB(B).concat([r(I)]))},s);if(i(wi(wi(wi({},t),e),C)),I<1)d=requestAnimationFrame(p);else{var z=Jm(function(O,B){return Cb.apply(void 0,lB(B).concat([r(1)]))},s);i(wi(wi(wi({},t),e),z))}};return p=r.isStepper?T:S,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function Ph(t){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(t)}var ibe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function abe(t,e){if(t==null)return{};var r=sbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function sbe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function Q_(t){return ube(t)||cbe(t)||lbe(t)||obe()}function obe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lbe(t,e){if(t){if(typeof t=="string")return AA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AA(t,e)}}function cbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ube(t){if(Array.isArray(t))return AA(t)}function AA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Us(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(r),!0).forEach(function(n){Bm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bm(t,e,r){return e=rK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hbe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rK(n.key),n)}}function fbe(t,e,r){return e&&hbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function rK(t){var e=mbe(t,"string");return Ph(e)==="symbol"?e:String(e)}function mbe(t,e){if(Ph(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ph(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EA(t,e)}function EA(t,e){return EA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},EA(t,e)}function gbe(t){var e=ybe();return function(){var n=Ob(t),i;if(e){var a=Ob(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return NA(this,i)}}function NA(t,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jA(t)}function jA(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ybe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ob(t){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ob(t)}var Co=(function(t){pbe(r,t);var e=gbe(r);function r(n,i){var a;dbe(this,r),a=e.call(this,n,i);var s=a.props,c=s.isActive,d=s.attributeName,f=s.from,m=s.to,p=s.steps,y=s.children,b=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(jA(a)),a.changeStyle=a.changeStyle.bind(jA(a)),!c||b<=0)return a.state={style:{}},typeof y=="function"&&(a.state={style:m}),NA(a);if(p&&p.length)a.state={style:p[0].style};else if(f){if(typeof y=="function")return a.state={style:f},NA(a);a.state={style:d?Bm({},d,f):f}}else a.state={style:{}};return a}return fbe(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,d=a.attributeName,f=a.shouldReAnimate,m=a.to,p=a.from,y=this.state.style;if(c){if(!s){var b={style:d?Bm({},d,m):m};this.state&&y&&(d&&y[d]!==m||!d&&y!==m)&&this.setState(b);return}if(!(Sve(i.to,m)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||f?p:i.to;if(this.state&&y){var w={style:d?Bm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(Us(Us({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,d=i.duration,f=i.easing,m=i.begin,p=i.onAnimationEnd,y=i.onAnimationStart,b=nbe(s,c,Gve(f),d,this.changeStyle),T=function(){a.stopJSAnimation=b()};this.manager.start([y,m,T,d,p])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,d=i.onAnimationStart,f=s[0],m=f.style,p=f.duration,y=p===void 0?0:p,b=function(S,w,N){if(N===0)return S;var I=w.duration,C=w.easing,z=C===void 0?"ease":C,O=w.style,B=w.properties,E=w.onAnimationEnd,A=N>0?s[N-1]:w,R=B||Object.keys(O);if(typeof z=="function"||z==="spring")return[].concat(Q_(S),[a.runJSAnimation.bind(a,{from:A.style,to:O,duration:I,easing:z}),I]);var F=aB(R,I,z),D=Us(Us(Us({},A.style),O),{},{transition:F});return[].concat(Q_(S),[D,I,E]).filter(Mve)};return this.manager.start([d].concat(Q_(s.reduce(b,[m,Math.max(y,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Cve());var a=i.begin,s=i.duration,c=i.attributeName,d=i.to,f=i.easing,m=i.onAnimationStart,p=i.onAnimationEnd,y=i.steps,b=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof f=="function"||typeof b=="function"||f==="spring"){this.runJSAnimation(i);return}if(y.length>1){this.runStepAnimation(i);return}var S=c?Bm({},c,d):d,w=aB(Object.keys(S),s,f);T.start([m,a,Us(Us({},S),{},{transition:w}),s,p])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var d=abe(i,ibe),f=V.Children.count(a),m=this.state.style;if(typeof a=="function")return a(m);if(!c||f===0||s<=0)return a;var p=function(b){var T=b.props,S=T.style,w=S===void 0?{}:S,N=T.className,I=V.cloneElement(b,Us(Us({},d),{},{style:Us(Us({},w),m),className:N}));return I};return f===1?p(V.Children.only(a)):ae.createElement("div",null,V.Children.map(a,function(y){return p(y)}))}}]),r})(V.PureComponent);Co.displayName="Animate";Co.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Co.propTypes={from:Ar.oneOfType([Ar.object,Ar.string]),to:Ar.oneOfType([Ar.object,Ar.string]),attributeName:Ar.string,duration:Ar.number,begin:Ar.number,easing:Ar.oneOfType([Ar.string,Ar.func]),steps:Ar.arrayOf(Ar.shape({duration:Ar.number.isRequired,style:Ar.object.isRequired,easing:Ar.oneOfType([Ar.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ar.func]),properties:Ar.arrayOf("string"),onAnimationEnd:Ar.func})),children:Ar.oneOfType([Ar.node,Ar.func]),isActive:Ar.bool,canBegin:Ar.bool,onAnimationEnd:Ar.func,shouldReAnimate:Ar.bool,onAnimationStart:Ar.func,onAnimationReStart:Ar.func};function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function Ib(){return Ib=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ib.apply(this,arguments)}function vbe(t,e){return _be(t)||wbe(t,e)||xbe(t,e)||bbe()}function bbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xbe(t,e){if(t){if(typeof t=="string")return dB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dB(t,e)}}function dB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wbe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function _be(t){if(Array.isArray(t))return t}function hB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hB(Object(r),!0).forEach(function(n){Sbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sbe(t,e,r){return e=Tbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tbe(t){var e=Abe(t,"string");return Jp(e)=="symbol"?e:e+""}function Abe(t,e){if(Jp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var mB=function(e,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),c=i>=0?1:-1,d=n>=0?1:-1,f=i>=0&&n>=0||i<0&&n<0?1:0,m;if(s>0&&a instanceof Array){for(var p=[0,0,0,0],y=0,b=4;y<b;y++)p[y]=a[y]>s?s:a[y];m="M".concat(e,",").concat(r+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+d*p[0],",").concat(r)),m+="L ".concat(e+n-d*p[1],",").concat(r),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(r+c*p[1])),m+="L ".concat(e+n,",").concat(r+i-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+n-d*p[2],",").concat(r+i)),m+="L ".concat(e+d*p[3],",").concat(r+i),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(r+i-c*p[3])),m+="Z"}else if(s>0&&a===+a&&a>0){var T=Math.min(s,a);m="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+i-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n-d*T,",").concat(r+i,`
            L `).concat(e+d*T,",").concat(r+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e,",").concat(r+i-c*T," Z")}else m="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return m},Ebe=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,a=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var f=Math.min(a,a+c),m=Math.max(a,a+c),p=Math.min(s,s+d),y=Math.max(s,s+d);return n>=f&&n<=m&&i>=p&&i<=y}return!1},Nbe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XE=function(e){var r=fB(fB({},Nbe),e),n=V.useRef(),i=V.useState(-1),a=vbe(i,2),s=a[0],c=a[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var z=n.current.getTotalLength();z&&c(z)}catch{}},[]);var d=r.x,f=r.y,m=r.width,p=r.height,y=r.radius,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,N=r.isAnimationActive,I=r.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||m===0||p===0)return null;var C=Ht("recharts-rectangle",b);return I?ae.createElement(Co,{canBegin:s>0,from:{width:m,height:p,x:d,y:f},to:{width:m,height:p,x:d,y:f},duration:S,animationEasing:T,isActive:I},function(z){var O=z.width,B=z.height,E=z.x,A=z.y;return ae.createElement(Co,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:N,easing:T},ae.createElement("path",Ib({},Nt(r,!0),{className:C,d:mB(E,A,O,B,y),ref:n})))}):ae.createElement("path",Ib({},Nt(r,!0),{className:C,d:mB(d,f,m,p,y)}))},jbe=["points","className","baseLinePoints","connectNulls"];function Kd(){return Kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Kd.apply(this,arguments)}function kbe(t,e){if(t==null)return{};var r=Cbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Cbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pB(t){return Mbe(t)||Rbe(t)||Ibe(t)||Obe()}function Obe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ibe(t,e){if(t){if(typeof t=="string")return kA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kA(t,e)}}function Rbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mbe(t){if(Array.isArray(t))return kA(t)}function kA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gB=function(e){return e&&e.x===+e.x&&e.y===+e.y},Pbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){gB(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),gB(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},ep=function(e,r){var n=Pbe(e);r&&(n=[n.reduce(function(a,s){return[].concat(pB(a),pB(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},Dbe=function(e,r,n){var i=ep(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(ep(r.reverse(),n).slice(1))},nK=function(e){var r=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=kbe(e,jbe);if(!r||!r.length)return null;var c=Ht("recharts-polygon",n);if(i&&i.length){var d=s.stroke&&s.stroke!=="none",f=Dbe(r,i,a);return ae.createElement("g",{className:c},ae.createElement("path",Kd({},Nt(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),d?ae.createElement("path",Kd({},Nt(s,!0),{fill:"none",d:ep(r,a)})):null,d?ae.createElement("path",Kd({},Nt(s,!0),{fill:"none",d:ep(i,a)})):null)}var m=ep(r,a);return ae.createElement("path",Kd({},Nt(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:c,d:m}))};function CA(){return CA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},CA.apply(this,arguments)}var d2=function(e){var r=e.cx,n=e.cy,i=e.r,a=e.className,s=Ht("recharts-dot",a);return r===+r&&n===+n&&i===+i?V.createElement("circle",CA({},Nt(e,!1),eb(e),{className:s,cx:r,cy:n,r:i})):null};function eg(t){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(t)}var Lbe=["x","y","top","left","width","height","className"];function OA(){return OA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},OA.apply(this,arguments)}function yB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bbe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(r),!0).forEach(function(n){Ube(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ube(t,e,r){return e=zbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zbe(t){var e=$be(t,"string");return eg(e)=="symbol"?e:e+""}function $be(t,e){if(eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vbe(t,e){if(t==null)return{};var r=Fbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var qbe=function(e,r,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},Hbe=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,a=i===void 0?0:i,s=e.top,c=s===void 0?0:s,d=e.left,f=d===void 0?0:d,m=e.width,p=m===void 0?0:m,y=e.height,b=y===void 0?0:y,T=e.className,S=Vbe(e,Lbe),w=Bbe({x:n,y:a,top:c,left:f,width:p,height:b},S);return!at(n)||!at(a)||!at(p)||!at(b)||!at(c)||!at(f)?null:ae.createElement("path",OA({},Nt(w,!0),{className:Ht("recharts-cross",T),d:qbe(n,a,p,b,c,f)}))},Gbe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}function Kbe(t,e){if(t==null)return{};var r=Wbe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Wbe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Bl.apply(this,arguments)}function vB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function rg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vB(Object(r),!0).forEach(function(n){Xbe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xbe(t,e,r){return e=Qbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qbe(t){var e=Ybe(t,"string");return tg(e)=="symbol"?e:e+""}function Ybe(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zbe=function(e,r,n,i){var a="";return i.forEach(function(s,c){var d=Ur(r,n,e,s);c?a+="L ".concat(d.x,",").concat(d.y):a+="M ".concat(d.x,",").concat(d.y)}),a+="Z",a},Jbe=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=rg({stroke:"#ccc"},Nt(e,!1));return ae.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(f){var m=Ur(r,n,i,f),p=Ur(r,n,a,f);return ae.createElement("line",Bl({},d,{key:"line-".concat(f),x1:m.x,y1:m.y,x2:p.x,y2:p.y}))}))},exe=function(e){var r=e.cx,n=e.cy,i=e.radius,a=e.index,s=rg(rg({stroke:"#ccc"},Nt(e,!1)),{},{fill:"none"});return ae.createElement("circle",Bl({},s,{className:Ht("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:r,cy:n,r:i}))},txe=function(e){var r=e.radius,n=e.index,i=rg(rg({stroke:"#ccc"},Nt(e,!1)),{},{fill:"none"});return ae.createElement("path",Bl({},i,{className:Ht("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:Zbe(r,e.cx,e.cy,e.polarAngles)}))},rxe=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:ae.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(i,a){var s=a;return n==="circle"?ae.createElement(exe,Bl({key:s},e,{radius:i,index:a})):ae.createElement(txe,Bl({key:s},e,{radius:i,index:a}))}))},iK=function(e){var r=e.cx,n=r===void 0?0:r,i=e.cy,a=i===void 0?0:i,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,f=d===void 0?0:d,m=e.gridType,p=m===void 0?"polygon":m,y=e.radialLines,b=y===void 0?!0:y,T=Kbe(e,Gbe);return f<=0?null:ae.createElement("g",{className:"recharts-polar-grid"},ae.createElement(Jbe,Bl({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)),ae.createElement(rxe,Bl({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)))};iK.displayName="PolarGrid";var Y_,bB;function nxe(){if(bB)return Y_;bB=1;var t=s2(),e=yG(),r=Do();function n(i,a){return i&&i.length?t(i,r(a,2),e):void 0}return Y_=n,Y_}var ixe=nxe();const axe=_r(ixe);var Z_,xB;function sxe(){if(xB)return Z_;xB=1;var t=s2(),e=Do(),r=vG();function n(i,a){return i&&i.length?t(i,e(a,2),r):void 0}return Z_=n,Z_}var oxe=sxe();const lxe=_r(oxe);var cxe=["cx","cy","angle","ticks","axisLine"],uxe=["ticks","tick","angle","tickFormatter","stroke"];function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}function tp(){return tp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},tp.apply(this,arguments)}function wB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wB(Object(r),!0).forEach(function(n){h2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _B(t,e){if(t==null)return{};var r=dxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function hxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sK(n.key),n)}}function fxe(t,e,r){return e&&SB(t.prototype,e),r&&SB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function mxe(t,e,r){return e=Rb(e),pxe(t,aK()?Reflect.construct(e,r||[],Rb(t).constructor):e.apply(t,r))}function pxe(t,e){if(e&&(Dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gxe(t)}function gxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(t)}function yxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IA(t,e)}function IA(t,e){return IA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},IA(t,e)}function h2(t,e,r){return e=sK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sK(t){var e=vxe(t,"string");return Dh(e)=="symbol"?e:e+""}function vxe(t,e){if(Dh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qg=(function(t){function e(){return hxe(this,e),mxe(this,e,arguments)}return yxe(e,t),fxe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,c=a.cx,d=a.cy;return Ur(c,d,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=axe(c,function(m){return m.coordinate||0}),f=lxe(c,function(m){return m.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:f.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,f=_B(n,cxe),m=c.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),p=Ur(i,a,m[0],s),y=Ur(i,a,m[1],s),b=Hu(Hu(Hu({},Nt(f,!1)),{},{fill:"none"},Nt(d,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return ae.createElement("line",tp({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,d=i.tickFormatter,f=i.stroke,m=_B(i,uxe),p=this.getTickTextAnchor(),y=Nt(m,!1),b=Nt(s,!1),T=a.map(function(S,w){var N=n.getTickValueCoord(S),I=Hu(Hu(Hu(Hu({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(N.x,", ").concat(N.y,")")},y),{},{stroke:"none",fill:f},b),{},{index:w},N),{},{payload:S});return ae.createElement(vr,tp({className:Ht("recharts-polar-radius-axis-tick",HG(s)),key:"tick-".concat(S.coordinate)},O0(n.props,S,w)),e.renderTickItem(s,I,d?d(S.value,w):S.value))});return ae.createElement(vr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:ae.createElement(vr,{className:Ht("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Ai.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ae.isValidElement(n)?s=ae.cloneElement(n,i):Lt(n)?s=n(i):s=ae.createElement(Ch,tp({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(V.PureComponent);h2(qg,"displayName","PolarRadiusAxis");h2(qg,"axisType","radiusAxis");h2(qg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function r0(){return r0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},r0.apply(this,arguments)}function TB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Gu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TB(Object(r),!0).forEach(function(n){f2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lK(n.key),n)}}function xxe(t,e,r){return e&&AB(t.prototype,e),r&&AB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function wxe(t,e,r){return e=Mb(e),_xe(t,oK()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function _xe(t,e){if(e&&(Lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sxe(t)}function Sxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oK=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function Txe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RA(t,e)}function RA(t,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},RA(t,e)}function f2(t,e,r){return e=lK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lK(t){var e=Axe(t,"string");return Lh(e)=="symbol"?e:e+""}function Axe(t,e){if(Lh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Exe=Math.PI/180,EB=1e-5,Hg=(function(t){function e(){return bxe(this,e),wxe(this,e,arguments)}return Txe(e,t),xxe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,c=i.radius,d=i.orientation,f=i.tickSize,m=f||8,p=Ur(a,s,c,n.coordinate),y=Ur(a,s,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*Exe),s;return a>EB?s=i==="outer"?"start":"end":a<-EB?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,f=Gu(Gu({},Nt(this.props,!1)),{},{fill:"none"},Nt(c,!1));if(d==="circle")return ae.createElement(d2,r0({className:"recharts-polar-angle-axis-line"},f,{cx:i,cy:a,r:s}));var m=this.props.ticks,p=m.map(function(y){return Ur(i,a,s,y.coordinate)});return ae.createElement(nK,r0({className:"recharts-polar-angle-axis-line"},f,{points:p}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,d=i.tickFormatter,f=i.stroke,m=Nt(this.props,!1),p=Nt(s,!1),y=Gu(Gu({},m),{},{fill:"none"},Nt(c,!1)),b=a.map(function(T,S){var w=n.getTickLineCoord(T),N=n.getTickTextAnchor(T),I=Gu(Gu(Gu({textAnchor:N},m),{},{stroke:"none",fill:f},p),{},{index:S,payload:T,x:w.x2,y:w.y2});return ae.createElement(vr,r0({className:Ht("recharts-polar-angle-axis-tick",HG(s)),key:"tick-".concat(T.coordinate)},O0(n.props,T,S)),c&&ae.createElement("line",r0({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,I,d?d(T.value,S):T.value))});return ae.createElement(vr,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:ae.createElement(vr,{className:Ht("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ae.isValidElement(n)?s=ae.cloneElement(n,i):Lt(n)?s=n(i):s=ae.createElement(Ch,r0({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(V.PureComponent);f2(Hg,"displayName","PolarAngleAxis");f2(Hg,"axisType","angleAxis");f2(Hg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var J_,NB;function Nxe(){if(NB)return J_;NB=1;var t=gH(),e=t(Object.getPrototypeOf,Object);return J_=e,J_}var eS,jB;function jxe(){if(jB)return eS;jB=1;var t=Vl(),e=Nxe(),r=Fl(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,c=a.hasOwnProperty,d=s.call(Object);function f(m){if(!r(m)||t(m)!=n)return!1;var p=e(m);if(p===null)return!0;var y=c.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return eS=f,eS}var kxe=jxe();const Cxe=_r(kxe);var tS,kB;function Oxe(){if(kB)return tS;kB=1;var t=Vl(),e=Fl(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return tS=n,tS}var Ixe=Oxe();const Rxe=_r(Ixe);function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function Pb(){return Pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pb.apply(this,arguments)}function Mxe(t,e){return Bxe(t)||Lxe(t,e)||Dxe(t,e)||Pxe()}function Pxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dxe(t,e){if(t){if(typeof t=="string")return CB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return CB(t,e)}}function CB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lxe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Bxe(t){if(Array.isArray(t))return t}function OB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function IB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(r),!0).forEach(function(n){Uxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uxe(t,e,r){return e=zxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zxe(t){var e=$xe(t,"string");return ng(e)=="symbol"?e:e+""}function $xe(t,e){if(ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RB=function(e,r,n,i,a){var s=n-i,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+a),c+="L ".concat(e+n-s/2-i,",").concat(r+a),c+="L ".concat(e,",").concat(r," Z"),c},Vxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fxe=function(e){var r=IB(IB({},Vxe),e),n=V.useRef(),i=V.useState(-1),a=Mxe(i,2),s=a[0],c=a[1];V.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var d=r.x,f=r.y,m=r.upperWidth,p=r.lowerWidth,y=r.height,b=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,N=r.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||y!==+y||m===0&&p===0||y===0)return null;var I=Ht("recharts-trapezoid",b);return N?ae.createElement(Co,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:f},to:{upperWidth:m,lowerWidth:p,height:y,x:d,y:f},duration:S,animationEasing:T,isActive:N},function(C){var z=C.upperWidth,O=C.lowerWidth,B=C.height,E=C.x,A=C.y;return ae.createElement(Co,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},ae.createElement("path",Pb({},Nt(r,!0),{className:I,d:RB(E,A,z,O,B),ref:n})))}):ae.createElement("g",null,ae.createElement("path",Pb({},Nt(r,!0),{className:I,d:RB(d,f,m,p,y)})))},qxe=["option","shapeType","propTransformer","activeClassName","isActive"];function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function Hxe(t,e){if(t==null)return{};var r=Gxe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function MB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Db(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MB(Object(r),!0).forEach(function(n){Kxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kxe(t,e,r){return e=Wxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wxe(t){var e=Xxe(t,"string");return ig(e)=="symbol"?e:e+""}function Xxe(t,e){if(ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qxe(t,e){return Db(Db({},e),t)}function Yxe(t,e){return t==="symbols"}function PB(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return ae.createElement(XE,r);case"trapezoid":return ae.createElement(Fxe,r);case"sector":return ae.createElement(XG,r);case"symbols":if(Yxe(e))return ae.createElement(Qx,r);break;default:return null}}function Zxe(t){return V.isValidElement(t)?t.props:t}function MA(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Qxe:n,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,c=t.isActive,d=Hxe(t,qxe),f;if(V.isValidElement(e))f=V.cloneElement(e,Db(Db({},d),Zxe(e)));else if(Lt(e))f=e(d);else if(Cxe(e)&&!Rxe(e)){var m=i(e,d);f=ae.createElement(PB,{shapeType:r,elementProps:m})}else{var p=d;f=ae.createElement(PB,{shapeType:r,elementProps:p})}return c?ae.createElement(vr,{className:s},f):f}function m2(t,e){return e!=null&&"trapezoids"in t.props}function p2(t,e){return e!=null&&"sectors"in t.props}function ag(t,e){return e!=null&&"points"in t.props}function Jxe(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,a=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&a}function e2e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function t2e(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function r2e(t,e){var r;return m2(t,e)?r=Jxe:p2(t,e)?r=e2e:ag(t,e)&&(r=t2e),r}function n2e(t,e){var r;return m2(t,e)?r="trapezoids":p2(t,e)?r="sectors":ag(t,e)&&(r="points"),r}function i2e(t,e){if(m2(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(p2(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return ag(t,e)?e.payload:{}}function a2e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=n2e(r,e),a=i2e(r,e),s=n.filter(function(d,f){var m=Vg(a,d),p=r.props[i].filter(function(T){var S=r2e(r,e);return S(T,e)}),y=r.props[i].indexOf(p[p.length-1]),b=f===y;return m&&b}),c=n.indexOf(s[s.length-1]);return c}var rS,DB;function s2e(){if(DB)return rS;DB=1;function t(e){return e&&e.length?e[0]:void 0}return rS=t,rS}var nS,LB;function o2e(){return LB||(LB=1,nS=s2e()),nS}var l2e=o2e();const c2e=_r(l2e);var u2e=["key"];function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function d2e(t,e){if(t==null)return{};var r=h2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function h2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lb.apply(this,arguments)}function BB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ea(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(r),!0).forEach(function(n){dl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uK(n.key),n)}}function m2e(t,e,r){return e&&UB(t.prototype,e),r&&UB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function p2e(t,e,r){return e=Bb(e),g2e(t,cK()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function g2e(t,e){if(e&&(Bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y2e(t)}function y2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cK=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function v2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PA(t,e)}function PA(t,e){return PA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},PA(t,e)}function dl(t,e,r){return e=uK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uK(t){var e=b2e(t,"string");return Bh(e)=="symbol"?e:e+""}function b2e(t,e){if(Bh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gg=(function(t){function e(){var r;f2e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=p2e(this,e,[].concat(i)),dl(r,"state",{isAnimationFinished:!1}),dl(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Lt(s)&&s()}),dl(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Lt(s)&&s()}),dl(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),dl(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return v2e(e,t),m2e(e,[{key:"renderDots",value:function(n){var i=this.props,a=i.dot,s=i.dataKey,c=Nt(this.props,!1),d=Nt(a,!0),f=n.map(function(m,p){var y=ea(ea(ea({key:"dot-".concat(p),r:3},c),d),{},{dataKey:s,cx:m.x,cy:m.y,index:p,payload:m});return e.renderDotItem(a,y)});return ae.createElement(vr,{className:"recharts-radar-dots"},f)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,a=i.shape,s=i.dot,c=i.isRange,d=i.baseLinePoints,f=i.connectNulls,m;return ae.isValidElement(a)?m=ae.cloneElement(a,ea(ea({},this.props),{},{points:n})):Lt(a)?m=a(ea(ea({},this.props),{},{points:n})):m=ae.createElement(nK,Lb({},Nt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:f})),ae.createElement(vr,{className:"recharts-radar-polygon"},m,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ae.createElement(Co,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=p&&p.length/a.length,S=a.map(function(w,N){var I=p&&p[Math.floor(N*T)];if(I){var C=xa(I.x,w.x),z=xa(I.y,w.y);return ea(ea({},w),{},{x:C(b),y:z(b)})}var O=xa(w.cx,w.x),B=xa(w.cy,w.y);return ea(ea({},w),{},{x:O(b),y:B(b)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return a&&i&&i.length&&!s&&(!c||!Vg(c,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.className,s=n.points,c=n.isAnimationActive;if(i||!s||!s.length)return null;var d=this.state.isAnimationFinished,f=Ht("recharts-radar",a);return ae.createElement(vr,{className:f},this.renderPolygon(),(!c||d)&&El.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var a;if(ae.isValidElement(n))a=ae.cloneElement(n,i);else if(Lt(n))a=n(i);else{var s=i.key,c=d2e(i,u2e);a=ae.createElement(d2,Lb({},c,{key:s,className:Ht("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return a}}])})(V.PureComponent);dl(Gg,"displayName","Radar");dl(Gg,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!q0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});dl(Gg,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,i=t.dataKey,a=t.bandSize,s=r.cx,c=r.cy,d=!1,f=[],m=r.type!=="number"?a??0:0;n.forEach(function(y,b){var T=ji(y,r.dataKey,b),S=ji(y,i),w=r.scale(T)+m,N=Array.isArray(S)?KG(S):S,I=Vt(N)?void 0:e.scale(N);Array.isArray(S)&&S.length>=2&&(d=!0),f.push(ea(ea({},Ur(s,c,I,w)),{},{name:T,value:S,cx:s,cy:c,radius:I,angle:w,payload:y}))});var p=[];return d&&f.forEach(function(y){if(Array.isArray(y.value)){var b=c2e(y.value),T=Vt(b)?void 0:e.scale(b);p.push(ea(ea({},y),{},{radius:T},Ur(s,c,T,y.angle)))}else p.push(y)}),{points:f,isRange:d,baseLinePoints:p}});var iS,zB;function x2e(){if(zB)return iS;zB=1;var t=Math.ceil,e=Math.max;function r(n,i,a,s){for(var c=-1,d=e(t((i-n)/(a||1)),0),f=Array(d);d--;)f[s?d:++c]=n,n+=a;return f}return iS=r,iS}var aS,$B;function dK(){if($B)return aS;$B=1;var t=IH(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*r}return i===i?i:0}return aS=n,aS}var sS,VB;function w2e(){if(VB)return sS;VB=1;var t=x2e(),e=Jx(),r=dK();function n(i){return function(a,s,c){return c&&typeof c!="number"&&e(a,s,c)&&(s=c=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),c=c===void 0?a<s?1:-1:r(c),t(a,s,c,i)}}return sS=n,sS}var oS,FB;function _2e(){if(FB)return oS;FB=1;var t=w2e(),e=t();return oS=e,oS}var S2e=_2e();const Ub=_r(S2e);function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function qB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function HB(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qB(Object(r),!0).forEach(function(n){hK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hK(t,e,r){return e=T2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T2e(t){var e=A2e(t,"string");return sg(e)=="symbol"?e:e+""}function A2e(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E2e=["Webkit","Moz","O","ms"],N2e=function(e,r){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=E2e.reduce(function(a,s){return HB(HB({},a),{},hK({},s+n,r))},{});return i[e]=r,i};function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function zb(){return zb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zb.apply(this,arguments)}function GB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GB(Object(r),!0).forEach(function(n){Ua(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function j2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mK(n.key),n)}}function k2e(t,e,r){return e&&KB(t.prototype,e),r&&KB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function C2e(t,e,r){return e=$b(e),O2e(t,fK()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function O2e(t,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I2e(t)}function I2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fK=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function R2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DA(t,e)}function DA(t,e){return DA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},DA(t,e)}function Ua(t,e,r){return e=mK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mK(t){var e=M2e(t,"string");return Uh(e)=="symbol"?e:e+""}function M2e(t,e){if(Uh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var P2e=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,f=Ym().domain(Ub(0,d)).range([a,a+s-c]),m=f.domain().map(function(p){return f(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:f(n),endX:f(i),scale:f,scaleValues:m}},WB=function(e){return e.changedTouches&&!!e.changedTouches.length},zh=(function(t){function e(r){var n;return j2e(this,e),n=C2e(this,e,[r]),Ua(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Ua(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Ua(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),n.detachDragEndListener()}),Ua(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ua(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ua(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ua(n,"handleSlideDragStart",function(i){var a=WB(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return R2e(e,t),k2e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,f=c.data,m=f.length-1,p=Math.min(i,a),y=Math.max(i,a),b=e.getIndexInRange(s,p),T=e.getIndexInRange(s,y);return{startIndex:b-b%d,endIndex:T===m?m:T-T%d}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,d=ji(a[n],c,n);return Lt(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,d=this.props,f=d.x,m=d.width,p=d.travellerWidth,y=d.startIndex,b=d.endIndex,T=d.onChange,S=n.pageX-a;S>0?S=Math.min(S,f+m-p-c,f+m-p-s):S<0&&(S=Math.max(S,f-s,f-c));var w=this.getIndex({startX:s+S,endX:c+S});(w.startIndex!==y||w.endIndex!==b)&&T&&T(w),this.setState({startX:s+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=WB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,d=i.startX,f=this.state[s],m=this.props,p=m.x,y=m.width,b=m.travellerWidth,T=m.onChange,S=m.gap,w=m.data,N={startX:this.state.startX,endX:this.state.endX},I=n.pageX-a;I>0?I=Math.min(I,p+y-b-f):I<0&&(I=Math.max(I,p-f)),N[s]=f+I;var C=this.getIndex(N),z=C.startIndex,O=C.endIndex,B=function(){var A=w.length-1;return s==="startX"&&(c>d?z%S===0:O%S===0)||c<d&&O===A||s==="endX"&&(c>d?O%S===0:z%S===0)||c>d&&O===A};this.setState(Ua(Ua({},s,f+I),"brushMoveStartX",n.pageX),function(){T&&B()&&T(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,c=s.scaleValues,d=s.startX,f=s.endX,m=this.state[i],p=c.indexOf(m);if(p!==-1){var y=p+n;if(!(y===-1||y>=c.length)){var b=c[y];i==="startX"&&b>=f||i==="endX"&&b<=d||this.setState(Ua({},i,b),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.fill,f=n.stroke;return ae.createElement("rect",{stroke:f,fill:d,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.data,f=n.children,m=n.padding,p=V.Children.only(f);return p?ae.cloneElement(p,{x:i,y:a,width:s,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,c=this,d=this.props,f=d.y,m=d.travellerWidth,p=d.height,y=d.traveller,b=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,N=Math.max(n,this.props.x),I=lS(lS({},Nt(this.props,!1)),{},{x:N,y:f,width:m,height:p}),C=b||"Min value: ".concat((a=T[S])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return ae.createElement(vr,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(O){["ArrowLeft","ArrowRight"].includes(O.key)&&(O.preventDefault(),O.stopPropagation(),c.handleTravellerMoveKeyboard(O.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,I))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,c=a.height,d=a.stroke,f=a.travellerWidth,m=Math.min(n,i)+f,p=Math.max(Math.abs(i-n)-f,0);return ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:s,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,f=n.stroke,m=this.state,p=m.startX,y=m.endX,b=5,T={pointerEvents:"none",fill:f};return ae.createElement(vr,{className:"recharts-brush-texts"},ae.createElement(Ch,zb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-b,y:s+c/2},T),this.getTextOfTick(i)),ae.createElement(Ch,zb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+d+b,y:s+c/2},T),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,c=n.x,d=n.y,f=n.width,m=n.height,p=n.alwaysShowText,y=this.state,b=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,N=y.isTravellerMoving,I=y.isTravellerFocused;if(!i||!i.length||!at(c)||!at(d)||!at(f)||!at(m)||f<=0||m<=0)return null;var C=Ht("recharts-brush",a),z=ae.Children.count(s)===1,O=N2e("userSelect","none");return ae.createElement(vr,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:O},this.renderBackground(),z&&this.renderPanorama(),this.renderSlide(b,T),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||N||I||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,c=n.height,d=n.stroke,f=Math.floor(a+c/2)-1;return ae.createElement(ae.Fragment,null,ae.createElement("rect",{x:i,y:a,width:s,height:c,fill:d,stroke:"none"}),ae.createElement("line",{x1:i+1,y1:f,x2:i+s-1,y2:f,fill:"none",stroke:"#fff"}),ae.createElement("line",{x1:i+1,y1:f+2,x2:i+s-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return ae.isValidElement(n)?a=ae.cloneElement(n,i):Lt(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,c=n.x,d=n.travellerWidth,f=n.updateId,m=n.startIndex,p=n.endIndex;if(a!==i.prevData||f!==i.prevUpdateId)return lS({prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s},a&&a.length?P2e({data:a,width:s,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||d!==i.prevTravellerWidth)){i.scale.range([c,c+s-d]);var y=i.scale.domain().map(function(b){return i.scale(b)});return{prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,c=a-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>i?c=d:s=d}return i>=n[c]?c:s}}])})(V.PureComponent);Ua(zh,"displayName","Brush");Ua(zh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cS,XB;function D2e(){if(XB)return cS;XB=1;var t=xE();function e(r,n){var i;return t(r,function(a,s,c){return i=n(a,s,c),!i}),!!i}return cS=e,cS}var uS,QB;function L2e(){if(QB)return uS;QB=1;var t=cH(),e=Do(),r=D2e(),n=ja(),i=Jx();function a(s,c,d){var f=n(s)?t:r;return d&&i(s,c,d)&&(c=void 0),f(s,e(c,3))}return uS=a,uS}var B2e=L2e();const U2e=_r(B2e);var To=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},dS,YB;function z2e(){if(YB)return dS;YB=1;var t=NH();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return dS=e,dS}var hS,ZB;function $2e(){if(ZB)return hS;ZB=1;var t=z2e(),e=AH(),r=Do();function n(i,a){var s={};return a=r(a,3),e(i,function(c,d,f){t(s,d,a(c,d,f))}),s}return hS=n,hS}var V2e=$2e();const F2e=_r(V2e);var fS,JB;function q2e(){if(JB)return fS;JB=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return fS=t,fS}var mS,eU;function H2e(){if(eU)return mS;eU=1;var t=xE();function e(r,n){var i=!0;return t(r,function(a,s,c){return i=!!n(a,s,c),i}),i}return mS=e,mS}var pS,tU;function G2e(){if(tU)return pS;tU=1;var t=q2e(),e=H2e(),r=Do(),n=ja(),i=Jx();function a(s,c,d){var f=n(s)?t:e;return d&&i(s,c,d)&&(c=void 0),f(s,r(c,3))}return pS=a,pS}var K2e=G2e();const pK=_r(K2e);var W2e=["x","y"];function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function LA(){return LA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},LA.apply(this,arguments)}function rU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Nm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rU(Object(r),!0).forEach(function(n){X2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X2e(t,e,r){return e=Q2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q2e(t){var e=Y2e(t,"string");return og(e)=="symbol"?e:e+""}function Y2e(t,e){if(og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z2e(t,e){if(t==null)return{};var r=J2e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function J2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function e4e(t,e){var r=t.x,n=t.y,i=Z2e(t,W2e),a="".concat(r),s=parseInt(a,10),c="".concat(n),d=parseInt(c,10),f="".concat(e.height||i.height),m=parseInt(f,10),p="".concat(e.width||i.width),y=parseInt(p,10);return Nm(Nm(Nm(Nm(Nm({},e),i),s?{x:s}:{}),d?{y:d}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function nU(t){return ae.createElement(MA,LA({shapeType:"rectangle",propTransformer:e4e,activeClassName:"recharts-active-bar"},t))}var t4e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=at(n)||iue(n);return a?e(n,i):(a||R0(),r)}},r4e=["value","background"],gK;function $h(t){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(t)}function n4e(t,e){if(t==null)return{};var r=i4e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vb.apply(this,arguments)}function iU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iU(Object(r),!0).forEach(function(n){Uc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function a4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vK(n.key),n)}}function s4e(t,e,r){return e&&aU(t.prototype,e),r&&aU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o4e(t,e,r){return e=Fb(e),l4e(t,yK()?Reflect.construct(e,r||[],Fb(t).constructor):e.apply(t,r))}function l4e(t,e){if(e&&($h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c4e(t)}function c4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yK=function(){return!!t})()}function Fb(t){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fb(t)}function u4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BA(t,e)}function BA(t,e){return BA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},BA(t,e)}function Uc(t,e,r){return e=vK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vK(t){var e=d4e(t,"string");return $h(e)=="symbol"?e:e+""}function d4e(t,e){if($h(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kg=(function(t){function e(){var r;a4e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=o4e(this,e,[].concat(i)),Uc(r,"state",{isAnimationFinished:!1}),Uc(r,"id",Dg("recharts-bar-")),Uc(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),Uc(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return u4e(e,t),s4e(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.dataKey,d=a.activeIndex,f=a.activeBar,m=Nt(this.props,!1);return n&&n.map(function(p,y){var b=y===d,T=b?f:s,S=Fn(Fn(Fn({},m),p),{},{isActive:b,option:T,index:y,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ae.createElement(vr,Vb({className:"recharts-bar-rectangle"},O0(i.props,p,y),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(y)}),ae.createElement(nU,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,m=i.animationEasing,p=i.animationId,y=this.state.prevData;return ae.createElement(Co,{begin:d,duration:f,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t,S=a.map(function(w,N){var I=y&&y[N];if(I){var C=xa(I.x,w.x),z=xa(I.y,w.y),O=xa(I.width,w.width),B=xa(I.height,w.height);return Fn(Fn({},w),{},{x:C(T),y:z(T),width:O(T),height:B(T)})}if(s==="horizontal"){var E=xa(0,w.height),A=E(T);return Fn(Fn({},w),{},{y:w.y+w.height-A,height:A})}var R=xa(0,w.width),F=R(T);return Fn(Fn({},w),{},{width:F})});return ae.createElement(vr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Vg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,d=Nt(this.props.background,!1);return a.map(function(f,m){f.value;var p=f.background,y=n4e(f,r4e);if(!p)return null;var b=Fn(Fn(Fn(Fn(Fn({},y),{},{fill:"#eee"},p),d),O0(n.props,f,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:m,className:"recharts-bar-background-rectangle"});return ae.createElement(nU,Vb({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},b))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,d=a.yAxis,f=a.layout,m=a.children,p=Xa(m,Fg);if(!p)return null;var y=f==="vertical"?s[0].height/2:s[0].width/2,b=function(w,N){var I=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:I,errorVal:ji(w,N)}},T={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ae.createElement(vr,T,p.map(function(S){return ae.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:s,xAxis:c,yAxis:d,layout:f,offset:y,dataPointFormatter:b})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,c=n.xAxis,d=n.yAxis,f=n.left,m=n.top,p=n.width,y=n.height,b=n.isAnimationActive,T=n.background,S=n.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=Ht("recharts-bar",s),I=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,z=I||C,O=Vt(S)?this.id:S;return ae.createElement(vr,{className:N},I||C?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(O)},ae.createElement("rect",{x:I?f:f-p/2,y:C?m:m-y/2,width:I?p:p*2,height:C?y:y*2}))):null,ae.createElement(vr,{className:"recharts-bar-rectangles",clipPath:z?"url(#clipPath-".concat(O,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(z,O),(!b||w)&&El.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(V.PureComponent);gK=Kg;Uc(Kg,"displayName","Bar");Uc(Kg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!q0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Uc(Kg,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,f=t.stackedData,m=t.dataStartIndex,p=t.displayedData,y=t.offset,b=b1e(n,r);if(!b)return null;var T=e.layout,S=r.type.defaultProps,w=S!==void 0?Fn(Fn({},S),r.props):r.props,N=w.dataKey,I=w.children,C=w.minPointSize,z=T==="horizontal"?s:a,O=f?z.scale.domain():null,B=E1e({numericAxis:z}),E=Xa(I,SE),A=p.map(function(R,F){var D,L,M,Q,Z,W;f?D=x1e(f[m+F],O):(D=ji(R,N),Array.isArray(D)||(D=[B,D]));var ee=t4e(C,gK.defaultProps.minPointSize)(D[1],F);if(T==="horizontal"){var Y,ye=[s.scale(D[0]),s.scale(D[1])],oe=ye[0],X=ye[1];L=CL({axis:a,ticks:c,bandSize:i,offset:b.offset,entry:R,index:F}),M=(Y=X??oe)!==null&&Y!==void 0?Y:void 0,Q=b.size;var ne=oe-X;if(Z=Number.isNaN(ne)?0:ne,W={x:L,y:s.y,width:Q,height:s.height},Math.abs(ee)>0&&Math.abs(Z)<Math.abs(ee)){var de=qs(Z||ee)*(Math.abs(ee)-Math.abs(Z));M-=de,Z+=de}}else{var J=[a.scale(D[0]),a.scale(D[1])],le=J[0],pe=J[1];if(L=le,M=CL({axis:s,ticks:d,bandSize:i,offset:b.offset,entry:R,index:F}),Q=pe-le,Z=b.size,W={x:a.x,y:M,width:a.width,height:Z},Math.abs(ee)>0&&Math.abs(Q)<Math.abs(ee)){var be=qs(Q||ee)*(Math.abs(ee)-Math.abs(Q));Q+=be}}return Fn(Fn(Fn({},R),{},{x:L,y:M,width:Q,height:Z,value:f?D:D[1],payload:R,background:W},E&&E[F]&&E[F].props),{},{tooltipPayload:[FG(r,R)],tooltipPosition:{x:L+Q/2,y:M+Z/2}})});return Fn({data:A,layout:T},y)});function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}function h4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bK(n.key),n)}}function f4e(t,e,r){return e&&sU(t.prototype,e),r&&sU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function oU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oU(Object(r),!0).forEach(function(n){g2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g2(t,e,r){return e=bK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bK(t){var e=m4e(t,"string");return lg(e)=="symbol"?e:e+""}function m4e(t,e){if(lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p4e=function(e,r,n,i,a){var s=e.width,c=e.height,d=e.layout,f=e.children,m=Object.keys(r),p={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!za(f,Kg);return m.reduce(function(b,T){var S=r[T],w=S.orientation,N=S.domain,I=S.padding,C=I===void 0?{}:I,z=S.mirror,O=S.reversed,B="".concat(w).concat(z?"Mirror":""),E,A,R,F,D;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var L=N[1]-N[0],M=1/0,Q=S.categoricalDomain.sort(lue);if(Q.forEach(function(J,le){le>0&&(M=Math.min((J||0)-(Q[le-1]||0),M))}),Number.isFinite(M)){var Z=M/L,W=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(E=Z*W/2),S.padding==="no-gap"){var ee=Hs(e.barCategoryGap,Z*W),Y=Z*W/2;E=Y-ee-(Y-ee)/W*ee}}}i==="xAxis"?A=[n.left+(C.left||0)+(E||0),n.left+n.width-(C.right||0)-(E||0)]:i==="yAxis"?A=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(E||0),n.top+n.height-(C.bottom||0)-(E||0)]:A=S.range,O&&(A=[A[1],A[0]]);var ye=UG(S,a,y),oe=ye.scale,X=ye.realScaleType;oe.domain(N).range(A),zG(oe);var ne=$G(oe,Vs(Vs({},S),{},{realScaleType:X}));i==="xAxis"?(D=w==="top"&&!z||w==="bottom"&&z,R=n.left,F=p[B]-D*S.height):i==="yAxis"&&(D=w==="left"&&!z||w==="right"&&z,R=p[B]-D*S.width,F=n.top);var de=Vs(Vs(Vs({},S),ne),{},{realScaleType:X,x:R,y:F,scale:oe,width:i==="xAxis"?n.width:S.width,height:i==="yAxis"?n.height:S.height});return de.bandSize=Ab(de,ne),!S.hide&&i==="xAxis"?p[B]+=(D?-1:1)*de.height:S.hide||(p[B]+=(D?-1:1)*de.width),Vs(Vs({},b),{},g2({},T,de))},{})},xK=function(e,r){var n=e.x,i=e.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},g4e=function(e){var r=e.x1,n=e.y1,i=e.x2,a=e.y2;return xK({x:r,y:n},{x:i,y:a})},wK=(function(){function t(e){h4e(this,t),this.scale=e}return f4e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(i){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])})();g2(wK,"EPS",1e-4);var QE=function(e){var r=Object.keys(e).reduce(function(n,i){return Vs(Vs({},n),{},g2({},i,wK.create(e[i])))},{});return Vs(Vs({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return F2e(i,function(d,f){return r[f].apply(d,{bandAware:s,position:c})})},isInRange:function(i){return pK(i,function(a,s){return r[s].isInRange(a)})}})};function y4e(t){return(t%180+180)%180}var v4e=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=y4e(i),s=a*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},gS,lU;function b4e(){if(lU)return gS;lU=1;var t=Do(),e=Lg(),r=Yx();function n(i){return function(a,s,c){var d=Object(a);if(!e(a)){var f=t(s,3);a=r(a),s=function(p){return f(d[p],p,d)}}var m=i(a,s,c);return m>-1?d[f?a[m]:m]:void 0}}return gS=n,gS}var yS,cU;function x4e(){if(cU)return yS;cU=1;var t=dK();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return yS=e,yS}var vS,uU;function w4e(){if(uU)return vS;uU=1;var t=xH(),e=Do(),r=x4e(),n=Math.max;function i(a,s,c){var d=a==null?0:a.length;if(!d)return-1;var f=c==null?0:r(c);return f<0&&(f=n(d+f,0)),t(a,e(s,3),f)}return vS=i,vS}var bS,dU;function _4e(){if(dU)return bS;dU=1;var t=b4e(),e=w4e(),r=t(e);return bS=r,bS}var S4e=_4e();const T4e=_r(S4e);var A4e=Dq();const E4e=_r(A4e);var N4e=E4e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),YE=V.createContext(void 0),ZE=V.createContext(void 0),_K=V.createContext(void 0),SK=V.createContext({}),TK=V.createContext(void 0),AK=V.createContext(0),EK=V.createContext(0),hU=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=e.clipPathId,c=e.children,d=e.width,f=e.height,m=N4e(a);return ae.createElement(YE.Provider,{value:n},ae.createElement(ZE.Provider,{value:i},ae.createElement(SK.Provider,{value:a},ae.createElement(_K.Provider,{value:m},ae.createElement(TK.Provider,{value:s},ae.createElement(AK.Provider,{value:f},ae.createElement(EK.Provider,{value:d},c)))))))},j4e=function(){return V.useContext(TK)},NK=function(e){var r=V.useContext(YE);r==null&&R0();var n=r[e];return n==null&&R0(),n},k4e=function(){var e=V.useContext(YE);return Dc(e)},C4e=function(){var e=V.useContext(ZE),r=T4e(e,function(n){return pK(n.domain,Number.isFinite)});return r||Dc(e)},jK=function(e){var r=V.useContext(ZE);r==null&&R0();var n=r[e];return n==null&&R0(),n},O4e=function(){var e=V.useContext(_K);return e},I4e=function(){return V.useContext(SK)},JE=function(){return V.useContext(EK)},eN=function(){return V.useContext(AK)};function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function R4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CK(n.key),n)}}function P4e(t,e,r){return e&&M4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function D4e(t,e,r){return e=qb(e),L4e(t,kK()?Reflect.construct(e,r||[],qb(t).constructor):e.apply(t,r))}function L4e(t,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B4e(t)}function B4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kK=function(){return!!t})()}function qb(t){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qb(t)}function U4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UA(t,e)}function UA(t,e){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},UA(t,e)}function fU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(r),!0).forEach(function(n){tN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tN(t,e,r){return e=CK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CK(t){var e=z4e(t,"string");return Vh(e)=="symbol"?e:e+""}function z4e(t,e){if(Vh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $4e(t,e){return H4e(t)||q4e(t,e)||F4e(t,e)||V4e()}function V4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F4e(t,e){if(t){if(typeof t=="string")return pU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pU(t,e)}}function pU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function q4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function H4e(t){if(Array.isArray(t))return t}function zA(){return zA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zA.apply(this,arguments)}var G4e=function(e,r){var n;return ae.isValidElement(e)?n=ae.cloneElement(e,r):Lt(e)?n=e(r):n=ae.createElement("line",zA({},r,{className:"recharts-reference-line-line"})),n},K4e=function(e,r,n,i,a,s,c,d,f){var m=a.x,p=a.y,y=a.width,b=a.height;if(n){var T=f.y,S=e.y.apply(T,{position:s});if(To(f,"discard")&&!e.y.isInRange(S))return null;var w=[{x:m+y,y:S},{x:m,y:S}];return d==="left"?w.reverse():w}if(r){var N=f.x,I=e.x.apply(N,{position:s});if(To(f,"discard")&&!e.x.isInRange(I))return null;var C=[{x:I,y:p+b},{x:I,y:p}];return c==="top"?C.reverse():C}if(i){var z=f.segment,O=z.map(function(B){return e.apply(B,{position:s})});return To(f,"discard")&&U2e(O,function(B){return!e.isInRange(B)})?null:O}return null};function W4e(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,f=j4e(),m=NK(i),p=jK(a),y=O4e();if(!f||!y)return null;Tl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=QE({x:m.scale,y:p.scale}),T=Zn(e),S=Zn(r),w=n&&n.length===2,N=K4e(b,T,S,w,y,t.position,m.orientation,p.orientation,t);if(!N)return null;var I=$4e(N,2),C=I[0],z=C.x,O=C.y,B=I[1],E=B.x,A=B.y,R=To(t,"hidden")?"url(#".concat(f,")"):void 0,F=mU(mU({clipPath:R},Nt(t,!0)),{},{x1:z,y1:O,x2:E,y2:A});return ae.createElement(vr,{className:Ht("recharts-reference-line",c)},G4e(s,F),Ai.renderCallByParent(t,g4e({x1:z,y1:O,x2:E,y2:A})))}var rN=(function(t){function e(){return R4e(this,e),D4e(this,e,arguments)}return U4e(e,t),P4e(e,[{key:"render",value:function(){return ae.createElement(W4e,this.props)}}])})(ae.Component);tN(rN,"displayName","ReferenceLine");tN(rN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function $A(){return $A=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$A.apply(this,arguments)}function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function gU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gU(Object(r),!0).forEach(function(n){y2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q4e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IK(n.key),n)}}function Y4e(t,e,r){return e&&Q4e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z4e(t,e,r){return e=Hb(e),J4e(t,OK()?Reflect.construct(e,r||[],Hb(t).constructor):e.apply(t,r))}function J4e(t,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ewe(t)}function ewe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OK=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hb(t)}function twe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VA(t,e)}function VA(t,e){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VA(t,e)}function y2(t,e,r){return e=IK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IK(t){var e=rwe(t,"string");return Fh(e)=="symbol"?e:e+""}function rwe(t,e){if(Fh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nwe=function(e){var r=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=QE({x:i.scale,y:a.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return To(e,"discard")&&!s.isInRange(c)?null:c},v2=(function(t){function e(){return X4e(this,e),Z4e(this,e,arguments)}return twe(e,t),Y4e(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,f=Zn(i),m=Zn(a);if(Tl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!m)return null;var p=nwe(this.props);if(!p)return null;var y=p.x,b=p.y,T=this.props,S=T.shape,w=T.className,N=To(this.props,"hidden")?"url(#".concat(d,")"):void 0,I=yU(yU({clipPath:N},Nt(this.props,!0)),{},{cx:y,cy:b});return ae.createElement(vr,{className:Ht("recharts-reference-dot",w)},e.renderDot(S,I),Ai.renderCallByParent(this.props,{x:y-s,y:b-s,width:2*s,height:2*s}))}}])})(ae.Component);y2(v2,"displayName","ReferenceDot");y2(v2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});y2(v2,"renderDot",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):Lt(t)?r=t(e):r=ae.createElement(d2,$A({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function FA(){return FA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FA.apply(this,arguments)}function qh(t){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(t)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function bU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){b2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function awe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MK(n.key),n)}}function swe(t,e,r){return e&&awe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function owe(t,e,r){return e=Gb(e),lwe(t,RK()?Reflect.construct(e,r||[],Gb(t).constructor):e.apply(t,r))}function lwe(t,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cwe(t)}function cwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RK=function(){return!!t})()}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gb(t)}function uwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qA(t,e)}function qA(t,e){return qA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qA(t,e)}function b2(t,e,r){return e=MK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MK(t){var e=dwe(t,"string");return qh(e)=="symbol"?e:e+""}function dwe(t,e){if(qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hwe=function(e,r,n,i,a){var s=a.x1,c=a.x2,d=a.y1,f=a.y2,m=a.xAxis,p=a.yAxis;if(!m||!p)return null;var y=QE({x:m.scale,y:p.scale}),b={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:i?y.y.apply(f,{position:"end"}):y.y.rangeMax};return To(a,"discard")&&(!y.isInRange(b)||!y.isInRange(T))?null:xK(b,T)},x2=(function(t){function e(){return iwe(this,e),owe(this,e,arguments)}return uwe(e,t),swe(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,c=n.y2,d=n.className,f=n.alwaysShow,m=n.clipPathId;Tl(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Zn(i),y=Zn(a),b=Zn(s),T=Zn(c),S=this.props.shape;if(!p&&!y&&!b&&!T&&!S)return null;var w=hwe(p,y,b,T,this.props);if(!w&&!S)return null;var N=To(this.props,"hidden")?"url(#".concat(m,")"):void 0;return ae.createElement(vr,{className:Ht("recharts-reference-area",d)},e.renderRect(S,bU(bU({clipPath:N},Nt(this.props,!0)),w)),Ai.renderCallByParent(this.props,w))}}])})(ae.Component);b2(x2,"displayName","ReferenceArea");b2(x2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});b2(x2,"renderRect",function(t,e){var r;return ae.isValidElement(t)?r=ae.cloneElement(t,e):Lt(t)?r=t(e):r=ae.createElement(XE,FA({},e,{className:"recharts-reference-area-rect"})),r});function PK(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function fwe(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return v4e(n,r)}function mwe(t,e,r){var n=r==="width",i=t.x,a=t.y,s=t.width,c=t.height;return e===1?{start:n?i:a,end:n?i+s:a+c}:{start:n?i+s:a+c,end:n?i:a}}function Kb(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var a=r();return t*(e-t*a/2-n)>=0&&t*(e+t*a/2-i)<=0}function pwe(t,e){return PK(t,e+1)}function gwe(t,e,r,n,i){for(var a=(n||[]).slice(),s=e.start,c=e.end,d=0,f=1,m=s,p=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:PK(n,f)};var S=d,w,N=function(){return w===void 0&&(w=r(T,S)),w},I=T.coordinate,C=d===0||Kb(t,I,N,m,c);C||(d=0,m=s,f+=1),C&&(m=I+t*(N()/2+i),d+=f)},y;f<=a.length;)if(y=p(),y)return y.v;return[]}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}function xU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Bi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xU(Object(r),!0).forEach(function(n){ywe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ywe(t,e,r){return e=vwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vwe(t){var e=bwe(t,"string");return cg(e)=="symbol"?e:e+""}function bwe(t,e){if(cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xwe(t,e,r,n,i){for(var a=(n||[]).slice(),s=a.length,c=e.start,d=e.end,f=function(y){var b=a[y],T,S=function(){return T===void 0&&(T=r(b,y)),T};if(y===s-1){var w=t*(b.coordinate+t*S()/2-d);a[y]=b=Bi(Bi({},b),{},{tickCoord:w>0?b.coordinate-w*t:b.coordinate})}else a[y]=b=Bi(Bi({},b),{},{tickCoord:b.coordinate});var N=Kb(t,b.tickCoord,S,c,d);N&&(d=b.tickCoord-t*(S()/2+i),a[y]=Bi(Bi({},b),{},{isShow:!0}))},m=s-1;m>=0;m--)f(m);return a}function wwe(t,e,r,n,i,a){var s=(n||[]).slice(),c=s.length,d=e.start,f=e.end;if(a){var m=n[c-1],p=r(m,c-1),y=t*(m.coordinate+t*p/2-f);s[c-1]=m=Bi(Bi({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var b=Kb(t,m.tickCoord,function(){return p},d,f);b&&(f=m.tickCoord-t*(p/2+i),s[c-1]=Bi(Bi({},m),{},{isShow:!0}))}for(var T=a?c-1:c,S=function(I){var C=s[I],z,O=function(){return z===void 0&&(z=r(C,I)),z};if(I===0){var B=t*(C.coordinate-t*O()/2-d);s[I]=C=Bi(Bi({},C),{},{tickCoord:B<0?C.coordinate-B*t:C.coordinate})}else s[I]=C=Bi(Bi({},C),{},{tickCoord:C.coordinate});var E=Kb(t,C.tickCoord,O,d,f);E&&(d=C.tickCoord+t*(O()/2+i),s[I]=Bi(Bi({},C),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function nN(t,e,r){var n=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,f=t.tickFormatter,m=t.unit,p=t.angle;if(!i||!i.length||!n)return[];if(at(d)||q0.isSsr)return pwe(i,typeof d=="number"&&at(d)?d:0);var y=[],b=c==="top"||c==="bottom"?"width":"height",T=m&&b==="width"?Qm(m,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(C,z){var O=Lt(f)?f(C.value,z):C.value;return b==="width"?fwe(Qm(O,{fontSize:e,letterSpacing:r}),T,p):Qm(O,{fontSize:e,letterSpacing:r})[b]},w=i.length>=2?qs(i[1].coordinate-i[0].coordinate):1,N=mwe(a,w,b);return d==="equidistantPreserveStart"?gwe(w,N,S,i,s):(d==="preserveStart"||d==="preserveStartEnd"?y=wwe(w,N,S,i,s,d==="preserveStartEnd"):y=xwe(w,N,S,i,s),y.filter(function(I){return I.isShow}))}var _we=["viewBox"],Swe=["viewBox"],Twe=["ticks"];function Hh(t){"@babel/helpers - typeof";return Hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hh(t)}function Wd(){return Wd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wd.apply(this,arguments)}function wU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Qn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(r),!0).forEach(function(n){iN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xS(t,e){if(t==null)return{};var r=Awe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Awe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ewe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LK(n.key),n)}}function Nwe(t,e,r){return e&&_U(t.prototype,e),r&&_U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function jwe(t,e,r){return e=Wb(e),kwe(t,DK()?Reflect.construct(e,r||[],Wb(t).constructor):e.apply(t,r))}function kwe(t,e){if(e&&(Hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cwe(t)}function Cwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DK=function(){return!!t})()}function Wb(t){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wb(t)}function Owe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HA(t,e)}function HA(t,e){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HA(t,e)}function iN(t,e,r){return e=LK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LK(t){var e=Iwe(t,"string");return Hh(e)=="symbol"?e:e+""}function Iwe(t,e){if(Hh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Hh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mf=(function(t){function e(r){var n;return Ewe(this,e),n=jwe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Owe(e,t),Nwe(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=xS(n,_we),c=this.props,d=c.viewBox,f=xS(c,Swe);return!nh(a,d)||!nh(s,f)||!nh(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,c=i.width,d=i.height,f=i.orientation,m=i.tickSize,p=i.mirror,y=i.tickMargin,b,T,S,w,N,I,C=p?-1:1,z=n.tickSize||m,O=at(n.tickCoord)?n.tickCoord:n.coordinate;switch(f){case"top":b=T=n.coordinate,w=s+ +!p*d,S=w-C*z,I=S-C*y,N=O;break;case"left":S=w=n.coordinate,T=a+ +!p*c,b=T-C*z,N=b-C*y,I=O;break;case"right":S=w=n.coordinate,T=a+ +p*c,b=T+C*z,N=b+C*y,I=O;break;default:b=T=n.coordinate,w=s+ +p*d,S=w+C*z,I=S+C*y,N=O;break}return{line:{x1:b,y1:S,x2:T,y2:w},tick:{x:N,y:I}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.orientation,f=n.mirror,m=n.axisLine,p=Qn(Qn(Qn({},Nt(this.props,!1)),Nt(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!f||d==="bottom"&&f);p=Qn(Qn({},p),{},{x1:i,y1:a+y*c,x2:i+s,y2:a+y*c})}else{var b=+(d==="left"&&!f||d==="right"&&f);p=Qn(Qn({},p),{},{x1:i+b*s,y1:a,x2:i+b*s,y2:a+c})}return ae.createElement("line",Wd({},p,{className:Ht("recharts-cartesian-axis-line",bs(m,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,c=this.props,d=c.tickLine,f=c.stroke,m=c.tick,p=c.tickFormatter,y=c.unit,b=nN(Qn(Qn({},this.props),{},{ticks:n}),i,a),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=Nt(this.props,!1),N=Nt(m,!1),I=Qn(Qn({},w),{},{fill:"none"},Nt(d,!1)),C=b.map(function(z,O){var B=s.getTickLineCoord(z),E=B.line,A=B.tick,R=Qn(Qn(Qn(Qn({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:f},N),A),{},{index:O,payload:z,visibleTicksCount:b.length,tickFormatter:p});return ae.createElement(vr,Wd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(z.value,"-").concat(z.coordinate,"-").concat(z.tickCoord)},O0(s.props,z,O)),d&&ae.createElement("line",Wd({},I,E,{className:Ht("recharts-cartesian-axis-tick-line",bs(d,"className"))})),m&&e.renderTickItem(m,R,"".concat(Lt(p)?p(z.value,O):z.value).concat(y||"")))});return ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,d=i.ticksGenerator,f=i.className,m=i.hide;if(m)return null;var p=this.props,y=p.ticks,b=xS(p,Twe),T=y;return Lt(d)&&(T=y&&y.length>0?d(this.props):d(b)),s<=0||c<=0||!T||!T.length?null:ae.createElement(vr,{className:Ht("recharts-cartesian-axis",f),ref:function(w){n.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),Ai.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,c=Ht(i.className,"recharts-cartesian-axis-tick-value");return ae.isValidElement(n)?s=ae.cloneElement(n,Qn(Qn({},i),{},{className:c})):Lt(n)?s=n(Qn(Qn({},i),{},{className:c})):s=ae.createElement(Ch,Wd({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(V.Component);iN(mf,"displayName","CartesianAxis");iN(mf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Rwe=["x1","y1","x2","y2","key"],Mwe=["offset"];function M0(t){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M0(t)}function SU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SU(Object(r),!0).forEach(function(n){Pwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pwe(t,e,r){return e=Dwe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dwe(t){var e=Lwe(t,"string");return M0(e)=="symbol"?e:e+""}function Lwe(t,e){if(M0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(M0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function o0(){return o0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},o0.apply(this,arguments)}function TU(t,e){if(t==null)return{};var r=Bwe(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Bwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Uwe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,d=e.ry;return ae.createElement("rect",{x:i,y:a,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function BK(t,e){var r;if(ae.isValidElement(t))r=ae.cloneElement(t,e);else if(Lt(t))r=t(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,c=e.key,d=TU(e,Rwe),f=Nt(d,!1);f.offset;var m=TU(f,Mwe);r=ae.createElement("line",o0({},m,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:c}))}return r}function zwe(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=zi(zi({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return BK(i,f)});return ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function $we(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=zi(zi({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return BK(i,f)});return ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Vwe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,a=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,f=d===void 0?!0:d;if(!f||!e||!e.length)return null;var m=c.map(function(y){return Math.round(y+i-i)}).sort(function(y,b){return y-b});i!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?i+s-y:m[b+1]-y;if(S<=0)return null;var w=b%e.length;return ae.createElement("rect",{key:"react-".concat(b),y,x:n,height:S,width:a,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Fwe(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,c=t.width,d=t.height,f=t.verticalPoints;if(!r||!n||!n.length)return null;var m=f.map(function(y){return Math.round(y+a-a)}).sort(function(y,b){return y-b});a!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?a+c-y:m[b+1]-y;if(S<=0)return null;var w=b%n.length;return ae.createElement("rect",{key:"react-".concat(b),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var qwe=function(e,r){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return BG(nN(zi(zi(zi({},mf.defaultProps),n),{},{ticks:bl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},Hwe=function(e,r){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return BG(nN(zi(zi(zi({},mf.defaultProps),n),{},{ticks:bl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},Ld={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function UK(t){var e,r,n,i,a,s,c=JE(),d=eN(),f=I4e(),m=zi(zi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ld.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Ld.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Ld.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Ld.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Ld.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Ld.verticalFill,x:at(t.x)?t.x:f.left,y:at(t.y)?t.y:f.top,width:at(t.width)?t.width:f.width,height:at(t.height)?t.height:f.height}),p=m.x,y=m.y,b=m.width,T=m.height,S=m.syncWithTicks,w=m.horizontalValues,N=m.verticalValues,I=k4e(),C=C4e();if(!at(b)||b<=0||!at(T)||T<=0||!at(p)||p!==+p||!at(y)||y!==+y)return null;var z=m.verticalCoordinatesGenerator||qwe,O=m.horizontalCoordinatesGenerator||Hwe,B=m.horizontalPoints,E=m.verticalPoints;if((!B||!B.length)&&Lt(O)){var A=w&&w.length,R=O({yAxis:C?zi(zi({},C),{},{ticks:A?w:C.ticks}):void 0,width:c,height:d,offset:f},A?!0:S);Tl(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(M0(R),"]")),Array.isArray(R)&&(B=R)}if((!E||!E.length)&&Lt(z)){var F=N&&N.length,D=z({xAxis:I?zi(zi({},I),{},{ticks:F?N:I.ticks}):void 0,width:c,height:d,offset:f},F?!0:S);Tl(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(M0(D),"]")),Array.isArray(D)&&(E=D)}return ae.createElement("g",{className:"recharts-cartesian-grid"},ae.createElement(Uwe,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),ae.createElement(zwe,o0({},m,{offset:f,horizontalPoints:B,xAxis:I,yAxis:C})),ae.createElement($we,o0({},m,{offset:f,verticalPoints:E,xAxis:I,yAxis:C})),ae.createElement(Vwe,o0({},m,{horizontalPoints:B})),ae.createElement(Fwe,o0({},m,{verticalPoints:E})))}UK.displayName="CartesianGrid";function Gh(t){"@babel/helpers - typeof";return Gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gh(t)}function Gwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kwe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VK(n.key),n)}}function Wwe(t,e,r){return e&&Kwe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xwe(t,e,r){return e=Xb(e),Qwe(t,zK()?Reflect.construct(e,r||[],Xb(t).constructor):e.apply(t,r))}function Qwe(t,e){if(e&&(Gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ywe(t)}function Ywe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zK=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xb(t)}function Zwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GA(t,e)}function GA(t,e){return GA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GA(t,e)}function $K(t,e,r){return e=VK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function VK(t){var e=Jwe(t,"string");return Gh(e)=="symbol"?e:e+""}function Jwe(t,e){if(Gh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Gh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w2=(function(t){function e(){return Gwe(this,e),Xwe(this,e,arguments)}return Zwe(e,t),Wwe(e,[{key:"render",value:function(){return null}}])})(V.Component);$K(w2,"displayName","ZAxis");$K(w2,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var e5e=["option","isActive"];function rp(){return rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rp.apply(this,arguments)}function t5e(t,e){if(t==null)return{};var r=r5e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function n5e(t){var e=t.option,r=t.isActive,n=t5e(t,e5e);return typeof e=="string"?V.createElement(MA,rp({option:V.createElement(Qx,rp({type:e},n)),isActive:r,shapeType:"symbols"},n)):V.createElement(MA,rp({option:e,isActive:r,shapeType:"symbols"},n))}function Kh(t){"@babel/helpers - typeof";return Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kh(t)}function np(){return np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},np.apply(this,arguments)}function AU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ms(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AU(Object(r),!0).forEach(function(n){zc(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function i5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qK(n.key),n)}}function a5e(t,e,r){return e&&EU(t.prototype,e),r&&EU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s5e(t,e,r){return e=Qb(e),o5e(t,FK()?Reflect.construct(e,r||[],Qb(t).constructor):e.apply(t,r))}function o5e(t,e){if(e&&(Kh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l5e(t)}function l5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FK=function(){return!!t})()}function Qb(t){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qb(t)}function c5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KA(t,e)}function KA(t,e){return KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},KA(t,e)}function zc(t,e,r){return e=qK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qK(t){var e=u5e(t,"string");return Kh(e)=="symbol"?e:e+""}function u5e(t,e){if(Kh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wg=(function(t){function e(){var r;i5e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=s5e(this,e,[].concat(i)),zc(r,"state",{isAnimationFinished:!1}),zc(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),zc(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),zc(r,"id",Dg("recharts-scatter-")),r}return c5e(e,t),a5e(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.activeShape,d=a.activeIndex,f=Nt(this.props,!1);return n.map(function(m,p){var y=d===p,b=y?c:s,T=ms(ms({},f),m);return ae.createElement(vr,np({className:"recharts-scatter-symbol",key:"symbol-".concat(m==null?void 0:m.cx,"-").concat(m==null?void 0:m.cy,"-").concat(m==null?void 0:m.size,"-").concat(p)},O0(i.props,m,p),{role:"img"}),ae.createElement(n5e,np({option:b,isActive:y,key:"symbol-".concat(p)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ae.createElement(Co,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=a.map(function(S,w){var N=p&&p[w];if(N){var I=xa(N.cx,S.cx),C=xa(N.cy,S.cy),z=xa(N.size,S.size);return ms(ms({},S),{},{cx:I(b),cy:C(b),size:z(b)})}var O=xa(0,S.size);return ms(ms({},S),{},{size:O(b)})});return ae.createElement(vr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!Vg(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,c=i.yAxis,d=i.children,f=Xa(d,Fg);return f?f.map(function(m,p){var y=m.props,b=y.direction,T=y.dataKey;return ae.cloneElement(m,{key:"".concat(b,"-").concat(T,"-").concat(a[p]),data:a,xAxis:s,yAxis:c,layout:b==="x"?"vertical":"horizontal",dataPointFormatter:function(w,N){return{x:w.cx,y:w.cy,value:b==="x"?+w.node.x:+w.node.y,errorVal:ji(w,N)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,s=n.lineType,c=n.lineJointType,d=Nt(this.props,!1),f=Nt(a,!1),m,p;if(s==="joint")m=i.map(function(C){return{x:C.cx,y:C.cy}});else if(s==="fitting"){var y=oue(i),b=y.xmin,T=y.xmax,S=y.a,w=y.b,N=function(z){return S*z+w};m=[{x:b,y:N(b)},{x:T,y:N(T)}]}var I=ms(ms(ms({},d),{},{fill:"none",stroke:d&&d.fill},f),{},{points:m});return ae.isValidElement(a)?p=ae.cloneElement(a,I):Lt(a)?p=a(I):p=ae.createElement(bA,np({},I,{type:c})),ae.createElement(vr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,s=n.line,c=n.className,d=n.xAxis,f=n.yAxis,m=n.left,p=n.top,y=n.width,b=n.height,T=n.id,S=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,N=Ht("recharts-scatter",c),I=d&&d.allowDataOverflow,C=f&&f.allowDataOverflow,z=I||C,O=Vt(T)?this.id:T;return ae.createElement(vr,{className:N,clipPath:z?"url(#clipPath-".concat(O,")"):null},I||C?ae.createElement("defs",null,ae.createElement("clipPath",{id:"clipPath-".concat(O)},ae.createElement("rect",{x:I?m:m-y/2,y:C?p:p-b/2,width:I?y:y*2,height:C?b:b*2}))):null,s&&this.renderLine(),this.renderErrorBar(),ae.createElement(vr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&El.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(V.PureComponent);zc(Wg,"displayName","Scatter");zc(Wg,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!q0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});zc(Wg,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,a=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,f=i.props.tooltipType,m=Xa(i.props.children,SE),p=Vt(e.dataKey)?i.props.dataKey:e.dataKey,y=Vt(r.dataKey)?i.props.dataKey:r.dataKey,b=n&&n.dataKey,T=n?n.range:w2.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,N=r.scale.bandwidth?r.scale.bandwidth():0,I=a.map(function(C,z){var O=ji(C,p),B=ji(C,y),E=!Vt(b)&&ji(C,b)||"-",A=[{name:Vt(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:O,payload:C,dataKey:p,type:f},{name:Vt(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:B,payload:C,dataKey:y,type:f}];E!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:C,dataKey:b,type:f});var R=kL({axis:e,ticks:s,bandSize:w,entry:C,index:z,dataKey:p}),F=kL({axis:r,ticks:c,bandSize:N,entry:C,index:z,dataKey:y}),D=E!=="-"?n.scale(E):S,L=Math.sqrt(Math.max(D,0)/Math.PI);return ms(ms({},C),{},{cx:R,cy:F,x:R-L,y:F-L,xAxis:e,yAxis:r,zAxis:n,width:2*L,height:2*L,size:D,node:{x:O,y:B,z:E},tooltipPayload:A,tooltipPosition:{x:R,y:F},payload:C},m&&m[z]&&m[z].props)});return ms({points:I},d)});function Wh(t){"@babel/helpers - typeof";return Wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wh(t)}function d5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KK(n.key),n)}}function f5e(t,e,r){return e&&h5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m5e(t,e,r){return e=Yb(e),p5e(t,HK()?Reflect.construct(e,r||[],Yb(t).constructor):e.apply(t,r))}function p5e(t,e){if(e&&(Wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g5e(t)}function g5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function HK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HK=function(){return!!t})()}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yb(t)}function y5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WA(t,e)}function WA(t,e){return WA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},WA(t,e)}function GK(t,e,r){return e=KK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=v5e(t,"string");return Wh(e)=="symbol"?e:e+""}function v5e(t,e){if(Wh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function XA(){return XA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},XA.apply(this,arguments)}function b5e(t){var e=t.xAxisId,r=JE(),n=eN(),i=NK(e);return i==null?null:V.createElement(mf,XA({},i,{className:Ht("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return bl(s,!0)}}))}var _2=(function(t){function e(){return d5e(this,e),m5e(this,e,arguments)}return y5e(e,t),f5e(e,[{key:"render",value:function(){return V.createElement(b5e,this.props)}}])})(V.Component);GK(_2,"displayName","XAxis");GK(_2,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xh(t){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xh(t)}function x5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QK(n.key),n)}}function _5e(t,e,r){return e&&w5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function S5e(t,e,r){return e=Zb(e),T5e(t,WK()?Reflect.construct(e,r||[],Zb(t).constructor):e.apply(t,r))}function T5e(t,e){if(e&&(Xh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A5e(t)}function A5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WK=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zb(t)}function E5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QA(t,e)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},QA(t,e)}function XK(t,e,r){return e=QK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function QK(t){var e=N5e(t,"string");return Xh(e)=="symbol"?e:e+""}function N5e(t,e){if(Xh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function YA(){return YA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},YA.apply(this,arguments)}var j5e=function(e){var r=e.yAxisId,n=JE(),i=eN(),a=jK(r);return a==null?null:V.createElement(mf,YA({},a,{className:Ht("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(c){return bl(c,!0)}}))},S2=(function(t){function e(){return x5e(this,e),S5e(this,e,arguments)}return E5e(e,t),_5e(e,[{key:"render",value:function(){return V.createElement(j5e,this.props)}}])})(V.Component);XK(S2,"displayName","YAxis");XK(S2,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function NU(t){return I5e(t)||O5e(t)||C5e(t)||k5e()}function k5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C5e(t,e){if(t){if(typeof t=="string")return ZA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZA(t,e)}}function O5e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I5e(t){if(Array.isArray(t))return ZA(t)}function ZA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var JA=function(e,r,n,i,a){var s=Xa(e,rN),c=Xa(e,v2),d=[].concat(NU(s),NU(c)),f=Xa(e,x2),m="".concat(i,"Id"),p=i[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[m]===n&&To(w.props,"extendDomain")&&at(w.props[p])){var N=w.props[p];return[Math.min(S[0],N),Math.max(S[1],N)]}return S},y)),f.length){var b="".concat(p,"1"),T="".concat(p,"2");y=f.reduce(function(S,w){if(w.props[m]===n&&To(w.props,"extendDomain")&&at(w.props[b])&&at(w.props[T])){var N=w.props[b],I=w.props[T];return[Math.min(S[0],N,I),Math.max(S[1],N,I)]}return S},y)}return a&&a.length&&(y=a.reduce(function(S,w){return at(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},wS={exports:{}},jU;function R5e(){return jU||(jU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function a(d,f,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,p||d,y),T=r?r+f:f;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],b]:d._events[T].push(b):(d._events[T]=b,d._eventsCount++),d}function s(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,p;if(this._eventsCount===0)return f;for(p in m=this._events)e.call(m,p)&&f.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=r?r+f:f,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,b=p.length,T=new Array(b);y<b;y++)T[y]=p[y].fn;return T},c.prototype.listenerCount=function(f){var m=r?r+f:f,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(f,m,p,y,b,T){var S=r?r+f:f;if(!this._events[S])return!1;var w=this._events[S],N=arguments.length,I,C;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,y),!0;case 5:return w.fn.call(w.context,m,p,y,b),!0;case 6:return w.fn.call(w.context,m,p,y,b,T),!0}for(C=1,I=new Array(N-1);C<N;C++)I[C-1]=arguments[C];w.fn.apply(w.context,I)}else{var z=w.length,O;for(C=0;C<z;C++)switch(w[C].once&&this.removeListener(f,w[C].fn,void 0,!0),N){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,m);break;case 3:w[C].fn.call(w[C].context,m,p);break;case 4:w[C].fn.call(w[C].context,m,p,y);break;default:if(!I)for(O=1,I=new Array(N-1);O<N;O++)I[O-1]=arguments[O];w[C].fn.apply(w[C].context,I)}}return!0},c.prototype.on=function(f,m,p){return a(this,f,m,p,!1)},c.prototype.once=function(f,m,p){return a(this,f,m,p,!0)},c.prototype.removeListener=function(f,m,p,y){var b=r?r+f:f;if(!this._events[b])return this;if(!m)return s(this,b),this;var T=this._events[b];if(T.fn)T.fn===m&&(!y||T.once)&&(!p||T.context===p)&&s(this,b);else{for(var S=0,w=[],N=T.length;S<N;S++)(T[S].fn!==m||y&&!T[S].once||p&&T[S].context!==p)&&w.push(T[S]);w.length?this._events[b]=w.length===1?w[0]:w:s(this,b)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&s(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(wS)),wS.exports}var M5e=R5e();const P5e=_r(M5e);var _S=new P5e,SS="recharts.syncMouseEvents";function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}function D5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L5e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,YK(n.key),n)}}function B5e(t,e,r){return e&&L5e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TS(t,e,r){return e=YK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function YK(t){var e=U5e(t,"string");return ug(e)=="symbol"?e:e+""}function U5e(t,e){if(ug(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ug(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var z5e=(function(){function t(){D5e(this,t),TS(this,"activeIndex",0),TS(this,"coordinateList",[]),TS(this,"layout","horizontal")}return B5e(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,c=s===void 0?null:s,d=r.layout,f=d===void 0?null:d,m=r.offset,p=m===void 0?null:m,y=r.mouseHandlerCallback,b=y===void 0?null:y;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=f??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,d=this.coordinateList[this.activeIndex].coordinate,f=((r=window)===null||r===void 0?void 0:r.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=a+d+f,y=s+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])})();function $5e(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],i=t==null?void 0:t[1];if(n&&i&&at(n)&&at(i))return!0}return!1}function V5e(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function ZK(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,a=t.endAngle,s=Ur(e,r,n,i),c=Ur(e,r,n,a);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:i,endAngle:a}}function F5e(t,e,r){var n,i,a,s;if(t==="horizontal")n=e.x,a=n,i=r.top,s=r.top+r.height;else if(t==="vertical")i=e.y,s=i,n=r.left,a=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,f=e.innerRadius,m=e.outerRadius,p=e.angle,y=Ur(c,d,f,p),b=Ur(c,d,m,p);n=y.x,i=y.y,a=b.x,s=b.y}else return ZK(e);return[{x:n,y:i},{x:a,y:s}]}function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){q5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q5e(t,e,r){return e=H5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H5e(t){var e=G5e(t,"string");return dg(e)=="symbol"?e:e+""}function G5e(t,e){if(dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K5e(t){var e,r,n=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,f=t.activeTooltipIndex,m=t.tooltipAxisBandSize,p=t.layout,y=t.chartName,b=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!b||!a||!s||y!=="ScatterChart"&&i!=="axis")return null;var T,S=bA;if(y==="ScatterChart")T=s,S=Hbe;else if(y==="BarChart")T=V5e(p,s,d,m),S=XE;else if(p==="radial"){var w=ZK(s),N=w.cx,I=w.cy,C=w.radius,z=w.startAngle,O=w.endAngle;T={cx:N,cy:I,startAngle:z,endAngle:O,innerRadius:C,outerRadius:C},S=XG}else T={points:F5e(p,s,d)},S=bA;var B=Wy(Wy(Wy(Wy({stroke:"#ccc",pointerEvents:"none"},d),T),Nt(b,!1)),{},{payload:c,payloadIndex:f,className:Ht("recharts-tooltip-cursor",b.className)});return V.isValidElement(b)?V.cloneElement(b,B):V.createElement(S,B)}var W5e=["item"],X5e=["children","className","width","height","style","compact","title","desc"];function Qh(t){"@babel/helpers - typeof";return Qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh(t)}function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xd.apply(this,arguments)}function CU(t,e){return Z5e(t)||Y5e(t,e)||eW(t,e)||Q5e()}function Q5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y5e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(r=r.call(t)).next,e!==0)for(;!(d=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Z5e(t){if(Array.isArray(t))return t}function OU(t,e){if(t==null)return{};var r=J5e(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function J5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function e3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tW(n.key),n)}}function r3e(t,e,r){return e&&t3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n3e(t,e,r){return e=Jb(e),i3e(t,JK()?Reflect.construct(e,r||[],Jb(t).constructor):e.apply(t,r))}function i3e(t,e){if(e&&(Qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a3e(t)}function a3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JK=function(){return!!t})()}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Jb(t)}function s3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e7(t,e)}function e7(t,e){return e7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},e7(t,e)}function Yh(t){return c3e(t)||l3e(t)||eW(t)||o3e()}function o3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eW(t,e){if(t){if(typeof t=="string")return t7(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t7(t,e)}}function l3e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function c3e(t){if(Array.isArray(t))return t7(t)}function t7(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){It(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function It(t,e,r){return e=tW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tW(t){var e=u3e(t,"string");return Qh(e)=="symbol"?e:e+""}function u3e(t,e){if(Qh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var d3e={xAxis:["bottom","top"],yAxis:["left","right"]},h3e={width:"100%",height:"100%"},rW={x:0,y:0};function Xy(t){return t}var f3e=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},m3e=function(e,r,n,i){var a=r.find(function(m){return m&&m.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,c=i.radius;return Pe(Pe(Pe({},i),Ur(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var d=a.coordinate,f=i.angle;return Pe(Pe(Pe({},i),Ur(i.cx,i.cy,d,f)),{},{angle:f,radius:d})}return rW},T2=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var f=d.props.data;return f&&f.length?[].concat(Yh(c),Yh(f)):c},[]);return s.length>0?s:e&&e.length&&at(i)&&at(a)?e.slice(i,a+1):[]};function nW(t){return t==="number"?[0,"auto"]:void 0}var r7=function(e,r,n,i){var a=e.graphicalItems,s=e.tooltipAxis,c=T2(r,e);return n<0||!a||!a.length||n>=c.length?null:a.reduce(function(d,f){var m,p=(m=f.props.data)!==null&&m!==void 0?m:r;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var b=p===void 0?c:p;y=Jv(b,s.dataKey,i)}else y=p&&p[n]||c[n];return y?[].concat(Yh(d),[FG(f,y)]):d},[])},RU=function(e,r,n,i){var a=i||{x:e.chartX,y:e.chartY},s=f3e(a,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,f=e.tooltipTicks,m=f1e(s,c,f,d);if(m>=0&&f){var p=f[m]&&f[m].value,y=r7(e,r,m,p),b=m3e(n,c,m,a);return{activeTooltipIndex:m,activeLabel:p,activePayload:y,activeCoordinate:b}}return null},p3e=function(e,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.layout,p=e.children,y=e.stackOffset,b=LG(m,a);return n.reduce(function(T,S){var w,N=S.type.defaultProps!==void 0?Pe(Pe({},S.type.defaultProps),S.props):S.props,I=N.type,C=N.dataKey,z=N.allowDataOverflow,O=N.allowDuplicatedCategory,B=N.scale,E=N.ticks,A=N.includeHidden,R=N[s];if(T[R])return T;var F=T2(e.data,{graphicalItems:i.filter(function(ne){var de,J=s in ne.props?ne.props[s]:(de=ne.type.defaultProps)===null||de===void 0?void 0:de[s];return J===R}),dataStartIndex:d,dataEndIndex:f}),D=F.length,L,M,Q;$5e(N.domain,z,I)&&(L=mA(N.domain,null,z),b&&(I==="number"||B!=="auto")&&(Q=Zm(F,C,"category")));var Z=nW(I);if(!L||L.length===0){var W,ee=(W=N.domain)!==null&&W!==void 0?W:Z;if(C){if(L=Zm(F,C,I),I==="category"&&b){var Y=sue(L);O&&Y?(M=L,L=Ub(0,D)):O||(L=RL(ee,L,S).reduce(function(ne,de){return ne.indexOf(de)>=0?ne:[].concat(Yh(ne),[de])},[]))}else if(I==="category")O?L=L.filter(function(ne){return ne!==""&&!Vt(ne)}):L=RL(ee,L,S).reduce(function(ne,de){return ne.indexOf(de)>=0||de===""||Vt(de)?ne:[].concat(Yh(ne),[de])},[]);else if(I==="number"){var ye=v1e(F,i.filter(function(ne){var de,J,le=s in ne.props?ne.props[s]:(de=ne.type.defaultProps)===null||de===void 0?void 0:de[s],pe="hide"in ne.props?ne.props.hide:(J=ne.type.defaultProps)===null||J===void 0?void 0:J.hide;return le===R&&(A||!pe)}),C,a,m);ye&&(L=ye)}b&&(I==="number"||B!=="auto")&&(Q=Zm(F,C,"category"))}else b?L=Ub(0,D):c&&c[R]&&c[R].hasStack&&I==="number"?L=y==="expand"?[0,1]:VG(c[R].stackGroups,d,f):L=DG(F,i.filter(function(ne){var de=s in ne.props?ne.props[s]:ne.type.defaultProps[s],J="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return de===R&&(A||!J)}),I,m,!0);if(I==="number")L=JA(p,L,R,a,E),ee&&(L=mA(ee,L,z));else if(I==="category"&&ee){var oe=ee,X=L.every(function(ne){return oe.indexOf(ne)>=0});X&&(L=oe)}}return Pe(Pe({},T),{},It({},R,Pe(Pe({},N),{},{axisType:a,domain:L,categoricalDomain:Q,duplicateDomain:M,originalDomain:(w=N.domain)!==null&&w!==void 0?w:Z,isCategorical:b,layout:m})))},{})},g3e=function(e,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.layout,p=e.children,y=T2(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:f}),b=y.length,T=LG(m,a),S=-1;return n.reduce(function(w,N){var I=N.type.defaultProps!==void 0?Pe(Pe({},N.type.defaultProps),N.props):N.props,C=I[s],z=nW("number");if(!w[C]){S++;var O;return T?O=Ub(0,b):c&&c[C]&&c[C].hasStack?(O=VG(c[C].stackGroups,d,f),O=JA(p,O,C,a)):(O=mA(z,DG(y,n.filter(function(B){var E,A,R=s in B.props?B.props[s]:(E=B.type.defaultProps)===null||E===void 0?void 0:E[s],F="hide"in B.props?B.props.hide:(A=B.type.defaultProps)===null||A===void 0?void 0:A.hide;return R===C&&!F}),"number",m),i.defaultProps.allowDataOverflow),O=JA(p,O,C,a)),Pe(Pe({},w),{},It({},C,Pe(Pe({axisType:a},i.defaultProps),{},{hide:!0,orientation:bs(d3e,"".concat(a,".").concat(S%2),null),domain:O,originalDomain:z,isCategorical:T,layout:m})))}return w},{})},y3e=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,f=r.dataEndIndex,m=e.children,p="".concat(i,"Id"),y=Xa(m,a),b={};return y&&y.length?b=p3e(e,{axes:y,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f}):s&&s.length&&(b=g3e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f})),b},v3e=function(e){var r=Dc(e),n=bl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:wE(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Ab(r,n)}},MU=function(e){var r=e.children,n=e.defaultShowTooltip,i=za(r,zh),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},b3e=function(e){return!e||!e.length?!1:e.some(function(r){var n=Sl(r&&r.type);return n&&n.indexOf("Bar")>=0})},PU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},x3e=function(e,r){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,c=e.yAxisMap,d=c===void 0?{}:c,f=n.width,m=n.height,p=n.children,y=n.margin||{},b=za(p,zh),T=za(p,ih),S=Object.keys(d).reduce(function(O,B){var E=d[B],A=E.orientation;return!E.mirror&&!E.hide?Pe(Pe({},O),{},It({},A,O[A]+E.width)):O},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(O,B){var E=s[B],A=E.orientation;return!E.mirror&&!E.hide?Pe(Pe({},O),{},It({},A,bs(O,"".concat(A))+E.height)):O},{top:y.top||0,bottom:y.bottom||0}),N=Pe(Pe({},w),S),I=N.bottom;b&&(N.bottom+=b.props.height||zh.defaultProps.height),T&&r&&(N=g1e(N,i,n,r));var C=f-N.left-N.right,z=m-N.top-N.bottom;return Pe(Pe({brushBottom:I},N),{},{width:Math.max(C,0),height:Math.max(z,0)})},w3e=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},iW=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,f=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,y=function(N,I){var C=I.graphicalItems,z=I.stackGroups,O=I.offset,B=I.updateId,E=I.dataStartIndex,A=I.dataEndIndex,R=N.barSize,F=N.layout,D=N.barGap,L=N.barCategoryGap,M=N.maxBarSize,Q=PU(F),Z=Q.numericAxisName,W=Q.cateAxisName,ee=b3e(C),Y=[];return C.forEach(function(ye,oe){var X=T2(N.data,{graphicalItems:[ye],dataStartIndex:E,dataEndIndex:A}),ne=ye.type.defaultProps!==void 0?Pe(Pe({},ye.type.defaultProps),ye.props):ye.props,de=ne.dataKey,J=ne.maxBarSize,le=ne["".concat(Z,"Id")],pe=ne["".concat(W,"Id")],be={},Je=d.reduce(function(he,ze){var re=I["".concat(ze.axisType,"Map")],De=ne["".concat(ze.axisType,"Id")];re&&re[De]||ze.axisType==="zAxis"||R0();var We=re[De];return Pe(Pe({},he),{},It(It({},ze.axisType,We),"".concat(ze.axisType,"Ticks"),bl(We)))},be),Ne=Je[W],ce=Je["".concat(W,"Ticks")],Ce=z&&z[le]&&z[le].hasStack&&N1e(ye,z[le].stackGroups),Ee=Sl(ye.type).indexOf("Bar")>=0,ct=Ab(Ne,ce),Qe=[],ut=ee&&m1e({barSize:R,stackGroups:z,totalSize:w3e(Je,W)});if(Ee){var dt,Ut,Oe=Vt(J)?M:J,st=(dt=(Ut=Ab(Ne,ce,!0))!==null&&Ut!==void 0?Ut:Oe)!==null&&dt!==void 0?dt:0;Qe=p1e({barGap:D,barCategoryGap:L,bandSize:st!==ct?st:ct,sizeList:ut[pe],maxBarSize:Oe}),st!==ct&&(Qe=Qe.map(function(he){return Pe(Pe({},he),{},{position:Pe(Pe({},he.position),{},{offset:he.position.offset-st/2})})}))}var yt=ye&&ye.type&&ye.type.getComposedData;yt&&Y.push({props:Pe(Pe({},yt(Pe(Pe({},Je),{},{displayedData:X,props:N,dataKey:de,item:ye,bandSize:ct,barPosition:Qe,offset:O,stackedData:Ce,layout:F,dataStartIndex:E,dataEndIndex:A}))),{},It(It(It({key:ye.key||"item-".concat(oe)},Z,Je[Z]),W,Je[W]),"animationId",B)),childIndex:bue(ye,N.children),item:ye})}),Y},b=function(N,I){var C=N.props,z=N.dataStartIndex,O=N.dataEndIndex,B=N.updateId;if(!KR({props:C}))return null;var E=C.children,A=C.layout,R=C.stackOffset,F=C.data,D=C.reverseStackOrder,L=PU(A),M=L.numericAxisName,Q=L.cateAxisName,Z=Xa(E,n),W=A1e(F,Z,"".concat(M,"Id"),"".concat(Q,"Id"),R,D),ee=d.reduce(function(ne,de){var J="".concat(de.axisType,"Map");return Pe(Pe({},ne),{},It({},J,y3e(C,Pe(Pe({},de),{},{graphicalItems:Z,stackGroups:de.axisType===M&&W,dataStartIndex:z,dataEndIndex:O}))))},{}),Y=x3e(Pe(Pe({},ee),{},{props:C,graphicalItems:Z}),I==null?void 0:I.legendBBox);Object.keys(ee).forEach(function(ne){ee[ne]=m(C,ee[ne],Y,ne.replace("Map",""),r)});var ye=ee["".concat(Q,"Map")],oe=v3e(ye),X=y(C,Pe(Pe({},ee),{},{dataStartIndex:z,dataEndIndex:O,updateId:B,graphicalItems:Z,stackGroups:W,offset:Y}));return Pe(Pe({formattedGraphicalItems:X,graphicalItems:Z,offset:Y,stackGroups:W},oe),ee)},T=(function(w){function N(I){var C,z,O;return e3e(this,N),O=n3e(this,N,[I]),It(O,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),It(O,"accessibilityManager",new z5e),It(O,"handleLegendBBoxUpdate",function(B){if(B){var E=O.state,A=E.dataStartIndex,R=E.dataEndIndex,F=E.updateId;O.setState(Pe({legendBBox:B},b({props:O.props,dataStartIndex:A,dataEndIndex:R,updateId:F},Pe(Pe({},O.state),{},{legendBBox:B}))))}}),It(O,"handleReceiveSyncEvent",function(B,E,A){if(O.props.syncId===B){if(A===O.eventEmitterSymbol&&typeof O.props.syncMethod!="function")return;O.applySyncEvent(E)}}),It(O,"handleBrushChange",function(B){var E=B.startIndex,A=B.endIndex;if(E!==O.state.dataStartIndex||A!==O.state.dataEndIndex){var R=O.state.updateId;O.setState(function(){return Pe({dataStartIndex:E,dataEndIndex:A},b({props:O.props,dataStartIndex:E,dataEndIndex:A,updateId:R},O.state))}),O.triggerSyncEvent({dataStartIndex:E,dataEndIndex:A})}}),It(O,"handleMouseEnter",function(B){var E=O.getMouseInfo(B);if(E){var A=Pe(Pe({},E),{},{isTooltipActive:!0});O.setState(A),O.triggerSyncEvent(A);var R=O.props.onMouseEnter;Lt(R)&&R(A,B)}}),It(O,"triggeredAfterMouseMove",function(B){var E=O.getMouseInfo(B),A=E?Pe(Pe({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};O.setState(A),O.triggerSyncEvent(A);var R=O.props.onMouseMove;Lt(R)&&R(A,B)}),It(O,"handleItemMouseEnter",function(B){O.setState(function(){return{isTooltipActive:!0,activeItem:B,activePayload:B.tooltipPayload,activeCoordinate:B.tooltipPosition||{x:B.cx,y:B.cy}}})}),It(O,"handleItemMouseLeave",function(){O.setState(function(){return{isTooltipActive:!1}})}),It(O,"handleMouseMove",function(B){B.persist(),O.throttleTriggeredAfterMouseMove(B)}),It(O,"handleMouseLeave",function(B){O.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};O.setState(E),O.triggerSyncEvent(E);var A=O.props.onMouseLeave;Lt(A)&&A(E,B)}),It(O,"handleOuterEvent",function(B){var E=vue(B),A=bs(O.props,"".concat(E));if(E&&Lt(A)){var R,F;/.*touch.*/i.test(E)?F=O.getMouseInfo(B.changedTouches[0]):F=O.getMouseInfo(B),A((R=F)!==null&&R!==void 0?R:{},B)}}),It(O,"handleClick",function(B){var E=O.getMouseInfo(B);if(E){var A=Pe(Pe({},E),{},{isTooltipActive:!0});O.setState(A),O.triggerSyncEvent(A);var R=O.props.onClick;Lt(R)&&R(A,B)}}),It(O,"handleMouseDown",function(B){var E=O.props.onMouseDown;if(Lt(E)){var A=O.getMouseInfo(B);E(A,B)}}),It(O,"handleMouseUp",function(B){var E=O.props.onMouseUp;if(Lt(E)){var A=O.getMouseInfo(B);E(A,B)}}),It(O,"handleTouchMove",function(B){B.changedTouches!=null&&B.changedTouches.length>0&&O.throttleTriggeredAfterMouseMove(B.changedTouches[0])}),It(O,"handleTouchStart",function(B){B.changedTouches!=null&&B.changedTouches.length>0&&O.handleMouseDown(B.changedTouches[0])}),It(O,"handleTouchEnd",function(B){B.changedTouches!=null&&B.changedTouches.length>0&&O.handleMouseUp(B.changedTouches[0])}),It(O,"handleDoubleClick",function(B){var E=O.props.onDoubleClick;if(Lt(E)){var A=O.getMouseInfo(B);E(A,B)}}),It(O,"handleContextMenu",function(B){var E=O.props.onContextMenu;if(Lt(E)){var A=O.getMouseInfo(B);E(A,B)}}),It(O,"triggerSyncEvent",function(B){O.props.syncId!==void 0&&_S.emit(SS,O.props.syncId,B,O.eventEmitterSymbol)}),It(O,"applySyncEvent",function(B){var E=O.props,A=E.layout,R=E.syncMethod,F=O.state.updateId,D=B.dataStartIndex,L=B.dataEndIndex;if(B.dataStartIndex!==void 0||B.dataEndIndex!==void 0)O.setState(Pe({dataStartIndex:D,dataEndIndex:L},b({props:O.props,dataStartIndex:D,dataEndIndex:L,updateId:F},O.state)));else if(B.activeTooltipIndex!==void 0){var M=B.chartX,Q=B.chartY,Z=B.activeTooltipIndex,W=O.state,ee=W.offset,Y=W.tooltipTicks;if(!ee)return;if(typeof R=="function")Z=R(Y,B);else if(R==="value"){Z=-1;for(var ye=0;ye<Y.length;ye++)if(Y[ye].value===B.activeLabel){Z=ye;break}}var oe=Pe(Pe({},ee),{},{x:ee.left,y:ee.top}),X=Math.min(M,oe.x+oe.width),ne=Math.min(Q,oe.y+oe.height),de=Y[Z]&&Y[Z].value,J=r7(O.state,O.props.data,Z),le=Y[Z]?{x:A==="horizontal"?Y[Z].coordinate:X,y:A==="horizontal"?ne:Y[Z].coordinate}:rW;O.setState(Pe(Pe({},B),{},{activeLabel:de,activeCoordinate:le,activePayload:J,activeTooltipIndex:Z}))}else O.setState(B)}),It(O,"renderCursor",function(B){var E,A=O.state,R=A.isTooltipActive,F=A.activeCoordinate,D=A.activePayload,L=A.offset,M=A.activeTooltipIndex,Q=A.tooltipAxisBandSize,Z=O.getTooltipEventType(),W=(E=B.props.active)!==null&&E!==void 0?E:R,ee=O.props.layout,Y=B.key||"_recharts-cursor";return ae.createElement(K5e,{key:Y,activeCoordinate:F,activePayload:D,activeTooltipIndex:M,chartName:r,element:B,isActive:W,layout:ee,offset:L,tooltipAxisBandSize:Q,tooltipEventType:Z})}),It(O,"renderPolarAxis",function(B,E,A){var R=bs(B,"type.axisType"),F=bs(O.state,"".concat(R,"Map")),D=B.type.defaultProps,L=D!==void 0?Pe(Pe({},D),B.props):B.props,M=F&&F[L["".concat(R,"Id")]];return V.cloneElement(B,Pe(Pe({},M),{},{className:Ht(R,M.className),key:B.key||"".concat(E,"-").concat(A),ticks:bl(M,!0)}))}),It(O,"renderPolarGrid",function(B){var E=B.props,A=E.radialLines,R=E.polarAngles,F=E.polarRadius,D=O.state,L=D.radiusAxisMap,M=D.angleAxisMap,Q=Dc(L),Z=Dc(M),W=Z.cx,ee=Z.cy,Y=Z.innerRadius,ye=Z.outerRadius;return V.cloneElement(B,{polarAngles:Array.isArray(R)?R:bl(Z,!0).map(function(oe){return oe.coordinate}),polarRadius:Array.isArray(F)?F:bl(Q,!0).map(function(oe){return oe.coordinate}),cx:W,cy:ee,innerRadius:Y,outerRadius:ye,key:B.key||"polar-grid",radialLines:A})}),It(O,"renderLegend",function(){var B=O.state.formattedGraphicalItems,E=O.props,A=E.children,R=E.width,F=E.height,D=O.props.margin||{},L=R-(D.left||0)-(D.right||0),M=MG({children:A,formattedGraphicalItems:B,legendWidth:L,legendContent:f});if(!M)return null;var Q=M.item,Z=OU(M,W5e);return V.cloneElement(Q,Pe(Pe({},Z),{},{chartWidth:R,chartHeight:F,margin:D,onBBoxUpdate:O.handleLegendBBoxUpdate}))}),It(O,"renderTooltip",function(){var B,E=O.props,A=E.children,R=E.accessibilityLayer,F=za(A,mo);if(!F)return null;var D=O.state,L=D.isTooltipActive,M=D.activeCoordinate,Q=D.activePayload,Z=D.activeLabel,W=D.offset,ee=(B=F.props.active)!==null&&B!==void 0?B:L;return V.cloneElement(F,{viewBox:Pe(Pe({},W),{},{x:W.left,y:W.top}),active:ee,label:Z,payload:ee?Q:[],coordinate:M,accessibilityLayer:R})}),It(O,"renderBrush",function(B){var E=O.props,A=E.margin,R=E.data,F=O.state,D=F.offset,L=F.dataStartIndex,M=F.dataEndIndex,Q=F.updateId;return V.cloneElement(B,{key:B.key||"_recharts-brush",onChange:qy(O.handleBrushChange,B.props.onChange),data:R,x:at(B.props.x)?B.props.x:D.left,y:at(B.props.y)?B.props.y:D.top+D.height+D.brushBottom-(A.bottom||0),width:at(B.props.width)?B.props.width:D.width,startIndex:L,endIndex:M,updateId:"brush-".concat(Q)})}),It(O,"renderReferenceElement",function(B,E,A){if(!B)return null;var R=O,F=R.clipPathId,D=O.state,L=D.xAxisMap,M=D.yAxisMap,Q=D.offset,Z=B.type.defaultProps||{},W=B.props,ee=W.xAxisId,Y=ee===void 0?Z.xAxisId:ee,ye=W.yAxisId,oe=ye===void 0?Z.yAxisId:ye;return V.cloneElement(B,{key:B.key||"".concat(E,"-").concat(A),xAxis:L[Y],yAxis:M[oe],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:F})}),It(O,"renderActivePoints",function(B){var E=B.item,A=B.activePoint,R=B.basePoint,F=B.childIndex,D=B.isRange,L=[],M=E.props.key,Q=E.item.type.defaultProps!==void 0?Pe(Pe({},E.item.type.defaultProps),E.item.props):E.item.props,Z=Q.activeDot,W=Q.dataKey,ee=Pe(Pe({index:F,dataKey:W,cx:A.x,cy:A.y,r:4,fill:WE(E.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Nt(Z,!1)),eb(Z));return L.push(N.renderActiveDot(Z,ee,"".concat(M,"-activePoint-").concat(F))),R?L.push(N.renderActiveDot(Z,Pe(Pe({},ee),{},{cx:R.x,cy:R.y}),"".concat(M,"-basePoint-").concat(F))):D&&L.push(null),L}),It(O,"renderGraphicChild",function(B,E,A){var R=O.filterFormatItem(B,E,A);if(!R)return null;var F=O.getTooltipEventType(),D=O.state,L=D.isTooltipActive,M=D.tooltipAxis,Q=D.activeTooltipIndex,Z=D.activeLabel,W=O.props.children,ee=za(W,mo),Y=R.props,ye=Y.points,oe=Y.isRange,X=Y.baseLine,ne=R.item.type.defaultProps!==void 0?Pe(Pe({},R.item.type.defaultProps),R.item.props):R.item.props,de=ne.activeDot,J=ne.hide,le=ne.activeBar,pe=ne.activeShape,be=!!(!J&&L&&ee&&(de||le||pe)),Je={};F!=="axis"&&ee&&ee.props.trigger==="click"?Je={onClick:qy(O.handleItemMouseEnter,B.props.onClick)}:F!=="axis"&&(Je={onMouseLeave:qy(O.handleItemMouseLeave,B.props.onMouseLeave),onMouseEnter:qy(O.handleItemMouseEnter,B.props.onMouseEnter)});var Ne=V.cloneElement(B,Pe(Pe({},R.props),Je));function ce(ze){return typeof M.dataKey=="function"?M.dataKey(ze.payload):null}if(be)if(Q>=0){var Ce,Ee;if(M.dataKey&&!M.allowDuplicatedCategory){var ct=typeof M.dataKey=="function"?ce:"payload.".concat(M.dataKey.toString());Ce=Jv(ye,ct,Z),Ee=oe&&X&&Jv(X,ct,Z)}else Ce=ye==null?void 0:ye[Q],Ee=oe&&X&&X[Q];if(pe||le){var Qe=B.props.activeIndex!==void 0?B.props.activeIndex:Q;return[V.cloneElement(B,Pe(Pe(Pe({},R.props),Je),{},{activeIndex:Qe})),null,null]}if(!Vt(Ce))return[Ne].concat(Yh(O.renderActivePoints({item:R,activePoint:Ce,basePoint:Ee,childIndex:Q,isRange:oe})))}else{var ut,dt=(ut=O.getItemByXY(O.state.activeCoordinate))!==null&&ut!==void 0?ut:{graphicalItem:Ne},Ut=dt.graphicalItem,Oe=Ut.item,st=Oe===void 0?B:Oe,yt=Ut.childIndex,he=Pe(Pe(Pe({},R.props),Je),{},{activeIndex:yt});return[V.cloneElement(st,he),null,null]}return oe?[Ne,null,null]:[Ne,null]}),It(O,"renderCustomized",function(B,E,A){return V.cloneElement(B,Pe(Pe({key:"recharts-customized-".concat(A)},O.props),O.state))}),It(O,"renderMap",{CartesianGrid:{handler:Xy,once:!0},ReferenceArea:{handler:O.renderReferenceElement},ReferenceLine:{handler:Xy},ReferenceDot:{handler:O.renderReferenceElement},XAxis:{handler:Xy},YAxis:{handler:Xy},Brush:{handler:O.renderBrush,once:!0},Bar:{handler:O.renderGraphicChild},Line:{handler:O.renderGraphicChild},Area:{handler:O.renderGraphicChild},Radar:{handler:O.renderGraphicChild},RadialBar:{handler:O.renderGraphicChild},Scatter:{handler:O.renderGraphicChild},Pie:{handler:O.renderGraphicChild},Funnel:{handler:O.renderGraphicChild},Tooltip:{handler:O.renderCursor,once:!0},PolarGrid:{handler:O.renderPolarGrid,once:!0},PolarAngleAxis:{handler:O.renderPolarAxis},PolarRadiusAxis:{handler:O.renderPolarAxis},Customized:{handler:O.renderCustomized}}),O.clipPathId="".concat((C=I.id)!==null&&C!==void 0?C:Dg("recharts"),"-clip"),O.throttleTriggeredAfterMouseMove=RH(O.triggeredAfterMouseMove,(z=I.throttleDelay)!==null&&z!==void 0?z:1e3/60),O.state={},O}return s3e(N,w),r3e(N,[{key:"componentDidMount",value:function(){var C,z;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(z=this.props.margin.top)!==null&&z!==void 0?z:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,z=C.children,O=C.data,B=C.height,E=C.layout,A=za(z,mo);if(A){var R=A.props.defaultIndex;if(!(typeof R!="number"||R<0||R>this.state.tooltipTicks.length-1)){var F=this.state.tooltipTicks[R]&&this.state.tooltipTicks[R].value,D=r7(this.state,O,R,F),L=this.state.tooltipTicks[R].coordinate,M=(this.state.offset.top+B)/2,Q=E==="horizontal",Z=Q?{x:L,y:M}:{y:L,x:M},W=this.state.formattedGraphicalItems.find(function(Y){var ye=Y.item;return ye.type.name==="Scatter"});W&&(Z=Pe(Pe({},Z),W.props.points[R].tooltipPosition),D=W.props.points[R].tooltipPayload);var ee={activeTooltipIndex:R,isTooltipActive:!0,activeLabel:F,activePayload:D,activeCoordinate:Z};this.setState(ee),this.renderCursor(A),this.accessibilityManager.setIndex(R)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,z){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==z.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var O,B;this.accessibilityManager.setDetails({offset:{left:(O=this.props.margin.left)!==null&&O!==void 0?O:0,top:(B=this.props.margin.top)!==null&&B!==void 0?B:0}})}return null}},{key:"componentDidUpdate",value:function(C){DT([za(C.children,mo)],[za(this.props.children,mo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=za(this.props.children,mo);if(C&&typeof C.props.shared=="boolean"){var z=C.props.shared?"axis":"item";return c.indexOf(z)>=0?z:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var z=this.container,O=z.getBoundingClientRect(),B=afe(O),E={chartX:Math.round(C.pageX-B.left),chartY:Math.round(C.pageY-B.top)},A=O.width/z.offsetWidth||1,R=this.inRange(E.chartX,E.chartY,A);if(!R)return null;var F=this.state,D=F.xAxisMap,L=F.yAxisMap,M=this.getTooltipEventType(),Q=RU(this.state,this.props.data,this.props.layout,R);if(M!=="axis"&&D&&L){var Z=Dc(D).scale,W=Dc(L).scale,ee=Z&&Z.invert?Z.invert(E.chartX):null,Y=W&&W.invert?W.invert(E.chartY):null;return Pe(Pe({},E),{},{xValue:ee,yValue:Y},Q)}return Q?Pe(Pe({},E),Q):null}},{key:"inRange",value:function(C,z){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,B=this.props.layout,E=C/O,A=z/O;if(B==="horizontal"||B==="vertical"){var R=this.state.offset,F=E>=R.left&&E<=R.left+R.width&&A>=R.top&&A<=R.top+R.height;return F?{x:E,y:A}:null}var D=this.state,L=D.angleAxisMap,M=D.radiusAxisMap;if(L&&M){var Q=Dc(L);return DL({x:E,y:A},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,z=this.getTooltipEventType(),O=za(C,mo),B={};O&&z==="axis"&&(O.props.trigger==="click"?B={onClick:this.handleClick}:B={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=eb(this.props,this.handleOuterEvent);return Pe(Pe({},E),B)}},{key:"addListener",value:function(){_S.on(SS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){_S.removeListener(SS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,z,O){for(var B=this.state.formattedGraphicalItems,E=0,A=B.length;E<A;E++){var R=B[E];if(R.item===C||R.props.key===C.key||z===Sl(R.item.type)&&O===R.childIndex)return R}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,z=this.state.offset,O=z.left,B=z.top,E=z.height,A=z.width;return ae.createElement("defs",null,ae.createElement("clipPath",{id:C},ae.createElement("rect",{x:O,y:B,height:E,width:A})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(z,O){var B=CU(O,2),E=B[0],A=B[1];return Pe(Pe({},z),{},It({},E,A.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(z,O){var B=CU(O,2),E=B[0],A=B[1];return Pe(Pe({},z),{},It({},E,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var z;return(z=this.state.xAxisMap)===null||z===void 0||(z=z[C])===null||z===void 0?void 0:z.scale}},{key:"getYScaleByAxisId",value:function(C){var z;return(z=this.state.yAxisMap)===null||z===void 0||(z=z[C])===null||z===void 0?void 0:z.scale}},{key:"getItemByXY",value:function(C){var z=this.state,O=z.formattedGraphicalItems,B=z.activeItem;if(O&&O.length)for(var E=0,A=O.length;E<A;E++){var R=O[E],F=R.props,D=R.item,L=D.type.defaultProps!==void 0?Pe(Pe({},D.type.defaultProps),D.props):D.props,M=Sl(D.type);if(M==="Bar"){var Q=(F.data||[]).find(function(Y){return Ebe(C,Y)});if(Q)return{graphicalItem:R,payload:Q}}else if(M==="RadialBar"){var Z=(F.data||[]).find(function(Y){return DL(C,Y)});if(Z)return{graphicalItem:R,payload:Z}}else if(m2(R,B)||p2(R,B)||ag(R,B)){var W=a2e({graphicalItem:R,activeTooltipItem:B,itemData:L.data}),ee=L.activeIndex===void 0?W:L.activeIndex;return{graphicalItem:Pe(Pe({},R),{},{childIndex:ee}),payload:ag(R,B)?L.data[W]:R.props.data[W]}}}return null}},{key:"render",value:function(){var C=this;if(!KR(this))return null;var z=this.props,O=z.children,B=z.className,E=z.width,A=z.height,R=z.style,F=z.compact,D=z.title,L=z.desc,M=OU(z,X5e),Q=Nt(M,!1);if(F)return ae.createElement(hU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement(BT,Xd({},Q,{width:E,height:A,title:D,desc:L}),this.renderClipPath(),XR(O,this.renderMap)));if(this.props.accessibilityLayer){var Z,W;Q.tabIndex=(Z=this.props.tabIndex)!==null&&Z!==void 0?Z:0,Q.role=(W=this.props.role)!==null&&W!==void 0?W:"application",Q.onKeyDown=function(Y){C.accessibilityManager.keyboardEvent(Y)},Q.onFocus=function(){C.accessibilityManager.focus()}}var ee=this.parseEventsOfWrapper();return ae.createElement(hU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ae.createElement("div",Xd({className:Ht("recharts-wrapper",B),style:Pe({position:"relative",cursor:"default",width:E,height:A},R)},ee,{ref:function(ye){C.container=ye}}),ae.createElement(BT,Xd({},Q,{width:E,height:A,title:D,desc:L,style:h3e}),this.renderClipPath(),XR(O,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(V.Component);It(T,"displayName",r),It(T,"defaultProps",Pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),It(T,"getDerivedStateFromProps",function(w,N){var I=w.dataKey,C=w.data,z=w.children,O=w.width,B=w.height,E=w.layout,A=w.stackOffset,R=w.margin,F=N.dataStartIndex,D=N.dataEndIndex;if(N.updateId===void 0){var L=MU(w);return Pe(Pe(Pe({},L),{},{updateId:0},b(Pe(Pe({props:w},L),{},{updateId:0}),N)),{},{prevDataKey:I,prevData:C,prevWidth:O,prevHeight:B,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:z})}if(I!==N.prevDataKey||C!==N.prevData||O!==N.prevWidth||B!==N.prevHeight||E!==N.prevLayout||A!==N.prevStackOffset||!nh(R,N.prevMargin)){var M=MU(w),Q={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Z=Pe(Pe({},RU(N,C,E)),{},{updateId:N.updateId+1}),W=Pe(Pe(Pe({},M),Q),Z);return Pe(Pe(Pe({},W),b(Pe({props:w},W),N)),{},{prevDataKey:I,prevData:C,prevWidth:O,prevHeight:B,prevLayout:E,prevStackOffset:A,prevMargin:R,prevChildren:z})}if(!DT(z,N.prevChildren)){var ee,Y,ye,oe,X=za(z,zh),ne=X&&(ee=(Y=X.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&ee!==void 0?ee:F,de=X&&(ye=(oe=X.props)===null||oe===void 0?void 0:oe.endIndex)!==null&&ye!==void 0?ye:D,J=ne!==F||de!==D,le=!Vt(C),pe=le&&!J?N.updateId:N.updateId+1;return Pe(Pe({updateId:pe},b(Pe(Pe({props:w},N),{},{updateId:pe,dataStartIndex:ne,dataEndIndex:de}),N)),{},{prevChildren:z,dataStartIndex:ne,dataEndIndex:de})}return null}),It(T,"renderActiveDot",function(w,N,I){var C;return V.isValidElement(w)?C=V.cloneElement(w,N):Lt(w)?C=w(N):C=ae.createElement(d2,N),ae.createElement(vr,{className:"recharts-active-dot",key:I},C)});var S=V.forwardRef(function(N,I){return ae.createElement(T,Xd({},N,{ref:I}))});return S.displayName=T.displayName,S},_3e=iW({chartName:"RadarChart",GraphicalChild:Gg,axisComponents:[{axisType:"angleAxis",AxisComp:Hg},{axisType:"radiusAxis",AxisComp:qg}],formatAxisMap:B1e,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),S3e=iW({chartName:"ScatterChart",GraphicalChild:Wg,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:_2},{axisType:"yAxis",AxisComp:S2},{axisType:"zAxis",AxisComp:w2}],formatAxisMap:p4e});function DU(t,e=800){const[r,n]=V.useState(t),i=V.useRef(t),a=V.useRef(0);return V.useEffect(()=>{const s=i.current,c=t;if(i.current=t,s===c)return;const d=performance.now(),f=c-s,m=p=>{const y=p-d,b=Math.min(y/e,1),T=1-Math.pow(1-b,3);n(Math.round(s+f*T)),b<1&&(a.current=requestAnimationFrame(m))};return a.current=requestAnimationFrame(m),()=>cancelAnimationFrame(a.current)},[t,e]),r}const aW=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],sW=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],T3e=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],LU={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},Bd=t=>t?LU[t.rarity]||LU.COMMON:null,A3e=(t,e)=>{const n=100-e,i=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${i} 30 ${i-2} 40 Q${i-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${i+3} 22 ${i+1} 46 Q${i-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${i+2} 24 ${i} 46 Q${i-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${i+3} 44 Q${i+6} 55 ${i+4} 85 Q${i+2} 92 ${i-4} 88 L${i-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${i+1} 26 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${i+1} 28 ${i} 44 Q${i-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},ex=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:i})=>{const a=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",c=s==="B",d=s==="C",f=aW[(e==null?void 0:e.skinTone)??0],m=sW[(e==null?void 0:e.hairColor)??0],p=(e==null?void 0:e.hairStyle)??1,y=f+"99",b=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,N=t==null?void 0:t.BELT,I=t==null?void 0:t.AMULET,C=V.useMemo(()=>[b,T,S,w,N,I].filter(Boolean).length,[b,T,S,w,N,I]),z=V.useMemo(()=>[b,T,S,w,N,I].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[b,T,S,w,N,I]),O=Math.min(1,.2+C*.13),B=c?23:21,E=V.useMemo(()=>A3e(p,B),[p,B]);return u.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[u.jsxs("defs",{children:[u.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[u.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[u.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[u.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),u.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 20%, 20%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 18%, 12%)`})]}),u.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsla(${a+240}, 30%, 35%, 0.2)`}),u.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),u.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 15%, 16%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 12%, 10%)`})]}),u.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[u.jsx("stop",{offset:"0%",stopColor:f}),u.jsx("stop",{offset:"100%",stopColor:y})]}),u.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 100%, 70%)`,stopOpacity:O}),u.jsx("stop",{offset:"60%",stopColor:`hsl(${a+200}, 80%, 50%)`,stopOpacity:O*.3}),u.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),u.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:m}),u.jsx("stop",{offset:"100%",stopColor:m+"cc"})]})]}),u.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:u.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),u.jsxs("g",{children:[u.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&u.jsxs("g",{filter:"url(#av-bloom)",children:[u.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),u.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),u.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),u.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${a+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=Bd(w);return u.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),u.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),u.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),u.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():u.jsxs("g",{children:[u.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"}),u.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${a+240},12%,14%)`,stroke:`hsl(${a+240},10%,20%)`,strokeWidth:"0.5"})]}),u.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"1"}),u.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),u.jsx("path",{d:"M88 88 L100 105 L112 88",fill:f}),u.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${a+240},20%,28%)`,strokeWidth:"1.2"}),u.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${a+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=Bd(T);return u.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),u.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),u.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),u.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),u.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),u.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),u.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&u.jsxs("g",{children:[u.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),N?(()=>{const A=Bd(N);return u.jsxs("g",{children:[u.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),u.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),u.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),u.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():u.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${a+240},15%,25%)`,strokeWidth:"1.5"}),u.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),u.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${a+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const A=Bd(S);return u.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[u.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),u.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),u.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),u.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():u.jsxs("g",{children:[u.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:f}),u.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:f})]}),C>0&&u.jsxs(u.Fragment,{children:[u.jsx("g",{filter:"url(#av-bloom)",children:u.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:u.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),u.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${a+180},100%,75%)`,fillOpacity:O*.7,children:u.jsx("animate",{attributeName:"fillOpacity",values:`${O*.7};${O*.3};${O*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),C>=3&&u.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${a+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),u.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:f}),I&&(()=>{const A=Bd(I);return u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),u.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:u.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:u.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),u.jsxs("g",{children:[E.back&&u.jsx("path",{d:E.back,fill:"url(#av-hair)",opacity:"0.8"}),u.jsx("ellipse",{cx:"100",cy:"50",rx:B,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),u.jsx("ellipse",{cx:100-B-1,cy:"52",rx:"4",ry:"6",fill:f,stroke:y,strokeWidth:"0.3"}),u.jsx("ellipse",{cx:100+B+1,cy:"52",rx:"4",ry:"6",fill:f,stroke:y,strokeWidth:"0.3"}),u.jsxs("g",{children:[u.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:m,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),u.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:m,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),u.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),u.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),u.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),u.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${a+180},70%,45%)`}),u.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),u.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),u.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),u.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),u.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:f,children:u.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:f,children:u.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),u.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),u.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),u.jsx("path",{d:E.main,fill:"url(#av-hair)"}),E.accent&&u.jsx("path",{d:E.accent,fill:"url(#av-hair)",opacity:"0.9"}),b&&(()=>{const A=Bd(b),R=b.visualId||"";return u.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:R.includes("helm")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:`M${100-B-2} 28 Q100 10 ${100+B+2} 28 L${100+B+4} 62 Q100 72 ${100-B-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),u.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${a+180},90%,55%)`,fillOpacity:"0.85",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):R.includes("visor")?u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${a+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),u.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),u.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),u.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),u.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&u.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,R)=>u.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+R*.2}s`,repeatCount:"indefinite"})},R))]}),z&&u.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,R)=>{const F=A*Math.PI/180,D=100+Math.cos(F)*50,L=145+Math.sin(F)*75;return u.jsxs("circle",{cx:D,cy:L,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[u.jsx("animate",{attributeName:"cy",values:`${L};${L-18};${L}`,dur:`${2+R*.3}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+R*.3}s`,repeatCount:"indefinite"})]},R)})}),r>=5&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),u.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${a+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,R)=>{const F=R*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),D=100+Math.cos(F)*(38+R*3),L=140+Math.sin(F)*(55+R*2),M=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${a+180},70%,60%)`;return u.jsxs("circle",{cx:D,cy:L,r:"1",fill:M,fillOpacity:"0.35",children:[u.jsx("animate",{attributeName:"cy",values:`${L};${L-12};${L}`,dur:`${2+R*.4}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+R*.4}s`,repeatCount:"indefinite"})]},R)})}),n&&i&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,R)=>{const F=60+Math.random()*80,D=20+Math.random()*260;return u.jsxs("circle",{cx:F,cy:D,r:1+Math.random(),fill:i,fillOpacity:"0.45",children:[u.jsx("animate",{attributeName:"cy",values:`${D};${D-25};${D}`,dur:`${3+R*.5}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+R*.5}s`,repeatCount:"indefinite"})]},`c-${R}`)})})]})]})},aN=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],E3e=t=>aN.filter(e=>!e.isSecret||t.includes(e.id)),N3e={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},oW=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],BU=(t,e)=>{const r=oW.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},j3e=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],lW=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of j3e){const i=n.itemIds.filter(s=>r.includes(s)).length,a=n.bonuses.filter(s=>i>=s.count).sort((s,c)=>c.count-s.count);a.length>0&&e.push({set:n,activeBonus:a[0]})}return e},k3e=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],UU=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],cW=t=>[...UU].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||UU[0],C3e=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,O3e={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},I3e=({unlockedAchievements:t,achievementProgress:e})=>{const r=V.useMemo(()=>E3e(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],i=t.length,a=aN.filter(s=>!s.isSecret).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(j0,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),u.jsxs("span",{className:"text-sm text-gray-400",children:[i,"/",a," unlocked"]})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${i/a*100}%`}})}),n.map(s=>{const c=r.filter(f=>f.category===s);if(c.length===0)return null;const d=O3e[s];return u.jsxs("div",{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[u.jsx("span",{children:d.icon})," ",d.label]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(f=>{const m=t.includes(f.id),p=e[f.id]||0,y=Math.min(100,p/f.condition.target*100);return u.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${m?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[u.jsx("span",{className:`text-2xl ${m?"":"grayscale opacity-40"}`,children:f.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-sm font-bold ${m?"text-yellow-400":"text-gray-400"}`,children:f.title}),f.isSecret&&!m&&u.jsx(Tp,{className:"w-3 h-3 text-gray-600"})]}),u.jsx("p",{className:"text-[10px] text-gray-500",children:f.description}),!m&&u.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[p,"/",f.condition.target]})]})]}),m&&u.jsxs("div",{className:"text-right shrink-0",children:[u.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",f.xpReward," XP"]}),f.fluxReward&&u.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",f.fluxReward," Flux"]})]})]},f.id)})})]},s)})]})},R3e={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},M3e=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,i]=V.useState(t||null),[a,s]=V.useState(null),c=Vi(),d=!!t,f=n||"THEORIST",m=oW.filter(b=>b.specialization===f),p=[1,2,3,4],y=async b=>{if(!a){s(b);try{await Fe.unlockSkill(b,f),Si.skillUnlock(),c.success("Skill unlocked!")}catch(T){c.error(T instanceof Error?T.message:"Failed to unlock")}s(null)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[u.jsx(Hn,{className:"w-4 h-4 text-yellow-400"}),u.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(N3e).map(([b,T])=>{const S=f===b,w=d&&t!==b;return u.jsxs("button",{onClick:()=>!w&&i(b),disabled:w,className:`p-3 rounded-xl border text-left transition-all ${S?`border-white/30 bg-gradient-to-br ${R3e[b]} bg-opacity-10`:w?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:T.icon}),u.jsx("span",{className:"font-bold text-sm text-white",children:T.name}),w&&u.jsx(Tp,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:T.description})]},b)})}),u.jsx("div",{className:"space-y-4",children:p.map(b=>{const T=m.filter(S=>S.tier===b);return u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",b]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(S=>{const w=r.includes(S.id),N=d&&!w&&BU(S.id,r)&&e>=S.cost,I=BU(S.id,r);return u.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${w?"border-green-500/30 bg-green-500/10":N?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>N&&y(S.id),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:S.icon}),u.jsx("span",{className:"text-xs font-bold text-white truncate",children:S.name}),w&&u.jsx(Tn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!w&&!I&&u.jsx(Tp,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400",children:S.description}),!w&&u.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",S.cost," SP"]}),a===S.id&&u.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},S.id)})})]},b)})})]})},AS=25,Qy=k3e,P3e=({currency:t,lastSpin:e,classType:r})=>{const[n,i]=V.useState(!1),[a,s]=V.useState(0),[c,d]=V.useState(null),f=V.useRef(null),m=Vi(),p=new Date().toISOString().split("T")[0],y=e===p,b=!y&&t>=AS&&!n,T=async()=>{if(b){i(!0),d(null),Si.wheelSpin();try{const N=await Fe.spinFortuneWheel(r),I=Qy.findIndex(O=>O.id===N.prizeId),C=360/Qy.length,z=360*5+(360-I*C-C/2);s(O=>O+z),setTimeout(()=>{Si.wheelPrize(),d(N.rewardDescription),i(!1),N.prizeType!=="NOTHING"?m.success(`You won: ${N.rewardDescription}!`):m.info(N.rewardDescription)},4e3)}catch(N){i(!1),m.error(N instanceof Error?N.message:"Spin failed")}}},S=360/Qy.length,w=140;return u.jsxs("div",{className:"flex flex-col items-center gap-6",children:[u.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",AS," Flux for a daily spin"]}),u.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[u.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),u.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:u.jsxs("g",{style:{transform:`rotate(${a}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:f,children:[Qy.map((N,I)=>{const C=(I*S-90)*(Math.PI/180),z=((I+1)*S-90)*(Math.PI/180),O=w*Math.cos(C),B=w*Math.sin(C),E=w*Math.cos(z),A=w*Math.sin(z),R=S>180?1:0,F=((I+.5)*S-90)*(Math.PI/180),D=w*.65*Math.cos(F),L=w*.65*Math.sin(F),M=(I+.5)*S;return u.jsxs("g",{children:[u.jsx("path",{d:`M0,0 L${O},${B} A${w},${w} 0 ${R},1 ${E},${A} Z`,fill:N.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),u.jsx("text",{x:D,y:L,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${M}, ${D}, ${L})`,children:N.label})]},N.id)}),u.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),u.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&u.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[u.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),u.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),u.jsx("button",{onClick:T,disabled:!b,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${b?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${AS} Flux)`})]})},D3e=({userId:t,userName:e,classType:r})=>{const[n,i]=V.useState([]),[a,s]=V.useState(null),[c,d]=V.useState(null),f=Vi();V.useEffect(()=>{let p;try{p=Fe.subscribeToBossEncounters(y=>{const b=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");i(b)})}catch{}return()=>p==null?void 0:p()},[r]);const m=async p=>{if(!a){s(p);try{const y=5+Math.floor(Math.random()*20),b=await Fe.dealBossDamage(p,y,e);Si.bossHit(),d({bossId:p,damage:b.damageDealt}),setTimeout(()=>d(null),1500),b.bossDefeated?(Si.bossDefeated(),f.success("Boss defeated! Rewards incoming!")):f.info(`Dealt ${b.damageDealt} damage! (+${b.xpEarned} XP)`)}catch(y){f.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[u.jsx(tse,{className:"w-5 h-5"})," Active Threats"]}),n.map(p=>{var C;const y=p.currentHp/p.maxHp*100,b=new Date(p.deadline).getTime()-Date.now(),T=Math.max(0,Math.floor(b/36e5)),S=[...p.damageLog||[]].reduce((z,O)=>(z[O.userId]||(z[O.userId]={name:O.userName,total:0}),z[O.userId].total+=O.damage,z),{}),w=Object.entries(S).sort(([,z],[,O])=>O.total-z.total).slice(0,5),N=((C=S[t])==null?void 0:C.total)||0,I=(c==null?void 0:c.bossId)===p.id;return u.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[I&&u.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),u.jsxs("div",{className:"p-5 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-black text-red-400",children:p.name}),u.jsx("p",{className:"text-xs text-gray-500",children:p.description})]}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[u.jsx(xs,{className:"w-3 h-3"}),T>0?`${T}h left`:"Expiring soon"]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[p.currentHp.toLocaleString()," HP"]}),u.jsx("span",{className:"text-gray-600",children:p.maxHp.toLocaleString()})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:u.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${y>50?"bg-gradient-to-r from-red-600 to-red-500":y>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${y}%`}})})]}),I&&c&&u.jsx("div",{className:"text-center animate-bounce",children:u.jsxs("span",{className:"text-xl font-black text-red-400",children:["-",c.damage]})}),N>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[u.jsx(vs,{className:"w-3 h-3"}),"Your total damage: ",u.jsx("span",{className:"text-white font-bold",children:N})]}),w.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[u.jsx(tu,{className:"w-3 h-3"})," Top Attackers"]}),w.map(([z,O],B)=>u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:`${z===t?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",B+1," ",O.name]}),u.jsxs("span",{className:"text-red-400 font-mono",children:[O.total," dmg"]})]},z))]}),u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Hn,{className:"w-3 h-3 text-yellow-400"})," ",p.completionRewards.xp," XP"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-cyan-400",children:"~"})," ",p.completionRewards.flux," Flux"]}),p.completionRewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[p.completionRewards.itemRarity," item"]})]}),u.jsx("button",{onClick:()=>m(p.id),disabled:!!a,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all ${a===p.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:a===p.id?"Attacking...":"Attack!"})]})]},p.id)})]})},L3e=({classType:t})=>{const[e,r]=V.useState([]),[n,i]=V.useState(0),[a,s]=V.useState(null),[c,d]=V.useState(null),[f,m]=V.useState(!1),p=Vi();V.useEffect(()=>{let b;try{b=Fe.subscribeToBossQuizzes(t,r)}catch{}return()=>b==null?void 0:b()},[t]);const y=async(b,T,S)=>{if(!f){m(!0),s(S);try{const w=await Fe.answerBossQuiz(b,T,S);w.alreadyAnswered?p.info("Already answered this question!"):w.correct?(Si.bossHit(),p.success(`Correct! Dealt ${w.damage} damage!`)):p.error("Incorrect. No damage dealt."),d({correct:w.correct,damage:w.damage}),setTimeout(()=>{i(N=>N+1),s(null),d(null)},2e3)}catch(w){p.error(w instanceof Error?w.message:"Failed to submit answer")}m(!1)}};return e.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[u.jsx(xh,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),e.map(b=>{const T=b.currentHp/b.maxHp*100,S=b.questions[n%b.questions.length],w=n>=b.questions.length;return u.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-base font-black text-amber-400",children:b.bossName}),u.jsx("p",{className:"text-xs text-gray-500",children:b.description})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[b.currentHp," HP"]}),u.jsx("span",{className:"text-gray-600",children:b.maxHp})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:u.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${T}%`}})})]}),w?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Tn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):S?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("span",{children:["Question ",n+1," / ",b.questions.length]}),u.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${S.difficulty==="HARD"?"bg-red-500/20 text-red-400":S.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[S.difficulty,S.damageBonus?` (+${S.damageBonus} dmg)`:""]})]}),u.jsx("p",{className:"text-sm text-white font-medium",children:S.stem}),u.jsx("div",{className:"space-y-2",children:S.options.map((N,I)=>{const C=a===I,z=c&&C,O=c==null?void 0:c.correct;return u.jsx("button",{onClick:()=>y(b.id,S.id,I),disabled:f||!!c,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${z&&O?"border-green-500/50 bg-green-500/10 text-green-400":z&&!O?"border-red-500/50 bg-red-500/10 text-red-400":C?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+I),"."]}),u.jsx("span",{children:N}),z&&O&&u.jsx(Tn,{className:"w-4 h-4 text-green-400 ml-auto"}),z&&!O&&u.jsx(_p,{className:"w-4 h-4 text-red-400 ml-auto"})]})},I)})}),c&&c.correct&&u.jsxs("div",{className:"text-center text-sm text-amber-400 font-bold animate-bounce",children:[u.jsx(Hn,{className:"w-4 h-4 inline mr-1"}),"-",c.damage," HP!"]})]}):null,u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsx("span",{children:"Defeat rewards:"}),u.jsxs("span",{className:"text-yellow-400",children:[b.rewards.xp," XP"]}),u.jsxs("span",{className:"text-cyan-400",children:[b.rewards.flux," Flux"]}),b.rewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[b.rewards.itemRarity," item"]})]})]},b.id)})]})},B3e=({activeChallenges:t,classType:e})=>{const[r,n]=V.useState([]),[i,a]=V.useState(null),s=Vi();V.useEffect(()=>{let y;try{y=Fe.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(b=>b.challengeId===y),d=async y=>{if(!i){a(y);try{const b=await Fe.claimDailyChallenge(y,e);Si.dailyReward(),s.success(`Claimed! +${b.xpReward} XP${b.fluxReward?` +${b.fluxReward} Flux`:""}`)}catch(b){s.error(b instanceof Error?b.message:"Claim failed")}a(null)}};if(r.length===0)return null;const f=r.filter(y=>!y.isWeekly),m=r.filter(y=>y.isWeekly),p=y=>{const b=c(y.id),T=(b==null?void 0:b.progress)||0,S=(b==null?void 0:b.completed)||!1,w=!!(b!=null&&b.claimedAt),N=Math.min(100,T/y.target*100);return u.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?u.jsx(Tn,{className:"w-4 h-4 text-green-400"}):S?u.jsx(Mae,{className:"w-4 h-4 text-yellow-400"}):u.jsx(jo,{className:"w-4 h-4 text-gray-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&u.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),u.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${N}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&u.jsx("button",{onClick:()=>d(y.id),disabled:!!i,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:i===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(Tae,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),u.jsx("div",{className:"space-y-2",children:f.map(p)}),m.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[u.jsx(Hn,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),u.jsx("div",{className:"space-y-2",children:m.map(p)})]})]})},ES={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},U3e=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[i,a]=V.useState([]),[s,c]=V.useState(!1),[d,f]=V.useState(""),[m,p]=V.useState(!1),y=Vi();V.useEffect(()=>{let C;try{C=Fe.subscribeToTutoringSessions(r,a)}catch{}return()=>C==null?void 0:C()},[r]);const b=async()=>{if(!(!d.trim()||m)){p(!0);try{await Fe.createTutoringRequest(t,e,d,r),y.success("Tutoring request posted!"),f(""),c(!1)}catch{y.error("Failed to create request")}p(!1)}},T=async C=>{try{await Fe.claimTutorRole(C,t,e),y.success("You are now the tutor for this session!")}catch{y.error("Failed to claim tutor role")}},S=async(C,z)=>{try{const O=await Fe.completeTutoring(C,z);y.success(`Verified! Tutor earned ${O.xpAwarded} XP and ${O.fluxAwarded} Flux`)}catch{y.error("Failed to verify session")}},w=i.filter(C=>C.status==="OPEN"),N=i.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),I=i.filter(C=>["COMPLETED","VERIFIED"].includes(C.status));return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(wh,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),u.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[u.jsx(Ol,{className:"w-3 h-3"})," Request Help"]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[u.jsx("input",{value:d,onChange:C=>f(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:b,disabled:!d.trim()||m,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:m?"Posting...":"Post Request"}),u.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),w.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(fv,{className:"w-3 h-3"})," Open Requests"]}),w.map(C=>u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${ES[C.status]}`,children:C.status})]}),C.requesterId!==t&&u.jsxs("button",{onClick:()=>T(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[u.jsx(tu,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),N.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(xs,{className:"w-3 h-3"})," Active Sessions"]}),N.map(C=>u.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${ES[C.status]} mt-1 inline-block`,children:C.status}),n&&C.tutorId&&C.status!=="VERIFIED"&&u.jsxs("button",{onClick:()=>S(C.id,C.tutorId),className:"mt-2 ml-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[u.jsx(Tn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),I.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(Tn,{className:"w-3 h-3 text-green-400"})," Completed (",I.length,")"]}),I.slice(0,3).map(C=>u.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${ES[C.status]}`,children:C.status})]},C.id))]}),i.length===0&&u.jsxs("div",{className:"text-center py-6 text-gray-600",children:[u.jsx(wh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),u.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},z3e=({item:t,onClose:e})=>{const[r,n]=V.useState("chest"),i=Xr(t.rarity);V.useEffect(()=>{Si.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const a={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:u.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&u.jsxs("div",{className:"animate-in zoom-in duration-500",children:[u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),u.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),u.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[u.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),u.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&u.jsx("div",{className:"animate-in zoom-in duration-300",children:u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[u.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>u.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[u.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&u.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[u.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${i.border} ${i.bg} shadow-2xl ${a[t.rarity]}`,children:[u.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${i.text} mb-2`,children:t.rarity}),u.jsx("h3",{className:`text-lg font-black ${i.text}`,children:t.name}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),u.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>u.jsxs("div",{className:"flex justify-between text-xs",children:[u.jsx("span",{className:"text-gray-400 capitalize",children:s}),u.jsxs("span",{className:`font-bold ${i.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&u.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>u.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&u.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&u.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>u.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),u.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},$3e=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],V3e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],F3e=({user:t,classType:e,onClose:r})=>{var B,E,A;const[n,i]=ae.useState(!1),a=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=a.level||1,c=Sh(s),d=cW(s),{equipped:f,appearance:m}=k0(t,e),p=tE({gamification:{...a,equipped:f}}),y=Th(f),b=((B=a.classXp)==null?void 0:B[e])||0,T=(E=t.settings)==null?void 0:E.privacyMode,S=T?a.codename||"Unknown Agent":t.name,w=Object.values(f).filter(Boolean),N=lW(w),I=a.unlockedAchievements||[],C=V.useMemo(()=>aN.filter(R=>I.includes(R.id)),[I]),z=Math.max(p.tech,p.focus,p.analysis,p.charisma,1),O=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(m==null?void 0:m.hue)||180}, 70%, 30%), transparent 70%)`}}),u.jsxs("div",{className:"relative flex items-center gap-6",children:[u.jsx("div",{className:"w-32 h-44 shrink-0",children:u.jsx(ex,{equipped:f,appearance:m})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),u.jsx("button",{onClick:O,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?u.jsx(Cg,{className:"w-4 h-4 text-green-400"}):u.jsx(vT,{className:"w-4 h-4"})})]}),u.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),u.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),u.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:b.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-xl font-black text-orange-400",children:[a.engagementStreak||0,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-purple-400",children:I.length}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),a.specialization&&u.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:u.jsx("span",{className:"text-xs text-gray-300 font-bold",children:a.specialization})})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(jo,{className:"w-3 h-3"})," Combat Stats"]}),u.jsx("div",{className:"space-y-2",children:$3e.map(({key:R,label:F,color:D,bg:L})=>{const M=p[R]||0,Q=M/z*100;return u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-xs text-gray-400",children:F}),u.jsx("span",{className:`text-xs font-bold ${D}`,children:M})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full ${L} transition-all`,style:{width:`${Q}%`}})})]},R)})})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(vs,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"space-y-1.5",children:V3e.map(R=>{const F=f[R];if(!F)return u.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[u.jsx("span",{className:"font-mono w-12 text-[10px]",children:R}),u.jsx("span",{className:"italic",children:"Empty"})]},R);const D=Xr(F.rarity);return u.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${D.border} ${D.bg}`,children:[u.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:R}),u.jsx("span",{className:`text-xs font-bold truncate ${D.text}`,children:F.name})]},R)})})]}),N.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[u.jsx(R8,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),N.map(({set:R,activeBonus:F})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[u.jsx("span",{className:"text-purple-400 font-bold",children:R.name}),u.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",F.label]})]},R.id))]})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(j0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",I.length,")"]}),C.length>0?u.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.slice(0,12).map(R=>u.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[u.jsx("div",{className:"text-xl",children:R.icon}),u.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:R.title})]},R.id))}):u.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(O8,{className:"w-3.5 h-3.5 text-orange-400"}),u.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),u.jsxs("span",{className:"text-orange-400 font-bold",children:[a.engagementStreak||0," weeks"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(rse,{className:"w-3.5 h-3.5 text-red-400"}),u.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),u.jsx("span",{className:"text-red-400 font-bold",children:((A=a.completedQuests)==null?void 0:A.length)||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(wh,{className:"w-3.5 h-3.5 text-green-400"}),u.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),u.jsx("span",{className:"text-green-400 font-bold",children:a.tutoringSessionsCompleted||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(Hn,{className:"w-3.5 h-3.5 text-cyan-400"}),u.jsx("span",{className:"text-gray-400",children:"Total XP:"}),u.jsx("span",{className:"text-cyan-400 font-bold",children:(a.xp||0).toLocaleString()})]})]})]})]})]})]})})},q3e={Textbook:u.jsx(Xs,{className:"w-5 h-5"}),Simulation:u.jsx(NF,{className:"w-5 h-5 fill-current"}),"Lab Guide":u.jsx(Ix,{className:"w-5 h-5"}),"Practice Set":u.jsx(jo,{className:"w-5 h-5"}),Article:u.jsx(AF,{className:"w-5 h-5"}),"Video Lesson":u.jsx(CF,{className:"w-5 h-5"}),Supplemental:u.jsx(I8,{className:"w-5 h-5"})};let Ud=0,NS=!1,jS=!1,zU="";const H3e=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:i,onStartAssignment:a,studentTab:s="RESOURCES"})=>{var un,to,Oi,Gi,ro,kn,mi,no,Ii,Er,Gr,dn,oa,Ri,io,js,la,pt,ue,qe,rt,Dt,Yt,Kr,Nr,Wr,hr,ao,ks;const c=Vi(),{confirm:d}=uu(),[f,m]=V.useState(new Set),[p,y]=V.useState(t.classType||((un=t.enrolledClasses)==null?void 0:un[0])||"Unassigned"),[b,T]=V.useState(null),[S,w]=V.useState([]),[N,I]=V.useState(!1),[C,z]=V.useState(null);zU!==t.id&&(zU=t.id,Ud=((to=t.gamification)==null?void 0:to.lastLevelSeen)||1,NS=!1,jS=!1),Ud===0&&(Ud=((Oi=t.gamification)==null?void 0:Oi.lastLevelSeen)||1);const O=s,[B,E]=V.useState(!1),[A,R]=V.useState(null),[F,D]=V.useState(!1),[L,M]=V.useState(null),[Q,Z]=V.useState(null),[W,ee]=V.useState(null),[Y,ye]=V.useState(null),[oe,X]=V.useState(null),[ne,de]=V.useState(null),[J,le]=V.useState(!1),[pe,be]=V.useState(null),[Je,Ne]=V.useState(!1);V.useEffect(()=>{var $e,lt,jt;const ge=(($e=t.gamification)==null?void 0:$e.level)||1,Me=Math.max(((lt=t.gamification)==null?void 0:lt.lastLevelSeen)||1,Ud);if(ge>Me){Ud=ge;const lr=((jt=t.gamification)==null?void 0:jt.inventory)||[],yn=lr.length>0?lr[lr.length-1]:null;z(yn),I(!0),Si.levelUp()}},[(Gi=t.gamification)==null?void 0:Gi.level,(ro=t.gamification)==null?void 0:ro.lastLevelSeen,(kn=t.gamification)==null?void 0:kn.inventory]),V.useEffect(()=>{const ge=[];try{ge.push(Fe.subscribeToXPEvents(Me=>{const $e=Me.find(lt=>lt.isActive&&(lt.type==="GLOBAL"||lt.targetClass===p));T($e||null)}))}catch{}try{ge.push(Fe.subscribeToQuests(Me=>{const $e=t.enrolledClasses||(t.classType?[t.classType]:[]);w(Me.filter(lt=>{if(!lt.isActive)return!1;const jt=new Date;return!(lt.startsAt&&new Date(lt.startsAt)>jt||lt.expiresAt&&new Date(lt.expiresAt)<jt||lt.targetClass&&!$e.includes(lt.targetClass))}))}))}catch{}return()=>ge.forEach(Me=>Me())},[p]);const ce=((no=(mi=t.gamification)==null?void 0:mi.classXp)==null?void 0:no[p])||0,Ce=ae.useRef(ce),Ee=ae.useRef(p);V.useEffect(()=>{if(Ee.current!==p){Ee.current=p,Ce.current=ce;return}if(ce>Ce.current&&Ce.current>=0){const ge=ce-Ce.current;if(ge>0&&ge<500){de(ge),Si.xpGain();const Me=setTimeout(()=>de(null),2e3);return()=>clearTimeout(Me)}}Ce.current=ce},[ce]),V.useEffect(()=>{var $e;if(NS)return;NS=!0;const ge=new Date().toISOString().split("T")[0];(($e=t.gamification)==null?void 0:$e.lastLoginRewardDate)!==ge&&!Je&&Fe.claimDailyLogin().then(lt=>{lt.alreadyClaimed||(Ne(!0),Si.dailyReward(),c.success(`Daily login: +${lt.xpReward} XP, +${lt.fluxReward} Flux (${lt.streak}-day streak!)`))}).catch(()=>{})},[]),V.useEffect(()=>{jS||(jS=!0,Fe.updateEngagementStreak().catch(()=>{}))},[]);const[ct,Qe]=V.useState([]);V.useEffect(()=>{let ge;try{ge=Fe.subscribeToAnnouncements(Qe)}catch{}return()=>ge==null?void 0:ge()},[]);const ut=V.useMemo(()=>{var Me;const ge=((Me=t.gamification)==null?void 0:Me.dismissedAnnouncements)||[];return ct.filter($e=>!ge.includes($e.id)&&($e.classType==="GLOBAL"||$e.classType===p))},[ct,(Ii=t.gamification)==null?void 0:Ii.dismissedAnnouncements,p]),dt=async ge=>{await Fe.dismissAnnouncement(t.id,ge)},Ut=()=>{var Me;const ge=((Me=t.gamification)==null?void 0:Me.level)||1;Ud=ge,I(!1),z(null),Fe.updateUserLastLevelSeen(t.id,ge).catch(()=>{})},Oe=async ge=>{try{await Fe.updateUserAppearance(t.id,ge,p),c.success("Profile updated!"),E(!1),M(null),Z(null),ee(null),ye(null),X(null)}catch{c.error("Failed to save  try again")}},st=t.enrolledClasses||(t.classType?[t.classType]:[]),yt=V.useMemo(()=>k0(t,p),[t,p]),he=yt.equipped,ze=yt.inventory,re=V.useMemo(()=>{const ge={tech:10,focus:10,analysis:10,charisma:10};return Object.values(he).filter(Boolean).forEach($e=>{$e.stats&&Object.entries($e.stats).forEach(([lt,jt])=>{ge[lt]+=jt})}),ge},[he]),De=V.useMemo(()=>Th(he),[he]),We=V.useMemo(()=>{const ge=t.gamification||{},$e={...ge.achievementProgress||{}},lt=ge.xp||0,jt=ge.level||1,lr=ge.inventory||[],yn=ge.completedQuests||[],ca=ge.engagementStreak||0,ts=ge.loginStreak||0,Cs=ge.tutoringSessionsCompleted||0,Hl=ge.bossesDefeated||0,Os=ge.challengesCompleted||0,nn=ge.itemsCrafted||0,er=(Is,Bo)=>{(!$e[Is]||Bo>$e[Is])&&($e[Is]=Bo)};return er("first_steps",lt),er("xp_5k",lt),er("xp_25k",lt),er("rising_star",jt),er("veteran",jt),er("elite",jt),er("legend",jt),er("collector_10",lr.length),er("collector_50",lr.length),er("gear_score_100",De),er("gear_score_500",De),er("first_mission",yn.length),er("mission_5",yn.length),er("mission_20",yn.length),er("boss_slayer",Hl),er("streak_3",ca),er("streak_8",ca),er("streak_16",ca),er("login_7",ts),er("login_30",ts),er("challenges_10",Os),er("tutor_1",Cs),er("tutor_10",Cs),er("tech_50",re.tech),er("focus_50",re.focus),er("analysis_50",re.analysis),er("charisma_50",re.charisma),er("craft_10",nn),$e},[t,De,re]),tt=[{subject:"Tech",A:re.tech,fullMark:100},{subject:"Focus",A:re.focus,fullMark:100},{subject:"Analysis",A:re.analysis,fullMark:100},{subject:"Charisma",A:re.charisma,fullMark:100}],Ze=V.useMemo(()=>{const ge={};return e.filter(Me=>Me.classType===p&&Me.status!=="DRAFT").forEach(Me=>{var jt;const $e=r.find(lr=>lr.assignmentId===Me.id),lt=Me.unit||"General Resources";ge[lt]||(ge[lt]=[]),ge[lt].push({...Me,lastEngagement:$e&&$e.submittedAt||null,engagementTime:((jt=$e==null?void 0:$e.metrics)==null?void 0:jt.engagementTime)||0})}),ge},[e,r,p]),Ke=ge=>{const Me=new Set(f);Me.has(ge)?Me.delete(ge):Me.add(ge),m(Me)},wt=((Er=t.gamification)==null?void 0:Er.level)||1,Tt=((Gr=t.gamification)==null?void 0:Gr.currency)||0,hi=ce,Nn=hi%1e3/1e3*100,jn=DU(hi),Kt=DU(Tt),Qt=Sh(wt),Wt=async ge=>{const Me=ge.target.value;y(Me),await Fe.switchUserView(t.id,Me)},ki=async ge=>{if(!F){D(!0);try{await Fe.equipItem(t.id,ge,p),R(null),Si.equip(),c.success(`${ge.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{D(!1)}}},Fi=async ge=>{D(!0);try{await Fe.unequipItem(t.id,ge,p),R(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{D(!1)}},Ja=async()=>{if(!A)return;if(Object.values(he).some($e=>$e&&$e.id===A.id)){c.error("Unequip this item before salvaging.");return}const Me=PI(A);if(await d({message:`Salvage ${A.name} for ${Me} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){D(!0);try{await Fe.disenchantItem(t.id,A,p),R(null),Si.salvage(),c.success(`Salvaged for ${Me} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{D(!1)}}},qi=async ge=>{if(!A)return;const Me=Fu[ge];if(Tt<Me)return c.error("Insufficient Cyber-Flux.");D(!0);try{await Fe.craftItem(t.id,A,ge,p),R(null),Si.craft(),c.success(`${ge.charAt(0)+ge.slice(1).toLowerCase()} complete.`)}catch($e){const lt=($e==null?void 0:$e.message)||($e==null?void 0:$e.code)||"Unknown error";c.error(`Fabrication failed: ${lt}`)}finally{D(!1)}},Vr=((dn=t.gamification)==null?void 0:dn.activeQuests)||[],es=((oa=t.gamification)==null?void 0:oa.completedQuests)||[],Ci=S.filter(ge=>Vr.some(Me=>Me.questId===ge.id)),ur=S.filter(ge=>!Vr.some(Me=>Me.questId===ge.id)&&!es.includes(ge.id)),fi=async ge=>{try{await Fe.acceptQuest(t.id,ge.id),Si.questAccept(),c.success(`Contract accepted: ${ge.title}`)}catch{c.error("Failed to accept contract.")}},Js=async ge=>{const Me=ge.type==="CUSTOM";if(await d({message:Me?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:Me?"Submit":"Deploy",variant:"info"}))try{await Fe.deployMission(t.id,ge),Si.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},eo=["HEAD","HANDS","RING1","AMULET"],Hi=["CHEST","BELT","FEET","RING2"],sa=({slot:ge})=>{const Me=he[ge],$e=Me?Xr(Me.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},lt=()=>ge==="HEAD"?u.jsx(Hn,{className:`w-5 h-5 ${$e.text}`}):ge==="CHEST"?u.jsx(vs,{className:`w-5 h-5 ${$e.text}`}):ge==="HANDS"?u.jsx(fv,{className:`w-5 h-5 ${$e.text}`}):ge==="FEET"?u.jsx(Tn,{className:`w-5 h-5 ${$e.text}`}):ge==="BELT"?u.jsx(Qw,{className:`w-5 h-5 ${$e.text}`}):ge==="AMULET"?u.jsx(Zw,{className:`w-5 h-5 ${$e.text}`}):u.jsx(th,{className:`w-5 h-5 ${$e.text}`});return u.jsx("button",{className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-110 ${$e.border} ${$e.bg} ${$e.shimmer} ${$e.glow}`,onClick:()=>Me&&R(Me),children:Me?u.jsxs(u.Fragment,{children:[lt(),u.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${$e.text}`,children:Me.baseName||Me.name.split(" ").slice(-1)[0]}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${$e.text}`,children:Me.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[Me.rarity," ",ge]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(Me.stats).map(([jt,lr])=>`+${lr} ${jt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):u.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:ge.slice(0,4)})})};return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[ut.length>0&&u.jsx("div",{className:"lg:col-span-12 space-y-2",children:ut.map(ge=>{const Me={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return u.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${Me[ge.priority]}`,children:[u.jsx(wT,{className:"w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-bold text-sm text-white",children:ge.title}),u.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:ge.content})]}),u.jsx("button",{onClick:()=>dt(ge.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:u.jsx(Ya,{className:"w-4 h-4"})})]},ge.id)})}),b&&u.jsx("div",{className:"lg:col-span-12",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:u.jsx(Hn,{className:"w-5 h-5 fill-current"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[b.title," ACTIVE"]}),u.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",b.multiplier,"x XP on all tasks."]})]})]}),u.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[b.multiplier,"x"]})]})}),u.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[u.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Qt.tierColor.split(" ")[0]} border-opacity-30`,children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Qt.tierGlow} shadow-xl`,children:u.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Qt.tierColor.split(" ")[0]}`})}),u.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ri=t.gamification)==null?void 0:Ri.codename)||t.name}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Qt.tierColor.split(" ")[1]}`,children:[Qt.rankName," (Lvl ",wt,")"]}),u.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",De]})]}),st.length>1&&u.jsxs("div",{className:"mt-4 relative w-full",children:[u.jsx("select",{value:p,onChange:Wt,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:st.map(ge=>u.jsx("option",{value:ge,children:ge},ge))}),u.jsx(Ea,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),u.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Nn}%`}})}),u.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[u.jsxs("span",{children:[jn.toLocaleString()," XP (",p,")"]}),u.jsx("span",{children:"Next Rank"}),ne&&u.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",ne," XP"]})]})]})]}),u.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:u.jsx(Lae,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-white leading-none",children:Kt})]})]})}),(((io=t.gamification)==null?void 0:io.engagementStreak)||0)>0&&(()=>{var $e;const ge=(($e=t.gamification)==null?void 0:$e.engagementStreak)||0,Me=C3e(ge);return u.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:u.jsx(O8,{className:"w-6 h-6"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),u.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[ge,"w"]})]}),Me>1&&u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),u.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((Me-1)*100),"%"]})]})]})})})(),(((js=t.gamification)==null?void 0:js.loginStreak)||0)>1&&u.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[u.jsx(Jae,{className:"w-5 h-5 text-purple-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),u.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((la=t.gamification)==null?void 0:la.loginStreak)||0," day streak"]})]})]}),u.jsxs("button",{onClick:()=>le(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[u.jsx(Sp,{className:"w-4 h-4"})," View Profile"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&u.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:u.jsx(Ix,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),u.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),u.jsx(m0,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&u.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:u.jsx(Vae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),u.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),u.jsx(m0,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),u.jsx("div",{className:"lg:col-span-9 space-y-6",children:u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[O==="MISSIONS"&&u.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[ur.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),ur.map(ge=>u.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h4",{className:"text-lg font-bold text-white",children:ge.title}),u.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:ge.type.replace("_"," ")})]}),u.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:ge.description}),u.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[ge.statRequirements&&u.jsx("div",{className:"flex gap-2",children:Object.entries(ge.statRequirements).map(([Me,$e])=>u.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[$e," ",Me]},Me))}),ge.expiresAt&&u.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[u.jsx(ws,{className:"w-3 h-3"})," Expires: ",new Date(ge.expiresAt).toLocaleDateString()]})]}),u.jsxs("button",{onClick:()=>fi(ge),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[u.jsx(bT,{className:"w-4 h-4"})," Accept Contract"]})]},ge.id))]}),u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Ci.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),Ci.map(ge=>{var jt,lr;const Me=((jt=Vr.find(yn=>yn.questId===ge.id))==null?void 0:jt.status)||"ACCEPTED",$e=(lr=Vr.find(yn=>yn.questId===ge.id))==null?void 0:lr.deploymentRoll,lt=ge.type==="CUSTOM";return u.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:u.jsx(jo,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:ge.title}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[ge.type," MISSION"]})]})]}),u.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${Me==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":Me==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":Me==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:Me})]}),Me==="ACCEPTED"?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:ge.description}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>Js(ge),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[u.jsx(Qae,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),lt?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),ge.isGroupQuest&&u.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:u.jsx(tu,{className:"w-5 h-5"})})]})]}):Me==="DEPLOYED"?u.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),u.jsx(Hn,{className:"w-6 h-6 text-purple-400"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),u.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:lt?"AWAITING_HQ_SIG_VERIFICATION":$e===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),u.jsx("div",{className:"h-10 w-px bg-white/5"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),u.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),u.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),u.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:lt?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},ge.id)})]})]},"missions"),O==="RESOURCES"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(Ze).length===0?u.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):u.jsx("div",{className:"space-y-4",children:Object.entries(Ze).sort().map(([ge,Me])=>u.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[u.jsxs("button",{onClick:()=>Ke(ge),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[f.has(ge)?u.jsx(Ea,{className:"w-4 h-4 text-purple-400"}):u.jsx(m0,{className:"w-4 h-4 text-gray-500"}),u.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:ge})]}),u.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[Me.length," Files"]})]}),f.has(ge)&&u.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:Me.map($e=>{const lt=!!$e.dueDate,jt=$e.dueDate?new Date($e.dueDate):null,lr=new Date,yn=jt?Math.ceil((jt.getTime()-lr.getTime())/864e5):1/0,ca=yn<=0?"text-red-400":yn<=2?"text-yellow-400":"text-gray-500",ts=Math.floor($e.engagementTime/60),Cs=ts>=5;return u.jsxs("div",{className:"bg-white/5 border border-white/5 hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a&&a($e.id),children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Cs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":$e.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Cs?u.jsx(Tn,{className:"w-6 h-6"}):$e.lastEngagement?u.jsx(Tn,{className:"w-5 h-5 opacity-60"}):q3e[$e.category||"Supplemental"]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:$e.category}),u.jsx("h4",{className:"font-bold text-white text-sm truncate",children:$e.title})]}),u.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:u.jsx("p",{className:"text-xs text-gray-500 truncate",children:$e.description})}),u.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[$e.lastEngagement&&u.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ts,"m engaged"]}),lt&&u.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${ca}`,children:[u.jsx(xs,{className:"w-3 h-3"}),yn<=0?"Overdue":yn===1?"Due tomorrow":`Due in ${yn}d`]})]})]}),u.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:u.jsx(NF,{className:"w-4 h-4 text-purple-400 fill-current"})})]},$e.id)})})]},ge))})},"resources"),O==="LOADOUT"&&u.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[u.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative overflow-hidden flex flex-col items-center justify-center p-4 min-h-[400px]",children:[u.jsx("div",{className:"absolute inset-0 loadout-hex-bg pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((pt=yt.appearance)==null?void 0:pt.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),u.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[u.jsx("div",{className:"flex flex-col gap-4",children:eo.map(ge=>u.jsx(sa,{slot:ge},ge))}),u.jsx("div",{className:"w-40 h-full relative",children:u.jsx(ex,{equipped:he,appearance:yt.appearance,evolutionLevel:wt})}),u.jsx("div",{className:"flex flex-col gap-4",children:Hi.map(ge=>u.jsx(sa,{slot:ge},ge))})]}),u.jsxs("button",{onClick:ge=>{ge.preventDefault(),ge.stopPropagation(),E(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[u.jsx(ase,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),u.jsx("div",{className:"h-[200px]",children:u.jsx(MH,{width:"100%",height:"100%",children:u.jsxs(_3e,{cx:"50%",cy:"50%",outerRadius:"70%",data:tt,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),u.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),u.jsx(iK,{stroke:"rgba(255,255,255,0.08)"}),u.jsx(Hg,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),u.jsx(qg,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),u.jsx(Gg,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),u.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),u.jsx("span",{className:"text-gray-500",children:"Tech"})," ",u.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:re.tech})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),u.jsx("span",{className:"text-gray-500",children:"Focus"})," ",u.jsx("span",{className:"text-green-400 font-bold ml-auto",children:re.focus})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),u.jsx("span",{className:"text-gray-500",children:"Analysis"})," ",u.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:re.analysis})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),u.jsx("span",{className:"text-gray-500",children:"Charisma"})," ",u.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:re.charisma})]})]})})]})]}),u.jsxs("div",{className:"mt-6 flex-1 min-h-[250px] bg-black/40 border border-white/10 rounded-2xl p-4 overflow-hidden flex flex-col",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[u.jsxs("span",{children:["Gear Storage (",ze.length,")"]}),u.jsx("span",{className:"text-[9px] text-gray-600",children:"Click to Inspect"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[ze.map((ge,Me)=>{const $e=Object.values(he).some(jt=>(jt==null?void 0:jt.id)===ge.id),lt=Xr(ge.rarity);return u.jsxs("button",{onClick:()=>R(ge),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-105 ${$e?"ring-2 ring-white/50 opacity-100":"opacity-80 hover:opacity-100"} ${lt.bg} ${lt.border} ${lt.shimmer} ${$e?lt.glow:""}`,children:[ge.slot==="HEAD"&&u.jsx(Hn,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="CHEST"&&u.jsx(vs,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="HANDS"&&u.jsx(fv,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="FEET"&&u.jsx(Tn,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="BELT"&&u.jsx(Qw,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="AMULET"&&u.jsx(Zw,{className:`w-6 h-6 ${lt.text}`}),ge.slot==="RING"&&u.jsx(th,{className:`w-6 h-6 ${lt.text}`}),$e&&u.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${lt.text}`,children:ge.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ge.rarity," ",ge.slot,$e?"  EQUIPPED":""]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ge.stats).map(([jt,lr])=>`+${lr} ${jt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]},Me)}),Array.from({length:Math.max(0,16-ze.length)}).map((ge,Me)=>u.jsx("div",{className:"aspect-square rounded-xl border border-white/5 bg-white/5"},`empty-${Me}`))]})]})]},"loadout"),O==="ACHIEVEMENTS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(I3e,{unlockedAchievements:((ue=t.gamification)==null?void 0:ue.unlockedAchievements)||[],achievementProgress:We})},"achievements"),O==="SKILLS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(M3e,{specialization:(qe=t.gamification)==null?void 0:qe.specialization,skillPoints:((rt=t.gamification)==null?void 0:rt.skillPoints)||0,unlockedSkills:((Dt=t.gamification)==null?void 0:Dt.unlockedSkills)||[]})},"skills"),O==="FORTUNE"&&u.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(P3e,{currency:Tt,lastSpin:(Yt=t.gamification)==null?void 0:Yt.lastWheelSpin,classType:p})},"fortune"),O==="TUTORING"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(U3e,{userId:t.id,userName:t.name,classType:p})},"tutoring")]})}),u.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:u.jsx(B3e,{userId:t.id,activeChallenges:((Kr=t.gamification)==null?void 0:Kr.activeDailyChallenges)||[],classType:p})}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[u.jsx(D3e,{userId:t.id,userName:t.name,classType:p}),u.jsx(L3e,{classType:p})]})]}),u.jsx(Ka,{isOpen:B,onClose:()=>{E(!1),M(null),Z(null),ee(null),ye(null),X(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:u.jsxs("div",{className:"p-4 space-y-6",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:u.jsx(ex,{equipped:he,appearance:{...yt.appearance,hue:L??((Nr=yt.appearance)==null?void 0:Nr.hue)??0,bodyType:Q??((Wr=yt.appearance)==null?void 0:Wr.bodyType)??"A",skinTone:W??((hr=yt.appearance)==null?void 0:hr.skinTone)??0,hairStyle:Y??((ao=yt.appearance)==null?void 0:ao.hairStyle)??1,hairColor:oe??((ks=yt.appearance)==null?void 0:ks.hairColor)??0}})})}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),u.jsx("div",{className:"flex justify-center gap-2",children:aW.map((ge,Me)=>{var lt;const $e=(W??((lt=yt.appearance)==null?void 0:lt.skinTone)??0)===Me;return u.jsx("button",{onClick:()=>ee(Me),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ge}},Me)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:T3e.map((ge,Me)=>{var lt;const $e=(Y??((lt=yt.appearance)==null?void 0:lt.hairStyle)??1)===Me;return u.jsx("button",{onClick:()=>ye(Me),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${$e?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:ge},Me)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),u.jsx("div",{className:"flex justify-center gap-2",children:sW.map((ge,Me)=>{var lt;const $e=(oe??((lt=yt.appearance)==null?void 0:lt.hairColor)??0)===Me;return u.jsx("button",{onClick:()=>X(Me),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:ge}},Me)})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),u.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(ge=>{var $e;const Me=(Q??(($e=yt.appearance)==null?void 0:$e.bodyType)??"A")===ge;return u.jsx("button",{onClick:()=>Z(ge),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${Me?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:ge==="A"?"Alpha":ge==="B"?"Beta":"Femme"},ge)})})]}),u.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),u.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(ge=>{var $e;const Me=(L??(($e=yt.appearance)==null?void 0:$e.hue)??0)===ge;return u.jsx("button",{onClick:()=>M(ge),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${Me?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${ge}, 60%, 45%)`}},ge)})})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{E(!1),M(null),Z(null),ee(null),ye(null),X(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:()=>{var ge,Me,$e,lt,jt;return Oe({hue:L??((ge=yt.appearance)==null?void 0:ge.hue)??0,bodyType:Q??((Me=yt.appearance)==null?void 0:Me.bodyType)??"A",skinTone:W??(($e=yt.appearance)==null?void 0:$e.skinTone)??0,hairStyle:Y??((lt=yt.appearance)==null?void 0:lt.hairStyle)??1,hairColor:oe??((jt=yt.appearance)==null?void 0:jt.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),u.jsx(Ka,{isOpen:!!A,onClose:()=>R(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:A&&u.jsxs("div",{className:"space-y-6 text-gray-100",children:[u.jsxs("div",{className:`p-5 rounded-xl border ${Xr(A.rarity).bg} ${Xr(A.rarity).border} ${Xr(A.rarity).shimmer} relative overflow-hidden`,children:[u.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[u.jsxs("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${Xr(A.rarity).border} ${Xr(A.rarity).bg}`,style:{boxShadow:A.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":A.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:[A.slot==="HEAD"&&u.jsx(Hn,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="CHEST"&&u.jsx(vs,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="HANDS"&&u.jsx(fv,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="FEET"&&u.jsx(Tn,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="BELT"&&u.jsx(Qw,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="AMULET"&&u.jsx(Zw,{className:`w-7 h-7 ${Xr(A.rarity).text}`}),A.slot==="RING"&&u.jsx(th,{className:`w-7 h-7 ${Xr(A.rarity).text}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:`text-lg font-bold ${Xr(A.rarity).text}`,children:A.name}),u.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[A.rarity," ",A.slot]})]})]}),u.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(A.stats).map(([ge,Me])=>u.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[u.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:ge}),u.jsxs("span",{className:"font-mono font-bold",children:["+",Me]})]},ge))}),u.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:A.affixes.map((ge,Me)=>u.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[ge.name," (T",ge.tier,")"]},Me))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const ge=A.slot==="RING"?"RING1":A.slot,Me=he[ge]||(A.slot==="RING"?he.RING2:null);if(!Me||Me.id===A.id)return null;const $e=Xr(Me.rarity),lt=new Set([...Object.keys(A.stats),...Object.keys(Me.stats)]);return u.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:`text-xs font-bold ${$e.text}`,children:Me.name}),u.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:Me.rarity})]}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(lt).map(jt=>{const lr=A.stats[jt]||0,yn=Me.stats[jt]||0,ca=lr-yn;return ca===0?u.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[jt.slice(0,3).toUpperCase(),": 0"]},jt):u.jsxs("span",{className:`text-[10px] font-mono font-bold ${ca>0?"text-green-400":"text-red-400"}`,children:[jt.slice(0,3).toUpperCase(),": ",ca>0?"":"",Math.abs(ca)]},jt)})})]})})(),(()=>{var Me;const ge=(Me=Object.entries(he).find(([,$e])=>$e&&$e.id===A.id))==null?void 0:Me[0];return ge?u.jsx("button",{onClick:()=>Fi(ge),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:F,children:"Unequip Gear"}):u.jsx("button",{onClick:()=>ki(A),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:F,children:"Equip Gear"})})(),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),u.jsxs("button",{onClick:()=>qi("RECALIBRATE"),disabled:F||Tt<Fu.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Fu.RECALIBRATE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),u.jsxs("button",{onClick:()=>qi("REFORGE"),disabled:F||Tt<Fu.REFORGE||A.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Fu.REFORGE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),u.jsxs("button",{onClick:()=>qi("OPTIMIZE"),disabled:F||Tt<Fu.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Fu.OPTIMIZE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsxs("button",{onClick:Ja,disabled:F,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[u.jsx($i,{className:"w-4 h-4"}),"Salvage for ",PI(A)," Flux"]})]})]})}),J&&u.jsx(F3e,{user:t,classType:p,onClose:()=>le(!1)}),pe&&u.jsx(z3e,{item:pe,onClose:()=>be(null)}),u.jsx(Ka,{isOpen:N,onClose:Ut,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:u.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((ge,Me)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][Me%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},Me))}),u.jsxs("div",{className:"relative inline-block mb-6",children:[u.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),u.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),u.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:u.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:wt})})]}),u.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:u.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Qt.rankName})}),u.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&u.jsxs("div",{className:`${Xr(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${Xr(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),u.jsx("div",{className:`text-xl font-bold ${Xr(C.rarity).text}`,children:C.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),u.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([ge,Me])=>u.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",Me," ",ge.toUpperCase()]},ge))})]})]}),u.jsx("button",{onClick:Ut,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})};var A2=typeof self<"u"?self:global;const hg=typeof navigator<"u",G3e=hg&&typeof HTMLImageElement>"u",tx=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),E2=A2.Buffer,Yy=A2.BigInt,N2=!!E2,K3e=t=>t;function rx(t,e=K3e){if(tx)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let sN=A2.fetch;const W3e=t=>sN=t;if(!A2.fetch){const t=rx("http",(n=>n)),e=rx("https",(n=>n)),r=(n,{headers:i}={})=>new Promise((async(a,s)=>{let{port:c,hostname:d,pathname:f,protocol:m,search:p}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(f)+p,headers:i};c!==""&&(y.port=Number(c));const b=(m==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return r(S,{headers:i}).then(a).catch(s)}a({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(N=>w.push(N))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));b.on("error",s),b.end()}));W3e(r)}function Mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const nx=t=>uW(t)?void 0:t,X3e=t=>t!==void 0;function uW(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(X3e).length===0)}function Kn(t){let e=new Error(t);throw delete e.stack,e}function l0(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function n7(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const i7=t=>String.fromCharCode.apply(null,t),$U=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function dW(t){return $U?$U.decode(t):N2?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(i7(t)))}class wa{static from(e,r){return e instanceof this&&e.le===r?e:new wa(e,void 0,void 0,r)}constructor(e,r=0,n,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let a=new DataView(e,r,n);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof wa){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Kn("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,r,n);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else Kn("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=wa){return e instanceof DataView||e instanceof wa?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Kn("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new wa(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return dW(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return i7(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let i=0;i<r&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return i7(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function a7(t,e){Kn(`${t} '${e}' was not loaded, try using full build of exifr.`)}class oN extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||a7(this.kind,e),r&&(e in r||(function(n,i){Kn(`Unknown ${n} '${i}'.`)})(this.kind,e),r[e].enabled||a7(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var Oo=new oN("file parser"),qn=new oN("segment parser"),Lo=new oN("file reader");function Q3e(t,e){return typeof t=="string"?VU(t,e):hg&&!G3e&&t instanceof HTMLImageElement?VU(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new wa(t):hg&&t instanceof Blob?s7(t,e,"blob",D0):void Kn("Invalid input argument")}function VU(t,e){return(r=t).startsWith("data:")||r.length>1e4?o7(t,e,"base64"):tx&&t.includes("://")?s7(t,e,"url",P0):tx?o7(t,e,"fs"):hg?s7(t,e,"url",P0):void Kn("Invalid input argument");var r}async function s7(t,e,r,n){return Lo.has(r)?o7(t,e,r):n?(async function(i,a){let s=await a(i);return new wa(s)})(t,n):void Kn(`Parser ${r} is not loaded`)}async function o7(t,e,r){let n=new(Lo.get(r))(t,e);return await n.read(),n}const P0=t=>sN(t).then((e=>e.arrayBuffer())),D0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class Y3e extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function Pn(t,e,r){let n=new Y3e;for(let[i,a]of r)n.set(i,a);if(Array.isArray(e))for(let i of e)t.set(i,n);else t.set(e,n);return n}function L0(t,e,r){let n,i=t.get(e);for(n of r)i.set(n[0],n[1])}const ui=new Map,Zs=new Map,Qc=new Map,$c=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],pf=["jfif","xmp","icc","iptc","ihdr"],B0=["tiff",...pf],_n=["ifd0","ifd1","exif","gps","interop"],Vc=[...B0,..._n],Fc=["makerNote","userComment"],gf=["translateKeys","translateValues","reviveValues","multiSegment"],qc=[...gf,"sanitize","mergeOutput","silentErrors"];class hW{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class jm extends hW{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,i){if(super(),Mt(this,"enabled",!1),Mt(this,"skip",new Set),Mt(this,"pick",new Set),Mt(this,"deps",new Set),Mt(this,"translateKeys",!1),Mt(this,"translateValues",!1),Mt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=_n.includes(e),this.canBeFiltered&&(this.dict=ui.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:s}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Kn(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of gf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,i,{tagKeys:a,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(i=s.indexOf(n),i===-1&&(i=a.indexOf(Number(n))),i!==-1&&r.add(Number(a[i]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ix(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ix(this.pick,this.deps)}}var Zi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},FU=new Map;class W0 extends hW{static useCached(e){let r=FU.get(e);return r!==void 0||(r=new this(e),FU.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Kn(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=hg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of $c)this[e]=Zi[e];for(e of qc)this[e]=Zi[e];for(e of Fc)this[e]=Zi[e];for(e of Vc)this[e]=new jm(e,Zi[e],void 0,this)}setupFromTrue(){let e;for(e of $c)this[e]=Zi[e];for(e of qc)this[e]=Zi[e];for(e of Fc)this[e]=!0;for(e of Vc)this[e]=new jm(e,!0,void 0,this)}setupFromArray(e){let r;for(r of $c)this[r]=Zi[r];for(r of qc)this[r]=Zi[r];for(r of Fc)this[r]=Zi[r];for(r of Vc)this[r]=new jm(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,_n)}setupFromObject(e){let r;for(r of(_n.ifd0=_n.ifd0||_n.image,_n.ifd1=_n.ifd1||_n.thumbnail,Object.assign(this,e),$c))this[r]=kS(e[r],Zi[r]);for(r of qc)this[r]=kS(e[r],Zi[r]);for(r of Fc)this[r]=kS(e[r],Zi[r]);for(r of B0)this[r]=new jm(r,Zi[r],e[r],this);for(r of _n)this[r]=new jm(r,Zi[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,_n,Vc),e.tiff===!0?this.batchEnableWithBool(_n,!0):e.tiff===!1?this.batchEnableWithUserValue(_n,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,_n):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,_n)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let i=r[n];this[n].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,r,n,i=n){if(e&&e.length){for(let s of i)this[s].enabled=!1;let a=qU(e,n);for(let[s,c]of a)ix(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let a=qU(r,n);for(let[s,c]of a)ix(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:i,icc:a}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:i}=this;i.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=_n.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of _n)this[a].finalizeFilters()}get onlyTiff(){return!pf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of B0)this[e].enabled&&!qn.has(e)&&a7("segment parser",e)}}function qU(t,e){let r,n,i,a,s=[];for(i of e){for(a of(r=ui.get(i),n=[],r))(t.includes(a[0])||t.includes(a[1]))&&n.push(a[0]);n.length&&s.push([i,n])}return s}function kS(t,e){return t!==void 0?t:e!==void 0?e:void 0}function ix(t,e){for(let r of e)t.add(r)}Mt(W0,"default",Zi);class pu{constructor(e){Mt(this,"parsers",{}),Mt(this,"output",{}),Mt(this,"errors",[]),Mt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=W0.useCached(e)}async read(e){this.file=await Q3e(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,i]of Oo)if(i.canHandle(e,r))return this.fileParser=new i(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Kn("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),nx(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let i=await n.parse();n.assignToOutput(e,i)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=qn.get("tiff",e);var i;if(r.tiff?i={start:0,type:"tiff"}:r.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),s=this.parsers.tiff=new n(a,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function j2(t,e){let r=new pu(e);return await r.read(t),r.parse()}var Z3e=Object.freeze({__proto__:null,parse:j2,Exifr:pu,fileParsers:Oo,segmentParsers:qn,fileReaders:Lo,tagKeys:ui,tagValues:Zs,tagRevivers:Qc,createDictionary:Pn,extendDictionary:L0,fetchUrlAsArrayBuffer:P0,readBlobAsArrayBuffer:D0,chunkedProps:$c,otherSegments:pf,segments:B0,tiffBlocks:_n,segmentsAndBlocks:Vc,tiffExtractables:Fc,inheritables:gf,allFormatters:qc,Options:W0});class k2{constructor(e,r,n){Mt(this,"errors",[]),Mt(this,"ensureSegmentChunk",(async i=>{let a=i.start,s=i.size||65536;if(this.file.chunked)if(this.file.available(a,s))i.chunk=this.file.subarray(a,s);else try{i.chunk=await this.file.readChunk(a,s)}catch(c){Kn(`Couldn't read segment: ${JSON.stringify(i)}. ${c.message}`)}else this.file.byteLength>a+s?i.chunk=this.file.subarray(a,s):i.size===void 0?i.chunk=this.file.subarray(a):Kn("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(qn.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:i}=r,a=this.options[n];if(a&&a.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,i)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class Gs{static findPosition(e,r){let n=e.getUint16(r+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,a=r+i,s=n-i;return{offset:r,length:n,headerLength:i,start:a,size:s,end:a+s}}static parse(e,r={}){return new this(e,new W0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof wa?e:new wa(e)}constructor(e,r={},n){Mt(this,"errors",[]),Mt(this,"raw",new Map),Mt(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Qc.get(r),i=Zs.get(r),a=ui.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!i,f=s.translateKeys&&!!a,m={};for(let[p,y]of e)c&&n.has(p)?y=n.get(p)(y):d&&i.has(p)&&(y=this.translateValue(y,i.get(p))),f&&a.has(p)&&(p=a.get(p)||p),m[p]=y;return m}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Mt(Gs,"headerLength",4),Mt(Gs,"type",void 0),Mt(Gs,"multiSegment",!1),Mt(Gs,"canHandle",(()=>!1));function J3e(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function e6e(t){return t>=224&&t<=239}function t6e(t,e,r){for(let[n,i]of qn)if(i.canHandle(t,e,r))return n}class HU extends k2{constructor(...e){super(...e),Mt(this,"appSegments",[]),Mt(this,"jpegSegments",[]),Mt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(qn.keyList())):(e=e===void 0?qn.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&qn.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:i,wanted:a,remaining:s}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((c=>{let d=qn.get(c),f=this.options[c];return d.multiSegment&&f.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,f=this.appSegments.some((m=>!this.file.available(m.offset||m.start,m.length||m.size)));if(c=e>d&&!f?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,i,a,s,c,d,{file:f,findAll:m,wanted:p,remaining:y,options:b}=this;for(;e<r;e++)if(f.getUint8(e)===255){if(n=f.getUint8(e+1),e6e(n)){if(i=f.getUint16(e+2),a=t6e(f,e,i),a&&p.has(a)&&(s=qn.get(a),c=s.findPosition(f,e),d=b[a],c.type=a,this.appSegments.push(c),!m&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(c=Gs.findPosition(f,e),c.marker=n,this.unknownSegments.push(c)),e+=i+1}else if(J3e(n)){if(i=f.getUint16(e+2),n===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let i,a,s,c=new Map;for(let d=0;d<r.length;d++)i=r[d],a=i[n],c.has(a)?s=c.get(a):c.set(a,s=[]),s.push(i);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let i=qn.get(r,this.options);return i.handleMultiSegments?{type:r,chunk:i.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Mt(HU,"type","jpeg"),Oo.set("jpeg",HU);const r6e=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class n6e extends Gs{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:i,skip:a}=this.options[r];i=new Set(i);let s=i.size>0,c=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let f=0;f<d;f++){let m=this.chunk.getUint16(e);if(s){if(i.has(m)&&(n.set(m,this.parseTag(e,m,r)),i.delete(m),i.size===0))break}else!c&&a.has(m)||n.set(m,this.parseTag(e,m,r));e+=12}return n}parseTag(e,r,n){let{chunk:i}=this,a=i.getUint16(e+2),s=i.getUint32(e+4),c=r6e[a];if(c*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&Kn(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&Kn(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,s);if(a===2)return l0(i.getString(e,s));if(a===7)return i.getUint8Array(e,s);if(s===1)return this.parseTagValue(a,e);{let d=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(s),f=c;for(let m=0;m<s;m++)d[m]=this.parseTagValue(a,e),e+=f;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Kn(`Invalid tiff type ${e}`)}}}class CS extends n6e{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Kn("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Kn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,n7(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,n7(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",GU(...e.get(2),e.get(1))),e.set("longitude",GU(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,i={};for(r of _n)if(e=this[r],!uW(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(i,n)}else i[r]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,i]of Object.entries(r))this.assignObjectToOutput(e,n,i)}}function GU(t,e,r,n){var i=t+e/60+r/3600;return n!=="S"&&n!=="W"||(i*=-1),i}Mt(CS,"type","tiff"),Mt(CS,"headerLength",10),qn.set("tiff",CS);var i6e=Object.freeze({__proto__:null,default:Z3e,Exifr:pu,fileParsers:Oo,segmentParsers:qn,fileReaders:Lo,tagKeys:ui,tagValues:Zs,tagRevivers:Qc,createDictionary:Pn,extendDictionary:L0,fetchUrlAsArrayBuffer:P0,readBlobAsArrayBuffer:D0,chunkedProps:$c,otherSegments:pf,segments:B0,tiffBlocks:_n,segmentsAndBlocks:Vc,tiffExtractables:Fc,inheritables:gf,allFormatters:qc,Options:W0,parse:j2});const lN={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},cN=Object.assign({},lN,{firstChunkSize:4e4,gps:[1,2,3,4]});async function fW(t){let e=new pu(cN);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:i}=r.gps;return{latitude:n,longitude:i}}}const uN=Object.assign({},lN,{tiff:!1,ifd1:!0,mergeOutput:!1});async function mW(t){let e=new pu(uN);await e.read(t);let r=await e.extractThumbnail();return r&&N2?E2.from(r):r}async function pW(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const dN=Object.assign({},lN,{firstChunkSize:4e4,ifd0:[274]});async function hN(t){let e=new pu(dN);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const fN=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let c0=!0,u0=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;c0=Number(r)+.1*Number(n)<13.4,u0=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);c0=u0=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);c0=u0=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);c0=u0=Number(e)<77}}async function gW(t){let e=await hN(t);return Object.assign({canvas:c0,css:u0},fN[e])}class a6e extends wa{constructor(...e){super(...e),Mt(this,"ranges",new s6e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{let i=e+r;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let r;r=N2?E2.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let i=super.set(e,r);return this.ranges.add(r,i.byteLength),i}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class s6e{constructor(){Mt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let i=e+r,a=this.list.filter((s=>KU(e,s.offset,i)||KU(e,s.end,i)));if(a.length>0){e=Math.min(e,...a.map((c=>c.offset))),i=Math.max(i,...a.map((c=>c.end))),r=i-e;let s=a.shift();s.offset=e,s.length=r,s.end=i,this.list=this.list.filter((c=>!a.includes(c)))}else this.list.push({offset:e,length:r,end:i})}available(e,r){let n=e+r;return this.list.some((i=>i.offset<=e&&n<=i.end))}}function KU(t,e,r){return t<=e&&e<=r}class C2 extends a6e{constructor(e,r){super(0),Mt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Lo.set("blob",class extends C2{async readWhole(){this.chunked=!1;let t=await D0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),i=await D0(n);return this.set(i,t,!0)}});var o6e=Object.freeze({__proto__:null,default:i6e,Exifr:pu,fileParsers:Oo,segmentParsers:qn,fileReaders:Lo,tagKeys:ui,tagValues:Zs,tagRevivers:Qc,createDictionary:Pn,extendDictionary:L0,fetchUrlAsArrayBuffer:P0,readBlobAsArrayBuffer:D0,chunkedProps:$c,otherSegments:pf,segments:B0,tiffBlocks:_n,segmentsAndBlocks:Vc,tiffExtractables:Fc,inheritables:gf,allFormatters:qc,Options:W0,parse:j2,gpsOnlyOptions:cN,gps:fW,thumbnailOnlyOptions:uN,thumbnail:mW,thumbnailUrl:pW,orientationOnlyOptions:dN,orientation:hN,rotations:fN,get rotateCanvas(){return c0},get rotateCss(){return u0},rotation:gW});Lo.set("url",class extends C2{async readWhole(){this.chunked=!1;let t=await P0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let i=await sN(this.input,{headers:n}),a=await i.arrayBuffer(),s=a.byteLength;if(i.status!==416)return s!==e&&(this.size=t+s),this.set(a,t,!0)}});wa.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Yy!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Yy(e)<<Yy(32)|Yy(r)):void Kn("Trying to read 64b value but JS can only handle 53b numbers.")};class l6e extends k2{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),i=e+8;return r===1&&(r=this.file.getUint64(e+8),i+=8),{offset:e,length:r,kind:n,start:i}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class yW extends l6e{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let i=16,a=[];for(;i<n;)a.push(e.getString(i,4)),i+=4;return a.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let i=this.file.subarray(r,n);this.createParser(e,i)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let i=this.findBox(n,"colr");i!==void 0&&await this.registerSegment("icc",i.offset+12,i.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let i=this.findExifLocIdInIinf(r),a=this.findExtentInIloc(n,i);if(a===void 0)return;let[s,c]=a;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,i,a,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(i=r.version===3?4:2,a=this.file.getString(n+i+2,4),a==="Exif"))return this.file.getUintBytes(n,i);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[i,a]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,f=e.version===1||e.version===2?2:0,m=c+i+a,p=e.version===2?4:2,y=this.file.getUintBytes(n,p);for(n+=p;y--;){let b=this.file.getUintBytes(n,d);n+=d+f+2+s;let T=this.file.getUint16(n);if(n+=2,b===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,i),this.file.getUintBytes(n+c+i,a)];n+=T*m}}}class vW extends yW{}Mt(vW,"type","heic");class WU extends yW{}Mt(WU,"type","avif"),Oo.set("heic",vW),Oo.set("avif",WU),Pn(ui,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),Pn(ui,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),Pn(ui,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),Pn(Zs,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let ip=Pn(Zs,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const XU={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};ip.set(37392,XU),ip.set(41488,XU);const OS={0:"Normal",1:"Low",2:"High"};function QU(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function YU(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function IS(t){if(typeof t=="string"){var[e,r,n,i,a,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s)||(c.setHours(i),c.setMinutes(a),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function km(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(ZU(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(ZU(t[r],t[r+1]));return l0(String.fromCodePoint(...e))}function ZU(t,e){return t<<8|e}ip.set(41992,OS),ip.set(41993,OS),ip.set(41994,OS),Pn(Qc,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?dW(t):t}],[306,IS],[40091,km],[40092,km],[40093,km],[40094,km],[40095,km]]),Pn(Qc,"exif",[[40960,YU],[36864,YU],[36867,IS],[36868,IS],[40962,QU],[40963,QU]]),Pn(Qc,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class RS extends Gs{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:wa.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(a){let s={},c={};for(let d of _W)s[d]=[],c[d]=0;return a.replace(h6e,((d,f,m)=>{if(f==="<"){let p=++c[m];return s[m].push(p),`${d}#${p}`}return`${d}#${s[m].pop()}`}))})(e);let r=oh.findAll(e,"rdf","Description");r.length===0&&r.push(new oh("rdf","Description",void 0,e));let n,i={};for(let a of r)for(let s of a.properties)n=d6e(s.ns,i),bW(s,n);return(function(a){let s;for(let c in a)s=a[c]=nx(a[c]),s===void 0&&delete a[c];return nx(a)})(i)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,i]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",i);break;case"exif":this.assignObjectToOutput(e,"exif",i);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,i)}else e.xmp=r}}Mt(RS,"type","xmp"),Mt(RS,"multiSegment",!0),qn.set("xmp",RS);class ax{static findAll(e){return xW(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(ax.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[3].slice(1,-1);return i=wW(i),new ax(r,n,i)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class oh{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var i=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return xW(e,i).map(oh.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],i=e[4],a=e[8];return new oh(r,n,i,a)}constructor(e,r,n,i){this.ns=e,this.name=r,this.attrString=n,this.innerXml=i,this.attrs=ax.findAll(n),this.children=oh.findAll(i),this.value=this.children.length===0?wW(i):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return u6e(this.children.map(c6e));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)bW(r,e);return this.value!==void 0&&(e.value=this.value),nx(e)}}function bW(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var c6e=t=>t.serialize(),u6e=t=>t.length===1?t[0]:t,d6e=(t,e)=>e[t]?e[t]:e[t]={};function xW(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function wW(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const _W=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],h6e=new RegExp(`(<|\\/)(${_W.join("|")})`,"g");var f6e=Object.freeze({__proto__:null,default:o6e,Exifr:pu,fileParsers:Oo,segmentParsers:qn,fileReaders:Lo,tagKeys:ui,tagValues:Zs,tagRevivers:Qc,createDictionary:Pn,extendDictionary:L0,fetchUrlAsArrayBuffer:P0,readBlobAsArrayBuffer:D0,chunkedProps:$c,otherSegments:pf,segments:B0,tiffBlocks:_n,segmentsAndBlocks:Vc,tiffExtractables:Fc,inheritables:gf,allFormatters:qc,Options:W0,parse:j2,gpsOnlyOptions:cN,gps:fW,thumbnailOnlyOptions:uN,thumbnail:mW,thumbnailUrl:pW,orientationOnlyOptions:dN,orientation:hN,rotations:fN,get rotateCanvas(){return c0},get rotateCss(){return u0},rotation:gW});let JU=rx("fs",(t=>t.promises));Lo.set("fs",class extends C2{async readWhole(){this.chunked=!1,this.fs=await JU;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await JU,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});Lo.set("base64",class extends C2{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,i=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let a=t+e,s=r+4*Math.ceil(a/3);i=i.slice(r,s);let c=Math.min(e,this.size-t);if(N2){let d=E2.from(i,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),f=atob(i),m=d.toUint8();for(let p=0;p<c;p++)m[p]=f.charCodeAt(n+p);return d}}});class ez extends k2{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:i,icc:a}=e;n.enabled&&r.deps.add(700),i.enabled&&r.deps.add(33723),a.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:i}=this.options;if(e.enabled||r.enabled||n.enabled||i.enabled){let a=Math.max(n7(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Mt(ez,"type","tiff"),Oo.set("tiff",ez);let m6e=rx("zlib");const p6e=["ihdr","iccp","text","itxt","exif"];class tz extends k2{constructor(...e){super(...e),Mt(this,"catchError",(r=>this.errors.push(r))),Mt(this,"metaChunks",[]),Mt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let i=n.getUint32(e),a=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=i+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:i,marker:a};p6e.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,i]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,i)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),i=0;for(;i<80&&n[i]!==0;)i++;let a=i+2,s=r.getString(0,i);if(this.injectKeyValToIhdr("ProfileName",s),tx){let c=await m6e,d=r.getUint8Array(a);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Mt(tz,"type","png"),Oo.set("png",tz),Pn(ui,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),L0(ui,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let rz=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];L0(ui,"ifd0",rz),L0(ui,"exif",rz),Pn(Zs,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class MS extends Gs{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Mt(MS,"type","jfif"),Mt(MS,"headerLength",9),qn.set("jfif",MS),Pn(ui,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class nz extends Gs{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Mt(nz,"type","ihdr"),qn.set("ihdr",nz),Pn(ui,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),Pn(Zs,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class vv extends Gs{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(i){let a=i[0].constructor,s=0;for(let f of i)s+=f.length;let c=new a(s),d=0;for(let f of i)c.set(f,d),d+=f.length;return c})(r.map((i=>i.chunk.toUint8())));return new wa(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Kn("ICC header is too short");for(let[r,n]of Object.entries(g6e)){r=parseInt(r,10);let i=n(this.chunk,r);i!=="\0\0\0\0"&&e.set(r,i)}}parseTags(){let e,r,n,i,a,{raw:s}=this,c=this.chunk.getUint32(128),d=132,f=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),i=this.chunk.getString(r,4),r+n>f)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");a=this.parseTag(i,r,n),a!==void 0&&a!=="\0\0\0\0"&&s.set(e,a),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return l0(this.chunk.getString(e+12,r))}parseText(e,r){return l0(this.chunk.getString(e+8,r-8))}parseSig(e){return l0(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),i=r.getUint32(e+12),a=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(a+0,2),f=r.getString(a+2,2),m=r.getUint32(a+4),p=r.getUint32(a+8)+e,y=l0(r.getUnicodeString(p,m));s.push({lang:d,country:f,text:y}),a+=i}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Mt(vv,"type","icc"),Mt(vv,"multiSegment",!0),Mt(vv,"headerLength",18);const g6e={4:sl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:sl,16:sl,20:sl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,i=t.getUint16(e+4),a=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,i,a,s,c))},36:sl,40:sl,48:sl,52:sl,64:(t,e)=>t.getUint32(e),80:sl};function sl(t,e){return l0(t.getString(e,4))}qn.set("icc",vv),Pn(ui,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Zy={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},iz={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};Pn(Zs,"icc",[[4,Zy],[12,iz],[40,Object.assign({},Zy,iz)],[48,Zy],[80,Zy],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Jy extends Gs{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let i,a=this.containsIptc8bim(e,r,n);if(a!==void 0)return i=e.getUint8(r+a+7),i%2!=0&&(i+=1),i===0&&(i=4),a+8+i}static containsIptc8bim(e,r,n){for(let i=0;i<n;i++)if(this.isIptcSegmentHead(e,r+i))return i}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let i=0;i<r;i++)if(this.chunk.getUint8(i)===28&&this.chunk.getUint8(i+1)===2){n=!0;let a=this.chunk.getUint16(i+3),s=this.chunk.getUint8(i+2),c=this.chunk.getLatin1String(i+5,a);e.set(s,this.pluralizeValue(e.get(s),c)),i+=4+a}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Mt(Jy,"type","iptc"),Mt(Jy,"translateValues",!1),Mt(Jy,"reviveValues",!1),qn.set("iptc",Jy),Pn(ui,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),Pn(Zs,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Cm=["Monday","Tuesday","Wednesday","Thursday","Friday"],y6e=({user:t})=>{const e=Vi(),{confirm:r}=uu(),n=V.useMemo(()=>Fe.getWeekId(),[]),[i,a]=V.useState([]),[s,c]=V.useState("Monday"),[d,f]=V.useState(!1),m=V.useRef(null),[p,y]=V.useState(!1),b=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,S]=V.useState(t.classType||b[0]||"Uncategorized");V.useEffect(()=>{const E=new Date().toLocaleDateString("en-US",{weekday:"long"});Cm.includes(E)&&c(E)},[]),V.useEffect(()=>{const E=Fe.subscribeToEvidence(t.id,n,a);return()=>E()},[t.id,n]);const w=V.useMemo(()=>{const E=b[0]||"Uncategorized";return i.filter(A=>A.classType?A.classType===T:T===E)},[i,T,b]),N=E=>w.find(A=>A.dayOfWeek===E),I=E=>E?new Date(E).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,C=async E=>{var R;const A=(R=E.target.files)==null?void 0:R[0];if(A){f(!0);try{let F=null;if(A.type.startsWith("image/"))try{const Y=await f6e.parse(A,["DateTimeOriginal"])||{};Y.DateTimeOriginal&&(F=Y.DateTimeOriginal.toISOString())}catch(Y){console.warn("EXIF extraction failed",Y)}const D=T.replace(/[^a-zA-Z0-9]/g,"_"),L=Math.random().toString(36).substring(2,9),M=Km(Wm,`evidence/${t.id}/${n}/${D}_${s}_${L}`);await mT(M,A);const Q=await zv(M),Z=N(s),ee={id:`${t.id}_${n}_${s}_${D}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Q,timestamp:new Date().toISOString(),exifDate:F,reflection:(Z==null?void 0:Z.reflection)||""};await Fe.uploadEvidence(ee)}catch(F){e.error("Upload failed: "+(F instanceof Error?F.message:"Unknown error"))}finally{f(!1),m.current&&(m.current.value="")}}},z=async(E,A)=>{const R=N(E);R&&R.reflection!==A&&await Fe.uploadEvidence({...R,reflection:A})},O=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new JX,R=A.internal.pageSize.getWidth(),F=A.internal.pageSize.getHeight(),D=20,L=R-D*2,M=F-D;A.setFillColor(15,7,32),A.rect(0,0,R,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",D,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,D,28),A.text(`Class: ${T}`,D,33),A.text(`Cycle ID: ${n}`,D,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,R-D,33,{align:"right"});let Q=55;const Z=[...w].sort((W,ee)=>Cm.indexOf(W.dayOfWeek)-Cm.indexOf(ee.dayOfWeek));for(const W of Z){let ee=null,Y="JPEG",ye=0,oe=0,X=!1;try{const Ne=await fetch(W.imageUrl);if(!Ne.ok)throw new Error(`Image fetch failed: ${Ne.statusText}`);const ce=await Ne.blob();ee=await new Promise((Qe,ut)=>{const dt=new FileReader;dt.onloadend=()=>Qe(dt.result),dt.onerror=ut,dt.readAsDataURL(ce)}),ce.type==="image/png"&&(Y="PNG"),ce.type==="image/webp"&&(Y="WEBP");const Ce=A.getImageProperties(ee),Ee=Ce.width/Ce.height,ct=100;ye=L,oe=ye/Ee,oe>ct&&(oe=ct,ye=oe*Ee)}catch(Ne){console.warn("Image processing error for PDF",Ne),X=!0,oe=15}const J=20+oe+12;Q+J>M&&(A.addPage(),Q=D),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(D,Q,R-D,Q),Q+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(W.dayOfWeek.toUpperCase(),D,Q);const le=I(W.exifDate)||I(W.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${le}`,R-D,Q,{align:"right"}),Q+=10,!X&&ee){const Ne=(R-ye)/2;A.addImage(ee,Y,Ne,Q,ye,oe),Q+=oe+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",D,Q),Q+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const pe=W.reflection||"No reflection logged for this cycle.",be=A.splitTextToSize(pe,L),Je=be.length*5+15;Q+Je>M&&(A.addPage(),Q=D),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",D,Q),Q+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(be,D,Q),Q+=be.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Fe.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},B=N(s);return u.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[u.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[u.jsx(DO,{className:"w-7 h-7"})," Weekly Evidence Log"]}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.length>1?u.jsxs("div",{className:"relative group",children:[u.jsx("select",{value:T,onChange:E=>S(E.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:b.map(E=>u.jsx("option",{value:E,children:E},E))}),u.jsx(Ea,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):u.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),u.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),u.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),u.jsxs("button",{onClick:O,disabled:p||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[p?u.jsx(Ha,{className:"w-5 h-5 animate-spin"}):u.jsx(Cae,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),u.jsx("input",{type:"file",ref:m,onChange:C,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:Cm.map(E=>{const A=N(E),R=s===E;return u.jsxs("button",{onClick:()=>c(E),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${R?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${R?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",Cm.indexOf(E)+1]}),u.jsx("span",{className:"font-bold text-sm",children:E}),A&&u.jsx("div",{className:`absolute top-2 right-2 ${R?"text-emerald-200":"text-emerald-500"}`,children:u.jsx(Fv,{className:"w-3 h-3"})})]},E)})}),u.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(Bae,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),B&&u.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[u.jsx(xs,{className:"w-3 h-3"}),I(B.exifDate)||I(B.timestamp)]})]}),u.jsx("div",{className:"flex-1 bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:B?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:B.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),u.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},children:[u.jsx(Ep,{className:"w-8 h-8 text-emerald-400"}),u.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):u.jsxs("button",{onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?u.jsx(Ha,{className:"w-10 h-10 animate-spin text-emerald-500"}):u.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:u.jsx(DO,{className:"w-8 h-8"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),u.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),u.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[u.jsx("div",{className:"mb-2",children:u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(C8,{className:"w-4 h-4"})," Daily Reflection"]})}),B?u.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:B.reflection,onBlur:E=>z(s,E.target.value)},s):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[u.jsx("div",{className:"mb-2 opacity-30",children:u.jsx(m0,{className:"w-6 h-6"})}),u.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),u.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},v6e=({user:t})=>{const e=Vi(),[r,n]=V.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[i,a]=V.useState(""),[s,c]=V.useState(""),[d,f]=V.useState("");V.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(b,T)=>{try{return Yv.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");a(y)},[r.content]);const m=async()=>{await Fe.saveLabReport(r),await Fe.awardXP(t.id,25),e.success("Report saved!")},p=()=>{const y=parseFloat(s),b=parseFloat(d);!isNaN(y)&&!isNaN(b)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:b}].sort((S,w)=>S.x-w.x)})),c(""),f(""))};return u.jsxs("div",{className:"h-full flex flex-col gap-6",children:[u.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[u.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[u.jsx(Ix,{className:"w-6 h-6"})," Physics Laboratory"]}),u.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[u.jsx(jF,{className:"w-4 h-4"})," Save Report"]})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:u.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),u.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[u.jsxs("div",{className:"w-1/3",children:[u.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),u.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>f(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),u.jsx("button",{onClick:p,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(MH,{width:"100%",height:"100%",children:u.jsxs(S3e,{children:[u.jsx(UK,{strokeDasharray:"3 3",stroke:"#333"}),u.jsx(_2,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),u.jsx(S2,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),u.jsx(mo,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),u.jsx(Wg,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),u.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:u.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[u.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(b=>({...b,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),u.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:Cq.sanitize(i,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},b6e=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],x6e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],w6e=({userId:t,classType:e,onClose:r})=>{var z,O,B,E,A;const[n,i]=V.useState(null),[a,s]=V.useState(!0);if(V.useEffect(()=>{(async()=>{const F=await Fe.getPublicProfile(t);i(F),s(!1)})()},[t]),a)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:u.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:u.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(z=n.settings)==null?void 0:z.privacyMode,f=d?c.codename||"Unknown Agent":n.name,m=c.level||1,p=Sh(m),y=cW(m),{equipped:b,appearance:T}=k0(n,e),S=tE({gamification:{...c,equipped:b}}),w=Th(b),N=((O=c.classXp)==null?void 0:O[e])||0,I=Object.values(b).filter(Boolean),C=lW(I);return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:u.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[u.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:u.jsx(Ya,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-32 shrink-0",children:u.jsx(ex,{equipped:b,appearance:T})}),u.jsxs("div",{children:[u.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:f}),u.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",m]}),u.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Hn,{className:"w-3 h-3 text-cyan-400"}),u.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[N.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(vs,{className:"w-3 h-3 text-yellow-400"}),u.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(jo,{className:"w-3 h-3"})," Stats"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:b6e.map(({key:R,label:F,color:D,icon:L})=>{const M=S[R]||0;return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[u.jsx("span",{className:"text-sm",children:L}),u.jsx("span",{className:"text-xs text-gray-400",children:F}),u.jsx("span",{className:`text-sm font-bold ${D} ml-auto`,children:M})]},R)})})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(vs,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:x6e.map(R=>{const F=b[R];if(!F)return u.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[u.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:R}),u.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},R);const D=Xr(F.rarity);return u.jsxs("div",{className:`p-2 rounded-lg border ${D.border} ${D.bg}`,children:[u.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:R}),u.jsx("div",{className:`text-xs font-bold truncate ${D.text}`,children:F.name}),u.jsx("div",{className:"text-[9px] text-gray-500",children:F.rarity})]},R)})})]}),C.length>0&&u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(R8,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),C.map(({set:R,activeBonus:F})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[u.jsx("div",{className:"text-xs font-bold text-purple-400",children:R.name}),u.jsxs("div",{className:"text-[10px] text-gray-400",children:[F.label,": ",F.effects.map(D=>`+${D.value} ${D.stat}`).join(", ")]})]},R.id))]}),(((B=c.unlockedAchievements)==null?void 0:B.length)||0)>0&&u.jsxs("div",{className:"p-6",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(j0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(E=c.unlockedAchievements)==null?void 0:E.length,")"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:(A=c.unlockedAchievements)==null?void 0:A.slice(0,12).map(R=>u.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:R.replace(/_/g," ")},R))})]})]})})},_6e=()=>u.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>u.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[u.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),u.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),u.jsxs("div",{className:"space-y-2 text-right",children:[u.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),S6e=()=>{const[t,e]=V.useState([]),[r,n]=V.useState(Cr.AP_PHYSICS),[i,a]=V.useState(!0),[s,c]=V.useState(null);V.useEffect(()=>{const m=Fe.subscribeToLeaderboard(p=>{e(p),a(!1)});return()=>m()},[]);const d=V.useMemo(()=>{const m=new Set;return t.forEach(p=>{var y;return(y=p.enrolledClasses)==null?void 0:y.forEach(b=>m.add(b))}),Array.from(m).sort()},[t]),f=V.useMemo(()=>t.filter(m=>{var p;return(p=m.enrolledClasses)==null?void 0:p.includes(r)}).sort((m,p)=>{var T,S,w,N;const y=((S=(T=m.gamification)==null?void 0:T.classXp)==null?void 0:S[r])||0;return(((N=(w=p.gamification)==null?void 0:w.classXp)==null?void 0:N[r])||0)-y}).slice(0,10),[t,r]);return u.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),u.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),u.jsxs("div",{className:"inline-block relative",children:[u.jsxs("select",{value:r,onChange:m=>n(m.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[d.map(m=>u.jsx("option",{value:m,children:m},m)),d.length===0&&u.jsx("option",{children:r})]}),u.jsx(Ea,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?u.jsx(_6e,{}):u.jsxs(u.Fragment,{children:[f.length>=3&&u.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(m=>{var O,B,E,A,R;const p=f[m];if(!p)return null;const y=(O=p.settings)==null?void 0:O.privacyMode,b=y?((B=p.gamification)==null?void 0:B.codename)||"Unknown Agent":p.name,T=((A=(E=p.gamification)==null?void 0:E.classXp)==null?void 0:A[r])||0,S=((R=p.gamification)==null?void 0:R.level)||1,w=Sh(S),N=m===0,I=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],z=[{icon:u.jsx(j0,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:u.jsx(Ay,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:u.jsx(Ay,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return u.jsxs("div",{className:`flex flex-col items-center ${N?"order-2":m===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+m*.15}s both`},children:[u.jsxs("div",{className:`relative mb-2 ${N?"mb-3":""}`,children:[u.jsx("div",{className:`${C[m]} rounded-full p-0.5 bg-white/10 ring-2 ${z[m].ring} relative ${N?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:u.jsx("img",{src:p.avatarUrl,alt:b,className:`w-full h-full rounded-full border-2 ${w.tierColor.split(" ")[0]} object-cover`})}),u.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${z[m].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:z[m].icon})]}),u.jsxs("div",{className:`text-center ${N?"mt-2":"mt-1"}`,children:[u.jsx("div",{className:`font-bold truncate max-w-[100px] ${N?"text-sm text-white":"text-xs text-gray-300"} ${y?"italic":""}`,children:b}),u.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${N?"text-xl":"text-base"}`,children:T.toLocaleString()}),u.jsx("div",{className:`text-[9px] font-mono uppercase ${w.tierColor.split(" ")[1]}`,children:w.rankName}),u.jsxs("button",{onClick:()=>c(p.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[u.jsx(Sp,{className:"w-3 h-3"})," Inspect"]})]}),u.jsx("div",{className:`${I[m]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${m===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":m===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},p.id)})}),u.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[f.slice(f.length>=3?3:0).map((m,p)=>{var I,C,z,O,B;const y=f.length>=3?p+3:p,b=(I=m.settings)==null?void 0:I.privacyMode,T=b?((C=m.gamification)==null?void 0:C.codename)||"Unknown Agent":m.name,S=((O=(z=m.gamification)==null?void 0:z.classXp)==null?void 0:O[r])||0,w=((B=m.gamification)==null?void 0:B.level)||1,N=Sh(w);return u.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*y}s both`},children:[u.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[y<3&&y===0&&u.jsx(j0,{className:"w-6 h-6 text-yellow-400 mx-auto"}),y<3&&y===1&&u.jsx(Ay,{className:"w-6 h-6 text-gray-300 mx-auto"}),y<3&&y===2&&u.jsx(Ay,{className:"w-6 h-6 text-amber-600 mx-auto"}),y>=3&&`#${y+1}`]}),u.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[u.jsx("img",{src:m.avatarUrl,alt:T,className:`w-full h-full rounded-full border-2 ${N.tierColor.split(" ")[0]}`}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:w})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("h3",{className:`text-base font-bold truncate ${b?"text-purple-300 italic":"text-white"}`,children:[T,b&&u.jsx(Tp,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${N.tierColor.split(" ")[1]}`,children:N.rankName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:S.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),u.jsx("button",{onClick:()=>c(m.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:u.jsx(Sp,{className:"w-4 h-4"})})]},m.id)}),f.length===0&&u.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[u.jsx(tu,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",r,"."]})]})]})}),s&&u.jsx(w6e,{userId:s,classType:r,onClose:()=>c(null)})]})};class T6e extends ae.Component{constructor(r){super(r);Ik(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),u.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&u.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),u.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[u.jsx(Hv,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const az={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:u.jsx(xh,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:u.jsx(SF,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:u.jsx(R8,{className:"w-4 h-4"})}},A6e={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},PS=3;function DS(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[r[n],r[i]]=[r[i],r[n]]}return r.slice(0,e)}const E6e=({assignment:t})=>{const e=Vi(),[r,n]=V.useState([]),[i,a]=V.useState([]),[s,c]=V.useState(!0),[d,f]=V.useState(!1),[m,p]=V.useState({}),[y,b]=V.useState(1),[T,S]=V.useState(null),[w,N]=V.useState(new Set),I=V.useCallback(D=>{const L=DS(D.filter(Z=>Z.tier===1),PS),M=DS(D.filter(Z=>Z.tier===2),PS),Q=DS(D.filter(Z=>Z.tier===3),PS);a([...L,...M,...Q]),p({}),S(null)},[]);V.useEffect(()=>{(async()=>{var L;c(!0),f(!1);try{const M=await Ti(ft(Ve,"question_banks",t.id));if(!M.exists()){f(!0);return}const Q=M.data().questions||[];n(Q),I(Q)}catch(M){console.error("Failed to load question bank:",M),f(!0);return}finally{c(!1)}try{const M=(L=Zz().currentUser)==null?void 0:L.uid;if(M){const Q=await Ti(ft(Ve,"review_progress",`${M}_${t.id}`));Q.exists()&&N(new Set(Q.data().answeredQuestions||[]))}}catch(M){console.warn("Could not load review progress:",M)}})()},[t.id,I]);const C=()=>{r.length>0&&I(r)},z=(D,L,M)=>{const Q=m[D];if(!(Q!=null&&Q.submitted))if(M==="multiple_select"||M==="ranking"){const Z=(Q==null?void 0:Q.selected)||[],W=Z.includes(L)?Z.filter(ee=>ee!==L):[...Z,L];p(ee=>({...ee,[D]:{...ee[D],selected:W,submitted:!1,correct:!1,xpAwarded:!1}}))}else p(Z=>({...Z,[D]:{selected:L,submitted:!1,correct:!1,xpAwarded:!1}}))},O=(D,L)=>{var M;(M=m[D])!=null&&M.submitted||p(Q=>({...Q,[D]:{...Q[D],linkedSelected:L}}))},B=async D=>{const L=m[D.id];if(!(L!=null&&L.selected))return;let M=!1;if(D.type==="multiple_select"||D.type==="ranking"){const Q=L.selected,Z=D.correctAnswer;M=Q.length===Z.length&&Q.every((W,ee)=>W===Z[ee])}else D.type==="linked_mc"?M=L.selected===D.correctAnswer&&(!D.linkedFollowUp||L.linkedSelected===D.linkedFollowUp.correctAnswer):M=L.selected===D.correctAnswer;if(M)if(w.has(D.id))p(Q=>({...Q,[D.id]:{...Q[D.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{p(Q=>({...Q,[D.id]:{...Q[D.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await bF({assignmentId:t.id,questionId:D.id,xpAmount:D.xp,classType:t.classType})).data.awarded?(e.success(`+${D.xp} XP earned!`),p(W=>({...W,[D.id]:{...W[D.id],submitted:!0,correct:!0,xpAwarded:!0}})),N(W=>new Set([...W,D.id]))):e.success("Correct! (XP already claimed)")}catch(Q){console.error("XP award error:",Q)}}else p(Q=>({...Q,[D.id]:{...Q[D.id],submitted:!0,correct:!1,xpAwarded:!1}}))},E=V.useMemo(()=>i.filter(D=>D.tier===y),[i,y]),A=V.useMemo(()=>Object.entries(m).filter(([,D])=>D.correct&&D.xpAwarded).reduce((D,[L])=>{var M;return D+(((M=i.find(Q=>Q.id===L))==null?void 0:M.xp)||0)},0),[m,i]),R=V.useMemo(()=>i.reduce((D,L)=>D+L.xp,0),[i]),F=V.useMemo(()=>i.length>0&&i.every(D=>{var L;return(L=m[D.id])==null?void 0:L.submitted}),[i,m]);return s?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(Ha,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(xh,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(xh,{className:"w-5 h-5 text-purple-400"}),u.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),u.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Hn,{className:"w-4 h-4 text-yellow-400"}),u.jsx("span",{className:"text-sm font-bold text-yellow-400",children:A}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",R," XP"]})]}),u.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[u.jsx(Hv,{className:"w-3 h-3"})," New Set"]})]})]}),u.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(D=>{const L=az[D],M=i.filter(W=>W.tier===D),Q=M.filter(W=>{var ee;return(ee=m[W.id])==null?void 0:ee.submitted}).length,Z=M.filter(W=>{var ee;return(ee=m[W.id])==null?void 0:ee.correct}).length;return u.jsxs("button",{onClick:()=>b(D),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===D?`${L.bg} ${L.color} ${L.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[L.icon,u.jsx("span",{className:"hidden sm:inline",children:L.name}),u.jsxs("span",{className:"sm:hidden",children:["Tier ",D]}),Q>0&&u.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${Z===M.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[Z,"/",M.length]})]},D)})}),F&&u.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),u.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[u.jsx(Hv,{className:"w-3 h-3"})," New Questions"]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[E.map((D,L)=>{const M=m[D.id],Q=T===D.id,Z=M==null?void 0:M.submitted,W=M==null?void 0:M.correct,ee=az[D.tier];return u.jsxs("div",{className:`rounded-2xl border transition-all ${Z?W?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Q?`${ee.border} ${ee.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[u.jsxs("button",{onClick:()=>S(Q?null:D.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${Z?W?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${ee.bg} ${ee.color}`}`,children:Z?W?u.jsx(Tn,{className:"w-4 h-4"}):u.jsx(_p,{className:"w-4 h-4"}):L+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[u.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${ee.color}`,children:D.bloomsLevel}),u.jsx("span",{className:"text-[9px] text-gray-600",children:""}),u.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:A6e[D.type]||D.type}),u.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Hn,{className:"w-3 h-3"}),D.xp," XP"]})]}),u.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:D.stem})]}),u.jsx(m0,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Q?"rotate-90":""}`})]}),Q&&u.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[D.context&&u.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:D.context}),D.type==="ranking"?u.jsx(k6e,{question:D,answer:M,onSelect:z}):D.type==="multiple_select"?u.jsx(j6e,{question:D,answer:M,onSelect:z}):u.jsx(N6e,{question:D,answer:M,onSelect:z}),D.type==="linked_mc"&&D.linkedFollowUp&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[u.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),u.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:D.linkedFollowUp.stem}),u.jsx("div",{className:"space-y-2",children:D.linkedFollowUp.options.map(Y=>{const ye=(M==null?void 0:M.linkedSelected)===Y.id,oe=Z,X=Y.id===D.linkedFollowUp.correctAnswer;return u.jsxs("button",{onClick:()=>O(D.id,Y.id),disabled:Z,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${oe?X?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ye?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ye?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),Z?u.jsxs("div",{className:`p-4 rounded-xl border ${W?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[W?u.jsx(Tn,{className:"w-5 h-5 text-emerald-400"}):u.jsx(_p,{className:"w-5 h-5 text-red-400"}),u.jsx("span",{className:`font-bold text-sm ${W?"text-emerald-400":"text-red-400"}`,children:W?`Correct! +${D.xp} XP`:"Incorrect"})]}),u.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:D.explanation})]}):u.jsx("button",{onClick:()=>B(D),disabled:!(M!=null&&M.selected)||Array.isArray(M==null?void 0:M.selected)&&M.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},D.id)}),E.length===0&&u.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[u.jsx(Tp,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},N6e=({question:t,answer:e,onSelect:r})=>u.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const i=(e==null?void 0:e.selected)===n.id,a=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return u.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":i?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":i?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),j6e=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=t.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(a=>{const s=n.includes(a.id),c=e==null?void 0:e.submitted,d=i.includes(a.id);return u.jsxs("button",{onClick:()=>r(t.id,a.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&u.jsx(Tn,{className:"w-3 h-3 text-white"})}),u.jsxs("span",{children:[u.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[a.id.toUpperCase(),"."]})," ",a.text]})]},a.id)})]})},k6e=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],i=e==null?void 0:e.submitted,a=t.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[u.jsx(_ae,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(m=>m.id===s),f=i&&a[c]===s;return u.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${i?f?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return u.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?u.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):u.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function C6e(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${Yv.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return Yv.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,i)=>`<code class="math-inline">${n} = ${i}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const O6e=({assignment:t,onComplete:e})=>{const[r,n]=V.useState(null),[i,a]=V.useState(!0),[s,c]=V.useState(!1),d=V.useRef(Vv()),f=V.useRef(Date.now()),m=V.useRef(e),[p,y]=V.useState(!0),[b,T]=V.useState(0);V.useEffect(()=>{m.current=e},[e]);const S=V.useCallback(()=>{f.current=Date.now(),p||y(!0)},[p]);V.useEffect(()=>{const N=setInterval(()=>{Date.now()-f.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),p||y(!0)):p&&y(!1)},1e3);return()=>clearInterval(N)},[p]),V.useEffect(()=>{const N=["mousemove","keydown","scroll","click"];return N.forEach(I=>window.addEventListener(I,S)),()=>{N.forEach(I=>window.removeEventListener(I,S))}},[S]),V.useEffect(()=>()=>{m.current(d.current)},[]),V.useEffect(()=>{(async()=>{a(!0);try{const I=await Ti(ft(Ve,"reading_materials",t.id));I.exists()?n(I.data()):c(!0)}catch(I){console.error("Failed to load reading material:",I),c(!0)}finally{a(!1)}})()},[t.id]);const w=V.useMemo(()=>r?r.sections.map(N=>({title:N.title,html:C6e(N.content)})):[],[r]);return i?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(Ha,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(Xs,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?u.jsx(k8,{className:"w-4 h-4"}):u.jsx(xs,{className:"w-4 h-4 animate-pulse"}),p?"Reading Active":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(b/60),"m ",b%60,"s"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&u.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!p&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(ws,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&u.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),u.jsx("div",{className:"space-y-10",children:w.map((N,I)=>u.jsxs("div",{className:"group",children:[u.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[u.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:I+1}),N.title]}),u.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:N.html}})]},I))}),u.jsx("div",{className:"mt-12 mb-4 text-center",children:u.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[u.jsx(Xs,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},sz={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},I6e=()=>{var de;const[t,e]=V.useState(null),[r,n]=V.useState("Dashboard"),[i,a]=V.useState([]),[s,c]=V.useState([]),[d,f]=V.useState([]),[m,p]=V.useState([]),[y,b]=V.useState([]),[T,S]=V.useState(null),[w,N]=V.useState("STUDENT"),[I,C]=V.useState("WORK"),[z,O]=V.useState(!1),[B,E]=V.useState(!1),[A,R]=V.useState(!0),[F,D]=V.useState(!1),L=V.useMemo(()=>{const J=new Map;return s.forEach(le=>{const pe=J.get(le.userId)||[];pe.push(le),J.set(le.userId,pe)}),d.map(le=>{const pe=J.get(le.id)||[],be=pe.length,Je=Math.round(pe.reduce((Ne,ce)=>{var Ce;return Ne+(((Ce=ce.metrics)==null?void 0:Ce.engagementTime)||0)},0)/60);return{...le,stats:{problemsCompleted:be,avgScore:0,rawAccuracy:0,totalTime:Je}}})},[d,s]),M=V.useMemo(()=>i.find(J=>J.id===T)||null,[i,T]);V.useEffect(()=>{if(O(!1),E(!1),!T)return;const J=Ti(ft(Ve,"question_banks",T)).then(pe=>{pe.exists()&&(pe.data().questions||[]).length>0&&O(!0)}).catch(()=>{}),le=Ti(ft(Ve,"reading_materials",T)).then(pe=>{pe.exists()&&E(!0)}).catch(()=>{});Promise.all([J,le]).then(()=>{})},[T]),V.useEffect(()=>{let J=null;const le=kZ(yT,async pe=>{pe?(await Q(pe),J=xi(ft(Ve,"users",pe.uid),be=>{be.exists()&&e(Je=>({...Je||{},...be.data(),id:pe.uid}))})):(e(null),J&&J(),R(!1))});return()=>{le(),J&&J()}},[]),V.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Li.ADMIN)){const J=Fe.subscribeToAssignments(a),le=Fe.subscribeToClassConfigs(b),pe=[J,le];return t.role===Li.ADMIN?(pe.push(Fe.subscribeToSubmissions(c)),pe.push(Fe.subscribeToUsers(f)),pe.push(Fe.subscribeToWhitelist(p))):pe.push(Fe.subscribeToUserSubmissions(t.id,c)),()=>pe.forEach(be=>be())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),V.useEffect(()=>{(t==null?void 0:t.role)===Li.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),V.useEffect(()=>{var J;qle(((J=t==null?void 0:t.settings)==null?void 0:J.soundEffects)!==!1)},[(de=t==null?void 0:t.settings)==null?void 0:de.soundEffects]);const Q=async J=>{try{const le=ft(Ve,"users",J.uid),pe=await Ti(le),be=await Ti(ft(Ve,"allowed_emails",J.email||"")),Ne=(await J.getIdTokenResult()).claims.admin===!0||J.email===cse,ce=be.exists()||Ne,Ce=be.exists()?be.data():null,Ee=(Ce==null?void 0:Ce.classType)||Cr.UNCATEGORIZED,ct=(Ce==null?void 0:Ce.classTypes)||(Ee!==Cr.UNCATEGORIZED?[Ee]:[]);if(pe.exists()){const Qe=pe.data(),ut={lastLoginAt:new Date().toISOString(),isWhitelisted:ce};if(Ne&&(ut.role="ADMIN"),!ce&&!Ne&&(ut.enrolledClasses=[]),ce&&ct.length>0){const dt=Qe.enrolledClasses||[],Ut=Array.from(new Set([...dt,...ct]));Ut.length!==dt.length&&(ut.enrolledClasses=Ut,(!Qe.classType||Qe.classType===Cr.UNCATEGORIZED)&&(ut.classType=ct[0]))}await Lr(le,ut)}else{const Qe={email:J.email,name:J.displayName||"Student",avatarUrl:J.photoURL||"",role:Ne?"ADMIN":"STUDENT",classType:Ee,enrolledClasses:ce?ct:[],isWhitelisted:ce,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Ji(le,Qe)}}catch(le){console.error(le)}finally{R(!1)}},Z=async()=>{await CZ(yT),e(null),S(null)},W=J=>{C("WORK"),S(J)},ee=V.useRef(M),Y=V.useRef(t);V.useEffect(()=>{ee.current=M},[M]),V.useEffect(()=>{Y.current=t},[t]);const ye=async J=>{const le=Y.current,pe=ee.current;if(!(!le||!pe||le.role===Li.ADMIN)&&!(J.engagementTime<10))try{await Fe.submitEngagement(le.id,le.name,pe.id,pe.title,J,pe.classType)}catch(be){console.error("Engagement submission failed:",be)}},oe=V.useMemo(()=>{const J={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const le=y.find(pe=>pe.className===t.classType);if(le)return le.features}return J},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return u.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return u.jsx(Kle,{});if(!t.isWhitelisted&&t.role!==Li.ADMIN)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[u.jsx(Rx,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),u.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",OF," for authorization."]}),u.jsx("button",{onClick:Z,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const X=t.role===Li.ADMIN||oe.physicsTools,ne=t.role===Li.ADMIN||oe.communications;return u.jsx(T6e,{children:u.jsx(Wle,{children:u.jsx(fse,{children:u.jsxs(u.Fragment,{children:[u.jsx(mse,{}),X&&u.jsx(mce,{onToggleChat:ne?()=>D(!F):void 0}),ne&&u.jsx(yce,{user:t,isOpen:F,onClose:()=>D(!1),assignments:i,classConfigs:y,onOpenResource:J=>{W(J)}}),u.jsx(gse,{user:t,onLogout:Z,activeTab:r,setActiveTab:n,children:M?u.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[M.title,t.role===Li.ADMIN&&u.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),u.jsxs("div",{className:"flex gap-4 mt-2",children:[u.jsx("button",{onClick:()=>C("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${I==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),z&&u.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(xh,{className:"w-3.5 h-3.5"})," Review"]}),B&&u.jsxs("button",{onClick:()=>C("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(Xs,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&u.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[u.jsx("button",{onClick:()=>N("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),u.jsx("button",{onClick:()=>N("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),u.jsxs("button",{onClick:()=>{S(null),C("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[u.jsx(wae,{className:"w-4 h-4"})," Exit"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[I==="WORK"&&u.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Gle,{onComplete:ye,contentUrl:M.contentUrl,htmlContent:M.htmlContent,userId:t.id,assignmentId:M.id,classType:M.classType})}),w==="ADMIN"&&t.role===Li.ADMIN&&u.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[u.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[u.jsx(Ap,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:u.jsx(tu,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(J=>J.assignmentId===M.id&&!J.isArchived).length}),u.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),u.jsx("button",{onClick:()=>D(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),I==="REVIEW"&&u.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(E6e,{assignment:M})}),I==="STUDY"&&u.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(O6e,{assignment:M,onComplete:ye})})]})]}):u.jsx("div",{className:"h-full",children:u.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Li.ADMIN&&u.jsxs(u.Fragment,{children:[r==="Dashboard"&&u.jsx(Jle,{users:L,assignments:i,submissions:s}),r==="User Management"&&u.jsx(ece,{users:L,whitelistedEmails:m,classConfigs:y,onWhitelist:async(J,le)=>Fe.addToWhitelist(J,le)}),r==="Admin Panel"&&u.jsx(ace,{assignments:i,submissions:s,onCreateAssignment:async J=>{J.title&&await Fe.addAssignment(J)},classConfigs:y,onPreviewAssignment:J=>{N("STUDENT"),W(J)}}),r==="XP Command"&&u.jsx(hce,{users:d})]}),t.role===Li.STUDENT&&u.jsxs(u.Fragment,{children:[r in sz&&u.jsx(H3e,{user:t,assignments:i,submissions:s,enabledFeatures:oe,onNavigate:n,onStartAssignment:W,studentTab:sz[r]}),r==="Forensics"&&oe.evidenceLocker&&u.jsx(y6e,{user:t}),r==="Physics Lab"&&oe.physicsLab&&u.jsx(v6e,{user:t}),r==="Leaderboard"&&oe.leaderboard&&u.jsx(S6e,{})]})]},r)})})]})})})})},SW=document.getElementById("root");if(!SW)throw new Error("Could not find root element to mount to");const R6e=uQ.createRoot(SW);R6e.render(u.jsx(ae.StrictMode,{children:u.jsx(I6e,{})}));
