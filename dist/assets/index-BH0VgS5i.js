var sZ=Object.defineProperty;var oZ=(t,e,r)=>e in t?sZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var GC=(t,e,r)=>oZ(t,typeof e!="symbol"?e+"":e,r);import{jsPDF as lZ}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E5={exports:{}},Rp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WC;function cZ(){if(WC)return Rp;WC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:t,type:n,key:s,ref:a!==void 0?a:null,props:i}}return Rp.Fragment=e,Rp.jsx=r,Rp.jsxs=r,Rp}var KC;function uZ(){return KC||(KC=1,E5.exports=cZ()),E5.exports}var o=uZ(),j5={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC;function dZ(){if(QC)return ir;QC=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function v(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function j(X,ne,re){this.props=X,this.context=ne,this.refs=w,this.updater=re||T}j.prototype.isReactComponent={},j.prototype.setState=function(X,ne){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ne,"setState")},j.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function R(){}R.prototype=j.prototype;function I(X,ne,re){this.props=X,this.context=ne,this.refs=w,this.updater=re||T}var L=I.prototype=new R;L.constructor=I,S(L,j.prototype),L.isPureReactComponent=!0;var C=Array.isArray;function P(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function E(X,ne,re){var Ae=re.ref;return{$$typeof:t,type:X,key:ne,ref:Ae!==void 0?Ae:null,props:re}}function V(X,ne){return E(X.type,ne,X.props)}function D(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function U(X){var ne={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(re){return ne[re]})}var $=/\/+/g;function Q(X,ne){return typeof X=="object"&&X!==null&&X.key!=null?U(""+X.key):ne.toString(36)}function K(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(P,P):(X.status="pending",X.then(function(ne){X.status==="pending"&&(X.status="fulfilled",X.value=ne)},function(ne){X.status==="pending"&&(X.status="rejected",X.reason=ne)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function H(X,ne,re,Ae,Se){var ze=typeof X;(ze==="undefined"||ze==="boolean")&&(X=null);var He=!1;if(X===null)He=!0;else switch(ze){case"bigint":case"string":case"number":He=!0;break;case"object":switch(X.$$typeof){case t:case e:He=!0;break;case p:return He=X._init,H(He(X._payload),ne,re,Ae,Se)}}if(He)return Se=Se(X),He=Ae===""?"."+Q(X,0):Ae,C(Se)?(re="",He!=null&&(re=He.replace($,"$&/")+"/"),H(Se,ne,re,"",function(he){return he})):Se!=null&&(D(Se)&&(Se=V(Se,re+(Se.key==null||X&&X.key===Se.key?"":(""+Se.key).replace($,"$&/")+"/")+He)),ne.push(Se)),1;He=0;var st=Ae===""?".":Ae+":";if(C(X))for(var W=0;W<X.length;W++)Ae=X[W],ze=st+Q(Ae,W),He+=H(Ae,ne,re,ze,Se);else if(W=v(X),typeof W=="function")for(X=W.call(X),W=0;!(Ae=X.next()).done;)Ae=Ae.value,ze=st+Q(Ae,W++),He+=H(Ae,ne,re,ze,Se);else if(ze==="object"){if(typeof X.then=="function")return H(K(X),ne,re,Ae,Se);throw ne=String(X),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return He}function J(X,ne,re){if(X==null)return X;var Ae=[],Se=0;return H(X,Ae,"","",function(ze){return ne.call(re,ze,Se++)}),Ae}function ie(X){if(X._status===-1){var ne=X._result;ne=ne(),ne.then(function(re){(X._status===0||X._status===-1)&&(X._status=1,X._result=re)},function(re){(X._status===0||X._status===-1)&&(X._status=2,X._result=re)}),X._status===-1&&(X._status=0,X._result=ne)}if(X._status===1)return X._result.default;throw X._result}var pe=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},me={map:J,forEach:function(X,ne,re){J(X,function(){ne.apply(this,arguments)},re)},count:function(X){var ne=0;return J(X,function(){ne++}),ne},toArray:function(X){return J(X,function(ne){return ne})||[]},only:function(X){if(!D(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return ir.Activity=m,ir.Children=me,ir.Component=j,ir.Fragment=r,ir.Profiler=a,ir.PureComponent=I,ir.StrictMode=n,ir.Suspense=d,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,ir.__COMPILER_RUNTIME={__proto__:null,c:function(X){return N.H.useMemoCache(X)}},ir.cache=function(X){return function(){return X.apply(null,arguments)}},ir.cacheSignal=function(){return null},ir.cloneElement=function(X,ne,re){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ae=S({},X.props),Se=X.key;if(ne!=null)for(ze in ne.key!==void 0&&(Se=""+ne.key),ne)!A.call(ne,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&ne.ref===void 0||(Ae[ze]=ne[ze]);var ze=arguments.length-2;if(ze===1)Ae.children=re;else if(1<ze){for(var He=Array(ze),st=0;st<ze;st++)He[st]=arguments[st+2];Ae.children=He}return E(X.type,Se,Ae)},ir.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:i,_context:X},X},ir.createElement=function(X,ne,re){var Ae,Se={},ze=null;if(ne!=null)for(Ae in ne.key!==void 0&&(ze=""+ne.key),ne)A.call(ne,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(Se[Ae]=ne[Ae]);var He=arguments.length-2;if(He===1)Se.children=re;else if(1<He){for(var st=Array(He),W=0;W<He;W++)st[W]=arguments[W+2];Se.children=st}if(X&&X.defaultProps)for(Ae in He=X.defaultProps,He)Se[Ae]===void 0&&(Se[Ae]=He[Ae]);return E(X,ze,Se)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(X){return{$$typeof:c,render:X}},ir.isValidElement=D,ir.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:ie}},ir.memo=function(X,ne){return{$$typeof:h,type:X,compare:ne===void 0?null:ne}},ir.startTransition=function(X){var ne=N.T,re={};N.T=re;try{var Ae=X(),Se=N.S;Se!==null&&Se(re,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(P,pe)}catch(ze){pe(ze)}finally{ne!==null&&re.types!==null&&(ne.types=re.types),N.T=ne}},ir.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},ir.use=function(X){return N.H.use(X)},ir.useActionState=function(X,ne,re){return N.H.useActionState(X,ne,re)},ir.useCallback=function(X,ne){return N.H.useCallback(X,ne)},ir.useContext=function(X){return N.H.useContext(X)},ir.useDebugValue=function(){},ir.useDeferredValue=function(X,ne){return N.H.useDeferredValue(X,ne)},ir.useEffect=function(X,ne){return N.H.useEffect(X,ne)},ir.useEffectEvent=function(X){return N.H.useEffectEvent(X)},ir.useId=function(){return N.H.useId()},ir.useImperativeHandle=function(X,ne,re){return N.H.useImperativeHandle(X,ne,re)},ir.useInsertionEffect=function(X,ne){return N.H.useInsertionEffect(X,ne)},ir.useLayoutEffect=function(X,ne){return N.H.useLayoutEffect(X,ne)},ir.useMemo=function(X,ne){return N.H.useMemo(X,ne)},ir.useOptimistic=function(X,ne){return N.H.useOptimistic(X,ne)},ir.useReducer=function(X,ne,re){return N.H.useReducer(X,ne,re)},ir.useRef=function(X){return N.H.useRef(X)},ir.useState=function(X){return N.H.useState(X)},ir.useSyncExternalStore=function(X,ne,re){return N.H.useSyncExternalStore(X,ne,re)},ir.useTransition=function(){return N.H.useTransition()},ir.version="19.2.4",ir}var XC;function m8(){return XC||(XC=1,j5.exports=dZ()),j5.exports}var k=m8();const se=Kr(k);var k5={exports:{}},Mp={},C5={exports:{}},O5={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC;function hZ(){return YC||(YC=1,(function(t){function e(H,J){var ie=H.length;H.push(J);e:for(;0<ie;){var pe=ie-1>>>1,me=H[pe];if(0<a(me,J))H[pe]=J,H[ie]=me,ie=pe;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var J=H[0],ie=H.pop();if(ie!==J){H[0]=ie;e:for(var pe=0,me=H.length,X=me>>>1;pe<X;){var ne=2*(pe+1)-1,re=H[ne],Ae=ne+1,Se=H[Ae];if(0>a(re,ie))Ae<me&&0>a(Se,re)?(H[pe]=Se,H[Ae]=ie,pe=Ae):(H[pe]=re,H[ne]=ie,pe=ne);else if(Ae<me&&0>a(Se,ie))H[pe]=Se,H[Ae]=ie,pe=Ae;else break e}}return J}function a(H,J){var ie=H.sortIndex-J.sortIndex;return ie!==0?ie:H.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var d=[],h=[],p=1,m=null,y=3,v=!1,T=!1,S=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var J=r(h);J!==null;){if(J.callback===null)n(h);else if(J.startTime<=H)n(h),J.sortIndex=J.expirationTime,e(d,J);else break;J=r(h)}}function C(H){if(S=!1,L(H),!T)if(r(d)!==null)T=!0,P||(P=!0,U());else{var J=r(h);J!==null&&K(C,J.startTime-H)}}var P=!1,N=-1,A=5,E=-1;function V(){return w?!0:!(t.unstable_now()-E<A)}function D(){if(w=!1,P){var H=t.unstable_now();E=H;var J=!0;try{e:{T=!1,S&&(S=!1,R(N),N=-1),v=!0;var ie=y;try{t:{for(L(H),m=r(d);m!==null&&!(m.expirationTime>H&&V());){var pe=m.callback;if(typeof pe=="function"){m.callback=null,y=m.priorityLevel;var me=pe(m.expirationTime<=H);if(H=t.unstable_now(),typeof me=="function"){m.callback=me,L(H),J=!0;break t}m===r(d)&&n(d),L(H)}else n(d);m=r(d)}if(m!==null)J=!0;else{var X=r(h);X!==null&&K(C,X.startTime-H),J=!1}}break e}finally{m=null,y=ie,v=!1}J=void 0}}finally{J?U():P=!1}}}var U;if(typeof I=="function")U=function(){I(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Q=$.port2;$.port1.onmessage=D,U=function(){Q.postMessage(null)}}else U=function(){j(D,0)};function K(H,J){N=j(function(){H(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var J=3;break;default:J=y}var ie=y;y=J;try{return H()}finally{y=ie}},t.unstable_requestPaint=function(){w=!0},t.unstable_runWithPriority=function(H,J){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=y;y=H;try{return J()}finally{y=ie}},t.unstable_scheduleCallback=function(H,J,ie){var pe=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?pe+ie:pe):ie=pe,H){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ie+me,H={id:p++,callback:J,priorityLevel:H,startTime:ie,expirationTime:me,sortIndex:-1},ie>pe?(H.sortIndex=ie,e(h,H),r(d)===null&&H===r(h)&&(S?(R(N),N=-1):S=!0,K(C,ie-pe))):(H.sortIndex=me,e(d,H),T||v||(T=!0,P||(P=!0,U()))),H},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(H){var J=y;return function(){var ie=y;y=J;try{return H.apply(this,arguments)}finally{y=ie}}}})(O5)),O5}var ZC;function fZ(){return ZC||(ZC=1,C5.exports=hZ()),C5.exports}var I5={exports:{}},xi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC;function pZ(){if(JC)return xi;JC=1;var t=m8();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return xi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xi.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return i(d,h,null,p)},xi.flushSync=function(d){var h=s.T,p=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=h,n.p=p,n.d.f()}},xi.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},xi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xi.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:v}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},xi.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},xi.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},xi.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},xi.requestFormReset=function(d){n.d.r(d)},xi.unstable_batchedUpdates=function(d,h){return d(h)},xi.useFormState=function(d,h,p){return s.H.useFormState(d,h,p)},xi.useFormStatus=function(){return s.H.useHostTransitionStatus()},xi.version="19.2.4",xi}var eO;function Bz(){if(eO)return I5.exports;eO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),I5.exports=pZ(),I5.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tO;function mZ(){if(tO)return Mp;tO=1;var t=fZ(),e=m8(),r=Bz();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,f=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(f=u.return),l=u.return;while(l)}return u.tag===3?f:null}function s(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function h(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var f=l,g=u;;){var b=f.return;if(b===null)break;var _=b.alternate;if(_===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===f)return d(b),l;if(_===g)return d(b),u;_=_.sibling}throw Error(n(188))}if(f.return!==g.return)f=b,g=_;else{for(var z=!1,Y=b.child;Y;){if(Y===f){z=!0,f=b,g=_;break}if(Y===g){z=!0,g=b,f=_;break}Y=Y.sibling}if(!z){for(Y=_.child;Y;){if(Y===f){z=!0,f=_,g=b;break}if(Y===g){z=!0,g=_,f=b;break}Y=Y.sibling}if(!z)throw Error(n(189))}}if(f.alternate!==g)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?l:u}function p(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=p(l),u!==null)return u;l=l.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function U(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var $=Symbol.for("react.client.reference");function Q(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===$?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case j:return"Profiler";case w:return"StrictMode";case C:return"Suspense";case P:return"SuspenseList";case E:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case T:return"Portal";case I:return l.displayName||"Context";case R:return(l._context.displayName||"Context")+".Consumer";case L:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case N:return u=l.displayName||null,u!==null?u:Q(l.type)||"Memo";case A:u=l._payload,l=l._init;try{return Q(l(u))}catch{}}return null}var K=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},pe=[],me=-1;function X(l){return{current:l}}function ne(l){0>me||(l.current=pe[me],pe[me]=null,me--)}function re(l,u){me++,pe[me]=l.current,l.current=u}var Ae=X(null),Se=X(null),ze=X(null),He=X(null);function st(l,u){switch(re(ze,u),re(Se,l),re(Ae,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?mC(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=mC(u),l=gC(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(Ae),re(Ae,l)}function W(){ne(Ae),ne(Se),ne(ze)}function he(l){l.memoizedState!==null&&re(He,l);var u=Ae.current,f=gC(u,l.type);u!==f&&(re(Se,l),re(Ae,f))}function te(l){Se.current===l&&(ne(Ae),ne(Se)),He.current===l&&(ne(He),kp._currentValue=ie)}var ae,Ue;function Ye(l){if(ae===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);ae=u&&u[1]||"",Ue=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+l+Ue}var xt=!1;function it(l,u){if(!l||xt)return"";xt=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Qe=function(){throw Error()};if(Object.defineProperty(Qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Qe,[])}catch(De){var Oe=De}Reflect.construct(l,[],Qe)}else{try{Qe.call()}catch(De){Oe=De}l.call(Qe.prototype)}}else{try{throw Error()}catch(De){Oe=De}(Qe=l())&&typeof Qe.catch=="function"&&Qe.catch(function(){})}}catch(De){if(De&&Oe&&typeof De.stack=="string")return[De.stack,Oe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),z=_[0],Y=_[1];if(z&&Y){var de=z.split(`
`),ke=Y.split(`
`);for(b=g=0;g<de.length&&!de[g].includes("DetermineComponentFrameRoot");)g++;for(;b<ke.length&&!ke[b].includes("DetermineComponentFrameRoot");)b++;if(g===de.length||b===ke.length)for(g=de.length-1,b=ke.length-1;1<=g&&0<=b&&de[g]!==ke[b];)b--;for(;1<=g&&0<=b;g--,b--)if(de[g]!==ke[b]){if(g!==1||b!==1)do if(g--,b--,0>b||de[g]!==ke[b]){var Fe=`
`+de[g].replace(" at new "," at ");return l.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",l.displayName)),Fe}while(1<=g&&0<=b);break}}}finally{xt=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?Ye(f):""}function Pt(l,u){switch(l.tag){case 26:case 27:case 5:return Ye(l.type);case 16:return Ye("Lazy");case 13:return l.child!==u&&u!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return it(l.type,!1);case 11:return it(l.type.render,!1);case 1:return it(l.type,!0);case 31:return Ye("Activity");default:return""}}function Ie(l){try{var u="",f=null;do u+=Pt(l,f),f=l,l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var Be=Object.prototype.hasOwnProperty,rt=t.unstable_scheduleCallback,ft=t.unstable_cancelCallback,Ge=t.unstable_shouldYield,ue=t.unstable_requestPaint,Xe=t.unstable_now,wt=t.unstable_getCurrentPriorityLevel,yt=t.unstable_ImmediatePriority,mt=t.unstable_UserBlockingPriority,Vt=t.unstable_NormalPriority,ur=t.unstable_LowPriority,qr=t.unstable_IdlePriority,be=t.log,nt=t.unstable_setDisableYieldValue,Et=null,Dt=null;function Bt(l){if(typeof be=="function"&&nt(l),Dt&&typeof Dt.setStrictMode=="function")try{Dt.setStrictMode(Et,l)}catch{}}var Ze=Math.clz32?Math.clz32:Pr,ar=Math.log,br=Math.LN2;function Pr(l){return l>>>=0,l===0?32:31-(ar(l)/br|0)|0}var un=256,vr=262144,Ht=4194304;function $t(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function _t(l,u,f){var g=l.pendingLanes;if(g===0)return 0;var b=0,_=l.suspendedLanes,z=l.pingedLanes;l=l.warmLanes;var Y=g&134217727;return Y!==0?(g=Y&~_,g!==0?b=$t(g):(z&=Y,z!==0?b=$t(z):f||(f=Y&~l,f!==0&&(b=$t(f))))):(Y=g&~_,Y!==0?b=$t(Y):z!==0?b=$t(z):f||(f=g&~l,f!==0&&(b=$t(f)))),b===0?0:u!==0&&u!==b&&(u&_)===0&&(_=b&-b,f=u&-u,_>=f||_===32&&(f&4194048)!==0)?u:b}function Dr(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function rn(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(){var l=Ht;return Ht<<=1,(Ht&62914560)===0&&(Ht=4194304),l}function Lr(l){for(var u=[],f=0;31>f;f++)u.push(l);return u}function dn(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function or(l,u,f,g,b,_){var z=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var Y=l.entanglements,de=l.expirationTimes,ke=l.hiddenUpdates;for(f=z&~f;0<f;){var Fe=31-Ze(f),Qe=1<<Fe;Y[Fe]=0,de[Fe]=-1;var Oe=ke[Fe];if(Oe!==null)for(ke[Fe]=null,Fe=0;Fe<Oe.length;Fe++){var De=Oe[Fe];De!==null&&(De.lane&=-536870913)}f&=~Qe}g!==0&&ma(l,g,0),_!==0&&b===0&&l.tag!==0&&(l.suspendedLanes|=_&~(z&~u))}function ma(l,u,f){l.pendingLanes|=u,l.suspendedLanes&=~u;var g=31-Ze(u);l.entangledLanes|=u,l.entanglements[g]=l.entanglements[g]|1073741824|f&261930}function hn(l,u){var f=l.entangledLanes|=u;for(l=l.entanglements;f;){var g=31-Ze(f),b=1<<g;b&u|l[g]&u&&(l[g]|=u),f&=~b}}function On(l,u){var f=u&-u;return f=(f&42)!==0?1:ti(f),(f&(l.suspendedLanes|u))!==0?0:f}function ti(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Tr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function fn(){var l=J.p;return l!==0?l:(l=window.event,l===void 0?32:$C(l.type))}function ri(l,u){var f=J.p;try{return J.p=l,u()}finally{J.p=f}}var Wn=Math.random().toString(36).slice(2),Yr="__reactFiber$"+Wn,pn="__reactProps$"+Wn,Tn="__reactContainer$"+Wn,ni="__reactEvents$"+Wn,Fa="__reactListeners$"+Wn,Ni="__reactHandles$"+Wn,ls="__reactResources$"+Wn,gi="__reactMarker$"+Wn;function Tt(l){delete l[Yr],delete l[pn],delete l[ni],delete l[Fa],delete l[Ni]}function fe(l){var u=l[Yr];if(u)return u;for(var f=l.parentNode;f;){if(u=f[Tn]||f[Yr]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(l=_C(l);l!==null;){if(f=l[Yr])return f;l=_C(l)}return u}l=f,f=l.parentNode}return null}function Je(l){if(l=l[Yr]||l[Tn]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function ct(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Xt(l){var u=l[ls];return u||(u=l[ls]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function dr(l){l[gi]=!0}var nn=new Set,Gr={};function mn(l,u){kr(l,u),kr(l+"Capture",u)}function kr(l,u){for(Gr[l]=u,l=0;l<u.length;l++)nn.add(u[l])}var Rs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cs={},so={};function ll(l){return Be.call(so,l)?!0:Be.call(cs,l)?!1:Rs.test(l)?so[l]=!0:(cs[l]=!0,!1)}function us(l,u,f){if(ll(u))if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+f)}}function ds(l,u,f){if(f===null)l.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+f)}}function ja(l,u,f,g){if(g===null)l.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(u,f,""+g)}}function ga(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function q(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function xe(l,u,f){var g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,_=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return b.call(this)},set:function(z){f=""+z,_.call(this,z)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(z){f=""+z},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function Te(l){if(!l._valueTracker){var u=q(l)?"checked":"value";l._valueTracker=xe(l,u,""+l[u])}}function Ne(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var f=u.getValue(),g="";return l&&(g=q(l)?l.checked?"true":"false":l.value),l=g,l!==f?(u.setValue(l),!0):!1}function ht(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Ot=/[\n"\\]/g;function Nt(l){return l.replace(Ot,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Yt(l,u,f,g,b,_,z,Y){l.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.type=z:l.removeAttribute("type"),u!=null?z==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+ga(u)):l.value!==""+ga(u)&&(l.value=""+ga(u)):z!=="submit"&&z!=="reset"||l.removeAttribute("value"),u!=null?Zr(l,z,ga(u)):f!=null?Zr(l,z,ga(f)):g!=null&&l.removeAttribute("value"),b==null&&_!=null&&(l.defaultChecked=!!_),b!=null&&(l.checked=b&&typeof b!="function"&&typeof b!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.name=""+ga(Y):l.removeAttribute("name")}function wr(l,u,f,g,b,_,z,Y){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(l.type=_),u!=null||f!=null){if(!(_!=="submit"&&_!=="reset"||u!=null)){Te(l);return}f=f!=null?""+ga(f):"",u=u!=null?""+ga(u):f,Y||u===l.value||(l.value=u),l.defaultValue=u}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,l.checked=Y?l.checked:!!g,l.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(l.name=z),Te(l)}function Zr(l,u,f){u==="number"&&ht(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function oe(l,u,f,g){if(l=l.options,u){u={};for(var b=0;b<f.length;b++)u["$"+f[b]]=!0;for(f=0;f<l.length;f++)b=u.hasOwnProperty("$"+l[f].value),l[f].selected!==b&&(l[f].selected=b),b&&g&&(l[f].defaultSelected=!0)}else{for(f=""+ga(f),u=null,b=0;b<l.length;b++){if(l[b].value===f){l[b].selected=!0,g&&(l[b].defaultSelected=!0);return}u!==null||l[b].disabled||(u=l[b])}u!==null&&(u.selected=!0)}}function ve(l,u,f){if(u!=null&&(u=""+ga(u),u!==l.value&&(l.value=u),f==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=f!=null?""+ga(f):""}function $e(l,u,f,g){if(u==null){if(g!=null){if(f!=null)throw Error(n(92));if(K(g)){if(1<g.length)throw Error(n(93));g=g[0]}f=g}f==null&&(f=""),u=f}f=ga(u),l.defaultValue=f,g=l.textContent,g===f&&g!==""&&g!==null&&(l.value=g),Te(l)}function Me(l,u){if(u){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=u;return}}l.textContent=u}var ut=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tr(l,u,f){var g=u.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":g?l.setProperty(u,f):typeof f!="number"||f===0||ut.has(u)?u==="float"?l.cssFloat=f:l[u]=(""+f).trim():l[u]=f+"px"}function Qt(l,u,f){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?l.setProperty(g,""):g==="float"?l.cssFloat="":l[g]="");for(var b in u)g=u[b],u.hasOwnProperty(b)&&f[b]!==g&&tr(l,b,g)}else for(var _ in u)u.hasOwnProperty(_)&&tr(l,_,u[_])}function An(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ka=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ms=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nn(l){return Ms.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function gn(){}var ko=null;function Cr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var hs=null,yi=null;function C1(l){var u=Je(l);if(u&&(l=u.stateNode)){var f=l[pn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Yt(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),u=f.name,f.type==="radio"&&u!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Nt(""+u)+'"][type="radio"]'),u=0;u<f.length;u++){var g=f[u];if(g!==l&&g.form===l.form){var b=g[pn]||null;if(!b)throw Error(n(90));Yt(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(u=0;u<f.length;u++)g=f[u],g.form===l.form&&Ne(g)}break e;case"textarea":ve(l,f.value,f.defaultValue);break e;case"select":u=f.value,u!=null&&oe(l,!!f.multiple,u,!1)}}}var Hf=!1;function O1(l,u,f){if(Hf)return l(u,f);Hf=!0;try{var g=l(u);return g}finally{if(Hf=!1,(hs!==null||yi!==null)&&(Ey(),hs&&(u=hs,l=yi,yi=hs=null,C1(u),l)))for(u=0;u<l.length;u++)C1(l[u])}}function zi(l,u){var f=l.stateNode;if(f===null)return null;var g=f[pn]||null;if(g===null)return null;f=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(n(231,u,typeof f));return f}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=!1;if(oo)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{Gf=!1}var fs=null,x0=null,Oo=null;function gc(){if(Oo)return Oo;var l,u=x0,f=u.length,g,b="value"in fs?fs.value:fs.textContent,_=b.length;for(l=0;l<f&&u[l]===b[l];l++);var z=f-l;for(g=1;g<=z&&u[f-g]===b[_-g];g++);return Oo=b.slice(l,1<g?1-g:void 0)}function zu(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function yc(){return!0}function Ln(){return!1}function vi(l){function u(f,g,b,_,z){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=_,this.target=z,this.currentTarget=null;for(var Y in l)l.hasOwnProperty(Y)&&(f=l[Y],this[Y]=f?f(_):_[Y]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?yc:Ln,this.isPropagationStopped=Ln,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),u}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vu=vi(cl),vc=m({},cl,{view:0,detail:0}),I1=vi(vc),xc,b0,Ei,Fu=m({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ei&&(Ei&&l.type==="mousemove"?(xc=l.screenX-Ei.screenX,b0=l.screenY-Ei.screenY):b0=xc=0,Ei=l),xc)},movementY:function(l){return"movementY"in l?l.movementY:b0}}),R1=vi(Fu),qu=m({},Fu,{dataTransfer:0}),M1=vi(qu),Wf=m({},vc,{relatedTarget:0}),bc=vi(Wf),P1=m({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),w0=vi(P1),Rw=m({},cl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),D1=vi(Rw),Hu=m({},cl,{data:0}),Kf=vi(Hu),L1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B1(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Xf[l])?!!u[l]:!1}function wc(){return B1}var $1=m({},vc,{key:function(l){if(l.key){var u=L1[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=zu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Qf[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(l){return l.type==="keypress"?zu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?zu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),U1=vi($1),ul=m({},Fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yf=vi(ul),z1=m({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),V1=vi(z1),F1=m({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),S0=vi(F1),ji=m({},Fu,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),q1=vi(ji),H1=m({},cl,{newState:0,oldState:0}),Sc=vi(H1),x=[9,13,27,32],M=oo&&"CompositionEvent"in window,F=null;oo&&"documentMode"in document&&(F=document.documentMode);var ee=oo&&"TextEvent"in window&&!F,_e=oo&&(!M||F&&8<F&&11>=F),Le=" ",pt=!1;function Jr(l,u){switch(l){case"keyup":return x.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ya(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var gr=!1;function qa(l,u){switch(l){case"compositionend":return ya(u);case"keypress":return u.which!==32?null:(pt=!0,Le);case"textInput":return l=u.data,l===Le&&pt?null:l;default:return null}}function Ha(l,u){if(gr)return l==="compositionend"||!M&&Jr(l,u)?(l=gc(),Oo=x0=fs=null,gr=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _e&&u.locale!=="ko"?null:u.data;default:return null}}var _c={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!_c[l.type]:u==="textarea"}function Gu(l,u,f,g){hs?yi?yi.push(g):yi=[g]:hs=g,u=My(u,"onChange"),0<u.length&&(f=new Vu("onChange","change",null,f,g),l.push({event:f,listeners:u}))}var dl=null,Zf=null;function RX(l){cC(l,0)}function G1(l){var u=ct(l);if(Ne(u))return l}function jj(l,u){if(l==="change")return u}var kj=!1;if(oo){var Mw;if(oo){var Pw="oninput"in document;if(!Pw){var Cj=document.createElement("div");Cj.setAttribute("oninput","return;"),Pw=typeof Cj.oninput=="function"}Mw=Pw}else Mw=!1;kj=Mw&&(!document.documentMode||9<document.documentMode)}function Oj(){dl&&(dl.detachEvent("onpropertychange",Ij),Zf=dl=null)}function Ij(l){if(l.propertyName==="value"&&G1(Zf)){var u=[];Gu(u,Zf,l,Cr(l)),O1(RX,u)}}function MX(l,u,f){l==="focusin"?(Oj(),dl=u,Zf=f,dl.attachEvent("onpropertychange",Ij)):l==="focusout"&&Oj()}function PX(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return G1(Zf)}function DX(l,u){if(l==="click")return G1(u)}function LX(l,u){if(l==="input"||l==="change")return G1(u)}function BX(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var ps=typeof Object.is=="function"?Object.is:BX;function Jf(l,u){if(ps(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var f=Object.keys(l),g=Object.keys(u);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Be.call(u,b)||!ps(l[b],u[b]))return!1}return!0}function Rj(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Mj(l,u){var f=Rj(l);l=0;for(var g;f;){if(f.nodeType===3){if(g=l+f.textContent.length,l<=u&&g>=u)return{node:f,offset:u-l};l=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Rj(f)}}function Pj(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Pj(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Dj(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=ht(l.document);u instanceof l.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)l=u.contentWindow;else break;u=ht(l.document)}return u}function Dw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var $X=oo&&"documentMode"in document&&11>=document.documentMode,_0=null,Lw=null,ep=null,Bw=!1;function Lj(l,u,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Bw||_0==null||_0!==ht(g)||(g=_0,"selectionStart"in g&&Dw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),ep&&Jf(ep,g)||(ep=g,g=My(Lw,"onSelect"),0<g.length&&(u=new Vu("onSelect","select",null,u,f),l.push({event:u,listeners:g}),u.target=_0)))}function Wu(l,u){var f={};return f[l.toLowerCase()]=u.toLowerCase(),f["Webkit"+l]="webkit"+u,f["Moz"+l]="moz"+u,f}var T0={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionrun:Wu("Transition","TransitionRun"),transitionstart:Wu("Transition","TransitionStart"),transitioncancel:Wu("Transition","TransitionCancel"),transitionend:Wu("Transition","TransitionEnd")},$w={},Bj={};oo&&(Bj=document.createElement("div").style,"AnimationEvent"in window||(delete T0.animationend.animation,delete T0.animationiteration.animation,delete T0.animationstart.animation),"TransitionEvent"in window||delete T0.transitionend.transition);function Ku(l){if($w[l])return $w[l];if(!T0[l])return l;var u=T0[l],f;for(f in u)if(u.hasOwnProperty(f)&&f in Bj)return $w[l]=u[f];return l}var $j=Ku("animationend"),Uj=Ku("animationiteration"),zj=Ku("animationstart"),UX=Ku("transitionrun"),zX=Ku("transitionstart"),VX=Ku("transitioncancel"),Vj=Ku("transitionend"),Fj=new Map,Uw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uw.push("scrollEnd");function lo(l,u){Fj.set(l,u),mn(u,[l])}var W1=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ps=[],A0=0,zw=0;function K1(){for(var l=A0,u=zw=A0=0;u<l;){var f=Ps[u];Ps[u++]=null;var g=Ps[u];Ps[u++]=null;var b=Ps[u];Ps[u++]=null;var _=Ps[u];if(Ps[u++]=null,g!==null&&b!==null){var z=g.pending;z===null?b.next=b:(b.next=z.next,z.next=b),g.pending=b}_!==0&&qj(f,b,_)}}function Q1(l,u,f,g){Ps[A0++]=l,Ps[A0++]=u,Ps[A0++]=f,Ps[A0++]=g,zw|=g,l.lanes|=g,l=l.alternate,l!==null&&(l.lanes|=g)}function Vw(l,u,f,g){return Q1(l,u,f,g),X1(l)}function Qu(l,u){return Q1(l,null,null,u),X1(l)}function qj(l,u,f){l.lanes|=f;var g=l.alternate;g!==null&&(g.lanes|=f);for(var b=!1,_=l.return;_!==null;)_.childLanes|=f,g=_.alternate,g!==null&&(g.childLanes|=f),_.tag===22&&(l=_.stateNode,l===null||l._visibility&1||(b=!0)),l=_,_=_.return;return l.tag===3?(_=l.stateNode,b&&u!==null&&(b=31-Ze(f),l=_.hiddenUpdates,g=l[b],g===null?l[b]=[u]:g.push(u),u.lane=f|536870912),_):null}function X1(l){if(50<Sp)throw Sp=0,Y4=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var N0={};function FX(l,u,f,g){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(l,u,f,g){return new FX(l,u,f,g)}function Fw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function hl(l,u){var f=l.alternate;return f===null?(f=ms(l.tag,u,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=u,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,u=l.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function Hj(l,u){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,u=f.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Y1(l,u,f,g,b,_){var z=0;if(g=l,typeof l=="function")Fw(l)&&(z=1);else if(typeof l=="string")z=KY(l,f,Ae.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case E:return l=ms(31,f,u,b),l.elementType=E,l.lanes=_,l;case S:return Xu(f.children,b,_,u);case w:z=8,b|=24;break;case j:return l=ms(12,f,u,b|2),l.elementType=j,l.lanes=_,l;case C:return l=ms(13,f,u,b),l.elementType=C,l.lanes=_,l;case P:return l=ms(19,f,u,b),l.elementType=P,l.lanes=_,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case I:z=10;break e;case R:z=9;break e;case L:z=11;break e;case N:z=14;break e;case A:z=16,g=null;break e}z=29,f=Error(n(130,l===null?"null":typeof l,"")),g=null}return u=ms(z,f,u,b),u.elementType=l,u.type=g,u.lanes=_,u}function Xu(l,u,f,g){return l=ms(7,l,g,u),l.lanes=f,l}function qw(l,u,f){return l=ms(6,l,null,u),l.lanes=f,l}function Gj(l){var u=ms(18,null,null,0);return u.stateNode=l,u}function Hw(l,u,f){return u=ms(4,l.children!==null?l.children:[],l.key,u),u.lanes=f,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var Wj=new WeakMap;function Ds(l,u){if(typeof l=="object"&&l!==null){var f=Wj.get(l);return f!==void 0?f:(u={value:l,source:u,stack:Ie(u)},Wj.set(l,u),u)}return{value:l,source:u,stack:Ie(u)}}var E0=[],j0=0,Z1=null,tp=0,Ls=[],Bs=0,Tc=null,Io=1,Ro="";function fl(l,u){E0[j0++]=tp,E0[j0++]=Z1,Z1=l,tp=u}function Kj(l,u,f){Ls[Bs++]=Io,Ls[Bs++]=Ro,Ls[Bs++]=Tc,Tc=l;var g=Io;l=Ro;var b=32-Ze(g)-1;g&=~(1<<b),f+=1;var _=32-Ze(u)+b;if(30<_){var z=b-b%5;_=(g&(1<<z)-1).toString(32),g>>=z,b-=z,Io=1<<32-Ze(u)+b|f<<b|g,Ro=_+l}else Io=1<<_|f<<b|g,Ro=l}function Gw(l){l.return!==null&&(fl(l,1),Kj(l,1,0))}function Ww(l){for(;l===Z1;)Z1=E0[--j0],E0[j0]=null,tp=E0[--j0],E0[j0]=null;for(;l===Tc;)Tc=Ls[--Bs],Ls[Bs]=null,Ro=Ls[--Bs],Ls[Bs]=null,Io=Ls[--Bs],Ls[Bs]=null}function Qj(l,u){Ls[Bs++]=Io,Ls[Bs++]=Ro,Ls[Bs++]=Tc,Io=u.id,Ro=u.overflow,Tc=l}var ai=null,Bn=null,Or=!1,Ac=null,$s=!1,Kw=Error(n(519));function Nc(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rp(Ds(u,l)),Kw}function Xj(l){var u=l.stateNode,f=l.type,g=l.memoizedProps;switch(u[Yr]=l,u[pn]=g,f){case"dialog":_r("cancel",u),_r("close",u);break;case"iframe":case"object":case"embed":_r("load",u);break;case"video":case"audio":for(f=0;f<Tp.length;f++)_r(Tp[f],u);break;case"source":_r("error",u);break;case"img":case"image":case"link":_r("error",u),_r("load",u);break;case"details":_r("toggle",u);break;case"input":_r("invalid",u),wr(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":_r("invalid",u);break;case"textarea":_r("invalid",u),$e(u,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||u.textContent===""+f||g.suppressHydrationWarning===!0||fC(u.textContent,f)?(g.popover!=null&&(_r("beforetoggle",u),_r("toggle",u)),g.onScroll!=null&&_r("scroll",u),g.onScrollEnd!=null&&_r("scrollend",u),g.onClick!=null&&(u.onclick=gn),u=!0):u=!1,u||Nc(l,!0)}function Yj(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 31:case 13:$s=!1;return;case 27:case 3:$s=!0;return;default:ai=ai.return}}function k0(l){if(l!==ai)return!1;if(!Or)return Yj(l),Or=!0,!1;var u=l.tag,f;if((f=u!==3&&u!==27)&&((f=u===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||h5(l.type,l.memoizedProps)),f=!f),f&&Bn&&Nc(l),Yj(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Bn=SC(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));Bn=SC(l)}else u===27?(u=Bn,Uc(l.type)?(l=y5,y5=null,Bn=l):Bn=u):Bn=ai?zs(l.stateNode.nextSibling):null;return!0}function Yu(){Bn=ai=null,Or=!1}function Qw(){var l=Ac;return l!==null&&(Gi===null?Gi=l:Gi.push.apply(Gi,l),Ac=null),l}function rp(l){Ac===null?Ac=[l]:Ac.push(l)}var Xw=X(null),Zu=null,pl=null;function Ec(l,u,f){re(Xw,u._currentValue),u._currentValue=f}function ml(l){l._currentValue=Xw.current,ne(Xw)}function Yw(l,u,f){for(;l!==null;){var g=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),l===f)break;l=l.return}}function Zw(l,u,f,g){var b=l.child;for(b!==null&&(b.return=l);b!==null;){var _=b.dependencies;if(_!==null){var z=b.child;_=_.firstContext;e:for(;_!==null;){var Y=_;_=b;for(var de=0;de<u.length;de++)if(Y.context===u[de]){_.lanes|=f,Y=_.alternate,Y!==null&&(Y.lanes|=f),Yw(_.return,f,l),g||(z=null);break e}_=Y.next}}else if(b.tag===18){if(z=b.return,z===null)throw Error(n(341));z.lanes|=f,_=z.alternate,_!==null&&(_.lanes|=f),Yw(z,f,l),z=null}else z=b.child;if(z!==null)z.return=b;else for(z=b;z!==null;){if(z===l){z=null;break}if(b=z.sibling,b!==null){b.return=z.return,z=b;break}z=z.return}b=z}}function C0(l,u,f,g){l=null;for(var b=u,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var z=b.alternate;if(z===null)throw Error(n(387));if(z=z.memoizedProps,z!==null){var Y=b.type;ps(b.pendingProps.value,z.value)||(l!==null?l.push(Y):l=[Y])}}else if(b===He.current){if(z=b.alternate,z===null)throw Error(n(387));z.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(l!==null?l.push(kp):l=[kp])}b=b.return}l!==null&&Zw(u,l,f,g),u.flags|=262144}function J1(l){for(l=l.firstContext;l!==null;){if(!ps(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ju(l){Zu=l,pl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ii(l){return Zj(Zu,l)}function ey(l,u){return Zu===null&&Ju(l),Zj(l,u)}function Zj(l,u){var f=u._currentValue;if(u={context:u,memoizedValue:f,next:null},pl===null){if(l===null)throw Error(n(308));pl=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else pl=pl.next=u;return f}var qX=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(f,g){l.push(g)}};this.abort=function(){u.aborted=!0,l.forEach(function(f){return f()})}},HX=t.unstable_scheduleCallback,GX=t.unstable_NormalPriority,va={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jw(){return{controller:new qX,data:new Map,refCount:0}}function np(l){l.refCount--,l.refCount===0&&HX(GX,function(){l.controller.abort()})}var ap=null,e4=0,O0=0,I0=null;function WX(l,u){if(ap===null){var f=ap=[];e4=0,O0=n5(),I0={status:"pending",value:void 0,then:function(g){f.push(g)}}}return e4++,u.then(Jj,Jj),u}function Jj(){if(--e4===0&&ap!==null){I0!==null&&(I0.status="fulfilled");var l=ap;ap=null,O0=0,I0=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function KX(l,u){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return l.then(function(){g.status="fulfilled",g.value=u;for(var b=0;b<f.length;b++)(0,f[b])(u)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var ek=H.S;H.S=function(l,u){L9=Xe(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&WX(l,u),ek!==null&&ek(l,u)};var ed=X(null);function t4(){var l=ed.current;return l!==null?l:En.pooledCache}function ty(l,u){u===null?re(ed,ed.current):re(ed,u.pool)}function tk(){var l=t4();return l===null?null:{parent:va._currentValue,pool:l}}var R0=Error(n(460)),r4=Error(n(474)),ry=Error(n(542)),ny={then:function(){}};function rk(l){return l=l.status,l==="fulfilled"||l==="rejected"}function nk(l,u,f){switch(f=l[f],f===void 0?l.push(u):f!==u&&(u.then(gn,gn),u=f),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ik(l),l;default:if(typeof u.status=="string")u.then(gn,gn);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(g){if(u.status==="pending"){var b=u;b.status="fulfilled",b.value=g}},function(g){if(u.status==="pending"){var b=u;b.status="rejected",b.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,ik(l),l}throw rd=u,R0}}function td(l){try{var u=l._init;return u(l._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(rd=f,R0):f}}var rd=null;function ak(){if(rd===null)throw Error(n(459));var l=rd;return rd=null,l}function ik(l){if(l===R0||l===ry)throw Error(n(483))}var M0=null,ip=0;function ay(l){var u=ip;return ip+=1,M0===null&&(M0=[]),nk(M0,l,u)}function sp(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function iy(l,u){throw u.$$typeof===y?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function sk(l){function u(we,ge){if(l){var Ee=we.deletions;Ee===null?(we.deletions=[ge],we.flags|=16):Ee.push(ge)}}function f(we,ge){if(!l)return null;for(;ge!==null;)u(we,ge),ge=ge.sibling;return null}function g(we){for(var ge=new Map;we!==null;)we.key!==null?ge.set(we.key,we):ge.set(we.index,we),we=we.sibling;return ge}function b(we,ge){return we=hl(we,ge),we.index=0,we.sibling=null,we}function _(we,ge,Ee){return we.index=Ee,l?(Ee=we.alternate,Ee!==null?(Ee=Ee.index,Ee<ge?(we.flags|=67108866,ge):Ee):(we.flags|=67108866,ge)):(we.flags|=1048576,ge)}function z(we){return l&&we.alternate===null&&(we.flags|=67108866),we}function Y(we,ge,Ee,Ke){return ge===null||ge.tag!==6?(ge=qw(Ee,we.mode,Ke),ge.return=we,ge):(ge=b(ge,Ee),ge.return=we,ge)}function de(we,ge,Ee,Ke){var Ut=Ee.type;return Ut===S?Fe(we,ge,Ee.props.children,Ke,Ee.key):ge!==null&&(ge.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&td(Ut)===ge.type)?(ge=b(ge,Ee.props),sp(ge,Ee),ge.return=we,ge):(ge=Y1(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),sp(ge,Ee),ge.return=we,ge)}function ke(we,ge,Ee,Ke){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Ee.containerInfo||ge.stateNode.implementation!==Ee.implementation?(ge=Hw(Ee,we.mode,Ke),ge.return=we,ge):(ge=b(ge,Ee.children||[]),ge.return=we,ge)}function Fe(we,ge,Ee,Ke,Ut){return ge===null||ge.tag!==7?(ge=Xu(Ee,we.mode,Ke,Ut),ge.return=we,ge):(ge=b(ge,Ee),ge.return=we,ge)}function Qe(we,ge,Ee){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ge=qw(""+ge,we.mode,Ee),ge.return=we,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case v:return Ee=Y1(ge.type,ge.key,ge.props,null,we.mode,Ee),sp(Ee,ge),Ee.return=we,Ee;case T:return ge=Hw(ge,we.mode,Ee),ge.return=we,ge;case A:return ge=td(ge),Qe(we,ge,Ee)}if(K(ge)||U(ge))return ge=Xu(ge,we.mode,Ee,null),ge.return=we,ge;if(typeof ge.then=="function")return Qe(we,ay(ge),Ee);if(ge.$$typeof===I)return Qe(we,ey(we,ge),Ee);iy(we,ge)}return null}function Oe(we,ge,Ee,Ke){var Ut=ge!==null?ge.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return Ut!==null?null:Y(we,ge,""+Ee,Ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case v:return Ee.key===Ut?de(we,ge,Ee,Ke):null;case T:return Ee.key===Ut?ke(we,ge,Ee,Ke):null;case A:return Ee=td(Ee),Oe(we,ge,Ee,Ke)}if(K(Ee)||U(Ee))return Ut!==null?null:Fe(we,ge,Ee,Ke,null);if(typeof Ee.then=="function")return Oe(we,ge,ay(Ee),Ke);if(Ee.$$typeof===I)return Oe(we,ge,ey(we,Ee),Ke);iy(we,Ee)}return null}function De(we,ge,Ee,Ke,Ut){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return we=we.get(Ee)||null,Y(ge,we,""+Ke,Ut);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case v:return we=we.get(Ke.key===null?Ee:Ke.key)||null,de(ge,we,Ke,Ut);case T:return we=we.get(Ke.key===null?Ee:Ke.key)||null,ke(ge,we,Ke,Ut);case A:return Ke=td(Ke),De(we,ge,Ee,Ke,Ut)}if(K(Ke)||U(Ke))return we=we.get(Ee)||null,Fe(ge,we,Ke,Ut,null);if(typeof Ke.then=="function")return De(we,ge,Ee,ay(Ke),Ut);if(Ke.$$typeof===I)return De(we,ge,Ee,ey(ge,Ke),Ut);iy(ge,Ke)}return null}function Ct(we,ge,Ee,Ke){for(var Ut=null,Br=null,Mt=ge,hr=ge=0,Nr=null;Mt!==null&&hr<Ee.length;hr++){Mt.index>hr?(Nr=Mt,Mt=null):Nr=Mt.sibling;var $r=Oe(we,Mt,Ee[hr],Ke);if($r===null){Mt===null&&(Mt=Nr);break}l&&Mt&&$r.alternate===null&&u(we,Mt),ge=_($r,ge,hr),Br===null?Ut=$r:Br.sibling=$r,Br=$r,Mt=Nr}if(hr===Ee.length)return f(we,Mt),Or&&fl(we,hr),Ut;if(Mt===null){for(;hr<Ee.length;hr++)Mt=Qe(we,Ee[hr],Ke),Mt!==null&&(ge=_(Mt,ge,hr),Br===null?Ut=Mt:Br.sibling=Mt,Br=Mt);return Or&&fl(we,hr),Ut}for(Mt=g(Mt);hr<Ee.length;hr++)Nr=De(Mt,we,hr,Ee[hr],Ke),Nr!==null&&(l&&Nr.alternate!==null&&Mt.delete(Nr.key===null?hr:Nr.key),ge=_(Nr,ge,hr),Br===null?Ut=Nr:Br.sibling=Nr,Br=Nr);return l&&Mt.forEach(function(Hc){return u(we,Hc)}),Or&&fl(we,hr),Ut}function Gt(we,ge,Ee,Ke){if(Ee==null)throw Error(n(151));for(var Ut=null,Br=null,Mt=ge,hr=ge=0,Nr=null,$r=Ee.next();Mt!==null&&!$r.done;hr++,$r=Ee.next()){Mt.index>hr?(Nr=Mt,Mt=null):Nr=Mt.sibling;var Hc=Oe(we,Mt,$r.value,Ke);if(Hc===null){Mt===null&&(Mt=Nr);break}l&&Mt&&Hc.alternate===null&&u(we,Mt),ge=_(Hc,ge,hr),Br===null?Ut=Hc:Br.sibling=Hc,Br=Hc,Mt=Nr}if($r.done)return f(we,Mt),Or&&fl(we,hr),Ut;if(Mt===null){for(;!$r.done;hr++,$r=Ee.next())$r=Qe(we,$r.value,Ke),$r!==null&&(ge=_($r,ge,hr),Br===null?Ut=$r:Br.sibling=$r,Br=$r);return Or&&fl(we,hr),Ut}for(Mt=g(Mt);!$r.done;hr++,$r=Ee.next())$r=De(Mt,we,hr,$r.value,Ke),$r!==null&&(l&&$r.alternate!==null&&Mt.delete($r.key===null?hr:$r.key),ge=_($r,ge,hr),Br===null?Ut=$r:Br.sibling=$r,Br=$r);return l&&Mt.forEach(function(iZ){return u(we,iZ)}),Or&&fl(we,hr),Ut}function xn(we,ge,Ee,Ke){if(typeof Ee=="object"&&Ee!==null&&Ee.type===S&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case v:e:{for(var Ut=Ee.key;ge!==null;){if(ge.key===Ut){if(Ut=Ee.type,Ut===S){if(ge.tag===7){f(we,ge.sibling),Ke=b(ge,Ee.props.children),Ke.return=we,we=Ke;break e}}else if(ge.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===A&&td(Ut)===ge.type){f(we,ge.sibling),Ke=b(ge,Ee.props),sp(Ke,Ee),Ke.return=we,we=Ke;break e}f(we,ge);break}else u(we,ge);ge=ge.sibling}Ee.type===S?(Ke=Xu(Ee.props.children,we.mode,Ke,Ee.key),Ke.return=we,we=Ke):(Ke=Y1(Ee.type,Ee.key,Ee.props,null,we.mode,Ke),sp(Ke,Ee),Ke.return=we,we=Ke)}return z(we);case T:e:{for(Ut=Ee.key;ge!==null;){if(ge.key===Ut)if(ge.tag===4&&ge.stateNode.containerInfo===Ee.containerInfo&&ge.stateNode.implementation===Ee.implementation){f(we,ge.sibling),Ke=b(ge,Ee.children||[]),Ke.return=we,we=Ke;break e}else{f(we,ge);break}else u(we,ge);ge=ge.sibling}Ke=Hw(Ee,we.mode,Ke),Ke.return=we,we=Ke}return z(we);case A:return Ee=td(Ee),xn(we,ge,Ee,Ke)}if(K(Ee))return Ct(we,ge,Ee,Ke);if(U(Ee)){if(Ut=U(Ee),typeof Ut!="function")throw Error(n(150));return Ee=Ut.call(Ee),Gt(we,ge,Ee,Ke)}if(typeof Ee.then=="function")return xn(we,ge,ay(Ee),Ke);if(Ee.$$typeof===I)return xn(we,ge,ey(we,Ee),Ke);iy(we,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,ge!==null&&ge.tag===6?(f(we,ge.sibling),Ke=b(ge,Ee),Ke.return=we,we=Ke):(f(we,ge),Ke=qw(Ee,we.mode,Ke),Ke.return=we,we=Ke),z(we)):f(we,ge)}return function(we,ge,Ee,Ke){try{ip=0;var Ut=xn(we,ge,Ee,Ke);return M0=null,Ut}catch(Mt){if(Mt===R0||Mt===ry)throw Mt;var Br=ms(29,Mt,null,we.mode);return Br.lanes=Ke,Br.return=we,Br}finally{}}}var nd=sk(!0),ok=sk(!1),jc=!1;function n4(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function a4(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function kc(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Cc(l,u,f){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(Wr&2)!==0){var b=g.pending;return b===null?u.next=u:(u.next=b.next,b.next=u),g.pending=u,u=X1(l),qj(l,null,f),u}return Q1(l,g,u,f),X1(l)}function op(l,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194048)!==0)){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,hn(l,f)}}function i4(l,u){var f=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,_=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};_===null?b=_=z:_=_.next=z,f=f.next}while(f!==null);_===null?b=_=u:_=_.next=u}else b=_=u;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=u}var s4=!1;function lp(){if(s4){var l=I0;if(l!==null)throw l}}function cp(l,u,f,g){s4=!1;var b=l.updateQueue;jc=!1;var _=b.firstBaseUpdate,z=b.lastBaseUpdate,Y=b.shared.pending;if(Y!==null){b.shared.pending=null;var de=Y,ke=de.next;de.next=null,z===null?_=ke:z.next=ke,z=de;var Fe=l.alternate;Fe!==null&&(Fe=Fe.updateQueue,Y=Fe.lastBaseUpdate,Y!==z&&(Y===null?Fe.firstBaseUpdate=ke:Y.next=ke,Fe.lastBaseUpdate=de))}if(_!==null){var Qe=b.baseState;z=0,Fe=ke=de=null,Y=_;do{var Oe=Y.lane&-536870913,De=Oe!==Y.lane;if(De?(Ar&Oe)===Oe:(g&Oe)===Oe){Oe!==0&&Oe===O0&&(s4=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var Ct=l,Gt=Y;Oe=u;var xn=f;switch(Gt.tag){case 1:if(Ct=Gt.payload,typeof Ct=="function"){Qe=Ct.call(xn,Qe,Oe);break e}Qe=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Gt.payload,Oe=typeof Ct=="function"?Ct.call(xn,Qe,Oe):Ct,Oe==null)break e;Qe=m({},Qe,Oe);break e;case 2:jc=!0}}Oe=Y.callback,Oe!==null&&(l.flags|=64,De&&(l.flags|=8192),De=b.callbacks,De===null?b.callbacks=[Oe]:De.push(Oe))}else De={lane:Oe,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Fe===null?(ke=Fe=De,de=Qe):Fe=Fe.next=De,z|=Oe;if(Y=Y.next,Y===null){if(Y=b.shared.pending,Y===null)break;De=Y,Y=De.next,De.next=null,b.lastBaseUpdate=De,b.shared.pending=null}}while(!0);Fe===null&&(de=Qe),b.baseState=de,b.firstBaseUpdate=ke,b.lastBaseUpdate=Fe,_===null&&(b.shared.lanes=0),Pc|=z,l.lanes=z,l.memoizedState=Qe}}function lk(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function ck(l,u){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)lk(f[l],u)}var P0=X(null),sy=X(0);function uk(l,u){l=Tl,re(sy,l),re(P0,u),Tl=l|u.baseLanes}function o4(){re(sy,Tl),re(P0,P0.current)}function l4(){Tl=sy.current,ne(P0),ne(sy)}var gs=X(null),Us=null;function Oc(l){var u=l.alternate;re(sa,sa.current&1),re(gs,l),Us===null&&(u===null||P0.current!==null||u.memoizedState!==null)&&(Us=l)}function c4(l){re(sa,sa.current),re(gs,l),Us===null&&(Us=l)}function dk(l){l.tag===22?(re(sa,sa.current),re(gs,l),Us===null&&(Us=l)):Ic()}function Ic(){re(sa,sa.current),re(gs,gs.current)}function ys(l){ne(gs),Us===l&&(Us=null),ne(sa)}var sa=X(0);function oy(l){for(var u=l;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||m5(f)||g5(f)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var gl=0,cr=null,yn=null,xa=null,ly=!1,D0=!1,ad=!1,cy=0,up=0,L0=null,QX=0;function Zn(){throw Error(n(321))}function u4(l,u){if(u===null)return!1;for(var f=0;f<u.length&&f<l.length;f++)if(!ps(l[f],u[f]))return!1;return!0}function d4(l,u,f,g,b,_){return gl=_,cr=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?Kk:N4,ad=!1,_=f(g,b),ad=!1,D0&&(_=fk(u,f,g,b)),hk(l),_}function hk(l){H.H=fp;var u=yn!==null&&yn.next!==null;if(gl=0,xa=yn=cr=null,ly=!1,up=0,L0=null,u)throw Error(n(300));l===null||ba||(l=l.dependencies,l!==null&&J1(l)&&(ba=!0))}function fk(l,u,f,g){cr=l;var b=0;do{if(D0&&(L0=null),up=0,D0=!1,25<=b)throw Error(n(301));if(b+=1,xa=yn=null,l.updateQueue!=null){var _=l.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}H.H=Qk,_=u(f,g)}while(D0);return _}function XX(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?dp(u):u,l=l.useState()[0],(yn!==null?yn.memoizedState:null)!==l&&(cr.flags|=1024),u}function h4(){var l=cy!==0;return cy=0,l}function f4(l,u,f){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~f}function p4(l){if(ly){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ly=!1}gl=0,xa=yn=cr=null,D0=!1,up=cy=0,L0=null}function ki(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xa===null?cr.memoizedState=xa=l:xa=xa.next=l,xa}function oa(){if(yn===null){var l=cr.alternate;l=l!==null?l.memoizedState:null}else l=yn.next;var u=xa===null?cr.memoizedState:xa.next;if(u!==null)xa=u,yn=l;else{if(l===null)throw cr.alternate===null?Error(n(467)):Error(n(310));yn=l,l={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},xa===null?cr.memoizedState=xa=l:xa=xa.next=l}return xa}function uy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dp(l){var u=up;return up+=1,L0===null&&(L0=[]),l=nk(L0,l,u),u=cr,(xa===null?u.memoizedState:xa.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?Kk:N4),l}function dy(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return dp(l);if(l.$$typeof===I)return ii(l)}throw Error(n(438,String(l)))}function m4(l){var u=null,f=cr.updateQueue;if(f!==null&&(u=f.memoCache),u==null){var g=cr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(b){return b.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),f===null&&(f=uy(),cr.updateQueue=f),f.memoCache=u,f=u.data[u.index],f===void 0)for(f=u.data[u.index]=Array(l),g=0;g<l;g++)f[g]=V;return u.index++,f}function yl(l,u){return typeof u=="function"?u(l):u}function hy(l){var u=oa();return g4(u,yn,l)}function g4(l,u,f){var g=l.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=f;var b=l.baseQueue,_=g.pending;if(_!==null){if(b!==null){var z=b.next;b.next=_.next,_.next=z}u.baseQueue=b=_,g.pending=null}if(_=l.baseState,b===null)l.memoizedState=_;else{u=b.next;var Y=z=null,de=null,ke=u,Fe=!1;do{var Qe=ke.lane&-536870913;if(Qe!==ke.lane?(Ar&Qe)===Qe:(gl&Qe)===Qe){var Oe=ke.revertLane;if(Oe===0)de!==null&&(de=de.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Qe===O0&&(Fe=!0);else if((gl&Oe)===Oe){ke=ke.next,Oe===O0&&(Fe=!0);continue}else Qe={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(Y=de=Qe,z=_):de=de.next=Qe,cr.lanes|=Oe,Pc|=Oe;Qe=ke.action,ad&&f(_,Qe),_=ke.hasEagerState?ke.eagerState:f(_,Qe)}else Oe={lane:Qe,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},de===null?(Y=de=Oe,z=_):de=de.next=Oe,cr.lanes|=Qe,Pc|=Qe;ke=ke.next}while(ke!==null&&ke!==u);if(de===null?z=_:de.next=Y,!ps(_,l.memoizedState)&&(ba=!0,Fe&&(f=I0,f!==null)))throw f;l.memoizedState=_,l.baseState=z,l.baseQueue=de,g.lastRenderedState=_}return b===null&&(g.lanes=0),[l.memoizedState,g.dispatch]}function y4(l){var u=oa(),f=u.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var g=f.dispatch,b=f.pending,_=u.memoizedState;if(b!==null){f.pending=null;var z=b=b.next;do _=l(_,z.action),z=z.next;while(z!==b);ps(_,u.memoizedState)||(ba=!0),u.memoizedState=_,u.baseQueue===null&&(u.baseState=_),f.lastRenderedState=_}return[_,g]}function pk(l,u,f){var g=cr,b=oa(),_=Or;if(_){if(f===void 0)throw Error(n(407));f=f()}else f=u();var z=!ps((yn||b).memoizedState,f);if(z&&(b.memoizedState=f,ba=!0),b=b.queue,b4(yk.bind(null,g,b,l),[l]),b.getSnapshot!==u||z||xa!==null&&xa.memoizedState.tag&1){if(g.flags|=2048,B0(9,{destroy:void 0},gk.bind(null,g,b,f,u),null),En===null)throw Error(n(349));_||(gl&127)!==0||mk(g,u,f)}return f}function mk(l,u,f){l.flags|=16384,l={getSnapshot:u,value:f},u=cr.updateQueue,u===null?(u=uy(),cr.updateQueue=u,u.stores=[l]):(f=u.stores,f===null?u.stores=[l]:f.push(l))}function gk(l,u,f,g){u.value=f,u.getSnapshot=g,vk(u)&&xk(l)}function yk(l,u,f){return f(function(){vk(u)&&xk(l)})}function vk(l){var u=l.getSnapshot;l=l.value;try{var f=u();return!ps(l,f)}catch{return!0}}function xk(l){var u=Qu(l,2);u!==null&&Wi(u,l,2)}function v4(l){var u=ki();if(typeof l=="function"){var f=l;if(l=f(),ad){Bt(!0);try{f()}finally{Bt(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:l},u}function bk(l,u,f,g){return l.baseState=f,g4(l,yn,typeof g=="function"?g:yl)}function YX(l,u,f,g,b){if(my(l))throw Error(n(485));if(l=u.action,l!==null){var _={payload:b,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){_.listeners.push(z)}};H.T!==null?f(!0):_.isTransition=!1,g(_),f=u.pending,f===null?(_.next=u.pending=_,wk(u,_)):(_.next=f.next,u.pending=f.next=_)}}function wk(l,u){var f=u.action,g=u.payload,b=l.state;if(u.isTransition){var _=H.T,z={};H.T=z;try{var Y=f(b,g),de=H.S;de!==null&&de(z,Y),Sk(l,u,Y)}catch(ke){x4(l,u,ke)}finally{_!==null&&z.types!==null&&(_.types=z.types),H.T=_}}else try{_=f(b,g),Sk(l,u,_)}catch(ke){x4(l,u,ke)}}function Sk(l,u,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){_k(l,u,g)},function(g){return x4(l,u,g)}):_k(l,u,f)}function _k(l,u,f){u.status="fulfilled",u.value=f,Tk(u),l.state=f,u=l.pending,u!==null&&(f=u.next,f===u?l.pending=null:(f=f.next,u.next=f,wk(l,f)))}function x4(l,u,f){var g=l.pending;if(l.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=f,Tk(u),u=u.next;while(u!==g)}l.action=null}function Tk(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Ak(l,u){return u}function Nk(l,u){if(Or){var f=En.formState;if(f!==null){e:{var g=cr;if(Or){if(Bn){t:{for(var b=Bn,_=$s;b.nodeType!==8;){if(!_){b=null;break t}if(b=zs(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){Bn=zs(b.nextSibling),g=b.data==="F!";break e}}Nc(g)}g=!1}g&&(u=f[0])}}return f=ki(),f.memoizedState=f.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ak,lastRenderedState:u},f.queue=g,f=Hk.bind(null,cr,g),g.dispatch=f,g=v4(!1),_=A4.bind(null,cr,!1,g.queue),g=ki(),b={state:u,dispatch:null,action:l,pending:null},g.queue=b,f=YX.bind(null,cr,b,_,f),b.dispatch=f,g.memoizedState=l,[u,f,!1]}function Ek(l){var u=oa();return jk(u,yn,l)}function jk(l,u,f){if(u=g4(l,u,Ak)[0],l=hy(yl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=dp(u)}catch(z){throw z===R0?ry:z}else g=u;u=oa();var b=u.queue,_=b.dispatch;return f!==u.memoizedState&&(cr.flags|=2048,B0(9,{destroy:void 0},ZX.bind(null,b,f),null)),[g,_,l]}function ZX(l,u){l.action=u}function kk(l){var u=oa(),f=yn;if(f!==null)return jk(u,f,l);oa(),u=u.memoizedState,f=oa();var g=f.queue.dispatch;return f.memoizedState=l,[u,g,!1]}function B0(l,u,f,g){return l={tag:l,create:f,deps:g,inst:u,next:null},u=cr.updateQueue,u===null&&(u=uy(),cr.updateQueue=u),f=u.lastEffect,f===null?u.lastEffect=l.next=l:(g=f.next,f.next=l,l.next=g,u.lastEffect=l),l}function Ck(){return oa().memoizedState}function fy(l,u,f,g){var b=ki();cr.flags|=l,b.memoizedState=B0(1|u,{destroy:void 0},f,g===void 0?null:g)}function py(l,u,f,g){var b=oa();g=g===void 0?null:g;var _=b.memoizedState.inst;yn!==null&&g!==null&&u4(g,yn.memoizedState.deps)?b.memoizedState=B0(u,_,f,g):(cr.flags|=l,b.memoizedState=B0(1|u,_,f,g))}function Ok(l,u){fy(8390656,8,l,u)}function b4(l,u){py(2048,8,l,u)}function JX(l){cr.flags|=4;var u=cr.updateQueue;if(u===null)u=uy(),cr.updateQueue=u,u.events=[l];else{var f=u.events;f===null?u.events=[l]:f.push(l)}}function Ik(l){var u=oa().memoizedState;return JX({ref:u,nextImpl:l}),function(){if((Wr&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function Rk(l,u){return py(4,2,l,u)}function Mk(l,u){return py(4,4,l,u)}function Pk(l,u){if(typeof u=="function"){l=l();var f=u(l);return function(){typeof f=="function"?f():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Dk(l,u,f){f=f!=null?f.concat([l]):null,py(4,4,Pk.bind(null,u,l),f)}function w4(){}function Lk(l,u){var f=oa();u=u===void 0?null:u;var g=f.memoizedState;return u!==null&&u4(u,g[1])?g[0]:(f.memoizedState=[l,u],l)}function Bk(l,u){var f=oa();u=u===void 0?null:u;var g=f.memoizedState;if(u!==null&&u4(u,g[1]))return g[0];if(g=l(),ad){Bt(!0);try{l()}finally{Bt(!1)}}return f.memoizedState=[g,u],g}function S4(l,u,f){return f===void 0||(gl&1073741824)!==0&&(Ar&261930)===0?l.memoizedState=u:(l.memoizedState=f,l=$9(),cr.lanes|=l,Pc|=l,f)}function $k(l,u,f,g){return ps(f,u)?f:P0.current!==null?(l=S4(l,f,g),ps(l,u)||(ba=!0),l):(gl&42)===0||(gl&1073741824)!==0&&(Ar&261930)===0?(ba=!0,l.memoizedState=f):(l=$9(),cr.lanes|=l,Pc|=l,u)}function Uk(l,u,f,g,b){var _=J.p;J.p=_!==0&&8>_?_:8;var z=H.T,Y={};H.T=Y,A4(l,!1,u,f);try{var de=b(),ke=H.S;if(ke!==null&&ke(Y,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var Fe=KX(de,g);hp(l,u,Fe,bs(l))}else hp(l,u,g,bs(l))}catch(Qe){hp(l,u,{then:function(){},status:"rejected",reason:Qe},bs())}finally{J.p=_,z!==null&&Y.types!==null&&(z.types=Y.types),H.T=z}}function eY(){}function _4(l,u,f,g){if(l.tag!==5)throw Error(n(476));var b=zk(l).queue;Uk(l,b,u,ie,f===null?eY:function(){return Vk(l),f(g)})}function zk(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:ie},next:null};var f={};return u.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:f},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function Vk(l){var u=zk(l);u.next===null&&(u=l.alternate.memoizedState),hp(l,u.next.queue,{},bs())}function T4(){return ii(kp)}function Fk(){return oa().memoizedState}function qk(){return oa().memoizedState}function tY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var f=bs();l=kc(f);var g=Cc(u,l,f);g!==null&&(Wi(g,u,f),op(g,u,f)),u={cache:Jw()},l.payload=u;return}u=u.return}}function rY(l,u,f){var g=bs();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},my(l)?Gk(u,f):(f=Vw(l,u,f,g),f!==null&&(Wi(f,l,g),Wk(f,u,g)))}function Hk(l,u,f){var g=bs();hp(l,u,f,g)}function hp(l,u,f,g){var b={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(my(l))Gk(u,b);else{var _=l.alternate;if(l.lanes===0&&(_===null||_.lanes===0)&&(_=u.lastRenderedReducer,_!==null))try{var z=u.lastRenderedState,Y=_(z,f);if(b.hasEagerState=!0,b.eagerState=Y,ps(Y,z))return Q1(l,u,b,0),En===null&&K1(),!1}catch{}finally{}if(f=Vw(l,u,b,g),f!==null)return Wi(f,l,g),Wk(f,u,g),!0}return!1}function A4(l,u,f,g){if(g={lane:2,revertLane:n5(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},my(l)){if(u)throw Error(n(479))}else u=Vw(l,f,g,2),u!==null&&Wi(u,l,2)}function my(l){var u=l.alternate;return l===cr||u!==null&&u===cr}function Gk(l,u){D0=ly=!0;var f=l.pending;f===null?u.next=u:(u.next=f.next,f.next=u),l.pending=u}function Wk(l,u,f){if((f&4194048)!==0){var g=u.lanes;g&=l.pendingLanes,f|=g,u.lanes=f,hn(l,f)}}var fp={readContext:ii,use:dy,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useLayoutEffect:Zn,useInsertionEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useSyncExternalStore:Zn,useId:Zn,useHostTransitionStatus:Zn,useFormState:Zn,useActionState:Zn,useOptimistic:Zn,useMemoCache:Zn,useCacheRefresh:Zn};fp.useEffectEvent=Zn;var Kk={readContext:ii,use:dy,useCallback:function(l,u){return ki().memoizedState=[l,u===void 0?null:u],l},useContext:ii,useEffect:Ok,useImperativeHandle:function(l,u,f){f=f!=null?f.concat([l]):null,fy(4194308,4,Pk.bind(null,u,l),f)},useLayoutEffect:function(l,u){return fy(4194308,4,l,u)},useInsertionEffect:function(l,u){fy(4,2,l,u)},useMemo:function(l,u){var f=ki();u=u===void 0?null:u;var g=l();if(ad){Bt(!0);try{l()}finally{Bt(!1)}}return f.memoizedState=[g,u],g},useReducer:function(l,u,f){var g=ki();if(f!==void 0){var b=f(u);if(ad){Bt(!0);try{f(u)}finally{Bt(!1)}}}else b=u;return g.memoizedState=g.baseState=b,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:b},g.queue=l,l=l.dispatch=rY.bind(null,cr,l),[g.memoizedState,l]},useRef:function(l){var u=ki();return l={current:l},u.memoizedState=l},useState:function(l){l=v4(l);var u=l.queue,f=Hk.bind(null,cr,u);return u.dispatch=f,[l.memoizedState,f]},useDebugValue:w4,useDeferredValue:function(l,u){var f=ki();return S4(f,l,u)},useTransition:function(){var l=v4(!1);return l=Uk.bind(null,cr,l.queue,!0,!1),ki().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,f){var g=cr,b=ki();if(Or){if(f===void 0)throw Error(n(407));f=f()}else{if(f=u(),En===null)throw Error(n(349));(Ar&127)!==0||mk(g,u,f)}b.memoizedState=f;var _={value:f,getSnapshot:u};return b.queue=_,Ok(yk.bind(null,g,_,l),[l]),g.flags|=2048,B0(9,{destroy:void 0},gk.bind(null,g,_,f,u),null),f},useId:function(){var l=ki(),u=En.identifierPrefix;if(Or){var f=Ro,g=Io;f=(g&~(1<<32-Ze(g)-1)).toString(32)+f,u="_"+u+"R_"+f,f=cy++,0<f&&(u+="H"+f.toString(32)),u+="_"}else f=QX++,u="_"+u+"r_"+f.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:T4,useFormState:Nk,useActionState:Nk,useOptimistic:function(l){var u=ki();u.memoizedState=u.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=f,u=A4.bind(null,cr,!0,f),f.dispatch=u,[l,u]},useMemoCache:m4,useCacheRefresh:function(){return ki().memoizedState=tY.bind(null,cr)},useEffectEvent:function(l){var u=ki(),f={impl:l};return u.memoizedState=f,function(){if((Wr&2)!==0)throw Error(n(440));return f.impl.apply(void 0,arguments)}}},N4={readContext:ii,use:dy,useCallback:Lk,useContext:ii,useEffect:b4,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:Mk,useMemo:Bk,useReducer:hy,useRef:Ck,useState:function(){return hy(yl)},useDebugValue:w4,useDeferredValue:function(l,u){var f=oa();return $k(f,yn.memoizedState,l,u)},useTransition:function(){var l=hy(yl)[0],u=oa().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:pk,useId:Fk,useHostTransitionStatus:T4,useFormState:Ek,useActionState:Ek,useOptimistic:function(l,u){var f=oa();return bk(f,yn,l,u)},useMemoCache:m4,useCacheRefresh:qk};N4.useEffectEvent=Ik;var Qk={readContext:ii,use:dy,useCallback:Lk,useContext:ii,useEffect:b4,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:Mk,useMemo:Bk,useReducer:y4,useRef:Ck,useState:function(){return y4(yl)},useDebugValue:w4,useDeferredValue:function(l,u){var f=oa();return yn===null?S4(f,l,u):$k(f,yn.memoizedState,l,u)},useTransition:function(){var l=y4(yl)[0],u=oa().memoizedState;return[typeof l=="boolean"?l:dp(l),u]},useSyncExternalStore:pk,useId:Fk,useHostTransitionStatus:T4,useFormState:kk,useActionState:kk,useOptimistic:function(l,u){var f=oa();return yn!==null?bk(f,yn,l,u):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:m4,useCacheRefresh:qk};Qk.useEffectEvent=Ik;function E4(l,u,f,g){u=l.memoizedState,f=f(g,u),f=f==null?u:m({},u,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var j4={enqueueSetState:function(l,u,f){l=l._reactInternals;var g=bs(),b=kc(g);b.payload=u,f!=null&&(b.callback=f),u=Cc(l,b,g),u!==null&&(Wi(u,l,g),op(u,l,g))},enqueueReplaceState:function(l,u,f){l=l._reactInternals;var g=bs(),b=kc(g);b.tag=1,b.payload=u,f!=null&&(b.callback=f),u=Cc(l,b,g),u!==null&&(Wi(u,l,g),op(u,l,g))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var f=bs(),g=kc(f);g.tag=2,u!=null&&(g.callback=u),u=Cc(l,g,f),u!==null&&(Wi(u,l,f),op(u,l,f))}};function Xk(l,u,f,g,b,_,z){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,_,z):u.prototype&&u.prototype.isPureReactComponent?!Jf(f,g)||!Jf(b,_):!0}function Yk(l,u,f,g){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,g),u.state!==l&&j4.enqueueReplaceState(u,u.state,null)}function id(l,u){var f=u;if("ref"in u){f={};for(var g in u)g!=="ref"&&(f[g]=u[g])}if(l=l.defaultProps){f===u&&(f=m({},f));for(var b in l)f[b]===void 0&&(f[b]=l[b])}return f}function Zk(l){W1(l)}function Jk(l){console.error(l)}function e9(l){W1(l)}function gy(l,u){try{var f=l.onUncaughtError;f(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function t9(l,u,f){try{var g=l.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function k4(l,u,f){return f=kc(f),f.tag=3,f.payload={element:null},f.callback=function(){gy(l,u)},f}function r9(l){return l=kc(l),l.tag=3,l}function n9(l,u,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var _=g.value;l.payload=function(){return b(_)},l.callback=function(){t9(u,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(l.callback=function(){t9(u,f,g),typeof b!="function"&&(Dc===null?Dc=new Set([this]):Dc.add(this));var Y=g.stack;this.componentDidCatch(g.value,{componentStack:Y!==null?Y:""})})}function nY(l,u,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=f.alternate,u!==null&&C0(u,f,b,!0),f=gs.current,f!==null){switch(f.tag){case 31:case 13:return Us===null?jy():f.alternate===null&&Jn===0&&(Jn=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===ny?f.flags|=16384:(u=f.updateQueue,u===null?f.updateQueue=new Set([g]):u.add(g),e5(l,g,b)),!1;case 22:return f.flags|=65536,g===ny?f.flags|=16384:(u=f.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=u):(f=u.retryQueue,f===null?u.retryQueue=new Set([g]):f.add(g)),e5(l,g,b)),!1}throw Error(n(435,f.tag))}return e5(l,g,b),jy(),!1}if(Or)return u=gs.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=b,g!==Kw&&(l=Error(n(422),{cause:g}),rp(Ds(l,f)))):(g!==Kw&&(u=Error(n(423),{cause:g}),rp(Ds(u,f))),l=l.current.alternate,l.flags|=65536,b&=-b,l.lanes|=b,g=Ds(g,f),b=k4(l.stateNode,g,b),i4(l,b),Jn!==4&&(Jn=2)),!1;var _=Error(n(520),{cause:g});if(_=Ds(_,f),wp===null?wp=[_]:wp.push(_),Jn!==4&&(Jn=2),u===null)return!0;g=Ds(g,f),f=u;do{switch(f.tag){case 3:return f.flags|=65536,l=b&-b,f.lanes|=l,l=k4(f.stateNode,g,l),i4(f,l),!1;case 1:if(u=f.type,_=f.stateNode,(f.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Dc===null||!Dc.has(_))))return f.flags|=65536,b&=-b,f.lanes|=b,b=r9(b),n9(b,l,f,g),i4(f,b),!1}f=f.return}while(f!==null);return!1}var C4=Error(n(461)),ba=!1;function si(l,u,f,g){u.child=l===null?ok(u,null,f,g):nd(u,l.child,f,g)}function a9(l,u,f,g,b){f=f.render;var _=u.ref;if("ref"in g){var z={};for(var Y in g)Y!=="ref"&&(z[Y]=g[Y])}else z=g;return Ju(u),g=d4(l,u,f,z,_,b),Y=h4(),l!==null&&!ba?(f4(l,u,b),vl(l,u,b)):(Or&&Y&&Gw(u),u.flags|=1,si(l,u,g,b),u.child)}function i9(l,u,f,g,b){if(l===null){var _=f.type;return typeof _=="function"&&!Fw(_)&&_.defaultProps===void 0&&f.compare===null?(u.tag=15,u.type=_,s9(l,u,_,g,b)):(l=Y1(f.type,null,g,u,u.mode,b),l.ref=u.ref,l.return=u,u.child=l)}if(_=l.child,!B4(l,b)){var z=_.memoizedProps;if(f=f.compare,f=f!==null?f:Jf,f(z,g)&&l.ref===u.ref)return vl(l,u,b)}return u.flags|=1,l=hl(_,g),l.ref=u.ref,l.return=u,u.child=l}function s9(l,u,f,g,b){if(l!==null){var _=l.memoizedProps;if(Jf(_,g)&&l.ref===u.ref)if(ba=!1,u.pendingProps=g=_,B4(l,b))(l.flags&131072)!==0&&(ba=!0);else return u.lanes=l.lanes,vl(l,u,b)}return O4(l,u,f,g,b)}function o9(l,u,f,g){var b=g.children,_=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(_=_!==null?_.baseLanes|f:f,l!==null){for(g=u.child=l.child,b=0;g!==null;)b=b|g.lanes|g.childLanes,g=g.sibling;g=b&~_}else g=0,u.child=null;return l9(l,u,_,f,g)}if((f&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&ty(u,_!==null?_.cachePool:null),_!==null?uk(u,_):o4(),dk(u);else return g=u.lanes=536870912,l9(l,u,_!==null?_.baseLanes|f:f,f,g)}else _!==null?(ty(u,_.cachePool),uk(u,_),Ic(),u.memoizedState=null):(l!==null&&ty(u,null),o4(),Ic());return si(l,u,b,f),u.child}function pp(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function l9(l,u,f,g,b){var _=t4();return _=_===null?null:{parent:va._currentValue,pool:_},u.memoizedState={baseLanes:f,cachePool:_},l!==null&&ty(u,null),o4(),dk(u),l!==null&&C0(l,u,g,!0),u.childLanes=b,null}function yy(l,u){return u=xy({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function c9(l,u,f){return nd(u,l.child,null,f),l=yy(u,u.pendingProps),l.flags|=2,ys(u),u.memoizedState=null,l}function aY(l,u,f){var g=u.pendingProps,b=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(Or){if(g.mode==="hidden")return l=yy(u,g),u.lanes=536870912,pp(null,l);if(c4(u),(l=Bn)?(l=wC(l,$s),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Tc!==null?{id:Io,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},f=Gj(l),f.return=u,u.child=f,ai=u,Bn=null)):l=null,l===null)throw Nc(u);return u.lanes=536870912,null}return yy(u,g)}var _=l.memoizedState;if(_!==null){var z=_.dehydrated;if(c4(u),b)if(u.flags&256)u.flags&=-257,u=c9(l,u,f);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(ba||C0(l,u,f,!1),b=(f&l.childLanes)!==0,ba||b){if(g=En,g!==null&&(z=On(g,f),z!==0&&z!==_.retryLane))throw _.retryLane=z,Qu(l,z),Wi(g,l,z),C4;jy(),u=c9(l,u,f)}else l=_.treeContext,Bn=zs(z.nextSibling),ai=u,Or=!0,Ac=null,$s=!1,l!==null&&Qj(u,l),u=yy(u,g),u.flags|=4096;return u}return l=hl(l.child,{mode:g.mode,children:g.children}),l.ref=u.ref,u.child=l,l.return=u,l}function vy(l,u){var f=u.ref;if(f===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(l===null||l.ref!==f)&&(u.flags|=4194816)}}function O4(l,u,f,g,b){return Ju(u),f=d4(l,u,f,g,void 0,b),g=h4(),l!==null&&!ba?(f4(l,u,b),vl(l,u,b)):(Or&&g&&Gw(u),u.flags|=1,si(l,u,f,b),u.child)}function u9(l,u,f,g,b,_){return Ju(u),u.updateQueue=null,f=fk(u,g,f,b),hk(l),g=h4(),l!==null&&!ba?(f4(l,u,_),vl(l,u,_)):(Or&&g&&Gw(u),u.flags|=1,si(l,u,f,_),u.child)}function d9(l,u,f,g,b){if(Ju(u),u.stateNode===null){var _=N0,z=f.contextType;typeof z=="object"&&z!==null&&(_=ii(z)),_=new f(g,_),u.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=j4,u.stateNode=_,_._reactInternals=u,_=u.stateNode,_.props=g,_.state=u.memoizedState,_.refs={},n4(u),z=f.contextType,_.context=typeof z=="object"&&z!==null?ii(z):N0,_.state=u.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&(E4(u,f,z,g),_.state=u.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(z=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),z!==_.state&&j4.enqueueReplaceState(_,_.state,null),cp(u,g,_,b),lp(),_.state=u.memoizedState),typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(l===null){_=u.stateNode;var Y=u.memoizedProps,de=id(f,Y);_.props=de;var ke=_.context,Fe=f.contextType;z=N0,typeof Fe=="object"&&Fe!==null&&(z=ii(Fe));var Qe=f.getDerivedStateFromProps;Fe=typeof Qe=="function"||typeof _.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Fe||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(Y||ke!==z)&&Yk(u,_,g,z),jc=!1;var Oe=u.memoizedState;_.state=Oe,cp(u,g,_,b),lp(),ke=u.memoizedState,Y||Oe!==ke||jc?(typeof Qe=="function"&&(E4(u,f,Qe,g),ke=u.memoizedState),(de=jc||Xk(u,f,de,g,Oe,ke,z))?(Fe||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(u.flags|=4194308)):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=ke),_.props=g,_.state=ke,_.context=z,g=de):(typeof _.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{_=u.stateNode,a4(l,u),z=u.memoizedProps,Fe=id(f,z),_.props=Fe,Qe=u.pendingProps,Oe=_.context,ke=f.contextType,de=N0,typeof ke=="object"&&ke!==null&&(de=ii(ke)),Y=f.getDerivedStateFromProps,(ke=typeof Y=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(z!==Qe||Oe!==de)&&Yk(u,_,g,de),jc=!1,Oe=u.memoizedState,_.state=Oe,cp(u,g,_,b),lp();var De=u.memoizedState;z!==Qe||Oe!==De||jc||l!==null&&l.dependencies!==null&&J1(l.dependencies)?(typeof Y=="function"&&(E4(u,f,Y,g),De=u.memoizedState),(Fe=jc||Xk(u,f,Fe,g,Oe,De,de)||l!==null&&l.dependencies!==null&&J1(l.dependencies))?(ke||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,De,de),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,De,de)),typeof _.componentDidUpdate=="function"&&(u.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof _.componentDidUpdate!="function"||z===l.memoizedProps&&Oe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&Oe===l.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=De),_.props=g,_.state=De,_.context=de,g=Fe):(typeof _.componentDidUpdate!="function"||z===l.memoizedProps&&Oe===l.memoizedState||(u.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||z===l.memoizedProps&&Oe===l.memoizedState||(u.flags|=1024),g=!1)}return _=g,vy(l,u),g=(u.flags&128)!==0,_||g?(_=u.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:_.render(),u.flags|=1,l!==null&&g?(u.child=nd(u,l.child,null,b),u.child=nd(u,null,f,b)):si(l,u,f,b),u.memoizedState=_.state,l=u.child):l=vl(l,u,b),l}function h9(l,u,f,g){return Yu(),u.flags|=256,si(l,u,f,g),u.child}var I4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function R4(l){return{baseLanes:l,cachePool:tk()}}function M4(l,u,f){return l=l!==null?l.childLanes&~f:0,u&&(l|=xs),l}function f9(l,u,f){var g=u.pendingProps,b=!1,_=(u.flags&128)!==0,z;if((z=_)||(z=l!==null&&l.memoizedState===null?!1:(sa.current&2)!==0),z&&(b=!0,u.flags&=-129),z=(u.flags&32)!==0,u.flags&=-33,l===null){if(Or){if(b?Oc(u):Ic(),(l=Bn)?(l=wC(l,$s),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Tc!==null?{id:Io,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},f=Gj(l),f.return=u,u.child=f,ai=u,Bn=null)):l=null,l===null)throw Nc(u);return g5(l)?u.lanes=32:u.lanes=536870912,null}var Y=g.children;return g=g.fallback,b?(Ic(),b=u.mode,Y=xy({mode:"hidden",children:Y},b),g=Xu(g,b,f,null),Y.return=u,g.return=u,Y.sibling=g,u.child=Y,g=u.child,g.memoizedState=R4(f),g.childLanes=M4(l,z,f),u.memoizedState=I4,pp(null,g)):(Oc(u),P4(u,Y))}var de=l.memoizedState;if(de!==null&&(Y=de.dehydrated,Y!==null)){if(_)u.flags&256?(Oc(u),u.flags&=-257,u=D4(l,u,f)):u.memoizedState!==null?(Ic(),u.child=l.child,u.flags|=128,u=null):(Ic(),Y=g.fallback,b=u.mode,g=xy({mode:"visible",children:g.children},b),Y=Xu(Y,b,f,null),Y.flags|=2,g.return=u,Y.return=u,g.sibling=Y,u.child=g,nd(u,l.child,null,f),g=u.child,g.memoizedState=R4(f),g.childLanes=M4(l,z,f),u.memoizedState=I4,u=pp(null,g));else if(Oc(u),g5(Y)){if(z=Y.nextSibling&&Y.nextSibling.dataset,z)var ke=z.dgst;z=ke,g=Error(n(419)),g.stack="",g.digest=z,rp({value:g,source:null,stack:null}),u=D4(l,u,f)}else if(ba||C0(l,u,f,!1),z=(f&l.childLanes)!==0,ba||z){if(z=En,z!==null&&(g=On(z,f),g!==0&&g!==de.retryLane))throw de.retryLane=g,Qu(l,g),Wi(z,l,g),C4;m5(Y)||jy(),u=D4(l,u,f)}else m5(Y)?(u.flags|=192,u.child=l.child,u=null):(l=de.treeContext,Bn=zs(Y.nextSibling),ai=u,Or=!0,Ac=null,$s=!1,l!==null&&Qj(u,l),u=P4(u,g.children),u.flags|=4096);return u}return b?(Ic(),Y=g.fallback,b=u.mode,de=l.child,ke=de.sibling,g=hl(de,{mode:"hidden",children:g.children}),g.subtreeFlags=de.subtreeFlags&65011712,ke!==null?Y=hl(ke,Y):(Y=Xu(Y,b,f,null),Y.flags|=2),Y.return=u,g.return=u,g.sibling=Y,u.child=g,pp(null,g),g=u.child,Y=l.child.memoizedState,Y===null?Y=R4(f):(b=Y.cachePool,b!==null?(de=va._currentValue,b=b.parent!==de?{parent:de,pool:de}:b):b=tk(),Y={baseLanes:Y.baseLanes|f,cachePool:b}),g.memoizedState=Y,g.childLanes=M4(l,z,f),u.memoizedState=I4,pp(l.child,g)):(Oc(u),f=l.child,l=f.sibling,f=hl(f,{mode:"visible",children:g.children}),f.return=u,f.sibling=null,l!==null&&(z=u.deletions,z===null?(u.deletions=[l],u.flags|=16):z.push(l)),u.child=f,u.memoizedState=null,f)}function P4(l,u){return u=xy({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function xy(l,u){return l=ms(22,l,null,u),l.lanes=0,l}function D4(l,u,f){return nd(u,l.child,null,f),l=P4(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function p9(l,u,f){l.lanes|=u;var g=l.alternate;g!==null&&(g.lanes|=u),Yw(l.return,u,f)}function L4(l,u,f,g,b,_){var z=l.memoizedState;z===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b,treeForkCount:_}:(z.isBackwards=u,z.rendering=null,z.renderingStartTime=0,z.last=g,z.tail=f,z.tailMode=b,z.treeForkCount=_)}function m9(l,u,f){var g=u.pendingProps,b=g.revealOrder,_=g.tail;g=g.children;var z=sa.current,Y=(z&2)!==0;if(Y?(z=z&1|2,u.flags|=128):z&=1,re(sa,z),si(l,u,g,f),g=Or?tp:0,!Y&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&p9(l,f,u);else if(l.tag===19)p9(l,f,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(b){case"forwards":for(f=u.child,b=null;f!==null;)l=f.alternate,l!==null&&oy(l)===null&&(b=f),f=f.sibling;f=b,f===null?(b=u.child,u.child=null):(b=f.sibling,f.sibling=null),L4(u,!1,b,f,_,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,b=u.child,u.child=null;b!==null;){if(l=b.alternate,l!==null&&oy(l)===null){u.child=b;break}l=b.sibling,b.sibling=f,f=b,b=l}L4(u,!0,f,null,_,g);break;case"together":L4(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function vl(l,u,f){if(l!==null&&(u.dependencies=l.dependencies),Pc|=u.lanes,(f&u.childLanes)===0)if(l!==null){if(C0(l,u,f,!1),(f&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,f=hl(l,l.pendingProps),u.child=f,f.return=u;l.sibling!==null;)l=l.sibling,f=f.sibling=hl(l,l.pendingProps),f.return=u;f.sibling=null}return u.child}function B4(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&J1(l)))}function iY(l,u,f){switch(u.tag){case 3:st(u,u.stateNode.containerInfo),Ec(u,va,l.memoizedState.cache),Yu();break;case 27:case 5:he(u);break;case 4:st(u,u.stateNode.containerInfo);break;case 10:Ec(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,c4(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Oc(u),u.flags|=128,null):(f&u.child.childLanes)!==0?f9(l,u,f):(Oc(u),l=vl(l,u,f),l!==null?l.sibling:null);Oc(u);break;case 19:var b=(l.flags&128)!==0;if(g=(f&u.childLanes)!==0,g||(C0(l,u,f,!1),g=(f&u.childLanes)!==0),b){if(g)return m9(l,u,f);u.flags|=128}if(b=u.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),re(sa,sa.current),g)break;return null;case 22:return u.lanes=0,o9(l,u,f,u.pendingProps);case 24:Ec(u,va,l.memoizedState.cache)}return vl(l,u,f)}function g9(l,u,f){if(l!==null)if(l.memoizedProps!==u.pendingProps)ba=!0;else{if(!B4(l,f)&&(u.flags&128)===0)return ba=!1,iY(l,u,f);ba=(l.flags&131072)!==0}else ba=!1,Or&&(u.flags&1048576)!==0&&Kj(u,tp,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(l=td(u.elementType),u.type=l,typeof l=="function")Fw(l)?(g=id(l,g),u.tag=1,u=d9(null,u,l,g,f)):(u.tag=0,u=O4(null,u,l,g,f));else{if(l!=null){var b=l.$$typeof;if(b===L){u.tag=11,u=a9(null,u,l,g,f);break e}else if(b===N){u.tag=14,u=i9(null,u,l,g,f);break e}}throw u=Q(l)||l,Error(n(306,u,""))}}return u;case 0:return O4(l,u,u.type,u.pendingProps,f);case 1:return g=u.type,b=id(g,u.pendingProps),d9(l,u,g,b,f);case 3:e:{if(st(u,u.stateNode.containerInfo),l===null)throw Error(n(387));g=u.pendingProps;var _=u.memoizedState;b=_.element,a4(l,u),cp(u,g,null,f);var z=u.memoizedState;if(g=z.cache,Ec(u,va,g),g!==_.cache&&Zw(u,[va],f,!0),lp(),g=z.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:z.cache},u.updateQueue.baseState=_,u.memoizedState=_,u.flags&256){u=h9(l,u,g,f);break e}else if(g!==b){b=Ds(Error(n(424)),u),rp(b),u=h9(l,u,g,f);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Bn=zs(l.firstChild),ai=u,Or=!0,Ac=null,$s=!0,f=ok(u,null,g,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Yu(),g===b){u=vl(l,u,f);break e}si(l,u,g,f)}u=u.child}return u;case 26:return vy(l,u),l===null?(f=EC(u.type,null,u.pendingProps,null))?u.memoizedState=f:Or||(f=u.type,l=u.pendingProps,g=Py(ze.current).createElement(f),g[Yr]=u,g[pn]=l,oi(g,f,l),dr(g),u.stateNode=g):u.memoizedState=EC(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return he(u),l===null&&Or&&(g=u.stateNode=TC(u.type,u.pendingProps,ze.current),ai=u,$s=!0,b=Bn,Uc(u.type)?(y5=b,Bn=zs(g.firstChild)):Bn=b),si(l,u,u.pendingProps.children,f),vy(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&Or&&((b=g=Bn)&&(g=PY(g,u.type,u.pendingProps,$s),g!==null?(u.stateNode=g,ai=u,Bn=zs(g.firstChild),$s=!1,b=!0):b=!1),b||Nc(u)),he(u),b=u.type,_=u.pendingProps,z=l!==null?l.memoizedProps:null,g=_.children,h5(b,_)?g=null:z!==null&&h5(b,z)&&(u.flags|=32),u.memoizedState!==null&&(b=d4(l,u,XX,null,null,f),kp._currentValue=b),vy(l,u),si(l,u,g,f),u.child;case 6:return l===null&&Or&&((l=f=Bn)&&(f=DY(f,u.pendingProps,$s),f!==null?(u.stateNode=f,ai=u,Bn=null,l=!0):l=!1),l||Nc(u)),null;case 13:return f9(l,u,f);case 4:return st(u,u.stateNode.containerInfo),g=u.pendingProps,l===null?u.child=nd(u,null,g,f):si(l,u,g,f),u.child;case 11:return a9(l,u,u.type,u.pendingProps,f);case 7:return si(l,u,u.pendingProps,f),u.child;case 8:return si(l,u,u.pendingProps.children,f),u.child;case 12:return si(l,u,u.pendingProps.children,f),u.child;case 10:return g=u.pendingProps,Ec(u,u.type,g.value),si(l,u,g.children,f),u.child;case 9:return b=u.type._context,g=u.pendingProps.children,Ju(u),b=ii(b),g=g(b),u.flags|=1,si(l,u,g,f),u.child;case 14:return i9(l,u,u.type,u.pendingProps,f);case 15:return s9(l,u,u.type,u.pendingProps,f);case 19:return m9(l,u,f);case 31:return aY(l,u,f);case 22:return o9(l,u,f,u.pendingProps);case 24:return Ju(u),g=ii(va),l===null?(b=t4(),b===null&&(b=En,_=Jw(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=f),b=_),u.memoizedState={parent:g,cache:b},n4(u),Ec(u,va,b)):((l.lanes&f)!==0&&(a4(l,u),cp(u,null,null,f),lp()),b=l.memoizedState,_=u.memoizedState,b.parent!==g?(b={parent:g,cache:g},u.memoizedState=b,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=b),Ec(u,va,g)):(g=_.cache,Ec(u,va,g),g!==b.cache&&Zw(u,[va],f,!0))),si(l,u,u.pendingProps.children,f),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function xl(l){l.flags|=4}function $4(l,u,f,g,b){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(b&335544128)===b)if(l.stateNode.complete)l.flags|=8192;else if(F9())l.flags|=8192;else throw rd=ny,r4}else l.flags&=-16777217}function y9(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!IC(u))if(F9())l.flags|=8192;else throw rd=ny,r4}function by(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Hr():536870912,l.lanes|=u,V0|=u)}function mp(l,u){if(!Or)switch(l.tailMode){case"hidden":u=l.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function $n(l){var u=l.alternate!==null&&l.alternate.child===l.child,f=0,g=0;if(u)for(var b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=l,b=b.sibling;else for(b=l.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=l,b=b.sibling;return l.subtreeFlags|=g,l.childLanes=f,u}function sY(l,u,f){var g=u.pendingProps;switch(Ww(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(u),null;case 1:return $n(u),null;case 3:return f=u.stateNode,g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),ml(va),W(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(k0(u)?xl(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Qw())),$n(u),null;case 26:var b=u.type,_=u.memoizedState;return l===null?(xl(u),_!==null?($n(u),y9(u,_)):($n(u),$4(u,b,null,g,f))):_?_!==l.memoizedState?(xl(u),$n(u),y9(u,_)):($n(u),u.flags&=-16777217):(l=l.memoizedProps,l!==g&&xl(u),$n(u),$4(u,b,l,g,f)),null;case 27:if(te(u),f=ze.current,b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return $n(u),null}l=Ae.current,k0(u)?Xj(u):(l=TC(b,g,f),u.stateNode=l,xl(u))}return $n(u),null;case 5:if(te(u),b=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(!g){if(u.stateNode===null)throw Error(n(166));return $n(u),null}if(_=Ae.current,k0(u))Xj(u);else{var z=Py(ze.current);switch(_){case 1:_=z.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:_=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":_=z.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":_=z.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":_=z.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?z.createElement("select",{is:g.is}):z.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?z.createElement(b,{is:g.is}):z.createElement(b)}}_[Yr]=u,_[pn]=g;e:for(z=u.child;z!==null;){if(z.tag===5||z.tag===6)_.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===u)break e;for(;z.sibling===null;){if(z.return===null||z.return===u)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}u.stateNode=_;e:switch(oi(_,b,g),b){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&xl(u)}}return $n(u),$4(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,f),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==g&&xl(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(n(166));if(l=ze.current,k0(u)){if(l=u.stateNode,f=u.memoizedProps,g=null,b=ai,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}l[Yr]=u,l=!!(l.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||fC(l.nodeValue,f)),l||Nc(u,!0)}else l=Py(l).createTextNode(g),l[Yr]=u,u.stateNode=l}return $n(u),null;case 31:if(f=u.memoizedState,l===null||l.memoizedState!==null){if(g=k0(u),f!==null){if(l===null){if(!g)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Yr]=u}else Yu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),l=!1}else f=Qw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=f),l=!0;if(!l)return u.flags&256?(ys(u),u):(ys(u),null);if((u.flags&128)!==0)throw Error(n(558))}return $n(u),null;case 13:if(g=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(b=k0(u),g!==null&&g.dehydrated!==null){if(l===null){if(!b)throw Error(n(318));if(b=u.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[Yr]=u}else Yu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;$n(u),b=!1}else b=Qw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=b),b=!0;if(!b)return u.flags&256?(ys(u),u):(ys(u),null)}return ys(u),(u.flags&128)!==0?(u.lanes=f,u):(f=g!==null,l=l!==null&&l.memoizedState!==null,f&&(g=u.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==b&&(g.flags|=2048)),f!==l&&f&&(u.child.flags|=8192),by(u,u.updateQueue),$n(u),null);case 4:return W(),l===null&&o5(u.stateNode.containerInfo),$n(u),null;case 10:return ml(u.type),$n(u),null;case 19:if(ne(sa),g=u.memoizedState,g===null)return $n(u),null;if(b=(u.flags&128)!==0,_=g.rendering,_===null)if(b)mp(g,!1);else{if(Jn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(_=oy(l),_!==null){for(u.flags|=128,mp(g,!1),l=_.updateQueue,u.updateQueue=l,by(u,l),u.subtreeFlags=0,l=f,f=u.child;f!==null;)Hj(f,l),f=f.sibling;return re(sa,sa.current&1|2),Or&&fl(u,g.treeForkCount),u.child}l=l.sibling}g.tail!==null&&Xe()>Ay&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304)}else{if(!b)if(l=oy(_),l!==null){if(u.flags|=128,b=!0,l=l.updateQueue,u.updateQueue=l,by(u,l),mp(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!Or)return $n(u),null}else 2*Xe()-g.renderingStartTime>Ay&&f!==536870912&&(u.flags|=128,b=!0,mp(g,!1),u.lanes=4194304);g.isBackwards?(_.sibling=u.child,u.child=_):(l=g.last,l!==null?l.sibling=_:u.child=_,g.last=_)}return g.tail!==null?(l=g.tail,g.rendering=l,g.tail=l.sibling,g.renderingStartTime=Xe(),l.sibling=null,f=sa.current,re(sa,b?f&1|2:f&1),Or&&fl(u,g.treeForkCount),l):($n(u),null);case 22:case 23:return ys(u),l4(),g=u.memoizedState!==null,l!==null?l.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(f&536870912)!==0&&(u.flags&128)===0&&($n(u),u.subtreeFlags&6&&(u.flags|=8192)):$n(u),f=u.updateQueue,f!==null&&by(u,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048),l!==null&&ne(ed),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),u.memoizedState.cache!==f&&(u.flags|=2048),ml(va),$n(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function oY(l,u){switch(Ww(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return ml(va),W(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return te(u),null;case 31:if(u.memoizedState!==null){if(ys(u),u.alternate===null)throw Error(n(340));Yu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ys(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Yu()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return ne(sa),null;case 4:return W(),null;case 10:return ml(u.type),null;case 22:case 23:return ys(u),l4(),l!==null&&ne(ed),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return ml(va),null;case 25:return null;default:return null}}function v9(l,u){switch(Ww(u),u.tag){case 3:ml(va),W();break;case 26:case 27:case 5:te(u);break;case 4:W();break;case 31:u.memoizedState!==null&&ys(u);break;case 13:ys(u);break;case 19:ne(sa);break;case 10:ml(u.type);break;case 22:case 23:ys(u),l4(),l!==null&&ne(ed);break;case 24:ml(va)}}function gp(l,u){try{var f=u.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&l)===l){g=void 0;var _=f.create,z=f.inst;g=_(),z.destroy=g}f=f.next}while(f!==b)}}catch(Y){sn(u,u.return,Y)}}function Rc(l,u,f){try{var g=u.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var _=b.next;g=_;do{if((g.tag&l)===l){var z=g.inst,Y=z.destroy;if(Y!==void 0){z.destroy=void 0,b=u;var de=f,ke=Y;try{ke()}catch(Fe){sn(b,de,Fe)}}}g=g.next}while(g!==_)}}catch(Fe){sn(u,u.return,Fe)}}function x9(l){var u=l.updateQueue;if(u!==null){var f=l.stateNode;try{ck(u,f)}catch(g){sn(l,l.return,g)}}}function b9(l,u,f){f.props=id(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(g){sn(l,u,g)}}function yp(l,u){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var g=l.stateNode;break;case 30:g=l.stateNode;break;default:g=l.stateNode}typeof f=="function"?l.refCleanup=f(g):f.current=g}}catch(b){sn(l,u,b)}}function Mo(l,u){var f=l.ref,g=l.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){sn(l,u,b)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){sn(l,u,b)}else f.current=null}function w9(l){var u=l.type,f=l.memoizedProps,g=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){sn(l,l.return,b)}}function U4(l,u,f){try{var g=l.stateNode;kY(g,l.type,f,u),g[pn]=u}catch(b){sn(l,l.return,b)}}function S9(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Uc(l.type)||l.tag===4}function z4(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||S9(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Uc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function V4(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,u):(u=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,u.appendChild(l),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=gn));else if(g!==4&&(g===27&&Uc(l.type)&&(f=l.stateNode,u=null),l=l.child,l!==null))for(V4(l,u,f),l=l.sibling;l!==null;)V4(l,u,f),l=l.sibling}function wy(l,u,f){var g=l.tag;if(g===5||g===6)l=l.stateNode,u?f.insertBefore(l,u):f.appendChild(l);else if(g!==4&&(g===27&&Uc(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(wy(l,u,f),l=l.sibling;l!==null;)wy(l,u,f),l=l.sibling}function _9(l){var u=l.stateNode,f=l.memoizedProps;try{for(var g=l.type,b=u.attributes;b.length;)u.removeAttributeNode(b[0]);oi(u,g,f),u[Yr]=l,u[pn]=f}catch(_){sn(l,l.return,_)}}var bl=!1,wa=!1,F4=!1,T9=typeof WeakSet=="function"?WeakSet:Set,Ga=null;function lY(l,u){if(l=l.containerInfo,u5=Vy,l=Dj(l),Dw(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{f.nodeType,_.nodeType}catch{f=null;break e}var z=0,Y=-1,de=-1,ke=0,Fe=0,Qe=l,Oe=null;t:for(;;){for(var De;Qe!==f||b!==0&&Qe.nodeType!==3||(Y=z+b),Qe!==_||g!==0&&Qe.nodeType!==3||(de=z+g),Qe.nodeType===3&&(z+=Qe.nodeValue.length),(De=Qe.firstChild)!==null;)Oe=Qe,Qe=De;for(;;){if(Qe===l)break t;if(Oe===f&&++ke===b&&(Y=z),Oe===_&&++Fe===g&&(de=z),(De=Qe.nextSibling)!==null)break;Qe=Oe,Oe=Qe.parentNode}Qe=De}f=Y===-1||de===-1?null:{start:Y,end:de}}else f=null}f=f||{start:0,end:0}}else f=null;for(d5={focusedElem:l,selectionRange:f},Vy=!1,Ga=u;Ga!==null;)if(u=Ga,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Ga=l;else for(;Ga!==null;){switch(u=Ga,_=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(f=0;f<l.length;f++)b=l[f],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&_!==null){l=void 0,f=u,b=_.memoizedProps,_=_.memoizedState,g=f.stateNode;try{var Ct=id(f.type,b);l=g.getSnapshotBeforeUpdate(Ct,_),g.__reactInternalSnapshotBeforeUpdate=l}catch(Gt){sn(f,f.return,Gt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,f=l.nodeType,f===9)p5(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":p5(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Ga=l;break}Ga=u.return}}function A9(l,u,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Sl(l,f),g&4&&gp(5,f);break;case 1:if(Sl(l,f),g&4)if(l=f.stateNode,u===null)try{l.componentDidMount()}catch(z){sn(f,f.return,z)}else{var b=id(f.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(b,u,l.__reactInternalSnapshotBeforeUpdate)}catch(z){sn(f,f.return,z)}}g&64&&x9(f),g&512&&yp(f,f.return);break;case 3:if(Sl(l,f),g&64&&(l=f.updateQueue,l!==null)){if(u=null,f.child!==null)switch(f.child.tag){case 27:case 5:u=f.child.stateNode;break;case 1:u=f.child.stateNode}try{ck(l,u)}catch(z){sn(f,f.return,z)}}break;case 27:u===null&&g&4&&_9(f);case 26:case 5:Sl(l,f),u===null&&g&4&&w9(f),g&512&&yp(f,f.return);break;case 12:Sl(l,f);break;case 31:Sl(l,f),g&4&&j9(l,f);break;case 13:Sl(l,f),g&4&&k9(l,f),g&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=yY.bind(null,f),LY(l,f))));break;case 22:if(g=f.memoizedState!==null||bl,!g){u=u!==null&&u.memoizedState!==null||wa,b=bl;var _=wa;bl=g,(wa=u)&&!_?_l(l,f,(f.subtreeFlags&8772)!==0):Sl(l,f),bl=b,wa=_}break;case 30:break;default:Sl(l,f)}}function N9(l){var u=l.alternate;u!==null&&(l.alternate=null,N9(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Tt(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Vn=null,Fi=!1;function wl(l,u,f){for(f=f.child;f!==null;)E9(l,u,f),f=f.sibling}function E9(l,u,f){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Et,f)}catch{}switch(f.tag){case 26:wa||Mo(f,u),wl(l,u,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:wa||Mo(f,u);var g=Vn,b=Fi;Uc(f.type)&&(Vn=f.stateNode,Fi=!1),wl(l,u,f),Np(f.stateNode),Vn=g,Fi=b;break;case 5:wa||Mo(f,u);case 6:if(g=Vn,b=Fi,Vn=null,wl(l,u,f),Vn=g,Fi=b,Vn!==null)if(Fi)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(f.stateNode)}catch(_){sn(f,u,_)}else try{Vn.removeChild(f.stateNode)}catch(_){sn(f,u,_)}break;case 18:Vn!==null&&(Fi?(l=Vn,xC(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),X0(l)):xC(Vn,f.stateNode));break;case 4:g=Vn,b=Fi,Vn=f.stateNode.containerInfo,Fi=!0,wl(l,u,f),Vn=g,Fi=b;break;case 0:case 11:case 14:case 15:Rc(2,f,u),wa||Rc(4,f,u),wl(l,u,f);break;case 1:wa||(Mo(f,u),g=f.stateNode,typeof g.componentWillUnmount=="function"&&b9(f,u,g)),wl(l,u,f);break;case 21:wl(l,u,f);break;case 22:wa=(g=wa)||f.memoizedState!==null,wl(l,u,f),wa=g;break;default:wl(l,u,f)}}function j9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{X0(l)}catch(f){sn(u,u.return,f)}}}function k9(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{X0(l)}catch(f){sn(u,u.return,f)}}function cY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new T9),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new T9),u;default:throw Error(n(435,l.tag))}}function Sy(l,u){var f=cY(l);u.forEach(function(g){if(!f.has(g)){f.add(g);var b=vY.bind(null,l,g);g.then(b,b)}})}function qi(l,u){var f=u.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],_=l,z=u,Y=z;e:for(;Y!==null;){switch(Y.tag){case 27:if(Uc(Y.type)){Vn=Y.stateNode,Fi=!1;break e}break;case 5:Vn=Y.stateNode,Fi=!1;break e;case 3:case 4:Vn=Y.stateNode.containerInfo,Fi=!0;break e}Y=Y.return}if(Vn===null)throw Error(n(160));E9(_,z,b),Vn=null,Fi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)C9(u,l),u=u.sibling}var co=null;function C9(l,u){var f=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:qi(u,l),Hi(l),g&4&&(Rc(3,l,l.return),gp(3,l),Rc(5,l,l.return));break;case 1:qi(u,l),Hi(l),g&512&&(wa||f===null||Mo(f,f.return)),g&64&&bl&&(l=l.updateQueue,l!==null&&(g=l.callbacks,g!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=co;if(qi(u,l),Hi(l),g&512&&(wa||f===null||Mo(f,f.return)),g&4){var _=f!==null?f.memoizedState:null;if(g=l.memoizedState,f===null)if(g===null)if(l.stateNode===null){e:{g=l.type,f=l.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":_=b.getElementsByTagName("title")[0],(!_||_[gi]||_[Yr]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(g),b.head.insertBefore(_,b.querySelector("head > title"))),oi(_,g,f),_[Yr]=l,dr(_),g=_;break e;case"link":var z=CC("link","href",b).get(g+(f.href||""));if(z){for(var Y=0;Y<z.length;Y++)if(_=z[Y],_.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&_.getAttribute("rel")===(f.rel==null?null:f.rel)&&_.getAttribute("title")===(f.title==null?null:f.title)&&_.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(Y,1);break t}}_=b.createElement(g),oi(_,g,f),b.head.appendChild(_);break;case"meta":if(z=CC("meta","content",b).get(g+(f.content||""))){for(Y=0;Y<z.length;Y++)if(_=z[Y],_.getAttribute("content")===(f.content==null?null:""+f.content)&&_.getAttribute("name")===(f.name==null?null:f.name)&&_.getAttribute("property")===(f.property==null?null:f.property)&&_.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&_.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(Y,1);break t}}_=b.createElement(g),oi(_,g,f),b.head.appendChild(_);break;default:throw Error(n(468,g))}_[Yr]=l,dr(_),g=_}l.stateNode=g}else OC(b,l.type,l.stateNode);else l.stateNode=kC(b,g,l.memoizedProps);else _!==g?(_===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):_.count--,g===null?OC(b,l.type,l.stateNode):kC(b,g,l.memoizedProps)):g===null&&l.stateNode!==null&&U4(l,l.memoizedProps,f.memoizedProps)}break;case 27:qi(u,l),Hi(l),g&512&&(wa||f===null||Mo(f,f.return)),f!==null&&g&4&&U4(l,l.memoizedProps,f.memoizedProps);break;case 5:if(qi(u,l),Hi(l),g&512&&(wa||f===null||Mo(f,f.return)),l.flags&32){b=l.stateNode;try{Me(b,"")}catch(Ct){sn(l,l.return,Ct)}}g&4&&l.stateNode!=null&&(b=l.memoizedProps,U4(l,b,f!==null?f.memoizedProps:b)),g&1024&&(F4=!0);break;case 6:if(qi(u,l),Hi(l),g&4){if(l.stateNode===null)throw Error(n(162));g=l.memoizedProps,f=l.stateNode;try{f.nodeValue=g}catch(Ct){sn(l,l.return,Ct)}}break;case 3:if(By=null,b=co,co=Dy(u.containerInfo),qi(u,l),co=b,Hi(l),g&4&&f!==null&&f.memoizedState.isDehydrated)try{X0(u.containerInfo)}catch(Ct){sn(l,l.return,Ct)}F4&&(F4=!1,O9(l));break;case 4:g=co,co=Dy(l.stateNode.containerInfo),qi(u,l),Hi(l),co=g;break;case 12:qi(u,l),Hi(l);break;case 31:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 13:qi(u,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ty=Xe()),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 22:b=l.memoizedState!==null;var de=f!==null&&f.memoizedState!==null,ke=bl,Fe=wa;if(bl=ke||b,wa=Fe||de,qi(u,l),wa=Fe,bl=ke,Hi(l),g&8192)e:for(u=l.stateNode,u._visibility=b?u._visibility&-2:u._visibility|1,b&&(f===null||de||bl||wa||sd(l)),f=null,u=l;;){if(u.tag===5||u.tag===26){if(f===null){de=f=u;try{if(_=de.stateNode,b)z=_.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{Y=de.stateNode;var Qe=de.memoizedProps.style,Oe=Qe!=null&&Qe.hasOwnProperty("display")?Qe.display:null;Y.style.display=Oe==null||typeof Oe=="boolean"?"":(""+Oe).trim()}}catch(Ct){sn(de,de.return,Ct)}}}else if(u.tag===6){if(f===null){de=u;try{de.stateNode.nodeValue=b?"":de.memoizedProps}catch(Ct){sn(de,de.return,Ct)}}}else if(u.tag===18){if(f===null){de=u;try{var De=de.stateNode;b?bC(De,!0):bC(de.stateNode,!1)}catch(Ct){sn(de,de.return,Ct)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=l.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Sy(l,f))));break;case 19:qi(u,l),Hi(l),g&4&&(g=l.updateQueue,g!==null&&(l.updateQueue=null,Sy(l,g)));break;case 30:break;case 21:break;default:qi(u,l),Hi(l)}}function Hi(l){var u=l.flags;if(u&2){try{for(var f,g=l.return;g!==null;){if(S9(g)){f=g;break}g=g.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var b=f.stateNode,_=z4(l);wy(l,_,b);break;case 5:var z=f.stateNode;f.flags&32&&(Me(z,""),f.flags&=-33);var Y=z4(l);wy(l,Y,z);break;case 3:case 4:var de=f.stateNode.containerInfo,ke=z4(l);V4(l,ke,de);break;default:throw Error(n(161))}}catch(Fe){sn(l,l.return,Fe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function O9(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;O9(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Sl(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)A9(l,u.alternate,u),u=u.sibling}function sd(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Rc(4,u,u.return),sd(u);break;case 1:Mo(u,u.return);var f=u.stateNode;typeof f.componentWillUnmount=="function"&&b9(u,u.return,f),sd(u);break;case 27:Np(u.stateNode);case 26:case 5:Mo(u,u.return),sd(u);break;case 22:u.memoizedState===null&&sd(u);break;case 30:sd(u);break;default:sd(u)}l=l.sibling}}function _l(l,u,f){for(f=f&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,b=l,_=u,z=_.flags;switch(_.tag){case 0:case 11:case 15:_l(b,_,f),gp(4,_);break;case 1:if(_l(b,_,f),g=_,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ke){sn(g,g.return,ke)}if(g=_,b=g.updateQueue,b!==null){var Y=g.stateNode;try{var de=b.shared.hiddenCallbacks;if(de!==null)for(b.shared.hiddenCallbacks=null,b=0;b<de.length;b++)lk(de[b],Y)}catch(ke){sn(g,g.return,ke)}}f&&z&64&&x9(_),yp(_,_.return);break;case 27:_9(_);case 26:case 5:_l(b,_,f),f&&g===null&&z&4&&w9(_),yp(_,_.return);break;case 12:_l(b,_,f);break;case 31:_l(b,_,f),f&&z&4&&j9(b,_);break;case 13:_l(b,_,f),f&&z&4&&k9(b,_);break;case 22:_.memoizedState===null&&_l(b,_,f),yp(_,_.return);break;case 30:break;default:_l(b,_,f)}u=u.sibling}}function q4(l,u){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&np(f))}function H4(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l))}function uo(l,u,f,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)I9(l,u,f,g),u=u.sibling}function I9(l,u,f,g){var b=u.flags;switch(u.tag){case 0:case 11:case 15:uo(l,u,f,g),b&2048&&gp(9,u);break;case 1:uo(l,u,f,g);break;case 3:uo(l,u,f,g),b&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&np(l)));break;case 12:if(b&2048){uo(l,u,f,g),l=u.stateNode;try{var _=u.memoizedProps,z=_.id,Y=_.onPostCommit;typeof Y=="function"&&Y(z,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(de){sn(u,u.return,de)}}else uo(l,u,f,g);break;case 31:uo(l,u,f,g);break;case 13:uo(l,u,f,g);break;case 23:break;case 22:_=u.stateNode,z=u.alternate,u.memoizedState!==null?_._visibility&2?uo(l,u,f,g):vp(l,u):_._visibility&2?uo(l,u,f,g):(_._visibility|=2,$0(l,u,f,g,(u.subtreeFlags&10256)!==0||!1)),b&2048&&q4(z,u);break;case 24:uo(l,u,f,g),b&2048&&H4(u.alternate,u);break;default:uo(l,u,f,g)}}function $0(l,u,f,g,b){for(b=b&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var _=l,z=u,Y=f,de=g,ke=z.flags;switch(z.tag){case 0:case 11:case 15:$0(_,z,Y,de,b),gp(8,z);break;case 23:break;case 22:var Fe=z.stateNode;z.memoizedState!==null?Fe._visibility&2?$0(_,z,Y,de,b):vp(_,z):(Fe._visibility|=2,$0(_,z,Y,de,b)),b&&ke&2048&&q4(z.alternate,z);break;case 24:$0(_,z,Y,de,b),b&&ke&2048&&H4(z.alternate,z);break;default:$0(_,z,Y,de,b)}u=u.sibling}}function vp(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var f=l,g=u,b=g.flags;switch(g.tag){case 22:vp(f,g),b&2048&&q4(g.alternate,g);break;case 24:vp(f,g),b&2048&&H4(g.alternate,g);break;default:vp(f,g)}u=u.sibling}}var xp=8192;function U0(l,u,f){if(l.subtreeFlags&xp)for(l=l.child;l!==null;)R9(l,u,f),l=l.sibling}function R9(l,u,f){switch(l.tag){case 26:U0(l,u,f),l.flags&xp&&l.memoizedState!==null&&QY(f,co,l.memoizedState,l.memoizedProps);break;case 5:U0(l,u,f);break;case 3:case 4:var g=co;co=Dy(l.stateNode.containerInfo),U0(l,u,f),co=g;break;case 22:l.memoizedState===null&&(g=l.alternate,g!==null&&g.memoizedState!==null?(g=xp,xp=16777216,U0(l,u,f),xp=g):U0(l,u,f));break;default:U0(l,u,f)}}function M9(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function bp(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ga=g,D9(g,l)}M9(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)P9(l),l=l.sibling}function P9(l){switch(l.tag){case 0:case 11:case 15:bp(l),l.flags&2048&&Rc(9,l,l.return);break;case 3:bp(l);break;case 12:bp(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,_y(l)):bp(l);break;default:bp(l)}}function _y(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];Ga=g,D9(g,l)}M9(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Rc(8,u,u.return),_y(u);break;case 22:f=u.stateNode,f._visibility&2&&(f._visibility&=-3,_y(u));break;default:_y(u)}l=l.sibling}}function D9(l,u){for(;Ga!==null;){var f=Ga;switch(f.tag){case 0:case 11:case 15:Rc(8,f,u);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:np(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ga=g;else e:for(f=l;Ga!==null;){g=Ga;var b=g.sibling,_=g.return;if(N9(g),g===f){Ga=null;break e}if(b!==null){b.return=_,Ga=b;break e}Ga=_}}}var uY={getCacheForType:function(l){var u=ii(va),f=u.data.get(l);return f===void 0&&(f=l(),u.data.set(l,f)),f},cacheSignal:function(){return ii(va).controller.signal}},dY=typeof WeakMap=="function"?WeakMap:Map,Wr=0,En=null,Sr=null,Ar=0,an=0,vs=null,Mc=!1,z0=!1,G4=!1,Tl=0,Jn=0,Pc=0,od=0,W4=0,xs=0,V0=0,wp=null,Gi=null,K4=!1,Ty=0,L9=0,Ay=1/0,Ny=null,Dc=null,Ca=0,Lc=null,F0=null,Al=0,Q4=0,X4=null,B9=null,Sp=0,Y4=null;function bs(){return(Wr&2)!==0&&Ar!==0?Ar&-Ar:H.T!==null?n5():fn()}function $9(){if(xs===0)if((Ar&536870912)===0||Or){var l=vr;vr<<=1,(vr&3932160)===0&&(vr=262144),xs=l}else xs=536870912;return l=gs.current,l!==null&&(l.flags|=32),xs}function Wi(l,u,f){(l===En&&(an===2||an===9)||l.cancelPendingCommit!==null)&&(q0(l,0),Bc(l,Ar,xs,!1)),dn(l,f),((Wr&2)===0||l!==En)&&(l===En&&((Wr&2)===0&&(od|=f),Jn===4&&Bc(l,Ar,xs,!1)),Po(l))}function U9(l,u,f){if((Wr&6)!==0)throw Error(n(327));var g=!f&&(u&127)===0&&(u&l.expiredLanes)===0||Dr(l,u),b=g?pY(l,u):J4(l,u,!0),_=g;do{if(b===0){z0&&!g&&Bc(l,u,0,!1);break}else{if(f=l.current.alternate,_&&!hY(f)){b=J4(l,u,!1),_=!1;continue}if(b===2){if(_=u,l.errorRecoveryDisabledLanes&_)var z=0;else z=l.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){u=z;e:{var Y=l;b=wp;var de=Y.current.memoizedState.isDehydrated;if(de&&(q0(Y,z).flags|=256),z=J4(Y,z,!1),z!==2){if(G4&&!de){Y.errorRecoveryDisabledLanes|=_,od|=_,b=4;break e}_=Gi,Gi=b,_!==null&&(Gi===null?Gi=_:Gi.push.apply(Gi,_))}b=z}if(_=!1,b!==2)continue}}if(b===1){q0(l,0),Bc(l,u,0,!0);break}e:{switch(g=l,_=b,_){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Bc(g,u,xs,!Mc);break e;case 2:Gi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(b=Ty+300-Xe(),10<b)){if(Bc(g,u,xs,!Mc),_t(g,0,!0)!==0)break e;Al=u,g.timeoutHandle=yC(z9.bind(null,g,f,Gi,Ny,K4,u,xs,od,V0,Mc,_,"Throttled",-0,0),b);break e}z9(g,f,Gi,Ny,K4,u,xs,od,V0,Mc,_,null,-0,0)}}break}while(!0);Po(l)}function z9(l,u,f,g,b,_,z,Y,de,ke,Fe,Qe,Oe,De){if(l.timeoutHandle=-1,Qe=u.subtreeFlags,Qe&8192||(Qe&16785408)===16785408){Qe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gn},R9(u,_,Qe);var Ct=(_&62914560)===_?Ty-Xe():(_&4194048)===_?L9-Xe():0;if(Ct=XY(Qe,Ct),Ct!==null){Al=_,l.cancelPendingCommit=Ct(Q9.bind(null,l,u,_,f,g,b,z,Y,de,Fe,Qe,null,Oe,De)),Bc(l,_,z,!ke);return}}Q9(l,u,_,f,g,b,z,Y,de)}function hY(l){for(var u=l;;){var f=u.tag;if((f===0||f===11||f===15)&&u.flags&16384&&(f=u.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],_=b.getSnapshot;b=b.value;try{if(!ps(_(),b))return!1}catch{return!1}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Bc(l,u,f,g){u&=~W4,u&=~od,l.suspendedLanes|=u,l.pingedLanes&=~u,g&&(l.warmLanes|=u),g=l.expirationTimes;for(var b=u;0<b;){var _=31-Ze(b),z=1<<_;g[_]=-1,b&=~z}f!==0&&ma(l,f,u)}function Ey(){return(Wr&6)===0?(_p(0),!1):!0}function Z4(){if(Sr!==null){if(an===0)var l=Sr.return;else l=Sr,pl=Zu=null,p4(l),M0=null,ip=0,l=Sr;for(;l!==null;)v9(l.alternate,l),l=l.return;Sr=null}}function q0(l,u){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,IY(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Al=0,Z4(),En=l,Sr=f=hl(l.current,null),Ar=u,an=0,vs=null,Mc=!1,z0=Dr(l,u),G4=!1,V0=xs=W4=od=Pc=Jn=0,Gi=wp=null,K4=!1,(u&8)!==0&&(u|=u&32);var g=l.entangledLanes;if(g!==0)for(l=l.entanglements,g&=u;0<g;){var b=31-Ze(g),_=1<<b;u|=l[b],g&=~_}return Tl=u,K1(),f}function V9(l,u){cr=null,H.H=fp,u===R0||u===ry?(u=ak(),an=3):u===r4?(u=ak(),an=4):an=u===C4?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,vs=u,Sr===null&&(Jn=1,gy(l,Ds(u,l.current)))}function F9(){var l=gs.current;return l===null?!0:(Ar&4194048)===Ar?Us===null:(Ar&62914560)===Ar||(Ar&536870912)!==0?l===Us:!1}function q9(){var l=H.H;return H.H=fp,l===null?fp:l}function H9(){var l=H.A;return H.A=uY,l}function jy(){Jn=4,Mc||(Ar&4194048)!==Ar&&gs.current!==null||(z0=!0),(Pc&134217727)===0&&(od&134217727)===0||En===null||Bc(En,Ar,xs,!1)}function J4(l,u,f){var g=Wr;Wr|=2;var b=q9(),_=H9();(En!==l||Ar!==u)&&(Ny=null,q0(l,u)),u=!1;var z=Jn;e:do try{if(an!==0&&Sr!==null){var Y=Sr,de=vs;switch(an){case 8:Z4(),z=6;break e;case 3:case 2:case 9:case 6:gs.current===null&&(u=!0);var ke=an;if(an=0,vs=null,H0(l,Y,de,ke),f&&z0){z=0;break e}break;default:ke=an,an=0,vs=null,H0(l,Y,de,ke)}}fY(),z=Jn;break}catch(Fe){V9(l,Fe)}while(!0);return u&&l.shellSuspendCounter++,pl=Zu=null,Wr=g,H.H=b,H.A=_,Sr===null&&(En=null,Ar=0,K1()),z}function fY(){for(;Sr!==null;)G9(Sr)}function pY(l,u){var f=Wr;Wr|=2;var g=q9(),b=H9();En!==l||Ar!==u?(Ny=null,Ay=Xe()+500,q0(l,u)):z0=Dr(l,u);e:do try{if(an!==0&&Sr!==null){u=Sr;var _=vs;t:switch(an){case 1:an=0,vs=null,H0(l,u,_,1);break;case 2:case 9:if(rk(_)){an=0,vs=null,W9(u);break}u=function(){an!==2&&an!==9||En!==l||(an=7),Po(l)},_.then(u,u);break e;case 3:an=7;break e;case 4:an=5;break e;case 7:rk(_)?(an=0,vs=null,W9(u)):(an=0,vs=null,H0(l,u,_,7));break;case 5:var z=null;switch(Sr.tag){case 26:z=Sr.memoizedState;case 5:case 27:var Y=Sr;if(z?IC(z):Y.stateNode.complete){an=0,vs=null;var de=Y.sibling;if(de!==null)Sr=de;else{var ke=Y.return;ke!==null?(Sr=ke,ky(ke)):Sr=null}break t}}an=0,vs=null,H0(l,u,_,5);break;case 6:an=0,vs=null,H0(l,u,_,6);break;case 8:Z4(),Jn=6;break e;default:throw Error(n(462))}}mY();break}catch(Fe){V9(l,Fe)}while(!0);return pl=Zu=null,H.H=g,H.A=b,Wr=f,Sr!==null?0:(En=null,Ar=0,K1(),Jn)}function mY(){for(;Sr!==null&&!Ge();)G9(Sr)}function G9(l){var u=g9(l.alternate,l,Tl);l.memoizedProps=l.pendingProps,u===null?ky(l):Sr=u}function W9(l){var u=l,f=u.alternate;switch(u.tag){case 15:case 0:u=u9(f,u,u.pendingProps,u.type,void 0,Ar);break;case 11:u=u9(f,u,u.pendingProps,u.type.render,u.ref,Ar);break;case 5:p4(u);default:v9(f,u),u=Sr=Hj(u,Tl),u=g9(f,u,Tl)}l.memoizedProps=l.pendingProps,u===null?ky(l):Sr=u}function H0(l,u,f,g){pl=Zu=null,p4(u),M0=null,ip=0;var b=u.return;try{if(nY(l,b,u,f,Ar)){Jn=1,gy(l,Ds(f,l.current)),Sr=null;return}}catch(_){if(b!==null)throw Sr=b,_;Jn=1,gy(l,Ds(f,l.current)),Sr=null;return}u.flags&32768?(Or||g===1?l=!0:z0||(Ar&536870912)!==0?l=!1:(Mc=l=!0,(g===2||g===9||g===3||g===6)&&(g=gs.current,g!==null&&g.tag===13&&(g.flags|=16384))),K9(u,l)):ky(u)}function ky(l){var u=l;do{if((u.flags&32768)!==0){K9(u,Mc);return}l=u.return;var f=sY(u.alternate,u,Tl);if(f!==null){Sr=f;return}if(u=u.sibling,u!==null){Sr=u;return}Sr=u=l}while(u!==null);Jn===0&&(Jn=5)}function K9(l,u){do{var f=oY(l.alternate,l);if(f!==null){f.flags&=32767,Sr=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!u&&(l=l.sibling,l!==null)){Sr=l;return}Sr=l=f}while(l!==null);Jn=6,Sr=null}function Q9(l,u,f,g,b,_,z,Y,de){l.cancelPendingCommit=null;do Cy();while(Ca!==0);if((Wr&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(_=u.lanes|u.childLanes,_|=zw,or(l,f,_,z,Y,de),l===En&&(Sr=En=null,Ar=0),F0=u,Lc=l,Al=f,Q4=_,X4=b,B9=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,xY(Vt,function(){return eC(),null})):(l.callbackNode=null,l.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,b=J.p,J.p=2,z=Wr,Wr|=4;try{lY(l,u,f)}finally{Wr=z,J.p=b,H.T=g}}Ca=1,X9(),Y9(),Z9()}}function X9(){if(Ca===1){Ca=0;var l=Lc,u=F0,f=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Wr;Wr|=4;try{C9(u,l);var _=d5,z=Dj(l.containerInfo),Y=_.focusedElem,de=_.selectionRange;if(z!==Y&&Y&&Y.ownerDocument&&Pj(Y.ownerDocument.documentElement,Y)){if(de!==null&&Dw(Y)){var ke=de.start,Fe=de.end;if(Fe===void 0&&(Fe=ke),"selectionStart"in Y)Y.selectionStart=ke,Y.selectionEnd=Math.min(Fe,Y.value.length);else{var Qe=Y.ownerDocument||document,Oe=Qe&&Qe.defaultView||window;if(Oe.getSelection){var De=Oe.getSelection(),Ct=Y.textContent.length,Gt=Math.min(de.start,Ct),xn=de.end===void 0?Gt:Math.min(de.end,Ct);!De.extend&&Gt>xn&&(z=xn,xn=Gt,Gt=z);var we=Mj(Y,Gt),ge=Mj(Y,xn);if(we&&ge&&(De.rangeCount!==1||De.anchorNode!==we.node||De.anchorOffset!==we.offset||De.focusNode!==ge.node||De.focusOffset!==ge.offset)){var Ee=Qe.createRange();Ee.setStart(we.node,we.offset),De.removeAllRanges(),Gt>xn?(De.addRange(Ee),De.extend(ge.node,ge.offset)):(Ee.setEnd(ge.node,ge.offset),De.addRange(Ee))}}}}for(Qe=[],De=Y;De=De.parentNode;)De.nodeType===1&&Qe.push({element:De,left:De.scrollLeft,top:De.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Qe.length;Y++){var Ke=Qe[Y];Ke.element.scrollLeft=Ke.left,Ke.element.scrollTop=Ke.top}}Vy=!!u5,d5=u5=null}finally{Wr=b,J.p=g,H.T=f}}l.current=u,Ca=2}}function Y9(){if(Ca===2){Ca=0;var l=Lc,u=F0,f=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||f){f=H.T,H.T=null;var g=J.p;J.p=2;var b=Wr;Wr|=4;try{A9(l,u.alternate,u)}finally{Wr=b,J.p=g,H.T=f}}Ca=3}}function Z9(){if(Ca===4||Ca===3){Ca=0,ue();var l=Lc,u=F0,f=Al,g=B9;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ca=5:(Ca=0,F0=Lc=null,J9(l,l.pendingLanes));var b=l.pendingLanes;if(b===0&&(Dc=null),Tr(f),u=u.stateNode,Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Et,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=H.T,b=J.p,J.p=2,H.T=null;try{for(var _=l.onRecoverableError,z=0;z<g.length;z++){var Y=g[z];_(Y.value,{componentStack:Y.stack})}}finally{H.T=u,J.p=b}}(Al&3)!==0&&Cy(),Po(l),b=l.pendingLanes,(f&261930)!==0&&(b&42)!==0?l===Y4?Sp++:(Sp=0,Y4=l):Sp=0,_p(0)}}function J9(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,np(u)))}function Cy(){return X9(),Y9(),Z9(),eC()}function eC(){if(Ca!==5)return!1;var l=Lc,u=Q4;Q4=0;var f=Tr(Al),g=H.T,b=J.p;try{J.p=32>f?32:f,H.T=null,f=X4,X4=null;var _=Lc,z=Al;if(Ca=0,F0=Lc=null,Al=0,(Wr&6)!==0)throw Error(n(331));var Y=Wr;if(Wr|=4,P9(_.current),I9(_,_.current,z,f),Wr=Y,_p(0,!1),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Et,_)}catch{}return!0}finally{J.p=b,H.T=g,J9(l,u)}}function tC(l,u,f){u=Ds(f,u),u=k4(l.stateNode,u,2),l=Cc(l,u,2),l!==null&&(dn(l,2),Po(l))}function sn(l,u,f){if(l.tag===3)tC(l,l,f);else for(;u!==null;){if(u.tag===3){tC(u,l,f);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Dc===null||!Dc.has(g))){l=Ds(f,l),f=r9(2),g=Cc(u,f,2),g!==null&&(n9(f,g,u,l),dn(g,2),Po(g));break}}u=u.return}}function e5(l,u,f){var g=l.pingCache;if(g===null){g=l.pingCache=new dY;var b=new Set;g.set(u,b)}else b=g.get(u),b===void 0&&(b=new Set,g.set(u,b));b.has(f)||(G4=!0,b.add(f),l=gY.bind(null,l,u,f),u.then(l,l))}function gY(l,u,f){var g=l.pingCache;g!==null&&g.delete(u),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,En===l&&(Ar&f)===f&&(Jn===4||Jn===3&&(Ar&62914560)===Ar&&300>Xe()-Ty?(Wr&2)===0&&q0(l,0):W4|=f,V0===Ar&&(V0=0)),Po(l)}function rC(l,u){u===0&&(u=Hr()),l=Qu(l,u),l!==null&&(dn(l,u),Po(l))}function yY(l){var u=l.memoizedState,f=0;u!==null&&(f=u.retryLane),rC(l,f)}function vY(l,u){var f=0;switch(l.tag){case 31:case 13:var g=l.stateNode,b=l.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=l.stateNode;break;case 22:g=l.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(u),rC(l,f)}function xY(l,u){return rt(l,u)}var Oy=null,G0=null,t5=!1,Iy=!1,r5=!1,$c=0;function Po(l){l!==G0&&l.next===null&&(G0===null?Oy=G0=l:G0=G0.next=l),Iy=!0,t5||(t5=!0,wY())}function _p(l,u){if(!r5&&Iy){r5=!0;do for(var f=!1,g=Oy;g!==null;){if(l!==0){var b=g.pendingLanes;if(b===0)var _=0;else{var z=g.suspendedLanes,Y=g.pingedLanes;_=(1<<31-Ze(42|l)+1)-1,_&=b&~(z&~Y),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(f=!0,sC(g,_))}else _=Ar,_=_t(g,g===En?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||Dr(g,_)||(f=!0,sC(g,_));g=g.next}while(f);r5=!1}}function bY(){nC()}function nC(){Iy=t5=!1;var l=0;$c!==0&&OY()&&(l=$c);for(var u=Xe(),f=null,g=Oy;g!==null;){var b=g.next,_=aC(g,u);_===0?(g.next=null,f===null?Oy=b:f.next=b,b===null&&(G0=f)):(f=g,(l!==0||(_&3)!==0)&&(Iy=!0)),g=b}Ca!==0&&Ca!==5||_p(l),$c!==0&&($c=0)}function aC(l,u){for(var f=l.suspendedLanes,g=l.pingedLanes,b=l.expirationTimes,_=l.pendingLanes&-62914561;0<_;){var z=31-Ze(_),Y=1<<z,de=b[z];de===-1?((Y&f)===0||(Y&g)!==0)&&(b[z]=rn(Y,u)):de<=u&&(l.expiredLanes|=Y),_&=~Y}if(u=En,f=Ar,f=_t(l,l===u?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g=l.callbackNode,f===0||l===u&&(an===2||an===9)||l.cancelPendingCommit!==null)return g!==null&&g!==null&&ft(g),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||Dr(l,f)){if(u=f&-f,u===l.callbackPriority)return u;switch(g!==null&&ft(g),Tr(f)){case 2:case 8:f=mt;break;case 32:f=Vt;break;case 268435456:f=qr;break;default:f=Vt}return g=iC.bind(null,l),f=rt(f,g),l.callbackPriority=u,l.callbackNode=f,u}return g!==null&&g!==null&&ft(g),l.callbackPriority=2,l.callbackNode=null,2}function iC(l,u){if(Ca!==0&&Ca!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(Cy()&&l.callbackNode!==f)return null;var g=Ar;return g=_t(l,l===En?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),g===0?null:(U9(l,g,u),aC(l,Xe()),l.callbackNode!=null&&l.callbackNode===f?iC.bind(null,l):null)}function sC(l,u){if(Cy())return null;U9(l,u,!0)}function wY(){RY(function(){(Wr&6)!==0?rt(yt,bY):nC()})}function n5(){if($c===0){var l=O0;l===0&&(l=un,un<<=1,(un&261888)===0&&(un=256)),$c=l}return $c}function oC(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Nn(""+l)}function lC(l,u){var f=u.ownerDocument.createElement("input");return f.name=u.name,f.value=u.value,l.id&&f.setAttribute("form",l.id),u.parentNode.insertBefore(f,u),l=new FormData(l),f.parentNode.removeChild(f),l}function SY(l,u,f,g,b){if(u==="submit"&&f&&f.stateNode===b){var _=oC((b[pn]||null).action),z=g.submitter;z&&(u=(u=z[pn]||null)?oC(u.formAction):z.getAttribute("formAction"),u!==null&&(_=u,z=null));var Y=new Vu("action","action",null,g,b);l.push({event:Y,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if($c!==0){var de=z?lC(b,z):new FormData(b);_4(f,{pending:!0,data:de,method:b.method,action:_},null,de)}}else typeof _=="function"&&(Y.preventDefault(),de=z?lC(b,z):new FormData(b),_4(f,{pending:!0,data:de,method:b.method,action:_},_,de))},currentTarget:b}]})}}for(var a5=0;a5<Uw.length;a5++){var i5=Uw[a5],_Y=i5.toLowerCase(),TY=i5[0].toUpperCase()+i5.slice(1);lo(_Y,"on"+TY)}lo($j,"onAnimationEnd"),lo(Uj,"onAnimationIteration"),lo(zj,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(UX,"onTransitionRun"),lo(zX,"onTransitionStart"),lo(VX,"onTransitionCancel"),lo(Vj,"onTransitionEnd"),kr("onMouseEnter",["mouseout","mouseover"]),kr("onMouseLeave",["mouseout","mouseover"]),kr("onPointerEnter",["pointerout","pointerover"]),kr("onPointerLeave",["pointerout","pointerover"]),mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tp));function cC(l,u){u=(u&4)!==0;for(var f=0;f<l.length;f++){var g=l[f],b=g.event;g=g.listeners;e:{var _=void 0;if(u)for(var z=g.length-1;0<=z;z--){var Y=g[z],de=Y.instance,ke=Y.currentTarget;if(Y=Y.listener,de!==_&&b.isPropagationStopped())break e;_=Y,b.currentTarget=ke;try{_(b)}catch(Fe){W1(Fe)}b.currentTarget=null,_=de}else for(z=0;z<g.length;z++){if(Y=g[z],de=Y.instance,ke=Y.currentTarget,Y=Y.listener,de!==_&&b.isPropagationStopped())break e;_=Y,b.currentTarget=ke;try{_(b)}catch(Fe){W1(Fe)}b.currentTarget=null,_=de}}}}function _r(l,u){var f=u[ni];f===void 0&&(f=u[ni]=new Set);var g=l+"__bubble";f.has(g)||(uC(u,l,2,!1),f.add(g))}function s5(l,u,f){var g=0;u&&(g|=4),uC(f,l,g,u)}var Ry="_reactListening"+Math.random().toString(36).slice(2);function o5(l){if(!l[Ry]){l[Ry]=!0,nn.forEach(function(f){f!=="selectionchange"&&(AY.has(f)||s5(f,!1,l),s5(f,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Ry]||(u[Ry]=!0,s5("selectionchange",!1,u))}}function uC(l,u,f,g){switch($C(u)){case 2:var b=JY;break;case 8:b=eZ;break;default:b=S5}f=b.bind(null,u,f,l),b=void 0,!Gf||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(b=!0),g?b!==void 0?l.addEventListener(u,f,{capture:!0,passive:b}):l.addEventListener(u,f,!0):b!==void 0?l.addEventListener(u,f,{passive:b}):l.addEventListener(u,f,!1)}function l5(l,u,f,g,b){var _=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var Y=g.stateNode.containerInfo;if(Y===b)break;if(z===4)for(z=g.return;z!==null;){var de=z.tag;if((de===3||de===4)&&z.stateNode.containerInfo===b)return;z=z.return}for(;Y!==null;){if(z=fe(Y),z===null)return;if(de=z.tag,de===5||de===6||de===26||de===27){g=_=z;continue e}Y=Y.parentNode}}g=g.return}O1(function(){var ke=_,Fe=Cr(f),Qe=[];e:{var Oe=Fj.get(l);if(Oe!==void 0){var De=Vu,Ct=l;switch(l){case"keypress":if(zu(f)===0)break e;case"keydown":case"keyup":De=U1;break;case"focusin":Ct="focus",De=bc;break;case"focusout":Ct="blur",De=bc;break;case"beforeblur":case"afterblur":De=bc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=R1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=M1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=V1;break;case $j:case Uj:case zj:De=w0;break;case Vj:De=S0;break;case"scroll":case"scrollend":De=I1;break;case"wheel":De=q1;break;case"copy":case"cut":case"paste":De=D1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Yf;break;case"toggle":case"beforetoggle":De=Sc}var Gt=(u&4)!==0,xn=!Gt&&(l==="scroll"||l==="scrollend"),we=Gt?Oe!==null?Oe+"Capture":null:Oe;Gt=[];for(var ge=ke,Ee;ge!==null;){var Ke=ge;if(Ee=Ke.stateNode,Ke=Ke.tag,Ke!==5&&Ke!==26&&Ke!==27||Ee===null||we===null||(Ke=zi(ge,we),Ke!=null&&Gt.push(Ap(ge,Ke,Ee))),xn)break;ge=ge.return}0<Gt.length&&(Oe=new De(Oe,Ct,null,f,Fe),Qe.push({event:Oe,listeners:Gt}))}}if((u&7)===0){e:{if(Oe=l==="mouseover"||l==="pointerover",De=l==="mouseout"||l==="pointerout",Oe&&f!==ko&&(Ct=f.relatedTarget||f.fromElement)&&(fe(Ct)||Ct[Tn]))break e;if((De||Oe)&&(Oe=Fe.window===Fe?Fe:(Oe=Fe.ownerDocument)?Oe.defaultView||Oe.parentWindow:window,De?(Ct=f.relatedTarget||f.toElement,De=ke,Ct=Ct?fe(Ct):null,Ct!==null&&(xn=i(Ct),Gt=Ct.tag,Ct!==xn||Gt!==5&&Gt!==27&&Gt!==6)&&(Ct=null)):(De=null,Ct=ke),De!==Ct)){if(Gt=R1,Ke="onMouseLeave",we="onMouseEnter",ge="mouse",(l==="pointerout"||l==="pointerover")&&(Gt=Yf,Ke="onPointerLeave",we="onPointerEnter",ge="pointer"),xn=De==null?Oe:ct(De),Ee=Ct==null?Oe:ct(Ct),Oe=new Gt(Ke,ge+"leave",De,f,Fe),Oe.target=xn,Oe.relatedTarget=Ee,Ke=null,fe(Fe)===ke&&(Gt=new Gt(we,ge+"enter",Ct,f,Fe),Gt.target=Ee,Gt.relatedTarget=xn,Ke=Gt),xn=Ke,De&&Ct)t:{for(Gt=NY,we=De,ge=Ct,Ee=0,Ke=we;Ke;Ke=Gt(Ke))Ee++;Ke=0;for(var Ut=ge;Ut;Ut=Gt(Ut))Ke++;for(;0<Ee-Ke;)we=Gt(we),Ee--;for(;0<Ke-Ee;)ge=Gt(ge),Ke--;for(;Ee--;){if(we===ge||ge!==null&&we===ge.alternate){Gt=we;break t}we=Gt(we),ge=Gt(ge)}Gt=null}else Gt=null;De!==null&&dC(Qe,Oe,De,Gt,!1),Ct!==null&&xn!==null&&dC(Qe,xn,Ct,Gt,!0)}}e:{if(Oe=ke?ct(ke):window,De=Oe.nodeName&&Oe.nodeName.toLowerCase(),De==="select"||De==="input"&&Oe.type==="file")var Br=jj;else if(Vi(Oe))if(kj)Br=LX;else{Br=PX;var Mt=MX}else De=Oe.nodeName,!De||De.toLowerCase()!=="input"||Oe.type!=="checkbox"&&Oe.type!=="radio"?ke&&An(ke.elementType)&&(Br=jj):Br=DX;if(Br&&(Br=Br(l,ke))){Gu(Qe,Br,f,Fe);break e}Mt&&Mt(l,Oe,ke),l==="focusout"&&ke&&Oe.type==="number"&&ke.memoizedProps.value!=null&&Zr(Oe,"number",Oe.value)}switch(Mt=ke?ct(ke):window,l){case"focusin":(Vi(Mt)||Mt.contentEditable==="true")&&(_0=Mt,Lw=ke,ep=null);break;case"focusout":ep=Lw=_0=null;break;case"mousedown":Bw=!0;break;case"contextmenu":case"mouseup":case"dragend":Bw=!1,Lj(Qe,f,Fe);break;case"selectionchange":if($X)break;case"keydown":case"keyup":Lj(Qe,f,Fe)}var hr;if(M)e:{switch(l){case"compositionstart":var Nr="onCompositionStart";break e;case"compositionend":Nr="onCompositionEnd";break e;case"compositionupdate":Nr="onCompositionUpdate";break e}Nr=void 0}else gr?Jr(l,f)&&(Nr="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Nr="onCompositionStart");Nr&&(_e&&f.locale!=="ko"&&(gr||Nr!=="onCompositionStart"?Nr==="onCompositionEnd"&&gr&&(hr=gc()):(fs=Fe,x0="value"in fs?fs.value:fs.textContent,gr=!0)),Mt=My(ke,Nr),0<Mt.length&&(Nr=new Kf(Nr,l,null,f,Fe),Qe.push({event:Nr,listeners:Mt}),hr?Nr.data=hr:(hr=ya(f),hr!==null&&(Nr.data=hr)))),(hr=ee?qa(l,f):Ha(l,f))&&(Nr=My(ke,"onBeforeInput"),0<Nr.length&&(Mt=new Kf("onBeforeInput","beforeinput",null,f,Fe),Qe.push({event:Mt,listeners:Nr}),Mt.data=hr)),SY(Qe,l,ke,f,Fe)}cC(Qe,u)})}function Ap(l,u,f){return{instance:l,listener:u,currentTarget:f}}function My(l,u){for(var f=u+"Capture",g=[];l!==null;){var b=l,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=zi(l,f),b!=null&&g.unshift(Ap(l,b,_)),b=zi(l,u),b!=null&&g.push(Ap(l,b,_))),l.tag===3)return g;l=l.return}return[]}function NY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function dC(l,u,f,g,b){for(var _=u._reactName,z=[];f!==null&&f!==g;){var Y=f,de=Y.alternate,ke=Y.stateNode;if(Y=Y.tag,de!==null&&de===g)break;Y!==5&&Y!==26&&Y!==27||ke===null||(de=ke,b?(ke=zi(f,_),ke!=null&&z.unshift(Ap(f,ke,de))):b||(ke=zi(f,_),ke!=null&&z.push(Ap(f,ke,de)))),f=f.return}z.length!==0&&l.push({event:u,listeners:z})}var EY=/\r\n?/g,jY=/\u0000|\uFFFD/g;function hC(l){return(typeof l=="string"?l:""+l).replace(EY,`
`).replace(jY,"")}function fC(l,u){return u=hC(u),hC(l)===u}function vn(l,u,f,g,b,_){switch(f){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Me(l,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Me(l,""+g);break;case"className":ds(l,"class",g);break;case"tabIndex":ds(l,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ds(l,f,g);break;case"style":Qt(l,g,_);break;case"data":if(u!=="object"){ds(l,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||f!=="href")){l.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Nn(""+g),l.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(f==="formAction"?(u!=="input"&&vn(l,u,"name",b.name,b,null),vn(l,u,"formEncType",b.formEncType,b,null),vn(l,u,"formMethod",b.formMethod,b,null),vn(l,u,"formTarget",b.formTarget,b,null)):(vn(l,u,"encType",b.encType,b,null),vn(l,u,"method",b.method,b,null),vn(l,u,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){l.removeAttribute(f);break}g=Nn(""+g),l.setAttribute(f,g);break;case"onClick":g!=null&&(l.onclick=gn);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"multiple":l.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":l.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){l.removeAttribute("xlink:href");break}f=Nn(""+g),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""+g):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":g===!0?l.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?l.setAttribute(f,g):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?l.setAttribute(f,g):l.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?l.removeAttribute(f):l.setAttribute(f,g);break;case"popover":_r("beforetoggle",l),_r("toggle",l),us(l,"popover",g);break;case"xlinkActuate":ja(l,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ja(l,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ja(l,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ja(l,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ja(l,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ja(l,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ja(l,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ja(l,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ja(l,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":us(l,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=ka.get(f)||f,us(l,f,g))}}function c5(l,u,f,g,b,_){switch(f){case"style":Qt(l,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(n(60));l.innerHTML=f}}break;case"children":typeof g=="string"?Me(l,g):(typeof g=="number"||typeof g=="bigint")&&Me(l,""+g);break;case"onScroll":g!=null&&_r("scroll",l);break;case"onScrollEnd":g!=null&&_r("scrollend",l);break;case"onClick":g!=null&&(l.onclick=gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gr.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),u=f.slice(2,b?f.length-7:void 0),_=l[pn]||null,_=_!=null?_[f]:null,typeof _=="function"&&l.removeEventListener(u,_,b),typeof g=="function")){typeof _!="function"&&_!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(u,g,b);break e}f in l?l[f]=g:g===!0?l.setAttribute(f,""):us(l,f,g)}}}function oi(l,u,f){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_r("error",l),_r("load",l);var g=!1,b=!1,_;for(_ in f)if(f.hasOwnProperty(_)){var z=f[_];if(z!=null)switch(_){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:vn(l,u,_,z,f,null)}}b&&vn(l,u,"srcSet",f.srcSet,f,null),g&&vn(l,u,"src",f.src,f,null);return;case"input":_r("invalid",l);var Y=_=z=b=null,de=null,ke=null;for(g in f)if(f.hasOwnProperty(g)){var Fe=f[g];if(Fe!=null)switch(g){case"name":b=Fe;break;case"type":z=Fe;break;case"checked":de=Fe;break;case"defaultChecked":ke=Fe;break;case"value":_=Fe;break;case"defaultValue":Y=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(137,u));break;default:vn(l,u,g,Fe,f,null)}}wr(l,_,Y,de,ke,z,b,!1);return;case"select":_r("invalid",l),g=z=_=null;for(b in f)if(f.hasOwnProperty(b)&&(Y=f[b],Y!=null))switch(b){case"value":_=Y;break;case"defaultValue":z=Y;break;case"multiple":g=Y;default:vn(l,u,b,Y,f,null)}u=_,f=z,l.multiple=!!g,u!=null?oe(l,!!g,u,!1):f!=null&&oe(l,!!g,f,!0);return;case"textarea":_r("invalid",l),_=b=g=null;for(z in f)if(f.hasOwnProperty(z)&&(Y=f[z],Y!=null))switch(z){case"value":g=Y;break;case"defaultValue":b=Y;break;case"children":_=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(n(91));break;default:vn(l,u,z,Y,f,null)}$e(l,g,b,_);return;case"option":for(de in f)if(f.hasOwnProperty(de)&&(g=f[de],g!=null))switch(de){case"selected":l.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:vn(l,u,de,g,f,null)}return;case"dialog":_r("beforetoggle",l),_r("toggle",l),_r("cancel",l),_r("close",l);break;case"iframe":case"object":_r("load",l);break;case"video":case"audio":for(g=0;g<Tp.length;g++)_r(Tp[g],l);break;case"image":_r("error",l),_r("load",l);break;case"details":_r("toggle",l);break;case"embed":case"source":case"link":_r("error",l),_r("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in f)if(f.hasOwnProperty(ke)&&(g=f[ke],g!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:vn(l,u,ke,g,f,null)}return;default:if(An(u)){for(Fe in f)f.hasOwnProperty(Fe)&&(g=f[Fe],g!==void 0&&c5(l,u,Fe,g,f,void 0));return}}for(Y in f)f.hasOwnProperty(Y)&&(g=f[Y],g!=null&&vn(l,u,Y,g,f,null))}function kY(l,u,f,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,z=null,Y=null,de=null,ke=null,Fe=null;for(De in f){var Qe=f[De];if(f.hasOwnProperty(De)&&Qe!=null)switch(De){case"checked":break;case"value":break;case"defaultValue":de=Qe;default:g.hasOwnProperty(De)||vn(l,u,De,null,g,Qe)}}for(var Oe in g){var De=g[Oe];if(Qe=f[Oe],g.hasOwnProperty(Oe)&&(De!=null||Qe!=null))switch(Oe){case"type":_=De;break;case"name":b=De;break;case"checked":ke=De;break;case"defaultChecked":Fe=De;break;case"value":z=De;break;case"defaultValue":Y=De;break;case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(n(137,u));break;default:De!==Qe&&vn(l,u,Oe,De,g,Qe)}}Yt(l,z,Y,de,ke,Fe,_,b);return;case"select":De=z=Y=Oe=null;for(_ in f)if(de=f[_],f.hasOwnProperty(_)&&de!=null)switch(_){case"value":break;case"multiple":De=de;default:g.hasOwnProperty(_)||vn(l,u,_,null,g,de)}for(b in g)if(_=g[b],de=f[b],g.hasOwnProperty(b)&&(_!=null||de!=null))switch(b){case"value":Oe=_;break;case"defaultValue":Y=_;break;case"multiple":z=_;default:_!==de&&vn(l,u,b,_,g,de)}u=Y,f=z,g=De,Oe!=null?oe(l,!!f,Oe,!1):!!g!=!!f&&(u!=null?oe(l,!!f,u,!0):oe(l,!!f,f?[]:"",!1));return;case"textarea":De=Oe=null;for(Y in f)if(b=f[Y],f.hasOwnProperty(Y)&&b!=null&&!g.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:vn(l,u,Y,null,g,b)}for(z in g)if(b=g[z],_=f[z],g.hasOwnProperty(z)&&(b!=null||_!=null))switch(z){case"value":Oe=b;break;case"defaultValue":De=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==_&&vn(l,u,z,b,g,_)}ve(l,Oe,De);return;case"option":for(var Ct in f)if(Oe=f[Ct],f.hasOwnProperty(Ct)&&Oe!=null&&!g.hasOwnProperty(Ct))switch(Ct){case"selected":l.selected=!1;break;default:vn(l,u,Ct,null,g,Oe)}for(de in g)if(Oe=g[de],De=f[de],g.hasOwnProperty(de)&&Oe!==De&&(Oe!=null||De!=null))switch(de){case"selected":l.selected=Oe&&typeof Oe!="function"&&typeof Oe!="symbol";break;default:vn(l,u,de,Oe,g,De)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in f)Oe=f[Gt],f.hasOwnProperty(Gt)&&Oe!=null&&!g.hasOwnProperty(Gt)&&vn(l,u,Gt,null,g,Oe);for(ke in g)if(Oe=g[ke],De=f[ke],g.hasOwnProperty(ke)&&Oe!==De&&(Oe!=null||De!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(n(137,u));break;default:vn(l,u,ke,Oe,g,De)}return;default:if(An(u)){for(var xn in f)Oe=f[xn],f.hasOwnProperty(xn)&&Oe!==void 0&&!g.hasOwnProperty(xn)&&c5(l,u,xn,void 0,g,Oe);for(Fe in g)Oe=g[Fe],De=f[Fe],!g.hasOwnProperty(Fe)||Oe===De||Oe===void 0&&De===void 0||c5(l,u,Fe,Oe,g,De);return}}for(var we in f)Oe=f[we],f.hasOwnProperty(we)&&Oe!=null&&!g.hasOwnProperty(we)&&vn(l,u,we,null,g,Oe);for(Qe in g)Oe=g[Qe],De=f[Qe],!g.hasOwnProperty(Qe)||Oe===De||Oe==null&&De==null||vn(l,u,Qe,Oe,g,De)}function pC(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var b=f[g],_=b.transferSize,z=b.initiatorType,Y=b.duration;if(_&&Y&&pC(z)){for(z=0,Y=b.responseEnd,g+=1;g<f.length;g++){var de=f[g],ke=de.startTime;if(ke>Y)break;var Fe=de.transferSize,Qe=de.initiatorType;Fe&&pC(Qe)&&(de=de.responseEnd,z+=Fe*(de<Y?1:(Y-ke)/(de-ke)))}if(--g,u+=8*(_+z)/(b.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var u5=null,d5=null;function Py(l){return l.nodeType===9?l:l.ownerDocument}function mC(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gC(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function h5(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var f5=null;function OY(){var l=window.event;return l&&l.type==="popstate"?l===f5?!1:(f5=l,!0):(f5=null,!1)}var yC=typeof setTimeout=="function"?setTimeout:void 0,IY=typeof clearTimeout=="function"?clearTimeout:void 0,vC=typeof Promise=="function"?Promise:void 0,RY=typeof queueMicrotask=="function"?queueMicrotask:typeof vC<"u"?function(l){return vC.resolve(null).then(l).catch(MY)}:yC;function MY(l){setTimeout(function(){throw l})}function Uc(l){return l==="head"}function xC(l,u){var f=u,g=0;do{var b=f.nextSibling;if(l.removeChild(f),b&&b.nodeType===8)if(f=b.data,f==="/$"||f==="/&"){if(g===0){l.removeChild(b),X0(u);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Np(l.ownerDocument.documentElement);else if(f==="head"){f=l.ownerDocument.head,Np(f);for(var _=f.firstChild;_;){var z=_.nextSibling,Y=_.nodeName;_[gi]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=z}}else f==="body"&&Np(l.ownerDocument.body);f=b}while(f);X0(u)}function bC(l,u){var f=l;l=0;do{var g=f.nextSibling;if(f.nodeType===1?u?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(u?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(l===0)break;l--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||l++;f=g}while(f)}function p5(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var f=u;switch(u=u.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":p5(f),Tt(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function PY(l,u,f,g){for(;l.nodeType===1;){var b=f;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(g){if(!l[gi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(_=l.getAttribute("rel"),_==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(_!==b.rel||l.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||l.getAttribute("title")!==(b.title==null?null:b.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(_=l.getAttribute("src"),(_!==(b.src==null?null:b.src)||l.getAttribute("type")!==(b.type==null?null:b.type)||l.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&l.getAttribute("name")===_)return l}else return l;if(l=zs(l.nextSibling),l===null)break}return null}function DY(l,u,f){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=zs(l.nextSibling),l===null))return null;return l}function wC(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=zs(l.nextSibling),l===null))return null;return l}function m5(l){return l.data==="$?"||l.data==="$~"}function g5(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function LY(l,u){var f=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||f.readyState!=="loading")u();else{var g=function(){u(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),l._reactRetry=g}}function zs(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var y5=null;function SC(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="/$"||f==="/&"){if(u===0)return zs(l.nextSibling);u--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||u++}l=l.nextSibling}return null}function _C(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(u===0)return l;u--}else f!=="/$"&&f!=="/&"||u++}l=l.previousSibling}return null}function TC(l,u,f){switch(u=Py(f),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function Np(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Tt(l)}var Vs=new Map,AC=new Set;function Dy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Nl=J.d;J.d={f:BY,r:$Y,D:UY,C:zY,L:VY,m:FY,X:HY,S:qY,M:GY};function BY(){var l=Nl.f(),u=Ey();return l||u}function $Y(l){var u=Je(l);u!==null&&u.tag===5&&u.type==="form"?Vk(u):Nl.r(l)}var W0=typeof document>"u"?null:document;function NC(l,u,f){var g=W0;if(g&&typeof u=="string"&&u){var b=Nt(u);b='link[rel="'+l+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),AC.has(b)||(AC.add(b),l={rel:l,crossOrigin:f,href:u},g.querySelector(b)===null&&(u=g.createElement("link"),oi(u,"link",l),dr(u),g.head.appendChild(u)))}}function UY(l){Nl.D(l),NC("dns-prefetch",l,null)}function zY(l,u){Nl.C(l,u),NC("preconnect",l,u)}function VY(l,u,f){Nl.L(l,u,f);var g=W0;if(g&&l&&u){var b='link[rel="preload"][as="'+Nt(u)+'"]';u==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Nt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Nt(f.imageSizes)+'"]')):b+='[href="'+Nt(l)+'"]';var _=b;switch(u){case"style":_=K0(l);break;case"script":_=Q0(l)}Vs.has(_)||(l=m({rel:"preload",href:u==="image"&&f&&f.imageSrcSet?void 0:l,as:u},f),Vs.set(_,l),g.querySelector(b)!==null||u==="style"&&g.querySelector(Ep(_))||u==="script"&&g.querySelector(jp(_))||(u=g.createElement("link"),oi(u,"link",l),dr(u),g.head.appendChild(u)))}}function FY(l,u){Nl.m(l,u);var f=W0;if(f&&l){var g=u&&typeof u.as=="string"?u.as:"script",b='link[rel="modulepreload"][as="'+Nt(g)+'"][href="'+Nt(l)+'"]',_=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Q0(l)}if(!Vs.has(_)&&(l=m({rel:"modulepreload",href:l},u),Vs.set(_,l),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(jp(_)))return}g=f.createElement("link"),oi(g,"link",l),dr(g),f.head.appendChild(g)}}}function qY(l,u,f){Nl.S(l,u,f);var g=W0;if(g&&l){var b=Xt(g).hoistableStyles,_=K0(l);u=u||"default";var z=b.get(_);if(!z){var Y={loading:0,preload:null};if(z=g.querySelector(Ep(_)))Y.loading=5;else{l=m({rel:"stylesheet",href:l,"data-precedence":u},f),(f=Vs.get(_))&&v5(l,f);var de=z=g.createElement("link");dr(de),oi(de,"link",l),de._p=new Promise(function(ke,Fe){de.onload=ke,de.onerror=Fe}),de.addEventListener("load",function(){Y.loading|=1}),de.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Ly(z,u,g)}z={type:"stylesheet",instance:z,count:1,state:Y},b.set(_,z)}}}function HY(l,u){Nl.X(l,u);var f=W0;if(f&&l){var g=Xt(f).hoistableScripts,b=Q0(l),_=g.get(b);_||(_=f.querySelector(jp(b)),_||(l=m({src:l,async:!0},u),(u=Vs.get(b))&&x5(l,u),_=f.createElement("script"),dr(_),oi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function GY(l,u){Nl.M(l,u);var f=W0;if(f&&l){var g=Xt(f).hoistableScripts,b=Q0(l),_=g.get(b);_||(_=f.querySelector(jp(b)),_||(l=m({src:l,async:!0,type:"module"},u),(u=Vs.get(b))&&x5(l,u),_=f.createElement("script"),dr(_),oi(_,"link",l),f.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(b,_))}}function EC(l,u,f,g){var b=(b=ze.current)?Dy(b):null;if(!b)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(u=K0(f.href),f=Xt(b).hoistableStyles,g=f.get(u),g||(g={type:"style",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=K0(f.href);var _=Xt(b).hoistableStyles,z=_.get(l);if(z||(b=b.ownerDocument||b,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(l,z),(_=b.querySelector(Ep(l)))&&!_._p&&(z.instance=_,z.state.loading=5),Vs.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Vs.set(l,f),_||WY(b,l,f,z.state))),u&&g===null)throw Error(n(528,""));return z}if(u&&g!==null)throw Error(n(529,""));return null;case"script":return u=f.async,f=f.src,typeof f=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Q0(f),f=Xt(b).hoistableScripts,g=f.get(u),g||(g={type:"script",instance:null,count:0,state:null},f.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function K0(l){return'href="'+Nt(l)+'"'}function Ep(l){return'link[rel="stylesheet"]['+l+"]"}function jC(l){return m({},l,{"data-precedence":l.precedence,precedence:null})}function WY(l,u,f,g){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=l.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),oi(u,"link",f),dr(u),l.head.appendChild(u))}function Q0(l){return'[src="'+Nt(l)+'"]'}function jp(l){return"script[async]"+l}function kC(l,u,f){if(u.count++,u.instance===null)switch(u.type){case"style":var g=l.querySelector('style[data-href~="'+Nt(f.href)+'"]');if(g)return u.instance=g,dr(g),g;var b=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(l.ownerDocument||l).createElement("style"),dr(g),oi(g,"style",b),Ly(g,f.precedence,l),u.instance=g;case"stylesheet":b=K0(f.href);var _=l.querySelector(Ep(b));if(_)return u.state.loading|=4,u.instance=_,dr(_),_;g=jC(f),(b=Vs.get(b))&&v5(g,b),_=(l.ownerDocument||l).createElement("link"),dr(_);var z=_;return z._p=new Promise(function(Y,de){z.onload=Y,z.onerror=de}),oi(_,"link",g),u.state.loading|=4,Ly(_,f.precedence,l),u.instance=_;case"script":return _=Q0(f.src),(b=l.querySelector(jp(_)))?(u.instance=b,dr(b),b):(g=f,(b=Vs.get(_))&&(g=m({},f),x5(g,b)),l=l.ownerDocument||l,b=l.createElement("script"),dr(b),oi(b,"link",g),l.head.appendChild(b),u.instance=b);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Ly(g,f.precedence,l));return u.instance}function Ly(l,u,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,_=b,z=0;z<g.length;z++){var Y=g[z];if(Y.dataset.precedence===u)_=Y;else if(_!==b)break}_?_.parentNode.insertBefore(l,_.nextSibling):(u=f.nodeType===9?f.head:f,u.insertBefore(l,u.firstChild))}function v5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function x5(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var By=null;function CC(l,u,f){if(By===null){var g=new Map,b=By=new Map;b.set(f,g)}else b=By,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(l))return g;for(g.set(l,null),f=f.getElementsByTagName(l),b=0;b<f.length;b++){var _=f[b];if(!(_[gi]||_[Yr]||l==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var z=_.getAttribute(u)||"";z=l+z;var Y=g.get(z);Y?Y.push(_):g.set(z,[_])}}return g}function OC(l,u,f){l=l.ownerDocument||l,l.head.insertBefore(f,u==="title"?l.querySelector("head > title"):null)}function KY(l,u,f){if(f===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function IC(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function QY(l,u,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var b=K0(g.href),_=u.querySelector(Ep(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=$y.bind(l),u.then(l,l)),f.state.loading|=4,f.instance=_,dr(_);return}_=u.ownerDocument||u,g=jC(g),(b=Vs.get(b))&&v5(g,b),_=_.createElement("link"),dr(_);var z=_;z._p=new Promise(function(Y,de){z.onload=Y,z.onerror=de}),oi(_,"link",g),f.instance=_}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(l.count++,f=$y.bind(l),u.addEventListener("load",f),u.addEventListener("error",f))}}var b5=0;function XY(l,u){return l.stylesheets&&l.count===0&&zy(l,l.stylesheets),0<l.count||0<l.imgCount?function(f){var g=setTimeout(function(){if(l.stylesheets&&zy(l,l.stylesheets),l.unsuspend){var _=l.unsuspend;l.unsuspend=null,_()}},6e4+u);0<l.imgBytes&&b5===0&&(b5=62500*CY());var b=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&zy(l,l.stylesheets),l.unsuspend)){var _=l.unsuspend;l.unsuspend=null,_()}},(l.imgBytes>b5?50:800)+u);return l.unsuspend=f,function(){l.unsuspend=null,clearTimeout(g),clearTimeout(b)}}:null}function $y(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zy(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Uy=null;function zy(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Uy=new Map,u.forEach(YY,l),Uy=null,$y.call(l))}function YY(l,u){if(!(u.state.loading&4)){var f=Uy.get(l);if(f)var g=f.get(null);else{f=new Map,Uy.set(l,f);for(var b=l.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var z=b[_];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}b=u.instance,z=b.getAttribute("data-precedence"),_=f.get(z)||g,_===g&&f.set(null,b),f.set(z,b),this.count++,g=$y.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),_?_.parentNode.insertBefore(b,_.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(b,l.firstChild)),u.state.loading|=4}}var kp={$$typeof:I,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function ZY(l,u,f,g,b,_,z,Y,de){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=de,this.incompleteTransitions=new Map}function RC(l,u,f,g,b,_,z,Y,de,ke,Fe,Qe){return l=new ZY(l,u,f,z,de,ke,Fe,Qe,Y),u=1,_===!0&&(u|=24),_=ms(3,null,null,u),l.current=_,_.stateNode=l,u=Jw(),u.refCount++,l.pooledCache=u,u.refCount++,_.memoizedState={element:g,isDehydrated:f,cache:u},n4(_),l}function MC(l){return l?(l=N0,l):N0}function PC(l,u,f,g,b,_){b=MC(b),g.context===null?g.context=b:g.pendingContext=b,g=kc(u),g.payload={element:f},_=_===void 0?null:_,_!==null&&(g.callback=_),f=Cc(l,g,u),f!==null&&(Wi(f,l,u),op(f,l,u))}function DC(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<u?f:u}}function w5(l,u){DC(l,u),(l=l.alternate)&&DC(l,u)}function LC(l){if(l.tag===13||l.tag===31){var u=Qu(l,67108864);u!==null&&Wi(u,l,67108864),w5(l,67108864)}}function BC(l){if(l.tag===13||l.tag===31){var u=bs();u=ti(u);var f=Qu(l,u);f!==null&&Wi(f,l,u),w5(l,u)}}var Vy=!0;function JY(l,u,f,g){var b=H.T;H.T=null;var _=J.p;try{J.p=2,S5(l,u,f,g)}finally{J.p=_,H.T=b}}function eZ(l,u,f,g){var b=H.T;H.T=null;var _=J.p;try{J.p=8,S5(l,u,f,g)}finally{J.p=_,H.T=b}}function S5(l,u,f,g){if(Vy){var b=_5(g);if(b===null)l5(l,u,g,Fy,f),UC(l,g);else if(rZ(b,l,u,f,g))g.stopPropagation();else if(UC(l,g),u&4&&-1<tZ.indexOf(l)){for(;b!==null;){var _=Je(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var z=$t(_.pendingLanes);if(z!==0){var Y=_;for(Y.pendingLanes|=2,Y.entangledLanes|=2;z;){var de=1<<31-Ze(z);Y.entanglements[1]|=de,z&=~de}Po(_),(Wr&6)===0&&(Ay=Xe()+500,_p(0))}}break;case 31:case 13:Y=Qu(_,2),Y!==null&&Wi(Y,_,2),Ey(),w5(_,2)}if(_=_5(g),_===null&&l5(l,u,g,Fy,f),_===b)break;b=_}b!==null&&g.stopPropagation()}else l5(l,u,g,null,f)}}function _5(l){return l=Cr(l),T5(l)}var Fy=null;function T5(l){if(Fy=null,l=fe(l),l!==null){var u=i(l);if(u===null)l=null;else{var f=u.tag;if(f===13){if(l=s(u),l!==null)return l;l=null}else if(f===31){if(l=c(u),l!==null)return l;l=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return Fy=l,null}function $C(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case yt:return 2;case mt:return 8;case Vt:case ur:return 32;case qr:return 268435456;default:return 32}default:return 32}}var A5=!1,zc=null,Vc=null,Fc=null,Cp=new Map,Op=new Map,qc=[],tZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UC(l,u){switch(l){case"focusin":case"focusout":zc=null;break;case"dragenter":case"dragleave":Vc=null;break;case"mouseover":case"mouseout":Fc=null;break;case"pointerover":case"pointerout":Cp.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Op.delete(u.pointerId)}}function Ip(l,u,f,g,b,_){return l===null||l.nativeEvent!==_?(l={blockedOn:u,domEventName:f,eventSystemFlags:g,nativeEvent:_,targetContainers:[b]},u!==null&&(u=Je(u),u!==null&&LC(u)),l):(l.eventSystemFlags|=g,u=l.targetContainers,b!==null&&u.indexOf(b)===-1&&u.push(b),l)}function rZ(l,u,f,g,b){switch(u){case"focusin":return zc=Ip(zc,l,u,f,g,b),!0;case"dragenter":return Vc=Ip(Vc,l,u,f,g,b),!0;case"mouseover":return Fc=Ip(Fc,l,u,f,g,b),!0;case"pointerover":var _=b.pointerId;return Cp.set(_,Ip(Cp.get(_)||null,l,u,f,g,b)),!0;case"gotpointercapture":return _=b.pointerId,Op.set(_,Ip(Op.get(_)||null,l,u,f,g,b)),!0}return!1}function zC(l){var u=fe(l.target);if(u!==null){var f=i(u);if(f!==null){if(u=f.tag,u===13){if(u=s(f),u!==null){l.blockedOn=u,ri(l.priority,function(){BC(f)});return}}else if(u===31){if(u=c(f),u!==null){l.blockedOn=u,ri(l.priority,function(){BC(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function qy(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var f=_5(l.nativeEvent);if(f===null){f=l.nativeEvent;var g=new f.constructor(f.type,f);ko=g,f.target.dispatchEvent(g),ko=null}else return u=Je(f),u!==null&&LC(u),l.blockedOn=f,!1;u.shift()}return!0}function VC(l,u,f){qy(l)&&f.delete(u)}function nZ(){A5=!1,zc!==null&&qy(zc)&&(zc=null),Vc!==null&&qy(Vc)&&(Vc=null),Fc!==null&&qy(Fc)&&(Fc=null),Cp.forEach(VC),Op.forEach(VC)}function Hy(l,u){l.blockedOn===u&&(l.blockedOn=null,A5||(A5=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,nZ)))}var Gy=null;function FC(l){Gy!==l&&(Gy=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Gy===l&&(Gy=null);for(var u=0;u<l.length;u+=3){var f=l[u],g=l[u+1],b=l[u+2];if(typeof g!="function"){if(T5(g||f)===null)continue;break}var _=Je(f);_!==null&&(l.splice(u,3),u-=3,_4(_,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function X0(l){function u(de){return Hy(de,l)}zc!==null&&Hy(zc,l),Vc!==null&&Hy(Vc,l),Fc!==null&&Hy(Fc,l),Cp.forEach(u),Op.forEach(u);for(var f=0;f<qc.length;f++){var g=qc[f];g.blockedOn===l&&(g.blockedOn=null)}for(;0<qc.length&&(f=qc[0],f.blockedOn===null);)zC(f),f.blockedOn===null&&qc.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],_=f[g+1],z=b[pn]||null;if(typeof _=="function")z||FC(f);else if(z){var Y=null;if(_&&_.hasAttribute("formAction")){if(b=_,z=_[pn]||null)Y=z.formAction;else if(T5(b)!==null)continue}else Y=z.action;typeof Y=="function"?f[g+1]=Y:(f.splice(g,3),g-=3),FC(f)}}}function qC(){function l(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(z){return b=z})},focusReset:"manual",scroll:"manual"})}function u(){b!==null&&(b(),b=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,b=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),b!==null&&(b(),b=null)}}}function N5(l){this._internalRoot=l}Wy.prototype.render=N5.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var f=u.current,g=bs();PC(f,g,l,u,null,null)},Wy.prototype.unmount=N5.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;PC(l.current,2,null,l,null,null),Ey(),u[Tn]=null}};function Wy(l){this._internalRoot=l}Wy.prototype.unstable_scheduleHydration=function(l){if(l){var u=fn();l={blockedOn:null,target:l,priority:u};for(var f=0;f<qc.length&&u!==0&&u<qc[f].priority;f++);qc.splice(f,0,l),f===0&&zC(l)}};var HC=e.version;if(HC!=="19.2.4")throw Error(n(527,HC,"19.2.4"));J.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=h(u),l=l!==null?p(l):null,l=l===null?null:l.stateNode,l};var aZ={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ky=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ky.isDisabled&&Ky.supportsFiber)try{Et=Ky.inject(aZ),Dt=Ky}catch{}}return Mp.createRoot=function(l,u){if(!a(l))throw Error(n(299));var f=!1,g="",b=Zk,_=Jk,z=e9;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(z=u.onRecoverableError)),u=RC(l,1,!1,null,null,f,g,null,b,_,z,qC),l[Tn]=u.current,o5(l),new N5(u)},Mp.hydrateRoot=function(l,u,f){if(!a(l))throw Error(n(299));var g=!1,b="",_=Zk,z=Jk,Y=e9,de=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(_=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(Y=f.onRecoverableError),f.formState!==void 0&&(de=f.formState)),u=RC(l,1,!0,u,f??null,g,b,de,_,z,Y,qC),u.context=MC(null),f=u.current,g=bs(),g=ti(g),b=kc(g),b.callback=null,Cc(f,b,g),f=g,u.current.lanes=f,dn(u,f),Po(u),l[Tn]=u.current,o5(l),new Wy(u)},Mp.version="19.2.4",Mp}var rO;function gZ(){if(rO)return k5.exports;rO=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),k5.exports=mZ(),k5.exports}var yZ=gZ();const vZ=Kr(yZ);var Ka=(t=>(t.ADMIN="ADMIN",t.STUDENT="STUDENT",t))(Ka||{});const Rr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Ia=(t=>(t.ACTIVE="ACTIVE",t.ARCHIVED="ARCHIVED",t.DRAFT="DRAFT",t))(Ia||{});const zT={PLAYER_DAMAGE_BOOST:{name:"Damage Boost",description:"Students deal extra damage per correct answer",hasValue:!0,defaultValue:25,unit:"+dmg"},BOSS_DAMAGE_BOOST:{name:"Boss Rage",description:"Boss deals extra damage per wrong answer",hasValue:!0,defaultValue:15,unit:"+dmg"},HARD_ONLY:{name:"Hard Only!",description:"Only hard questions appear",hasValue:!1,defaultValue:0,unit:""},DOUBLE_OR_NOTHING:{name:"Double or Nothing",description:"2x damage both ways  correct and wrong",hasValue:!1,defaultValue:0,unit:""},CRIT_SURGE:{name:"Critical Surge",description:"All students get bonus crit chance",hasValue:!0,defaultValue:20,unit:"%"},ARMOR_BREAK:{name:"Armor Break",description:"Boss ignores all armor  damage reduction disabled",hasValue:!1,defaultValue:0,unit:""},HEALING_WAVE:{name:"Healing Wave",description:"Restore HP on each correct answer",hasValue:!0,defaultValue:10,unit:"HP"},SHIELD_WALL:{name:"Shield Wall",description:"First N wrong answers blocked per student",hasValue:!0,defaultValue:2,unit:"blocks"},STREAK_BONUS:{name:"Streak Bonus",description:"Bonus damage per consecutive correct answer",hasValue:!0,defaultValue:10,unit:"+dmg/streak"},GLASS_CANNON:{name:"Glass Cannon",description:"2x player damage but armor is disabled",hasValue:!1,defaultValue:0,unit:""},LAST_STAND:{name:"Last Stand",description:"+50% damage when below 25% HP",hasValue:!1,defaultValue:0,unit:""},TIME_PRESSURE:{name:"Time Pressure",description:"Lose HP each question regardless of answer",hasValue:!0,defaultValue:5,unit:"HP/question"}},nO=[1.5,1.4,1.3,1.2,1.1],Im=5,Rm=1;function xZ(t,e){var r,n;return((r=t.classSections)==null?void 0:r[e])??(t.classType===e||(n=t.enrolledClasses)!=null&&n.includes(e)?t.section:void 0)}function Pv(t,e){const r=new Set;return t.forEach(n=>{const a=xZ(n,e);a&&r.add(a)}),Array.from(r).sort()}var aO={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let a=t.charCodeAt(n);a<128?e[r++]=a:a<2048?(e[r++]=a>>6|192,e[r++]=a&63|128):(a&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=a>>18|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128,e[r++]=a&63|128):(e[r++]=a>>12|224,e[r++]=a>>6&63|128,e[r++]=a&63|128)}return e},bZ=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const a=t[r++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=t[r++];e[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=t[r++],s=t[r++],c=t[r++],d=((a&7)<<18|(i&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const i=t[r++],s=t[r++];e[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|s&63)}}return e.join("")},Uz={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<t.length;a+=3){const i=t[a],s=a+1<t.length,c=s?t[a+1]:0,d=a+2<t.length,h=d?t[a+2]:0,p=i>>2,m=(i&3)<<4|c>>4;let y=(c&15)<<2|h>>6,v=h&63;d||(v=64,s||(y=64)),n.push(r[p],r[m],r[y],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($z(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bZ(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<t.length;){const i=r[t.charAt(a++)],c=a<t.length?r[t.charAt(a)]:0;++a;const h=a<t.length?r[t.charAt(a)]:64;++a;const m=a<t.length?r[t.charAt(a)]:64;if(++a,i==null||c==null||h==null||m==null)throw new wZ;const y=i<<2|c>>4;if(n.push(y),h!==64){const v=c<<4&240|h>>2;if(n.push(v),m!==64){const T=h<<6&192|m;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wZ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SZ=function(t){const e=$z(t);return Uz.encodeByteArray(e,!0)},nx=function(t){return SZ(t).replace(/\./g,"")},zz=function(t){try{return Uz.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Z(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TZ=()=>_Z().__FIREBASE_DEFAULTS__,AZ=()=>{if(typeof process>"u"||typeof aO>"u")return;const t=aO.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zz(t[1]);return e&&JSON.parse(e)},Jb=()=>{try{return TZ()||AZ()||NZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Vz=t=>{var e,r;return(r=(e=Jb())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Fz=t=>{const e=Vz(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},qz=()=>{var t;return(t=Jb())===null||t===void 0?void 0:t.config},Hz=t=>{var e;return(e=Jb())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",a=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nx(JSON.stringify(r)),nx(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ba())}function CZ(){var t;const e=(t=Jb())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MZ(){const t=Ba();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gz(){return!CZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wz(){try{return typeof indexedDB=="object"}catch{return!1}}function PZ(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var i;e(((i=a.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DZ="FirebaseError";class No extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=DZ,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qg.prototype.create)}}class qg{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},a=`${this.service}/${e}`,i=this.errors[e],s=i?LZ(i,n):"Error",c=`${this.serviceName}: ${s} (${a}).`;return new No(a,c,n)}}function LZ(t,e){return t.replace(BZ,(r,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const BZ=/\{\$([^}]+)}/g;function $Z(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Oh(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const a of r){if(!n.includes(a))return!1;const i=t[a],s=e[a];if(iO(i)&&iO(s)){if(!Oh(i,s))return!1}else if(i!==s)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function iO(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function UZ(t,e){const r=new zZ(t,e);return r.subscribe.bind(r)}class zZ{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let a;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");VZ(e,["next","error","complete"])?a=e:a={next:e,error:r,complete:n},a.next===void 0&&(a.next=R5),a.error===void 0&&(a.error=R5),a.complete===void 0&&(a.complete=R5);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VZ(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function R5(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Yl{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FZ{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new EZ;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(a)return null;throw i}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HZ(e))try{this.getOrInitializeService({instanceIdentifier:yd})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(e=yd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yd){return this.instances.has(e)}getOptions(e=yd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);n===c&&s.resolve(a)}return a}onInit(e,r){var n;const a=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(a))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(a,i);const s=this.instances.get(a);return s&&e(s,a),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:qZ(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=yd){return this.component?this.component.multipleInstances?e:yd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qZ(t){return t===yd?void 0:t}function HZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new FZ(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Er||(Er={}));const WZ={debug:Er.DEBUG,verbose:Er.VERBOSE,info:Er.INFO,warn:Er.WARN,error:Er.ERROR,silent:Er.SILENT},KZ=Er.INFO,QZ={[Er.DEBUG]:"log",[Er.VERBOSE]:"log",[Er.INFO]:"info",[Er.WARN]:"warn",[Er.ERROR]:"error"},XZ=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),a=QZ[e];if(a)console[a](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class g8{constructor(e){this.name=e,this._logLevel=KZ,this._logHandler=XZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Er.DEBUG,...e),this._logHandler(this,Er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Er.VERBOSE,...e),this._logHandler(this,Er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Er.INFO,...e),this._logHandler(this,Er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Er.WARN,...e),this._logHandler(this,Er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Er.ERROR,...e),this._logHandler(this,Er.ERROR,...e)}}const YZ=(t,e)=>e.some(r=>t instanceof r);let sO,oO;function ZZ(){return sO||(sO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JZ(){return oO||(oO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kz=new WeakMap,VT=new WeakMap,Qz=new WeakMap,M5=new WeakMap,y8=new WeakMap;function eJ(t){const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("success",i),t.removeEventListener("error",s)},i=()=>{r(yu(t.result)),a()},s=()=>{n(t.error),a()};t.addEventListener("success",i),t.addEventListener("error",s)});return e.then(r=>{r instanceof IDBCursor&&Kz.set(r,t)}).catch(()=>{}),y8.set(e,t),e}function tJ(t){if(VT.has(t))return;const e=new Promise((r,n)=>{const a=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",s),t.removeEventListener("abort",s)},i=()=>{r(),a()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",i),t.addEventListener("error",s),t.addEventListener("abort",s)});VT.set(t,e)}let FT={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return VT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qz.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return yu(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rJ(t){FT=t(FT)}function nJ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(P5(this),e,...r);return Qz.set(n,e.sort?e.sort():[e]),yu(n)}:JZ().includes(t)?function(...e){return t.apply(P5(this),e),yu(Kz.get(this))}:function(...e){return yu(t.apply(P5(this),e))}}function aJ(t){return typeof t=="function"?nJ(t):(t instanceof IDBTransaction&&tJ(t),YZ(t,ZZ())?new Proxy(t,FT):t)}function yu(t){if(t instanceof IDBRequest)return eJ(t);if(M5.has(t))return M5.get(t);const e=aJ(t);return e!==t&&(M5.set(t,e),y8.set(e,t)),e}const P5=t=>y8.get(t);function iJ(t,e,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const s=indexedDB.open(t,e),c=yu(s);return n&&s.addEventListener("upgradeneeded",d=>{n(yu(s.result),d.oldVersion,d.newVersion,yu(s.transaction),d)}),r&&s.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),c.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",h=>a(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const sJ=["get","getKey","getAll","getAllKeys","count"],oJ=["put","add","delete","clear"],D5=new Map;function lO(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(D5.get(e))return D5.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,a=oJ.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||sJ.includes(r)))return;const i=async function(s,...c){const d=this.transaction(s,a?"readwrite":"readonly");let h=d.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),a&&d.done]))[0]};return D5.set(e,i),i}rJ(t=>({...t,get:(e,r,n)=>lO(e,r)||t.get(e,r,n),has:(e,r)=>!!lO(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lJ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(cJ(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function cJ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qT="@firebase/app",cO="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new g8("@firebase/app"),uJ="@firebase/app-compat",dJ="@firebase/analytics-compat",hJ="@firebase/analytics",fJ="@firebase/app-check-compat",pJ="@firebase/app-check",mJ="@firebase/auth",gJ="@firebase/auth-compat",yJ="@firebase/database",vJ="@firebase/data-connect",xJ="@firebase/database-compat",bJ="@firebase/functions",wJ="@firebase/functions-compat",SJ="@firebase/installations",_J="@firebase/installations-compat",TJ="@firebase/messaging",AJ="@firebase/messaging-compat",NJ="@firebase/performance",EJ="@firebase/performance-compat",jJ="@firebase/remote-config",kJ="@firebase/remote-config-compat",CJ="@firebase/storage",OJ="@firebase/storage-compat",IJ="@firebase/firestore",RJ="@firebase/vertexai-preview",MJ="@firebase/firestore-compat",PJ="firebase",DJ="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="[DEFAULT]",LJ={[qT]:"fire-core",[uJ]:"fire-core-compat",[hJ]:"fire-analytics",[dJ]:"fire-analytics-compat",[pJ]:"fire-app-check",[fJ]:"fire-app-check-compat",[mJ]:"fire-auth",[gJ]:"fire-auth-compat",[yJ]:"fire-rtdb",[vJ]:"fire-data-connect",[xJ]:"fire-rtdb-compat",[bJ]:"fire-fn",[wJ]:"fire-fn-compat",[SJ]:"fire-iid",[_J]:"fire-iid-compat",[TJ]:"fire-fcm",[AJ]:"fire-fcm-compat",[NJ]:"fire-perf",[EJ]:"fire-perf-compat",[jJ]:"fire-rc",[kJ]:"fire-rc-compat",[CJ]:"fire-gcs",[OJ]:"fire-gcs-compat",[IJ]:"fire-fst",[MJ]:"fire-fst-compat",[RJ]:"fire-vertex","fire-js":"fire-js",[PJ]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Map,BJ=new Map,GT=new Map;function uO(t,e){try{t.container.addComponent(e)}catch(r){Zl.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _u(t){const e=t.name;if(GT.has(e))return Zl.debug(`There were multiple attempts to register component ${e}.`),!1;GT.set(e,t);for(const r of ax.values())uO(r,t);for(const r of BJ.values())uO(r,t);return!0}function Gg(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Dl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $J={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vu=new qg("app","Firebase",$J);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=DJ;function Xz(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:HT,automaticDataCollectionEnabled:!1},e),a=n.name;if(typeof a!="string"||!a)throw vu.create("bad-app-name",{appName:String(a)});if(r||(r=qz()),!r)throw vu.create("no-options");const i=ax.get(a);if(i){if(Oh(r,i.options)&&Oh(n,i.config))return i;throw vu.create("duplicate-app",{appName:a})}const s=new GZ(a);for(const d of GT.values())s.addComponent(d);const c=new UJ(r,n,s);return ax.set(a,c),c}function v8(t=HT){const e=ax.get(t);if(!e&&t===HT&&qz())return Xz();if(!e)throw vu.create("no-app",{appName:t});return e}function Ys(t,e,r){var n;let a=(n=LJ[t])!==null&&n!==void 0?n:t;r&&(a+=`-${r}`);const i=a.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const c=[`Unable to register library "${a}" with version "${e}":`];i&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),i&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zl.warn(c.join(" "));return}_u(new Yl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ="firebase-heartbeat-database",VJ=1,Mm="firebase-heartbeat-store";let L5=null;function Yz(){return L5||(L5=iJ(zJ,VJ,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mm)}catch(r){console.warn(r)}}}}).catch(t=>{throw vu.create("idb-open",{originalErrorMessage:t.message})})),L5}async function FJ(t){try{const r=(await Yz()).transaction(Mm),n=await r.objectStore(Mm).get(Zz(t));return await r.done,n}catch(e){if(e instanceof No)Zl.warn(e.message);else{const r=vu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zl.warn(r.message)}}}async function dO(t,e){try{const n=(await Yz()).transaction(Mm,"readwrite");await n.objectStore(Mm).put(e,Zz(t)),await n.done}catch(r){if(r instanceof No)Zl.warn(r.message);else{const n=vu.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Zl.warn(n.message)}}}function Zz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qJ=1024,HJ=720*60*60*1e3;class GJ{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new KJ(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=hO();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=HJ}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Zl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=hO(),{heartbeatsToSend:n,unsentEntries:a}=WJ(this._heartbeatsCache.heartbeats),i=nx(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Zl.warn(r),""}}}function hO(){return new Date().toISOString().substring(0,10)}function WJ(t,e=qJ){const r=[];let n=t.slice();for(const a of t){const i=r.find(s=>s.agent===a.agent);if(i){if(i.dates.push(a.date),fO(r)>e){i.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),fO(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class KJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wz()?PZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await FJ(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return dO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const a=await this.read();return dO(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function fO(t){return nx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QJ(t){_u(new Yl("platform-logger",e=>new lJ(e),"PRIVATE")),_u(new Yl("heartbeat",e=>new GJ(e),"PRIVATE")),Ys(qT,cO,t),Ys(qT,cO,"esm2017"),Ys("fire-js","")}QJ("");var XJ="firebase",YJ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(XJ,YJ,"app");function x8(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function Jz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZJ=Jz,eV=new qg("auth","Firebase",Jz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new g8("@firebase/auth");function JJ(t,...e){ix.logLevel<=Er.WARN&&ix.warn(`Auth (${c0}): ${t}`,...e)}function Dv(t,...e){ix.logLevel<=Er.ERROR&&ix.error(`Auth (${c0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t,...e){throw w8(t,...e)}function wo(t,...e){return w8(t,...e)}function b8(t,e,r){const n=Object.assign(Object.assign({},ZJ()),{[e]:r});return new qg("auth","Firebase",n).create(e,{appName:t.name})}function Md(t){return b8(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eee(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ko(t,"argument-error"),b8(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w8(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return eV.create(t,...e)}function nr(t,e,...r){if(!t)throw w8(e,...r)}function Ll(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dv(e),new Error(e)}function Jl(t,e){t||Ll(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tee(){return pO()==="http:"||pO()==="https:"}function pO(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ree(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tee()||IZ()||"connection"in navigator)?navigator.onLine:!0}function nee(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,r){this.shortDelay=e,this.longDelay=r,Jl(r>e,"Short delay should be less than long delay!"),this.isMobile=kZ()||RZ()}get(){return ree()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t,e){Jl(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ll("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ll("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ll("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iee=new Wg(3e4,6e4);function _8(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Tf(t,e,r,n,a={}){return rV(t,a,async()=>{let i={},s={};n&&(e==="GET"?s=n:i={body:JSON.stringify(n)});const c=Hg(Object.assign({key:t.config.apiKey},s)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:d},i);return OZ()||(h.referrerPolicy="no-referrer"),tV.fetch()(nV(t,t.config.apiHost,r,c),h)})}async function rV(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},aee),e);try{const a=new oee(t),i=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Xy(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const c=i.ok?s.errorMessage:s.error.message,[d,h]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xy(t,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw Xy(t,"email-already-in-use",s);if(d==="USER_DISABLED")throw Xy(t,"user-disabled",s);const p=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw b8(t,p,h);Ko(t,p)}}catch(a){if(a instanceof No)throw a;Ko(t,"network-request-failed",{message:String(a)})}}async function see(t,e,r,n,a={}){const i=await Tf(t,e,r,n,a);return"mfaPendingCredential"in i&&Ko(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nV(t,e,r,n){const a=`${e}${r}?${n}`;return t.config.emulator?S8(t.config,a):`${t.config.apiScheme}://${a}`}class oee{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(wo(this.auth,"network-request-failed")),iee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xy(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=wo(t,e,n);return a.customData._tokenResponse=r,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lee(t,e){return Tf(t,"POST","/v1/accounts:delete",e)}async function aV(t,e){return Tf(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cee(t,e=!1){const r=_n(t),n=await r.getIdToken(e),a=T8(n);nr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,s=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:cm(B5(a.auth_time)),issuedAtTime:cm(B5(a.iat)),expirationTime:cm(B5(a.exp)),signInProvider:s||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function B5(t){return Number(t)*1e3}function T8(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Dv("JWT malformed, contained fewer than 3 sections"),null;try{const a=zz(r);return a?JSON.parse(a):(Dv("Failed to decode base64 JWT payload"),null)}catch(a){return Dv("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function mO(t){const e=T8(t);return nr(e,"internal-error"),nr(typeof e.exp<"u","internal-error"),nr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pm(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof No&&uee(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function uee({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=cm(this.lastLoginAt),this.creationTime=cm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(t){var e;const r=t.auth,n=await t.getIdToken(),a=await Pm(t,aV(r,{idToken:n}));nr(a==null?void 0:a.users.length,r,"internal-error");const i=a.users[0];t._notifyReloadListener(i);const s=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iV(i.providerUserInfo):[],c=fee(t.providerData,s),d=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new KT(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function hee(t){const e=_n(t);await sx(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fee(t,e){return[...t.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function iV(t){return t.map(e=>{var{providerId:r}=e,n=x8(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pee(t,e){const r=await rV(t,{},async()=>{const n=Hg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:i}=t.config,s=nV(t,a,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",tV.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function mee(t,e){return Tf(t,"POST","/v2/accounts:revokeToken",_8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nr(e.idToken,"internal-error"),nr(typeof e.idToken<"u","internal-error"),nr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){nr(e.length!==0,"internal-error");const r=mO(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(nr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:a,expiresIn:i}=await pee(e,r);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:a,expirationTime:i}=r,s=new vh;return n&&(nr(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),a&&(nr(typeof a=="string","internal-error",{appName:e}),s.accessToken=a),i&&(nr(typeof i=="number","internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vh,this.toJSON())}_performRefresh(){return Ll("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t,e){nr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bl{constructor(e){var{uid:r,auth:n,stsTokenManager:a}=e,i=x8(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dee(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new KT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await Pm(this,this.stsTokenManager.getToken(this.auth,e));return nr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return cee(this,e)}reload(){return hee(this)}_assign(e){this!==e&&(nr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Bl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){nr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await sx(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dl(this.auth.app))return Promise.reject(Md(this.auth));const e=await this.getIdToken();return await Pm(this,lee(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,a,i,s,c,d,h,p;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(a=r.email)!==null&&a!==void 0?a:void 0,v=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,T=(s=r.photoURL)!==null&&s!==void 0?s:void 0,S=(c=r.tenantId)!==null&&c!==void 0?c:void 0,w=(d=r._redirectEventId)!==null&&d!==void 0?d:void 0,j=(h=r.createdAt)!==null&&h!==void 0?h:void 0,R=(p=r.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:L,isAnonymous:C,providerData:P,stsTokenManager:N}=r;nr(I&&N,e,"internal-error");const A=vh.fromJSON(this.name,N);nr(typeof I=="string",e,"internal-error"),Gc(m,e.name),Gc(y,e.name),nr(typeof L=="boolean",e,"internal-error"),nr(typeof C=="boolean",e,"internal-error"),Gc(v,e.name),Gc(T,e.name),Gc(S,e.name),Gc(w,e.name),Gc(j,e.name),Gc(R,e.name);const E=new Bl({uid:I,auth:e,email:y,emailVerified:L,displayName:m,isAnonymous:C,photoURL:T,phoneNumber:v,tenantId:S,stsTokenManager:A,createdAt:j,lastLoginAt:R});return P&&Array.isArray(P)&&(E.providerData=P.map(V=>Object.assign({},V))),w&&(E._redirectEventId=w),E}static async _fromIdTokenResponse(e,r,n=!1){const a=new vh;a.updateFromServerResponse(r);const i=new Bl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await sx(i),i}static async _fromGetAccountInfoResponse(e,r,n){const a=r.users[0];nr(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?iV(a.providerUserInfo):[],s=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),c=new vh;c.updateFromIdToken(n);const d=new Bl({uid:a.localId,auth:e,stsTokenManager:c,isAnonymous:s}),h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new KT(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,h),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=new Map;function $l(t){Jl(t instanceof Function,"Expected a class definition");let e=gO.get(t);return e?(Jl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,gO.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}sV.type="NONE";const yO=sV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e,r){return`firebase:${t}:${e}:${r}`}class xh{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=Lv(this.userKey,a.apiKey,i),this.fullPersistenceKey=Lv("persistence",a.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new xh($l(yO),e,n);const a=(await Promise.all(r.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=a[0]||$l(yO);const s=Lv(n,e.config.apiKey,e.name);let c=null;for(const h of r)try{const p=await h._get(s);if(p){const m=Bl._fromJSON(e,p);h!==i&&(c=m),i=h;break}}catch{}const d=a.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new xh(i,e,n):(i=d[0],c&&await i._set(s,c.toJSON()),await Promise.all(r.map(async h=>{if(h!==i)try{await h._remove(s)}catch{}})),new xh(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hV(e))return"Blackberry";if(fV(e))return"Webos";if(lV(e))return"Safari";if((e.includes("chrome/")||cV(e))&&!e.includes("edge/"))return"Chrome";if(dV(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function oV(t=Ba()){return/firefox\//i.test(t)}function lV(t=Ba()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cV(t=Ba()){return/crios\//i.test(t)}function uV(t=Ba()){return/iemobile/i.test(t)}function dV(t=Ba()){return/android/i.test(t)}function hV(t=Ba()){return/blackberry/i.test(t)}function fV(t=Ba()){return/webos/i.test(t)}function A8(t=Ba()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gee(t=Ba()){var e;return A8(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yee(){return MZ()&&document.documentMode===10}function pV(t=Ba()){return A8(t)||dV(t)||fV(t)||hV(t)||/windows phone/i.test(t)||uV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(t,e=[]){let r;switch(t){case"Browser":r=vO(Ba());break;case"Worker":r=`${vO(Ba())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${c0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((s,c)=>{try{const d=e(i);s(d)}catch(d){c(d)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xee(t,e={}){return Tf(t,"GET","/v2/passwordPolicy",_8(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee=6;class wee{constructor(e){var r,n,a,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=s.minPasswordLength)!==null&&r!==void 0?r:bee,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,a,i,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(r=d.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),a&&(r.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class See{constructor(e,r,n,a){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xO(this),this.idTokenSubscription=new xO(this),this.beforeStateQueue=new vee(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eV,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=$l(r)),this._initializationPromise=this.queue(async()=>{var n,a;if(!this._deleted&&(this.persistenceManager=await xh.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await aV(this,{idToken:e}),n=await Bl._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Dl(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(a=d.user,i=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(a)}catch(s){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return nr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await sx(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nee()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dl(this.app))return Promise.reject(Md(this));const r=e?_n(e):null;return r&&nr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&nr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dl(this.app)?Promise.reject(Md(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dl(this.app)?Promise.reject(Md(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xee(this),r=new wee(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qg("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await mee(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&$l(e)||this._popupRedirectResolver;nr(r,this,"argument-error"),this.redirectPersistenceManager=await xh.create(this,[$l(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,a){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nr(c,this,"internal-error"),c.then(()=>{s||i(this.currentUser)}),typeof r=="function"){const d=e.addObserver(r,n,a);return()=>{s=!0,d()}}else{const d=e.addObserver(r);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(r["X-Firebase-AppCheck"]=a),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&JJ(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function e2(t){return _n(t)}class xO{constructor(e){this.auth=e,this.observer=null,this.addObserver=UZ(r=>this.observer=r)}get next(){return nr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N8={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _ee(t){N8=t}function Tee(t){return N8.loadJS(t)}function Aee(){return N8.gapiScript}function Nee(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eee(t,e){const r=Gg(t,"auth");if(r.isInitialized()){const a=r.getImmediate(),i=r.getOptions();if(Oh(i,e??{}))return a;Ko(a,"already-initialized")}return r.initialize({options:e})}function jee(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map($l);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function kee(t,e,r){const n=e2(t);nr(n._canInitEmulator,n,"emulator-config-failed"),nr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!1,i=gV(e),{host:s,port:c}=Cee(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${i}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),Oee()}function gV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Cee(t){const e=gV(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:bO(n.substr(i.length+1))}}else{const[i,s]=n.split(":");return{host:i,port:bO(s)}}}function bO(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Oee(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Ll("not implemented")}_getIdTokenResponse(e){return Ll("not implemented")}_linkToIdToken(e,r){return Ll("not implemented")}_getReauthenticationResolver(e){return Ll("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t,e){return see(t,"POST","/v1/accounts:signInWithIdp",_8(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iee="http://localhost";class zd extends yV{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new zd(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Ko("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a}=r,i=x8(r,["providerId","signInMethod"]);if(!n||!a)return null;const s=new zd(n,a);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){const r=this.buildRequest();return bh(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,bh(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,bh(e,r)}buildRequest(){const e={requestUri:Iee,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Hg(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends E8{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Kg{constructor(){super("facebook.com")}static credential(e){return zd._fromParams({providerId:eu.PROVIDER_ID,signInMethod:eu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return eu.credentialFromTaggedObject(e)}static credentialFromError(e){return eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return eu.credential(e.oauthAccessToken)}catch{return null}}}eu.FACEBOOK_SIGN_IN_METHOD="facebook.com";eu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml extends Kg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return zd._fromParams({providerId:Ml.PROVIDER_ID,signInMethod:Ml.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ml.credentialFromTaggedObject(e)}static credentialFromError(e){return Ml.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Ml.credential(r,n)}catch{return null}}}Ml.GOOGLE_SIGN_IN_METHOD="google.com";Ml.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu extends Kg{constructor(){super("github.com")}static credential(e){return zd._fromParams({providerId:tu.PROVIDER_ID,signInMethod:tu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tu.credentialFromTaggedObject(e)}static credentialFromError(e){return tu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tu.credential(e.oauthAccessToken)}catch{return null}}}tu.GITHUB_SIGN_IN_METHOD="github.com";tu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends Kg{constructor(){super("twitter.com")}static credential(e,r){return zd._fromParams({providerId:ru.PROVIDER_ID,signInMethod:ru.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ru.credentialFromTaggedObject(e)}static credentialFromError(e){return ru.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ru.credential(r,n)}catch{return null}}}ru.TWITTER_SIGN_IN_METHOD="twitter.com";ru.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,a=!1){const i=await Bl._fromIdTokenResponse(e,n,a),s=wO(n);return new Ih({user:i,providerId:s,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const a=wO(n);return new Ih({user:e,providerId:a,_tokenResponse:n,operationType:r})}}function wO(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends No{constructor(e,r,n,a){var i;super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,ox.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,a){return new ox(e,r,n,a)}}function vV(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ox._fromErrorAndOperation(t,i,e,n):i})}async function Ree(t,e,r=!1){const n=await Pm(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ih._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mee(t,e,r=!1){const{auth:n}=t;if(Dl(n.app))return Promise.reject(Md(n));const a="reauthenticate";try{const i=await Pm(t,vV(n,a,e,t),r);nr(i.idToken,n,"internal-error");const s=T8(i.idToken);nr(s,n,"internal-error");const{sub:c}=s;return nr(t.uid===c,n,"user-mismatch"),Ih._forOperation(t,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ko(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pee(t,e,r=!1){if(Dl(t.app))return Promise.reject(Md(t));const n="signIn",a=await vV(t,n,e),i=await Ih._fromIdTokenResponse(t,n,a);return r||await t._updateCurrentUser(i.user),i}function Dee(t,e,r,n){return _n(t).onIdTokenChanged(e,r,n)}function Lee(t,e,r){return _n(t).beforeAuthStateChanged(e,r)}function Bee(t,e,r,n){return _n(t).onAuthStateChanged(e,r,n)}function $ee(t){return _n(t).signOut()}const lx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(lx,"1"),this.storage.removeItem(lx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uee=1e3,zee=10;class bV extends xV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&e(r,a,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;r?this.detachListener():this.stopPolling();const a=()=>{const s=this.storage.getItem(n);!r&&this.localCache[n]===s||this.notifyListeners(n,s)},i=this.storage.getItem(n);yee()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,zee):a()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},Uee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}bV.type="LOCAL";const Vee=bV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV extends xV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}wV.type="SESSION";const SV=wV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fee(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(a=>a.isListeningto(e));if(r)return r;const n=new t2(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:a,data:i}=r.data,s=this.handlersMap[a];if(!(s!=null&&s.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const c=Array.from(s).map(async h=>h(r.origin,i)),d=await Fee(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t2.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j8(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qee{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,s;return new Promise((c,d)=>{const h=j8("",20);a.port1.start();const p=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:a,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(y.data.response);break;default:clearTimeout(p),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(s),a.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:r},[a.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(){return window}function Hee(t){qo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(){return typeof qo().WorkerGlobalScope<"u"&&typeof qo().importScripts=="function"}async function Gee(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Wee(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Kee(){return _V()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="firebaseLocalStorageDb",Qee=1,cx="firebaseLocalStorage",AV="fbase_key";class Qg{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function r2(t,e){return t.transaction([cx],e?"readwrite":"readonly").objectStore(cx)}function Xee(){const t=indexedDB.deleteDatabase(TV);return new Qg(t).toPromise()}function QT(){const t=indexedDB.open(TV,Qee);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(cx,{keyPath:AV})}catch(a){r(a)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(cx)?e(n):(n.close(),await Xee(),e(await QT()))})})}async function SO(t,e,r){const n=r2(t,!0).put({[AV]:e,value:r});return new Qg(n).toPromise()}async function Yee(t,e){const r=r2(t,!1).get(e),n=await new Qg(r).toPromise();return n===void 0?null:n.value}function _O(t,e){const r=r2(t,!0).delete(e);return new Qg(r).toPromise()}const Zee=800,Jee=3;class NV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await QT(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Jee)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _V()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=t2._getInstance(Kee()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await Gee(),!this.activeServiceWorker)return;this.sender=new qee(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Wee()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await QT();return await SO(e,lx,"1"),await _O(e,lx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>SO(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>Yee(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_O(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const i=r2(a,!1).getAll();return new Qg(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:i}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Zee)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NV.type="LOCAL";const ete=NV;new Wg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(t,e){return e?$l(e):(nr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8 extends yV{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bh(e,this._buildIdpRequest())}_linkToIdToken(e,r){return bh(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return bh(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function tte(t){return Pee(t.auth,new k8(t),t.bypassAuthState)}function rte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),Mee(r,new k8(t),t.bypassAuthState)}async function nte(t){const{auth:e,user:r}=t;return nr(r,e,"internal-error"),Ree(r,new k8(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,r,n,a,i=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:a,tenantId:i,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tte;case"linkViaPopup":case"linkViaRedirect":return nte;case"reauthViaPopup":case"reauthViaRedirect":return rte;default:Ko(this.auth,"internal-error")}}resolve(e){Jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ate=new Wg(2e3,1e4);async function ite(t,e,r){if(Dl(t.app))return Promise.reject(wo(t,"operation-not-supported-in-this-environment"));const n=e2(t);eee(t,e,E8);const a=EV(n,r);return new Nd(n,"signInViaPopup",e,a).executeNotNull()}class Nd extends jV{constructor(e,r,n,a,i){super(e,r,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Nd.currentPopupAction&&Nd.currentPopupAction.cancel(),Nd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nr(e,this.auth,"internal-error"),e}async onExecution(){Jl(this.filter.length===1,"Popup operations only handle one event");const e=j8();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(wo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ate.get())};e()}}Nd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ste="pendingRedirect",Bv=new Map;class ote extends jV{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Bv.get(this.auth._key());if(!e){try{const n=await lte(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Bv.set(this.auth._key(),e)}return this.bypassAuthState||Bv.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lte(t,e){const r=dte(e),n=ute(t);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function cte(t,e){Bv.set(t._key(),e)}function ute(t){return $l(t._redirectPersistence)}function dte(t){return Lv(ste,t.config.apiKey,t.name)}async function hte(t,e,r=!1){if(Dl(t.app))return Promise.reject(Md(t));const n=e2(t),a=EV(n,e),s=await new ote(n,a,r).execute();return s&&!r&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fte=600*1e3;class pte{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mte(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!kV(e)){const a=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(wo(this.auth,a))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fte&&this.cachedEventUids.clear(),this.cachedEventUids.has(TO(e))}saveEventToCache(e){this.cachedEventUids.add(TO(e)),this.lastProcessedEventTime=Date.now()}}function TO(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mte(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gte(t,e={}){return Tf(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yte=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vte=/^https?/;async function xte(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gte(t);for(const r of e)try{if(bte(r))return}catch{}Ko(t,"unauthorized-domain")}function bte(t){const e=WT(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&s.hostname===n}if(!vte.test(r))return!1;if(yte.test(t))return n===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wte=new Wg(3e4,6e4);function AO(){const t=qo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Ste(t){return new Promise((e,r)=>{var n,a,i;function s(){AO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AO(),r(wo(t,"network-request-failed"))},timeout:wte.get()})}if(!((a=(n=qo().gapi)===null||n===void 0?void 0:n.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((i=qo().gapi)===null||i===void 0)&&i.load)s();else{const c=Nee("iframefcb");return qo()[c]=()=>{gapi.load?s():r(wo(t,"network-request-failed"))},Tee(`${Aee()}?onload=${c}`).catch(d=>r(d))}}).catch(e=>{throw $v=null,e})}let $v=null;function _te(t){return $v=$v||Ste(t),$v}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tte=new Wg(5e3,15e3),Ate="__/auth/iframe",Nte="emulator/auth/iframe",Ete={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jte=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kte(t){const e=t.config;nr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?S8(e,Nte):`https://${t.config.authDomain}/${Ate}`,n={apiKey:e.apiKey,appName:t.name,v:c0},a=jte.get(t.config.apiHost);a&&(n.eid=a);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${Hg(n).slice(1)}`}async function Cte(t){const e=await _te(t),r=qo().gapi;return nr(r,t,"internal-error"),e.open({where:document.body,url:kte(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ete,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const s=wo(t,"network-request-failed"),c=qo().setTimeout(()=>{i(s)},Tte.get());function d(){qo().clearTimeout(c),a(n)}n.ping(d).then(d,()=>{i(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ote={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ite=500,Rte=600,Mte="_blank",Pte="http://localhost";class NO{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dte(t,e,r,n=Ite,a=Rte){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},Ote),{width:n.toString(),height:a.toString(),top:i,left:s}),h=Ba().toLowerCase();r&&(c=cV(h)?Mte:r),oV(h)&&(e=e||Pte,d.scrollbars="yes");const p=Object.entries(d).reduce((y,[v,T])=>`${y}${v}=${T},`,"");if(gee(h)&&c!=="_self")return Lte(e||"",c),new NO(null);const m=window.open(e||"",c,p);nr(m,t,"popup-blocked");try{m.focus()}catch{}return new NO(m)}function Lte(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bte="__/auth/handler",$te="emulator/auth/handler",Ute=encodeURIComponent("fac");async function EO(t,e,r,n,a,i){nr(t.config.authDomain,t,"auth-domain-config-required"),nr(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:c0,eventId:a};if(e instanceof E8){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",$Z(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))s[p]=m}if(e instanceof Kg){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const c=s;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const d=await t._getAppCheckToken(),h=d?`#${Ute}=${encodeURIComponent(d)}`:"";return`${zte(t)}?${Hg(c).slice(1)}${h}`}function zte({config:t}){return t.emulator?S8(t,$te):`https://${t.authDomain}/${Bte}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="webStorageSupport";class Vte{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SV,this._completeRedirectFn=hte,this._overrideRedirectResult=cte}async _openPopup(e,r,n,a){var i;Jl((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await EO(e,r,n,WT(),a);return Dte(e,s,j8())}async _openRedirect(e,r,n,a){await this._originValidation(e);const i=await EO(e,r,n,WT(),a);return Hee(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:a,promise:i}=this.eventManagers[r];return a?Promise.resolve(a):(Jl(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Cte(e),n=new pte(e);return r.register("authEvent",a=>(nr(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send($5,{type:$5},a=>{var i;const s=(i=a==null?void 0:a[0])===null||i===void 0?void 0:i[$5];s!==void 0&&r(!!s),Ko(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=xte(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return pV()||lV()||A8()}}const Fte=Vte;var jO="@firebase/auth",kO="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qte{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){nr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hte(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Gte(t){_u(new Yl("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;nr(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mV(t)},h=new See(n,a,i,d);return jee(h,r),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),_u(new Yl("auth-internal",e=>{const r=e2(e.getProvider("auth").getImmediate());return(n=>new qte(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(jO,kO,Hte(t)),Ys(jO,kO,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wte=300,Kte=Hz("authIdTokenMaxAge")||Wte;let CO=null;const Qte=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Kte)return;const a=r==null?void 0:r.token;CO!==a&&(CO=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function XT(t=v8()){const e=Gg(t,"auth");if(e.isInitialized())return e.getImmediate();const r=Eee(t,{popupRedirectResolver:Fte,persistence:[ete,Vee,SV]}),n=Hz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const s=Qte(i.toString());Lee(r,s,()=>s(r.currentUser)),Dee(r,c=>s(c))}}const a=Vz("auth");return a&&kee(r,`http://${a}`),r}function Xte(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_ee({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=a=>{const i=wo("internal-error");i.customData=a,r(i)},n.type="text/javascript",n.charset="UTF-8",Xte().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Gte("Browser");var OO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pd,CV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function E(){}E.prototype=A.prototype,N.D=A.prototype,N.prototype=new E,N.prototype.constructor=N,N.C=function(V,D,U){for(var $=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)$[Q-2]=arguments[Q];return A.prototype[D].apply(V,$)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,E){E||(E=0);var V=Array(16);if(typeof A=="string")for(var D=0;16>D;++D)V[D]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(D=0;16>D;++D)V[D]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=N.g[0],E=N.g[1],D=N.g[2];var U=N.g[3],$=A+(U^E&(D^U))+V[0]+3614090360&4294967295;A=E+($<<7&4294967295|$>>>25),$=U+(D^A&(E^D))+V[1]+3905402710&4294967295,U=A+($<<12&4294967295|$>>>20),$=D+(E^U&(A^E))+V[2]+606105819&4294967295,D=U+($<<17&4294967295|$>>>15),$=E+(A^D&(U^A))+V[3]+3250441966&4294967295,E=D+($<<22&4294967295|$>>>10),$=A+(U^E&(D^U))+V[4]+4118548399&4294967295,A=E+($<<7&4294967295|$>>>25),$=U+(D^A&(E^D))+V[5]+1200080426&4294967295,U=A+($<<12&4294967295|$>>>20),$=D+(E^U&(A^E))+V[6]+2821735955&4294967295,D=U+($<<17&4294967295|$>>>15),$=E+(A^D&(U^A))+V[7]+4249261313&4294967295,E=D+($<<22&4294967295|$>>>10),$=A+(U^E&(D^U))+V[8]+1770035416&4294967295,A=E+($<<7&4294967295|$>>>25),$=U+(D^A&(E^D))+V[9]+2336552879&4294967295,U=A+($<<12&4294967295|$>>>20),$=D+(E^U&(A^E))+V[10]+4294925233&4294967295,D=U+($<<17&4294967295|$>>>15),$=E+(A^D&(U^A))+V[11]+2304563134&4294967295,E=D+($<<22&4294967295|$>>>10),$=A+(U^E&(D^U))+V[12]+1804603682&4294967295,A=E+($<<7&4294967295|$>>>25),$=U+(D^A&(E^D))+V[13]+4254626195&4294967295,U=A+($<<12&4294967295|$>>>20),$=D+(E^U&(A^E))+V[14]+2792965006&4294967295,D=U+($<<17&4294967295|$>>>15),$=E+(A^D&(U^A))+V[15]+1236535329&4294967295,E=D+($<<22&4294967295|$>>>10),$=A+(D^U&(E^D))+V[1]+4129170786&4294967295,A=E+($<<5&4294967295|$>>>27),$=U+(E^D&(A^E))+V[6]+3225465664&4294967295,U=A+($<<9&4294967295|$>>>23),$=D+(A^E&(U^A))+V[11]+643717713&4294967295,D=U+($<<14&4294967295|$>>>18),$=E+(U^A&(D^U))+V[0]+3921069994&4294967295,E=D+($<<20&4294967295|$>>>12),$=A+(D^U&(E^D))+V[5]+3593408605&4294967295,A=E+($<<5&4294967295|$>>>27),$=U+(E^D&(A^E))+V[10]+38016083&4294967295,U=A+($<<9&4294967295|$>>>23),$=D+(A^E&(U^A))+V[15]+3634488961&4294967295,D=U+($<<14&4294967295|$>>>18),$=E+(U^A&(D^U))+V[4]+3889429448&4294967295,E=D+($<<20&4294967295|$>>>12),$=A+(D^U&(E^D))+V[9]+568446438&4294967295,A=E+($<<5&4294967295|$>>>27),$=U+(E^D&(A^E))+V[14]+3275163606&4294967295,U=A+($<<9&4294967295|$>>>23),$=D+(A^E&(U^A))+V[3]+4107603335&4294967295,D=U+($<<14&4294967295|$>>>18),$=E+(U^A&(D^U))+V[8]+1163531501&4294967295,E=D+($<<20&4294967295|$>>>12),$=A+(D^U&(E^D))+V[13]+2850285829&4294967295,A=E+($<<5&4294967295|$>>>27),$=U+(E^D&(A^E))+V[2]+4243563512&4294967295,U=A+($<<9&4294967295|$>>>23),$=D+(A^E&(U^A))+V[7]+1735328473&4294967295,D=U+($<<14&4294967295|$>>>18),$=E+(U^A&(D^U))+V[12]+2368359562&4294967295,E=D+($<<20&4294967295|$>>>12),$=A+(E^D^U)+V[5]+4294588738&4294967295,A=E+($<<4&4294967295|$>>>28),$=U+(A^E^D)+V[8]+2272392833&4294967295,U=A+($<<11&4294967295|$>>>21),$=D+(U^A^E)+V[11]+1839030562&4294967295,D=U+($<<16&4294967295|$>>>16),$=E+(D^U^A)+V[14]+4259657740&4294967295,E=D+($<<23&4294967295|$>>>9),$=A+(E^D^U)+V[1]+2763975236&4294967295,A=E+($<<4&4294967295|$>>>28),$=U+(A^E^D)+V[4]+1272893353&4294967295,U=A+($<<11&4294967295|$>>>21),$=D+(U^A^E)+V[7]+4139469664&4294967295,D=U+($<<16&4294967295|$>>>16),$=E+(D^U^A)+V[10]+3200236656&4294967295,E=D+($<<23&4294967295|$>>>9),$=A+(E^D^U)+V[13]+681279174&4294967295,A=E+($<<4&4294967295|$>>>28),$=U+(A^E^D)+V[0]+3936430074&4294967295,U=A+($<<11&4294967295|$>>>21),$=D+(U^A^E)+V[3]+3572445317&4294967295,D=U+($<<16&4294967295|$>>>16),$=E+(D^U^A)+V[6]+76029189&4294967295,E=D+($<<23&4294967295|$>>>9),$=A+(E^D^U)+V[9]+3654602809&4294967295,A=E+($<<4&4294967295|$>>>28),$=U+(A^E^D)+V[12]+3873151461&4294967295,U=A+($<<11&4294967295|$>>>21),$=D+(U^A^E)+V[15]+530742520&4294967295,D=U+($<<16&4294967295|$>>>16),$=E+(D^U^A)+V[2]+3299628645&4294967295,E=D+($<<23&4294967295|$>>>9),$=A+(D^(E|~U))+V[0]+4096336452&4294967295,A=E+($<<6&4294967295|$>>>26),$=U+(E^(A|~D))+V[7]+1126891415&4294967295,U=A+($<<10&4294967295|$>>>22),$=D+(A^(U|~E))+V[14]+2878612391&4294967295,D=U+($<<15&4294967295|$>>>17),$=E+(U^(D|~A))+V[5]+4237533241&4294967295,E=D+($<<21&4294967295|$>>>11),$=A+(D^(E|~U))+V[12]+1700485571&4294967295,A=E+($<<6&4294967295|$>>>26),$=U+(E^(A|~D))+V[3]+2399980690&4294967295,U=A+($<<10&4294967295|$>>>22),$=D+(A^(U|~E))+V[10]+4293915773&4294967295,D=U+($<<15&4294967295|$>>>17),$=E+(U^(D|~A))+V[1]+2240044497&4294967295,E=D+($<<21&4294967295|$>>>11),$=A+(D^(E|~U))+V[8]+1873313359&4294967295,A=E+($<<6&4294967295|$>>>26),$=U+(E^(A|~D))+V[15]+4264355552&4294967295,U=A+($<<10&4294967295|$>>>22),$=D+(A^(U|~E))+V[6]+2734768916&4294967295,D=U+($<<15&4294967295|$>>>17),$=E+(U^(D|~A))+V[13]+1309151649&4294967295,E=D+($<<21&4294967295|$>>>11),$=A+(D^(E|~U))+V[4]+4149444226&4294967295,A=E+($<<6&4294967295|$>>>26),$=U+(E^(A|~D))+V[11]+3174756917&4294967295,U=A+($<<10&4294967295|$>>>22),$=D+(A^(U|~E))+V[2]+718787259&4294967295,D=U+($<<15&4294967295|$>>>17),$=E+(U^(D|~A))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(D+($<<21&4294967295|$>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+U&4294967295}n.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var E=A-this.blockSize,V=this.B,D=this.h,U=0;U<A;){if(D==0)for(;U<=E;)a(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<A;)if(V[D++]=N.charCodeAt(U++),D==this.blockSize){a(this,V),D=0;break}}else for(;U<A;)if(V[D++]=N[U++],D==this.blockSize){a(this,V),D=0;break}}this.h=D,this.o+=A},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var E=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=E&255,E/=256;for(this.u(N),N=Array(16),A=E=0;4>A;++A)for(var V=0;32>V;V+=8)N[E++]=this.g[A]>>>V&255;return N};function i(N,A){var E=c;return Object.prototype.hasOwnProperty.call(E,N)?E[N]:E[N]=A(N)}function s(N,A){this.h=A;for(var E=[],V=!0,D=N.length-1;0<=D;D--){var U=N[D]|0;V&&U==A||(E[D]=U,V=!1)}this.g=E}var c={};function d(N){return-128<=N&&128>N?i(N,function(A){return new s([A|0],0>A?-1:0)}):new s([N|0],0>N?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return w(h(-N));for(var A=[],E=1,V=0;N>=E;V++)A[V]=N/E|0,E*=4294967296;return new s(A,0)}function p(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return w(p(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(A,8)),V=m,D=0;D<N.length;D+=8){var U=Math.min(8,N.length-D),$=parseInt(N.substring(D,D+U),A);8>U?(U=h(Math.pow(A,U)),V=V.j(U).add(h($))):(V=V.j(E),V=V.add(h($)))}return V}var m=d(0),y=d(1),v=d(16777216);t=s.prototype,t.m=function(){if(S(this))return-w(this).m();for(var N=0,A=1,E=0;E<this.g.length;E++){var V=this.i(E);N+=(0<=V?V:4294967296+V)*A,A*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(S(this))return"-"+w(this).toString(N);for(var A=h(Math.pow(N,6)),E=this,V="";;){var D=L(E,A).g;E=j(E,D.j(A));var U=((0<E.g.length?E.g[0]:E.h)>>>0).toString(N);if(E=D,T(E))return U+V;for(;6>U.length;)U="0"+U;V=U+V}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function S(N){return N.h==-1}t.l=function(N){return N=j(this,N),S(N)?-1:T(N)?0:1};function w(N){for(var A=N.g.length,E=[],V=0;V<A;V++)E[V]=~N.g[V];return new s(E,~N.h).add(y)}t.abs=function(){return S(this)?w(this):this},t.add=function(N){for(var A=Math.max(this.g.length,N.g.length),E=[],V=0,D=0;D<=A;D++){var U=V+(this.i(D)&65535)+(N.i(D)&65535),$=(U>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);V=$>>>16,U&=65535,$&=65535,E[D]=$<<16|U}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(N,A){return N.add(w(A))}t.j=function(N){if(T(this)||T(N))return m;if(S(this))return S(N)?w(this).j(w(N)):w(w(this).j(N));if(S(N))return w(this.j(w(N)));if(0>this.l(v)&&0>N.l(v))return h(this.m()*N.m());for(var A=this.g.length+N.g.length,E=[],V=0;V<2*A;V++)E[V]=0;for(V=0;V<this.g.length;V++)for(var D=0;D<N.g.length;D++){var U=this.i(V)>>>16,$=this.i(V)&65535,Q=N.i(D)>>>16,K=N.i(D)&65535;E[2*V+2*D]+=$*K,R(E,2*V+2*D),E[2*V+2*D+1]+=U*K,R(E,2*V+2*D+1),E[2*V+2*D+1]+=$*Q,R(E,2*V+2*D+1),E[2*V+2*D+2]+=U*Q,R(E,2*V+2*D+2)}for(V=0;V<A;V++)E[V]=E[2*V+1]<<16|E[2*V];for(V=A;V<2*A;V++)E[V]=0;return new s(E,0)};function R(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function I(N,A){this.g=N,this.h=A}function L(N,A){if(T(A))throw Error("division by zero");if(T(N))return new I(m,m);if(S(N))return A=L(w(N),A),new I(w(A.g),w(A.h));if(S(A))return A=L(N,w(A)),new I(w(A.g),A.h);if(30<N.g.length){if(S(N)||S(A))throw Error("slowDivide_ only works with positive integers.");for(var E=y,V=A;0>=V.l(N);)E=C(E),V=C(V);var D=P(E,1),U=P(V,1);for(V=P(V,2),E=P(E,2);!T(V);){var $=U.add(V);0>=$.l(N)&&(D=D.add(E),U=$),V=P(V,1),E=P(E,1)}return A=j(N,D.j(A)),new I(D,A)}for(D=m;0<=N.l(A);){for(E=Math.max(1,Math.floor(N.m()/A.m())),V=Math.ceil(Math.log(E)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),U=h(E),$=U.j(A);S($)||0<$.l(N);)E-=V,U=h(E),$=U.j(A);T(U)&&(U=y),D=D.add(U),N=j(N,$)}return new I(D,N)}t.A=function(N){return L(this,N).h},t.and=function(N){for(var A=Math.max(this.g.length,N.g.length),E=[],V=0;V<A;V++)E[V]=this.i(V)&N.i(V);return new s(E,this.h&N.h)},t.or=function(N){for(var A=Math.max(this.g.length,N.g.length),E=[],V=0;V<A;V++)E[V]=this.i(V)|N.i(V);return new s(E,this.h|N.h)},t.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),E=[],V=0;V<A;V++)E[V]=this.i(V)^N.i(V);return new s(E,this.h^N.h)};function C(N){for(var A=N.g.length+1,E=[],V=0;V<A;V++)E[V]=N.i(V)<<1|N.i(V-1)>>>31;return new s(E,N.h)}function P(N,A){var E=A>>5;A%=32;for(var V=N.g.length-E,D=[],U=0;U<V;U++)D[U]=0<A?N.i(U+E)>>>A|N.i(U+E+1)<<32-A:N.i(U+E);return new s(D,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,CV=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Pd=s}).apply(typeof OO<"u"?OO:typeof self<"u"?self:typeof window<"u"?window:{});var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OV,tm,IV,Uv,YT,RV,MV,PV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,M,F){return x==Array.prototype||x==Object.prototype||(x[M]=F.value),x};function r(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yy=="object"&&Yy];for(var M=0;M<x.length;++M){var F=x[M];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=r(this);function a(x,M){if(M)e:{var F=n;x=x.split(".");for(var ee=0;ee<x.length-1;ee++){var _e=x[ee];if(!(_e in F))break e;F=F[_e]}x=x[x.length-1],ee=F[x],M=M(ee),M!=ee&&M!=null&&e(F,x,{configurable:!0,writable:!0,value:M})}}function i(x,M){x instanceof String&&(x+="");var F=0,ee=!1,_e={next:function(){if(!ee&&F<x.length){var Le=F++;return{value:M(Le,x[Le]),done:!1}}return ee=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}a("Array.prototype.values",function(x){return x||function(){return i(this,function(M,F){return F})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(x){var M=typeof x;return M=M!="object"?M:x?Array.isArray(x)?"array":M:"null",M=="array"||M=="object"&&typeof x.length=="number"}function h(x){var M=typeof x;return M=="object"&&x!=null||M=="function"}function p(x,M,F){return x.call.apply(x.bind,arguments)}function m(x,M,F){if(!x)throw Error();if(2<arguments.length){var ee=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,ee),x.apply(M,_e)}}return function(){return x.apply(M,arguments)}}function y(x,M,F){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function v(x,M){var F=Array.prototype.slice.call(arguments,1);return function(){var ee=F.slice();return ee.push.apply(ee,arguments),x.apply(this,ee)}}function T(x,M){function F(){}F.prototype=M.prototype,x.aa=M.prototype,x.prototype=new F,x.prototype.constructor=x,x.Qb=function(ee,_e,Le){for(var pt=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)pt[Jr-2]=arguments[Jr];return M.prototype[_e].apply(ee,pt)}}function S(x){const M=x.length;if(0<M){const F=Array(M);for(let ee=0;ee<M;ee++)F[ee]=x[ee];return F}return[]}function w(x,M){for(let F=1;F<arguments.length;F++){const ee=arguments[F];if(d(ee)){const _e=x.length||0,Le=ee.length||0;x.length=_e+Le;for(let pt=0;pt<Le;pt++)x[_e+pt]=ee[pt]}else x.push(ee)}}class j{constructor(M,F){this.i=M,this.j=F,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function R(x){return/^[\s\xa0]*$/.test(x)}function I(){var x=c.navigator;return x&&(x=x.userAgent)?x:""}function L(x){return L[" "](x),x}L[" "]=function(){};var C=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function P(x,M,F){for(const ee in x)M.call(F,x[ee],ee,x)}function N(x,M){for(const F in x)M.call(void 0,x[F],F,x)}function A(x){const M={};for(const F in x)M[F]=x[F];return M}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(x,M){let F,ee;for(let _e=1;_e<arguments.length;_e++){ee=arguments[_e];for(F in ee)x[F]=ee[F];for(let Le=0;Le<E.length;Le++)F=E[Le],Object.prototype.hasOwnProperty.call(ee,F)&&(x[F]=ee[F])}}function D(x){var M=1;x=x.split(":");const F=[];for(;0<M&&x.length;)F.push(x.shift()),M--;return x.length&&F.push(x.join(":")),F}function U(x){c.setTimeout(()=>{throw x},0)}function $(){var x=pe;let M=null;return x.g&&(M=x.g,x.g=x.g.next,x.g||(x.h=null),M.next=null),M}class Q{constructor(){this.h=this.g=null}add(M,F){const ee=K.get();ee.set(M,F),this.h?this.h.next=ee:this.g=ee,this.h=ee}}var K=new j(()=>new H,x=>x.reset());class H{constructor(){this.next=this.g=this.h=null}set(M,F){this.h=M,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let J,ie=!1,pe=new Q,me=()=>{const x=c.Promise.resolve(void 0);J=()=>{x.then(X)}};var X=()=>{for(var x;x=$();){try{x.h.call(x.g)}catch(F){U(F)}var M=K;M.j(x),100>M.h&&(M.h++,x.next=M.g,M.g=x)}ie=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(x,M){this.type=x,this.g=this.target=M,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Ae=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var x=!1,M=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const F=()=>{};c.addEventListener("test",F,M),c.removeEventListener("test",F,M)}catch{}return x})();function Se(x,M){if(re.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var F=this.type=x.type,ee=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=M,M=x.relatedTarget){if(C){e:{try{L(M.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(M=null)}}else F=="mouseover"?M=x.fromElement:F=="mouseout"&&(M=x.toElement);this.relatedTarget=M,ee?(this.clientX=ee.clientX!==void 0?ee.clientX:ee.pageX,this.clientY=ee.clientY!==void 0?ee.clientY:ee.pageY,this.screenX=ee.screenX||0,this.screenY=ee.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ze[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&Se.aa.h.call(this)}}T(Se,re);var ze={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),st=0;function W(x,M,F,ee,_e){this.listener=x,this.proxy=null,this.src=M,this.type=F,this.capture=!!ee,this.ha=_e,this.key=++st,this.da=this.fa=!1}function he(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function te(x){this.src=x,this.g={},this.h=0}te.prototype.add=function(x,M,F,ee,_e){var Le=x.toString();x=this.g[Le],x||(x=this.g[Le]=[],this.h++);var pt=Ue(x,M,ee,_e);return-1<pt?(M=x[pt],F||(M.fa=!1)):(M=new W(M,this.src,Le,!!ee,_e),M.fa=F,x.push(M)),M};function ae(x,M){var F=M.type;if(F in x.g){var ee=x.g[F],_e=Array.prototype.indexOf.call(ee,M,void 0),Le;(Le=0<=_e)&&Array.prototype.splice.call(ee,_e,1),Le&&(he(M),x.g[F].length==0&&(delete x.g[F],x.h--))}}function Ue(x,M,F,ee){for(var _e=0;_e<x.length;++_e){var Le=x[_e];if(!Le.da&&Le.listener==M&&Le.capture==!!F&&Le.ha==ee)return _e}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),xt={};function it(x,M,F,ee,_e){if(Array.isArray(M)){for(var Le=0;Le<M.length;Le++)it(x,M[Le],F,ee,_e);return null}return F=wt(F),x&&x[He]?x.K(M,F,h(ee)?!!ee.capture:!1,_e):Pt(x,M,F,!1,ee,_e)}function Pt(x,M,F,ee,_e,Le){if(!M)throw Error("Invalid event type");var pt=h(_e)?!!_e.capture:!!_e,Jr=ue(x);if(Jr||(x[Ye]=Jr=new te(x)),F=Jr.add(M,F,ee,pt,Le),F.proxy)return F;if(ee=Ie(),F.proxy=ee,ee.src=x,ee.listener=F,x.addEventListener)Ae||(_e=pt),_e===void 0&&(_e=!1),x.addEventListener(M.toString(),ee,_e);else if(x.attachEvent)x.attachEvent(ft(M.toString()),ee);else if(x.addListener&&x.removeListener)x.addListener(ee);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Ie(){function x(F){return M.call(x.src,x.listener,F)}const M=Ge;return x}function Be(x,M,F,ee,_e){if(Array.isArray(M))for(var Le=0;Le<M.length;Le++)Be(x,M[Le],F,ee,_e);else ee=h(ee)?!!ee.capture:!!ee,F=wt(F),x&&x[He]?(x=x.i,M=String(M).toString(),M in x.g&&(Le=x.g[M],F=Ue(Le,F,ee,_e),-1<F&&(he(Le[F]),Array.prototype.splice.call(Le,F,1),Le.length==0&&(delete x.g[M],x.h--)))):x&&(x=ue(x))&&(M=x.g[M.toString()],x=-1,M&&(x=Ue(M,F,ee,_e)),(F=-1<x?M[x]:null)&&rt(F))}function rt(x){if(typeof x!="number"&&x&&!x.da){var M=x.src;if(M&&M[He])ae(M.i,x);else{var F=x.type,ee=x.proxy;M.removeEventListener?M.removeEventListener(F,ee,x.capture):M.detachEvent?M.detachEvent(ft(F),ee):M.addListener&&M.removeListener&&M.removeListener(ee),(F=ue(M))?(ae(F,x),F.h==0&&(F.src=null,M[Ye]=null)):he(x)}}}function ft(x){return x in xt?xt[x]:xt[x]="on"+x}function Ge(x,M){if(x.da)x=!0;else{M=new Se(M,this);var F=x.listener,ee=x.ha||x.src;x.fa&&rt(x),x=F.call(ee,M)}return x}function ue(x){return x=x[Ye],x instanceof te?x:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(x){return typeof x=="function"?x:(x[Xe]||(x[Xe]=function(M){return x.handleEvent(M)}),x[Xe])}function yt(){ne.call(this),this.i=new te(this),this.M=this,this.F=null}T(yt,ne),yt.prototype[He]=!0,yt.prototype.removeEventListener=function(x,M,F,ee){Be(this,x,M,F,ee)};function mt(x,M){var F,ee=x.F;if(ee)for(F=[];ee;ee=ee.F)F.push(ee);if(x=x.M,ee=M.type||M,typeof M=="string")M=new re(M,x);else if(M instanceof re)M.target=M.target||x;else{var _e=M;M=new re(ee,x),V(M,_e)}if(_e=!0,F)for(var Le=F.length-1;0<=Le;Le--){var pt=M.g=F[Le];_e=Vt(pt,ee,!0,M)&&_e}if(pt=M.g=x,_e=Vt(pt,ee,!0,M)&&_e,_e=Vt(pt,ee,!1,M)&&_e,F)for(Le=0;Le<F.length;Le++)pt=M.g=F[Le],_e=Vt(pt,ee,!1,M)&&_e}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var x=this.i,M;for(M in x.g){for(var F=x.g[M],ee=0;ee<F.length;ee++)he(F[ee]);delete x.g[M],x.h--}}this.F=null},yt.prototype.K=function(x,M,F,ee){return this.i.add(String(x),M,!1,F,ee)},yt.prototype.L=function(x,M,F,ee){return this.i.add(String(x),M,!0,F,ee)};function Vt(x,M,F,ee){if(M=x.i.g[String(M)],!M)return!0;M=M.concat();for(var _e=!0,Le=0;Le<M.length;++Le){var pt=M[Le];if(pt&&!pt.da&&pt.capture==F){var Jr=pt.listener,ya=pt.ha||pt.src;pt.fa&&ae(x.i,pt),_e=Jr.call(ya,ee)!==!1&&_e}}return _e&&!ee.defaultPrevented}function ur(x,M,F){if(typeof x=="function")F&&(x=y(x,F));else if(x&&typeof x.handleEvent=="function")x=y(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:c.setTimeout(x,M||0)}function qr(x){x.g=ur(()=>{x.g=null,x.i&&(x.i=!1,qr(x))},x.l);const M=x.h;x.h=null,x.m.apply(null,M)}class be extends ne{constructor(M,F){super(),this.m=M,this.l=F,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:qr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(x){ne.call(this),this.h=x,this.g={}}T(nt,ne);var Et=[];function Dt(x){P(x.g,function(M,F){this.g.hasOwnProperty(F)&&rt(M)},x),x.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Dt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=c.JSON.stringify,Ze=c.JSON.parse,ar=class{stringify(x){return c.JSON.stringify(x,void 0)}parse(x){return c.JSON.parse(x,void 0)}};function br(){}br.prototype.h=null;function Pr(x){return x.h||(x.h=x.i())}function un(){}var vr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ht(){re.call(this,"d")}T(Ht,re);function $t(){re.call(this,"c")}T($t,re);var _t={},Dr=null;function rn(){return Dr=Dr||new yt}_t.La="serverreachability";function Hr(x){re.call(this,_t.La,x)}T(Hr,re);function Lr(x){const M=rn();mt(M,new Hr(M))}_t.STAT_EVENT="statevent";function dn(x,M){re.call(this,_t.STAT_EVENT,x),this.stat=M}T(dn,re);function or(x){const M=rn();mt(M,new dn(M,x))}_t.Ma="timingevent";function ma(x,M){re.call(this,_t.Ma,x),this.size=M}T(ma,re);function hn(x,M){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){x()},M)}function On(){this.g=!0}On.prototype.xa=function(){this.g=!1};function ti(x,M,F,ee,_e,Le){x.info(function(){if(x.g)if(Le)for(var pt="",Jr=Le.split("&"),ya=0;ya<Jr.length;ya++){var gr=Jr[ya].split("=");if(1<gr.length){var qa=gr[0];gr=gr[1];var Ha=qa.split("_");pt=2<=Ha.length&&Ha[1]=="type"?pt+(qa+"="+gr+"&"):pt+(qa+"=redacted&")}}else pt=null;else pt=Le;return"XMLHTTP REQ ("+ee+") [attempt "+_e+"]: "+M+`
`+F+`
`+pt})}function Tr(x,M,F,ee,_e,Le,pt){x.info(function(){return"XMLHTTP RESP ("+ee+") [ attempt "+_e+"]: "+M+`
`+F+`
`+Le+" "+pt})}function fn(x,M,F,ee){x.info(function(){return"XMLHTTP TEXT ("+M+"): "+Wn(x,F)+(ee?" "+ee:"")})}function ri(x,M){x.info(function(){return"TIMEOUT: "+M})}On.prototype.info=function(){};function Wn(x,M){if(!x.g)return M;if(!M)return null;try{var F=JSON.parse(M);if(F){for(x=0;x<F.length;x++)if(Array.isArray(F[x])){var ee=F[x];if(!(2>ee.length)){var _e=ee[1];if(Array.isArray(_e)&&!(1>_e.length)){var Le=_e[0];if(Le!="noop"&&Le!="stop"&&Le!="close")for(var pt=1;pt<_e.length;pt++)_e[pt]=""}}}}return Bt(F)}catch{return M}}var Yr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tn;function ni(){}T(ni,br),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Tn=new ni;function Fa(x,M,F,ee){this.j=x,this.i=M,this.l=F,this.R=ee||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}var ls={},gi={};function Tt(x,M,F){x.L=1,x.v=ve(Nt(M)),x.m=F,x.P=!0,fe(x,null)}function fe(x,M){x.F=Date.now(),Xt(x),x.A=Nt(x.v);var F=x.A,ee=x.R;Array.isArray(ee)||(ee=[String(ee)]),hs(F.i,"t",ee),x.C=0,F=x.j.J,x.h=new Ni,x.g=V1(x.j,F?M:null,!x.m),0<x.O&&(x.M=new be(y(x.Y,x,x.g),x.O)),M=x.U,F=x.g,ee=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Et[0]=_e.toString()),_e=Et);for(var Le=0;Le<_e.length;Le++){var pt=it(F,_e[Le],ee||M.handleEvent,!1,M.h||M);if(!pt)break;M.g[pt.key]=pt}M=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,M)):(x.u="GET",x.g.ea(x.A,x.u,null,M)),Lr(),ti(x.i,x.u,x.A,x.l,x.R,x.m)}Fa.prototype.ca=function(x){x=x.target;const M=this.M;M&&Ei(x)==3?M.j():this.Y(x)},Fa.prototype.Y=function(x){try{if(x==this.g)e:{const Ha=Ei(this.g);var M=this.g.Ba();const _c=this.g.Z();if(!(3>Ha)&&(Ha!=3||this.g&&(this.h.h||this.g.oa()||Fu(this.g)))){this.J||Ha!=4||M==7||(M==8||0>=_c?Lr(3):Lr(2)),nn(this);var F=this.g.Z();this.X=F;t:if(Je(this)){var ee=Fu(this.g);x="";var _e=ee.length,Le=Ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Gr(this);var pt="";break t}this.h.i=new c.TextDecoder}for(M=0;M<_e;M++)this.h.h=!0,x+=this.h.i.decode(ee[M],{stream:!(Le&&M==_e-1)});ee.length=0,this.h.g+=x,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=F==200,Tr(this.i,this.u,this.A,this.l,this.R,Ha,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Jr,ya=this.g;if((Jr=ya.g?ya.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Jr)){var gr=Jr;break t}}gr=null}if(F=gr)fn(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kr(this,F);else{this.o=!1,this.s=3,or(12),mn(this),Gr(this);break e}}if(this.P){F=!0;let Vi;for(;!this.J&&this.C<pt.length;)if(Vi=ct(this,pt),Vi==gi){Ha==4&&(this.s=4,or(14),F=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Vi==ls){this.s=4,or(15),fn(this.i,this.l,pt,"[Invalid Chunk]"),F=!1;break}else fn(this.i,this.l,Vi,null),kr(this,Vi);if(Je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ha!=4||pt.length!=0||this.h.h||(this.s=1,or(16),F=!1),this.o=this.o&&F,!F)fn(this.i,this.l,pt,"[Invalid Chunked Response]"),mn(this),Gr(this);else if(0<pt.length&&!this.W){this.W=!0;var qa=this.j;qa.g==this&&qa.ba&&!qa.M&&(qa.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),Xf(qa),qa.M=!0,or(11))}}else fn(this.i,this.l,pt,null),kr(this,pt);Ha==4&&mn(this),this.o&&!this.J&&(Ha==4?$1(this.j,this):(this.o=!1,Xt(this)))}else R1(this.g),F==400&&0<pt.indexOf("Unknown SID")?(this.s=3,or(12)):(this.s=0,or(13)),mn(this),Gr(this)}}}catch{}finally{}};function Je(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function ct(x,M){var F=x.C,ee=M.indexOf(`
`,F);return ee==-1?gi:(F=Number(M.substring(F,ee)),isNaN(F)?ls:(ee+=1,ee+F>M.length?gi:(M=M.slice(ee,ee+F),x.C=ee+F,M)))}Fa.prototype.cancel=function(){this.J=!0,mn(this)};function Xt(x){x.S=Date.now()+x.I,dr(x,x.I)}function dr(x,M){if(x.B!=null)throw Error("WatchDog timer not null");x.B=hn(y(x.ba,x),M)}function nn(x){x.B&&(c.clearTimeout(x.B),x.B=null)}Fa.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(ri(this.i,this.A),this.L!=2&&(Lr(),or(17)),mn(this),this.s=2,Gr(this)):dr(this,this.S-x)};function Gr(x){x.j.G==0||x.J||$1(x.j,x)}function mn(x){nn(x);var M=x.M;M&&typeof M.ma=="function"&&M.ma(),x.M=null,Dt(x.U),x.g&&(M=x.g,x.g=null,M.abort(),M.ma())}function kr(x,M){try{var F=x.j;if(F.G!=0&&(F.g==x||us(F.h,x))){if(!x.K&&us(F.h,x)&&F.G==3){try{var ee=F.Da.g.parse(M)}catch{ee=null}if(Array.isArray(ee)&&ee.length==3){var _e=ee;if(_e[0]==0){e:if(!F.u){if(F.g)if(F.g.F+3e3<x.F)wc(F),bc(F);else break e;Qf(F),or(18)}}else F.za=_e[1],0<F.za-F.T&&37500>_e[2]&&F.F&&F.v==0&&!F.C&&(F.C=hn(y(F.Za,F),6e3));if(1>=ll(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else ul(F,11)}else if((x.K||F.g==x)&&wc(F),!R(M))for(_e=F.Da.g.parse(M),M=0;M<_e.length;M++){let gr=_e[M];if(F.T=gr[0],gr=gr[1],F.G==2)if(gr[0]=="c"){F.K=gr[1],F.ia=gr[2];const qa=gr[3];qa!=null&&(F.la=qa,F.j.info("VER="+F.la));const Ha=gr[4];Ha!=null&&(F.Aa=Ha,F.j.info("SVER="+F.Aa));const _c=gr[5];_c!=null&&typeof _c=="number"&&0<_c&&(ee=1.5*_c,F.L=ee,F.j.info("backChannelRequestTimeoutMs_="+ee)),ee=F;const Vi=x.g;if(Vi){const Gu=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gu){var Le=ee.h;Le.g||Gu.indexOf("spdy")==-1&&Gu.indexOf("quic")==-1&&Gu.indexOf("h2")==-1||(Le.j=Le.l,Le.g=new Set,Le.h&&(ds(Le,Le.h),Le.h=null))}if(ee.D){const dl=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(ee.ya=dl,oe(ee.I,ee.D,dl))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-x.F,F.j.info("Handshake RTT: "+F.R+"ms")),ee=F;var pt=x;if(ee.qa=z1(ee,ee.J?ee.ia:null,ee.W),pt.K){ja(ee.h,pt);var Jr=pt,ya=ee.L;ya&&(Jr.I=ya),Jr.B&&(nn(Jr),Xt(Jr)),ee.g=pt}else L1(ee);0<F.i.length&&w0(F)}else gr[0]!="stop"&&gr[0]!="close"||ul(F,7);else F.G==3&&(gr[0]=="stop"||gr[0]=="close"?gr[0]=="stop"?ul(F,7):Wf(F):gr[0]!="noop"&&F.l&&F.l.ta(gr),F.v=0)}}Lr(4)}catch{}}var Rs=class{constructor(x,M){this.g=x,this.map=M}};function cs(x){this.l=x||10,c.PerformanceNavigationTiming?(x=c.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function so(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function ll(x){return x.h?1:x.g?x.g.size:0}function us(x,M){return x.h?x.h==M:x.g?x.g.has(M):!1}function ds(x,M){x.g?x.g.add(M):x.h=M}function ja(x,M){x.h&&x.h==M?x.h=null:x.g&&x.g.has(M)&&x.g.delete(M)}cs.prototype.cancel=function(){if(this.i=ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function ga(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let M=x.i;for(const F of x.g.values())M=M.concat(F.D);return M}return S(x.i)}function q(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(d(x)){for(var M=[],F=x.length,ee=0;ee<F;ee++)M.push(x[ee]);return M}M=[],F=0;for(ee in x)M[F++]=x[ee];return M}function xe(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(d(x)||typeof x=="string"){var M=[];x=x.length;for(var F=0;F<x;F++)M.push(F);return M}M=[],F=0;for(const ee in x)M[F++]=ee;return M}}}function Te(x,M){if(x.forEach&&typeof x.forEach=="function")x.forEach(M,void 0);else if(d(x)||typeof x=="string")Array.prototype.forEach.call(x,M,void 0);else for(var F=xe(x),ee=q(x),_e=ee.length,Le=0;Le<_e;Le++)M.call(void 0,ee[Le],F&&F[Le],x)}var Ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(x,M){if(x){x=x.split("&");for(var F=0;F<x.length;F++){var ee=x[F].indexOf("="),_e=null;if(0<=ee){var Le=x[F].substring(0,ee);_e=x[F].substring(ee+1)}else Le=x[F];M(Le,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Ot(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof Ot){this.h=x.h,Yt(this,x.j),this.o=x.o,this.g=x.g,wr(this,x.s),this.l=x.l;var M=x.i,F=new Nn;F.i=M.i,M.g&&(F.g=new Map(M.g),F.h=M.h),Zr(this,F),this.m=x.m}else x&&(M=String(x).match(Ne))?(this.h=!1,Yt(this,M[1]||"",!0),this.o=$e(M[2]||""),this.g=$e(M[3]||"",!0),wr(this,M[4]),this.l=$e(M[5]||"",!0),Zr(this,M[6]||"",!0),this.m=$e(M[7]||"")):(this.h=!1,this.i=new Nn(null,this.h))}Ot.prototype.toString=function(){var x=[],M=this.j;M&&x.push(Me(M,tr,!0),":");var F=this.g;return(F||M=="file")&&(x.push("//"),(M=this.o)&&x.push(Me(M,tr,!0),"@"),x.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.s,F!=null&&x.push(":",String(F))),(F=this.l)&&(this.g&&F.charAt(0)!="/"&&x.push("/"),x.push(Me(F,F.charAt(0)=="/"?An:Qt,!0))),(F=this.i.toString())&&x.push("?",F),(F=this.m)&&x.push("#",Me(F,Ms)),x.join("")};function Nt(x){return new Ot(x)}function Yt(x,M,F){x.j=F?$e(M,!0):M,x.j&&(x.j=x.j.replace(/:$/,""))}function wr(x,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);x.s=M}else x.s=null}function Zr(x,M,F){M instanceof Nn?(x.i=M,C1(x.i,x.h)):(F||(M=Me(M,ka)),x.i=new Nn(M,x.h))}function oe(x,M,F){x.i.set(M,F)}function ve(x){return oe(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function $e(x,M){return x?M?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Me(x,M,F){return typeof x=="string"?(x=encodeURI(x).replace(M,ut),F&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function ut(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var tr=/[#\/\?@]/g,Qt=/[#\?:]/g,An=/[#\?]/g,ka=/[#\?@]/g,Ms=/#/g;function Nn(x,M){this.h=this.g=null,this.i=x||null,this.j=!!M}function gn(x){x.g||(x.g=new Map,x.h=0,x.i&&ht(x.i,function(M,F){x.add(decodeURIComponent(M.replace(/\+/g," ")),F)}))}t=Nn.prototype,t.add=function(x,M){gn(this),this.i=null,x=yi(this,x);var F=this.g.get(x);return F||this.g.set(x,F=[]),F.push(M),this.h+=1,this};function ko(x,M){gn(x),M=yi(x,M),x.g.has(M)&&(x.i=null,x.h-=x.g.get(M).length,x.g.delete(M))}function Cr(x,M){return gn(x),M=yi(x,M),x.g.has(M)}t.forEach=function(x,M){gn(this),this.g.forEach(function(F,ee){F.forEach(function(_e){x.call(M,_e,ee,this)},this)},this)},t.na=function(){gn(this);const x=Array.from(this.g.values()),M=Array.from(this.g.keys()),F=[];for(let ee=0;ee<M.length;ee++){const _e=x[ee];for(let Le=0;Le<_e.length;Le++)F.push(M[ee])}return F},t.V=function(x){gn(this);let M=[];if(typeof x=="string")Cr(this,x)&&(M=M.concat(this.g.get(yi(this,x))));else{x=Array.from(this.g.values());for(let F=0;F<x.length;F++)M=M.concat(x[F])}return M},t.set=function(x,M){return gn(this),this.i=null,x=yi(this,x),Cr(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[M]),this.h+=1,this},t.get=function(x,M){return x?(x=this.V(x),0<x.length?String(x[0]):M):M};function hs(x,M,F){ko(x,M),0<F.length&&(x.i=null,x.g.set(yi(x,M),S(F)),x.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],M=Array.from(this.g.keys());for(var F=0;F<M.length;F++){var ee=M[F];const Le=encodeURIComponent(String(ee)),pt=this.V(ee);for(ee=0;ee<pt.length;ee++){var _e=Le;pt[ee]!==""&&(_e+="="+encodeURIComponent(String(pt[ee]))),x.push(_e)}}return this.i=x.join("&")};function yi(x,M){return M=String(M),x.j&&(M=M.toLowerCase()),M}function C1(x,M){M&&!x.j&&(gn(x),x.i=null,x.g.forEach(function(F,ee){var _e=ee.toLowerCase();ee!=_e&&(ko(this,ee),hs(this,_e,F))},x)),x.j=M}function Hf(x,M){const F=new On;if(c.Image){const ee=new Image;ee.onload=v(zi,F,"TestLoadImage: loaded",!0,M,ee),ee.onerror=v(zi,F,"TestLoadImage: error",!1,M,ee),ee.onabort=v(zi,F,"TestLoadImage: abort",!1,M,ee),ee.ontimeout=v(zi,F,"TestLoadImage: timeout",!1,M,ee),c.setTimeout(function(){ee.ontimeout&&ee.ontimeout()},1e4),ee.src=x}else M(!1)}function O1(x,M){const F=new On,ee=new AbortController,_e=setTimeout(()=>{ee.abort(),zi(F,"TestPingServer: timeout",!1,M)},1e4);fetch(x,{signal:ee.signal}).then(Le=>{clearTimeout(_e),Le.ok?zi(F,"TestPingServer: ok",!0,M):zi(F,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(_e),zi(F,"TestPingServer: error",!1,M)})}function zi(x,M,F,ee,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),ee(F)}catch{}}function oo(){this.g=new ar}function Gf(x,M,F){const ee=F||"";try{Te(x,function(_e,Le){let pt=_e;h(_e)&&(pt=Bt(_e)),M.push(ee+Le+"="+encodeURIComponent(pt))})}catch(_e){throw M.push(ee+"type="+encodeURIComponent("_badmap")),_e}}function Co(x){this.l=x.Ub||null,this.j=x.eb||!1}T(Co,br),Co.prototype.g=function(){return new fs(this.l,this.j)},Co.prototype.i=(function(x){return function(){return x}})({});function fs(x,M){yt.call(this),this.D=x,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(fs,yt),t=fs.prototype,t.open=function(x,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=M,this.readyState=1,gc(this)},t.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(M.body=x),(this.D||c).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,gc(this)),this.g&&(this.readyState=3,gc(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;x0(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function x0(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}t.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var M=x.value?x.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!x.done}))&&(this.response=this.responseText+=M)}x.done?Oo(this):gc(this),this.readyState==3&&x0(this)}},t.Ra=function(x){this.g&&(this.response=this.responseText=x,Oo(this))},t.Qa=function(x){this.g&&(this.response=x,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(x){x.readyState=4,x.l=null,x.j=null,x.v=null,gc(x)}t.setRequestHeader=function(x,M){this.u.append(x,M)},t.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],M=this.h.entries();for(var F=M.next();!F.done;)F=F.value,x.push(F[0]+": "+F[1]),F=M.next();return x.join(`\r
`)};function gc(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function zu(x){let M="";return P(x,function(F,ee){M+=ee,M+=":",M+=F,M+=`\r
`}),M}function yc(x,M,F){e:{for(ee in F){var ee=!1;break e}ee=!0}ee||(F=zu(F),typeof x=="string"?F!=null&&encodeURIComponent(String(F)):oe(x,M,F))}function Ln(x){yt.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ln,yt);var vi=/^https?$/i,cl=["POST","PUT"];t=Ln.prototype,t.Ha=function(x){this.J=x},t.ea=function(x,M,F,ee){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);M=M?M.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tn.g(),this.v=this.o?Pr(this.o):Pr(Tn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(M,String(x),!0),this.B=!1}catch(Le){Vu(this,Le);return}if(x=F||"",F=new Map(this.headers),ee)if(Object.getPrototypeOf(ee)===Object.prototype)for(var _e in ee)F.set(_e,ee[_e]);else if(typeof ee.keys=="function"&&typeof ee.get=="function")for(const Le of ee.keys())F.set(Le,ee.get(Le));else throw Error("Unknown input type for opt_headers: "+String(ee));ee=Array.from(F.keys()).find(Le=>Le.toLowerCase()=="content-type"),_e=c.FormData&&x instanceof c.FormData,!(0<=Array.prototype.indexOf.call(cl,M,void 0))||ee||_e||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Le,pt]of F)this.g.setRequestHeader(Le,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b0(this),this.u=!0,this.g.send(x),this.u=!1}catch(Le){Vu(this,Le)}};function Vu(x,M){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=M,x.m=5,vc(x),xc(x)}function vc(x){x.A||(x.A=!0,mt(x,"complete"),mt(x,"error"))}t.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,mt(this,"complete"),mt(this,"abort"),xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xc(this,!0)),Ln.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?I1(this):this.bb())},t.bb=function(){I1(this)};function I1(x){if(x.h&&typeof s<"u"&&(!x.v[1]||Ei(x)!=4||x.Z()!=2)){if(x.u&&Ei(x)==4)ur(x.Ea,0,x);else if(mt(x,"readystatechange"),Ei(x)==4){x.h=!1;try{const pt=x.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var F;if(!(F=M)){var ee;if(ee=pt===0){var _e=String(x.D).match(Ne)[1]||null;!_e&&c.self&&c.self.location&&(_e=c.self.location.protocol.slice(0,-1)),ee=!vi.test(_e?_e.toLowerCase():"")}F=ee}if(F)mt(x,"complete"),mt(x,"success");else{x.m=6;try{var Le=2<Ei(x)?x.g.statusText:""}catch{Le=""}x.l=Le+" ["+x.Z()+"]",vc(x)}}finally{xc(x)}}}}function xc(x,M){if(x.g){b0(x);const F=x.g,ee=x.v[0]?()=>{}:null;x.g=null,x.v=null,M||mt(x,"ready");try{F.onreadystatechange=ee}catch{}}}function b0(x){x.I&&(c.clearTimeout(x.I),x.I=null)}t.isActive=function(){return!!this.g};function Ei(x){return x.g?x.g.readyState:0}t.Z=function(){try{return 2<Ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(x){if(this.g){var M=this.g.responseText;return x&&M.indexOf(x)==0&&(M=M.substring(x.length)),Ze(M)}};function Fu(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function R1(x){const M={};x=(x.g&&2<=Ei(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let ee=0;ee<x.length;ee++){if(R(x[ee]))continue;var F=D(x[ee]);const _e=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const Le=M[_e]||[];M[_e]=Le,Le.push(F)}N(M,function(ee){return ee.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qu(x,M,F){return F&&F.internalChannelParams&&F.internalChannelParams[x]||M}function M1(x){this.Aa=0,this.i=[],this.j=new On,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qu("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qu("baseRetryDelayMs",5e3,x),this.cb=qu("retryDelaySeedMs",1e4,x),this.Wa=qu("forwardChannelMaxRetries",2,x),this.wa=qu("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(x&&x.concurrentRequestLimit),this.Da=new oo,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=M1.prototype,t.la=8,t.G=1,t.connect=function(x,M,F,ee){or(0),this.W=x,this.H=M||{},F&&ee!==void 0&&(this.H.OSID=F,this.H.OAID=ee),this.F=this.X,this.I=z1(this,null,this.W),w0(this)};function Wf(x){if(P1(x),x.G==3){var M=x.U++,F=Nt(x.I);if(oe(F,"SID",x.K),oe(F,"RID",M),oe(F,"TYPE","terminate"),Hu(x,F),M=new Fa(x,x.j,M),M.L=2,M.v=ve(Nt(F)),F=!1,c.navigator&&c.navigator.sendBeacon)try{F=c.navigator.sendBeacon(M.v.toString(),"")}catch{}!F&&c.Image&&(new Image().src=M.v,F=!0),F||(M.g=V1(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Xt(M)}Yf(x)}function bc(x){x.g&&(Xf(x),x.g.cancel(),x.g=null)}function P1(x){bc(x),x.u&&(c.clearTimeout(x.u),x.u=null),wc(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&c.clearTimeout(x.s),x.s=null)}function w0(x){if(!so(x.h)&&!x.s){x.s=!0;var M=x.Ga;J||me(),ie||(J(),ie=!0),pe.add(M,x),x.B=0}}function Rw(x,M){return ll(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=M.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=hn(y(x.Ga,x,M),U1(x,x.B)),x.B++,!0)}t.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Fa(this,this.j,x);let Le=this.o;if(this.S&&(Le?(Le=A(Le),V(Le,this.S)):Le=this.S),this.m!==null||this.O||(_e.H=Le,Le=null),this.P)e:{for(var M=0,F=0;F<this.i.length;F++){t:{var ee=this.i[F];if("__data__"in ee.map&&(ee=ee.map.__data__,typeof ee=="string")){ee=ee.length;break t}ee=void 0}if(ee===void 0)break;if(M+=ee,4096<M){M=F;break e}if(M===4096||F===this.i.length-1){M=F+1;break e}}M=1e3}else M=1e3;M=Kf(this,_e,M),F=Nt(this.I),oe(F,"RID",x),oe(F,"CVER",22),this.D&&oe(F,"X-HTTP-Session-Id",this.D),Hu(this,F),Le&&(this.O?M="headers="+encodeURIComponent(String(zu(Le)))+"&"+M:this.m&&yc(F,this.m,Le)),ds(this.h,_e),this.Ua&&oe(F,"TYPE","init"),this.P?(oe(F,"$req",M),oe(F,"SID","null"),_e.T=!0,Tt(_e,F,null)):Tt(_e,F,M),this.G=2}}else this.G==3&&(x?D1(this,x):this.i.length==0||so(this.h)||D1(this))};function D1(x,M){var F;M?F=M.l:F=x.U++;const ee=Nt(x.I);oe(ee,"SID",x.K),oe(ee,"RID",F),oe(ee,"AID",x.T),Hu(x,ee),x.m&&x.o&&yc(ee,x.m,x.o),F=new Fa(x,x.j,F,x.B+1),x.m===null&&(F.H=x.o),M&&(x.i=M.D.concat(x.i)),M=Kf(x,F,1e3),F.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),ds(x.h,F),Tt(F,ee,M)}function Hu(x,M){x.H&&P(x.H,function(F,ee){oe(M,ee,F)}),x.l&&Te({},function(F,ee){oe(M,ee,F)})}function Kf(x,M,F){F=Math.min(x.i.length,F);var ee=x.l?y(x.l.Na,x.l,x):null;e:{var _e=x.i;let Le=-1;for(;;){const pt=["count="+F];Le==-1?0<F?(Le=_e[0].g,pt.push("ofs="+Le)):Le=0:pt.push("ofs="+Le);let Jr=!0;for(let ya=0;ya<F;ya++){let gr=_e[ya].g;const qa=_e[ya].map;if(gr-=Le,0>gr)Le=Math.max(0,_e[ya].g-100),Jr=!1;else try{Gf(qa,pt,"req"+gr+"_")}catch{ee&&ee(qa)}}if(Jr){ee=pt.join("&");break e}}}return x=x.i.splice(0,F),M.D=x,ee}function L1(x){if(!x.g&&!x.u){x.Y=1;var M=x.Fa;J||me(),ie||(J(),ie=!0),pe.add(M,x),x.v=0}}function Qf(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=hn(y(x.Fa,x),U1(x,x.v)),x.v++,!0)}t.Fa=function(){if(this.u=null,B1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=hn(y(this.ab,this),x)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,or(10),bc(this),B1(this))};function Xf(x){x.A!=null&&(c.clearTimeout(x.A),x.A=null)}function B1(x){x.g=new Fa(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var M=Nt(x.qa);oe(M,"RID","rpc"),oe(M,"SID",x.K),oe(M,"AID",x.T),oe(M,"CI",x.F?"0":"1"),!x.F&&x.ja&&oe(M,"TO",x.ja),oe(M,"TYPE","xmlhttp"),Hu(x,M),x.m&&x.o&&yc(M,x.m,x.o),x.L&&(x.g.I=x.L);var F=x.g;x=x.ia,F.L=1,F.v=ve(Nt(M)),F.m=null,F.P=!0,fe(F,x)}t.Za=function(){this.C!=null&&(this.C=null,bc(this),Qf(this),or(19))};function wc(x){x.C!=null&&(c.clearTimeout(x.C),x.C=null)}function $1(x,M){var F=null;if(x.g==M){wc(x),Xf(x),x.g=null;var ee=2}else if(us(x.h,M))F=M.D,ja(x.h,M),ee=1;else return;if(x.G!=0){if(M.o)if(ee==1){F=M.m?M.m.length:0,M=Date.now()-M.F;var _e=x.B;ee=rn(),mt(ee,new ma(ee,F)),w0(x)}else L1(x);else if(_e=M.s,_e==3||_e==0&&0<M.X||!(ee==1&&Rw(x,M)||ee==2&&Qf(x)))switch(F&&0<F.length&&(M=x.h,M.i=M.i.concat(F)),_e){case 1:ul(x,5);break;case 4:ul(x,10);break;case 3:ul(x,6);break;default:ul(x,2)}}}function U1(x,M){let F=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(F*=2),F*M}function ul(x,M){if(x.j.info("Error code "+M),M==2){var F=y(x.fb,x),ee=x.Xa;const _e=!ee;ee=new Ot(ee||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yt(ee,"https"),ve(ee),_e?Hf(ee.toString(),F):O1(ee.toString(),F)}else or(2);x.G=0,x.l&&x.l.sa(M),Yf(x),P1(x)}t.fb=function(x){x?(this.j.info("Successfully pinged google.com"),or(2)):(this.j.info("Failed to ping google.com"),or(1))};function Yf(x){if(x.G=0,x.ka=[],x.l){const M=ga(x.h);(M.length!=0||x.i.length!=0)&&(w(x.ka,M),w(x.ka,x.i),x.h.i.length=0,S(x.i),x.i.length=0),x.l.ra()}}function z1(x,M,F){var ee=F instanceof Ot?Nt(F):new Ot(F);if(ee.g!="")M&&(ee.g=M+"."+ee.g),wr(ee,ee.s);else{var _e=c.location;ee=_e.protocol,M=M?M+"."+_e.hostname:_e.hostname,_e=+_e.port;var Le=new Ot(null);ee&&Yt(Le,ee),M&&(Le.g=M),_e&&wr(Le,_e),F&&(Le.l=F),ee=Le}return F=x.D,M=x.ya,F&&M&&oe(ee,F,M),oe(ee,"VER",x.la),Hu(x,ee),ee}function V1(x,M,F){if(M&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=x.Ca&&!x.pa?new Ln(new Co({eb:F})):new Ln(x.pa),M.Ha(x.J),M}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function F1(){}t=F1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function S0(){}S0.prototype.g=function(x,M){return new ji(x,M)};function ji(x,M){yt.call(this),this.g=new M1(M),this.l=x,this.h=M&&M.messageUrlParams||null,x=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(x?x["X-WebChannel-Content-Type"]=M.messageContentType:x={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(x?x["X-WebChannel-Client-Profile"]=M.va:x={"X-WebChannel-Client-Profile":M.va}),this.g.S=x,(x=M&&M.Sb)&&!R(x)&&(this.g.m=x),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!R(M)&&(this.g.D=M,x=this.h,x!==null&&M in x&&(x=this.h,M in x&&delete x[M])),this.j=new Sc(this)}T(ji,yt),ji.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ji.prototype.close=function(){Wf(this.g)},ji.prototype.o=function(x){var M=this.g;if(typeof x=="string"){var F={};F.__data__=x,x=F}else this.u&&(F={},F.__data__=Bt(x),x=F);M.i.push(new Rs(M.Ya++,x)),M.G==3&&w0(M)},ji.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,ji.aa.N.call(this)};function q1(x){Ht.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var M=x.__sm__;if(M){e:{for(const F in M){x=F;break e}x=void 0}(this.i=x)&&(x=this.i,M=M!==null&&x in M?M[x]:void 0),this.data=M}else this.data=x}T(q1,Ht);function H1(){$t.call(this),this.status=1}T(H1,$t);function Sc(x){this.g=x}T(Sc,F1),Sc.prototype.ua=function(){mt(this.g,"a")},Sc.prototype.ta=function(x){mt(this.g,new q1(x))},Sc.prototype.sa=function(x){mt(this.g,new H1)},Sc.prototype.ra=function(){mt(this.g,"b")},S0.prototype.createWebChannel=S0.prototype.g,ji.prototype.send=ji.prototype.o,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,PV=function(){return new S0},MV=function(){return rn()},RV=_t,YT={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yr.NO_ERROR=0,Yr.TIMEOUT=8,Yr.HTTP_ERROR=6,Uv=Yr,pn.COMPLETE="complete",IV=pn,un.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",yt.prototype.listen=yt.prototype.K,tm=un,Ln.prototype.listenOnce=Ln.prototype.L,Ln.prototype.getLastError=Ln.prototype.Ka,Ln.prototype.getLastErrorCode=Ln.prototype.Ba,Ln.prototype.getStatus=Ln.prototype.Z,Ln.prototype.getResponseJson=Ln.prototype.Oa,Ln.prototype.getResponseText=Ln.prototype.oa,Ln.prototype.send=Ln.prototype.ea,Ln.prototype.setWithCredentials=Ln.prototype.Ha,OV=Ln}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});const IO="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Si=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Si.UNAUTHENTICATED=new Si(null),Si.GOOGLE_CREDENTIALS=new Si("google-credentials-uid"),Si.FIRST_PARTY=new Si("first-party-uid"),Si.MOCK_USER=new Si("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new g8("@firebase/firestore");function lh(){return Vd.logLevel}function tt(t,...e){if(Vd.logLevel<=Er.DEBUG){const r=e.map(C8);Vd.debug(`Firestore (${Af}): ${t}`,...r)}}function ua(t,...e){if(Vd.logLevel<=Er.ERROR){const r=e.map(C8);Vd.error(`Firestore (${Af}): ${t}`,...r)}}function Dm(t,...e){if(Vd.logLevel<=Er.WARN){const r=e.map(C8);Vd.warn(`Firestore (${Af}): ${t}`,...r)}}function C8(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(r){return JSON.stringify(r)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t="Unexpected state"){const e=`FIRESTORE (${Af}) INTERNAL ASSERTION FAILED: `+t;throw ua(e),new Error(e)}function Rt(t,e){t||jt()}function It(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends No{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.promise=new Promise(((e,r)=>{this.resolve=e,this.reject=r}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yte{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable((()=>r(Si.UNAUTHENTICATED)))}shutdown(){}}class Jte{constructor(e){this.t=e,this.currentUser=Si.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Rt(this.o===void 0);let n=this.i;const a=d=>this.i!==n?(n=this.i,r(d)):Promise.resolve();let i=new So;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new So,e.enqueueRetryable((()=>a(this.currentUser)))};const s=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},c=d=>{tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new So)}}),0),s()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((n=>this.i!==e?(tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Rt(typeof n.accessToken=="string"),new Yte(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string"),new Si(e)}}class ere{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Si.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tre{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new ere(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable((()=>r(Si.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rre{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nre{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){Rt(this.o===void 0);const n=i=>{i.error!=null&&tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const s=i.token!==this.R;return this.R=i.token,tt("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>n(i)))};const a=i=>{tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>a(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?a(i):tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((r=>r?(Rt(typeof r.token=="string"),this.R=r.token,new rre(r.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function are(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const a=are(40);for(let i=0;i<a.length;++i)n.length<20&&a[i]<r&&(n+=e.charAt(a[i]%e.length))}return n}}function sr(t,e){return t<e?-1:t>e?1:0}function Rh(t,e,r){return t.length===e.length&&t.every(((n,a)=>r(n,e[a])))}function LV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new dt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new dt(Ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new dt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(Ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Yn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sr(this.nanoseconds,e.nanoseconds):sr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new Yn(0,0))}static max(){return new Lt(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,r,n){r===void 0?r=0:r>e.length&&jt(),n===void 0?n=e.length-r:n>e.length-r&&jt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return Lm.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Lm?e.forEach((n=>{r.push(n)})):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let a=0;a<n;a++){const i=e.get(a),s=r.get(a);if(i<s)return-1;if(i>s)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ur extends Lm{construct(e,r,n){return new Ur(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new dt(Ve.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter((a=>a.length>0)))}return new Ur(r)}static emptyPath(){return new Ur([])}}const ire=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xn extends Lm{construct(e,r,n){return new Xn(e,r,n)}static isValidIdentifier(e){return ire.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xn(["__name__"])}static fromServerFormat(e){const r=[];let n="",a=0;const i=()=>{if(n.length===0)throw new dt(Ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let s=!1;for(;a<e.length;){const c=e[a];if(c==="\\"){if(a+1===e.length)throw new dt(Ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new dt(Ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,a+=2}else c==="`"?(s=!s,a++):c!=="."||s?(n+=c,a++):(i(),a++)}if(i(),s)throw new dt(Ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xn(r)}static emptyPath(){return new Xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.path=e}static fromPath(e){return new bt(Ur.fromString(e))}static fromName(e){return new bt(Ur.fromString(e).popFirst(5))}static empty(){return new bt(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ur.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ur.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new bt(new Ur(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,r,n,a){this.indexId=e,this.collectionGroup=r,this.fields=n,this.indexState=a}}function ZT(t){return t.fields.find((e=>e.kind===2))}function vd(t){return t.fields.filter((e=>e.kind!==2))}ux.UNKNOWN_ID=-1;class zv{constructor(e,r){this.fieldPath=e,this.kind=r}}class Bm{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Bm(0,Cs.min())}}function BV(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,a=Lt.fromTimestamp(n===1e9?new Yn(r+1,0):new Yn(r,n));return new Cs(a,bt.empty(),e)}function $V(t){return new Cs(t.readTime,t.key,-1)}class Cs{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Cs(Lt.min(),bt.empty(),-1)}static max(){return new Cs(Lt.max(),bt.empty(),-1)}}function O8(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=bt.comparator(t.documentKey,e.documentKey),r!==0?r:sr(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){if(t.code!==Ve.FAILED_PRECONDITION||t.message!==UV)throw t;tt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)}),(r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)}))}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ce(((n,a)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,a)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,a)}}))}toPromise(){return new Promise(((e,r)=>{this.next(e,r)}))}wrapUserFunction(e){try{const r=e();return r instanceof Ce?r:Ce.resolve(r)}catch(r){return Ce.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction((()=>e(r))):Ce.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction((()=>e(r))):Ce.reject(r)}static resolve(e){return new Ce(((r,n)=>{r(e)}))}static reject(e){return new Ce(((r,n)=>{n(e)}))}static waitFor(e){return new Ce(((r,n)=>{let a=0,i=0,s=!1;e.forEach((c=>{++a,c.next((()=>{++i,s&&i===a&&r()}),(d=>n(d)))})),s=!0,i===a&&r()}))}static or(e){let r=Ce.resolve(!1);for(const n of e)r=r.next((a=>a?Ce.resolve(a):n()));return r}static forEach(e,r){const n=[];return e.forEach(((a,i)=>{n.push(r.call(this,a,i))})),this.waitFor(n)}static mapArray(e,r){return new Ce(((n,a)=>{const i=e.length,s=new Array(i);let c=0;for(let d=0;d<i;d++){const h=d;r(e[h]).next((p=>{s[h]=p,++c,c===i&&n(s)}),(p=>a(p)))}}))}static doWhile(e,r){return new Ce(((n,a)=>{const i=()=>{e()===!0?r().next((()=>{i()}),a):n()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new So,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new um(e,r.error)):this.V.resolve()},this.transaction.onerror=n=>{const a=I8(n.target.error);this.V.reject(new um(e,a))}}static open(e,r,n,a){try{return new n2(r,e.transaction(a,n))}catch(i){throw new um(r,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(tt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const r=this.transaction.objectStore(e);return new ore(r)}}class xu{constructor(e,r,n){this.name=e,this.version=r,this.p=n,xu.S(Ba())===12.2&&ua("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tt("SimpleDb","Removing database:",e),wd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Wz())return!1;if(xu.v())return!0;const e=Ba(),r=xu.S(e),n=0<r&&r<10,a=VV(e),i=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(tt("SimpleDb","Opening database:",this.name),this.db=await new Promise(((r,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=i=>{const s=i.target.result;r(s)},a.onblocked=()=>{n(new um(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=i=>{const s=i.target.error;s.name==="VersionError"?n(new dt(Ve.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new dt(Ve.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new um(e,s))},a.onupgradeneeded=i=>{tt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const s=i.target.result;this.p.O(s,a.transaction,i.oldVersion,this.version).next((()=>{tt("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=r=>this.N(r)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}async runTransaction(e,r,n,a){const i=r==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=n2.open(this.db,e,i?"readonly":"readwrite",n),d=a(c).next((h=>(c.g(),h))).catch((h=>(c.abort(h),Ce.reject(h)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,h=d.name!=="FirebaseError"&&s<3;if(tt("SimpleDb","Transaction failed with error:",d.message,"Retrying:",h),this.close(),!h)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function VV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class sre{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return wd(this.B.delete())}}class um extends dt{constructor(e,r){super(Ve.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Iu(t){return t.name==="IndexedDbTransactionError"}class ore{constructor(e){this.store=e}put(e,r){let n;return r!==void 0?(tt("SimpleDb","PUT",this.store.name,e,r),n=this.store.put(r,e)):(tt("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wd(n)}add(e){return tt("SimpleDb","ADD",this.store.name,e,e),wd(this.store.add(e))}get(e){return wd(this.store.get(e)).next((r=>(r===void 0&&(r=null),tt("SimpleDb","GET",this.store.name,e,r),r)))}delete(e){return tt("SimpleDb","DELETE",this.store.name,e),wd(this.store.delete(e))}count(){return tt("SimpleDb","COUNT",this.store.name),wd(this.store.count())}U(e,r){const n=this.options(e,r),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const i=a.getAll(n.range);return new Ce(((s,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{s(d.target.result)}}))}{const i=this.cursor(n),s=[];return this.W(i,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,r){const n=this.store.getAll(e,r===null?void 0:r);return new Ce(((a,i)=>{n.onerror=s=>{i(s.target.error)},n.onsuccess=s=>{a(s.target.result)}}))}j(e,r){tt("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,r);n.H=!1;const a=this.cursor(n);return this.W(a,((i,s,c)=>c.delete()))}J(e,r){let n;r?n=e:(n={},r=e);const a=this.cursor(n);return this.W(a,r)}Y(e){const r=this.cursor({});return new Ce(((n,a)=>{r.onerror=i=>{const s=I8(i.target.error);a(s)},r.onsuccess=i=>{const s=i.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,r){const n=[];return new Ce(((a,i)=>{e.onerror=s=>{i(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void a();const d=new sre(c),h=r(c.primaryKey,c.value,d);if(h instanceof Ce){const p=h.catch((m=>(d.done(),Ce.reject(m))));n.push(p)}d.isDone?a():d.K===null?c.continue():c.continue(d.K)}})).next((()=>Ce.waitFor(n)))}options(e,r){let n;return e!==void 0&&(typeof e=="string"?n=e:r=e),{index:n,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,r):n.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function wd(t){return new Ce(((e,r)=>{t.onsuccess=n=>{const a=n.target.result;e(a)},t.onerror=n=>{const a=I8(n.target.error);r(a)}}))}let RO=!1;function I8(t){const e=xu.S(Ba());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(r)>=0){const n=new dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return RO||(RO=!0,setTimeout((()=>{throw n}),0)),n}}return t}class lre{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){tt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{tt("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(r){Iu(r)?tt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):await Ou(r)}await this.X(6e4)}))}}class cre{constructor(e,r){this.localStore=e,this.persistence=r}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(r=>this.te(r,e)))}te(e,r){const n=new Set;let a=r,i=!0;return Ce.doWhile((()=>i===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return tt("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,a).next((c=>{a-=c,n.add(s)}));i=!1})))).next((()=>r-a))}ne(e,r,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next((a=>this.localStore.localDocuments.getNextDocuments(e,r,a,n).next((i=>{const s=i.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(a,i))).next((c=>(tt("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,r,c)))).next((()=>s.size))}))))}re(e,r){let n=e;return r.changes.forEach(((a,i)=>{const s=$V(i);O8(s,n)>0&&(n=s)})),new Cs(n.readTime,n.documentKey,Math.max(r.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}es.oe=-1;function Xg(t){return t==null}function $m(t){return t===0&&1/t==-1/0}function FV(t){return typeof t=="number"&&Number.isInteger(t)&&!$m(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=MO(e)),e=ure(t.get(r),e);return MO(e)}function ure(t,e){let r=e;const n=t.length;for(let a=0;a<n;a++){const i=t.charAt(a);switch(i){case"\0":r+="";break;case"":r+="";break;default:r+=i}}return r}function MO(t){return t+""}function Bo(t){const e=t.length;if(Rt(e>=2),e===2)return Rt(t.charAt(0)===""&&t.charAt(1)===""),Ur.emptyPath();const r=e-2,n=[];let a="";for(let i=0;i<e;){const s=t.indexOf("",i);switch((s<0||s>r)&&jt(),t.charAt(s+1)){case"":const c=t.substring(i,s);let d;a.length===0?d=c:(a+=c,d=a,a=""),n.push(d);break;case"":a+=t.substring(i,s),a+="\0";break;case"":a+=t.substring(i,s+1);break;default:jt()}i=s+2}return new Ur(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t,e){return[t,Li(e)]}function qV(t,e,r){return[t,Li(e),r]}const dre={},hre=["prefixPath","collectionGroup","readTime","documentId"],fre=["prefixPath","collectionGroup","documentId"],pre=["collectionGroup","readTime","prefixPath","documentId"],mre=["canonicalId","targetId"],gre=["targetId","path"],yre=["path","targetId"],vre=["collectionId","parent"],xre=["indexId","uid"],bre=["uid","sequenceNumber"],wre=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sre=["indexId","uid","orderedDocumentKey"],_re=["userId","collectionPath","documentId"],Tre=["userId","collectionPath","largestBatchId"],Are=["userId","collectionGroup","largestBatchId"],HV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Nre=[...HV,"documentOverlays"],GV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WV=GV,R8=[...WV,"indexConfiguration","indexState","indexEntries"],Ere=R8,jre=[...R8,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT extends zV{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function za(t,e){const r=It(t);return xu.F(r._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function u0(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function KV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,r){this.comparator=e,this.root=r||ui.EMPTY}insert(e,r){return new Dn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((r,n)=>(e(r,n),!1)))}toString(){const e=[];return this.inorderTraversal(((r,n)=>(e.push(`${r}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zy(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zy(this.root,e,this.comparator,!0)}}class Zy{constructor(e,r,n,a){this.isReverse=a,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&a&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,r,n,a,i){this.key=e,this.value=r,this.color=n??ui.RED,this.left=a??ui.EMPTY,this.right=i??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,a,i){return new ui(e??this.key,r??this.value,n??this.color,a??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let a=this;const i=n(e,a.key);return a=i<0?a.copy(null,null,null,a.left.insert(e,r,n),null):i===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(e,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,a=this;if(r(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(e,a.key)===0){if(a.right.isEmpty())return ui.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw jt();const e=this.left.check();if(e!==this.right.check())throw jt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw jt()}get value(){throw jt()}get color(){throw jt()}get left(){throw jt()}get right(){throw jt()}copy(e,r,n,a,i){return this}insert(e,r,n){return new ui(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((r,n)=>(e(r),!1)))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;r(a.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new LO(this.data.getIterator())}getIteratorFrom(e){return new LO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach((n=>{r=r.add(n)})),r}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(this.comparator(a,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((r=>{e.push(r)})),e}toString(){const e=[];return this.forEach((r=>e.push(r))),"SortedSet("+e.toString()+")"}copy(e){const r=new Sn(this.comparator);return r.data=e,r}}class LO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Y0(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.fields=e,e.sort(Xn.comparator)}static empty(){return new ts([])}unionWith(e){let r=new Sn(Xn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ts(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Rh(this.fields,e.fields,((r,n)=>r.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.binaryString=e}static fromBase64String(e){const r=(function(a){try{return atob(a)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new QV("Invalid base64 string: "+i):i}})(e);return new pa(r)}static fromUint8Array(e){const r=(function(a){let i="";for(let s=0;s<a.length;++s)i+=String.fromCharCode(a[s]);return i})(e);return new pa(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(r){return btoa(r)})(this.binaryString)}toUint8Array(){return(function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pa.EMPTY_BYTE_STRING=new pa("");const kre=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ec(t){if(Rt(!!t),typeof t=="string"){let e=0;const r=kre.exec(t);if(Rt(!!r),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Fn(t.seconds),nanos:Fn(t.nanos)}}function Fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tu(t){return typeof t=="string"?pa.fromBase64String(t):pa.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function P8(t){const e=t.mapValue.fields.__previous_value__;return M8(e)?P8(e):e}function Um(t){const e=ec(t.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cre{constructor(e,r,n,a,i,s,c,d,h){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=h}}class Fd{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Fd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fv={nullValue:"NULL_VALUE"};function qd(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?M8(t)?4:XV(t)?9007199254740991:a2(t)?10:11:jt()}function Qo(t,e){if(t===e)return!0;const r=qd(t);if(r!==qd(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Um(t).isEqual(Um(e));case 3:return(function(a,i){if(typeof a.timestampValue=="string"&&typeof i.timestampValue=="string"&&a.timestampValue.length===i.timestampValue.length)return a.timestampValue===i.timestampValue;const s=ec(a.timestampValue),c=ec(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(a,i){return Tu(a.bytesValue).isEqual(Tu(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(a,i){return Fn(a.geoPointValue.latitude)===Fn(i.geoPointValue.latitude)&&Fn(a.geoPointValue.longitude)===Fn(i.geoPointValue.longitude)})(t,e);case 2:return(function(a,i){if("integerValue"in a&&"integerValue"in i)return Fn(a.integerValue)===Fn(i.integerValue);if("doubleValue"in a&&"doubleValue"in i){const s=Fn(a.doubleValue),c=Fn(i.doubleValue);return s===c?$m(s)===$m(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return Rh(t.arrayValue.values||[],e.arrayValue.values||[],Qo);case 10:case 11:return(function(a,i){const s=a.mapValue.fields||{},c=i.mapValue.fields||{};if(DO(s)!==DO(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!Qo(s[d],c[d])))return!1;return!0})(t,e);default:return jt()}}function zm(t,e){return(t.values||[]).find((r=>Qo(r,e)))!==void 0}function Au(t,e){if(t===e)return 0;const r=qd(t),n=qd(e);if(r!==n)return sr(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return sr(t.booleanValue,e.booleanValue);case 2:return(function(i,s){const c=Fn(i.integerValue||i.doubleValue),d=Fn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(t,e);case 3:return BO(t.timestampValue,e.timestampValue);case 4:return BO(Um(t),Um(e));case 5:return sr(t.stringValue,e.stringValue);case 6:return(function(i,s){const c=Tu(i),d=Tu(s);return c.compareTo(d)})(t.bytesValue,e.bytesValue);case 7:return(function(i,s){const c=i.split("/"),d=s.split("/");for(let h=0;h<c.length&&h<d.length;h++){const p=sr(c[h],d[h]);if(p!==0)return p}return sr(c.length,d.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,s){const c=sr(Fn(i.latitude),Fn(s.latitude));return c!==0?c:sr(Fn(i.longitude),Fn(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return $O(t.arrayValue,e.arrayValue);case 10:return(function(i,s){var c,d,h,p;const m=i.fields||{},y=s.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=sr(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return S!==0?S:$O(v,T)})(t.mapValue,e.mapValue);case 11:return(function(i,s){if(i===ou.mapValue&&s===ou.mapValue)return 0;if(i===ou.mapValue)return 1;if(s===ou.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=s.fields||{},p=Object.keys(h);d.sort(),p.sort();for(let m=0;m<d.length&&m<p.length;++m){const y=sr(d[m],p[m]);if(y!==0)return y;const v=Au(c[d[m]],h[p[m]]);if(v!==0)return v}return sr(d.length,p.length)})(t.mapValue,e.mapValue);default:throw jt()}}function BO(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return sr(t,e);const r=ec(t),n=ec(e),a=sr(r.seconds,n.seconds);return a!==0?a:sr(r.nanos,n.nanos)}function $O(t,e){const r=t.values||[],n=e.values||[];for(let a=0;a<r.length&&a<n.length;++a){const i=Au(r[a],n[a]);if(i)return i}return sr(r.length,n.length)}function Mh(t){return eA(t)}function eA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(r){const n=ec(r);return`time(${n.seconds},${n.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(r){return Tu(r).toBase64()})(t.bytesValue):"referenceValue"in t?(function(r){return bt.fromName(r).toString()})(t.referenceValue):"geoPointValue"in t?(function(r){return`geo(${r.latitude},${r.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(r){let n="[",a=!0;for(const i of r.values||[])a?a=!1:n+=",",n+=eA(i);return n+"]"})(t.arrayValue):"mapValue"in t?(function(r){const n=Object.keys(r.fields||{}).sort();let a="{",i=!0;for(const s of n)i?i=!1:a+=",",a+=`${s}:${eA(r.fields[s])}`;return a+"}"})(t.mapValue):jt()}function Vm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tA(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function UO(t){return!!t&&"nullValue"in t}function zO(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qv(t){return!!t&&"mapValue"in t}function a2(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function dm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return u0(t.mapValue.fields,((r,n)=>e.mapValue.fields[r]=dm(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=dm(t.arrayValue.values[r]);return e}return Object.assign({},t)}function XV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const YV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ore(t){return"nullValue"in t?Fv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vm(Fd.empty(),bt.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?a2(t)?YV:{mapValue:{}}:jt()}function Ire(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vm(Fd.empty(),bt.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?YV:"mapValue"in t?a2(t)?{mapValue:{}}:ou:jt()}function VO(t,e){const r=Au(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function FO(t,e){const r=Au(t.value,e.value);return r!==0?r:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!qv(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(r)}setAll(e){let r=Xn.emptyPath(),n={},a=[];e.forEach(((s,c)=>{if(!r.isImmediateParentOf(c)){const d=this.getFieldsMap(r);this.applyChanges(d,n,a),n={},a=[],r=c.popLast()}s?n[c.lastSegment()]=dm(s):a.push(c.lastSegment())}));const i=this.getFieldsMap(r);this.applyChanges(i,n,a)}delete(e){const r=this.field(e.popLast());qv(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=r.mapValue.fields[e.get(n)];qv(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(e,r,n){u0(r,((a,i)=>e[a]=i));for(const a of n)delete e[a]}clone(){return new hi(dm(this.value))}}function ZV(t){const e=[];return u0(t.fields,((r,n)=>{const a=new Xn([r]);if(qv(n)){const i=ZV(n.mapValue).fields;if(i.length===0)e.push(a);else for(const s of i)e.push(a.child(s))}else e.push(a)})),new ts(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,r,n,a,i,s,c){this.key=e,this.documentType=r,this.version=n,this.readTime=a,this.createTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new qn(e,0,Lt.min(),Lt.min(),Lt.min(),hi.empty(),0)}static newFoundDocument(e,r,n,a){return new qn(e,1,r,Lt.min(),n,a,0)}static newNoDocument(e,r){return new qn(e,2,r,Lt.min(),Lt.min(),hi.empty(),0)}static newUnknownDocument(e,r){return new qn(e,3,r,Lt.min(),Lt.min(),hi.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r){this.position=e,this.inclusive=r}}function qO(t,e,r){let n=0;for(let a=0;a<t.position.length;a++){const i=e[a],s=t.position[a];if(i.field.isKeyField()?n=bt.comparator(bt.fromName(s.referenceValue),r.key):n=Au(s,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function HO(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Qo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,r="asc"){this.field=e,this.dir=r}}function Rre(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JV=class{};class jr extends JV{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new Mre(e,r,n):r==="array-contains"?new Lre(e,n):r==="in"?new iF(e,n):r==="not-in"?new Bre(e,n):r==="array-contains-any"?new $re(e,n):new jr(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new Pre(e,n):new Dre(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Au(r,this.value)):r!==null&&qd(this.value)===qd(r)&&this.matchesComparison(Au(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends JV{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new cn(e,r)}matches(e){return Dh(this)?this.filters.find((r=>!r.matches(e)))===void 0:this.filters.find((r=>r.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,r)=>e.concat(r.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Dh(t){return t.op==="and"}function rA(t){return t.op==="or"}function D8(t){return eF(t)&&Dh(t)}function eF(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function nA(t){if(t instanceof jr)return t.field.canonicalString()+t.op.toString()+Mh(t.value);if(D8(t))return t.filters.map((e=>nA(e))).join(",");{const e=t.filters.map((r=>nA(r))).join(",");return`${t.op}(${e})`}}function tF(t,e){return t instanceof jr?(function(n,a){return a instanceof jr&&n.op===a.op&&n.field.isEqual(a.field)&&Qo(n.value,a.value)})(t,e):t instanceof cn?(function(n,a){return a instanceof cn&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce(((i,s,c)=>i&&tF(s,a.filters[c])),!0):!1})(t,e):void jt()}function rF(t,e){const r=t.filters.concat(e);return cn.create(r,t.op)}function nF(t){return t instanceof jr?(function(r){return`${r.field.canonicalString()} ${r.op} ${Mh(r.value)}`})(t):t instanceof cn?(function(r){return r.op.toString()+" {"+r.getFilters().map(nF).join(" ,")+"}"})(t):"Filter"}class Mre extends jr{constructor(e,r,n){super(e,r,n),this.key=bt.fromName(n.referenceValue)}matches(e){const r=bt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Pre extends jr{constructor(e,r){super(e,"in",r),this.keys=aF("in",r)}matches(e){return this.keys.some((r=>r.isEqual(e.key)))}}class Dre extends jr{constructor(e,r){super(e,"not-in",r),this.keys=aF("not-in",r)}matches(e){return!this.keys.some((r=>r.isEqual(e.key)))}}function aF(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map((n=>bt.fromName(n.referenceValue)))}class Lre extends jr{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Fm(r)&&zm(r.arrayValue,this.value)}}class iF extends jr{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&zm(this.value.arrayValue,r)}}class Bre extends jr{constructor(e,r){super(e,"not-in",r)}matches(e){if(zm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!zm(this.value.arrayValue,r)}}class $re extends jr{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Fm(r)||!r.arrayValue.values)&&r.arrayValue.values.some((n=>zm(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ure{constructor(e,r=null,n=[],a=[],i=null,s=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=i,this.startAt=s,this.endAt=c,this.ue=null}}function aA(t,e=null,r=[],n=[],a=null,i=null,s=null){return new Ure(t,e,r,n,a,i,s)}function Hd(t){const e=It(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map((n=>nA(n))).join(","),r+="|ob:",r+=e.orderBy.map((n=>(function(i){return i.field.canonicalString()+i.dir})(n))).join(","),Xg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map((n=>Mh(n))).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map((n=>Mh(n))).join(",")),e.ue=r}return e.ue}function Yg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Rre(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!tF(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HO(t.startAt,e.startAt)&&HO(t.endAt,e.endAt)}function dx(t){return bt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function hx(t,e){return t.filters.filter((r=>r instanceof jr&&r.field.isEqual(e)))}function GO(t,e,r){let n=Fv,a=!0;for(const i of hx(t,e)){let s=Fv,c=!0;switch(i.op){case"<":case"<=":s=Ore(i.value);break;case"==":case"in":case">=":s=i.value;break;case">":s=i.value,c=!1;break;case"!=":case"not-in":s=Fv}VO({value:n,inclusive:a},{value:s,inclusive:c})<0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];VO({value:n,inclusive:a},{value:s,inclusive:r.inclusive})<0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}function WO(t,e,r){let n=ou,a=!0;for(const i of hx(t,e)){let s=ou,c=!0;switch(i.op){case">=":case">":s=Ire(i.value),c=!1;break;case"==":case"in":case"<=":s=i.value;break;case"<":s=i.value,c=!1;break;case"!=":case"not-in":s=ou}FO({value:n,inclusive:a},{value:s,inclusive:c})>0&&(n=s,a=c)}if(r!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const s=r.position[i];FO({value:n,inclusive:a},{value:s,inclusive:r.inclusive})>0&&(n=s,a=r.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r=null,n=[],a=[],i=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=i,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sF(t,e,r,n,a,i,s,c){return new Nf(t,e,r,n,a,i,s,c)}function Zg(t){return new Nf(t)}function KO(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function oF(t){return t.collectionGroup!==null}function hm(t){const e=It(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Sn(Xn.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((h=>{h.isInequality()&&(c=c.add(h.field))}))})),c})(e).forEach((i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new qm(i,n))})),r.has(Xn.keyField().canonicalString())||e.ce.push(new qm(Xn.keyField(),n))}return e.ce}function Es(t){const e=It(t);return e.le||(e.le=zre(e,hm(t))),e.le}function zre(t,e){if(t.limitType==="F")return aA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((a=>{const i=a.dir==="desc"?"asc":"desc";return new qm(a.field,i)}));const r=t.endAt?new Ph(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Ph(t.startAt.position,t.startAt.inclusive):null;return aA(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function iA(t,e){const r=t.filters.concat([e]);return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function fx(t,e,r){return new Nf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function i2(t,e){return Yg(Es(t),Es(e))&&t.limitType===e.limitType}function lF(t){return`${Hd(Es(t))}|lt:${t.limitType}`}function ch(t){return`Query(target=${(function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map((a=>nF(a))).join(", ")}]`),Xg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map((a=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(a))).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map((a=>Mh(a))).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map((a=>Mh(a))).join(",")),`Target(${n})`})(Es(t))}; limitType=${t.limitType})`}function Jg(t,e){return e.isFoundDocument()&&(function(n,a){const i=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):bt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)})(t,e)&&(function(n,a){for(const i of hm(n))if(!i.field.isKeyField()&&a.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(n,a){for(const i of n.filters)if(!i.matches(a))return!1;return!0})(t,e)&&(function(n,a){return!(n.startAt&&!(function(s,c,d){const h=qO(s,c,d);return s.inclusive?h<=0:h<0})(n.startAt,hm(n),a)||n.endAt&&!(function(s,c,d){const h=qO(s,c,d);return s.inclusive?h>=0:h>0})(n.endAt,hm(n),a))})(t,e)}function cF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uF(t){return(e,r)=>{let n=!1;for(const a of hm(t)){const i=Vre(a,e,r);if(i!==0)return i;n=n||a.field.isKeyField()}return 0}}function Vre(t,e,r){const n=t.field.isKeyField()?bt.comparator(e.key,r.key):(function(i,s,c){const d=s.data.field(i),h=c.data.field(i);return d!==null&&h!==null?Au(d,h):jt()})(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return jt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[a,i]of n)if(this.equalsFn(a,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<a.length;i++)if(this.equalsFn(a[i][0],e))return void(a[i]=[e,r]);a.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){u0(this.inner,((r,n)=>{for(const[a,i]of n)e(a,i)}))}isEmpty(){return KV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fre=new Dn(bt.comparator);function As(){return Fre}const dF=new Dn(bt.comparator);function rm(...t){let e=dF;for(const r of t)e=e.insert(r.key,r);return e}function hF(t){let e=dF;return t.forEach(((r,n)=>e=e.insert(r,n.overlayedDocument))),e}function $o(){return fm()}function fF(){return fm()}function fm(){return new Ru((t=>t.toString()),((t,e)=>t.isEqual(e)))}const qre=new Dn(bt.comparator),Hre=new Sn(bt.comparator);function yr(...t){let e=Hre;for(const r of t)e=e.add(r);return e}const Gre=new Sn(sr);function L8(){return Gre}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$m(e)?"-0":e}}function pF(t){return{integerValue:""+t}}function mF(t,e){return FV(e)?pF(e):B8(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this._=void 0}}function Wre(t,e,r){return t instanceof Hm?(function(a,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return i&&M8(i)&&(i=P8(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}})(r,e):t instanceof Gd?yF(t,e):t instanceof Lh?vF(t,e):(function(a,i){const s=gF(a,i),c=QO(s)+QO(a.Pe);return tA(s)&&tA(a.Pe)?pF(c):B8(a.serializer,c)})(t,e)}function Kre(t,e,r){return t instanceof Gd?yF(t,e):t instanceof Lh?vF(t,e):r}function gF(t,e){return t instanceof Bh?(function(n){return tA(n)||(function(i){return!!i&&"doubleValue"in i})(n)})(e)?e:{integerValue:0}:null}class Hm extends s2{}class Gd extends s2{constructor(e){super(),this.elements=e}}function yF(t,e){const r=xF(e);for(const n of t.elements)r.some((a=>Qo(a,n)))||r.push(n);return{arrayValue:{values:r}}}class Lh extends s2{constructor(e){super(),this.elements=e}}function vF(t,e){let r=xF(e);for(const n of t.elements)r=r.filter((a=>!Qo(a,n)));return{arrayValue:{values:r}}}class Bh extends s2{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function QO(t){return Fn(t.integerValue||t.doubleValue)}function xF(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,r){this.field=e,this.transform=r}}function Qre(t,e){return t.field.isEqual(e.field)&&(function(n,a){return n instanceof Gd&&a instanceof Gd||n instanceof Lh&&a instanceof Lh?Rh(n.elements,a.elements,Qo):n instanceof Bh&&a instanceof Bh?Qo(n.Pe,a.Pe):n instanceof Hm&&a instanceof Hm})(t.transform,e.transform)}class Xre{constructor(e,r){this.version=e,this.transformResults=r}}class da{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new da}static exists(e){return new da(void 0,e)}static updateTime(e){return new da(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class o2{}function bF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new e1(t.key,da.none()):new Ef(t.key,t.data,da.none());{const r=t.data,n=hi.empty();let a=new Sn(Xn.comparator);for(let i of e.fields)if(!a.has(i)){let s=r.field(i);s===null&&i.length>1&&(i=i.popLast(),s=r.field(i)),s===null?n.delete(i):n.set(i,s),a=a.add(i)}return new uc(t.key,n,new ts(a.toArray()),da.none())}}function Yre(t,e,r){t instanceof Ef?(function(a,i,s){const c=a.value.clone(),d=YO(a.fieldTransforms,i,s.transformResults);c.setAll(d),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,r):t instanceof uc?(function(a,i,s){if(!Hv(a.precondition,i))return void i.convertToUnknownDocument(s.version);const c=YO(a.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(wF(a)),d.setAll(c),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(t,e,r):(function(a,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,r)}function pm(t,e,r,n){return t instanceof Ef?(function(i,s,c,d){if(!Hv(i.precondition,s))return c;const h=i.value.clone(),p=ZO(i.fieldTransforms,d,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,r,n):t instanceof uc?(function(i,s,c,d){if(!Hv(i.precondition,s))return c;const h=ZO(i.fieldTransforms,d,s),p=s.data;return p.setAll(wF(i)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(t,e,r,n):(function(i,s,c){return Hv(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,r)}function Zre(t,e){let r=null;for(const n of t.fieldTransforms){const a=e.data.field(n.field),i=gF(n.transform,a||null);i!=null&&(r===null&&(r=hi.empty()),r.set(n.field,i))}return r||null}function XO(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Rh(n,a,((i,s)=>Qre(i,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ef extends o2{constructor(e,r,n,a=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class uc extends o2{constructor(e,r,n,a,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function wF(t){const e=new Map;return t.fieldMask.fields.forEach((r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}})),e}function YO(t,e,r){const n=new Map;Rt(t.length===r.length);for(let a=0;a<r.length;a++){const i=t[a],s=i.transform,c=e.data.field(i.field);n.set(i.field,Kre(s,c,r[a]))}return n}function ZO(t,e,r){const n=new Map;for(const a of t){const i=a.transform,s=r.data.field(a.field);n.set(a.field,Wre(i,s,e))}return n}class e1 extends o2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class U8 extends o2{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,r,n,a){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const i=this.mutations[a];i.key.isEqual(e.key)&&Yre(i,e,n[a])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=pm(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=fF();return this.mutations.forEach((a=>{const i=e.get(a.key),s=i.overlayedDocument;let c=this.applyToLocalView(s,i.mutatedFields);c=r.has(a.key)?null:c;const d=bF(s,c);d!==null&&n.set(a.key,d),s.isValidDocument()||s.convertToNoDocument(Lt.min())})),n}keys(){return this.mutations.reduce(((e,r)=>e.add(r.key)),yr())}isEqual(e){return this.batchId===e.batchId&&Rh(this.mutations,e.mutations,((r,n)=>XO(r,n)))&&Rh(this.baseMutations,e.baseMutations,((r,n)=>XO(r,n)))}}class V8{constructor(e,r,n,a){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(e,r,n){Rt(e.mutations.length===n.length);let a=(function(){return qre})();const i=e.mutations;for(let s=0;s<i.length;s++)a=a.insert(i[s].key,n[s].version);return new V8(e,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sa,Ir;function SF(t){switch(t){default:return jt();case Ve.CANCELLED:case Ve.UNKNOWN:case Ve.DEADLINE_EXCEEDED:case Ve.RESOURCE_EXHAUSTED:case Ve.INTERNAL:case Ve.UNAVAILABLE:case Ve.UNAUTHENTICATED:return!1;case Ve.INVALID_ARGUMENT:case Ve.NOT_FOUND:case Ve.ALREADY_EXISTS:case Ve.PERMISSION_DENIED:case Ve.FAILED_PRECONDITION:case Ve.ABORTED:case Ve.OUT_OF_RANGE:case Ve.UNIMPLEMENTED:case Ve.DATA_LOSS:return!0}}function _F(t){if(t===void 0)return ua("GRPC error has no .code"),Ve.UNKNOWN;switch(t){case Sa.OK:return Ve.OK;case Sa.CANCELLED:return Ve.CANCELLED;case Sa.UNKNOWN:return Ve.UNKNOWN;case Sa.DEADLINE_EXCEEDED:return Ve.DEADLINE_EXCEEDED;case Sa.RESOURCE_EXHAUSTED:return Ve.RESOURCE_EXHAUSTED;case Sa.INTERNAL:return Ve.INTERNAL;case Sa.UNAVAILABLE:return Ve.UNAVAILABLE;case Sa.UNAUTHENTICATED:return Ve.UNAUTHENTICATED;case Sa.INVALID_ARGUMENT:return Ve.INVALID_ARGUMENT;case Sa.NOT_FOUND:return Ve.NOT_FOUND;case Sa.ALREADY_EXISTS:return Ve.ALREADY_EXISTS;case Sa.PERMISSION_DENIED:return Ve.PERMISSION_DENIED;case Sa.FAILED_PRECONDITION:return Ve.FAILED_PRECONDITION;case Sa.ABORTED:return Ve.ABORTED;case Sa.OUT_OF_RANGE:return Ve.OUT_OF_RANGE;case Sa.UNIMPLEMENTED:return Ve.UNIMPLEMENTED;case Sa.DATA_LOSS:return Ve.DATA_LOSS;default:return jt()}}(Ir=Sa||(Sa={}))[Ir.OK=0]="OK",Ir[Ir.CANCELLED=1]="CANCELLED",Ir[Ir.UNKNOWN=2]="UNKNOWN",Ir[Ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ir[Ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ir[Ir.NOT_FOUND=5]="NOT_FOUND",Ir[Ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ir[Ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ir[Ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ir[Ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ir[Ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ir[Ir.ABORTED=10]="ABORTED",Ir[Ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ir[Ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ir[Ir.INTERNAL=13]="INTERNAL",Ir[Ir.UNAVAILABLE=14]="UNAVAILABLE",Ir[Ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ene(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tne=new Pd([4294967295,4294967295],0);function JO(t){const e=ene().encode(t),r=new CV;return r.update(e),new Uint8Array(r.digest())}function eI(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Pd([r,n],0),new Pd([a,i],0)]}class q8{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new nm(`Invalid padding: ${r}`);if(n<0)throw new nm(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new nm(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Pd.fromNumber(this.Ie)}Ee(e,r,n){let a=e.add(r.multiply(Pd.fromNumber(n)));return a.compare(tne)===1&&(a=new Pd([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=JO(e),[n,a]=eI(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);if(!this.de(s))return!1}return!0}static create(e,r,n){const a=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new q8(i,a,r);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const r=JO(e),[n,a]=eI(r);for(let i=0;i<this.hashCount;i++){const s=this.Ee(n,a,i);this.Ae(s)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,r,n,a,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const a=new Map;return a.set(e,r1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new t1(Lt.min(),a,new Dn(sr),As(),yr())}}class r1{constructor(e,r,n,a,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new r1(n,r,yr(),yr(),yr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,r,n,a){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=a}}class TF{constructor(e,r){this.targetId=e,this.me=r}}class AF{constructor(e,r,n=pa.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=a}}class tI{constructor(){this.fe=0,this.ge=nI(),this.pe=pa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yr(),r=yr(),n=yr();return this.ge.forEach(((a,i)=>{switch(i){case 0:e=e.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:jt()}})),new r1(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=nI()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Rt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rne{constructor(e){this.Le=e,this.Be=new Map,this.ke=As(),this.qe=rI(),this.Qe=new Dn(sr)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,(r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:jt()}}))}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach(((n,a)=>{this.ze(a)&&r(a)}))}He(e){const r=e.targetId,n=e.me.count,a=this.Je(r);if(a){const i=a.target;if(dx(i))if(n===0){const s=new bt(i.path);this.Ue(r,s,qn.newNoDocument(s,Lt.min()))}else Rt(n===1);else{const s=this.Ye(r);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(r);const h=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,h)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:i=0}=r;let s,c;try{s=Tu(n).toUint8Array()}catch(d){if(d instanceof QV)return Dm("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new q8(s,a,i)}catch(d){return Dm(d instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let a=0;return n.forEach((i=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,i,null),a++)})),a}rt(e){const r=new Map;this.Be.forEach(((i,s)=>{const c=this.Je(s);if(c){if(i.current&&dx(c.target)){const d=new bt(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,qn.newNoDocument(d,e))}i.be&&(r.set(s,i.ve()),i.Ce())}}));let n=yr();this.qe.forEach(((i,s)=>{let c=!0;s.forEachWhile((d=>{const h=this.Je(d);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(i))})),this.ke.forEach(((i,s)=>s.setReadTime(e)));const a=new t1(e,r,this.Qe,this.ke,n);return this.ke=As(),this.qe=rI(),this.Qe=new Dn(sr),a}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,r)?a.Fe(r,1):a.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new tI,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Sn(sr),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||tt("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tI),this.Le.getRemoteKeysForTarget(e).forEach((r=>{this.Ue(e,r,null)}))}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function rI(){return new Dn(bt.comparator)}function nI(){return new Dn(bt.comparator)}const nne={asc:"ASCENDING",desc:"DESCENDING"},ane={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ine={and:"AND",or:"OR"};class sne{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function sA(t,e){return t.useProto3Json||Xg(e)?e:{value:e}}function $h(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function one(t,e){return $h(t,e.toTimestamp())}function Za(t){return Rt(!!t),Lt.fromTimestamp((function(r){const n=ec(r);return new Yn(n.seconds,n.nanos)})(t))}function H8(t,e){return oA(t,e).canonicalString()}function oA(t,e){const r=(function(a){return new Ur(["projects",a.projectId,"databases",a.database])})(t).child("documents");return e===void 0?r:r.child(e)}function EF(t){const e=Ur.fromString(t);return Rt(DF(e)),e}function Gm(t,e){return H8(t.databaseId,e.path)}function ql(t,e){const r=EF(e);if(r.get(1)!==t.databaseId.projectId)throw new dt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new dt(Ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new bt(CF(r))}function jF(t,e){return H8(t.databaseId,e)}function kF(t){const e=EF(t);return e.length===4?Ur.emptyPath():CF(e)}function lA(t){return new Ur(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CF(t){return Rt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aI(t,e,r){return{name:Gm(t,e),fields:r.value.mapValue.fields}}function lne(t,e,r){const n=ql(t,e.name),a=Za(e.updateTime),i=e.createTime?Za(e.createTime):Lt.min(),s=new hi({mapValue:{fields:e.fields}}),c=qn.newFoundDocument(n,a,i,s);return r&&c.setHasCommittedMutations(),r?c.setHasCommittedMutations():c}function cne(t,e){return"found"in e?(function(n,a){Rt(!!a.found),a.found.name,a.found.updateTime;const i=ql(n,a.found.name),s=Za(a.found.updateTime),c=a.found.createTime?Za(a.found.createTime):Lt.min(),d=new hi({mapValue:{fields:a.found.fields}});return qn.newFoundDocument(i,s,c,d)})(t,e):"missing"in e?(function(n,a){Rt(!!a.missing),Rt(!!a.readTime);const i=ql(n,a.missing),s=Za(a.readTime);return qn.newNoDocument(i,s)})(t,e):jt()}function une(t,e){let r;if("targetChange"in e){e.targetChange;const n=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:jt()})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],i=(function(h,p){return h.useProto3Json?(Rt(p===void 0||typeof p=="string"),pa.fromBase64String(p||"")):(Rt(p===void 0||p instanceof Buffer||p instanceof Uint8Array),pa.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(h){const p=h.code===void 0?Ve.UNKNOWN:_F(h.code);return new dt(p,h.message||"")})(s);r=new AF(n,a,i,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ql(t,n.document.name),i=Za(n.document.updateTime),s=n.document.createTime?Za(n.document.createTime):Lt.min(),c=new hi({mapValue:{fields:n.document.fields}}),d=qn.newFoundDocument(a,i,s,c),h=n.targetIds||[],p=n.removedTargetIds||[];r=new Gv(h,p,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ql(t,n.document),i=n.readTime?Za(n.readTime):Lt.min(),s=qn.newNoDocument(a,i),c=n.removedTargetIds||[];r=new Gv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ql(t,n.document),i=n.removedTargetIds||[];r=new Gv([],i,a,null)}else{if(!("filter"in e))return jt();{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:i}=n,s=new Jre(a,i),c=n.targetId;r=new TF(c,s)}}return r}function Wm(t,e){let r;if(e instanceof Ef)r={update:aI(t,e.key,e.value)};else if(e instanceof e1)r={delete:Gm(t,e.key)};else if(e instanceof uc)r={update:aI(t,e.key,e.data),updateMask:gne(e.fieldMask)};else{if(!(e instanceof U8))return jt();r={verify:Gm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map((n=>(function(i,s){const c=s.transform;if(c instanceof Hm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Gd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Lh)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bh)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw jt()})(0,n)))),e.precondition.isNone||(r.currentDocument=(function(a,i){return i.updateTime!==void 0?{updateTime:one(a,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:jt()})(t,e.precondition)),r}function cA(t,e){const r=e.currentDocument?(function(i){return i.updateTime!==void 0?da.updateTime(Za(i.updateTime)):i.exists!==void 0?da.exists(i.exists):da.none()})(e.currentDocument):da.none(),n=e.updateTransforms?e.updateTransforms.map((a=>(function(s,c){let d=null;if("setToServerValue"in c)Rt(c.setToServerValue==="REQUEST_TIME"),d=new Hm;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];d=new Gd(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];d=new Lh(p)}else"increment"in c?d=new Bh(s,c.increment):jt();const h=Xn.fromServerFormat(c.fieldPath);return new $8(h,d)})(t,a))):[];if(e.update){e.update.name;const a=ql(t,e.update.name),i=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const h=d.fieldPaths||[];return new ts(h.map((p=>Xn.fromServerFormat(p))))})(e.updateMask);return new uc(a,i,s,r,n)}return new Ef(a,i,r,n)}if(e.delete){const a=ql(t,e.delete);return new e1(a,r)}if(e.verify){const a=ql(t,e.verify);return new U8(a,r)}return jt()}function dne(t,e){return t&&t.length>0?(Rt(e!==void 0),t.map((r=>(function(a,i){let s=a.updateTime?Za(a.updateTime):Za(i);return s.isEqual(Lt.min())&&(s=Za(i)),new Xre(s,a.transformResults||[])})(r,e)))):[]}function OF(t,e){return{documents:[jF(t,e.path)]}}function IF(t,e){const r={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=jF(t,a);const i=(function(h){if(h.length!==0)return PF(cn.create(h,"and"))})(e.filters);i&&(r.structuredQuery.where=i);const s=(function(h){if(h.length!==0)return h.map((p=>(function(y){return{field:uh(y.field),direction:fne(y.dir)}})(p)))})(e.orderBy);s&&(r.structuredQuery.orderBy=s);const c=sA(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(r.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{_t:r,parent:a}}function RF(t){let e=kF(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){Rt(n===1);const p=r.from[0];p.allDescendants?a=p.collectionId:e=e.child(p.collectionId)}let i=[];r.where&&(i=(function(m){const y=MF(m);return y instanceof cn&&D8(y)?y.getFilters():[y]})(r.where));let s=[];r.orderBy&&(s=(function(m){return m.map((y=>(function(T){return new qm(dh(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(r.orderBy));let c=null;r.limit&&(c=(function(m){let y;return y=typeof m=="object"?m.value:m,Xg(y)?null:y})(r.limit));let d=null;r.startAt&&(d=(function(m){const y=!!m.before,v=m.values||[];return new Ph(v,y)})(r.startAt));let h=null;return r.endAt&&(h=(function(m){const y=!m.before,v=m.values||[];return new Ph(v,y)})(r.endAt)),sF(e,a,s,i,c,"F",d,h)}function hne(t,e){const r=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return jt()}})(e.purpose);return r==null?null:{"goog-listen-tags":r}}function MF(t){return t.unaryFilter!==void 0?(function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=dh(r.unaryFilter.field);return jr.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=dh(r.unaryFilter.field);return jr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=dh(r.unaryFilter.field);return jr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=dh(r.unaryFilter.field);return jr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return jt()}})(t):t.fieldFilter!==void 0?(function(r){return jr.create(dh(r.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return jt()}})(r.fieldFilter.op),r.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(r){return cn.create(r.compositeFilter.filters.map((n=>MF(n))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return jt()}})(r.compositeFilter.op))})(t):jt()}function fne(t){return nne[t]}function pne(t){return ane[t]}function mne(t){return ine[t]}function uh(t){return{fieldPath:t.canonicalString()}}function dh(t){return Xn.fromServerFormat(t.fieldPath)}function PF(t){return t instanceof jr?(function(r){if(r.op==="=="){if(zO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NAN"}};if(UO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(zO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NOT_NAN"}};if(UO(r.value))return{unaryFilter:{field:uh(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uh(r.field),op:pne(r.op),value:r.value}}})(t):t instanceof cn?(function(r){const n=r.getFilters().map((a=>PF(a)));return n.length===1?n[0]:{compositeFilter:{op:mne(r.op),filters:n}}})(t):jt()}function gne(t){const e=[];return t.fields.forEach((r=>e.push(r.canonicalString()))),{fieldPaths:e}}function DF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,r,n,a,i=Lt.min(),s=Lt.min(),c=pa.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new Ul(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ul(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.ct=e}}function yne(t,e){let r;if(e.document)r=lne(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=bt.fromSegments(e.noDocument.path),a=Kd(e.noDocument.readTime);r=qn.newNoDocument(n,a),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return jt();{const n=bt.fromSegments(e.unknownDocument.path),a=Kd(e.unknownDocument.version);r=qn.newUnknownDocument(n,a)}}return e.readTime&&r.setReadTime((function(a){const i=new Yn(a[0],a[1]);return Lt.fromTimestamp(i)})(e.readTime)),r}function iI(t,e){const r=e.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:px(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(i,s){return{name:Gm(i,s.key),fields:s.data.value.mapValue.fields,updateTime:$h(i,s.version.toTimestamp()),createTime:$h(i,s.createTime.toTimestamp())}})(t.ct,e);else if(e.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:Wd(e.version)};else{if(!e.isUnknownDocument())return jt();n.unknownDocument={path:r.path.toArray(),version:Wd(e.version)}}return n}function px(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Kd(t){const e=new Yn(t.seconds,t.nanoseconds);return Lt.fromTimestamp(e)}function Sd(t,e){const r=(e.baseMutations||[]).map((i=>cA(t.ct,i)));for(let i=0;i<e.mutations.length-1;++i){const s=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const c=e.mutations[i+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const n=e.mutations.map((i=>cA(t.ct,i))),a=Yn.fromMillis(e.localWriteTimeMs);return new z8(e.batchId,a,r,n)}function am(t){const e=Kd(t.readTime),r=t.lastLimboFreeSnapshotVersion!==void 0?Kd(t.lastLimboFreeSnapshotVersion):Lt.min();let n;return n=(function(i){return i.documents!==void 0})(t.query)?(function(i){return Rt(i.documents.length===1),Es(Zg(kF(i.documents[0])))})(t.query):(function(i){return Es(RF(i))})(t.query),new Ul(n,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,r,pa.fromBase64String(t.resumeToken))}function BF(t,e){const r=Wd(e.snapshotVersion),n=Wd(e.lastLimboFreeSnapshotVersion);let a;a=dx(e.target)?OF(t.ct,e.target):IF(t.ct,e.target)._t;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hd(e.target),readTime:r,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function $F(t){const e=RF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fx(e,e.limit,"L"):e}function U5(t,e){return new F8(e.largestBatchId,cA(t.ct,e.overlayMutation))}function sI(t,e){const r=e.path.lastSegment();return[t,Li(e.path.popLast()),r]}function oI(t,e,r,n){return{indexId:t,uid:e,sequenceNumber:r,readTime:Wd(n.readTime),documentKey:Li(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{getBundleMetadata(e,r){return lI(e).get(r).next((n=>{if(n)return(function(i){return{id:i.bundleId,createTime:Kd(i.createTime),version:i.version}})(n)}))}saveBundleMetadata(e,r){return lI(e).put((function(a){return{bundleId:a.id,createTime:Wd(Za(a.createTime)),version:a.version}})(r))}getNamedQuery(e,r){return cI(e).get(r).next((n=>{if(n)return(function(i){return{name:i.name,query:$F(i.bundledQuery),readTime:Kd(i.readTime)}})(n)}))}saveNamedQuery(e,r){return cI(e).put((function(a){return{name:a.name,readTime:Wd(Za(a.readTime)),bundledQuery:a.bundledQuery}})(r))}}function lI(t){return za(t,"bundles")}function cI(t){return za(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){const n=r.uid||"";return new l2(e,n)}getOverlay(e,r){return Pp(e).get(sI(this.userId,r)).next((n=>n?U5(this.serializer,n):null))}getOverlays(e,r){const n=$o();return Ce.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){const a=[];return n.forEach(((i,s)=>{const c=new F8(r,s);a.push(this.ht(e,c))})),Ce.waitFor(a)}removeOverlaysForBatchId(e,r,n){const a=new Set;r.forEach((s=>a.add(Li(s.getCollectionPath()))));const i=[];return a.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);i.push(Pp(e).j("collectionPathOverlayIndex",c))})),Ce.waitFor(i)}getOverlaysForCollection(e,r,n){const a=$o(),i=Li(r),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Pp(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const h=U5(this.serializer,d);a.set(h.getKey(),h)}return a}))}getOverlaysForCollectionGroup(e,r,n,a){const i=$o();let s;const c=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Pp(e).J({index:"collectionGroupOverlayIndex",range:c},((d,h,p)=>{const m=U5(this.serializer,h);i.size()<a||m.largestBatchId===s?(i.set(m.getKey(),m),s=m.largestBatchId):p.done()})).next((()=>i))}ht(e,r){return Pp(e).put((function(a,i,s){const[c,d,h]=sI(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Wm(a.ct,s.mutation)}})(this.serializer,this.userId,r))}}function Pp(t){return za(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{Pt(e){return za(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((r=>{const n=r==null?void 0:r.value;return n?pa.fromUint8Array(n):pa.EMPTY_BYTE_STRING}))}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(Fn(e.integerValue));else if("doubleValue"in e){const n=Fn(e.doubleValue);isNaN(n)?this.dt(r,13):(this.dt(r,15),$m(n)?r.At(0):r.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(r,20),typeof n=="string"&&(n=ec(n)),r.Rt(`${n.seconds||""}`),r.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(Tu(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(r,45),r.At(n.latitude||0),r.At(n.longitude||0)}else"mapValue"in e?XV(e)?this.dt(r,Number.MAX_SAFE_INTEGER):a2(e)?this.wt(e.mapValue,r):(this.St(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.bt(e.arrayValue,r),this.ft(r)):jt()}Vt(e,r){this.dt(r,25),this.Dt(e,r)}Dt(e,r){r.Rt(e)}St(e,r){const n=e.fields||{};this.dt(r,55);for(const a of Object.keys(n))this.Vt(a,r),this.Tt(n[a],r)}wt(e,r){var n,a;const i=e.fields||{};this.dt(r,53);const s="value",c=((a=(n=i[s].arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.length)||0;this.dt(r,15),r.At(Fn(c)),this.Vt(s,r),this.Tt(i[s],r)}bt(e,r){const n=e.values||[];this.dt(r,50);for(const a of n)this.Tt(a,r)}yt(e,r){this.dt(r,37),bt.fromName(e).path.forEach((n=>{this.dt(r,60),this.Dt(n,r)}))}dt(e,r){e.At(r)}ft(e){e.At(2)}}_d.vt=new _d;function bne(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function uI(t){const e=64-(function(n){let a=0;for(let i=0;i<8;++i){const s=bne(255&n[i]);if(a+=s,s!==8)break}return a})(t);return Math.ceil(e/8)}class wne{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ft(n.value),n=r.next();this.Mt()}xt(e){const r=e[Symbol.iterator]();let n=r.next();for(;!n.done;)this.Ot(n.value),n=r.next();this.Nt()}Lt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}this.Mt()}Bt(e){for(const r of e){const n=r.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(r<"\uD800"||"\uDBFF"<r)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}this.Nt()}kt(e){const r=this.qt(e),n=uI(r);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=255&r[a]}Kt(e){const r=this.qt(e),n=uI(r);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let a=r.length-n;a<r.length;++a)this.buffer[this.position++]=~(255&r[a])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const r=(function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)})(e),n=(128&r[0])!=0;r[0]^=n?255:128;for(let a=1;a<r.length;++a)r[a]^=n?255:0;return r}Ft(e){const r=255&e;r===0?(this.Ut(0),this.Ut(255)):r===255?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(e){const r=255&e;r===0?(this.Gt(0),this.Gt(255)):r===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let n=2*this.buffer.length;n<r&&(n=r);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class Sne{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class _ne{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Dp{constructor(){this.jt=new wne,this.Ht=new Sne(this.jt),this.Jt=new _ne(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,r,n,a){this.indexId=e,this.documentKey=r,this.arrayValue=n,this.directionalValue=a}Zt(){const e=this.directionalValue.length,r=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(r);return n.set(this.directionalValue,0),r!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Td(this.indexId,this.documentKey,this.arrayValue,n)}}function Wc(t,e){let r=t.indexId-e.indexId;return r!==0?r:(r=dI(t.arrayValue,e.arrayValue),r!==0?r:(r=dI(t.directionalValue,e.directionalValue),r!==0?r:bt.comparator(t.documentKey,e.documentKey)))}function dI(t,e){for(let r=0;r<t.length&&r<e.length;++r){const n=t[r]-e[r];if(n!==0)return n}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.Xt=new Sn(((r,n)=>Xn.comparator(r.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const r of e.filters){const n=r;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(Rt(e.collectionGroup===this.collectionId),this.nn)return!1;const r=ZT(e);if(r!==void 0&&!this.sn(r))return!1;const n=vd(e);let a=new Set,i=0,s=0;for(;i<n.length&&this.sn(n[i]);++i)a=a.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!a.has(c.field.canonicalString())){const d=n[i];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++i}for(;i<n.length;++i){const c=n[i];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Sn(Xn.comparator);const r=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")r.push(new zv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),r.push(new zv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),r.push(new zv(n.field,n.dir==="asc"?0:1)));return new ux(ux.UNKNOWN_ID,this.collectionId,r,Bm.empty())}sn(e){for(const r of this.tn)if(this.on(r,e))return!0;return!1}on(e,r){if(e===void 0||!e.field.isEqual(r.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return r.kind===2===n}_n(e,r){return!!e.field.isEqual(r.fieldPath)&&(r.kind===0&&e.dir==="asc"||r.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(t){var e,r;if(Rt(t instanceof jr||t instanceof cn),t instanceof jr){if(t instanceof iF){const a=((r=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||r===void 0?void 0:r.map((i=>jr.create(t.field,"==",i))))||[];return cn.create(a,"or")}return t}const n=t.filters.map((a=>UF(a)));return cn.create(n,t.op)}function Tne(t){if(t.getFilters().length===0)return[];const e=hA(UF(t));return Rt(zF(e)),uA(e)||dA(e)?[e]:e.getFilters()}function uA(t){return t instanceof jr}function dA(t){return t instanceof cn&&D8(t)}function zF(t){return uA(t)||dA(t)||(function(r){if(r instanceof cn&&rA(r)){for(const n of r.getFilters())if(!uA(n)&&!dA(n))return!1;return!0}return!1})(t)}function hA(t){if(Rt(t instanceof jr||t instanceof cn),t instanceof jr)return t;if(t.filters.length===1)return hA(t.filters[0]);const e=t.filters.map((n=>hA(n)));let r=cn.create(e,t.op);return r=mx(r),zF(r)?r:(Rt(r instanceof cn),Rt(Dh(r)),Rt(r.filters.length>1),r.filters.reduce(((n,a)=>G8(n,a))))}function G8(t,e){let r;return Rt(t instanceof jr||t instanceof cn),Rt(e instanceof jr||e instanceof cn),r=t instanceof jr?e instanceof jr?(function(a,i){return cn.create([a,i],"and")})(t,e):fI(t,e):e instanceof jr?fI(e,t):(function(a,i){if(Rt(a.filters.length>0&&i.filters.length>0),Dh(a)&&Dh(i))return rF(a,i.getFilters());const s=rA(a)?a:i,c=rA(a)?i:a,d=s.filters.map((h=>G8(h,c)));return cn.create(d,"or")})(t,e),mx(r)}function fI(t,e){if(Dh(e))return rF(e,t.getFilters());{const r=e.filters.map((n=>G8(t,n)));return cn.create(r,"or")}}function mx(t){if(Rt(t instanceof jr||t instanceof cn),t instanceof jr)return t;const e=t.getFilters();if(e.length===1)return mx(e[0]);if(eF(t))return t;const r=e.map((a=>mx(a))),n=[];return r.forEach((a=>{a instanceof jr?n.push(a):a instanceof cn&&(a.op===t.op?n.push(...a.filters):n.push(a))})),n.length===1?n[0]:cn.create(n,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ane{constructor(){this.un=new W8}addToCollectionParentIndex(e,r){return this.un.add(r),Ce.resolve()}getCollectionParents(e,r){return Ce.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ce.resolve()}deleteFieldIndex(e,r){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,r){return Ce.resolve()}getDocumentsMatchingTarget(e,r){return Ce.resolve(null)}getIndexType(e,r){return Ce.resolve(0)}getFieldIndexes(e,r){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,r){return Ce.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,r){return Ce.resolve(Cs.min())}updateCollectionGroup(e,r,n){return Ce.resolve()}updateIndexEntries(e,r){return Ce.resolve()}}class W8{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r]||new Sn(Ur.comparator),i=!a.has(n);return this.index[r]=a.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Sn(Ur.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=new Uint8Array(0);class Nne{constructor(e,r){this.databaseId=r,this.cn=new W8,this.ln=new Ru((n=>Hd(n)),((n,a)=>Yg(n,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.cn.has(r)){const n=r.lastSegment(),a=r.popLast();e.addOnCommittedListener((()=>{this.cn.add(r)}));const i={collectionId:n,parent:Li(a)};return pI(e).put(i)}return Ce.resolve()}getCollectionParents(e,r){const n=[],a=IDBKeyRange.bound([r,""],[LV(r),""],!1,!0);return pI(e).U(a).next((i=>{for(const s of i){if(s.collectionId!==r)break;n.push(Bo(s.parent))}return n}))}addFieldIndex(e,r){const n=Lp(e),a=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(r);delete a.indexId;const i=n.add(a);if(r.indexState){const s=J0(e);return i.next((c=>{s.put(oI(c,this.uid,r.indexState.sequenceNumber,r.indexState.offset))}))}return i.next()}deleteFieldIndex(e,r){const n=Lp(e),a=J0(e),i=Z0(e);return n.delete(r.indexId).next((()=>a.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const r=Lp(e),n=Z0(e),a=J0(e);return r.j().next((()=>n.j())).next((()=>a.j()))}createTargetIndexes(e,r){return Ce.forEach(this.hn(r),(n=>this.getIndexType(e,n).next((a=>{if(a===0||a===1){const i=new hI(n).an();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,r){const n=Z0(e);let a=!0;const i=new Map;return Ce.forEach(this.hn(r),(s=>this.Pn(e,s).next((c=>{a&&(a=!!c),i.set(s,c)})))).next((()=>{if(a){let s=yr();const c=[];return Ce.forEach(i,((d,h)=>{tt("IndexedDbIndexManager",`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(d)} to execute ${Hd(r)}`);const p=(function(I,L){const C=ZT(L);if(C===void 0)return null;for(const P of hx(I,C.fieldPath))switch(P.op){case"array-contains-any":return P.value.arrayValue.values||[];case"array-contains":return[P.value]}return null})(h,d),m=(function(I,L){const C=new Map;for(const P of vd(L))for(const N of hx(I,P.fieldPath))switch(N.op){case"==":case"in":C.set(P.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return C.set(P.fieldPath.canonicalString(),N.value),Array.from(C.values())}return null})(h,d),y=(function(I,L){const C=[];let P=!0;for(const N of vd(L)){const A=N.kind===0?GO(I,N.fieldPath,I.startAt):WO(I,N.fieldPath,I.startAt);C.push(A.value),P&&(P=A.inclusive)}return new Ph(C,P)})(h,d),v=(function(I,L){const C=[];let P=!0;for(const N of vd(L)){const A=N.kind===0?WO(I,N.fieldPath,I.endAt):GO(I,N.fieldPath,I.endAt);C.push(A.value),P&&(P=A.inclusive)}return new Ph(C,P)})(h,d),T=this.In(d,h,y),S=this.In(d,h,v),w=this.Tn(d,h,m),j=this.En(d.indexId,p,T,y.inclusive,S,v.inclusive,w);return Ce.forEach(j,(R=>n.G(R,r.limit).next((I=>{I.forEach((L=>{const C=bt.fromSegments(L.documentKey);s.has(C)||(s=s.add(C),c.push(C))}))}))))})).next((()=>c))}return Ce.resolve(null)}))}hn(e){let r=this.ln.get(e);return r||(e.filters.length===0?r=[e]:r=Tne(cn.create(e.filters,"and")).map((n=>aA(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,r),r)}En(e,r,n,a,i,s,c){const d=(r!=null?r.length:1)*Math.max(n.length,i.length),h=d/(r!=null?r.length:1),p=[];for(let m=0;m<d;++m){const y=r?this.dn(r[m/h]):Jy,v=this.An(e,y,n[m%h],a),T=this.Rn(e,y,i[m%h],s),S=c.map((w=>this.An(e,y,w,!0)));p.push(...this.createRange(v,T,S))}return p}An(e,r,n,a){const i=new Td(e,bt.empty(),r,n);return a?i:i.Zt()}Rn(e,r,n,a){const i=new Td(e,bt.empty(),r,n);return a?i.Zt():i}Pn(e,r){const n=new hI(r),a=r.collectionGroup!=null?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,a).next((i=>{let s=null;for(const c of i)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,r){let n=2;const a=this.hn(r);return Ce.forEach(a,(i=>this.Pn(e,i).next((s=>{s?n!==0&&s.fields.length<(function(d){let h=new Sn(Xn.comparator),p=!1;for(const m of d.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?p=!0:h=h.add(y.field));for(const m of d.orderBy)m.field.isKeyField()||(h=h.add(m.field));return h.size+(p?1:0)})(i)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(r)&&a.length>1&&n===2?1:n))}Vn(e,r){const n=new Dp;for(const a of vd(e)){const i=r.data.field(a.fieldPath);if(i==null)return null;const s=n.Yt(a.kind);_d.vt.It(i,s)}return n.zt()}dn(e){const r=new Dp;return _d.vt.It(e,r.Yt(0)),r.zt()}mn(e,r){const n=new Dp;return _d.vt.It(Vm(this.databaseId,r),n.Yt((function(i){const s=vd(i);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,r,n){if(n===null)return[];let a=[];a.push(new Dp);let i=0;for(const s of vd(e)){const c=n[i++];for(const d of a)if(this.fn(r,s.fieldPath)&&Fm(c))a=this.gn(a,s,c);else{const h=d.Yt(s.kind);_d.vt.It(c,h)}}return this.pn(a)}In(e,r,n){return this.Tn(e,r,n.position)}pn(e){const r=[];for(let n=0;n<e.length;++n)r[n]=e[n].zt();return r}gn(e,r,n){const a=[...e],i=[];for(const s of n.arrayValue.values||[])for(const c of a){const d=new Dp;d.seed(c.zt()),_d.vt.It(s,d.Yt(r.kind)),i.push(d)}return i}fn(e,r){return!!e.filters.find((n=>n instanceof jr&&n.field.isEqual(r)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,r){const n=Lp(e),a=J0(e);return(r?n.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):n.U()).next((i=>{const s=[];return Ce.forEach(i,(c=>a.get([c.indexId,this.uid]).next((d=>{s.push((function(p,m){const y=m?new Bm(m.sequenceNumber,new Cs(Kd(m.readTime),new bt(Bo(m.documentKey)),m.largestBatchId)):Bm.empty(),v=p.fields.map((([T,S])=>new zv(Xn.fromServerFormat(T),S)));return new ux(p.indexId,p.collectionGroup,v,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((r=>r.length===0?null:(r.sort(((n,a)=>{const i=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return i!==0?i:sr(n.collectionGroup,a.collectionGroup)})),r[0].collectionGroup)))}updateCollectionGroup(e,r,n){const a=Lp(e),i=J0(e);return this.yn(e).next((s=>a.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next((c=>Ce.forEach(c,(d=>i.put(oI(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,r){const n=new Map;return Ce.forEach(r,((a,i)=>{const s=n.get(a.collectionGroup);return(s?Ce.resolve(s):this.getFieldIndexes(e,a.collectionGroup)).next((c=>(n.set(a.collectionGroup,c),Ce.forEach(c,(d=>this.wn(e,a,d).next((h=>{const p=this.Sn(i,d);return h.isEqual(p)?Ce.resolve():this.bn(e,i,d,h,p)})))))))}))}Dn(e,r,n,a){return Z0(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.mn(n,r.key),documentKey:r.key.path.toArray()})}vn(e,r,n,a){return Z0(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.mn(n,r.key),r.key.path.toArray()])}wn(e,r,n){const a=Z0(e);let i=new Sn(Wc);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,r)])},((s,c)=>{i=i.add(new Td(n.indexId,r,c.arrayValue,c.directionalValue))})).next((()=>i))}Sn(e,r){let n=new Sn(Wc);const a=this.Vn(r,e);if(a==null)return n;const i=ZT(r);if(i!=null){const s=e.data.field(i.fieldPath);if(Fm(s))for(const c of s.arrayValue.values||[])n=n.add(new Td(r.indexId,e.key,this.dn(c),a))}else n=n.add(new Td(r.indexId,e.key,Jy,a));return n}bn(e,r,n,a,i){tt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const s=[];return(function(d,h,p,m,y){const v=d.getIterator(),T=h.getIterator();let S=Y0(v),w=Y0(T);for(;S||w;){let j=!1,R=!1;if(S&&w){const I=p(S,w);I<0?R=!0:I>0&&(j=!0)}else S!=null?R=!0:j=!0;j?(m(w),w=Y0(T)):R?(y(S),S=Y0(v)):(S=Y0(v),w=Y0(T))}})(a,i,Wc,(c=>{s.push(this.Dn(e,r,n,c))}),(c=>{s.push(this.vn(e,r,n,c))})),Ce.waitFor(s)}yn(e){let r=1;return J0(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,a,i)=>{i.done(),r=a.sequenceNumber+1})).next((()=>r))}createRange(e,r,n){n=n.sort(((s,c)=>Wc(s,c))).filter(((s,c,d)=>!c||Wc(s,d[c-1])!==0));const a=[];a.push(e);for(const s of n){const c=Wc(s,e),d=Wc(s,r);if(c===0)a[0]=e.Zt();else if(c>0&&d<0)a.push(s),a.push(s.Zt());else if(d>0)break}a.push(r);const i=[];for(let s=0;s<a.length;s+=2){if(this.Cn(a[s],a[s+1]))return[];const c=[a[s].indexId,this.uid,a[s].arrayValue,a[s].directionalValue,Jy,[]],d=[a[s+1].indexId,this.uid,a[s+1].arrayValue,a[s+1].directionalValue,Jy,[]];i.push(IDBKeyRange.bound(c,d))}return i}Cn(e,r){return Wc(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(mI)}getMinOffset(e,r){return Ce.mapArray(this.hn(r),(n=>this.Pn(e,n).next((a=>a||jt())))).next(mI)}}function pI(t){return za(t,"collectionParents")}function Z0(t){return za(t,"indexEntries")}function Lp(t){return za(t,"indexConfiguration")}function J0(t){return za(t,"indexState")}function mI(t){Rt(t.length!==0);let e=t[0].indexState.offset,r=e.largestBatchId;for(let n=1;n<t.length;n++){const a=t[n].indexState.offset;O8(a,e)<0&&(e=a),r<a.largestBatchId&&(r=a.largestBatchId)}return new Cs(e.readTime,e.documentKey,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xi{constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Xi(e,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e,r){const n=t.store("mutations"),a=t.store("documentMutations"),i=[],s=IDBKeyRange.only(r.batchId);let c=0;const d=n.J({range:s},((p,m,y)=>(c++,y.delete())));i.push(d.next((()=>{Rt(c===1)})));const h=[];for(const p of r.mutations){const m=qV(e,p.key.path,r.batchId);i.push(a.delete(m)),h.push(p.key)}return Ce.waitFor(i).next((()=>h))}function gx(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jt();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xi.DEFAULT_COLLECTION_PERCENTILE=10,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xi.DEFAULT=new Xi(41943040,Xi.DEFAULT_COLLECTION_PERCENTILE,Xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xi.DISABLED=new Xi(-1,0,0);class c2{constructor(e,r,n,a){this.userId=e,this.serializer=r,this.indexManager=n,this.referenceDelegate=a,this.Fn={}}static lt(e,r,n,a){Rt(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new c2(i,r,n,a)}checkEmpty(e){let r=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kc(e).J({index:"userMutationsIndex",range:n},((a,i,s)=>{r=!1,s.done()})).next((()=>r))}addMutationBatch(e,r,n,a){const i=hh(e),s=Kc(e);return s.add({}).next((c=>{Rt(typeof c=="number");const d=new z8(c,r,n,a),h=(function(v,T,S){const w=S.baseMutations.map((R=>Wm(v.ct,R))),j=S.mutations.map((R=>Wm(v.ct,R)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:j}})(this.serializer,this.userId,d),p=[];let m=new Sn(((y,v)=>sr(y.canonicalString(),v.canonicalString())));for(const y of a){const v=qV(this.userId,y.key.path,c);m=m.add(y.key.path.popLast()),p.push(s.put(h)),p.push(i.put(v,dre))}return m.forEach((y=>{p.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),Ce.waitFor(p).next((()=>d))}))}lookupMutationBatch(e,r){return Kc(e).get(r).next((n=>n?(Rt(n.userId===this.userId),Sd(this.serializer,n)):null))}Mn(e,r){return this.Fn[r]?Ce.resolve(this.Fn[r]):this.lookupMutationBatch(e,r).next((n=>{if(n){const a=n.keys();return this.Fn[r]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Kc(e).J({index:"userMutationsIndex",range:a},((s,c,d)=>{c.userId===this.userId&&(Rt(c.batchId>=n),i=Sd(this.serializer,c)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Kc(e).J({index:"userMutationsIndex",range:r,reverse:!0},((a,i,s)=>{n=i.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kc(e).U("userMutationsIndex",r).next((n=>n.map((a=>Sd(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,r){const n=Vv(this.userId,r.path),a=IDBKeyRange.lowerBound(n),i=[];return hh(e).J({range:a},((s,c,d)=>{const[h,p,m]=s,y=Bo(p);if(h===this.userId&&r.path.isEqual(y))return Kc(e).get(m).next((v=>{if(!v)throw jt();Rt(v.userId===this.userId),i.push(Sd(this.serializer,v))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sn(sr);const a=[];return r.forEach((i=>{const s=Vv(this.userId,i.path),c=IDBKeyRange.lowerBound(s),d=hh(e).J({range:c},((h,p,m)=>{const[y,v,T]=h,S=Bo(v);y===this.userId&&i.path.isEqual(S)?n=n.add(T):m.done()}));a.push(d)})),Ce.waitFor(a).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1,i=Vv(this.userId,n),s=IDBKeyRange.lowerBound(i);let c=new Sn(sr);return hh(e).J({range:s},((d,h,p)=>{const[m,y,v]=d,T=Bo(y);m===this.userId&&n.isPrefixOf(T)?T.length===a&&(c=c.add(v)):p.done()})).next((()=>this.xn(e,c)))}xn(e,r){const n=[],a=[];return r.forEach((i=>{a.push(Kc(e).get(i).next((s=>{if(s===null)throw jt();Rt(s.userId===this.userId),n.push(Sd(this.serializer,s))})))})),Ce.waitFor(a).next((()=>n))}removeMutationBatch(e,r){return VF(e._e,this.userId,r).next((n=>(e.addOnCommittedListener((()=>{this.On(r.batchId)})),Ce.forEach(n,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((r=>{if(!r)return Ce.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),a=[];return hh(e).J({range:n},((i,s,c)=>{if(i[0]===this.userId){const d=Bo(i[1]);a.push(d)}else c.done()})).next((()=>{Rt(a.length===0)}))}))}containsKey(e,r){return FF(e,this.userId,r)}Nn(e){return qF(e).get(this.userId).next((r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function FF(t,e,r){const n=Vv(e,r.path),a=n[1],i=IDBKeyRange.lowerBound(n);let s=!1;return hh(t).J({range:i,H:!0},((c,d,h)=>{const[p,m,y]=c;p===e&&m===a&&(s=!0),h.done()})).next((()=>s))}function Kc(t){return za(t,"mutations")}function hh(t){return za(t,"documentMutations")}function qF(t){return za(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qd(0)}static kn(){return new Qd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ene{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.qn(e).next((r=>{const n=new Qd(r.highestTargetId);return r.highestTargetId=n.next(),this.Qn(e,r).next((()=>r.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((r=>Lt.fromTimestamp(new Yn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((r=>r.highestListenSequenceNumber))}setTargetsMetadata(e,r,n){return this.qn(e).next((a=>(a.highestListenSequenceNumber=r,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),r>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=r),this.Qn(e,a))))}addTargetData(e,r){return this.Kn(e,r).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(r,n),this.Qn(e,n))))))}updateTargetData(e,r){return this.Kn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next((()=>eh(e).delete(r.targetId))).next((()=>this.qn(e))).next((n=>(Rt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,r,n){let a=0;const i=[];return eh(e).J(((s,c)=>{const d=am(c);d.sequenceNumber<=r&&n.get(d.targetId)===null&&(a++,i.push(this.removeTargetData(e,d)))})).next((()=>Ce.waitFor(i))).next((()=>a))}forEachTarget(e,r){return eh(e).J(((n,a)=>{const i=am(a);r(i)}))}qn(e){return yI(e).get("targetGlobalKey").next((r=>(Rt(r!==null),r)))}Qn(e,r){return yI(e).put("targetGlobalKey",r)}Kn(e,r){return eh(e).put(BF(this.serializer,r))}$n(e,r){let n=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,n=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((r=>r.targetCount))}getTargetData(e,r){const n=Hd(r),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return eh(e).J({range:a,index:"queryTargetsIndex"},((s,c,d)=>{const h=am(c);Yg(r,h.target)&&(i=h,d.done())})).next((()=>i))}addMatchingKeys(e,r,n){const a=[],i=nu(e);return r.forEach((s=>{const c=Li(s.path);a.push(i.put({targetId:n,path:c})),a.push(this.referenceDelegate.addReference(e,n,s))})),Ce.waitFor(a)}removeMatchingKeys(e,r,n){const a=nu(e);return Ce.forEach(r,(i=>{const s=Li(i.path);return Ce.waitFor([a.delete([n,s]),this.referenceDelegate.removeReference(e,n,i)])}))}removeMatchingKeysForTargetId(e,r){const n=nu(e),a=IDBKeyRange.bound([r],[r+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,r){const n=IDBKeyRange.bound([r],[r+1],!1,!0),a=nu(e);let i=yr();return a.J({range:n,H:!0},((s,c,d)=>{const h=Bo(s[1]),p=new bt(h);i=i.add(p)})).next((()=>i))}containsKey(e,r){const n=Li(r.path),a=IDBKeyRange.bound([n],[LV(n)],!1,!0);let i=0;return nu(e).J({index:"documentTargetsIndex",H:!0,range:a},(([s,c],d,h)=>{s!==0&&(i++,h.done())})).next((()=>i>0))}ot(e,r){return eh(e).get(r).next((n=>n?am(n):null))}}function eh(t){return za(t,"targets")}function yI(t){return za(t,"targetGlobal")}function nu(t){return za(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI([t,e],[r,n]){const a=sr(t,r);return a===0?sr(e,n):a}class jne{constructor(e){this.Un=e,this.buffer=new Sn(vI),this.Wn=0}Gn(){return++this.Wn}zn(e){const r=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();vI(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class kne{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){tt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Iu(r)?tt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await Ou(r)}await this.Hn(3e5)}))}}class Cne{constructor(e,r){this.Jn=e,this.params=r}calculateTargetCount(e,r){return this.Jn.Yn(e).next((n=>Math.floor(r/100*n)))}nthSequenceNumber(e,r){if(r===0)return Ce.resolve(es.oe);const n=new jne(r);return this.Jn.forEachTarget(e,(a=>n.zn(a.sequenceNumber))).next((()=>this.Jn.Zn(e,(a=>n.zn(a))))).next((()=>n.maxValue))}removeTargets(e,r,n){return this.Jn.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Jn.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(tt("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(gI)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gI):this.Xn(e,r)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,r){let n,a,i,s,c,d,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),a=this.params.maximumSequenceNumbersToCollect):a=m,s=Date.now(),this.nthSequenceNumber(e,a)))).next((m=>(n=m,c=Date.now(),this.removeTargets(e,n,r)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((m=>(h=Date.now(),lh()<=Er.DEBUG&&tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${a} in `+(c-s)+`ms
	Removed ${i} targets in `+(d-c)+`ms
	Removed ${m} documents in `+(h-d)+`ms
Total Duration: ${h-p}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:i,documentsRemoved:m}))))}}function One(t,e){return new Cne(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ine{constructor(e,r){this.db=e,this.garbageCollector=One(this,r)}Yn(e){const r=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>r.next((a=>n+a))))}er(e){let r=0;return this.Zn(e,(n=>{r++})).next((()=>r))}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Zn(e,r){return this.tr(e,((n,a)=>r(a)))}addReference(e,r,n){return ev(e,n)}removeReference(e,r,n){return ev(e,n)}removeTargets(e,r,n){return this.db.getTargetCache().removeTargets(e,r,n)}markPotentiallyOrphaned(e,r){return ev(e,r)}nr(e,r){return(function(a,i){let s=!1;return qF(a).Y((c=>FF(a,c,i).next((d=>(d&&(s=!0),Ce.resolve(!d)))))).next((()=>s))})(e,r)}removeOrphanedDocuments(e,r){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let i=0;return this.tr(e,((s,c)=>{if(c<=r){const d=this.nr(e,s).next((h=>{if(!h)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Lt.min()),nu(e).delete((function(m){return[0,Li(m.path)]})(s)))))}));a.push(d)}})).next((()=>Ce.waitFor(a))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,r){return ev(e,r)}tr(e,r){const n=nu(e);let a,i=es.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:h})=>{s===0?(i!==es.oe&&r(new bt(Bo(a)),i),i=h,a=d):i=es.oe})).next((()=>{i!==es.oe&&r(new bt(Bo(a)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ev(t,e){return nu(t).put((function(n,a){return{targetId:0,path:Li(n.path),sequenceNumber:a}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HF{constructor(){this.changes=new Ru((e=>e.toString()),((e,r)=>e.isEqual(r))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,qn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ce.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rne{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,n){return ld(e).put(n)}removeEntry(e,r,n){return ld(e).delete((function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],px(s),c[c.length-1]]})(r,n))}updateMetadata(e,r){return this.getMetadata(e).next((n=>(n.byteSize+=r,this.rr(e,n))))}getEntry(e,r){let n=qn.newInvalidDocument(r);return ld(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n=this.ir(r,i)})).next((()=>n))}sr(e,r){let n={size:0,document:qn.newInvalidDocument(r)};return ld(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bp(r))},((a,i)=>{n={document:this.ir(r,i),size:gx(i)}})).next((()=>n))}getEntries(e,r){let n=As();return this._r(e,r,((a,i)=>{const s=this.ir(a,i);n=n.insert(a,s)})).next((()=>n))}ar(e,r){let n=As(),a=new Dn(bt.comparator);return this._r(e,r,((i,s)=>{const c=this.ir(i,s);n=n.insert(i,c),a=a.insert(i,gx(s))})).next((()=>({documents:n,ur:a})))}_r(e,r,n){if(r.isEmpty())return Ce.resolve();let a=new Sn(wI);r.forEach((d=>a=a.add(d)));const i=IDBKeyRange.bound(Bp(a.first()),Bp(a.last())),s=a.getIterator();let c=s.getNext();return ld(e).J({index:"documentKeyIndex",range:i},((d,h,p)=>{const m=bt.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;c&&wI(c,m)<0;)n(c,null),c=s.getNext();c&&c.isEqual(m)&&(n(c,h),c=s.hasNext()?s.getNext():null),c?p.$(Bp(c)):p.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,r,n,a,i){const s=r.path,c=[s.popLast().toArray(),s.lastSegment(),px(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ld(e).U(IDBKeyRange.bound(c,d,!0)).next((h=>{i==null||i.incrementDocumentReadCount(h.length);let p=As();for(const m of h){const y=this.ir(bt.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Jg(r,y)||a.has(y.key))&&(p=p.insert(y.key,y))}return p}))}getAllFromCollectionGroup(e,r,n,a){let i=As();const s=bI(r,n),c=bI(r,Cs.max());return ld(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,h,p)=>{const m=this.ir(bt.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);i=i.insert(m.key,m),i.size===a&&p.done()})).next((()=>i))}newChangeBuffer(e){return new Mne(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((r=>r.byteSize))}getMetadata(e){return xI(e).get("remoteDocumentGlobalKey").next((r=>(Rt(!!r),r)))}rr(e,r){return xI(e).put("remoteDocumentGlobalKey",r)}ir(e,r){if(r){const n=yne(this.serializer,r);if(!(n.isNoDocument()&&n.version.isEqual(Lt.min())))return n}return qn.newInvalidDocument(e)}}function GF(t){return new Rne(t)}class Mne extends HF{constructor(e,r){super(),this.cr=e,this.trackRemovals=r,this.lr=new Ru((n=>n.toString()),((n,a)=>n.isEqual(a)))}applyChanges(e){const r=[];let n=0,a=new Sn(((i,s)=>sr(i.canonicalString(),s.canonicalString())));return this.changes.forEach(((i,s)=>{const c=this.lr.get(i);if(r.push(this.cr.removeEntry(e,i,c.readTime)),s.isValidDocument()){const d=iI(this.cr.serializer,s);a=a.add(i.path.popLast());const h=gx(d);n+=h-c.size,r.push(this.cr.addEntry(e,i,d))}else if(n-=c.size,this.trackRemovals){const d=iI(this.cr.serializer,s.convertToNoDocument(Lt.min()));r.push(this.cr.addEntry(e,i,d))}})),a.forEach((i=>{r.push(this.cr.indexManager.addToCollectionParentIndex(e,i))})),r.push(this.cr.updateMetadata(e,n)),Ce.waitFor(r)}getFromCache(e,r){return this.cr.sr(e,r).next((n=>(this.lr.set(r,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,r){return this.cr.ar(e,r).next((({documents:n,ur:a})=>(a.forEach(((i,s)=>{this.lr.set(i,{size:s,readTime:n.get(i).readTime})})),n)))}}function xI(t){return za(t,"remoteDocumentGlobal")}function ld(t){return za(t,"remoteDocumentsV14")}function Bp(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bI(t,e){const r=e.documentKey.path.toArray();return[t,px(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function wI(t,e){const r=t.path.toArray(),n=e.path.toArray();let a=0;for(let i=0;i<r.length-2&&i<n.length-2;++i)if(a=sr(r[i],n[i]),a)return a;return a=sr(r.length,n.length),a||(a=sr(r[r.length-2],n[n.length-2]),a||sr(r[r.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pne{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,r,n,a){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next((a=>(n=a,this.remoteDocumentCache.getEntry(e,r)))).next((a=>(n!==null&&pm(n.mutation,a,ts.empty(),Yn.now()),a)))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.getLocalViewOfDocuments(e,n,yr()).next((()=>n))))}getLocalViewOfDocuments(e,r,n=yr()){const a=$o();return this.populateOverlays(e,a,r).next((()=>this.computeViews(e,r,a,n).next((i=>{let s=rm();return i.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,r){const n=$o();return this.populateOverlays(e,n,r).next((()=>this.computeViews(e,r,n,yr())))}populateOverlays(e,r,n){const a=[];return n.forEach((i=>{r.has(i)||a.push(i)})),this.documentOverlayCache.getOverlays(e,a).next((i=>{i.forEach(((s,c)=>{r.set(s,c)}))}))}computeViews(e,r,n,a){let i=As();const s=fm(),c=(function(){return fm()})();return r.forEach(((d,h)=>{const p=n.get(h.key);a.has(h.key)&&(p===void 0||p.mutation instanceof uc)?i=i.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),pm(p.mutation,h,p.mutation.getFieldMask(),Yn.now())):s.set(h.key,ts.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((h,p)=>s.set(h,p))),r.forEach(((h,p)=>{var m;return c.set(h,new Pne(p,(m=s.get(h))!==null&&m!==void 0?m:null))})),c)))}recalculateAndSaveOverlays(e,r){const n=fm();let a=new Dn(((s,c)=>s-c)),i=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next((s=>{for(const c of s)c.keys().forEach((d=>{const h=r.get(d);if(h===null)return;let p=n.get(d)||ts.empty();p=c.applyToLocalView(h,p),n.set(d,p);const m=(a.get(c.batchId)||yr()).add(d);a=a.insert(c.batchId,m)}))})).next((()=>{const s=[],c=a.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),h=d.key,p=d.value,m=fF();p.forEach((y=>{if(!i.has(y)){const v=bF(r.get(y),n.get(y));v!==null&&m.set(y,v),i=i.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,m))}return Ce.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,r,n,a){return(function(s){return bt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):oF(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,a):this.getDocumentsMatchingCollectionQuery(e,r,n,a)}getNextDocuments(e,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,a).next((i=>{const s=a-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,a-i.size):Ce.resolve($o());let c=-1,d=i;return s.next((h=>Ce.forEach(h,((p,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(p)?Ce.resolve():this.remoteDocumentCache.getEntry(e,p).next((y=>{d=d.insert(p,y)}))))).next((()=>this.populateOverlays(e,h,i))).next((()=>this.computeViews(e,d,h,yr()))).next((p=>({batchId:c,changes:hF(p)})))))}))}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new bt(r)).next((n=>{let a=rm();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a}))}getDocumentsMatchingCollectionGroupQuery(e,r,n,a){const i=r.collectionGroup;let s=rm();return this.indexManager.getCollectionParents(e,i).next((c=>Ce.forEach(c,(d=>{const h=(function(m,y){return new Nf(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(r,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,n,a).next((p=>{p.forEach(((m,y)=>{s=s.insert(m,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,r,n,a){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,a)))).next((s=>{i.forEach(((d,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,qn.newInvalidDocument(p)))}));let c=rm();return s.forEach(((d,h)=>{const p=i.get(d);p!==void 0&&pm(p.mutation,h,ts.empty(),Yn.now()),Jg(r,h)&&(c=c.insert(d,h))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dne{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ce.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,(function(a){return{id:a.id,version:a.version,createTime:Za(a.createTime)}})(r)),Ce.resolve()}getNamedQuery(e,r){return Ce.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,(function(a){return{name:a.name,query:$F(a.bundledQuery),readTime:Za(a.readTime)}})(r)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(){this.overlays=new Dn(bt.comparator),this.Ir=new Map}getOverlay(e,r){return Ce.resolve(this.overlays.get(r))}getOverlays(e,r){const n=$o();return Ce.forEach(r,(a=>this.getOverlay(e,a).next((i=>{i!==null&&n.set(a,i)})))).next((()=>n))}saveOverlays(e,r,n){return n.forEach(((a,i)=>{this.ht(e,r,i)})),Ce.resolve()}removeOverlaysForBatchId(e,r,n){const a=this.Ir.get(n);return a!==void 0&&(a.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(n)),Ce.resolve()}getOverlaysForCollection(e,r,n){const a=$o(),i=r.length+1,s=new bt(r.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,h=d.getKey();if(!r.isPrefixOf(h.path))break;h.path.length===i&&d.largestBatchId>n&&a.set(d.getKey(),d)}return Ce.resolve(a)}getOverlaysForCollectionGroup(e,r,n,a){let i=new Dn(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===r&&h.largestBatchId>n){let p=i.get(h.largestBatchId);p===null&&(p=$o(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const c=$o(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((h,p)=>c.set(h,p))),!(c.size()>=a)););return Ce.resolve(c)}ht(e,r,n){const a=this.overlays.get(n.key);if(a!==null){const s=this.Ir.get(a.largestBatchId).delete(n.key);this.Ir.set(a.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new F8(r,n));let i=this.Ir.get(r);i===void 0&&(i=yr(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bne{constructor(){this.sessionToken=pa.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(){this.Tr=new Sn(Qa.Er),this.dr=new Sn(Qa.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Qa(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach((n=>this.addReference(n,r)))}removeReference(e,r){this.Vr(new Qa(e,r))}mr(e,r){e.forEach((n=>this.removeReference(n,r)))}gr(e){const r=new bt(new Ur([])),n=new Qa(r,e),a=new Qa(r,e+1),i=[];return this.dr.forEachInRange([n,a],(s=>{this.Vr(s),i.push(s.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new bt(new Ur([])),n=new Qa(r,e),a=new Qa(r,e+1);let i=yr();return this.dr.forEachInRange([n,a],(s=>{i=i.add(s.key)})),i}containsKey(e){const r=new Qa(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Qa{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return bt.comparator(e.key,r.key)||sr(e.wr,r.wr)}static Ar(e,r){return sr(e.wr,r.wr)||bt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ne{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Sn(Qa.Er)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,a){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new z8(i,r,n,a);this.mutationQueue.push(s);for(const c of a)this.br=this.br.add(new Qa(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ce.resolve(s)}lookupMutationBatch(e,r){return Ce.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,a=this.vr(n),i=a<0?0:a;return Ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Qa(r,0),a=new Qa(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,a],(s=>{const c=this.Dr(s.wr);i.push(c)})),Ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Sn(sr);return r.forEach((a=>{const i=new Qa(a,0),s=new Qa(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,s],(c=>{n=n.add(c.wr)}))})),Ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,a=n.length+1;let i=n;bt.isDocumentKey(i)||(i=i.child(""));const s=new Qa(new bt(i),0);let c=new Sn(sr);return this.br.forEachWhile((d=>{const h=d.key.path;return!!n.isPrefixOf(h)&&(h.length===a&&(c=c.add(d.wr)),!0)}),s),Ce.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach((n=>{const a=this.Dr(n);a!==null&&r.push(a)})),r}removeMutationBatch(e,r){Rt(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ce.forEach(r.mutations,(a=>{const i=new Qa(a.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,r){const n=new Qa(r,0),a=this.br.firstAfterOrEqual(n);return Ce.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e){this.Mr=e,this.docs=(function(){return new Dn(bt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,a=this.docs.get(n),i=a?a.size:0,s=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ce.resolve(n?n.document.mutableCopy():qn.newInvalidDocument(r))}getEntries(e,r){let n=As();return r.forEach((a=>{const i=this.docs.get(a);n=n.insert(a,i?i.document.mutableCopy():qn.newInvalidDocument(a))})),Ce.resolve(n)}getDocumentsMatchingQuery(e,r,n,a){let i=As();const s=r.path,c=new bt(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:h,value:{document:p}}=d.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||O8($V(p),n)<=0||(a.has(p.key)||Jg(r,p))&&(i=i.insert(p.key,p.mutableCopy()))}return Ce.resolve(i)}getAllFromCollectionGroup(e,r,n,a){jt()}Or(e,r){return Ce.forEach(this.docs,(n=>r(n)))}newChangeBuffer(e){return new zne(this)}getSize(e){return Ce.resolve(this.size)}}class zne extends HF{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach(((n,a)=>{a.isValidDocument()?r.push(this.cr.addEntry(e,a)):this.cr.removeEntry(n)})),Ce.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(e){this.persistence=e,this.Nr=new Ru((r=>Hd(r)),Yg),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new K8,this.targetCount=0,this.kr=Qd.Bn()}forEachTarget(e,r){return this.Nr.forEach(((n,a)=>r(a))),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ce.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Qd(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ce.resolve()}updateTargetData(e,r){return this.Kn(r),Ce.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,r,n){let a=0;const i=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),a++)})),Ce.waitFor(i).next((()=>a))}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ce.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ce.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const a=this.persistence.referenceDelegate,i=[];return a&&r.forEach((s=>{i.push(a.markPotentiallyOrphaned(e,s))})),Ce.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ce.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ce.resolve(n)}containsKey(e,r){return Ce.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,r){this.qr={},this.overlays={},this.Qr=new es(0),this.Kr=!1,this.Kr=!0,this.$r=new Bne,this.referenceDelegate=e(this),this.Ur=new Vne(this),this.indexManager=new Ane,this.remoteDocumentCache=(function(a){return new Une(a)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new LF(r),this.Gr=new Dne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new Lne,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new $ne(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){tt("MemoryPersistence","Starting transaction:",e);const a=new Fne(this.Qr.next());return this.referenceDelegate.zr(),n(a).next((i=>this.referenceDelegate.jr(a).next((()=>i)))).toPromise().then((i=>(a.raiseOnCommittedEvent(),i)))}Hr(e,r){return Ce.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,r))))}}class Fne extends zV{constructor(e){super(),this.currentSequenceNumber=e}}class u2{constructor(e){this.persistence=e,this.Jr=new K8,this.Yr=null}static Zr(e){return new u2(e)}get Xr(){if(this.Yr)return this.Yr;throw jt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ce.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ce.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach((a=>this.Xr.add(a.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next((a=>{a.forEach((i=>this.Xr.add(i.toString())))})).next((()=>n.removeTargetData(e,r)))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.Xr,(n=>{const a=bt.fromPath(n);return this.ei(e,a).next((i=>{i||r.removeEntry(a,Lt.min())}))})).next((()=>(this.Yr=null,r.apply(e))))}updateLimboDocument(e,r){return this.ei(e,r).next((n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())}))}Wr(e){return 0}ei(e,r){return Ce.or([()=>Ce.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qne{constructor(e){this.serializer=e}O(e,r,n,a){const i=new n2("createOrUpgrade",r);n<1&&a>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PO,{unique:!0}),d.createObjectStore("documentMutations")})(e),SI(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=Ce.resolve();return n<3&&a>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),SI(e)),s=s.next((()=>(function(d){const h=d.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",p)})(i)))),n<4&&a>=4&&(n!==0&&(s=s.next((()=>(function(d,h){return h.store("mutations").U().next((p=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PO,{unique:!0});const m=h.store("mutations"),y=p.map((v=>m.put(v)));return Ce.waitFor(y)}))})(e,i)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&a>=5&&(s=s.next((()=>this.ni(i)))),n<6&&a>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(i))))),n<7&&a>=7&&(s=s.next((()=>this.ii(i)))),n<8&&a>=8&&(s=s.next((()=>this.si(e,i)))),n<9&&a>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&a>=10&&(s=s.next((()=>this.oi(i)))),n<11&&a>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&a>=12&&(s=s.next((()=>{(function(d){const h=d.createObjectStore("documentOverlays",{keyPath:_re});h.createIndex("collectionPathOverlayIndex",Tre,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",Are,{unique:!1})})(e)}))),n<13&&a>=13&&(s=s.next((()=>(function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:hre});h.createIndex("documentKeyIndex",fre),h.createIndex("collectionGroupIndex",pre)})(e))).next((()=>this._i(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&a>=14&&(s=s.next((()=>this.ai(e,i)))),n<15&&a>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:xre}).createIndex("sequenceNumberIndex",bre,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:wre}).createIndex("documentKeyIndex",Sre,{unique:!1})})(e)))),n<16&&a>=16&&(s=s.next((()=>{r.objectStore("indexState").clear()})).next((()=>{r.objectStore("indexEntries").clear()}))),n<17&&a>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let r=0;return e.store("remoteDocuments").J(((n,a)=>{r+=gx(a)})).next((()=>{const n={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const r=e.store("mutationQueues"),n=e.store("mutations");return r.U().next((a=>Ce.forEach(a,(i=>{const s=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>Ce.forEach(c,(d=>{Rt(d.userId===i.userId);const h=Sd(this.serializer,d);return VF(e,i.userId,h).next((()=>{}))}))))}))))}ii(e){const r=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((a=>{const i=[];return n.J(((s,c)=>{const d=new Ur(s),h=(function(m){return[0,Li(m)]})(d);i.push(r.get(h).next((p=>p?Ce.resolve():(m=>r.put({targetId:0,path:Li(m),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>Ce.waitFor(i)))}))}si(e,r){e.createObjectStore("collectionParents",{keyPath:vre});const n=r.store("collectionParents"),a=new W8,i=s=>{if(a.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:Li(d)})}};return r.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new Ur(s);return i(d.popLast())})).next((()=>r.store("documentMutations").J({H:!0},(([s,c,d],h)=>{const p=Bo(c);return i(p.popLast())}))))}oi(e){const r=e.store("targets");return r.J(((n,a)=>{const i=am(a),s=BF(this.serializer,i);return r.put(s)}))}_i(e,r){const n=r.store("remoteDocuments"),a=[];return n.J(((i,s)=>{const c=r.store("remoteDocumentsV14"),d=(function(m){return m.document?new bt(Ur.fromString(m.document.name).popFirst(5)):m.noDocument?bt.fromSegments(m.noDocument.path):m.unknownDocument?bt.fromSegments(m.unknownDocument.path):jt()})(s).path.toArray(),h={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};a.push(c.put(h))})).next((()=>Ce.waitFor(a)))}ai(e,r){const n=r.store("mutations"),a=GF(this.serializer),i=new KF(u2.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var h;let p=(h=c.get(d.userId))!==null&&h!==void 0?h:yr();Sd(this.serializer,d).keys().forEach((m=>p=p.add(m))),c.set(d.userId,p)})),Ce.forEach(c,((d,h)=>{const p=new Si(h),m=l2.lt(this.serializer,p),y=i.getIndexManager(p),v=c2.lt(p,this.serializer,y,i.referenceDelegate);return new WF(a,v,m,y).recalculateAndSaveOverlaysForDocumentKeys(new JT(r,es.oe),d).next()}))}))}}function SI(t){t.createObjectStore("targetDocuments",{keyPath:gre}).createIndex("documentTargetsIndex",yre,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mre,{unique:!0}),t.createObjectStore("targetGlobal")}const z5="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Q8{constructor(e,r,n,a,i,s,c,d,h,p,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=n,this.ui=i,this.window=s,this.document=c,this.ci=h,this.li=p,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!Q8.D())throw new dt(Ve.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ine(this,a),this.Ai=r+"main",this.serializer=new LF(d),this.Ri=new xu(this.Ai,this.hi,new qne(this.serializer)),this.$r=new xne,this.Ur=new Ene(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GF(this.serializer),this.Gr=new vne,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,p===!1&&ua("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dt(Ve.FAILED_PRECONDITION,z5);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new es(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async r=>{if(this.started)return e(r)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async r=>{r.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>tv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((r=>this.isPrimary&&!r?this.bi(e).next((()=>!1)):!!r&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Iu(e))return tt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return $p(e).get("owner").next((r=>Ce.resolve(this.vi(r))))}Ci(e){return tv(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(r=>{const n=za(r,"clientMetadata");return n.U().next((a=>{const i=this.xi(a,18e5),s=a.filter((c=>i.indexOf(c)===-1));return Ce.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const r of e)this.Vi.removeItem(this.Oi(r.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Ce.resolve(!0):$p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new dt(Ve.FAILED_PRECONDITION,z5);return!1}}return!(!this.networkEnabled||!this.inForeground)||tv(e).U().next((n=>this.xi(n,5e3).find((a=>{if(this.clientId!==a.clientId){const i=!this.networkEnabled&&a.networkEnabled,s=!this.inForeground&&a.inForeground,c=this.networkEnabled===a.networkEnabled;if(i||s&&c)return!0}return!1}))===void 0))})).next((r=>(this.isPrimary!==r&&tt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const r=new JT(e,es.oe);return this.bi(r).next((()=>this.Ci(r)))})),this.Ri.close(),this.qi()}xi(e,r){return e.filter((n=>this.Mi(n.updateTimeMs,r)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>tv(e).U().next((r=>this.xi(r,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,r){return c2.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Nne(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return l2.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,r,n){tt("IndexedDbPersistence","Starting transaction:",e);const a=r==="readonly"?"readonly":"readwrite",i=(function(d){return d===17?jre:d===16?Ere:d===15?R8:d===14?WV:d===13?GV:d===12?Nre:d===11?HV:void jt()})(this.hi);let s;return this.Ri.runTransaction(e,a,i,(c=>(s=new JT(c,this.Qr?this.Qr.next():es.oe),r==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw ua(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new dt(Ve.FAILED_PRECONDITION,UV);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return $p(e).get("owner").next((r=>{if(r!==null&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new dt(Ve.FAILED_PRECONDITION,z5)}))}Di(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return $p(e).put("owner",r)}static D(){return xu.D()}bi(e){const r=$p(e);return r.get("owner").next((n=>this.vi(n)?(tt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ce.resolve()))}Mi(e,r){const n=Date.now();return!(e<n-r)&&(!(e>n)||(ua(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;Gz()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var r;try{const n=((r=this.Vi)===null||r===void 0?void 0:r.getItem(this.Oi(e)))!==null;return tt("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ua("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ua("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function $p(t){return za(t,"owner")}function tv(t){return za(t,"clientMetadata")}function QF(t,e){let r=t.projectId;return t.isDefaultDatabase||(r+="."+t.database),"firestore/"+e+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(e,r,n,a){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=a}static Wi(e,r){let n=yr(),a=yr();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:a=a.add(i.doc.key)}return new X8(e,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Gz()?8:VV(Ba())>0?6:4})()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,a){const i={result:null};return this.Yi(e,r).next((s=>{i.result=s})).next((()=>{if(!i.result)return this.Zi(e,r,a,n).next((s=>{i.result=s}))})).next((()=>{if(i.result)return;const s=new Hne;return this.Xi(e,r,s).next((c=>{if(i.result=c,this.zi)return this.es(e,r,s,c.size)}))})).next((()=>i.result))}es(e,r,n,a){return n.documentReadCount<this.ji?(lh()<=Er.DEBUG&&tt("QueryEngine","SDK will not create cache indexes for query:",ch(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ce.resolve()):(lh()<=Er.DEBUG&&tt("QueryEngine","Query:",ch(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.Hi*a?(lh()<=Er.DEBUG&&tt("QueryEngine","The SDK decides to create cache indexes for query:",ch(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Es(r))):Ce.resolve())}Yi(e,r){if(KO(r))return Ce.resolve(null);let n=Es(r);return this.indexManager.getIndexType(e,n).next((a=>a===0?null:(r.limit!==null&&a===1&&(r=fx(r,null,"F"),n=Es(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const s=yr(...i);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const h=this.ts(r,c);return this.ns(r,h,s,d.readTime)?this.Yi(e,fx(r,null,"F")):this.rs(e,h,r,d)}))))})))))}Zi(e,r,n,a){return KO(r)||a.isEqual(Lt.min())?Ce.resolve(null):this.Ji.getDocuments(e,n).next((i=>{const s=this.ts(r,i);return this.ns(r,s,n,a)?Ce.resolve(null):(lh()<=Er.DEBUG&&tt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ch(r)),this.rs(e,s,r,BV(a,-1)).next((c=>c)))}))}ts(e,r){let n=new Sn(uF(e));return r.forEach(((a,i)=>{Jg(e,i)&&(n=n.add(i))})),n}ns(e,r,n,a){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(a)>0)}Xi(e,r,n){return lh()<=Er.DEBUG&&tt("QueryEngine","Using full collection scan to execute query:",ch(r)),this.Ji.getDocumentsMatchingQuery(e,r,Cs.min(),n)}rs(e,r,n,a){return this.Ji.getDocumentsMatchingQuery(e,n,a).next((i=>(r.forEach((s=>{i=i.insert(s.key,s)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(e,r,n,a){this.persistence=e,this.ss=r,this.serializer=a,this.os=new Dn(sr),this._s=new Ru((i=>Hd(i)),Yg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WF(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(r=>e.collect(r,this.os)))}}function YF(t,e,r,n){return new Gne(t,e,r,n)}async function ZF(t,e){const r=It(t);return await r.persistence.runTransaction("Handle user change","readonly",(n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next((i=>(a=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n)))).next((i=>{const s=[],c=[];let d=yr();for(const h of a){s.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}for(const h of i){c.push(h.batchId);for(const p of h.mutations)d=d.add(p.key)}return r.localDocuments.getDocuments(n,d).next((h=>({hs:h,removedBatchIds:s,addedBatchIds:c})))}))}))}function Wne(t,e){const r=It(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const a=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,h,p){const m=h.batch,y=m.keys();let v=Ce.resolve();return y.forEach((T=>{v=v.next((()=>p.getEntry(d,T))).next((S=>{const w=h.docVersions.get(T);Rt(w!==null),S.version.compareTo(w)<0&&(m.applyToRemoteDocument(S,h),S.isValidDocument()&&(S.setReadTime(h.commitVersion),p.addEntry(S)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(d,m)))})(r,n,e,i).next((()=>i.apply(n))).next((()=>r.mutationQueue.performConsistencyCheck(n))).next((()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId))).next((()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=yr();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d})(e)))).next((()=>r.localDocuments.getDocuments(n,a)))}))}function JF(t){const e=It(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(r=>e.Ur.getLastRemoteSnapshotVersion(r)))}function Kne(t,e){const r=It(t),n=e.snapshotVersion;let a=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const s=r.cs.newChangeBuffer({trackRemovals:!0});a=r.os;const c=[];e.targetChanges.forEach(((p,m)=>{const y=a.get(m);if(!y)return;c.push(r.Ur.removeMatchingKeys(i,p.removedDocuments,m).next((()=>r.Ur.addMatchingKeys(i,p.addedDocuments,m))));let v=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(pa.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,n)),a=a.insert(m,v),(function(S,w,j){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(y,v,p)&&c.push(r.Ur.updateTargetData(i,v))}));let d=As(),h=yr();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(i,p))})),c.push(Qne(i,s,e.documentUpdates).next((p=>{d=p.Ps,h=p.Is}))),!n.isEqual(Lt.min())){const p=r.Ur.getLastRemoteSnapshotVersion(i).next((m=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n)));c.push(p)}return Ce.waitFor(c).next((()=>s.apply(i))).next((()=>r.localDocuments.getLocalViewOfDocuments(i,d,h))).next((()=>d))})).then((i=>(r.os=a,i)))}function Qne(t,e,r){let n=yr(),a=yr();return r.forEach((i=>n=n.add(i))),e.getEntries(t,n).next((i=>{let s=As();return r.forEach(((c,d)=>{const h=i.get(c);d.isFoundDocument()!==h.isFoundDocument()&&(a=a.add(c)),d.isNoDocument()&&d.version.isEqual(Lt.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!h.isValidDocument()||d.version.compareTo(h.version)>0||d.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):tt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",d.version)})),{Ps:s,Is:a}}))}function Xne(t,e){const r=It(t);return r.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function yx(t,e){const r=It(t);return r.persistence.runTransaction("Allocate target","readwrite",(n=>{let a;return r.Ur.getTargetData(n,e).next((i=>i?(a=i,Ce.resolve(a)):r.Ur.allocateTargetId(n).next((s=>(a=new Ul(e,s,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,a).next((()=>a)))))))})).then((n=>{const a=r.os.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n}))}async function Uh(t,e,r){const n=It(t),a=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,(s=>n.persistence.referenceDelegate.removeTarget(s,a)))}catch(s){if(!Iu(s))throw s;tt("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(a.target)}function fA(t,e,r){const n=It(t);let a=Lt.min(),i=yr();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,h,p){const m=It(d),y=m._s.get(p);return y!==void 0?Ce.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)})(n,s,Es(e)).next((c=>{if(c)return a=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{i=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,r?a:Lt.min(),r?i:yr()))).next((c=>(rq(n,cF(e),c),{documents:c,Ts:i})))))}function eq(t,e){const r=It(t),n=It(r.Ur),a=r.os.get(e);return a?Promise.resolve(a.target):r.persistence.runTransaction("Get target data","readonly",(i=>n.ot(i,e).next((s=>s?s.target:null))))}function tq(t,e){const r=It(t),n=r.us.get(e)||Lt.min();return r.persistence.runTransaction("Get new document changes","readonly",(a=>r.cs.getAllFromCollectionGroup(a,e,BV(n,-1),Number.MAX_SAFE_INTEGER))).then((a=>(rq(r,e,a),a)))}function rq(t,e,r){let n=t.us.get(e)||Lt.min();r.forEach(((a,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)})),t.us.set(e,n)}function _I(t,e){return`firestore_clients_${t}_${e}`}function TI(t,e,r){let n=`firestore_mutations_${t}_${r}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function V5(t,e){return`firestore_targets_${t}_${e}`}class vx{constructor(e,r,n,a){this.user=e,this.batchId=r,this.state=n,this.error=a}static Rs(e,r,n){const a=JSON.parse(n);let i,s=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return s&&a.error&&(s=typeof a.error.message=="string"&&typeof a.error.code=="string",s&&(i=new dt(a.error.code,a.error.message))),s?new vx(e,r,a.state,i):(ua("SharedClientState",`Failed to parse mutation state for ID '${r}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mm{constructor(e,r,n){this.targetId=e,this.state=r,this.error=n}static Rs(e,r){const n=JSON.parse(r);let a,i=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return i&&n.error&&(i=typeof n.error.message=="string"&&typeof n.error.code=="string",i&&(a=new dt(n.error.code,n.error.message))),i?new mm(e,n.state,a):(ua("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xx{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Rs(e,r){const n=JSON.parse(r);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,i=L8();for(let s=0;a&&s<n.activeTargetIds.length;++s)a=FV(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return a?new xx(e,i):(ua("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Y8{constructor(e,r){this.clientId=e,this.onlineState=r}static Rs(e){const r=JSON.parse(e);return typeof r=="object"&&["Unknown","Online","Offline"].indexOf(r.onlineState)!==-1&&typeof r.clientId=="string"?new Y8(r.clientId,r.onlineState):(ua("SharedClientState",`Failed to parse online state: ${e}`),null)}}class pA{constructor(){this.activeTargetIds=L8()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F5{constructor(e,r,n,a,i){this.window=e,this.ui=r,this.persistenceKey=n,this.ps=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dn(sr),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ds=_I(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new pA),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const a=this.getItem(_I(this.persistenceKey,n));if(a){const i=xx.Rs(n,a);i&&(this.Ss=this.Ss.insert(i.clientId,i))}}this.Ns();const r=this.storage.getItem(this.xs);if(r){const n=this.Ls(r);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let r=!1;return this.Ss.forEach(((n,a)=>{a.activeTargetIds.has(e)&&(r=!0)})),r}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,r,n){this.qs(e,r,n),this.Qs(e)}addLocalQueryTarget(e,r=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(V5(this.persistenceKey,e));if(a){const i=mm.Rs(e,a);i&&(n=i.state)}}return r&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(V5(this.persistenceKey,e))}updateQueryState(e,r,n){this.$s(e,r,n)}handleUserChange(e,r,n){r.forEach((a=>{this.Qs(a)})),this.currentUser=e,n.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return tt("SharedClientState","READ",e,r),r}setItem(e,r){tt("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){tt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const r=e;if(r.storageArea===this.storage){if(tt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void ua("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(r.key!==null){if(this.Cs.test(r.key)){if(r.newValue==null){const n=this.Gs(r.key);return this.zs(n,null)}{const n=this.js(r.key,r.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(r.key)){if(r.newValue!==null){const n=this.Hs(r.key,r.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(r.key)){if(r.newValue!==null){const n=this.Ys(r.key,r.newValue);if(n)return this.Zs(n)}}else if(r.key===this.xs){if(r.newValue!==null){const n=this.Ls(r.newValue);if(n)return this.Bs(n)}}else if(r.key===this.vs){const n=(function(i){let s=es.oe;if(i!=null)try{const c=JSON.parse(i);Rt(typeof c=="number"),s=c}catch(c){ua("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(r.newValue);n!==es.oe&&this.sequenceNumberHandler(n)}else if(r.key===this.Os){const n=this.Xs(r.newValue);await Promise.all(n.map((a=>this.syncEngine.eo(a))))}}}else this.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,r,n){const a=new vx(this.currentUser,e,r,n),i=TI(this.persistenceKey,this.currentUser,e);this.setItem(i,a.Vs())}Qs(e){const r=TI(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Us(e){const r={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(r))}$s(e,r,n){const a=V5(this.persistenceKey,e),i=new mm(e,r,n);this.setItem(a,i.Vs())}Ws(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Os,r)}Gs(e){const r=this.Cs.exec(e);return r?r[1]:null}js(e,r){const n=this.Gs(e);return xx.Rs(n,r)}Hs(e,r){const n=this.Fs.exec(e),a=Number(n[1]),i=n[2]!==void 0?n[2]:null;return vx.Rs(new Si(i),a,r)}Ys(e,r){const n=this.Ms.exec(e),a=Number(n[1]);return mm.Rs(a,r)}Ls(e){return Y8.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);tt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,r){const n=r?this.Ss.insert(e,r):this.Ss.remove(e),a=this.ks(this.Ss),i=this.ks(n),s=[],c=[];return i.forEach((d=>{a.has(d)||s.push(d)})),a.forEach((d=>{i.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let r=L8();return e.forEach(((n,a)=>{r=r.unionWith(a.activeTargetIds)})),r}}class nq{constructor(){this.so=new pA,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pA,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yne{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){tt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){tt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rv=null;function q5(){return rv===null?rv=(function(){return 268435456+Math.round(2147483648*Math.random())})():rv++,"0x"+rv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jne{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="WebChannelConnection";class eae extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${a}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${i}`}get Fo(){return!1}Mo(r,n,a,i,s){const c=q5(),d=this.xo(r,n.toUriEncodedString());tt("RestConnection",`Sending RPC '${r}' ${c}:`,d,a);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,s),this.No(r,d,h,a).then((p=>(tt("RestConnection",`Received RPC '${r}' ${c}: `,p),p)),(p=>{throw Dm("RestConnection",`RPC '${r}' ${c} failed with error: `,p,"url: ",d,"request:",a),p}))}Lo(r,n,a,i,s,c){return this.Mo(r,n,a,i,s)}Oo(r,n,a){r["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Af})(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>r[s]=i)),a&&a.headers.forEach(((i,s)=>r[s]=i))}xo(r,n){const a=Zne[r];return`${this.Do}/v1/${n}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,a){const i=q5();return new Promise(((s,c)=>{const d=new OV;d.setWithCredentials(!0),d.listenOnce(IV.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Uv.NO_ERROR:const p=d.getResponseJson();tt(bi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),s(p);break;case Uv.TIMEOUT:tt(bi,`RPC '${e}' ${i} timed out`),c(new dt(Ve.DEADLINE_EXCEEDED,"Request time out"));break;case Uv.HTTP_ERROR:const m=d.getStatus();if(tt(bi,`RPC '${e}' ${i} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const T=(function(w){const j=w.toLowerCase().replace(/_/g,"-");return Object.values(Ve).indexOf(j)>=0?j:Ve.UNKNOWN})(v.status);c(new dt(T,v.message))}else c(new dt(Ve.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new dt(Ve.UNAVAILABLE,"Connection failed."));break;default:jt()}}finally{tt(bi,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(a);tt(bi,`RPC '${e}' ${i} sending request:`,a),d.send(r,"POST",h,n,15)}))}Bo(e,r,n){const a=q5(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=PV(),c=MV(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(d.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,r,n),d.encodeInitMessageHeaders=!0;const p=i.join("");tt(bi,`Creating RPC '${e}' stream ${a}: ${p}`,d);const m=s.createWebChannel(p,d);let y=!1,v=!1;const T=new Jne({Io:w=>{v?tt(bi,`Not sending because RPC '${e}' stream ${a} is closed:`,w):(y||(tt(bi,`Opening RPC '${e}' stream ${a} transport.`),m.open(),y=!0),tt(bi,`RPC '${e}' stream ${a} sending:`,w),m.send(w))},To:()=>m.close()}),S=(w,j,R)=>{w.listen(j,(I=>{try{R(I)}catch(L){setTimeout((()=>{throw L}),0)}}))};return S(m,tm.EventType.OPEN,(()=>{v||(tt(bi,`RPC '${e}' stream ${a} transport opened.`),T.yo())})),S(m,tm.EventType.CLOSE,(()=>{v||(v=!0,tt(bi,`RPC '${e}' stream ${a} transport closed`),T.So())})),S(m,tm.EventType.ERROR,(w=>{v||(v=!0,Dm(bi,`RPC '${e}' stream ${a} transport errored:`,w),T.So(new dt(Ve.UNAVAILABLE,"The operation could not be completed")))})),S(m,tm.EventType.MESSAGE,(w=>{var j;if(!v){const R=w.data[0];Rt(!!R);const I=R,L=I.error||((j=I[0])===null||j===void 0?void 0:j.error);if(L){tt(bi,`RPC '${e}' stream ${a} received error:`,L);const C=L.status;let P=(function(E){const V=Sa[E];if(V!==void 0)return _F(V)})(C),N=L.message;P===void 0&&(P=Ve.INTERNAL,N="Unknown error status: "+C+" with message "+L.message),v=!0,T.So(new dt(P,N)),m.close()}else tt(bi,`RPC '${e}' stream ${a} received:`,R),T.bo(R)}})),S(c,RV.STAT_EVENT,(w=>{w.stat===YT.PROXY?tt(bi,`RPC '${e}' stream ${a} detected buffering proxy`):w.stat===YT.NOPROXY&&tt(bi,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(){return typeof window<"u"?window:null}function Wv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t){return new sne(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e,r,n=1e3,a=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=a,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),a=Math.max(0,r-n);a>0&&tt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iq{constructor(e,r,n,a,i,s,c,d){this.ui=e,this.Ho=n,this.Jo=a,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Z8(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Ve.RESOURCE_EXHAUSTED?(ua(r.toString()),ua("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,a])=>{this.Yo===r&&this.P_(n,a)}),(n=>{e((()=>{const a=new dt(Ve.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(a)}))}))}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((a=>{n((()=>this.I_(a)))})),this.stream.onMessage((a=>{n((()=>++this.e_==1?this.E_(a):this.onNext(a)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return tt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget((()=>this.Yo===e?r():(tt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tae extends iq{constructor(e,r,n,a,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=une(this.serializer,e),n=(function(i){if(!("targetChange"in i))return Lt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Lt.min():s.readTime?Za(s.readTime):Lt.min()})(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=lA(this.serializer),r.addTarget=(function(i,s){let c;const d=s.target;if(c=dx(d)?{documents:OF(i,d)}:{query:IF(i,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=NF(i,s.resumeToken);const h=sA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}else if(s.snapshotVersion.compareTo(Lt.min())>0){c.readTime=$h(i,s.snapshotVersion.toTimestamp());const h=sA(i,s.expectedCount);h!==null&&(c.expectedCount=h)}return c})(this.serializer,e);const n=hne(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=lA(this.serializer),r.removeTarget=e,this.a_(r)}}class rae extends iq{constructor(e,r,n,a,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=dne(e.writeResults,e.commitTime),n=Za(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=lA(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map((n=>Wm(this.serializer,n)))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nae extends class{}{constructor(e,r,n,a){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new dt(Ve.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Mo(e,oA(r,n),a,i,s))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new dt(Ve.UNKNOWN,i.toString())}))}Lo(e,r,n,a,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,oA(r,n),a,s,c,i))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new dt(Ve.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class aae{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ua(r),this.D_=!1):tt("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iae{constructor(e,r,n,a,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((s=>{n.enqueueAndForget((async()=>{d0(this)&&(tt("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const h=It(d);h.L_.add(4),await n1(h),h.q_.set("Unknown"),h.L_.delete(4),await h2(h)})(this))}))})),this.q_=new aae(n,a)}}async function h2(t){if(d0(t))for(const e of t.B_)await e(!0)}async function n1(t){for(const e of t.B_)await e(!1)}function f2(t,e){const r=It(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),t7(r)?e7(r):kf(r).r_()&&J8(r,e))}function zh(t,e){const r=It(t),n=kf(r);r.N_.delete(e),n.r_()&&sq(r,e),r.N_.size===0&&(n.r_()?n.o_():d0(r)&&r.q_.set("Unknown"))}function J8(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Lt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}kf(t).A_(e)}function sq(t,e){t.Q_.xe(e),kf(t).R_(e)}function e7(t){t.Q_=new rne({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kf(t).start(),t.q_.v_()}function t7(t){return d0(t)&&!kf(t).n_()&&t.N_.size>0}function d0(t){return It(t).L_.size===0}function oq(t){t.Q_=void 0}async function sae(t){t.q_.set("Online")}async function oae(t){t.N_.forEach(((e,r)=>{J8(t,e)}))}async function lae(t,e){oq(t),t7(t)?(t.q_.M_(e),e7(t)):t.q_.set("Unknown")}async function cae(t,e,r){if(t.q_.set("Online"),e instanceof AF&&e.state===2&&e.cause)try{await(async function(a,i){const s=i.cause;for(const c of i.targetIds)a.N_.has(c)&&(await a.remoteSyncer.rejectListen(c,s),a.N_.delete(c),a.Q_.removeTarget(c))})(t,e)}catch(n){tt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bx(t,n)}else if(e instanceof Gv?t.Q_.Ke(e):e instanceof TF?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Lt.min()))try{const n=await JF(t.localStore);r.compareTo(n)>=0&&await(function(i,s){const c=i.Q_.rt(s);return c.targetChanges.forEach(((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,h)=>{const p=i.N_.get(d);if(!p)return;i.N_.set(d,p.withResumeToken(pa.EMPTY_BYTE_STRING,p.snapshotVersion)),sq(i,d);const m=new Ul(p.target,d,h,p.sequenceNumber);J8(i,m)})),i.remoteSyncer.applyRemoteEvent(c)})(t,r)}catch(n){tt("RemoteStore","Failed to raise snapshot:",n),await bx(t,n)}}async function bx(t,e,r){if(!Iu(e))throw e;t.L_.add(1),await n1(t),t.q_.set("Offline"),r||(r=()=>JF(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{tt("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await h2(t)}))}function lq(t,e){return e().catch((r=>bx(t,r,e)))}async function jf(t){const e=It(t),r=Nu(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uae(e);)try{const a=await Xne(e.localStore,n);if(a===null){e.O_.length===0&&r.o_();break}n=a.batchId,dae(e,a)}catch(a){await bx(e,a)}cq(e)&&uq(e)}function uae(t){return d0(t)&&t.O_.length<10}function dae(t,e){t.O_.push(e);const r=Nu(t);r.r_()&&r.V_&&r.m_(e.mutations)}function cq(t){return d0(t)&&!Nu(t).n_()&&t.O_.length>0}function uq(t){Nu(t).start()}async function hae(t){Nu(t).p_()}async function fae(t){const e=Nu(t);for(const r of t.O_)e.m_(r.mutations)}async function pae(t,e,r){const n=t.O_.shift(),a=V8.from(n,e,r);await lq(t,(()=>t.remoteSyncer.applySuccessfulWrite(a))),await jf(t)}async function mae(t,e){e&&Nu(t).V_&&await(async function(n,a){if((function(s){return SF(s)&&s!==Ve.ABORTED})(a.code)){const i=n.O_.shift();Nu(n).s_(),await lq(n,(()=>n.remoteSyncer.rejectFailedWrite(i.batchId,a))),await jf(n)}})(t,e),cq(t)&&uq(t)}async function NI(t,e){const r=It(t);r.asyncQueue.verifyOperationInProgress(),tt("RemoteStore","RemoteStore received new credentials");const n=d0(r);r.L_.add(3),await n1(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await h2(r)}async function mA(t,e){const r=It(t);e?(r.L_.delete(2),await h2(r)):e||(r.L_.add(2),await n1(r),r.q_.set("Unknown"))}function kf(t){return t.K_||(t.K_=(function(r,n,a){const i=It(r);return i.w_(),new tae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:sae.bind(null,t),Ro:oae.bind(null,t),mo:lae.bind(null,t),d_:cae.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),t7(t)?e7(t):t.q_.set("Unknown")):(await t.K_.stop(),oq(t))}))),t.K_}function Nu(t){return t.U_||(t.U_=(function(r,n,a){const i=It(r);return i.w_(),new rae(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,a)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hae.bind(null,t),mo:mae.bind(null,t),f_:fae.bind(null,t),g_:pae.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await jf(t)):(await t.U_.stop(),t.O_.length>0&&(tt("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,r,n,a,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=i,this.deferred=new So,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,a,i){const s=Date.now()+n,c=new r7(e,r,s,a,i);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(Ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n7(t,e){if(ua("AsyncQueue",`${e}: ${t}`),Iu(t))return new dt(Ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.comparator=e?(r,n)=>e(r,n)||bt.comparator(r.key,n.key):(r,n)=>bt.comparator(r.key,n.key),this.keyedMap=rm(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new wh(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((r,n)=>(e(r),!1)))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof wh)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,i=n.getNext().key;if(!a.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((r=>{e.push(r.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new wh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.W_=new Dn(bt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):jt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal(((r,n)=>{e.push(n)})),e}}class Vh{constructor(e,r,n,a,i,s,c,d,h){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=h}static fromInitialDocuments(e,r,n,a,i){const s=[];return r.forEach((c=>{s.push({type:0,doc:c})})),new Vh(e,r,wh.emptySet(r),s,n,a,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i2(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class yae{constructor(){this.queries=jI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const a=It(r),i=a.queries;a.queries=jI(),i.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new dt(Ve.ABORTED,"Firestore shutting down"))}}function jI(){return new Ru((t=>lF(t)),i2)}async function a7(t,e){const r=It(t);let n=3;const a=e.query;let i=r.queries.get(a);i?!i.H_()&&e.J_()&&(n=2):(i=new gae,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(a,!0);break;case 1:i.z_=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(s){const c=n7(s,`Initialization of query '${ch(e.query)}' failed`);return void e.onError(c)}r.queries.set(a,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&s7(r)}async function i7(t,e){const r=It(t),n=e.query;let a=3;const i=r.queries.get(n);if(i){const s=i.j_.indexOf(e);s>=0&&(i.j_.splice(s,1),i.j_.length===0?a=e.J_()?0:1:!i.H_()&&e.J_()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function vae(t,e){const r=It(t);let n=!1;for(const a of e){const i=a.query,s=r.queries.get(i);if(s){for(const c of s.j_)c.X_(a)&&(n=!0);s.z_=a}}n&&s7(r)}function xae(t,e,r){const n=It(t),a=n.queries.get(e);if(a)for(const i of a.j_)i.onError(r);n.queries.delete(e)}function s7(t){t.Y_.forEach((e=>{e.next()}))}var gA,kI;(kI=gA||(gA={})).ea="default",kI.Cache="cache";class o7{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Vh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Vh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{constructor(e){this.key=e}}class hq{constructor(e){this.key=e}}class bae{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=yr(),this.mutatedKeys=yr(),this.Aa=uF(e),this.Ra=new wh(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new EI,a=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,s=a,c=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,h=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((p,m)=>{const y=a.get(p),v=Jg(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let w=!1;y&&v?y.data.isEqual(v.data)?T!==S&&(n.track({type:3,doc:v}),w=!0):this.ga(y,v)||(n.track({type:2,doc:v}),w=!0,(d&&this.Aa(v,d)>0||h&&this.Aa(v,h)<0)&&(c=!0)):!y&&v?(n.track({type:0,doc:v}),w=!0):y&&!v&&(n.track({type:1,doc:y}),w=!0,(d||h)&&(c=!0)),w&&(v?(s=s.add(v),i=S?i.add(p):i.delete(p)):(s=s.delete(p),i=i.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),i=i.delete(p.key),n.track({type:1,doc:p})}return{Ra:s,fa:n,ns:c,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,a){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((p,m)=>(function(v,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jt()}};return S(v)-S(T)})(p.type,m.type)||this.Aa(p.doc,m.doc))),this.pa(n),a=a!=null&&a;const c=r&&!a?this.ya():[],d=this.da.size===0&&this.current&&!a?1:0,h=d!==this.Ea;return this.Ea=d,s.length!==0||h?{snapshot:new Vh(this.query,e.Ra,i,s,e.mutatedKeys,d===0,h,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new EI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((r=>this.Ta=this.Ta.add(r))),e.modifiedDocuments.forEach((r=>{})),e.removedDocuments.forEach((r=>this.Ta=this.Ta.delete(r))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=yr(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const r=[];return e.forEach((n=>{this.da.has(n)||r.push(new hq(n))})),this.da.forEach((n=>{e.has(n)||r.push(new dq(n))})),r}ba(e){this.Ta=e.Ts,this.da=yr();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Vh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class wae{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class Sae{constructor(e){this.key=e,this.va=!1}}class _ae{constructor(e,r,n,a,i,s){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ru((c=>lF(c)),i2),this.Ma=new Map,this.xa=new Set,this.Oa=new Dn(bt.comparator),this.Na=new Map,this.La=new K8,this.Ba={},this.ka=new Map,this.qa=Qd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Tae(t,e,r=!0){const n=p2(t);let a;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.Da()):a=await fq(n,e,r,!0),a}async function Aae(t,e){const r=p2(t);await fq(r,e,!0,!1)}async function fq(t,e,r,n){const a=await yx(t.localStore,Es(e)),i=a.targetId,s=t.sharedClientState.addLocalQueryTarget(i,r);let c;return n&&(c=await l7(t,e,i,s==="current",a.resumeToken)),t.isPrimaryClient&&r&&f2(t.remoteStore,a),c}async function l7(t,e,r,n,a){t.Ka=(m,y,v)=>(async function(S,w,j,R){let I=w.view.ma(j);I.ns&&(I=await fA(S.localStore,w.query,!1).then((({documents:N})=>w.view.ma(N,I))));const L=R&&R.targetChanges.get(w.targetId),C=R&&R.targetMismatches.get(w.targetId)!=null,P=w.view.applyChanges(I,S.isPrimaryClient,L,C);return yA(S,w.targetId,P.wa),P.snapshot})(t,m,y,v);const i=await fA(t.localStore,e,!0),s=new bae(e,i.Ts),c=s.ma(i.documents),d=r1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",a),h=s.applyChanges(c,t.isPrimaryClient,d);yA(t,r,h.wa);const p=new wae(e,r,s);return t.Fa.set(e,p),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),h.snapshot}async function Nae(t,e,r){const n=It(t),a=n.Fa.get(e),i=n.Ma.get(a.targetId);if(i.length>1)return n.Ma.set(a.targetId,i.filter((s=>!i2(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Uh(n.localStore,a.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(a.targetId),r&&zh(n.remoteStore,a.targetId),Fh(n,a.targetId)})).catch(Ou)):(Fh(n,a.targetId),await Uh(n.localStore,a.targetId,!0))}async function Eae(t,e){const r=It(t),n=r.Fa.get(e),a=r.Ma.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),zh(r.remoteStore,n.targetId))}async function jae(t,e,r){const n=h7(t);try{const a=await(function(s,c){const d=It(s),h=Yn.now(),p=c.reduce(((v,T)=>v.add(T.key)),yr());let m,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let T=As(),S=yr();return d.cs.getEntries(v,p).next((w=>{T=w,T.forEach(((j,R)=>{R.isValidDocument()||(S=S.add(j))}))})).next((()=>d.localDocuments.getOverlayedDocuments(v,T))).next((w=>{m=w;const j=[];for(const R of c){const I=Zre(R,m.get(R.key).overlayedDocument);I!=null&&j.push(new uc(R.key,I,ZV(I.value.mapValue),da.exists(!0)))}return d.mutationQueue.addMutationBatch(v,h,j,c)})).next((w=>{y=w;const j=w.applyToLocalDocumentSet(m,S);return d.documentOverlayCache.saveOverlays(v,w.batchId,j)}))})).then((()=>({batchId:y.batchId,changes:hF(m)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),(function(s,c,d){let h=s.Ba[s.currentUser.toKey()];h||(h=new Dn(sr)),h=h.insert(c,d),s.Ba[s.currentUser.toKey()]=h})(n,a.batchId,r),await Mu(n,a.changes),await jf(n.remoteStore)}catch(a){const i=n7(a,"Failed to persist write");r.reject(i)}}async function pq(t,e){const r=It(t);try{const n=await Kne(r.localStore,e);e.targetChanges.forEach(((a,i)=>{const s=r.Na.get(i);s&&(Rt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?s.va=!0:a.modifiedDocuments.size>0?Rt(s.va):a.removedDocuments.size>0&&(Rt(s.va),s.va=!1))})),await Mu(r,n,e)}catch(n){await Ou(n)}}function CI(t,e,r){const n=It(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Fa.forEach(((i,s)=>{const c=s.view.Z_(e);c.snapshot&&a.push(c.snapshot)})),(function(s,c){const d=It(s);d.onlineState=c;let h=!1;d.queries.forEach(((p,m)=>{for(const y of m.j_)y.Z_(c)&&(h=!0)})),h&&s7(d)})(n.eventManager,e),a.length&&n.Ca.d_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function kae(t,e,r){const n=It(t);n.sharedClientState.updateQueryState(e,"rejected",r);const a=n.Na.get(e),i=a&&a.key;if(i){let s=new Dn(bt.comparator);s=s.insert(i,qn.newNoDocument(i,Lt.min()));const c=yr().add(i),d=new t1(Lt.min(),new Map,new Dn(sr),s,c);await pq(n,d),n.Oa=n.Oa.remove(i),n.Na.delete(e),d7(n)}else await Uh(n.localStore,e,!1).then((()=>Fh(n,e,r))).catch(Ou)}async function Cae(t,e){const r=It(t),n=e.batch.batchId;try{const a=await Wne(r.localStore,e);u7(r,n,null),c7(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Mu(r,a)}catch(a){await Ou(a)}}async function Oae(t,e,r){const n=It(t);try{const a=await(function(s,c){const d=It(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return d.mutationQueue.lookupMutationBatch(h,c).next((m=>(Rt(m!==null),p=m.keys(),d.mutationQueue.removeMutationBatch(h,m)))).next((()=>d.mutationQueue.performConsistencyCheck(h))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(h,p,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>d.localDocuments.getDocuments(h,p)))}))})(n.localStore,e);u7(n,e,r),c7(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Mu(n,a)}catch(a){await Ou(a)}}function c7(t,e){(t.ka.get(e)||[]).forEach((r=>{r.resolve()})),t.ka.delete(e)}function u7(t,e,r){const n=It(t);let a=n.Ba[n.currentUser.toKey()];if(a){const i=a.get(e);i&&(r?i.reject(r):i.resolve(),a=a.remove(e)),n.Ba[n.currentUser.toKey()]=a}}function Fh(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((n=>{t.La.containsKey(n)||mq(t,n)}))}function mq(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(zh(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),d7(t))}function yA(t,e,r){for(const n of r)n instanceof dq?(t.La.addReference(n.key,e),Iae(t,n)):n instanceof hq?(tt("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||mq(t,n.key)):jt()}function Iae(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(tt("SyncEngine","New document in limbo: "+r),t.xa.add(n),d7(t))}function d7(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new bt(Ur.fromString(e)),n=t.qa.next();t.Na.set(n,new Sae(r)),t.Oa=t.Oa.insert(r,n),f2(t.remoteStore,new Ul(Es(Zg(r.path)),n,"TargetPurposeLimboResolution",es.oe))}}async function Mu(t,e,r){const n=It(t),a=[],i=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,r).then((h=>{var p;if((h||r)&&n.isPrimaryClient){const m=h?!h.fromCache:(p=r==null?void 0:r.targetChanges.get(d.targetId))===null||p===void 0?void 0:p.current;n.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(h){a.push(h);const m=X8.Wi(d.targetId,h);i.push(m)}})))})),await Promise.all(s),n.Ca.d_(a),await(async function(d,h){const p=It(d);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ce.forEach(h,(y=>Ce.forEach(y.$i,(v=>p.persistence.referenceDelegate.addReference(m,y.targetId,v))).next((()=>Ce.forEach(y.Ui,(v=>p.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))))))}catch(m){if(!Iu(m))throw m;tt("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const v=p.os.get(y),T=v.snapshotVersion,S=v.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,S)}}})(n.localStore,i))}async function Rae(t,e){const r=It(t);if(!r.currentUser.isEqual(e)){tt("SyncEngine","User change. New user:",e.toKey());const n=await ZF(r.localStore,e);r.currentUser=e,(function(i,s){i.ka.forEach((c=>{c.forEach((d=>{d.reject(new dt(Ve.CANCELLED,s))}))})),i.ka.clear()})(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Mu(r,n.hs)}}function Mae(t,e){const r=It(t),n=r.Na.get(e);if(n&&n.va)return yr().add(n.key);{let a=yr();const i=r.Ma.get(e);if(!i)return a;for(const s of i){const c=r.Fa.get(s);a=a.unionWith(c.view.Va)}return a}}async function Pae(t,e){const r=It(t),n=await fA(r.localStore,e.query,!0),a=e.view.ba(n);return r.isPrimaryClient&&yA(r,e.targetId,a.wa),a}async function Dae(t,e){const r=It(t);return tq(r.localStore,e).then((n=>Mu(r,n)))}async function Lae(t,e,r,n){const a=It(t),i=await(function(c,d){const h=It(c),p=It(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(m=>p.Mn(m,d).next((y=>y?h.localDocuments.getDocuments(m,y):Ce.resolve(null)))))})(a.localStore,e);i!==null?(r==="pending"?await jf(a.remoteStore):r==="acknowledged"||r==="rejected"?(u7(a,e,n||null),c7(a,e),(function(c,d){It(It(c).mutationQueue).On(d)})(a.localStore,e)):jt(),await Mu(a,i)):tt("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Bae(t,e){const r=It(t);if(p2(r),h7(r),e===!0&&r.Qa!==!0){const n=r.sharedClientState.getAllActiveQueryTargets(),a=await OI(r,n.toArray());r.Qa=!0,await mA(r.remoteStore,!0);for(const i of a)f2(r.remoteStore,i)}else if(e===!1&&r.Qa!==!1){const n=[];let a=Promise.resolve();r.Ma.forEach(((i,s)=>{r.sharedClientState.isLocalQueryTarget(s)?n.push(s):a=a.then((()=>(Fh(r,s),Uh(r.localStore,s,!0)))),zh(r.remoteStore,s)})),await a,await OI(r,n),(function(s){const c=It(s);c.Na.forEach(((d,h)=>{zh(c.remoteStore,h)})),c.La.pr(),c.Na=new Map,c.Oa=new Dn(bt.comparator)})(r),r.Qa=!1,await mA(r.remoteStore,!1)}}async function OI(t,e,r){const n=It(t),a=[],i=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await yx(n.localStore,Es(d[0]));for(const h of d){const p=n.Fa.get(h),m=await Pae(n,p);m.snapshot&&i.push(m.snapshot)}}else{const h=await eq(n.localStore,s);c=await yx(n.localStore,h),await l7(n,gq(h),s,!1,c.resumeToken)}a.push(c)}return n.Ca.d_(i),a}function gq(t){return sF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function $ae(t){return(function(r){return It(It(r).persistence).Qi()})(It(t).localStore)}async function Uae(t,e,r,n){const a=It(t);if(a.Qa)return void tt("SyncEngine","Ignoring unexpected query state notification.");const i=a.Ma.get(e);if(i&&i.length>0)switch(r){case"current":case"not-current":{const s=await tq(a.localStore,cF(i[0])),c=t1.createSynthesizedRemoteEventForCurrentChange(e,r==="current",pa.EMPTY_BYTE_STRING);await Mu(a,s,c);break}case"rejected":await Uh(a.localStore,e,!0),Fh(a,e,n);break;default:jt()}}async function zae(t,e,r){const n=p2(t);if(n.Qa){for(const a of e){if(n.Ma.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){tt("SyncEngine","Adding an already active target "+a);continue}const i=await eq(n.localStore,a),s=await yx(n.localStore,i);await l7(n,gq(i),s.targetId,!1,s.resumeToken),f2(n.remoteStore,s)}for(const a of r)n.Ma.has(a)&&await Uh(n.localStore,a,!1).then((()=>{zh(n.remoteStore,a),Fh(n,a)})).catch(Ou)}}function p2(t){const e=It(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mae.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kae.bind(null,e),e.Ca.d_=vae.bind(null,e.eventManager),e.Ca.$a=xae.bind(null,e.eventManager),e}function h7(t){const e=It(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Oae.bind(null,e),e}class Km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=d2(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return YF(this.persistence,new XF,e.initialUser,this.serializer)}Ga(e){return new KF(u2.Zr,this.serializer)}Wa(e){return new nq}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Km.provider={build:()=>new Km};class yq extends Km{constructor(e,r,n){super(),this.Ja=e,this.cacheSizeBytes=r,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await h7(this.Ja.syncEngine),await jf(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return YF(this.persistence,new XF,e.initialUser,this.serializer)}ja(e,r){const n=this.persistence.referenceDelegate.garbageCollector;return new kne(n,e.asyncQueue,r)}Ha(e,r){const n=new cre(r,this.persistence);return new lre(e.asyncQueue,n)}Ga(e){const r=QF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?Xi.withCacheSize(this.cacheSizeBytes):Xi.DEFAULT;return new Q8(this.synchronizeTabs,r,e.clientId,n,e.asyncQueue,aq(),Wv(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new nq}}class Vae extends yq{constructor(e,r){super(e,r,!1),this.Ja=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const r=this.Ja.syncEngine;this.sharedClientState instanceof F5&&(this.sharedClientState.syncEngine={no:Lae.bind(null,r),ro:Uae.bind(null,r),io:zae.bind(null,r),Qi:$ae.bind(null,r),eo:Dae.bind(null,r)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await Bae(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const r=aq();if(!F5.D(r))throw new dt(Ve.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=QF(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new F5(r,e.asyncQueue,n,e.clientId,e.initialUser)}}class Qm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>CI(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Rae.bind(null,this.syncEngine),await mA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yae})()}createDatastore(e){const r=d2(e.databaseInfo.databaseId),n=(function(i){return new eae(i)})(e.databaseInfo);return(function(i,s,c,d){return new nae(i,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return(function(n,a,i,s,c){return new iae(n,a,i,s,c)})(this.localStore,this.datastore,e.asyncQueue,(r=>CI(this.syncEngine,r,0)),(function(){return AI.D()?new AI:new Yne})())}createSyncEngine(e,r){return(function(a,i,s,c,d,h,p){const m=new _ae(a,i,s,c,d,h);return p&&(m.Qa=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await(async function(a){const i=It(a);tt("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await n1(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Qm.provider={build:()=>new Qm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ua("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout((()=>{this.muted||e(r)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fae{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new dt(Ve.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const r=await(async function(a,i){const s=It(a),c={documents:i.map((m=>Gm(s.serializer,m)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,Ur.emptyPath(),c,i.length),h=new Map;d.forEach((m=>{const y=cne(s.serializer,m);h.set(y.key.toString(),y)}));const p=[];return i.forEach((m=>{const y=h.get(m.toString());Rt(!!y),p.push(y)})),p})(this.datastore,e);return r.forEach((n=>this.recordVersion(n))),r}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new e1(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((r=>{e.delete(r.key.toString())})),e.forEach(((r,n)=>{const a=bt.fromPath(n);this.mutations.push(new U8(a,this.precondition(a)))})),await(async function(n,a){const i=It(n),s={writes:a.map((c=>Wm(i.serializer,c)))};await i.Mo("Commit",i.serializer.databaseId,Ur.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw jt();r=Lt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!r.isEqual(n))throw new dt(Ve.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(Lt.min())?da.exists(!1):da.updateTime(r):da.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(Lt.min()))throw new dt(Ve.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return da.updateTime(r)}return da.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qae{constructor(e,r,n,a,i){this.asyncQueue=e,this.datastore=r,this.options=n,this.updateFunction=a,this.deferred=i,this._u=n.maxAttempts,this.t_=new Z8(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new Fae(this.datastore),r=this.cu(e);r&&r.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((a=>{this.lu(a)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const r=this.updateFunction(e);return!Xg(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const r=e.code;return r==="aborted"||r==="failed-precondition"||r==="already-exists"||!SF(r)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hae{constructor(e,r,n,a,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Si.UNAUTHENTICATED,this.clientId=DV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async s=>{tt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(tt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new So;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=n7(r,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function H5(t,e){t.asyncQueue.verifyOperationInProgress(),tt("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener((async a=>{n.isEqual(a)||(await ZF(e.localStore,a),n=a)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function II(t,e){t.asyncQueue.verifyOperationInProgress();const r=await Gae(t);tt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener((n=>NI(e.remoteStore,n))),t.setAppCheckTokenChangeListener(((n,a)=>NI(e.remoteStore,a))),t._onlineComponents=e}async function Gae(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){tt("FirestoreClient","Using user provided OfflineComponentProvider");try{await H5(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!(function(a){return a.name==="FirebaseError"?a.code===Ve.FAILED_PRECONDITION||a.code===Ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(r))throw r;Dm("Error using user provided cache. Falling back to memory cache: "+r),await H5(t,new Km)}}else tt("FirestoreClient","Using default OfflineComponentProvider"),await H5(t,new Km);return t._offlineComponents}async function p7(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(tt("FirestoreClient","Using user provided OnlineComponentProvider"),await II(t,t._uninitializedComponentsProvider._online)):(tt("FirestoreClient","Using default OnlineComponentProvider"),await II(t,new Qm))),t._onlineComponents}function Wae(t){return p7(t).then((e=>e.syncEngine))}function Kae(t){return p7(t).then((e=>e.datastore))}async function wx(t){const e=await p7(t),r=e.eventManager;return r.onListen=Tae.bind(null,e.syncEngine),r.onUnlisten=Nae.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=Aae.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=Eae.bind(null,e.syncEngine),r}function Qae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new f7({next:y=>{p.Za(),s.enqueueAndForget((()=>i7(i,m)));const v=y.docs.has(c);!v&&y.fromCache?h.reject(new dt(Ve.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&d&&d.source==="server"?h.reject(new dt(Ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new o7(Zg(c.path),p,{includeMetadataChanges:!0,_a:!0});return a7(i,m)})(await wx(t),t.asyncQueue,e,r,n))),n.promise}function Xae(t,e,r={}){const n=new So;return t.asyncQueue.enqueueAndForget((async()=>(function(i,s,c,d,h){const p=new f7({next:y=>{p.Za(),s.enqueueAndForget((()=>i7(i,m))),y.fromCache&&d.source==="server"?h.reject(new dt(Ve.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new o7(c,p,{includeMetadataChanges:!0,_a:!0});return a7(i,m)})(await wx(t),t.asyncQueue,e,r,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t,e,r){if(!r)throw new dt(Ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Yae(t,e,r,n){if(e===!0&&n===!0)throw new dt(Ve.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function MI(t){if(!bt.isDocumentKey(t))throw new dt(Ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PI(t){if(bt.isDocumentKey(t))throw new dt(Ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function m2(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":jt()}function as(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new dt(Ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=m2(t);throw new dt(Ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function Zae(t,e){if(e<=0)throw new dt(Ve.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new dt(Ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new dt(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Yae("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vq((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new dt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new dt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new dt(Ve.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,a){return n.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class m7{constructor(e,r,n,a){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(Ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dt(Ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DI(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new Zte;switch(n.type){case"firstParty":return new tre(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new dt(Ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(r){const n=RI.get(r);n&&(tt("ComponentProvider","Removing Datastore"),RI.delete(r),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new dc(this.firestore,e,this._query)}}class fi{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class bu extends dc{constructor(e,r,n){super(e,r,Zg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new bt(e))}withConverter(e){return new bu(this.firestore,e,this._path)}}function Wt(t,e,...r){if(t=_n(t),xq("collection","path",e),t instanceof m7){const n=Ur.fromString(e,...r);return PI(n),new bu(t,null,n)}{if(!(t instanceof fi||t instanceof bu))throw new dt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ur.fromString(e,...r));return PI(n),new bu(t.firestore,null,n)}}function lt(t,e,...r){if(t=_n(t),arguments.length===1&&(e=DV.newId()),xq("doc","path",e),t instanceof m7){const n=Ur.fromString(e,...r);return MI(n),new fi(t,null,new bt(n))}{if(!(t instanceof fi||t instanceof bu))throw new dt(Ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ur.fromString(e,...r));return MI(n),new fi(t.firestore,t instanceof bu?t.converter:null,new bt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Z8(this,"async_queue_retry"),this.Vu=()=>{const n=Wv();n&&tt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=Wv();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=Wv();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const r=new So;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise))).then((()=>r.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Iu(e))throw e;tt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const r=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const a=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw ua("INTERNAL UNHANDLED ERROR: ",a),n})).then((n=>(this.du=!1,n))))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const a=r7.createAndSchedule(this,e,r,n,(i=>this.yu(i)));return this.Tu.push(a),a}fu(){this.Eu&&jt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((r,n)=>r.targetTimeMs-n.targetTimeMs));for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}function BI(t){return(function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const i of n)if(i in a&&typeof a[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Xo extends m7{constructor(e,r,n,a){super(e,r,n,a),this.type="firestore",this._queue=new LI,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LI(e),this._firestoreClient=void 0,await e}}}function Jae(t,e,r){r||(r="(default)");const n=Gg(t,"firestore");if(n.isInitialized(r)){const a=n.getImmediate({identifier:r}),i=n.getOptions(r);if(Oh(i,e))return a;throw new dt(Ve.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new dt(Ve.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new dt(Ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:r})}function a1(t){if(t._terminated)throw new dt(Ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eie(t),t._firestoreClient}function eie(t){var e,r,n;const a=t._freezeSettings(),i=(function(c,d,h,p){return new Cre(c,d,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,vq(p.experimentalLongPollingOptions),p.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((r=a.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=a.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new Hae(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xd(pa.fromBase64String(e))}catch(r){throw new dt(Ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Xd(pa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new dt(Ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new dt(Ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new dt(Ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sr(this._lat,e._lat)||sr(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e){this._values=(e||[]).map((r=>r))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,a){if(n.length!==a.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==a[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tie=/^__.*__$/;class rie{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new uc(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ef(e,this.data,r,this.fieldTransforms)}}class bq{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new uc(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function wq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jt()}}class g2{constructor(e,r,n,a,i,s){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new g2(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.Ou(e),a}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),a=this.Fu({path:n,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Sx(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((r=>e.isPrefixOf(r)))!==void 0||this.fieldTransforms.find((r=>e.isPrefixOf(r.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wq(this.Cu)&&tie.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class nie{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||d2(e)}Qu(e,r,n,a=!1){return new g2({Cu:e,methodName:r,qu:n,path:Xn.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function o1(t){const e=t._freezeSettings(),r=d2(t._databaseId);return new nie(t._databaseId,!!e.ignoreUndefinedProperties,r)}function v7(t,e,r,n,a,i={}){const s=t.Qu(i.merge||i.mergeFields?2:0,e,r,a);w7("Data must be an object, but it was:",s,n);const c=Tq(n,s);let d,h;if(i.merge)d=new ts(s.fieldMask),h=s.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=vA(e,m,r);if(!s.contains(y))throw new dt(Ve.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Nq(p,y)||p.push(y)}d=new ts(p),h=s.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,h=s.fieldTransforms;return new rie(new hi(c),d,h)}class y2 extends s1{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y2}}function aie(t,e,r){return new g2({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class x7 extends s1{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=aie(this,e,!0),n=this.Ku.map((i=>Cf(i,r))),a=new Gd(n);return new $8(e.path,a)}isEqual(e){return e instanceof x7&&Oh(this.Ku,e.Ku)}}class b7 extends s1{constructor(e,r){super(e),this.$u=r}_toFieldTransform(e){const r=new Bh(e.serializer,mF(e.serializer,this.$u));return new $8(e.path,r)}isEqual(e){return e instanceof b7&&this.$u===e.$u}}function Sq(t,e,r,n){const a=t.Qu(1,e,r);w7("Data must be an object, but it was:",a,n);const i=[],s=hi.empty();u0(n,((d,h)=>{const p=S7(e,d,r);h=_n(h);const m=a.Nu(p);if(h instanceof y2)i.push(p);else{const y=Cf(h,m);y!=null&&(i.push(p),s.set(p,y))}}));const c=new ts(i);return new bq(s,c,a.fieldTransforms)}function _q(t,e,r,n,a,i){const s=t.Qu(1,e,r),c=[vA(e,n,r)],d=[a];if(i.length%2!=0)throw new dt(Ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)c.push(vA(e,i[y])),d.push(i[y+1]);const h=[],p=hi.empty();for(let y=c.length-1;y>=0;--y)if(!Nq(h,c[y])){const v=c[y];let T=d[y];T=_n(T);const S=s.Nu(v);if(T instanceof y2)h.push(v);else{const w=Cf(T,S);w!=null&&(h.push(v),p.set(v,w))}}const m=new ts(h);return new bq(p,m,s.fieldTransforms)}function iie(t,e,r,n=!1){return Cf(r,t.Qu(n?4:3,e))}function Cf(t,e){if(Aq(t=_n(t)))return w7("Unsupported field value:",e,t),Tq(t,e);if(t instanceof s1)return(function(n,a){if(!wq(a.Cu))throw a.Bu(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(a);i&&a.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,a){const i=[];let s=0;for(const c of n){let d=Cf(c,a.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}})(t,e)}return(function(n,a){if((n=_n(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return mF(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Yn.fromDate(n);return{timestampValue:$h(a.serializer,i)}}if(n instanceof Yn){const i=new Yn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$h(a.serializer,i)}}if(n instanceof g7)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Xd)return{bytesValue:NF(a.serializer,n._byteString)};if(n instanceof fi){const i=a.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw a.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:H8(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof y7)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return B8(c.serializer,d)}))}}}}}})(n,a);throw a.Bu(`Unsupported field value: ${m2(n)}`)})(t,e)}function Tq(t,e){const r={};return KV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):u0(t,((n,a)=>{const i=Cf(a,e.Mu(n));i!=null&&(r[n]=i)})),{mapValue:{fields:r}}}function Aq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yn||t instanceof g7||t instanceof Xd||t instanceof fi||t instanceof s1||t instanceof y7)}function w7(t,e,r){if(!Aq(r)||!(function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)})(r)){const n=m2(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function vA(t,e,r){if((e=_n(e))instanceof i1)return e._internalPath;if(typeof e=="string")return S7(t,e);throw Sx("Field path arguments must be of type string or ",t,!1,void 0,r)}const sie=new RegExp("[~\\*/\\[\\]]");function S7(t,e,r){if(e.search(sie)>=0)throw Sx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new i1(...e.split("."))._internalPath}catch{throw Sx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Sx(t,e,r,n,a){const i=n&&!n.isEmpty(),s=a!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(i||s)&&(d+=" (found",i&&(d+=` in field ${n}`),s&&(d+=` in document ${a}`),d+=")"),new dt(Ve.INVALID_ARGUMENT,c+t+d)}function Nq(t,e){return t.some((r=>r.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,r,n,a,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=a,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oie(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(v2("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class oie extends _x{data(){return super.data()}}function v2(t,e){return typeof e=="string"?S7(t,e):e instanceof i1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new dt(Ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _7{}class T7 extends _7{}function on(t,e,...r){let n=[];e instanceof _7&&n.push(e),n=n.concat(r),(function(i){const s=i.filter((d=>d instanceof A7)).length,c=i.filter((d=>d instanceof x2)).length;if(s>1||s>0&&c>0)throw new dt(Ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const a of n)t=a._apply(t);return t}class x2 extends T7{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new x2(e,r,n)}_apply(e){const r=this._parse(e);return jq(e._query,r),new dc(e.firestore,e.converter,iA(e._query,r))}_parse(e){const r=o1(e.firestore);return(function(i,s,c,d,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new dt(Ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){UI(m,p);const v=[];for(const T of m)v.push($I(d,i,T));y={arrayValue:{values:v}}}else y=$I(d,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||UI(m,p),y=iie(c,s,m,p==="in"||p==="not-in");return jr.create(h,p,y)})(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function In(t,e,r){const n=e,a=v2("where",t);return x2._create(a,n,r)}class A7 extends _7{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new A7(e,r)}_parse(e){const r=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return r.length===1?r[0]:cn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:((function(a,i){let s=a;const c=i.getFlattenedFilters();for(const d of c)jq(s,d),s=iA(s,d)})(e._query,r),new dc(e.firestore,e.converter,iA(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class N7 extends T7{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new N7(e,r)}_apply(e){const r=(function(a,i,s){if(a.startAt!==null)throw new dt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new dt(Ve.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qm(i,s)})(e._query,this._field,this._direction);return new dc(e.firestore,e.converter,(function(a,i){const s=a.explicitOrderBy.concat([i]);return new Nf(a.path,a.collectionGroup,s,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,r))}}function cd(t,e="asc"){const r=e,n=v2("orderBy",t);return N7._create(n,r)}class E7 extends T7{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new E7(e,r,n)}_apply(e){return new dc(e.firestore,e.converter,fx(e._query,this._limit,this._limitType))}}function El(t){return Zae("limit",t),E7._create("limit",t,"F")}function $I(t,e,r){if(typeof(r=_n(r))=="string"){if(r==="")throw new dt(Ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oF(e)&&r.indexOf("/")!==-1)throw new dt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Ur.fromString(r));if(!bt.isDocumentKey(n))throw new dt(Ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vm(t,new bt(n))}if(r instanceof fi)return Vm(t,r._key);throw new dt(Ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${m2(r)}.`)}function UI(t,e){if(!Array.isArray(t)||t.length===0)throw new dt(Ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jq(t,e){const r=(function(a,i){for(const s of a)for(const c of s.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(r!==null)throw r===e.op?new dt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new dt(Ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class kq{convertValue(e,r="none"){switch(qd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw jt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return u0(e,((a,i)=>{n[a]=this.convertValue(i,r)})),n}convertVectorValue(e){var r,n,a;const i=(a=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||a===void 0?void 0:a.map((s=>Fn(s.doubleValue)));return new y7(i)}convertGeoPoint(e){return new g7(Fn(e.latitude),Fn(e.longitude))}convertArray(e,r){return(e.values||[]).map((n=>this.convertValue(n,r)))}convertServerTimestamp(e,r){switch(r){case"previous":const n=P8(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Um(e));default:return null}}convertTimestamp(e){const r=ec(e);return new Yn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Ur.fromString(e);Rt(DF(n));const a=new Fd(n.get(1),n.get(3)),i=new bt(n.popFirst(5));return a.isEqual(r)||ua(`Document ${i} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j7(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class lie extends kq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class k7 extends _x{constructor(e,r,n,a,i,s){super(e,r,n,a,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Kv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(v2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Kv extends k7{data(e={}){return super.data(e)}}class Cq{constructor(e,r,n,a){this._firestore=e,this._userDataWriter=r,this._snapshot=a,this.metadata=new fh(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach((r=>e.push(r))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach((n=>{e.call(r,new Kv(this._firestore,this._userDataWriter,n.key,n,new fh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new dt(Ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=(function(a,i){if(a._snapshot.oldDocs.isEmpty()){let s=0;return a._snapshot.docChanges.map((c=>{const d=new Kv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new fh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const d=new Kv(a._firestore,a._userDataWriter,c.doc.key,c.doc,new fh(a._snapshot.mutatedKeys.has(c.doc.key),a._snapshot.fromCache),a.query.converter);let h=-1,p=-1;return c.type!==0&&(h=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:cie(c.type),doc:d,oldIndex:h,newIndex:p}}))}})(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function cie(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){t=as(t,fi);const e=as(t.firestore,Xo);return Qae(a1(e),t._key).then((r=>Oq(e,t,r)))}class b2 extends kq{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xd(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,r)}}function th(t){t=as(t,dc);const e=as(t.firestore,Xo),r=a1(e),n=new b2(e);return Eq(t._query),Xae(r,t._query).then((a=>new Cq(e,n,t,a)))}function ta(t,e,r){t=as(t,fi);const n=as(t.firestore,Xo),a=j7(t.converter,e,r);return w2(n,[v7(o1(n),"setDoc",t._key,a,t.converter!==null,r).toMutation(t._key,da.none())])}function xr(t,e,r,...n){t=as(t,fi);const a=as(t.firestore,Xo),i=o1(a);let s;return s=typeof(e=_n(e))=="string"||e instanceof i1?_q(i,"updateDoc",t._key,e,r,n):Sq(i,"updateDoc",t._key,e),w2(a,[s.toMutation(t._key,da.exists(!0))])}function Wa(t){return w2(as(t.firestore,Xo),[new e1(t._key,da.none())])}function ud(t,e){const r=as(t.firestore,Xo),n=lt(t),a=j7(t.converter,e);return w2(r,[v7(o1(t.firestore),"addDoc",n._key,a,t.converter!==null,{}).toMutation(n._key,da.exists(!1))]).then((()=>n))}function ln(t,...e){var r,n,a;t=_n(t);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||BI(e[s])||(i=e[s],s++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(BI(e[s])){const m=e[s];e[s]=(r=m.next)===null||r===void 0?void 0:r.bind(m),e[s+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[s+2]=(a=m.complete)===null||a===void 0?void 0:a.bind(m)}let d,h,p;if(t instanceof fi)h=as(t.firestore,Xo),p=Zg(t._key.path),d={next:m=>{e[s]&&e[s](Oq(h,t,m))},error:e[s+1],complete:e[s+2]};else{const m=as(t,dc);h=as(m.firestore,Xo),p=m._query;const y=new b2(h);d={next:v=>{e[s]&&e[s](new Cq(h,y,m,v))},error:e[s+1],complete:e[s+2]},Eq(t._query)}return(function(y,v,T,S){const w=new f7(S),j=new o7(v,w,T);return y.asyncQueue.enqueueAndForget((async()=>a7(await wx(y),j))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>i7(await wx(y),j)))}})(a1(h),p,c,d)}function w2(t,e){return(function(n,a){const i=new So;return n.asyncQueue.enqueueAndForget((async()=>jae(await Wae(n),a,i))),i.promise})(a1(t),e)}function Oq(t,e,r){const n=r.docs.get(e._key),a=new b2(t);return new k7(t,a,e._key,n,new fh(r.hasPendingWrites,r.fromCache),e.converter)}class uie{constructor(e){let r;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),r=e.tabManager):(r=pie(),r._initialize(e)),this._onlineComponentProvider=r._onlineComponentProvider,this._offlineComponentProvider=r._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function die(t){return new uie(t)}class hie{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new yq(r,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class fie{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Qm.provider,this._offlineComponentProvider={build:r=>new Vae(r,e==null?void 0:e.cacheSizeBytes)}}}function pie(t){return new hie(void 0)}function mie(){return new fie}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gie={maxAttempts:5};function Up(t,e){if((t=_n(t)).firestore!==e)throw new dt(Ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie extends class{constructor(r,n){this._firestore=r,this._transaction=n,this._dataReader=o1(r)}get(r){const n=Up(r,this._firestore),a=new lie(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return jt();const s=i[0];if(s.isFoundDocument())return new _x(this._firestore,a,s.key,s,n.converter);if(s.isNoDocument())return new _x(this._firestore,a,n._key,null,n.converter);throw jt()}))}set(r,n,a){const i=Up(r,this._firestore),s=j7(i.converter,n,a),c=v7(this._dataReader,"Transaction.set",i._key,s,i.converter!==null,a);return this._transaction.set(i._key,c),this}update(r,n,a,...i){const s=Up(r,this._firestore);let c;return c=typeof(n=_n(n))=="string"||n instanceof i1?_q(this._dataReader,"Transaction.update",s._key,n,a,i):Sq(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(r){const n=Up(r,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Up(e,this._firestore),n=new b2(this._firestore);return super.get(e).then((a=>new k7(this._firestore,n,r._key,a._document,new fh(!1,!1),r.converter)))}}function G5(t,e,r){t=as(t,Xo);const n=Object.assign(Object.assign({},gie),r);return(function(i){if(i.maxAttempts<1)throw new dt(Ve.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(i,s,c){const d=new So;return i.asyncQueue.enqueueAndForget((async()=>{const h=await Kae(i);new qae(i.asyncQueue,h,c,s,d).au()})),d.promise})(a1(t),(a=>e(new yie(t,a))),n)}function vie(...t){return new x7("arrayUnion",t)}function xie(t){return new b7("increment",t)}(function(e,r=!0){(function(a){Af=a})(c0),_u(new Yl("firestore",((n,{instanceIdentifier:a,options:i})=>{const s=n.getProvider("app").getImmediate(),c=new Xo(new Jte(n.getProvider("auth-internal")),new nre(n.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new dt(Ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fd(h.options.projectId,p)})(s,a),s);return i=Object.assign({useFetchStreams:r},i),c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),Ys(IO,"4.7.3",e),Ys(IO,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq="firebasestorage.googleapis.com",Rq="storageBucket",bie=120*1e3,wie=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends No{constructor(e,r,n=0){super(W5(e),`Firebase Storage: ${r} (${W5(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ia.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return W5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var aa;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(aa||(aa={}));function W5(t){return"storage/"+t}function C7(){const t="An unknown error occurred, please check the error payload for server response.";return new ia(aa.UNKNOWN,t)}function Sie(t){return new ia(aa.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function _ie(t){return new ia(aa.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Tie(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ia(aa.UNAUTHENTICATED,t)}function Aie(){return new ia(aa.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Nie(t){return new ia(aa.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function Eie(){return new ia(aa.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jie(){return new ia(aa.CANCELED,"User canceled the upload/download.")}function kie(t){return new ia(aa.INVALID_URL,"Invalid URL '"+t+"'.")}function Cie(t){return new ia(aa.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Oie(){return new ia(aa.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rq+"' property when initializing the app?")}function Iie(){return new ia(aa.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Rie(){return new ia(aa.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Mie(t){return new ia(aa.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xA(t){return new ia(aa.INVALID_ARGUMENT,t)}function Mq(){return new ia(aa.APP_DELETED,"The Firebase app was deleted.")}function Pie(t){return new ia(aa.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gm(t,e){return new ia(aa.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function zp(t){throw new ia(aa.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Ns.makeFromUrl(e,r)}catch{return new Ns(e,"")}if(n.path==="")return n;throw Cie(e)}static makeFromUrl(e,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function i(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+a+s,"i"),d={bucket:1,path:3};function h(L){L.path_=decodeURIComponent(L.path)}const p="v[A-Za-z0-9_]+",m=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${p}/b/${a}/o${y}`,"i"),T={bucket:1,path:3},S=r===Iq?"(?:storage.googleapis.com|storage.cloud.google.com)":r,w="([^?#]*)",j=new RegExp(`^https?://${S}/${a}/${w}`,"i"),I=[{regex:c,indices:d,postModify:i},{regex:v,indices:T,postModify:h},{regex:j,indices:{bucket:1,path:2},postModify:h}];for(let L=0;L<I.length;L++){const C=I[L],P=C.regex.exec(e);if(P){const N=P[C.indices.bucket];let A=P[C.indices.path];A||(A=""),n=new Ns(N,A),C.postModify(n);break}}if(n==null)throw kie(e);return n}}class Die{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lie(t,e,r){let n=1,a=null,i=null,s=!1,c=0;function d(){return c===2}let h=!1;function p(...w){h||(h=!0,e.apply(null,w))}function m(w){a=setTimeout(()=>{a=null,t(v,d())},w)}function y(){i&&clearTimeout(i)}function v(w,...j){if(h){y();return}if(w){y(),p.call(null,w,...j);return}if(d()||s){y(),p.call(null,w,...j);return}n<64&&(n*=2);let I;c===1?(c=2,I=0):I=(n+Math.random())*1e3,m(I)}let T=!1;function S(w){T||(T=!0,y(),!h&&(a!==null?(w||(c=2),clearTimeout(a),m(0)):w||(c=1)))}return m(0),i=setTimeout(()=>{s=!0,S(!0)},r),S}function Bie(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ie(t){return t!==void 0}function Uie(t){return typeof t=="object"&&!Array.isArray(t)}function O7(t){return typeof t=="string"||t instanceof String}function zI(t){return I7()&&t instanceof Blob}function I7(){return typeof Blob<"u"}function VI(t,e,r,n){if(n<e)throw xA(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw xA(`Invalid value for '${t}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e,r){let n=e;return r==null&&(n=`https://${e}`),`${r}://${n}/v0${t}`}function Pq(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const a=e(n)+"="+e(t[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Dd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Dd||(Dd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zie(t,e){const r=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||a||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vie{constructor(e,r,n,a,i,s,c,d,h,p,m,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(n,a)=>{if(a){n(!1,new nv(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const s=c=>{const d=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,h)};this.progressCallback_!==null&&i.addUploadProgressListener(s),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(s),this.pendingConnection_=null;const c=i.getErrorCode()===Dd.NO_ERROR,d=i.getStatus();if(!c||zie(d,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Dd.ABORT;n(!1,new nv(!1,null,p));return}const h=this.successCodes_.indexOf(d)!==-1;n(!0,new nv(h,i))})},r=(n,a)=>{const i=this.resolve_,s=this.reject_,c=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());$ie(d)?i(d):i()}catch(d){s(d)}else if(c!==null){const d=C7();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(a.canceled){const d=this.appDelete_?Mq():jie();s(d)}else{const d=Eie();s(d)}};this.canceled_?r(!1,new nv(!1,null,!0)):this.backoffId_=Lie(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Bie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nv{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function Fie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Hie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Gie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Wie(t,e,r,n,a,i,s=!0){const c=Pq(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Hie(h,e),Fie(h,r),qie(h,i),Gie(h,n),new Vie(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Qie(...t){const e=Kie();if(e!==void 0){const r=new e;for(let n=0;n<t.length;n++)r.append(t[n]);return r.getBlob()}else{if(I7())return new Blob(t);throw new ia(aa.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Xie(t,e,r){return t.webkitSlice?t.webkitSlice(e,r):t.mozSlice?t.mozSlice(e,r):t.slice?t.slice(e,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yie(t){if(typeof atob>"u")throw Mie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K5{constructor(e,r){this.data=e,this.contentType=r||null}}function Zie(t,e){switch(t){case Uo.RAW:return new K5(Dq(e));case Uo.BASE64:case Uo.BASE64URL:return new K5(Lq(t,e));case Uo.DATA_URL:return new K5(ese(e),tse(e))}throw C7()}function Dq(t){const e=[];for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<t.length-1&&(t.charCodeAt(r+1)&64512)===56320))e.push(239,191,189);else{const i=n,s=t.charCodeAt(++r);n=65536|(i&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function Jie(t){let e;try{e=decodeURIComponent(t)}catch{throw gm(Uo.DATA_URL,"Malformed data URL.")}return Dq(e)}function Lq(t,e){switch(t){case Uo.BASE64:{const a=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Uo.BASE64URL:{const a=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(a||i)throw gm(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Yie(e)}catch(a){throw a.message.includes("polyfill")?a:gm(t,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class Bq{constructor(e){this.base64=!1,this.contentType=null;const r=e.match(/^data:([^,]+)?,/);if(r===null)throw gm(Uo.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=rse(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function ese(t){const e=new Bq(t);return e.base64?Lq(Uo.BASE64,e.rest):Jie(e.rest)}function tse(t){return new Bq(t).contentType}function rse(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,r){let n=0,a="";zI(e)?(this.data_=e,n=e.size,a=e.type):e instanceof ArrayBuffer?(r?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(r?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,r){if(zI(this.data_)){const n=this.data_,a=Xie(n,e,r);return a===null?null:new au(a)}else{const n=new Uint8Array(this.data_.buffer,e,r-e);return new au(n,!0)}}static getBlob(...e){if(I7()){const r=e.map(n=>n instanceof au?n.data_:n);return new au(Qie.apply(null,r))}else{const r=e.map(s=>O7(s)?Zie(Uo.RAW,s).data:s.data_);let n=0;r.forEach(s=>{n+=s.byteLength});const a=new Uint8Array(n);let i=0;return r.forEach(s=>{for(let c=0;c<s.length;c++)a[i++]=s[c]}),new au(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $q(t){let e;try{e=JSON.parse(t)}catch{return null}return Uie(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nse(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ase(t,e){const r=e.split("/").filter(n=>n.length>0).join("/");return t.length===0?r:t+"/"+r}function Uq(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ise(t,e){return e}class Ci{constructor(e,r,n,a){this.server=e,this.local=r||e,this.writable=!!n,this.xform=a||ise}}let av=null;function sse(t){return!O7(t)||t.length<2?t:Uq(t)}function zq(){if(av)return av;const t=[];t.push(new Ci("bucket")),t.push(new Ci("generation")),t.push(new Ci("metageneration")),t.push(new Ci("name","fullPath",!0));function e(i,s){return sse(s)}const r=new Ci("name");r.xform=e,t.push(r);function n(i,s){return s!==void 0?Number(s):s}const a=new Ci("size");return a.xform=n,t.push(a),t.push(new Ci("timeCreated")),t.push(new Ci("updated")),t.push(new Ci("md5Hash",null,!0)),t.push(new Ci("cacheControl",null,!0)),t.push(new Ci("contentDisposition",null,!0)),t.push(new Ci("contentEncoding",null,!0)),t.push(new Ci("contentLanguage",null,!0)),t.push(new Ci("contentType",null,!0)),t.push(new Ci("metadata","customMetadata",!0)),av=t,av}function ose(t,e){function r(){const n=t.bucket,a=t.fullPath,i=new Ns(n,a);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:r})}function lse(t,e,r){const n={};n.type="file";const a=r.length;for(let i=0;i<a;i++){const s=r[i];n[s.local]=s.xform(n,e[s.server])}return ose(n,t),n}function Vq(t,e,r){const n=$q(e);return n===null?null:lse(t,n,r)}function cse(t,e,r,n){const a=$q(e);if(a===null||!O7(a.downloadTokens))return null;const i=a.downloadTokens;if(i.length===0)return null;const s=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+s(p)+"/o/"+s(m),v=S2(y,r,n),T=Pq({alt:"media",token:h});return v+T})[0]}function use(t,e){const r={},n=e.length;for(let a=0;a<n;a++){const i=e[a];i.writable&&(r[i.server]=t[i.local])}return JSON.stringify(r)}class R7{constructor(e,r,n,a){this.url=e,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fq(t){if(!t)throw C7()}function dse(t,e){function r(n,a){const i=Vq(t,a,e);return Fq(i!==null),i}return r}function hse(t,e){function r(n,a){const i=Vq(t,a,e);return Fq(i!==null),cse(i,a,t.host,t._protocol)}return r}function qq(t){function e(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Aie():a=Tie():r.getStatus()===402?a=_ie(t.bucket):r.getStatus()===403?a=Nie(t.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return e}function Hq(t){const e=qq(t);function r(n,a){let i=e(n,a);return n.getStatus()===404&&(i=Sie(t.path)),i.serverResponse=a.serverResponse,i}return r}function fse(t,e,r){const n=e.fullServerUrl(),a=S2(n,t.host,t._protocol),i="GET",s=t.maxOperationRetryTime,c=new R7(a,i,hse(t,r),s);return c.errorHandler=Hq(e),c}function pse(t,e){const r=e.fullServerUrl(),n=S2(r,t.host,t._protocol),a="DELETE",i=t.maxOperationRetryTime;function s(d,h){}const c=new R7(n,a,s,i);return c.successCodes=[200,204],c.errorHandler=Hq(e),c}function mse(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gse(t,e,r){const n=Object.assign({},r);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=mse(null,e)),n}function yse(t,e,r,n,a){const i=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let I="";for(let L=0;L<2;L++)I=I+Math.random().toString().slice(2);return I}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const h=gse(e,n,a),p=use(h,r),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+d+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+d+"--",v=au.getBlob(m,n,y);if(v===null)throw Iie();const T={name:h.fullPath},S=S2(i,t.host,t._protocol),w="POST",j=t.maxUploadRetryTime,R=new R7(S,w,dse(t,r),j);return R.urlParams=T,R.headers=s,R.body=v.uploadData(),R.errorHandler=qq(e),R}class vse{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dd.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Dd.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Dd.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,r,n,a){if(this.sent_)throw zp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,e,!0),a!==void 0)for(const i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class xse extends vse{initXhr(){this.xhr_.responseType="text"}}function M7(){return new xse}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,r){this._service=e,r instanceof Ns?this._location=r:this._location=Ns.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new Yd(e,r)}get root(){const e=new Ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Uq(this._location.path)}get storage(){return this._service}get parent(){const e=nse(this._location.path);if(e===null)return null;const r=new Ns(this._location.bucket,e);return new Yd(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw Pie(e)}}function bse(t,e,r){t._throwIfRoot("uploadBytes");const n=yse(t.storage,t._location,zq(),new au(e,!0),r);return t.storage.makeRequestWithTokens(n,M7).then(a=>({metadata:a,ref:t}))}function wse(t){t._throwIfRoot("getDownloadURL");const e=fse(t.storage,t._location,zq());return t.storage.makeRequestWithTokens(e,M7).then(r=>{if(r===null)throw Rie();return r})}function Sse(t){t._throwIfRoot("deleteObject");const e=pse(t.storage,t._location);return t.storage.makeRequestWithTokens(e,M7)}function _se(t,e){const r=ase(t._location.path,e),n=new Ns(t._location.bucket,r);return new Yd(t.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tse(t){return/^[A-Za-z]+:\/\//.test(t)}function Ase(t,e){return new Yd(t,e)}function Gq(t,e){if(t instanceof P7){const r=t;if(r._bucket==null)throw Oie();const n=new Yd(r,r._bucket);return e!=null?Gq(n,e):n}else return e!==void 0?_se(t,e):t}function Nse(t,e){if(e&&Tse(e)){if(t instanceof P7)return Ase(t,e);throw xA("To use ref(service, url), the first argument must be a Storage instance.")}else return Gq(t,e)}function FI(t,e){const r=e==null?void 0:e[Rq];return r==null?null:Ns.makeFromBucketSpec(r,t)}function Ese(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:a}=n;a&&(t._overrideAuthToken=typeof a=="string"?a:jZ(a,t.app.options.projectId))}class P7{constructor(e,r,n,a,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=Iq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=bie,this._maxUploadRetryTime=wie,this._requests=new Set,a!=null?this._bucket=Ns.makeFromBucketSpec(a,this._host):this._bucket=FI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ns.makeFromBucketSpec(this._url,e):this._bucket=FI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){VI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){VI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,r,n,a,i=!0){if(this._deleted)return new Die(Mq());{const s=Wie(e,this._appId,n,a,r,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,a).getPromise()}}const qI="@firebase/storage",HI="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq="storage";function bA(t,e,r){return t=_n(t),bse(t,e,r)}function Tx(t){return t=_n(t),wse(t)}function jse(t){return t=_n(t),Sse(t)}function ym(t,e){return t=_n(t),Nse(t,e)}function kse(t=v8(),e){t=_n(t);const n=Gg(t,Wq).getImmediate({identifier:e}),a=Fz("storage");return a&&Cse(n,...a),n}function Cse(t,e,r,n={}){Ese(t,e,r,n)}function Ose(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new P7(r,n,a,e,c0)}function Ise(){_u(new Yl(Wq,Ose,"PUBLIC").setMultipleInstances(!0)),Ys(qI,HI,""),Ys(qI,HI,"esm2017")}Ise();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rse="type.googleapis.com/google.protobuf.Int64Value",Mse="type.googleapis.com/google.protobuf.UInt64Value";function Kq(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function wA(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>wA(e));if(typeof t=="function"||typeof t=="object")return Kq(t,e=>wA(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Ax(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case Rse:case Mse:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Ax(e)):typeof t=="function"||typeof t=="object"?Kq(t,e=>Ax(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D7="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sh extends No{constructor(e,r,n){super(`${D7}/${e}`,r||""),this.details=n}}function Pse(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Dse(t,e){let r=Pse(t),n=r,a;try{const i=e&&e.error;if(i){const s=i.status;if(typeof s=="string"){if(!GI[s])return new Sh("internal","internal");r=GI[s],n=s}const c=i.message;typeof c=="string"&&(n=c),a=i.details,a!==void 0&&(a=Ax(a))}}catch{}return r==="ok"?null:new Sh(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lse{constructor(e,r,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||e.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||n.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="us-central1";function Bse(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Sh("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class $se{constructor(e,r,n,a,i=SA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Lse(r,n,a),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(i);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=SA}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function Use(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function zse(t,e,r){return(n=>Fse(t,e,n,{}))}async function Vse(t,e,r,n){r["Content-Type"]="application/json";let a;try{a=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let i=null;try{i=await a.json()}catch{}return{status:a.status,json:i}}function Fse(t,e,r,n){const a=t._url(e);return qse(t,a,r,n)}async function qse(t,e,r,n){r=wA(r);const a={data:r},i={},s=await t.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(i.Authorization="Bearer "+s.authToken),s.messagingToken&&(i["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(i["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=Bse(c),h=await Promise.race([Vse(e,a,i,t.fetchImpl),d.promise,t.cancelAllRequests]);if(d.cancel(),!h)throw new Sh("cancelled","Firebase Functions instance was deleted.");const p=Dse(h.status,h.json);if(p)throw p;if(!h.json)throw new Sh("internal","Response is not valid JSON object.");let m=h.json.data;if(typeof m>"u"&&(m=h.json.result),typeof m>"u")throw new Sh("internal","Response is missing data field.");return{data:Ax(m)}}const WI="@firebase/functions",KI="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hse="auth-internal",Gse="app-check-internal",Wse="messaging-internal";function Kse(t,e){const r=(n,{instanceIdentifier:a})=>{const i=n.getProvider("app").getImmediate(),s=n.getProvider(Hse),c=n.getProvider(Wse),d=n.getProvider(Gse);return new $se(i,s,c,d,a,t)};_u(new Yl(D7,r,"PUBLIC").setMultipleInstances(!0)),Ys(WI,KI,e),Ys(WI,KI,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qse(t=v8(),e=SA){const n=Gg(_n(t),D7).getImmediate({identifier:e}),a=Fz("functions");return a&&Xse(n,...a),n}function Xse(t,e,r){Use(_n(t),e,r)}function Qr(t,e,r){return zse(_n(t),e)}Kse(fetch.bind(self));const Qq={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},Yse=["apiKey","authDomain","projectId","storageBucket","appId"];for(const t of Yse)if(!Qq[t])throw new Error(`Missing required Firebase config: ${t}. Check your .env.local file.`);const _2=Xz(Qq),_A=XT(_2),Zse=new Ml,Pe=Jae(_2,{localCache:die({tabManager:mie()})}),vm=kse(_2),Xr=Qse(_2),Jse=Qr(Xr,"awardXP"),eoe=Qr(Xr,"acceptQuest"),toe=Qr(Xr,"deployMission"),roe=Qr(Xr,"resolveQuest"),noe=Qr(Xr,"equipItem"),aoe=Qr(Xr,"unequipItem"),ioe=Qr(Xr,"disenchantItem"),soe=Qr(Xr,"craftItem"),ooe=Qr(Xr,"adminUpdateInventory"),loe=Qr(Xr,"adminUpdateEquipped"),coe=Qr(Xr,"submitEngagement"),uoe=Qr(Xr,"sendClassMessage");Qr(Xr,"uploadQuestionBank");const Xq=Qr(Xr,"awardQuestionXP"),doe=Qr(Xr,"penalizeWrongAnswer"),hoe=Qr(Xr,"updateStreak"),foe=Qr(Xr,"claimDailyLogin"),poe=Qr(Xr,"spinFortuneWheel"),moe=Qr(Xr,"unlockSkill"),goe=Qr(Xr,"addSocket"),yoe=Qr(Xr,"socketGem"),voe=Qr(Xr,"unsocketGem"),xoe=Qr(Xr,"dealBossDamage"),boe=Qr(Xr,"answerBossQuiz"),woe=Qr(Xr,"createParty"),Soe=Qr(Xr,"joinParty"),_oe=Qr(Xr,"completeTutoring"),Toe=Qr(Xr,"claimKnowledgeLoot"),Aoe=Qr(Xr,"purchaseCosmetic"),Noe=Qr(Xr,"claimDailyChallenge"),Eoe=Qr(Xr,"dismissAlert"),Nx=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()}),Ol={THRIVING:{label:"Thriving",description:"Consistently high engagement with strong original work.",color:"text-emerald-400",bgColor:"bg-emerald-500/15",borderColor:"border-emerald-500/30",icon:"star"},ON_TRACK:{label:"On Track",description:"Meeting expectations with steady engagement.",color:"text-blue-400",bgColor:"bg-blue-500/15",borderColor:"border-blue-500/30",icon:"check"},COASTING:{label:"Coasting",description:"Below-average engagement  doing the minimum.",color:"text-yellow-400",bgColor:"bg-yellow-500/15",borderColor:"border-yellow-500/30",icon:"minus"},SPRINTING:{label:"Sprinting",description:"Inconsistent: high bursts of activity with gaps between.",color:"text-orange-400",bgColor:"bg-orange-500/15",borderColor:"border-orange-500/30",icon:"zap"},STRUGGLING:{label:"Struggling",description:"Putting in effort but achieving low results  may need support.",color:"text-purple-400",bgColor:"bg-purple-500/15",borderColor:"border-purple-500/30",icon:"help"},DISENGAGING:{label:"Disengaging",description:"Activity is declining  was active but now trailing off.",color:"text-red-400",bgColor:"bg-red-500/15",borderColor:"border-red-500/30",icon:"trending-down"},INACTIVE:{label:"Inactive",description:"No meaningful activity detected in the analysis window.",color:"text-gray-400",bgColor:"bg-gray-500/15",borderColor:"border-gray-500/30",icon:"x"},COPYING:{label:"Copying",description:"High paste-to-keystroke ratio  may indicate copy-paste behavior.",color:"text-rose-400",bgColor:"bg-rose-500/15",borderColor:"border-rose-500/30",icon:"clipboard"}};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const joe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yq=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var koe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Coe=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...c},d)=>k.createElement("svg",{ref:d,...koe,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Yq("lucide",a),...c},[...s.map(([h,p])=>k.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const r=k.forwardRef(({className:n,...a},i)=>k.createElement(Coe,{ref:i,iconNode:e,className:Yq(`lucide-${joe(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=We("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ooe=We("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ioe=We("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Roe=We("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moe=We("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=We("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=We("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=We("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=We("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=We("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=We("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=We("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Poe=We("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=We("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=We("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Doe=We("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loe=We("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=We("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=We("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=We("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Boe=We("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=We("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=We("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=We("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=We("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $oe=We("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=We("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=We("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=We("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uoe=We("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zoe=We("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Voe=We("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Foe=We("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=We("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qoe=We("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=We("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=We("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hoe=We("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=We("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Goe=We("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Woe=We("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=We("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Koe=We("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qoe=We("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xoe=We("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=We("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=We("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yoe=We("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=We("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=We("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zoe=We("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=We("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=We("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Joe=We("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=We("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=We("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ele=We("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=We("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=We("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=We("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tle=We("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rle=We("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=We("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=We("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nle=We("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=We("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ale=We("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ile=We("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sle=We("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=We("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ole=We("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=We("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lle=We("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=We("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cle=We("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=We("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=We("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=We("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=We("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=We("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=We("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ule=We("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=We("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=We("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=We("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=We("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=We("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=We("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=We("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dle=We("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hle=We("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=We("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=We("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fle=We("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=We("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ple=We("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C2=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=We("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=We("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=We("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mle=We("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=We("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gle=We("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yle=We("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=We("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=We("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vle=We("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xle=We("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ble=We("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=We("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),wle="kellporter2@paps.net",pH="Mr. Porter",aR=[{name:"Dashboard",icon:o.jsx(Zoe,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:o.jsx(j2,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:o.jsx(is,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Student Groups",icon:o.jsx(is,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:o.jsx(Yo,{className:"w-5 h-5"}),role:"ADMIN",children:[{name:"Operatives",icon:o.jsx(To,{className:"w-4 h-4"})},{name:"XP Protocols",icon:o.jsx($a,{className:"w-4 h-4"})},{name:"Missions",icon:o.jsx(Zq,{className:"w-4 h-4"})},{name:"Mission Control",icon:o.jsx(Ex,{className:"w-4 h-4"})},{name:"Boss Ops",icon:o.jsx(Ho,{className:"w-4 h-4"})},{name:"Tutoring",icon:o.jsx(Eu,{className:"w-4 h-4"})}]},{name:"Resources",icon:o.jsx(B7,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:o.jsx(Ex,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:o.jsx(Yo,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:o.jsx(tc,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:o.jsx(Woe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:o.jsx(zoe,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Leaderboard",icon:o.jsx(tc,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:o.jsx(Eu,{className:"w-5 h-5"}),role:"STUDENT"}],iR=new Set,Fs=(t,e,r)=>iR.has(t)?()=>{}:ln(e,r,n=>{console.warn(`[guardedSnapshot] ${t} blocked:`,(n==null?void 0:n.code)||n),((n==null?void 0:n.code)==="permission-denied"||(n==null?void 0:n.code)==="failed-precondition")&&iR.add(t)}),Re={getWeekId:()=>{const t=new Date,e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const r=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:t=>Fs("xp_events",Wt(Pe,"xp_events"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveXPEvent:async t=>{await ta(lt(Pe,"xp_events",t.id),t)},deleteXPEvent:async t=>{await Wa(lt(Pe,"xp_events",t))},subscribeToQuests:t=>Fs("quests",Wt(Pe,"quests"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveQuest:async t=>{await ta(lt(Pe,"quests",t.id),t)},deleteQuest:async t=>{await Wa(lt(Pe,"quests",t))},acceptQuest:async(t,e)=>{await eoe({questId:e})},deployMission:async(t,e)=>{await toe({questId:e.id})},resolveQuest:async(t,e,r,n)=>{await roe({userId:t,questId:e.id,success:r,classType:n})},adjustUserXP:async(t,e,r)=>{await Re.awardXP(t,e,r)},equipItem:async(t,e,r)=>{await noe({itemId:e.id,classType:r})},unequipItem:async(t,e,r)=>{await aoe({slot:e,classType:r})},disenchantItem:async(t,e,r)=>{await ioe({itemId:e.id,classType:r})},craftItem:async(t,e,r,n)=>{await soe({itemId:e.id,action:r,classType:n})},adminUpdateInventory:async(t,e,r,n)=>{await ooe({userId:t,inventory:e,currency:r,classType:n})},adminUpdateEquipped:async(t,e,r)=>{await loe({userId:t,equipped:e,classType:r})},updateUserAppearance:async(t,e,r)=>{try{const n=lt(Pe,"users",t);r?await xr(n,{[`gamification.classProfiles.${r}.appearance`]:e}):await xr(n,{"gamification.appearance":e})}catch(n){throw console.error("Error updating appearance:",n),n}},sendMessage:async(t,e,r,n)=>{try{if(t.mutedUntil){const a=new Date(t.mutedUntil);if(a>new Date)throw new Error(`You are muted until ${a.toLocaleTimeString()}.`)}await uoe({content:e,channelId:r,classType:n})}catch(a){throw console.error("Error sending message:",a),a}},toggleReaction:async(t,e,r)=>{const n=lt(Pe,"class_messages",t);await G5(Pe,async a=>{const i=await a.get(n);if(!i.exists())return;const c={...i.data().reactions||{}},d=(c[e]||[]).includes(r);Object.keys(c).forEach(h=>{c[h]=(c[h]||[]).filter(p=>p!==r),c[h].length===0&&delete c[h]}),d||(c[e]||(c[e]=[]),c[e].push(r)),a.update(n,{reactions:c})})},togglePersonalPin:async(t,e)=>{const r=lt(Pe,"class_messages",t);await G5(Pe,async n=>{const a=await n.get(r);if(!a.exists())return;const s=[...a.data().pinnedBy||[]];s.includes(e)?n.update(r,{pinnedBy:s.filter(c=>c!==e)}):n.update(r,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(t,e)=>{const r=lt(Pe,"class_messages",t);await xr(r,{isGlobalPinned:e})},deleteMessage:async t=>{try{await Wa(lt(Pe,"class_messages",t))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:t=>{const e=on(Wt(Pe,"class_messages"),In("isFlagged","==",!0),El(50));return ln(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flagged Messages Error:",r)})},unflagMessage:async t=>{try{const e=lt(Pe,"class_messages",t);await xr(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(t,e)=>{try{let r=null;e===Re.INDEFINITE_MUTE?r=new Date("9999-12-31").toISOString():e>0&&(r=new Date(Date.now()+e*6e4).toISOString()),await xr(lt(Pe,"users",t),{mutedUntil:r})}catch(r){throw console.error("Error muting user:",r),r}},createStudentGroup:async(t,e,r)=>(await ud(Wt(Pe,"student_groups"),{name:t,classType:e,members:r,memberIds:r.map(a=>a.userId),createdAt:new Date().toISOString(),createdBy:"ADMIN"})).id,updateStudentGroup:async(t,e)=>{const r={...e};e.members&&(r.memberIds=e.members.map(n=>n.userId)),await xr(lt(Pe,"student_groups",t),r)},deleteStudentGroup:async t=>{await Wa(lt(Pe,"student_groups",t))},subscribeToStudentGroups:(t,e)=>{const r=on(Wt(Pe,"student_groups"),In("classType","==",t));return ln(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Student groups subscription error:",n))},subscribeToAllGroups:t=>ln(Wt(Pe,"student_groups"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))},e=>console.error("All groups subscription error:",e)),subscribeToMyGroups:(t,e)=>{const r=on(Wt(Pe,"student_groups"),In("memberIds","array-contains",t));return ln(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("My groups subscription error:",n))},subscribeToChannelMessages:(t,e)=>{const r=on(Wt(Pe,"class_messages"),In("channelId","==",t),El(100));return ln(r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(i.timestamp).getTime()-new Date(s.timestamp).getTime()),e(a)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToRecentMessages:t=>{const e=on(Wt(Pe,"class_messages"),cd("timestamp","desc"),El(20));return Fs("recent_messages",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllConversations:t=>{const e=on(Wt(Pe,"conversations"),cd("lastMessageAt","desc"));return ln(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Conversations subscription error:",r))},subscribeToChatMessages:(t,e)=>{const r=on(Wt(Pe,`conversations/${t}/messages`),cd("timestamp","asc"));return ln(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(t,e,r)=>{const n={senderId:e.id,senderName:e.role===Ka.ADMIN?pH:e.name,content:r,timestamp:new Date().toISOString()};await ud(Wt(Pe,`conversations/${t}/messages`),n),await xr(lt(Pe,"conversations",t),{lastMessage:r,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(t,e)=>{await xr(lt(Pe,"conversations",t),{adminDisabled:e})},subscribeToChatFlags:t=>{const e=on(Wt(Pe,"chat_flags"),In("isResolved","==",!1));return ln(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>new Date(i.timestamp).getTime()-new Date(a.timestamp).getTime()),t(n)},r=>{console.error("Subscribe Flags Error:",r)})},resolveFlag:async t=>{await xr(lt(Pe,"chat_flags",t),{isResolved:!0})},resolveFlagByMessageId:async t=>{try{const e=on(Wt(Pe,"chat_flags"),In("messageId","==",t),In("isResolved","==",!1)),n=(await th(e)).docs.map(a=>xr(a.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(t,e,r)=>{const n=on(Wt(Pe,"evidence"),In("studentId","==",t),In("weekId","==",e));return ln(n,a=>{const i=a.docs.map(s=>({id:s.id,...s.data()}));r(i)},a=>console.error("Evidence subscription error:",a))},uploadEvidence:async t=>{await ta(lt(Pe,"evidence",t.id),t,{merge:!0})},deleteWeeklyEvidence:async t=>{try{const e=t.map(n=>{if(!n.imageUrl)return Promise.resolve();const a=ym(vm,n.imageUrl);return jse(a).catch(i=>console.warn("File missing:",i))});await Promise.all(e);const r=t.map(n=>Wa(lt(Pe,"evidence",n.id)));await Promise.all(r)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async t=>{await ta(lt(Pe,"lab_reports",t.id),t,{merge:!0})},updateUserSettings:async(t,e)=>{try{const r=lt(Pe,"users",t);await xr(r,{settings:e})}catch(r){console.error("Error updating settings:",r)}},updateUserLastLevelSeen:async(t,e)=>{await xr(lt(Pe,"users",t),{"gamification.lastLevelSeen":e})},generateCodename:async t=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],r=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${r[Math.floor(Math.random()*r.length)]}`;await xr(lt(Pe,"users",t),{"gamification.codename":n})},subscribeToUsers:t=>{const e=Wt(Pe,"users");return ln(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,...i}});t(n)},r=>console.error("Users subscription error:",r))},subscribeToAssignments:t=>{const e=Wt(Pe,"assignments");return ln(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,title:i.title,description:i.description,classType:i.classType,status:i.status,unit:i.unit||"Unassigned Unit",category:i.category||"Supplemental",htmlContent:i.htmlContent,contentUrl:i.contentUrl,resources:i.resources||[],publicComments:(i.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:i.dueDate,targetSections:i.targetSections||[],scheduledAt:i.scheduledAt||void 0}});t(n)},r=>console.error("Assignments subscription error:",r))},subscribeToSubmissions:t=>{const e=on(Wt(Pe,"submissions"),cd("submittedAt","desc"),El(200));return ln(e,r=>{const n=r.docs.map(a=>{const i=a.data();return{id:a.id,userId:i.userId,userName:i.userName,assignmentId:i.assignmentId,assignmentTitle:i.assignmentTitle,metrics:i.metrics||Nx(),submittedAt:i.submittedAt,status:i.status,score:i.score,hasUnreadAdmin:i.hasUnreadAdmin||!1,hasUnreadStudent:i.hasUnreadStudent||!1,isPinned:i.isPinned||!1,isArchived:i.isArchived||!1,privateComments:(i.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});t(n)},r=>console.error("Submissions subscription error:",r))},subscribeToUserSubmissions:(t,e)=>{const r=on(Wt(Pe,"submissions"),In("userId","==",t),El(50));return ln(r,n=>{const a=n.docs.map(i=>{const s=i.data();return{id:i.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Nx(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((i,s)=>new Date(s.submittedAt||"").getTime()-new Date(i.submittedAt||"").getTime());e(a)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:t=>{const e=Wt(Pe,"allowed_emails");return ln(e,r=>{const n=r.docs.map(a=>({email:a.id,classType:a.data().classType,classTypes:a.data().classTypes||[a.data().classType].filter(Boolean)}));t(n)},r=>console.error("Whitelist subscription error:",r))},subscribeToClassConfigs:t=>{const e=Wt(Pe,"class_configs");return ln(e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));t(n)},r=>console.error("ClassConfigs subscription error:",r))},addAssignment:async t=>{try{const e={title:t.title,description:t.description,classType:t.classType,status:t.status,unit:t.unit||"Unassigned Unit",category:t.category||"Textbook",htmlContent:t.htmlContent||"",contentUrl:t.contentUrl||null,resources:t.resources||[],publicComments:t.publicComments||[],dueDate:t.dueDate||null,targetSections:t.targetSections&&t.targetSections.length>0?t.targetSections:[],scheduledAt:t.scheduledAt||null};t.id?await ta(lt(Pe,"assignments",t.id),e,{merge:!0}):await ud(Wt(Pe,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(t,e)=>{try{await xr(lt(Pe,"assignments",t),{status:e})}catch(r){console.error(r)}},deleteAssignment:async t=>{try{await Wa(lt(Pe,"assignments",t))}catch(e){console.error(e)}},addToWhitelist:async(t,e)=>{try{const r=lt(Pe,"allowed_emails",t),n=await Ma(r),a=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],i=Array.from(new Set([...a,e]));await ta(r,{classType:e,classTypes:i});const s=on(Wt(Pe,"users"),In("email","==",t)),c=await th(s);await Promise.all(c.docs.map(async d=>{const h=d.data(),p=h.enrolledClasses||(h.classType?[h.classType]:[]),m=Array.from(new Set([...p,e]));await xr(lt(Pe,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:m})}))}catch(r){console.error(r)}},updateWhitelistSection:async(t,e)=>{try{await xr(lt(Pe,"allowed_emails",t),{section:e});const r=on(Wt(Pe,"users"),In("email","==",t)),n=await th(r);await Promise.all(n.docs.map(async a=>{await xr(lt(Pe,"users",a.id),{section:e})}))}catch(r){console.error(r)}},updateUserSection:async(t,e)=>{await xr(lt(Pe,"users",t),{section:e})},updateUserClassSection:async(t,e,r)=>{await xr(lt(Pe,"users",t),{[`classSections.${e}`]:r||null})},removeFromWhitelist:async t=>{try{await Wa(lt(Pe,"allowed_emails",t));const e=on(Wt(Pe,"users"),In("email","==",t)),r=await th(e);await Promise.all(r.docs.map(async n=>{await xr(lt(Pe,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(t,e)=>{try{const r=lt(Pe,"users",t),n=await Ma(r);if(n.exists()){const a=n.data(),i=a.enrolledClasses||(a.classType?[a.classType]:[]),s=Array.from(new Set([...i,e]));await xr(r,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=a.email;if(c){const d=await Ma(lt(Pe,"allowed_emails",c)),h=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],p=Array.from(new Set([...h,e]));await ta(lt(Pe,"allowed_emails",c),{classType:e,classTypes:p})}}}catch(r){console.error(r)}},removeUser:async t=>{try{const e=await Ma(lt(Pe,"users",t));if(e.exists()){const r=e.data().email;await Wa(lt(Pe,"allowed_emails",r))}await Wa(lt(Pe,"users",t))}catch(e){console.error(e)}},submitAssignment:async t=>{try{const e=`${t.userId}_${t.assignmentId}`;await ta(lt(Pe,"submissions",e),{userId:t.userId,userName:t.userName,assignmentId:t.assignmentId,assignmentTitle:t.assignmentTitle,metrics:t.metrics,status:t.status,score:t.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},submitReviewEngagement:async(t,e,r,n,a)=>{if(!(a<5))try{const i=`${t}_${e}`,s=lt(Pe,"submissions",i);(await Ma(s)).exists()?await xr(s,{"metrics.engagementTime":xie(a),"metrics.lastActive":Date.now()}):await ta(s,{userId:t,assignmentId:e,assignmentTitle:r,classType:n,metrics:{engagementTime:a,pasteCount:0,keystrokes:0,clickCount:0,startTime:Date.now()-a*1e3,lastActive:Date.now()},status:"STARTED",score:0,submittedAt:new Date().toISOString()})}catch(i){console.error("submitReviewEngagement:",i)}},updateUserEnrolledClasses:async(t,e)=>{try{const r=lt(Pe,"users",t),n=await Ma(r);if(!n.exists())return;const i=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,i&&await Wa(lt(Pe,"allowed_emails",i))):(s.isWhitelisted=!0,i&&await ta(lt(Pe,"allowed_emails",i),{classType:e[0],classTypes:e})),await xr(r,s)}catch(r){console.error("Error updating user classes:",r)}},updateUserClass:async(t,e)=>{try{const r=lt(Pe,"users",t),n=await Ma(r);if(n.exists()){const a=n.data().enrolledClasses||[],i=Array.from(new Set([...a,e]));await xr(r,{classType:e,enrolledClasses:i,isWhitelisted:!0});const s=n.data().email;s&&await ta(lt(Pe,"allowed_emails",s),{classType:e})}}catch(r){console.error(r)}},switchUserView:async(t,e)=>{try{await xr(lt(Pe,"users",t),{classType:e})}catch(r){console.error("Error switching view:",r)}},awardXP:async(t,e,r)=>{await Jse({targetUserId:t,amount:e,classType:r})},submitEngagement:async(t,e,r,n,a,i)=>(await coe({assignmentId:r,assignmentTitle:n,userName:e,metrics:a,classType:i})).data,subscribeToLeaderboard:t=>{const e=on(Wt(Pe,"users"),In("role","==","STUDENT"));return ln(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))},r=>console.error("Leaderboard subscription error:",r))},saveClassConfig:async t=>{try{await ta(lt(Pe,"class_configs",t.className),t)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async t=>{try{await Wa(lt(Pe,"class_configs",t))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/${e}_${t.name}`);return await bA(r,t),await Tx(r)},uploadHtmlResource:async t=>{const e=Math.random().toString(36).substring(2,9),r=ym(vm,`resources/html/${e}_${t.name}`);return await bA(r,t),await Tx(r)},subscribeToAnnouncements:t=>{const e=on(Wt(Pe,"announcements"),cd("createdAt","desc"),El(20));return Fs("announcements",e,r=>{const n=new Date,a=r.docs.map(i=>({id:i.id,...i.data()})).filter(i=>!i.expiresAt||new Date(i.expiresAt)>n);t(a)})},createAnnouncement:async t=>{await ud(Wt(Pe,"announcements"),t)},deleteAnnouncement:async t=>{await Wa(lt(Pe,"announcements",t))},dismissAnnouncement:async(t,e)=>{await xr(lt(Pe,"users",t),{"gamification.dismissedAnnouncements":vie(e)})},subscribeToNotifications:(t,e)=>{const r=on(Wt(Pe,"notifications"),In("userId","==",t),cd("timestamp","desc"),El(50));return ln(r,n=>{e(n.docs.map(a=>({id:a.id,...a.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async t=>{await xr(lt(Pe,"notifications",t),{isRead:!0})},markAllNotificationsRead:async t=>{const e=on(Wt(Pe,"notifications"),In("userId","==",t),In("isRead","==",!1)),n=(await th(e)).docs.map(a=>xr(a.ref,{isRead:!0}));await Promise.all(n)},createNotification:async t=>{await ud(Wt(Pe,"notifications"),t)},notifyUsers:async(t,e,r,n,a)=>{const i=t.map(s=>ud(Wt(Pe,"notifications"),{userId:s,type:e,title:r,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:a||{}}));await Promise.all(i)},updateCodename:async(t,e,r)=>{const n={"gamification.codename":e};r!==void 0&&(n["gamification.codenameLocked"]=r),await xr(lt(Pe,"users",t),n)},toggleCodenameLock:async(t,e)=>{await xr(lt(Pe,"users",t),{"gamification.codenameLocked":e})},updateEngagementStreak:async()=>(await hoe({})).data,claimDailyLogin:async()=>(await foe({})).data,spinFortuneWheel:async t=>(await poe({classType:t})).data,unlockSkill:async(t,e)=>(await moe({skillId:t,specialization:e})).data,addSocket:async(t,e)=>(await goe({itemId:t,classType:e})).data,socketGem:async(t,e,r)=>(await yoe({itemId:t,gemId:e,classType:r})).data,unsocketGem:async(t,e,r)=>(await voe({itemId:t,gemIndex:e,classType:r})).data,subscribeToBossEncounters:t=>{const e=on(Wt(Pe,"boss_encounters"),In("isActive","==",!0));return Fs("boss_encounters",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},subscribeToAllBossEncounters:t=>{const e=Wt(Pe,"boss_encounters");return ln(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossEncounter:async t=>{const e=lt(Pe,"boss_encounters",t.id);await ta(e,t)},toggleBossActive:async(t,e)=>{const r=lt(Pe,"boss_encounters",t);await xr(r,{isActive:e})},deleteBossEncounter:async t=>{const e=lt(Pe,"boss_encounters",t);await Wa(e)},subscribeToBossShards:(t,e)=>{const r=Wt(Pe,`boss_encounters/${t}/shards`);return ln(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},subscribeToBossDamageLog:(t,e)=>{const r=Wt(Pe,`boss_encounters/${t}/damage_log`);return ln(r,n=>{const a=n.docs.map(i=>i.data());e(a)},()=>{})},dealBossDamage:async(t,e,r)=>(await xoe({bossId:t,userName:e,classType:r})).data,subscribeToBossQuizzes:(t,e)=>{const r=on(Wt(Pe,"boss_quizzes"),In("isActive","==",!0));return Fs("boss_quizzes",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()})).filter(i=>i.classType===t||i.classType==="GLOBAL");e(a)})},subscribeToBossQuizShards:(t,e)=>{const r=Wt(Pe,`boss_quizzes/${t}/shards`);return ln(r,n=>{let a=0;n.forEach(i=>{a+=i.data().damageDealt||0}),e(a)},()=>{})},answerBossQuiz:async(t,e,r)=>(await boe({quizId:t,questionId:e,answer:r})).data,subscribeToAllBossQuizzes:t=>{const e=Wt(Pe,"boss_quizzes");return ln(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},saveBossQuiz:async t=>{const e=lt(Pe,"boss_quizzes",t.id);await ta(e,t)},toggleBossQuizActive:async(t,e)=>{const r=lt(Pe,"boss_quizzes",t);await xr(r,{isActive:e})},deleteBossQuiz:async t=>{const e=lt(Pe,"boss_quizzes",t);await Wa(e)},subscribeToBossQuestionBanks:t=>ln(Wt(Pe,"boss_question_banks"),e=>{t(e.docs.map(r=>({id:r.id,...r.data()})))}),saveBossQuestionBank:async t=>{const e=lt(Pe,"boss_question_banks",t.id);await ta(e,t)},deleteBossQuestionBank:async t=>{await Wa(lt(Pe,"boss_question_banks",t))},getBossQuizAllProgress:async t=>{const e=on(Wt(Pe,"boss_quiz_progress"),In("quizId","==",t));return(await th(e)).docs.map(n=>n.data())},subscribeToBossQuizProgress:(t,e,r)=>{const n=lt(Pe,"boss_quiz_progress",`${t}_${e}`);return ln(n,a=>{r(a.exists()?a.data():null)},()=>r(null))},createParty:async(t,e)=>(await woe({questId:t,userName:e})).data,joinParty:async(t,e)=>(await Soe({partyId:t,userName:e})).data,subscribeToParty:(t,e)=>ln(lt(Pe,"parties",t),r=>{r.exists()?e({id:r.id,...r.data()}):e(null)},r=>console.error("Party subscription error:",r)),createTutoringRequest:async(t,e,r,n)=>{await ud(Wt(Pe,"tutoring_sessions"),{requesterId:t,requesterName:e,topic:r,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(t,e,r)=>{await xr(lt(Pe,"tutoring_sessions",t),{tutorId:e,tutorName:r,status:"MATCHED"})},startTutoringSession:async t=>{await xr(lt(Pe,"tutoring_sessions",t),{status:"IN_PROGRESS"})},markTutoringComplete:async t=>{await xr(lt(Pe,"tutoring_sessions",t),{status:"COMPLETED"})},submitTutoringFeedback:async(t,e,r)=>{const n=lt(Pe,"tutoring_sessions",t),a=await Ma(n);if(!a.exists())throw new Error("Session not found");const i=a.data(),s=e==="requester"?"requesterFeedback":"tutorFeedback",c=e==="requester"?"tutorFeedback":"requesterFeedback",d={[s]:r};i[c]&&(d.status="COMPLETED"),await xr(n,d)},subscribeToAllTutoringSessions:t=>{const e=on(Wt(Pe,"tutoring_sessions"),cd("createdAt","desc"),El(100));return ln(e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},cancelTutoringSession:async t=>{await Wa(lt(Pe,"tutoring_sessions",t))},subscribeToTutoringSessions:(t,e)=>{const r=on(Wt(Pe,"tutoring_sessions"),In("classType","==",t),El(50));return Fs("tutoring_sessions",r,n=>{const a=n.docs.map(i=>({id:i.id,...i.data()}));a.sort((i,s)=>new Date(s.createdAt).getTime()-new Date(i.createdAt).getTime()),e(a)})},completeTutoring:async(t,e)=>(await _oe({sessionId:t,tutorId:e})).data,subscribeToKnowledgeGates:t=>{const e=on(Wt(Pe,"knowledge_gates"),In("isActive","==",!0));return Fs("knowledge_gates",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},claimKnowledgeLoot:async(t,e)=>(await Toe({gateId:t,classType:e})).data,subscribeToSeasonalCosmetics:t=>{const e=on(Wt(Pe,"seasonal_cosmetics"),In("isAvailable","==",!0));return Fs("seasonal_cosmetics",e,r=>{t(r.docs.map(n=>({id:n.id,...n.data()})))})},purchaseCosmetic:async t=>(await Aoe({cosmeticId:t})).data,equipCosmetic:async(t,e)=>{await xr(lt(Pe,"users",t),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:t=>{const e=new Date().toISOString().split("T")[0],r=on(Wt(Pe,"daily_challenges"),In("date","==",e));return Fs("daily_challenges",r,n=>{t(n.docs.map(a=>({id:a.id,...a.data()})))})},claimDailyChallenge:async(t,e)=>(await Noe({challengeId:t,classType:e})).data,updateDailyChallengeProgress:async(t,e,r,n)=>{const a=lt(Pe,"users",t);await G5(Pe,async i=>{var h;const s=await i.get(a);if(!s.exists())return;const c=((h=s.data().gamification)==null?void 0:h.activeDailyChallenges)||[];if(c.find(p=>p.challengeId===e)){const p=c.map(m=>m.challengeId===e?{...m,progress:r,completed:n}:m);i.update(a,{"gamification.activeDailyChallenges":p})}else i.update(a,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:r,completed:n}]})})},getPublicProfile:async t=>{const e=await Ma(lt(Pe,"users",t));return e.exists()?{id:e.id,...e.data()}:null},subscribeToStudentAlerts:t=>{const e=on(Wt(Pe,"student_alerts"),In("isDismissed","==",!1));return Fs("student_alerts",e,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));n.sort((a,i)=>{const s={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};return(s[i.riskLevel]||0)-(s[a.riskLevel]||0)}),t(n)})},dismissAlert:async t=>{await Eoe({alertId:t})},subscribeToStudentBuckets:t=>Fs("student_buckets",Wt(Pe,"student_buckets"),e=>{const r=e.docs.map(n=>({id:n.id,...n.data()}));t(r)}),subscribeToStudentPracticeProgress:(t,e)=>{const r=on(Wt(Pe,"practice_progress"),In("userId","==",t));return ln(r,n=>{const a={};n.forEach(i=>{const s=i.data();s.assignmentId&&s.completed&&(a[s.assignmentId]={completed:s.completed||!1,totalCompletions:s.totalCompletions||0,bestScore:s.bestScore??null,completedAt:s.completedAt??null})}),e(a)},()=>{})}},mH=k.createContext(null),mi=()=>{const t=k.useContext(mH);if(!t)throw new Error("useToast must be used within ToastProvider");return t},Sle={success:o.jsx(Mn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:o.jsx(Os,{className:"w-5 h-5 text-red-400 shrink-0"}),info:o.jsx(nH,{className:"w-5 h-5 text-blue-400 shrink-0"})},_le={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},Tle=({children:t})=>{const[e,r]=k.useState([]),n=k.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);r(h=>[...h,{id:d,message:s,type:c}]),setTimeout(()=>{r(h=>h.filter(p=>p.id!==d))},4e3)},[]),a=k.useCallback(s=>{r(c=>c.filter(d=>d.id!==s))},[]),i={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return o.jsxs(mH.Provider,{value:i,children:[t,o.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>o.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${_le[s.type]}`,children:[Sle[s.type],o.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),o.jsx("button",{onClick:()=>a(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Da,{className:"w-4 h-4"})})]},s.id))})]})},Ale=()=>{const[t,e]=k.useState(navigator.onLine),[r,n]=k.useState(!1);return k.useEffect(()=>{const a=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},i=()=>{e(!1),n(!1)};return window.addEventListener("online",a),window.addEventListener("offline",i),()=>{window.removeEventListener("online",a),window.removeEventListener("offline",i)}},[]),t&&!r?null:o.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${t?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:t?o.jsxs(o.Fragment,{children:[o.jsx(ble,{className:"w-4 h-4"}),"Connection restored"]}):o.jsxs(o.Fragment,{children:[o.jsx(xle,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})};var cu=Bz();const Ti=({isOpen:t,onClose:e,title:r,children:n,maxWidth:a="max-w-md"})=>(k.useEffect(()=>{const i=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[e]),t?cu.createPortal(o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${a} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[o.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[o.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:r}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:o.jsx(Da,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}),document.body):null),Nle="/favicon.svg";function Of(){return typeof window<"u"&&"Notification"in window}function Xv(){return Of()?Notification.permission:"unsupported"}async function gH(){return Of()?await Notification.requestPermission():"unsupported"}function Ele(t,e,r){if(!(!Of()||Notification.permission!=="granted"))try{const n=new Notification(t,{body:e,icon:Nle,tag:r||`pp-${Date.now()}`,silent:!1});setTimeout(()=>n.close(),6e3),n.onclick=()=>{window.focus(),n.close()}}catch{}}function jle(t,e){const r=k.useRef(new Set),n=k.useRef(!0),a=k.useCallback(i=>{if(n.current){n.current=!1,r.current=new Set(i.map(c=>c.id));return}if(!e||Notification.permission!=="granted")return;if(!document.hidden){r.current=new Set(i.map(c=>c.id));return}const s=i.filter(c=>!c.isRead&&!r.current.has(c.id));for(const c of s.slice(0,3))Ele(c.title,c.message,`pp-${c.id}`);r.current=new Set(i.map(c=>c.id))},[e]);k.useEffect(()=>{if(!t||!e||!Of())return;n.current=!0,r.current=new Set;const i=Re.subscribeToNotifications(t,a);return()=>i()},[t,e,a])}const kle=({isOpen:t,onClose:e,user:r,onSaveSettings:n})=>{var T;const[a,i]=se.useState(r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=se.useState(((T=r.gamification)==null?void 0:T.codename)||""),[d,h]=se.useState(!1),p=mi(),m=S=>{i(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;h(!0);try{await n(a),s!==(((S=r.gamification)==null?void 0:S.codename)||"")&&await Re.updateCodename(r.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),p.error("Failed to save settings.")}finally{h(!1)}},v=({icon:S,title:w,description:j,value:R,onToggle:I})=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${R?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(S,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:w}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:j})]})]}),o.jsx("button",{onClick:I,className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${R?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${R?"translate-x-5":"translate-x-0"}`})})]});return o.jsx(Ti,{isOpen:t,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(v,{icon:sle,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:a.liveBackground,onToggle:()=>m("liveBackground")}),o.jsx(v,{icon:$oe,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:a.performanceMode,onToggle:()=>m("performanceMode")})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(v,{icon:To,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:a.privacyMode,onToggle:()=>m("privacyMode")}),a.privacyMode&&o.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),o.jsx("input",{type:"text",value:s,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(v,{icon:lle,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:a.compactView,onToggle:()=>m("compactView")}),o.jsx(v,{icon:vle,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:a.soundEffects!==!1,onToggle:()=>i(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Notifications"}),o.jsx("div",{className:"space-y-2",children:Of()?o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:`p-2 rounded-xl ${a.pushNotifications?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:o.jsx(Jq,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white text-sm",children:"Push Notifications"}),o.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:Xv()==="denied"?"Blocked by your browser. Allow notifications in browser settings to enable.":"Get desktop alerts for quests, loot drops, and announcements when the tab is in the background."})]})]}),o.jsx("button",{onClick:async()=>{if(a.pushNotifications)i(S=>({...S,pushNotifications:!1}));else{const S=await gH();S==="granted"?(i(w=>({...w,pushNotifications:!0})),p.success("Push notifications enabled!")):S==="denied"&&p.error("Notifications blocked by browser. Check your browser settings.")}},disabled:Xv()==="denied",className:`relative shrink-0 h-6 w-11 rounded-full transition-colors duration-200 focus:outline-none ${Xv()==="denied"?"bg-white/10 opacity-50 cursor-not-allowed":a.pushNotifications?"bg-purple-600":"bg-white/20"}`,children:o.jsx("span",{className:`absolute top-1 left-1 h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200 ${a.pushNotifications?"translate-x-5":"translate-x-0"}`})})]}):o.jsx("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10 text-xs text-gray-500",children:"Push notifications are not supported in this browser."})})]}),o.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsx(dH,{className:"w-5 h-5"}),"Apply Changes"]})]})})};let Z5=null,yH=!0;function Cle(t){yH=t}function Ole(){if(!Z5){const t=window.AudioContext||window.webkitAudioContext;Z5=new t}return Z5}function er(t,e,r="sine",n=.15){if(yH)try{const a=Ole(),i=a.createOscillator(),s=a.createGain();i.type=r,i.frequency.setValueAtTime(t,a.currentTime),s.gain.setValueAtTime(n,a.currentTime),s.gain.exponentialRampToValueAtTime(.001,a.currentTime+e),i.connect(s),s.connect(a.destination),i.start(a.currentTime),i.stop(a.currentTime+e)}catch{}}const Un={xpGain:()=>{er(600,.1,"sine",.1),setTimeout(()=>er(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.12),r*120)})},lootDrop:()=>{er(1200,.15,"sine",.08),setTimeout(()=>er(1500,.12,"sine",.06),100),setTimeout(()=>er(1800,.2,"triangle",.05),180)},questAccept:()=>{er(440,.15,"square",.06),setTimeout(()=>er(660,.2,"square",.06),120)},questDeploy:()=>{er(880,.12,"sawtooth",.05),setTimeout(()=>er(660,.12,"sawtooth",.05),100),setTimeout(()=>er(550,.2,"sawtooth",.04),200)},equip:()=>{er(200,.05,"square",.1),setTimeout(()=>er(400,.08,"sine",.08),50)},salvage:()=>{er(300,.15,"sawtooth",.06),setTimeout(()=>er(200,.2,"sawtooth",.04),100),setTimeout(()=>er(100,.3,"sawtooth",.03),200)},craft:()=>{er(150,.08,"square",.1),setTimeout(()=>er(800,.2,"triangle",.08),60)},error:()=>{er(200,.15,"square",.08),setTimeout(()=>er(150,.2,"square",.06),120)},messageSend:()=>{er(500,.06,"sine",.05)},notification:()=>{er(800,.1,"sine",.06),setTimeout(()=>er(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,r)=>{setTimeout(()=>er(e,.25,"triangle",.1),r*100)})},dailyReward:()=>{er(523,.12,"sine",.08),setTimeout(()=>er(659,.12,"sine",.07),100),setTimeout(()=>er(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let t=0;t<8;t++)setTimeout(()=>er(400+t*50,.04,"square",.04),t*60)},wheelPrize:()=>{er(523,.15,"triangle",.1),setTimeout(()=>er(784,.15,"triangle",.1),120),setTimeout(()=>er(1047,.3,"sine",.12),240)},skillUnlock:()=>{er(300,.1,"sawtooth",.06),setTimeout(()=>er(600,.1,"sawtooth",.06),80),setTimeout(()=>er(900,.15,"sine",.08),160)},bossHit:()=>{er(100,.1,"square",.12),setTimeout(()=>er(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,r)=>{setTimeout(()=>er(e,.3,"triangle",.08),r*90)})},gemSocket:()=>{er(1200,.08,"sine",.08),setTimeout(()=>er(1600,.1,"sine",.06),60),setTimeout(()=>er(2e3,.15,"triangle",.04),120)},partyJoin:()=>{er(440,.1,"sine",.06),setTimeout(()=>er(554,.1,"sine",.06),80),setTimeout(()=>er(659,.15,"sine",.05),160)},chestOpen:()=>{er(200,.15,"square",.06),setTimeout(()=>er(300,.1,"square",.05),100),setTimeout(()=>er(500,.1,"triangle",.06),200),setTimeout(()=>er(800,.2,"sine",.08),350)}},Ile={QUEST_APPROVED:o.jsx(Bd,{className:"w-4 h-4 text-green-400"}),QUEST_REJECTED:o.jsx(Bd,{className:"w-4 h-4 text-red-400"}),LOOT_DROP:o.jsx(NA,{className:"w-4 h-4 text-yellow-400"}),NEW_MISSION:o.jsx(Bd,{className:"w-4 h-4 text-blue-400"}),NEW_RESOURCE:o.jsx(cH,{className:"w-4 h-4 text-purple-400"}),LEVEL_UP:o.jsx(Moe,{className:"w-4 h-4 text-amber-400"}),ANNOUNCEMENT:o.jsx(Ox,{className:"w-4 h-4 text-orange-400"}),XP_EVENT:o.jsx($a,{className:"w-4 h-4 text-cyan-400"})},sR=({userId:t,settings:e,onUpdateSettings:r,dropUp:n})=>{const[a,i]=k.useState([]),[s,c]=k.useState(!1),[d,h]=k.useState(!1),[p,m]=k.useState({}),y=k.useRef(null),v=k.useRef(null),T=k.useRef(0),S=k.useCallback(()=>{if(!y.current)return;const C=y.current.getBoundingClientRect(),P=320;if(n){const N=Math.max(8,C.left),A=N+P>window.innerWidth-8?void 0:N,E=A==null?8:void 0;m({bottom:window.innerHeight-C.top+8,left:A,right:E})}else m({top:C.bottom+8,right:Math.max(8,window.innerWidth-C.right)})},[n]);k.useEffect(()=>{s&&Of()&&Xv()==="default"&&(e==null?void 0:e.pushNotifications)===void 0&&h(!0)},[s,e==null?void 0:e.pushNotifications]),k.useEffect(()=>{const C=Re.subscribeToNotifications(t,P=>{const N=P.filter(A=>!A.isRead).length;N>T.current&&T.current>=0&&Un.notification(),T.current=N,i(P)});return()=>C()},[t]),k.useEffect(()=>{const C=P=>{var A,E;const N=P.target;(A=y.current)!=null&&A.contains(N)||(E=v.current)!=null&&E.contains(N)||c(!1)};return s&&document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[s]),k.useEffect(()=>{if(s)return S(),window.addEventListener("resize",S),window.addEventListener("scroll",S,!0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",S,!0)}},[s,S]);const w=a.filter(C=>!C.isRead).length,j=async()=>{await Re.markAllNotificationsRead(t)},R=async C=>{C.isRead||await Re.markNotificationRead(C.id)},I=C=>{const P=Date.now()-new Date(C).getTime();return P<6e4?"just now":P<36e5?`${Math.floor(P/6e4)}m ago`:P<864e5?`${Math.floor(P/36e5)}h ago`:`${Math.floor(P/864e5)}d ago`},L=()=>{s||S(),c(!s)};return o.jsxs("div",{className:"relative",children:[o.jsxs("button",{ref:y,onClick:L,className:"relative p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:[o.jsx(Q5,{className:"w-5 h-5"}),w>0&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:w>9?"9+":w})]}),s&&cu.createPortal(o.jsxs("div",{ref:v,className:`fixed w-80 max-h-[420px] bg-[#1a1b26]/98 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden z-[9999] animate-in fade-in duration-200 ${n?"slide-in-from-bottom-2":"slide-in-from-top-2"}`,style:{...p.top!=null?{top:p.top}:{},...p.bottom!=null?{bottom:p.bottom}:{},...p.left!=null?{left:p.left}:{},...p.right!=null?{right:p.right}:{}},children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-white/5",children:[o.jsx("h4",{className:"text-sm font-bold text-white",children:"Notifications"}),w>0&&o.jsxs("button",{onClick:j,className:"flex items-center gap-1 text-[10px] text-purple-400 hover:text-purple-300 font-bold uppercase tracking-widest transition",children:[o.jsx(Doe,{className:"w-3 h-3"})," Mark all read"]})]}),d&&o.jsx("div",{className:"p-3 bg-purple-500/10 border-b border-purple-500/20",children:o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(Jq,{className:"w-4 h-4 text-purple-400 mt-0.5 shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-[11px] text-gray-300 leading-tight",children:"Get desktop alerts for quests, loot, and announcements?"}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsx("button",{onClick:async()=>{await gH()==="granted"&&r&&e&&await r({...e,pushNotifications:!0}),h(!1)},className:"px-2 py-1 bg-purple-600 text-white text-[10px] font-bold rounded-lg hover:bg-purple-500 transition",children:"Enable"}),o.jsx("button",{onClick:()=>h(!1),className:"px-2 py-1 bg-white/5 text-gray-400 text-[10px] font-bold rounded-lg hover:bg-white/10 transition",children:"Not now"})]})]})]})}),o.jsx("div",{className:"overflow-y-auto max-h-[360px] custom-scrollbar",children:a.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx(Q5,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No notifications yet"})]}):a.slice(0,30).map(C=>o.jsxs("div",{onClick:()=>R(C),className:`flex gap-3 p-3 border-b border-white/5 cursor-pointer transition ${C.isRead?"opacity-50 hover:opacity-70":"bg-purple-500/5 hover:bg-white/5"}`,children:[o.jsx("div",{className:"mt-0.5 shrink-0",children:Ile[C.type]||o.jsx(Q5,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-xs font-bold text-white truncate",children:C.title}),o.jsx("p",{className:"text-[11px] text-gray-400 leading-tight mt-0.5 line-clamp-2",children:C.message}),o.jsx("p",{className:"text-[9px] text-gray-600 mt-1",children:I(C.timestamp)})]}),!C.isRead&&o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500 mt-1.5 shrink-0"})]},C.id))})]}),document.body)]})},Rle=({user:t,onLogout:e,activeTab:r,setActiveTab:n,children:a})=>{var w,j;const[i,s]=k.useState(""),[c,d]=k.useState(!1),[h,p]=k.useState(!1),m=t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};k.useEffect(()=>{if(!m.liveBackground){s("");return}(async()=>{try{const I=ym(vm,"public/background.mp4"),L=await Tx(I);s(L)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[m.liveBackground]);const y=async R=>{await Re.updateUserSettings(t.id,R)},[v,T]=k.useState(null);k.useEffect(()=>{const R=aR.find(I=>{var L;return(L=I.children)==null?void 0:L.some(C=>r===`${I.name}:${C.name}`)});R&&T(R.name)},[r]);const S=()=>{const R=aR.filter(L=>!(L.role==="ADMIN"&&t.role!==Ka.ADMIN||L.role==="STUDENT"&&t.role!==Ka.STUDENT)),I=L=>{var C;return(C=L.children)==null?void 0:C.some(P=>r===`${L.name}:${P.name}`)};return o.jsx(o.Fragment,{children:R.map(L=>o.jsxs("div",{children:[o.jsxs("button",{onClick:()=>{L.children?v===L.name?T(null):(T(L.name),I(L)||(n(`${L.name}:${L.children[0].name}`),p(!1))):(n(L.name),p(!1))},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${m.compactView?"py-2.5":"py-3"} ${r===L.name||I(L)?L.children?"bg-purple-500/10 text-white border border-purple-500/20":"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[o.jsx("span",{className:`${r===L.name||I(L)?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:L.icon}),o.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:L.name}),L.children&&o.jsx(Ai,{className:`w-3.5 h-3.5 transition-transform ${v===L.name?"rotate-180":""} ${I(L)?"text-purple-400":"text-gray-600"}`})]}),L.children&&v===L.name&&o.jsx("div",{className:"ml-6 mt-1 space-y-0.5 border-l border-white/10 pl-3",children:L.children.map(C=>{const P=`${L.name}:${C.name}`;return o.jsxs("button",{onClick:()=>{n(P),p(!1)},className:`w-full flex items-center gap-3 px-4 py-2 rounded-lg text-xs font-medium transition-all ${r===P?"bg-purple-600/60 text-white":"text-gray-500 hover:bg-white/5 hover:text-gray-300"}`,children:[o.jsx("span",{className:r===P?"text-white":"text-gray-600",children:C.icon}),C.name]},C.name)})})]},L.name))})};return o.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${m.performanceMode?"perf-mode":""}`,children:[o.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),m.liveBackground&&i&&o.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:o.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:o.jsx("source",{src:i,type:"video/mp4"})},i)}),o.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${m.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${m.performanceMode?"":"backdrop-blur-[3px]"}`}),o.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:o.jsx(Eu,{className:"w-5 h-5 text-white"})}),o.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(sR,{userId:t.id,settings:m,onUpdateSettings:y}),o.jsx("button",{onClick:()=>p(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:o.jsx(tle,{className:"w-6 h-6"})})]})]}),h&&o.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>p(!1)}),o.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-8",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-white",children:m.privacyMode?((w=t.gamification)==null?void 0:w.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500",children:t.role})]})]}),o.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-white",children:o.jsx(Da,{className:"w-6 h-6"})})]}),o.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:o.jsx(S,{})}),o.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[o.jsxs("button",{onClick:()=>{d(!0),p(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[o.jsx(Ym,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Settings"})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[o.jsx(JI,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),o.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${m.compactView?"w-60":"w-72"}`,children:o.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${m.performanceMode?"":"backdrop-blur-2xl"}`,children:[o.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[o.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:o.jsx(Eu,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),o.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:t.role===Ka.ADMIN?"Admin System":"Operative Terminal"})]})]}),o.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:o.jsx(S,{})}),o.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:t.name.charAt(0)}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-sm font-semibold truncate text-white",children:m.privacyMode?((j=t.gamification)==null?void 0:j.codename)||"Agent":t.name}),o.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:t.email})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(sR,{userId:t.id,settings:m,onUpdateSettings:y,dropUp:!0}),o.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:o.jsx(Ym,{className:"w-4 h-4"})})]})]}),o.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[o.jsx(JI,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),o.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${m.performanceMode?"no-anim":"animate-slide-up"}`,children:o.jsx("div",{className:"max-w-7xl mx-auto h-full",children:a})}),o.jsx(kle,{isOpen:c,onClose:()=>d(!1),user:t,onSaveSettings:y})]})};class Yi{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new Yi(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class js{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new js(r,Yi.range(this,e))}}class ot{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,a,i,s=r&&r.loc;if(s&&s.start<=s.end){var c=s.lexer.input;a=s.start,i=s.end,a===c.length?n+=" at end of input: ":n+=" at position "+(a+1)+": ";var d=c.slice(a,i).replace(/[^]/g,"$&"),h;a>15?h=""+c.slice(a-15,a):h=c.slice(0,a);var p;i+15<c.length?p=c.slice(i,i+15)+"":p=c.slice(i),n+=h+d+p}var m=new Error(n);return m.name="ParseError",m.__proto__=ot.prototype,m.position=a,a!=null&&i!=null&&(m.length=i-a),m.rawMessage=e,m}}ot.prototype.__proto__=Error.prototype;var Mle=function(e,r){return e===void 0?r:e},Ple=/([A-Z])/g,Dle=function(e){return e.replace(Ple,"-$1").toLowerCase()},Lle={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ble=/[&><"']/g;function $le(t){return String(t).replace(Ble,e=>Lle[e])}var vH=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},Ule=function(e){var r=vH(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},zle=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},Vle=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Vr={deflt:Mle,escape:$le,hyphenate:Dle,getBaseElem:vH,isCharacterBox:Ule,protocolFromUrl:Vle},Yv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function Fle(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class U7{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in Yv)if(Yv.hasOwnProperty(r)){var n=Yv[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:Fle(n)}}reportNonstrict(e,r,n){var a=this.strict;if(typeof a=="function"&&(a=a(e,r,n)),!(!a||a==="ignore")){if(a===!0||a==="error")throw new ot("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);a==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var a=this.strict;if(typeof a=="function")try{a=a(e,r,n)}catch{a="error"}return!a||a==="ignore"?!1:a===!0||a==="error"?!0:a==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+a+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Vr.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Qc{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Lo[qle[this.id]]}sub(){return Lo[Hle[this.id]]}fracNum(){return Lo[Gle[this.id]]}fracDen(){return Lo[Wle[this.id]]}cramp(){return Lo[Kle[this.id]]}text(){return Lo[Qle[this.id]]}isTight(){return this.size>=2}}var z7=0,Px=1,Th=2,Hl=3,Zm=4,Qs=5,Wh=6,Pi=7,Lo=[new Qc(z7,0,!1),new Qc(Px,0,!0),new Qc(Th,1,!1),new Qc(Hl,1,!0),new Qc(Zm,2,!1),new Qc(Qs,2,!0),new Qc(Wh,3,!1),new Qc(Pi,3,!0)],qle=[Zm,Qs,Zm,Qs,Wh,Pi,Wh,Pi],Hle=[Qs,Qs,Qs,Qs,Pi,Pi,Pi,Pi],Gle=[Th,Hl,Zm,Qs,Wh,Pi,Wh,Pi],Wle=[Hl,Hl,Qs,Qs,Pi,Pi,Pi,Pi],Kle=[Px,Px,Hl,Hl,Qs,Qs,Pi,Pi],Qle=[z7,Px,Th,Hl,Th,Hl,Th,Hl],qt={DISPLAY:Lo[z7],TEXT:Lo[Th],SCRIPT:Lo[Zm],SCRIPTSCRIPT:Lo[Wh]},EA=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Xle(t){for(var e=0;e<EA.length;e++)for(var r=EA[e],n=0;n<r.blocks.length;n++){var a=r.blocks[n];if(t>=a[0]&&t<=a[1])return r.name}return null}var Zv=[];EA.forEach(t=>t.blocks.forEach(e=>Zv.push(...e)));function xH(t){for(var e=0;e<Zv.length;e+=2)if(t>=Zv[e]&&t<=Zv[e+1])return!0;return!1}var rh=80,Yle=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Zle=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},Jle=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},ece=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},tce=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},rce=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},nce=function(e,r,n){var a=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+a+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},ace=function(e,r,n){r=1e3*r;var a="";switch(e){case"sqrtMain":a=Yle(r,rh);break;case"sqrtSize1":a=Zle(r,rh);break;case"sqrtSize2":a=Jle(r,rh);break;case"sqrtSize3":a=ece(r,rh);break;case"sqrtSize4":a=tce(r,rh);break;case"sqrtTall":a=nce(r,rh,n)}return a},ice=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},oR={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},sce=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class l1{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var zo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sv={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},lR={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function oce(t,e){zo[t]=e}function V7(t,e,r){if(!zo[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),a=zo[e][n];if(!a&&t[0]in lR&&(n=lR[t[0]].charCodeAt(0),a=zo[e][n]),!a&&r==="text"&&xH(n)&&(a=zo[e][77]),a)return{depth:a[0],height:a[1],italic:a[2],skew:a[3],width:a[4]}}var J5={};function lce(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!J5[e]){var r=J5[e]={cssEmPerMu:sv.quad[e]/18};for(var n in sv)sv.hasOwnProperty(n)&&(r[n]=sv[n][e])}return J5[e]}var cce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],cR=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],uR=function(e,r){return r.size<2?e:cce[e-1][r.size-1]};class Rl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||Rl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=cR[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new Rl(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:uR(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:cR[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=uR(Rl.BASESIZE,e);return this.size===r&&this.textSize===Rl.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Rl.BASESIZE?["sizing","reset-size"+this.size,"size"+Rl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=lce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Rl.BASESIZE=6;var jA={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},uce={ex:!0,em:!0,mu:!0},bH=function(e){return typeof e!="string"&&(e=e.unit),e in jA||e in uce||e==="ex"},Qn=function(e,r){var n;if(e.unit in jA)n=jA[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var a;if(r.style.isTight()?a=r.havingStyle(r.style.text()):a=r,e.unit==="ex")n=a.fontMetrics().xHeight;else if(e.unit==="em")n=a.fontMetrics().quad;else throw new ot("Invalid unit: '"+e.unit+"'");a!==r&&(n*=a.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},gt=function(e){return+e.toFixed(4)+"em"},ju=function(e){return e.filter(r=>r).join(" ")},wH=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var a=r.getColor();a&&(this.style.color=a)}},SH=function(e){var r=document.createElement(e);r.className=ju(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var a in this.attributes)this.attributes.hasOwnProperty(a)&&r.setAttribute(a,this.attributes[a]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},dce=/[\s"'>/=\x00-\x1f]/,_H=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Vr.escape(ju(this.classes))+'"');var n="";for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Vr.hyphenate(a)+":"+this.style[a]+";");n&&(r+=' style="'+Vr.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(dce.test(i))throw new ot("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Vr.escape(this.attributes[i])+'"'}r+=">";for(var s=0;s<this.children.length;s++)r+=this.children[s].toMarkup();return r+="</"+e+">",r};class c1{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,wH.call(this,e,n,a),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return SH.call(this,"span")}toMarkup(){return _H.call(this,"span")}}class F7{constructor(e,r,n,a){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,wH.call(this,r,a),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return SH.call(this,"a")}toMarkup(){return _H.call(this,"a")}}class hce{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Vr.escape(this.src)+'"'+(' alt="'+Vr.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Vr.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Vr.escape(r)+'"'),e+="'/>",e}}var fce={:"",:"",:"",:""};class eo{constructor(e,r,n,a,i,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=a||0,this.skew=i||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var h=Xle(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=fce[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=gt(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=ju(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Vr.escape(ju(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var a in this.style)this.style.hasOwnProperty(a)&&(n+=Vr.hyphenate(a)+":"+this.style[a]+";");n&&(e=!0,r+=' style="'+Vr.escape(n)+'"');var i=Vr.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class rc{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Vr.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class ku{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",oR[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Vr.escape(this.alternate)+'"/>':'<path d="'+Vr.escape(oR[this.pathName])+'"/>'}}class kA{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Vr.escape(this.attributes[r])+'"');return e+="/>",e}}function dR(t){if(t instanceof eo)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function pce(t){if(t instanceof c1)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var mce={bin:1,close:1,inner:1,open:1,punct:1,rel:1},gce={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Pn={math:{},text:{}};function O(t,e,r,n,a,i){Pn[t][a]={font:e,group:r,replace:n},i&&n&&(Pn[t][n]=Pn[t][a])}var B="math",et="text",G="main",le="ams",Gn="accent-token",At="bin",$i="close",If="inner",Ft="mathord",Ea="op-token",Is="open",O2="punct",ce="rel",hc="spacing",ye="textord";O(B,G,ce,"","\\equiv",!0);O(B,G,ce,"","\\prec",!0);O(B,G,ce,"","\\succ",!0);O(B,G,ce,"","\\sim",!0);O(B,G,ce,"","\\perp");O(B,G,ce,"","\\preceq",!0);O(B,G,ce,"","\\succeq",!0);O(B,G,ce,"","\\simeq",!0);O(B,G,ce,"","\\mid",!0);O(B,G,ce,"","\\ll",!0);O(B,G,ce,"","\\gg",!0);O(B,G,ce,"","\\asymp",!0);O(B,G,ce,"","\\parallel");O(B,G,ce,"","\\bowtie",!0);O(B,G,ce,"","\\smile",!0);O(B,G,ce,"","\\sqsubseteq",!0);O(B,G,ce,"","\\sqsupseteq",!0);O(B,G,ce,"","\\doteq",!0);O(B,G,ce,"","\\frown",!0);O(B,G,ce,"","\\ni",!0);O(B,G,ce,"","\\propto",!0);O(B,G,ce,"","\\vdash",!0);O(B,G,ce,"","\\dashv",!0);O(B,G,ce,"","\\owns");O(B,G,O2,".","\\ldotp");O(B,G,O2,"","\\cdotp");O(B,G,ye,"#","\\#");O(et,G,ye,"#","\\#");O(B,G,ye,"&","\\&");O(et,G,ye,"&","\\&");O(B,G,ye,"","\\aleph",!0);O(B,G,ye,"","\\forall",!0);O(B,G,ye,"","\\hbar",!0);O(B,G,ye,"","\\exists",!0);O(B,G,ye,"","\\nabla",!0);O(B,G,ye,"","\\flat",!0);O(B,G,ye,"","\\ell",!0);O(B,G,ye,"","\\natural",!0);O(B,G,ye,"","\\clubsuit",!0);O(B,G,ye,"","\\wp",!0);O(B,G,ye,"","\\sharp",!0);O(B,G,ye,"","\\diamondsuit",!0);O(B,G,ye,"","\\Re",!0);O(B,G,ye,"","\\heartsuit",!0);O(B,G,ye,"","\\Im",!0);O(B,G,ye,"","\\spadesuit",!0);O(B,G,ye,"","\\S",!0);O(et,G,ye,"","\\S");O(B,G,ye,"","\\P",!0);O(et,G,ye,"","\\P");O(B,G,ye,"","\\dag");O(et,G,ye,"","\\dag");O(et,G,ye,"","\\textdagger");O(B,G,ye,"","\\ddag");O(et,G,ye,"","\\ddag");O(et,G,ye,"","\\textdaggerdbl");O(B,G,$i,"","\\rmoustache",!0);O(B,G,Is,"","\\lmoustache",!0);O(B,G,$i,"","\\rgroup",!0);O(B,G,Is,"","\\lgroup",!0);O(B,G,At,"","\\mp",!0);O(B,G,At,"","\\ominus",!0);O(B,G,At,"","\\uplus",!0);O(B,G,At,"","\\sqcap",!0);O(B,G,At,"","\\ast");O(B,G,At,"","\\sqcup",!0);O(B,G,At,"","\\bigcirc",!0);O(B,G,At,"","\\bullet",!0);O(B,G,At,"","\\ddagger");O(B,G,At,"","\\wr",!0);O(B,G,At,"","\\amalg");O(B,G,At,"&","\\And");O(B,G,ce,"","\\longleftarrow",!0);O(B,G,ce,"","\\Leftarrow",!0);O(B,G,ce,"","\\Longleftarrow",!0);O(B,G,ce,"","\\longrightarrow",!0);O(B,G,ce,"","\\Rightarrow",!0);O(B,G,ce,"","\\Longrightarrow",!0);O(B,G,ce,"","\\leftrightarrow",!0);O(B,G,ce,"","\\longleftrightarrow",!0);O(B,G,ce,"","\\Leftrightarrow",!0);O(B,G,ce,"","\\Longleftrightarrow",!0);O(B,G,ce,"","\\mapsto",!0);O(B,G,ce,"","\\longmapsto",!0);O(B,G,ce,"","\\nearrow",!0);O(B,G,ce,"","\\hookleftarrow",!0);O(B,G,ce,"","\\hookrightarrow",!0);O(B,G,ce,"","\\searrow",!0);O(B,G,ce,"","\\leftharpoonup",!0);O(B,G,ce,"","\\rightharpoonup",!0);O(B,G,ce,"","\\swarrow",!0);O(B,G,ce,"","\\leftharpoondown",!0);O(B,G,ce,"","\\rightharpoondown",!0);O(B,G,ce,"","\\nwarrow",!0);O(B,G,ce,"","\\rightleftharpoons",!0);O(B,le,ce,"","\\nless",!0);O(B,le,ce,"","\\@nleqslant");O(B,le,ce,"","\\@nleqq");O(B,le,ce,"","\\lneq",!0);O(B,le,ce,"","\\lneqq",!0);O(B,le,ce,"","\\@lvertneqq");O(B,le,ce,"","\\lnsim",!0);O(B,le,ce,"","\\lnapprox",!0);O(B,le,ce,"","\\nprec",!0);O(B,le,ce,"","\\npreceq",!0);O(B,le,ce,"","\\precnsim",!0);O(B,le,ce,"","\\precnapprox",!0);O(B,le,ce,"","\\nsim",!0);O(B,le,ce,"","\\@nshortmid");O(B,le,ce,"","\\nmid",!0);O(B,le,ce,"","\\nvdash",!0);O(B,le,ce,"","\\nvDash",!0);O(B,le,ce,"","\\ntriangleleft");O(B,le,ce,"","\\ntrianglelefteq",!0);O(B,le,ce,"","\\subsetneq",!0);O(B,le,ce,"","\\@varsubsetneq");O(B,le,ce,"","\\subsetneqq",!0);O(B,le,ce,"","\\@varsubsetneqq");O(B,le,ce,"","\\ngtr",!0);O(B,le,ce,"","\\@ngeqslant");O(B,le,ce,"","\\@ngeqq");O(B,le,ce,"","\\gneq",!0);O(B,le,ce,"","\\gneqq",!0);O(B,le,ce,"","\\@gvertneqq");O(B,le,ce,"","\\gnsim",!0);O(B,le,ce,"","\\gnapprox",!0);O(B,le,ce,"","\\nsucc",!0);O(B,le,ce,"","\\nsucceq",!0);O(B,le,ce,"","\\succnsim",!0);O(B,le,ce,"","\\succnapprox",!0);O(B,le,ce,"","\\ncong",!0);O(B,le,ce,"","\\@nshortparallel");O(B,le,ce,"","\\nparallel",!0);O(B,le,ce,"","\\nVDash",!0);O(B,le,ce,"","\\ntriangleright");O(B,le,ce,"","\\ntrianglerighteq",!0);O(B,le,ce,"","\\@nsupseteqq");O(B,le,ce,"","\\supsetneq",!0);O(B,le,ce,"","\\@varsupsetneq");O(B,le,ce,"","\\supsetneqq",!0);O(B,le,ce,"","\\@varsupsetneqq");O(B,le,ce,"","\\nVdash",!0);O(B,le,ce,"","\\precneqq",!0);O(B,le,ce,"","\\succneqq",!0);O(B,le,ce,"","\\@nsubseteqq");O(B,le,At,"","\\unlhd");O(B,le,At,"","\\unrhd");O(B,le,ce,"","\\nleftarrow",!0);O(B,le,ce,"","\\nrightarrow",!0);O(B,le,ce,"","\\nLeftarrow",!0);O(B,le,ce,"","\\nRightarrow",!0);O(B,le,ce,"","\\nleftrightarrow",!0);O(B,le,ce,"","\\nLeftrightarrow",!0);O(B,le,ce,"","\\vartriangle");O(B,le,ye,"","\\hslash");O(B,le,ye,"","\\triangledown");O(B,le,ye,"","\\lozenge");O(B,le,ye,"","\\circledS");O(B,le,ye,"","\\circledR");O(et,le,ye,"","\\circledR");O(B,le,ye,"","\\measuredangle",!0);O(B,le,ye,"","\\nexists");O(B,le,ye,"","\\mho");O(B,le,ye,"","\\Finv",!0);O(B,le,ye,"","\\Game",!0);O(B,le,ye,"","\\backprime");O(B,le,ye,"","\\blacktriangle");O(B,le,ye,"","\\blacktriangledown");O(B,le,ye,"","\\blacksquare");O(B,le,ye,"","\\blacklozenge");O(B,le,ye,"","\\bigstar");O(B,le,ye,"","\\sphericalangle",!0);O(B,le,ye,"","\\complement",!0);O(B,le,ye,"","\\eth",!0);O(et,G,ye,"","");O(B,le,ye,"","\\diagup");O(B,le,ye,"","\\diagdown");O(B,le,ye,"","\\square");O(B,le,ye,"","\\Box");O(B,le,ye,"","\\Diamond");O(B,le,ye,"","\\yen",!0);O(et,le,ye,"","\\yen",!0);O(B,le,ye,"","\\checkmark",!0);O(et,le,ye,"","\\checkmark");O(B,le,ye,"","\\beth",!0);O(B,le,ye,"","\\daleth",!0);O(B,le,ye,"","\\gimel",!0);O(B,le,ye,"","\\digamma",!0);O(B,le,ye,"","\\varkappa");O(B,le,Is,"","\\@ulcorner",!0);O(B,le,$i,"","\\@urcorner",!0);O(B,le,Is,"","\\@llcorner",!0);O(B,le,$i,"","\\@lrcorner",!0);O(B,le,ce,"","\\leqq",!0);O(B,le,ce,"","\\leqslant",!0);O(B,le,ce,"","\\eqslantless",!0);O(B,le,ce,"","\\lesssim",!0);O(B,le,ce,"","\\lessapprox",!0);O(B,le,ce,"","\\approxeq",!0);O(B,le,At,"","\\lessdot");O(B,le,ce,"","\\lll",!0);O(B,le,ce,"","\\lessgtr",!0);O(B,le,ce,"","\\lesseqgtr",!0);O(B,le,ce,"","\\lesseqqgtr",!0);O(B,le,ce,"","\\doteqdot");O(B,le,ce,"","\\risingdotseq",!0);O(B,le,ce,"","\\fallingdotseq",!0);O(B,le,ce,"","\\backsim",!0);O(B,le,ce,"","\\backsimeq",!0);O(B,le,ce,"","\\subseteqq",!0);O(B,le,ce,"","\\Subset",!0);O(B,le,ce,"","\\sqsubset",!0);O(B,le,ce,"","\\preccurlyeq",!0);O(B,le,ce,"","\\curlyeqprec",!0);O(B,le,ce,"","\\precsim",!0);O(B,le,ce,"","\\precapprox",!0);O(B,le,ce,"","\\vartriangleleft");O(B,le,ce,"","\\trianglelefteq");O(B,le,ce,"","\\vDash",!0);O(B,le,ce,"","\\Vvdash",!0);O(B,le,ce,"","\\smallsmile");O(B,le,ce,"","\\smallfrown");O(B,le,ce,"","\\bumpeq",!0);O(B,le,ce,"","\\Bumpeq",!0);O(B,le,ce,"","\\geqq",!0);O(B,le,ce,"","\\geqslant",!0);O(B,le,ce,"","\\eqslantgtr",!0);O(B,le,ce,"","\\gtrsim",!0);O(B,le,ce,"","\\gtrapprox",!0);O(B,le,At,"","\\gtrdot");O(B,le,ce,"","\\ggg",!0);O(B,le,ce,"","\\gtrless",!0);O(B,le,ce,"","\\gtreqless",!0);O(B,le,ce,"","\\gtreqqless",!0);O(B,le,ce,"","\\eqcirc",!0);O(B,le,ce,"","\\circeq",!0);O(B,le,ce,"","\\triangleq",!0);O(B,le,ce,"","\\thicksim");O(B,le,ce,"","\\thickapprox");O(B,le,ce,"","\\supseteqq",!0);O(B,le,ce,"","\\Supset",!0);O(B,le,ce,"","\\sqsupset",!0);O(B,le,ce,"","\\succcurlyeq",!0);O(B,le,ce,"","\\curlyeqsucc",!0);O(B,le,ce,"","\\succsim",!0);O(B,le,ce,"","\\succapprox",!0);O(B,le,ce,"","\\vartriangleright");O(B,le,ce,"","\\trianglerighteq");O(B,le,ce,"","\\Vdash",!0);O(B,le,ce,"","\\shortmid");O(B,le,ce,"","\\shortparallel");O(B,le,ce,"","\\between",!0);O(B,le,ce,"","\\pitchfork",!0);O(B,le,ce,"","\\varpropto");O(B,le,ce,"","\\blacktriangleleft");O(B,le,ce,"","\\therefore",!0);O(B,le,ce,"","\\backepsilon");O(B,le,ce,"","\\blacktriangleright");O(B,le,ce,"","\\because",!0);O(B,le,ce,"","\\llless");O(B,le,ce,"","\\gggtr");O(B,le,At,"","\\lhd");O(B,le,At,"","\\rhd");O(B,le,ce,"","\\eqsim",!0);O(B,G,ce,"","\\Join");O(B,le,ce,"","\\Doteq",!0);O(B,le,At,"","\\dotplus",!0);O(B,le,At,"","\\smallsetminus");O(B,le,At,"","\\Cap",!0);O(B,le,At,"","\\Cup",!0);O(B,le,At,"","\\doublebarwedge",!0);O(B,le,At,"","\\boxminus",!0);O(B,le,At,"","\\boxplus",!0);O(B,le,At,"","\\divideontimes",!0);O(B,le,At,"","\\ltimes",!0);O(B,le,At,"","\\rtimes",!0);O(B,le,At,"","\\leftthreetimes",!0);O(B,le,At,"","\\rightthreetimes",!0);O(B,le,At,"","\\curlywedge",!0);O(B,le,At,"","\\curlyvee",!0);O(B,le,At,"","\\circleddash",!0);O(B,le,At,"","\\circledast",!0);O(B,le,At,"","\\centerdot");O(B,le,At,"","\\intercal",!0);O(B,le,At,"","\\doublecap");O(B,le,At,"","\\doublecup");O(B,le,At,"","\\boxtimes",!0);O(B,le,ce,"","\\dashrightarrow",!0);O(B,le,ce,"","\\dashleftarrow",!0);O(B,le,ce,"","\\leftleftarrows",!0);O(B,le,ce,"","\\leftrightarrows",!0);O(B,le,ce,"","\\Lleftarrow",!0);O(B,le,ce,"","\\twoheadleftarrow",!0);O(B,le,ce,"","\\leftarrowtail",!0);O(B,le,ce,"","\\looparrowleft",!0);O(B,le,ce,"","\\leftrightharpoons",!0);O(B,le,ce,"","\\curvearrowleft",!0);O(B,le,ce,"","\\circlearrowleft",!0);O(B,le,ce,"","\\Lsh",!0);O(B,le,ce,"","\\upuparrows",!0);O(B,le,ce,"","\\upharpoonleft",!0);O(B,le,ce,"","\\downharpoonleft",!0);O(B,G,ce,"","\\origof",!0);O(B,G,ce,"","\\imageof",!0);O(B,le,ce,"","\\multimap",!0);O(B,le,ce,"","\\leftrightsquigarrow",!0);O(B,le,ce,"","\\rightrightarrows",!0);O(B,le,ce,"","\\rightleftarrows",!0);O(B,le,ce,"","\\twoheadrightarrow",!0);O(B,le,ce,"","\\rightarrowtail",!0);O(B,le,ce,"","\\looparrowright",!0);O(B,le,ce,"","\\curvearrowright",!0);O(B,le,ce,"","\\circlearrowright",!0);O(B,le,ce,"","\\Rsh",!0);O(B,le,ce,"","\\downdownarrows",!0);O(B,le,ce,"","\\upharpoonright",!0);O(B,le,ce,"","\\downharpoonright",!0);O(B,le,ce,"","\\rightsquigarrow",!0);O(B,le,ce,"","\\leadsto");O(B,le,ce,"","\\Rrightarrow",!0);O(B,le,ce,"","\\restriction");O(B,G,ye,"","`");O(B,G,ye,"$","\\$");O(et,G,ye,"$","\\$");O(et,G,ye,"$","\\textdollar");O(B,G,ye,"%","\\%");O(et,G,ye,"%","\\%");O(B,G,ye,"_","\\_");O(et,G,ye,"_","\\_");O(et,G,ye,"_","\\textunderscore");O(B,G,ye,"","\\angle",!0);O(B,G,ye,"","\\infty",!0);O(B,G,ye,"","\\prime");O(B,G,ye,"","\\triangle");O(B,G,ye,"","\\Gamma",!0);O(B,G,ye,"","\\Delta",!0);O(B,G,ye,"","\\Theta",!0);O(B,G,ye,"","\\Lambda",!0);O(B,G,ye,"","\\Xi",!0);O(B,G,ye,"","\\Pi",!0);O(B,G,ye,"","\\Sigma",!0);O(B,G,ye,"","\\Upsilon",!0);O(B,G,ye,"","\\Phi",!0);O(B,G,ye,"","\\Psi",!0);O(B,G,ye,"","\\Omega",!0);O(B,G,ye,"A","");O(B,G,ye,"B","");O(B,G,ye,"E","");O(B,G,ye,"Z","");O(B,G,ye,"H","");O(B,G,ye,"I","");O(B,G,ye,"K","");O(B,G,ye,"M","");O(B,G,ye,"N","");O(B,G,ye,"O","");O(B,G,ye,"P","");O(B,G,ye,"T","");O(B,G,ye,"X","");O(B,G,ye,"","\\neg",!0);O(B,G,ye,"","\\lnot");O(B,G,ye,"","\\top");O(B,G,ye,"","\\bot");O(B,G,ye,"","\\emptyset");O(B,le,ye,"","\\varnothing");O(B,G,Ft,"","\\alpha",!0);O(B,G,Ft,"","\\beta",!0);O(B,G,Ft,"","\\gamma",!0);O(B,G,Ft,"","\\delta",!0);O(B,G,Ft,"","\\epsilon",!0);O(B,G,Ft,"","\\zeta",!0);O(B,G,Ft,"","\\eta",!0);O(B,G,Ft,"","\\theta",!0);O(B,G,Ft,"","\\iota",!0);O(B,G,Ft,"","\\kappa",!0);O(B,G,Ft,"","\\lambda",!0);O(B,G,Ft,"","\\mu",!0);O(B,G,Ft,"","\\nu",!0);O(B,G,Ft,"","\\xi",!0);O(B,G,Ft,"","\\omicron",!0);O(B,G,Ft,"","\\pi",!0);O(B,G,Ft,"","\\rho",!0);O(B,G,Ft,"","\\sigma",!0);O(B,G,Ft,"","\\tau",!0);O(B,G,Ft,"","\\upsilon",!0);O(B,G,Ft,"","\\phi",!0);O(B,G,Ft,"","\\chi",!0);O(B,G,Ft,"","\\psi",!0);O(B,G,Ft,"","\\omega",!0);O(B,G,Ft,"","\\varepsilon",!0);O(B,G,Ft,"","\\vartheta",!0);O(B,G,Ft,"","\\varpi",!0);O(B,G,Ft,"","\\varrho",!0);O(B,G,Ft,"","\\varsigma",!0);O(B,G,Ft,"","\\varphi",!0);O(B,G,At,"","*",!0);O(B,G,At,"+","+");O(B,G,At,"","-",!0);O(B,G,At,"","\\cdot",!0);O(B,G,At,"","\\circ",!0);O(B,G,At,"","\\div",!0);O(B,G,At,"","\\pm",!0);O(B,G,At,"","\\times",!0);O(B,G,At,"","\\cap",!0);O(B,G,At,"","\\cup",!0);O(B,G,At,"","\\setminus",!0);O(B,G,At,"","\\land");O(B,G,At,"","\\lor");O(B,G,At,"","\\wedge",!0);O(B,G,At,"","\\vee",!0);O(B,G,ye,"","\\surd");O(B,G,Is,"","\\langle",!0);O(B,G,Is,"","\\lvert");O(B,G,Is,"","\\lVert");O(B,G,$i,"?","?");O(B,G,$i,"!","!");O(B,G,$i,"","\\rangle",!0);O(B,G,$i,"","\\rvert");O(B,G,$i,"","\\rVert");O(B,G,ce,"=","=");O(B,G,ce,":",":");O(B,G,ce,"","\\approx",!0);O(B,G,ce,"","\\cong",!0);O(B,G,ce,"","\\ge");O(B,G,ce,"","\\geq",!0);O(B,G,ce,"","\\gets");O(B,G,ce,">","\\gt",!0);O(B,G,ce,"","\\in",!0);O(B,G,ce,"","\\@not");O(B,G,ce,"","\\subset",!0);O(B,G,ce,"","\\supset",!0);O(B,G,ce,"","\\subseteq",!0);O(B,G,ce,"","\\supseteq",!0);O(B,le,ce,"","\\nsubseteq",!0);O(B,le,ce,"","\\nsupseteq",!0);O(B,G,ce,"","\\models");O(B,G,ce,"","\\leftarrow",!0);O(B,G,ce,"","\\le");O(B,G,ce,"","\\leq",!0);O(B,G,ce,"<","\\lt",!0);O(B,G,ce,"","\\rightarrow",!0);O(B,G,ce,"","\\to");O(B,le,ce,"","\\ngeq",!0);O(B,le,ce,"","\\nleq",!0);O(B,G,hc,"","\\ ");O(B,G,hc,"","\\space");O(B,G,hc,"","\\nobreakspace");O(et,G,hc,"","\\ ");O(et,G,hc,""," ");O(et,G,hc,"","\\space");O(et,G,hc,"","\\nobreakspace");O(B,G,hc,null,"\\nobreak");O(B,G,hc,null,"\\allowbreak");O(B,G,O2,",",",");O(B,G,O2,";",";");O(B,le,At,"","\\barwedge",!0);O(B,le,At,"","\\veebar",!0);O(B,G,At,"","\\odot",!0);O(B,G,At,"","\\oplus",!0);O(B,G,At,"","\\otimes",!0);O(B,G,ye,"","\\partial",!0);O(B,G,At,"","\\oslash",!0);O(B,le,At,"","\\circledcirc",!0);O(B,le,At,"","\\boxdot",!0);O(B,G,At,"","\\bigtriangleup");O(B,G,At,"","\\bigtriangledown");O(B,G,At,"","\\dagger");O(B,G,At,"","\\diamond");O(B,G,At,"","\\star");O(B,G,At,"","\\triangleleft");O(B,G,At,"","\\triangleright");O(B,G,Is,"{","\\{");O(et,G,ye,"{","\\{");O(et,G,ye,"{","\\textbraceleft");O(B,G,$i,"}","\\}");O(et,G,ye,"}","\\}");O(et,G,ye,"}","\\textbraceright");O(B,G,Is,"{","\\lbrace");O(B,G,$i,"}","\\rbrace");O(B,G,Is,"[","\\lbrack",!0);O(et,G,ye,"[","\\lbrack",!0);O(B,G,$i,"]","\\rbrack",!0);O(et,G,ye,"]","\\rbrack",!0);O(B,G,Is,"(","\\lparen",!0);O(B,G,$i,")","\\rparen",!0);O(et,G,ye,"<","\\textless",!0);O(et,G,ye,">","\\textgreater",!0);O(B,G,Is,"","\\lfloor",!0);O(B,G,$i,"","\\rfloor",!0);O(B,G,Is,"","\\lceil",!0);O(B,G,$i,"","\\rceil",!0);O(B,G,ye,"\\","\\backslash");O(B,G,ye,"","|");O(B,G,ye,"","\\vert");O(et,G,ye,"|","\\textbar",!0);O(B,G,ye,"","\\|");O(B,G,ye,"","\\Vert");O(et,G,ye,"","\\textbardbl");O(et,G,ye,"~","\\textasciitilde");O(et,G,ye,"\\","\\textbackslash");O(et,G,ye,"^","\\textasciicircum");O(B,G,ce,"","\\uparrow",!0);O(B,G,ce,"","\\Uparrow",!0);O(B,G,ce,"","\\downarrow",!0);O(B,G,ce,"","\\Downarrow",!0);O(B,G,ce,"","\\updownarrow",!0);O(B,G,ce,"","\\Updownarrow",!0);O(B,G,Ea,"","\\coprod");O(B,G,Ea,"","\\bigvee");O(B,G,Ea,"","\\bigwedge");O(B,G,Ea,"","\\biguplus");O(B,G,Ea,"","\\bigcap");O(B,G,Ea,"","\\bigcup");O(B,G,Ea,"","\\int");O(B,G,Ea,"","\\intop");O(B,G,Ea,"","\\iint");O(B,G,Ea,"","\\iiint");O(B,G,Ea,"","\\prod");O(B,G,Ea,"","\\sum");O(B,G,Ea,"","\\bigotimes");O(B,G,Ea,"","\\bigoplus");O(B,G,Ea,"","\\bigodot");O(B,G,Ea,"","\\oint");O(B,G,Ea,"","\\oiint");O(B,G,Ea,"","\\oiiint");O(B,G,Ea,"","\\bigsqcup");O(B,G,Ea,"","\\smallint");O(et,G,If,"","\\textellipsis");O(B,G,If,"","\\mathellipsis");O(et,G,If,"","\\ldots",!0);O(B,G,If,"","\\ldots",!0);O(B,G,If,"","\\@cdots",!0);O(B,G,If,"","\\ddots",!0);O(B,G,ye,"","\\varvdots");O(et,G,ye,"","\\varvdots");O(B,G,Gn,"","\\acute");O(B,G,Gn,"","\\grave");O(B,G,Gn,"","\\ddot");O(B,G,Gn,"~","\\tilde");O(B,G,Gn,"","\\bar");O(B,G,Gn,"","\\breve");O(B,G,Gn,"","\\check");O(B,G,Gn,"^","\\hat");O(B,G,Gn,"","\\vec");O(B,G,Gn,"","\\dot");O(B,G,Gn,"","\\mathring");O(B,G,Ft,"","\\@imath");O(B,G,Ft,"","\\@jmath");O(B,G,ye,"","");O(B,G,ye,"","");O(et,G,ye,"","\\i",!0);O(et,G,ye,"","\\j",!0);O(et,G,ye,"","\\ss",!0);O(et,G,ye,"","\\ae",!0);O(et,G,ye,"","\\oe",!0);O(et,G,ye,"","\\o",!0);O(et,G,ye,"","\\AE",!0);O(et,G,ye,"","\\OE",!0);O(et,G,ye,"","\\O",!0);O(et,G,Gn,"","\\'");O(et,G,Gn,"","\\`");O(et,G,Gn,"","\\^");O(et,G,Gn,"","\\~");O(et,G,Gn,"","\\=");O(et,G,Gn,"","\\u");O(et,G,Gn,"","\\.");O(et,G,Gn,"","\\c");O(et,G,Gn,"","\\r");O(et,G,Gn,"","\\v");O(et,G,Gn,"",'\\"');O(et,G,Gn,"","\\H");O(et,G,Gn,"","\\textcircled");var TH={"--":!0,"---":!0,"``":!0,"''":!0};O(et,G,ye,"","--",!0);O(et,G,ye,"","\\textendash");O(et,G,ye,"","---",!0);O(et,G,ye,"","\\textemdash");O(et,G,ye,"","`",!0);O(et,G,ye,"","\\textquoteleft");O(et,G,ye,"","'",!0);O(et,G,ye,"","\\textquoteright");O(et,G,ye,"","``",!0);O(et,G,ye,"","\\textquotedblleft");O(et,G,ye,"","''",!0);O(et,G,ye,"","\\textquotedblright");O(B,G,ye,"","\\degree",!0);O(et,G,ye,"","\\degree");O(et,G,ye,"","\\textdegree",!0);O(B,G,ye,"","\\pounds");O(B,G,ye,"","\\mathsterling",!0);O(et,G,ye,"","\\pounds");O(et,G,ye,"","\\textsterling",!0);O(B,le,ye,"","\\maltese");O(et,le,ye,"","\\maltese");var hR='0123456789/@."';for(var e3=0;e3<hR.length;e3++){var fR=hR.charAt(e3);O(B,G,ye,fR,fR)}var pR='0123456789!@*()-=+";:?/.,';for(var t3=0;t3<pR.length;t3++){var mR=pR.charAt(t3);O(et,G,ye,mR,mR)}var Dx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var r3=0;r3<Dx.length;r3++){var ov=Dx.charAt(r3);O(B,G,Ft,ov,ov),O(et,G,ye,ov,ov)}O(B,le,ye,"C","");O(et,le,ye,"C","");O(B,le,ye,"H","");O(et,le,ye,"H","");O(B,le,ye,"N","");O(et,le,ye,"N","");O(B,le,ye,"P","");O(et,le,ye,"P","");O(B,le,ye,"Q","");O(et,le,ye,"Q","");O(B,le,ye,"R","");O(et,le,ye,"R","");O(B,le,ye,"Z","");O(et,le,ye,"Z","");O(B,G,Ft,"h","");O(et,G,Ft,"h","");var Zt="";for(var Oi=0;Oi<Dx.length;Oi++){var ea=Dx.charAt(Oi);Zt=String.fromCharCode(55349,56320+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56372+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56424+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56580+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56684+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56736+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56788+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56840+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56944+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Oi<26&&(Zt=String.fromCharCode(55349,56632+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt),Zt=String.fromCharCode(55349,56476+Oi),O(B,G,Ft,ea,Zt),O(et,G,ye,ea,Zt))}Zt="";O(B,G,Ft,"k",Zt);O(et,G,ye,"k",Zt);for(var dd=0;dd<10;dd++){var Xc=dd.toString();Zt=String.fromCharCode(55349,57294+dd),O(B,G,Ft,Xc,Zt),O(et,G,ye,Xc,Zt),Zt=String.fromCharCode(55349,57314+dd),O(B,G,Ft,Xc,Zt),O(et,G,ye,Xc,Zt),Zt=String.fromCharCode(55349,57324+dd),O(B,G,Ft,Xc,Zt),O(et,G,ye,Xc,Zt),Zt=String.fromCharCode(55349,57334+dd),O(B,G,Ft,Xc,Zt),O(et,G,ye,Xc,Zt)}var CA="";for(var n3=0;n3<CA.length;n3++){var lv=CA.charAt(n3);O(B,G,Ft,lv,lv),O(et,G,ye,lv,lv)}var cv=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],gR=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],yce=function(e,r){var n=e.charCodeAt(0),a=e.charCodeAt(1),i=(n-55296)*1024+(a-56320)+65536,s=r==="math"?0:1;if(119808<=i&&i<120484){var c=Math.floor((i-119808)/26);return[cv[c][2],cv[c][s]]}else if(120782<=i&&i<=120831){var d=Math.floor((i-120782)/10);return[gR[d][2],gR[d][s]]}else{if(i===120485||i===120486)return[cv[0][2],cv[0][s]];if(120486<i&&i<120782)return["",""];throw new ot("Unsupported character: "+e)}},I2=function(e,r,n){return Pn[n][e]&&Pn[n][e].replace&&(e=Pn[n][e].replace),{value:e,metrics:V7(e,r,n)}},mo=function(e,r,n,a,i){var s=I2(e,r,n),c=s.metrics;e=s.value;var d;if(c){var h=c.italic;(n==="text"||a&&a.font==="mathit")&&(h=0),d=new eo(e,c.height,c.depth,h,c.skew,c.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),d=new eo(e,0,0,0,0,0,i);if(a){d.maxFontSize=a.sizeMultiplier,a.style.isTight()&&d.classes.push("mtight");var p=a.getColor();p&&(d.style.color=p)}return d},vce=function(e,r,n,a){return a===void 0&&(a=[]),n.font==="boldsymbol"&&I2(e,"Main-Bold",r).metrics?mo(e,"Main-Bold",r,n,a.concat(["mathbf"])):e==="\\"||Pn[r][e].font==="main"?mo(e,"Main-Regular",r,n,a):mo(e,"AMS-Regular",r,n,a.concat(["amsrm"]))},xce=function(e,r,n,a,i){return i!=="textord"&&I2(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},bce=function(e,r,n){var a=e.mode,i=e.text,s=["mord"],c=a==="math"||a==="text"&&r.font,d=c?r.font:r.fontFamily,h="",p="";if(i.charCodeAt(0)===55349&&([h,p]=yce(i,a)),h.length>0)return mo(i,h,a,r,s.concat(p));if(d){var m,y;if(d==="boldsymbol"){var v=xce(i,a,r,s,n);m=v.fontName,y=[v.fontClass]}else c?(m=EH[d].fontName,y=[d]):(m=uv(d,r.fontWeight,r.fontShape),y=[d,r.fontWeight,r.fontShape]);if(I2(i,m,a).metrics)return mo(i,m,a,r,s.concat(y));if(TH.hasOwnProperty(i)&&m.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<i.length;S++)T.push(mo(i[S],m,a,r,s.concat(y)));return NH(T)}}if(n==="mathord")return mo(i,"Math-Italic",a,r,s.concat(["mathnormal"]));if(n==="textord"){var w=Pn[a][i]&&Pn[a][i].font;if(w==="ams"){var j=uv("amsrm",r.fontWeight,r.fontShape);return mo(i,j,a,r,s.concat("amsrm",r.fontWeight,r.fontShape))}else if(w==="main"||!w){var R=uv("textrm",r.fontWeight,r.fontShape);return mo(i,R,a,r,s.concat(r.fontWeight,r.fontShape))}else{var I=uv(w,r.fontWeight,r.fontShape);return mo(i,I,a,r,s.concat(I,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},wce=(t,e)=>{if(ju(t.classes)!==ju(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var a in e.style)if(e.style.hasOwnProperty(a)&&t.style[a]!==e.style[a])return!1;return!0},Sce=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof eo&&n instanceof eo&&wce(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},q7=function(e){for(var r=0,n=0,a=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>r&&(r=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>a&&(a=s.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=a},Qi=function(e,r,n,a){var i=new c1(e,r,n,a);return q7(i),i},AH=(t,e,r,n)=>new c1(t,e,r,n),_ce=function(e,r,n){var a=Qi([e],[],r);return a.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),a.style.borderBottomWidth=gt(a.height),a.maxFontSize=1,a},Tce=function(e,r,n,a){var i=new F7(e,r,n,a);return q7(i),i},NH=function(e){var r=new l1(e);return q7(r),r},Ace=function(e,r){return e instanceof l1?Qi([],[e],r):e},Nce=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],a=-r[0].shift-r[0].elem.depth,i=a,s=1;s<r.length;s++){var c=-r[s].shift-i-r[s].elem.depth,d=c-(r[s-1].elem.height+r[s-1].elem.depth);i=i+c,n.push({type:"kern",size:d}),n.push(r[s])}return{children:n,depth:a}}var h;if(e.positionType==="top"){for(var p=e.positionData,m=0;m<e.children.length;m++){var y=e.children[m];p-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}h=p}else if(e.positionType==="bottom")h=-e.positionData;else{var v=e.children[0];if(v.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")h=-v.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")h=-v.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:h}},Ece=function(e,r){for(var{children:n,depth:a}=Nce(e),i=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;i=Math.max(i,d.maxFontSize,d.height)}}i+=2;var h=Qi(["pstrut"],[]);h.style.height=gt(i);for(var p=[],m=a,y=a,v=a,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")v+=S.size;else{var w=S.elem,j=S.wrapperClasses||[],R=S.wrapperStyle||{},I=Qi(j,[h,w],void 0,R);I.style.top=gt(-i-v-w.depth),S.marginLeft&&(I.style.marginLeft=S.marginLeft),S.marginRight&&(I.style.marginRight=S.marginRight),p.push(I),v+=w.height+w.depth}m=Math.min(m,v),y=Math.max(y,v)}var L=Qi(["vlist"],p);L.style.height=gt(y);var C;if(m<0){var P=Qi([],[]),N=Qi(["vlist"],[P]);N.style.height=gt(-m);var A=Qi(["vlist-s"],[new eo("")]);C=[Qi(["vlist-r"],[L,A]),Qi(["vlist-r"],[N])]}else C=[Qi(["vlist-r"],[L])];var E=Qi(["vlist-t"],C);return C.length===2&&E.classes.push("vlist-t2"),E.height=y,E.depth=-m,E},jce=(t,e)=>{var r=Qi(["mspace"],[],e),n=Qn(t,e);return r.style.marginRight=gt(n),r},uv=function(e,r,n){var a="";switch(e){case"amsrm":a="AMS";break;case"textrm":a="Main";break;case"textsf":a="SansSerif";break;case"texttt":a="Typewriter";break;default:a=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",a+"-"+i},EH={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},jH={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},kce=function(e,r){var[n,a,i]=jH[e],s=new ku(n),c=new rc([s],{width:gt(a),height:gt(i),style:"width:"+gt(a),viewBox:"0 0 "+1e3*a+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),d=AH(["overlay"],[c],r);return d.height=i,d.style.height=gt(i),d.style.width=gt(a),d},je={fontMap:EH,makeSymbol:mo,mathsym:vce,makeSpan:Qi,makeSvgSpan:AH,makeLineSpan:_ce,makeAnchor:Tce,makeFragment:NH,wrapFragment:Ace,makeVList:Ece,makeOrd:bce,makeGlue:jce,staticSvg:kce,svgData:jH,tryCombineChars:Sce},Kn={number:3,unit:"mu"},hd={number:4,unit:"mu"},jl={number:5,unit:"mu"},Cce={mord:{mop:Kn,mbin:hd,mrel:jl,minner:Kn},mop:{mord:Kn,mop:Kn,mrel:jl,minner:Kn},mbin:{mord:hd,mop:hd,mopen:hd,minner:hd},mrel:{mord:jl,mop:jl,mopen:jl,minner:jl},mopen:{},mclose:{mop:Kn,mbin:hd,mrel:jl,minner:Kn},mpunct:{mord:Kn,mop:Kn,mrel:jl,mopen:Kn,mclose:Kn,mpunct:Kn,minner:Kn},minner:{mord:Kn,mop:Kn,mbin:hd,mrel:jl,mopen:Kn,mpunct:Kn,minner:Kn}},Oce={mord:{mop:Kn},mop:{mord:Kn,mop:Kn},mbin:{},mrel:{},mopen:{},mclose:{mop:Kn},mpunct:{},minner:{mop:Kn}},kH={},Lx={},Bx={};function St(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:a},d=0;d<r.length;++d)kH[r[d]]=c;e&&(i&&(Lx[e]=i),s&&(Bx[e]=s))}function h0(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;St({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var $x=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},ha=function(e){return e.type==="ordgroup"?e.body:[e]},nc=je.makeSpan,Ice=["leftmost","mbin","mopen","mrel","mop","mpunct"],Rce=["rightmost","mrel","mclose","mpunct"],Mce={display:qt.DISPLAY,text:qt.TEXT,script:qt.SCRIPT,scriptscript:qt.SCRIPTSCRIPT},Pce={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ua=function(e,r,n,a){a===void 0&&(a=[null,null]);for(var i=[],s=0;s<e.length;s++){var c=Mr(e[s],r);if(c instanceof l1){var d=c.children;i.push(...d)}else i.push(c)}if(je.tryCombineChars(i),!n)return i;var h=r;if(e.length===1){var p=e[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Mce[p.style]))}var m=nc([a[0]||"leftmost"],[],r),y=nc([a[1]||"rightmost"],[],r),v=n==="root";return yR(i,(T,S)=>{var w=S.classes[0],j=T.classes[0];w==="mbin"&&Rce.includes(j)?S.classes[0]="mord":j==="mbin"&&Ice.includes(w)&&(T.classes[0]="mord")},{node:m},y,v),yR(i,(T,S)=>{var w=OA(S),j=OA(T),R=w&&j?T.hasClass("mtight")?Oce[w][j]:Cce[w][j]:null;if(R)return je.makeGlue(R,h)},{node:m},y,v),i},yR=function t(e,r,n,a,i){a&&e.push(a);for(var s=0;s<e.length;s++){var c=e[s],d=CH(c);if(d){t(d.children,r,n,null,i);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,n.node);p&&(n.insertAfter?n.insertAfter(p):(e.unshift(p),s++))}h?n.node=c:i&&c.hasClass("newline")&&(n.node=nc(["leftmost"])),n.insertAfter=(m=>y=>{e.splice(m+1,0,y),s++})(s)}a&&e.pop()},CH=function(e){return e instanceof l1||e instanceof F7||e instanceof c1&&e.hasClass("enclosing")?e:null},Dce=function t(e,r){var n=CH(e);if(n){var a=n.children;if(a.length){if(r==="right")return t(a[a.length-1],"right");if(r==="left")return t(a[0],"left")}}return e},OA=function(e,r){return e?(r&&(e=Dce(e,r)),Pce[e.classes[0]]||null):null},Jm=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return nc(r.concat(n))},Mr=function(e,r,n){if(!e)return nc();if(Lx[e.type]){var a=Lx[e.type](e,r);if(n&&r.size!==n.size){a=nc(r.sizingClasses(n),[a],r);var i=r.sizeMultiplier/n.sizeMultiplier;a.height*=i,a.depth*=i}return a}else throw new ot("Got group of unknown type: '"+e.type+"'")};function dv(t,e){var r=nc(["base"],t,e),n=nc(["strut"]);return n.style.height=gt(r.height+r.depth),r.depth&&(n.style.verticalAlign=gt(-r.depth)),r.children.unshift(n),r}function IA(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=Ua(t,e,"root"),a;n.length===2&&n[1].hasClass("tag")&&(a=n.pop());for(var i=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(i.push(dv(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(i.push(dv(s,e)),s=[]),i.push(n[c]));s.length>0&&i.push(dv(s,e));var h;r?(h=dv(Ua(r,e,!0)),h.classes=["tag"],i.push(h)):a&&i.push(a);var p=nc(["katex-html"],i);if(p.setAttribute("aria-hidden","true"),h){var m=h.children[0];m.style.height=gt(p.height+p.depth),p.depth&&(m.style.verticalAlign=gt(-p.depth))}return p}function OH(t){return new l1(t)}class _s{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=ju(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Vo&&this.children[n+1]instanceof Vo){for(var a=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Vo;)a+=this.children[++n].toText();e.appendChild(new Vo(a).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Vr.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Vr.escape(ju(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Vo{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Vr.escape(this.toText())}toText(){return this.text}}class Lce{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",gt(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+gt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var at={MathNode:_s,TextNode:Vo,SpaceNode:Lce,newDocumentFragment:OH},to=function(e,r,n){return Pn[r][e]&&Pn[r][e].replace&&e.charCodeAt(0)!==55349&&!(TH.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Pn[r][e].replace),new at.TextNode(e)},H7=function(e){return e.length===1?e[0]:new at.MathNode("mrow",e)},G7=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var a=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;Pn[a][i]&&Pn[a][i].replace&&(i=Pn[a][i].replace);var s=je.fontMap[n].fontName;return V7(i,s,a)?je.fontMap[n].variant:null};function a3(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Vo&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Vo&&r.text===","}else return!1}var ss=function(e,r,n){if(e.length===1){var a=Cn(e[0],r);return n&&a instanceof _s&&a.type==="mo"&&(a.setAttribute("lspace","0em"),a.setAttribute("rspace","0em")),[a]}for(var i=[],s,c=0;c<e.length;c++){var d=Cn(e[c],r);if(d instanceof _s&&s instanceof _s){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(a3(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&a3(s))d.children=[...s.children,...d.children],i.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||a3(s))){var h=d.children[0];h instanceof _s&&h.type==="mn"&&(h.children=[...s.children,...h.children],i.pop())}else if(s.type==="mi"&&s.children.length===1){var p=s.children[0];if(p instanceof Vo&&p.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var m=d.children[0];m instanceof Vo&&m.text.length>0&&(m.text=m.text.slice(0,1)+""+m.text.slice(1),i.pop())}}}i.push(d),s=d}return i},Cu=function(e,r,n){return H7(ss(e,r,n))},Cn=function(e,r){if(!e)return new at.MathNode("mrow");if(Bx[e.type]){var n=Bx[e.type](e,r);return n}else throw new ot("Got group of unknown type: '"+e.type+"'")};function vR(t,e,r,n,a){var i=ss(t,r),s;i.length===1&&i[0]instanceof _s&&["mrow","mtable"].includes(i[0].type)?s=i[0]:s=new at.MathNode("mrow",i);var c=new at.MathNode("annotation",[new at.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new at.MathNode("semantics",[s,c]),h=new at.MathNode("math",[d]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&h.setAttribute("display","block");var p=a?"katex":"katex-mathml";return je.makeSpan([p],[h])}var IH=function(e){return new Rl({style:e.displayMode?qt.DISPLAY:qt.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},RH=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=je.makeSpan(n,[e])}return e},Bce=function(e,r,n){var a=IH(n),i;if(n.output==="mathml")return vR(e,r,a,n.displayMode,!0);if(n.output==="html"){var s=IA(e,a);i=je.makeSpan(["katex"],[s])}else{var c=vR(e,r,a,n.displayMode,!1),d=IA(e,a);i=je.makeSpan(["katex"],[c,d])}return RH(i,n)},$ce=function(e,r,n){var a=IH(n),i=IA(e,a),s=je.makeSpan(["katex"],[i]);return RH(s,n)},Uce={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},zce=function(e){var r=new at.MathNode("mo",[new at.TextNode(Uce[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Vce={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Fce=function(e){return e.type==="ordgroup"?e.body.length:1},qce=function(e,r){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var h=e,p=Fce(h.base),m,y,v;if(p>5)d==="widehat"||d==="widecheck"?(m=420,c=2364,v=.42,y=d+"4"):(m=312,c=2340,v=.34,y="tilde4");else{var T=[1,1,2,2,3,3][p];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],m=[0,239,300,360,420][T],v=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],m=[0,260,286,306,312][T],v=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new ku(y),w=new rc([S],{width:"100%",height:gt(v),viewBox:"0 0 "+c+" "+m,preserveAspectRatio:"none"});return{span:je.makeSvgSpan([],[w],r),minWidth:0,height:v}}else{var j=[],R=Vce[d],[I,L,C]=R,P=C/1e3,N=I.length,A,E;if(N===1){var V=R[3];A=["hide-tail"],E=[V]}else if(N===2)A=["halfarrow-left","halfarrow-right"],E=["xMinYMin","xMaxYMin"];else if(N===3)A=["brace-left","brace-center","brace-right"],E=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+N+" children.");for(var D=0;D<N;D++){var U=new ku(I[D]),$=new rc([U],{width:"400em",height:gt(P),viewBox:"0 0 "+c+" "+C,preserveAspectRatio:E[D]+" slice"}),Q=je.makeSvgSpan([A[D]],[$],r);if(N===1)return{span:Q,minWidth:L,height:P};Q.style.height=gt(P),j.push(Q)}return{span:je.makeSpan(["stretchy"],j,r),minWidth:L,height:P}}}var{span:a,minWidth:i,height:s}=n();return a.height=s,a.style.height=gt(s),i>0&&(a.style.minWidth=gt(i)),a},Hce=function(e,r,n,a,i){var s,c=e.height+e.depth+n+a;if(/fbox|color|angl/.test(r)){if(s=je.makeSpan(["stretchy",r],[],i),r==="fbox"){var d=i.color&&i.getColor();d&&(s.style.borderColor=d)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new kA({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new kA({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new rc(h,{width:"100%",height:gt(c)});s=je.makeSvgSpan([],[p],i)}return s.height=c,s.style.height=gt(c),s},ac={encloseSpan:Hce,mathMLnode:zce,svgSpan:qce};function pr(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function W7(t){var e=R2(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function R2(t){return t&&(t.type==="atom"||gce.hasOwnProperty(t.type))?t:null}var K7=(t,e)=>{var r,n,a;t&&t.type==="supsub"?(n=pr(t.base,"accent"),r=n.base,t.base=r,a=pce(Mr(t,e)),t.base=n):(n=pr(t,"accent"),r=n.base);var i=Mr(r,e.havingCrampedStyle()),s=n.isShifty&&Vr.isCharacterBox(r),c=0;if(s){var d=Vr.getBaseElem(r),h=Mr(d,e.havingCrampedStyle());c=dR(h).skew}var p=n.label==="\\c",m=p?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=ac.svgSpan(n,e),y=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+gt(2*c)+")",marginLeft:gt(2*c)}:void 0}]},e);else{var v,T;n.label==="\\vec"?(v=je.staticSvg("vec",e),T=je.svgData.vec[1]):(v=je.makeOrd({mode:n.mode,text:n.label},e,"textord"),v=dR(v),v.italic=0,T=v.width,p&&(m+=v.depth)),y=je.makeSpan(["accent-body"],[v]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),m=i.height);var w=c;S||(w-=T/2),y.style.left=gt(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-m},{type:"elem",elem:y}]},e)}var j=je.makeSpan(["mord","accent"],[y],e);return a?(a.children[0]=j,a.height=Math.max(j.height,a.height),a.classes[0]="mord",a):j},MH=(t,e)=>{var r=t.isStretchy?ac.mathMLnode(t.label):new at.MathNode("mo",[to(t.label,t.mode)]),n=new at.MathNode("mover",[Cn(t.base,e),r]);return n.setAttribute("accent","true"),n},Gce=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));St({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=$x(e[0]),n=!Gce.test(t.funcName),a=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:a,base:r}},htmlBuilder:K7,mathmlBuilder:MH});St({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:K7,mathmlBuilder:MH});St({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:a}},htmlBuilder:(t,e)=>{var r=Mr(t.base,e),n=ac.svgSpan(t,e),a=t.label==="\\utilde"?.12:0,i=je.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:a},{type:"elem",elem:r}]},e);return je.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=ac.mathMLnode(t.label),n=new at.MathNode("munder",[Cn(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var hv=t=>{var e=new at.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};St({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:a}=t;return{type:"xArrow",mode:n.mode,label:a,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),a=je.wrapFragment(Mr(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";a.classes.push(i+"-arrow-pad");var s;t.below&&(n=e.havingStyle(r.sub()),s=je.wrapFragment(Mr(t.below,n,e),e),s.classes.push(i+"-arrow-pad"));var c=ac.svgSpan(t,e),d=-e.fontMetrics().axisHeight+.5*c.height,h=-e.fontMetrics().axisHeight-.5*c.height-.111;(a.depth>.25||t.label==="\\xleftequilibrium")&&(h-=a.depth);var p;if(s){var m=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;p=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:m}]},e)}else p=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:h},{type:"elem",elem:c,shift:d}]},e);return p.children[0].children[0].children[1].classes.push("svg-align"),je.makeSpan(["mrel","x-arrow"],[p],e)},mathmlBuilder(t,e){var r=ac.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var a=hv(Cn(t.body,e));if(t.below){var i=hv(Cn(t.below,e));n=new at.MathNode("munderover",[r,i,a])}else n=new at.MathNode("mover",[r,a])}else if(t.below){var s=hv(Cn(t.below,e));n=new at.MathNode("munder",[r,s])}else n=hv(),n=new at.MathNode("mover",[r,n]);return n}});var Wce=je.makeSpan;function PH(t,e){var r=Ua(t.body,e,!0);return Wce([t.mclass],r,e)}function DH(t,e){var r,n=ss(t.body,e);return t.mclass==="minner"?r=new at.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new at.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new at.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}St({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:ha(a),isCharacterBox:Vr.isCharacterBox(a)}},htmlBuilder:PH,mathmlBuilder:DH});var M2=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};St({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:M2(e[0]),body:ha(e[1]),isCharacterBox:Vr.isCharacterBox(e[1])}}});St({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,a=e[1],i=e[0],s;n!=="\\stackrel"?s=M2(a):s="mrel";var c={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:ha(a)},d={type:"supsub",mode:i.mode,base:c,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:s,body:[d],isCharacterBox:Vr.isCharacterBox(d)}},htmlBuilder:PH,mathmlBuilder:DH});St({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:M2(e[0]),body:ha(e[0])}},htmlBuilder(t,e){var r=Ua(t.body,e,!0),n=je.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=ss(t.body,e),n=new at.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Kce={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},xR=()=>({type:"styling",body:[],mode:"math",style:"display"}),bR=t=>t.type==="textord"&&t.text==="@",Qce=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Xce(t,e,r){var n=Kce[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var a=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},s=r.callFunction("\\Big",[i],[]),c=r.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[a,s,c]};return r.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Yce(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ot("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],a=[n],i=0;i<e.length;i++){for(var s=e[i],c=xR(),d=0;d<s.length;d++)if(!bR(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var h=W7(s[d]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var m=0;m<2;m++){for(var y=!0,v=d+1;v<s.length;v++){if(Qce(s[v],h)){y=!1,d=v;break}if(bR(s[v]))throw new ot("Missing a "+h+" character to complete a CD arrow.",s[v]);p[m].body.push(s[v])}if(y)throw new ot("Missing a "+h+" character to complete a CD arrow.",s[d])}else throw new ot('Expected one of "<>AV=|." after @',s[d]);var T=Xce(h,p,t),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),c=xR()}i%2===0?n.push(c):n.shift(),n=[],a.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var w=new Array(a[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:a,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(a.length+1).fill([])}}St({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=je.wrapFragment(Mr(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=gt(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new at.MathNode("mrow",[Cn(t.label,e)]);return r=new at.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new at.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});St({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=je.wrapFragment(Mr(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new at.MathNode("mrow",[Cn(t.fragment,e)])}});St({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=pr(e[0],"ordgroup"),a=n.body,i="",s=0;s<a.length;s++){var c=pr(a[s],"textord");i+=c.text}var d=parseInt(i),h;if(isNaN(d))throw new ot("\\@char has non-numeric argument "+i);if(d<0||d>=1114111)throw new ot("\\@char with invalid code point "+i);return d<=65535?h=String.fromCharCode(d):(d-=65536,h=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var LH=(t,e)=>{var r=Ua(t.body,e.withColor(t.color),!1);return je.makeFragment(r)},BH=(t,e)=>{var r=ss(t.body,e.withColor(t.color)),n=new at.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};St({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=pr(e[0],"color-token").color,a=e[1];return{type:"color",mode:r.mode,color:n,body:ha(a)}},htmlBuilder:LH,mathmlBuilder:BH});St({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,a=pr(e[0],"color-token").color;r.gullet.macros.set("\\current@color",a);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:a,body:i}},htmlBuilder:LH,mathmlBuilder:BH});St({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,a=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:a&&pr(a,"size").value}},htmlBuilder(t,e){var r=je.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=gt(Qn(t.size,e)))),r},mathmlBuilder(t,e){var r=new at.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",gt(Qn(t.size,e)))),r}});var RA={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},$H=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ot("Expected a control sequence",t);return e},Zce=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},UH=(t,e,r,n)=>{var a=t.gullet.macros.get(r.text);a==null&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,a,n)};St({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(RA[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=RA[n.text]),pr(e.parseFunction(),"internal");throw new ot("Invalid token after macro prefix",n)}});St({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new ot("Expected a control sequence",n);for(var i=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ot('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new ot('Argument number "'+n.text+'" out of order');i++,c.push([])}else{if(n.text==="EOF")throw new ot("Expected a macro definition");c[i].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(r==="\\edef"||r==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(a,{tokens:d,numArgs:i,delimiters:c},r===RA[r]),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=$H(e.gullet.popToken());e.gullet.consumeSpaces();var a=Zce(e);return UH(e,n,a,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});St({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=$H(e.gullet.popToken()),a=e.gullet.popToken(),i=e.gullet.popToken();return UH(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(a),{type:"internal",mode:e.mode}}});var im=function(e,r,n){var a=Pn.math[e]&&Pn.math[e].replace,i=V7(a||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},Q7=function(e,r,n,a){var i=n.havingBaseStyle(r),s=je.makeSpan(a.concat(i.sizingClasses(n)),[e],n),c=i.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=i.sizeMultiplier,s},zH=function(e,r,n){var a=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/a.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=gt(i),e.height-=i,e.depth+=i},Jce=function(e,r,n,a,i,s){var c=je.makeSymbol(e,"Main-Regular",i,a),d=Q7(c,r,a,s);return n&&zH(d,a,r),d},eue=function(e,r,n,a){return je.makeSymbol(e,"Size"+r+"-Regular",n,a)},VH=function(e,r,n,a,i,s){var c=eue(e,r,i,a),d=Q7(je.makeSpan(["delimsizing","size"+r],[c],a),qt.TEXT,a,s);return n&&zH(d,a,qt.TEXT),d},i3=function(e,r,n){var a;r==="Size1-Regular"?a="delim-size1":a="delim-size4";var i=je.makeSpan(["delimsizinginner",a],[je.makeSpan([],[je.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},s3=function(e,r,n){var a=zo["Size4-Regular"][e.charCodeAt(0)]?zo["Size4-Regular"][e.charCodeAt(0)][4]:zo["Size1-Regular"][e.charCodeAt(0)][4],i=new ku("inner",ice(e,Math.round(1e3*r))),s=new rc([i],{width:gt(a),height:gt(r),style:"width:"+gt(a),viewBox:"0 0 "+1e3*a+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=je.makeSvgSpan([],[s],n);return c.height=r,c.style.height=gt(r),c.style.width=gt(a),{type:"elem",elem:c}},MA=.008,fv={type:"kern",size:-1*MA},tue=["|","\\lvert","\\rvert","\\vert"],rue=["\\|","\\lVert","\\rVert","\\Vert"],FH=function(e,r,n,a,i,s){var c,d,h,p,m="",y=0;c=h=p=e,d=null;var v="Size1-Regular";e==="\\uparrow"?h=p="":e==="\\Uparrow"?h=p="":e==="\\downarrow"?c=h="":e==="\\Downarrow"?c=h="":e==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):tue.includes(e)?(h="",m="vert",y=333):rue.includes(e)?(h="",m="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",h="",p="",v="Size4-Regular",m="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",h="",p="",v="Size4-Regular",m="rbrack",y=667):e==="\\lfloor"||e===""?(h=c="",p="",v="Size4-Regular",m="lfloor",y=667):e==="\\lceil"||e===""?(c="",h=p="",v="Size4-Regular",m="lceil",y=667):e==="\\rfloor"||e===""?(h=c="",p="",v="Size4-Regular",m="rfloor",y=667):e==="\\rceil"||e===""?(c="",h=p="",v="Size4-Regular",m="rceil",y=667):e==="("||e==="\\lparen"?(c="",h="",p="",v="Size4-Regular",m="lparen",y=875):e===")"||e==="\\rparen"?(c="",h="",p="",v="Size4-Regular",m="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",p="",h="",v="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",p="",h="",v="Size4-Regular"):e==="\\lgroup"||e===""?(c="",p="",h="",v="Size4-Regular"):e==="\\rgroup"||e===""?(c="",p="",h="",v="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",p="",h="",v="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",p="",h="",v="Size4-Regular");var T=im(c,v,i),S=T.height+T.depth,w=im(h,v,i),j=w.height+w.depth,R=im(p,v,i),I=R.height+R.depth,L=0,C=1;if(d!==null){var P=im(d,v,i);L=P.height+P.depth,C=2}var N=S+I+L,A=Math.max(0,Math.ceil((r-N)/(C*j))),E=N+A*C*j,V=a.fontMetrics().axisHeight;n&&(V*=a.sizeMultiplier);var D=E/2-V,U=[];if(m.length>0){var $=E-S-I,Q=Math.round(E*1e3),K=sce(m,Math.round($*1e3)),H=new ku(m,K),J=(y/1e3).toFixed(3)+"em",ie=(Q/1e3).toFixed(3)+"em",pe=new rc([H],{width:J,height:ie,viewBox:"0 0 "+y+" "+Q}),me=je.makeSvgSpan([],[pe],a);me.height=Q/1e3,me.style.width=J,me.style.height=ie,U.push({type:"elem",elem:me})}else{if(U.push(i3(p,v,i)),U.push(fv),d===null){var X=E-S-I+2*MA;U.push(s3(h,X,a))}else{var ne=(E-S-I-L)/2+2*MA;U.push(s3(h,ne,a)),U.push(fv),U.push(i3(d,v,i)),U.push(fv),U.push(s3(h,ne,a))}U.push(fv),U.push(i3(c,v,i))}var re=a.havingBaseStyle(qt.TEXT),Ae=je.makeVList({positionType:"bottom",positionData:D,children:U},re);return Q7(je.makeSpan(["delimsizing","mult"],[Ae],re),qt.TEXT,a,s)},o3=80,l3=.08,c3=function(e,r,n,a,i){var s=ace(e,a,n),c=new ku(e,s),d=new rc([c],{width:"400em",height:gt(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return je.makeSvgSpan(["hide-tail"],[d],i)},nue=function(e,r){var n=r.havingBaseSizing(),a=WH("\\surd",e*n.sizeMultiplier,GH,n),i=n.sizeMultiplier,s=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,d=0,h=0,p=0,m;return a.type==="small"?(p=1e3+1e3*s+o3,e<1?i=1:e<1.4&&(i=.7),d=(1+s+l3)/i,h=(1+s)/i,c=c3("sqrtMain",d,p,s,r),c.style.minWidth="0.853em",m=.833/i):a.type==="large"?(p=(1e3+o3)*xm[a.size],h=(xm[a.size]+s)/i,d=(xm[a.size]+s+l3)/i,c=c3("sqrtSize"+a.size,d,p,s,r),c.style.minWidth="1.02em",m=1/i):(d=e+s+l3,h=e+s,p=Math.floor(1e3*e+s)+o3,c=c3("sqrtTall",d,p,s,r),c.style.minWidth="0.742em",m=1.056),c.height=h,c.style.height=gt(d),{span:c,advanceWidth:m,ruleWidth:(r.fontMetrics().sqrtRuleThickness+s)*i}},qH=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],aue=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],HH=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],xm=[0,1.2,1.8,2.4,3],iue=function(e,r,n,a,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),qH.includes(e)||HH.includes(e))return VH(e,r,!1,n,a,i);if(aue.includes(e))return FH(e,xm[r],!1,n,a,i);throw new ot("Illegal delimiter: '"+e+"'")},sue=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],oue=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"stack"}],GH=[{type:"small",style:qt.SCRIPTSCRIPT},{type:"small",style:qt.SCRIPT},{type:"small",style:qt.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],lue=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},WH=function(e,r,n,a){for(var i=Math.min(2,3-a.style.size),s=i;s<n.length&&n[s].type!=="stack";s++){var c=im(e,lue(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var h=a.havingBaseStyle(n[s].style);d*=h.sizeMultiplier}if(d>r)return n[s]}return n[n.length-1]},KH=function(e,r,n,a,i,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;HH.includes(e)?c=sue:qH.includes(e)?c=GH:c=oue;var d=WH(e,r,c,a);return d.type==="small"?Jce(e,d.style,n,a,i,s):d.type==="large"?VH(e,d.size,n,a,i,s):FH(e,r,n,a,i,s)},cue=function(e,r,n,a,i,s){var c=a.fontMetrics().axisHeight*a.sizeMultiplier,d=901,h=5/a.fontMetrics().ptPerEm,p=Math.max(r-c,n+c),m=Math.max(p/500*d,2*p-h);return KH(e,m,!0,a,i,s)},Gl={sqrtImage:nue,sizedDelim:iue,sizeToMaxHeight:xm,customSizedDelim:KH,leftRightDelim:cue},wR={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},uue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function P2(t,e){var r=R2(t);if(r&&uue.includes(r.text))return r;throw r?new ot("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new ot("Invalid delimiter type '"+t.type+"'",t)}St({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=P2(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:wR[t.funcName].size,mclass:wR[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?je.makeSpan([t.mclass]):Gl.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(to(t.delim,t.mode));var r=new at.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=gt(Gl.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function SR(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}St({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ot("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:P2(e[0],t).text,color:r}}});St({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=P2(e[0],t),n=t.parser;++n.leftrightDepth;var a=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=pr(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:a,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{SR(t);for(var r=Ua(t.body,e,!0,["mopen","mclose"]),n=0,a=0,i=!1,s=0;s<r.length;s++)r[s].isMiddle?i=!0:(n=Math.max(r[s].height,n),a=Math.max(r[s].depth,a));n*=e.sizeMultiplier,a*=e.sizeMultiplier;var c;if(t.left==="."?c=Jm(e,["mopen"]):c=Gl.leftRightDelim(t.left,n,a,e,t.mode,["mopen"]),r.unshift(c),i)for(var d=1;d<r.length;d++){var h=r[d],p=h.isMiddle;p&&(r[d]=Gl.leftRightDelim(p.delim,n,a,p.options,t.mode,[]))}var m;if(t.right===".")m=Jm(e,["mclose"]);else{var y=t.rightColor?e.withColor(t.rightColor):e;m=Gl.leftRightDelim(t.right,n,a,y,t.mode,["mclose"])}return r.push(m),je.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{SR(t);var r=ss(t.body,e);if(t.left!=="."){var n=new at.MathNode("mo",[to(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var a=new at.MathNode("mo",[to(t.right,t.mode)]);a.setAttribute("fence","true"),t.rightColor&&a.setAttribute("mathcolor",t.rightColor),r.push(a)}return H7(r)}});St({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=P2(e[0],t);if(!t.parser.leftrightDepth)throw new ot("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Jm(e,[]);else{r=Gl.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?to("|","text"):to(t.delim,t.mode),n=new at.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var X7=(t,e)=>{var r=je.wrapFragment(Mr(t.body,e),e),n=t.label.slice(1),a=e.sizeMultiplier,i,s=0,c=Vr.isCharacterBox(t.body);if(n==="sout")i=je.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/a,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=Qn({number:.6,unit:"pt"},e),h=Qn({number:.35,unit:"ex"},e),p=e.havingBaseSizing();a=a/p.sizeMultiplier;var m=r.height+r.depth+d+h;r.style.paddingLeft=gt(m/2+d);var y=Math.floor(1e3*m*a),v=rce(y),T=new rc([new ku("phase",v)],{width:"400em",height:gt(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});i=je.makeSvgSpan(["hide-tail"],[T],e),i.style.height=gt(m),s=r.depth+d+h}else{/cancel/.test(n)?c||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var S=0,w=0,j=0;/box/.test(n)?(j=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:j),w=S):n==="angl"?(j=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*j,w=Math.max(0,.25-r.depth)):(S=c?.2:0,w=S),i=ac.encloseSpan(r,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=gt(j)):n==="angl"&&j!==.049&&(i.style.borderTopWidth=gt(j),i.style.borderRightWidth=gt(j)),s=r.depth+w,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var R;if(t.backgroundColor)R=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:s},{type:"elem",elem:r,shift:0}]},e);else{var I=/cancel|phase/.test(n)?["svg-align"]:[];R=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:s,wrapperClasses:I}]},e)}return/cancel/.test(n)&&(R.height=r.height,R.depth=r.depth),/cancel/.test(n)&&!c?je.makeSpan(["mord","cancel-lap"],[R],e):je.makeSpan(["mord"],[R],e)},Y7=(t,e)=>{var r=0,n=new at.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Cn(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var a=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+a+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};St({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=pr(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:a,backgroundColor:i,body:s}},htmlBuilder:X7,mathmlBuilder:Y7});St({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:a}=t,i=pr(e[0],"color-token").color,s=pr(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:a,backgroundColor:s,borderColor:i,body:c}},htmlBuilder:X7,mathmlBuilder:Y7});St({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});St({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"enclose",mode:r.mode,label:n,body:a}},htmlBuilder:X7,mathmlBuilder:Y7});St({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var QH={};function tl(t){for(var{type:e,names:r,props:n,handler:a,htmlBuilder:i,mathmlBuilder:s}=t,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:a},d=0;d<r.length;++d)QH[r[d]]=c;i&&(Lx[e]=i),s&&(Bx[e]=s)}var XH={};function Z(t,e){XH[t]=e}function _R(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var D2=t=>{var e=t.parser.settings;if(!e.displayMode)throw new ot("{"+t.envName+"} can be used only in display mode.")};function Z7(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Pu(t,e,r){var{hskipBeforeAndAfter:n,addJot:a,cols:i,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:h,emptySingleRow:p,maxNumCols:m,leqno:y}=e;if(t.gullet.beginGroup(),h||t.gullet.macros.set("\\cr","\\\\\\relax"),!s){var v=t.gullet.expandMacroAsText("\\arraystretch");if(v==null)s=1;else if(s=parseFloat(v),!s||s<0)throw new ot("Invalid \\arraystretch: "+v)}t.gullet.beginGroup();var T=[],S=[T],w=[],j=[],R=d!=null?[]:void 0;function I(){d&&t.gullet.macros.set("\\@eqnsw","1",!0)}function L(){R&&(t.gullet.macros.get("\\df@tag")?(R.push(t.subparse([new js("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):R.push(!!d&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(I(),j.push(_R(t));;){var C=t.parseExpression(!1,h?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),C={type:"ordgroup",mode:t.mode,body:C},r&&(C={type:"styling",mode:t.mode,style:r,body:[C]}),T.push(C);var P=t.fetch().text;if(P==="&"){if(m&&T.length===m){if(h||c)throw new ot("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(P==="\\end"){L(),T.length===1&&C.type==="styling"&&C.body[0].body.length===0&&(S.length>1||!p)&&S.pop(),j.length<S.length+1&&j.push([]);break}else if(P==="\\\\"){t.consume();var N=void 0;t.gullet.future().text!==" "&&(N=t.parseSizeGroup(!0)),w.push(N?N.value:null),L(),j.push(_R(t)),T=[],S.push(T),I()}else throw new ot("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:a,arraystretch:s,body:S,cols:i,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:j,colSeparationType:c,tags:R,leqno:y}}function J7(t){return t.slice(0,1)==="d"?"display":"text"}var rl=function(e,r){var n,a,i=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(i),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),m=1/r.fontMetrics().ptPerEm,y=5*m;if(e.colSeparationType&&e.colSeparationType==="small"){var v=r.havingStyle(qt.SCRIPT).sizeMultiplier;y=.2778*(v/r.sizeMultiplier)}var T=e.colSeparationType==="CD"?Qn({number:3,unit:"ex"},r):12*m,S=3*m,w=e.arraystretch*T,j=.7*w,R=.3*w,I=0;function L(Ie){for(var Be=0;Be<Ie.length;++Be)Be>0&&(I+=.25),h.push({pos:I,isDashed:Ie[Be]})}for(L(s[0]),n=0;n<e.body.length;++n){var C=e.body[n],P=j,N=R;c<C.length&&(c=C.length);var A=new Array(C.length);for(a=0;a<C.length;++a){var E=Mr(C[a],r);N<E.depth&&(N=E.depth),P<E.height&&(P=E.height),A[a]=E}var V=e.rowGaps[n],D=0;V&&(D=Qn(V,r),D>0&&(D+=R,N<D&&(N=D),D=0)),e.addJot&&(N+=S),A.height=P,A.depth=N,I+=P,A.pos=I,I+=N+D,d[n]=A,L(s[n+1])}var U=I/2+r.fontMetrics().axisHeight,$=e.cols||[],Q=[],K,H,J=[];if(e.tags&&e.tags.some(Ie=>Ie))for(n=0;n<i;++n){var ie=d[n],pe=ie.pos-U,me=e.tags[n],X=void 0;me===!0?X=je.makeSpan(["eqn-num"],[],r):me===!1?X=je.makeSpan([],[],r):X=je.makeSpan([],Ua(me,r,!0),r),X.depth=ie.depth,X.height=ie.height,J.push({type:"elem",elem:X,shift:pe})}for(a=0,H=0;a<c||H<$.length;++a,++H){for(var ne=$[H]||{},re=!0;ne.type==="separator";){if(re||(K=je.makeSpan(["arraycolsep"],[]),K.style.width=gt(r.fontMetrics().doubleRuleSep),Q.push(K)),ne.separator==="|"||ne.separator===":"){var Ae=ne.separator==="|"?"solid":"dashed",Se=je.makeSpan(["vertical-separator"],[],r);Se.style.height=gt(I),Se.style.borderRightWidth=gt(p),Se.style.borderRightStyle=Ae,Se.style.margin="0 "+gt(-p/2);var ze=I-U;ze&&(Se.style.verticalAlign=gt(-ze)),Q.push(Se)}else throw new ot("Invalid separator type: "+ne.separator);H++,ne=$[H]||{},re=!1}if(!(a>=c)){var He=void 0;(a>0||e.hskipBeforeAndAfter)&&(He=Vr.deflt(ne.pregap,y),He!==0&&(K=je.makeSpan(["arraycolsep"],[]),K.style.width=gt(He),Q.push(K)));var st=[];for(n=0;n<i;++n){var W=d[n],he=W[a];if(he){var te=W.pos-U;he.depth=W.depth,he.height=W.height,st.push({type:"elem",elem:he,shift:te})}}st=je.makeVList({positionType:"individualShift",children:st},r),st=je.makeSpan(["col-align-"+(ne.align||"c")],[st]),Q.push(st),(a<c-1||e.hskipBeforeAndAfter)&&(He=Vr.deflt(ne.postgap,y),He!==0&&(K=je.makeSpan(["arraycolsep"],[]),K.style.width=gt(He),Q.push(K)))}}if(d=je.makeSpan(["mtable"],Q),h.length>0){for(var ae=je.makeLineSpan("hline",r,p),Ue=je.makeLineSpan("hdashline",r,p),Ye=[{type:"elem",elem:d,shift:0}];h.length>0;){var xt=h.pop(),it=xt.pos-U;xt.isDashed?Ye.push({type:"elem",elem:Ue,shift:it}):Ye.push({type:"elem",elem:ae,shift:it})}d=je.makeVList({positionType:"individualShift",children:Ye},r)}if(J.length===0)return je.makeSpan(["mord"],[d],r);var Pt=je.makeVList({positionType:"individualShift",children:J},r);return Pt=je.makeSpan(["tag"],[Pt],r),je.makeFragment([d,Pt])},due={c:"center ",l:"left ",r:"right "},nl=function(e,r){for(var n=[],a=new at.MathNode("mtd",[],["mtr-glue"]),i=new at.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],h=0;h<c.length;h++)d.push(new at.MathNode("mtd",[Cn(c[h],r)]));e.tags&&e.tags[s]&&(d.unshift(a),d.push(a),e.leqno?d.unshift(i):d.push(i)),n.push(new at.MathNode("mtr",d))}var p=new at.MathNode("mtable",n),m=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);p.setAttribute("rowspacing",gt(m));var y="",v="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,j=0,R=T.length;T[0].type==="separator"&&(y+="top ",j=1),T[T.length-1].type==="separator"&&(y+="bottom ",R-=1);for(var I=j;I<R;I++)T[I].type==="align"?(v+=due[T[I].align],w&&(S+="none "),w=!0):T[I].type==="separator"&&w&&(S+=T[I].separator==="|"?"solid ":"dashed ",w=!1);p.setAttribute("columnalign",v.trim()),/[sd]/.test(S)&&p.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var L=e.cols||[],C="",P=1;P<L.length;P++)C+=P%2?"0em ":"1em ";p.setAttribute("columnspacing",C.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var N="",A=e.hLinesBeforeRow;y+=A[0].length>0?"left ":"",y+=A[A.length-1].length>0?"right ":"";for(var E=1;E<A.length-1;E++)N+=A[E].length===0?"none ":A[E][0]?"dashed ":"solid ";return/[sd]/.test(N)&&p.setAttribute("rowlines",N.trim()),y!==""&&(p=new at.MathNode("menclose",[p]),p.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(p=new at.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},YH=function(e,r){e.envName.indexOf("ed")===-1&&D2(e);var n=[],a=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",s=Pu(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:Z7(e.envName),emptySingleRow:!0,colSeparationType:a,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,h={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",m=0;m<r[0].body.length;m++){var y=pr(r[0].body[m],"textord");p+=y.text}c=Number(p),d=c*2}var v=!d;s.body.forEach(function(j){for(var R=1;R<j.length;R+=2){var I=pr(j[R],"styling"),L=pr(I.body[0],"ordgroup");L.body.unshift(h)}if(v)d<j.length&&(d=j.length);else{var C=j.length/2;if(c<C)throw new ot("Too many math in a row: "+("expected "+c+", but got "+C),j[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&v&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=v?"align":"alignat",s};tl({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=R2(e[0]),n=r?[e[0]]:pr(e[0],"ordgroup").body,a=n.map(function(s){var c=W7(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new ot("Unknown column alignment: "+d,s)}),i={cols:a,hskipBeforeAndAfter:!0,maxNumCols:a.length};return Pu(t.parser,i,J7(t.envName))},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var a=t.parser;if(a.consumeSpaces(),a.fetch().text==="["){if(a.consume(),a.consumeSpaces(),r=a.fetch().text,"lcr".indexOf(r)===-1)throw new ot("Expected l or c or r",a.nextToken);a.consume(),a.consumeSpaces(),a.expect("]"),a.consume(),n.cols=[{type:"align",align:r}]}}var i=Pu(t.parser,n,J7(t.envName)),s=Math.max(0,...i.body.map(c=>c.length));return i.cols=new Array(s).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Pu(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=R2(e[0]),n=r?[e[0]]:pr(e[0],"ordgroup").body,a=n.map(function(s){var c=W7(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new ot("Unknown column alignment: "+d,s)});if(a.length>1)throw new ot("{subarray} can contain only one column");var i={cols:a,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Pu(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new ot("{subarray} can contain only one column");return i},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Pu(t.parser,e,J7(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:YH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&D2(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Z7(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Pu(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:YH,htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){D2(t);var e={autoTag:Z7(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Pu(t.parser,e,"display")},htmlBuilder:rl,mathmlBuilder:nl});tl({type:"array",names:["CD"],props:{numArgs:0},handler(t){return D2(t),Yce(t.parser)},htmlBuilder:rl,mathmlBuilder:nl});Z("\\nonumber","\\gdef\\@eqnsw{0}");Z("\\notag","\\nonumber");St({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new ot(t.funcName+" valid only within array environment")}});var TR=QH;St({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];if(a.type!=="ordgroup")throw new ot("Invalid environment name",a);for(var i="",s=0;s<a.body.length;++s)i+=pr(a.body[s],"textord").text;if(n==="\\begin"){if(!TR.hasOwnProperty(i))throw new ot("No such environment: "+i,a);var c=TR[i],{args:d,optArgs:h}=r.parseArguments("\\begin{"+i+"}",c),p={mode:r.mode,envName:i,parser:r},m=c.handler(p,d,h);r.expect("\\end",!1);var y=r.nextToken,v=pr(r.parseFunction(),"environment");if(v.name!==i)throw new ot("Mismatch: \\begin{"+i+"} matched by \\end{"+v.name+"}",y);return m}return{type:"environment",mode:r.mode,name:i,nameGroup:a}}});var ZH=(t,e)=>{var r=t.font,n=e.withFont(r);return Mr(t.body,n)},JH=(t,e)=>{var r=t.font,n=e.withFont(r);return Cn(t.body,n)},AR={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};St({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=$x(e[0]),i=n;return i in AR&&(i=AR[i]),{type:"font",mode:r.mode,font:i.slice(1),body:a}},htmlBuilder:ZH,mathmlBuilder:JH});St({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],a=Vr.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:M2(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:a}}});St({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:a}=t,{mode:i}=r,s=r.parseExpression(!0,a),c="math"+n.slice(1);return{type:"font",mode:i,font:c,body:{type:"ordgroup",mode:r.mode,body:s}}},htmlBuilder:ZH,mathmlBuilder:JH});var eG=(t,e)=>{var r=e;return t==="display"?r=r.id>=qt.SCRIPT.id?r.text():qt.DISPLAY:t==="text"&&r.size===qt.DISPLAY.size?r=qt.TEXT:t==="script"?r=qt.SCRIPT:t==="scriptscript"&&(r=qt.SCRIPTSCRIPT),r},eE=(t,e)=>{var r=eG(t.size,e.style),n=r.fracNum(),a=r.fracDen(),i;i=e.havingStyle(n);var s=Mr(t.numer,i,e);if(t.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}i=e.havingStyle(a);var h=Mr(t.denom,i,e),p,m,y;t.hasBarLine?(t.barSize?(m=Qn(t.barSize,e),p=je.makeLineSpan("frac-line",e,m)):p=je.makeLineSpan("frac-line",e),m=p.height,y=p.height):(p=null,m=0,y=e.fontMetrics().defaultRuleThickness);var v,T,S;r.size===qt.DISPLAY.size||t.size==="display"?(v=e.fontMetrics().num1,m>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(m>0?(v=e.fontMetrics().num2,T=y):(v=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(p){var R=e.fontMetrics().axisHeight;v-s.depth-(R+.5*m)<T&&(v+=T-(v-s.depth-(R+.5*m))),R-.5*m-(h.height-S)<T&&(S+=T-(R-.5*m-(h.height-S)));var I=-(R-.5*m);w=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:p,shift:I},{type:"elem",elem:s,shift:-v}]},e)}else{var j=v-s.depth-(h.height-S);j<T&&(v+=.5*(T-j),S+=.5*(T-j)),w=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:S},{type:"elem",elem:s,shift:-v}]},e)}i=e.havingStyle(r),w.height*=i.sizeMultiplier/e.sizeMultiplier,w.depth*=i.sizeMultiplier/e.sizeMultiplier;var L;r.size===qt.DISPLAY.size?L=e.fontMetrics().delim1:r.size===qt.SCRIPTSCRIPT.size?L=e.havingStyle(qt.SCRIPT).fontMetrics().delim2:L=e.fontMetrics().delim2;var C,P;return t.leftDelim==null?C=Jm(e,["mopen"]):C=Gl.customSizedDelim(t.leftDelim,L,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?P=je.makeSpan([]):t.rightDelim==null?P=Jm(e,["mclose"]):P=Gl.customSizedDelim(t.rightDelim,L,!0,e.havingStyle(r),t.mode,["mclose"]),je.makeSpan(["mord"].concat(i.sizingClasses(e)),[C,je.makeSpan(["mfrac"],[w]),P],e)},tE=(t,e)=>{var r=new at.MathNode("mfrac",[Cn(t.numer,e),Cn(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=Qn(t.barSize,e);r.setAttribute("linethickness",gt(n))}var a=eG(t.size,e.style);if(a.size!==e.style.size){r=new at.MathNode("mstyle",[r]);var i=a.size===qt.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var s=[];if(t.leftDelim!=null){var c=new at.MathNode("mo",[new at.TextNode(t.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(r),t.rightDelim!=null){var d=new at.MathNode("mo",[new at.TextNode(t.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return H7(s)}return r};St({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1],s,c=null,d=null,h="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:i,hasBarLine:s,leftDelim:c,rightDelim:d,size:h,barSize:null}},htmlBuilder:eE,mathmlBuilder:tE});St({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:a,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});St({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,a;switch(r){case"\\over":a="\\frac";break;case"\\choose":a="\\binom";break;case"\\atop":a="\\\\atopfrac";break;case"\\brace":a="\\\\bracefrac";break;case"\\brack":a="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:a,token:n}}});var NR=["display","text","script","scriptscript"],ER=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};St({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],a=e[5],i=$x(e[0]),s=i.type==="atom"&&i.family==="open"?ER(i.text):null,c=$x(e[1]),d=c.type==="atom"&&c.family==="close"?ER(c.text):null,h=pr(e[2],"size"),p,m=null;h.isBlank?p=!0:(m=h.value,p=m.number>0);var y="auto",v=e[3];if(v.type==="ordgroup"){if(v.body.length>0){var T=pr(v.body[0],"textord");y=NR[Number(T.text)]}}else v=pr(v,"textord"),y=NR[Number(v.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:a,continued:!1,hasBarLine:p,barSize:m,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:eE,mathmlBuilder:tE});St({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:a}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:pr(e[0],"size").value,token:a}}});St({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0],i=zle(pr(e[1],"infix").size),s=e[2],c=i.number>0;return{type:"genfrac",mode:r.mode,numer:a,denom:s,continued:!1,hasBarLine:c,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:eE,mathmlBuilder:tE});var tG=(t,e)=>{var r=e.style,n,a;t.type==="supsub"?(n=t.sup?Mr(t.sup,e.havingStyle(r.sup()),e):Mr(t.sub,e.havingStyle(r.sub()),e),a=pr(t.base,"horizBrace")):a=pr(t,"horizBrace");var i=Mr(a.base,e.havingBaseStyle(qt.DISPLAY)),s=ac.svgSpan(a,e),c;if(a.isOver?(c=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=je.makeVList({positionType:"bottom",positionData:i.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:i}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=je.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e);a.isOver?c=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=je.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return je.makeSpan(["mord",a.isOver?"mover":"munder"],[c],e)},hue=(t,e)=>{var r=ac.mathMLnode(t.label);return new at.MathNode(t.isOver?"mover":"munder",[Cn(t.base,e),r])};St({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:tG,mathmlBuilder:hue});St({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],a=pr(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:a})?{type:"href",mode:r.mode,href:a,body:ha(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=Ua(t.body,e,!1);return je.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=Cu(t.body,e);return r instanceof _s||(r=new _s("mrow",[r])),r.setAttribute("href",t.href),r}});St({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=pr(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var a=[],i=0;i<n.length;i++){var s=n[i];s==="~"&&(s="\\textasciitilde"),a.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:r.mode,font:"\\texttt",body:a};return{type:"href",mode:r.mode,href:n,body:ha(c)}}});St({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:ha(e[0])}},htmlBuilder(t,e){var r=Ua(t.body,e,!1);return je.makeFragment(r)},mathmlBuilder(t,e){return new at.MathNode("mrow",ss(t.body,e))}});St({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:a}=t,i=pr(e[0],"raw").string,s=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=i,c={command:"\\htmlClass",class:i};break;case"\\htmlId":d.id=i,c={command:"\\htmlId",id:i};break;case"\\htmlStyle":d.style=i,c={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var h=i.split(","),p=0;p<h.length;p++){var m=h[p],y=m.indexOf("=");if(y<0)throw new ot("\\htmlData key/value '"+m+"' missing equals sign");var v=m.slice(0,y),T=m.slice(y+1);d["data-"+v.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:d,body:ha(s)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=Ua(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var a=je.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&a.setAttribute(i,t.attributes[i]);return a},mathmlBuilder:(t,e)=>Cu(t.body,e)});St({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:ha(e[0]),mathml:ha(e[1])}},htmlBuilder:(t,e)=>{var r=Ua(t.html,e,!1);return je.makeFragment(r)},mathmlBuilder:(t,e)=>Cu(t.mathml,e)});var u3=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new ot("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!bH(n))throw new ot("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};St({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,a={number:0,unit:"em"},i={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(r[0])for(var d=pr(r[0],"raw").string,h=d.split(","),p=0;p<h.length;p++){var m=h[p].split("=");if(m.length===2){var y=m[1].trim();switch(m[0].trim()){case"alt":c=y;break;case"width":a=u3(y);break;case"height":i=u3(y);break;case"totalheight":s=u3(y);break;default:throw new ot("Invalid key: '"+m[0]+"' in \\includegraphics.")}}}var v=pr(e[0],"url").url;return c===""&&(c=v,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:v})?{type:"includegraphics",mode:n.mode,alt:c,width:a,height:i,totalheight:s,src:v}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=Qn(t.height,e),n=0;t.totalheight.number>0&&(n=Qn(t.totalheight,e)-r);var a=0;t.width.number>0&&(a=Qn(t.width,e));var i={height:gt(r+n)};a>0&&(i.width=gt(a)),n>0&&(i.verticalAlign=gt(-n));var s=new hce(t.src,t.alt,i);return s.height=r,s.depth=n,s},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=Qn(t.height,e),a=0;if(t.totalheight.number>0&&(a=Qn(t.totalheight,e)-n,r.setAttribute("valign",gt(-a))),r.setAttribute("height",gt(n+a)),t.width.number>0){var i=Qn(t.width,e);r.setAttribute("width",gt(i))}return r.setAttribute("src",t.src),r}});St({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=pr(e[0],"size");if(r.settings.strict){var i=n[1]==="m",s=a.value.unit==="mu";i?(s||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+a.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:a.value}},htmlBuilder(t,e){return je.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=Qn(t.dimension,e);return new at.SpaceNode(r)}});St({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:a}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=je.makeSpan([],[Mr(t.body,e)]),r=je.makeSpan(["inner"],[r],e)):r=je.makeSpan(["inner"],[Mr(t.body,e)]);var n=je.makeSpan(["fix"],[]),a=je.makeSpan([t.alignment],[r,n],e),i=je.makeSpan(["strut"]);return i.style.height=gt(a.height+a.depth),a.depth&&(i.style.verticalAlign=gt(-a.depth)),a.children.unshift(i),a=je.makeSpan(["thinbox"],[a],e),je.makeSpan(["mord","vbox"],[a],e)},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mpadded",[Cn(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});St({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,a=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",s=n.parseExpression(!1,i);return n.expect(i),n.switchMode(a),{type:"styling",mode:n.mode,style:"text",body:s}}});St({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new ot("Mismatched "+t.funcName)}});var jR=(t,e)=>{switch(e.style.size){case qt.DISPLAY.size:return t.display;case qt.TEXT.size:return t.text;case qt.SCRIPT.size:return t.script;case qt.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};St({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:ha(e[0]),text:ha(e[1]),script:ha(e[2]),scriptscript:ha(e[3])}},htmlBuilder:(t,e)=>{var r=jR(t,e),n=Ua(r,e,!1);return je.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=jR(t,e);return Cu(r,e)}});var rG=(t,e,r,n,a,i,s)=>{t=je.makeSpan([],[t]);var c=r&&Vr.isCharacterBox(r),d,h;if(e){var p=Mr(e,n.havingStyle(a.sup()),n);h={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var m=Mr(r,n.havingStyle(a.sub()),n);d={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-m.height)}}var y;if(h&&d){var v=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+t.depth+s;y=je.makeVList({positionType:"bottom",positionData:v,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:gt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:gt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=t.height-s;y=je.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:gt(-i)},{type:"kern",size:d.kern},{type:"elem",elem:t}]},n)}else if(h){var S=t.depth+s;y=je.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:t},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:gt(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var w=[y];if(d&&i!==0&&!c){var j=je.makeSpan(["mspace"],[],n);j.style.marginRight=gt(i),w.unshift(j)}return je.makeSpan(["mop","op-limits"],w,n)},nG=["\\smallint"],Rf=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=pr(t.base,"op"),a=!0):i=pr(t,"op");var s=e.style,c=!1;s.size===qt.DISPLAY.size&&i.symbol&&!nG.includes(i.name)&&(c=!0);var d;if(i.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(p=i.name.slice(1),i.name=p==="oiint"?"\\iint":"\\iiint"),d=je.makeSymbol(i.name,h,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var m=d.italic,y=je.staticSvg(p+"Size"+(c?"2":"1"),e);d=je.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),i.name="\\"+p,d.classes.unshift("mop"),d.italic=m}}else if(i.body){var v=Ua(i.body,e,!0);v.length===1&&v[0]instanceof eo?(d=v[0],d.classes[0]="mop"):d=je.makeSpan(["mop"],v,e)}else{for(var T=[],S=1;S<i.name.length;S++)T.push(je.mathsym(i.name[S],i.mode,e));d=je.makeSpan(["mop"],T,e)}var w=0,j=0;return(d instanceof eo||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,j=d.italic),a?rG(d,r,n,e,s,j,w):(w&&(d.style.position="relative",d.style.top=gt(w)),d)},u1=(t,e)=>{var r;if(t.symbol)r=new _s("mo",[to(t.name,t.mode)]),nG.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new _s("mo",ss(t.body,e));else{r=new _s("mi",[new Vo(t.name.slice(1))]);var n=new _s("mo",[to("","text")]);t.parentIsSupSub?r=new _s("mrow",[r,n]):r=OH([r,n])}return r},fue={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};St({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=n;return a.length===1&&(a=fue[a]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:Rf,mathmlBuilder:u1});St({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ha(n)}},htmlBuilder:Rf,mathmlBuilder:u1});var pue={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};St({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:u1});St({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:Rf,mathmlBuilder:u1});St({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=pue[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:Rf,mathmlBuilder:u1});var aG=(t,e)=>{var r,n,a=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=pr(t.base,"operatorname"),a=!0):i=pr(t,"operatorname");var s;if(i.body.length>0){for(var c=i.body.map(m=>{var y=m.text;return typeof y=="string"?{type:"textord",mode:m.mode,text:y}:m}),d=Ua(c,e.withFont("mathrm"),!0),h=0;h<d.length;h++){var p=d[h];p instanceof eo&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=je.makeSpan(["mop"],d,e)}else s=je.makeSpan(["mop"],[],e);return a?rG(s,r,n,e,e.style,0,0):s},mue=(t,e)=>{for(var r=ss(t.body,e.withFont("mathrm")),n=!0,a=0;a<r.length;a++){var i=r[a];if(!(i instanceof at.SpaceNode))if(i instanceof at.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=i.children[0];i.children.length===1&&s instanceof at.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=r.map(p=>p.toText()).join("");r=[new at.TextNode(c)]}var d=new at.MathNode("mi",r);d.setAttribute("mathvariant","normal");var h=new at.MathNode("mo",[to("","text")]);return t.parentIsSupSub?new at.MathNode("mrow",[d,h]):at.newDocumentFragment([d,h])};St({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,a=e[0];return{type:"operatorname",mode:r.mode,body:ha(a),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:aG,mathmlBuilder:mue});Z("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");h0({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?je.makeFragment(Ua(t.body,e,!1)):je.makeSpan(["mord"],Ua(t.body,e,!0),e)},mathmlBuilder(t,e){return Cu(t.body,e,!0)}});St({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Mr(t.body,e.havingCrampedStyle()),n=je.makeLineSpan("overline-line",e),a=e.fontMetrics().defaultRuleThickness,i=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*a},{type:"elem",elem:n},{type:"kern",size:a}]},e);return je.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new at.MathNode("mo",[new at.TextNode("")]);r.setAttribute("stretchy","true");var n=new at.MathNode("mover",[Cn(t.body,e),r]);return n.setAttribute("accent","true"),n}});St({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:ha(n)}},htmlBuilder:(t,e)=>{var r=Ua(t.body,e.withPhantom(),!1);return je.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=ss(t.body,e);return new at.MathNode("mphantom",r)}});St({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=je.makeSpan([],[Mr(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),je.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=ss(ha(t.body),e),n=new at.MathNode("mphantom",r),a=new at.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}});St({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=je.makeSpan(["inner"],[Mr(t.body,e.withPhantom())]),n=je.makeSpan(["fix"],[]);return je.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=ss(ha(t.body),e),n=new at.MathNode("mphantom",r),a=new at.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}});St({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=pr(e[0],"size").value,a=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:a}},htmlBuilder(t,e){var r=Mr(t.body,e),n=Qn(t.dy,e);return je.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new at.MathNode("mpadded",[Cn(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});St({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});St({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,a=r[0],i=pr(e[0],"size"),s=pr(e[1],"size");return{type:"rule",mode:n.mode,shift:a&&pr(a,"size").value,width:i.value,height:s.value}},htmlBuilder(t,e){var r=je.makeSpan(["mord","rule"],[],e),n=Qn(t.width,e),a=Qn(t.height,e),i=t.shift?Qn(t.shift,e):0;return r.style.borderRightWidth=gt(n),r.style.borderTopWidth=gt(a),r.style.bottom=gt(i),r.width=n,r.height=a+i,r.depth=-i,r.maxFontSize=a*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=Qn(t.width,e),n=Qn(t.height,e),a=t.shift?Qn(t.shift,e):0,i=e.color&&e.getColor()||"black",s=new at.MathNode("mspace");s.setAttribute("mathbackground",i),s.setAttribute("width",gt(r)),s.setAttribute("height",gt(n));var c=new at.MathNode("mpadded",[s]);return a>=0?c.setAttribute("height",gt(a)):(c.setAttribute("height",gt(a)),c.setAttribute("depth",gt(-a))),c.setAttribute("voffset",gt(a)),c}});function iG(t,e,r){for(var n=Ua(t,e,!1),a=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var s=n[i].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[s+1]==="reset-size"+e.size&&(n[i].classes[s+1]="reset-size"+r.size),n[i].height*=a,n[i].depth*=a}return je.makeFragment(n)}var kR=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],gue=(t,e)=>{var r=e.havingSize(t.size);return iG(t.body,r,e)};St({type:"sizing",names:kR,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!1,r);return{type:"sizing",mode:a.mode,size:kR.indexOf(n)+1,body:i}},htmlBuilder:gue,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=ss(t.body,r),a=new at.MathNode("mstyle",n);return a.setAttribute("mathsize",gt(r.sizeMultiplier)),a}});St({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,a=!1,i=!1,s=r[0]&&pr(r[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var h=s.body[d];if(c=h.text,c==="t")a=!0;else if(c==="b")i=!0;else{a=!1,i=!1;break}}else a=!0,i=!0;var p=e[0];return{type:"smash",mode:n.mode,body:p,smashHeight:a,smashDepth:i}},htmlBuilder:(t,e)=>{var r=je.makeSpan([],[Mr(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].depth=0;var i=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return je.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new at.MathNode("mpadded",[Cn(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});St({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,a=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:a}},htmlBuilder(t,e){var r=Mr(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=je.wrapFragment(r,e);var n=e.fontMetrics(),a=n.defaultRuleThickness,i=a;e.style.id<qt.TEXT.id&&(i=e.fontMetrics().xHeight);var s=a+i/4,c=r.height+r.depth+s+a,{span:d,ruleWidth:h,advanceWidth:p}=Gl.sqrtImage(c,e),m=d.height-h;m>r.height+r.depth+s&&(s=(s+m-r.height-r.depth)/2);var y=d.height-r.height-s-h;r.style.paddingLeft=gt(p);var v=je.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+y)},{type:"elem",elem:d},{type:"kern",size:h}]},e);if(t.index){var T=e.havingStyle(qt.SCRIPTSCRIPT),S=Mr(t.index,T,e),w=.6*(v.height-v.depth),j=je.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),R=je.makeSpan(["root"],[j]);return je.makeSpan(["mord","sqrt"],[R,v],e)}else return je.makeSpan(["mord","sqrt"],[v],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new at.MathNode("mroot",[Cn(r,e),Cn(n,e)]):new at.MathNode("msqrt",[Cn(r,e)])}});var CR={display:qt.DISPLAY,text:qt.TEXT,script:qt.SCRIPT,scriptscript:qt.SCRIPTSCRIPT};St({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:a}=t,i=a.parseExpression(!0,r),s=n.slice(1,n.length-5);return{type:"styling",mode:a.mode,style:s,body:i}},htmlBuilder(t,e){var r=CR[t.style],n=e.havingStyle(r).withFont("");return iG(t.body,n,e)},mathmlBuilder(t,e){var r=CR[t.style],n=e.havingStyle(r),a=ss(t.body,n),i=new at.MathNode("mstyle",a),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[t.style];return i.setAttribute("scriptlevel",c[0]),i.setAttribute("displaystyle",c[1]),i}});var yue=function(e,r){var n=e.base;if(n)if(n.type==="op"){var a=n.limits&&(r.style.size===qt.DISPLAY.size||n.alwaysHandleSupSub);return a?Rf:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===qt.DISPLAY.size||n.limits);return i?aG:null}else{if(n.type==="accent")return Vr.isCharacterBox(n.base)?K7:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?tG:null}else return null}else return null};h0({type:"supsub",htmlBuilder(t,e){var r=yue(t,e);if(r)return r(t,e);var{base:n,sup:a,sub:i}=t,s=Mr(n,e),c,d,h=e.fontMetrics(),p=0,m=0,y=n&&Vr.isCharacterBox(n);if(a){var v=e.havingStyle(e.style.sup());c=Mr(a,v,e),y||(p=s.height-v.fontMetrics().supDrop*v.sizeMultiplier/e.sizeMultiplier)}if(i){var T=e.havingStyle(e.style.sub());d=Mr(i,T,e),y||(m=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===qt.DISPLAY?S=h.sup1:e.style.cramped?S=h.sup3:S=h.sup2;var w=e.sizeMultiplier,j=gt(.5/h.ptPerEm/w),R=null;if(d){var I=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(s instanceof eo||I)&&(R=gt(-s.italic))}var L;if(c&&d){p=Math.max(p,S,c.depth+.25*h.xHeight),m=Math.max(m,h.sub2);var C=h.defaultRuleThickness,P=4*C;if(p-c.depth-(d.height-m)<P){m=P-(p-c.depth)+d.height;var N=.8*h.xHeight-(p-c.depth);N>0&&(p+=N,m-=N)}var A=[{type:"elem",elem:d,shift:m,marginRight:j,marginLeft:R},{type:"elem",elem:c,shift:-p,marginRight:j}];L=je.makeVList({positionType:"individualShift",children:A},e)}else if(d){m=Math.max(m,h.sub1,d.height-.8*h.xHeight);var E=[{type:"elem",elem:d,marginLeft:R,marginRight:j}];L=je.makeVList({positionType:"shift",positionData:m,children:E},e)}else if(c)p=Math.max(p,S,c.depth+.25*h.xHeight),L=je.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:j}]},e);else throw new Error("supsub must have either sup or sub.");var V=OA(s,"right")||"mord";return je.makeSpan([V],[s,je.makeSpan(["msupsub"],[L])],e)},mathmlBuilder(t,e){var r=!1,n,a;t.base&&t.base.type==="horizBrace"&&(a=!!t.sup,a===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Cn(t.base,e)];t.sub&&i.push(Cn(t.sub,e)),t.sup&&i.push(Cn(t.sup,e));var s;if(r)s=n?"mover":"munder";else if(t.sub)if(t.sup){var h=t.base;h&&h.type==="op"&&h.limits&&e.style===qt.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(e.style===qt.DISPLAY||h.limits)?s="munderover":s="msubsup"}else{var d=t.base;d&&d.type==="op"&&d.limits&&(e.style===qt.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===qt.DISPLAY)?s="munder":s="msub"}else{var c=t.base;c&&c.type==="op"&&c.limits&&(e.style===qt.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===qt.DISPLAY)?s="mover":s="msup"}return new at.MathNode(s,i)}});h0({type:"atom",htmlBuilder(t,e){return je.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new at.MathNode("mo",[to(t.text,t.mode)]);if(t.family==="bin"){var n=G7(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var sG={mi:"italic",mn:"normal",mtext:"normal"};h0({type:"mathord",htmlBuilder(t,e){return je.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new at.MathNode("mi",[to(t.text,t.mode,e)]),n=G7(t,e)||"italic";return n!==sG[r.type]&&r.setAttribute("mathvariant",n),r}});h0({type:"textord",htmlBuilder(t,e){return je.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=to(t.text,t.mode,e),n=G7(t,e)||"normal",a;return t.mode==="text"?a=new at.MathNode("mtext",[r]):/[0-9]/.test(t.text)?a=new at.MathNode("mn",[r]):t.text==="\\prime"?a=new at.MathNode("mo",[r]):a=new at.MathNode("mi",[r]),n!==sG[a.type]&&a.setAttribute("mathvariant",n),a}});var d3={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},h3={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};h0({type:"spacing",htmlBuilder(t,e){if(h3.hasOwnProperty(t.text)){var r=h3[t.text].className||"";if(t.mode==="text"){var n=je.makeOrd(t,e,"textord");return n.classes.push(r),n}else return je.makeSpan(["mspace",r],[je.mathsym(t.text,t.mode,e)],e)}else{if(d3.hasOwnProperty(t.text))return je.makeSpan(["mspace",d3[t.text]],[],e);throw new ot('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(h3.hasOwnProperty(t.text))r=new at.MathNode("mtext",[new at.TextNode("")]);else{if(d3.hasOwnProperty(t.text))return new at.MathNode("mspace");throw new ot('Unknown type of space "'+t.text+'"')}return r}});var OR=()=>{var t=new at.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};h0({type:"tag",mathmlBuilder(t,e){var r=new at.MathNode("mtable",[new at.MathNode("mtr",[OR(),new at.MathNode("mtd",[Cu(t.body,e)]),OR(),new at.MathNode("mtd",[Cu(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var IR={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},RR={"\\textbf":"textbf","\\textmd":"textmd"},vue={"\\textit":"textit","\\textup":"textup"},MR=(t,e)=>{var r=t.font;if(r){if(IR[r])return e.withTextFontFamily(IR[r]);if(RR[r])return e.withTextFontWeight(RR[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(vue[r])};St({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,a=e[0];return{type:"text",mode:r.mode,body:ha(a),font:n}},htmlBuilder(t,e){var r=MR(t,e),n=Ua(t.body,r,!0);return je.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=MR(t,e);return Cu(t.body,r)}});St({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Mr(t.body,e),n=je.makeLineSpan("underline-line",e),a=e.fontMetrics().defaultRuleThickness,i=je.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:a},{type:"elem",elem:n},{type:"kern",size:3*a},{type:"elem",elem:r}]},e);return je.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new at.MathNode("mo",[new at.TextNode("")]);r.setAttribute("stretchy","true");var n=new at.MathNode("munder",[Cn(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});St({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Mr(t.body,e),n=e.fontMetrics().axisHeight,a=.5*(r.height-n-(r.depth+n));return je.makeVList({positionType:"shift",positionData:a,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new at.MathNode("mpadded",[Cn(t.body,e)],["vcenter"])}});St({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new ot("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=PR(t),n=[],a=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var s=r[i];s==="~"&&(s="\\textasciitilde"),n.push(je.makeSymbol(s,"Typewriter-Regular",t.mode,a,["mord","texttt"]))}return je.makeSpan(["mord","text"].concat(a.sizingClasses(e)),je.tryCombineChars(n),a)},mathmlBuilder(t,e){var r=new at.TextNode(PR(t)),n=new at.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var PR=t=>t.body.replace(/ /g,t.star?"":""),uu=kH,oG=`[ \r
	]`,xue="\\\\[a-zA-Z@]+",bue="\\\\[^\uD800-\uDFFF]",wue="("+xue+")"+oG+"*",Sue=`\\\\(
|[ \r	]+
?)[ \r	]*`,PA="[-]",_ue=new RegExp(PA+"+$"),Tue="("+oG+"+)|"+(Sue+"|")+"([!-\\[\\]---]"+(PA+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(PA+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+wue)+("|"+bue+")");class DR{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(Tue,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new js("EOF",new Yi(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new ot("Unexpected character: '"+e[r]+"'",new js(e[r],new Yi(this,r,r+1)));var a=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[a]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new js(a,new Yi(this,r,this.tokenRegex.lastIndex))}}class Aue{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ot("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var a=0;a<this.undefStack.length;a++)delete this.undefStack[a][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var Nue=XH;Z("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});Z("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});Z("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});Z("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});Z("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});Z("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Z("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var LR={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Z("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ot("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=LR[e.text],n==null||n>=r)throw new ot("Invalid base-"+r+" digit "+e.text);for(var a;(a=LR[t.future().text])!=null&&a<r;)n*=r,n+=a,t.popToken()}return"\\@char{"+n+"}"});var rE=(t,e,r,n)=>{var a=t.consumeArg().tokens;if(a.length!==1)throw new ot("\\newcommand's first argument must be a macro name");var i=a[0].text,s=t.isDefined(i);if(s&&!e)throw new ot("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!s&&!r)throw new ot("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var c=0;if(a=t.consumeArg().tokens,a.length===1&&a[0].text==="["){for(var d="",h=t.expandNextToken();h.text!=="]"&&h.text!=="EOF";)d+=h.text,h=t.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new ot("Invalid number of arguments: "+d);c=parseInt(d),a=t.consumeArg().tokens}return s&&n||t.macros.set(i,{tokens:a,numArgs:c}),""};Z("\\newcommand",t=>rE(t,!1,!0,!1));Z("\\renewcommand",t=>rE(t,!0,!1,!1));Z("\\providecommand",t=>rE(t,!0,!0,!0));Z("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});Z("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});Z("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),uu[r],Pn.math[r],Pn.text[r]),""});Z("\\bgroup","{");Z("\\egroup","}");Z("~","\\nobreakspace");Z("\\lq","`");Z("\\rq","'");Z("\\aa","\\r a");Z("\\AA","\\r A");Z("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Z("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Z("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Z("","\\mathscr{B}");Z("","\\mathscr{E}");Z("","\\mathscr{F}");Z("","\\mathscr{H}");Z("","\\mathscr{I}");Z("","\\mathscr{L}");Z("","\\mathscr{M}");Z("","\\mathscr{R}");Z("","\\mathfrak{C}");Z("","\\mathfrak{H}");Z("","\\mathfrak{Z}");Z("\\Bbbk","\\Bbb{k}");Z("","\\cdotp");Z("\\llap","\\mathllap{\\textrm{#1}}");Z("\\rlap","\\mathrlap{\\textrm{#1}}");Z("\\clap","\\mathclap{\\textrm{#1}}");Z("\\mathstrut","\\vphantom{(}");Z("\\underbar","\\underline{\\text{#1}}");Z("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Z("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Z("\\ne","\\neq");Z("","\\neq");Z("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Z("","\\notin");Z("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Z("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Z("","\\perp");Z("","\\mathclose{!\\mkern-0.8mu!}");Z("","\\notni");Z("","\\ulcorner");Z("","\\urcorner");Z("","\\llcorner");Z("","\\lrcorner");Z("","\\copyright");Z("","\\textregistered");Z("","\\textregistered");Z("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Z("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Z("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Z("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Z("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Z("","\\vdots");Z("\\varGamma","\\mathit{\\Gamma}");Z("\\varDelta","\\mathit{\\Delta}");Z("\\varTheta","\\mathit{\\Theta}");Z("\\varLambda","\\mathit{\\Lambda}");Z("\\varXi","\\mathit{\\Xi}");Z("\\varPi","\\mathit{\\Pi}");Z("\\varSigma","\\mathit{\\Sigma}");Z("\\varUpsilon","\\mathit{\\Upsilon}");Z("\\varPhi","\\mathit{\\Phi}");Z("\\varPsi","\\mathit{\\Psi}");Z("\\varOmega","\\mathit{\\Omega}");Z("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Z("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Z("\\boxed","\\fbox{$\\displaystyle{#1}$}");Z("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Z("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Z("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Z("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Z("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var BR={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Z("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in BR?e=BR[r]:(r.slice(0,4)==="\\not"||r in Pn.math&&["bin","rel"].includes(Pn.math[r].group))&&(e="\\dotsb"),e});var nE={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Z("\\dotso",function(t){var e=t.future().text;return e in nE?"\\ldots\\,":"\\ldots"});Z("\\dotsc",function(t){var e=t.future().text;return e in nE&&e!==","?"\\ldots\\,":"\\ldots"});Z("\\cdots",function(t){var e=t.future().text;return e in nE?"\\@cdots\\,":"\\@cdots"});Z("\\dotsb","\\cdots");Z("\\dotsm","\\cdots");Z("\\dotsi","\\!\\cdots");Z("\\dotsx","\\ldots\\,");Z("\\DOTSI","\\relax");Z("\\DOTSB","\\relax");Z("\\DOTSX","\\relax");Z("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Z("\\,","\\tmspace+{3mu}{.1667em}");Z("\\thinspace","\\,");Z("\\>","\\mskip{4mu}");Z("\\:","\\tmspace+{4mu}{.2222em}");Z("\\medspace","\\:");Z("\\;","\\tmspace+{5mu}{.2777em}");Z("\\thickspace","\\;");Z("\\!","\\tmspace-{3mu}{.1667em}");Z("\\negthinspace","\\!");Z("\\negmedspace","\\tmspace-{4mu}{.2222em}");Z("\\negthickspace","\\tmspace-{5mu}{.277em}");Z("\\enspace","\\kern.5em ");Z("\\enskip","\\hskip.5em\\relax");Z("\\quad","\\hskip1em\\relax");Z("\\qquad","\\hskip2em\\relax");Z("\\tag","\\@ifstar\\tag@literal\\tag@paren");Z("\\tag@paren","\\tag@literal{({#1})}");Z("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new ot("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Z("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Z("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Z("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Z("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Z("\\newline","\\\\\\relax");Z("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var lG=gt(zo["Main-Regular"][84][1]-.7*zo["Main-Regular"][65][1]);Z("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+lG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Z("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+lG+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Z("\\hspace","\\@ifstar\\@hspacer\\@hspace");Z("\\@hspace","\\hskip #1\\relax");Z("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Z("\\ordinarycolon",":");Z("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Z("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Z("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Z("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Z("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Z("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Z("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Z("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Z("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Z("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Z("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Z("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Z("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Z("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Z("","\\dblcolon");Z("","\\eqcolon");Z("","\\coloneqq");Z("","\\eqqcolon");Z("","\\Coloneqq");Z("\\ratio","\\vcentcolon");Z("\\coloncolon","\\dblcolon");Z("\\colonequals","\\coloneqq");Z("\\coloncolonequals","\\Coloneqq");Z("\\equalscolon","\\eqqcolon");Z("\\equalscoloncolon","\\Eqqcolon");Z("\\colonminus","\\coloneq");Z("\\coloncolonminus","\\Coloneq");Z("\\minuscolon","\\eqcolon");Z("\\minuscoloncolon","\\Eqcolon");Z("\\coloncolonapprox","\\Colonapprox");Z("\\coloncolonsim","\\Colonsim");Z("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Z("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Z("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Z("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Z("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Z("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Z("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Z("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Z("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Z("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Z("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Z("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Z("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Z("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Z("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Z("\\nleqq","\\html@mathml{\\@nleqq}{}");Z("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Z("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Z("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Z("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Z("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Z("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Z("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Z("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Z("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Z("\\imath","\\html@mathml{\\@imath}{}");Z("\\jmath","\\html@mathml{\\@jmath}{}");Z("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Z("","\\llbracket");Z("","\\rrbracket");Z("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Z("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Z("","\\lBrace");Z("","\\rBrace");Z("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Z("","\\minuso");Z("\\darr","\\downarrow");Z("\\dArr","\\Downarrow");Z("\\Darr","\\Downarrow");Z("\\lang","\\langle");Z("\\rang","\\rangle");Z("\\uarr","\\uparrow");Z("\\uArr","\\Uparrow");Z("\\Uarr","\\Uparrow");Z("\\N","\\mathbb{N}");Z("\\R","\\mathbb{R}");Z("\\Z","\\mathbb{Z}");Z("\\alef","\\aleph");Z("\\alefsym","\\aleph");Z("\\Alpha","\\mathrm{A}");Z("\\Beta","\\mathrm{B}");Z("\\bull","\\bullet");Z("\\Chi","\\mathrm{X}");Z("\\clubs","\\clubsuit");Z("\\cnums","\\mathbb{C}");Z("\\Complex","\\mathbb{C}");Z("\\Dagger","\\ddagger");Z("\\diamonds","\\diamondsuit");Z("\\empty","\\emptyset");Z("\\Epsilon","\\mathrm{E}");Z("\\Eta","\\mathrm{H}");Z("\\exist","\\exists");Z("\\harr","\\leftrightarrow");Z("\\hArr","\\Leftrightarrow");Z("\\Harr","\\Leftrightarrow");Z("\\hearts","\\heartsuit");Z("\\image","\\Im");Z("\\infin","\\infty");Z("\\Iota","\\mathrm{I}");Z("\\isin","\\in");Z("\\Kappa","\\mathrm{K}");Z("\\larr","\\leftarrow");Z("\\lArr","\\Leftarrow");Z("\\Larr","\\Leftarrow");Z("\\lrarr","\\leftrightarrow");Z("\\lrArr","\\Leftrightarrow");Z("\\Lrarr","\\Leftrightarrow");Z("\\Mu","\\mathrm{M}");Z("\\natnums","\\mathbb{N}");Z("\\Nu","\\mathrm{N}");Z("\\Omicron","\\mathrm{O}");Z("\\plusmn","\\pm");Z("\\rarr","\\rightarrow");Z("\\rArr","\\Rightarrow");Z("\\Rarr","\\Rightarrow");Z("\\real","\\Re");Z("\\reals","\\mathbb{R}");Z("\\Reals","\\mathbb{R}");Z("\\Rho","\\mathrm{P}");Z("\\sdot","\\cdot");Z("\\sect","\\S");Z("\\spades","\\spadesuit");Z("\\sub","\\subset");Z("\\sube","\\subseteq");Z("\\supe","\\supseteq");Z("\\Tau","\\mathrm{T}");Z("\\thetasym","\\vartheta");Z("\\weierp","\\wp");Z("\\Zeta","\\mathrm{Z}");Z("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Z("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Z("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Z("\\bra","\\mathinner{\\langle{#1}|}");Z("\\ket","\\mathinner{|{#1}\\rangle}");Z("\\braket","\\mathinner{\\langle{#1}\\rangle}");Z("\\Bra","\\left\\langle#1\\right|");Z("\\Ket","\\left|#1\\right\\rangle");var cG=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,a=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=m=>y=>{t&&(y.macros.set("|",s),a.length&&y.macros.set("\\|",c));var v=m;if(!m&&a.length){var T=y.future();T.text==="|"&&(y.popToken(),v=!0)}return{tokens:v?a:n,numArgs:0}};e.macros.set("|",d(!1)),a.length&&e.macros.set("\\|",d(!0));var h=e.consumeArg().tokens,p=e.expandTokens([...i,...h,...r]);return e.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};Z("\\bra@ket",cG(!1));Z("\\bra@set",cG(!0));Z("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Z("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Z("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Z("\\angln","{\\angl n}");Z("\\blue","\\textcolor{##6495ed}{#1}");Z("\\orange","\\textcolor{##ffa500}{#1}");Z("\\pink","\\textcolor{##ff00af}{#1}");Z("\\red","\\textcolor{##df0030}{#1}");Z("\\green","\\textcolor{##28ae7b}{#1}");Z("\\gray","\\textcolor{gray}{#1}");Z("\\purple","\\textcolor{##9d38bd}{#1}");Z("\\blueA","\\textcolor{##ccfaff}{#1}");Z("\\blueB","\\textcolor{##80f6ff}{#1}");Z("\\blueC","\\textcolor{##63d9ea}{#1}");Z("\\blueD","\\textcolor{##11accd}{#1}");Z("\\blueE","\\textcolor{##0c7f99}{#1}");Z("\\tealA","\\textcolor{##94fff5}{#1}");Z("\\tealB","\\textcolor{##26edd5}{#1}");Z("\\tealC","\\textcolor{##01d1c1}{#1}");Z("\\tealD","\\textcolor{##01a995}{#1}");Z("\\tealE","\\textcolor{##208170}{#1}");Z("\\greenA","\\textcolor{##b6ffb0}{#1}");Z("\\greenB","\\textcolor{##8af281}{#1}");Z("\\greenC","\\textcolor{##74cf70}{#1}");Z("\\greenD","\\textcolor{##1fab54}{#1}");Z("\\greenE","\\textcolor{##0d923f}{#1}");Z("\\goldA","\\textcolor{##ffd0a9}{#1}");Z("\\goldB","\\textcolor{##ffbb71}{#1}");Z("\\goldC","\\textcolor{##ff9c39}{#1}");Z("\\goldD","\\textcolor{##e07d10}{#1}");Z("\\goldE","\\textcolor{##a75a05}{#1}");Z("\\redA","\\textcolor{##fca9a9}{#1}");Z("\\redB","\\textcolor{##ff8482}{#1}");Z("\\redC","\\textcolor{##f9685d}{#1}");Z("\\redD","\\textcolor{##e84d39}{#1}");Z("\\redE","\\textcolor{##bc2612}{#1}");Z("\\maroonA","\\textcolor{##ffbde0}{#1}");Z("\\maroonB","\\textcolor{##ff92c6}{#1}");Z("\\maroonC","\\textcolor{##ed5fa6}{#1}");Z("\\maroonD","\\textcolor{##ca337c}{#1}");Z("\\maroonE","\\textcolor{##9e034e}{#1}");Z("\\purpleA","\\textcolor{##ddd7ff}{#1}");Z("\\purpleB","\\textcolor{##c6b9fc}{#1}");Z("\\purpleC","\\textcolor{##aa87ff}{#1}");Z("\\purpleD","\\textcolor{##7854ab}{#1}");Z("\\purpleE","\\textcolor{##543b78}{#1}");Z("\\mintA","\\textcolor{##f5f9e8}{#1}");Z("\\mintB","\\textcolor{##edf2df}{#1}");Z("\\mintC","\\textcolor{##e0e5cc}{#1}");Z("\\grayA","\\textcolor{##f6f7f7}{#1}");Z("\\grayB","\\textcolor{##f0f1f2}{#1}");Z("\\grayC","\\textcolor{##e3e5e6}{#1}");Z("\\grayD","\\textcolor{##d6d8da}{#1}");Z("\\grayE","\\textcolor{##babec2}{#1}");Z("\\grayF","\\textcolor{##888d93}{#1}");Z("\\grayG","\\textcolor{##626569}{#1}");Z("\\grayH","\\textcolor{##3b3e40}{#1}");Z("\\grayI","\\textcolor{##21242c}{#1}");Z("\\kaBlue","\\textcolor{##314453}{#1}");Z("\\kaGreen","\\textcolor{##71B307}{#1}");var uG={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Eue{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new Aue(Nue,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new DR(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,a;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:a,end:n}=this.consumeArg(["]"])}else({tokens:a,start:r,end:n}=this.consumeArg());return this.pushToken(new js("EOF",n.loc)),this.pushTokens(a),new js("",Yi.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var a=this.future(),i,s=0,c=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++s;else if(i.text==="}"){if(--s,s===-1)throw new ot("Extra }",i)}else if(i.text==="EOF")throw new ot("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",i);if(e&&n)if((s===0||s===1&&e[c]==="{")&&i.text===e[c]){if(++c,c===e.length){r.splice(-c,c);break}}else c=0}while(s!==0||n);return a.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:a,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new ot("The length of delimiters doesn't match the number of args!");for(var n=r[0],a=0;a<n.length;a++){var i=this.popToken();if(n[a]!==i.text)throw new ot("Use of the macro doesn't match its definition",i)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(r&&r[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ot("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,a=r.noexpand?null:this._getExpansion(n);if(a==null||e&&a.unexpandable){if(e&&a==null&&n[0]==="\\"&&!this.isDefined(n))throw new ot("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=a.tokens,s=this.consumeArgs(a.numArgs,a.delimiters);if(a.numArgs){i=i.slice();for(var c=i.length-1;c>=0;--c){var d=i[c];if(d.text==="#"){if(c===0)throw new ot("Incomplete placeholder at end of macro body",d);if(d=i[--c],d.text==="#")i.splice(c+1,1);else if(/^[1-9]$/.test(d.text))i.splice(c,2,...s[+d.text-1]);else throw new ot("Not a valid argument number",d)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new js(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var a=this.stack.pop();a.treatAsRelax&&(a.noexpand=!1,a.treatAsRelax=!1),r.push(a)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var a=typeof r=="function"?r(this):r;if(typeof a=="string"){var i=0;if(a.indexOf("#")!==-1)for(var s=a.replace(/##/g,"");s.indexOf("#"+(i+1))!==-1;)++i;for(var c=new DR(a,this.settings),d=[],h=c.lex();h.text!=="EOF";)d.push(h),h=c.lex();d.reverse();var p={tokens:d,numArgs:i};return p}return a}isDefined(e){return this.macros.has(e)||uu.hasOwnProperty(e)||Pn.math.hasOwnProperty(e)||Pn.text.hasOwnProperty(e)||uG.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:uu.hasOwnProperty(e)&&!uu[e].primitive}}var $R=/^[]/,pv=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),f3={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},UR={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class L2{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Eue(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new ot("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new js("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var a=this.fetch();if(L2.endOfExpression.indexOf(a.text)!==-1||r&&a.text===r||e&&uu[a.text]&&uu[a.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,a=0;a<e.length;a++)if(e[a].type==="infix"){if(r!==-1)throw new ot("only one infix operator per group",e[a].token);r=a,n=e[a].replaceWith}if(r!==-1&&n){var i,s,c=e.slice(0,r),d=e.slice(r+1);c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var h;return n==="\\\\abovefrac"?h=this.callFunction(n,[i,e[r],s],[]):h=this.callFunction(n,[i,s],[]),[h]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var a;do{var i;a=this.parseGroup(e)}while(((i=a)==null?void 0:i.type)==="internal");if(!a)throw new ot("Expected group after '"+n+"'",r);return a}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var a={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[a]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,a;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var s=i.text==="\\limits";r.limits=s,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new ot("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new ot("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(a)throw new ot("Double subscript",i);a=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new ot("Double superscript",i);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(pv[i.text]){var h=$R.test(i.text),p=[];for(p.push(new js(pv[i.text])),this.consume();;){var m=this.fetch().text;if(!pv[m]||$R.test(m)!==h)break;p.unshift(new js(pv[m])),this.consume()}var y=this.subparse(p);h?a={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||a?{type:"supsub",mode:this.mode,base:r,sup:n,sub:a}:r}parseFunction(e,r){var n=this.fetch(),a=n.text,i=uu[a];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new ot("Got function '"+a+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new ot("Can't use function '"+a+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new ot("Can't use function '"+a+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(a,i);return this.callFunction(a,s,c,n,e)}callFunction(e,r,n,a,i){var s={funcName:e,parser:this,token:a,breakOnTokenText:i},c=uu[e];if(c&&c.handler)return c.handler(s,r,n);throw new ot("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var a=[],i=[],s=0;s<n;s++){var c=r.argTypes&&r.argTypes[s],d=s<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&s===1&&i[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)i.push(h);else if(h!=null)a.push(h);else throw new ot("Null argument, please report this as a bug")}return{args:a,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var a=this.parseArgumentGroup(n,"text");return a!=null?{type:"styling",mode:a.mode,body:[a],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new ot("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new ot("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ot("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var a="",i;(i=this.fetch()).text!=="EOF";)a+=i.text,this.consume();return this.consume(),n.text=a,n}parseRegexGroup(e,r){for(var n=this.fetch(),a=n,i="",s;(s=this.fetch()).text!=="EOF"&&e.test(i+s.text);)a=s,i+=a.text,this.consume();if(i==="")throw new ot("Invalid "+r+": '"+n.text+"'",n);return n.range(a,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new ot("Invalid color: '"+r.text+"'",r);var a=n[0];return/^[0-9a-f]{6}$/i.test(a)&&(a="#"+a),{type:"color-token",mode:this.mode,color:a}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var a=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!a)throw new ot("Invalid size: '"+r.text+"'",r);var i={number:+(a[1]+a[2]),unit:a[3]};if(!bH(i))throw new ot("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var a=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(a),s}parseGroup(e,r){var n=this.fetch(),a=n.text,i;if(a==="{"||a==="\\begingroup"){this.consume();var s=a==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:Yi.range(n,d),body:c,semisimple:a==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&a[0]==="\\"&&!uG.hasOwnProperty(a)){if(this.settings.throwOnError)throw new ot("Undefined control sequence: "+a,n);i=this.formatUnsupportedCmd(a),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var a=e[n],i=a.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Yi.range(a,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:Yi.range(a,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),a=n.charAt(0)==="*";if(a&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ot(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:a}}UR.hasOwnProperty(r[0])&&!Pn[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=UR[r[0]]+r.slice(1));var i=_ue.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var s;if(Pn[this.mode][r]){this.settings.strict&&this.mode==="math"&&CA.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var c=Pn[this.mode][r].group,d=Yi.range(e),h;if(mce.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:d,text:r}}else h={type:c,mode:this.mode,loc:d,text:r};s=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(xH(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:Yi.range(e),text:r};else return null;if(this.consume(),i)for(var m=0;m<i[0].length;m++){var y=i[0][m];if(!f3[y])throw new ot("Unknown accent ' "+y+"'",e);var v=f3[y][this.mode]||f3[y].text;if(!v)throw new ot("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Yi.range(e),label:v,isStretchy:!1,isShifty:!0,base:s}}return s}}L2.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var aE=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new L2(e,r);delete n.gullet.macros.current["\\df@tag"];var a=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ot("\\tag works only in display equations");a=[{type:"tag",mode:"text",body:a,tag:n.subparse([new js("\\df@tag")])}]}return a},dG=function(e,r,n){r.textContent="";var a=iE(e,n).toNode();r.appendChild(a)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),dG=function(){throw new ot("KaTeX doesn't work in quirks mode.")});var jue=function(e,r){var n=iE(e,r).toMarkup();return n},kue=function(e,r){var n=new U7(r);return aE(e,n)},hG=function(e,r,n){if(n.throwOnError||!(e instanceof ot))throw e;var a=je.makeSpan(["katex-error"],[new eo(r)]);return a.setAttribute("title",e.toString()),a.setAttribute("style","color:"+n.errorColor),a},iE=function(e,r){var n=new U7(r);try{var a=aE(e,n);return Bce(a,e,n)}catch(i){return hG(i,e,n)}},Cue=function(e,r){var n=new U7(r);try{var a=aE(e,n);return $ce(a,e,n)}catch(i){return hG(i,e,n)}},Oue="0.16.28",Iue={Span:c1,Anchor:F7,SymbolNode:eo,SvgNode:rc,PathNode:ku,LineNode:kA},Ux={version:Oue,render:dG,renderToString:jue,ParseError:ot,SETTINGS_SCHEMA:Yv,__parse:kue,__renderToDomTree:iE,__renderToHTMLTree:Cue,__setFontMetrics:oce,__defineSymbol:O,__defineFunction:St,__defineMacro:Z,__domTree:Iue};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function iu(t){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(t)}function DA(t,e){return DA=Object.setPrototypeOf||function(n,a){return n.__proto__=a,n},DA(t,e)}function Rue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jv(t,e,r){return Rue()?Jv=Reflect.construct:Jv=function(a,i,s){var c=[null];c.push.apply(c,i);var d=Function.bind.apply(a,c),h=new d;return s&&DA(h,s.prototype),h},Jv.apply(null,arguments)}function po(t){return Mue(t)||Pue(t)||Due(t)||Lue()}function Mue(t){if(Array.isArray(t))return LA(t)}function Pue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Due(t,e){if(t){if(typeof t=="string")return LA(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LA(t,e)}}function LA(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Bue=Object.hasOwnProperty,zR=Object.setPrototypeOf,$ue=Object.isFrozen,Uue=Object.getPrototypeOf,zue=Object.getOwnPropertyDescriptor,Bi=Object.freeze,ro=Object.seal,Vue=Object.create,fG=typeof Reflect<"u"&&Reflect,zx=fG.apply,BA=fG.construct;zx||(zx=function(e,r,n){return e.apply(r,n)});Bi||(Bi=function(e){return e});ro||(ro=function(e){return e});BA||(BA=function(e,r){return Jv(e,po(r))});var Fue=no(Array.prototype.forEach),VR=no(Array.prototype.pop),Vp=no(Array.prototype.push),ex=no(String.prototype.toLowerCase),p3=no(String.prototype.toString),FR=no(String.prototype.match),ho=no(String.prototype.replace),que=no(String.prototype.indexOf),Hue=no(String.prototype.trim),li=no(RegExp.prototype.test),m3=Gue(TypeError);function no(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return zx(t,e,n)}}function Gue(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return BA(t,r)}}function mr(t,e,r){var n;r=(n=r)!==null&&n!==void 0?n:ex,zR&&zR(t,null);for(var a=e.length;a--;){var i=e[a];if(typeof i=="string"){var s=r(i);s!==i&&($ue(e)||(e[a]=s),i=s)}t[i]=!0}return t}function fd(t){var e=Vue(null),r;for(r in t)zx(Bue,t,[r])===!0&&(e[r]=t[r]);return e}function mv(t,e){for(;t!==null;){var r=zue(t,e);if(r){if(r.get)return no(r.get);if(typeof r.value=="function")return no(r.value)}t=Uue(t)}function n(a){return console.warn("fallback value for",a),null}return n}var qR=Bi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),g3=Bi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),y3=Bi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Wue=Bi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),v3=Bi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Kue=Bi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),HR=Bi(["#text"]),GR=Bi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),x3=Bi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),WR=Bi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),gv=Bi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Que=ro(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xue=ro(/<%[\w\W]*|[\w\W]*%>/gm),Yue=ro(/\${[\w\W]*}/gm),Zue=ro(/^data-[\-\w.\u00B7-\uFFFF]+$/),Jue=ro(/^aria-[\-\w]+$/),ede=ro(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),tde=ro(/^(?:\w+script|data):/i),rde=ro(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nde=ro(/^html$/i),ade=ro(/^[a-z][.\w]*(-[.\w]+)+$/i),ide=function(){return typeof window>"u"?null:window},sde=function(e,r){if(iu(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,a="data-tt-policy-suffix";r.currentScript&&r.currentScript.hasAttribute(a)&&(n=r.currentScript.getAttribute(a));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function pG(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ide(),e=function(fe){return pG(fe)};if(e.version="2.5.8",e.removed=[],!t||!t.document||t.document.nodeType!==9)return e.isSupported=!1,e;var r=t.document,n=t.document,a=t.DocumentFragment,i=t.HTMLTemplateElement,s=t.Node,c=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=h===void 0?t.NamedNodeMap||t.MozNamedAttrMap:h,m=t.HTMLFormElement,y=t.DOMParser,v=t.trustedTypes,T=c.prototype,S=mv(T,"cloneNode"),w=mv(T,"nextSibling"),j=mv(T,"childNodes"),R=mv(T,"parentNode");if(typeof i=="function"){var I=n.createElement("template");I.content&&I.content.ownerDocument&&(n=I.content.ownerDocument)}var L=sde(v,r),C=L?L.createHTML(""):"",P=n,N=P.implementation,A=P.createNodeIterator,E=P.createDocumentFragment,V=P.getElementsByTagName,D=r.importNode,U={};try{U=fd(n).documentMode?n.documentMode:{}}catch{}var $={};e.isSupported=typeof R=="function"&&N&&N.createHTMLDocument!==void 0&&U!==9;var Q=Que,K=Xue,H=Yue,J=Zue,ie=Jue,pe=tde,me=rde,X=ade,ne=ede,re=null,Ae=mr({},[].concat(po(qR),po(g3),po(y3),po(v3),po(HR))),Se=null,ze=mr({},[].concat(po(GR),po(x3),po(WR),po(gv))),He=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),st=null,W=null,he=!0,te=!0,ae=!1,Ue=!0,Ye=!1,xt=!0,it=!1,Pt=!1,Ie=!1,Be=!1,rt=!1,ft=!1,Ge=!0,ue=!1,Xe="user-content-",wt=!0,yt=!1,mt={},Vt=null,ur=mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),qr=null,be=mr({},["audio","video","img","source","image","track"]),nt=null,Et=mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Dt="http://www.w3.org/1998/Math/MathML",Bt="http://www.w3.org/2000/svg",Ze="http://www.w3.org/1999/xhtml",ar=Ze,br=!1,Pr=null,un=mr({},[Dt,Bt,Ze],p3),vr,Ht=["application/xhtml+xml","text/html"],$t="text/html",_t,Dr=null,rn=n.createElement("form"),Hr=function(fe){return fe instanceof RegExp||fe instanceof Function},Lr=function(fe){Dr&&Dr===fe||((!fe||iu(fe)!=="object")&&(fe={}),fe=fd(fe),vr=Ht.indexOf(fe.PARSER_MEDIA_TYPE)===-1?vr=$t:vr=fe.PARSER_MEDIA_TYPE,_t=vr==="application/xhtml+xml"?p3:ex,re="ALLOWED_TAGS"in fe?mr({},fe.ALLOWED_TAGS,_t):Ae,Se="ALLOWED_ATTR"in fe?mr({},fe.ALLOWED_ATTR,_t):ze,Pr="ALLOWED_NAMESPACES"in fe?mr({},fe.ALLOWED_NAMESPACES,p3):un,nt="ADD_URI_SAFE_ATTR"in fe?mr(fd(Et),fe.ADD_URI_SAFE_ATTR,_t):Et,qr="ADD_DATA_URI_TAGS"in fe?mr(fd(be),fe.ADD_DATA_URI_TAGS,_t):be,Vt="FORBID_CONTENTS"in fe?mr({},fe.FORBID_CONTENTS,_t):ur,st="FORBID_TAGS"in fe?mr({},fe.FORBID_TAGS,_t):{},W="FORBID_ATTR"in fe?mr({},fe.FORBID_ATTR,_t):{},mt="USE_PROFILES"in fe?fe.USE_PROFILES:!1,he=fe.ALLOW_ARIA_ATTR!==!1,te=fe.ALLOW_DATA_ATTR!==!1,ae=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ye=fe.SAFE_FOR_TEMPLATES||!1,xt=fe.SAFE_FOR_XML!==!1,it=fe.WHOLE_DOCUMENT||!1,Be=fe.RETURN_DOM||!1,rt=fe.RETURN_DOM_FRAGMENT||!1,ft=fe.RETURN_TRUSTED_TYPE||!1,Ie=fe.FORCE_BODY||!1,Ge=fe.SANITIZE_DOM!==!1,ue=fe.SANITIZE_NAMED_PROPS||!1,wt=fe.KEEP_CONTENT!==!1,yt=fe.IN_PLACE||!1,ne=fe.ALLOWED_URI_REGEXP||ne,ar=fe.NAMESPACE||Ze,He=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&Hr(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(He.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&Hr(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(He.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(He.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye&&(te=!1),rt&&(Be=!0),mt&&(re=mr({},po(HR)),Se=[],mt.html===!0&&(mr(re,qR),mr(Se,GR)),mt.svg===!0&&(mr(re,g3),mr(Se,x3),mr(Se,gv)),mt.svgFilters===!0&&(mr(re,y3),mr(Se,x3),mr(Se,gv)),mt.mathMl===!0&&(mr(re,v3),mr(Se,WR),mr(Se,gv))),fe.ADD_TAGS&&(re===Ae&&(re=fd(re)),mr(re,fe.ADD_TAGS,_t)),fe.ADD_ATTR&&(Se===ze&&(Se=fd(Se)),mr(Se,fe.ADD_ATTR,_t)),fe.ADD_URI_SAFE_ATTR&&mr(nt,fe.ADD_URI_SAFE_ATTR,_t),fe.FORBID_CONTENTS&&(Vt===ur&&(Vt=fd(Vt)),mr(Vt,fe.FORBID_CONTENTS,_t)),wt&&(re["#text"]=!0),it&&mr(re,["html","head","body"]),re.table&&(mr(re,["tbody"]),delete st.tbody),Bi&&Bi(fe),Dr=fe)},dn=mr({},["mi","mo","mn","ms","mtext"]),or=mr({},["annotation-xml"]),ma=mr({},["title","style","font","a","script"]),hn=mr({},g3);mr(hn,y3),mr(hn,Wue);var On=mr({},v3);mr(On,Kue);var ti=function(fe){var Je=R(fe);(!Je||!Je.tagName)&&(Je={namespaceURI:ar,tagName:"template"});var ct=ex(fe.tagName),Xt=ex(Je.tagName);return Pr[fe.namespaceURI]?fe.namespaceURI===Bt?Je.namespaceURI===Ze?ct==="svg":Je.namespaceURI===Dt?ct==="svg"&&(Xt==="annotation-xml"||dn[Xt]):!!hn[ct]:fe.namespaceURI===Dt?Je.namespaceURI===Ze?ct==="math":Je.namespaceURI===Bt?ct==="math"&&or[Xt]:!!On[ct]:fe.namespaceURI===Ze?Je.namespaceURI===Bt&&!or[Xt]||Je.namespaceURI===Dt&&!dn[Xt]?!1:!On[ct]&&(ma[ct]||!hn[ct]):!!(vr==="application/xhtml+xml"&&Pr[fe.namespaceURI]):!1},Tr=function(fe){Vp(e.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{try{fe.outerHTML=C}catch{fe.remove()}}},fn=function(fe,Je){try{Vp(e.removed,{attribute:Je.getAttributeNode(fe),from:Je})}catch{Vp(e.removed,{attribute:null,from:Je})}if(Je.removeAttribute(fe),fe==="is"&&!Se[fe])if(Be||rt)try{Tr(Je)}catch{}else try{Je.setAttribute(fe,"")}catch{}},ri=function(fe){var Je,ct;if(Ie)fe="<remove></remove>"+fe;else{var Xt=FR(fe,/^[\r\n\t ]+/);ct=Xt&&Xt[0]}vr==="application/xhtml+xml"&&ar===Ze&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");var dr=L?L.createHTML(fe):fe;if(ar===Ze)try{Je=new y().parseFromString(dr,vr)}catch{}if(!Je||!Je.documentElement){Je=N.createDocument(ar,"template",null);try{Je.documentElement.innerHTML=br?C:dr}catch{}}var nn=Je.body||Je.documentElement;return fe&&ct&&nn.insertBefore(n.createTextNode(ct),nn.childNodes[0]||null),ar===Ze?V.call(Je,it?"html":"body")[0]:it?Je.documentElement:nn},Wn=function(fe){return A.call(fe.ownerDocument||fe,fe,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},Yr=function(fe){return fe instanceof m&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof p)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},pn=function(fe){return iu(s)==="object"?fe instanceof s:fe&&iu(fe)==="object"&&typeof fe.nodeType=="number"&&typeof fe.nodeName=="string"},Tn=function(fe,Je,ct){$[fe]&&Fue($[fe],function(Xt){Xt.call(e,Je,ct,Dr)})},ni=function(fe){var Je;if(Tn("beforeSanitizeElements",fe,null),Yr(fe)||li(/[\u0080-\uFFFF]/,fe.nodeName))return Tr(fe),!0;var ct=_t(fe.nodeName);if(Tn("uponSanitizeElement",fe,{tagName:ct,allowedTags:re}),fe.hasChildNodes()&&!pn(fe.firstElementChild)&&(!pn(fe.content)||!pn(fe.content.firstElementChild))&&li(/<[/\w]/g,fe.innerHTML)&&li(/<[/\w]/g,fe.textContent)||ct==="select"&&li(/<template/i,fe.innerHTML)||fe.nodeType===7||xt&&fe.nodeType===8&&li(/<[/\w]/g,fe.data))return Tr(fe),!0;if(!re[ct]||st[ct]){if(!st[ct]&&Ni(ct)&&(He.tagNameCheck instanceof RegExp&&li(He.tagNameCheck,ct)||He.tagNameCheck instanceof Function&&He.tagNameCheck(ct)))return!1;if(wt&&!Vt[ct]){var Xt=R(fe)||fe.parentNode,dr=j(fe)||fe.childNodes;if(dr&&Xt)for(var nn=dr.length,Gr=nn-1;Gr>=0;--Gr){var mn=S(dr[Gr],!0);mn.__removalCount=(fe.__removalCount||0)+1,Xt.insertBefore(mn,w(fe))}}return Tr(fe),!0}return fe instanceof c&&!ti(fe)||(ct==="noscript"||ct==="noembed"||ct==="noframes")&&li(/<\/no(script|embed|frames)/i,fe.innerHTML)?(Tr(fe),!0):(Ye&&fe.nodeType===3&&(Je=fe.textContent,Je=ho(Je,Q," "),Je=ho(Je,K," "),Je=ho(Je,H," "),fe.textContent!==Je&&(Vp(e.removed,{element:fe.cloneNode()}),fe.textContent=Je)),Tn("afterSanitizeElements",fe,null),!1)},Fa=function(fe,Je,ct){if(Ge&&(Je==="id"||Je==="name")&&(ct in n||ct in rn))return!1;if(!(te&&!W[Je]&&li(J,Je))){if(!(he&&li(ie,Je))){if(!Se[Je]||W[Je]){if(!(Ni(fe)&&(He.tagNameCheck instanceof RegExp&&li(He.tagNameCheck,fe)||He.tagNameCheck instanceof Function&&He.tagNameCheck(fe))&&(He.attributeNameCheck instanceof RegExp&&li(He.attributeNameCheck,Je)||He.attributeNameCheck instanceof Function&&He.attributeNameCheck(Je))||Je==="is"&&He.allowCustomizedBuiltInElements&&(He.tagNameCheck instanceof RegExp&&li(He.tagNameCheck,ct)||He.tagNameCheck instanceof Function&&He.tagNameCheck(ct))))return!1}else if(!nt[Je]){if(!li(ne,ho(ct,me,""))){if(!((Je==="src"||Je==="xlink:href"||Je==="href")&&fe!=="script"&&que(ct,"data:")===0&&qr[fe])){if(!(ae&&!li(pe,ho(ct,me,"")))){if(ct)return!1}}}}}}return!0},Ni=function(fe){return fe!=="annotation-xml"&&FR(fe,X)},ls=function(fe){var Je,ct,Xt,dr;Tn("beforeSanitizeAttributes",fe,null);var nn=fe.attributes;if(!(!nn||Yr(fe))){var Gr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Se};for(dr=nn.length;dr--;){Je=nn[dr];var mn=Je,kr=mn.name,Rs=mn.namespaceURI;if(ct=kr==="value"?Je.value:Hue(Je.value),Xt=_t(kr),Gr.attrName=Xt,Gr.attrValue=ct,Gr.keepAttr=!0,Gr.forceKeepAttr=void 0,Tn("uponSanitizeAttribute",fe,Gr),ct=Gr.attrValue,!Gr.forceKeepAttr&&(fn(kr,fe),!!Gr.keepAttr)){if(!Ue&&li(/\/>/i,ct)){fn(kr,fe);continue}Ye&&(ct=ho(ct,Q," "),ct=ho(ct,K," "),ct=ho(ct,H," "));var cs=_t(fe.nodeName);if(Fa(cs,Xt,ct)){if(ue&&(Xt==="id"||Xt==="name")&&(fn(kr,fe),ct=Xe+ct),xt&&li(/((--!?|])>)|<\/(style|title)/i,ct)){fn(kr,fe);continue}if(L&&iu(v)==="object"&&typeof v.getAttributeType=="function"&&!Rs)switch(v.getAttributeType(cs,Xt)){case"TrustedHTML":{ct=L.createHTML(ct);break}case"TrustedScriptURL":{ct=L.createScriptURL(ct);break}}try{Rs?fe.setAttributeNS(Rs,kr,ct):fe.setAttribute(kr,ct),Yr(fe)?Tr(fe):VR(e.removed)}catch{}}}}Tn("afterSanitizeAttributes",fe,null)}},gi=function Tt(fe){var Je,ct=Wn(fe);for(Tn("beforeSanitizeShadowDOM",fe,null);Je=ct.nextNode();)Tn("uponSanitizeShadowNode",Je,null),ni(Je),ls(Je),Je.content instanceof a&&Tt(Je.content);Tn("afterSanitizeShadowDOM",fe,null)};return e.sanitize=function(Tt){var fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Je,ct,Xt,dr,nn;if(br=!Tt,br&&(Tt="<!-->"),typeof Tt!="string"&&!pn(Tt))if(typeof Tt.toString=="function"){if(Tt=Tt.toString(),typeof Tt!="string")throw m3("dirty is not a string, aborting")}else throw m3("toString is not a function");if(!e.isSupported){if(iu(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof Tt=="string")return t.toStaticHTML(Tt);if(pn(Tt))return t.toStaticHTML(Tt.outerHTML)}return Tt}if(Pt||Lr(fe),e.removed=[],typeof Tt=="string"&&(yt=!1),yt){if(Tt.nodeName){var Gr=_t(Tt.nodeName);if(!re[Gr]||st[Gr])throw m3("root node is forbidden and cannot be sanitized in-place")}}else if(Tt instanceof s)Je=ri("<!---->"),ct=Je.ownerDocument.importNode(Tt,!0),ct.nodeType===1&&ct.nodeName==="BODY"||ct.nodeName==="HTML"?Je=ct:Je.appendChild(ct);else{if(!Be&&!Ye&&!it&&Tt.indexOf("<")===-1)return L&&ft?L.createHTML(Tt):Tt;if(Je=ri(Tt),!Je)return Be?null:ft?C:""}Je&&Ie&&Tr(Je.firstChild);for(var mn=Wn(yt?Tt:Je);Xt=mn.nextNode();)Xt.nodeType===3&&Xt===dr||(ni(Xt),ls(Xt),Xt.content instanceof a&&gi(Xt.content),dr=Xt);if(dr=null,yt)return Tt;if(Be){if(rt)for(nn=E.call(Je.ownerDocument);Je.firstChild;)nn.appendChild(Je.firstChild);else nn=Je;return(Se.shadowroot||Se.shadowrootmod)&&(nn=D.call(r,nn,!0)),nn}var kr=it?Je.outerHTML:Je.innerHTML;return it&&re["!doctype"]&&Je.ownerDocument&&Je.ownerDocument.doctype&&Je.ownerDocument.doctype.name&&li(nde,Je.ownerDocument.doctype.name)&&(kr="<!DOCTYPE "+Je.ownerDocument.doctype.name+`>
`+kr),Ye&&(kr=ho(kr,Q," "),kr=ho(kr,K," "),kr=ho(kr,H," ")),L&&ft?L.createHTML(kr):kr},e.setConfig=function(Tt){Lr(Tt),Pt=!0},e.clearConfig=function(){Dr=null,Pt=!1},e.isValidAttribute=function(Tt,fe,Je){Dr||Lr({});var ct=_t(Tt),Xt=_t(fe);return Fa(ct,Xt,Je)},e.addHook=function(Tt,fe){typeof fe=="function"&&($[Tt]=$[Tt]||[],Vp($[Tt],fe))},e.removeHook=function(Tt){if($[Tt])return VR($[Tt])},e.removeHooks=function(Tt){$[Tt]&&($[Tt]=[])},e.removeAllHooks=function(){$={}},e}var mG=pG();const ode=({onComplete:t,contentUrl:e,htmlContent:r,userId:n,assignmentId:a,classType:i})=>{const s=k.useRef(Nx()),c=k.useRef(Date.now()),d=k.useRef(t),[h,p]=k.useState(!0),[m,y]=k.useState(0),[v,T]=k.useState(!1),[S,w]=k.useState(null),[j,R]=k.useState(0),[I,L]=k.useState(0),[C,P]=k.useState(!1),[N,A]=k.useState(0),[E,V]=k.useState(!1),D=k.useRef(null),U=k.useRef(null),$=k.useRef(null),Q=k.useRef(new Set),K=k.useRef(null),[H,J]=k.useState(!1);k.useEffect(()=>{d.current=t},[t]);const ie=k.useCallback(()=>{c.current=Date.now(),h||p(!0)},[h]);k.useEffect(()=>{const X=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),h||p(!0)):h&&p(!1)},1e3);return()=>clearInterval(X)},[h]),k.useEffect(()=>{const X=["mousemove","keydown","scroll","click"];return X.forEach(ne=>window.addEventListener(ne,ie)),()=>X.forEach(ne=>window.removeEventListener(ne,ie))},[ie]),k.useEffect(()=>()=>{d.current(s.current)},[]),k.useEffect(()=>{if(!n||!a)return;const X=async ne=>{var He,st,W,he,te,ae,Ue,Ye,xt,it,Pt,Ie;const re=D.current;if(!re)return;const Ae=re.src?new URL(re.src).origin:"";if(ne.origin!==window.location.origin&&ne.origin!==Ae)return;const Se=ne.origin,ze=ne.data;if(!(!ze||typeof ze!="object"||!((He=ze.type)!=null&&He.startsWith("portal-"))))switch(ie(),ze.type){case"portal-ready":{T(!0);try{const Be=await Ma(lt(Pe,"practice_progress",`${n}_${a}`)),rt=Be.exists()?Be.data():null,ft=(rt==null?void 0:rt.answeredQuestions)||[];ft.forEach(Xe=>Q.current.add(Xe)),R(ft.length),rt&&(K.current=rt,rt.completed&&(P(!0),A(rt.totalCompletions||1)));const Ge=rt?{state:rt.state||null,currentQuestion:rt.currentQuestion??0}:null,ue=rt!=null&&rt.completed?{completed:!0,completedAt:rt.completedAt,bestScore:rt.bestScore,totalCompletions:rt.totalCompletions||0,lastCompletion:((st=rt.completionHistory)==null?void 0:st.length)>0?rt.completionHistory[rt.completionHistory.length-1]:null}:null;(W=re.contentWindow)==null||W.postMessage({type:"portal-init",payload:{userId:n,savedState:Ge,completionInfo:ue}},Se)}catch(Be){console.error("Bridge: Failed to load saved state",Be),(he=re.contentWindow)==null||he.postMessage({type:"portal-init",payload:{userId:n,savedState:null,completionInfo:null}},Se)}break}case"portal-save":{const{state:Be,currentQuestion:rt}=ze.payload||{};if(!Be)break;try{const ft=K.current,Ge={userId:n,assignmentId:a,state:Be,currentQuestion:rt??0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString()};ft!=null&&ft.completed&&(Ge.completed=ft.completed,Ge.completedAt=ft.completedAt,Ge.bestScore=ft.bestScore,Ge.totalCompletions=ft.totalCompletions,Ge.completionHistory=ft.completionHistory),await ta(lt(Pe,"practice_progress",`${n}_${a}`),Ge,{merge:!0}),K.current={...K.current,...Ge},(te=re.contentWindow)==null||te.postMessage({type:"portal-save-ok"},Se)}catch(ft){console.error("Bridge: Save failed",ft),(ae=re.contentWindow)==null||ae.postMessage({type:"portal-save-error"},Se)}break}case"portal-complete":{const{score:Be,totalQuestions:rt,correctAnswers:ft}=ze.payload||{};try{const Ge=K.current,ue=new Date().toISOString(),Xe={completedAt:ue,score:Be??0,totalQuestions:rt??0,correctAnswers:ft??0,answeredQuestions:Array.from(Q.current)},wt=[...(Ge==null?void 0:Ge.completionHistory)||[],Xe],yt=Math.max((Ge==null?void 0:Ge.bestScore)||0,Be||0),mt=((Ge==null?void 0:Ge.totalCompletions)||0)+1,Vt={userId:n,assignmentId:a,completed:!0,completedAt:(Ge==null?void 0:Ge.completedAt)||ue,bestScore:yt,totalCompletions:mt,completionHistory:wt,answeredQuestions:Array.from(Q.current),lastUpdated:ue};Ge!=null&&Ge.state&&(Vt.state=Ge.state,Vt.currentQuestion=Ge.currentQuestion),await ta(lt(Pe,"practice_progress",`${n}_${a}`),Vt,{merge:!0}),K.current={...K.current,...Vt},P(!0),A(mt),Un.xpGain(),w({text:"Module Complete!",type:"success"}),setTimeout(()=>w(null),3e3),(Ue=re.contentWindow)==null||Ue.postMessage({type:"portal-complete-ok",payload:{totalCompletions:mt,bestScore:yt}},Se)}catch(Ge){console.error("Bridge: Completion save failed",Ge),(Ye=re.contentWindow)==null||Ye.postMessage({type:"portal-complete-error"},Se)}break}case"portal-replay":{try{const Be=K.current,rt={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString(),completed:(Be==null?void 0:Be.completed)||!1,completedAt:(Be==null?void 0:Be.completedAt)||null,bestScore:(Be==null?void 0:Be.bestScore)||null,totalCompletions:(Be==null?void 0:Be.totalCompletions)||0,completionHistory:(Be==null?void 0:Be.completionHistory)||[]};await ta(lt(Pe,"practice_progress",`${n}_${a}`),rt,{merge:!0}),K.current=rt,V(!1),(xt=re.contentWindow)==null||xt.postMessage({type:"portal-reset-ok"},Se)}catch(Be){console.error("Bridge: Replay reset failed",Be)}break}case"portal-answer":{const{questionId:Be,correct:rt,attempts:ft}=ze.payload||{};if(!Be)break;if(rt&&!Q.current.has(Be)){Q.current.add(Be),R(ue=>ue+1);const Ge=ft===1?15:10;try{const Xe=(await Xq({assignmentId:a,questionId:Be,xpAmount:Ge,classType:i||"Uncategorized"})).data;if(Xe.awarded){const wt=Xe.serverXP||Ge;L(yt=>yt+wt),w({text:`+${wt} XP`,type:"success"}),Un.xpGain(),setTimeout(()=>w(null),2e3)}(it=re.contentWindow)==null||it.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:Xe.awarded,xp:Xe.serverXP||Ge}},Se)}catch(ue){console.error("Bridge: XP award failed",ue),(Pt=re.contentWindow)==null||Pt.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:!1,xp:0}},Se)}}else rt&&((Ie=re.contentWindow)==null||Ie.postMessage({type:"portal-xp-result",payload:{questionId:Be,awarded:!1,xp:0}},Se));break}}};return window.addEventListener("message",X),()=>window.removeEventListener("message",X)},[n,a,i,ie]);const pe=k.useCallback(()=>{const X=D.current;if(!X||!n||!a)return;const re=(X.src?new URL(X.src).origin:"")||window.location.origin;(async()=>{var Ae;try{const Se=K.current,ze={userId:n,assignmentId:a,state:null,currentQuestion:0,answeredQuestions:Array.from(Q.current),lastUpdated:new Date().toISOString(),completed:(Se==null?void 0:Se.completed)||!1,completedAt:(Se==null?void 0:Se.completedAt)||null,bestScore:(Se==null?void 0:Se.bestScore)||null,totalCompletions:(Se==null?void 0:Se.totalCompletions)||0,completionHistory:(Se==null?void 0:Se.completionHistory)||[]};await ta(lt(Pe,"practice_progress",`${n}_${a}`),ze,{merge:!0}),K.current=ze,V(!1),(Ae=X.contentWindow)==null||Ae.postMessage({type:"portal-reset-ok"},re)}catch(Se){console.error("Replay reset failed",Se)}})()},[n,a]),me=k.useCallback(()=>{const X=$.current;X&&(document.fullscreenElement?document.exitFullscreen():X.requestFullscreen().catch(()=>{J(ne=>!ne)}))},[]);return k.useEffect(()=>{const X=()=>J(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",X),()=>document.removeEventListener("fullscreenchange",X)},[]),k.useEffect(()=>{if(U.current&&r){const X=r.replace(/\$(.*?)\$/g,(ne,re)=>{try{return Ux.renderToString(re,{throwOnError:!1})}catch{return re}});U.current.innerHTML=mG.sanitize(X,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[r]),o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${h?"text-green-400":"text-yellow-500"}`,children:[h?o.jsx(L7,{className:"w-4 h-4"}):o.jsx(Js,{className:"w-4 h-4 animate-pulse"}),h?"Active Session":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(m/60),"m ",m%60,"s"]}),v&&j>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[o.jsx(Mn,{className:"w-3 h-3"})," ",j," answered"]}),v&&I>0&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[o.jsx($a,{className:"w-3 h-3"})," ",I," XP"]}),C&&o.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-green-300 bg-green-500/10 px-3 py-1 rounded-full border border-green-500/20",children:[o.jsx(tc,{className:"w-3 h-3"}),"Completed",N>1?` (${N}x)`:""]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[C&&v&&(E?o.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded-lg px-3 py-1 border border-white/10",children:[o.jsx("span",{className:"text-[10px] text-gray-400",children:"Replay from start?"}),o.jsx("button",{onClick:pe,className:"text-[10px] font-bold text-green-400 hover:text-green-300 px-2 py-0.5 bg-green-500/10 rounded transition",children:"Yes"}),o.jsx("button",{onClick:()=>V(!1),className:"text-[10px] font-bold text-gray-500 hover:text-gray-300 px-2 py-0.5 rounded transition",children:"Cancel"})]}):o.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-1.5 text-[10px] text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 px-2.5 py-1 rounded-full border border-blue-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:"Replay this module from the start (your completion record is preserved)",children:[o.jsx(ule,{className:"w-3 h-3"})," Replay"]})),e&&o.jsxs("button",{onClick:me,className:"flex items-center gap-1.5 text-[10px] text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 px-2.5 py-1 rounded-full border border-purple-500/20 uppercase font-bold tracking-widest transition-colors cursor-pointer",title:H?"Exit full screen (Esc)":"Full screen",children:[H?o.jsx(iH,{className:"w-3 h-3"}):o.jsx(TA,{className:"w-3 h-3"}),H?"Exit Full Screen":"Full Screen"]}),v&&o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[o.jsx($a,{className:"w-3 h-3"})," XP Linked"]}),!h&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(Os,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&o.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:o.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?o.jsx(Mn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}),S.text]})}),o.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?o.jsx("div",{ref:$,className:"flex-1 flex flex-col bg-white",children:o.jsx("iframe",{ref:D,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:ie})}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Hh,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),o.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),r&&o.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[o.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[o.jsx(TA,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),o.jsx("div",{ref:U,className:"proctor-content text-sm leading-relaxed"})]})]})]})},lde=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(null),a=async()=>{e(!0),n(null);try{await ite(_A,Zse)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},i=r&&r.includes("api-key-not-valid");return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[o.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:o.jsxs("div",{className:"p-10 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),r&&o.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(Os,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"break-words",children:[o.jsx("strong",{children:"Login Failed:"})," ",r]})]}),i&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[o.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[o.jsx(qoe,{className:"w-4 h-4"}),"Action Required:"]}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",o.jsx("code",{children:"lib/firebase.ts"})," and replace",o.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),o.jsx("button",{onClick:a,disabled:t,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:t?o.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[o.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),o.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),o.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),o.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),o.jsx("span",{children:"Sign in with Google"})]})}),o.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),o.jsx("span",{children:""}),o.jsx("span",{children:"Firebase Auth"})]})]})})]})},gG=k.createContext(null),al=()=>{const t=k.useContext(gG);if(!t)throw new Error("useConfirm must be used within ConfirmProvider");return t},cde=({children:t})=>{const[e,r]=k.useState({isOpen:!1,options:{message:""}}),n=k.useRef(null),a=k.useRef(null),i=k.useCallback(p=>new Promise(m=>{n.current=m,r({isOpen:!0,options:p})}),[]),s=k.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!0),n.current=null,r(m=>({...m,isOpen:!1}))},[]),c=k.useCallback(()=>{var p;(p=n.current)==null||p.call(n,!1),n.current=null,r(m=>({...m,isOpen:!1}))},[]);k.useEffect(()=>{if(e.isOpen){const p=setTimeout(()=>{var m;(m=a.current)==null||m.focus()},50);return()=>clearTimeout(p)}},[e.isOpen]),k.useEffect(()=>{if(!e.isOpen)return;const p=m=>{m.key==="Escape"&&c(),m.key==="Enter"&&s()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,h={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return o.jsxs(gG.Provider,{value:{confirm:i},children:[t,e.isOpen&&o.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),o.jsxs("div",{className:`relative bg-gray-900 border ${h.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[o.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[o.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${h.icon} shrink-0`,children:o.jsx(Os,{className:"w-5 h-5"})}),o.jsxs("div",{children:[e.options.title&&o.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),o.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),o.jsx("button",{ref:a,onClick:s,className:`flex-1 py-2.5 ${h.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),o.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},eg=({availableSections:t,selectedSections:e,onChange:r,label:n="Target Sections"})=>{if(t.length===0)return null;const a=e.length===0,i=s=>{e.includes(s)?r(e.filter(c=>c!==s)):r([...e,s])};return o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1.5 px-1",children:n}),o.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>r([]),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${a?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:"All Sections"}),t.map(s=>o.jsx("button",{type:"button",onClick:()=>i(s),className:`px-3 py-1.5 rounded-lg border text-[11px] font-bold transition ${e.includes(s)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400 hover:border-white/20"}`,children:s},s))]})]})},KR={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:o.jsx(nH,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:o.jsx(Os,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:o.jsx(ole,{className:"w-4 h-4"})}},ude=({announcements:t,studentIds:e,availableSections:r=[]})=>{const{confirm:n}=al(),a=mi(),[i,s]=k.useState(!1),[c,d]=k.useState(""),[h,p]=k.useState(""),[m,y]=k.useState("INFO"),[v,T]=k.useState("GLOBAL"),[S,w]=k.useState([]),j=async()=>{if(!(!c.trim()||!h.trim()))try{await Re.createAnnouncement({title:c.trim(),content:h.trim(),classType:v,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN",...S.length>0?{targetSections:S}:{}}),await Re.notifyUsers(e,"ANNOUNCEMENT",c.trim(),h.trim().slice(0,100)),d(""),p(""),w([]),s(!1),a.success("Announcement broadcast sent.")}catch{a.error("Failed to create announcement.")}},R=async I=>{await n({message:"Delete this announcement?",confirmLabel:"Delete"})&&await Re.deleteAnnouncement(I)};return o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(Ox,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),o.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[o.jsx(Mi,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),t.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[o.jsx(Ox,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):o.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:t.map(I=>{var C;const L=KR[I.priority]||KR.INFO;return o.jsxs("div",{className:`p-3 ${L.bg} border ${L.border} rounded-xl flex justify-between items-start`,children:[o.jsxs("div",{className:"flex gap-2 items-start",children:[o.jsx("div",{className:`mt-0.5 ${L.text}`,children:L.icon}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-bold text-white",children:I.title}),o.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:I.content}),o.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[I.classType==="GLOBAL"?"All Classes":I.classType,(C=I.targetSections)!=null&&C.length?`  ${I.targetSections.join(", ")}`:"","  ",new Date(I.createdAt).toLocaleDateString()]})]})]}),o.jsx("button",{onClick:()=>R(I.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:o.jsx(ca,{className:"w-3.5 h-3.5"})})]},I.id)})}),o.jsx(Ti,{isOpen:i,onClose:()=>s(!1),title:"New Announcement",maxWidth:"max-w-md",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),o.jsx("input",{type:"text",value:c,onChange:I=>d(I.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),o.jsx("textarea",{value:h,onChange:I=>p(I.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),o.jsxs("select",{value:m,onChange:I=>y(I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"INFO",children:"Info"}),o.jsx("option",{value:"WARNING",children:"Warning"}),o.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),o.jsxs("select",{value:v,onChange:I=>T(I.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Rr).filter(I=>I!=="Uncategorized").map(I=>o.jsx("option",{value:I,children:I},I))]})]})]}),o.jsx(eg,{availableSections:r,selectedSections:S,onChange:w}),o.jsx("button",{onClick:j,disabled:!c.trim()||!h.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},yG=[{id:"rw_binary",name:"Binary",description:"The fundamental language of machines",pattern:["Ruby","Ruby"],requiredSockets:2,bonusStats:{tech:15},lore:"Two pulses of energy  on, on. The circuit completes itself."},{id:"rw_harmony",name:"Harmony",description:"Balance between mind and matter",pattern:["Emerald","Sapphire"],requiredSockets:2,bonusStats:{focus:8,analysis:8},lore:"Where concentration meets comprehension, understanding follows."},{id:"rw_catalyst",name:"Catalyst",description:"Accelerates all reactions without being consumed",pattern:["Ruby","Emerald"],requiredSockets:2,bonusStats:{tech:8,focus:8},lore:"A spark of innovation ignites sustained brilliance."},{id:"rw_resonance",name:"Resonance",description:"Vibrations amplified through perfect alignment",pattern:["Amethyst","Amethyst"],requiredSockets:2,bonusStats:{charisma:15},lore:"Two voices in unison shake the foundations of silence."},{id:"rw_enigma",name:"Enigma",description:"A puzzle that rewards the solver",pattern:["Sapphire","Amethyst"],requiredSockets:2,bonusStats:{analysis:10,charisma:6},lore:"The deepest mysteries reveal themselves to those who ask the right questions."},{id:"rw_quantum",name:"Quantum Entanglement",description:"Connected across any distance, instantaneously",pattern:["Sapphire","Ruby","Sapphire"],requiredSockets:3,bonusStats:{analysis:18,tech:10},bonusEffects:[{id:"qe_xp",name:"Quantum Leap",description:"+5% XP from all sources",value:.05,type:"XP_BOOST"}],lore:"What is measured in one place is instantly known in another."},{id:"rw_fusion",name:"Nuclear Fusion",description:"Combining elements to release extraordinary energy",pattern:["Ruby","Emerald","Ruby"],requiredSockets:3,bonusStats:{tech:20,focus:10},bonusEffects:[{id:"nf_xp",name:"Fusion Core",description:"+5% XP from engagement",value:.05,type:"XP_BOOST"}],lore:"Under immense pressure, two become one  and light is born."},{id:"rw_photosynthesis",name:"Photosynthesis",description:"Converting light into sustaining energy",pattern:["Emerald","Emerald","Ruby"],requiredSockets:3,bonusStats:{focus:20,tech:8},bonusEffects:[{id:"ps_stat",name:"Solar Sustenance",description:"+3 to all stats",value:3,type:"STAT_BOOST"}],lore:"From nothing but light and patience, life finds a way."},{id:"rw_supernova",name:"Supernova",description:"The brilliant death of a star, seeding new creation",pattern:["Ruby","Sapphire","Amethyst"],requiredSockets:3,bonusStats:{tech:12,analysis:12,charisma:12},bonusEffects:[{id:"sn_xp",name:"Stellar Burst",description:"+8% XP from all sources",value:.08,type:"XP_BOOST"}],lore:"In the final moment of collapse, everything scatters outward  brighter than ever."},{id:"rw_helix",name:"Double Helix",description:"The spiral code that defines all life",pattern:["Emerald","Amethyst","Emerald"],requiredSockets:3,bonusStats:{focus:15,charisma:15},bonusEffects:[{id:"dh_stat",name:"Genetic Blueprint",description:"+4 to Focus and Charisma",value:4,type:"STAT_BOOST"}],lore:"Twisted strands of information, perfectly paired, encoding the instructions for greatness."},{id:"rw_singularity",name:"Singularity",description:"Where all forces converge into infinite density",pattern:["Amethyst","Sapphire","Ruby"],requiredSockets:3,bonusStats:{tech:10,focus:10,analysis:10,charisma:10},bonusEffects:[{id:"sg_xp",name:"Event Horizon",description:"+10% XP from all sources",value:.1,type:"XP_BOOST"}],lore:"Beyond this point, nothing escapes  not even light. Only knowledge remains."}],QR=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],dde=["I","II","III","IV","V"],hde=t=>[2,10,18,36,54,86].includes(t)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(t)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(t)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},Kh=t=>{const e=Math.floor((t-1)/5),r=(t-1)%5,n=Math.min(e,QR.length-1),a=QR[n]||"Unknownium",i=dde[r],s=n+1,c=hde(s);return{rankName:`${a} ${i}`,tierColor:c.color,tierGlow:c.glow}},Ki={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50,SOCKET:30,ENCHANT:15,UNSOCKET_BASE:10},fde={COMMON:1,UNCOMMON:2,RARE:4,UNIQUE:8},XR=(t,e,r)=>{const n=Ki.UNSOCKET_BASE,a=fde[t],i=Math.max(1,e),s=1+r;return Math.ceil(n*a*i*s)},YR=t=>{const e=t.affixes.reduce((a,i)=>a+i.tier,0),r=t.affixes.length>0?e/t.affixes.length:1;let n=0;switch(t.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+r*.2))},vG=t=>{const e=100+Math.max(0,t.charisma-10)*5,r=Math.min(t.analysis*.5,50),n=Math.min(t.focus*.01,.4),a=2+Math.max(0,t.focus-10)*.02;return{maxHp:e,armorPercent:r,critChance:n,critMultiplier:a}},sE=t=>{var a;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((a=t.gamification)!=null&&a.equipped))return e;const r=t.gamification.equipped;return Object.values(r).filter(Boolean).forEach(i=>{i.stats&&Object.entries(i.stats).forEach(([s,c])=>{e[s]+=c})}),e},Qh=t=>{if(!t)return 0;let e=0;const r=Object.values(t).filter(Boolean);return r.length===0?0:(r.forEach(n=>{let a=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&a.length===0&&(a=[10]);const i=a.length>0?a.reduce((c,d)=>c+d,0)/a.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=i*10+s}),Math.floor(e))},ZR=t=>t.runewordActive&&yG.find(e=>e.id===t.runewordActive)||null,la=t=>{switch(t){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Jd(t,e){var a;const r=t.gamification;if(!r)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(a=r.classProfiles)==null?void 0:a[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:r.inventory||[],equipped:r.equipped||{},appearance:r.appearance||{bodyType:"A",hue:0}}}const pde=({student:t,submissions:e,assignments:r,bucketProfiles:n=[],onClose:a})=>{var C,P,N,A,E,V,D,U,$,Q;const[i,s]=k.useState(!1),c=((C=t.gamification)==null?void 0:C.level)||1,d=((P=t.gamification)==null?void 0:P.xp)||0,h=((N=t.gamification)==null?void 0:N.currency)||0,p=Kh(c),m=sE(t),y=t.enrolledClasses||(t.classType?[t.classType]:[]),v=((E=(A=t.gamification)==null?void 0:A.completedQuests)==null?void 0:E.length)||0,T=((D=(V=t.gamification)==null?void 0:V.activeQuests)==null?void 0:D.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").length)||0,S=k.useMemo(()=>y.map(K=>{var ne,re;const H=((re=(ne=t.gamification)==null?void 0:ne.classXp)==null?void 0:re[K])||0,J=Jd(t,K),ie=Qh(J.equipped),pe=J.inventory.length,me=e.filter(Ae=>{const Se=r.find(ze=>ze.id===Ae.assignmentId);return(Se==null?void 0:Se.classType)===K}),X=Math.round(me.reduce((Ae,Se)=>{var ze;return Ae+(((ze=Se.metrics)==null?void 0:ze.engagementTime)||0)},0)/60);return{cls:K,classXp:H,gearScore:ie,inventoryCount:pe,resourcesViewed:me.length,totalTime:X}}),[t,e,r,y]),w=k.useMemo(()=>{const K=new Map;return e.forEach(H=>{var X,ne,re,Ae,Se,ze,He;const J=r.find(st=>st.id===H.assignmentId),ie=H.assignmentId,pe=K.get(ie),me=((X=H.metrics)==null?void 0:X.engagementTime)||0;pe?(pe.visits++,pe.totalTime+=me,pe.totalKeystrokes+=((ne=H.metrics)==null?void 0:ne.keystrokes)||0,pe.totalClicks+=((re=H.metrics)==null?void 0:re.clickCount)||0,pe.totalPastes+=((Ae=H.metrics)==null?void 0:Ae.pasteCount)||0,pe.statuses.push(H.status),H.submittedAt&&(!pe.lastVisit||H.submittedAt>pe.lastVisit)&&(pe.lastVisit=H.submittedAt)):K.set(ie,{title:(J==null?void 0:J.title)||H.assignmentTitle,classType:(J==null?void 0:J.classType)||"Unknown",category:(J==null?void 0:J.category)||"Supplemental",visits:1,totalTime:me,totalKeystrokes:((Se=H.metrics)==null?void 0:Se.keystrokes)||0,totalClicks:((ze=H.metrics)==null?void 0:ze.clickCount)||0,totalPastes:((He=H.metrics)==null?void 0:He.pasteCount)||0,lastVisit:H.submittedAt||null,statuses:[H.status]})}),Array.from(K.values()).sort((H,J)=>J.totalTime-H.totalTime)},[e,r]),j=k.useMemo(()=>e.filter(K=>K.submittedAt).sort((K,H)=>new Date(H.submittedAt).getTime()-new Date(K.submittedAt).getTime()).slice(0,10).map(K=>{var H,J;return{...K,assignmentTitle:((H=r.find(ie=>ie.id===K.assignmentId))==null?void 0:H.title)||K.assignmentTitle,classType:((J=r.find(ie=>ie.id===K.assignmentId))==null?void 0:J.classType)||"Unknown"}}),[e,r]),R=Math.round(e.reduce((K,H)=>{var J;return K+(((J=H.metrics)==null?void 0:J.engagementTime)||0)},0)/60),I=k.useMemo(()=>{const K=new Set;e.forEach(X=>{if(X.submittedAt){const ne=new Date(X.submittedAt),re=ne.getFullYear(),Ae=new Date(re,0,1),Se=Math.ceil(((ne.getTime()-Ae.getTime())/864e5+Ae.getDay()+1)/7);K.add(`${re}-W${Se}`)}});const H=new Date,J=H.getFullYear(),ie=new Date(J,0,1),pe=Math.ceil(((H.getTime()-ie.getTime())/864e5+ie.getDay()+1)/7);let me=0;for(let X=pe;X>0&&K.has(`${J}-W${X}`);X--)me++;return me},[e]),L=k.useMemo(()=>{const K=[],H=new Date;for(let re=6;re>=0;re--){const Ae=new Date(H);Ae.setDate(Ae.getDate()-re);const Se=Ae.toISOString().split("T")[0],ze=e.filter(st=>{var W;return(W=st.submittedAt)==null?void 0:W.startsWith(Se)}),He=ze.reduce((st,W)=>{var he;return st+(((he=W.metrics)==null?void 0:he.engagementTime)||0)},0);K.push({label:Ae.toLocaleDateString([],{weekday:"short"}),time:Math.round(He/60),subs:ze.length})}const J=K.slice(4).reduce((re,Ae)=>re+Ae.time,0),ie=K.slice(0,4).reduce((re,Ae)=>re+Ae.time,0),pe=J/3,me=ie/4,X=pe>me*1.2?"up":pe<me*.6?"down":"flat",ne=Math.max(1,...K.map(re=>re.time));return{days:K,trend:X,maxTime:ne}},[e]);return cu.createPortal(o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-[9998] bg-black/40 animate-in fade-in duration-200",onClick:a}),o.jsx("div",{className:"fixed top-0 right-0 bottom-0 z-[9999] w-full xl:max-w-lg",children:o.jsxs("div",{className:"relative w-full bg-[#12132a] border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a] border-b border-white/5 p-6 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${p.tierGlow} shadow-xl`,children:t.avatarUrl?o.jsx("img",{src:t.avatarUrl,alt:t.name,className:`w-full h-full rounded-2xl border-2 object-cover ${p.tierColor.split(" ")[0]}`}):o.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${p.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:t.name.charAt(0)})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-white",children:t.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",c]})]}),((U=t.gamification)==null?void 0:U.codename)&&o.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',t.gamification.codename,'"']})]})]}),o.jsx("button",{onClick:a,className:"p-2.5 text-gray-400 hover:text-white bg-white/5 hover:bg-red-500/20 hover:text-red-300 border border-white/10 rounded-xl transition group",title:"Close",children:o.jsx(Da,{className:"w-5 h-5 group-hover:scale-110 transition-transform"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx($a,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:d.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Js,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[R,"m"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(_o,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(Bd,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:v}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(NA,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),o.jsx("div",{className:"text-lg font-bold text-white",children:h}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[o.jsx(A2,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),o.jsxs("div",{className:"text-lg font-bold text-white",children:[I,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),o.jsx("div",{className:"space-y-2",children:Object.entries(m).map(([K,H])=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:K}),o.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,H)}%`}})}),o.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:H})]},K))})]}),n.length>0&&(()=>{const K=n[0],H=Ol[K.bucket];return H?o.jsxs("div",{className:`border rounded-2xl p-4 ${H.borderColor} ${H.bgColor}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Engagement Bucket"}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${H.color} border ${H.borderColor}`,children:H.label})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-3",children:H.description}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-[10px] text-gray-400 mb-3",children:[o.jsxs("span",{children:["ES: ",K.engagementScore]}),o.jsxs("span",{children:["Subs: ",K.metrics.submissionCount]}),o.jsxs("span",{children:["Days Active: ",K.metrics.activityDays,"/7"]}),o.jsxs("span",{children:["Paste Ratio: ",Math.round(K.metrics.avgPasteRatio*100),"%"]}),o.jsxs("span",{children:["Time: ",Math.round(K.metrics.totalTime/60),"m"]})]}),o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5",children:[o.jsx(aH,{className:"w-3.5 h-3.5 text-amber-400"}),o.jsx("span",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:"Recommended Action"})]}),o.jsx("p",{className:"text-xs text-gray-300 mb-2",children:K.recommendation.action}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:K.recommendation.categories.map(J=>o.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-bold bg-white/5 border border-white/10 text-gray-300",children:J},J))})]}),(()=>{const J=r.filter(ie=>ie.classType===K.classType&&ie.status==="ACTIVE"&&K.recommendation.categories.includes(ie.category||"Supplemental")).slice(0,3);return J.length===0?null:o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1.5",children:"Suggested Resources"}),o.jsx("div",{className:"space-y-1",children:J.map(ie=>o.jsxs("div",{className:"flex items-center gap-2 py-1 text-xs",children:[o.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] font-bold bg-white/5 text-gray-400",children:ie.category}),o.jsx("span",{className:"text-white truncate",children:ie.title})]},ie.id))})]})})()]}):null})(),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"7-Day Engagement"}),o.jsxs("div",{className:"flex items-center gap-1",children:[L.trend==="up"&&o.jsx(C2,{className:"w-3.5 h-3.5 text-green-400"}),L.trend==="down"&&o.jsx(ple,{className:"w-3.5 h-3.5 text-red-400"}),L.trend==="flat"&&o.jsx(ale,{className:"w-3.5 h-3.5 text-gray-400"}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${L.trend==="up"?"text-green-400":L.trend==="down"?"text-red-400":"text-gray-400"}`,children:L.trend==="up"?"Trending Up":L.trend==="down"?"Declining":"Stable"})]})]}),o.jsx("div",{className:"flex items-end gap-1 h-16",children:L.days.map((K,H)=>{const J=L.maxTime>0?Math.max(2,K.time/L.maxTime*100):2,ie=H===L.days.length-1;return o.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[o.jsx("div",{className:`w-full rounded-t transition-all ${K.time>0?ie?"bg-purple-400":"bg-purple-500/60":"bg-white/5"}`,style:{height:`${J}%`}}),o.jsx("span",{className:"text-[8px] text-gray-500",children:K.label}),o.jsxs("div",{className:"absolute bottom-full mb-1 hidden group-hover:block bg-black/90 border border-white/10 rounded px-2 py-1 text-[10px] text-white whitespace-nowrap z-10 pointer-events-none",children:[K.time,"m  ",K.subs," sub",K.subs!==1?"s":""]})]},H)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),o.jsx("div",{className:"space-y-3",children:S.map(K=>o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:K.cls}),o.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[K.classXp.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[o.jsxs("span",{children:[o.jsx(To,{className:"w-3 h-3 inline mr-0.5"}),K.gearScore," GS"]}),o.jsxs("span",{children:[o.jsx(NA,{className:"w-3 h-3 inline mr-0.5"}),K.inventoryCount," items"]}),o.jsxs("span",{children:[o.jsx(_o,{className:"w-3 h-3 inline mr-0.5"}),K.resourcesViewed," viewed"]}),o.jsxs("span",{children:[o.jsx(Js,{className:"w-3 h-3 inline mr-0.5"}),K.totalTime,"m"]})]})]},K.cls))})]}),w.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsxs("button",{onClick:()=>s(!i),className:"flex items-center justify-between w-full mb-1",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest flex items-center gap-1.5",children:[o.jsx(eH,{className:"w-3.5 h-3.5"})," Resource Performance",o.jsxs("span",{className:"text-[9px] text-gray-600 normal-case tracking-normal font-normal ml-1",children:["(",w.length,")"]})]}),i?o.jsx(T2,{className:"w-4 h-4 text-gray-500"}):o.jsx(Ai,{className:"w-4 h-4 text-gray-500"})]}),i&&o.jsx("div",{className:"space-y-2 mt-3",children:w.map((K,H)=>{const J=Math.round(K.totalTime/60),ie=K.totalKeystrokes>20&&K.totalClicks>5?"high":K.totalClicks>2?"medium":"low",pe=ie==="high"?"text-green-400":ie==="medium"?"text-yellow-400":"text-red-400",me=ie==="high"?"bg-green-500":ie==="medium"?"bg-yellow-500":"bg-red-500";return o.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.title}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[K.classType,"  ",K.category]})]}),o.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 shrink-0 ${me}`,title:`${ie} engagement`})]}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 text-[10px]",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Time"}),o.jsxs("div",{className:"text-white font-bold",children:[J,"m"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Visits"}),o.jsx("div",{className:"text-white font-bold",children:K.visits})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Keys"}),o.jsx("div",{className:"text-white font-bold",children:K.totalKeystrokes})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-gray-500",children:"Quality"}),o.jsx("div",{className:`font-bold capitalize ${pe}`,children:ie})]})]}),K.lastVisit&&o.jsxs("div",{className:"text-[9px] text-gray-600 mt-1.5",children:["Last visited ",new Date(K.lastVisit).toLocaleDateString([],{month:"short",day:"numeric"})]})]},H)})})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),j.length===0?o.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):o.jsx("div",{className:"space-y-2",children:j.map(K=>{var J;const H=Math.round((((J=K.metrics)==null?void 0:J.engagementTime)||0)/60);return o.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${H>=5?"bg-green-500":H>=1?"bg-yellow-500":"bg-gray-500"}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-xs text-white font-bold truncate",children:K.assignmentTitle}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[K.classType,"  ",H,"m engaged"]})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:K.submittedAt?new Date(K.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},K.id)})})]}),T>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),o.jsx("div",{className:"space-y-2",children:(Q=($=t.gamification)==null?void 0:$.activeQuests)==null?void 0:Q.filter(K=>K.status==="ACCEPTED"||K.status==="DEPLOYED").map(K=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bd,{className:`w-3.5 h-3.5 ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),o.jsx("span",{className:"text-xs text-white",children:K.questId})]}),o.jsx("span",{className:`text-[10px] font-bold uppercase ${K.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:K.status})]},K.questId))})]}),o.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[o.jsxs("div",{children:["Email: ",t.email]}),o.jsxs("div",{children:["Section: ",t.section||"Unassigned"]}),o.jsxs("div",{children:["Enrolled: ",y.join(", ")||"None"]}),o.jsxs("div",{children:["Last login: ",t.lastLoginAt?new Date(t.lastLoginAt).toLocaleString():"Never"]}),o.jsxs("div",{children:["Created: ",t.createdAt?new Date(t.createdAt).toLocaleDateString():""]}),t.mutedUntil&&new Date(t.mutedUntil)>new Date&&o.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(t.mutedUntil).toLocaleString()]})]})]})]})})]}),document.body)},mde=({users:t,assignments:e=[],submissions:r=[]})=>{const{confirm:n}=al(),[a,i]=k.useState(null),[s,c]=k.useState([]),[d,h]=k.useState([]),[p,m]=k.useState([]),[y,v]=k.useState([]),[T,S]=k.useState(Date.now()),[w,j]=k.useState(null),[R,I]=k.useState("xp"),[L,C]=k.useState("desc"),[P,N]=k.useState(""),[A,E]=k.useState(""),V=W=>{R===W?C(he=>he==="asc"?"desc":"asc"):(I(W),C("asc"))},D=({label:W,col:he,className:te})=>o.jsx("th",{className:`cursor-pointer select-none group p-3 ${te??""}`,onClick:()=>V(he),children:o.jsxs("div",{className:`flex items-center gap-1 ${te!=null&&te.includes("text-center")?"justify-center":te!=null&&te.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:W}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(T2,{className:`w-2.5 h-2.5 -mb-0.5 ${R===he&&L==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Ai,{className:`w-2.5 h-2.5 -mt-0.5 ${R===he&&L==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})});k.useEffect(()=>{const W=Re.subscribeToChatFlags(c),he=Re.subscribeToAnnouncements(h),te=Re.subscribeToStudentAlerts(m),ae=Re.subscribeToStudentBuckets(v),Ue=setInterval(()=>S(Date.now()),6e4);return()=>{W(),he(),te(),ae(),clearInterval(Ue)}},[]);const U=t.filter(W=>W.role==="STUDENT"),$=k.useMemo(()=>{const W=new Set;return U.forEach(he=>{he.section&&W.add(he.section)}),Array.from(W).sort()},[U]),Q=k.useMemo(()=>{const W=new Map;for(const he of p){const te=W.get(he.studentId),ae={CRITICAL:4,HIGH:3,MODERATE:2,LOW:1};(!te||(ae[he.riskLevel]||0)>(ae[te.riskLevel]||0))&&W.set(he.studentId,he)}return W},[p]),K=k.useMemo(()=>{const W=new Map;for(const he of y)W.has(he.studentId)||W.set(he.studentId,he);return W},[y]),H=k.useMemo(()=>{const W={THRIVING:0,ON_TRACK:0,COASTING:0,SPRINTING:0,STRUGGLING:0,DISENGAGING:0,INACTIVE:0,COPYING:0},he=new Set;for(const te of y)he.has(te.studentId)||(he.add(te.studentId),W[te.bucket]!==void 0&&W[te.bucket]++);return W},[y]),J=U.length,ie=Math.round(U.reduce((W,he)=>{var te;return W+(((te=he.stats)==null?void 0:te.totalTime)||0)},0)/(J||1)),pe=U.reduce((W,he)=>{var te;return W+(((te=he.stats)==null?void 0:te.problemsCompleted)||0)},0),me=U.reduce((W,he)=>{var te;return W+(((te=he.gamification)==null?void 0:te.xp)||0)},0),X=U.filter(W=>W.mutedUntil&&new Date(W.mutedUntil).getTime()>T),ne=async W=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await Re.muteUser(W,0)},re=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],Ae=async(W,he)=>{await Re.muteUser(W,he),j(null)},Se=async(W,he)=>{const te=new Date(he).getTime(),ae=new Date(Math.max(te,Date.now())+3600*1e3),Ue=Math.ceil((ae.getTime()-Date.now())/6e4);await Re.muteUser(W,Ue)},ze=({label:W,value:he,icon:te,color:ae})=>o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[o.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${ae}`,children:te}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:he}),o.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:W})]}),o.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${ae}`})]}),He=W=>{const te=new Date(W).getTime()-T;if(te<=0)return"Expired";const ae=Math.ceil(te/6e4);return ae>60?`${Math.ceil(ae/60)} hrs`:`${ae} mins`},st=W=>{if(!W)return"Never";const he=new Date(W),te=Date.now()-he.getTime(),ae=Math.floor(te/6e4);if(ae<1)return"Just now";if(ae<60)return`${ae}m ago`;const Ue=Math.floor(ae/60);return Ue<24?`${Ue}h ago`:he.toLocaleDateString()};return o.jsxs("div",{className:`space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 transition-[padding] duration-300 ${a?"xl:pr-[520px]":""}`,children:[o.jsx("div",{className:"flex justify-between items-end",children:o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(ze,{label:"Total Students",value:J,icon:o.jsx(is,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),o.jsx(ze,{label:"Total XP Awarded",value:me.toLocaleString(),icon:o.jsx($a,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),o.jsx(ze,{label:"Resources Viewed",value:pe,icon:o.jsx(Xm,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),o.jsx(ze,{label:"Avg Active Time",value:`${ie}m`,icon:o.jsx(Js,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?o.jsx(Os,{className:"w-5 h-5"}):o.jsx(j2,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(jx,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):o.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(W=>o.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-bold text-white",children:[W.senderName," ",o.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",W.classType]})]}),o.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',W.content,'"']})]}),o.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(W.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex gap-2 mt-2",children:[o.jsxs("button",{onClick:async()=>{await Re.resolveFlag(W.id),W.messageId&&await Re.unflagMessage(W.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(lu,{className:"w-3 h-3"})," Dismiss"]}),o.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await Re.resolveFlag(W.id),W.messageId&&await Re.deleteMessage(W.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[o.jsx(ca,{className:"w-3 h-3"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>j(w===W.id?null:W.id),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-lg text-[11px] font-bold transition",title:"Mute",children:o.jsx(Ix,{className:"w-3 h-3"})}),w===W.id&&o.jsxs("div",{className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",W.senderName]}),re.map(he=>o.jsx("button",{onClick:()=>Ae(W.senderId,he.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:he.label},he.minutes))]})]})]})]},W.id))})]}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[o.jsx(Ix,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),X.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[o.jsx(is,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[o.jsx("th",{className:"pb-2",children:"Operative"}),o.jsx("th",{className:"pb-2",children:"Remaining"}),o.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:X.map(W=>o.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[o.jsxs("td",{className:"py-3",children:[o.jsx("div",{className:"text-sm font-bold text-white",children:W.name}),o.jsx("div",{className:"text-[10px] text-gray-500",children:W.classType})]}),o.jsx("td",{className:"py-3",children:o.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:He(W.mutedUntil)})}),o.jsx("td",{className:"py-3 text-right",children:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>Se(W.id,W.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:o.jsx(Rx,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>ne(W.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:o.jsx(jx,{className:"w-3.5 h-3.5"})})]})})]},W.id))})]})})]})]}),p.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(QI,{className:"w-5 h-5"}),"Early Warning System"]}),o.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase bg-amber-500/20 text-amber-300",children:[p.length," Alert",p.length!==1?"s":""]})]}),o.jsx("div",{className:"space-y-3 max-h-72 overflow-y-auto custom-scrollbar pr-2",children:p.map(W=>{const he={CRITICAL:"border-red-500/40 bg-red-900/20",HIGH:"border-orange-500/30 bg-orange-900/10",MODERATE:"border-yellow-500/20 bg-yellow-900/10",LOW:"border-blue-500/20 bg-blue-900/10"},te={CRITICAL:"bg-red-500 text-white",HIGH:"bg-orange-500 text-white",MODERATE:"bg-yellow-500/80 text-black",LOW:"bg-blue-500/60 text-white"},ae=W.bucket?Ol[W.bucket]:null;return o.jsx("div",{className:`border p-4 rounded-xl ${he[W.riskLevel]||he.LOW}`,children:o.jsxs("div",{className:"flex justify-between items-start gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${te[W.riskLevel]||te.LOW}`,children:W.riskLevel}),ae&&o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ae.bgColor} ${ae.color} ${ae.borderColor} border`,children:ae.label}),o.jsx("span",{className:"text-sm font-bold text-white truncate",children:W.studentName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:W.classType})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-relaxed",children:W.message}),ae&&o.jsx("p",{className:"text-[10px] text-gray-400 mt-1 italic",children:ae.description}),o.jsxs("div",{className:"flex gap-4 mt-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["ES: ",W.engagementScore]}),o.jsxs("span",{children:["Class Avg: ",W.classMean]}),o.jsx("span",{children:new Date(W.createdAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsx("button",{onClick:()=>i(W.studentId),className:"px-2 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 text-gray-300 hover:text-white rounded-lg text-[11px] font-bold transition",children:"View"}),o.jsx("button",{onClick:async()=>{await Re.dismissAlert(W.id)},className:"px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:"Dismiss"})]})]})},W.id)})})]}),y.length>0&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(QI,{className:"w-5 h-5 text-cyan-400"}),"Student Engagement Buckets"]}),o.jsxs("span",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:[y.length," profile",y.length!==1?"s":""," across classes"]})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.keys(Ol).map(W=>{const he=Ol[W],te=H[W];return o.jsxs("div",{className:`border rounded-xl p-3 ${he.borderColor} ${he.bgColor} transition hover:scale-[1.02]`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:`text-xs font-bold ${he.color}`,children:he.label}),o.jsx("span",{className:"text-lg font-bold text-white",children:te})]}),o.jsx("p",{className:"text-[9px] text-gray-400 leading-tight",children:he.description})]},W)})}),(()=>{const W=Object.values(H).reduce((he,te)=>he+te,0);return W===0?null:o.jsx("div",{className:"mt-4 flex h-3 rounded-full overflow-hidden bg-white/5",children:Object.keys(Ol).map(he=>{const te=H[he]/W*100;if(te===0)return null;const ae={THRIVING:"bg-emerald-500",ON_TRACK:"bg-blue-500",COASTING:"bg-yellow-500",SPRINTING:"bg-orange-500",STRUGGLING:"bg-purple-500",DISENGAGING:"bg-red-500",INACTIVE:"bg-gray-500",COPYING:"bg-rose-500"};return o.jsx("div",{className:`${ae[he]||"bg-gray-500"} transition-all`,style:{width:`${te}%`},title:`${Ol[he].label}: ${H[he]} (${Math.round(te)}%)`},he)})})})()]}),o.jsx("div",{className:"mt-8",children:o.jsx(ude,{announcements:d,studentIds:U.map(W=>W.id),availableSections:$})}),o.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[o.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Student Engagement Ranking"}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-6",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(E2,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Search students...",value:P,onChange:W=>N(W.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl py-2.5 pl-10 pr-4 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500/50 transition"})]}),o.jsxs("select",{value:A,onChange:W=>E(W.target.value),className:"bg-black/30 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{value:"",children:"All Buckets"}),Object.keys(Ol).map(W=>o.jsx("option",{value:W,children:Ol[W].label},W))]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[o.jsx(D,{label:"Student",col:"name"}),o.jsx(D,{label:"Class",col:"class"}),o.jsx(D,{label:"Last Seen",col:"lastSeen",className:"text-center"}),o.jsx(D,{label:"Total Time",col:"time",className:"text-center"}),o.jsx(D,{label:"Resources",col:"resources",className:"text-center"}),o.jsx(D,{label:"XP",col:"xp",className:"text-right"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const he=[...U.filter(ae=>{var xt;const Ue=!P||ae.name.toLowerCase().includes(P.toLowerCase())||ae.email.toLowerCase().includes(P.toLowerCase()),Ye=!A||((xt=K.get(ae.id))==null?void 0:xt.bucket)===A;return Ue&&Ye})].sort((ae,Ue)=>{var Ye,xt,it,Pt,Ie,Be,rt,ft;switch(R){case"name":return L==="asc"?ae.name.localeCompare(Ue.name):Ue.name.localeCompare(ae.name);case"class":return L==="asc"?(ae.classType||"").localeCompare(Ue.classType||""):(Ue.classType||"").localeCompare(ae.classType||"");case"lastSeen":{const Ge=ae.lastLoginAt?new Date(ae.lastLoginAt).getTime():0,ue=Ue.lastLoginAt?new Date(Ue.lastLoginAt).getTime():0;return L==="asc"?Ge-ue:ue-Ge}case"time":{const Ge=((Ye=ae.stats)==null?void 0:Ye.totalTime)||0,ue=((xt=Ue.stats)==null?void 0:xt.totalTime)||0;return L==="asc"?Ge-ue:ue-Ge}case"resources":{const Ge=((it=ae.stats)==null?void 0:it.problemsCompleted)||0,ue=((Pt=Ue.stats)==null?void 0:Pt.problemsCompleted)||0;return L==="asc"?Ge-ue:ue-Ge}case"xp":default:{const Ge=((Be=(Ie=ae.gamification)==null?void 0:Ie.classXp)==null?void 0:Be[ae.classType||""])||0,ue=((ft=(rt=Ue.gamification)==null?void 0:rt.classXp)==null?void 0:ft[Ue.classType||""])||0;return L==="asc"?Ge-ue:ue-Ge}}}),te=Math.max(1,...U.map(ae=>{var Ue,Ye;return((Ye=(Ue=ae.gamification)==null?void 0:Ue.classXp)==null?void 0:Ye[ae.classType||""])||0}));return he.map(ae=>{var ue,Xe,wt,yt;const Ue=((Xe=(ue=ae.gamification)==null?void 0:ue.classXp)==null?void 0:Xe[ae.classType||""])||0,Ye=Math.round(Ue/te*100),xt=ae.lastLoginAt,it=xt?Date.now()-new Date(xt).getTime():1/0,Pt=it<36e5?"text-green-400":it<864e5?"text-yellow-400":it<1/0?"text-red-400":"text-gray-600",Ie=it<36e5?"bg-green-500":it<864e5?"bg-yellow-500":it<1/0?"bg-red-500":"bg-gray-600",Be=Q.get(ae.id),rt={CRITICAL:"bg-red-500 animate-pulse",HIGH:"bg-orange-500",MODERATE:"bg-yellow-500"},ft=K.get(ae.id),Ge=ft?Ol[ft.bucket]:null;return o.jsxs("tr",{className:`hover:bg-white/5 transition cursor-pointer ${(Be==null?void 0:Be.riskLevel)==="CRITICAL"?"bg-red-900/5":""}`,onClick:()=>i(ae.id),children:[o.jsx("td",{className:"p-3 font-bold text-white",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"relative",children:[ae.avatarUrl?o.jsx("img",{src:ae.avatarUrl,alt:ae.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):o.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:ae.name.charAt(0)}),o.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Ie}`})]}),o.jsx("span",{className:"truncate max-w-[120px]",children:ae.name}),Be&&rt[Be.riskLevel]&&o.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${rt[Be.riskLevel]}`,title:`${Be.riskLevel} risk: ${Be.reason}`}),Ge&&o.jsx("span",{className:`px-1.5 py-0.5 rounded text-[8px] font-bold ${Ge.bgColor} ${Ge.color} border ${Ge.borderColor}`,title:Ge.description,children:Ge.label})]})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:ae.classType}),o.jsx("td",{className:`p-3 text-center text-xs font-mono ${Pt}`,children:st(ae.lastLoginAt)}),o.jsxs("td",{className:"p-3 text-center text-white",children:[((wt=ae.stats)==null?void 0:wt.totalTime)||0,"m"]}),o.jsx("td",{className:"p-3 text-center text-white",children:((yt=ae.stats)==null?void 0:yt.problemsCompleted)||0}),o.jsx("td",{className:"p-3 text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Ye}%`}})}),o.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:Ue})]})})]},ae.id)})})()})]})})]}),a&&(()=>{const W=U.find(he=>he.id===a);return W?o.jsx(pde,{student:W,submissions:r.filter(he=>he.userId===a),assignments:e,bucketProfiles:y.filter(he=>he.studentId===a),onClose:()=>i(null)}):null})()]})},gde=({users:t,whitelistedEmails:e,classConfigs:r,onWhitelist:n})=>{const a=mi(),{confirm:i}=al(),[s,c]=k.useState(new Set),[d,h]=k.useState(Rr.AP_PHYSICS),[p,m]=k.useState(!1),[y,v]=k.useState(!1),[T,S]=k.useState({}),w=(be,nt)=>{S(Et=>{const Dt=Et[be]||{col:"name",dir:"asc"};return{...Et,[be]:{col:nt,dir:Dt.col===nt&&Dt.dir==="asc"?"desc":"asc"}}})},j=({label:be,col:nt,type:Et,className:Dt})=>{const Bt=T[Et]||{col:"name",dir:"asc"},Ze=Bt.col===nt;return o.jsx("th",{className:`cursor-pointer select-none group p-4 ${Dt??""}`,onClick:()=>w(Et,nt),children:o.jsxs("div",{className:`flex items-center gap-1 ${Dt!=null&&Dt.includes("text-center")?"justify-center":"justify-start"}`,children:[o.jsx("span",{children:be}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(T2,{className:`w-2.5 h-2.5 -mb-0.5 ${Ze&&Bt.dir==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Ai,{className:`w-2.5 h-2.5 -mt-0.5 ${Ze&&Bt.dir==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})})},[R,I]=k.useState(""),[L,C]=k.useState(Rr.AP_PHYSICS),[P,N]=k.useState(""),[A,E]=k.useState(""),[V,D]=k.useState(!1),[U,$]=k.useState(!1),[Q,K]=k.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[H,J]=k.useState(10),[ie,pe]=k.useState("single"),[me,X]=k.useState([]),[ne,re]=k.useState(!1),Ae=k.useRef(null),[Se,ze]=k.useState(null),[He,st]=k.useState(""),[W,he]=k.useState(""),te=t.filter(be=>be.role==="STUDENT"),ae=k.useMemo(()=>{const be=new Set;return te.forEach(nt=>{nt.classSections&&Object.values(nt.classSections).forEach(Et=>{Et&&be.add(Et)}),nt.section&&be.add(nt.section)}),Array.from(be).sort()},[te]),Ue=async(be,nt,Et)=>{try{Et?await Re.updateUserClassSection(be,Et,nt):await Re.updateUserSection(be,nt),ze(null),st(""),he(""),a.success(`Section updated to ${nt||"none"}${Et?` for ${Et}`:""}`)}catch{a.error("Failed to update section")}},Ye=async be=>{if(s.size!==0)try{await Promise.all(Array.from(s).map(nt=>Re.updateUserSection(nt,be))),c(new Set),a.success(`Set ${s.size} students to ${be}`)}catch{a.error("Failed to bulk update sections")}},xt=k.useMemo(()=>e.filter(be=>!t.some(nt=>nt.email.toLowerCase()===be.email.toLowerCase())),[e,t]),it=k.useMemo(()=>[...Array.from(new Set([...Object.values(Rr).filter(nt=>nt!==Rr.UNCATEGORIZED),...r.map(nt=>nt.className)])).sort(),Rr.UNCATEGORIZED],[r]),Pt=be=>{const nt=te.filter(Bt=>{var Ze,ar;return((Ze=Bt.enrolledClasses)==null?void 0:Ze.includes(be))||be===Rr.UNCATEGORIZED&&(((ar=Bt.enrolledClasses)==null?void 0:ar.length)===0||!Bt.enrolledClasses)}),Et=nt.every(Bt=>s.has(Bt.id)),Dt=new Set(s);nt.forEach(Bt=>{Et?Dt.delete(Bt.id):Dt.add(Bt.id)}),c(Dt)},Ie=be=>{const nt=new Set(s);nt.has(be)?nt.delete(be):nt.add(be),c(nt)},Be=async()=>{if(s.size>0){const be=Array.from(s).map(async nt=>{const Et=t.find(Dt=>Dt.id===nt);if(Et){const Dt=Et.enrolledClasses||[],Bt=Array.from(new Set([...Dt.filter(Ze=>Ze!==Rr.UNCATEGORIZED),d]));await Re.updateUserEnrolledClasses(nt,Bt)}});await Promise.all(be),c(new Set)}},rt=async be=>{if(s.size>0){if(!await i({message:`Remove ${s.size} students from ${be}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const nt=Array.from(s).map(async Et=>{const Dt=t.find(Bt=>Bt.id===Et);if(Dt){const Ze=(Dt.enrolledClasses||[]).filter(ar=>ar!==be);await Re.updateUserEnrolledClasses(Et,Ze)}});await Promise.all(nt),c(new Set)}},ft=async(be,nt)=>{if(await i({message:`Remove ${be.name} from ${nt}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const Dt=(be.enrolledClasses||[]).filter(Bt=>Bt!==nt);await Re.updateUserEnrolledClasses(be.id,Dt)}},Ge=async(be,nt)=>{await i({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${nt}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await Re.removeUser(be)},ue=async be=>{be!==Rr.UNCATEGORIZED&&await i({message:`Delete group config ${be}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&Re.deleteClassConfig(be)},Xe=async be=>{await i({message:`Cancel invite for ${be}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await Re.removeFromWhitelist(be)},wt=(be,nt)=>{be!==Rr.UNCATEGORIZED&&(E(be),D(!0),nt?(K(nt.features),J(nt.xpPerMinute||10)):(K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),J(10)),v(!0))},yt=be=>{be.preventDefault(),n(R,L),P.trim()&&Re.updateWhitelistSection(R,P.trim()),I(""),N(""),m(!1)},mt=be=>{var Dt;const nt=(Dt=be.target.files)==null?void 0:Dt[0];if(!nt)return;const Et=new FileReader;Et.onload=Bt=>{var Ht,$t;const Ze=(Ht=Bt.target)==null?void 0:Ht.result;if(!Ze)return;const ar=Ze.split(/\r?\n/).filter(_t=>_t.trim()),br=($t=ar[0])!=null&&$t.toLowerCase().includes("email")?1:0,Pr=new Set(e.map(_t=>_t.email.toLowerCase())),un=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,vr=ar.slice(br).map(_t=>{const Dr=_t.includes("	")?_t.split("	"):_t.split(","),rn=(Dr[0]||"").trim().toLowerCase(),Hr=(Dr[1]||"").trim()||Rr.AP_PHYSICS,Lr=(Dr[2]||"").trim();let dn="pending";return un.test(rn)?Pr.has(rn)&&(dn="duplicate"):dn="invalid",{email:rn,classType:Hr,section:Lr,status:dn}}).filter(_t=>_t.email.length>0);X(vr)},Et.readAsText(nt),be.target.value=""},Vt=async()=>{const be=me.filter(Et=>Et.status==="pending");if(be.length===0)return;re(!0);let nt=0;for(const Et of be)try{await Re.addToWhitelist(Et.email,Et.classType),Et.section&&await Re.updateWhitelistSection(Et.email,Et.section),Et.status="success",nt++}catch{Et.status="invalid"}X([...me]),re(!1),a.success(`${nt} operative${nt!==1?"s":""} imported successfully.`),me.every(Et=>Et.status==="success"||Et.status==="duplicate")&&setTimeout(()=>{m(!1),X([]),pe("single")},1500)},ur=async be=>{if(be.preventDefault(),!!A){$(!0);try{await Re.saveClassConfig({id:A,className:A,features:Q,xpPerMinute:H}),E(""),v(!1),D(!1)}catch(nt){console.error("Failed to save config:",nt),a.error("Failed to save class configuration.")}finally{$(!1)}}},qr=be=>{const nt=be===Rr.UNCATEGORIZED,Et=T[be]||{col:"name",dir:"asc"},Dt=[...te.filter(Ze=>{var ar;return((ar=Ze.enrolledClasses)==null?void 0:ar.includes(be))||nt&&(!Ze.enrolledClasses||Ze.enrolledClasses.length===0)})].sort((Ze,ar)=>{var br,Pr,un,vr;switch(Et.col){case"section":{const Ht=Ze.section||"",$t=ar.section||"";return Et.dir==="asc"?Ht.localeCompare($t):$t.localeCompare(Ht)}case"status":{const Ht=Ze.isWhitelisted?1:0,$t=ar.isWhitelisted?1:0;return Et.dir==="asc"?Ht-$t:$t-Ht}case"lastSeen":{const Ht=Ze.lastLoginAt?new Date(Ze.lastLoginAt).getTime():0,$t=ar.lastLoginAt?new Date(ar.lastLoginAt).getTime():0;return Et.dir==="asc"?Ht-$t:$t-Ht}case"xp":{const Ht=((Pr=(br=Ze.gamification)==null?void 0:br.classXp)==null?void 0:Pr[be])||0,$t=((vr=(un=ar.gamification)==null?void 0:un.classXp)==null?void 0:vr[be])||0;return Et.dir==="asc"?Ht-$t:$t-Ht}case"name":default:return Et.dir==="asc"?Ze.name.localeCompare(ar.name):ar.name.localeCompare(Ze.name)}}),Bt=r.find(Ze=>Ze.className===be);return o.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${nt?"opacity-90":""}`,children:[o.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${nt?"bg-orange-500/10":"bg-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("h3",{className:`font-bold text-lg tracking-wide ${nt?"text-orange-300":"text-white"}`,children:[nt&&o.jsx(Boe,{className:"w-5 h-5 inline mr-2 mb-1"}),be]}),o.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${nt?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[Dt.length," Registered"]}),!nt&&o.jsx("button",{onClick:()=>wt(be,Bt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:o.jsx(Ym,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[s.size>0&&Array.from(s).some(Ze=>Dt.find(ar=>ar.id===Ze))&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex items-center gap-1",children:o.jsxs("select",{onChange:Ze=>{Ze.target.value&&Ye(Ze.target.value),Ze.target.value=""},className:"bg-black/40 border border-purple-500/30 text-purple-400 text-[11px] font-bold px-2 py-1.5 rounded-lg appearance-none focus:outline-none cursor-pointer",defaultValue:"",children:[o.jsx("option",{value:"",disabled:!0,children:"Assign Section..."}),o.jsx("option",{value:"",children:"No Section"}),ae.map(Ze=>o.jsx("option",{value:Ze,children:Ze},Ze))]})}),o.jsxs("button",{onClick:()=>rt(be),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[o.jsx(gle,{className:"w-3 h-3"})," Remove Selected"]})]}),!nt&&o.jsxs("button",{onClick:()=>ue(be),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[o.jsx(ca,{className:"w-3 h-3"}),"Config"]})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[o.jsx("th",{className:"w-12 p-4 text-center",children:Dt.length>0&&o.jsx("button",{onClick:()=>Pt(be),className:"hover:text-purple-400 transition",children:o.jsx(nR,{className:"w-4 h-4"})})}),o.jsx(j,{label:"Operative",col:"name",type:be}),o.jsx(j,{label:"Section",col:"section",type:be,className:"text-center"}),o.jsx(j,{label:"System Status",col:"status",type:be,className:"text-center"}),o.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:Dt.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500 italic text-sm",children:nt?"No restricted operatives found.":"No students registered in this roster yet."})}):Dt.map(Ze=>{var ar;return o.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(Ze.id)?"bg-purple-500/10":""}`,children:[o.jsx("td",{className:"p-4 text-center",children:o.jsx("button",{onClick:()=>Ie(Ze.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(Ze.id)?o.jsx(hle,{className:"w-4 h-4 text-purple-500"}):o.jsx(nR,{className:"w-4 h-4 group-hover:text-gray-400"})})}),o.jsx("td",{className:"p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:Ze.avatarUrl,alt:Ze.name,className:"w-8 h-8 rounded-full border border-white/10"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Ze.name}),o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:Ze.email})]})]})}),o.jsx("td",{className:"p-4 text-center",children:Se===Ze.id?o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[((ar=Ze.enrolledClasses)!=null&&ar.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean)).map(br=>{var un;if(!br)return null;const Pr=((un=Ze.classSections)==null?void 0:un[br])||(Ze.section&&Ze.classType===br?Ze.section:"");return o.jsxs("div",{className:"flex items-center gap-1.5 text-[10px]",children:[o.jsx("span",{className:"text-gray-500 font-mono whitespace-nowrap text-[9px]",title:br,children:br}),o.jsxs("select",{value:Pr,onChange:vr=>{const Ht=vr.target.value;Ht==="__custom__"?(st("__custom__"),he("")):Ue(Ze.id,Ht,br)},className:"bg-black/40 border border-purple-500/50 rounded-lg px-1.5 py-1 text-[11px] text-white font-bold focus:outline-none w-24",children:[o.jsx("option",{value:"",children:"None"}),ae.map(vr=>o.jsx("option",{value:vr,children:vr},vr)),o.jsx("option",{value:"__custom__",children:"+ New"})]})]},br)}),He==="__custom__"&&o.jsxs("div",{className:"flex gap-1",children:[o.jsx("input",{value:W,onChange:br=>he(br.target.value),placeholder:"e.g. Period 2",className:"bg-black/40 border border-white/10 rounded-lg px-2 py-1 text-[11px] text-white w-24 focus:outline-none focus:border-purple-500/50",onKeyDown:br=>{var Pr;if(br.key==="Enter"&&W.trim()){const un=(Pr=Ze.enrolledClasses)!=null&&Pr.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean);un[0]&&Ue(Ze.id,W.trim(),un[0])}},autoFocus:!0}),o.jsx("button",{onClick:()=>{var br;if(W.trim()){const Pr=(br=Ze.enrolledClasses)!=null&&br.length?Ze.enrolledClasses:[Ze.classType].filter(Boolean);Pr[0]&&Ue(Ze.id,W.trim(),Pr[0])}},className:"text-green-400 hover:text-green-300 p-1",children:o.jsx(Mi,{className:"w-3 h-3"})})]}),o.jsx("button",{onClick:()=>{ze(null),st(""),he("")},className:"text-[10px] text-gray-500 hover:text-white transition",children:"Done"})]}):o.jsx("button",{onClick:()=>{ze(Ze.id),st(""),he("")},className:`text-[11px] font-bold px-2.5 py-1 rounded-lg border transition ${Ze.classSections&&Object.keys(Ze.classSections).length>0||Ze.section?"bg-purple-500/10 text-purple-400 border-purple-500/20 hover:bg-purple-500/20":"bg-white/5 text-gray-500 border-white/10 hover:text-white hover:border-white/20"}`,children:Ze.classSections&&Object.keys(Ze.classSections).length>0?Object.values(Ze.classSections).filter(Boolean).join(", ")||"Assign":Ze.section||"Assign"})}),o.jsx("td",{className:"p-4 text-center",children:o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Ze.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Ze.isWhitelisted?o.jsx(tR,{className:"w-3 h-3"}):o.jsx(j2,{className:"w-3 h-3"}),Ze.isWhitelisted?"Authorized":"Restricted"]})}),o.jsx("td",{className:"p-4 text-center",children:o.jsx("div",{className:"flex items-center justify-center gap-2",children:o.jsx("button",{onClick:()=>nt?Ge(Ze.id,Ze.name):ft(Ze,be),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:nt?"Permanently Delete":"Remove from this Class",children:o.jsx(Da,{className:"w-4 h-4"})})})})]},Ze.id)})})]})})]},be)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),o.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[o.jsxs("button",{onClick:()=>{E(""),K({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),D(!1),v(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[o.jsx(Ym,{className:"w-4 h-4"}),"Class Config"]}),o.jsxs("button",{onClick:()=>m(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[o.jsx(Mx,{className:"w-4 h-4"}),"Invite Student"]})]})]}),xt.length>0&&o.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[o.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[o.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[o.jsx(ele,{className:"w-4 h-4"})," Pending Class Invitations (",xt.length,")"]}),o.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),o.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:xt.map(be=>o.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:be.email}),o.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[o.jsx(tR,{className:"w-3 h-3 text-amber-500"}),o.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(be.classTypes||[be.classType]).join(", ")," Access"]})]})]}),o.jsx("button",{onClick:()=>Xe(be.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:o.jsx(ca,{className:"w-3.5 h-3.5"})})]},be.email))})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[o.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),o.jsxs("div",{className:"relative w-full sm:w-auto",children:[o.jsx("select",{value:d,onChange:be=>h(be.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:it.filter(be=>be!==Rr.UNCATEGORIZED).map(be=>o.jsxs("option",{value:be,children:["Apply ",be," Access"]},be))}),o.jsx(Ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),o.jsxs("button",{onClick:Be,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[o.jsx(Mi,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),o.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),o.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),o.jsx("div",{className:"pb-12",children:it.map(be=>qr(be))}),o.jsxs(Ti,{isOpen:p,onClose:()=>{m(!1),X([]),pe("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[o.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[o.jsxs("button",{onClick:()=>{pe("single"),X([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(Mx,{className:"w-3.5 h-3.5"})," Single"]}),o.jsxs("button",{onClick:()=>pe("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${ie==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[o.jsx(Zd,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),ie==="single"?o.jsxs("form",{onSubmit:yt,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),o.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:R,onChange:be=>I(be.target.value),placeholder:"student@gmail.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),o.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:L,onChange:be=>C(be.target.value),children:it.filter(be=>be!==Rr.UNCATEGORIZED).map(be=>o.jsx("option",{value:be,children:be},be))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),o.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:P,onChange:be=>N(be.target.value),placeholder:"e.g. Period 3, Block A"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[o.jsx("input",{type:"file",ref:Ae,accept:".csv,.tsv,.txt",onChange:mt,className:"hidden"}),me.length===0?o.jsxs(o.Fragment,{children:[o.jsx(Zd,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),o.jsx("button",{onClick:()=>{var be;return(be=Ae.current)==null?void 0:be.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",o.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),o.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:o.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",o.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",o.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",o.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Xm,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),o.jsxs("p",{className:"text-sm font-bold text-white",children:[me.length," records parsed"]}),o.jsx("button",{onClick:()=>{X([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),me.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:o.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[o.jsx("th",{className:"p-2 pl-3",children:"Email"}),o.jsx("th",{className:"p-2",children:"Class"}),o.jsx("th",{className:"p-2",children:"Section"}),o.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:me.map((be,nt)=>o.jsxs("tr",{className:be.status==="invalid"?"bg-red-500/5":be.status==="duplicate"?"bg-yellow-500/5":be.status==="success"?"bg-green-500/5":"",children:[o.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:be.email}),o.jsx("td",{className:"p-2 text-gray-400",children:be.classType}),o.jsx("td",{className:"p-2 text-gray-500",children:be.section||""}),o.jsx("td",{className:"p-2 pr-3 text-right",children:o.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${be.status==="pending"?"bg-blue-500/20 text-blue-400":be.status==="success"?"bg-green-500/20 text-green-400":be.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:be.status})})]},nt))})]})}),o.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("span",{className:"text-blue-400",children:[me.filter(be=>be.status==="pending").length," ready"]}),o.jsxs("span",{className:"text-yellow-400",children:[me.filter(be=>be.status==="duplicate").length," duplicates"]}),o.jsxs("span",{className:"text-red-400",children:[me.filter(be=>be.status==="invalid").length," invalid"]}),me.some(be=>be.status==="success")&&o.jsxs("span",{className:"text-green-400",children:[me.filter(be=>be.status==="success").length," imported"]})]})}),me.filter(be=>be.status==="duplicate").length>0&&o.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[o.jsx(Os,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),o.jsx("button",{onClick:Vt,disabled:ne||me.filter(be=>be.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:ne?o.jsxs(o.Fragment,{children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," Importing..."]}):o.jsxs(o.Fragment,{children:["Import ",me.filter(be=>be.status==="pending").length," Operatives"]})})]})]})]}),o.jsx(Ti,{isOpen:y,onClose:()=>v(!1),title:V?"Edit Class Node Config":"Initialize New Class Node",children:o.jsxs("form",{onSubmit:ur,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),o.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:A,onChange:be=>E(be.target.value),placeholder:"e.g. AP Physics Period 4"}),V&&o.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsLab,onChange:be=>K({...Q,physicsLab:be.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.evidenceLocker,onChange:be=>K({...Q,evidenceLocker:be.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.leaderboard,onChange:be=>K({...Q,leaderboard:be.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.physicsTools,onChange:be=>K({...Q,physicsTools:be.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:Q.communications,onChange:be=>K({...Q,communications:be.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"number",min:1,max:100,value:H,onChange:be=>J(Math.max(1,Math.min(100,parseInt(be.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),o.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),o.jsx("button",{type:"submit",disabled:U,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${U?"opacity-70 cursor-not-allowed":""}`,children:U?o.jsxs(o.Fragment,{children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):V?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},Yc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},JR={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},yde=(t,e,r)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,vde=(t,e,r)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${t}
CLASS: ${e}
${r?`DESCRIPTION: ${r}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${t}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,xde=({assignment:t,isOpen:e,onClose:r})=>{const n=mi(),a=k.useRef(null),[i,s]=k.useState([]),[c,d]=k.useState(!0),[h,p]=k.useState(!1),[m,y]=k.useState(t.category==="Practice Set"?"reading":"manage"),[v,T]=k.useState(null),[S,w]=k.useState(null),[j,R]=k.useState(""),[I,L]=k.useState(null),[C,P]=k.useState(!1),[N,A]=k.useState(null),[E,V]=k.useState({}),[D,U]=k.useState(null),[$,Q]=k.useState(!0),[K,H]=k.useState(null),[J,ie]=k.useState(null),[pe,me]=k.useState(null),[X,ne]=k.useState(!1),re=k.useRef(null),Ae=t.category==="Practice Set";k.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const Be=await Ma(lt(Pe,"question_banks",t.id));Be.exists()?s(Be.data().questions||[]):s([]);const rt=await Ma(lt(Pe,"reading_materials",t.id));rt.exists()?H(rt.data()):H(null)}catch(Be){console.error("Failed to load bank:",Be),s([])}finally{d(!1)}})()},[e,t.id]);const Se=async Ie=>{p(!0);try{await ta(lt(Pe,"question_banks",t.id),{assignmentId:t.id,title:t.title,classType:t.classType,questions:Ie,questionCount:Ie.length,updatedAt:new Date().toISOString()}),s(Ie)}catch(Be){n.error("Failed to save: "+(Be instanceof Error?Be.message:"Unknown error"))}finally{p(!1)}},ze=async Ie=>{const Be=i.filter(rt=>rt.id!==Ie);await Se(Be),n.success("Question removed."),I===Ie&&L(null)},He=async()=>{try{await Wa(lt(Pe,"question_banks",t.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},st=()=>{navigator.clipboard.writeText(yde(t.title,t.classType,t.description)),P(!0),setTimeout(()=>P(!1),2e3),n.success("Prompt copied!")},W=()=>{navigator.clipboard.writeText(vde(t.title,t.classType,t.description)),ne(!0),setTimeout(()=>ne(!1),2e3),n.success("Reading prompt copied!")},he=async Ie=>{var rt;const Be=(rt=Ie.target.files)==null?void 0:rt[0];if(Be){me(null),ie(null);try{let Ge=(await Be.text()).replace(/```json\s*|```\s*/g,"").trim();Ge=Ge.replace(/[\x00-\x1F\x7F]/g,wt=>wt===`
`||wt==="\r"||wt==="	"?" ":"");let ue;try{ue=JSON.parse(Ge)}catch{const wt=Ge.match(/\{[\s\S]*\}/);if(wt)ue=JSON.parse(wt[0]);else throw new Error("No JSON object found.")}if(!ue.title||!ue.sections||!Array.isArray(ue.sections))throw new Error("Missing required fields: title and sections array.");const Xe=ue.sections.filter(wt=>!wt.title||!wt.content);if(Xe.length>0)throw new Error(`${Xe.length} section(s) missing title or content.`);ie(ue)}catch(ft){me(ft instanceof Error?ft.message:"Parse failed.")}re.current&&(re.current.value="")}},te=async()=>{if(J){p(!0);try{await ta(lt(Pe,"reading_materials",t.id),{...J,assignmentId:t.id,updatedAt:new Date().toISOString()}),H(J),ie(null),n.success(`Study material uploaded: ${J.sections.length} sections!`)}catch(Ie){n.error("Failed to save: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{p(!1)}}},ae=async()=>{p(!0);try{await Wa(lt(Pe,"reading_materials",t.id)),H(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{p(!1)}},Ue=async Ie=>{var rt;const Be=(rt=Ie.target.files)==null?void 0:rt[0];if(Be){U(null),A(null);try{let Ge=(await Be.text()).replace(/```json\s*|```\s*/g,"").trim();Ge=Ge.replace(/[\x00-\x1F\x7F]/g,mt=>mt===`
`||mt==="\r"||mt==="	"?" ":"");let ue;try{ue=JSON.parse(Ge)}catch{const mt=Ge.match(/\[[\s\S]*\]/);if(mt)try{ue=JSON.parse(mt[0])}catch{const Vt=mt[0];let ur=null;for(let qr=Vt.length-1;qr>0;qr--)if(Vt[qr]==="}")try{ur=JSON.parse(Vt.slice(0,qr+1)+"]");break}catch{}if(ur)ue=ur;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Vt=null;const ur="["+Ge;for(let qr=ur.length-1;qr>0;qr--)if(ur[qr]==="}")try{Vt=JSON.parse(ur.slice(0,qr+1)+"]");break}catch{}if(Vt)ue=Vt;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(ue)||ue.length===0)throw new Error("Must be a non-empty JSON array.");const Xe=ue.filter(mt=>mt.id&&mt.tier&&mt.type&&mt.stem&&mt.options&&mt.correctAnswer),wt=ue.length-Xe.length;if(Xe.length===0){U("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const yt={};Xe.forEach(mt=>{const Vt=mt.tier;yt[Vt]=(yt[Vt]||0)+1}),A(Xe),V(yt),wt>0&&n.success(`Parsed ${Xe.length} questions (${wt} skipped  missing fields).`)}catch(ft){U(ft instanceof Error?ft.message:"Parse failed.")}a.current&&(a.current.value="")}},Ye=async()=>{if(!N)return;let Ie;if($&&i.length>0){const Be=new Set(i.map(ft=>ft.id)),rt=N.map((ft,Ge)=>({...ft,id:Be.has(ft.id)?`${ft.id}_${Date.now()}_${Ge}`:ft.id}));Ie=[...i,...rt]}else Ie=N;await Se(Ie),n.success(`${$?"Added":"Replaced with"} ${N.length} questions. Total: ${Ie.length}`),A(null),y("manage")},xt=k.useMemo(()=>{let Ie=i;if(v&&(Ie=Ie.filter(Be=>Be.tier===v)),S&&(Ie=Ie.filter(Be=>Be.type===S)),j){const Be=j.toLowerCase();Ie=Ie.filter(rt=>rt.stem.toLowerCase().includes(Be)||rt.id.toLowerCase().includes(Be))}return Ie},[i,v,S,j]),it=k.useMemo(()=>{const Ie={1:0,2:0,3:0};return i.forEach(Be=>{Ie[Be.tier]=(Ie[Be.tier]||0)+1}),Ie},[i]),Pt=k.useMemo(()=>{const Ie={};return i.forEach(Be=>{Ie[Be.type]=(Ie[Be.type]||0)+1}),Ie},[i]);return e?o.jsx(Ti,{isOpen:e,onClose:r,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:o.jsxs("div",{className:"text-gray-100",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[o.jsx(_h,{className:"w-5 h-5 text-purple-400 shrink-0"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-white font-bold text-sm",children:t.title}),o.jsx("div",{className:"text-xs mt-1",children:c?o.jsx("span",{className:"text-gray-500",children:"Loading..."}):i.length>0?o.jsxs("span",{className:"text-emerald-400",children:[i.length," questions loaded"]}):o.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),i.length>0&&!c&&o.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ie=>o.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${Yc[Ie].bg} ${Yc[Ie].border} border`,children:[o.jsx("div",{className:`text-sm font-bold ${Yc[Ie].text}`,children:it[Ie]}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ie]})]},Ie))})]}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[!Ae&&o.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",i.length,")"]}),!Ae&&o.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(Mi,{className:"w-3.5 h-3.5 inline mr-1.5"}),i.length>0?"Add More":"Create Bank"]}),o.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${m==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",K?`(${K.sections.length})`:""]})]}),m==="manage"&&o.jsx("div",{className:"space-y-3",children:c?o.jsx("div",{className:"py-12 text-center",children:o.jsx(rs,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):i.length===0?o.jsxs("div",{className:"py-12 text-center",children:[o.jsx(_h,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[o.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[o.jsx(E2,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),o.jsx("input",{value:j,onChange:Ie=>R(Ie.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${v?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ie=>o.jsxs("button",{onClick:()=>T(v===Ie?null:Ie),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${v===Ie?`${Yc[Ie].bg} ${Yc[Ie].text} ${Yc[Ie].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ie," (",it[Ie],")"]},Ie))]})]}),Object.keys(Pt).length>1&&o.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Pt).sort((Ie,Be)=>Be[1]-Ie[1]).map(([Ie,Be])=>o.jsxs("button",{onClick:()=>w(S===Ie?null:Ie),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Ie?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[JR[Ie]||Ie," (",Be,")"]},Ie))}),o.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:xt.length===0?o.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):xt.map(Ie=>{const Be=Yc[Ie.tier]||Yc[1],rt=I===Ie.id;return o.jsxs("div",{className:`rounded-xl border transition ${rt?`${Be.border} ${Be.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[o.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>L(rt?null:Ie.id),children:[o.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${Be.bg} ${Be.text}`,children:["T",Ie.tier]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[o.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ie.id}),o.jsx("span",{className:"text-[8px] text-gray-600",children:""}),o.jsx("span",{className:"text-[8px] text-gray-500",children:JR[Ie.type]||Ie.type}),o.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx($a,{className:"w-2.5 h-2.5"}),Ie.xp]})]}),o.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ie.stem})]}),o.jsx(Ld,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${rt?"rotate-90":""}`})]}),rt&&o.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ie.context&&o.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ie.context}),o.jsx("div",{className:"space-y-1",children:Ie.options.map(ft=>{const Ge=Array.isArray(Ie.correctAnswer)?Ie.correctAnswer.includes(ft.id):Ie.correctAnswer===ft.id;return o.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${Ge?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[o.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[ft.id.toUpperCase(),"."]}),o.jsx("span",{children:ft.text}),Ge&&o.jsx(Mn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},ft.id)})}),o.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ie.explanation]}),Ie.linkedFollowUp&&o.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[o.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ie.linkedFollowUp.stem]}),o.jsxs("button",{onClick:()=>ze(Ie.id),disabled:h,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[o.jsx(ca,{className:"w-3 h-3"})," Delete Question"]})]})]},Ie.id)})}),o.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[o.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",xt.length," of ",i.length]}),o.jsxs("button",{onClick:He,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(ca,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),m==="add"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),o.jsx("button",{onClick:st,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${C?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:C?o.jsxs(o.Fragment,{children:[o.jsx(Mn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),o.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",o.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[o.jsx(Cx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:a,type:"file",accept:".json,.txt",onChange:Ue,className:"hidden"})]})]}),D&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(Os,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:D})]}),N&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"w-4 h-4 text-emerald-400"}),o.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[N.length," questions parsed"]})]}),o.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ie=>o.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[o.jsx("div",{className:"text-base font-bold text-white",children:E[Ie]||0}),o.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ie]})]},Ie))}),i.length>0&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Q(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${$?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[o.jsx(Mi,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",i.length," + ",N.length,")"]}),o.jsxs("button",{onClick:()=>Q(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${$?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[o.jsx(qh,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:Ye,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(rs,{className:"w-4 h-4 animate-spin"}):o.jsx(Zd,{className:"w-4 h-4"}),h?"Saving...":`Upload ${N.length} Questions`]}),o.jsx("button",{onClick:()=>A(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(ca,{className:"w-4 h-4"})})]})]})]}),m==="reading"&&o.jsxs("div",{className:"space-y-5",children:[K?o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_o,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:K.title})]}),o.jsxs("button",{onClick:ae,disabled:h,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[o.jsx(ca,{className:"w-3 h-3"})," Remove"]})]}),K.description&&o.jsx("p",{className:"text-xs text-gray-400",children:K.description}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{children:[K.sections.length," sections"]}),K.estimatedMinutes&&o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["~",K.estimatedMinutes," min read"]})]})]}),o.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:K.sections.map((Ie,Be)=>o.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:Be+1}),o.jsx("span",{className:"truncate",children:Ie.title})]},Be))})]}):o.jsxs("div",{className:"py-6 text-center",children:[o.jsx(_o,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),o.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),o.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),o.jsx("button",{onClick:W,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?o.jsxs(o.Fragment,{children:[o.jsx(Mn,{className:"w-4 h-4"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),o.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[o.jsx(Cx,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),o.jsx("input",{ref:re,type:"file",accept:".json,.txt",onChange:he,className:"hidden"})]})]}),pe&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[o.jsx(Os,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),o.jsx("p",{className:"text-red-300/70 text-xs",children:pe})]}),J&&o.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Mn,{className:"w-4 h-4 text-emerald-400"}),o.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:J.title})]}),o.jsxs("p",{className:"text-xs text-gray-400",children:[J.sections.length," sections  ~",J.estimatedMinutes||"?"," min read"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:te,disabled:h,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[h?o.jsx(rs,{className:"w-4 h-4 animate-spin"}):o.jsx(Zd,{className:"w-4 h-4"}),h?"Saving...":"Upload Study Material"]}),o.jsx("button",{onClick:()=>ie(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:o.jsx(ca,{className:"w-4 h-4"})})]})]})]}),h&&o.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[o.jsx(rs,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},eM=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],bde={Textbook:o.jsx(_o,{className:"w-4 h-4"}),Simulation:o.jsx(L7,{className:"w-4 h-4"}),"Lab Guide":o.jsx(N2,{className:"w-4 h-4"}),"Practice Set":o.jsx(Yo,{className:"w-4 h-4"}),Article:o.jsx(sH,{className:"w-4 h-4"}),"Video Lesson":o.jsx(fH,{className:"w-4 h-4"}),Supplemental:o.jsx(B7,{className:"w-4 h-4"})},wde=({assignments:t,submissions:e,classConfigs:r,users:n,onCreateAssignment:a,onPreviewAssignment:i,availableSections:s=[]})=>{const c=mi(),{confirm:d}=al(),[h,p]=k.useState(!1),[m,y]=k.useState(!1),[v,T]=k.useState(!1),[S,w]=k.useState("All Classes"),[j,R]=k.useState("All Categories"),[I,L]=k.useState(new Set),[C,P]=k.useState(null),[N,A]=k.useState({title:"",description:"",status:Ia.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[E,V]=k.useState(new Set([Rr.AP_PHYSICS])),[D,U]=k.useState([]),[$,Q]=k.useState(""),[K,H]=k.useState(!1),J=k.useMemo(()=>n.filter(W=>W.role==="STUDENT"),[n]),ie=k.useMemo(()=>{const W=Object.values(Rr).filter(te=>te!==Rr.UNCATEGORIZED),he=(r||[]).map(te=>te.className);return Array.from(new Set(["All Classes",...W,...he]))},[r]),pe=k.useMemo(()=>{const W=Array.from(E)[0];if(!W)return s;const he=Pv(J,W);return he.length>0?he:s},[E,J,s]),me=k.useMemo(()=>t.filter(W=>{const he=S==="All Classes"||W.classType===S,te=j==="All Categories"||W.category===j;return he&&te}),[t,S,j]),X=k.useMemo(()=>{const W={};return me.forEach(he=>{const te=S==="All Classes"?`${he.classType.toUpperCase()}  ${he.unit||"Unassigned"}`:he.unit||"Unassigned";W[te]||(W[te]=[]),W[te].push(he)}),Object.keys(W).sort().reduce((he,te)=>(he[te]=W[te],he),{})},[me,S]),ne=async(W,he)=>{if(E.size===0){c.error("Select a target class.");return}T(!0);try{const te=D.length>0?{targetSections:D}:{},ae=he?{scheduledAt:new Date(he).toISOString()}:{},Ue={...N,status:W,...te,...ae};m&&N.id?await a({...Ue,classType:Array.from(E)[0]}):await Promise.all(Array.from(E).map(Ye=>a({...Ue,classType:Ye}))),p(!1),y(!1),Q(""),c.success(W===Ia.DRAFT?"Draft saved.":he?"Deployment scheduled.":"Resource deployed.")}catch(te){console.error(te)}finally{T(!1)}},re=async W=>{W.preventDefault(),await ne(Ia.ACTIVE)},Ae=async W=>{await Re.updateAssignmentStatus(W.id,Ia.ACTIVE),c.success(`"${W.title}" deployed.`)},Se=W=>{A(W),V(new Set([W.classType])),U(W.targetSections||[]),Q(W.scheduledAt?W.scheduledAt.slice(0,16):""),y(!0),p(!0)},ze=async W=>{const he=W.status===Ia.ACTIVE?Ia.ARCHIVED:Ia.ACTIVE;await Re.updateAssignmentStatus(W.id,he)},He=k.useMemo(()=>[...Array.isArray(e)?e:[]].sort((he,te)=>{const ae=new Date(he.submittedAt||0).getTime();return new Date(te.submittedAt||0).getTime()-ae}),[e]),st=W=>W.status===Ia.DRAFT?o.jsx("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-blue-500/20 text-blue-400 border border-blue-500/30",children:"Draft"}):W.scheduledAt&&new Date(W.scheduledAt)>new Date?o.jsxs("span",{className:"text-[9px] font-bold uppercase px-2 py-0.5 rounded bg-amber-500/20 text-amber-400 border border-amber-500/30 flex items-center gap-1",children:[o.jsx(YI,{className:"w-3 h-3"}),new Date(W.scheduledAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}):null;return o.jsxs("div",{className:"space-y-8 pb-12",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),o.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),o.jsxs("button",{onClick:()=>{A({title:"",description:"",status:Ia.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),U([]),Q(""),y(!1),p(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[o.jsx(Mi,{className:"w-5 h-5"})," Deploy Resource"]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[o.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("select",{value:S,onChange:W=>w(W.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:ie.map(W=>o.jsx("option",{value:W,children:W},W))}),o.jsx(Ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:j,onChange:W=>R(W.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[o.jsx("option",{value:"All Categories",children:"All Categories"}),eM.map(W=>o.jsx("option",{value:W,children:W},W))]}),o.jsx(Ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(X).map(([W,he])=>o.jsxs("div",{className:"mb-6 last:mb-0",children:[o.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[o.jsx("button",{onClick:()=>{const te=new Set(I);te.has(W)?te.delete(W):te.add(W),L(te)},className:"text-gray-400 hover:text-white transition",children:I.has(W)?o.jsx(Ai,{className:"w-4 h-4"}):o.jsx(Ld,{className:"w-4 h-4"})}),o.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:W}),o.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!I.has(W)&&o.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:he.map(te=>{const ae=st(te);return o.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${te.status===Ia.ARCHIVED?"bg-white/2 border-white/5 opacity-60":te.status===Ia.DRAFT?"bg-blue-900/10 border-blue-500/20":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[o.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${te.status===Ia.DRAFT?"bg-blue-500/20 text-blue-400":te.status===Ia.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:te.status===Ia.DRAFT?o.jsx(Xm,{className:"w-4 h-4"}):bde[te.category||"Supplemental"]}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:te.title}),ae,o.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:te.classType})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:te.description})]})]}),o.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[te.status===Ia.DRAFT&&o.jsx("button",{onClick:()=>Ae(te),className:"p-2 text-emerald-400 hover:bg-emerald-500/20 rounded-lg transition",title:"Deploy Now",children:o.jsx(uH,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>P(te),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:o.jsx(Ho,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>i==null?void 0:i(te.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:o.jsx(ile,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Se(te),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:o.jsx(cle,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ze(te),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:te.status===Ia.ACTIVE?o.jsx(Ooe,{className:"w-4 h-4"}):o.jsx(Hh,{className:"w-4 h-4"})}),o.jsx("button",{onClick:async()=>{await d({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await Re.deleteAssignment(te.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:o.jsx(ca,{className:"w-4 h-4"})})]})]},te.id)})})]},W))})]}),o.jsx("div",{className:"lg:col-span-4",children:o.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[o.jsx(Js,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),o.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[He.length===0&&o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[o.jsx(Js,{className:"w-10 h-10 text-gray-700 mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),o.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),He.map(W=>o.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:W.userName}),o.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:W.assignmentTitle})]}),o.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(W.score)," XP"]})]}),o.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[o.jsxs("span",{children:[Math.round(W.metrics.engagementTime/60),"m active"]}),o.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(W.submittedAt||"").toLocaleDateString()})]})]},W.id))]})]})})]}),o.jsx(Ti,{isOpen:h,onClose:()=>p(!1),title:m?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:o.jsxs("form",{onSubmit:re,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:N.title,onChange:W=>A({...N,title:W.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),o.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:N.unit,onChange:W=>A({...N,unit:W.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),o.jsx("select",{value:N.category,onChange:W=>A({...N,category:W.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:eM.map(W=>o.jsx("option",{value:W,children:W},W))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:ie.filter(W=>W!=="All Classes").map(W=>o.jsx("button",{type:"button",onClick:()=>{const he=new Set(E);he.has(W)?he.size>1&&he.delete(W):he.add(W),V(he),U([])},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${E.has(W)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:W},W))})]}),o.jsx(eg,{availableSections:pe,selectedSections:D,onChange:U}),o.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[o.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),o.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async W=>{var he;if((he=W.target.files)!=null&&he[0]){H(!0);try{const te=await Re.uploadHtmlResource(W.target.files[0]);A({...N,contentUrl:te}),c.success("File uploaded!")}catch(te){c.error("Upload failed: "+(te instanceof Error?te.message:"Unknown error"))}finally{H(!1)}}}}),K&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[o.jsx(rs,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!K&&N.contentUrl&&o.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[o.jsx(jx,{className:"w-4 h-4"})," Resource uploaded"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",o.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),o.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:N.description,onChange:W=>A({...N,description:W.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Schedule Deployment ",o.jsx("span",{className:"text-gray-600",children:"(optional  leave blank for immediate)"})]}),o.jsx("input",{type:"datetime-local",value:$,onChange:W=>Q(W.target.value),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"button",disabled:v,onClick:()=>ne(Ia.DRAFT),className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:[o.jsx(Xm,{className:"w-4 h-4"})," Save Draft"]}),$?o.jsx("button",{type:"button",disabled:v,onClick:()=>ne(Ia.ACTIVE,$),className:"flex-[2] bg-amber-600 hover:bg-amber-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:v?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(YI,{className:"w-4 h-4"})," Schedule Deployment"]})}):o.jsx("button",{type:"submit",disabled:v,className:"flex-[2] bg-purple-600 hover:bg-purple-500 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2 transition",children:v?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})]})}),C&&o.jsx(xde,{assignment:C,isOpen:!!C,onClose:()=>P(null)})]})},xG=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 12px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"b-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 70%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 80%, 40%)`})]}),o.jsxs("linearGradient",{id:"b-body",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+20}, 30%, 22%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+20}, 25%, 12%)`})]}),o.jsxs("linearGradient",{id:"b-armor",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 40%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t}, 35%, 16%)`})]}),o.jsxs("filter",{id:"b-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"250",rx:"50",ry:"6",fill:"rgba(0,0,0,0.35)",children:o.jsx("animate",{attributeName:"rx",values:"50;46;50",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 65 Q45 20 30 5 Q50 30 65 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("path",{d:"M140 65 Q155 20 170 5 Q150 30 135 55",fill:`hsl(${t+20}, 15%, 30%)`,stroke:`hsl(${t+20}, 10%, 40%)`,strokeWidth:"1"}),o.jsx("ellipse",{cx:"100",cy:"70",rx:"38",ry:"30",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M68 60 Q100 50 132 60",fill:`hsl(${t+20}, 25%, 18%)`}),o.jsxs("g",{filter:"url(#b-glow)",children:[o.jsx("ellipse",{cx:"82",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"118",cy:"68",rx:"8",ry:"5",fill:"url(#b-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;0.5;5;5",dur:"6s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("ellipse",{cx:"120",cy:"68",rx:"3",ry:"3",fill:`hsl(${t}, 100%, 85%)`,fillOpacity:"0.9"}),o.jsx("path",{d:"M78 85 Q100 96 122 85",stroke:`hsl(${t+20}, 15%, 35%)`,strokeWidth:"2",fill:"none"}),o.jsx("polygon",{points:"86,85 89,95 92,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("polygon",{points:"108,85 111,95 114,85",fill:"hsl(0, 0%, 85%)"}),o.jsx("rect",{x:"85",y:"96",width:"30",height:"14",rx:"6",fill:"url(#b-body)"}),o.jsx("path",{d:"M52 110 Q100 100 148 110 L142 200 Q100 210 58 200 Z",fill:"url(#b-armor)",stroke:`hsl(${t}, 30%, 22%)`,strokeWidth:"1.5"}),o.jsx("line",{x1:"75",y1:"130",x2:"125",y2:"130",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"78",y1:"155",x2:"122",y2:"155",stroke:`hsl(${t}, 50%, 40%)`,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("circle",{cx:"100",cy:"145",r:"8",fill:"none",stroke:`hsl(${t}, 60%, 50%)`,strokeWidth:"1.5",strokeOpacity:"0.6",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.6;0.2;0.6",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"145",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M52 112 L30 120 Q22 124 22 132 L22 180 Q22 188 30 188 L42 186 L52 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M148 112 L170 120 Q178 124 178 132 L178 180 Q178 188 170 188 L158 186 L148 165 Z",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M26 184 L18 196 M30 186 L24 198 M34 186 L30 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M174 184 L182 196 M170 186 L176 198 M166 186 L170 196",stroke:"hsl(0, 0%, 75%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M65 198 L60 240 Q58 248 68 248 L82 248 Q86 248 84 242 L78 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M122 198 L118 240 Q116 248 126 248 L140 248 Q144 248 142 242 L136 198",fill:"url(#b-body)",stroke:`hsl(${t+20}, 20%, 28%)`,strokeWidth:"1"}),[0,1,2,3].map(e=>o.jsxs("circle",{cx:70+e*22,cy:110+e*15,r:"1.5",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:`${110+e*15};${90+e*15};${110+e*15}`,dur:`${2.5+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2.5+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Sde=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 16px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"p-eye",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t}, 100%, 80%)`}),o.jsx("stop",{offset:"80%",stopColor:`hsl(${t}, 90%, 50%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"p-cloak",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+240}, 30%, 18%)`}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${t+240}, 25%, 10%)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("filter",{id:"p-glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsx("filter",{id:"p-wisp",x:"-30%",y:"-30%",width:"160%",height:"160%",children:o.jsx("feGaussianBlur",{stdDeviation:"3"})})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-4;0,0",dur:"4s",repeatCount:"indefinite"}),o.jsx("g",{filter:"url(#p-wisp)",children:[0,1,2,3,4].map(e=>o.jsxs("ellipse",{cx:72+e*16,cy:230+e*4,rx:4+e,ry:12+e*2,fill:`hsl(${t+240}, 40%, 25%)`,fillOpacity:.3-e*.05,children:[o.jsx("animate",{attributeName:"cy",values:`${230+e*4};${240+e*4};${230+e*4}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:`${.3-e*.05};${.1};${.3-e*.05}`,dur:`${3+e*.3}s`,repeatCount:"indefinite"})]},e))}),o.jsx("path",{d:"M55 75 Q100 65 145 75 L155 180 Q150 230 130 250 Q115 240 100 245 Q85 240 70 250 Q50 230 45 180 Z",fill:"url(#p-cloak)",stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1"}),o.jsx("path",{d:"M70 100 Q100 95 130 100 L128 180 Q100 190 72 180 Z",fill:`hsl(${t+240}, 20%, 8%)`,fillOpacity:"0.5"}),o.jsx("path",{d:"M55 75 Q50 40 65 25 Q100 10 135 25 Q150 40 145 75 Q100 65 55 75 Z",fill:`hsl(${t+240}, 28%, 16%)`,stroke:`hsl(${t+240}, 20%, 25%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M65 65 Q100 55 135 65 Q100 60 65 65 Z",fill:`hsl(${t+240}, 25%, 10%)`}),o.jsxs("g",{filter:"url(#p-glow)",children:[o.jsxs("ellipse",{cx:"85",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"1;0.7;1",dur:"3s",repeatCount:"indefinite"})]}),o.jsxs("ellipse",{cx:"115",cy:"55",rx:"7",ry:"4",fill:"url(#p-eye)",children:[o.jsx("animate",{attributeName:"ry",values:"4;4;0.5;4;4;4",dur:"7s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;1;0.7",dur:"3s",repeatCount:"indefinite"})]})]}),o.jsx("path",{d:"M55 100 L30 130 Q22 140 28 148 L35 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M145 100 L170 130 Q178 140 172 148 L165 155",fill:"none",stroke:`hsl(${t+240}, 20%, 22%)`,strokeWidth:"5",strokeLinecap:"round"}),o.jsx("path",{d:"M32 152 L22 165 M35 155 L28 170 M38 155 L35 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M168 152 L178 165 M165 155 L172 170 M162 155 L165 168",stroke:`hsl(${t+240}, 15%, 35%)`,strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("circle",{cx:"100",cy:"120",r:"10",fill:"none",stroke:`hsl(${t}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:"0.5",strokeDasharray:"4 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"3s",repeatCount:"indefinite"})}),o.jsxs("circle",{cx:"100",cy:"120",r:"3",fill:`hsl(${t}, 80%, 60%)`,fillOpacity:"0.6",children:[o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.2;0.6",dur:"2s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"})]}),[0,1,2,3,4,5].map(e=>{const r=e*60*Math.PI/180,n=100+Math.cos(r)*55,a=130+Math.sin(r)*60;return o.jsxs("circle",{cx:n,cy:a,r:"1.5",fill:`hsl(${t}, 80%, 65%)`,fillOpacity:"0.3",children:[o.jsx("animate",{attributeName:"cy",values:`${a};${a-15};${a}`,dur:`${2+e*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0;0.3",dur:`${2+e*.4}s`,repeatCount:"indefinite"})]},e)})]})]}),_de=({hue:t})=>o.jsxs("svg",{viewBox:"0 0 200 260",className:"w-full h-full",style:{filter:"drop-shadow(0 2px 14px rgba(0,0,0,0.5))"},children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:"s-eye",cx:"50%",cy:"40%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+60}, 100%, 65%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+60}, 80%, 35%)`})]}),o.jsxs("linearGradient",{id:"s-scale",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 40%, 25%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 35%, 14%)`})]}),o.jsxs("linearGradient",{id:"s-belly",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${t+140}, 25%, 30%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${t+140}, 20%, 18%)`})]}),o.jsxs("filter",{id:"s-glow",x:"-40%",y:"-40%",width:"180%",height:"180%",children:[o.jsx("feGaussianBlur",{stdDeviation:"4",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]})]}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"3.5s",repeatCount:"indefinite"}),o.jsx("ellipse",{cx:"100",cy:"252",rx:"55",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"55;50;55",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("path",{d:"M55 100 Q20 60 10 30 Q25 55 40 70 Q15 50 5 25 Q30 60 50 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.7;0.5;0.7",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M145 100 Q180 60 190 30 Q175 55 160 70 Q185 50 195 25 Q170 60 150 85 Z",fill:`hsl(${t+140}, 30%, 18%)`,stroke:`hsl(${t+140}, 25%, 30%)`,strokeWidth:"0.8",fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"opacity",values:"0.5;0.7;0.5",dur:"3s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"50",y1:"90",x2:"18",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"50",y1:"90",x2:"12",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"182",y2:"40",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"150",y1:"90",x2:"188",y2:"50",stroke:`hsl(${t+140}, 20%, 25%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:"M80 210 Q60 230 55 245 Q52 255 60 252 Q70 248 80 235 Q85 225 85 215",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1"}),o.jsx("path",{d:"M72 45 Q60 15 55 5 Q65 25 75 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M128 45 Q140 15 145 5 Q135 25 125 40",fill:`hsl(${t+140}, 20%, 28%)`,stroke:`hsl(${t+140}, 15%, 38%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M68 40 Q100 30 132 40 L135 75 Q100 85 65 75 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.5"}),o.jsx("path",{d:"M85 70 Q100 78 115 70",fill:`hsl(${t+140}, 35%, 22%)`}),o.jsxs("g",{filter:"url(#s-glow)",children:[o.jsx("ellipse",{cx:"84",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"8",ry:"5",fill:"url(#s-eye)",children:o.jsx("animate",{attributeName:"ry",values:"5;5;2;5;5",dur:"5s",repeatCount:"indefinite"})})]}),o.jsx("ellipse",{cx:"84",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("ellipse",{cx:"116",cy:"55",rx:"1.5",ry:"4",fill:"#111"}),o.jsx("circle",{cx:"92",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("circle",{cx:"108",cy:"68",r:"2",fill:`hsl(${t+140}, 25%, 15%)`}),o.jsx("polygon",{points:"90,78 92,90 94,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("polygon",{points:"106,78 108,90 110,78",fill:"hsl(0, 0%, 88%)"}),o.jsx("path",{d:"M75 78 Q100 90 125 78 L120 105 Q100 112 80 105 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("line",{x1:"85",y1:"85",x2:"115",y2:"85",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.6"}),o.jsx("line",{x1:"87",y1:"92",x2:"113",y2:"92",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5"}),o.jsx("line",{x1:"88",y1:"98",x2:"112",y2:"98",stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.4"}),o.jsx("path",{d:"M60 105 Q100 95 140 105 L135 200 Q100 215 65 200 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"1.2"}),o.jsx("path",{d:"M80 110 Q100 105 120 110 L118 195 Q100 205 82 195 Z",fill:"url(#s-belly)",fillOpacity:"0.5"}),[125,145,165,185].map(e=>o.jsx("line",{x1:76,y1:e,x2:124,y2:e,stroke:`hsl(${t+140}, 25%, 32%)`,strokeWidth:"0.5",strokeOpacity:"0.4"},e)),o.jsx("polygon",{points:"100,125 94,133 100,141 106,133",fill:`hsl(${t+60}, 70%, 50%)`,stroke:`hsl(${t+60}, 60%, 60%)`,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M60 108 L38 118 Q28 124 30 135 L34 165 Q36 172 42 170 L52 160 L58 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M140 108 L162 118 Q172 124 170 135 L166 165 Q164 172 158 170 L148 160 L142 148 Z",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M38 166 L30 180 M42 168 L36 182 M46 168 L42 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M162 166 L170 180 M158 168 L164 182 M154 168 L158 180",stroke:"hsl(0, 0%, 80%)",strokeWidth:"1.5",strokeLinecap:"round"}),o.jsx("path",{d:"M72 198 L68 238 Q66 248 76 248 L88 248 Q92 248 90 242 L86 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),o.jsx("path",{d:"M114 198 L110 238 Q108 248 118 248 L130 248 Q134 248 132 242 L128 198",fill:"url(#s-scale)",stroke:`hsl(${t+140}, 30%, 28%)`,strokeWidth:"0.8"}),[0,1,2].map(e=>o.jsxs("circle",{cx:85+e*15,cy:60,r:"1.2",fill:`hsl(${t+60}, 90%, 60%)`,fillOpacity:"0.4",children:[o.jsx("animate",{attributeName:"cy",values:"60;45;60",dur:`${2+e*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+e*.5}s`,repeatCount:"indefinite"})]},e))]})]}),Tde={BRUTE:xG,PHANTOM:Sde,SERPENT:_de},bG=({bossType:t,hue:e,size:r})=>{const n=Tde[t]||xG;return o.jsx("div",{style:r?{height:r,width:r*.77}:void 0,className:"flex items-center justify-center",children:o.jsx(n,{hue:e})})},Ade=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Nde=({user:t,onClose:e,onDeleteItem:r,onUnequipItem:n,onGrantFlux:a})=>{var p,m;const[i,s]=k.useState(null),c=k.useMemo(()=>{var v;if(!t)return[];const y=Object.keys(((v=t.gamification)==null?void 0:v.classProfiles)||{});return y.length>0?y:["_legacy"]},[t]),d=i&&c.includes(i)?i:c[0]||"_legacy",h=k.useMemo(()=>{var v,T;if(!t)return{inventory:[],equipped:{}};if(d==="_legacy")return{inventory:((v=t.gamification)==null?void 0:v.inventory)||[],equipped:((T=t.gamification)==null?void 0:T.equipped)||{}};const y=Jd(t,d);return{inventory:y.inventory,equipped:y.equipped}},[t,d]);return t?o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:o.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[o.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((p=t.gamification)==null?void 0:p.level)||1]})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-cyan-400",children:((m=t.gamification)==null?void 0:m.currency)||0})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>a(t,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:o.jsx(Mi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>a(t,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:o.jsx(Da,{className:"w-4 h-4"})})]})]})]}),c.length>1&&o.jsx("div",{className:"flex gap-1.5 bg-black/30 p-1.5 rounded-xl border border-white/5",children:c.map(y=>o.jsx("button",{onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wide transition ${d===y?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:y==="_legacy"?"Global":y},y))}),o.jsxs("div",{className:"border-b border-white/5 pb-6",children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:["Active Loadout ",d!=="_legacy"&&o.jsxs("span",{className:"text-purple-400 ml-1",children:["(",d,")"]})]}),o.jsx("div",{className:"flex gap-2 flex-wrap",children:Ade.map(y=>{var T;const v=(T=h.equipped)==null?void 0:T[y];return o.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${v?la(v.rarity).border+" "+la(v.rarity).bg:"border-white/10 bg-black/20"}`,children:v?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:v.name}),o.jsx("button",{onClick:()=>n(t,y,d==="_legacy"?void 0:d),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:o.jsx(Da,{className:"w-3 h-3"})})]}):o.jsx("span",{className:"text-[8px] text-gray-600",children:y})},y)})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),o.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[h.inventory.map((y,v)=>o.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${la(y.rarity).border}`,children:[o.jsx("div",{className:`text-[8px] font-bold ${la(y.rarity).text} text-center truncate w-full`,children:y.name}),o.jsx("div",{className:"text-[8px] text-gray-500",children:y.slot}),o.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:o.jsx("button",{onClick:()=>r(t,y,d==="_legacy"?void 0:d),className:"p-2 text-red-400 hover:text-red-200",children:o.jsx(ca,{className:"w-4 h-4"})})})]},v)),h.inventory.length===0&&o.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},Ede=[10,50,100,-10,-50,-100],jde=({user:t,onClose:e,onAdjust:r})=>{var s;const[n,a]=k.useState(50);if(!t)return null;const i=()=>{r(t,n),a(50)};return o.jsx(Ti,{isOpen:!!t,onClose:e,title:"Manual XP Adjustment",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[o.jsx("img",{src:t.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:t.name}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.email}),o.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=t.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ede.map(c=>o.jsx("button",{onClick:()=>a(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),o.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>a(parseInt(c.target.value)||0)})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:i,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},kde=({deployments:t,onResolveQuest:e,onRollForSalvation:r})=>o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),t.length===0&&o.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),t.map((n,a)=>{const i=n.quest.type==="CUSTOM";return o.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),o.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[o.jsx(Yo,{className:"w-3 h-3"}),n.quest.title]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[o.jsxs("div",{className:"text-center md:text-right",children:[o.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),o.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[o.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:i?"Manual Review":"Auto-Check"}),o.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:i?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[!i&&n.roll===0&&o.jsx("button",{onClick:()=>r(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:o.jsx(Uoe,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),o.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:o.jsx(lu,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:o.jsx(Da,{className:"w-5 h-5"})})]})]})]})]},a)})]}),b3={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1,targetClass:"",targetSections:[]},Cde=({isOpen:t,onClose:e,form:r,setForm:n,onSubmit:a,onSaveDraft:i,isSubmitting:s,availableSections:c=[]})=>{const d=r.type==="SKILL_CHECK";return o.jsx(Ti,{isOpen:t,onClose:e,title:"Issue New Mission Objective",children:o.jsxs("form",{onSubmit:a,className:"space-y-4 text-gray-200 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),o.jsx("input",{value:r.title,onChange:h=>n({...r,title:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),o.jsx("textarea",{value:r.description,onChange:h=>n({...r,description:h.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Category"}),o.jsxs("select",{value:r.type,onChange:h=>n({...r,type:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement"}),o.jsx("option",{value:"REVIEW_QUESTIONS",children:"Review Questions"}),o.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material"}),o.jsx("option",{value:"SKILL_CHECK",children:"Skill Check"}),o.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:r.targetClass,onChange:h=>n({...r,targetClass:h.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[o.jsx("option",{value:"",children:"All Classes"}),Object.values(Rr).filter(h=>h!=="Uncategorized").map(h=>o.jsx("option",{value:h,children:h},h))]})]})]}),o.jsx(eg,{availableSections:c,selectedSections:r.targetSections,onChange:h=>n({...r,targetSections:h})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Starts At ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(optional)"})]}),o.jsx("input",{type:"datetime-local",value:r.startsAt,onChange:h=>n({...r,startsAt:h.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:["Duration ",o.jsx("span",{className:"text-gray-600 normal-case",children:"(hours, 0 = no limit)"})]}),o.jsx("input",{type:"number",value:r.durationHours||"",onChange:h=>n({...r,durationHours:parseInt(h.target.value)||0}),placeholder:"No time limit",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[o.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Rewards"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),o.jsx("input",{type:"number",value:r.xpReward,onChange:h=>n({...r,xpReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),o.jsx("input",{type:"number",value:r.fluxReward,onChange:h=>n({...r,fluxReward:parseInt(h.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),o.jsxs("select",{value:r.lootRarity,onChange:h=>n({...r,lootRarity:h.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"COMMON",children:"Common"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:r.isGroup,onChange:h=>n({...r,isGroup:h.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"}),"Group Mission"]})}),d&&o.jsxs("div",{className:"border border-orange-500/30 bg-orange-900/10 rounded-xl p-4 space-y-3",children:[o.jsx("div",{className:"text-[10px] font-bold text-orange-400 uppercase",children:"Skill Check Parameters"}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Tech"}),o.jsx("input",{type:"number",value:r.techReq||"",onChange:h=>n({...r,techReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Focus"}),o.jsx("input",{type:"number",value:r.focusReq||"",onChange:h=>n({...r,focusReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Analysis"}),o.jsx("input",{type:"number",value:r.analysisReq||"",onChange:h=>n({...r,analysisReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold text-center mb-1",children:"Charisma"}),o.jsx("input",{type:"number",value:r.charismaReq||"",onChange:h=>n({...r,charismaReq:parseInt(h.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Salvation Die (D-X)"}),o.jsx("input",{type:"number",value:r.dieSides,onChange:h=>n({...r,dieSides:parseInt(h.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold mb-1",children:"Failure Consequence"}),o.jsx("input",{type:"text",value:r.consequence,onChange:h=>n({...r,consequence:h.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white text-sm"})]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[i&&o.jsx("button",{type:"button",disabled:s,onClick:i,className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition disabled:opacity-50",children:"Save Draft"}),o.jsx("button",{type:"submit",disabled:s,className:"flex-[2] bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:s?"Transmitting...":"Broadcast Mission"})]})]})})},Ode={Operatives:"OPERATIVES","XP Protocols":"PROTOCOLS",Missions:"MISSIONS","Mission Control":"MISSION_CONTROL","Boss Ops":"BOSS_OPS",Tutoring:"TUTORING"},Ide=({users:t,initialTab:e})=>{const r=mi(),{confirm:n}=al(),a=e&&Ode[e]||"OPERATIVES",[i,s]=k.useState(""),[c,d]=k.useState("All Classes"),[h,p]=k.useState("All Sections"),[m,y]=k.useState("xp"),[v,T]=k.useState("desc"),S=q=>{m===q?T(xe=>xe==="asc"?"desc":"asc"):(y(q),T("asc"))},w=({label:q,col:xe,className:Te})=>o.jsx("th",{className:`cursor-pointer select-none group pb-4 ${Te??""}`,onClick:()=>S(xe),children:o.jsxs("div",{className:`flex items-center gap-1 ${Te!=null&&Te.includes("text-center")?"justify-center":Te!=null&&Te.includes("text-right")?"justify-end":"justify-start"}`,children:[o.jsx("span",{children:q}),o.jsxs("span",{className:"flex flex-col gap-px",children:[o.jsx(T2,{className:`w-2.5 h-2.5 -mb-0.5 ${m===xe&&v==="asc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`}),o.jsx(Ai,{className:`w-2.5 h-2.5 -mt-0.5 ${m===xe&&v==="desc"?"text-purple-400":"text-gray-600 group-hover:text-gray-400"} transition`})]})]})}),[j,R]=k.useState([]),[I,L]=k.useState([]),[C,P]=k.useState(null),[N,A]=k.useState(null),[E,V]=k.useState(!1),[D,U]=k.useState(!1),[$,Q]=k.useState(b3),[K,H]=k.useState(!1),[J,ie]=k.useState([]),[pe,me]=k.useState(null),[X,ne]=k.useState(""),[re,Ae]=k.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Rr.AP_PHYSICS,targetSections:[]}),[Se,ze]=k.useState([]),[He,st]=k.useState(!1),[W,he]=k.useState(null),[te,ae]=k.useState({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:"",questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),[Ue,Ye]=k.useState(!1),xt=k.useRef(null),[it,Pt]=k.useState(null),[Ie,Be]=k.useState([]),[rt,ft]=k.useState("bosses"),[Ge,ue]=k.useState(!1),[Xe,wt]=k.useState(null),[yt,mt]=k.useState({name:"",classType:"GLOBAL",description:"",questions:[]}),Vt=k.useRef(null),[ur,qr]=k.useState(null),[be,nt]=k.useState([]),[Et,Dt]=k.useState(null),[Bt,Ze]=k.useState([]),[ar,br]=k.useState(!1),[Pr,un]=k.useState("pending"),[vr,Ht]=k.useState([]);k.useEffect(()=>{const q=Re.subscribeToXPEvents(R),xe=Re.subscribeToQuests(L),Te=Re.subscribeToAllBossQuizzes(ze),Ne=Re.subscribeToAllTutoringSessions(Ht),ht=Re.subscribeToBossQuestionBanks(Be);return()=>{q(),xe(),Te(),Ne(),ht()}},[]),k.useEffect(()=>{const q=[];t.forEach(xe=>{var Te,Ne;(Ne=(Te=xe.gamification)==null?void 0:Te.activeQuests)==null||Ne.forEach(ht=>{const Ot=I.find(Nt=>Nt.id===ht.questId);Ot&&(ht.status==="DEPLOYED"||ht.status==="ACCEPTED")&&q.push({user:xe,quest:Ot,status:ht.status,roll:ht.deploymentRoll,acceptedAt:ht.acceptedAt})})}),ie(q)},[t,I,a]);const $t=k.useMemo(()=>t.filter(q=>q.role==="STUDENT"),[t]),_t=k.useMemo(()=>{const q=new Set;return $t.forEach(xe=>{xe.classSections?Object.values(xe.classSections).forEach(Te=>{Te&&q.add(Te)}):xe.section&&q.add(xe.section)}),Array.from(q).sort()},[$t]),Dr=k.useMemo(()=>{if(re.type!=="CLASS_SPECIFIC"||!re.targetClass)return _t;const q=Pv($t,re.targetClass);return q.length>0?q:_t},[re.type,re.targetClass,$t,_t]),rn=k.useMemo(()=>{if(!$.targetClass)return _t;const q=Pv($t,$.targetClass);return q.length>0?q:_t},[$.targetClass,$t,_t]),Hr=k.useMemo(()=>{if(te.classType==="GLOBAL"||!te.classType)return _t;const q=Pv($t,te.classType);return q.length>0?q:_t},[te.classType,$t,_t]),Lr=q=>{var Te,Ne;const xe=(Te=q.gamification)==null?void 0:Te.classProfiles;return xe&&Object.keys(xe).length>0?Object.values(xe).reduce((ht,Ot)=>ht+Qh(Ot.equipped),0):Qh((Ne=q.gamification)==null?void 0:Ne.equipped)},dn=k.useMemo(()=>$t.filter(q=>{var Ot;const xe=q.name.toLowerCase().includes(i.toLowerCase())||q.email.toLowerCase().includes(i.toLowerCase()),Te=c==="All Classes"||q.classType===c||((Ot=q.enrolledClasses)==null?void 0:Ot.includes(c)),Ne=q.classSections?Object.values(q.classSections):[],ht=h==="All Sections"||q.section===h||Ne.includes(h);return xe&&Te&&ht}).sort((q,xe)=>{var Te,Ne,ht,Ot,Nt,Yt,wr,Zr,oe,ve;switch(m){case"name":return v==="asc"?q.name.localeCompare(xe.name):xe.name.localeCompare(q.name);case"class":return v==="asc"?(q.classType||"").localeCompare(xe.classType||""):(xe.classType||"").localeCompare(q.classType||"");case"level":{const $e=((Te=q.gamification)==null?void 0:Te.level)||1,Me=((Ne=xe.gamification)==null?void 0:Ne.level)||1;return v==="asc"?$e-Me:Me-$e}case"flux":{const $e=((ht=q.gamification)==null?void 0:ht.currency)||0,Me=((Ot=xe.gamification)==null?void 0:Ot.currency)||0;return v==="asc"?$e-Me:Me-$e}case"gear":{const $e=Lr(q),Me=Lr(xe);return v==="asc"?$e-Me:Me-$e}case"xp":default:{const $e=c!=="All Classes"?((Yt=(Nt=q.gamification)==null?void 0:Nt.classXp)==null?void 0:Yt[c])||0:((wr=q.gamification)==null?void 0:wr.xp)||0,Me=c!=="All Classes"?((oe=(Zr=xe.gamification)==null?void 0:Zr.classXp)==null?void 0:oe[c])||0:((ve=xe.gamification)==null?void 0:ve.xp)||0;return v==="asc"?$e-Me:Me-$e}}}),[$t,i,c,h,m,v]),or=async(q,xe)=>{try{await Re.adjustUserXP(q.id,xe,q.classType||Rr.UNCATEGORIZED),r.success(`${xe>0?"+":""}${xe} XP applied to ${q.name}.`)}catch{r.error("Failed to adjust XP.")}P(null)},ma=async q=>{q.preventDefault();const xe={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!0,type:re.type};re.type==="CLASS_SPECIFIC"&&(xe.targetClass=re.targetClass),re.targetSections.length>0&&(xe.targetSections=re.targetSections),await Re.saveXPEvent(xe),V(!1),Ae({title:"",multiplier:2,type:"GLOBAL",targetClass:Rr.AP_PHYSICS,targetSections:[]})},hn=async q=>{q.preventDefault(),H(!0);try{const xe={};$.techReq>0&&(xe.tech=$.techReq),$.focusReq>0&&(xe.focus=$.focusReq),$.analysisReq>0&&(xe.analysis=$.analysisReq),$.charismaReq>0&&(xe.charisma=$.charismaReq);const Te=new Date;Te.setHours(Te.getHours()+($.durationHours||0));const Ne={id:Math.random().toString(36).substring(2,9),title:$.title,description:$.description,xpReward:$.xpReward,fluxReward:$.fluxReward,isActive:!0,type:$.type,statRequirements:xe,startsAt:$.startsAt?new Date($.startsAt).toISOString():null,expiresAt:$.durationHours>0?Te.toISOString():null,itemRewardRarity:$.lootRarity||null,rollDieSides:$.dieSides||20,consequenceText:$.consequence||null,isGroupQuest:$.isGroup,targetClass:$.targetClass||void 0,targetSections:$.targetSections.length>0?$.targetSections:void 0};await Re.saveQuest(Ne),r.success(`Mission "${Ne.title}" deployed.`),Q(b3),U(!1)}catch(xe){console.error("Failed to issue mission:",xe),r.error("Failed to issue mission.")}finally{H(!1)}},On=async q=>{await Re.saveXPEvent({...q,isActive:!q.isActive})},ti=async q=>{const xe={...q,isActive:!q.isActive};xe.isActive&&(xe.expiresAt=null),await Re.saveQuest(xe)},Tr=async(q,xe,Te)=>{var Ot,Nt;if(!await n({message:`Confiscate ${xe.name} from ${q.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const ht=(Te?Jd(q,Te):{inventory:((Ot=q.gamification)==null?void 0:Ot.inventory)||[]}).inventory.filter(Yt=>Yt.id!==xe.id);await Re.adminUpdateInventory(q.id,ht,((Nt=q.gamification)==null?void 0:Nt.currency)||0,Te),A(Yt=>{var wr,Zr;return Yt?Te&&((Zr=(wr=Yt.gamification)==null?void 0:wr.classProfiles)!=null&&Zr[Te])?{...Yt,gamification:{...Yt.gamification,classProfiles:{...Yt.gamification.classProfiles,[Te]:{...Yt.gamification.classProfiles[Te],inventory:ht}}}}:{...Yt,gamification:{...Yt.gamification,inventory:ht}}:null})},fn=async(q,xe,Te)=>{var Ot;if(!await n({message:`Force unequip ${xe} from ${q.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const ht={...(Te?Jd(q,Te):{equipped:{...(Ot=q.gamification)==null?void 0:Ot.equipped}}).equipped};delete ht[xe],await Re.adminUpdateEquipped(q.id,ht,Te),A(Nt=>{var Yt,wr;return Nt?Te&&((wr=(Yt=Nt.gamification)==null?void 0:Yt.classProfiles)!=null&&wr[Te])?{...Nt,gamification:{...Nt.gamification,classProfiles:{...Nt.gamification.classProfiles,[Te]:{...Nt.gamification.classProfiles[Te],equipped:ht}}}}:{...Nt,gamification:{...Nt.gamification,equipped:ht}}:null})},ri=async(q,xe)=>{var Ne,ht;const Te=Math.max(0,(((Ne=q.gamification)==null?void 0:Ne.currency)||0)+xe);await Re.adminUpdateInventory(q.id,((ht=q.gamification)==null?void 0:ht.inventory)||[],Te),A(Ot=>Ot?{...Ot,gamification:{...Ot.gamification,currency:Te}}:null)},Wn=async(q,xe,Te,Ne)=>{try{await Re.resolveQuest(q,xe,Te,Ne),r.success(Te?`Mission "${xe.title}" approved.`:`Mission "${xe.title}" rejected.`)}catch{r.error("Failed to resolve mission.")}},Yr=async q=>{const xe=q.quest.rollDieSides||20,Te=Math.floor(Math.random()*xe)+1;r.info(`Rolled a ${Te} on a D${xe}. ${Te===xe?"CRITICAL SUCCESS!":"Failure confirmed."}`),await Wn(q.user.id,q.quest,Te===xe,q.user.classType)},pn=async q=>{try{await Re.updateCodename(q,X.trim().slice(0,24)),r.success("Code name updated.")}catch{r.error("Failed to update code name.")}me(null)},Tn=async(q,xe)=>{try{await Re.toggleCodenameLock(q,xe),r.success(xe?"Codename locked.":"Codename unlocked.")}catch{r.error("Failed to update lock.")}},ni=q=>{var xe,Te,Ne,ht,Ot;if(q)he(q),ae({bossName:q.bossName,description:q.description,maxHp:q.maxHp,classType:q.classType||"GLOBAL",damagePerCorrect:q.damagePerCorrect||50,rewardXp:((xe=q.rewards)==null?void 0:xe.xp)||500,rewardFlux:((Te=q.rewards)==null?void 0:Te.flux)||100,rewardItemRarity:((Ne=q.rewards)==null?void 0:Ne.itemRarity)||"",deadline:q.deadline?q.deadline.slice(0,16):"",questions:q.questions.map(Nt=>({...Nt,damageBonus:Nt.damageBonus||0})),targetSections:q.targetSections||[],bossType:((ht=q.bossAppearance)==null?void 0:ht.bossType)||"BRUTE",bossHue:((Ot=q.bossAppearance)==null?void 0:Ot.hue)??0}),nt(q.modifiers||[]);else{he(null);const Nt=new Date;Nt.setDate(Nt.getDate()+7),ae({bossName:"",description:"",maxHp:1e3,classType:"GLOBAL",damagePerCorrect:50,rewardXp:500,rewardFlux:100,rewardItemRarity:"",deadline:Nt.toISOString().slice(0,16),questions:[],targetSections:[],bossType:"BRUTE",bossHue:0}),nt([])}st(!0)},Fa=()=>{ae(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]}))},Ni=(q,xe,Te)=>{ae(Ne=>{const ht=[...Ne.questions];return ht[q]={...ht[q],[xe]:Te},{...Ne,questions:ht}})},ls=(q,xe,Te)=>{ae(Ne=>{const ht=[...Ne.questions],Ot=[...ht[q].options];return Ot[xe]=Te,ht[q]={...ht[q],options:Ot},{...Ne,questions:ht}})},gi=q=>{ae(xe=>({...xe,questions:xe.questions.filter((Te,Ne)=>Ne!==q)}))},Tt=async q=>{if(q.preventDefault(),te.questions.length===0){r.error("Add at least one question.");return}try{const xe=[...new Set(te.questions.map(Ne=>Ne.bankId).filter(Boolean))],Te={id:(W==null?void 0:W.id)||Math.random().toString(36).substring(2,12),bossName:te.bossName,description:te.description,maxHp:te.maxHp,currentHp:(W==null?void 0:W.currentHp)??te.maxHp,classType:te.classType,isActive:(W==null?void 0:W.isActive)??!0,deadline:new Date(te.deadline).toISOString(),damagePerCorrect:te.damagePerCorrect,questions:te.questions.map(Ne=>({id:Ne.id,stem:Ne.stem,options:Ne.options.filter(ht=>ht.trim()),correctAnswer:Ne.correctAnswer,difficulty:Ne.difficulty,...Ne.damageBonus>0?{damageBonus:Ne.damageBonus}:{},...Ne.bankId?{bankId:Ne.bankId}:{}})),rewards:{xp:te.rewardXp,flux:te.rewardFlux,...te.rewardItemRarity?{itemRarity:te.rewardItemRarity}:{}},...te.targetSections.length>0?{targetSections:te.targetSections}:{},bossAppearance:{bossType:te.bossType,hue:te.bossHue},...be.length>0?{modifiers:be}:{},...xe.length>0?{questionBankIds:xe}:{}};await Re.saveBossQuiz(Te),r.success(W?"Quiz boss updated.":"Quiz boss deployed!"),st(!1)}catch{r.error("Failed to save quiz boss.")}},fe=async q=>{await Re.toggleBossQuizActive(q.id,!q.isActive)},Je=async q=>{await n({message:`Delete quiz boss "${q.bossName}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuiz(q.id),r.success("Quiz boss deleted."))},ct=q=>{q?(wt(q),mt({name:q.name,classType:q.classType,description:q.description||"",questions:q.questions.map(xe=>({...xe,damageBonus:xe.damageBonus||0}))})):(wt(null),mt({name:"",classType:"GLOBAL",description:"",questions:[]})),qr(null),ue(!0)},Xt=async q=>{if(q.preventDefault(),yt.questions.length===0){r.error("Add at least one question.");return}try{const xe=new Date().toISOString(),Te={id:(Xe==null?void 0:Xe.id)||Math.random().toString(36).substring(2,12),name:yt.name,classType:yt.classType,description:yt.description,questions:yt.questions.map(Ne=>({id:Ne.id,stem:Ne.stem,options:Ne.options.filter(ht=>ht.trim()),correctAnswer:Ne.correctAnswer,difficulty:Ne.difficulty,...Ne.damageBonus>0?{damageBonus:Ne.damageBonus}:{}})),createdAt:(Xe==null?void 0:Xe.createdAt)||xe,updatedAt:xe};await Re.saveBossQuestionBank(Te),r.success(Xe?"Question bank updated.":"Question bank created!"),ue(!1)}catch{r.error("Failed to save question bank.")}},dr=async q=>{await n({message:`Delete question bank "${q.name}"? This cannot be undone.`,confirmLabel:"Delete"})&&(await Re.deleteBossQuestionBank(q.id),r.success("Question bank deleted."))},nn=async(q,xe)=>{var ht;const Te=(ht=q.target.files)==null?void 0:ht[0];if(!Te)return;const Ne=xe==="bank"?qr:Pt;Ne(null);try{let Nt=(await Te.text()).replace(/```json\s*|```\s*/g,"").trim();Nt=Nt.replace(/[\x00-\x1F\x7F]/g,ve=>ve===`
`||ve==="\r"||ve==="	"?" ":"");let Yt;try{Yt=JSON.parse(Nt)}catch{const ve=Nt.match(/\[[\s\S]*\]/);if(ve)try{Yt=JSON.parse(ve[0])}catch{let $e=null;for(let Me=ve[0].length-1;Me>0;Me--)if(ve[0][Me]==="}")try{$e=JSON.parse(ve[0].slice(0,Me+1)+"]");break}catch{}if($e)Yt=$e;else throw new Error("Could not parse JSON.")}else throw new Error("No JSON array found.")}if(!Array.isArray(Yt)||Yt.length===0)throw new Error("Must be a non-empty JSON array.");const wr=Yt.filter(ve=>ve.stem&&ve.options&&ve.correctAnswer!==void 0);if(wr.length===0)throw new Error("No valid questions found.");const Zr=wr.map(ve=>({id:ve.id||Math.random().toString(36).substring(2,10),stem:ve.stem,options:ve.options.slice(0,4),correctAnswer:typeof ve.correctAnswer=="number"?ve.correctAnswer:0,difficulty:["EASY","MEDIUM","HARD"].includes(ve.difficulty)?ve.difficulty:"MEDIUM",damageBonus:typeof ve.damageBonus=="number"?ve.damageBonus:0})),oe=Yt.length-wr.length;xe==="bank"?mt(ve=>({...ve,questions:[...ve.questions,...Zr]})):ae(ve=>({...ve,questions:[...ve.questions,...Zr]})),r.success(`Imported ${Zr.length} questions${oe>0?` (${oe} skipped)`:""}`)}catch(Ot){Ne(Ot instanceof Error?Ot.message:"Import failed."),r.error("Failed to import questions.")}xe==="bank"&&Vt.current&&(Vt.current.value=""),xe==="boss"&&xt.current&&(xt.current.value="")},Gr=q=>{const xe=q.questions.map(Te=>({...Te,damageBonus:Te.damageBonus||0,bankId:q.id,id:Math.random().toString(36).substring(2,10)}));ae(Te=>({...Te,questions:[...Te.questions,...xe]})),r.success(`Imported ${xe.length} questions from "${q.name}"`)},mn=q=>{nt(xe=>{if(xe.find(ht=>ht.type===q))return xe.filter(ht=>ht.type!==q);const Ne=zT[q];return[...xe,{type:q,...Ne.hasValue?{value:Ne.defaultValue}:{}}]})},kr=(q,xe)=>{nt(Te=>Te.map(Ne=>Ne.type===q?{...Ne,value:xe}:Ne))},Rs=async q=>{Dt(q),br(!0);try{const xe=await Re.getBossQuizAllProgress(q.id);Ze(xe)}catch{r.error("Failed to load endgame data.")}br(!1)},cs=(q,xe)=>`You are an expert educational assessment designer. Generate quiz boss questions for a gamified LMS.

BOSS: "${q||"Quiz Boss"}"
CLASS: ${xe||"General"}

Generate 15-30 multiple choice questions across 3 difficulty tiers.

TIER DISTRIBUTION:
- EASY (5-10 questions): Recall and basic comprehension
- MEDIUM (5-10 questions): Application and analysis
- HARD (5-10 questions): Evaluation and synthesis

OUTPUT FORMAT  Respond with ONLY a valid JSON array:
[
  {
    "id": "q001",
    "stem": "The question text",
    "options": ["Option A", "Option B", "Option C", "Option D"],
    "correctAnswer": 0,
    "difficulty": "EASY",
    "damageBonus": 0
  }
]

RULES:
- "correctAnswer" is the 0-based INDEX of the correct option (0=A, 1=B, 2=C, 3=D)
- "damageBonus" should be 0 for EASY, 25 for MEDIUM, 50 for HARD
- Each question must have exactly 4 options
- Distractors must be plausible and educational
- Questions must be specific to the class material
- Output ONLY the JSON array  no markdown fences, no commentary`,so=()=>{const q=cs(te.bossName,te.classType);navigator.clipboard.writeText(q),Ye(!0),setTimeout(()=>Ye(!1),2500),r.success("Prompt copied to clipboard!")},ll=q=>nn(q,"boss"),us=async(q,xe)=>{try{const Te=await Re.completeTutoring(q,xe);r.success(`Verified! Tutor earned ${Te.xpAwarded} XP and ${Te.fluxAwarded} Flux`)}catch{r.error("Failed to verify session")}},ds=async q=>{if(await n({message:"Cancel this tutoring session?",confirmLabel:"Cancel Session"}))try{await Re.cancelTutoringSession(q),r.success("Session cancelled.")}catch{r.error("Failed to cancel session")}},ja=vr.filter(q=>["OPEN","MATCHED","IN_PROGRESS","COMPLETED"].includes(q.status)),ga={OPERATIVES:"Operatives",PROTOCOLS:"XP Protocols",MISSIONS:"Missions",MISSION_CONTROL:"Mission Control",BOSS_OPS:"Boss Ops",TUTORING:"Tutoring"};return o.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:ga[a]}),o.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),o.jsxs("div",{className:"flex gap-2",children:[a==="PROTOCOLS"&&o.jsxs("button",{onClick:()=>V(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[o.jsx(uH,{className:"w-4 h-4"})," Deploy Protocol"]}),a==="MISSIONS"&&o.jsxs("button",{onClick:()=>U(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[o.jsx(Zq,{className:"w-4 h-4"})," Issue Mission"]}),a==="BOSS_OPS"&&o.jsxs("button",{onClick:()=>ni(),className:"bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-amber-900/20",children:[o.jsx(Ho,{className:"w-4 h-4"})," Deploy Quiz Boss"]})]})]}),o.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:o.jsxs("div",{className:"p-6",children:[a==="OPERATIVES"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(E2,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:i,onChange:q=>s(q.target.value)})]}),o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest whitespace-nowrap",children:[dn.length," operatives"]}),o.jsxs("div",{className:"relative",children:[o.jsx(Hoe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),o.jsxs("select",{value:c,onChange:q=>d(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Classes"}),Object.values(Rr).map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),_t.length>0&&o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:h,onChange:q=>p(q.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[o.jsx("option",{children:"All Sections"}),_t.map(q=>o.jsx("option",{value:q,children:q},q))]}),o.jsx(Ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[o.jsx(w,{label:"Operative",col:"name",className:"pl-4"}),o.jsx(w,{label:"Class",col:"class"}),o.jsx(w,{label:"Level",col:"level",className:"text-center"}),o.jsx(w,{label:c!=="All Classes"?"Class XP":"XP",col:"xp",className:"text-center"}),o.jsx(w,{label:"Flux",col:"flux",className:"text-center"}),o.jsx(w,{label:"Gear",col:"gear",className:"text-center"}),o.jsx("th",{className:"pb-4 text-right pr-4",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:dn.map(q=>{var ht,Ot,Nt,Yt,wr,Zr,oe,ve,$e;const xe=((ht=q.gamification)==null?void 0:ht.level)||1,Te=((Ot=q.gamification)==null?void 0:Ot.currency)||0,Ne=q.enrolledClasses||(q.classType?[q.classType]:[]);return o.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[o.jsx("td",{className:"py-3 pl-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:q.avatarUrl,className:"w-9 h-9 rounded-lg border border-white/10",alt:q.name}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm text-gray-200",children:q.name}),pe===q.id?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{autoFocus:!0,value:X,onChange:Me=>ne(Me.target.value),maxLength:24,onKeyDown:Me=>{Me.key==="Enter"&&pn(q.id),Me.key==="Escape"&&me(null)},className:"bg-black/60 border border-purple-500/30 rounded px-1.5 py-0.5 text-[10px] text-white font-mono w-28 focus:outline-none focus:border-purple-500"}),o.jsx("button",{onClick:()=>pn(q.id),className:"text-green-400 hover:text-green-300",title:"Save",children:o.jsx(lu,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>me(null),className:"text-gray-500 hover:text-gray-300",title:"Cancel",children:o.jsx(Da,{className:"w-3 h-3"})})]}):o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("button",{onClick:()=>{var Me;me(q.id),ne(((Me=q.gamification)==null?void 0:Me.codename)||"")},className:"text-[10px] font-mono text-gray-500 uppercase hover:text-purple-400 transition flex items-center gap-1 group/cn",children:[((Nt=q.gamification)==null?void 0:Nt.codename)||"UNASSIGNED",o.jsx(Y5,{className:"w-2.5 h-2.5 opacity-0 group-hover/cn:opacity-100 transition"})]}),o.jsx("button",{onClick:()=>{var Me;return Tn(q.id,!((Me=q.gamification)!=null&&Me.codenameLocked))},className:`transition ${(Yt=q.gamification)!=null&&Yt.codenameLocked?"text-red-400 hover:text-red-300":"text-gray-600 hover:text-gray-400"}`,title:(wr=q.gamification)!=null&&wr.codenameLocked?"Codename locked  click to unlock":"Click to lock codename",children:(Zr=q.gamification)!=null&&Zr.codenameLocked?o.jsx(Gh,{className:"w-2.5 h-2.5"}):o.jsx(Joe,{className:"w-2.5 h-2.5"})})]})]})]})}),o.jsx("td",{className:"py-3",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:Ne.map(Me=>o.jsx("span",{className:"text-[9px] bg-purple-500/10 text-purple-400 px-1.5 py-0.5 rounded border border-purple-500/20 font-bold",children:Me},Me))})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-lg font-black text-white",children:xe})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-gray-300",children:(c!=="All Classes"?((ve=(oe=q.gamification)==null?void 0:oe.classXp)==null?void 0:ve[c])||0:(($e=q.gamification)==null?void 0:$e.xp)||0).toLocaleString()})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-cyan-400",children:Te})}),o.jsx("td",{className:"py-3 text-center",children:o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:Lr(q)})}),o.jsx("td",{className:"py-3 text-right pr-4",children:o.jsxs("div",{className:"flex justify-end gap-1.5",children:[o.jsxs("button",{onClick:()=>A(q),className:"px-2.5 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Ex,{className:"w-3 h-3"})," Inventory"]}),o.jsxs("button",{onClick:()=>P(q),className:"px-2.5 py-1.5 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Mi,{className:"w-3 h-3"})," XP"]})]})})]},q.id)})})]})})]}),a==="PROTOCOLS"&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[j.map(q=>o.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${q.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[q.isActive&&o.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${q.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:o.jsx($a,{className:"w-6 h-6"})}),o.jsx("button",{onClick:()=>Re.deleteXPEvent(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ca,{className:"w-4 h-4"})})]}),o.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:q.title}),o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[q.multiplier,"x"]}),o.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[o.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:q.type==="GLOBAL"?"Global Uplink":q.targetClass}),o.jsx("button",{onClick:()=>On(q),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${q.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:q.isActive?"Active":"Offline"})]})]},q.id)),o.jsxs("button",{onClick:()=>V(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:o.jsx(Mi,{className:"w-6 h-6"})}),o.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),a==="MISSIONS"&&o.jsx("div",{className:"space-y-4",children:I.map(q=>o.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${q.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-5",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${q.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(tc,{className:"w-7 h-7"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-lg text-white",children:q.title}),o.jsx("p",{className:"text-sm text-gray-500",children:q.description}),q.statRequirements&&o.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(q.statRequirements).map(([xe,Te])=>o.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Te," ",xe]},xe))}),o.jsxs("div",{className:"flex gap-3 mt-2",children:[o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.type}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",q.xpReward," XP"]}),q.itemRewardRarity&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"LOOT DROP"}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.targetClass||"All Classes"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("button",{onClick:()=>ti(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-purple-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:q.isActive?"Active":"Standby"})]}),o.jsx("button",{onClick:()=>Re.deleteQuest(q.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ca,{className:"w-4 h-4"})})]})]},q.id))}),a==="MISSION_CONTROL"&&o.jsx(kde,{deployments:J,onResolveQuest:Wn,onRollForSalvation:Yr}),a==="BOSS_OPS"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsxs("button",{onClick:()=>ft("bosses"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${rt==="bosses"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx($7,{className:"w-3 h-3 inline mr-1"})," Active Bosses (",Se.length,")"]}),o.jsxs("button",{onClick:()=>ft("banks"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${rt==="banks"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.jsx(_h,{className:"w-3 h-3 inline mr-1"})," Question Banks (",Ie.length,")"]})]}),rt==="bosses"&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Students deal damage by answering questions correctly. Deploy quiz bosses that require mastery of class material to defeat."}),Se.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Ho,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No quiz bosses deployed."}),o.jsx("p",{className:"text-sm mt-1",children:"Deploy a quiz boss to challenge students with educational content."})]}),Se.map(q=>{var ht,Ot;const xe=q.maxHp>0?Math.max(0,(q.currentHp||q.maxHp)/q.maxHp*100):0,Te=new Date(q.deadline)<new Date,Ne=(q.currentHp??q.maxHp)<=0||!q.isActive;return o.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col md:flex-row md:items-center gap-4 transition-all mb-3 ${q.isActive&&!Te?"bg-amber-600/10 border-amber-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[o.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 ${q.isActive&&!Te?"bg-amber-600 text-white shadow-lg shadow-amber-900/40":"bg-gray-800 text-gray-400"}`,children:o.jsx(Ho,{className:"w-7 h-7"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-lg text-white truncate",children:q.bossName}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[o.jsxs("span",{className:"text-[10px] font-bold text-amber-400 bg-amber-900/30 px-2 py-0.5 rounded border border-amber-500/20",children:[q.questions.length," Questions"]}),o.jsxs("span",{className:"text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/20",children:["HP: ",(q.currentHp??q.maxHp).toLocaleString(),"/",q.maxHp.toLocaleString()]}),o.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:[q.damagePerCorrect," dmg/correct"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),(ht=q.modifiers)!=null&&ht.length?o.jsxs("span",{className:"text-[10px] font-bold text-pink-400 bg-pink-900/30 px-2 py-0.5 rounded border border-pink-500/20",children:[q.modifiers.length," Modifiers"]}):null,(Ot=q.targetSections)!=null&&Ot.length?o.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:q.targetSections.join(", ")}):null,Te&&o.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-yellow-500/20",children:"EXPIRED"}),Ne&&o.jsx("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:"DEFEATED"})]}),o.jsx("div",{className:"mt-2 w-full max-w-xs h-2 bg-black/40 rounded-full overflow-hidden border border-white/5",children:o.jsx("div",{className:`h-full rounded-full transition-all ${xe>50?"bg-amber-500":xe>20?"bg-orange-500":"bg-red-500"}`,style:{width:`${xe}%`}})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Ne&&o.jsxs("button",{onClick:()=>Rs(q),className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-400 rounded-lg hover:bg-emerald-500/20 transition border border-emerald-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(eH,{className:"w-3 h-3 inline mr-1"}),"Endgame"]}),o.jsxs("button",{onClick:()=>ni(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase tracking-wide",children:[o.jsx(Y5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>fe(q),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${q.isActive?"bg-amber-600":"bg-gray-700"}`,children:o.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${q.isActive?"translate-x-6":""}`})}),o.jsx("button",{onClick:()=>Je(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ca,{className:"w-4 h-4"})})]})]},q.id)})]}),rt==="banks"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Reusable question banks that can be imported into any boss fight."}),o.jsxs("button",{onClick:()=>ct(),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-xl font-bold flex items-center gap-2 transition text-xs",children:[o.jsx(Mi,{className:"w-3 h-3"})," New Bank"]})]}),Ie.length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(_h,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:"No question banks yet."}),o.jsx("p",{className:"text-sm mt-1",children:"Create banks to reuse questions across multiple boss fights."})]}),Ie.map(q=>o.jsxs("div",{className:"p-4 rounded-2xl border border-purple-500/20 bg-purple-600/5 flex items-center gap-4 mb-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-600/20 flex items-center justify-center flex-shrink-0",children:o.jsx(_h,{className:"w-5 h-5 text-purple-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.name}),q.description&&o.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[o.jsxs("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:[q.questions.length," Questions"]}),o.jsx("span",{className:"text-[10px] font-bold text-cyan-400 bg-cyan-900/30 px-2 py-0.5 rounded border border-cyan-500/20",children:q.classType}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(q.updatedAt).toLocaleDateString()})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs("button",{onClick:()=>ct(q),className:"px-3 py-1.5 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20 text-[10px] font-bold uppercase",children:[o.jsx(Y5,{className:"w-3 h-3 inline mr-1"}),"Edit"]}),o.jsx("button",{onClick:()=>dr(q),className:"p-2 text-gray-600 hover:text-red-400 transition",children:o.jsx(ca,{className:"w-4 h-4"})})]})]},q.id))]})]}),a==="TUTORING"&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Monitor peer tutoring sessions. Verify completed sessions to award XP and Flux to tutors."}),o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsxs("button",{onClick:()=>un("pending"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Pr==="pending"?"bg-amber-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["Pending (",ja.length,")"]}),o.jsxs("button",{onClick:()=>un("all"),className:`px-4 py-2 rounded-xl text-xs font-bold transition ${Pr==="all"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:["All Sessions (",vr.length,")"]})]}),(Pr==="pending"?ja:vr).length===0&&o.jsxs("div",{className:"text-center py-14 text-gray-500",children:[o.jsx(Eu,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),o.jsx("p",{className:"font-bold",children:Pr==="pending"?"No pending sessions.":"No tutoring sessions yet."})]}),(Pr==="pending"?ja:vr).map(q=>o.jsx("div",{className:`p-5 rounded-2xl border transition-all ${q.status==="VERIFIED"?"bg-green-600/5 border-green-500/20":q.status==="MATCHED"||q.status==="IN_PROGRESS"?"bg-purple-600/5 border-purple-500/20":q.status==="OPEN"?"bg-blue-600/5 border-blue-500/20":"bg-black/20 border-white/10"}`,children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(rle,{className:"w-4 h-4 text-gray-500"}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:q.topic}),o.jsx("span",{className:`text-[9px] px-2 py-0.5 rounded-full border font-bold ${q.status==="OPEN"?"bg-blue-500/10 text-blue-400 border-blue-500/20":q.status==="MATCHED"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":q.status==="IN_PROGRESS"?"bg-purple-500/10 text-purple-400 border-purple-500/20":q.status==="VERIFIED"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-orange-500/10 text-orange-400 border-orange-500/20"}`,children:q.status})]}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-[10px] text-gray-500",children:[o.jsxs("span",{children:["Requester: ",o.jsx("span",{className:"text-gray-300 font-bold",children:q.requesterName})]}),q.tutorName&&o.jsxs("span",{children:["Tutor: ",o.jsx("span",{className:"text-green-400 font-bold",children:q.tutorName})]}),o.jsxs("span",{children:["Class: ",o.jsx("span",{className:"text-purple-400",children:q.classType})]}),o.jsx("span",{children:new Date(q.createdAt).toLocaleDateString()}),q.completedAt&&o.jsxs("span",{children:["Completed: ",new Date(q.completedAt).toLocaleDateString()]})]}),(q.requesterFeedback||q.tutorFeedback)&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[q.requesterFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-cyan-400 uppercase",children:"Student Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.requesterFeedback.rating),"".repeat(5-q.requesterFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Comm: ",q.requesterFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.requesterFeedback.response})]}),q.tutorFeedback&&o.jsxs("div",{className:"p-2 bg-black/20 rounded-lg border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-[9px] font-bold text-green-400 uppercase",children:"Tutor Feedback"}),o.jsxs("span",{className:"text-[9px] text-yellow-400",children:["".repeat(q.tutorFeedback.rating),"".repeat(5-q.tutorFeedback.rating)]}),o.jsxs("span",{className:"text-[9px] text-gray-500",children:["Engage: ",q.tutorFeedback.communicationRating,"/5"]})]}),o.jsx("p",{className:"text-[10px] text-gray-400 leading-relaxed",children:q.tutorFeedback.response})]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[q.tutorId&&q.status==="COMPLETED"&&o.jsxs("button",{onClick:()=>us(q.id,q.tutorId),className:"px-3 py-1.5 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition border border-green-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Mn,{className:"w-3 h-3"})," Verify & Award"]}),q.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>ds(q.id),className:"px-3 py-1.5 bg-red-600/10 text-red-400 rounded-lg hover:bg-red-600/20 transition border border-red-500/20 text-[10px] font-bold uppercase tracking-wide flex items-center gap-1",children:[o.jsx(Da,{className:"w-3 h-3"})," Cancel"]}),q.status==="VERIFIED"&&o.jsxs("span",{className:"text-[10px] text-green-400 font-bold flex items-center gap-1",children:[o.jsx(Mn,{className:"w-3 h-3"})," +",q.xpReward," XP, +",q.fluxReward||25," Flux"]})]})]})},q.id))]})]})}),o.jsx(Nde,{user:N,onClose:()=>A(null),onDeleteItem:Tr,onUnequipItem:fn,onGrantFlux:ri}),o.jsx(Cde,{isOpen:D,onClose:()=>U(!1),form:$,setForm:Q,onSubmit:hn,onSaveDraft:async()=>{const q={};$.techReq>0&&(q.tech=$.techReq),$.focusReq>0&&(q.focus=$.focusReq),$.analysisReq>0&&(q.analysis=$.analysisReq),$.charismaReq>0&&(q.charisma=$.charismaReq);const xe={id:Math.random().toString(36).substring(2,9),title:$.title,description:$.description,xpReward:$.xpReward,fluxReward:$.fluxReward,isActive:!1,type:$.type,statRequirements:q,startsAt:$.startsAt?new Date($.startsAt).toISOString():null,expiresAt:null,itemRewardRarity:$.lootRarity||null,rollDieSides:$.dieSides||20,consequenceText:$.consequence||null,isGroupQuest:$.isGroup,targetClass:$.targetClass||void 0,targetSections:$.targetSections.length>0?$.targetSections:void 0};await Re.saveQuest(xe),r.success("Mission saved as draft (standby)."),Q(b3),U(!1)},isSubmitting:K,availableSections:rn}),o.jsx(Ti,{isOpen:E,onClose:()=>V(!1),title:"New XP Protocol Deployment",children:o.jsxs("form",{onSubmit:ma,className:"space-y-4 text-gray-100 p-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),o.jsx("input",{value:re.title,onChange:q=>Ae({...re,title:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),o.jsx("input",{type:"number",step:"0.5",value:re.multiplier,onChange:q=>Ae({...re,multiplier:parseFloat(q.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),o.jsxs("select",{value:re.type,onChange:q=>Ae({...re,type:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[o.jsx("option",{value:"GLOBAL",children:"Global Node"}),o.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),re.type==="CLASS_SPECIFIC"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),o.jsx("select",{value:re.targetClass,onChange:q=>Ae({...re,targetClass:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Rr).map(q=>o.jsx("option",{value:q,children:q},q))})]}),o.jsx(eg,{availableSections:Dr,selectedSections:re.targetSections,onChange:q=>Ae({...re,targetSections:q})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",onClick:async()=>{const q={id:Math.random().toString(36).substring(2,9),title:re.title,multiplier:re.multiplier,isActive:!1,type:re.type,...re.type==="CLASS_SPECIFIC"?{targetClass:re.targetClass}:{},...re.targetSections.length>0?{targetSections:re.targetSections}:{}};await Re.saveXPEvent(q),V(!1),Ae({title:"",multiplier:2,type:"GLOBAL",targetClass:Rr.AP_PHYSICS,targetSections:[]}),r.success("Protocol saved as draft (standby).")},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),o.jsx("button",{type:"submit",className:"flex-[2] bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})]})}),o.jsx(jde,{user:C,onClose:()=>P(null),onAdjust:or}),o.jsx(Ti,{isOpen:He,onClose:()=>st(!1),title:W?"Edit Quiz Boss":"Deploy Quiz Boss",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:Tt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Boss Name"}),o.jsx("input",{value:te.bossName,onChange:q=>ae({...te,bossName:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. The Knowledge Sphinx"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("textarea",{value:te.description,onChange:q=>ae({...te,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white resize-none h-16",placeholder:"A mythical beast that can only be defeated by knowledge..."})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-amber-400 uppercase tracking-widest mb-3",children:"Boss Appearance"}),o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-24 h-32 bg-black/40 rounded-xl border border-white/5 flex items-center justify-center p-1",children:o.jsx(bG,{bossType:te.bossType,hue:te.bossHue})}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1",children:"Boss Type"}),o.jsx("div",{className:"flex gap-2",children:["BRUTE","PHANTOM","SERPENT"].map(q=>o.jsx("button",{type:"button",onClick:()=>ae({...te,bossType:q}),className:`flex-1 px-3 py-2 rounded-lg text-xs font-bold transition-all border ${te.bossType===q?"bg-amber-600/20 border-amber-500/40 text-amber-400":"bg-black/30 border-white/10 text-gray-500 hover:text-gray-300 hover:border-white/20"}`,children:q.charAt(0)+q.slice(1).toLowerCase()},q))})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Color Hue: ",te.bossHue,""]}),o.jsx("input",{type:"range",min:"0",max:"360",value:te.bossHue,onChange:q=>ae({...te,bossHue:parseInt(q.target.value)}),className:"w-full h-2 rounded-full appearance-none cursor-pointer",style:{background:"linear-gradient(to right, hsl(0,80%,50%), hsl(60,80%,50%), hsl(120,80%,50%), hsl(180,80%,50%), hsl(240,80%,50%), hsl(300,80%,50%), hsl(360,80%,50%))"}})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Max HP"}),o.jsx("input",{type:"number",value:te.maxHp,onChange:q=>ae({...te,maxHp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Dmg Per Correct"}),o.jsx("input",{type:"number",value:te.damagePerCorrect,onChange:q=>ae({...te,damagePerCorrect:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Class"}),o.jsxs("select",{value:te.classType,onChange:q=>ae({...te,classType:q.target.value,targetSections:[]}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Rr).map(q=>o.jsx("option",{value:q,children:q},q))]})]})]}),o.jsx(eg,{availableSections:Hr,selectedSections:te.targetSections,onChange:q=>ae({...te,targetSections:q})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Deadline"}),o.jsx("input",{type:"datetime-local",value:te.deadline,onChange:q=>ae({...te,deadline:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-2.5 text-white font-bold text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Reward XP"}),o.jsx("input",{type:"number",value:te.rewardXp,onChange:q=>ae({...te,rewardXp:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Flux"}),o.jsx("input",{type:"number",value:te.rewardFlux,onChange:q=>ae({...te,rewardFlux:parseInt(q.target.value)||0}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm font-bold"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] text-gray-500 mb-1 px-1",children:"Loot"}),o.jsxs("select",{value:te.rewardItemRarity,onChange:q=>ae({...te,rewardItemRarity:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs font-bold",children:[o.jsx("option",{value:"",children:"None"}),o.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),o.jsx("option",{value:"RARE",children:"Rare"}),o.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]})]}),o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsxs("label",{className:"block text-[10px] font-bold text-pink-400 uppercase tracking-widest mb-3",children:["Boss Modifiers (",be.length," active)"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Object.entries(zT).map(([q,xe])=>{const Te=be.find(Ne=>Ne.type===q);return o.jsxs("div",{className:`rounded-lg border p-2 cursor-pointer transition-all ${Te?"border-pink-500/40 bg-pink-500/10":"border-white/10 bg-black/20 hover:border-white/20"}`,children:[o.jsxs("button",{type:"button",onClick:()=>mn(q),className:"w-full text-left",children:[o.jsx("div",{className:"text-[10px] font-bold text-white",children:xe.name}),o.jsx("div",{className:"text-[9px] text-gray-500 leading-tight",children:xe.description})]}),Te&&xe.hasValue&&o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[o.jsx("input",{type:"number",value:Te.value??xe.defaultValue,onChange:Ne=>kr(q,parseInt(Ne.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold"}),o.jsx("span",{className:"text-[9px] text-gray-500",children:xe.unit})]})]},q)})})]}),Ie.length>0&&o.jsxs("div",{className:"border border-white/10 rounded-xl p-4 bg-black/20",children:[o.jsx("label",{className:"block text-[10px] font-bold text-purple-400 uppercase tracking-widest mb-3",children:"Import from Question Banks"}),o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ie.filter(q=>q.classType===te.classType||q.classType==="GLOBAL"||te.classType==="GLOBAL").map(q=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border border-white/5 bg-black/20",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("span",{className:"text-xs font-bold text-white",children:q.name}),o.jsxs("span",{className:"text-[10px] text-gray-500 ml-2",children:[q.questions.length," questions"]})]}),o.jsxs("button",{type:"button",onClick:()=>Gr(q),className:"px-2 py-1 bg-purple-600/20 text-purple-400 rounded text-[10px] font-bold hover:bg-purple-600/30 transition flex items-center gap-1",children:[o.jsx(Mi,{className:"w-3 h-3"})," Import All"]})]},q.id))})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-amber-400 uppercase tracking-widest",children:["Questions (",te.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:so,className:`text-xs px-3 py-1 rounded-lg transition font-bold flex items-center gap-1 ${Ue?"bg-green-600/20 text-green-400":"bg-purple-600/20 text-purple-400 hover:bg-purple-600/30"}`,children:Ue?o.jsxs(o.Fragment,{children:[o.jsx(lu,{className:"w-3 h-3"})," Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx(kx,{className:"w-3 h-3"})," Copy AI Prompt"]})}),o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Zd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:xt,type:"file",accept:".json,.txt",onChange:ll,className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:Fa,className:"text-xs bg-amber-600/20 text-amber-400 px-3 py-1 rounded-lg hover:bg-amber-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Mi,{className:"w-3 h-3"})," Add Manual"]})]})]}),it&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2",children:[o.jsx(Da,{className:"w-4 h-4 flex-shrink-0"}),it,o.jsx("button",{type:"button",onClick:()=>Pt(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Da,{className:"w-3 h-3"})})]}),te.questions.length===0&&o.jsxs("div",{className:"text-center py-6 space-y-2",children:[o.jsx(Cx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600",children:"No questions yet."}),o.jsxs("p",{className:"text-[10px] text-gray-700",children:["Use ",o.jsx("span",{className:"text-purple-400",children:"Copy AI Prompt"}),"  paste into ChatGPT/Claude  save JSON  ",o.jsx("span",{className:"text-blue-400",children:"Import JSON"})]})]}),te.questions.map((q,xe)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-4 mb-3 space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("label",{className:"block text-[9px] text-gray-500 mb-1",children:["Question #",xe+1]}),o.jsx("textarea",{value:q.stem,onChange:Te=>Ni(xe,"stem",Te.target.value),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-sm resize-none h-14",placeholder:"e.g. What is the acceleration due to gravity on Earth?",required:!0})]}),o.jsx("button",{type:"button",onClick:()=>gi(xe),className:"text-gray-600 hover:text-red-400 mt-4",children:o.jsx(ca,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:q.options.map((Te,Ne)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{type:"button",onClick:()=>Ni(xe,"correctAnswer",Ne),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ne?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,title:"Mark as correct answer",children:o.jsx(lu,{className:"w-3 h-3"})}),o.jsx("input",{value:Te,onChange:ht=>ls(xe,Ne,ht.target.value),className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs",placeholder:`Option ${String.fromCharCode(65+Ne)}`,required:!0})]},Ne))}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:q.difficulty,onChange:Te=>Ni(xe,"difficulty",Te.target.value),className:"bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus Dmg:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>Ni(xe,"damageBonus",parseInt(Te.target.value)||0),className:"w-16 bg-black/40 border border-white/10 rounded-lg p-1.5 text-white text-xs font-bold",min:0})]})]})]},q.id))]}),o.jsxs("div",{className:"flex gap-3",children:[!W&&o.jsx("button",{type:"button",onClick:async()=>{if(te.questions.length===0){r.error("Add at least one question.");return}const q=[...new Set(te.questions.map(Te=>Te.bankId).filter(Boolean))],xe={id:Math.random().toString(36).substring(2,12),bossName:te.bossName,description:te.description,maxHp:te.maxHp,currentHp:te.maxHp,classType:te.classType,isActive:!1,deadline:te.deadline?new Date(te.deadline).toISOString():new Date(Date.now()+7*864e5).toISOString(),damagePerCorrect:te.damagePerCorrect,questions:te.questions.map(Te=>({id:Te.id,stem:Te.stem,options:Te.options.filter(Ne=>Ne.trim()),correctAnswer:Te.correctAnswer,difficulty:Te.difficulty,...Te.damageBonus>0?{damageBonus:Te.damageBonus}:{},...Te.bankId?{bankId:Te.bankId}:{}})),rewards:{xp:te.rewardXp,flux:te.rewardFlux,...te.rewardItemRarity?{itemRarity:te.rewardItemRarity}:{}},...te.targetSections.length>0?{targetSections:te.targetSections}:{},bossAppearance:{bossType:te.bossType,hue:te.bossHue},...be.length>0?{modifiers:be}:{},...q.length>0?{questionBankIds:q}:{}};await Re.saveBossQuiz(xe),r.success("Quiz boss saved as draft (inactive)."),st(!1)},className:"flex-1 bg-white/5 border border-white/10 text-gray-300 hover:text-white hover:bg-white/10 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 transition",children:"Save Draft"}),o.jsx("button",{type:"submit",className:`${W?"w-full":"flex-[2]"} bg-amber-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-amber-700`,children:W?"Update Quiz Boss":"Deploy Quiz Boss"})]})]})}),o.jsx(Ti,{isOpen:Ge,onClose:()=>ue(!1),title:Xe?"Edit Question Bank":"New Question Bank",maxWidth:"max-w-2xl",children:o.jsxs("form",{onSubmit:Xt,className:"space-y-4 text-gray-100 p-2 max-h-[70vh] overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Bank Name"}),o.jsx("input",{value:yt.name,onChange:q=>mt({...yt,name:q.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. AP Physics Unit 3 Questions"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Class"}),o.jsxs("select",{value:yt.classType,onChange:q=>mt({...yt,classType:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold text-sm",children:[o.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Rr).map(q=>o.jsx("option",{value:q,children:q},q))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Description"}),o.jsx("input",{value:yt.description,onChange:q=>mt({...yt,description:q.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white text-sm",placeholder:"Optional description"})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 flex-wrap gap-2",children:[o.jsxs("label",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-widest",children:["Questions (",yt.questions.length,")"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("label",{className:"text-xs bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg hover:bg-blue-600/30 transition font-bold flex items-center gap-1 cursor-pointer",children:[o.jsx(Zd,{className:"w-3 h-3"})," Import JSON",o.jsx("input",{ref:Vt,type:"file",accept:".json,.txt",onChange:q=>nn(q,"bank"),className:"hidden"})]}),o.jsxs("button",{type:"button",onClick:()=>mt(q=>({...q,questions:[...q.questions,{id:Math.random().toString(36).substring(2,10),stem:"",options:["","","",""],correctAnswer:0,difficulty:"MEDIUM",damageBonus:0}]})),className:"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-lg hover:bg-purple-600/30 transition font-bold flex items-center gap-1",children:[o.jsx(Mi,{className:"w-3 h-3"})," Add Manual"]})]})]}),ur&&o.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 text-xs text-red-400 flex items-center gap-2 mb-3",children:[o.jsx(Da,{className:"w-4 h-4 flex-shrink-0"})," ",ur,o.jsx("button",{type:"button",onClick:()=>qr(null),className:"ml-auto text-red-500 hover:text-red-300",children:o.jsx(Da,{className:"w-3 h-3"})})]}),yt.questions.length===0&&o.jsxs("div",{className:"text-center py-6",children:[o.jsx(Cx,{className:"w-8 h-8 mx-auto text-gray-600 opacity-30"}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"No questions yet. Import JSON or add manually."})]}),yt.questions.map((q,xe)=>o.jsxs("div",{className:"bg-black/30 rounded-xl border border-white/5 p-3 mb-2 space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx("div",{className:"flex-1",children:o.jsx("textarea",{value:q.stem,onChange:Te=>{const Ne=[...yt.questions];Ne[xe]={...Ne[xe],stem:Te.target.value},mt({...yt,questions:Ne})},className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-white text-xs resize-none h-12",placeholder:`Question #${xe+1}`,required:!0})}),o.jsx("button",{type:"button",onClick:()=>mt(Te=>({...Te,questions:Te.questions.filter((Ne,ht)=>ht!==xe)})),className:"text-gray-600 hover:text-red-400 mt-2",children:o.jsx(ca,{className:"w-3.5 h-3.5"})})]}),o.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:q.options.map((Te,Ne)=>o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("button",{type:"button",onClick:()=>{const ht=[...yt.questions];ht[xe]={...ht[xe],correctAnswer:Ne},mt({...yt,questions:ht})},className:`w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition ${q.correctAnswer===Ne?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 text-transparent hover:border-gray-400"}`,children:o.jsx(lu,{className:"w-2.5 h-2.5"})}),o.jsx("input",{value:Te,onChange:ht=>{const Ot=[...yt.questions],Nt=[...Ot[xe].options];Nt[Ne]=ht.target.value,Ot[xe]={...Ot[xe],options:Nt},mt({...yt,questions:Ot})},className:"flex-1 bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[11px]",placeholder:`Option ${String.fromCharCode(65+Ne)}`,required:!0})]},Ne))}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("select",{value:q.difficulty,onChange:Te=>{const Ne=[...yt.questions];Ne[xe]={...Ne[xe],difficulty:Te.target.value},mt({...yt,questions:Ne})},className:"bg-black/40 border border-white/10 rounded-lg p-1 text-white text-[10px] font-bold",children:[o.jsx("option",{value:"EASY",children:"Easy"}),o.jsx("option",{value:"MEDIUM",children:"Medium"}),o.jsx("option",{value:"HARD",children:"Hard"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("label",{className:"text-[9px] text-gray-500",children:"Bonus:"}),o.jsx("input",{type:"number",value:q.damageBonus,onChange:Te=>{const Ne=[...yt.questions];Ne[xe]={...Ne[xe],damageBonus:parseInt(Te.target.value)||0},mt({...yt,questions:Ne})},className:"w-14 bg-black/40 border border-white/10 rounded p-1 text-white text-[10px] font-bold",min:0})]})]})]},q.id))]}),o.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700",children:Xe?"Update Question Bank":"Create Question Bank"})]})}),o.jsx(Ti,{isOpen:!!Et,onClose:()=>{Dt(null),Ze([])},title:Et?`Endgame: ${Et.bossName}`:"Endgame",maxWidth:"max-w-3xl",children:ar?o.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading endgame data..."}):Et&&o.jsxs("div",{className:"space-y-6 p-2 max-h-[75vh] overflow-y-auto",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-white",children:Bt.length}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Participants"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-amber-400",children:Bt.reduce((q,xe)=>{var Te;return q+(((Te=xe.combatStats)==null?void 0:Te.totalDamageDealt)||0)},0).toLocaleString()}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Damage"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-green-400",children:Bt.reduce((q,xe)=>{var Te;return q+(((Te=xe.combatStats)==null?void 0:Te.questionsCorrect)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Correct"})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5 text-center",children:[o.jsx("div",{className:"text-2xl font-black text-red-400",children:Bt.reduce((q,xe)=>{var Te;return q+(((Te=xe.combatStats)==null?void 0:Te.criticalHits)||0)},0)}),o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Total Crits"})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-amber-400 flex items-center gap-2 mb-3",children:[o.jsx(rH,{className:"w-4 h-4"})," Top Damage Dealers"]}),o.jsx("div",{className:"space-y-2",children:[...Bt].sort((q,xe)=>{var Te,Ne;return(((Te=xe.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ne=q.combatStats)==null?void 0:Ne.totalDamageDealt)||0)}).slice(0,5).map((q,xe)=>{var wr;const Te=t.find(Zr=>Zr.id===q.userId),Ne=q.combatStats,ht=xe,Ot=ht<nO.length?nO[ht]:1,Nt=((Ne==null?void 0:Ne.questionsAttempted)||0)>=Im&&((Ne==null?void 0:Ne.questionsCorrect)||0)>=Rm,Yt=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${xe===0?"bg-yellow-500/10 border-yellow-500/30":"bg-black/20 border-white/5"}`,children:[o.jsxs("div",{className:`text-xl font-black w-8 text-center ${Yt[xe]||"text-gray-500"}`,children:["#",xe+1]}),(Te==null?void 0:Te.avatarUrl)&&o.jsx("img",{src:Te.avatarUrl,className:"w-8 h-8 rounded-lg border border-white/10",alt:""}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-bold text-white truncate",children:(Te==null?void 0:Te.name)||q.userId}),o.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[o.jsxs("span",{className:"text-amber-400 font-bold",children:[((wr=Ne==null?void 0:Ne.totalDamageDealt)==null?void 0:wr.toLocaleString())||0," dmg"]}),o.jsxs("span",{children:[(Ne==null?void 0:Ne.questionsCorrect)||0,"/",(Ne==null?void 0:Ne.questionsAttempted)||0," correct"]}),o.jsxs("span",{children:[(Ne==null?void 0:Ne.criticalHits)||0," crits"]}),o.jsxs("span",{children:["Streak: ",(Ne==null?void 0:Ne.longestStreak)||0]})]})]}),o.jsx("div",{className:"text-right flex-shrink-0",children:Nt?o.jsxs("span",{className:`text-xs font-bold ${xe<5?Yt[xe]:"text-gray-400"}`,children:[Ot,"x"]}):o.jsx("span",{className:"text-[10px] text-red-400 font-bold",children:"DNQ"})})]},q.userId)})})]}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-bold text-white flex items-center gap-2 mb-3",children:[o.jsx(Hh,{className:"w-4 h-4"})," All Participants"]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left text-xs",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-[9px] text-gray-500 uppercase font-bold border-b border-white/5",children:[o.jsx("th",{className:"pb-2 pl-2",children:"#"}),o.jsx("th",{className:"pb-2",children:"Student"}),o.jsx("th",{className:"pb-2 text-center",children:"Damage"}),o.jsx("th",{className:"pb-2 text-center",children:"Correct"}),o.jsx("th",{className:"pb-2 text-center",children:"Attempted"}),o.jsx("th",{className:"pb-2 text-center",children:"Accuracy"}),o.jsx("th",{className:"pb-2 text-center",children:"Crits"}),o.jsx("th",{className:"pb-2 text-center",children:"Streak"}),o.jsx("th",{className:"pb-2 text-center",children:"Mitigated"}),o.jsx("th",{className:"pb-2 text-center",children:"Status"})]})}),o.jsx("tbody",{className:"divide-y divide-white/5",children:[...Bt].sort((q,xe)=>{var Te,Ne;return(((Te=xe.combatStats)==null?void 0:Te.totalDamageDealt)||0)-(((Ne=q.combatStats)==null?void 0:Ne.totalDamageDealt)||0)}).map((q,xe)=>{const Te=t.find(wr=>wr.id===q.userId),Ne=q.combatStats,ht=(Ne==null?void 0:Ne.questionsAttempted)||0,Ot=(Ne==null?void 0:Ne.questionsCorrect)||0,Nt=ht>0?Math.round(Ot/ht*100):0,Yt=ht>=Im&&Ot>=Rm;return o.jsxs("tr",{className:"hover:bg-white/5",children:[o.jsx("td",{className:"py-2 pl-2 font-bold text-gray-500",children:xe+1}),o.jsx("td",{className:"py-2 font-bold text-white",children:(Te==null?void 0:Te.name)||q.userId.slice(0,8)}),o.jsx("td",{className:"py-2 text-center text-amber-400 font-bold",children:((Ne==null?void 0:Ne.totalDamageDealt)||0).toLocaleString()}),o.jsx("td",{className:"py-2 text-center text-green-400",children:Ot}),o.jsx("td",{className:"py-2 text-center text-gray-400",children:ht}),o.jsxs("td",{className:"py-2 text-center text-gray-300",children:[Nt,"%"]}),o.jsx("td",{className:"py-2 text-center text-red-400",children:(Ne==null?void 0:Ne.criticalHits)||0}),o.jsx("td",{className:"py-2 text-center text-purple-400",children:(Ne==null?void 0:Ne.longestStreak)||0}),o.jsx("td",{className:"py-2 text-center text-cyan-400",children:(Ne==null?void 0:Ne.damageReduced)||0}),o.jsx("td",{className:"py-2 text-center",children:Yt?o.jsx("span",{className:"text-green-400 text-[9px] font-bold",children:"QUALIFIED"}):o.jsx("span",{className:"text-red-400 text-[9px] font-bold",children:"DNQ"})})]},q.userId)})})]})})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Performance by Difficulty"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:["EASY","MEDIUM","HARD"].map(q=>{const xe=Bt.reduce((Nt,Yt)=>{var wr,Zr;return Nt+(((Zr=(wr=Yt.combatStats)==null?void 0:wr.correctByDifficulty)==null?void 0:Zr[q])||0)},0),Te=Bt.reduce((Nt,Yt)=>{var wr,Zr;return Nt+(((Zr=(wr=Yt.combatStats)==null?void 0:wr.incorrectByDifficulty)==null?void 0:Zr[q])||0)},0),Ne=xe+Te,ht=Ne>0?Math.round(xe/Ne*100):0,Ot=q==="EASY"?"green":q==="MEDIUM"?"yellow":"red";return o.jsxs("div",{className:`bg-${Ot}-500/5 border border-${Ot}-500/20 rounded-xl p-3 text-center`,children:[o.jsx("div",{className:`text-[10px] font-bold text-${Ot}-400 uppercase mb-1`,children:q}),o.jsxs("div",{className:"text-lg font-black text-white",children:[ht,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[xe,"/",Ne," correct"]})]},q)})})]})]})})]})},Rde=({students:t,availableSections:e,fullPage:r})=>{const{confirm:n}=al(),a=mi(),[i,s]=k.useState({}),[c,d]=k.useState(Rr.AP_PHYSICS),[h,p]=k.useState(!1),[m,y]=k.useState(""),[v,T]=k.useState(null),[S,w]=k.useState(""),[j,R]=k.useState(""),I=k.useMemo(()=>Object.values(Rr).filter(D=>D!=="Uncategorized"),[]);k.useEffect(()=>{const D=Re.subscribeToStudentGroups(c,U=>{s($=>({...$,[c]:U}))});return()=>D()},[c]);const L=i[c]||[],C=k.useMemo(()=>t.filter(D=>{var U;return D.role==="STUDENT"&&((U=D.enrolledClasses)==null?void 0:U.includes(c))}).filter(D=>!S||D.section===S),[t,c,S]),P=async()=>{if(m.trim())try{await Re.createStudentGroup(m.trim(),c,[]),y(""),p(!1),a.success("Group created.")}catch{a.error("Failed to create group.")}},N=async D=>{await n({message:"Delete this group? Members will lose access to the group chat.",confirmLabel:"Delete",variant:"danger"})&&await Re.deleteStudentGroup(D)},A=async(D,U)=>{if(D.members.some(Q=>Q.userId===U.id))return;const $=[...D.members,{userId:U.id,userName:U.name}];await Re.updateStudentGroup(D.id,{members:$})},E=async(D,U)=>{const $=D.members.filter(Q=>Q.userId!==U);await Re.updateStudentGroup(D.id,{members:$})},V=k.useMemo(()=>{var U;const D={};for(const $ of I)D[$]=((U=i[$])==null?void 0:U.length)||0;return D},[I,i]);return r?o.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500 pb-10",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Student Groups"}),o.jsx("p",{className:"text-gray-400",children:"Create and manage student groups across all classes."})]}),o.jsxs("button",{onClick:()=>p(!0),className:"bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-cyan-900/20",children:[o.jsx(Mi,{className:"w-4 h-4"})," New Group"]})]}),o.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:I.map(D=>o.jsxs("button",{onClick:()=>d(D),className:`px-5 py-2.5 rounded-xl text-sm font-bold whitespace-nowrap transition-all border ${c===D?"bg-purple-600/80 text-white border-purple-500/50 shadow-lg":"bg-white/5 text-gray-400 border-white/10 hover:bg-white/10 hover:text-white"}`,children:[D,V[D]>0&&o.jsx("span",{className:`ml-2 text-[10px] px-1.5 py-0.5 rounded-full ${c===D?"bg-white/20":"bg-white/10"}`,children:V[D]})]},D))}),h&&o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-5 backdrop-blur-md animate-in fade-in zoom-in-95 duration-200",children:[o.jsxs("h3",{className:"text-sm font-bold text-white mb-3",children:["Create Group for ",c]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"text",value:m,onChange:D=>y(D.target.value),placeholder:"Group name...",maxLength:40,className:"flex-1 bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-cyan-500 transition",onKeyDown:D=>D.key==="Enter"&&P(),autoFocus:!0}),o.jsx("button",{onClick:P,disabled:!m.trim(),className:"px-5 py-3 bg-cyan-600 hover:bg-cyan-500 disabled:opacity-40 text-white rounded-xl text-sm font-bold transition",children:"Create"}),o.jsx("button",{onClick:()=>{p(!1),y("")},className:"p-3 text-gray-400 hover:text-white transition",children:o.jsx(Da,{className:"w-5 h-5"})})]})]}),L.length===0?o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-12 backdrop-blur-md text-center",children:[o.jsx(is,{className:"w-14 h-14 mx-auto mb-4 text-gray-600"}),o.jsxs("h3",{className:"text-lg font-bold text-gray-400 mb-2",children:["No groups for ",c]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Create a group to get started with collaborative assignments and group chat."})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:L.map(D=>o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md hover:border-white/20 transition-all",children:[o.jsx("div",{className:"p-5 border-b border-white/5",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white text-lg",children:D.name}),o.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[D.members.length," member",D.members.length!==1?"s":"",o.jsx("span",{className:"mx-2 text-gray-700",children:"|"}),c]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>T(v===D.id?null:D.id),className:`p-2 rounded-lg transition ${v===D.id?"bg-cyan-500/20 text-cyan-400":"text-gray-500 hover:text-white hover:bg-white/10"}`,title:"Add members",children:o.jsx(Mx,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(D.id),className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-500/10 rounded-lg transition",title:"Delete group",children:o.jsx(ca,{className:"w-4 h-4"})})]})]})}),o.jsxs("div",{className:"p-5",children:[o.jsxs("div",{className:"flex flex-wrap gap-2",children:[D.members.map(U=>o.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-gray-300 hover:bg-white/10 transition group/member",children:[o.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[9px] font-bold text-purple-400",children:U.userName.charAt(0)}),U.userName,o.jsx("button",{onClick:()=>E(D,U.userId),className:"text-gray-600 hover:text-red-400 transition opacity-0 group-hover/member:opacity-100",children:o.jsx(mle,{className:"w-3 h-3"})})]},U.userId)),D.members.length===0&&o.jsxs("p",{className:"text-xs text-gray-600 italic py-2",children:["No members yet  click the ",o.jsx(Mx,{className:"w-3 h-3 inline"})," button to assign students."]})]}),v===D.id&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 animate-in fade-in slide-in-from-top-2 duration-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(E2,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),o.jsx("input",{type:"text",placeholder:"Search students...",value:j,onChange:U=>R(U.target.value),className:"w-full bg-black/30 border border-white/10 rounded-lg pl-8 pr-3 py-1.5 text-xs text-white placeholder-gray-600 focus:outline-none focus:border-cyan-500/50"})]}),e.length>0&&o.jsxs("select",{value:S,onChange:U=>w(U.target.value),className:"bg-black/30 border border-white/10 rounded-lg px-2 py-1.5 text-[10px] text-white",children:[o.jsx("option",{value:"",children:"All Sections"}),e.map(U=>o.jsx("option",{value:U,children:U},U))]})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5 max-h-40 overflow-y-auto custom-scrollbar",children:C.filter(U=>!D.members.some($=>$.userId===U.id)).filter(U=>!j||U.name.toLowerCase().includes(j.toLowerCase())).map(U=>o.jsxs("button",{onClick:()=>A(D,U),className:"px-3 py-1.5 bg-cyan-600/10 border border-cyan-500/20 hover:bg-cyan-500/30 rounded-lg text-xs text-cyan-300 font-medium transition",children:["+ ",U.name]},U.id))})]})]})]},D.id))})]}):o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[o.jsx(is,{className:"w-5 h-5 text-cyan-400"})," Student Groups"]}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Groups have moved to the sidebar for a better experience."})]})},Mde={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:o.jsx(oH,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:o.jsx(tH,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:o.jsx(C2,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},Pde=({onToggleChat:t,hasUnreadChat:e})=>{const[r,n]=k.useState(null),[a,i]=k.useState(!1),s=d=>{r===d?n(null):(n(d),i(!1))};if(!r)return o.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[o.jsxs("button",{onClick:()=>s("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[o.jsx(C2,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),o.jsxs("button",{onClick:()=>s("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[o.jsx(tH,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),o.jsxs("button",{onClick:()=>s("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[o.jsx(oH,{className:"w-6 h-6"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),t&&o.jsxs("button",{onClick:t,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[o.jsx(AA,{className:"w-6 h-6"}),e&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-3.5 h-3.5 bg-red-500 rounded-full border-2 border-[#0f0720] animate-pulse"}),o.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const c=Mde[r];return o.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${a?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[o.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-1.5 rounded-lg ${c.iconBg} ${c.iconText}`,children:c.icon}),o.jsx("span",{className:"font-bold text-white text-sm",children:c.label})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>i(!a),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:a?o.jsx(TA,{className:"w-4 h-4"}):o.jsx(iH,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>n(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:o.jsx(Da,{className:"w-4 h-4"})})]})]}),!a&&o.jsx("div",{className:"flex-1 bg-white relative",children:o.jsx("iframe",{src:c.src,className:"w-full h-full border-none",title:c.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},Dde=["","","","","","","",""],Lde=["","","","","","","","","","","","","","","","","","","","","","","","","",""],Bde=({user:t,isOpen:e,onClose:r,assignments:n,classConfigs:a,unreadChannels:i,onMarkChannelRead:s,onOpenResource:c})=>{var ft,Ge;const{confirm:d}=al(),[h,p]=k.useState([]),[m,y]=k.useState(""),[v,T]=k.useState("Main"),[S,w]=k.useState(!1),[j,R]=k.useState(!1),[I,L]=k.useState(null),[C,P]=k.useState(null),[N,A]=k.useState([]),[E,V]=k.useState([]),[D,U]=k.useState(null),[$,Q]=k.useState([]),[K,H]=k.useState(null),J=k.useRef(null),ie=k.useRef(null),pe=k.useRef(null),me=k.useMemo(()=>Object.values(Rr).filter(ue=>{var mt;if(ue===Rr.UNCATEGORIZED)return!1;if(t.role==="ADMIN")return!0;const Xe=a.find(Vt=>Vt.className===ue),wt=(mt=t.enrolledClasses)==null?void 0:mt.includes(ue),yt=Xe?Xe.features.communications:!0;return wt&&yt}),[a,t.role,t.enrolledClasses]),[X,ne]=k.useState(me[0]||"");k.useEffect(()=>{(!X||!me.includes(X))&&me.length>0&&ne(me[0])},[me]);const re=k.useMemo(()=>v==="Resources"&&C?`res_${C}`:v==="Resources"&&!C?"":v==="Groups"&&D?`group_${D}`:v==="Groups"&&!D||!X?"":`class_${X.replace(/\s+/g,"_").toLowerCase()}`,[X,v,C,D]),Ae=k.useRef(null),Se=k.useMemo(()=>n.filter(ue=>!(ue.classType!==X||ue.status==="DRAFT"||ue.status==="ARCHIVED"||ue.scheduledAt&&new Date(ue.scheduledAt)>new Date)),[n,X]),ze=k.useMemo(()=>h.filter(ue=>{var Xe;return ue.isGlobalPinned||((Xe=ue.pinnedBy)==null?void 0:Xe.includes(t.id))}),[h,t.id]),He=k.useMemo(()=>t.mutedUntil?new Date(t.mutedUntil)>new Date:!1,[t.mutedUntil]),st=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ue=>ue.startsWith("class_")),[i]),W=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ue=>ue.startsWith("res_")),[i]),he=k.useMemo(()=>!i||i.size===0?!1:Array.from(i).some(ue=>ue.startsWith("group_")),[i]),te=k.useRef(!1);k.useEffect(()=>{if(!e){te.current=!1;return}if(te.current||!i||i.size===0)return;te.current=!0;const ue=Array.from(i)[0];if(ue.startsWith("class_")){T("Main");const Xe=me.find(wt=>`class_${wt.replace(/\s+/g,"_").toLowerCase()}`===ue);Xe&&ne(Xe)}else ue.startsWith("res_")?(T("Resources"),P(ue.replace("res_",""))):ue.startsWith("group_")&&(T("Groups"),U(ue.replace("group_","")))},[e,i,me]),k.useEffect(()=>{!e||!re||s==null||s(re)},[e,re,s]),k.useEffect(()=>{if(!e)return;const ue=t.role==="ADMIN"?Re.subscribeToStudentGroups(X,A):Re.subscribeToMyGroups(t.id,A);return()=>ue()},[e,t.id,t.role,X]),k.useEffect(()=>{if(!e)return;let ue="";if(v==="Resources"&&C?ue=`res_${C}`:v==="Groups"&&D?ue=`group_${D}`:(v==="Main"||v==="Bookmarks")&&(ue=`class_${X.replace(/\s+/g,"_").toLowerCase()}`),!ue)return;w(!0);const Xe=Re.subscribeToChannelMessages(ue,wt=>{p(wt),w(!1)});return()=>{Xe()}},[e,X,v,C,D]),k.useEffect(()=>{if(!e||t.role!=="ADMIN")return;const ue=Re.subscribeToFlaggedMessages(wt=>{Q(wt)}),Xe=Re.subscribeToAllGroups(V);return()=>{ue(),Xe()}},[e,t.role]),k.useEffect(()=>{Ae.current&&(Ae.current.scrollTop=Ae.current.scrollHeight)},[h,S,v,C]),k.useEffect(()=>{const ue=Xe=>{J.current&&!J.current.contains(Xe.target)&&R(!1),ie.current&&!ie.current.contains(Xe.target)&&L(null)};return document.addEventListener("mousedown",ue),()=>document.removeEventListener("mousedown",ue)},[]),k.useEffect(()=>{if(!e)return;const ue=Xe=>{Xe.key==="Escape"&&r()};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[e,r]);const ae=k.useCallback(async ue=>{if(ue.preventDefault(),!(!m.trim()||!re)&&!He)try{await Re.sendMessage(t,m,re,X),y(""),R(!1)}catch(Xe){console.error("Failed to send message:",Xe)}},[m,re,He,t,X]),Ue=k.useCallback(async(ue,Xe)=>{try{await Re.toggleReaction(ue,Xe,t.id),L(null)}catch(wt){console.error(wt)}},[t.id]),Ye=k.useCallback(async ue=>{try{await Re.togglePersonalPin(ue,t.id)}catch(Xe){console.error(Xe)}},[t.id]),xt=k.useCallback(async(ue,Xe)=>{try{await Re.toggleGlobalPin(ue,!Xe)}catch(wt){console.error(wt)}},[]),it=async ue=>{if(await d({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await Re.deleteMessage(ue)}catch(Xe){console.error(Xe)}},Pt=async ue=>{try{await Re.unflagMessage(ue),await Re.resolveFlagByMessageId(ue)}catch(Xe){console.error(Xe)}},Ie=async ue=>{if(await d({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await Re.resolveFlagByMessageId(ue),await Re.deleteMessage(ue)}catch(Xe){console.error(Xe)}},Be=[{label:"15 min",minutes:15},{label:"1 hour",minutes:60},{label:"24 hours",minutes:1440},{label:"Indefinite",minutes:Re.INDEFINITE_MUTE}],rt=async ue=>{if(K){try{await Re.muteUser(K.senderId,ue)}catch(Xe){console.error(Xe)}H(null)}};return k.useEffect(()=>{const ue=Xe=>{pe.current&&!pe.current.contains(Xe.target)&&H(null)};return K&&document.addEventListener("mousedown",ue),()=>document.removeEventListener("mousedown",ue)},[K]),e?o.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[v==="Resources"&&C||v==="Groups"&&D?o.jsx("button",{onClick:()=>{P(null),U(null)},className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:o.jsx(Loe,{className:"w-5 h-5"})}):o.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:o.jsx(AA,{className:"w-5 h-5"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:v==="Moderation"?"Moderation Queue":v==="Groups"?D?(ft=N.find(ue=>ue.id===D))==null?void 0:ft.name:"My Groups":v==="Resources"?C?(Ge=Se.find(ue=>ue.id===C))==null?void 0:Ge.title:"Class Resources":X}),v!=="Resources"&&v!=="Moderation"&&v!=="Groups"&&me.length>1&&o.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[o.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:X}),o.jsx(Ai,{className:"w-3 h-3 text-gray-500 ml-1"}),o.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:X,onChange:ue=>ne(ue.target.value),children:me.map(ue=>o.jsx("option",{value:ue,children:ue},ue))})]})]})]}),o.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:o.jsx(Da,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[o.jsxs("button",{onClick:()=>T("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all relative ${v==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(AA,{className:"w-5 h-5"}),st&&v!=="Main"&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("button",{onClick:()=>T("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all relative ${v==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(_o,{className:"w-5 h-5"}),W&&v!=="Resources"&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),(N.length>0||t.role==="ADMIN")&&o.jsxs("button",{onClick:()=>{T("Groups"),U(null)},"aria-label":"Group chats",className:`p-3 rounded-2xl transition-all relative ${v==="Groups"?"bg-cyan-600 text-white shadow-lg shadow-cyan-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(is,{className:"w-5 h-5"}),he&&v!=="Groups"?o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"}):N.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-cyan-500 text-white text-[8px] font-bold rounded-full flex items-center justify-center",children:N.length})]}),o.jsx("button",{onClick:()=>T("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${v==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:o.jsx(XI,{className:"w-5 h-5"})}),t.role==="ADMIN"&&o.jsxs("button",{onClick:()=>T("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${v==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[o.jsx(To,{className:"w-5 h-5"}),$.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:$.length})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col relative",children:[v==="Resources"&&!C&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:Se.map(ue=>o.jsxs("div",{onClick:()=>P(ue.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer flex justify-between items-center ${i!=null&&i.has(`res_${ue.id}`)?"border-indigo-500/40":"border-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[o.jsxs("div",{className:"relative p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:[o.jsx(Xoe,{className:"w-5 h-5"}),(i==null?void 0:i.has(`res_${ue.id}`))&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ue.title}),o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:ue.unit})]})]}),o.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),c==null||c(ue.id),r()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:o.jsx(Foe,{className:"w-4 h-4"})})]},ue.id))})}),v==="Groups"&&!D&&o.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:o.jsx("div",{className:"space-y-2",children:N.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(is,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"No groups yet"}),o.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Your teacher will assign you to a group."})]}):N.map(ue=>o.jsx("div",{onClick:()=>U(ue.id),className:`group p-4 bg-white/5 hover:bg-white/10 border rounded-2xl transition-all cursor-pointer ${i!=null&&i.has(`group_${ue.id}`)?"border-cyan-500/40":"border-white/5"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"relative p-2.5 rounded-xl bg-cyan-500/10 text-cyan-400 group-hover:bg-cyan-500 group-hover:text-white transition shadow-inner",children:[o.jsx(is,{className:"w-5 h-5"}),(i==null?void 0:i.has(`group_${ue.id}`))&&o.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse"})]}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:ue.name}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:[ue.members.length," member",ue.members.length!==1?"s":"","  ",ue.classType]})]})]})},ue.id))})}),v==="Moderation"&&t.role==="ADMIN"&&o.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Os,{className:"w-4 h-4 text-red-400"}),o.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),o.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[$.length," item",$.length!==1?"s":""]})]}),$.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[o.jsx(To,{className:"w-10 h-10 mb-3 opacity-30"}),o.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):o.jsx("div",{className:"space-y-3",children:$.map(ue=>{var Xe,wt,yt;return o.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300",children:ue.senderName}),o.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(ue.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),o.jsx("p",{className:"text-sm text-gray-200 mb-1",children:ue.content}),ue.systemNote&&o.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:ue.systemNote}),o.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:(Xe=ue.channelId)!=null&&Xe.startsWith("group_")?`Group: ${((wt=E.find(mt=>mt.id===ue.channelId.replace("group_","")))==null?void 0:wt.name)||ue.channelId.replace("group_","")}`:((yt=ue.channelId)==null?void 0:yt.replace("class_","").replace("res_","Resource: ").replace(/_/g," "))||"unknown channel"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>Pt(ue.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[o.jsx(lu,{className:"w-3.5 h-3.5"})," Approve"]}),o.jsxs("button",{onClick:()=>Ie(ue.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[o.jsx(ca,{className:"w-3.5 h-3.5"})," Delete"]}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===`flag-${ue.id}`?null:{id:`flag-${ue.id}`,senderId:ue.senderId,senderName:ue.senderName}),className:"flex items-center justify-center gap-1.5 px-3 py-2 bg-orange-600/20 hover:bg-orange-600/40 border border-orange-500/30 text-orange-400 rounded-xl text-xs font-bold transition",title:"Mute",children:o.jsx(Ix,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===`flag-${ue.id}`&&o.jsxs("div",{ref:pe,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ue.senderName]}),Be.map(mt=>o.jsx("button",{onClick:()=>rt(mt.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:mt.label},mt.minutes))]})]})]})]},ue.id)})})]}),(v==="Main"||v==="Bookmarks"||v==="Resources"&&C||v==="Groups"&&D)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{ref:Ae,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(v==="Bookmarks"?ze:h).map((ue,Xe,wt)=>{var Vt;const yt=ue.senderId===t.id,mt=Xe>0&&wt[Xe-1].senderId===ue.senderId&&new Date(ue.timestamp).getTime()-new Date(wt[Xe-1].timestamp).getTime()<3e5;return o.jsxs("div",{className:`group flex flex-col ${yt?"items-end":"items-start"} ${mt?"mt-1":"mt-4"}`,children:[!mt&&o.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[o.jsx("span",{className:`text-xs font-bold ${yt?"text-indigo-400":"text-gray-300"}`,children:ue.senderName}),o.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(ue.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),ue.isGlobalPinned&&o.jsx(eR,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),o.jsxs("div",{className:"relative max-w-[85%]",children:[o.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${yt?"right-0":"left-0"} z-30`,children:[o.jsx("button",{onClick:()=>L(ue.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:o.jsx(rR,{className:"w-3.5 h-3.5 text-yellow-400"})}),o.jsx("button",{onClick:()=>Ye(ue.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Vt=ue.pinnedBy)!=null&&Vt.includes(t.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:o.jsx(XI,{className:"w-3.5 h-3.5"})}),t.role==="ADMIN"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>xt(ue.id,!!ue.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${ue.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:o.jsx(eR,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>it(ue.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:o.jsx(ca,{className:"w-3.5 h-3.5"})}),ue.senderId!==t.id&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>H((K==null?void 0:K.id)===ue.id?null:{id:ue.id,senderId:ue.senderId,senderName:ue.senderName}),className:"p-1 hover:bg-orange-500/20 text-gray-400 hover:text-orange-400 rounded-full transition","aria-label":"Mute user",children:o.jsx(Ix,{className:"w-3.5 h-3.5"})}),(K==null?void 0:K.id)===ue.id&&o.jsxs("div",{ref:pe,className:"absolute bottom-full mb-1 right-0 bg-black/95 border border-orange-500/30 rounded-xl p-1 shadow-2xl z-50 animate-in zoom-in-95 whitespace-nowrap",children:[o.jsxs("div",{className:"text-[9px] text-gray-500 px-2 py-1 font-bold uppercase",children:["Mute ",ue.senderName]}),Be.map(ur=>o.jsx("button",{onClick:()=>rt(ur.minutes),className:"block w-full text-left px-3 py-1.5 text-xs text-orange-300 hover:bg-orange-500/20 rounded-lg transition",children:ur.label},ur.minutes))]})]})]})]}),I===ue.id&&o.jsx("div",{ref:ie,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${yt?"right-0":"left-0"}`,children:Dde.map(ur=>o.jsx("button",{onClick:()=>Ue(ue.id,ur),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:ur},ur))}),o.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${yt?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${ue.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${ue.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:ue.content}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:ue.reactions&&Object.entries(ue.reactions).map(([ur,qr])=>{const be=qr;return be.length>0&&o.jsxs("button",{onClick:()=>Ue(ue.id,ur),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${be.includes(t.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[ur," ",be.length]},ur)})})]})]},ue.id)})}),o.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:o.jsxs("form",{onSubmit:ae,className:"relative flex items-center gap-2",children:[j&&o.jsx("div",{ref:J,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:Lde.map(ue=>o.jsx("button",{type:"button",onClick:()=>y(Xe=>Xe+ue),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:ue},ue))}),o.jsx("button",{type:"button",onClick:()=>R(!j),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:o.jsx(rR,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:m,onChange:ue=>y(ue.target.value),placeholder:He?"Transmission Disabled":"Type message...",disabled:!re||He,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),o.jsx("button",{type:"submit",disabled:!re||He||!m.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:o.jsx(hH,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function wG(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=wG(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function fr(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=wG(t))&&(n&&(n+=" "),n+=e);return n}var w3,tM;function os(){if(tM)return w3;tM=1;var t=Array.isArray;return w3=t,w3}var S3,rM;function SG(){if(rM)return S3;rM=1;var t=typeof Qy=="object"&&Qy&&Qy.Object===Object&&Qy;return S3=t,S3}var _3,nM;function il(){if(nM)return _3;nM=1;var t=SG(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return _3=r,_3}var T3,aM;function d1(){if(aM)return T3;aM=1;var t=il(),e=t.Symbol;return T3=e,T3}var A3,iM;function $de(){if(iM)return A3;iM=1;var t=d1(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,a=t?t.toStringTag:void 0;function i(s){var c=r.call(s,a),d=s[a];try{s[a]=void 0;var h=!0}catch{}var p=n.call(s);return h&&(c?s[a]=d:delete s[a]),p}return A3=i,A3}var N3,sM;function Ude(){if(sM)return N3;sM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return N3=r,N3}var E3,oM;function fc(){if(oM)return E3;oM=1;var t=d1(),e=$de(),r=Ude(),n="[object Null]",a="[object Undefined]",i=t?t.toStringTag:void 0;function s(c){return c==null?c===void 0?a:n:i&&i in Object(c)?e(c):r(c)}return E3=s,E3}var j3,lM;function pc(){if(lM)return j3;lM=1;function t(e){return e!=null&&typeof e=="object"}return j3=t,j3}var k3,cM;function Mf(){if(cM)return k3;cM=1;var t=fc(),e=pc(),r="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&t(a)==r}return k3=n,k3}var C3,uM;function oE(){if(uM)return C3;uM=1;var t=os(),e=Mf(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(t(i))return!1;var c=typeof i;return c=="number"||c=="symbol"||c=="boolean"||i==null||e(i)?!0:n.test(i)||!r.test(i)||s!=null&&i in Object(s)}return C3=a,C3}var O3,dM;function Du(){if(dM)return O3;dM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return O3=t,O3}var I3,hM;function lE(){if(hM)return I3;hM=1;var t=fc(),e=Du(),r="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(c){if(!e(c))return!1;var d=t(c);return d==n||d==a||d==r||d==i}return I3=s,I3}var R3,fM;function zde(){if(fM)return R3;fM=1;var t=il(),e=t["__core-js_shared__"];return R3=e,R3}var M3,pM;function Vde(){if(pM)return M3;pM=1;var t=zde(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return M3=r,M3}var P3,mM;function _G(){if(mM)return P3;mM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return P3=r,P3}var D3,gM;function Fde(){if(gM)return D3;gM=1;var t=lE(),e=Vde(),r=Du(),n=_G(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,h=c.hasOwnProperty,p=RegExp("^"+d.call(h).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(y){if(!r(y)||e(y))return!1;var v=t(y)?p:i;return v.test(n(y))}return D3=m,D3}var L3,yM;function qde(){if(yM)return L3;yM=1;function t(e,r){return e==null?void 0:e[r]}return L3=t,L3}var B3,vM;function f0(){if(vM)return B3;vM=1;var t=Fde(),e=qde();function r(n,a){var i=e(n,a);return t(i)?i:void 0}return B3=r,B3}var $3,xM;function B2(){if(xM)return $3;xM=1;var t=f0(),e=t(Object,"create");return $3=e,$3}var U3,bM;function Hde(){if(bM)return U3;bM=1;var t=B2();function e(){this.__data__=t?t(null):{},this.size=0}return U3=e,U3}var z3,wM;function Gde(){if(wM)return z3;wM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return z3=t,z3}var V3,SM;function Wde(){if(SM)return V3;SM=1;var t=B2(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function a(i){var s=this.__data__;if(t){var c=s[i];return c===e?void 0:c}return n.call(s,i)?s[i]:void 0}return V3=a,V3}var F3,_M;function Kde(){if(_M)return F3;_M=1;var t=B2(),e=Object.prototype,r=e.hasOwnProperty;function n(a){var i=this.__data__;return t?i[a]!==void 0:r.call(i,a)}return F3=n,F3}var q3,TM;function Qde(){if(TM)return q3;TM=1;var t=B2(),e="__lodash_hash_undefined__";function r(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=t&&a===void 0?e:a,this}return q3=r,q3}var H3,AM;function Xde(){if(AM)return H3;AM=1;var t=Hde(),e=Gde(),r=Wde(),n=Kde(),a=Qde();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,H3=i,H3}var G3,NM;function Yde(){if(NM)return G3;NM=1;function t(){this.__data__=[],this.size=0}return G3=t,G3}var W3,EM;function cE(){if(EM)return W3;EM=1;function t(e,r){return e===r||e!==e&&r!==r}return W3=t,W3}var K3,jM;function $2(){if(jM)return K3;jM=1;var t=cE();function e(r,n){for(var a=r.length;a--;)if(t(r[a][0],n))return a;return-1}return K3=e,K3}var Q3,kM;function Zde(){if(kM)return Q3;kM=1;var t=$2(),e=Array.prototype,r=e.splice;function n(a){var i=this.__data__,s=t(i,a);if(s<0)return!1;var c=i.length-1;return s==c?i.pop():r.call(i,s,1),--this.size,!0}return Q3=n,Q3}var X3,CM;function Jde(){if(CM)return X3;CM=1;var t=$2();function e(r){var n=this.__data__,a=t(n,r);return a<0?void 0:n[a][1]}return X3=e,X3}var Y3,OM;function e0e(){if(OM)return Y3;OM=1;var t=$2();function e(r){return t(this.__data__,r)>-1}return Y3=e,Y3}var Z3,IM;function t0e(){if(IM)return Z3;IM=1;var t=$2();function e(r,n){var a=this.__data__,i=t(a,r);return i<0?(++this.size,a.push([r,n])):a[i][1]=n,this}return Z3=e,Z3}var J3,RM;function U2(){if(RM)return J3;RM=1;var t=Yde(),e=Zde(),r=Jde(),n=e0e(),a=t0e();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,J3=i,J3}var e6,MM;function uE(){if(MM)return e6;MM=1;var t=f0(),e=il(),r=t(e,"Map");return e6=r,e6}var t6,PM;function r0e(){if(PM)return t6;PM=1;var t=Xde(),e=U2(),r=uE();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return t6=n,t6}var r6,DM;function n0e(){if(DM)return r6;DM=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return r6=t,r6}var n6,LM;function z2(){if(LM)return n6;LM=1;var t=n0e();function e(r,n){var a=r.__data__;return t(n)?a[typeof n=="string"?"string":"hash"]:a.map}return n6=e,n6}var a6,BM;function a0e(){if(BM)return a6;BM=1;var t=z2();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return a6=e,a6}var i6,$M;function i0e(){if($M)return i6;$M=1;var t=z2();function e(r){return t(this,r).get(r)}return i6=e,i6}var s6,UM;function s0e(){if(UM)return s6;UM=1;var t=z2();function e(r){return t(this,r).has(r)}return s6=e,s6}var o6,zM;function o0e(){if(zM)return o6;zM=1;var t=z2();function e(r,n){var a=t(this,r),i=a.size;return a.set(r,n),this.size+=a.size==i?0:1,this}return o6=e,o6}var l6,VM;function dE(){if(VM)return l6;VM=1;var t=r0e(),e=a0e(),r=i0e(),n=s0e(),a=o0e();function i(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var h=s[c];this.set(h[0],h[1])}}return i.prototype.clear=t,i.prototype.delete=e,i.prototype.get=r,i.prototype.has=n,i.prototype.set=a,l6=i,l6}var c6,FM;function TG(){if(FM)return c6;FM=1;var t=dE(),e="Expected a function";function r(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,c=a?a.apply(this,s):s[0],d=i.cache;if(d.has(c))return d.get(c);var h=n.apply(this,s);return i.cache=d.set(c,h)||d,h};return i.cache=new(r.Cache||t),i}return r.Cache=t,c6=r,c6}var u6,qM;function l0e(){if(qM)return u6;qM=1;var t=TG(),e=500;function r(n){var a=t(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return u6=r,u6}var d6,HM;function c0e(){if(HM)return d6;HM=1;var t=l0e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,c,d,h){i.push(d?h.replace(r,"$1"):c||s)}),i});return d6=n,d6}var h6,GM;function hE(){if(GM)return h6;GM=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=r(e[n],n,e);return i}return h6=t,h6}var f6,WM;function u0e(){if(WM)return f6;WM=1;var t=d1(),e=hE(),r=os(),n=Mf(),a=t?t.prototype:void 0,i=a?a.toString:void 0;function s(c){if(typeof c=="string")return c;if(r(c))return e(c,s)+"";if(n(c))return i?i.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return f6=s,f6}var p6,KM;function AG(){if(KM)return p6;KM=1;var t=u0e();function e(r){return r==null?"":t(r)}return p6=e,p6}var m6,QM;function NG(){if(QM)return m6;QM=1;var t=os(),e=oE(),r=c0e(),n=AG();function a(i,s){return t(i)?i:e(i,s)?[i]:r(n(i))}return m6=a,m6}var g6,XM;function V2(){if(XM)return g6;XM=1;var t=Mf();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return g6=e,g6}var y6,YM;function fE(){if(YM)return y6;YM=1;var t=NG(),e=V2();function r(n,a){a=t(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return y6=r,y6}var v6,ZM;function EG(){if(ZM)return v6;ZM=1;var t=fE();function e(r,n,a){var i=r==null?void 0:t(r,n);return i===void 0?a:i}return v6=e,v6}var d0e=EG();const Zs=Kr(d0e);var x6,JM;function h0e(){if(JM)return x6;JM=1;function t(e){return e==null}return x6=t,x6}var f0e=h0e();const lr=Kr(f0e);var b6,eP;function p0e(){if(eP)return b6;eP=1;var t=fc(),e=os(),r=pc(),n="[object String]";function a(i){return typeof i=="string"||!e(i)&&r(i)&&t(i)==n}return b6=a,b6}var m0e=p0e();const e0=Kr(m0e);var g0e=lE();const rr=Kr(g0e);var y0e=Du();const Pf=Kr(y0e);var w6={exports:{}},en={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tP;function v0e(){if(tP)return en;tP=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var j=w.$$typeof;switch(j){case t:switch(w=w.type,w){case r:case a:case n:case h:case p:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case m:case i:return w;default:return j}}case e:return j}}}return en.ContextConsumer=s,en.ContextProvider=i,en.Element=t,en.ForwardRef=d,en.Fragment=r,en.Lazy=y,en.Memo=m,en.Portal=e,en.Profiler=a,en.StrictMode=n,en.Suspense=h,en.SuspenseList=p,en.isAsyncMode=function(){return!1},en.isConcurrentMode=function(){return!1},en.isContextConsumer=function(w){return S(w)===s},en.isContextProvider=function(w){return S(w)===i},en.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===t},en.isForwardRef=function(w){return S(w)===d},en.isFragment=function(w){return S(w)===r},en.isLazy=function(w){return S(w)===y},en.isMemo=function(w){return S(w)===m},en.isPortal=function(w){return S(w)===e},en.isProfiler=function(w){return S(w)===a},en.isStrictMode=function(w){return S(w)===n},en.isSuspense=function(w){return S(w)===h},en.isSuspenseList=function(w){return S(w)===p},en.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===p||w===v||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===m||w.$$typeof===i||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},en.typeOf=S,en}var rP;function x0e(){return rP||(rP=1,w6.exports=v0e()),w6.exports}var b0e=x0e(),S6,nP;function jG(){if(nP)return S6;nP=1;var t=fc(),e=pc(),r="[object Number]";function n(a){return typeof a=="number"||e(a)&&t(a)==r}return S6=n,S6}var _6,aP;function w0e(){if(aP)return _6;aP=1;var t=jG();function e(r){return t(r)&&r!=+r}return _6=e,_6}var S0e=w0e();const h1=Kr(S0e);var _0e=jG();const T0e=Kr(_0e);var vo=function(e){return e===0?0:e>0?1:-1},Ed=function(e){return e0(e)&&e.indexOf("%")===e.length-1},vt=function(e){return T0e(e)&&!h1(e)},A0e=function(e){return lr(e)},La=function(e){return vt(e)||e0(e)},N0e=0,f1=function(e){var r=++N0e;return"".concat(e||"").concat(r)},xo=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(e)&&!e0(e))return n;var i;if(Ed(e)){var s=e.indexOf("%");i=r*parseFloat(e.slice(0,s))/100}else i=+e;return h1(i)&&(i=n),a&&i>r&&(i=r),i},su=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},E0e=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},Zi=function(e,r){return vt(e)&&vt(r)?function(n){return e+n*(r-e)}:function(){return r}};function Vx(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Zs(n,e))===r})}var j0e=function(e){if(!e||!e.length)return null;for(var r=e.length,n=0,a=0,i=0,s=0,c=1/0,d=-1/0,h=0,p=0,m=0;m<r;m++)h=e[m].cx||0,p=e[m].cy||0,n+=h,a+=p,i+=h*p,s+=h*h,c=Math.min(c,h),d=Math.max(d,h);var y=r*s!==n*n?(r*i-n*a)/(r*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(a-y*n)/r}},k0e=function(e,r){return vt(e)&&vt(r)?e-r:e0(e)&&e0(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Ah(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function $A(t){"@babel/helpers - typeof";return $A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$A(t)}var C0e=["viewBox","children"],O0e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],iP=["points","pathLength"],T6={svg:C0e,polygon:iP,polyline:iP},pE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Fx=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),!Pf(n))return null;var a={};return Object.keys(n).forEach(function(i){pE.includes(i)&&(a[i]=r||function(s){return n[i](n,s)})}),a},I0e=function(e,r,n){return function(a){return e(r,n,a),null}},t0=function(e,r,n){if(!Pf(e)||$A(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(i){var s=e[i];pE.includes(i)&&typeof s=="function"&&(a||(a={}),a[i]=I0e(s,r,n))}),a},R0e=["children"],M0e=["children"];function sP(t,e){if(t==null)return{};var r=P0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function P0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var oP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Wl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},lP=null,A6=null,mE=function t(e){if(e===lP&&Array.isArray(A6))return A6;var r=[];return k.Children.forEach(e,function(n){lr(n)||(b0e.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),A6=r,lP=e,r};function ks(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Wl(a)}):n=[Wl(e)],mE(t).forEach(function(a){var i=Zs(a,"type.displayName")||Zs(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Ss(t,e){var r=ks(t,e);return r&&r[0]}var cP=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!vt(n)||n<=0||!vt(a)||a<=0)},D0e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],L0e=function(e){return e&&e.type&&e0(e.type)&&D0e.indexOf(e.type)>=0},B0e=function(e,r,n,a){var i,s=(i=T6==null?void 0:T6[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!rr(e)&&(a&&s.includes(r)||O0e.includes(r))||n&&pE.includes(r)},zt=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(k.isValidElement(e)&&(a=e.props),!Pf(a))return null;var i={};return Object.keys(a).forEach(function(s){var c;B0e((c=a)===null||c===void 0?void 0:c[s],s,r,n)&&(i[s]=a[s])}),i},UA=function t(e,r){if(e===r)return!0;var n=k.Children.count(e);if(n!==k.Children.count(r))return!1;if(n===0)return!0;if(n===1)return uP(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=e[a],s=r[a];if(Array.isArray(i)||Array.isArray(s)){if(!t(i,s))return!1}else if(!uP(i,s))return!1}return!0},uP=function(e,r){if(lr(e)&&lr(r))return!0;if(!lr(e)&&!lr(r)){var n=e.props||{},a=n.children,i=sP(n,R0e),s=r.props||{},c=s.children,d=sP(s,M0e);return a&&c?Ah(i,d)&&UA(a,c):!a&&!c?Ah(i,d):!1}return!1},dP=function(e,r){var n=[],a={};return mE(e).forEach(function(i,s){if(L0e(i))n.push(i);else if(i){var c=Wl(i.type),d=r[c]||{},h=d.handler,p=d.once;if(h&&(!p||!a[c])){var m=h(i,c,s);n.push(m),a[c]=!0}}}),n},$0e=function(e){var r=e&&e.type;return r&&oP[r]?oP[r]:null},U0e=function(e,r){return mE(r).indexOf(e)},z0e=["children","width","height","viewBox","className","style","title","desc"];function zA(){return zA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zA.apply(this,arguments)}function V0e(t,e){if(t==null)return{};var r=F0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function F0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function VA(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,i=t.className,s=t.style,c=t.title,d=t.desc,h=V0e(t,z0e),p=a||{width:r,height:n,x:0,y:0},m=fr("recharts-surface",i);return se.createElement("svg",zA({},zt(h,!0,"svg"),{className:m,width:r,height:n,style:s,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height)}),se.createElement("title",null,c),se.createElement("desc",null,d),e)}var q0e=["children","className"];function FA(){return FA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FA.apply(this,arguments)}function H0e(t,e){if(t==null)return{};var r=G0e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G0e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var zr=se.forwardRef(function(t,e){var r=t.children,n=t.className,a=H0e(t,q0e),i=fr("recharts-layer",n);return se.createElement("g",FA({className:i},zt(a,!0),{ref:e}),r)}),Kl=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},N6,hP;function W0e(){if(hP)return N6;hP=1;function t(e,r,n){var a=-1,i=e.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var s=Array(i);++a<i;)s[a]=e[a+r];return s}return N6=t,N6}var E6,fP;function K0e(){if(fP)return E6;fP=1;var t=W0e();function e(r,n,a){var i=r.length;return a=a===void 0?i:a,!n&&a>=i?r:t(r,n,a)}return E6=e,E6}var j6,pP;function kG(){if(pP)return j6;pP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+t+a+i+"]");function d(h){return c.test(h)}return j6=d,j6}var k6,mP;function Q0e(){if(mP)return k6;mP=1;function t(e){return e.split("")}return k6=t,k6}var C6,gP;function X0e(){if(gP)return C6;gP=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",a=e+r+n,i="\\ufe0e\\ufe0f",s="["+t+"]",c="["+a+"]",d="\\ud83c[\\udffb-\\udfff]",h="(?:"+c+"|"+d+")",p="[^"+t+"]",m="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",v="\\u200d",T=h+"?",S="["+i+"]?",w="(?:"+v+"(?:"+[p,m,y].join("|")+")"+S+T+")*",j=S+T+w,R="(?:"+[p+c+"?",c,m,y,s].join("|")+")",I=RegExp(d+"(?="+d+")|"+R+j,"g");function L(C){return C.match(I)||[]}return C6=L,C6}var O6,yP;function Y0e(){if(yP)return O6;yP=1;var t=Q0e(),e=kG(),r=X0e();function n(a){return e(a)?r(a):t(a)}return O6=n,O6}var I6,vP;function Z0e(){if(vP)return I6;vP=1;var t=K0e(),e=kG(),r=Y0e(),n=AG();function a(i){return function(s){s=n(s);var c=e(s)?r(s):void 0,d=c?c[0]:s.charAt(0),h=c?t(c,1).join(""):s.slice(1);return d[i]()+h}}return I6=a,I6}var R6,xP;function J0e(){if(xP)return R6;xP=1;var t=Z0e(),e=t("toUpperCase");return R6=e,R6}var ehe=J0e();const F2=Kr(ehe);function Rn(t){return function(){return t}}const CG=Math.cos,qx=Math.sin,Eo=Math.sqrt,Hx=Math.PI,q2=2*Hx,qA=Math.PI,HA=2*qA,xd=1e-6,the=HA-xd;function OG(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function rhe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return OG;const r=10**e;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class nhe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?OG:rhe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,i,s){this._append`C${+e},${+r},${+n},${+a},${this._x1=+i},${this._y1=+s}`}arcTo(e,r,n,a,i){if(e=+e,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let s=this._x1,c=this._y1,d=n-e,h=a-r,p=s-e,m=c-r,y=p*p+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(y>xd)if(!(Math.abs(m*d-h*p)>xd)||!i)this._append`L${this._x1=e},${this._y1=r}`;else{let v=n-s,T=a-c,S=d*d+h*h,w=v*v+T*T,j=Math.sqrt(S),R=Math.sqrt(y),I=i*Math.tan((qA-Math.acos((S+y-w)/(2*j*R)))/2),L=I/R,C=I/j;Math.abs(L-1)>xd&&this._append`L${e+L*p},${r+L*m}`,this._append`A${i},${i},0,0,${+(m*v>p*T)},${this._x1=e+C*d},${this._y1=r+C*h}`}}arc(e,r,n,a,i,s){if(e=+e,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),h=e+c,p=r+d,m=1^s,y=s?a-i:i-a;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xd||Math.abs(this._y1-p)>xd)&&this._append`L${h},${p}`,n&&(y<0&&(y=y%HA+HA),y>the?this._append`A${n},${n},0,1,${m},${e-c},${r-d}A${n},${n},0,1,${m},${this._x1=h},${this._y1=p}`:y>xd&&this._append`A${n},${n},0,${+(y>=qA)},${m},${this._x1=e+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function gE(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new nhe(e)}function yE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function IG(t){this._context=t}IG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function H2(t){return new IG(t)}function RG(t){return t[0]}function MG(t){return t[1]}function PG(t,e){var r=Rn(!0),n=null,a=H2,i=null,s=gE(c);t=typeof t=="function"?t:t===void 0?RG:Rn(t),e=typeof e=="function"?e:e===void 0?MG:Rn(e);function c(d){var h,p=(d=yE(d)).length,m,y=!1,v;for(n==null&&(i=a(v=s())),h=0;h<=p;++h)!(h<p&&r(m=d[h],h,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+t(m,h,d),+e(m,h,d));if(v)return i=null,v+""||null}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:Rn(+d),c):t},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Rn(+d),c):e},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Rn(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function yv(t,e,r){var n=null,a=Rn(!0),i=null,s=H2,c=null,d=gE(h);t=typeof t=="function"?t:t===void 0?RG:Rn(+t),e=typeof e=="function"?e:Rn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?MG:Rn(+r);function h(m){var y,v,T,S=(m=yE(m)).length,w,j=!1,R,I=new Array(S),L=new Array(S);for(i==null&&(c=s(R=d())),y=0;y<=S;++y){if(!(y<S&&a(w=m[y],y,m))===j)if(j=!j)v=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=v;--T)c.point(I[T],L[T]);c.lineEnd(),c.areaEnd()}j&&(I[y]=+t(w,y,m),L[y]=+e(w,y,m),c.point(n?+n(w,y,m):I[y],r?+r(w,y,m):L[y]))}if(R)return c=null,R+""||null}function p(){return PG().defined(a).curve(s).context(i)}return h.x=function(m){return arguments.length?(t=typeof m=="function"?m:Rn(+m),n=null,h):t},h.x0=function(m){return arguments.length?(t=typeof m=="function"?m:Rn(+m),h):t},h.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Rn(+m),h):n},h.y=function(m){return arguments.length?(e=typeof m=="function"?m:Rn(+m),r=null,h):e},h.y0=function(m){return arguments.length?(e=typeof m=="function"?m:Rn(+m),h):e},h.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Rn(+m),h):r},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(r)},h.lineX1=function(){return p().x(n).y(e)},h.defined=function(m){return arguments.length?(a=typeof m=="function"?m:Rn(!!m),h):a},h.curve=function(m){return arguments.length?(s=m,i!=null&&(c=s(i)),h):s},h.context=function(m){return arguments.length?(m==null?i=c=null:c=s(i=m),h):i},h}class DG{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function ahe(t){return new DG(t,!0)}function ihe(t){return new DG(t,!1)}const vE={draw(t,e){const r=Eo(e/Hx);t.moveTo(r,0),t.arc(0,0,r,0,q2)}},she={draw(t,e){const r=Eo(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},LG=Eo(1/3),ohe=LG*2,lhe={draw(t,e){const r=Eo(e/ohe),n=r*LG;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},che={draw(t,e){const r=Eo(e),n=-r/2;t.rect(n,n,r,r)}},uhe=.8908130915292852,BG=qx(Hx/10)/qx(7*Hx/10),dhe=qx(q2/10)*BG,hhe=-CG(q2/10)*BG,fhe={draw(t,e){const r=Eo(e*uhe),n=dhe*r,a=hhe*r;t.moveTo(0,-r),t.lineTo(n,a);for(let i=1;i<5;++i){const s=q2*i/5,c=CG(s),d=qx(s);t.lineTo(d*r,-c*r),t.lineTo(c*n-d*a,d*n+c*a)}t.closePath()}},M6=Eo(3),phe={draw(t,e){const r=-Eo(e/(M6*3));t.moveTo(0,r*2),t.lineTo(-M6*r,-r),t.lineTo(M6*r,-r),t.closePath()}},qs=-.5,Hs=Eo(3)/2,GA=1/Eo(12),mhe=(GA/2+1)*3,ghe={draw(t,e){const r=Eo(e/mhe),n=r/2,a=r*GA,i=n,s=r*GA+r,c=-i,d=s;t.moveTo(n,a),t.lineTo(i,s),t.lineTo(c,d),t.lineTo(qs*n-Hs*a,Hs*n+qs*a),t.lineTo(qs*i-Hs*s,Hs*i+qs*s),t.lineTo(qs*c-Hs*d,Hs*c+qs*d),t.lineTo(qs*n+Hs*a,qs*a-Hs*n),t.lineTo(qs*i+Hs*s,qs*s-Hs*i),t.lineTo(qs*c+Hs*d,qs*d-Hs*c),t.closePath()}};function yhe(t,e){let r=null,n=gE(a);t=typeof t=="function"?t:Rn(t||vE),e=typeof e=="function"?e:Rn(e===void 0?64:+e);function a(){let i;if(r||(r=i=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(t=typeof i=="function"?i:Rn(i),a):t},a.size=function(i){return arguments.length?(e=typeof i=="function"?i:Rn(+i),a):e},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Gx(){}function Wx(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function $G(t){this._context=t}$G.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vhe(t){return new $G(t)}function UG(t){this._context=t}UG.prototype={areaStart:Gx,areaEnd:Gx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Wx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xhe(t){return new UG(t)}function zG(t){this._context=t}zG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Wx(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bhe(t){return new zG(t)}function VG(t){this._context=t}VG.prototype={areaStart:Gx,areaEnd:Gx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function whe(t){return new VG(t)}function bP(t){return t<0?-1:1}function wP(t,e,r){var n=t._x1-t._x0,a=e-t._x1,i=(t._y1-t._y0)/(n||a<0&&-0),s=(r-t._y1)/(a||n<0&&-0),c=(i*a+s*n)/(n+a);return(bP(i)+bP(s))*Math.min(Math.abs(i),Math.abs(s),.5*Math.abs(c))||0}function SP(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function P6(t,e,r){var n=t._x0,a=t._y0,i=t._x1,s=t._y1,c=(i-n)/3;t._context.bezierCurveTo(n+c,a+c*e,i-c,s-c*r,i,s)}function Kx(t){this._context=t}Kx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P6(this,this._t0,SP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,P6(this,SP(this,r=wP(this,t,e)),r);break;default:P6(this,this._t0,r=wP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function FG(t){this._context=new qG(t)}(FG.prototype=Object.create(Kx.prototype)).point=function(t,e){Kx.prototype.point.call(this,e,t)};function qG(t){this._context=t}qG.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,i){this._context.bezierCurveTo(e,t,n,r,i,a)}};function She(t){return new Kx(t)}function _he(t){return new FG(t)}function HG(t){this._context=t}HG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=_P(t),a=_P(e),i=0,s=1;s<r;++i,++s)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],t[s],e[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function _P(t){var e,r=t.length-1,n,a=new Array(r),i=new Array(r),s=new Array(r);for(a[0]=0,i[0]=2,s[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,i[e]=4,s[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,i[r-1]=7,s[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/i[e-1],i[e]-=n,s[e]-=n*s[e-1];for(a[r-1]=s[r-1]/i[r-1],e=r-2;e>=0;--e)a[e]=(s[e]-a[e+1])/i[e];for(i[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)i[e]=2*t[e+1]-a[e+1];return[a,i]}function The(t){return new HG(t)}function G2(t,e){this._context=t,this._t=e}G2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function Ahe(t){return new G2(t,.5)}function Nhe(t){return new G2(t,0)}function Ehe(t){return new G2(t,1)}function Xh(t,e){if((s=t.length)>1)for(var r=1,n,a,i=t[e[0]],s,c=i.length;r<s;++r)for(a=i,i=t[e[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function WA(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function jhe(t,e){return t[e]}function khe(t){const e=[];return e.key=t,e}function Che(){var t=Rn([]),e=WA,r=Xh,n=jhe;function a(i){var s=Array.from(t.apply(this,arguments),khe),c,d=s.length,h=-1,p;for(const m of i)for(c=0,++h;c<d;++c)(s[c][h]=[0,+n(m,s[c].key,h,i)]).data=m;for(c=0,p=yE(e(s));c<d;++c)s[p[c]].index=c;return r(s,p),s}return a.keys=function(i){return arguments.length?(t=typeof i=="function"?i:Rn(Array.from(i)),a):t},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Rn(+i),a):n},a.order=function(i){return arguments.length?(e=i==null?WA:typeof i=="function"?i:Rn(Array.from(i)),a):e},a.offset=function(i){return arguments.length?(r=i??Xh,a):r},a}function Ohe(t,e){if((n=t.length)>0){for(var r,n,a=0,i=t[0].length,s;a<i;++a){for(s=r=0;r<n;++r)s+=t[r][a][1]||0;if(s)for(r=0;r<n;++r)t[r][a][1]/=s}Xh(t,e)}}function Ihe(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,i=n.length;r<i;++r){for(var s=0,c=0;s<a;++s)c+=t[s][r][1]||0;n[r][1]+=n[r][0]=-c/2}Xh(t,e)}}function Rhe(t,e){if(!(!((s=t.length)>0)||!((i=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,i,s;n<i;++n){for(var c=0,d=0,h=0;c<s;++c){for(var p=t[e[c]],m=p[n][1]||0,y=p[n-1][1]||0,v=(m-y)/2,T=0;T<c;++T){var S=t[e[T]],w=S[n][1]||0,j=S[n-1][1]||0;v+=w-j}d+=m,h+=v*m}a[n-1][1]+=a[n-1][0]=r,d&&(r-=h/d)}a[n-1][1]+=a[n-1][0]=r,Xh(t,e)}}function tg(t){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(t)}var Mhe=["type","size","sizeType"];function KA(){return KA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KA.apply(this,arguments)}function TP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function AP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(r),!0).forEach(function(n){Phe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Phe(t,e,r){return e=Dhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dhe(t){var e=Lhe(t,"string");return tg(e)=="symbol"?e:e+""}function Lhe(t,e){if(tg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Bhe(t,e){if(t==null)return{};var r=$he(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $he(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var GG={symbolCircle:vE,symbolCross:she,symbolDiamond:lhe,symbolSquare:che,symbolStar:fhe,symbolTriangle:phe,symbolWye:ghe},Uhe=Math.PI/180,zhe=function(e){var r="symbol".concat(F2(e));return GG[r]||vE},Vhe=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*Uhe;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Fhe=function(e,r){GG["symbol".concat(F2(e))]=r},W2=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,i=a===void 0?64:a,s=e.sizeType,c=s===void 0?"area":s,d=Bhe(e,Mhe),h=AP(AP({},d),{},{type:n,size:i,sizeType:c}),p=function(){var w=zhe(n),j=yhe().type(w).size(Vhe(i,c,n));return j()},m=h.className,y=h.cx,v=h.cy,T=zt(h,!0);return y===+y&&v===+v&&i===+i?se.createElement("path",KA({},T,{className:fr("recharts-symbols",m),transform:"translate(".concat(y,", ").concat(v,")"),d:p()})):null};W2.registerSymbol=Fhe;function Yh(t){"@babel/helpers - typeof";return Yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yh(t)}function QA(){return QA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},QA.apply(this,arguments)}function NP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NP(Object(r),!0).forEach(function(n){rg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ghe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KG(n.key),n)}}function Whe(t,e,r){return e&&Ghe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Khe(t,e,r){return e=Qx(e),Qhe(t,WG()?Reflect.construct(e,r||[],Qx(t).constructor):e.apply(t,r))}function Qhe(t,e){if(e&&(Yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xhe(t)}function Xhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WG=function(){return!!t})()}function Qx(t){return Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qx(t)}function Yhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XA(t,e)}function rg(t,e,r){return e=KG(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KG(t){var e=Zhe(t,"string");return Yh(e)=="symbol"?e:e+""}function Zhe(t,e){if(Yh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gs=32,xE=(function(t){function e(){return Hhe(this,e),Khe(this,e,arguments)}return Yhe(e,t),Whe(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Gs/2,s=Gs/6,c=Gs/3,d=n.inactive?a:n.color;if(n.type==="plainline")return se.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Gs,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return se.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Gs,"M").concat(2*c,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return se.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(Gs/8,"h").concat(Gs,"v").concat(Gs*3/4,"h").concat(-Gs,"z"),className:"recharts-legend-icon"});if(se.isValidElement(n.legendIcon)){var h=qhe({},n);return delete h.legendIcon,se.cloneElement(n.legendIcon,h)}return se.createElement(W2,{fill:d,cx:i,cy:i,size:Gs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,s=a.iconSize,c=a.layout,d=a.formatter,h=a.inactiveColor,p={x:0,y:0,width:Gs,height:Gs},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(v,T){var S=v.formatter||d,w=fr(rg(rg({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",v.inactive));if(v.type==="none")return null;var j=rr(v.value)?null:v.value;Kl(!rr(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var R=v.inactive?h:v.color;return se.createElement("li",QA({className:w,style:m,key:"legend-item-".concat(T)},t0(n.props,v,T)),se.createElement(VA,{width:s,height:s,viewBox:p,style:y},n.renderIcon(v)),se.createElement("span",{className:"recharts-legend-item-text",style:{color:R}},S?S(j,v,T):j))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,s=n.align;if(!a||!a.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?s:"left"};return se.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(k.PureComponent);rg(xE,"displayName","Legend");rg(xE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var D6,EP;function Jhe(){if(EP)return D6;EP=1;var t=U2();function e(){this.__data__=new t,this.size=0}return D6=e,D6}var L6,jP;function efe(){if(jP)return L6;jP=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return L6=t,L6}var B6,kP;function tfe(){if(kP)return B6;kP=1;function t(e){return this.__data__.get(e)}return B6=t,B6}var $6,CP;function rfe(){if(CP)return $6;CP=1;function t(e){return this.__data__.has(e)}return $6=t,$6}var U6,OP;function nfe(){if(OP)return U6;OP=1;var t=U2(),e=uE(),r=dE(),n=200;function a(i,s){var c=this.__data__;if(c instanceof t){var d=c.__data__;if(!e||d.length<n-1)return d.push([i,s]),this.size=++c.size,this;c=this.__data__=new r(d)}return c.set(i,s),this.size=c.size,this}return U6=a,U6}var z6,IP;function QG(){if(IP)return z6;IP=1;var t=U2(),e=Jhe(),r=efe(),n=tfe(),a=rfe(),i=nfe();function s(c){var d=this.__data__=new t(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=n,s.prototype.has=a,s.prototype.set=i,z6=s,z6}var V6,RP;function afe(){if(RP)return V6;RP=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return V6=e,V6}var F6,MP;function ife(){if(MP)return F6;MP=1;function t(e){return this.__data__.has(e)}return F6=t,F6}var q6,PP;function XG(){if(PP)return q6;PP=1;var t=dE(),e=afe(),r=ife();function n(a){var i=-1,s=a==null?0:a.length;for(this.__data__=new t;++i<s;)this.add(a[i])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,q6=n,q6}var H6,DP;function YG(){if(DP)return H6;DP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(e[n],n,e))return!0;return!1}return H6=t,H6}var G6,LP;function ZG(){if(LP)return G6;LP=1;function t(e,r){return e.has(r)}return G6=t,G6}var W6,BP;function JG(){if(BP)return W6;BP=1;var t=XG(),e=YG(),r=ZG(),n=1,a=2;function i(s,c,d,h,p,m){var y=d&n,v=s.length,T=c.length;if(v!=T&&!(y&&T>v))return!1;var S=m.get(s),w=m.get(c);if(S&&w)return S==c&&w==s;var j=-1,R=!0,I=d&a?new t:void 0;for(m.set(s,c),m.set(c,s);++j<v;){var L=s[j],C=c[j];if(h)var P=y?h(C,L,j,c,s,m):h(L,C,j,s,c,m);if(P!==void 0){if(P)continue;R=!1;break}if(I){if(!e(c,function(N,A){if(!r(I,A)&&(L===N||p(L,N,d,h,m)))return I.push(A)})){R=!1;break}}else if(!(L===C||p(L,C,d,h,m))){R=!1;break}}return m.delete(s),m.delete(c),R}return W6=i,W6}var K6,$P;function sfe(){if($P)return K6;$P=1;var t=il(),e=t.Uint8Array;return K6=e,K6}var Q6,UP;function ofe(){if(UP)return Q6;UP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a,i){n[++r]=[i,a]}),n}return Q6=t,Q6}var X6,zP;function bE(){if(zP)return X6;zP=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(a){n[++r]=a}),n}return X6=t,X6}var Y6,VP;function lfe(){if(VP)return Y6;VP=1;var t=d1(),e=sfe(),r=cE(),n=JG(),a=ofe(),i=bE(),s=1,c=2,d="[object Boolean]",h="[object Date]",p="[object Error]",m="[object Map]",y="[object Number]",v="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",j="[object ArrayBuffer]",R="[object DataView]",I=t?t.prototype:void 0,L=I?I.valueOf:void 0;function C(P,N,A,E,V,D,U){switch(A){case R:if(P.byteLength!=N.byteLength||P.byteOffset!=N.byteOffset)return!1;P=P.buffer,N=N.buffer;case j:return!(P.byteLength!=N.byteLength||!D(new e(P),new e(N)));case d:case h:case y:return r(+P,+N);case p:return P.name==N.name&&P.message==N.message;case v:case S:return P==N+"";case m:var $=a;case T:var Q=E&s;if($||($=i),P.size!=N.size&&!Q)return!1;var K=U.get(P);if(K)return K==N;E|=c,U.set(P,N);var H=n($(P),$(N),E,V,D,U);return U.delete(P),H;case w:if(L)return L.call(P)==L.call(N)}return!1}return Y6=C,Y6}var Z6,FP;function eW(){if(FP)return Z6;FP=1;function t(e,r){for(var n=-1,a=r.length,i=e.length;++n<a;)e[i+n]=r[n];return e}return Z6=t,Z6}var J6,qP;function cfe(){if(qP)return J6;qP=1;var t=eW(),e=os();function r(n,a,i){var s=a(n);return e(n)?s:t(s,i(n))}return J6=r,J6}var eS,HP;function ufe(){if(HP)return eS;HP=1;function t(e,r){for(var n=-1,a=e==null?0:e.length,i=0,s=[];++n<a;){var c=e[n];r(c,n,e)&&(s[i++]=c)}return s}return eS=t,eS}var tS,GP;function dfe(){if(GP)return tS;GP=1;function t(){return[]}return tS=t,tS}var rS,WP;function hfe(){if(WP)return rS;WP=1;var t=ufe(),e=dfe(),r=Object.prototype,n=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(s){return s==null?[]:(s=Object(s),t(a(s),function(c){return n.call(s,c)}))}:e;return rS=i,rS}var nS,KP;function ffe(){if(KP)return nS;KP=1;function t(e,r){for(var n=-1,a=Array(e);++n<e;)a[n]=r(n);return a}return nS=t,nS}var aS,QP;function pfe(){if(QP)return aS;QP=1;var t=fc(),e=pc(),r="[object Arguments]";function n(a){return e(a)&&t(a)==r}return aS=n,aS}var iS,XP;function wE(){if(XP)return iS;XP=1;var t=pfe(),e=pc(),r=Object.prototype,n=r.hasOwnProperty,a=r.propertyIsEnumerable,i=t((function(){return arguments})())?t:function(s){return e(s)&&n.call(s,"callee")&&!a.call(s,"callee")};return iS=i,iS}var sm={exports:{}},sS,YP;function mfe(){if(YP)return sS;YP=1;function t(){return!1}return sS=t,sS}sm.exports;var ZP;function tW(){return ZP||(ZP=1,(function(t,e){var r=il(),n=mfe(),a=e&&!e.nodeType&&e,i=a&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===a,c=s?r.Buffer:void 0,d=c?c.isBuffer:void 0,h=d||n;t.exports=h})(sm,sm.exports)),sm.exports}var oS,JP;function SE(){if(JP)return oS;JP=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,a){var i=typeof n;return a=a??t,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return oS=r,oS}var lS,eD;function _E(){if(eD)return lS;eD=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return lS=e,lS}var cS,tD;function gfe(){if(tD)return cS;tD=1;var t=fc(),e=_E(),r=pc(),n="[object Arguments]",a="[object Array]",i="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",p="[object Number]",m="[object Object]",y="[object RegExp]",v="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",j="[object DataView]",R="[object Float32Array]",I="[object Float64Array]",L="[object Int8Array]",C="[object Int16Array]",P="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",E="[object Uint16Array]",V="[object Uint32Array]",D={};D[R]=D[I]=D[L]=D[C]=D[P]=D[N]=D[A]=D[E]=D[V]=!0,D[n]=D[a]=D[w]=D[i]=D[j]=D[s]=D[c]=D[d]=D[h]=D[p]=D[m]=D[y]=D[v]=D[T]=D[S]=!1;function U($){return r($)&&e($.length)&&!!D[t($)]}return cS=U,cS}var uS,rD;function rW(){if(rD)return uS;rD=1;function t(e){return function(r){return e(r)}}return uS=t,uS}var om={exports:{}};om.exports;var nD;function yfe(){return nD||(nD=1,(function(t,e){var r=SG(),n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,i=a&&a.exports===n,s=i&&r.process,c=(function(){try{var d=a&&a.require&&a.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();t.exports=c})(om,om.exports)),om.exports}var dS,aD;function nW(){if(aD)return dS;aD=1;var t=gfe(),e=rW(),r=yfe(),n=r&&r.isTypedArray,a=n?e(n):t;return dS=a,dS}var hS,iD;function vfe(){if(iD)return hS;iD=1;var t=ffe(),e=wE(),r=os(),n=tW(),a=SE(),i=nW(),s=Object.prototype,c=s.hasOwnProperty;function d(h,p){var m=r(h),y=!m&&e(h),v=!m&&!y&&n(h),T=!m&&!y&&!v&&i(h),S=m||y||v||T,w=S?t(h.length,String):[],j=w.length;for(var R in h)(p||c.call(h,R))&&!(S&&(R=="length"||v&&(R=="offset"||R=="parent")||T&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||a(R,j)))&&w.push(R);return w}return hS=d,hS}var fS,sD;function xfe(){if(sD)return fS;sD=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,a=typeof n=="function"&&n.prototype||t;return r===a}return fS=e,fS}var pS,oD;function aW(){if(oD)return pS;oD=1;function t(e,r){return function(n){return e(r(n))}}return pS=t,pS}var mS,lD;function bfe(){if(lD)return mS;lD=1;var t=aW(),e=t(Object.keys,Object);return mS=e,mS}var gS,cD;function wfe(){if(cD)return gS;cD=1;var t=xfe(),e=bfe(),r=Object.prototype,n=r.hasOwnProperty;function a(i){if(!t(i))return e(i);var s=[];for(var c in Object(i))n.call(i,c)&&c!="constructor"&&s.push(c);return s}return gS=a,gS}var yS,uD;function p1(){if(uD)return yS;uD=1;var t=lE(),e=_E();function r(n){return n!=null&&e(n.length)&&!t(n)}return yS=r,yS}var vS,dD;function K2(){if(dD)return vS;dD=1;var t=vfe(),e=wfe(),r=p1();function n(a){return r(a)?t(a):e(a)}return vS=n,vS}var xS,hD;function Sfe(){if(hD)return xS;hD=1;var t=cfe(),e=hfe(),r=K2();function n(a){return t(a,r,e)}return xS=n,xS}var bS,fD;function _fe(){if(fD)return bS;fD=1;var t=Sfe(),e=1,r=Object.prototype,n=r.hasOwnProperty;function a(i,s,c,d,h,p){var m=c&e,y=t(i),v=y.length,T=t(s),S=T.length;if(v!=S&&!m)return!1;for(var w=v;w--;){var j=y[w];if(!(m?j in s:n.call(s,j)))return!1}var R=p.get(i),I=p.get(s);if(R&&I)return R==s&&I==i;var L=!0;p.set(i,s),p.set(s,i);for(var C=m;++w<v;){j=y[w];var P=i[j],N=s[j];if(d)var A=m?d(N,P,j,s,i,p):d(P,N,j,i,s,p);if(!(A===void 0?P===N||h(P,N,c,d,p):A)){L=!1;break}C||(C=j=="constructor")}if(L&&!C){var E=i.constructor,V=s.constructor;E!=V&&"constructor"in i&&"constructor"in s&&!(typeof E=="function"&&E instanceof E&&typeof V=="function"&&V instanceof V)&&(L=!1)}return p.delete(i),p.delete(s),L}return bS=a,bS}var wS,pD;function Tfe(){if(pD)return wS;pD=1;var t=f0(),e=il(),r=t(e,"DataView");return wS=r,wS}var SS,mD;function Afe(){if(mD)return SS;mD=1;var t=f0(),e=il(),r=t(e,"Promise");return SS=r,SS}var _S,gD;function iW(){if(gD)return _S;gD=1;var t=f0(),e=il(),r=t(e,"Set");return _S=r,_S}var TS,yD;function Nfe(){if(yD)return TS;yD=1;var t=f0(),e=il(),r=t(e,"WeakMap");return TS=r,TS}var AS,vD;function Efe(){if(vD)return AS;vD=1;var t=Tfe(),e=uE(),r=Afe(),n=iW(),a=Nfe(),i=fc(),s=_G(),c="[object Map]",d="[object Object]",h="[object Promise]",p="[object Set]",m="[object WeakMap]",y="[object DataView]",v=s(t),T=s(e),S=s(r),w=s(n),j=s(a),R=i;return(t&&R(new t(new ArrayBuffer(1)))!=y||e&&R(new e)!=c||r&&R(r.resolve())!=h||n&&R(new n)!=p||a&&R(new a)!=m)&&(R=function(I){var L=i(I),C=L==d?I.constructor:void 0,P=C?s(C):"";if(P)switch(P){case v:return y;case T:return c;case S:return h;case w:return p;case j:return m}return L}),AS=R,AS}var NS,xD;function jfe(){if(xD)return NS;xD=1;var t=QG(),e=JG(),r=lfe(),n=_fe(),a=Efe(),i=os(),s=tW(),c=nW(),d=1,h="[object Arguments]",p="[object Array]",m="[object Object]",y=Object.prototype,v=y.hasOwnProperty;function T(S,w,j,R,I,L){var C=i(S),P=i(w),N=C?p:a(S),A=P?p:a(w);N=N==h?m:N,A=A==h?m:A;var E=N==m,V=A==m,D=N==A;if(D&&s(S)){if(!s(w))return!1;C=!0,E=!1}if(D&&!E)return L||(L=new t),C||c(S)?e(S,w,j,R,I,L):r(S,w,N,j,R,I,L);if(!(j&d)){var U=E&&v.call(S,"__wrapped__"),$=V&&v.call(w,"__wrapped__");if(U||$){var Q=U?S.value():S,K=$?w.value():w;return L||(L=new t),I(Q,K,j,R,L)}}return D?(L||(L=new t),n(S,w,j,R,I,L)):!1}return NS=T,NS}var ES,bD;function TE(){if(bD)return ES;bD=1;var t=jfe(),e=pc();function r(n,a,i,s,c){return n===a?!0:n==null||a==null||!e(n)&&!e(a)?n!==n&&a!==a:t(n,a,i,s,r,c)}return ES=r,ES}var jS,wD;function kfe(){if(wD)return jS;wD=1;var t=QG(),e=TE(),r=1,n=2;function a(i,s,c,d){var h=c.length,p=h,m=!d;if(i==null)return!p;for(i=Object(i);h--;){var y=c[h];if(m&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++h<p;){y=c[h];var v=y[0],T=i[v],S=y[1];if(m&&y[2]){if(T===void 0&&!(v in i))return!1}else{var w=new t;if(d)var j=d(T,S,v,i,s,w);if(!(j===void 0?e(S,T,r|n,d,w):j))return!1}}return!0}return jS=a,jS}var kS,SD;function sW(){if(SD)return kS;SD=1;var t=Du();function e(r){return r===r&&!t(r)}return kS=e,kS}var CS,_D;function Cfe(){if(_D)return CS;_D=1;var t=sW(),e=K2();function r(n){for(var a=e(n),i=a.length;i--;){var s=a[i],c=n[s];a[i]=[s,c,t(c)]}return a}return CS=r,CS}var OS,TD;function oW(){if(TD)return OS;TD=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return OS=t,OS}var IS,AD;function Ofe(){if(AD)return IS;AD=1;var t=kfe(),e=Cfe(),r=oW();function n(a){var i=e(a);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(s){return s===a||t(s,a,i)}}return IS=n,IS}var RS,ND;function Ife(){if(ND)return RS;ND=1;function t(e,r){return e!=null&&r in Object(e)}return RS=t,RS}var MS,ED;function Rfe(){if(ED)return MS;ED=1;var t=NG(),e=wE(),r=os(),n=SE(),a=_E(),i=V2();function s(c,d,h){d=t(d,c);for(var p=-1,m=d.length,y=!1;++p<m;){var v=i(d[p]);if(!(y=c!=null&&h(c,v)))break;c=c[v]}return y||++p!=m?y:(m=c==null?0:c.length,!!m&&a(m)&&n(v,m)&&(r(c)||e(c)))}return MS=s,MS}var PS,jD;function Mfe(){if(jD)return PS;jD=1;var t=Ife(),e=Rfe();function r(n,a){return n!=null&&e(n,a,t)}return PS=r,PS}var DS,kD;function Pfe(){if(kD)return DS;kD=1;var t=TE(),e=EG(),r=Mfe(),n=oE(),a=sW(),i=oW(),s=V2(),c=1,d=2;function h(p,m){return n(p)&&a(m)?i(s(p),m):function(y){var v=e(y,p);return v===void 0&&v===m?r(y,p):t(m,v,c|d)}}return DS=h,DS}var LS,CD;function Df(){if(CD)return LS;CD=1;function t(e){return e}return LS=t,LS}var BS,OD;function Dfe(){if(OD)return BS;OD=1;function t(e){return function(r){return r==null?void 0:r[e]}}return BS=t,BS}var $S,ID;function Lfe(){if(ID)return $S;ID=1;var t=fE();function e(r){return function(n){return t(n,r)}}return $S=e,$S}var US,RD;function Bfe(){if(RD)return US;RD=1;var t=Dfe(),e=Lfe(),r=oE(),n=V2();function a(i){return r(i)?t(n(i)):e(i)}return US=a,US}var zS,MD;function sl(){if(MD)return zS;MD=1;var t=Ofe(),e=Pfe(),r=Df(),n=os(),a=Bfe();function i(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?n(s)?e(s[0],s[1]):t(s):a(s)}return zS=i,zS}var VS,PD;function lW(){if(PD)return VS;PD=1;function t(e,r,n,a){for(var i=e.length,s=n+(a?1:-1);a?s--:++s<i;)if(r(e[s],s,e))return s;return-1}return VS=t,VS}var FS,DD;function $fe(){if(DD)return FS;DD=1;function t(e){return e!==e}return FS=t,FS}var qS,LD;function Ufe(){if(LD)return qS;LD=1;function t(e,r,n){for(var a=n-1,i=e.length;++a<i;)if(e[a]===r)return a;return-1}return qS=t,qS}var HS,BD;function zfe(){if(BD)return HS;BD=1;var t=lW(),e=$fe(),r=Ufe();function n(a,i,s){return i===i?r(a,i,s):t(a,e,s)}return HS=n,HS}var GS,$D;function Vfe(){if($D)return GS;$D=1;var t=zfe();function e(r,n){var a=r==null?0:r.length;return!!a&&t(r,n,0)>-1}return GS=e,GS}var WS,UD;function Ffe(){if(UD)return WS;UD=1;function t(e,r,n){for(var a=-1,i=e==null?0:e.length;++a<i;)if(n(r,e[a]))return!0;return!1}return WS=t,WS}var KS,zD;function qfe(){if(zD)return KS;zD=1;function t(){}return KS=t,KS}var QS,VD;function Hfe(){if(VD)return QS;VD=1;var t=iW(),e=qfe(),r=bE(),n=1/0,a=t&&1/r(new t([,-0]))[1]==n?function(i){return new t(i)}:e;return QS=a,QS}var XS,FD;function Gfe(){if(FD)return XS;FD=1;var t=XG(),e=Vfe(),r=Ffe(),n=ZG(),a=Hfe(),i=bE(),s=200;function c(d,h,p){var m=-1,y=e,v=d.length,T=!0,S=[],w=S;if(p)T=!1,y=r;else if(v>=s){var j=h?null:a(d);if(j)return i(j);T=!1,y=n,w=new t}else w=h?[]:S;e:for(;++m<v;){var R=d[m],I=h?h(R):R;if(R=p||R!==0?R:0,T&&I===I){for(var L=w.length;L--;)if(w[L]===I)continue e;h&&w.push(I),S.push(R)}else y(w,I,p)||(w!==S&&w.push(I),S.push(R))}return S}return XS=c,XS}var YS,qD;function Wfe(){if(qD)return YS;qD=1;var t=sl(),e=Gfe();function r(n,a){return n&&n.length?e(n,t(a,2)):[]}return YS=r,YS}var Kfe=Wfe();const HD=Kr(Kfe);function cW(t,e,r){return e===!0?HD(t,r):rr(e)?HD(t,e):t}function Zh(t){"@babel/helpers - typeof";return Zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zh(t)}var Qfe=["ref"];function GD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?GD(Object(r),!0).forEach(function(n){Q2(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):GD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dW(n.key),n)}}function Yfe(t,e,r){return e&&WD(t.prototype,e),r&&WD(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Zfe(t,e,r){return e=Xx(e),Jfe(t,uW()?Reflect.construct(e,r||[],Xx(t).constructor):e.apply(t,r))}function Jfe(t,e){if(e&&(Zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return epe(t)}function epe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uW=function(){return!!t})()}function Xx(t){return Xx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xx(t)}function tpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}function YA(t,e){return YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YA(t,e)}function Q2(t,e,r){return e=dW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dW(t){var e=rpe(t,"string");return Zh(e)=="symbol"?e:e+""}function rpe(t,e){if(Zh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function npe(t,e){if(t==null)return{};var r=ape(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ape(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function ipe(t){return t.value}function spe(t,e){if(se.isValidElement(t))return se.cloneElement(t,e);if(typeof t=="function")return se.createElement(t,e);e.ref;var r=npe(e,Qfe);return se.createElement(xE,r)}var KD=1,Nh=(function(t){function e(){var r;Xfe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Zfe(this,e,[].concat(a)),Q2(r,"lastBoundingBox",{width:-1,height:-1}),r}return tpe(e,t),Yfe(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>KD||Math.abs(a.height-this.lastBoundingBox.height)>KD)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?kl({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,s=a.align,c=a.verticalAlign,d=a.margin,h=a.chartWidth,p=a.chartHeight,m,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&i==="vertical"){var v=this.getBBoxSnapshot();m={left:((h||0)-v.width)/2}}else m=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((p||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return kl(kl({},m),y)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,s=a.width,c=a.height,d=a.wrapperStyle,h=a.payloadUniqBy,p=a.payload,m=kl(kl({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return se.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(v){n.wrapperNode=v}},spe(i,kl(kl({},this.props),{},{payload:cW(p,h,ipe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=kl(kl({},this.defaultProps),n.props),s=i.layout;return s==="vertical"&&vt(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||a}:null}}])})(k.PureComponent);Q2(Nh,"displayName","Legend");Q2(Nh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ZS,QD;function ope(){if(QD)return ZS;QD=1;var t=d1(),e=wE(),r=os(),n=t?t.isConcatSpreadable:void 0;function a(i){return r(i)||e(i)||!!(n&&i&&i[n])}return ZS=a,ZS}var JS,XD;function hW(){if(XD)return JS;XD=1;var t=eW(),e=ope();function r(n,a,i,s,c){var d=-1,h=n.length;for(i||(i=e),c||(c=[]);++d<h;){var p=n[d];a>0&&i(p)?a>1?r(p,a-1,i,s,c):t(c,p):s||(c[c.length]=p)}return c}return JS=r,JS}var e_,YD;function lpe(){if(YD)return e_;YD=1;function t(e){return function(r,n,a){for(var i=-1,s=Object(r),c=a(r),d=c.length;d--;){var h=c[e?d:++i];if(n(s[h],h,s)===!1)break}return r}}return e_=t,e_}var t_,ZD;function cpe(){if(ZD)return t_;ZD=1;var t=lpe(),e=t();return t_=e,t_}var r_,JD;function fW(){if(JD)return r_;JD=1;var t=cpe(),e=K2();function r(n,a){return n&&t(n,a,e)}return r_=r,r_}var n_,eL;function upe(){if(eL)return n_;eL=1;var t=p1();function e(r,n){return function(a,i){if(a==null)return a;if(!t(a))return r(a,i);for(var s=a.length,c=n?s:-1,d=Object(a);(n?c--:++c<s)&&i(d[c],c,d)!==!1;);return a}}return n_=e,n_}var a_,tL;function AE(){if(tL)return a_;tL=1;var t=fW(),e=upe(),r=e(t);return a_=r,a_}var i_,rL;function pW(){if(rL)return i_;rL=1;var t=AE(),e=p1();function r(n,a){var i=-1,s=e(n)?Array(n.length):[];return t(n,function(c,d,h){s[++i]=a(c,d,h)}),s}return i_=r,i_}var s_,nL;function dpe(){if(nL)return s_;nL=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return s_=t,s_}var o_,aL;function hpe(){if(aL)return o_;aL=1;var t=Mf();function e(r,n){if(r!==n){var a=r!==void 0,i=r===null,s=r===r,c=t(r),d=n!==void 0,h=n===null,p=n===n,m=t(n);if(!h&&!m&&!c&&r>n||c&&d&&p&&!h&&!m||i&&d&&p||!a&&p||!s)return 1;if(!i&&!c&&!m&&r<n||m&&a&&s&&!i&&!c||h&&a&&s||!d&&s||!p)return-1}return 0}return o_=e,o_}var l_,iL;function fpe(){if(iL)return l_;iL=1;var t=hpe();function e(r,n,a){for(var i=-1,s=r.criteria,c=n.criteria,d=s.length,h=a.length;++i<d;){var p=t(s[i],c[i]);if(p){if(i>=h)return p;var m=a[i];return p*(m=="desc"?-1:1)}}return r.index-n.index}return l_=e,l_}var c_,sL;function ppe(){if(sL)return c_;sL=1;var t=hE(),e=fE(),r=sl(),n=pW(),a=dpe(),i=rW(),s=fpe(),c=Df(),d=os();function h(p,m,y){m.length?m=t(m,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):m=[c];var v=-1;m=t(m,i(r));var T=n(p,function(S,w,j){var R=t(m,function(I){return I(S)});return{criteria:R,index:++v,value:S}});return a(T,function(S,w){return s(S,w,y)})}return c_=h,c_}var u_,oL;function mpe(){if(oL)return u_;oL=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return u_=t,u_}var d_,lL;function gpe(){if(lL)return d_;lL=1;var t=mpe(),e=Math.max;function r(n,a,i){return a=e(a===void 0?n.length-1:a,0),function(){for(var s=arguments,c=-1,d=e(s.length-a,0),h=Array(d);++c<d;)h[c]=s[a+c];c=-1;for(var p=Array(a+1);++c<a;)p[c]=s[c];return p[a]=i(h),t(n,this,p)}}return d_=r,d_}var h_,cL;function ype(){if(cL)return h_;cL=1;function t(e){return function(){return e}}return h_=t,h_}var f_,uL;function mW(){if(uL)return f_;uL=1;var t=f0(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return f_=e,f_}var p_,dL;function vpe(){if(dL)return p_;dL=1;var t=ype(),e=mW(),r=Df(),n=e?function(a,i){return e(a,"toString",{configurable:!0,enumerable:!1,value:t(i),writable:!0})}:r;return p_=n,p_}var m_,hL;function xpe(){if(hL)return m_;hL=1;var t=800,e=16,r=Date.now;function n(a){var i=0,s=0;return function(){var c=r(),d=e-(c-s);if(s=c,d>0){if(++i>=t)return arguments[0]}else i=0;return a.apply(void 0,arguments)}}return m_=n,m_}var g_,fL;function bpe(){if(fL)return g_;fL=1;var t=vpe(),e=xpe(),r=e(t);return g_=r,g_}var y_,pL;function wpe(){if(pL)return y_;pL=1;var t=Df(),e=gpe(),r=bpe();function n(a,i){return r(e(a,i,t),a+"")}return y_=n,y_}var v_,mL;function X2(){if(mL)return v_;mL=1;var t=cE(),e=p1(),r=SE(),n=Du();function a(i,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&r(s,c.length):d=="string"&&s in c)?t(c[s],i):!1}return v_=a,v_}var x_,gL;function Spe(){if(gL)return x_;gL=1;var t=hW(),e=ppe(),r=wpe(),n=X2(),a=r(function(i,s){if(i==null)return[];var c=s.length;return c>1&&n(i,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(i,t(s,1),[])});return x_=a,x_}var _pe=Spe();const NE=Kr(_pe);function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function ZA(){return ZA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ZA.apply(this,arguments)}function Tpe(t,e){return jpe(t)||Epe(t,e)||Npe(t,e)||Ape()}function Ape(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Npe(t,e){if(t){if(typeof t=="string")return yL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yL(t,e)}}function yL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Epe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function jpe(t){if(Array.isArray(t))return t}function vL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vL(Object(r),!0).forEach(function(n){kpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kpe(t,e,r){return e=Cpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cpe(t){var e=Ope(t,"string");return ng(e)=="symbol"?e:e+""}function Ope(t,e){if(ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ipe(t){return Array.isArray(t)&&La(t[0])&&La(t[1])?t.join(" ~ "):t}var Rpe=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,i=a===void 0?{}:a,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,h=d===void 0?{}:d,p=e.payload,m=e.formatter,y=e.itemSorter,v=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,j=e.accessibilityLayer,R=j===void 0?!1:j,I=function(){if(p&&p.length){var U={padding:0,margin:0},$=(y?NE(p,y):p).map(function(Q,K){if(Q.type==="none")return null;var H=b_({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},c),J=Q.formatter||m||Ipe,ie=Q.value,pe=Q.name,me=ie,X=pe;if(J&&me!=null&&X!=null){var ne=J(ie,pe,Q,K,p);if(Array.isArray(ne)){var re=Tpe(ne,2);me=re[0],X=re[1]}else me=ne}return se.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:H},La(X)?se.createElement("span",{className:"recharts-tooltip-item-name"},X):null,La(X)?se.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,se.createElement("span",{className:"recharts-tooltip-item-value"},me),se.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return se.createElement("ul",{className:"recharts-tooltip-item-list",style:U},$)}return null},L=b_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),C=b_({margin:0},h),P=!lr(S),N=P?S:"",A=fr("recharts-default-tooltip",v),E=fr("recharts-tooltip-label",T);P&&w&&p!==void 0&&p!==null&&(N=w(S,p));var V=R?{role:"status","aria-live":"assertive"}:{};return se.createElement("div",ZA({className:A,style:L},V),se.createElement("p",{className:E,style:C},se.isValidElement(N)?N:"".concat(N)),I())};function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}function vv(t,e,r){return e=Mpe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mpe(t){var e=Ppe(t,"string");return ag(e)=="symbol"?e:e+""}function Ppe(t,e){if(ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fp="recharts-tooltip-wrapper",Dpe={visibility:"hidden"};function Lpe(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return fr(Fp,vv(vv(vv(vv({},"".concat(Fp,"-right"),vt(r)&&e&&vt(e.x)&&r>=e.x),"".concat(Fp,"-left"),vt(r)&&e&&vt(e.x)&&r<e.x),"".concat(Fp,"-bottom"),vt(n)&&e&&vt(e.y)&&n>=e.y),"".concat(Fp,"-top"),vt(n)&&e&&vt(e.y)&&n<e.y))}function xL(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,i=t.position,s=t.reverseDirection,c=t.tooltipDimension,d=t.viewBox,h=t.viewBoxDimension;if(i&&vt(i[n]))return i[n];var p=r[n]-c-a,m=r[n]+a;if(e[n])return s[n]?p:m;if(s[n]){var y=p,v=d[n];return y<v?Math.max(m,d[n]):Math.max(p,d[n])}var T=m+c,S=d[n]+h;return T>S?Math.max(p,d[n]):Math.max(m,d[n])}function Bpe(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function $pe(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,i=t.reverseDirection,s=t.tooltipBox,c=t.useTranslate3d,d=t.viewBox,h,p,m;return s.height>0&&s.width>0&&r?(p=xL({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),m=xL({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),h=Bpe({translateX:p,translateY:m,useTranslate3d:c})):h=Dpe,{cssProperties:h,cssClasses:Lpe({translateX:p,translateY:m,coordinate:r})}}function Jh(t){"@babel/helpers - typeof";return Jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jh(t)}function bL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(r),!0).forEach(function(n){eN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Upe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yW(n.key),n)}}function Vpe(t,e,r){return e&&zpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fpe(t,e,r){return e=Yx(e),qpe(t,gW()?Reflect.construct(e,r||[],Yx(t).constructor):e.apply(t,r))}function qpe(t,e){if(e&&(Jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hpe(t)}function Hpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gW=function(){return!!t})()}function Yx(t){return Yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yx(t)}function Gpe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JA(t,e)}function JA(t,e){return JA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},JA(t,e)}function eN(t,e,r){return e=yW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yW(t){var e=Wpe(t,"string");return Jh(e)=="symbol"?e:e+""}function Wpe(t,e){if(Jh(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var SL=1,Kpe=(function(t){function e(){var r;Upe(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Fpe(this,e,[].concat(a)),eN(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),eN(r,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,h,p;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=r.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(h=(p=r.props.coordinate)===null||p===void 0?void 0:p.y)!==null&&h!==void 0?h:0}})}}),r}return Gpe(e,t),Vpe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>SL||Math.abs(n.height-this.state.lastBoundingBox.height)>SL)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.children,p=a.coordinate,m=a.hasPayload,y=a.isAnimationActive,v=a.offset,T=a.position,S=a.reverseDirection,w=a.useTranslate3d,j=a.viewBox,R=a.wrapperStyle,I=$pe({allowEscapeViewBox:s,coordinate:p,offsetTopLeft:v,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:j}),L=I.cssClasses,C=I.cssProperties,P=wL(wL({transition:y&&i?"transform ".concat(c,"ms ").concat(d):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},R);return se.createElement("div",{tabIndex:-1,className:L,style:P,ref:function(A){n.wrapperNode=A}},h)}}])})(k.PureComponent),Qpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},p0={isSsr:Qpe()};function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}function _L(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function TL(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_L(Object(r),!0).forEach(function(n){EE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_L(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ype(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xW(n.key),n)}}function Zpe(t,e,r){return e&&Ype(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jpe(t,e,r){return e=Zx(e),eme(t,vW()?Reflect.construct(e,r||[],Zx(t).constructor):e.apply(t,r))}function eme(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tme(t)}function tme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vW=function(){return!!t})()}function Zx(t){return Zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zx(t)}function rme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tN(t,e)}function tN(t,e){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tN(t,e)}function EE(t,e,r){return e=xW(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xW(t){var e=nme(t,"string");return ef(e)=="symbol"?e:e+""}function nme(t,e){if(ef(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ame(t){return t.dataKey}function ime(t,e){return se.isValidElement(t)?se.cloneElement(t,e):typeof t=="function"?se.createElement(t,e):se.createElement(Rpe,e)}var Do=(function(t){function e(){return Xpe(this,e),Jpe(this,e,arguments)}return rme(e,t),Zpe(e,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,s=a.allowEscapeViewBox,c=a.animationDuration,d=a.animationEasing,h=a.content,p=a.coordinate,m=a.filterNull,y=a.isAnimationActive,v=a.offset,T=a.payload,S=a.payloadUniqBy,w=a.position,j=a.reverseDirection,R=a.useTranslate3d,I=a.viewBox,L=a.wrapperStyle,C=T??[];m&&C.length&&(C=cW(T.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),S,ame));var P=C.length>0;return se.createElement(Kpe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:i,coordinate:p,hasPayload:P,offset:v,position:w,reverseDirection:j,useTranslate3d:R,viewBox:I,wrapperStyle:L},ime(h,TL(TL({},this.props),{},{payload:C})))}}])})(k.PureComponent);EE(Do,"displayName","Tooltip");EE(Do,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!p0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var w_,AL;function sme(){if(AL)return w_;AL=1;var t=il(),e=function(){return t.Date.now()};return w_=e,w_}var S_,NL;function ome(){if(NL)return S_;NL=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return S_=e,S_}var __,EL;function lme(){if(EL)return __;EL=1;var t=ome(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return __=r,__}var T_,jL;function bW(){if(jL)return T_;jL=1;var t=lme(),e=Du(),r=Mf(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(h){if(typeof h=="number")return h;if(r(h))return n;if(e(h)){var p=typeof h.valueOf=="function"?h.valueOf():h;h=e(p)?p+"":p}if(typeof h!="string")return h===0?h:+h;h=t(h);var m=i.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):a.test(h)?n:+h}return T_=d,T_}var A_,kL;function cme(){if(kL)return A_;kL=1;var t=Du(),e=sme(),r=bW(),n="Expected a function",a=Math.max,i=Math.min;function s(c,d,h){var p,m,y,v,T,S,w=0,j=!1,R=!1,I=!0;if(typeof c!="function")throw new TypeError(n);d=r(d)||0,t(h)&&(j=!!h.leading,R="maxWait"in h,y=R?a(r(h.maxWait)||0,d):y,I="trailing"in h?!!h.trailing:I);function L($){var Q=p,K=m;return p=m=void 0,w=$,v=c.apply(K,Q),v}function C($){return w=$,T=setTimeout(A,d),j?L($):v}function P($){var Q=$-S,K=$-w,H=d-Q;return R?i(H,y-K):H}function N($){var Q=$-S,K=$-w;return S===void 0||Q>=d||Q<0||R&&K>=y}function A(){var $=e();if(N($))return E($);T=setTimeout(A,P($))}function E($){return T=void 0,I&&p?L($):(p=m=void 0,v)}function V(){T!==void 0&&clearTimeout(T),w=0,p=S=m=T=void 0}function D(){return T===void 0?v:E(e())}function U(){var $=e(),Q=N($);if(p=arguments,m=this,S=$,Q){if(T===void 0)return C(S);if(R)return clearTimeout(T),T=setTimeout(A,d),L(S)}return T===void 0&&(T=setTimeout(A,d)),v}return U.cancel=V,U.flush=D,U}return A_=s,A_}var N_,CL;function ume(){if(CL)return N_;CL=1;var t=cme(),e=Du(),r="Expected a function";function n(a,i,s){var c=!0,d=!0;if(typeof a!="function")throw new TypeError(r);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),t(a,i,{leading:c,maxWait:i,trailing:d})}return N_=n,N_}var dme=ume();const wW=Kr(dme);function ig(t){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(t)}function OL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OL(Object(r),!0).forEach(function(n){hme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hme(t,e,r){return e=fme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fme(t){var e=pme(t,"string");return ig(e)=="symbol"?e:e+""}function pme(t,e){if(ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mme(t,e){return xme(t)||vme(t,e)||yme(t,e)||gme()}function gme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(t,e){if(t){if(typeof t=="string")return IL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IL(t,e)}}function IL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function xme(t){if(Array.isArray(t))return t}var SW=k.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=t.width,s=i===void 0?"100%":i,c=t.height,d=c===void 0?"100%":c,h=t.minWidth,p=h===void 0?0:h,m=t.minHeight,y=t.maxHeight,v=t.children,T=t.debounce,S=T===void 0?0:T,w=t.id,j=t.className,R=t.onResize,I=t.style,L=I===void 0?{}:I,C=k.useRef(null),P=k.useRef();P.current=R,k.useImperativeHandle(e,function(){return Object.defineProperty(C.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),C.current},configurable:!0})});var N=k.useState({containerWidth:a.width,containerHeight:a.height}),A=mme(N,2),E=A[0],V=A[1],D=k.useCallback(function($,Q){V(function(K){var H=Math.round($),J=Math.round(Q);return K.containerWidth===H&&K.containerHeight===J?K:{containerWidth:H,containerHeight:J}})},[]);k.useEffect(function(){var $=function(pe){var me,X=pe[0].contentRect,ne=X.width,re=X.height;D(ne,re),(me=P.current)===null||me===void 0||me.call(P,ne,re)};S>0&&($=wW($,S,{trailing:!0,leading:!1}));var Q=new ResizeObserver($),K=C.current.getBoundingClientRect(),H=K.width,J=K.height;return D(H,J),Q.observe(C.current),function(){Q.disconnect()}},[D,S]);var U=k.useMemo(function(){var $=E.containerWidth,Q=E.containerHeight;if($<0||Q<0)return null;Kl(Ed(s)||Ed(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),Kl(!r||r>0,"The aspect(%s) must be greater than zero.",r);var K=Ed(s)?$:s,H=Ed(d)?Q:d;r&&r>0&&(K?H=K/r:H&&(K=H*r),y&&H>y&&(H=y)),Kl(K>0||H>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,H,s,d,p,m,r);var J=!Array.isArray(v)&&Wl(v.type).endsWith("Chart");return se.Children.map(v,function(ie){return se.isValidElement(ie)?k.cloneElement(ie,xv({width:K,height:H},J?{style:xv({height:"100%",width:"100%",maxHeight:H,maxWidth:K},ie.props.style)}:{})):ie})},[r,v,d,y,m,p,E,s]);return se.createElement("div",{id:w?"".concat(w):void 0,className:fr("recharts-responsive-container",j),style:xv(xv({},L),{},{width:s,height:d,minWidth:p,minHeight:m,maxHeight:y}),ref:C},U)}),jE=function(e){return null};jE.displayName="Cell";function sg(t){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(t)}function RL(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function rN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(r),!0).forEach(function(n){bme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bme(t,e,r){return e=wme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wme(t){var e=Sme(t,"string");return sg(e)=="symbol"?e:e+""}function Sme(t,e){if(sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nh={widthCache:{},cacheCount:0},_me=2e3,Tme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ML="recharts_measurement_span";function Ame(t){var e=rN({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var bm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||p0.isSsr)return{width:0,height:0};var n=Ame(r),a=JSON.stringify({text:e,copyStyle:n});if(nh.widthCache[a])return nh.widthCache[a];try{var i=document.getElementById(ML);i||(i=document.createElement("span"),i.setAttribute("id",ML),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=rN(rN({},Tme),n);Object.assign(i.style,s),i.textContent="".concat(e);var c=i.getBoundingClientRect(),d={width:c.width,height:c.height};return nh.widthCache[a]=d,++nh.cacheCount>_me&&(nh.cacheCount=0,nh.widthCache={}),d}catch{return{width:0,height:0}}},Nme=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}function Jx(t,e){return Cme(t)||kme(t,e)||jme(t,e)||Eme()}function Eme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jme(t,e){if(t){if(typeof t=="string")return PL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PL(t,e)}}function PL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Cme(t){if(Array.isArray(t))return t}function Ome(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rme(n.key),n)}}function Ime(t,e,r){return e&&DL(t.prototype,e),r&&DL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rme(t){var e=Mme(t,"string");return og(e)=="symbol"?e:e+""}function Mme(t,e){if(og(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var LL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Pme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Dme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_W={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Lme=Object.keys(_W),ph="NaN";function Bme(t,e){return t*_W[e]}var bv=(function(){function t(e,r){Ome(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Pme.test(r)&&(this.num=NaN,this.unit=""),Lme.includes(r)&&(this.num=Bme(e,r),this.unit="px")}return Ime(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=Dme.exec(r))!==null&&n!==void 0?n:[],i=Jx(a,3),s=i[1],c=i[2];return new t(parseFloat(s),c??"")}}])})();function TW(t){if(t.includes(ph))return ph;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=LL.exec(e))!==null&&r!==void 0?r:[],a=Jx(n,4),i=a[1],s=a[2],c=a[3],d=bv.parse(i??""),h=bv.parse(c??""),p=s==="*"?d.multiply(h):d.divide(h);if(p.isNaN())return ph;e=e.replace(LL,p.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var m,y=(m=BL.exec(e))!==null&&m!==void 0?m:[],v=Jx(y,4),T=v[1],S=v[2],w=v[3],j=bv.parse(T??""),R=bv.parse(w??""),I=S==="+"?j.add(R):j.subtract(R);if(I.isNaN())return ph;e=e.replace(BL,I.toString())}return e}var $L=/\(([^()]*)\)/;function $me(t){for(var e=t;e.includes("(");){var r=$L.exec(e),n=Jx(r,2),a=n[1];e=e.replace($L,TW(a))}return e}function Ume(t){var e=t.replace(/\s+/g,"");return e=$me(e),e=TW(e),e}function zme(t){try{return Ume(t)}catch{return ph}}function E_(t){var e=zme(t.slice(5,-1));return e===ph?"":e}var Vme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Fme=["dx","dy","angle","className","breakAll"];function nN(){return nN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nN.apply(this,arguments)}function UL(t,e){if(t==null)return{};var r=qme(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function qme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function zL(t,e){return Kme(t)||Wme(t,e)||Gme(t,e)||Hme()}function Hme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gme(t,e){if(t){if(typeof t=="string")return VL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VL(t,e)}}function VL(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wme(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function Kme(t){if(Array.isArray(t))return t}var AW=/[ \f\n\r\t\v\u2028\u2029]+/,NW=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var i=[];lr(r)||(n?i=r.toString().split(""):i=r.toString().split(AW));var s=i.map(function(d){return{word:d,width:bm(d,a).width}}),c=n?0:bm("",a).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},Qme=function(e,r,n,a,i){var s=e.maxLines,c=e.children,d=e.style,h=e.breakAll,p=vt(s),m=c,y=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(H,J){var ie=J.word,pe=J.width,me=H[H.length-1];if(me&&(a==null||i||me.width+pe+n<Number(a)))me.words.push(ie),me.width+=pe+n;else{var X={words:[ie],width:pe};H.push(X)}return H},[])},v=y(r),T=function(K){return K.reduce(function(H,J){return H.width>J.width?H:J})};if(!p)return v;for(var S="",w=function(K){var H=m.slice(0,K),J=NW({breakAll:h,style:d,children:H+S}).wordsWithComputedWidth,ie=y(J),pe=ie.length>s||T(ie).width>Number(a);return[pe,ie]},j=0,R=m.length-1,I=0,L;j<=R&&I<=m.length-1;){var C=Math.floor((j+R)/2),P=C-1,N=w(P),A=zL(N,2),E=A[0],V=A[1],D=w(C),U=zL(D,1),$=U[0];if(!E&&!$&&(j=C+1),E&&$&&(R=C-1),!E&&$){L=V;break}I++}return L||v},FL=function(e){var r=lr(e)?[]:e.toString().split(AW);return[{words:r}]},Xme=function(e){var r=e.width,n=e.scaleToFit,a=e.children,i=e.style,s=e.breakAll,c=e.maxLines;if((r||n)&&!p0.isSsr){var d,h,p=NW({breakAll:s,children:a,style:i});if(p){var m=p.wordsWithComputedWidth,y=p.spaceWidth;d=m,h=y}else return FL(a);return Qme({breakAll:s,children:a,maxLines:c,style:i},d,h,r,n)}return FL(a)},qL="#808080",tf=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,h=d===void 0?"0.71em":d,p=e.scaleToFit,m=p===void 0?!1:p,y=e.textAnchor,v=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,j=w===void 0?qL:w,R=UL(e,Vme),I=k.useMemo(function(){return Xme({breakAll:R.breakAll,children:R.children,maxLines:R.maxLines,scaleToFit:m,style:R.style,width:R.width})},[R.breakAll,R.children,R.maxLines,m,R.style,R.width]),L=R.dx,C=R.dy,P=R.angle,N=R.className,A=R.breakAll,E=UL(R,Fme);if(!La(n)||!La(i))return null;var V=n+(vt(L)?L:0),D=i+(vt(C)?C:0),U;switch(S){case"start":U=E_("calc(".concat(h,")"));break;case"middle":U=E_("calc(".concat((I.length-1)/2," * -").concat(c," + (").concat(h," / 2))"));break;default:U=E_("calc(".concat(I.length-1," * -").concat(c,")"));break}var $=[];if(m){var Q=I[0].width,K=R.width;$.push("scale(".concat((vt(K)?K/Q:1)/Q,")"))}return P&&$.push("rotate(".concat(P,", ").concat(V,", ").concat(D,")")),$.length&&(E.transform=$.join(" ")),se.createElement("text",nN({},zt(E,!0),{x:V,y:D,className:fr("recharts-text",N),textAnchor:v,fill:j.includes("url")?qL:j}),I.map(function(H,J){var ie=H.words.join(A?"":" ");return se.createElement("tspan",{x:V,dy:J===0?U:c,key:"".concat(ie,"-").concat(J)},ie)}))};function wu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yme(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kE(t){let e,r,n;t.length!==2?(e=wu,r=(c,d)=>wu(t(c),d),n=(c,d)=>t(c)-d):(e=t===wu||t===Yme?t:Zme,r=t,n=t);function a(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<0?h=m+1:p=m}while(h<p)}return h}function i(c,d,h=0,p=c.length){if(h<p){if(e(d,d)!==0)return p;do{const m=h+p>>>1;r(c[m],d)<=0?h=m+1:p=m}while(h<p)}return h}function s(c,d,h=0,p=c.length){const m=a(c,d,h,p-1);return m>h&&n(c[m-1],d)>-n(c[m],d)?m-1:m}return{left:a,center:s,right:i}}function Zme(){return 0}function EW(t){return t===null?NaN:+t}function*Jme(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const ege=kE(wu),m1=ege.right;kE(EW).center;class HL extends Map{constructor(e,r=nge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(GL(this,e))}has(e){return super.has(GL(this,e))}set(e,r){return super.set(tge(this,e),r)}delete(e){return super.delete(rge(this,e))}}function GL({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function tge({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function rge({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function nge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function age(t=wu){if(t===wu)return jW;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function jW(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ige=Math.sqrt(50),sge=Math.sqrt(10),oge=Math.sqrt(2);function eb(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),s=i>=ige?10:i>=sge?5:i>=oge?2:1;let c,d,h;return a<0?(h=Math.pow(10,-a)/s,c=Math.round(t*h),d=Math.round(e*h),c/h<t&&++c,d/h>e&&--d,h=-h):(h=Math.pow(10,a)*s,c=Math.round(t/h),d=Math.round(e/h),c*h<t&&++c,d*h>e&&--d),d<c&&.5<=r&&r<2?eb(t,e,r*2):[c,d,h]}function aN(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,i,s]=n?eb(e,t,r):eb(t,e,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(s<0)for(let h=0;h<c;++h)d[h]=(i-h)/-s;else for(let h=0;h<c;++h)d[h]=(i-h)*s;else if(s<0)for(let h=0;h<c;++h)d[h]=(a+h)/-s;else for(let h=0;h<c;++h)d[h]=(a+h)*s;return d}function iN(t,e,r){return e=+e,t=+t,r=+r,eb(t,e,r)[2]}function sN(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?iN(e,t,r):iN(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function WL(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function KL(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function kW(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?jW:age(a);n>r;){if(n-r>600){const d=n-r+1,h=e-r+1,p=Math.log(d),m=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*m*(d-m)/d)*(h-d/2<0?-1:1),v=Math.max(r,Math.floor(e-h*m/d+y)),T=Math.min(n,Math.floor(e+(d-h)*m/d+y));kW(t,e,v,T,a)}const i=t[e];let s=r,c=n;for(qp(t,r,e),a(t[n],i)>0&&qp(t,r,n);s<c;){for(qp(t,s,c),++s,--c;a(t[s],i)<0;)++s;for(;a(t[c],i)>0;)--c}a(t[r],i)===0?qp(t,r,c):(++c,qp(t,c,n)),c<=e&&(r=c+1),e<=c&&(n=c-1)}return t}function qp(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function lge(t,e,r){if(t=Float64Array.from(Jme(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return KL(t);if(e>=1)return WL(t);var n,a=(n-1)*e,i=Math.floor(a),s=WL(kW(t,i).subarray(0,i+1)),c=KL(t.subarray(i+1));return s+(c-s)*(a-i)}}function cge(t,e,r=EW){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,i=Math.floor(a),s=+r(t[i],i,t),c=+r(t[i+1],i+1,t);return s+(c-s)*(a-i)}}function uge(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,i=new Array(a);++n<a;)i[n]=t+n*r;return i}function io(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function mc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const oN=Symbol("implicit");function CE(){var t=new HL,e=[],r=[],n=oN;function a(i){let s=t.get(i);if(s===void 0){if(n!==oN)return n;t.set(i,s=e.push(i)-1)}return r[s%r.length]}return a.domain=function(i){if(!arguments.length)return e.slice();e=[],t=new HL;for(const s of i)t.has(s)||t.set(s,e.push(s)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return CE(e,r).unknown(n)},io.apply(a,arguments),a}function lg(){var t=CE().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,i,s,c=!1,d=0,h=0,p=.5;delete t.unknown;function m(){var y=e().length,v=a<n,T=v?a:n,S=v?n:a;i=(S-T)/Math.max(1,y-d+h*2),c&&(i=Math.floor(i)),T+=(S-T-i*(y-d))*p,s=i*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=uge(y).map(function(j){return T+i*j});return r(v?w.reverse():w)}return t.domain=function(y){return arguments.length?(e(y),m()):e()},t.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,m()):[n,a]},t.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,c=!0,m()},t.bandwidth=function(){return s},t.step=function(){return i},t.round=function(y){return arguments.length?(c=!!y,m()):c},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),m()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),m()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,m()):h},t.align=function(y){return arguments.length?(p=Math.max(0,Math.min(1,y)),m()):p},t.copy=function(){return lg(e(),[n,a]).round(c).paddingInner(d).paddingOuter(h).align(p)},io.apply(m(),arguments)}function CW(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return CW(e())},t}function wm(){return CW(lg.apply(null,arguments).paddingInner(1))}function OE(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function OW(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function g1(){}var cg=.7,tb=1/cg,Eh="\\s*([+-]?\\d+)\\s*",ug="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Go="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dge=/^#([0-9a-f]{3,8})$/,hge=new RegExp(`^rgb\\(${Eh},${Eh},${Eh}\\)$`),fge=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),pge=new RegExp(`^rgba\\(${Eh},${Eh},${Eh},${ug}\\)$`),mge=new RegExp(`^rgba\\(${Go},${Go},${Go},${ug}\\)$`),gge=new RegExp(`^hsl\\(${ug},${Go},${Go}\\)$`),yge=new RegExp(`^hsla\\(${ug},${Go},${Go},${ug}\\)$`),QL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};OE(g1,dg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XL,formatHex:XL,formatHex8:vge,formatHsl:xge,formatRgb:YL,toString:YL});function XL(){return this.rgb().formatHex()}function vge(){return this.rgb().formatHex8()}function xge(){return IW(this).formatHsl()}function YL(){return this.rgb().formatRgb()}function dg(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=dge.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ZL(e):r===3?new ns(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?wv(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?wv(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hge.exec(t))?new ns(e[1],e[2],e[3],1):(e=fge.exec(t))?new ns(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=pge.exec(t))?wv(e[1],e[2],e[3],e[4]):(e=mge.exec(t))?wv(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=gge.exec(t))?tB(e[1],e[2]/100,e[3]/100,1):(e=yge.exec(t))?tB(e[1],e[2]/100,e[3]/100,e[4]):QL.hasOwnProperty(t)?ZL(QL[t]):t==="transparent"?new ns(NaN,NaN,NaN,0):null}function ZL(t){return new ns(t>>16&255,t>>8&255,t&255,1)}function wv(t,e,r,n){return n<=0&&(t=e=r=NaN),new ns(t,e,r,n)}function bge(t){return t instanceof g1||(t=dg(t)),t?(t=t.rgb(),new ns(t.r,t.g,t.b,t.opacity)):new ns}function lN(t,e,r,n){return arguments.length===1?bge(t):new ns(t,e,r,n??1)}function ns(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}OE(ns,lN,OW(g1,{brighter(t){return t=t==null?tb:Math.pow(tb,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cg:Math.pow(cg,t),new ns(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ns($d(this.r),$d(this.g),$d(this.b),rb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:JL,formatHex:JL,formatHex8:wge,formatRgb:eB,toString:eB}));function JL(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}`}function wge(){return`#${jd(this.r)}${jd(this.g)}${jd(this.b)}${jd((isNaN(this.opacity)?1:this.opacity)*255)}`}function eB(){const t=rb(this.opacity);return`${t===1?"rgb(":"rgba("}${$d(this.r)}, ${$d(this.g)}, ${$d(this.b)}${t===1?")":`, ${t})`}`}function rb(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function $d(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jd(t){return t=$d(t),(t<16?"0":"")+t.toString(16)}function tB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new yo(t,e,r,n)}function IW(t){if(t instanceof yo)return new yo(t.h,t.s,t.l,t.opacity);if(t instanceof g1||(t=dg(t)),!t)return new yo;if(t instanceof yo)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),i=Math.max(e,r,n),s=NaN,c=i-a,d=(i+a)/2;return c?(e===i?s=(r-n)/c+(r<n)*6:r===i?s=(n-e)/c+2:s=(e-r)/c+4,c/=d<.5?i+a:2-i-a,s*=60):c=d>0&&d<1?0:s,new yo(s,c,d,t.opacity)}function Sge(t,e,r,n){return arguments.length===1?IW(t):new yo(t,e,r,n??1)}function yo(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}OE(yo,Sge,OW(g1,{brighter(t){return t=t==null?tb:Math.pow(tb,t),new yo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cg:Math.pow(cg,t),new yo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new ns(j_(t>=240?t-240:t+120,a,n),j_(t,a,n),j_(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new yo(rB(this.h),Sv(this.s),Sv(this.l),rb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rb(this.opacity);return`${t===1?"hsl(":"hsla("}${rB(this.h)}, ${Sv(this.s)*100}%, ${Sv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rB(t){return t=(t||0)%360,t<0?t+360:t}function Sv(t){return Math.max(0,Math.min(1,t||0))}function j_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const IE=t=>()=>t;function _ge(t,e){return function(r){return t+r*e}}function Tge(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Age(t){return(t=+t)==1?RW:function(e,r){return r-e?Tge(e,r,t):IE(isNaN(e)?r:e)}}function RW(t,e){var r=e-t;return r?_ge(t,r):IE(isNaN(t)?e:t)}const nB=(function t(e){var r=Age(e);function n(a,i){var s=r((a=lN(a)).r,(i=lN(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),h=RW(a.opacity,i.opacity);return function(p){return a.r=s(p),a.g=c(p),a.b=d(p),a.opacity=h(p),a+""}}return n.gamma=t,n})(1);function Nge(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=t[a]*(1-i)+e[a]*i;return n}}function Ege(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jge(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),i=new Array(r),s;for(s=0;s<n;++s)a[s]=Lf(t[s],e[s]);for(;s<r;++s)i[s]=e[s];return function(c){for(s=0;s<n;++s)i[s]=a[s](c);return i}}function kge(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function nb(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Cge(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Lf(t[a],e[a]):n[a]=e[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var cN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k_=new RegExp(cN.source,"g");function Oge(t){return function(){return t}}function Ige(t){return function(e){return t(e)+""}}function Rge(t,e){var r=cN.lastIndex=k_.lastIndex=0,n,a,i,s=-1,c=[],d=[];for(t=t+"",e=e+"";(n=cN.exec(t))&&(a=k_.exec(e));)(i=a.index)>r&&(i=e.slice(r,i),c[s]?c[s]+=i:c[++s]=i),(n=n[0])===(a=a[0])?c[s]?c[s]+=a:c[++s]=a:(c[++s]=null,d.push({i:s,x:nb(n,a)})),r=k_.lastIndex;return r<e.length&&(i=e.slice(r),c[s]?c[s]+=i:c[++s]=i),c.length<2?d[0]?Ige(d[0].x):Oge(e):(e=d.length,function(h){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(h);return c.join("")})}function Lf(t,e){var r=typeof e,n;return e==null||r==="boolean"?IE(e):(r==="number"?nb:r==="string"?(n=dg(e))?(e=n,nB):Rge:e instanceof dg?nB:e instanceof Date?kge:Ege(e)?Nge:Array.isArray(e)?jge:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Cge:nb)(t,e)}function RE(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Mge(t,e){e===void 0&&(e=t,t=Lf);for(var r=0,n=e.length-1,a=e[0],i=new Array(n<0?0:n);r<n;)i[r]=t(a,a=e[++r]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return i[c](s-c)}}function Pge(t){return function(){return t}}function ab(t){return+t}var aB=[0,1];function Di(t){return t}function uN(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Pge(isNaN(e)?NaN:.5)}function Dge(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Lge(t,e,r){var n=t[0],a=t[1],i=e[0],s=e[1];return a<n?(n=uN(a,n),i=r(s,i)):(n=uN(n,a),i=r(i,s)),function(c){return i(n(c))}}function Bge(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),i=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)a[s]=uN(t[s],t[s+1]),i[s]=r(e[s],e[s+1]);return function(c){var d=m1(t,c,1,n)-1;return i[d](a[d](c))}}function y1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Y2(){var t=aB,e=aB,r=Lf,n,a,i,s=Di,c,d,h;function p(){var y=Math.min(t.length,e.length);return s!==Di&&(s=Dge(t[0],t[y-1])),c=y>2?Bge:Lge,d=h=null,m}function m(y){return y==null||isNaN(y=+y)?i:(d||(d=c(t.map(n),e,r)))(n(s(y)))}return m.invert=function(y){return s(a((h||(h=c(e,t.map(n),nb)))(y)))},m.domain=function(y){return arguments.length?(t=Array.from(y,ab),p()):t.slice()},m.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},m.rangeRound=function(y){return e=Array.from(y),r=RE,p()},m.clamp=function(y){return arguments.length?(s=y?!0:Di,p()):s!==Di},m.interpolate=function(y){return arguments.length?(r=y,p()):r},m.unknown=function(y){return arguments.length?(i=y,m):i},function(y,v){return n=y,a=v,p()}}function ME(){return Y2()(Di,Di)}function $ge(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ib(t,e){if(!isFinite(t)||t===0)return null;var r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function rf(t){return t=ib(Math.abs(t)),t?t[1]:NaN}function Uge(t,e){return function(r,n){for(var a=r.length,i=[],s=0,c=t[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=t[s=(s+1)%t.length];return i.reverse().join(e)}}function zge(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Vge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hg(t){if(!(e=Vge.exec(t)))throw new Error("invalid format: "+t);var e;return new PE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hg.prototype=PE.prototype;function PE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}PE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fge(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var sb;function qge(t,e){var r=ib(t,e);if(!r)return sb=void 0,t.toPrecision(e);var n=r[0],a=r[1],i=a-(sb=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ib(t,Math.max(0,e+i-1))[0]}function iB(t,e){var r=ib(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const sB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:$ge,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>iB(t*100,e),r:iB,s:qge,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function oB(t){return t}var lB=Array.prototype.map,cB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Hge(t){var e=t.grouping===void 0||t.thousands===void 0?oB:Uge(lB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?oB:zge(lB.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(m,y){m=hg(m);var v=m.fill,T=m.align,S=m.sign,w=m.symbol,j=m.zero,R=m.width,I=m.comma,L=m.precision,C=m.trim,P=m.type;P==="n"?(I=!0,P="g"):sB[P]||(L===void 0&&(L=12),C=!0,P="g"),(j||v==="0"&&T==="=")&&(j=!0,v="0",T="=");var N=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?r:w==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),A=(w==="$"?n:/[%p]/.test(P)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),E=sB[P],V=/[defgprs%]/.test(P);L=L===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,L)):Math.max(0,Math.min(20,L));function D(U){var $=N,Q=A,K,H,J;if(P==="c")Q=E(U)+Q,U="";else{U=+U;var ie=U<0||1/U<0;if(U=isNaN(U)?d:E(Math.abs(U),L),C&&(U=Fge(U)),ie&&+U==0&&S!=="+"&&(ie=!1),$=(ie?S==="("?S:c:S==="-"||S==="("?"":S)+$,Q=(P==="s"&&!isNaN(U)&&sb!==void 0?cB[8+sb/3]:"")+Q+(ie&&S==="("?")":""),V){for(K=-1,H=U.length;++K<H;)if(J=U.charCodeAt(K),48>J||J>57){Q=(J===46?a+U.slice(K+1):U.slice(K))+Q,U=U.slice(0,K);break}}}I&&!j&&(U=e(U,1/0));var pe=$.length+U.length+Q.length,me=pe<R?new Array(R-pe+1).join(v):"";switch(I&&j&&(U=e(me+U,me.length?R-Q.length:1/0),me=""),T){case"<":U=$+U+Q+me;break;case"=":U=$+me+U+Q;break;case"^":U=me.slice(0,pe=me.length>>1)+$+U+Q+me.slice(pe);break;default:U=me+$+U+Q;break}return i(U)}return D.toString=function(){return m+""},D}function p(m,y){var v=Math.max(-8,Math.min(8,Math.floor(rf(y)/3)))*3,T=Math.pow(10,-v),S=h((m=hg(m),m.type="f",m),{suffix:cB[8+v/3]});return function(w){return S(T*w)}}return{format:h,formatPrefix:p}}var _v,DE,MW;Gge({thousands:",",grouping:[3],currency:["$",""]});function Gge(t){return _v=Hge(t),DE=_v.format,MW=_v.formatPrefix,_v}function Wge(t){return Math.max(0,-rf(Math.abs(t)))}function Kge(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(e)/3)))*3-rf(Math.abs(t)))}function Qge(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rf(e)-rf(t))+1}function PW(t,e,r,n){var a=sN(t,e,r),i;switch(n=hg(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=Kge(a,s))&&(n.precision=i),MW(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Qge(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Wge(a))&&(n.precision=i-(n.type==="%")*2);break}}return DE(n)}function Lu(t){var e=t.domain;return t.ticks=function(r){var n=e();return aN(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return PW(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,i=n.length-1,s=n[a],c=n[i],d,h,p=10;for(c<s&&(h=s,s=c,c=h,h=a,a=i,i=h);p-- >0;){if(h=iN(s,c,r),h===d)return n[a]=s,n[i]=c,e(n);if(h>0)s=Math.floor(s/h)*h,c=Math.ceil(c/h)*h;else if(h<0)s=Math.ceil(s*h)/h,c=Math.floor(c*h)/h;else break;d=h}return t},t}function ob(){var t=ME();return t.copy=function(){return y1(t,ob())},io.apply(t,arguments),Lu(t)}function DW(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,ab),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return DW(t).unknown(e)},t=arguments.length?Array.from(t,ab):[0,1],Lu(r)}function LW(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],i=t[n],s;return i<a&&(s=r,r=n,n=s,s=a,a=i,i=s),t[r]=e.floor(a),t[n]=e.ceil(i),t}function uB(t){return Math.log(t)}function dB(t){return Math.exp(t)}function Xge(t){return-Math.log(-t)}function Yge(t){return-Math.exp(-t)}function Zge(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Jge(t){return t===10?Zge:t===Math.E?Math.exp:e=>Math.pow(t,e)}function e1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function hB(t){return(e,r)=>-t(-e,r)}function LE(t){const e=t(uB,dB),r=e.domain;let n=10,a,i;function s(){return a=e1e(n),i=Jge(n),r()[0]<0?(a=hB(a),i=hB(i),t(Xge,Yge)):t(uB,dB),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(r(c),s()):r()},e.ticks=c=>{const d=r();let h=d[0],p=d[d.length-1];const m=p<h;m&&([h,p]=[p,h]);let y=a(h),v=a(p),T,S;const w=c==null?10:+c;let j=[];if(!(n%1)&&v-y<w){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(T=1;T<n;++T)if(S=y<0?T/i(-y):T*i(y),!(S<h)){if(S>p)break;j.push(S)}}else for(;y<=v;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/i(-y):T*i(y),!(S<h)){if(S>p)break;j.push(S)}j.length*2<w&&(j=aN(h,p,w))}else j=aN(y,v,Math.min(v-y,w)).map(i);return m?j.reverse():j},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=hg(d)).precision==null&&(d.trim=!0),d=DE(d)),c===1/0)return d;const h=Math.max(1,n*c/e.ticks().length);return p=>{let m=p/i(Math.round(a(p)));return m*n<n-.5&&(m*=n),m<=h?d(p):""}},e.nice=()=>r(LW(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),e}function BW(){const t=LE(Y2()).domain([1,10]);return t.copy=()=>y1(t,BW()).base(t.base()),io.apply(t,arguments),t}function fB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function pB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function BE(t){var e=1,r=t(fB(e),pB(e));return r.constant=function(n){return arguments.length?t(fB(e=+n),pB(e)):e},Lu(r)}function $W(){var t=BE(Y2());return t.copy=function(){return y1(t,$W()).constant(t.constant())},io.apply(t,arguments)}function mB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function t1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function r1e(t){return t<0?-t*t:t*t}function $E(t){var e=t(Di,Di),r=1;function n(){return r===1?t(Di,Di):r===.5?t(t1e,r1e):t(mB(r),mB(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},Lu(e)}function UE(){var t=$E(Y2());return t.copy=function(){return y1(t,UE()).exponent(t.exponent())},io.apply(t,arguments),t}function n1e(){return UE.apply(null,arguments).exponent(.5)}function gB(t){return Math.sign(t)*t*t}function a1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function UW(){var t=ME(),e=[0,1],r=!1,n;function a(i){var s=a1e(t(i));return isNaN(s)?n:r?Math.round(s):s}return a.invert=function(i){return t.invert(gB(i))},a.domain=function(i){return arguments.length?(t.domain(i),a):t.domain()},a.range=function(i){return arguments.length?(t.range((e=Array.from(i,ab)).map(gB)),a):e.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(t.clamp(i),a):t.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return UW(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},io.apply(a,arguments),Lu(a)}function zW(){var t=[],e=[],r=[],n;function a(){var s=0,c=Math.max(1,e.length);for(r=new Array(c-1);++s<c;)r[s-1]=cge(t,s/c);return i}function i(s){return s==null||isNaN(s=+s)?n:e[m1(r,s)]}return i.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?r[c-1]:t[0],c<r.length?r[c]:t[t.length-1]]},i.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let c of s)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(wu),a()},i.range=function(s){return arguments.length?(e=Array.from(s),a()):e.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return zW().domain(t).range(e).unknown(n)},io.apply(i,arguments)}function VW(){var t=0,e=1,r=1,n=[.5],a=[0,1],i;function s(d){return d!=null&&d<=d?a[m1(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*e-(d-r)*t)/(r+1);return s}return s.domain=function(d){return arguments.length?([t,e]=d,t=+t,e=+e,c()):[t,e]},s.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},s.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,n[0]]:h>=r?[n[r-1],e]:[n[h-1],n[h]]},s.unknown=function(d){return arguments.length&&(i=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return VW().domain([t,e]).range(a).unknown(i)},io.apply(Lu(s),arguments)}function FW(){var t=[.5],e=[0,1],r,n=1;function a(i){return i!=null&&i<=i?e[m1(t,i,0,n)]:r}return a.domain=function(i){return arguments.length?(t=Array.from(i),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(i){return arguments.length?(e=Array.from(i),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(i){var s=e.indexOf(i);return[t[s-1],t[s]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return FW().domain(t).range(e).unknown(r)},io.apply(a,arguments)}const C_=new Date,O_=new Date;function Va(t,e,r,n){function a(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(t(i=new Date(+i)),i),a.ceil=i=>(t(i=new Date(i-1)),e(i,1),t(i),i),a.round=i=>{const s=a(i),c=a.ceil(i);return i-s<c-i?s:c},a.offset=(i,s)=>(e(i=new Date(+i),s==null?1:Math.floor(s)),i),a.range=(i,s,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<s)||!(c>0))return d;let h;do d.push(h=new Date(+i)),e(i,c),t(i);while(h<i&&i<s);return d},a.filter=i=>Va(s=>{if(s>=s)for(;t(s),!i(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!i(s););else for(;--c>=0;)for(;e(s,1),!i(s););}),r&&(a.count=(i,s)=>(C_.setTime(+i),O_.setTime(+s),t(C_),t(O_),Math.floor(r(C_,O_))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?s=>n(s)%i===0:s=>a.count(0,s)%i===0):a)),a}const lb=Va(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);lb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Va(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):lb);lb.range;const zl=1e3,Xs=zl*60,Vl=Xs*60,ic=Vl*24,zE=ic*7,yB=ic*30,I_=ic*365,kd=Va(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*zl)},(t,e)=>(e-t)/zl,t=>t.getUTCSeconds());kd.range;const VE=Va(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zl)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getMinutes());VE.range;const FE=Va(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getUTCMinutes());FE.range;const qE=Va(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*zl-t.getMinutes()*Xs)},(t,e)=>{t.setTime(+t+e*Vl)},(t,e)=>(e-t)/Vl,t=>t.getHours());qE.range;const HE=Va(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Vl)},(t,e)=>(e-t)/Vl,t=>t.getUTCHours());HE.range;const v1=Va(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xs)/ic,t=>t.getDate()-1);v1.range;const Z2=Va(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ic,t=>t.getUTCDate()-1);Z2.range;const qW=Va(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ic,t=>Math.floor(t/ic));qW.range;function m0(t){return Va(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Xs)/zE)}const J2=m0(0),cb=m0(1),i1e=m0(2),s1e=m0(3),nf=m0(4),o1e=m0(5),l1e=m0(6);J2.range;cb.range;i1e.range;s1e.range;nf.range;o1e.range;l1e.range;function g0(t){return Va(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/zE)}const ew=g0(0),ub=g0(1),c1e=g0(2),u1e=g0(3),af=g0(4),d1e=g0(5),h1e=g0(6);ew.range;ub.range;c1e.range;u1e.range;af.range;d1e.range;h1e.range;const GE=Va(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());GE.range;const WE=Va(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());WE.range;const sc=Va(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());sc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Va(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});sc.range;const oc=Va(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());oc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Va(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});oc.range;function HW(t,e,r,n,a,i){const s=[[kd,1,zl],[kd,5,5*zl],[kd,15,15*zl],[kd,30,30*zl],[i,1,Xs],[i,5,5*Xs],[i,15,15*Xs],[i,30,30*Xs],[a,1,Vl],[a,3,3*Vl],[a,6,6*Vl],[a,12,12*Vl],[n,1,ic],[n,2,2*ic],[r,1,zE],[e,1,yB],[e,3,3*yB],[t,1,I_]];function c(h,p,m){const y=p<h;y&&([h,p]=[p,h]);const v=m&&typeof m.range=="function"?m:d(h,p,m),T=v?v.range(h,+p+1):[];return y?T.reverse():T}function d(h,p,m){const y=Math.abs(p-h)/m,v=kE(([,,w])=>w).right(s,y);if(v===s.length)return t.every(sN(h/I_,p/I_,m));if(v===0)return lb.every(Math.max(sN(h,p,m),1));const[T,S]=s[y/s[v-1][2]<s[v][2]/y?v-1:v];return T.every(S)}return[c,d]}const[f1e,p1e]=HW(oc,WE,ew,qW,HE,FE),[m1e,g1e]=HW(sc,GE,J2,v1,qE,VE);function R_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function M_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Hp(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function y1e(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,i=t.days,s=t.shortDays,c=t.months,d=t.shortMonths,h=Gp(a),p=Wp(a),m=Gp(i),y=Wp(i),v=Gp(s),T=Wp(s),S=Gp(c),w=Wp(c),j=Gp(d),R=Wp(d),I={a:J,A:ie,b:pe,B:me,c:null,d:_B,e:_B,f:U1e,g:X1e,G:Z1e,H:L1e,I:B1e,j:$1e,L:GW,m:z1e,M:V1e,p:X,q:ne,Q:NB,s:EB,S:F1e,u:q1e,U:H1e,V:G1e,w:W1e,W:K1e,x:null,X:null,y:Q1e,Y:Y1e,Z:J1e,"%":AB},L={a:re,A:Ae,b:Se,B:ze,c:null,d:TB,e:TB,f:nye,g:fye,G:mye,H:eye,I:tye,j:rye,L:KW,m:aye,M:iye,p:He,q:st,Q:NB,s:EB,S:sye,u:oye,U:lye,V:cye,w:uye,W:dye,x:null,X:null,y:hye,Y:pye,Z:gye,"%":AB},C={a:V,A:D,b:U,B:$,c:Q,d:wB,e:wB,f:R1e,g:bB,G:xB,H:SB,I:SB,j:k1e,L:I1e,m:j1e,M:C1e,p:E,q:E1e,Q:P1e,s:D1e,S:O1e,u:S1e,U:_1e,V:T1e,w:w1e,W:A1e,x:K,X:H,y:bB,Y:xB,Z:N1e,"%":M1e};I.x=P(r,I),I.X=P(n,I),I.c=P(e,I),L.x=P(r,L),L.X=P(n,L),L.c=P(e,L);function P(W,he){return function(te){var ae=[],Ue=-1,Ye=0,xt=W.length,it,Pt,Ie;for(te instanceof Date||(te=new Date(+te));++Ue<xt;)W.charCodeAt(Ue)===37&&(ae.push(W.slice(Ye,Ue)),(Pt=vB[it=W.charAt(++Ue)])!=null?it=W.charAt(++Ue):Pt=it==="e"?" ":"0",(Ie=he[it])&&(it=Ie(te,Pt)),ae.push(it),Ye=Ue+1);return ae.push(W.slice(Ye,Ue)),ae.join("")}}function N(W,he){return function(te){var ae=Hp(1900,void 0,1),Ue=A(ae,W,te+="",0),Ye,xt;if(Ue!=te.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(he&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(Ye=M_(Hp(ae.y,0,1)),xt=Ye.getUTCDay(),Ye=xt>4||xt===0?ub.ceil(Ye):ub(Ye),Ye=Z2.offset(Ye,(ae.V-1)*7),ae.y=Ye.getUTCFullYear(),ae.m=Ye.getUTCMonth(),ae.d=Ye.getUTCDate()+(ae.w+6)%7):(Ye=R_(Hp(ae.y,0,1)),xt=Ye.getDay(),Ye=xt>4||xt===0?cb.ceil(Ye):cb(Ye),Ye=v1.offset(Ye,(ae.V-1)*7),ae.y=Ye.getFullYear(),ae.m=Ye.getMonth(),ae.d=Ye.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),xt="Z"in ae?M_(Hp(ae.y,0,1)).getUTCDay():R_(Hp(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(xt+5)%7:ae.w+ae.U*7-(xt+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,M_(ae)):R_(ae)}}function A(W,he,te,ae){for(var Ue=0,Ye=he.length,xt=te.length,it,Pt;Ue<Ye;){if(ae>=xt)return-1;if(it=he.charCodeAt(Ue++),it===37){if(it=he.charAt(Ue++),Pt=C[it in vB?he.charAt(Ue++):it],!Pt||(ae=Pt(W,te,ae))<0)return-1}else if(it!=te.charCodeAt(ae++))return-1}return ae}function E(W,he,te){var ae=h.exec(he.slice(te));return ae?(W.p=p.get(ae[0].toLowerCase()),te+ae[0].length):-1}function V(W,he,te){var ae=v.exec(he.slice(te));return ae?(W.w=T.get(ae[0].toLowerCase()),te+ae[0].length):-1}function D(W,he,te){var ae=m.exec(he.slice(te));return ae?(W.w=y.get(ae[0].toLowerCase()),te+ae[0].length):-1}function U(W,he,te){var ae=j.exec(he.slice(te));return ae?(W.m=R.get(ae[0].toLowerCase()),te+ae[0].length):-1}function $(W,he,te){var ae=S.exec(he.slice(te));return ae?(W.m=w.get(ae[0].toLowerCase()),te+ae[0].length):-1}function Q(W,he,te){return A(W,e,he,te)}function K(W,he,te){return A(W,r,he,te)}function H(W,he,te){return A(W,n,he,te)}function J(W){return s[W.getDay()]}function ie(W){return i[W.getDay()]}function pe(W){return d[W.getMonth()]}function me(W){return c[W.getMonth()]}function X(W){return a[+(W.getHours()>=12)]}function ne(W){return 1+~~(W.getMonth()/3)}function re(W){return s[W.getUTCDay()]}function Ae(W){return i[W.getUTCDay()]}function Se(W){return d[W.getUTCMonth()]}function ze(W){return c[W.getUTCMonth()]}function He(W){return a[+(W.getUTCHours()>=12)]}function st(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var he=P(W+="",I);return he.toString=function(){return W},he},parse:function(W){var he=N(W+="",!1);return he.toString=function(){return W},he},utcFormat:function(W){var he=P(W+="",L);return he.toString=function(){return W},he},utcParse:function(W){var he=N(W+="",!0);return he.toString=function(){return W},he}}}var vB={"-":"",_:" ",0:"0"},ei=/^\s*\d+/,v1e=/^%/,x1e=/[\\^$*+?|[\]().{}]/g;function Fr(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function b1e(t){return t.replace(x1e,"\\$&")}function Gp(t){return new RegExp("^(?:"+t.map(b1e).join("|")+")","i")}function Wp(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function w1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function S1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function _1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function T1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function A1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function xB(t,e,r){var n=ei.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function bB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function N1e(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function E1e(t,e,r){var n=ei.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function j1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function wB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function k1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function SB(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function C1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function O1e(t,e,r){var n=ei.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function I1e(t,e,r){var n=ei.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function R1e(t,e,r){var n=ei.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function M1e(t,e,r){var n=v1e.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function P1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function D1e(t,e,r){var n=ei.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function _B(t,e){return Fr(t.getDate(),e,2)}function L1e(t,e){return Fr(t.getHours(),e,2)}function B1e(t,e){return Fr(t.getHours()%12||12,e,2)}function $1e(t,e){return Fr(1+v1.count(sc(t),t),e,3)}function GW(t,e){return Fr(t.getMilliseconds(),e,3)}function U1e(t,e){return GW(t,e)+"000"}function z1e(t,e){return Fr(t.getMonth()+1,e,2)}function V1e(t,e){return Fr(t.getMinutes(),e,2)}function F1e(t,e){return Fr(t.getSeconds(),e,2)}function q1e(t){var e=t.getDay();return e===0?7:e}function H1e(t,e){return Fr(J2.count(sc(t)-1,t),e,2)}function WW(t){var e=t.getDay();return e>=4||e===0?nf(t):nf.ceil(t)}function G1e(t,e){return t=WW(t),Fr(nf.count(sc(t),t)+(sc(t).getDay()===4),e,2)}function W1e(t){return t.getDay()}function K1e(t,e){return Fr(cb.count(sc(t)-1,t),e,2)}function Q1e(t,e){return Fr(t.getFullYear()%100,e,2)}function X1e(t,e){return t=WW(t),Fr(t.getFullYear()%100,e,2)}function Y1e(t,e){return Fr(t.getFullYear()%1e4,e,4)}function Z1e(t,e){var r=t.getDay();return t=r>=4||r===0?nf(t):nf.ceil(t),Fr(t.getFullYear()%1e4,e,4)}function J1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Fr(e/60|0,"0",2)+Fr(e%60,"0",2)}function TB(t,e){return Fr(t.getUTCDate(),e,2)}function eye(t,e){return Fr(t.getUTCHours(),e,2)}function tye(t,e){return Fr(t.getUTCHours()%12||12,e,2)}function rye(t,e){return Fr(1+Z2.count(oc(t),t),e,3)}function KW(t,e){return Fr(t.getUTCMilliseconds(),e,3)}function nye(t,e){return KW(t,e)+"000"}function aye(t,e){return Fr(t.getUTCMonth()+1,e,2)}function iye(t,e){return Fr(t.getUTCMinutes(),e,2)}function sye(t,e){return Fr(t.getUTCSeconds(),e,2)}function oye(t){var e=t.getUTCDay();return e===0?7:e}function lye(t,e){return Fr(ew.count(oc(t)-1,t),e,2)}function QW(t){var e=t.getUTCDay();return e>=4||e===0?af(t):af.ceil(t)}function cye(t,e){return t=QW(t),Fr(af.count(oc(t),t)+(oc(t).getUTCDay()===4),e,2)}function uye(t){return t.getUTCDay()}function dye(t,e){return Fr(ub.count(oc(t)-1,t),e,2)}function hye(t,e){return Fr(t.getUTCFullYear()%100,e,2)}function fye(t,e){return t=QW(t),Fr(t.getUTCFullYear()%100,e,2)}function pye(t,e){return Fr(t.getUTCFullYear()%1e4,e,4)}function mye(t,e){var r=t.getUTCDay();return t=r>=4||r===0?af(t):af.ceil(t),Fr(t.getUTCFullYear()%1e4,e,4)}function gye(){return"+0000"}function AB(){return"%"}function NB(t){return+t}function EB(t){return Math.floor(+t/1e3)}var ah,XW,YW;yye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yye(t){return ah=y1e(t),XW=ah.format,ah.parse,YW=ah.utcFormat,ah.utcParse,ah}function vye(t){return new Date(t)}function xye(t){return t instanceof Date?+t:+new Date(+t)}function KE(t,e,r,n,a,i,s,c,d,h){var p=ME(),m=p.invert,y=p.domain,v=h(".%L"),T=h(":%S"),S=h("%I:%M"),w=h("%I %p"),j=h("%a %d"),R=h("%b %d"),I=h("%B"),L=h("%Y");function C(P){return(d(P)<P?v:c(P)<P?T:s(P)<P?S:i(P)<P?w:n(P)<P?a(P)<P?j:R:r(P)<P?I:L)(P)}return p.invert=function(P){return new Date(m(P))},p.domain=function(P){return arguments.length?y(Array.from(P,xye)):y().map(vye)},p.ticks=function(P){var N=y();return t(N[0],N[N.length-1],P??10)},p.tickFormat=function(P,N){return N==null?C:h(N)},p.nice=function(P){var N=y();return(!P||typeof P.range!="function")&&(P=e(N[0],N[N.length-1],P??10)),P?y(LW(N,P)):p},p.copy=function(){return y1(p,KE(t,e,r,n,a,i,s,c,d,h))},p}function bye(){return io.apply(KE(m1e,g1e,sc,GE,J2,v1,qE,VE,kd,XW).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wye(){return io.apply(KE(f1e,p1e,oc,WE,ew,Z2,HE,FE,kd,YW).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function tw(){var t=0,e=1,r,n,a,i,s=Di,c=!1,d;function h(m){return m==null||isNaN(m=+m)?d:s(a===0?.5:(m=(i(m)-r)*a,c?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([t,e]=m,r=i(t=+t),n=i(e=+e),a=r===n?0:1/(n-r),h):[t,e]},h.clamp=function(m){return arguments.length?(c=!!m,h):c},h.interpolator=function(m){return arguments.length?(s=m,h):s};function p(m){return function(y){var v,T;return arguments.length?([v,T]=y,s=m(v,T),h):[s(0),s(1)]}}return h.range=p(Lf),h.rangeRound=p(RE),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return i=m,r=m(t),n=m(e),a=r===n?0:1/(n-r),h}}function Bu(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ZW(){var t=Lu(tw()(Di));return t.copy=function(){return Bu(t,ZW())},mc.apply(t,arguments)}function JW(){var t=LE(tw()).domain([1,10]);return t.copy=function(){return Bu(t,JW()).base(t.base())},mc.apply(t,arguments)}function eK(){var t=BE(tw());return t.copy=function(){return Bu(t,eK()).constant(t.constant())},mc.apply(t,arguments)}function QE(){var t=$E(tw());return t.copy=function(){return Bu(t,QE()).exponent(t.exponent())},mc.apply(t,arguments)}function Sye(){return QE.apply(null,arguments).exponent(.5)}function tK(){var t=[],e=Di;function r(n){if(n!=null&&!isNaN(n=+n))return e((m1(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(wu),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>lge(t,i/n))},r.copy=function(){return tK(e).domain(t)},mc.apply(r,arguments)}function rw(){var t=0,e=.5,r=1,n=1,a,i,s,c,d,h=Di,p,m=!1,y;function v(S){return isNaN(S=+S)?y:(S=.5+((S=+p(S))-i)*(n*S<n*i?c:d),h(m?Math.max(0,Math.min(1,S)):S))}v.domain=function(S){return arguments.length?([t,e,r]=S,a=p(t=+t),i=p(e=+e),s=p(r=+r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,v):[t,e,r]},v.clamp=function(S){return arguments.length?(m=!!S,v):m},v.interpolator=function(S){return arguments.length?(h=S,v):h};function T(S){return function(w){var j,R,I;return arguments.length?([j,R,I]=w,h=Mge(S,[j,R,I]),v):[h(0),h(.5),h(1)]}}return v.range=T(Lf),v.rangeRound=T(RE),v.unknown=function(S){return arguments.length?(y=S,v):y},function(S){return p=S,a=S(t),i=S(e),s=S(r),c=a===i?0:.5/(i-a),d=i===s?0:.5/(s-i),n=i<a?-1:1,v}}function rK(){var t=Lu(rw()(Di));return t.copy=function(){return Bu(t,rK())},mc.apply(t,arguments)}function nK(){var t=LE(rw()).domain([.1,1,10]);return t.copy=function(){return Bu(t,nK()).base(t.base())},mc.apply(t,arguments)}function aK(){var t=BE(rw());return t.copy=function(){return Bu(t,aK()).constant(t.constant())},mc.apply(t,arguments)}function XE(){var t=$E(rw());return t.copy=function(){return Bu(t,XE()).exponent(t.exponent())},mc.apply(t,arguments)}function _ye(){return XE.apply(null,arguments).exponent(.5)}const jB=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:lg,scaleDiverging:rK,scaleDivergingLog:nK,scaleDivergingPow:XE,scaleDivergingSqrt:_ye,scaleDivergingSymlog:aK,scaleIdentity:DW,scaleImplicit:oN,scaleLinear:ob,scaleLog:BW,scaleOrdinal:CE,scalePoint:wm,scalePow:UE,scaleQuantile:zW,scaleQuantize:VW,scaleRadial:UW,scaleSequential:ZW,scaleSequentialLog:JW,scaleSequentialPow:QE,scaleSequentialQuantile:tK,scaleSequentialSqrt:Sye,scaleSequentialSymlog:eK,scaleSqrt:n1e,scaleSymlog:$W,scaleThreshold:FW,scaleTime:bye,scaleUtc:wye,tickFormat:PW},Symbol.toStringTag,{value:"Module"}));var P_,kB;function nw(){if(kB)return P_;kB=1;var t=Mf();function e(r,n,a){for(var i=-1,s=r.length;++i<s;){var c=r[i],d=n(c);if(d!=null&&(h===void 0?d===d&&!t(d):a(d,h)))var h=d,p=c}return p}return P_=e,P_}var D_,CB;function iK(){if(CB)return D_;CB=1;function t(e,r){return e>r}return D_=t,D_}var L_,OB;function Tye(){if(OB)return L_;OB=1;var t=nw(),e=iK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return L_=n,L_}var Aye=Tye();const aw=Kr(Aye);var B_,IB;function sK(){if(IB)return B_;IB=1;function t(e,r){return e<r}return B_=t,B_}var $_,RB;function Nye(){if(RB)return $_;RB=1;var t=nw(),e=sK(),r=Df();function n(a){return a&&a.length?t(a,r,e):void 0}return $_=n,$_}var Eye=Nye();const iw=Kr(Eye);var U_,MB;function jye(){if(MB)return U_;MB=1;var t=hE(),e=sl(),r=pW(),n=os();function a(i,s){var c=n(i)?t:r;return c(i,e(s,3))}return U_=a,U_}var z_,PB;function kye(){if(PB)return z_;PB=1;var t=hW(),e=jye();function r(n,a){return t(e(n,a),1)}return z_=r,z_}var Cye=kye();const Oye=Kr(Cye);var V_,DB;function Iye(){if(DB)return V_;DB=1;var t=TE();function e(r,n){return t(r,n)}return V_=e,V_}var Rye=Iye();const x1=Kr(Rye);var Bf=1e9,Mye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ZE,Hn=!0,ao="[DecimalError] ",Ud=ao+"Invalid argument: ",YE=ao+"Exponent out of range: ",$f=Math.floor,bd=Math.pow,Pye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ts,Xa=1e7,zn=7,oK=9007199254740991,db=$f(oK/zn),kt={};kt.absoluteValue=kt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};kt.comparedTo=kt.cmp=function(t){var e,r,n,a,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(n=i.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(i.d[e]!==t.d[e])return i.d[e]>t.d[e]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};kt.decimalPlaces=kt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*zn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};kt.dividedBy=kt.div=function(t){return Ql(this,new this.constructor(t))};kt.dividedToIntegerBy=kt.idiv=function(t){var e=this,r=e.constructor;return kn(Ql(e,new r(t),0,1),r.precision)};kt.equals=kt.eq=function(t){return!this.cmp(t)};kt.exponent=function(){return Aa(this)};kt.greaterThan=kt.gt=function(t){return this.cmp(t)>0};kt.greaterThanOrEqualTo=kt.gte=function(t){return this.cmp(t)>=0};kt.isInteger=kt.isint=function(){return this.e>this.d.length-2};kt.isNegative=kt.isneg=function(){return this.s<0};kt.isPositive=kt.ispos=function(){return this.s>0};kt.isZero=function(){return this.s===0};kt.lessThan=kt.lt=function(t){return this.cmp(t)<0};kt.lessThanOrEqualTo=kt.lte=function(t){return this.cmp(t)<1};kt.logarithm=kt.log=function(t){var e,r=this,n=r.constructor,a=n.precision,i=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(Ts))throw Error(ao+"NaN");if(r.s<1)throw Error(ao+(r.s?"NaN":"-Infinity"));return r.eq(Ts)?new n(0):(Hn=!1,e=Ql(fg(r,i),fg(t,i),i),Hn=!0,kn(e,a))};kt.minus=kt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?uK(e,t):lK(e,(t.s=-t.s,t))};kt.modulo=kt.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(ao+"NaN");return r.s?(Hn=!1,e=Ql(r,t,0,1).times(t),Hn=!0,r.minus(e)):kn(new n(r),a)};kt.naturalExponential=kt.exp=function(){return cK(this)};kt.naturalLogarithm=kt.ln=function(){return fg(this)};kt.negated=kt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};kt.plus=kt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?lK(e,t):uK(e,(t.s=-t.s,t))};kt.precision=kt.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ud+t);if(e=Aa(a)+1,n=a.d.length-1,r=n*zn+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};kt.squareRoot=kt.sqrt=function(){var t,e,r,n,a,i,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(ao+"NaN")}for(t=Aa(c),Hn=!1,a=Math.sqrt(+c),a==0||a==1/0?(e=Fo(c.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=$f((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new d(e)):n=new d(a.toString()),r=d.precision,a=s=r+3;;)if(i=n,n=i.plus(Ql(c,i,s+2)).times(.5),Fo(i.d).slice(0,s)===(e=Fo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),a==s&&e=="4999"){if(kn(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(e!="9999")break;s+=4}return Hn=!0,kn(n,r)};kt.times=kt.mul=function(t){var e,r,n,a,i,s,c,d,h,p=this,m=p.constructor,y=p.d,v=(t=new m(t)).d;if(!p.s||!t.s)return new m(0);for(t.s*=p.s,r=p.e+t.e,d=y.length,h=v.length,d<h&&(i=y,y=v,v=i,s=d,d=h,h=s),i=[],s=d+h,n=s;n--;)i.push(0);for(n=h;--n>=0;){for(e=0,a=d+n;a>n;)c=i[a]+v[n]*y[a-n-1]+e,i[a--]=c%Xa|0,e=c/Xa|0;i[a]=(i[a]+e)%Xa|0}for(;!i[--s];)i.pop();return e?++r:i.shift(),t.d=i,t.e=r,Hn?kn(t,m.precision):t};kt.toDecimalPlaces=kt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Zo(t,0,Bf),e===void 0?e=n.rounding:Zo(e,0,8),kn(r,t+Aa(r)+1,e))};kt.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=r0(n,!0):(Zo(t,0,Bf),e===void 0?e=a.rounding:Zo(e,0,8),n=kn(new a(n),t+1,e),r=r0(n,!0,t+1)),r};kt.toFixed=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?r0(a):(Zo(t,0,Bf),e===void 0?e=i.rounding:Zo(e,0,8),n=kn(new i(a),t+Aa(a)+1,e),r=r0(n.abs(),!1,t+Aa(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};kt.toInteger=kt.toint=function(){var t=this,e=t.constructor;return kn(new e(t),Aa(t)+1,e.rounding)};kt.toNumber=function(){return+this};kt.toPower=kt.pow=function(t){var e,r,n,a,i,s,c=this,d=c.constructor,h=12,p=+(t=new d(t));if(!t.s)return new d(Ts);if(c=new d(c),!c.s){if(t.s<1)throw Error(ao+"Infinity");return c}if(c.eq(Ts))return c;if(n=d.precision,t.eq(Ts))return kn(c,n);if(e=t.e,r=t.d.length-1,s=e>=r,i=c.s,s){if((r=p<0?-p:p)<=oK){for(a=new d(Ts),e=Math.ceil(n/zn+4),Hn=!1;r%2&&(a=a.times(c),BB(a.d,e)),r=$f(r/2),r!==0;)c=c.times(c),BB(c.d,e);return Hn=!0,t.s<0?new d(Ts).div(a):kn(a,n)}}else if(i<0)throw Error(ao+"NaN");return i=i<0&&t.d[Math.max(e,r)]&1?-1:1,c.s=1,Hn=!1,a=t.times(fg(c,n+h)),Hn=!0,a=cK(a),a.s=i,a};kt.toPrecision=function(t,e){var r,n,a=this,i=a.constructor;return t===void 0?(r=Aa(a),n=r0(a,r<=i.toExpNeg||r>=i.toExpPos)):(Zo(t,1,Bf),e===void 0?e=i.rounding:Zo(e,0,8),a=kn(new i(a),t,e),r=Aa(a),n=r0(a,t<=r||r<=i.toExpNeg,t)),n};kt.toSignificantDigits=kt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Zo(t,1,Bf),e===void 0?e=n.rounding:Zo(e,0,8)),kn(new n(r),t,e)};kt.toString=kt.valueOf=kt.val=kt.toJSON=kt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Aa(t),r=t.constructor;return r0(t,e<=r.toExpNeg||e>=r.toExpPos)};function lK(t,e){var r,n,a,i,s,c,d,h,p=t.constructor,m=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Hn?kn(e,m):e;if(d=t.d,h=e.d,s=t.e,a=e.e,d=d.slice(),i=s-a,i){for(i<0?(n=d,i=-i,c=h.length):(n=h,a=s,c=d.length),s=Math.ceil(m/zn),c=s>c?s+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=h.length,c-i<0&&(i=c,n=h,h=d,d=n),r=0;i;)r=(d[--i]=d[i]+h[i]+r)/Xa|0,d[i]%=Xa;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=a,Hn?kn(e,m):e}function Zo(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ud+t)}function Fo(t){var e,r,n,a=t.length-1,i="",s=t[0];if(a>0){for(i+=s,e=1;e<a;e++)n=t[e]+"",r=zn-n.length,r&&(i+=Zc(r)),i+=n;s=t[e],n=s+"",r=zn-n.length,r&&(i+=Zc(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return i+s}var Ql=(function(){function t(n,a){var i,s=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+s,n[c]=i%Xa|0,s=i/Xa|0;return s&&n.unshift(s),n}function e(n,a,i,s){var c,d;if(i!=s)d=i>s?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var s=0;i--;)n[i]-=s,s=n[i]<a[i]?1:0,n[i]=s*Xa+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,s){var c,d,h,p,m,y,v,T,S,w,j,R,I,L,C,P,N,A,E=n.constructor,V=n.s==a.s?1:-1,D=n.d,U=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(ao+"Division by zero");for(d=n.e-a.e,N=U.length,C=D.length,v=new E(V),T=v.d=[],h=0;U[h]==(D[h]||0);)++h;if(U[h]>(D[h]||0)&&--d,i==null?R=i=E.precision:s?R=i+(Aa(n)-Aa(a))+1:R=i,R<0)return new E(0);if(R=R/zn+2|0,h=0,N==1)for(p=0,U=U[0],R++;(h<C||p)&&R--;h++)I=p*Xa+(D[h]||0),T[h]=I/U|0,p=I%U|0;else{for(p=Xa/(U[0]+1)|0,p>1&&(U=t(U,p),D=t(D,p),N=U.length,C=D.length),L=N,S=D.slice(0,N),w=S.length;w<N;)S[w++]=0;A=U.slice(),A.unshift(0),P=U[0],U[1]>=Xa/2&&++P;do p=0,c=e(U,S,N,w),c<0?(j=S[0],N!=w&&(j=j*Xa+(S[1]||0)),p=j/P|0,p>1?(p>=Xa&&(p=Xa-1),m=t(U,p),y=m.length,w=S.length,c=e(m,S,y,w),c==1&&(p--,r(m,N<y?A:U,y))):(p==0&&(c=p=1),m=U.slice()),y=m.length,y<w&&m.unshift(0),r(S,m,w),c==-1&&(w=S.length,c=e(U,S,N,w),c<1&&(p++,r(S,N<w?A:U,w))),w=S.length):c===0&&(p++,S=[0]),T[h++]=p,c&&S[0]?S[w++]=D[L]||0:(S=[D[L]],w=1);while((L++<C||S[0]!==void 0)&&R--)}return T[0]||T.shift(),v.e=d,kn(v,s?i+Aa(v)+1:i)}})();function cK(t,e){var r,n,a,i,s,c,d=0,h=0,p=t.constructor,m=p.precision;if(Aa(t)>16)throw Error(YE+Aa(t));if(!t.s)return new p(Ts);for(Hn=!1,c=m,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(n=Math.log(bd(2,h))/Math.LN10*2+5|0,c+=n,r=a=i=new p(Ts),p.precision=c;;){if(a=kn(a.times(t),c),r=r.times(++d),s=i.plus(Ql(a,r,c)),Fo(s.d).slice(0,c)===Fo(i.d).slice(0,c)){for(;h--;)i=kn(i.times(i),c);return p.precision=m,e==null?(Hn=!0,kn(i,m)):i}i=s}}function Aa(t){for(var e=t.e*zn,r=t.d[0];r>=10;r/=10)e++;return e}function F_(t,e,r){if(e>t.LN10.sd())throw Hn=!0,r&&(t.precision=r),Error(ao+"LN10 precision limit exceeded");return kn(new t(t.LN10),e)}function Zc(t){for(var e="";t--;)e+="0";return e}function fg(t,e){var r,n,a,i,s,c,d,h,p,m=1,y=10,v=t,T=v.d,S=v.constructor,w=S.precision;if(v.s<1)throw Error(ao+(v.s?"NaN":"-Infinity"));if(v.eq(Ts))return new S(0);if(e==null?(Hn=!1,h=w):h=e,v.eq(10))return e==null&&(Hn=!0),F_(S,h);if(h+=y,S.precision=h,r=Fo(T),n=r.charAt(0),i=Aa(v),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(t),r=Fo(v.d),n=r.charAt(0),m++;i=Aa(v),n>1?(v=new S("0."+r),i++):v=new S(n+"."+r.slice(1))}else return d=F_(S,h+2,w).times(i+""),v=fg(new S(n+"."+r.slice(1)),h-y).plus(d),S.precision=w,e==null?(Hn=!0,kn(v,w)):v;for(c=s=v=Ql(v.minus(Ts),v.plus(Ts),h),p=kn(v.times(v),h),a=3;;){if(s=kn(s.times(p),h),d=c.plus(Ql(s,new S(a),h)),Fo(d.d).slice(0,h)===Fo(c.d).slice(0,h))return c=c.times(2),i!==0&&(c=c.plus(F_(S,h+2,w).times(i+""))),c=Ql(c,new S(m),h),S.precision=w,e==null?(Hn=!0,kn(c,w)):c;c=d,a+=2}}function LB(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=$f(r/zn),t.d=[],n=(r+1)%zn,r<0&&(n+=zn),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=zn;n<a;)t.d.push(+e.slice(n,n+=zn));e=e.slice(n),n=zn-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Hn&&(t.e>db||t.e<-db))throw Error(YE+r)}else t.s=0,t.e=0,t.d=[0];return t}function kn(t,e,r){var n,a,i,s,c,d,h,p,m=t.d;for(s=1,i=m[0];i>=10;i/=10)s++;if(n=e-s,n<0)n+=zn,a=e,h=m[p=0];else{if(p=Math.ceil((n+1)/zn),i=m.length,p>=i)return t;for(h=i=m[p],s=1;i>=10;i/=10)s++;n%=zn,a=n-zn+s}if(r!==void 0&&(i=bd(10,s-a-1),c=h/i%10|0,d=e<0||m[p+1]!==void 0||h%i,d=r<4?(c||d)&&(r==0||r==(t.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?h/bd(10,s-a):0:m[p-1])%10&1||r==(t.s<0?8:7))),e<1||!m[0])return d?(i=Aa(t),m.length=1,e=e-i-1,m[0]=bd(10,(zn-e%zn)%zn),t.e=$f(-e/zn)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(n==0?(m.length=p,i=1,p--):(m.length=p+1,i=bd(10,zn-n),m[p]=a>0?(h/bd(10,s-a)%bd(10,a)|0)*i:0),d)for(;;)if(p==0){(m[0]+=i)==Xa&&(m[0]=1,++t.e);break}else{if(m[p]+=i,m[p]!=Xa)break;m[p--]=0,i=1}for(n=m.length;m[--n]===0;)m.pop();if(Hn&&(t.e>db||t.e<-db))throw Error(YE+Aa(t));return t}function uK(t,e){var r,n,a,i,s,c,d,h,p,m,y=t.constructor,v=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),Hn?kn(e,v):e;if(d=t.d,m=e.d,n=e.e,h=t.e,d=d.slice(),s=h-n,s){for(p=s<0,p?(r=d,s=-s,c=m.length):(r=m,n=h,c=d.length),a=Math.max(Math.ceil(v/zn),c)+2,s>a&&(s=a,r.length=1),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=m.length,p=a<c,p&&(c=a),a=0;a<c;a++)if(d[a]!=m[a]){p=d[a]<m[a];break}s=0}for(p&&(r=d,d=m,m=r,e.s=-e.s),c=d.length,a=m.length-c;a>0;--a)d[c++]=0;for(a=m.length;a>s;){if(d[--a]<m[a]){for(i=a;i&&d[--i]===0;)d[i]=Xa-1;--d[i],d[a]+=Xa}d[a]-=m[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,Hn?kn(e,v):e):new y(0)}function r0(t,e,r){var n,a=Aa(t),i=Fo(t.d),s=i.length;return e?(r&&(n=r-s)>0?i=i.charAt(0)+"."+i.slice(1)+Zc(n):s>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Zc(-a-1)+i,r&&(n=r-s)>0&&(i+=Zc(n))):a>=s?(i+=Zc(a+1-s),r&&(n=r-a-1)>0&&(i=i+"."+Zc(n))):((n=a+1)<s&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-s)>0&&(a+1===s&&(i+="."),i+=Zc(n))),t.s<0?"-"+i:i}function BB(t,e){if(t.length>e)return t.length=e,!0}function dK(t){var e,r,n;function a(i){var s=this;if(!(s instanceof a))return new a(i);if(s.constructor=a,i instanceof a){s.s=i.s,s.e=i.e,s.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ud+i);if(i>0)s.s=1;else if(i<0)i=-i,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(i===~~i&&i<1e7){s.e=0,s.d=[i];return}return LB(s,i.toString())}else if(typeof i!="string")throw Error(Ud+i);if(i.charCodeAt(0)===45?(i=i.slice(1),s.s=-1):s.s=1,Pye.test(i))LB(s,i);else throw Error(Ud+i)}if(a.prototype=kt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=dK,a.config=a.set=Dye,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function Dye(t){if(!t||typeof t!="object")throw Error(ao+"Object expected");var e,r,n,a=["precision",1,Bf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if($f(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ud+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ud+r+": "+n);return this}var ZE=dK(Mye);Ts=new ZE(1);const bn=ZE;function Lye(t){return zye(t)||Uye(t)||$ye(t)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ye(t,e){if(t){if(typeof t=="string")return dN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dN(t,e)}}function Uye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function zye(t){if(Array.isArray(t))return dN(t)}function dN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Vye=function(e){return e},hK={},fK=function(e){return e===hK},$B=function(e){return function r(){return arguments.length===0||arguments.length===1&&fK(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},Fye=function t(e,r){return e===1?r:$B(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var s=a.filter(function(c){return c!==hK}).length;return s>=e?r.apply(void 0,a):t(e-s,$B(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var p=a.map(function(m){return fK(m)?d.shift():m});return r.apply(void 0,Lye(p).concat(d))}))})},sw=function(e){return Fye(e.length,e)},hN=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},qye=sw(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),Hye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return Vye;var a=r.reverse(),i=a[0],s=a.slice(1);return function(){return s.reduce(function(c,d){return d(c)},i.apply(void 0,arguments))}},fN=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},pK=function(e){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r&&i.every(function(c,d){return c===r[d]})||(r=i,n=e.apply(void 0,i)),n}};function Gye(t){var e;return t===0?e=1:e=Math.floor(new bn(t).abs().log(10).toNumber())+1,e}function Wye(t,e,r){for(var n=new bn(t),a=0,i=[];n.lt(e)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var Kye=sw(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),Qye=sw(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),Xye=sw(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const ow={rangeStep:Wye,getDigitCount:Gye,interpolateNumber:Kye,uninterpolateNumber:Qye,uninterpolateTruncation:Xye};function pN(t){return Jye(t)||Zye(t)||mK(t)||Yye()}function Yye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Jye(t){if(Array.isArray(t))return mN(t)}function pg(t,e){return rve(t)||tve(t,e)||mK(t,e)||eve()}function eve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mK(t,e){if(t){if(typeof t=="string")return mN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mN(t,e)}}function mN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tve(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=t[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(r.push(c.value),!(e&&r.length===e));n=!0);}catch(d){a=!0,i=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function rve(t){if(Array.isArray(t))return t}function gK(t){var e=pg(t,2),r=e[0],n=e[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function yK(t,e,r){if(t.lte(0))return new bn(0);var n=ow.getDigitCount(t.toNumber()),a=new bn(10).pow(n),i=t.div(a),s=n!==1?.05:.1,c=new bn(Math.ceil(i.div(s).toNumber())).add(r).mul(s),d=c.mul(a);return e?d:new bn(Math.ceil(d))}function nve(t,e,r){var n=1,a=new bn(t);if(!a.isint()&&r){var i=Math.abs(t);i<1?(n=new bn(10).pow(ow.getDigitCount(t)-1),a=new bn(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new bn(Math.floor(t)))}else t===0?a=new bn(Math.floor((e-1)/2)):r||(a=new bn(Math.floor(t)));var s=Math.floor((e-1)/2),c=Hye(qye(function(d){return a.add(new bn(d-s).mul(n)).toNumber()}),hN);return c(0,e)}function vK(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var i=yK(new bn(e).sub(t).div(r-1),n,a),s;t<=0&&e>=0?s=new bn(0):(s=new bn(t).add(e).div(2),s=s.sub(new bn(s).mod(i)));var c=Math.ceil(s.sub(t).div(i).toNumber()),d=Math.ceil(new bn(e).sub(s).div(i).toNumber()),h=c+d+1;return h>r?vK(t,e,r,n,a+1):(h<r&&(d=e>0?d+(r-h):d,c=e>0?c:c+(r-h)),{step:i,tickMin:s.sub(new bn(c).mul(i)),tickMax:s.add(new bn(d).mul(i))})}function ave(t){var e=pg(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(a,2),c=gK([r,n]),d=pg(c,2),h=d[0],p=d[1];if(h===-1/0||p===1/0){var m=p===1/0?[h].concat(pN(hN(0,a-1).map(function(){return 1/0}))):[].concat(pN(hN(0,a-1).map(function(){return-1/0})),[p]);return r>n?fN(m):m}if(h===p)return nve(h,a,i);var y=vK(h,p,s,i),v=y.step,T=y.tickMin,S=y.tickMax,w=ow.rangeStep(T,S.add(new bn(.1).mul(v)),v);return r>n?fN(w):w}function ive(t,e){var r=pg(t,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=gK([n,a]),c=pg(s,2),d=c[0],h=c[1];if(d===-1/0||h===1/0)return[n,a];if(d===h)return[d];var p=Math.max(e,2),m=yK(new bn(h).sub(d).div(p-1),i,0),y=[].concat(pN(ow.rangeStep(new bn(d),new bn(h).sub(new bn(.99).mul(m)),m)),[h]);return n>a?fN(y):y}var sve=pK(ave),ove=pK(ive),lve="Invariant failed";function n0(t,e){throw new Error(lve)}var cve=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function sf(t){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sf(t)}function hb(){return hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},hb.apply(this,arguments)}function uve(t,e){return pve(t)||fve(t,e)||hve(t,e)||dve()}function dve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hve(t,e){if(t){if(typeof t=="string")return UB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UB(t,e)}}function UB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fve(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function pve(t){if(Array.isArray(t))return t}function mve(t,e){if(t==null)return{};var r=gve(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wK(n.key),n)}}function xve(t,e,r){return e&&vve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bve(t,e,r){return e=fb(e),wve(t,xK()?Reflect.construct(e,r||[],fb(t).constructor):e.apply(t,r))}function wve(t,e){if(e&&(sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sve(t)}function Sve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xK=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},fb(t)}function _ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gN(t,e)}function gN(t,e){return gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},gN(t,e)}function bK(t,e,r){return e=wK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wK(t){var e=Tve(t,"string");return sf(e)=="symbol"?e:e+""}function Tve(t,e){if(sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var b1=(function(t){function e(){return yve(this,e),bve(this,e,arguments)}return _ve(e,t),xve(e,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,s=n.width,c=n.dataKey,d=n.data,h=n.dataPointFormatter,p=n.xAxis,m=n.yAxis,y=mve(n,cve),v=zt(y,!1);this.props.direction==="x"&&p.type!=="number"&&n0();var T=d.map(function(S){var w=h(S,c),j=w.x,R=w.y,I=w.value,L=w.errorVal;if(!L)return null;var C=[],P,N;if(Array.isArray(L)){var A=uve(L,2);P=A[0],N=A[1]}else P=N=L;if(i==="vertical"){var E=p.scale,V=R+a,D=V+s,U=V-s,$=E(I-P),Q=E(I+N);C.push({x1:Q,y1:D,x2:Q,y2:U}),C.push({x1:$,y1:V,x2:Q,y2:V}),C.push({x1:$,y1:D,x2:$,y2:U})}else if(i==="horizontal"){var K=m.scale,H=j+a,J=H-s,ie=H+s,pe=K(I-P),me=K(I+N);C.push({x1:J,y1:me,x2:ie,y2:me}),C.push({x1:H,y1:pe,x2:H,y2:me}),C.push({x1:J,y1:pe,x2:ie,y2:pe})}return se.createElement(zr,hb({className:"recharts-errorBar",key:"bar-".concat(C.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},v),C.map(function(X){return se.createElement("line",hb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return se.createElement(zr,{className:"recharts-errorBars"},T)}}])})(se.Component);bK(b1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});bK(b1,"displayName","ErrorBar");function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function zB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zB(Object(r),!0).forEach(function(n){Ave(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ave(t,e,r){return e=Nve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nve(t){var e=Eve(t,"string");return mg(e)=="symbol"?e:e+""}function Eve(t,e){if(mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SK=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,i=e.legendContent,s=Ss(r,Nh);if(!s)return null;var c=Nh.defaultProps,d=c!==void 0?pd(pd({},c),s.props):{},h;return s.props&&s.props.payload?h=s.props&&s.props.payload:i==="children"?h=(n||[]).reduce(function(p,m){var y=m.item,v=m.props,T=v.sectors||v.data||[];return p.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):h=(n||[]).map(function(p){var m=p.item,y=m.type.defaultProps,v=y!==void 0?pd(pd({},y),m.props):{},T=v.dataKey,S=v.name,w=v.legendType,j=v.hide;return{inactive:j,dataKey:T,type:d.iconType||w||"square",color:JE(m),value:S||T,payload:v}}),pd(pd(pd({},d),Nh.getWithHeight(s,a)),{},{payload:h,item:s})};function gg(t){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(t)}function VB(t){return Ove(t)||Cve(t)||kve(t)||jve()}function jve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kve(t,e){if(t){if(typeof t=="string")return yN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yN(t,e)}}function Cve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ove(t){if(Array.isArray(t))return yN(t)}function yN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function FB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function na(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?FB(Object(r),!0).forEach(function(n){jh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):FB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jh(t,e,r){return e=Ive(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ive(t){var e=Rve(t,"string");return gg(e)=="symbol"?e:e+""}function Rve(t,e){if(gg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pi(t,e,r){return lr(t)||lr(e)?r:La(e)?Zs(t,e,r):rr(e)?e(t):r}function Sm(t,e,r,n){var a=Oye(t,function(c){return pi(c,e)});if(r==="number"){var i=a.filter(function(c){return vt(c)||parseFloat(c)});return i.length?[iw(i),aw(i)]:[1/0,-1/0]}var s=n?a.filter(function(c){return!lr(c)}):a;return s.map(function(c){return La(c)||c instanceof Date?c:""})}var Mve=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,c=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var d=i.range,h=0;h<c;h++){var p=h>0?a[h-1].coordinate:a[c-1].coordinate,m=a[h].coordinate,y=h>=c-1?a[0].coordinate:a[h+1].coordinate,v=void 0;if(vo(m-p)!==vo(y-m)){var T=[];if(vo(y-m)===vo(d[1]-d[0])){v=y;var S=m+d[1]-d[0];T[0]=Math.min(S,(S+p)/2),T[1]=Math.max(S,(S+p)/2)}else{v=p;var w=y+d[1]-d[0];T[0]=Math.min(m,(w+m)/2),T[1]=Math.max(m,(w+m)/2)}var j=[Math.min(m,(v+m)/2),Math.max(m,(v+m)/2)];if(e>j[0]&&e<=j[1]||e>=T[0]&&e<=T[1]){s=a[h].index;break}}else{var R=Math.min(p,y),I=Math.max(p,y);if(e>(R+m)/2&&e<=(I+m)/2){s=a[h].index;break}}}else for(var L=0;L<c;L++)if(L===0&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L>0&&L<c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2&&e<=(n[L].coordinate+n[L+1].coordinate)/2||L===c-1&&e>(n[L].coordinate+n[L-1].coordinate)/2){s=n[L].index;break}return s},JE=function(e){var r,n=e,a=n.type.displayName,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,s=i.stroke,c=i.fill,d;switch(a){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},Pve=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var s={},c=Object.keys(i),d=0,h=c.length;d<h;d++)for(var p=i[c[d]].stackGroups,m=Object.keys(p),y=0,v=m.length;y<v;y++){var T=p[m[y]],S=T.items,w=T.cateAxisId,j=S.filter(function(N){return Wl(N.type).indexOf("Bar")>=0});if(j&&j.length){var R=j[0].type.defaultProps,I=R!==void 0?na(na({},R),j[0].props):j[0].props,L=I.barSize,C=I[w];s[C]||(s[C]=[]);var P=lr(L)?r:L;s[C].push({item:j[0],stackList:j.slice(1),barSize:lr(P)?void 0:xo(P,n,0)})}}return s},Dve=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,i=e.sizeList,s=i===void 0?[]:i,c=e.maxBarSize,d=s.length;if(d<1)return null;var h=xo(r,a,0,!0),p,m=[];if(s[0].barSize===+s[0].barSize){var y=!1,v=a/d,T=s.reduce(function(L,C){return L+C.barSize||0},0);T+=(d-1)*h,T>=a&&(T-=(d-1)*h,h=0),T>=a&&v>0&&(y=!0,v*=.9,T=d*v);var S=(a-T)/2>>0,w={offset:S-h,size:0};p=s.reduce(function(L,C){var P={item:C.item,position:{offset:w.offset+w.size+h,size:y?v:C.barSize}},N=[].concat(VB(L),[P]);return w=N[N.length-1].position,C.stackList&&C.stackList.length&&C.stackList.forEach(function(A){N.push({item:A,position:w})}),N},m)}else{var j=xo(n,a,0,!0);a-2*j-(d-1)*h<=0&&(h=0);var R=(a-2*j-(d-1)*h)/d;R>1&&(R>>=0);var I=c===+c?Math.min(R,c):R;p=s.reduce(function(L,C,P){var N=[].concat(VB(L),[{item:C.item,position:{offset:j+(R+h)*P+(R-I)/2,size:I}}]);return C.stackList&&C.stackList.length&&C.stackList.forEach(function(A){N.push({item:A,position:N[N.length-1].position})}),N},m)}return p},Lve=function(e,r,n,a){var i=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),h=SK({children:i,legendWidth:d});if(h){var p=a||{},m=p.width,y=p.height,v=h.align,T=h.verticalAlign,S=h.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&v!=="center"&&vt(e[v]))return na(na({},e),{},jh({},v,e[v]+(m||0)));if((S==="horizontal"||S==="vertical"&&v==="center")&&T!=="middle"&&vt(e[T]))return na(na({},e),{},jh({},T,e[T]+(y||0)))}return e},Bve=function(e,r,n){return lr(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},_K=function(e,r,n,a,i){var s=r.props.children,c=ks(s,b1).filter(function(h){return Bve(a,i,h.props.direction)});if(c&&c.length){var d=c.map(function(h){return h.props.dataKey});return e.reduce(function(h,p){var m=pi(p,n);if(lr(m))return h;var y=Array.isArray(m)?[iw(m),aw(m)]:[m,m],v=d.reduce(function(T,S){var w=pi(p,S,0),j=y[0]-Math.abs(Array.isArray(w)?w[0]:w),R=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(j,T[0]),Math.max(R,T[1])]},[1/0,-1/0]);return[Math.min(v[0],h[0]),Math.max(v[1],h[1])]},[1/0,-1/0])}return null},$ve=function(e,r,n,a,i){var s=r.map(function(c){return _K(e,c,n,i,a)}).filter(function(c){return!lr(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},TK=function(e,r,n,a,i){var s=r.map(function(d){var h=d.props.dataKey;return n==="number"&&h&&_K(e,d,h,a)||Sm(e,h,n,i)});if(n==="number")return s.reduce(function(d,h){return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,h){for(var p=0,m=h.length;p<m;p++)c[h[p]]||(c[h[p]]=!0,d.push(h[p]));return d},[])},AK=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},NK=function(e,r,n,a){if(a)return e.map(function(d){return d.coordinate});var i,s,c=e.map(function(d){return d.coordinate===r&&(i=!0),d.coordinate===n&&(s=!0),d.coordinate});return i||c.push(r),s||c.push(n),c},Fl=function(e,r,n){if(!e)return null;var a=e.scale,i=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,h=(r||n)&&s==="category"&&a.bandwidth?a.bandwidth()/d:0;if(h=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?vo(c[0]-c[1])*2*h:h,r&&(e.ticks||e.niceTicks)){var p=(e.ticks||e.niceTicks).map(function(m){var y=i?i.indexOf(m):m;return{coordinate:a(y)+h,value:m,offset:h}});return p.filter(function(m){return!h1(m.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(m,y){return{coordinate:a(m)+h,value:m,index:y,offset:h}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(m){return{coordinate:a(m)+h,value:m,offset:h}}):a.domain().map(function(m,y){return{coordinate:a(m)+h,value:i?i[m]:m,index:y,offset:h}})},q_=new WeakMap,Tv=function(e,r){if(typeof r!="function")return e;q_.has(e)||q_.set(e,new WeakMap);var n=q_.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},EK=function(e,r,n){var a=e.scale,i=e.type,s=e.layout,c=e.axisType;if(a==="auto")return s==="radial"&&c==="radiusAxis"?{scale:lg(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:ob(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:wm(),realScaleType:"point"}:i==="category"?{scale:lg(),realScaleType:"band"}:{scale:ob(),realScaleType:"linear"};if(e0(a)){var d="scale".concat(F2(a));return{scale:(jB[d]||wm)(),realScaleType:jB[d]?d:"point"}}return rr(a)?{scale:a}:{scale:wm(),realScaleType:"point"}},qB=1e-4,jK=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),i=Math.min(a[0],a[1])-qB,s=Math.max(a[0],a[1])+qB,c=e(r[0]),d=e(r[n-1]);(c<i||c>s||d<i||d>s)&&e.domain([r[0],r[n-1]])}},Uve=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},zve=function(e,r){if(!r||r.length!==2||!vt(r[0])||!vt(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[e[0],e[1]];return(!vt(e[0])||e[0]<n)&&(i[0]=n),(!vt(e[1])||e[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Vve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0,c=0;c<r;++c){var d=h1(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=i,e[c][n][1]=i+d,i=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},Fve=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var i=0,s=0;s<r;++s){var c=h1(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=i,e[s][n][1]=i+c,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},qve={sign:Vve,expand:Ohe,none:Xh,silhouette:Ihe,wiggle:Rhe,positive:Fve},Hve=function(e,r,n){var a=r.map(function(c){return c.props.dataKey}),i=qve[n],s=Che().keys(a).value(function(c,d){return+pi(c,d,0)}).order(WA).offset(i);return s(e)},Gve=function(e,r,n,a,i,s){if(!e)return null;var c=s?r.reverse():r,d={},h=c.reduce(function(m,y){var v,T=(v=y.type)!==null&&v!==void 0&&v.defaultProps?na(na({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return m;var j=T[n],R=m[j]||{hasStack:!1,stackGroups:{}};if(La(S)){var I=R.stackGroups[S]||{numericAxisId:n,cateAxisId:a,items:[]};I.items.push(y),R.hasStack=!0,R.stackGroups[S]=I}else R.stackGroups[f1("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[y]};return na(na({},m),{},jh({},j,R))},d),p={};return Object.keys(h).reduce(function(m,y){var v=h[y];if(v.hasStack){var T={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(S,w){var j=v.stackGroups[w];return na(na({},S),{},jh({},w,{numericAxisId:n,cateAxisId:a,items:j.items,stackedData:Hve(e,j.items,i)}))},T)}return na(na({},m),{},jh({},y,v))},p)},kK=function(e,r){var n=r.realScaleType,a=r.type,i=r.tickCount,s=r.originalDomain,c=r.allowDecimals,d=n||r.scale;if(d!=="auto"&&d!=="linear")return null;if(i&&a==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var h=e.domain();if(!h.length)return null;var p=sve(h,i,c);return e.domain([iw(p),aw(p)]),{niceTicks:p}}if(i&&a==="number"){var m=e.domain(),y=ove(m,i,c);return{niceTicks:y}}return null};function HB(t){var e=t.axis,r=t.ticks,n=t.bandSize,a=t.entry,i=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!lr(a[e.dataKey])){var c=Vx(r,"value",a[e.dataKey]);if(c)return c.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=pi(a,lr(s)?e.dataKey:s);return lr(d)?null:e.scale(d)}var GB=function(e){var r=e.axis,n=e.ticks,a=e.offset,i=e.bandSize,s=e.entry,c=e.index;if(r.type==="category")return n[c]?n[c].coordinate+a:null;var d=pi(s,r.dataKey,r.domain[c]);return lr(d)?null:r.scale(d)-i/2+a},Wve=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Kve=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,i=a.stackId;if(La(i)){var s=r[i];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},Qve=function(e){return e.reduce(function(r,n){return[iw(n.concat([r[0]]).filter(vt)),aw(n.concat([r[1]]).filter(vt))]},[1/0,-1/0])},CK=function(e,r,n){return Object.keys(e).reduce(function(a,i){var s=e[i],c=s.stackedData,d=c.reduce(function(h,p){var m=Qve(p.slice(r,n+1));return[Math.min(h[0],m[0]),Math.max(h[1],m[1])]},[1/0,-1/0]);return[Math.min(d[0],a[0]),Math.max(d[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},WB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vN=function(e,r,n){if(rr(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(vt(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(WB.test(e[0])){var i=+WB.exec(e[0])[1];a[0]=r[0]-i}else rr(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(vt(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(KB.test(e[1])){var s=+KB.exec(e[1])[1];a[1]=r[1]+s}else rr(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},pb=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var i=NE(r,function(m){return m.coordinate}),s=1/0,c=1,d=i.length;c<d;c++){var h=i[c],p=i[c-1];s=Math.min((h.coordinate||0)-(p.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},QB=function(e,r,n){return!e||!e.length||x1(e,Zs(n,"type.defaultProps.domain"))?r:e},OK=function(e,r){var n=e.type.defaultProps?na(na({},e.type.defaultProps),e.props):e.props,a=n.dataKey,i=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,h=n.chartType,p=n.hide;return na(na({},zt(e,!1)),{},{dataKey:a,unit:s,formatter:c,name:i||a,color:JE(e),value:pi(r,a),type:d,payload:r,chartType:h,hide:p})};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function XB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?XB(Object(r),!0).forEach(function(n){IK(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):XB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IK(t,e,r){return e=Xve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xve(t){var e=Yve(t,"string");return yg(e)=="symbol"?e:e+""}function Yve(t,e){if(yg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zve(t,e){return rxe(t)||txe(t,e)||exe(t,e)||Jve()}function Jve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function exe(t,e){if(t){if(typeof t=="string")return YB(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YB(t,e)}}function YB(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function txe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function rxe(t){if(Array.isArray(t))return t}var mb=Math.PI/180,nxe=function(e){return e*180/Math.PI},wn=function(e,r,n,a){return{x:e+Math.cos(-mb*a)*n,y:r+Math.sin(-mb*a)*n}},axe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},ixe=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.startAngle,h=e.endAngle,p=xo(e.cx,s,s/2),m=xo(e.cy,c,c/2),y=axe(s,c,n),v=xo(e.innerRadius,y,0),T=xo(e.outerRadius,y,y*.8),S=Object.keys(r);return S.reduce(function(w,j){var R=r[j],I=R.domain,L=R.reversed,C;if(lr(R.range))a==="angleAxis"?C=[d,h]:a==="radiusAxis"&&(C=[v,T]),L&&(C=[C[1],C[0]]);else{C=R.range;var P=C,N=Zve(P,2);d=N[0],h=N[1]}var A=EK(R,i),E=A.realScaleType,V=A.scale;V.domain(I).range(C),jK(V);var D=kK(V,Il(Il({},R),{},{realScaleType:E})),U=Il(Il(Il({},R),D),{},{range:C,radius:T,realScaleType:E,scale:V,cx:p,cy:m,innerRadius:v,outerRadius:T,startAngle:d,endAngle:h});return Il(Il({},w),{},IK({},j,U))},{})},sxe=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-s,2))},oxe=function(e,r){var n=e.x,a=e.y,i=r.cx,s=r.cy,c=sxe({x:n,y:a},{x:i,y:s});if(c<=0)return{radius:c};var d=(n-i)/c,h=Math.acos(d);return a>s&&(h=2*Math.PI-h),{radius:c,angle:nxe(h),angleInRadian:h}},lxe=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),s=Math.min(a,i);return{startAngle:r-s*360,endAngle:n-s*360}},cxe=function(e,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),s=Math.floor(a/360),c=Math.min(i,s);return e+c*360},ZB=function(e,r){var n=e.x,a=e.y,i=oxe({x:n,y:a},r),s=i.radius,c=i.angle,d=r.innerRadius,h=r.outerRadius;if(s<d||s>h)return!1;if(s===0)return!0;var p=lxe(r),m=p.startAngle,y=p.endAngle,v=c,T;if(m<=y){for(;v>y;)v-=360;for(;v<m;)v+=360;T=v>=m&&v<=y}else{for(;v>m;)v-=360;for(;v<y;)v+=360;T=v>=y&&v<=m}return T?Il(Il({},r),{},{radius:s,angle:cxe(v,r)}):null},RK=function(e){return!k.isValidElement(e)&&!rr(e)&&typeof e!="boolean"?e.className:""};function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}var uxe=["offset"];function dxe(t){return mxe(t)||pxe(t)||fxe(t)||hxe()}function hxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fxe(t,e){if(t){if(typeof t=="string")return xN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xN(t,e)}}function pxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mxe(t){if(Array.isArray(t))return xN(t)}function xN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gxe(t,e){if(t==null)return{};var r=yxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function JB(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ra(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(r),!0).forEach(function(n){vxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vxe(t,e,r){return e=xxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xxe(t){var e=bxe(t,"string");return vg(e)=="symbol"?e:e+""}function bxe(t,e){if(vg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},xg.apply(this,arguments)}var wxe=function(e){var r=e.value,n=e.formatter,a=lr(e.children)?r:e.children;return rr(n)?n(a):a},Sxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),360);return n*a},_xe=function(e,r,n){var a=e.position,i=e.viewBox,s=e.offset,c=e.className,d=i,h=d.cx,p=d.cy,m=d.innerRadius,y=d.outerRadius,v=d.startAngle,T=d.endAngle,S=d.clockWise,w=(m+y)/2,j=Sxe(v,T),R=j>=0?1:-1,I,L;a==="insideStart"?(I=v+R*s,L=S):a==="insideEnd"?(I=T-R*s,L=!S):a==="end"&&(I=T+R*s,L=S),L=j<=0?L:!L;var C=wn(h,p,w,I),P=wn(h,p,w,I+(L?1:-1)*359),N="M".concat(C.x,",").concat(C.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(L?0:1,`,
    `).concat(P.x,",").concat(P.y),A=lr(e.id)?f1("recharts-radial-line-"):e.id;return se.createElement("text",xg({},n,{dominantBaseline:"central",className:fr("recharts-radial-bar-label",c)}),se.createElement("defs",null,se.createElement("path",{id:A,d:N})),se.createElement("textPath",{xlinkHref:"#".concat(A)},r))},Txe=function(e){var r=e.viewBox,n=e.offset,a=e.position,i=r,s=i.cx,c=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.startAngle,m=i.endAngle,y=(p+m)/2;if(a==="outside"){var v=wn(s,c,h+n,y),T=v.x,S=v.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+h)/2,j=wn(s,c,w,y),R=j.x,I=j.y;return{x:R,y:I,textAnchor:"middle",verticalAnchor:"middle"}},Axe=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,i=e.position,s=r,c=s.x,d=s.y,h=s.width,p=s.height,m=p>=0?1:-1,y=m*a,v=m>0?"end":"start",T=m>0?"start":"end",S=h>=0?1:-1,w=S*a,j=S>0?"end":"start",R=S>0?"start":"end";if(i==="top"){var I={x:c+h/2,y:d-m*a,textAnchor:"middle",verticalAnchor:v};return Ra(Ra({},I),n?{height:Math.max(d-n.y,0),width:h}:{})}if(i==="bottom"){var L={x:c+h/2,y:d+p+y,textAnchor:"middle",verticalAnchor:T};return Ra(Ra({},L),n?{height:Math.max(n.y+n.height-(d+p),0),width:h}:{})}if(i==="left"){var C={x:c-w,y:d+p/2,textAnchor:j,verticalAnchor:"middle"};return Ra(Ra({},C),n?{width:Math.max(C.x-n.x,0),height:p}:{})}if(i==="right"){var P={x:c+h+w,y:d+p/2,textAnchor:R,verticalAnchor:"middle"};return Ra(Ra({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:p}:{})}var N=n?{width:h,height:p}:{};return i==="insideLeft"?Ra({x:c+w,y:d+p/2,textAnchor:R,verticalAnchor:"middle"},N):i==="insideRight"?Ra({x:c+h-w,y:d+p/2,textAnchor:j,verticalAnchor:"middle"},N):i==="insideTop"?Ra({x:c+h/2,y:d+y,textAnchor:"middle",verticalAnchor:T},N):i==="insideBottom"?Ra({x:c+h/2,y:d+p-y,textAnchor:"middle",verticalAnchor:v},N):i==="insideTopLeft"?Ra({x:c+w,y:d+y,textAnchor:R,verticalAnchor:T},N):i==="insideTopRight"?Ra({x:c+h-w,y:d+y,textAnchor:j,verticalAnchor:T},N):i==="insideBottomLeft"?Ra({x:c+w,y:d+p-y,textAnchor:R,verticalAnchor:v},N):i==="insideBottomRight"?Ra({x:c+h-w,y:d+p-y,textAnchor:j,verticalAnchor:v},N):Pf(i)&&(vt(i.x)||Ed(i.x))&&(vt(i.y)||Ed(i.y))?Ra({x:c+xo(i.x,h),y:d+xo(i.y,p),textAnchor:"end",verticalAnchor:"end"},N):Ra({x:c+h/2,y:d+p/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Nxe=function(e){return"cx"in e&&vt(e.cx)};function di(t){var e=t.offset,r=e===void 0?5:e,n=gxe(t,uxe),a=Ra({offset:r},n),i=a.viewBox,s=a.position,c=a.value,d=a.children,h=a.content,p=a.className,m=p===void 0?"":p,y=a.textBreakAll;if(!i||lr(c)&&lr(d)&&!k.isValidElement(h)&&!rr(h))return null;if(k.isValidElement(h))return k.cloneElement(h,a);var v;if(rr(h)){if(v=k.createElement(h,a),k.isValidElement(v))return v}else v=wxe(a);var T=Nxe(i),S=zt(a,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return _xe(a,v,S);var w=T?Txe(a):Axe(a);return se.createElement(tf,xg({className:fr("recharts-label",m)},S,w,{breakAll:y}),v)}di.displayName="Label";var MK=function(e){var r=e.cx,n=e.cy,a=e.angle,i=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,h=e.innerRadius,p=e.outerRadius,m=e.x,y=e.y,v=e.top,T=e.left,S=e.width,w=e.height,j=e.clockWise,R=e.labelViewBox;if(R)return R;if(vt(S)&&vt(w)){if(vt(m)&&vt(y))return{x:m,y,width:S,height:w};if(vt(v)&&vt(T))return{x:v,y:T,width:S,height:w}}return vt(m)&&vt(y)?{x:m,y,width:0,height:0}:vt(r)&&vt(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:s||a||0,innerRadius:h||0,outerRadius:p||d||c||0,clockWise:j}:e.viewBox?e.viewBox:{}},Exe=function(e,r){return e?e===!0?se.createElement(di,{key:"label-implicit",viewBox:r}):La(e)?se.createElement(di,{key:"label-implicit",viewBox:r,value:e}):k.isValidElement(e)?e.type===di?k.cloneElement(e,{key:"label-implicit",viewBox:r}):se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):rr(e)?se.createElement(di,{key:"label-implicit",content:e,viewBox:r}):Pf(e)?se.createElement(di,xg({viewBox:r},e,{key:"label-implicit"})):null:null},jxe=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,i=MK(e),s=ks(a,di).map(function(d,h){return k.cloneElement(d,{viewBox:r||i,key:"label-".concat(h)})});if(!n)return s;var c=Exe(e.label,r||i);return[c].concat(dxe(s))};di.parseViewBox=MK;di.renderCallByParent=jxe;var H_,e$;function kxe(){if(e$)return H_;e$=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return H_=t,H_}var Cxe=kxe();const PK=Kr(Cxe);function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}var Oxe=["valueAccessor"],Ixe=["data","dataKey","clockWise","id","textBreakAll"];function Rxe(t){return Lxe(t)||Dxe(t)||Pxe(t)||Mxe()}function Mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pxe(t,e){if(t){if(typeof t=="string")return bN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(t,e)}}function Dxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Lxe(t){if(Array.isArray(t))return bN(t)}function bN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gb(){return gb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gb.apply(this,arguments)}function t$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function r$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?t$(Object(r),!0).forEach(function(n){Bxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):t$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bxe(t,e,r){return e=$xe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $xe(t){var e=Uxe(t,"string");return bg(e)=="symbol"?e:e+""}function Uxe(t,e){if(bg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n$(t,e){if(t==null)return{};var r=zxe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function zxe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Vxe=function(e){return Array.isArray(e.value)?PK(e.value):e.value};function Xl(t){var e=t.valueAccessor,r=e===void 0?Vxe:e,n=n$(t,Oxe),a=n.data,i=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,h=n$(n,Ixe);return!a||!a.length?null:se.createElement(zr,{className:"recharts-label-list"},a.map(function(p,m){var y=lr(i)?r(p,m):pi(p&&p.payload,i),v=lr(c)?{}:{id:"".concat(c,"-").concat(m)};return se.createElement(di,gb({},zt(p,!0),h,v,{parentViewBox:p.parentViewBox,value:y,textBreakAll:d,viewBox:di.parseViewBox(lr(s)?p:r$(r$({},p),{},{clockWise:s})),key:"label-".concat(m),index:m}))}))}Xl.displayName="LabelList";function Fxe(t,e){return t?t===!0?se.createElement(Xl,{key:"labelList-implicit",data:e}):se.isValidElement(t)||rr(t)?se.createElement(Xl,{key:"labelList-implicit",data:e,content:t}):Pf(t)?se.createElement(Xl,gb({data:e},t,{key:"labelList-implicit"})):null:null}function qxe(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=ks(n,Xl).map(function(s,c){return k.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!r)return a;var i=Fxe(t.label,e);return[i].concat(Rxe(a))}Xl.renderCallByParent=qxe;function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function wN(){return wN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wN.apply(this,arguments)}function a$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function i$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?a$(Object(r),!0).forEach(function(n){Hxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hxe(t,e,r){return e=Gxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gxe(t){var e=Wxe(t,"string");return wg(e)=="symbol"?e:e+""}function Wxe(t,e){if(wg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kxe=function(e,r){var n=vo(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},Av=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,h=e.cornerIsExternal,p=d*(c?1:-1)+a,m=Math.asin(d/p)/mb,y=h?i:i+s*m,v=wn(r,n,p,y),T=wn(r,n,a,y),S=h?i-s*m:i,w=wn(r,n,p*Math.cos(m*mb),S);return{center:v,circleTangency:T,lineTangency:w,theta:m}},DK=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.startAngle,c=e.endAngle,d=Kxe(s,c),h=s+d,p=wn(r,n,i,s),m=wn(r,n,i,h),y="M ".concat(p.x,",").concat(p.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>h),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(a>0){var v=wn(r,n,a,s),T=wn(r,n,a,h);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=h),`,
            `).concat(v.x,",").concat(v.y," Z")}else y+="L ".concat(r,",").concat(n," Z");return y},Qxe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,h=e.startAngle,p=e.endAngle,m=vo(p-h),y=Av({cx:r,cy:n,radius:i,angle:h,sign:m,cornerRadius:s,cornerIsExternal:d}),v=y.circleTangency,T=y.lineTangency,S=y.theta,w=Av({cx:r,cy:n,radius:i,angle:p,sign:-m,cornerRadius:s,cornerIsExternal:d}),j=w.circleTangency,R=w.lineTangency,I=w.theta,L=d?Math.abs(h-p):Math.abs(h-p)-S-I;if(L<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):DK({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:h,endAngle:p});var C="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(m<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,`
  `);if(a>0){var P=Av({cx:r,cy:n,radius:a,angle:h,sign:m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),N=P.circleTangency,A=P.lineTangency,E=P.theta,V=Av({cx:r,cy:n,radius:a,angle:p,sign:-m,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),D=V.circleTangency,U=V.lineTangency,$=V.theta,Q=d?Math.abs(h-p):Math.abs(h-p)-E-$;if(Q<0&&s===0)return"".concat(C,"L").concat(r,",").concat(n,"Z");C+="L".concat(U.x,",").concat(U.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(Q>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(m<0),",").concat(A.x,",").concat(A.y,"Z")}else C+="L".concat(r,",").concat(n,"Z");return C},Xxe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},LK=function(e){var r=i$(i$({},Xxe),e),n=r.cx,a=r.cy,i=r.innerRadius,s=r.outerRadius,c=r.cornerRadius,d=r.forceCornerRadius,h=r.cornerIsExternal,p=r.startAngle,m=r.endAngle,y=r.className;if(s<i||p===m)return null;var v=fr("recharts-sector",y),T=s-i,S=xo(c,T,0,!0),w;return S>0&&Math.abs(p-m)<360?w=Qxe({cx:n,cy:a,innerRadius:i,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:p,endAngle:m}):w=DK({cx:n,cy:a,innerRadius:i,outerRadius:s,startAngle:p,endAngle:m}),se.createElement("path",wN({},zt(r,!0),{className:v,d:w,role:"img"}))};function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function SN(){return SN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},SN.apply(this,arguments)}function s$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function o$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s$(Object(r),!0).forEach(function(n){Yxe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Yxe(t,e,r){return e=Zxe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zxe(t){var e=Jxe(t,"string");return Sg(e)=="symbol"?e:e+""}function Jxe(t,e){if(Sg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l$={curveBasisClosed:xhe,curveBasisOpen:bhe,curveBasis:vhe,curveBumpX:ahe,curveBumpY:ihe,curveLinearClosed:whe,curveLinear:H2,curveMonotoneX:She,curveMonotoneY:_he,curveNatural:The,curveStep:Ahe,curveStepAfter:Ehe,curveStepBefore:Nhe},Nv=function(e){return e.x===+e.x&&e.y===+e.y},Kp=function(e){return e.x},Qp=function(e){return e.y},ebe=function(e,r){if(rr(e))return e;var n="curve".concat(F2(e));return(n==="curveMonotone"||n==="curveBump")&&r?l$["".concat(n).concat(r==="vertical"?"Y":"X")]:l$[n]||H2},tbe=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,i=a===void 0?[]:a,s=e.baseLine,c=e.layout,d=e.connectNulls,h=d===void 0?!1:d,p=ebe(n,c),m=h?i.filter(function(S){return Nv(S)}):i,y;if(Array.isArray(s)){var v=h?s.filter(function(S){return Nv(S)}):s,T=m.map(function(S,w){return o$(o$({},S),{},{base:v[w]})});return c==="vertical"?y=yv().y(Qp).x1(Kp).x0(function(S){return S.base.x}):y=yv().x(Kp).y1(Qp).y0(function(S){return S.base.y}),y.defined(Nv).curve(p),y(T)}return c==="vertical"&&vt(s)?y=yv().y(Qp).x1(Kp).x0(s):vt(s)?y=yv().x(Kp).y1(Qp).y0(s):y=PG().x(Kp).y(Qp),y.defined(Nv).curve(p),y(m)},_N=function(e){var r=e.className,n=e.points,a=e.path,i=e.pathRef;if((!n||!n.length)&&!a)return null;var s=n&&n.length?tbe(e):a;return k.createElement("path",SN({},zt(e,!1),Fx(e),{className:fr("recharts-curve",r),d:s,ref:i}))},G_={exports:{}},W_,c$;function rbe(){if(c$)return W_;c$=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return W_=t,W_}var K_,u$;function nbe(){if(u$)return K_;u$=1;var t=rbe();function e(){}function r(){}return r.resetWarningCache=e,K_=function(){function n(s,c,d,h,p,m){if(m!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function a(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:a,element:n,elementType:n,instanceOf:a,node:n,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:r,resetWarningCache:e};return i.PropTypes=i,i},K_}var d$;function abe(){return d$||(d$=1,G_.exports=nbe()()),G_.exports}var ibe=abe();const tn=Kr(ibe),{getOwnPropertyNames:sbe,getOwnPropertySymbols:obe}=Object,{hasOwnProperty:lbe}=Object.prototype;function Q_(t,e){return function(n,a,i){return t(n,a,i)&&e(n,a,i)}}function Ev(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);const{cache:i}=a,s=i.get(r),c=i.get(n);if(s&&c)return s===n&&c===r;i.set(r,n),i.set(n,r);const d=t(r,n,a);return i.delete(r),i.delete(n),d}}function cbe(t){return t!=null?t[Symbol.toStringTag]:void 0}function h$(t){return sbe(t).concat(obe(t))}const ube=Object.hasOwn||((t,e)=>lbe.call(t,e));function y0(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const dbe="__v",hbe="__o",fbe="_owner",{getOwnPropertyDescriptor:f$,keys:p$}=Object;function pbe(t,e){return t.byteLength===e.byteLength&&yb(new Uint8Array(t),new Uint8Array(e))}function mbe(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function gbe(t,e){return t.byteLength===e.byteLength&&yb(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function ybe(t,e){return y0(t.getTime(),e.getTime())}function vbe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xbe(t,e){return t===e}function m$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.entries();let s,c,d=0;for(;(s=i.next())&&!s.done;){const h=e.entries();let p=!1,m=0;for(;(c=h.next())&&!c.done;){if(a[m]){m++;continue}const y=s.value,v=c.value;if(r.equals(y[0],v[0],d,m,t,e,r)&&r.equals(y[1],v[1],y[0],v[0],t,e,r)){p=a[m]=!0;break}m++}if(!p)return!1;d++}return!0}const bbe=y0;function wbe(t,e,r){const n=p$(t);let a=n.length;if(p$(e).length!==a)return!1;for(;a-- >0;)if(!BK(t,e,r,n[a]))return!1;return!0}function Xp(t,e,r){const n=h$(t);let a=n.length;if(h$(e).length!==a)return!1;let i,s,c;for(;a-- >0;)if(i=n[a],!BK(t,e,r,i)||(s=f$(t,i),c=f$(e,i),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Sbe(t,e){return y0(t.valueOf(),e.valueOf())}function _be(t,e){return t.source===e.source&&t.flags===e.flags}function g$(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const a=new Array(n),i=t.values();let s,c;for(;(s=i.next())&&!s.done;){const d=e.values();let h=!1,p=0;for(;(c=d.next())&&!c.done;){if(!a[p]&&r.equals(s.value,c.value,s.value,c.value,t,e,r)){h=a[p]=!0;break}p++}if(!h)return!1}return!0}function yb(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Tbe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function BK(t,e,r,n){return(n===fbe||n===hbe||n===dbe)&&(t.$$typeof||e.$$typeof)?!0:ube(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const Abe="[object ArrayBuffer]",Nbe="[object Arguments]",Ebe="[object Boolean]",jbe="[object DataView]",kbe="[object Date]",Cbe="[object Error]",Obe="[object Map]",Ibe="[object Number]",Rbe="[object Object]",Mbe="[object RegExp]",Pbe="[object Set]",Dbe="[object String]",Lbe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Bbe="[object URL]",$be=Object.prototype.toString;function Ube({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:m,areTypedArraysEqual:y,areUrlsEqual:v,unknownTagComparators:T}){return function(w,j,R){if(w===j)return!0;if(w==null||j==null)return!1;const I=typeof w;if(I!==typeof j)return!1;if(I!=="object")return I==="number"?c(w,j,R):I==="function"?i(w,j,R):!1;const L=w.constructor;if(L!==j.constructor)return!1;if(L===Object)return d(w,j,R);if(Array.isArray(w))return e(w,j,R);if(L===Date)return n(w,j,R);if(L===RegExp)return p(w,j,R);if(L===Map)return s(w,j,R);if(L===Set)return m(w,j,R);const C=$be.call(w);if(C===kbe)return n(w,j,R);if(C===Mbe)return p(w,j,R);if(C===Obe)return s(w,j,R);if(C===Pbe)return m(w,j,R);if(C===Rbe)return typeof w.then!="function"&&typeof j.then!="function"&&d(w,j,R);if(C===Bbe)return v(w,j,R);if(C===Cbe)return a(w,j,R);if(C===Nbe)return d(w,j,R);if(Lbe[C])return y(w,j,R);if(C===Abe)return t(w,j,R);if(C===jbe)return r(w,j,R);if(C===Ebe||C===Ibe||C===Dbe)return h(w,j,R);if(T){let P=T[C];if(!P){const N=cbe(w);N&&(P=T[N])}if(P)return P(w,j,R)}return!1}}function zbe({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:pbe,areArraysEqual:r?Xp:mbe,areDataViewsEqual:gbe,areDatesEqual:ybe,areErrorsEqual:vbe,areFunctionsEqual:xbe,areMapsEqual:r?Q_(m$,Xp):m$,areNumbersEqual:bbe,areObjectsEqual:r?Xp:wbe,arePrimitiveWrappersEqual:Sbe,areRegExpsEqual:_be,areSetsEqual:r?Q_(g$,Xp):g$,areTypedArraysEqual:r?Q_(yb,Xp):yb,areUrlsEqual:Tbe,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const a=Ev(n.areArraysEqual),i=Ev(n.areMapsEqual),s=Ev(n.areObjectsEqual),c=Ev(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:c})}return n}function Vbe(t){return function(e,r,n,a,i,s,c){return t(e,r,c)}}function Fbe({circular:t,comparator:e,createState:r,equals:n,strict:a}){if(r)return function(c,d){const{cache:h=t?new WeakMap:void 0,meta:p}=r();return e(c,d,{cache:h,equals:n,meta:p,strict:a})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(c,d){return e(c,d,i)}}const qbe=$u();$u({strict:!0});$u({circular:!0});$u({circular:!0,strict:!0});$u({createInternalComparator:()=>y0});$u({strict:!0,createInternalComparator:()=>y0});$u({circular:!0,createInternalComparator:()=>y0});$u({circular:!0,createInternalComparator:()=>y0,strict:!0});function $u(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:a=!1}=t,i=zbe(t),s=Ube(i),c=r?r(s):Vbe(s);return Fbe({circular:e,comparator:s,createState:n,equals:c,strict:a})}function Hbe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function y$(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>e?(t(i),r=-1):Hbe(a)};requestAnimationFrame(n)}function TN(t){"@babel/helpers - typeof";return TN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TN(t)}function Gbe(t){return Xbe(t)||Qbe(t)||Kbe(t)||Wbe()}function Wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kbe(t,e){if(t){if(typeof t=="string")return v$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v$(t,e)}}function v$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xbe(t){if(Array.isArray(t))return t}function Ybe(){var t={},e=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=i,c=Gbe(s),d=c[0],h=c.slice(1);if(typeof d=="number"){y$(a.bind(null,h),d);return}a(d),y$(a.bind(null,h));return}TN(i)==="object"&&(t=i,e(t)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return e=i,function(){e=function(){return null}}}}}function _g(t){"@babel/helpers - typeof";return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(t)}function x$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function b$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?x$(Object(r),!0).forEach(function(n){$K(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):x$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $K(t,e,r){return e=Zbe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zbe(t){var e=Jbe(t,"string");return _g(e)==="symbol"?e:String(e)}function Jbe(t,e){if(_g(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_g(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e2e=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},t2e=function(e){return e},r2e=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},_m=function(e,r){return Object.keys(r).reduce(function(n,a){return b$(b$({},n),{},$K({},a,e(a,r[a])))},{})},w$=function(e,r,n){return e.map(function(a){return"".concat(r2e(a)," ").concat(r,"ms ").concat(n)}).join(",")};function n2e(t,e){return s2e(t)||i2e(t,e)||UK(t,e)||a2e()}function a2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function s2e(t){if(Array.isArray(t))return t}function o2e(t){return u2e(t)||c2e(t)||UK(t)||l2e()}function l2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UK(t,e){if(t){if(typeof t=="string")return AN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return AN(t,e)}}function c2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function u2e(t){if(Array.isArray(t))return AN(t)}function AN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vb=1e-4,zK=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},VK=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},S$=function(e,r){return function(n){var a=zK(e,r);return VK(a,n)}},d2e=function(e,r){return function(n){var a=zK(e,r),i=[].concat(o2e(a.map(function(s,c){return s*c}).slice(1)),[0]);return VK(i,n)}},_$=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],i=r[1],s=r[2],c=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,s=1,c=1;break;case"ease":a=.25,i=.1,s=.25,c=1;break;case"ease-in":a=.42,i=0,s=1,c=1;break;case"ease-out":a=.42,i=0,s=.58,c=1;break;case"ease-in-out":a=0,i=0,s=.58,c=1;break;default:{var d=r[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var h=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),p=n2e(h,4);a=p[0],i=p[1],s=p[2],c=p[3]}}}var m=S$(a,s),y=S$(i,c),v=d2e(a,s),T=function(j){return j>1?1:j<0?0:j},S=function(j){for(var R=j>1?1:j,I=R,L=0;L<8;++L){var C=m(I)-R,P=v(I);if(Math.abs(C-R)<vb||P<vb)return y(I);I=T(I-C/P)}return y(I)};return S.isStepper=!1,S},h2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,i=a===void 0?8:a,s=e.dt,c=s===void 0?17:s,d=function(p,m,y){var v=-(p-m)*n,T=y*i,S=y+(v-T)*c/1e3,w=y*c/1e3+p;return Math.abs(w-m)<vb&&Math.abs(S)<vb?[m,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},f2e=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return _$(a);case"spring":return h2e();default:if(a.split("(")[0]==="cubic-bezier")return _$(a)}return typeof a=="function"?a:null};function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}function T$(t){return g2e(t)||m2e(t)||FK(t)||p2e()}function p2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g2e(t){if(Array.isArray(t))return EN(t)}function A$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ci(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A$(Object(r),!0).forEach(function(n){NN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function NN(t,e,r){return e=y2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y2e(t){var e=v2e(t,"string");return Tg(e)==="symbol"?e:String(e)}function v2e(t,e){if(Tg(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Tg(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x2e(t,e){return S2e(t)||w2e(t,e)||FK(t,e)||b2e()}function b2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FK(t,e){if(t){if(typeof t=="string")return EN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EN(t,e)}}function EN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function w2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function S2e(t){if(Array.isArray(t))return t}var xb=function(e,r,n){return e+(r-e)*n},jN=function(e){var r=e.from,n=e.to;return r!==n},_2e=function t(e,r,n){var a=_m(function(i,s){if(jN(s)){var c=e(s.from,s.to,s.velocity),d=x2e(c,2),h=d[0],p=d[1];return ci(ci({},s),{},{from:h,velocity:p})}return s},r);return n<1?_m(function(i,s){return jN(s)?ci(ci({},s),{},{velocity:xb(s.velocity,a[i].velocity,n),from:xb(s.from,a[i].from,n)}):s},r):t(e,a,n-1)};const T2e=(function(t,e,r,n,a){var i=e2e(t,e),s=i.reduce(function(w,j){return ci(ci({},w),{},NN({},j,[t[j],e[j]]))},{}),c=i.reduce(function(w,j){return ci(ci({},w),{},NN({},j,{from:t[j],velocity:0,to:e[j]}))},{}),d=-1,h,p,m=function(){return null},y=function(){return _m(function(j,R){return R.from},c)},v=function(){return!Object.values(c).filter(jN).length},T=function(j){h||(h=j);var R=j-h,I=R/r.dt;c=_2e(r,c,I),a(ci(ci(ci({},t),e),y())),h=j,v()||(d=requestAnimationFrame(m))},S=function(j){p||(p=j);var R=(j-p)/n,I=_m(function(C,P){return xb.apply(void 0,T$(P).concat([r(R)]))},s);if(a(ci(ci(ci({},t),e),I)),R<1)d=requestAnimationFrame(m);else{var L=_m(function(C,P){return xb.apply(void 0,T$(P).concat([r(1)]))},s);a(ci(ci(ci({},t),e),L))}};return m=r.isStepper?T:S,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(d)}}});function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}var A2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function N2e(t,e){if(t==null)return{};var r=E2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function E2e(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,i;for(i=0;i<n.length;i++)a=n[i],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function X_(t){return O2e(t)||C2e(t)||k2e(t)||j2e()}function j2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k2e(t,e){if(t){if(typeof t=="string")return kN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kN(t,e)}}function C2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function O2e(t){if(Array.isArray(t))return kN(t)}function kN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?N$(Object(r),!0).forEach(function(n){lm(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lm(t,e,r){return e=qK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R2e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qK(n.key),n)}}function M2e(t,e,r){return e&&R2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function qK(t){var e=P2e(t,"string");return of(e)==="symbol"?e:String(e)}function P2e(t,e){if(of(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(of(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CN(t,e)}function CN(t,e){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},CN(t,e)}function L2e(t){var e=B2e();return function(){var n=bb(t),a;if(e){var i=bb(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return ON(this,a)}}function ON(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IN(t)}function IN(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bb(t){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bb(t)}var Jo=(function(t){D2e(r,t);var e=L2e(r);function r(n,a){var i;I2e(this,r),i=e.call(this,n,a);var s=i.props,c=s.isActive,d=s.attributeName,h=s.from,p=s.to,m=s.steps,y=s.children,v=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(IN(i)),i.changeStyle=i.changeStyle.bind(IN(i)),!c||v<=0)return i.state={style:{}},typeof y=="function"&&(i.state={style:p}),ON(i);if(m&&m.length)i.state={style:m[0].style};else if(h){if(typeof y=="function")return i.state={style:h},ON(i);i.state={style:d?lm({},d,h):h}}else i.state={style:{}};return i}return M2e(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,s=a.canBegin;this.mounted=!0,!(!i||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,s=i.isActive,c=i.canBegin,d=i.attributeName,h=i.shouldReAnimate,p=i.to,m=i.from,y=this.state.style;if(c){if(!s){var v={style:d?lm({},d,p):p};this.state&&y&&(d&&y[d]!==p||!d&&y!==p)&&this.setState(v);return}if(!(qbe(a.to,p)&&a.canBegin&&a.isActive)){var T=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||h?m:a.to;if(this.state&&y){var w={style:d?lm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(fo(fo({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,s=a.from,c=a.to,d=a.duration,h=a.easing,p=a.begin,m=a.onAnimationEnd,y=a.onAnimationStart,v=T2e(s,c,f2e(h),d,this.changeStyle),T=function(){i.stopJSAnimation=v()};this.manager.start([y,p,T,d,m])}},{key:"runStepAnimation",value:function(a){var i=this,s=a.steps,c=a.begin,d=a.onAnimationStart,h=s[0],p=h.style,m=h.duration,y=m===void 0?0:m,v=function(S,w,j){if(j===0)return S;var R=w.duration,I=w.easing,L=I===void 0?"ease":I,C=w.style,P=w.properties,N=w.onAnimationEnd,A=j>0?s[j-1]:w,E=P||Object.keys(C);if(typeof L=="function"||L==="spring")return[].concat(X_(S),[i.runJSAnimation.bind(i,{from:A.style,to:C,duration:R,easing:L}),R]);var V=w$(E,R,L),D=fo(fo(fo({},A.style),C),{},{transition:V});return[].concat(X_(S),[D,R,N]).filter(t2e)};return this.manager.start([d].concat(X_(s.reduce(v,[p,Math.max(y,c)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Ybe());var i=a.begin,s=a.duration,c=a.attributeName,d=a.to,h=a.easing,p=a.onAnimationStart,m=a.onAnimationEnd,y=a.steps,v=a.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof h=="function"||typeof v=="function"||h==="spring"){this.runJSAnimation(a);return}if(y.length>1){this.runStepAnimation(a);return}var S=c?lm({},c,d):d,w=w$(Object.keys(S),s,h);T.start([p,i,fo(fo({},S),{},{transition:w}),s,m])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var s=a.duration;a.attributeName,a.easing;var c=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var d=N2e(a,A2e),h=k.Children.count(i),p=this.state.style;if(typeof i=="function")return i(p);if(!c||h===0||s<=0)return i;var m=function(v){var T=v.props,S=T.style,w=S===void 0?{}:S,j=T.className,R=k.cloneElement(v,fo(fo({},d),{},{style:fo(fo({},w),p),className:j}));return R};return h===1?m(k.Children.only(i)):se.createElement("div",null,k.Children.map(i,function(y){return m(y)}))}}]),r})(k.PureComponent);Jo.displayName="Animate";Jo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Jo.propTypes={from:tn.oneOfType([tn.object,tn.string]),to:tn.oneOfType([tn.object,tn.string]),attributeName:tn.string,duration:tn.number,begin:tn.number,easing:tn.oneOfType([tn.string,tn.func]),steps:tn.arrayOf(tn.shape({duration:tn.number.isRequired,style:tn.object.isRequired,easing:tn.oneOfType([tn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),tn.func]),properties:tn.arrayOf("string"),onAnimationEnd:tn.func})),children:tn.oneOfType([tn.node,tn.func]),isActive:tn.bool,canBegin:tn.bool,onAnimationEnd:tn.func,shouldReAnimate:tn.bool,onAnimationStart:tn.func,onAnimationReStart:tn.func};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function wb(){return wb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},wb.apply(this,arguments)}function $2e(t,e){return F2e(t)||V2e(t,e)||z2e(t,e)||U2e()}function U2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z2e(t,e){if(t){if(typeof t=="string")return E$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E$(t,e)}}function E$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function V2e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function F2e(t){if(Array.isArray(t))return t}function j$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function k$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?j$(Object(r),!0).forEach(function(n){q2e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):j$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q2e(t,e,r){return e=H2e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H2e(t){var e=G2e(t,"string");return Ag(e)=="symbol"?e:e+""}function G2e(t,e){if(Ag(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C$=function(e,r,n,a,i){var s=Math.min(Math.abs(n)/2,Math.abs(a)/2),c=a>=0?1:-1,d=n>=0?1:-1,h=a>=0&&n>=0||a<0&&n<0?1:0,p;if(s>0&&i instanceof Array){for(var m=[0,0,0,0],y=0,v=4;y<v;y++)m[y]=i[y]>s?s:i[y];p="M".concat(e,",").concat(r+c*m[0]),m[0]>0&&(p+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(h,",").concat(e+d*m[0],",").concat(r)),p+="L ".concat(e+n-d*m[1],",").concat(r),m[1]>0&&(p+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(h,`,
        `).concat(e+n,",").concat(r+c*m[1])),p+="L ".concat(e+n,",").concat(r+a-c*m[2]),m[2]>0&&(p+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(h,`,
        `).concat(e+n-d*m[2],",").concat(r+a)),p+="L ".concat(e+d*m[3],",").concat(r+a),m[3]>0&&(p+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(h,`,
        `).concat(e,",").concat(r+a-c*m[3])),p+="Z"}else if(s>0&&i===+i&&i>0){var T=Math.min(s,i);p="M ".concat(e,",").concat(r+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+d*T,",").concat(r,`
            L `).concat(e+n-d*T,",").concat(r,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n,",").concat(r+c*T,`
            L `).concat(e+n,",").concat(r+a-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e+n-d*T,",").concat(r+a,`
            L `).concat(e+d*T,",").concat(r+a,`
            A `).concat(T,",").concat(T,",0,0,").concat(h,",").concat(e,",").concat(r+a-c*T," Z")}else p="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return p},W2e=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,i=r.x,s=r.y,c=r.width,d=r.height;if(Math.abs(c)>0&&Math.abs(d)>0){var h=Math.min(i,i+c),p=Math.max(i,i+c),m=Math.min(s,s+d),y=Math.max(s,s+d);return n>=h&&n<=p&&a>=m&&a<=y}return!1},K2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ej=function(e){var r=k$(k$({},K2e),e),n=k.useRef(),a=k.useState(-1),i=$2e(a,2),s=i[0],c=i[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var L=n.current.getTotalLength();L&&c(L)}catch{}},[]);var d=r.x,h=r.y,p=r.width,m=r.height,y=r.radius,v=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,j=r.isAnimationActive,R=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||p===0||m===0)return null;var I=fr("recharts-rectangle",v);return R?se.createElement(Jo,{canBegin:s>0,from:{width:p,height:m,x:d,y:h},to:{width:p,height:m,x:d,y:h},duration:S,animationEasing:T,isActive:R},function(L){var C=L.width,P=L.height,N=L.x,A=L.y;return se.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:j,easing:T},se.createElement("path",wb({},zt(r,!0),{className:I,d:C$(N,A,C,P,y),ref:n})))}):se.createElement("path",wb({},zt(r,!0),{className:I,d:C$(d,h,p,m,y)}))},Q2e=["points","className","baseLinePoints","connectNulls"];function mh(){return mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mh.apply(this,arguments)}function X2e(t,e){if(t==null)return{};var r=Y2e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Y2e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function O$(t){return twe(t)||ewe(t)||J2e(t)||Z2e()}function Z2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(t,e){if(t){if(typeof t=="string")return RN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RN(t,e)}}function ewe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function twe(t){if(Array.isArray(t))return RN(t)}function RN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var I$=function(e){return e&&e.x===+e.x&&e.y===+e.y},rwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){I$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),I$(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Tm=function(e,r){var n=rwe(e);r&&(n=[n.reduce(function(i,s){return[].concat(O$(i),O$(s))},[])]);var a=n.map(function(i){return i.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},nwe=function(e,r,n){var a=Tm(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Tm(r.reverse(),n).slice(1))},HK=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,i=e.connectNulls,s=X2e(e,Q2e);if(!r||!r.length)return null;var c=fr("recharts-polygon",n);if(a&&a.length){var d=s.stroke&&s.stroke!=="none",h=nwe(r,a,i);return se.createElement("g",{className:c},se.createElement("path",mh({},zt(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:h})),d?se.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(r,i)})):null,d?se.createElement("path",mh({},zt(s,!0),{fill:"none",d:Tm(a,i)})):null)}var p=Tm(r,i);return se.createElement("path",mh({},zt(s,!0),{fill:p.slice(-1)==="Z"?s.fill:"none",className:c,d:p}))};function MN(){return MN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},MN.apply(this,arguments)}var lw=function(e){var r=e.cx,n=e.cy,a=e.r,i=e.className,s=fr("recharts-dot",i);return r===+r&&n===+n&&a===+a?k.createElement("circle",MN({},zt(e,!1),Fx(e),{className:s,cx:r,cy:n,r:a})):null};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}var awe=["x","y","top","left","width","height","className"];function PN(){return PN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PN.apply(this,arguments)}function R$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function iwe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R$(Object(r),!0).forEach(function(n){swe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function swe(t,e,r){return e=owe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function owe(t){var e=lwe(t,"string");return Ng(e)=="symbol"?e:e+""}function lwe(t,e){if(Ng(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cwe(t,e){if(t==null)return{};var r=uwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var dwe=function(e,r,n,a,i,s){return"M".concat(e,",").concat(i,"v").concat(a,"M").concat(s,",").concat(r,"h").concat(n)},hwe=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,i=a===void 0?0:a,s=e.top,c=s===void 0?0:s,d=e.left,h=d===void 0?0:d,p=e.width,m=p===void 0?0:p,y=e.height,v=y===void 0?0:y,T=e.className,S=cwe(e,awe),w=iwe({x:n,y:i,top:c,left:h,width:m,height:v},S);return!vt(n)||!vt(i)||!vt(m)||!vt(v)||!vt(c)||!vt(h)?null:se.createElement("path",PN({},zt(w,!0),{className:fr("recharts-cross",T),d:dwe(n,i,m,v,c,h)}))},fwe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function pwe(t,e){if(t==null)return{};var r=mwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lc(){return lc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lc.apply(this,arguments)}function M$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M$(Object(r),!0).forEach(function(n){gwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gwe(t,e,r){return e=ywe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ywe(t){var e=vwe(t,"string");return Eg(e)=="symbol"?e:e+""}function vwe(t,e){if(Eg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xwe=function(e,r,n,a){var i="";return a.forEach(function(s,c){var d=wn(r,n,e,s);c?i+="L ".concat(d.x,",").concat(d.y):i+="M ".concat(d.x,",").concat(d.y)}),i+="Z",i},bwe=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,i=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=jg({stroke:"#ccc"},zt(e,!1));return se.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(h){var p=wn(r,n,a,h),m=wn(r,n,i,h);return se.createElement("line",lc({},d,{key:"line-".concat(h),x1:p.x,y1:p.y,x2:m.x,y2:m.y}))}))},wwe=function(e){var r=e.cx,n=e.cy,a=e.radius,i=e.index,s=jg(jg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return se.createElement("circle",lc({},s,{className:fr("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(i),cx:r,cy:n,r:a}))},Swe=function(e){var r=e.radius,n=e.index,a=jg(jg({stroke:"#ccc"},zt(e,!1)),{},{fill:"none"});return se.createElement("path",lc({},a,{className:fr("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:xwe(r,e.cx,e.cy,e.polarAngles)}))},_we=function(e){var r=e.polarRadius,n=e.gridType;return!r||!r.length?null:se.createElement("g",{className:"recharts-polar-grid-concentric"},r.map(function(a,i){var s=i;return n==="circle"?se.createElement(wwe,lc({key:s},e,{radius:a,index:i})):se.createElement(Swe,lc({key:s},e,{radius:a,index:i}))}))},GK=function(e){var r=e.cx,n=r===void 0?0:r,a=e.cy,i=a===void 0?0:a,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,h=d===void 0?0:d,p=e.gridType,m=p===void 0?"polygon":p,y=e.radialLines,v=y===void 0?!0:y,T=pwe(e,fwe);return h<=0?null:se.createElement("g",{className:"recharts-polar-grid"},se.createElement(bwe,lc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:v},T)),se.createElement(_we,lc({cx:n,cy:i,innerRadius:c,outerRadius:h,gridType:m,radialLines:v},T)))};GK.displayName="PolarGrid";var Y_,P$;function Twe(){if(P$)return Y_;P$=1;var t=nw(),e=iK(),r=sl();function n(a,i){return a&&a.length?t(a,r(i,2),e):void 0}return Y_=n,Y_}var Awe=Twe();const Nwe=Kr(Awe);var Z_,D$;function Ewe(){if(D$)return Z_;D$=1;var t=nw(),e=sl(),r=sK();function n(a,i){return a&&a.length?t(a,e(i,2),r):void 0}return Z_=n,Z_}var jwe=Ewe();const kwe=Kr(jwe);var Cwe=["cx","cy","angle","ticks","axisLine"],Owe=["ticks","tick","angle","tickFormatter","stroke"];function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function Am(){return Am=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Am.apply(this,arguments)}function L$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function md(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?L$(Object(r),!0).forEach(function(n){cw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):L$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B$(t,e){if(t==null)return{};var r=Iwe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Iwe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Rwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KK(n.key),n)}}function Mwe(t,e,r){return e&&$$(t.prototype,e),r&&$$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pwe(t,e,r){return e=Sb(e),Dwe(t,WK()?Reflect.construct(e,r||[],Sb(t).constructor):e.apply(t,r))}function Dwe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lwe(t)}function Lwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WK=function(){return!!t})()}function Sb(t){return Sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sb(t)}function Bwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DN(t,e)}function DN(t,e){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},DN(t,e)}function cw(t,e,r){return e=KK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function KK(t){var e=$we(t,"string");return lf(e)=="symbol"?e:e+""}function $we(t,e){if(lf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var w1=(function(t){function e(){return Rwe(this,e),Pwe(this,e,arguments)}return Bwe(e,t),Mwe(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,s=i.angle,c=i.cx,d=i.cy;return wn(c,d,a,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=Nwe(c,function(p){return p.coordinate||0}),h=kwe(c,function(p){return p.coordinate||0});return{cx:a,cy:i,startAngle:s,endAngle:s,innerRadius:h.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,h=B$(n,Cwe),p=c.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),m=wn(a,i,p[0],s),y=wn(a,i,p[1],s),v=md(md(md({},zt(h,!1)),{},{fill:"none"},zt(d,!1)),{},{x1:m.x,y1:m.y,x2:y.x,y2:y.y});return se.createElement("line",Am({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.angle,d=a.tickFormatter,h=a.stroke,p=B$(a,Owe),m=this.getTickTextAnchor(),y=zt(p,!1),v=zt(s,!1),T=i.map(function(S,w){var j=n.getTickValueCoord(S),R=md(md(md(md({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(j.x,", ").concat(j.y,")")},y),{},{stroke:"none",fill:h},v),{},{index:w},j),{},{payload:S});return se.createElement(zr,Am({className:fr("recharts-polar-radius-axis-tick",RK(s)),key:"tick-".concat(S.coordinate)},t0(n.props,S,w)),e.renderTickItem(s,R,d?d(S.value,w):S.value))});return se.createElement(zr,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,s=n.tick;return!a||!a.length?null:se.createElement(zr,{className:fr("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),s&&this.renderTicks(),di.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):rr(n)?s=n(a):s=se.createElement(tf,Am({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),s}}])})(k.PureComponent);cw(w1,"displayName","PolarRadiusAxis");cw(w1,"axisType","radiusAxis");cw(w1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ad.apply(this,arguments)}function U$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function gd(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U$(Object(r),!0).forEach(function(n){uw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Uwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XK(n.key),n)}}function zwe(t,e,r){return e&&z$(t.prototype,e),r&&z$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vwe(t,e,r){return e=_b(e),Fwe(t,QK()?Reflect.construct(e,r||[],_b(t).constructor):e.apply(t,r))}function Fwe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qwe(t)}function qwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QK=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_b(t)}function Hwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LN(t,e)}function LN(t,e){return LN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},LN(t,e)}function uw(t,e,r){return e=XK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XK(t){var e=Gwe(t,"string");return cf(e)=="symbol"?e:e+""}function Gwe(t,e){if(cf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wwe=Math.PI/180,V$=1e-5,S1=(function(t){function e(){return Uwe(this,e),Vwe(this,e,arguments)}return Hwe(e,t),zwe(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,s=a.cy,c=a.radius,d=a.orientation,h=a.tickSize,p=h||8,m=wn(i,s,c,n.coordinate),y=wn(i,s,c+(d==="inner"?-1:1)*p,n.coordinate);return{x1:m.x,y1:m.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*Wwe),s;return i>V$?s=a==="outer"?"start":"end":i<-V$?s=a==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,h=gd(gd({},zt(this.props,!1)),{},{fill:"none"},zt(c,!1));if(d==="circle")return se.createElement(lw,Ad({className:"recharts-polar-angle-axis-line"},h,{cx:a,cy:i,r:s}));var p=this.props.ticks,m=p.map(function(y){return wn(a,i,s,y.coordinate)});return se.createElement(HK,Ad({className:"recharts-polar-angle-axis-line"},h,{points:m}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,s=a.tick,c=a.tickLine,d=a.tickFormatter,h=a.stroke,p=zt(this.props,!1),m=zt(s,!1),y=gd(gd({},p),{},{fill:"none"},zt(c,!1)),v=i.map(function(T,S){var w=n.getTickLineCoord(T),j=n.getTickTextAnchor(T),R=gd(gd(gd({textAnchor:j},p),{},{stroke:"none",fill:h},m),{},{index:S,payload:T,x:w.x2,y:w.y2});return se.createElement(zr,Ad({className:fr("recharts-polar-angle-axis-tick",RK(s)),key:"tick-".concat(T.coordinate)},t0(n.props,T,S)),c&&se.createElement("line",Ad({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,R,d?d(T.value,S):T.value))});return se.createElement(zr,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,s=n.axisLine;return i<=0||!a||!a.length?null:se.createElement(zr,{className:fr("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var s;return se.isValidElement(n)?s=se.cloneElement(n,a):rr(n)?s=n(a):s=se.createElement(tf,Ad({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),s}}])})(k.PureComponent);uw(S1,"displayName","PolarAngleAxis");uw(S1,"axisType","angleAxis");uw(S1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var J_,F$;function Kwe(){if(F$)return J_;F$=1;var t=aW(),e=t(Object.getPrototypeOf,Object);return J_=e,J_}var eT,q$;function Qwe(){if(q$)return eT;q$=1;var t=fc(),e=Kwe(),r=pc(),n="[object Object]",a=Function.prototype,i=Object.prototype,s=a.toString,c=i.hasOwnProperty,d=s.call(Object);function h(p){if(!r(p)||t(p)!=n)return!1;var m=e(p);if(m===null)return!0;var y=c.call(m,"constructor")&&m.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return eT=h,eT}var Xwe=Qwe();const Ywe=Kr(Xwe);var tT,H$;function Zwe(){if(H$)return tT;H$=1;var t=fc(),e=pc(),r="[object Boolean]";function n(a){return a===!0||a===!1||e(a)&&t(a)==r}return tT=n,tT}var Jwe=Zwe();const e4e=Kr(Jwe);function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function Tb(){return Tb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Tb.apply(this,arguments)}function t4e(t,e){return i4e(t)||a4e(t,e)||n4e(t,e)||r4e()}function r4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n4e(t,e){if(t){if(typeof t=="string")return G$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G$(t,e)}}function G$(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a4e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function i4e(t){if(Array.isArray(t))return t}function W$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K$(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?W$(Object(r),!0).forEach(function(n){s4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s4e(t,e,r){return e=o4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o4e(t){var e=l4e(t,"string");return kg(e)=="symbol"?e:e+""}function l4e(t,e){if(kg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(kg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q$=function(e,r,n,a,i){var s=n-a,c;return c="M ".concat(e,",").concat(r),c+="L ".concat(e+n,",").concat(r),c+="L ".concat(e+n-s/2,",").concat(r+i),c+="L ".concat(e+n-s/2-a,",").concat(r+i),c+="L ".concat(e,",").concat(r," Z"),c},c4e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},u4e=function(e){var r=K$(K$({},c4e),e),n=k.useRef(),a=k.useState(-1),i=t4e(a,2),s=i[0],c=i[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var I=n.current.getTotalLength();I&&c(I)}catch{}},[]);var d=r.x,h=r.y,p=r.upperWidth,m=r.lowerWidth,y=r.height,v=r.className,T=r.animationEasing,S=r.animationDuration,w=r.animationBegin,j=r.isUpdateAnimationActive;if(d!==+d||h!==+h||p!==+p||m!==+m||y!==+y||p===0&&m===0||y===0)return null;var R=fr("recharts-trapezoid",v);return j?se.createElement(Jo,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:h},to:{upperWidth:p,lowerWidth:m,height:y,x:d,y:h},duration:S,animationEasing:T,isActive:j},function(I){var L=I.upperWidth,C=I.lowerWidth,P=I.height,N=I.x,A=I.y;return se.createElement(Jo,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},se.createElement("path",Tb({},zt(r,!0),{className:R,d:Q$(N,A,L,C,P),ref:n})))}):se.createElement("g",null,se.createElement("path",Tb({},zt(r,!0),{className:R,d:Q$(d,h,p,m,y)})))},d4e=["option","shapeType","propTransformer","activeClassName","isActive"];function Cg(t){"@babel/helpers - typeof";return Cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cg(t)}function h4e(t,e){if(t==null)return{};var r=f4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function f4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function X$(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ab(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X$(Object(r),!0).forEach(function(n){p4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p4e(t,e,r){return e=m4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m4e(t){var e=g4e(t,"string");return Cg(e)=="symbol"?e:e+""}function g4e(t,e){if(Cg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y4e(t,e){return Ab(Ab({},e),t)}function v4e(t,e){return t==="symbols"}function Y$(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return se.createElement(ej,r);case"trapezoid":return se.createElement(u4e,r);case"sector":return se.createElement(LK,r);case"symbols":if(v4e(e))return se.createElement(W2,r);break;default:return null}}function x4e(t){return k.isValidElement(t)?t.props:t}function BN(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?y4e:n,i=t.activeClassName,s=i===void 0?"recharts-active-shape":i,c=t.isActive,d=h4e(t,d4e),h;if(k.isValidElement(e))h=k.cloneElement(e,Ab(Ab({},d),x4e(e)));else if(rr(e))h=e(d);else if(Ywe(e)&&!e4e(e)){var p=a(e,d);h=se.createElement(Y$,{shapeType:r,elementProps:p})}else{var m=d;h=se.createElement(Y$,{shapeType:r,elementProps:m})}return c?se.createElement(zr,{className:s},h):h}function dw(t,e){return e!=null&&"trapezoids"in t.props}function hw(t,e){return e!=null&&"sectors"in t.props}function Og(t,e){return e!=null&&"points"in t.props}function b4e(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,i=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&i}function w4e(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function S4e(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function _4e(t,e){var r;return dw(t,e)?r=b4e:hw(t,e)?r=w4e:Og(t,e)&&(r=S4e),r}function T4e(t,e){var r;return dw(t,e)?r="trapezoids":hw(t,e)?r="sectors":Og(t,e)&&(r="points"),r}function A4e(t,e){if(dw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(hw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Og(t,e)?e.payload:{}}function N4e(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=T4e(r,e),i=A4e(r,e),s=n.filter(function(d,h){var p=x1(i,d),m=r.props[a].filter(function(T){var S=_4e(r,e);return S(T,e)}),y=r.props[a].indexOf(m[m.length-1]),v=h===y;return p&&v}),c=n.indexOf(s[s.length-1]);return c}var rT,Z$;function E4e(){if(Z$)return rT;Z$=1;function t(e){return e&&e.length?e[0]:void 0}return rT=t,rT}var nT,J$;function j4e(){return J$||(J$=1,nT=E4e()),nT}var k4e=j4e();const C4e=Kr(k4e);var O4e=["key"];function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function I4e(t,e){if(t==null)return{};var r=R4e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function R4e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nb.apply(this,arguments)}function eU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ri(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eU(Object(r),!0).forEach(function(n){Pl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZK(n.key),n)}}function P4e(t,e,r){return e&&tU(t.prototype,e),r&&tU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function D4e(t,e,r){return e=Eb(e),L4e(t,YK()?Reflect.construct(e,r||[],Eb(t).constructor):e.apply(t,r))}function L4e(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B4e(t)}function B4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YK=function(){return!!t})()}function Eb(t){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Eb(t)}function $4e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$N(t,e)}function $N(t,e){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$N(t,e)}function Pl(t,e,r){return e=ZK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZK(t){var e=U4e(t,"string");return uf(e)=="symbol"?e:e+""}function U4e(t,e){if(uf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(uf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _1=(function(t){function e(){var r;M4e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=D4e(this,e,[].concat(a)),Pl(r,"state",{isAnimationFinished:!1}),Pl(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),rr(s)&&s()}),Pl(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),rr(s)&&s()}),Pl(r,"handleMouseEnter",function(s){var c=r.props.onMouseEnter;c&&c(r.props,s)}),Pl(r,"handleMouseLeave",function(s){var c=r.props.onMouseLeave;c&&c(r.props,s)}),r}return $4e(e,t),P4e(e,[{key:"renderDots",value:function(n){var a=this.props,i=a.dot,s=a.dataKey,c=zt(this.props,!1),d=zt(i,!0),h=n.map(function(p,m){var y=Ri(Ri(Ri({key:"dot-".concat(m),r:3},c),d),{},{dataKey:s,cx:p.x,cy:p.y,index:m,payload:p});return e.renderDotItem(i,y)});return se.createElement(zr,{className:"recharts-radar-dots"},h)}},{key:"renderPolygonStatically",value:function(n){var a=this.props,i=a.shape,s=a.dot,c=a.isRange,d=a.baseLinePoints,h=a.connectNulls,p;return se.isValidElement(i)?p=se.cloneElement(i,Ri(Ri({},this.props),{},{points:n})):rr(i)?p=i(Ri(Ri({},this.props),{},{points:n})):p=se.createElement(HK,Nb({},zt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:h})),se.createElement(zr,{className:"recharts-radar-polygon"},p,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"radar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,T=m&&m.length/i.length,S=i.map(function(w,j){var R=m&&m[Math.floor(j*T)];if(R){var I=Zi(R.x,w.x),L=Zi(R.y,w.y);return Ri(Ri({},w),{},{x:I(v),y:L(v)})}var C=Zi(w.cx,w.x),P=Zi(w.cy,w.y);return Ri(Ri({},w),{},{x:C(v),y:P(v)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return i&&a&&a.length&&!s&&(!c||!x1(c,a))?this.renderPolygonWithAnimation():this.renderPolygonStatically(a)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.className,s=n.points,c=n.isAnimationActive;if(a||!s||!s.length)return null;var d=this.state.isAnimationFinished,h=fr("recharts-radar",i);return se.createElement(zr,{className:h},this.renderPolygon(),(!c||d)&&Xl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,a){var i;if(se.isValidElement(n))i=se.cloneElement(n,a);else if(rr(n))i=n(a);else{var s=a.key,c=I4e(a,O4e);i=se.createElement(lw,Nb({},c,{key:s,className:fr("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return i}}])})(k.PureComponent);Pl(_1,"displayName","Radar");Pl(_1,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Pl(_1,"getComposedData",function(t){var e=t.radiusAxis,r=t.angleAxis,n=t.displayedData,a=t.dataKey,i=t.bandSize,s=r.cx,c=r.cy,d=!1,h=[],p=r.type!=="number"?i??0:0;n.forEach(function(y,v){var T=pi(y,r.dataKey,v),S=pi(y,a),w=r.scale(T)+p,j=Array.isArray(S)?PK(S):S,R=lr(j)?void 0:e.scale(j);Array.isArray(S)&&S.length>=2&&(d=!0),h.push(Ri(Ri({},wn(s,c,R,w)),{},{name:T,value:S,cx:s,cy:c,radius:R,angle:w,payload:y}))});var m=[];return d&&h.forEach(function(y){if(Array.isArray(y.value)){var v=C4e(y.value),T=lr(v)?void 0:e.scale(v);m.push(Ri(Ri({},y),{},{radius:T},wn(s,c,T,y.angle)))}else m.push(y)}),{points:h,isRange:d,baseLinePoints:m}});var aT,rU;function z4e(){if(rU)return aT;rU=1;var t=Math.ceil,e=Math.max;function r(n,a,i,s){for(var c=-1,d=e(t((a-n)/(i||1)),0),h=Array(d);d--;)h[s?d:++c]=n,n+=i;return h}return aT=r,aT}var iT,nU;function JK(){if(nU)return iT;nU=1;var t=bW(),e=1/0,r=17976931348623157e292;function n(a){if(!a)return a===0?a:0;if(a=t(a),a===e||a===-e){var i=a<0?-1:1;return i*r}return a===a?a:0}return iT=n,iT}var sT,aU;function V4e(){if(aU)return sT;aU=1;var t=z4e(),e=X2(),r=JK();function n(a){return function(i,s,c){return c&&typeof c!="number"&&e(i,s,c)&&(s=c=void 0),i=r(i),s===void 0?(s=i,i=0):s=r(s),c=c===void 0?i<s?1:-1:r(c),t(i,s,c,a)}}return sT=n,sT}var oT,iU;function F4e(){if(iU)return oT;iU=1;var t=V4e(),e=t();return oT=e,oT}var q4e=F4e();const jb=Kr(q4e);function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function sU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sU(Object(r),!0).forEach(function(n){eQ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eQ(t,e,r){return e=H4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H4e(t){var e=G4e(t,"string");return Ig(e)=="symbol"?e:e+""}function G4e(t,e){if(Ig(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W4e=["Webkit","Moz","O","ms"],K4e=function(e,r){var n=e.replace(/(\w)/,function(i){return i.toUpperCase()}),a=W4e.reduce(function(i,s){return oU(oU({},i),{},eQ({},s+n,r))},{});return a[e]=r,a};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kb.apply(this,arguments)}function lU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(r),!0).forEach(function(n){ws(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rQ(n.key),n)}}function X4e(t,e,r){return e&&cU(t.prototype,e),r&&cU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y4e(t,e,r){return e=Cb(e),Z4e(t,tQ()?Reflect.construct(e,r||[],Cb(t).constructor):e.apply(t,r))}function Z4e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J4e(t)}function J4e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tQ=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cb(t)}function e5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UN(t,e)}function UN(t,e){return UN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},UN(t,e)}function ws(t,e,r){return e=rQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rQ(t){var e=t5e(t,"string");return df(e)=="symbol"?e:e+""}function t5e(t,e){if(df(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(df(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var r5e=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,i=e.x,s=e.width,c=e.travellerWidth;if(!r||!r.length)return{};var d=r.length,h=wm().domain(jb(0,d)).range([i,i+s-c]),p=h.domain().map(function(m){return h(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:h(n),endX:h(a),scale:h,scaleValues:p}},uU=function(e){return e.changedTouches&&!!e.changedTouches.length},hf=(function(t){function e(r){var n;return Q4e(this,e),n=Y4e(this,e,[r]),ws(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),ws(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),ws(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,s=a.onDragEnd,c=a.startIndex;s==null||s({endIndex:i,startIndex:c})}),n.detachDragEndListener()}),ws(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ws(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ws(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ws(n,"handleSlideDragStart",function(a){var i=uU(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return e5e(e,t),X4e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,h=c.data,p=h.length-1,m=Math.min(a,i),y=Math.max(a,i),v=e.getIndexInRange(s,m),T=e.getIndexInRange(s,y);return{startIndex:v-v%d,endIndex:T===p?p:T-T%d}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,s=a.tickFormatter,c=a.dataKey,d=pi(i[n],c,n);return rr(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,s=a.startX,c=a.endX,d=this.props,h=d.x,p=d.width,m=d.travellerWidth,y=d.startIndex,v=d.endIndex,T=d.onChange,S=n.pageX-i;S>0?S=Math.min(S,h+p-m-c,h+p-m-s):S<0&&(S=Math.max(S,h-s,h-c));var w=this.getIndex({startX:s+S,endX:c+S});(w.startIndex!==y||w.endIndex!==v)&&T&&T(w),this.setState({startX:s+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=uU(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,s=a.movingTravellerId,c=a.endX,d=a.startX,h=this.state[s],p=this.props,m=p.x,y=p.width,v=p.travellerWidth,T=p.onChange,S=p.gap,w=p.data,j={startX:this.state.startX,endX:this.state.endX},R=n.pageX-i;R>0?R=Math.min(R,m+y-v-h):R<0&&(R=Math.max(R,m-h)),j[s]=h+R;var I=this.getIndex(j),L=I.startIndex,C=I.endIndex,P=function(){var A=w.length-1;return s==="startX"&&(c>d?L%S===0:C%S===0)||c<d&&C===A||s==="endX"&&(c>d?C%S===0:L%S===0)||c>d&&C===A};this.setState(ws(ws({},s,h+R),"brushMoveStartX",n.pageX),function(){T&&P()&&T(I)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,s=this.state,c=s.scaleValues,d=s.startX,h=s.endX,p=this.state[a],m=c.indexOf(p);if(m!==-1){var y=m+n;if(!(y===-1||y>=c.length)){var v=c[y];a==="startX"&&v>=h||a==="endX"&&v<=d||this.setState(ws({},a,v),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.fill,h=n.stroke;return se.createElement("rect",{stroke:h,fill:d,x:a,y:i,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.data,h=n.children,p=n.padding,m=k.Children.only(h);return m?se.cloneElement(m,{x:a,y:i,width:s,height:c,margin:p,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,s,c=this,d=this.props,h=d.y,p=d.travellerWidth,m=d.height,y=d.traveller,v=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,j=Math.max(n,this.props.x),R=lT(lT({},zt(this.props,!1)),{},{x:j,y:h,width:p,height:m}),I=v||"Min value: ".concat((i=T[S])===null||i===void 0?void 0:i.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return se.createElement(zr,{tabIndex:0,role:"slider","aria-label":I,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(C){["ArrowLeft","ArrowRight"].includes(C.key)&&(C.preventDefault(),C.stopPropagation(),c.handleTravellerMoveKeyboard(C.key==="ArrowRight"?1:-1,a))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,R))}},{key:"renderSlide",value:function(n,a){var i=this.props,s=i.y,c=i.height,d=i.stroke,h=i.travellerWidth,p=Math.min(n,a)+h,m=Math.max(Math.abs(a-n)-h,0);return se.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:p,y:s,width:m,height:c})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,h=n.stroke,p=this.state,m=p.startX,y=p.endX,v=5,T={pointerEvents:"none",fill:h};return se.createElement(zr,{className:"recharts-brush-texts"},se.createElement(tf,kb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,y)-v,y:s+c/2},T),this.getTextOfTick(a)),se.createElement(tf,kb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,y)+d+v,y:s+c/2},T),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,s=n.children,c=n.x,d=n.y,h=n.width,p=n.height,m=n.alwaysShowText,y=this.state,v=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,j=y.isTravellerMoving,R=y.isTravellerFocused;if(!a||!a.length||!vt(c)||!vt(d)||!vt(h)||!vt(p)||h<=0||p<=0)return null;var I=fr("recharts-brush",i),L=se.Children.count(s)===1,C=K4e("userSelect","none");return se.createElement(zr,{className:I,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:C},this.renderBackground(),L&&this.renderPanorama(),this.renderSlide(v,T),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||j||R||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,s=n.width,c=n.height,d=n.stroke,h=Math.floor(i+c/2)-1;return se.createElement(se.Fragment,null,se.createElement("rect",{x:a,y:i,width:s,height:c,fill:d,stroke:"none"}),se.createElement("line",{x1:a+1,y1:h,x2:a+s-1,y2:h,fill:"none",stroke:"#fff"}),se.createElement("line",{x1:a+1,y1:h+2,x2:a+s-1,y2:h+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return se.isValidElement(n)?i=se.cloneElement(n,a):rr(n)?i=n(a):i=e.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,s=n.width,c=n.x,d=n.travellerWidth,h=n.updateId,p=n.startIndex,m=n.endIndex;if(i!==a.prevData||h!==a.prevUpdateId)return lT({prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s},i&&i.length?r5e({data:i,width:s,x:c,travellerWidth:d,startIndex:p,endIndex:m}):{scale:null,scaleValues:null});if(a.scale&&(s!==a.prevWidth||c!==a.prevX||d!==a.prevTravellerWidth)){a.scale.range([c,c+s-d]);var y=a.scale.domain().map(function(v){return a.scale(v)});return{prevData:i,prevTravellerWidth:d,prevUpdateId:h,prevX:c,prevWidth:s,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,s=0,c=i-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>a?c=d:s=d}return a>=n[c]?c:s}}])})(k.PureComponent);ws(hf,"displayName","Brush");ws(hf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cT,dU;function n5e(){if(dU)return cT;dU=1;var t=AE();function e(r,n){var a;return t(r,function(i,s,c){return a=n(i,s,c),!a}),!!a}return cT=e,cT}var uT,hU;function a5e(){if(hU)return uT;hU=1;var t=YG(),e=sl(),r=n5e(),n=os(),a=X2();function i(s,c,d){var h=n(s)?t:r;return d&&a(s,c,d)&&(c=void 0),h(s,e(c,3))}return uT=i,uT}var i5e=a5e();const s5e=Kr(i5e);var Wo=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},dT,fU;function o5e(){if(fU)return dT;fU=1;var t=mW();function e(r,n,a){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[n]=a}return dT=e,dT}var hT,pU;function l5e(){if(pU)return hT;pU=1;var t=o5e(),e=fW(),r=sl();function n(a,i){var s={};return i=r(i,3),e(a,function(c,d,h){t(s,d,i(c,d,h))}),s}return hT=n,hT}var c5e=l5e();const u5e=Kr(c5e);var fT,mU;function d5e(){if(mU)return fT;mU=1;function t(e,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(!r(e[n],n,e))return!1;return!0}return fT=t,fT}var pT,gU;function h5e(){if(gU)return pT;gU=1;var t=AE();function e(r,n){var a=!0;return t(r,function(i,s,c){return a=!!n(i,s,c),a}),a}return pT=e,pT}var mT,yU;function f5e(){if(yU)return mT;yU=1;var t=d5e(),e=h5e(),r=sl(),n=os(),a=X2();function i(s,c,d){var h=n(s)?t:e;return d&&a(s,c,d)&&(c=void 0),h(s,r(c,3))}return mT=i,mT}var p5e=f5e();const nQ=Kr(p5e);var m5e=["x","y"];function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function zN(){return zN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zN.apply(this,arguments)}function vU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Yp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vU(Object(r),!0).forEach(function(n){g5e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g5e(t,e,r){return e=y5e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y5e(t){var e=v5e(t,"string");return Rg(e)=="symbol"?e:e+""}function v5e(t,e){if(Rg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x5e(t,e){if(t==null)return{};var r=b5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function b5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function w5e(t,e){var r=t.x,n=t.y,a=x5e(t,m5e),i="".concat(r),s=parseInt(i,10),c="".concat(n),d=parseInt(c,10),h="".concat(e.height||a.height),p=parseInt(h,10),m="".concat(e.width||a.width),y=parseInt(m,10);return Yp(Yp(Yp(Yp(Yp({},e),a),s?{x:s}:{}),d?{y:d}:{}),{},{height:p,width:y,name:e.name,radius:e.radius})}function xU(t){return se.createElement(BN,zN({shapeType:"rectangle",propTransformer:w5e,activeClassName:"recharts-active-bar"},t))}var S5e=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var i=vt(n)||A0e(n);return i?e(n,a):(i||n0(),r)}},_5e=["value","background"],aQ;function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function T5e(t,e){if(t==null)return{};var r=A5e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function A5e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ob(){return Ob=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ob.apply(this,arguments)}function bU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bU(Object(r),!0).forEach(function(n){du(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function N5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sQ(n.key),n)}}function E5e(t,e,r){return e&&wU(t.prototype,e),r&&wU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function j5e(t,e,r){return e=Ib(e),k5e(t,iQ()?Reflect.construct(e,r||[],Ib(t).constructor):e.apply(t,r))}function k5e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C5e(t)}function C5e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iQ=function(){return!!t})()}function Ib(t){return Ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ib(t)}function O5e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VN(t,e)}function VN(t,e){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},VN(t,e)}function du(t,e,r){return e=sQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sQ(t){var e=I5e(t,"string");return ff(e)=="symbol"?e:e+""}function I5e(t,e){if(ff(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ff(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T1=(function(t){function e(){var r;N5e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=j5e(this,e,[].concat(a)),du(r,"state",{isAnimationFinished:!1}),du(r,"id",f1("recharts-bar-")),du(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),du(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return O5e(e,t),E5e(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.dataKey,d=i.activeIndex,h=i.activeBar,p=zt(this.props,!1);return n&&n.map(function(m,y){var v=y===d,T=v?h:s,S=_a(_a(_a({},p),m),{},{isActive:v,option:T,index:y,dataKey:c,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return se.createElement(zr,Ob({className:"recharts-bar-rectangle"},t0(a.props,m,y),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(y)}),se.createElement(xU,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,s=a.layout,c=a.isAnimationActive,d=a.animationBegin,h=a.animationDuration,p=a.animationEasing,m=a.animationId,y=this.state.prevData;return se.createElement(Jo,{begin:d,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var T=v.t,S=i.map(function(w,j){var R=y&&y[j];if(R){var I=Zi(R.x,w.x),L=Zi(R.y,w.y),C=Zi(R.width,w.width),P=Zi(R.height,w.height);return _a(_a({},w),{},{x:I(T),y:L(T),width:C(T),height:P(T)})}if(s==="horizontal"){var N=Zi(0,w.height),A=N(T);return _a(_a({},w),{},{y:w.y+w.height-A,height:A})}var E=Zi(0,w.width),V=E(T);return _a(_a({},w),{},{width:V})});return se.createElement(zr,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,s=this.state.prevData;return i&&a&&a.length&&(!s||!x1(s,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,s=a.dataKey,c=a.activeIndex,d=zt(this.props.background,!1);return i.map(function(h,p){h.value;var m=h.background,y=T5e(h,_5e);if(!m)return null;var v=_a(_a(_a(_a(_a({},y),{},{fill:"#eee"},m),d),t0(n.props,h,p)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:p,className:"recharts-bar-background-rectangle"});return se.createElement(xU,Ob({key:"background-bar-".concat(p),option:n.props.background,isActive:p===c},v))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.data,c=i.xAxis,d=i.yAxis,h=i.layout,p=i.children,m=ks(p,b1);if(!m)return null;var y=h==="vertical"?s[0].height/2:s[0].width/2,v=function(w,j){var R=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:R,errorVal:pi(w,j)}},T={clipPath:n?"url(#clipPath-".concat(a,")"):null};return se.createElement(zr,T,m.map(function(S){return se.cloneElement(S,{key:"error-bar-".concat(a,"-").concat(S.props.dataKey),data:s,xAxis:c,yAxis:d,layout:h,offset:y,dataPointFormatter:v})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,s=n.className,c=n.xAxis,d=n.yAxis,h=n.left,p=n.top,m=n.width,y=n.height,v=n.isAnimationActive,T=n.background,S=n.id;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=fr("recharts-bar",s),R=c&&c.allowDataOverflow,I=d&&d.allowDataOverflow,L=R||I,C=lr(S)?this.id:S;return se.createElement(zr,{className:j},R||I?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:R?h:h-m/2,y:I?p:p-y/2,width:R?m:m*2,height:I?y:y*2}))):null,se.createElement(zr,{className:"recharts-bar-rectangles",clipPath:L?"url(#clipPath-".concat(C,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(L,C),(!v||w)&&Xl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])})(k.PureComponent);aQ=T1;du(T1,"displayName","Bar");du(T1,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});du(T1,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,i=t.xAxis,s=t.yAxis,c=t.xAxisTicks,d=t.yAxisTicks,h=t.stackedData,p=t.dataStartIndex,m=t.displayedData,y=t.offset,v=Uve(n,r);if(!v)return null;var T=e.layout,S=r.type.defaultProps,w=S!==void 0?_a(_a({},S),r.props):r.props,j=w.dataKey,R=w.children,I=w.minPointSize,L=T==="horizontal"?s:i,C=h?L.scale.domain():null,P=Wve({numericAxis:L}),N=ks(R,jE),A=m.map(function(E,V){var D,U,$,Q,K,H;h?D=zve(h[p+V],C):(D=pi(E,j),Array.isArray(D)||(D=[P,D]));var J=S5e(I,aQ.defaultProps.minPointSize)(D[1],V);if(T==="horizontal"){var ie,pe=[s.scale(D[0]),s.scale(D[1])],me=pe[0],X=pe[1];U=GB({axis:i,ticks:c,bandSize:a,offset:v.offset,entry:E,index:V}),$=(ie=X??me)!==null&&ie!==void 0?ie:void 0,Q=v.size;var ne=me-X;if(K=Number.isNaN(ne)?0:ne,H={x:U,y:s.y,width:Q,height:s.height},Math.abs(J)>0&&Math.abs(K)<Math.abs(J)){var re=vo(K||J)*(Math.abs(J)-Math.abs(K));$-=re,K+=re}}else{var Ae=[i.scale(D[0]),i.scale(D[1])],Se=Ae[0],ze=Ae[1];if(U=Se,$=GB({axis:s,ticks:d,bandSize:a,offset:v.offset,entry:E,index:V}),Q=ze-Se,K=v.size,H={x:i.x,y:$,width:i.width,height:K},Math.abs(J)>0&&Math.abs(Q)<Math.abs(J)){var He=vo(Q||J)*(Math.abs(J)-Math.abs(Q));Q+=He}}return _a(_a(_a({},E),{},{x:U,y:$,width:Q,height:K,value:h?D:D[1],payload:E,background:H},N&&N[V]&&N[V].props),{},{tooltipPayload:[OK(r,E)],tooltipPosition:{x:U+Q/2,y:$+K/2}})});return _a({data:A,layout:T},y)});function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function R5e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oQ(n.key),n)}}function M5e(t,e,r){return e&&SU(t.prototype,e),r&&SU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function go(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_U(Object(r),!0).forEach(function(n){fw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fw(t,e,r){return e=oQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oQ(t){var e=P5e(t,"string");return Mg(e)=="symbol"?e:e+""}function P5e(t,e){if(Mg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Mg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var D5e=function(e,r,n,a,i){var s=e.width,c=e.height,d=e.layout,h=e.children,p=Object.keys(r),m={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!Ss(h,T1);return p.reduce(function(v,T){var S=r[T],w=S.orientation,j=S.domain,R=S.padding,I=R===void 0?{}:R,L=S.mirror,C=S.reversed,P="".concat(w).concat(L?"Mirror":""),N,A,E,V,D;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var U=j[1]-j[0],$=1/0,Q=S.categoricalDomain.sort(k0e);if(Q.forEach(function(Ae,Se){Se>0&&($=Math.min((Ae||0)-(Q[Se-1]||0),$))}),Number.isFinite($)){var K=$/U,H=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(N=K*H/2),S.padding==="no-gap"){var J=xo(e.barCategoryGap,K*H),ie=K*H/2;N=ie-J-(ie-J)/H*J}}}a==="xAxis"?A=[n.left+(I.left||0)+(N||0),n.left+n.width-(I.right||0)-(N||0)]:a==="yAxis"?A=d==="horizontal"?[n.top+n.height-(I.bottom||0),n.top+(I.top||0)]:[n.top+(I.top||0)+(N||0),n.top+n.height-(I.bottom||0)-(N||0)]:A=S.range,C&&(A=[A[1],A[0]]);var pe=EK(S,i,y),me=pe.scale,X=pe.realScaleType;me.domain(j).range(A),jK(me);var ne=kK(me,go(go({},S),{},{realScaleType:X}));a==="xAxis"?(D=w==="top"&&!L||w==="bottom"&&L,E=n.left,V=m[P]-D*S.height):a==="yAxis"&&(D=w==="left"&&!L||w==="right"&&L,E=m[P]-D*S.width,V=n.top);var re=go(go(go({},S),ne),{},{realScaleType:X,x:E,y:V,scale:me,width:a==="xAxis"?n.width:S.width,height:a==="yAxis"?n.height:S.height});return re.bandSize=pb(re,ne),!S.hide&&a==="xAxis"?m[P]+=(D?-1:1)*re.height:S.hide||(m[P]+=(D?-1:1)*re.width),go(go({},v),{},fw({},T,re))},{})},lQ=function(e,r){var n=e.x,a=e.y,i=r.x,s=r.y;return{x:Math.min(n,i),y:Math.min(a,s),width:Math.abs(i-n),height:Math.abs(s-a)}},L5e=function(e){var r=e.x1,n=e.y1,a=e.x2,i=e.y2;return lQ({x:r,y:n},{x:a,y:i})},cQ=(function(){function t(e){R5e(this,t),this.scale=e}return M5e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(r)+c}default:return this.scale(r)}if(a){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+d}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])})();fw(cQ,"EPS",1e-4);var tj=function(e){var r=Object.keys(e).reduce(function(n,a){return go(go({},n),{},fw({},a,cQ.create(e[a])))},{});return go(go({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.bandAware,c=i.position;return u5e(a,function(d,h){return r[h].apply(d,{bandAware:s,position:c})})},isInRange:function(a){return nQ(a,function(i,s){return r[s].isInRange(i)})}})};function B5e(t){return(t%180+180)%180}var $5e=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=B5e(a),s=i*Math.PI/180,c=Math.atan(n/r),d=s>c&&s<Math.PI-c?n/Math.sin(s):r/Math.cos(s);return Math.abs(d)},gT,TU;function U5e(){if(TU)return gT;TU=1;var t=sl(),e=p1(),r=K2();function n(a){return function(i,s,c){var d=Object(i);if(!e(i)){var h=t(s,3);i=r(i),s=function(m){return h(d[m],m,d)}}var p=a(i,s,c);return p>-1?d[h?i[p]:p]:void 0}}return gT=n,gT}var yT,AU;function z5e(){if(AU)return yT;AU=1;var t=JK();function e(r){var n=t(r),a=n%1;return n===n?a?n-a:n:0}return yT=e,yT}var vT,NU;function V5e(){if(NU)return vT;NU=1;var t=lW(),e=sl(),r=z5e(),n=Math.max;function a(i,s,c){var d=i==null?0:i.length;if(!d)return-1;var h=c==null?0:r(c);return h<0&&(h=n(d+h,0)),t(i,e(s,3),h)}return vT=a,vT}var xT,EU;function F5e(){if(EU)return xT;EU=1;var t=U5e(),e=V5e(),r=t(e);return xT=r,xT}var q5e=F5e();const H5e=Kr(q5e);var G5e=TG();const W5e=Kr(G5e);var K5e=W5e(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),rj=k.createContext(void 0),nj=k.createContext(void 0),uQ=k.createContext(void 0),dQ=k.createContext({}),hQ=k.createContext(void 0),fQ=k.createContext(0),pQ=k.createContext(0),jU=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,s=e.clipPathId,c=e.children,d=e.width,h=e.height,p=K5e(i);return se.createElement(rj.Provider,{value:n},se.createElement(nj.Provider,{value:a},se.createElement(dQ.Provider,{value:i},se.createElement(uQ.Provider,{value:p},se.createElement(hQ.Provider,{value:s},se.createElement(fQ.Provider,{value:h},se.createElement(pQ.Provider,{value:d},c)))))))},Q5e=function(){return k.useContext(hQ)},mQ=function(e){var r=k.useContext(rj);r==null&&n0();var n=r[e];return n==null&&n0(),n},X5e=function(){var e=k.useContext(rj);return su(e)},Y5e=function(){var e=k.useContext(nj),r=H5e(e,function(n){return nQ(n.domain,Number.isFinite)});return r||su(e)},gQ=function(e){var r=k.useContext(nj);r==null&&n0();var n=r[e];return n==null&&n0(),n},Z5e=function(){var e=k.useContext(uQ);return e},J5e=function(){return k.useContext(dQ)},aj=function(){return k.useContext(pQ)},ij=function(){return k.useContext(fQ)};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function e3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vQ(n.key),n)}}function r3e(t,e,r){return e&&t3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function n3e(t,e,r){return e=Rb(e),a3e(t,yQ()?Reflect.construct(e,r||[],Rb(t).constructor):e.apply(t,r))}function a3e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i3e(t)}function i3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yQ=function(){return!!t})()}function Rb(t){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rb(t)}function s3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FN(t,e)}function FN(t,e){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},FN(t,e)}function kU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function CU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kU(Object(r),!0).forEach(function(n){sj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function sj(t,e,r){return e=vQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vQ(t){var e=o3e(t,"string");return pf(e)=="symbol"?e:e+""}function o3e(t,e){if(pf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function l3e(t,e){return h3e(t)||d3e(t,e)||u3e(t,e)||c3e()}function c3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u3e(t,e){if(t){if(typeof t=="string")return OU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OU(t,e)}}function OU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d3e(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function h3e(t){if(Array.isArray(t))return t}function qN(){return qN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qN.apply(this,arguments)}var f3e=function(e,r){var n;return se.isValidElement(e)?n=se.cloneElement(e,r):rr(e)?n=e(r):n=se.createElement("line",qN({},r,{className:"recharts-reference-line-line"})),n},p3e=function(e,r,n,a,i,s,c,d,h){var p=i.x,m=i.y,y=i.width,v=i.height;if(n){var T=h.y,S=e.y.apply(T,{position:s});if(Wo(h,"discard")&&!e.y.isInRange(S))return null;var w=[{x:p+y,y:S},{x:p,y:S}];return d==="left"?w.reverse():w}if(r){var j=h.x,R=e.x.apply(j,{position:s});if(Wo(h,"discard")&&!e.x.isInRange(R))return null;var I=[{x:R,y:m+v},{x:R,y:m}];return c==="top"?I.reverse():I}if(a){var L=h.segment,C=L.map(function(P){return e.apply(P,{position:s})});return Wo(h,"discard")&&s5e(C,function(P){return!e.isInRange(P)})?null:C}return null};function m3e(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,i=t.yAxisId,s=t.shape,c=t.className,d=t.alwaysShow,h=Q5e(),p=mQ(a),m=gQ(i),y=Z5e();if(!h||!y)return null;Kl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=tj({x:p.scale,y:m.scale}),T=La(e),S=La(r),w=n&&n.length===2,j=p3e(v,T,S,w,y,t.position,p.orientation,m.orientation,t);if(!j)return null;var R=l3e(j,2),I=R[0],L=I.x,C=I.y,P=R[1],N=P.x,A=P.y,E=Wo(t,"hidden")?"url(#".concat(h,")"):void 0,V=CU(CU({clipPath:E},zt(t,!0)),{},{x1:L,y1:C,x2:N,y2:A});return se.createElement(zr,{className:fr("recharts-reference-line",c)},f3e(s,V),di.renderCallByParent(t,L5e({x1:L,y1:C,x2:N,y2:A})))}var oj=(function(t){function e(){return e3e(this,e),n3e(this,e,arguments)}return s3e(e,t),r3e(e,[{key:"render",value:function(){return se.createElement(m3e,this.props)}}])})(se.Component);sj(oj,"displayName","ReferenceLine");sj(oj,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function HN(){return HN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HN.apply(this,arguments)}function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function IU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function RU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IU(Object(r),!0).forEach(function(n){pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function g3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bQ(n.key),n)}}function v3e(t,e,r){return e&&y3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x3e(t,e,r){return e=Mb(e),b3e(t,xQ()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function b3e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w3e(t)}function w3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xQ=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mb(t)}function S3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GN(t,e)}function GN(t,e){return GN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},GN(t,e)}function pw(t,e,r){return e=bQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bQ(t){var e=_3e(t,"string");return mf(e)=="symbol"?e:e+""}function _3e(t,e){if(mf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(mf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var T3e=function(e){var r=e.x,n=e.y,a=e.xAxis,i=e.yAxis,s=tj({x:a.scale,y:i.scale}),c=s.apply({x:r,y:n},{bandAware:!0});return Wo(e,"discard")&&!s.isInRange(c)?null:c},mw=(function(t){function e(){return g3e(this,e),x3e(this,e,arguments)}return S3e(e,t),v3e(e,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,h=La(a),p=La(i);if(Kl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!h||!p)return null;var m=T3e(this.props);if(!m)return null;var y=m.x,v=m.y,T=this.props,S=T.shape,w=T.className,j=Wo(this.props,"hidden")?"url(#".concat(d,")"):void 0,R=RU(RU({clipPath:j},zt(this.props,!0)),{},{cx:y,cy:v});return se.createElement(zr,{className:fr("recharts-reference-dot",w)},e.renderDot(S,R),di.renderCallByParent(this.props,{x:y-s,y:v-s,width:2*s,height:2*s}))}}])})(se.Component);pw(mw,"displayName","ReferenceDot");pw(mw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});pw(mw,"renderDot",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(lw,HN({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function WN(){return WN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},WN.apply(this,arguments)}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function MU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function PU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MU(Object(r),!0).forEach(function(n){gw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N3e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SQ(n.key),n)}}function E3e(t,e,r){return e&&N3e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function j3e(t,e,r){return e=Pb(e),k3e(t,wQ()?Reflect.construct(e,r||[],Pb(t).constructor):e.apply(t,r))}function k3e(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C3e(t)}function C3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wQ=function(){return!!t})()}function Pb(t){return Pb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pb(t)}function O3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KN(t,e)}function KN(t,e){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},KN(t,e)}function gw(t,e,r){return e=SQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SQ(t){var e=I3e(t,"string");return gf(e)=="symbol"?e:e+""}function I3e(t,e){if(gf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(gf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var R3e=function(e,r,n,a,i){var s=i.x1,c=i.x2,d=i.y1,h=i.y2,p=i.xAxis,m=i.yAxis;if(!p||!m)return null;var y=tj({x:p.scale,y:m.scale}),v={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:r?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:a?y.y.apply(h,{position:"end"}):y.y.rangeMax};return Wo(i,"discard")&&(!y.isInRange(v)||!y.isInRange(T))?null:lQ(v,T)},yw=(function(t){function e(){return A3e(this,e),j3e(this,e,arguments)}return O3e(e,t),E3e(e,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,s=n.y1,c=n.y2,d=n.className,h=n.alwaysShow,p=n.clipPathId;Kl(h===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=La(a),y=La(i),v=La(s),T=La(c),S=this.props.shape;if(!m&&!y&&!v&&!T&&!S)return null;var w=R3e(m,y,v,T,this.props);if(!w&&!S)return null;var j=Wo(this.props,"hidden")?"url(#".concat(p,")"):void 0;return se.createElement(zr,{className:fr("recharts-reference-area",d)},e.renderRect(S,PU(PU({clipPath:j},zt(this.props,!0)),w)),di.renderCallByParent(this.props,w))}}])})(se.Component);gw(yw,"displayName","ReferenceArea");gw(yw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gw(yw,"renderRect",function(t,e){var r;return se.isValidElement(t)?r=se.cloneElement(t,e):rr(t)?r=t(e):r=se.createElement(ej,WN({},e,{className:"recharts-reference-area-rect"})),r});function _Q(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function M3e(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return $5e(n,r)}function P3e(t,e,r){var n=r==="width",a=t.x,i=t.y,s=t.width,c=t.height;return e===1?{start:n?a:i,end:n?a+s:i+c}:{start:n?a+s:i+c,end:n?a:i}}function Db(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var i=r();return t*(e-t*i/2-n)>=0&&t*(e+t*i/2-a)<=0}function D3e(t,e){return _Q(t,e+1)}function L3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=e.start,c=e.end,d=0,h=1,p=s,m=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:_Q(n,h)};var S=d,w,j=function(){return w===void 0&&(w=r(T,S)),w},R=T.coordinate,I=d===0||Db(t,R,j,p,c);I||(d=0,p=s,h+=1),I&&(p=R+t*(j()/2+a),d+=h)},y;h<=i.length;)if(y=m(),y)return y.v;return[]}function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function DU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?DU(Object(r),!0).forEach(function(n){B3e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):DU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B3e(t,e,r){return e=$3e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $3e(t){var e=U3e(t,"string");return Pg(e)=="symbol"?e:e+""}function U3e(t,e){if(Pg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z3e(t,e,r,n,a){for(var i=(n||[]).slice(),s=i.length,c=e.start,d=e.end,h=function(y){var v=i[y],T,S=function(){return T===void 0&&(T=r(v,y)),T};if(y===s-1){var w=t*(v.coordinate+t*S()/2-d);i[y]=v=wi(wi({},v),{},{tickCoord:w>0?v.coordinate-w*t:v.coordinate})}else i[y]=v=wi(wi({},v),{},{tickCoord:v.coordinate});var j=Db(t,v.tickCoord,S,c,d);j&&(d=v.tickCoord-t*(S()/2+a),i[y]=wi(wi({},v),{},{isShow:!0}))},p=s-1;p>=0;p--)h(p);return i}function V3e(t,e,r,n,a,i){var s=(n||[]).slice(),c=s.length,d=e.start,h=e.end;if(i){var p=n[c-1],m=r(p,c-1),y=t*(p.coordinate+t*m/2-h);s[c-1]=p=wi(wi({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate});var v=Db(t,p.tickCoord,function(){return m},d,h);v&&(h=p.tickCoord-t*(m/2+a),s[c-1]=wi(wi({},p),{},{isShow:!0}))}for(var T=i?c-1:c,S=function(R){var I=s[R],L,C=function(){return L===void 0&&(L=r(I,R)),L};if(R===0){var P=t*(I.coordinate-t*C()/2-d);s[R]=I=wi(wi({},I),{},{tickCoord:P<0?I.coordinate-P*t:I.coordinate})}else s[R]=I=wi(wi({},I),{},{tickCoord:I.coordinate});var N=Db(t,I.tickCoord,C,d,h);N&&(d=I.tickCoord+t*(C()/2+a),s[R]=wi(wi({},I),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function lj(t,e,r){var n=t.tick,a=t.ticks,i=t.viewBox,s=t.minTickGap,c=t.orientation,d=t.interval,h=t.tickFormatter,p=t.unit,m=t.angle;if(!a||!a.length||!n)return[];if(vt(d)||p0.isSsr)return D3e(a,typeof d=="number"&&vt(d)?d:0);var y=[],v=c==="top"||c==="bottom"?"width":"height",T=p&&v==="width"?bm(p,{fontSize:e,letterSpacing:r}):{width:0,height:0},S=function(I,L){var C=rr(h)?h(I.value,L):I.value;return v==="width"?M3e(bm(C,{fontSize:e,letterSpacing:r}),T,m):bm(C,{fontSize:e,letterSpacing:r})[v]},w=a.length>=2?vo(a[1].coordinate-a[0].coordinate):1,j=P3e(i,w,v);return d==="equidistantPreserveStart"?L3e(w,j,S,a,s):(d==="preserveStart"||d==="preserveStartEnd"?y=V3e(w,j,S,a,s,d==="preserveStartEnd"):y=z3e(w,j,S,a,s),y.filter(function(R){return R.isShow}))}var F3e=["viewBox"],q3e=["viewBox"],H3e=["ticks"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function gh(){return gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gh.apply(this,arguments)}function LU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Oa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LU(Object(r),!0).forEach(function(n){cj(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bT(t,e){if(t==null)return{};var r=G3e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G3e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function W3e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AQ(n.key),n)}}function K3e(t,e,r){return e&&BU(t.prototype,e),r&&BU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q3e(t,e,r){return e=Lb(e),X3e(t,TQ()?Reflect.construct(e,r||[],Lb(t).constructor):e.apply(t,r))}function X3e(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y3e(t)}function Y3e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TQ=function(){return!!t})()}function Lb(t){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lb(t)}function Z3e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QN(t,e)}function QN(t,e){return QN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},QN(t,e)}function cj(t,e,r){return e=AQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AQ(t){var e=J3e(t,"string");return yf(e)=="symbol"?e:e+""}function J3e(t,e){if(yf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uf=(function(t){function e(r){var n;return W3e(this,e),n=Q3e(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return Z3e(e,t),K3e(e,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,s=bT(n,F3e),c=this.props,d=c.viewBox,h=bT(c,q3e);return!Ah(i,d)||!Ah(s,h)||!Ah(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,s=a.y,c=a.width,d=a.height,h=a.orientation,p=a.tickSize,m=a.mirror,y=a.tickMargin,v,T,S,w,j,R,I=m?-1:1,L=n.tickSize||p,C=vt(n.tickCoord)?n.tickCoord:n.coordinate;switch(h){case"top":v=T=n.coordinate,w=s+ +!m*d,S=w-I*L,R=S-I*y,j=C;break;case"left":S=w=n.coordinate,T=i+ +!m*c,v=T-I*L,j=v-I*y,R=C;break;case"right":S=w=n.coordinate,T=i+ +m*c,v=T+I*L,j=v+I*y,R=C;break;default:v=T=n.coordinate,w=s+ +m*d,S=w+I*L,R=S+I*y,j=C;break}return{line:{x1:v,y1:S,x2:T,y2:w},tick:{x:j,y:R}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s;switch(a){case"left":s=i?"start":"end";break;case"right":s=i?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,s="end";switch(a){case"left":case"right":s="middle";break;case"top":s=i?"start":"end";break;default:s=i?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,s=n.width,c=n.height,d=n.orientation,h=n.mirror,p=n.axisLine,m=Oa(Oa(Oa({},zt(this.props,!1)),zt(p,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!h||d==="bottom"&&h);m=Oa(Oa({},m),{},{x1:a,y1:i+y*c,x2:a+s,y2:i+y*c})}else{var v=+(d==="left"&&!h||d==="right"&&h);m=Oa(Oa({},m),{},{x1:a+v*s,y1:i,x2:a+v*s,y2:i+c})}return se.createElement("line",gh({},m,{className:fr("recharts-cartesian-axis-line",Zs(p,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var s=this,c=this.props,d=c.tickLine,h=c.stroke,p=c.tick,m=c.tickFormatter,y=c.unit,v=lj(Oa(Oa({},this.props),{},{ticks:n}),a,i),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=zt(this.props,!1),j=zt(p,!1),R=Oa(Oa({},w),{},{fill:"none"},zt(d,!1)),I=v.map(function(L,C){var P=s.getTickLineCoord(L),N=P.line,A=P.tick,E=Oa(Oa(Oa(Oa({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:h},j),A),{},{index:C,payload:L,visibleTicksCount:v.length,tickFormatter:m});return se.createElement(zr,gh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},t0(s.props,L,C)),d&&se.createElement("line",gh({},R,N,{className:fr("recharts-cartesian-axis-tick-line",Zs(d,"className"))})),p&&e.renderTickItem(p,E,"".concat(rr(m)?m(L.value,C):L.value).concat(y||"")))});return se.createElement("g",{className:"recharts-cartesian-axis-ticks"},I)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,s=a.width,c=a.height,d=a.ticksGenerator,h=a.className,p=a.hide;if(p)return null;var m=this.props,y=m.ticks,v=bT(m,H3e),T=y;return rr(d)&&(T=y&&y.length>0?d(this.props):d(v)),s<=0||c<=0||!T||!T.length?null:se.createElement(zr,{className:fr("recharts-cartesian-axis",h),ref:function(w){n.layerReference=w}},i&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),di.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var s,c=fr(a.className,"recharts-cartesian-axis-tick-value");return se.isValidElement(n)?s=se.cloneElement(n,Oa(Oa({},a),{},{className:c})):rr(n)?s=n(Oa(Oa({},a),{},{className:c})):s=se.createElement(tf,gh({},a,{className:"recharts-cartesian-axis-tick-value"}),i),s}}])})(k.Component);cj(Uf,"displayName","CartesianAxis");cj(Uf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var e6e=["x1","y1","x2","y2","key"],t6e=["offset"];function a0(t){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a0(t)}function $U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function _i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$U(Object(r),!0).forEach(function(n){r6e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r6e(t,e,r){return e=n6e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n6e(t){var e=a6e(t,"string");return a0(e)=="symbol"?e:e+""}function a6e(t,e){if(a0(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(a0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cd.apply(this,arguments)}function UU(t,e){if(t==null)return{};var r=i6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var s6e=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,i=e.y,s=e.width,c=e.height,d=e.ry;return se.createElement("rect",{x:a,y:i,ry:d,width:s,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function NQ(t,e){var r;if(se.isValidElement(t))r=se.cloneElement(t,e);else if(rr(t))r=t(e);else{var n=e.x1,a=e.y1,i=e.x2,s=e.y2,c=e.key,d=UU(e,e6e),h=zt(d,!1);h.offset;var p=UU(h,t6e);r=se.createElement("line",Cd({},p,{x1:n,y1:a,x2:i,y2:s,fill:"none",key:c}))}return r}function o6e(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,i=t.horizontalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:e,y1:c,x2:e+r,y2:c,key:"line-".concat(d),index:d});return NQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function l6e(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,i=t.verticalPoints;if(!a||!i||!i.length)return null;var s=i.map(function(c,d){var h=_i(_i({},t),{},{x1:c,y1:e,x2:c,y2:e+r,key:"line-".concat(d),index:d});return NQ(a,h)});return se.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function c6e(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,i=t.width,s=t.height,c=t.horizontalPoints,d=t.horizontal,h=d===void 0?!0:d;if(!h||!e||!e.length)return null;var p=c.map(function(y){return Math.round(y+a-a)}).sort(function(y,v){return y-v});a!==p[0]&&p.unshift(0);var m=p.map(function(y,v){var T=!p[v+1],S=T?a+s-y:p[v+1]-y;if(S<=0)return null;var w=v%e.length;return se.createElement("rect",{key:"react-".concat(v),y,x:n,height:S,width:i,stroke:"none",fill:e[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function u6e(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,i=t.x,s=t.y,c=t.width,d=t.height,h=t.verticalPoints;if(!r||!n||!n.length)return null;var p=h.map(function(y){return Math.round(y+i-i)}).sort(function(y,v){return y-v});i!==p[0]&&p.unshift(0);var m=p.map(function(y,v){var T=!p[v+1],S=T?i+c-y:p[v+1]-y;if(S<=0)return null;var w=v%n.length;return se.createElement("rect",{key:"react-".concat(v),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return se.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var d6e=function(e,r){var n=e.xAxis,a=e.width,i=e.height,s=e.offset;return NK(lj(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:Fl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.left,s.left+s.width,r)},h6e=function(e,r){var n=e.yAxis,a=e.width,i=e.height,s=e.offset;return NK(lj(_i(_i(_i({},Uf.defaultProps),n),{},{ticks:Fl(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),s.top,s.top+s.height,r)},ih={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function EQ(t){var e,r,n,a,i,s,c=aj(),d=ij(),h=J5e(),p=_i(_i({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:ih.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:ih.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:ih.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:ih.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:ih.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:ih.verticalFill,x:vt(t.x)?t.x:h.left,y:vt(t.y)?t.y:h.top,width:vt(t.width)?t.width:h.width,height:vt(t.height)?t.height:h.height}),m=p.x,y=p.y,v=p.width,T=p.height,S=p.syncWithTicks,w=p.horizontalValues,j=p.verticalValues,R=X5e(),I=Y5e();if(!vt(v)||v<=0||!vt(T)||T<=0||!vt(m)||m!==+m||!vt(y)||y!==+y)return null;var L=p.verticalCoordinatesGenerator||d6e,C=p.horizontalCoordinatesGenerator||h6e,P=p.horizontalPoints,N=p.verticalPoints;if((!P||!P.length)&&rr(C)){var A=w&&w.length,E=C({yAxis:I?_i(_i({},I),{},{ticks:A?w:I.ticks}):void 0,width:c,height:d,offset:h},A?!0:S);Kl(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(a0(E),"]")),Array.isArray(E)&&(P=E)}if((!N||!N.length)&&rr(L)){var V=j&&j.length,D=L({xAxis:R?_i(_i({},R),{},{ticks:V?j:R.ticks}):void 0,width:c,height:d,offset:h},V?!0:S);Kl(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(a0(D),"]")),Array.isArray(D)&&(N=D)}return se.createElement("g",{className:"recharts-cartesian-grid"},se.createElement(s6e,{fill:p.fill,fillOpacity:p.fillOpacity,x:p.x,y:p.y,width:p.width,height:p.height,ry:p.ry}),se.createElement(o6e,Cd({},p,{offset:h,horizontalPoints:P,xAxis:R,yAxis:I})),se.createElement(l6e,Cd({},p,{offset:h,verticalPoints:N,xAxis:R,yAxis:I})),se.createElement(c6e,Cd({},p,{horizontalPoints:P})),se.createElement(u6e,Cd({},p,{verticalPoints:N})))}EQ.displayName="CartesianGrid";function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function f6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CQ(n.key),n)}}function m6e(t,e,r){return e&&p6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function g6e(t,e,r){return e=Bb(e),y6e(t,jQ()?Reflect.construct(e,r||[],Bb(t).constructor):e.apply(t,r))}function y6e(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v6e(t)}function v6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jQ=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bb(t)}function x6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XN(t,e)}function XN(t,e){return XN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},XN(t,e)}function kQ(t,e,r){return e=CQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CQ(t){var e=b6e(t,"string");return vf(e)=="symbol"?e:e+""}function b6e(t,e){if(vf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vw=(function(t){function e(){return f6e(this,e),g6e(this,e,arguments)}return x6e(e,t),m6e(e,[{key:"render",value:function(){return null}}])})(k.Component);kQ(vw,"displayName","ZAxis");kQ(vw,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var w6e=["option","isActive"];function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nm.apply(this,arguments)}function S6e(t,e){if(t==null)return{};var r=_6e(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _6e(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function T6e(t){var e=t.option,r=t.isActive,n=S6e(t,w6e);return typeof e=="string"?k.createElement(BN,Nm({option:k.createElement(W2,Nm({type:e},n)),isActive:r,shapeType:"symbols"},n)):k.createElement(BN,Nm({option:e,isActive:r,shapeType:"symbols"},n))}function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Em.apply(this,arguments)}function zU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ws(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zU(Object(r),!0).forEach(function(n){hu(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function A6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IQ(n.key),n)}}function N6e(t,e,r){return e&&VU(t.prototype,e),r&&VU(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function E6e(t,e,r){return e=$b(e),j6e(t,OQ()?Reflect.construct(e,r||[],$b(t).constructor):e.apply(t,r))}function j6e(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k6e(t)}function k6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function OQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OQ=function(){return!!t})()}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$b(t)}function C6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YN(t,e)}function YN(t,e){return YN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},YN(t,e)}function hu(t,e,r){return e=IQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IQ(t){var e=O6e(t,"string");return xf(e)=="symbol"?e:e+""}function O6e(t,e){if(xf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var A1=(function(t){function e(){var r;A6e(this,e);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=E6e(this,e,[].concat(a)),hu(r,"state",{isAnimationFinished:!1}),hu(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),hu(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),hu(r,"id",f1("recharts-scatter-")),r}return C6e(e,t),N6e(e,[{key:"renderSymbolsStatically",value:function(n){var a=this,i=this.props,s=i.shape,c=i.activeShape,d=i.activeIndex,h=zt(this.props,!1);return n.map(function(p,m){var y=d===m,v=y?c:s,T=Ws(Ws({},h),p);return se.createElement(zr,Em({className:"recharts-scatter-symbol",key:"symbol-".concat(p==null?void 0:p.cx,"-").concat(p==null?void 0:p.cy,"-").concat(p==null?void 0:p.size,"-").concat(m)},t0(a.props,p,m),{role:"img"}),se.createElement(T6e,Em({option:v,isActive:y,key:"symbol-".concat(m)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,a=this.props,i=a.points,s=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state.prevPoints;return se.createElement(Jo,{begin:c,duration:d,isActive:s,easing:h,from:{t:0},to:{t:1},key:"pie-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var v=y.t,T=i.map(function(S,w){var j=m&&m[w];if(j){var R=Zi(j.cx,S.cx),I=Zi(j.cy,S.cy),L=Zi(j.size,S.size);return Ws(Ws({},S),{},{cx:R(v),cy:I(v),size:L(v)})}var C=Zi(0,S.size);return Ws(Ws({},S),{},{size:C(v)})});return se.createElement(zr,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,a=n.points,i=n.isAnimationActive,s=this.state.prevPoints;return i&&a&&a.length&&(!s||!x1(s,a))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(a)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var a=this.props,i=a.points,s=a.xAxis,c=a.yAxis,d=a.children,h=ks(d,b1);return h?h.map(function(p,m){var y=p.props,v=y.direction,T=y.dataKey;return se.cloneElement(p,{key:"".concat(v,"-").concat(T,"-").concat(i[m]),data:i,xAxis:s,yAxis:c,layout:v==="x"?"vertical":"horizontal",dataPointFormatter:function(w,j){return{x:w.cx,y:w.cy,value:v==="x"?+w.node.x:+w.node.y,errorVal:pi(w,j)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,a=n.points,i=n.line,s=n.lineType,c=n.lineJointType,d=zt(this.props,!1),h=zt(i,!1),p,m;if(s==="joint")p=a.map(function(I){return{x:I.cx,y:I.cy}});else if(s==="fitting"){var y=j0e(a),v=y.xmin,T=y.xmax,S=y.a,w=y.b,j=function(L){return S*L+w};p=[{x:v,y:j(v)},{x:T,y:j(T)}]}var R=Ws(Ws(Ws({},d),{},{fill:"none",stroke:d&&d.fill},h),{},{points:p});return se.isValidElement(i)?m=se.cloneElement(i,R):rr(i)?m=i(R):m=se.createElement(_N,Em({},R,{type:c})),se.createElement(zr,{className:"recharts-scatter-line",key:"recharts-scatter-line"},m)}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.points,s=n.line,c=n.className,d=n.xAxis,h=n.yAxis,p=n.left,m=n.top,y=n.width,v=n.height,T=n.id,S=n.isAnimationActive;if(a||!i||!i.length)return null;var w=this.state.isAnimationFinished,j=fr("recharts-scatter",c),R=d&&d.allowDataOverflow,I=h&&h.allowDataOverflow,L=R||I,C=lr(T)?this.id:T;return se.createElement(zr,{className:j,clipPath:L?"url(#clipPath-".concat(C,")"):null},R||I?se.createElement("defs",null,se.createElement("clipPath",{id:"clipPath-".concat(C)},se.createElement("rect",{x:R?p:p-y/2,y:I?m:m-v/2,width:R?y:y*2,height:I?v:v*2}))):null,s&&this.renderLine(),this.renderErrorBar(),se.createElement(zr,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&Xl.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}}])})(k.PureComponent);hu(A1,"displayName","Scatter");hu(A1,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!p0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});hu(A1,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,a=t.item,i=t.displayedData,s=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,h=a.props.tooltipType,p=ks(a.props.children,jE),m=lr(e.dataKey)?a.props.dataKey:e.dataKey,y=lr(r.dataKey)?a.props.dataKey:r.dataKey,v=n&&n.dataKey,T=n?n.range:vw.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,j=r.scale.bandwidth?r.scale.bandwidth():0,R=i.map(function(I,L){var C=pi(I,m),P=pi(I,y),N=!lr(v)&&pi(I,v)||"-",A=[{name:lr(e.dataKey)?a.props.name:e.name||e.dataKey,unit:e.unit||"",value:C,payload:I,dataKey:m,type:h},{name:lr(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:I,dataKey:y,type:h}];N!=="-"&&A.push({name:n.name||n.dataKey,unit:n.unit||"",value:N,payload:I,dataKey:v,type:h});var E=HB({axis:e,ticks:s,bandSize:w,entry:I,index:L,dataKey:m}),V=HB({axis:r,ticks:c,bandSize:j,entry:I,index:L,dataKey:y}),D=N!=="-"?n.scale(N):S,U=Math.sqrt(Math.max(D,0)/Math.PI);return Ws(Ws({},I),{},{cx:E,cy:V,x:E-U,y:V-U,xAxis:e,yAxis:r,zAxis:n,width:2*U,height:2*U,size:D,node:{x:C,y:P,z:N},tooltipPayload:A,tooltipPosition:{x:E,y:V},payload:I},p&&p[L]&&p[L].props)});return Ws({points:R},d)});function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function I6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PQ(n.key),n)}}function M6e(t,e,r){return e&&R6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function P6e(t,e,r){return e=Ub(e),D6e(t,RQ()?Reflect.construct(e,r||[],Ub(t).constructor):e.apply(t,r))}function D6e(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L6e(t)}function L6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RQ=function(){return!!t})()}function Ub(t){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ub(t)}function B6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZN(t,e)}function ZN(t,e){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},ZN(t,e)}function MQ(t,e,r){return e=PQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function PQ(t){var e=$6e(t,"string");return bf(e)=="symbol"?e:e+""}function $6e(t,e){if(bf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(bf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function JN(){return JN=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JN.apply(this,arguments)}function U6e(t){var e=t.xAxisId,r=aj(),n=ij(),a=mQ(e);return a==null?null:k.createElement(Uf,JN({},a,{className:fr("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Fl(s,!0)}}))}var xw=(function(t){function e(){return I6e(this,e),P6e(this,e,arguments)}return B6e(e,t),M6e(e,[{key:"render",value:function(){return k.createElement(U6e,this.props)}}])})(k.Component);MQ(xw,"displayName","XAxis");MQ(xw,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function z6e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V6e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BQ(n.key),n)}}function F6e(t,e,r){return e&&V6e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q6e(t,e,r){return e=zb(e),H6e(t,DQ()?Reflect.construct(e,r||[],zb(t).constructor):e.apply(t,r))}function H6e(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G6e(t)}function G6e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DQ=function(){return!!t})()}function zb(t){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zb(t)}function W6e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e8(t,e)}function e8(t,e){return e8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},e8(t,e)}function LQ(t,e,r){return e=BQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function BQ(t){var e=K6e(t,"string");return wf(e)=="symbol"?e:e+""}function K6e(t,e){if(wf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function t8(){return t8=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},t8.apply(this,arguments)}var Q6e=function(e){var r=e.yAxisId,n=aj(),a=ij(),i=gQ(r);return i==null?null:k.createElement(Uf,t8({},i,{className:fr("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(c){return Fl(c,!0)}}))},bw=(function(t){function e(){return z6e(this,e),q6e(this,e,arguments)}return W6e(e,t),F6e(e,[{key:"render",value:function(){return k.createElement(Q6e,this.props)}}])})(k.Component);LQ(bw,"displayName","YAxis");LQ(bw,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function FU(t){return J6e(t)||Z6e(t)||Y6e(t)||X6e()}function X6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y6e(t,e){if(t){if(typeof t=="string")return r8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8(t,e)}}function Z6e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J6e(t){if(Array.isArray(t))return r8(t)}function r8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n8=function(e,r,n,a,i){var s=ks(e,oj),c=ks(e,mw),d=[].concat(FU(s),FU(c)),h=ks(e,yw),p="".concat(a,"Id"),m=a[0],y=r;if(d.length&&(y=d.reduce(function(S,w){if(w.props[p]===n&&Wo(w.props,"extendDomain")&&vt(w.props[m])){var j=w.props[m];return[Math.min(S[0],j),Math.max(S[1],j)]}return S},y)),h.length){var v="".concat(m,"1"),T="".concat(m,"2");y=h.reduce(function(S,w){if(w.props[p]===n&&Wo(w.props,"extendDomain")&&vt(w.props[v])&&vt(w.props[T])){var j=w.props[v],R=w.props[T];return[Math.min(S[0],j,R),Math.max(S[1],j,R)]}return S},y)}return i&&i.length&&(y=i.reduce(function(S,w){return vt(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},wT={exports:{}},qU;function eSe(){return qU||(qU=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,h,p){this.fn=d,this.context=h,this.once=p||!1}function i(d,h,p,m,y){if(typeof p!="function")throw new TypeError("The listener must be a function");var v=new a(p,m||d,y),T=r?r+h:h;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],v]:d._events[T].push(v):(d._events[T]=v,d._eventsCount++),d}function s(d,h){--d._eventsCount===0?d._events=new n:delete d._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],p,m;if(this._eventsCount===0)return h;for(m in p=this._events)e.call(p,m)&&h.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},c.prototype.listeners=function(h){var p=r?r+h:h,m=this._events[p];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,v=m.length,T=new Array(v);y<v;y++)T[y]=m[y].fn;return T},c.prototype.listenerCount=function(h){var p=r?r+h:h,m=this._events[p];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,p,m,y,v,T){var S=r?r+h:h;if(!this._events[S])return!1;var w=this._events[S],j=arguments.length,R,I;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),j){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,p),!0;case 3:return w.fn.call(w.context,p,m),!0;case 4:return w.fn.call(w.context,p,m,y),!0;case 5:return w.fn.call(w.context,p,m,y,v),!0;case 6:return w.fn.call(w.context,p,m,y,v,T),!0}for(I=1,R=new Array(j-1);I<j;I++)R[I-1]=arguments[I];w.fn.apply(w.context,R)}else{var L=w.length,C;for(I=0;I<L;I++)switch(w[I].once&&this.removeListener(h,w[I].fn,void 0,!0),j){case 1:w[I].fn.call(w[I].context);break;case 2:w[I].fn.call(w[I].context,p);break;case 3:w[I].fn.call(w[I].context,p,m);break;case 4:w[I].fn.call(w[I].context,p,m,y);break;default:if(!R)for(C=1,R=new Array(j-1);C<j;C++)R[C-1]=arguments[C];w[I].fn.apply(w[I].context,R)}}return!0},c.prototype.on=function(h,p,m){return i(this,h,p,m,!1)},c.prototype.once=function(h,p,m){return i(this,h,p,m,!0)},c.prototype.removeListener=function(h,p,m,y){var v=r?r+h:h;if(!this._events[v])return this;if(!p)return s(this,v),this;var T=this._events[v];if(T.fn)T.fn===p&&(!y||T.once)&&(!m||T.context===m)&&s(this,v);else{for(var S=0,w=[],j=T.length;S<j;S++)(T[S].fn!==p||y&&!T[S].once||m&&T[S].context!==m)&&w.push(T[S]);w.length?this._events[v]=w.length===1?w[0]:w:s(this,v)}return this},c.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&s(this,p)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(wT)),wT.exports}var tSe=eSe();const rSe=Kr(tSe);var ST=new rSe,_T="recharts.syncMouseEvents";function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function nSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$Q(n.key),n)}}function iSe(t,e,r){return e&&aSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TT(t,e,r){return e=$Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Q(t){var e=sSe(t,"string");return Dg(e)=="symbol"?e:e+""}function sSe(t,e){if(Dg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Dg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var oSe=(function(){function t(){nSe(this,t),TT(this,"activeIndex",0),TT(this,"coordinateList",[]),TT(this,"layout","horizontal")}return iSe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,s=r.container,c=s===void 0?null:s,d=r.layout,h=d===void 0?null:d,p=r.offset,m=p===void 0?null:p,y=r.mouseHandlerCallback,v=y===void 0?null:y;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=h??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,s=a.y,c=a.height,d=this.coordinateList[this.activeIndex].coordinate,h=((r=window)===null||r===void 0?void 0:r.scrollX)||0,p=((n=window)===null||n===void 0?void 0:n.scrollY)||0,m=i+d+h,y=s+this.offset.top+c/2+p;this.mouseHandlerCallback({pageX:m,pageY:y})}}}])})();function lSe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&vt(n)&&vt(a))return!0}return!1}function cSe(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function UQ(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,i=t.endAngle,s=wn(e,r,n,a),c=wn(e,r,n,i);return{points:[s,c],cx:e,cy:r,radius:n,startAngle:a,endAngle:i}}function uSe(t,e,r){var n,a,i,s;if(t==="horizontal")n=e.x,i=n,a=r.top,s=r.top+r.height;else if(t==="vertical")a=e.y,s=a,n=r.left,i=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var c=e.cx,d=e.cy,h=e.innerRadius,p=e.outerRadius,m=e.angle,y=wn(c,d,h,m),v=wn(c,d,p,m);n=y.x,a=y.y,i=v.x,s=v.y}else return UQ(e);return[{x:n,y:a},{x:i,y:s}]}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function HU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HU(Object(r),!0).forEach(function(n){dSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dSe(t,e,r){return e=hSe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function hSe(t){var e=fSe(t,"string");return Lg(e)=="symbol"?e:e+""}function fSe(t,e){if(Lg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Lg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pSe(t){var e,r,n=t.element,a=t.tooltipEventType,i=t.isActive,s=t.activeCoordinate,c=t.activePayload,d=t.offset,h=t.activeTooltipIndex,p=t.tooltipAxisBandSize,m=t.layout,y=t.chartName,v=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!v||!i||!s||y!=="ScatterChart"&&a!=="axis")return null;var T,S=_N;if(y==="ScatterChart")T=s,S=hwe;else if(y==="BarChart")T=cSe(m,s,d,p),S=ej;else if(m==="radial"){var w=UQ(s),j=w.cx,R=w.cy,I=w.radius,L=w.startAngle,C=w.endAngle;T={cx:j,cy:R,startAngle:L,endAngle:C,innerRadius:I,outerRadius:I},S=LK}else T={points:uSe(m,s,d)},S=_N;var P=jv(jv(jv(jv({stroke:"#ccc",pointerEvents:"none"},d),T),zt(v,!1)),{},{payload:c,payloadIndex:h,className:fr("recharts-tooltip-cursor",v.className)});return k.isValidElement(v)?k.cloneElement(v,P):k.createElement(S,P)}var mSe=["item"],gSe=["children","className","width","height","style","compact","title","desc"];function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},yh.apply(this,arguments)}function GU(t,e){return xSe(t)||vSe(t,e)||VQ(t,e)||ySe()}function ySe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vSe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,i,s,c=[],d=!0,h=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(d=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(p){h=!0,a=p}finally{try{if(!d&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(h)throw a}}return c}}function xSe(t){if(Array.isArray(t))return t}function WU(t,e){if(t==null)return{};var r=bSe(t,e),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function bSe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function wSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SSe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,FQ(n.key),n)}}function _Se(t,e,r){return e&&SSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function TSe(t,e,r){return e=Vb(e),ASe(t,zQ()?Reflect.construct(e,r||[],Vb(t).constructor):e.apply(t,r))}function ASe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NSe(t)}function NSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zQ(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zQ=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vb(t)}function ESe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a8(t,e)}function a8(t,e){return a8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},a8(t,e)}function _f(t){return CSe(t)||kSe(t)||VQ(t)||jSe()}function jSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VQ(t,e){if(t){if(typeof t=="string")return i8(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i8(t,e)}}function kSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CSe(t){if(Array.isArray(t))return i8(t)}function i8(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?KU(Object(r),!0).forEach(function(n){Kt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):KU(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kt(t,e,r){return e=FQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function FQ(t){var e=OSe(t,"string");return Sf(e)=="symbol"?e:e+""}function OSe(t,e){if(Sf(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ISe={xAxis:["bottom","top"],yAxis:["left","right"]},RSe={width:"100%",height:"100%"},qQ={x:0,y:0};function kv(t){return t}var MSe=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},PSe=function(e,r,n,a){var i=r.find(function(p){return p&&p.index===n});if(i){if(e==="horizontal")return{x:i.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:i.coordinate};if(e==="centric"){var s=i.coordinate,c=a.radius;return qe(qe(qe({},a),wn(a.cx,a.cy,c,s)),{},{angle:s,radius:c})}var d=i.coordinate,h=a.angle;return qe(qe(qe({},a),wn(a.cx,a.cy,d,h)),{},{angle:h,radius:d})}return qQ},ww=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,s=(n??[]).reduce(function(c,d){var h=d.props.data;return h&&h.length?[].concat(_f(c),_f(h)):c},[]);return s.length>0?s:e&&e.length&&vt(a)&&vt(i)?e.slice(a,i+1):[]};function HQ(t){return t==="number"?[0,"auto"]:void 0}var s8=function(e,r,n,a){var i=e.graphicalItems,s=e.tooltipAxis,c=ww(r,e);return n<0||!i||!i.length||n>=c.length?null:i.reduce(function(d,h){var p,m=(p=h.props.data)!==null&&p!==void 0?p:r;m&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(m=m.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var v=m===void 0?c:m;y=Vx(v,s.dataKey,a)}else y=m&&m[n]||c[n];return y?[].concat(_f(d),[OK(h,y)]):d},[])},QU=function(e,r,n,a){var i=a||{x:e.chartX,y:e.chartY},s=MSe(i,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,h=e.tooltipTicks,p=Mve(s,c,h,d);if(p>=0&&h){var m=h[p]&&h[p].value,y=s8(e,r,p,m),v=PSe(n,c,p,i);return{activeTooltipIndex:p,activeLabel:m,activePayload:y,activeCoordinate:v}}return null},DSe=function(e,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=e.stackOffset,v=AK(p,i);return n.reduce(function(T,S){var w,j=S.type.defaultProps!==void 0?qe(qe({},S.type.defaultProps),S.props):S.props,R=j.type,I=j.dataKey,L=j.allowDataOverflow,C=j.allowDuplicatedCategory,P=j.scale,N=j.ticks,A=j.includeHidden,E=j[s];if(T[E])return T;var V=ww(e.data,{graphicalItems:a.filter(function(ne){var re,Ae=s in ne.props?ne.props[s]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[s];return Ae===E}),dataStartIndex:d,dataEndIndex:h}),D=V.length,U,$,Q;lSe(j.domain,L,R)&&(U=vN(j.domain,null,L),v&&(R==="number"||P!=="auto")&&(Q=Sm(V,I,"category")));var K=HQ(R);if(!U||U.length===0){var H,J=(H=j.domain)!==null&&H!==void 0?H:K;if(I){if(U=Sm(V,I,R),R==="category"&&v){var ie=E0e(U);C&&ie?($=U,U=jb(0,D)):C||(U=QB(J,U,S).reduce(function(ne,re){return ne.indexOf(re)>=0?ne:[].concat(_f(ne),[re])},[]))}else if(R==="category")C?U=U.filter(function(ne){return ne!==""&&!lr(ne)}):U=QB(J,U,S).reduce(function(ne,re){return ne.indexOf(re)>=0||re===""||lr(re)?ne:[].concat(_f(ne),[re])},[]);else if(R==="number"){var pe=$ve(V,a.filter(function(ne){var re,Ae,Se=s in ne.props?ne.props[s]:(re=ne.type.defaultProps)===null||re===void 0?void 0:re[s],ze="hide"in ne.props?ne.props.hide:(Ae=ne.type.defaultProps)===null||Ae===void 0?void 0:Ae.hide;return Se===E&&(A||!ze)}),I,i,p);pe&&(U=pe)}v&&(R==="number"||P!=="auto")&&(Q=Sm(V,I,"category"))}else v?U=jb(0,D):c&&c[E]&&c[E].hasStack&&R==="number"?U=y==="expand"?[0,1]:CK(c[E].stackGroups,d,h):U=TK(V,a.filter(function(ne){var re=s in ne.props?ne.props[s]:ne.type.defaultProps[s],Ae="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return re===E&&(A||!Ae)}),R,p,!0);if(R==="number")U=n8(m,U,E,i,N),J&&(U=vN(J,U,L));else if(R==="category"&&J){var me=J,X=U.every(function(ne){return me.indexOf(ne)>=0});X&&(U=me)}}return qe(qe({},T),{},Kt({},E,qe(qe({},j),{},{axisType:i,domain:U,categoricalDomain:Q,duplicateDomain:$,originalDomain:(w=j.domain)!==null&&w!==void 0?w:K,isCategorical:v,layout:p})))},{})},LSe=function(e,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,s=r.axisIdKey,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.layout,m=e.children,y=ww(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:h}),v=y.length,T=AK(p,i),S=-1;return n.reduce(function(w,j){var R=j.type.defaultProps!==void 0?qe(qe({},j.type.defaultProps),j.props):j.props,I=R[s],L=HQ("number");if(!w[I]){S++;var C;return T?C=jb(0,v):c&&c[I]&&c[I].hasStack?(C=CK(c[I].stackGroups,d,h),C=n8(m,C,I,i)):(C=vN(L,TK(y,n.filter(function(P){var N,A,E=s in P.props?P.props[s]:(N=P.type.defaultProps)===null||N===void 0?void 0:N[s],V="hide"in P.props?P.props.hide:(A=P.type.defaultProps)===null||A===void 0?void 0:A.hide;return E===I&&!V}),"number",p),a.defaultProps.allowDataOverflow),C=n8(m,C,I,i)),qe(qe({},w),{},Kt({},I,qe(qe({axisType:i},a.defaultProps),{},{hide:!0,orientation:Zs(ISe,"".concat(i,".").concat(S%2),null),domain:C,originalDomain:L,isCategorical:T,layout:p})))}return w},{})},BSe=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,s=r.graphicalItems,c=r.stackGroups,d=r.dataStartIndex,h=r.dataEndIndex,p=e.children,m="".concat(a,"Id"),y=ks(p,i),v={};return y&&y.length?v=DSe(e,{axes:y,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h}):s&&s.length&&(v=LSe(e,{Axis:i,graphicalItems:s,axisType:a,axisIdKey:m,stackGroups:c,dataStartIndex:d,dataEndIndex:h})),v},$Se=function(e){var r=su(e),n=Fl(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:NE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:pb(r,n)}},XU=function(e){var r=e.children,n=e.defaultShowTooltip,a=Ss(r,hf),i=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(s=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},USe=function(e){return!e||!e.length?!1:e.some(function(r){var n=Wl(r&&r.type);return n&&n.indexOf("Bar")>=0})},YU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},zSe=function(e,r){var n=e.props,a=e.graphicalItems,i=e.xAxisMap,s=i===void 0?{}:i,c=e.yAxisMap,d=c===void 0?{}:c,h=n.width,p=n.height,m=n.children,y=n.margin||{},v=Ss(m,hf),T=Ss(m,Nh),S=Object.keys(d).reduce(function(C,P){var N=d[P],A=N.orientation;return!N.mirror&&!N.hide?qe(qe({},C),{},Kt({},A,C[A]+N.width)):C},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(C,P){var N=s[P],A=N.orientation;return!N.mirror&&!N.hide?qe(qe({},C),{},Kt({},A,Zs(C,"".concat(A))+N.height)):C},{top:y.top||0,bottom:y.bottom||0}),j=qe(qe({},w),S),R=j.bottom;v&&(j.bottom+=v.props.height||hf.defaultProps.height),T&&r&&(j=Lve(j,a,n,r));var I=h-j.left-j.right,L=p-j.top-j.bottom;return qe(qe({brushBottom:R},j),{},{width:Math.max(I,0),height:Math.max(L,0)})},VSe=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},GQ=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,i=a===void 0?"axis":a,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,h=e.legendContent,p=e.formatAxisMap,m=e.defaultProps,y=function(j,R){var I=R.graphicalItems,L=R.stackGroups,C=R.offset,P=R.updateId,N=R.dataStartIndex,A=R.dataEndIndex,E=j.barSize,V=j.layout,D=j.barGap,U=j.barCategoryGap,$=j.maxBarSize,Q=YU(V),K=Q.numericAxisName,H=Q.cateAxisName,J=USe(I),ie=[];return I.forEach(function(pe,me){var X=ww(j.data,{graphicalItems:[pe],dataStartIndex:N,dataEndIndex:A}),ne=pe.type.defaultProps!==void 0?qe(qe({},pe.type.defaultProps),pe.props):pe.props,re=ne.dataKey,Ae=ne.maxBarSize,Se=ne["".concat(K,"Id")],ze=ne["".concat(H,"Id")],He={},st=d.reduce(function(ft,Ge){var ue=R["".concat(Ge.axisType,"Map")],Xe=ne["".concat(Ge.axisType,"Id")];ue&&ue[Xe]||Ge.axisType==="zAxis"||n0();var wt=ue[Xe];return qe(qe({},ft),{},Kt(Kt({},Ge.axisType,wt),"".concat(Ge.axisType,"Ticks"),Fl(wt)))},He),W=st[H],he=st["".concat(H,"Ticks")],te=L&&L[Se]&&L[Se].hasStack&&Kve(pe,L[Se].stackGroups),ae=Wl(pe.type).indexOf("Bar")>=0,Ue=pb(W,he),Ye=[],xt=J&&Pve({barSize:E,stackGroups:L,totalSize:VSe(st,H)});if(ae){var it,Pt,Ie=lr(Ae)?$:Ae,Be=(it=(Pt=pb(W,he,!0))!==null&&Pt!==void 0?Pt:Ie)!==null&&it!==void 0?it:0;Ye=Dve({barGap:D,barCategoryGap:U,bandSize:Be!==Ue?Be:Ue,sizeList:xt[ze],maxBarSize:Ie}),Be!==Ue&&(Ye=Ye.map(function(ft){return qe(qe({},ft),{},{position:qe(qe({},ft.position),{},{offset:ft.position.offset-Be/2})})}))}var rt=pe&&pe.type&&pe.type.getComposedData;rt&&ie.push({props:qe(qe({},rt(qe(qe({},st),{},{displayedData:X,props:j,dataKey:re,item:pe,bandSize:Ue,barPosition:Ye,offset:C,stackedData:te,layout:V,dataStartIndex:N,dataEndIndex:A}))),{},Kt(Kt(Kt({key:pe.key||"item-".concat(me)},K,st[K]),H,st[H]),"animationId",P)),childIndex:U0e(pe,j.children),item:pe})}),ie},v=function(j,R){var I=j.props,L=j.dataStartIndex,C=j.dataEndIndex,P=j.updateId;if(!cP({props:I}))return null;var N=I.children,A=I.layout,E=I.stackOffset,V=I.data,D=I.reverseStackOrder,U=YU(A),$=U.numericAxisName,Q=U.cateAxisName,K=ks(N,n),H=Gve(V,K,"".concat($,"Id"),"".concat(Q,"Id"),E,D),J=d.reduce(function(ne,re){var Ae="".concat(re.axisType,"Map");return qe(qe({},ne),{},Kt({},Ae,BSe(I,qe(qe({},re),{},{graphicalItems:K,stackGroups:re.axisType===$&&H,dataStartIndex:L,dataEndIndex:C}))))},{}),ie=zSe(qe(qe({},J),{},{props:I,graphicalItems:K}),R==null?void 0:R.legendBBox);Object.keys(J).forEach(function(ne){J[ne]=p(I,J[ne],ie,ne.replace("Map",""),r)});var pe=J["".concat(Q,"Map")],me=$Se(pe),X=y(I,qe(qe({},J),{},{dataStartIndex:L,dataEndIndex:C,updateId:P,graphicalItems:K,stackGroups:H,offset:ie}));return qe(qe({formattedGraphicalItems:X,graphicalItems:K,offset:ie,stackGroups:H},me),J)},T=(function(w){function j(R){var I,L,C;return wSe(this,j),C=TSe(this,j,[R]),Kt(C,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kt(C,"accessibilityManager",new oSe),Kt(C,"handleLegendBBoxUpdate",function(P){if(P){var N=C.state,A=N.dataStartIndex,E=N.dataEndIndex,V=N.updateId;C.setState(qe({legendBBox:P},v({props:C.props,dataStartIndex:A,dataEndIndex:E,updateId:V},qe(qe({},C.state),{},{legendBBox:P}))))}}),Kt(C,"handleReceiveSyncEvent",function(P,N,A){if(C.props.syncId===P){if(A===C.eventEmitterSymbol&&typeof C.props.syncMethod!="function")return;C.applySyncEvent(N)}}),Kt(C,"handleBrushChange",function(P){var N=P.startIndex,A=P.endIndex;if(N!==C.state.dataStartIndex||A!==C.state.dataEndIndex){var E=C.state.updateId;C.setState(function(){return qe({dataStartIndex:N,dataEndIndex:A},v({props:C.props,dataStartIndex:N,dataEndIndex:A,updateId:E},C.state))}),C.triggerSyncEvent({dataStartIndex:N,dataEndIndex:A})}}),Kt(C,"handleMouseEnter",function(P){var N=C.getMouseInfo(P);if(N){var A=qe(qe({},N),{},{isTooltipActive:!0});C.setState(A),C.triggerSyncEvent(A);var E=C.props.onMouseEnter;rr(E)&&E(A,P)}}),Kt(C,"triggeredAfterMouseMove",function(P){var N=C.getMouseInfo(P),A=N?qe(qe({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};C.setState(A),C.triggerSyncEvent(A);var E=C.props.onMouseMove;rr(E)&&E(A,P)}),Kt(C,"handleItemMouseEnter",function(P){C.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Kt(C,"handleItemMouseLeave",function(){C.setState(function(){return{isTooltipActive:!1}})}),Kt(C,"handleMouseMove",function(P){P.persist(),C.throttleTriggeredAfterMouseMove(P)}),Kt(C,"handleMouseLeave",function(P){C.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};C.setState(N),C.triggerSyncEvent(N);var A=C.props.onMouseLeave;rr(A)&&A(N,P)}),Kt(C,"handleOuterEvent",function(P){var N=$0e(P),A=Zs(C.props,"".concat(N));if(N&&rr(A)){var E,V;/.*touch.*/i.test(N)?V=C.getMouseInfo(P.changedTouches[0]):V=C.getMouseInfo(P),A((E=V)!==null&&E!==void 0?E:{},P)}}),Kt(C,"handleClick",function(P){var N=C.getMouseInfo(P);if(N){var A=qe(qe({},N),{},{isTooltipActive:!0});C.setState(A),C.triggerSyncEvent(A);var E=C.props.onClick;rr(E)&&E(A,P)}}),Kt(C,"handleMouseDown",function(P){var N=C.props.onMouseDown;if(rr(N)){var A=C.getMouseInfo(P);N(A,P)}}),Kt(C,"handleMouseUp",function(P){var N=C.props.onMouseUp;if(rr(N)){var A=C.getMouseInfo(P);N(A,P)}}),Kt(C,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Kt(C,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseDown(P.changedTouches[0])}),Kt(C,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&C.handleMouseUp(P.changedTouches[0])}),Kt(C,"handleDoubleClick",function(P){var N=C.props.onDoubleClick;if(rr(N)){var A=C.getMouseInfo(P);N(A,P)}}),Kt(C,"handleContextMenu",function(P){var N=C.props.onContextMenu;if(rr(N)){var A=C.getMouseInfo(P);N(A,P)}}),Kt(C,"triggerSyncEvent",function(P){C.props.syncId!==void 0&&ST.emit(_T,C.props.syncId,P,C.eventEmitterSymbol)}),Kt(C,"applySyncEvent",function(P){var N=C.props,A=N.layout,E=N.syncMethod,V=C.state.updateId,D=P.dataStartIndex,U=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)C.setState(qe({dataStartIndex:D,dataEndIndex:U},v({props:C.props,dataStartIndex:D,dataEndIndex:U,updateId:V},C.state)));else if(P.activeTooltipIndex!==void 0){var $=P.chartX,Q=P.chartY,K=P.activeTooltipIndex,H=C.state,J=H.offset,ie=H.tooltipTicks;if(!J)return;if(typeof E=="function")K=E(ie,P);else if(E==="value"){K=-1;for(var pe=0;pe<ie.length;pe++)if(ie[pe].value===P.activeLabel){K=pe;break}}var me=qe(qe({},J),{},{x:J.left,y:J.top}),X=Math.min($,me.x+me.width),ne=Math.min(Q,me.y+me.height),re=ie[K]&&ie[K].value,Ae=s8(C.state,C.props.data,K),Se=ie[K]?{x:A==="horizontal"?ie[K].coordinate:X,y:A==="horizontal"?ne:ie[K].coordinate}:qQ;C.setState(qe(qe({},P),{},{activeLabel:re,activeCoordinate:Se,activePayload:Ae,activeTooltipIndex:K}))}else C.setState(P)}),Kt(C,"renderCursor",function(P){var N,A=C.state,E=A.isTooltipActive,V=A.activeCoordinate,D=A.activePayload,U=A.offset,$=A.activeTooltipIndex,Q=A.tooltipAxisBandSize,K=C.getTooltipEventType(),H=(N=P.props.active)!==null&&N!==void 0?N:E,J=C.props.layout,ie=P.key||"_recharts-cursor";return se.createElement(pSe,{key:ie,activeCoordinate:V,activePayload:D,activeTooltipIndex:$,chartName:r,element:P,isActive:H,layout:J,offset:U,tooltipAxisBandSize:Q,tooltipEventType:K})}),Kt(C,"renderPolarAxis",function(P,N,A){var E=Zs(P,"type.axisType"),V=Zs(C.state,"".concat(E,"Map")),D=P.type.defaultProps,U=D!==void 0?qe(qe({},D),P.props):P.props,$=V&&V[U["".concat(E,"Id")]];return k.cloneElement(P,qe(qe({},$),{},{className:fr(E,$.className),key:P.key||"".concat(N,"-").concat(A),ticks:Fl($,!0)}))}),Kt(C,"renderPolarGrid",function(P){var N=P.props,A=N.radialLines,E=N.polarAngles,V=N.polarRadius,D=C.state,U=D.radiusAxisMap,$=D.angleAxisMap,Q=su(U),K=su($),H=K.cx,J=K.cy,ie=K.innerRadius,pe=K.outerRadius;return k.cloneElement(P,{polarAngles:Array.isArray(E)?E:Fl(K,!0).map(function(me){return me.coordinate}),polarRadius:Array.isArray(V)?V:Fl(Q,!0).map(function(me){return me.coordinate}),cx:H,cy:J,innerRadius:ie,outerRadius:pe,key:P.key||"polar-grid",radialLines:A})}),Kt(C,"renderLegend",function(){var P=C.state.formattedGraphicalItems,N=C.props,A=N.children,E=N.width,V=N.height,D=C.props.margin||{},U=E-(D.left||0)-(D.right||0),$=SK({children:A,formattedGraphicalItems:P,legendWidth:U,legendContent:h});if(!$)return null;var Q=$.item,K=WU($,mSe);return k.cloneElement(Q,qe(qe({},K),{},{chartWidth:E,chartHeight:V,margin:D,onBBoxUpdate:C.handleLegendBBoxUpdate}))}),Kt(C,"renderTooltip",function(){var P,N=C.props,A=N.children,E=N.accessibilityLayer,V=Ss(A,Do);if(!V)return null;var D=C.state,U=D.isTooltipActive,$=D.activeCoordinate,Q=D.activePayload,K=D.activeLabel,H=D.offset,J=(P=V.props.active)!==null&&P!==void 0?P:U;return k.cloneElement(V,{viewBox:qe(qe({},H),{},{x:H.left,y:H.top}),active:J,label:K,payload:J?Q:[],coordinate:$,accessibilityLayer:E})}),Kt(C,"renderBrush",function(P){var N=C.props,A=N.margin,E=N.data,V=C.state,D=V.offset,U=V.dataStartIndex,$=V.dataEndIndex,Q=V.updateId;return k.cloneElement(P,{key:P.key||"_recharts-brush",onChange:Tv(C.handleBrushChange,P.props.onChange),data:E,x:vt(P.props.x)?P.props.x:D.left,y:vt(P.props.y)?P.props.y:D.top+D.height+D.brushBottom-(A.bottom||0),width:vt(P.props.width)?P.props.width:D.width,startIndex:U,endIndex:$,updateId:"brush-".concat(Q)})}),Kt(C,"renderReferenceElement",function(P,N,A){if(!P)return null;var E=C,V=E.clipPathId,D=C.state,U=D.xAxisMap,$=D.yAxisMap,Q=D.offset,K=P.type.defaultProps||{},H=P.props,J=H.xAxisId,ie=J===void 0?K.xAxisId:J,pe=H.yAxisId,me=pe===void 0?K.yAxisId:pe;return k.cloneElement(P,{key:P.key||"".concat(N,"-").concat(A),xAxis:U[ie],yAxis:$[me],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:V})}),Kt(C,"renderActivePoints",function(P){var N=P.item,A=P.activePoint,E=P.basePoint,V=P.childIndex,D=P.isRange,U=[],$=N.props.key,Q=N.item.type.defaultProps!==void 0?qe(qe({},N.item.type.defaultProps),N.item.props):N.item.props,K=Q.activeDot,H=Q.dataKey,J=qe(qe({index:V,dataKey:H,cx:A.x,cy:A.y,r:4,fill:JE(N.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},zt(K,!1)),Fx(K));return U.push(j.renderActiveDot(K,J,"".concat($,"-activePoint-").concat(V))),E?U.push(j.renderActiveDot(K,qe(qe({},J),{},{cx:E.x,cy:E.y}),"".concat($,"-basePoint-").concat(V))):D&&U.push(null),U}),Kt(C,"renderGraphicChild",function(P,N,A){var E=C.filterFormatItem(P,N,A);if(!E)return null;var V=C.getTooltipEventType(),D=C.state,U=D.isTooltipActive,$=D.tooltipAxis,Q=D.activeTooltipIndex,K=D.activeLabel,H=C.props.children,J=Ss(H,Do),ie=E.props,pe=ie.points,me=ie.isRange,X=ie.baseLine,ne=E.item.type.defaultProps!==void 0?qe(qe({},E.item.type.defaultProps),E.item.props):E.item.props,re=ne.activeDot,Ae=ne.hide,Se=ne.activeBar,ze=ne.activeShape,He=!!(!Ae&&U&&J&&(re||Se||ze)),st={};V!=="axis"&&J&&J.props.trigger==="click"?st={onClick:Tv(C.handleItemMouseEnter,P.props.onClick)}:V!=="axis"&&(st={onMouseLeave:Tv(C.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:Tv(C.handleItemMouseEnter,P.props.onMouseEnter)});var W=k.cloneElement(P,qe(qe({},E.props),st));function he(Ge){return typeof $.dataKey=="function"?$.dataKey(Ge.payload):null}if(He)if(Q>=0){var te,ae;if($.dataKey&&!$.allowDuplicatedCategory){var Ue=typeof $.dataKey=="function"?he:"payload.".concat($.dataKey.toString());te=Vx(pe,Ue,K),ae=me&&X&&Vx(X,Ue,K)}else te=pe==null?void 0:pe[Q],ae=me&&X&&X[Q];if(ze||Se){var Ye=P.props.activeIndex!==void 0?P.props.activeIndex:Q;return[k.cloneElement(P,qe(qe(qe({},E.props),st),{},{activeIndex:Ye})),null,null]}if(!lr(te))return[W].concat(_f(C.renderActivePoints({item:E,activePoint:te,basePoint:ae,childIndex:Q,isRange:me})))}else{var xt,it=(xt=C.getItemByXY(C.state.activeCoordinate))!==null&&xt!==void 0?xt:{graphicalItem:W},Pt=it.graphicalItem,Ie=Pt.item,Be=Ie===void 0?P:Ie,rt=Pt.childIndex,ft=qe(qe(qe({},E.props),st),{},{activeIndex:rt});return[k.cloneElement(Be,ft),null,null]}return me?[W,null,null]:[W,null]}),Kt(C,"renderCustomized",function(P,N,A){return k.cloneElement(P,qe(qe({key:"recharts-customized-".concat(A)},C.props),C.state))}),Kt(C,"renderMap",{CartesianGrid:{handler:kv,once:!0},ReferenceArea:{handler:C.renderReferenceElement},ReferenceLine:{handler:kv},ReferenceDot:{handler:C.renderReferenceElement},XAxis:{handler:kv},YAxis:{handler:kv},Brush:{handler:C.renderBrush,once:!0},Bar:{handler:C.renderGraphicChild},Line:{handler:C.renderGraphicChild},Area:{handler:C.renderGraphicChild},Radar:{handler:C.renderGraphicChild},RadialBar:{handler:C.renderGraphicChild},Scatter:{handler:C.renderGraphicChild},Pie:{handler:C.renderGraphicChild},Funnel:{handler:C.renderGraphicChild},Tooltip:{handler:C.renderCursor,once:!0},PolarGrid:{handler:C.renderPolarGrid,once:!0},PolarAngleAxis:{handler:C.renderPolarAxis},PolarRadiusAxis:{handler:C.renderPolarAxis},Customized:{handler:C.renderCustomized}}),C.clipPathId="".concat((I=R.id)!==null&&I!==void 0?I:f1("recharts"),"-clip"),C.throttleTriggeredAfterMouseMove=wW(C.triggeredAfterMouseMove,(L=R.throttleDelay)!==null&&L!==void 0?L:1e3/60),C.state={},C}return ESe(j,w),_Se(j,[{key:"componentDidMount",value:function(){var I,L;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(I=this.props.margin.left)!==null&&I!==void 0?I:0,top:(L=this.props.margin.top)!==null&&L!==void 0?L:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var I=this.props,L=I.children,C=I.data,P=I.height,N=I.layout,A=Ss(L,Do);if(A){var E=A.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var V=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,D=s8(this.state,C,E,V),U=this.state.tooltipTicks[E].coordinate,$=(this.state.offset.top+P)/2,Q=N==="horizontal",K=Q?{x:U,y:$}:{y:U,x:$},H=this.state.formattedGraphicalItems.find(function(ie){var pe=ie.item;return pe.type.name==="Scatter"});H&&(K=qe(qe({},K),H.props.points[E].tooltipPosition),D=H.props.points[E].tooltipPayload);var J={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:V,activePayload:D,activeCoordinate:K};this.setState(J),this.renderCursor(A),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(I,L){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==L.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==I.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==I.margin){var C,P;this.accessibilityManager.setDetails({offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(I){UA([Ss(I.children,Do)],[Ss(this.props.children,Do)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var I=Ss(this.props.children,Do);if(I&&typeof I.props.shared=="boolean"){var L=I.props.shared?"axis":"item";return c.indexOf(L)>=0?L:i}return i}},{key:"getMouseInfo",value:function(I){if(!this.container)return null;var L=this.container,C=L.getBoundingClientRect(),P=Nme(C),N={chartX:Math.round(I.pageX-P.left),chartY:Math.round(I.pageY-P.top)},A=C.width/L.offsetWidth||1,E=this.inRange(N.chartX,N.chartY,A);if(!E)return null;var V=this.state,D=V.xAxisMap,U=V.yAxisMap,$=this.getTooltipEventType(),Q=QU(this.state,this.props.data,this.props.layout,E);if($!=="axis"&&D&&U){var K=su(D).scale,H=su(U).scale,J=K&&K.invert?K.invert(N.chartX):null,ie=H&&H.invert?H.invert(N.chartY):null;return qe(qe({},N),{},{xValue:J,yValue:ie},Q)}return Q?qe(qe({},N),Q):null}},{key:"inRange",value:function(I,L){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,N=I/C,A=L/C;if(P==="horizontal"||P==="vertical"){var E=this.state.offset,V=N>=E.left&&N<=E.left+E.width&&A>=E.top&&A<=E.top+E.height;return V?{x:N,y:A}:null}var D=this.state,U=D.angleAxisMap,$=D.radiusAxisMap;if(U&&$){var Q=su(U);return ZB({x:N,y:A},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var I=this.props.children,L=this.getTooltipEventType(),C=Ss(I,Do),P={};C&&L==="axis"&&(C.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Fx(this.props,this.handleOuterEvent);return qe(qe({},N),P)}},{key:"addListener",value:function(){ST.on(_T,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ST.removeListener(_T,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(I,L,C){for(var P=this.state.formattedGraphicalItems,N=0,A=P.length;N<A;N++){var E=P[N];if(E.item===I||E.props.key===I.key||L===Wl(E.item.type)&&C===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var I=this.clipPathId,L=this.state.offset,C=L.left,P=L.top,N=L.height,A=L.width;return se.createElement("defs",null,se.createElement("clipPath",{id:I},se.createElement("rect",{x:C,y:P,height:N,width:A})))}},{key:"getXScales",value:function(){var I=this.state.xAxisMap;return I?Object.entries(I).reduce(function(L,C){var P=GU(C,2),N=P[0],A=P[1];return qe(qe({},L),{},Kt({},N,A.scale))},{}):null}},{key:"getYScales",value:function(){var I=this.state.yAxisMap;return I?Object.entries(I).reduce(function(L,C){var P=GU(C,2),N=P[0],A=P[1];return qe(qe({},L),{},Kt({},N,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(I){var L;return(L=this.state.xAxisMap)===null||L===void 0||(L=L[I])===null||L===void 0?void 0:L.scale}},{key:"getYScaleByAxisId",value:function(I){var L;return(L=this.state.yAxisMap)===null||L===void 0||(L=L[I])===null||L===void 0?void 0:L.scale}},{key:"getItemByXY",value:function(I){var L=this.state,C=L.formattedGraphicalItems,P=L.activeItem;if(C&&C.length)for(var N=0,A=C.length;N<A;N++){var E=C[N],V=E.props,D=E.item,U=D.type.defaultProps!==void 0?qe(qe({},D.type.defaultProps),D.props):D.props,$=Wl(D.type);if($==="Bar"){var Q=(V.data||[]).find(function(ie){return W2e(I,ie)});if(Q)return{graphicalItem:E,payload:Q}}else if($==="RadialBar"){var K=(V.data||[]).find(function(ie){return ZB(I,ie)});if(K)return{graphicalItem:E,payload:K}}else if(dw(E,P)||hw(E,P)||Og(E,P)){var H=N4e({graphicalItem:E,activeTooltipItem:P,itemData:U.data}),J=U.activeIndex===void 0?H:U.activeIndex;return{graphicalItem:qe(qe({},E),{},{childIndex:J}),payload:Og(E,P)?U.data[H]:E.props.data[H]}}}return null}},{key:"render",value:function(){var I=this;if(!cP(this))return null;var L=this.props,C=L.children,P=L.className,N=L.width,A=L.height,E=L.style,V=L.compact,D=L.title,U=L.desc,$=WU(L,gSe),Q=zt($,!1);if(V)return se.createElement(jU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement(VA,yh({},Q,{width:N,height:A,title:D,desc:U}),this.renderClipPath(),dP(C,this.renderMap)));if(this.props.accessibilityLayer){var K,H;Q.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,Q.role=(H=this.props.role)!==null&&H!==void 0?H:"application",Q.onKeyDown=function(ie){I.accessibilityManager.keyboardEvent(ie)},Q.onFocus=function(){I.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return se.createElement(jU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},se.createElement("div",yh({className:fr("recharts-wrapper",P),style:qe({position:"relative",cursor:"default",width:N,height:A},E)},J,{ref:function(pe){I.container=pe}}),se.createElement(VA,yh({},Q,{width:N,height:A,title:D,desc:U,style:RSe}),this.renderClipPath(),dP(C,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(k.Component);Kt(T,"displayName",r),Kt(T,"defaultProps",qe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Kt(T,"getDerivedStateFromProps",function(w,j){var R=w.dataKey,I=w.data,L=w.children,C=w.width,P=w.height,N=w.layout,A=w.stackOffset,E=w.margin,V=j.dataStartIndex,D=j.dataEndIndex;if(j.updateId===void 0){var U=XU(w);return qe(qe(qe({},U),{},{updateId:0},v(qe(qe({props:w},U),{},{updateId:0}),j)),{},{prevDataKey:R,prevData:I,prevWidth:C,prevHeight:P,prevLayout:N,prevStackOffset:A,prevMargin:E,prevChildren:L})}if(R!==j.prevDataKey||I!==j.prevData||C!==j.prevWidth||P!==j.prevHeight||N!==j.prevLayout||A!==j.prevStackOffset||!Ah(E,j.prevMargin)){var $=XU(w),Q={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},K=qe(qe({},QU(j,I,N)),{},{updateId:j.updateId+1}),H=qe(qe(qe({},$),Q),K);return qe(qe(qe({},H),v(qe({props:w},H),j)),{},{prevDataKey:R,prevData:I,prevWidth:C,prevHeight:P,prevLayout:N,prevStackOffset:A,prevMargin:E,prevChildren:L})}if(!UA(L,j.prevChildren)){var J,ie,pe,me,X=Ss(L,hf),ne=X&&(J=(ie=X.props)===null||ie===void 0?void 0:ie.startIndex)!==null&&J!==void 0?J:V,re=X&&(pe=(me=X.props)===null||me===void 0?void 0:me.endIndex)!==null&&pe!==void 0?pe:D,Ae=ne!==V||re!==D,Se=!lr(I),ze=Se&&!Ae?j.updateId:j.updateId+1;return qe(qe({updateId:ze},v(qe(qe({props:w},j),{},{updateId:ze,dataStartIndex:ne,dataEndIndex:re}),j)),{},{prevChildren:L,dataStartIndex:ne,dataEndIndex:re})}return null}),Kt(T,"renderActiveDot",function(w,j,R){var I;return k.isValidElement(w)?I=k.cloneElement(w,j):rr(w)?I=w(j):I=se.createElement(lw,j),se.createElement(zr,{className:"recharts-active-dot",key:R},I)});var S=k.forwardRef(function(j,R){return se.createElement(T,yh({},j,{ref:R}))});return S.displayName=T.displayName,S},FSe=GQ({chartName:"RadarChart",GraphicalChild:_1,axisComponents:[{axisType:"angleAxis",AxisComp:S1},{axisType:"radiusAxis",AxisComp:w1}],formatAxisMap:ixe,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),qSe=GQ({chartName:"ScatterChart",GraphicalChild:A1,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:xw},{axisType:"yAxis",AxisComp:bw},{axisType:"zAxis",AxisComp:vw}],formatAxisMap:D5e});const Sw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zf(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function uj(t){return"nodeType"in t}function Ui(t){var e,r;return t?zf(t)?t:uj(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function dj(t){const{Document:e}=Ui(t);return t instanceof e}function N1(t){return zf(t)?!1:t instanceof Ui(t).HTMLElement}function WQ(t){return t instanceof Ui(t).SVGElement}function Vf(t){return t?zf(t)?t.document:uj(t)?dj(t)?t:N1(t)||WQ(t)?t.ownerDocument:document:document:document}const cc=Sw?k.useLayoutEffect:k.useEffect;function _w(t){const e=k.useRef(t);return cc(()=>{e.current=t}),k.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e.current==null?void 0:e.current(...n)},[])}function HSe(){const t=k.useRef(null),e=k.useCallback((n,a)=>{t.current=setInterval(n,a)},[]),r=k.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Bg(t,e){e===void 0&&(e=[t]);const r=k.useRef(t);return cc(()=>{r.current!==t&&(r.current=t)},e),r}function E1(t,e){const r=k.useRef();return k.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function Fb(t){const e=_w(t),r=k.useRef(null),n=k.useCallback(a=>{a!==r.current&&(e==null||e(a,r.current)),r.current=a},[]);return[r,n]}function qb(t){const e=k.useRef();return k.useEffect(()=>{e.current=t},[t]),e.current}let AT={};function Tw(t,e){return k.useMemo(()=>{if(e)return e;const r=AT[t]==null?0:AT[t]+1;return AT[t]=r,t+"-"+r},[t,e])}function KQ(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,s)=>{const c=Object.entries(s);for(const[d,h]of c){const p=i[d];p!=null&&(i[d]=p+t*h)}return i},{...e})}}const kh=KQ(1),Hb=KQ(-1);function GSe(t){return"clientX"in t&&"clientY"in t}function hj(t){if(!t)return!1;const{KeyboardEvent:e}=Ui(t.target);return e&&t instanceof e}function WSe(t){if(!t)return!1;const{TouchEvent:e}=Ui(t.target);return e&&t instanceof e}function $g(t){if(WSe(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return GSe(t)?{x:t.clientX,y:t.clientY}:null}const Ug=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Ug.Translate.toString(t),Ug.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),ZU="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function KSe(t){return t.matches(ZU)?t:t.querySelector(ZU)}const QSe={display:"none"};function XSe(t){let{id:e,value:r}=t;return se.createElement("div",{id:e,style:QSe},r)}function YSe(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return se.createElement("div",{id:e,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function ZSe(){const[t,e]=k.useState("");return{announce:k.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const QQ=k.createContext(null);function JSe(t){const e=k.useContext(QQ);k.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function e_e(){const[t]=k.useState(()=>new Set),e=k.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[k.useCallback(n=>{let{type:a,event:i}=n;t.forEach(s=>{var c;return(c=s[a])==null?void 0:c.call(s,i)})},[t]),e]}const t_e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},r_e={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function n_e(t){let{announcements:e=r_e,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=t_e}=t;const{announce:i,announcement:s}=ZSe(),c=Tw("DndLiveRegion"),[d,h]=k.useState(!1);if(k.useEffect(()=>{h(!0)},[]),JSe(k.useMemo(()=>({onDragStart(m){let{active:y}=m;i(e.onDragStart({active:y}))},onDragMove(m){let{active:y,over:v}=m;e.onDragMove&&i(e.onDragMove({active:y,over:v}))},onDragOver(m){let{active:y,over:v}=m;i(e.onDragOver({active:y,over:v}))},onDragEnd(m){let{active:y,over:v}=m;i(e.onDragEnd({active:y,over:v}))},onDragCancel(m){let{active:y,over:v}=m;i(e.onDragCancel({active:y,over:v}))}}),[i,e])),!d)return null;const p=se.createElement(se.Fragment,null,se.createElement(XSe,{id:n,value:a.draggable}),se.createElement(YSe,{id:c,announcement:s}));return r?cu.createPortal(p,r):p}var Pa;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Pa||(Pa={}));function Gb(){}function JU(t,e){return k.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function a_e(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return k.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Ao=Object.freeze({x:0,y:0});function i_e(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function s_e(t,e){const r=$g(t);if(!r)return"0 0";const n={x:(r.x-e.left)/e.width*100,y:(r.y-e.top)/e.height*100};return n.x+"% "+n.y+"%"}function o_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function l_e(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function c_e(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function ez(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const u_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=ez(e,e.left,e.top),i=[];for(const s of n){const{id:c}=s,d=r.get(c);if(d){const h=i_e(ez(d),a);i.push({id:c,data:{droppableContainer:s,value:h}})}}return i.sort(o_e)};function d_e(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),s=a-n,c=i-r;if(n<a&&r<i){const d=e.width*e.height,h=t.width*t.height,p=s*c,m=p/(d+h-p);return Number(m.toFixed(4))}return 0}const h_e=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const a=[];for(const i of n){const{id:s}=i,c=r.get(s);if(c){const d=d_e(c,e);d>0&&a.push({id:s,data:{droppableContainer:i,value:d}})}}return a.sort(l_e)};function f_e(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function XQ(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Ao}function p_e(t){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((s,c)=>({...s,top:s.top+t*c.y,bottom:s.bottom+t*c.y,left:s.left+t*c.x,right:s.right+t*c.x}),{...r})}}const m_e=p_e(1);function YQ(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function g_e(t,e,r){const n=YQ(e);if(!n)return t;const{scaleX:a,scaleY:i,x:s,y:c}=n,d=t.left-s-(1-a)*parseFloat(r),h=t.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),p=a?t.width/a:t.width,m=i?t.height/i:t.height;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d}}const y_e={ignoreTransform:!1};function j1(t,e){e===void 0&&(e=y_e);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:h,transformOrigin:p}=Ui(t).getComputedStyle(t);h&&(r=g_e(r,h,p))}const{top:n,left:a,width:i,height:s,bottom:c,right:d}=r;return{top:n,left:a,width:i,height:s,bottom:c,right:d}}function tz(t){return j1(t,{ignoreTransform:!0})}function v_e(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function x_e(t,e){return e===void 0&&(e=Ui(t).getComputedStyle(t)),e.position==="fixed"}function b_e(t,e){e===void 0&&(e=Ui(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=e[a];return typeof i=="string"?r.test(i):!1})}function fj(t,e){const r=[];function n(a){if(e!=null&&r.length>=e||!a)return r;if(dj(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!N1(a)||WQ(a)||r.includes(a))return r;const i=Ui(t).getComputedStyle(a);return a!==t&&b_e(a,i)&&r.push(a),x_e(a,i)?r:n(a.parentNode)}return t?n(t):r}function ZQ(t){const[e]=fj(t,1);return e??null}function NT(t){return!Sw||!t?null:zf(t)?t:uj(t)?dj(t)||t===Vf(t).scrollingElement?window:N1(t)?t:null:null}function JQ(t){return zf(t)?t.scrollX:t.scrollLeft}function eX(t){return zf(t)?t.scrollY:t.scrollTop}function o8(t){return{x:JQ(t),y:eX(t)}}var Ya;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ya||(Ya={}));function tX(t){return!Sw||!t?!1:t===document.scrollingElement}function rX(t){const e={x:0,y:0},r=tX(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},a=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,s=t.scrollTop>=n.y,c=t.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:s,isRight:c,maxScroll:n,minScroll:e}}const w_e={x:.2,y:.2};function S_e(t,e,r,n,a){let{top:i,left:s,right:c,bottom:d}=r;n===void 0&&(n=10),a===void 0&&(a=w_e);const{isTop:h,isBottom:p,isLeft:m,isRight:y}=rX(t),v={x:0,y:0},T={x:0,y:0},S={height:e.height*a.y,width:e.width*a.x};return!h&&i<=e.top+S.height?(v.y=Ya.Backward,T.y=n*Math.abs((e.top+S.height-i)/S.height)):!p&&d>=e.bottom-S.height&&(v.y=Ya.Forward,T.y=n*Math.abs((e.bottom-S.height-d)/S.height)),!y&&c>=e.right-S.width?(v.x=Ya.Forward,T.x=n*Math.abs((e.right-S.width-c)/S.width)):!m&&s<=e.left+S.width&&(v.x=Ya.Backward,T.x=n*Math.abs((e.left+S.width-s)/S.width)),{direction:v,speed:T}}function __e(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:e,left:r,right:n,bottom:a}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:a,width:t.clientWidth,height:t.clientHeight}}function nX(t){return t.reduce((e,r)=>kh(e,o8(r)),Ao)}function T_e(t){return t.reduce((e,r)=>e+JQ(r),0)}function A_e(t){return t.reduce((e,r)=>e+eX(r),0)}function aX(t,e){if(e===void 0&&(e=j1),!t)return;const{top:r,left:n,bottom:a,right:i}=e(t);ZQ(t)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const N_e=[["x",["left","right"],T_e],["y",["top","bottom"],A_e]];class pj{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=fj(r),a=nX(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,c]of N_e)for(const d of s)Object.defineProperty(this,d,{get:()=>{const h=c(n),p=a[i]-h;return this.rect[d]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var a;(a=this.target)==null||a.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function E_e(t){const{EventTarget:e}=Ui(t);return t instanceof e?t:Vf(t)}function ET(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var Ks;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ks||(Ks={}));function rz(t){t.preventDefault()}function j_e(t){t.stopPropagation()}var jn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(jn||(jn={}));const iX={start:[jn.Space,jn.Enter],cancel:[jn.Esc],end:[jn.Space,jn.Enter,jn.Tab]},k_e=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case jn.Right:return{...r,x:r.x+25};case jn.Left:return{...r,x:r.x-25};case jn.Down:return{...r,y:r.y+25};case jn.Up:return{...r,y:r.y-25}}};class sX{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new jm(Vf(r)),this.windowListeners=new jm(Ui(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ks.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&aX(n),r(Ao)}handleKeyDown(e){if(hj(e)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=iX,coordinateGetter:s=k_e,scrollBehavior:c="smooth"}=a,{code:d}=e;if(i.end.includes(d)){this.handleEnd(e);return}if(i.cancel.includes(d)){this.handleCancel(e);return}const{collisionRect:h}=n.current,p=h?{x:h.left,y:h.top}:Ao;this.referenceCoordinates||(this.referenceCoordinates=p);const m=s(e,{active:r,context:n.current,currentCoordinates:p});if(m){const y=Hb(m,p),v={x:0,y:0},{scrollableAncestors:T}=n.current;for(const S of T){const w=e.code,{isTop:j,isRight:R,isLeft:I,isBottom:L,maxScroll:C,minScroll:P}=rX(S),N=__e(S),A={x:Math.min(w===jn.Right?N.right-N.width/2:N.right,Math.max(w===jn.Right?N.left:N.left+N.width/2,m.x)),y:Math.min(w===jn.Down?N.bottom-N.height/2:N.bottom,Math.max(w===jn.Down?N.top:N.top+N.height/2,m.y))},E=w===jn.Right&&!R||w===jn.Left&&!I,V=w===jn.Down&&!L||w===jn.Up&&!j;if(E&&A.x!==m.x){const D=S.scrollLeft+y.x,U=w===jn.Right&&D<=C.x||w===jn.Left&&D>=P.x;if(U&&!y.y){S.scrollTo({left:D,behavior:c});return}U?v.x=S.scrollLeft-D:v.x=w===jn.Right?S.scrollLeft-C.x:S.scrollLeft-P.x,v.x&&S.scrollBy({left:-v.x,behavior:c});break}else if(V&&A.y!==m.y){const D=S.scrollTop+y.y,U=w===jn.Down&&D<=C.y||w===jn.Up&&D>=P.y;if(U&&!y.x){S.scrollTo({top:D,behavior:c});return}U?v.y=S.scrollTop-D:v.y=w===jn.Down?S.scrollTop-C.y:S.scrollTop-P.y,v.y&&S.scrollBy({top:-v.y,behavior:c});break}}this.handleMove(e,kh(Hb(m,this.referenceCoordinates),v))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sX.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=iX,onActivation:a}=e,{active:i}=r;const{code:s}=t.nativeEvent;if(n.start.includes(s)){const c=i.activatorNode.current;return c&&t.target!==c?!1:(t.preventDefault(),a==null||a({event:t.nativeEvent}),!0)}return!1}}];function nz(t){return!!(t&&"distance"in t)}function az(t){return!!(t&&"delay"in t)}class mj{constructor(e,r,n){var a;n===void 0&&(n=E_e(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:s}=i;this.props=e,this.events=r,this.document=Vf(s),this.documentListeners=new jm(this.document),this.listeners=new jm(n),this.windowListeners=new jm(Ui(s)),this.initialCoordinates=(a=$g(i))!=null?a:Ao,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ks.Resize,this.handleCancel),this.windowListeners.add(Ks.DragStart,rz),this.windowListeners.add(Ks.VisibilityChange,this.handleCancel),this.windowListeners.add(Ks.ContextMenu,rz),this.documentListeners.add(Ks.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(az(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(nz(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:a}=this.props;a(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ks.Click,j_e,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ks.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:c}}=i;if(!a)return;const d=(r=$g(e))!=null?r:Ao,h=Hb(a,d);if(!n&&c){if(nz(c)){if(c.tolerance!=null&&ET(h,c.tolerance))return this.handleCancel();if(ET(h,c.distance))return this.handleStart()}if(az(c)&&ET(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}e.cancelable&&e.preventDefault(),s(d)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===jn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const C_e={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gj extends mj{constructor(e){const{event:r}=e,n=Vf(r.target);super(e,C_e,n)}}gj.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const O_e={move:{name:"mousemove"},end:{name:"mouseup"}};var l8;(function(t){t[t.RightClick=2]="RightClick"})(l8||(l8={}));class I_e extends mj{constructor(e){super(e,O_e,Vf(e.event.target))}}I_e.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===l8.RightClick?!1:(n==null||n({event:r}),!0)}}];const jT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class oX extends mj{constructor(e){super(e,jT)}static setup(){return window.addEventListener(jT.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(jT.move.name,e)};function e(){}}}oX.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var km;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(km||(km={}));var Wb;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wb||(Wb={}));function R_e(t){let{acceleration:e,activator:r=km.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:s=5,order:c=Wb.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:p,delta:m,threshold:y}=t;const v=P_e({delta:m,disabled:!i}),[T,S]=HSe(),w=k.useRef({x:0,y:0}),j=k.useRef({x:0,y:0}),R=k.useMemo(()=>{switch(r){case km.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case km.DraggableRect:return a}},[r,a,d]),I=k.useRef(null),L=k.useCallback(()=>{const P=I.current;if(!P)return;const N=w.current.x*j.current.x,A=w.current.y*j.current.y;P.scrollBy(N,A)},[]),C=k.useMemo(()=>c===Wb.TreeOrder?[...h].reverse():h,[c,h]);k.useEffect(()=>{if(!i||!h.length||!R){S();return}for(const P of C){if((n==null?void 0:n(P))===!1)continue;const N=h.indexOf(P),A=p[N];if(!A)continue;const{direction:E,speed:V}=S_e(P,A,R,e,y);for(const D of["x","y"])v[D][E[D]]||(V[D]=0,E[D]=0);if(V.x>0||V.y>0){S(),I.current=P,T(L,s),w.current=V,j.current=E;return}}w.current={x:0,y:0},j.current={x:0,y:0},S()},[e,L,n,S,i,s,JSON.stringify(R),JSON.stringify(v),T,h,C,p,JSON.stringify(y)])}const M_e={x:{[Ya.Backward]:!1,[Ya.Forward]:!1},y:{[Ya.Backward]:!1,[Ya.Forward]:!1}};function P_e(t){let{delta:e,disabled:r}=t;const n=qb(e);return E1(a=>{if(r||!n||!a)return M_e;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ya.Backward]:a.x[Ya.Backward]||i.x===-1,[Ya.Forward]:a.x[Ya.Forward]||i.x===1},y:{[Ya.Backward]:a.y[Ya.Backward]||i.y===-1,[Ya.Forward]:a.y[Ya.Forward]||i.y===1}}},[r,e,n])}function D_e(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return E1(a=>{var i;return e==null?null:(i=n??a)!=null?i:null},[n,e])}function L_e(t,e){return k.useMemo(()=>t.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,n)}));return[...r,...i]},[]),[t,e])}var zg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(zg||(zg={}));var c8;(function(t){t.Optimized="optimized"})(c8||(c8={}));const iz=new Map;function B_e(t,e){let{dragging:r,dependencies:n,config:a}=e;const[i,s]=k.useState(null),{frequency:c,measure:d,strategy:h}=a,p=k.useRef(t),m=w(),y=Bg(m),v=k.useCallback(function(j){j===void 0&&(j=[]),!y.current&&s(R=>R===null?j:R.concat(j.filter(I=>!R.includes(I))))},[y]),T=k.useRef(null),S=E1(j=>{if(m&&!r)return iz;if(!j||j===iz||p.current!==t||i!=null){const R=new Map;for(let I of t){if(!I)continue;if(i&&i.length>0&&!i.includes(I.id)&&I.rect.current){R.set(I.id,I.rect.current);continue}const L=I.node.current,C=L?new pj(d(L),L):null;I.rect.current=C,C&&R.set(I.id,C)}return R}return j},[t,i,r,m,d]);return k.useEffect(()=>{p.current=t},[t]),k.useEffect(()=>{m||v()},[r,m]),k.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),k.useEffect(()=>{m||typeof c!="number"||T.current!==null||(T.current=setTimeout(()=>{v(),T.current=null},c))},[c,m,v,...n]),{droppableRects:S,measureDroppableContainers:v,measuringScheduled:i!=null};function w(){switch(h){case zg.Always:return!1;case zg.BeforeDragging:return r;default:return!r}}}function yj(t,e){return E1(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function $_e(t,e){return yj(t,e)}function U_e(t){let{callback:e,disabled:r}=t;const n=_w(e),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Aw(t){let{callback:e,disabled:r}=t;const n=_w(e),a=k.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return k.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function z_e(t){return new pj(j1(t),t)}function sz(t,e,r){e===void 0&&(e=z_e);const[n,a]=k.useState(null);function i(){a(d=>{if(!t)return null;if(t.isConnected===!1){var h;return(h=d??r)!=null?h:null}const p=e(t);return JSON.stringify(d)===JSON.stringify(p)?d:p})}const s=U_e({callback(d){if(t)for(const h of d){const{type:p,target:m}=h;if(p==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),c=Aw({callback:i});return cc(()=>{i(),t?(c==null||c.observe(t),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),s==null||s.disconnect())},[t]),n}function V_e(t){const e=yj(t);return XQ(t,e)}const oz=[];function F_e(t){const e=k.useRef(t),r=E1(n=>t?n&&n!==oz&&t&&e.current&&t.parentNode===e.current.parentNode?n:fj(t):oz,[t]);return k.useEffect(()=>{e.current=t},[t]),r}function q_e(t){const[e,r]=k.useState(null),n=k.useRef(t),a=k.useCallback(i=>{const s=NT(i.target);s&&r(c=>c?(c.set(s,o8(s)),new Map(c)):null)},[]);return k.useEffect(()=>{const i=n.current;if(t!==i){s(i);const c=t.map(d=>{const h=NT(d);return h?(h.addEventListener("scroll",a,{passive:!0}),[h,o8(h)]):null}).filter(d=>d!=null);r(c.length?new Map(c):null),n.current=t}return()=>{s(t),s(i)};function s(c){c.forEach(d=>{const h=NT(d);h==null||h.removeEventListener("scroll",a)})}},[a,t]),k.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,s)=>kh(i,s),Ao):nX(t):Ao,[t,e])}function lz(t,e){e===void 0&&(e=[]);const r=k.useRef(null);return k.useEffect(()=>{r.current=null},e),k.useEffect(()=>{const n=t!==Ao;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Hb(t,r.current):Ao}function H_e(t){k.useEffect(()=>{if(!Sw)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function G_e(t,e){return k.useMemo(()=>t.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=s=>{i(s,e)},r},{}),[t,e])}function lX(t){return k.useMemo(()=>t?v_e(t):null,[t])}const cz=[];function W_e(t,e){e===void 0&&(e=j1);const[r]=t,n=lX(r?Ui(r):null),[a,i]=k.useState(cz);function s(){i(()=>t.length?t.map(d=>tX(d)?n:new pj(e(d),d)):cz)}const c=Aw({callback:s});return cc(()=>{c==null||c.disconnect(),s(),t.forEach(d=>c==null?void 0:c.observe(d))},[t]),a}function cX(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return N1(e)?e:t}function K_e(t){let{measure:e}=t;const[r,n]=k.useState(null),a=k.useCallback(h=>{for(const{target:p}of h)if(N1(p)){n(m=>{const y=e(p);return m?{...m,width:y.width,height:y.height}:y});break}},[e]),i=Aw({callback:a}),s=k.useCallback(h=>{const p=cX(h);i==null||i.disconnect(),p&&(i==null||i.observe(p)),n(p?e(p):null)},[e,i]),[c,d]=Fb(s);return k.useMemo(()=>({nodeRef:c,rect:r,setRef:d}),[r,c,d])}const Q_e=[{sensor:gj,options:{}},{sensor:sX,options:{}}],X_e={current:{}},tx={draggable:{measure:tz},droppable:{measure:tz,strategy:zg.WhileDragging,frequency:c8.Optimized},dragOverlay:{measure:j1}};class Cm extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const Y_e={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gb},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:tx,measureDroppableContainers:Gb,windowRect:null,measuringScheduled:!1},uX={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gb,draggableNodes:new Map,over:null,measureDroppableContainers:Gb},k1=k.createContext(uX),dX=k.createContext(Y_e);function Z_e(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cm}}}function J_e(t,e){switch(e.type){case Pa.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Pa.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Pa.DragEnd:case Pa.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pa.RegisterDroppable:{const{element:r}=e,{id:n}=r,a=new Cm(t.droppable.containers);return a.set(n,r),{...t,droppable:{...t.droppable,containers:a}}}case Pa.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const s=new Cm(t.droppable.containers);return s.set(r,{...i,disabled:a}),{...t,droppable:{...t.droppable,containers:s}}}case Pa.UnregisterDroppable:{const{id:r,key:n}=e,a=t.droppable.containers.get(r);if(!a||n!==a.key)return t;const i=new Cm(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function eTe(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:a}=k.useContext(k1),i=qb(n),s=qb(r==null?void 0:r.id);return k.useEffect(()=>{if(!e&&!n&&i&&s!=null){if(!hj(i)||document.activeElement===i.target)return;const c=a.get(s);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const p of[d.current,h.current]){if(!p)continue;const m=KSe(p);if(m){m.focus();break}}})}},[n,e,a,s,i]),null}function hX(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((a,i)=>i({transform:a,...n}),r):r}function tTe(t){return k.useMemo(()=>({draggable:{...tx.draggable,...t==null?void 0:t.draggable},droppable:{...tx.droppable,...t==null?void 0:t.droppable},dragOverlay:{...tx.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function rTe(t){let{activeNode:e,measure:r,initialRect:n,config:a=!0}=t;const i=k.useRef(!1),{x:s,y:c}=typeof a=="boolean"?{x:a,y:a}:a;cc(()=>{if(!s&&!c||!e){i.current=!1;return}if(i.current||!n)return;const h=e==null?void 0:e.node.current;if(!h||h.isConnected===!1)return;const p=r(h),m=XQ(p,n);if(s||(m.x=0),c||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const y=ZQ(h);y&&y.scrollBy({top:m.y,left:m.x})}},[e,s,c,n,r])}const Nw=k.createContext({...Ao,scaleX:1,scaleY:1});var Jc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Jc||(Jc={}));const nTe=k.memo(function(e){var r,n,a,i;let{id:s,accessibility:c,autoScroll:d=!0,children:h,sensors:p=Q_e,collisionDetection:m=h_e,measuring:y,modifiers:v,...T}=e;const S=k.useReducer(J_e,void 0,Z_e),[w,j]=S,[R,I]=e_e(),[L,C]=k.useState(Jc.Uninitialized),P=L===Jc.Initialized,{draggable:{active:N,nodes:A,translate:E},droppable:{containers:V}}=w,D=N!=null?A.get(N):null,U=k.useRef({initial:null,translated:null}),$=k.useMemo(()=>{var Ht;return N!=null?{id:N,data:(Ht=D==null?void 0:D.data)!=null?Ht:X_e,rect:U}:null},[N,D]),Q=k.useRef(null),[K,H]=k.useState(null),[J,ie]=k.useState(null),pe=Bg(T,Object.values(T)),me=Tw("DndDescribedBy",s),X=k.useMemo(()=>V.getEnabled(),[V]),ne=tTe(y),{droppableRects:re,measureDroppableContainers:Ae,measuringScheduled:Se}=B_e(X,{dragging:P,dependencies:[E.x,E.y],config:ne.droppable}),ze=D_e(A,N),He=k.useMemo(()=>J?$g(J):null,[J]),st=vr(),W=$_e(ze,ne.draggable.measure);rTe({activeNode:N!=null?A.get(N):null,config:st.layoutShiftCompensation,initialRect:W,measure:ne.draggable.measure});const he=sz(ze,ne.draggable.measure,W),te=sz(ze?ze.parentElement:null),ae=k.useRef({activatorEvent:null,active:null,activeNode:ze,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=V.getNodeFor((r=ae.current.over)==null?void 0:r.id),Ye=K_e({measure:ne.dragOverlay.measure}),xt=(n=Ye.nodeRef.current)!=null?n:ze,it=P?(a=Ye.rect)!=null?a:he:null,Pt=!!(Ye.nodeRef.current&&Ye.rect),Ie=V_e(Pt?null:he),Be=lX(xt?Ui(xt):null),rt=F_e(P?Ue??ze:null),ft=W_e(rt),Ge=hX(v,{transform:{x:E.x-Ie.x,y:E.y-Ie.y,scaleX:1,scaleY:1},activatorEvent:J,active:$,activeNodeRect:he,containerNodeRect:te,draggingNodeRect:it,over:ae.current.over,overlayNodeRect:Ye.rect,scrollableAncestors:rt,scrollableAncestorRects:ft,windowRect:Be}),ue=He?kh(He,E):null,Xe=q_e(rt),wt=lz(Xe),yt=lz(Xe,[he]),mt=kh(Ge,wt),Vt=it?m_e(it,Ge):null,ur=$&&Vt?m({active:$,collisionRect:Vt,droppableRects:re,droppableContainers:X,pointerCoordinates:ue}):null,qr=c_e(ur,"id"),[be,nt]=k.useState(null),Et=Pt?Ge:kh(Ge,yt),Dt=f_e(Et,(i=be==null?void 0:be.rect)!=null?i:null,he),Bt=k.useRef(null),Ze=k.useCallback((Ht,$t)=>{let{sensor:_t,options:Dr}=$t;if(Q.current==null)return;const rn=A.get(Q.current);if(!rn)return;const Hr=Ht.nativeEvent,Lr=new _t({active:Q.current,activeNode:rn,event:Hr,options:Dr,context:ae,onAbort(or){if(!A.get(or))return;const{onDragAbort:hn}=pe.current,On={id:or};hn==null||hn(On),R({type:"onDragAbort",event:On})},onPending(or,ma,hn,On){if(!A.get(or))return;const{onDragPending:Tr}=pe.current,fn={id:or,constraint:ma,initialCoordinates:hn,offset:On};Tr==null||Tr(fn),R({type:"onDragPending",event:fn})},onStart(or){const ma=Q.current;if(ma==null)return;const hn=A.get(ma);if(!hn)return;const{onDragStart:On}=pe.current,ti={activatorEvent:Hr,active:{id:ma,data:hn.data,rect:U}};cu.unstable_batchedUpdates(()=>{On==null||On(ti),C(Jc.Initializing),j({type:Pa.DragStart,initialCoordinates:or,active:ma}),R({type:"onDragStart",event:ti}),H(Bt.current),ie(Hr)})},onMove(or){j({type:Pa.DragMove,coordinates:or})},onEnd:dn(Pa.DragEnd),onCancel:dn(Pa.DragCancel)});Bt.current=Lr;function dn(or){return async function(){const{active:hn,collisions:On,over:ti,scrollAdjustedTranslate:Tr}=ae.current;let fn=null;if(hn&&Tr){const{cancelDrop:ri}=pe.current;fn={activatorEvent:Hr,active:hn,collisions:On,delta:Tr,over:ti},or===Pa.DragEnd&&typeof ri=="function"&&await Promise.resolve(ri(fn))&&(or=Pa.DragCancel)}Q.current=null,cu.unstable_batchedUpdates(()=>{j({type:or}),C(Jc.Uninitialized),nt(null),H(null),ie(null),Bt.current=null;const ri=or===Pa.DragEnd?"onDragEnd":"onDragCancel";if(fn){const Wn=pe.current[ri];Wn==null||Wn(fn),R({type:ri,event:fn})}})}}},[A]),ar=k.useCallback((Ht,$t)=>(_t,Dr)=>{const rn=_t.nativeEvent,Hr=A.get(Dr);if(Q.current!==null||!Hr||rn.dndKit||rn.defaultPrevented)return;const Lr={active:Hr};Ht(_t,$t.options,Lr)===!0&&(rn.dndKit={capturedBy:$t.sensor},Q.current=Dr,Ze(_t,$t))},[A,Ze]),br=L_e(p,ar);H_e(p),cc(()=>{he&&L===Jc.Initializing&&C(Jc.Initialized)},[he,L]),k.useEffect(()=>{const{onDragMove:Ht}=pe.current,{active:$t,activatorEvent:_t,collisions:Dr,over:rn}=ae.current;if(!$t||!_t)return;const Hr={active:$t,activatorEvent:_t,collisions:Dr,delta:{x:mt.x,y:mt.y},over:rn};cu.unstable_batchedUpdates(()=>{Ht==null||Ht(Hr),R({type:"onDragMove",event:Hr})})},[mt.x,mt.y]),k.useEffect(()=>{const{active:Ht,activatorEvent:$t,collisions:_t,droppableContainers:Dr,scrollAdjustedTranslate:rn}=ae.current;if(!Ht||Q.current==null||!$t||!rn)return;const{onDragOver:Hr}=pe.current,Lr=Dr.get(qr),dn=Lr&&Lr.rect.current?{id:Lr.id,rect:Lr.rect.current,data:Lr.data,disabled:Lr.disabled}:null,or={active:Ht,activatorEvent:$t,collisions:_t,delta:{x:rn.x,y:rn.y},over:dn};cu.unstable_batchedUpdates(()=>{nt(dn),Hr==null||Hr(or),R({type:"onDragOver",event:or})})},[qr]),cc(()=>{ae.current={activatorEvent:J,active:$,activeNode:ze,collisionRect:Vt,collisions:ur,droppableRects:re,draggableNodes:A,draggingNode:xt,draggingNodeRect:it,droppableContainers:V,over:be,scrollableAncestors:rt,scrollAdjustedTranslate:mt},U.current={initial:it,translated:Vt}},[$,ze,ur,Vt,A,xt,it,re,V,be,rt,mt]),R_e({...st,delta:E,draggingRect:Vt,pointerCoordinates:ue,scrollableAncestors:rt,scrollableAncestorRects:ft});const Pr=k.useMemo(()=>({active:$,activeNode:ze,activeNodeRect:he,activatorEvent:J,collisions:ur,containerNodeRect:te,dragOverlay:Ye,draggableNodes:A,droppableContainers:V,droppableRects:re,over:be,measureDroppableContainers:Ae,scrollableAncestors:rt,scrollableAncestorRects:ft,measuringConfiguration:ne,measuringScheduled:Se,windowRect:Be}),[$,ze,he,J,ur,te,Ye,A,V,re,be,Ae,rt,ft,ne,Se,Be]),un=k.useMemo(()=>({activatorEvent:J,activators:br,active:$,activeNodeRect:he,ariaDescribedById:{draggable:me},dispatch:j,draggableNodes:A,over:be,measureDroppableContainers:Ae}),[J,br,$,he,j,me,A,be,Ae]);return se.createElement(QQ.Provider,{value:I},se.createElement(k1.Provider,{value:un},se.createElement(dX.Provider,{value:Pr},se.createElement(Nw.Provider,{value:Dt},h)),se.createElement(eTe,{disabled:(c==null?void 0:c.restoreFocus)===!1})),se.createElement(n_e,{...c,hiddenTextDescribedById:me}));function vr(){const Ht=(K==null?void 0:K.autoScrollEnabled)===!1,$t=typeof d=="object"?d.enabled===!1:d===!1,_t=P&&!Ht&&!$t;return typeof d=="object"?{...d,enabled:_t}:{enabled:_t}}}),aTe=k.createContext(null),uz="button",iTe="Draggable";function fX(t){let{id:e,data:r,disabled:n=!1,attributes:a}=t;const i=Tw(iTe),{activators:s,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:p,draggableNodes:m,over:y}=k.useContext(k1),{role:v=uz,roleDescription:T="draggable",tabIndex:S=0}=a??{},w=(d==null?void 0:d.id)===e,j=k.useContext(w?Nw:aTe),[R,I]=Fb(),[L,C]=Fb(),P=G_e(s,e),N=Bg(r);cc(()=>(m.set(e,{id:e,key:i,node:R,activatorNode:L,data:N}),()=>{const E=m.get(e);E&&E.key===i&&m.delete(e)}),[m,e]);const A=k.useMemo(()=>({role:v,tabIndex:S,"aria-disabled":n,"aria-pressed":w&&v===uz?!0:void 0,"aria-roledescription":T,"aria-describedby":p.draggable}),[n,v,S,w,T,p.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:A,isDragging:w,listeners:n?void 0:P,node:R,over:y,setNodeRef:I,setActivatorNodeRef:C,transform:j}}function sTe(){return k.useContext(dX)}const oTe="Droppable",lTe={timeout:25};function vj(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:a}=t;const i=Tw(oTe),{active:s,dispatch:c,over:d,measureDroppableContainers:h}=k.useContext(k1),p=k.useRef({disabled:r}),m=k.useRef(!1),y=k.useRef(null),v=k.useRef(null),{disabled:T,updateMeasurementsFor:S,timeout:w}={...lTe,...a},j=Bg(S??n),R=k.useCallback(()=>{if(!m.current){m.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{h(Array.isArray(j.current)?j.current:[j.current]),v.current=null},w)},[w]),I=Aw({callback:R,disabled:T||!s}),L=k.useCallback((A,E)=>{I&&(E&&(I.unobserve(E),m.current=!1),A&&I.observe(A))},[I]),[C,P]=Fb(L),N=Bg(e);return k.useEffect(()=>{!I||!C.current||(I.disconnect(),m.current=!1,I.observe(C.current))},[C,I]),k.useEffect(()=>(c({type:Pa.RegisterDroppable,element:{id:n,key:i,disabled:r,node:C,rect:y,data:N}}),()=>c({type:Pa.UnregisterDroppable,key:i,id:n})),[n]),k.useEffect(()=>{r!==p.current.disabled&&(c({type:Pa.SetDroppableDisabled,id:n,key:i,disabled:r}),p.current.disabled=r)},[n,i,r,c]),{active:s,rect:y,isOver:(d==null?void 0:d.id)===n,node:C,over:d,setNodeRef:P}}function cTe(t){let{animation:e,children:r}=t;const[n,a]=k.useState(null),[i,s]=k.useState(null),c=qb(r);return!r&&!n&&c&&a(c),cc(()=>{if(!i)return;const d=n==null?void 0:n.key,h=n==null?void 0:n.props.id;if(d==null||h==null){a(null);return}Promise.resolve(e(h,i)).then(()=>{a(null)})},[e,n,i]),se.createElement(se.Fragment,null,r,n?k.cloneElement(n,{ref:s}):null)}const uTe={x:0,y:0,scaleX:1,scaleY:1};function dTe(t){let{children:e}=t;return se.createElement(k1.Provider,{value:uX},se.createElement(Nw.Provider,{value:uTe},e))}const hTe={position:"fixed",touchAction:"none"},fTe=t=>hj(t)?"transform 250ms ease":void 0,pTe=k.forwardRef((t,e)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:s,rect:c,style:d,transform:h,transition:p=fTe}=t;if(!c)return null;const m=a?h:{...h,scaleX:1,scaleY:1},y={...hTe,width:c.width,height:c.height,top:c.top,left:c.left,transform:Ug.Transform.toString(m),transformOrigin:a&&n?s_e(n,c):void 0,transition:typeof p=="function"?p(n):p,...d};return se.createElement(r,{className:s,style:y,ref:e},i)}),mTe=t=>e=>{let{active:r,dragOverlay:n}=e;const a={},{styles:i,className:s}=t;if(i!=null&&i.active)for(const[c,d]of Object.entries(i.active))d!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,d));if(i!=null&&i.dragOverlay)for(const[c,d]of Object.entries(i.dragOverlay))d!==void 0&&n.node.style.setProperty(c,d);return s!=null&&s.active&&r.node.classList.add(s.active),s!=null&&s.dragOverlay&&n.node.classList.add(s.dragOverlay),function(){for(const[d,h]of Object.entries(a))r.node.style.setProperty(d,h);s!=null&&s.active&&r.node.classList.remove(s.active)}},gTe=t=>{let{transform:{initial:e,final:r}}=t;return[{transform:Ug.Transform.toString(e)},{transform:Ug.Transform.toString(r)}]},yTe={duration:250,easing:"ease",keyframes:gTe,sideEffects:mTe({styles:{active:{opacity:"0"}}})};function vTe(t){let{config:e,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=t;return _w((i,s)=>{if(e===null)return;const c=r.get(i);if(!c)return;const d=c.node.current;if(!d)return;const h=cX(s);if(!h)return;const{transform:p}=Ui(s).getComputedStyle(s),m=YQ(p);if(!m)return;const y=typeof e=="function"?e:xTe(e);return aX(d,a.draggable.measure),y({active:{id:i,data:c.data,node:d,rect:a.draggable.measure(d)},draggableNodes:r,dragOverlay:{node:s,rect:a.dragOverlay.measure(h)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function xTe(t){const{duration:e,easing:r,sideEffects:n,keyframes:a}={...yTe,...t};return i=>{let{active:s,dragOverlay:c,transform:d,...h}=i;if(!e)return;const p={x:c.rect.left-s.rect.left,y:c.rect.top-s.rect.top},m={scaleX:d.scaleX!==1?s.rect.width*d.scaleX/c.rect.width:1,scaleY:d.scaleY!==1?s.rect.height*d.scaleY/c.rect.height:1},y={x:d.x-p.x,y:d.y-p.y,...m},v=a({...h,active:s,dragOverlay:c,transform:{initial:d,final:y}}),[T]=v,S=v[v.length-1];if(JSON.stringify(T)===JSON.stringify(S))return;const w=n==null?void 0:n({active:s,dragOverlay:c,...h}),j=c.node.animate(v,{duration:e,easing:r,fill:"forwards"});return new Promise(R=>{j.onfinish=()=>{w==null||w(),R()}})}}let dz=0;function bTe(t){return k.useMemo(()=>{if(t!=null)return dz++,dz},[t])}const wTe=se.memo(t=>{let{adjustScale:e=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:s,wrapperElement:c="div",className:d,zIndex:h=999}=t;const{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggableNodes:T,droppableContainers:S,dragOverlay:w,over:j,measuringConfiguration:R,scrollableAncestors:I,scrollableAncestorRects:L,windowRect:C}=sTe(),P=k.useContext(Nw),N=bTe(m==null?void 0:m.id),A=hX(s,{activatorEvent:p,active:m,activeNodeRect:y,containerNodeRect:v,draggingNodeRect:w.rect,over:j,overlayNodeRect:w.rect,scrollableAncestors:I,scrollableAncestorRects:L,transform:P,windowRect:C}),E=yj(y),V=vTe({config:n,draggableNodes:T,droppableContainers:S,measuringConfiguration:R}),D=E?w.setRef:void 0;return se.createElement(dTe,null,se.createElement(cTe,{animation:V},m&&N?se.createElement(pTe,{key:N,id:m.id,ref:D,as:c,activatorEvent:p,adjustScale:e,className:d,transition:i,rect:E,style:{zIndex:h,...a},transform:A},r):null))});function hz(t,e=800){const[r,n]=k.useState(t),a=k.useRef(t),i=k.useRef(0);return k.useEffect(()=>{const s=a.current,c=t;if(a.current=t,s===c)return;const d=performance.now(),h=c-s,p=m=>{const y=m-d,v=Math.min(y/e,1),T=1-Math.pow(1-v,3);n(Math.round(s+h*T)),v<1&&(i.current=requestAnimationFrame(p))};return i.current=requestAnimationFrame(p),()=>cancelAnimationFrame(i.current)},[t,e]),r}const pX=["#FDDCB5","#F1C27D","#E0A370","#C68642","#A0785A","#8D5524","#6B3A2A","#4A2511"],mX=["#1a1a2e","#4a3728","#8B6914","#D4A017","#C0392B","#D5D5D5","#3498DB","#8E44AD"],STe=["Buzz Cut","Short Crop","Side Part","Long Flow","Ponytail","Spiky"],fz={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.3)",particle:"#94a3b8",intensity:.3},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.4)",particle:"#4ade80",intensity:.5},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.5)",particle:"#60a5fa",intensity:.7},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.6)",particle:"#fbbf24",intensity:.9}},sh=t=>t?fz[t.rarity]||fz.COMMON:null,_Te=(t,e)=>{const n=100-e,a=100+e;switch(t){case 0:return{main:`M${n+2} 40 Q${n} 30 100 26 Q${a} 30 ${a-2} 40 Q${a-4} 33 100 30 Q${n+4} 33 ${n+2} 40`};case 1:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`};case 2:return{main:`M${n} 46 Q${n-2} 26 95 20 Q${a+3} 22 ${a+1} 46 Q${a-1} 30 100 26 Q${n+2} 28 ${n} 46`,accent:`M${n-1} 44 Q${n-4} 38 ${n-2} 52`};case 3:return{back:`M${n-3} 44 Q${n-6} 55 ${n-4} 85 Q${n-2} 92 ${n+4} 88 L${n+2} 46 Z`,main:`M${n} 46 Q${n-2} 24 100 18 Q${a+2} 24 ${a} 46 Q${a-2} 30 100 25 Q${n+2} 30 ${n} 46`,accent:`M${a+3} 44 Q${a+6} 55 ${a+4} 85 Q${a+2} 92 ${a-4} 88 L${a-2} 46 Z`};case 4:return{main:`M${n} 44 Q${n-1} 26 100 22 Q${a+1} 26 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,back:"M104 32 Q108 30 110 38 Q114 60 108 82 Q104 86 102 78 Q106 62 106 42 Z"};case 5:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`,accent:"M88 32 L84 12 L94 26 L96 8 L102 24 L106 6 L108 26 L116 10 L112 32"};default:return{main:`M${n} 44 Q${n-1} 28 100 22 Q${a+1} 28 ${a} 44 Q${a-2} 32 100 28 Q${n+2} 32 ${n} 44`}}},Vg=({equipped:t,appearance:e,evolutionLevel:r=1,activeCosmetic:n,cosmeticColor:a})=>{const i=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)||"A",c=s==="B",d=s==="C",h=pX[(e==null?void 0:e.skinTone)??0],p=mX[(e==null?void 0:e.hairColor)??0],m=(e==null?void 0:e.hairStyle)??1,y=h+"99",v=t==null?void 0:t.HEAD,T=t==null?void 0:t.CHEST,S=t==null?void 0:t.HANDS,w=t==null?void 0:t.FEET,j=t==null?void 0:t.BELT,R=t==null?void 0:t.AMULET,I=k.useMemo(()=>[v,T,S,w,j,R].filter(Boolean).length,[v,T,S,w,j,R]),L=k.useMemo(()=>[v,T,S,w,j,R].some(A=>(A==null?void 0:A.rarity)==="UNIQUE"),[v,T,S,w,j,R]),C=Math.min(1,.2+I*.13),P=c?23:21,N=k.useMemo(()=>_Te(m,P),[m,P]);return o.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 4px 20px rgba(0,0,0,0.25))"},children:[o.jsxs("defs",{children:[o.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[o.jsx("feGaussianBlur",{stdDeviation:"1.5",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"6",result:"b"}),o.jsx("feComposite",{in:"SourceGraphic",in2:"b",operator:"over"})]}),o.jsxs("linearGradient",{id:"av-outfit",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 20%, 20%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 18%, 12%)`})]}),o.jsxs("linearGradient",{id:"av-hl",x1:"0",y1:"0",x2:"1",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsla(${i+240}, 30%, 35%, 0.2)`}),o.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),o.jsxs("linearGradient",{id:"av-pants",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+240}, 15%, 16%)`}),o.jsx("stop",{offset:"100%",stopColor:`hsl(${i+240}, 12%, 10%)`})]}),o.jsxs("radialGradient",{id:"av-face",cx:"45%",cy:"40%",r:"55%",children:[o.jsx("stop",{offset:"0%",stopColor:h}),o.jsx("stop",{offset:"100%",stopColor:y})]}),o.jsxs("radialGradient",{id:"av-energy",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:`hsl(${i+180}, 100%, 70%)`,stopOpacity:C}),o.jsx("stop",{offset:"60%",stopColor:`hsl(${i+200}, 80%, 50%)`,stopOpacity:C*.3}),o.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),o.jsxs("linearGradient",{id:"av-hair",x1:"0",y1:"0",x2:"0.3",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:p}),o.jsx("stop",{offset:"100%",stopColor:p+"cc"})]})]}),o.jsx("ellipse",{cx:"100",cy:"326",rx:"42",ry:"5",fill:"rgba(0,0,0,0.3)",children:o.jsx("animate",{attributeName:"rx",values:"42;39;42",dur:"3.5s",repeatCount:"indefinite"})}),o.jsxs("g",{children:[o.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-1.5;0,0",dur:"3.5s",repeatCount:"indefinite"}),r>=30&&o.jsxs("g",{filter:"url(#av-bloom)",children:[o.jsx("path",{d:r>=50?"M58 105 Q18 60 28 25 Q38 50 52 72 Q32 58 22 38 Q36 56 52 82 Z":"M60 115 Q32 82 40 55 Q47 72 56 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.8;0.4;0.8",dur:"3s",repeatCount:"indefinite"})}),o.jsx("path",{d:r>=50?"M142 105 Q182 60 172 25 Q162 50 148 72 Q168 58 178 38 Q164 56 148 82 Z":"M140 115 Q168 82 160 55 Q153 72 144 88 Z",fill:r>=50?"rgba(251,191,36,0.12)":"rgba(139,92,246,0.1)",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"opacity",values:"0.4;0.8;0.4",dur:"3s",repeatCount:"indefinite"})})]}),o.jsx("path",{d:d?"M82 200 L80 270 Q80 282 87 282 L94 282 Q98 282 97 276 L94 200":c?"M80 198 L78 272 Q78 282 86 282 L94 282 Q98 282 97 276 L93 198":"M82 198 L79 270 Q79 282 86 282 L94 282 Q99 282 98 276 L94 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M106 200 L104 270 Q104 282 111 282 L118 282 Q122 282 121 276 L120 200":c?"M107 198 L105 272 Q105 282 112 282 L120 282 Q124 282 123 276 L121 198":"M106 198 L103 270 Q103 282 110 282 L118 282 Q123 282 122 276 L120 198",fill:"url(#av-pants)",stroke:`hsl(${i+240},15%,22%)`,strokeWidth:"0.8"}),w?(()=>{const A=sh(w);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M76 270 L74 282 Q72 292 82 292 L96 292 Q100 292 98 284 L96 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("path",{d:"M102 270 L100 282 Q98 292 108 292 L122 292 Q126 292 124 284 L122 270",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.6"}),o.jsx("line",{x1:"78",y1:"276",x2:"96",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),o.jsx("line",{x1:"104",y1:"276",x2:"122",y2:"276",stroke:A.particle,strokeWidth:"1.5",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"80",y1:"284",x2:"94",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.4;0.1;0.4",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"106",y1:"284",x2:"120",y2:"284",stroke:A.particle,strokeWidth:"0.6",strokeOpacity:"0.4",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.1;0.4;0.1",dur:"2s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("path",{d:"M76 270 L74 282 Q72 290 82 290 L96 290 Q100 290 98 282 L96 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"}),o.jsx("path",{d:"M102 270 L100 282 Q98 290 108 290 L122 290 Q126 290 124 282 L122 270",fill:`hsl(${i+240},12%,14%)`,stroke:`hsl(${i+240},10%,20%)`,strokeWidth:"0.5"})]}),o.jsx("path",{d:d?"M70 88 Q100 82 130 88 L122 140 L128 200 Q100 208 72 200 L78 140 Z":c?"M64 88 Q100 82 136 88 L128 200 Q100 206 72 200 Z":"M68 88 Q100 82 132 88 L126 200 Q100 206 74 200 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"1"}),o.jsx("path",{d:d?"M70 88 Q100 82 100 88 L100 200 Q86 204 72 200 L78 140 Z":c?"M64 88 Q100 82 100 88 L100 200 Q86 203 72 200 Z":"M68 88 Q100 82 100 88 L100 200 Q86 204 74 200 Z",fill:"url(#av-hl)"}),o.jsx("path",{d:"M88 88 L100 105 L112 88",fill:h}),o.jsx("path",{d:"M86 87 L100 106 L114 87",fill:"none",stroke:`hsl(${i+240},20%,28%)`,strokeWidth:"1.2"}),o.jsx("line",{x1:"100",y1:"106",x2:"100",y2:"195",stroke:`hsla(${i+180},30%,40%,0.08)`,strokeWidth:"0.5"}),T&&(()=>{const A=sh(T);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:d?"M72 92 Q100 86 128 92 L122 175 Q100 180 78 175 Z":c?"M70 92 Q100 86 130 92 L126 175 Q100 180 74 175 Z":"M72 92 Q100 86 128 92 L124 175 Q100 180 76 175 Z",fill:A.primary,fillOpacity:"0.3",stroke:A.primary,strokeWidth:"1",strokeOpacity:"0.6"}),o.jsx("path",{d:`M${d?70:c?64:68} 88 Q${d?62:c?56:60} 86 ${d?62:c?56:60} 96 L${d?72:c?66:70} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("path",{d:`M${d?130:c?136:132} 88 Q${d?138:c?144:140} 86 ${d?138:c?144:140} 96 L${d?128:c?134:130} 100`,fill:A.primary,fillOpacity:"0.5",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("line",{x1:"80",y1:"115",x2:"120",y2:"115",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),o.jsx("line",{x1:"82",y1:"140",x2:"118",y2:"140",stroke:A.particle,strokeWidth:"0.8",strokeOpacity:"0.2"}),o.jsx("circle",{cx:"100",cy:"120",r:"5",fill:"none",stroke:A.primary,strokeWidth:"1.2",strokeOpacity:"0.7"}),o.jsx("circle",{cx:"100",cy:"120",r:"2",fill:A.particle,fillOpacity:"0.7",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"2s",repeatCount:"indefinite"})}),A.intensity>=.7&&o.jsxs("g",{children:[o.jsx("line",{x1:"88",y1:"100",x2:"82",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"112",y1:"100",x2:"118",y2:"165",stroke:A.particle,strokeWidth:"0.5",strokeOpacity:"0.2",strokeDasharray:"3 4",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-14",dur:"2s",repeatCount:"indefinite"})})]})]})})(),j?(()=>{const A=sh(j);return o.jsxs("g",{children:[o.jsx("rect",{x:"72",y:"188",width:"56",height:"14",rx:"3",fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"0.8"}),o.jsx("rect",{x:"94",y:"189",width:"12",height:"12",rx:"2",fill:A.particle,fillOpacity:"0.4"}),o.jsx("rect",{x:"74",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"}),o.jsx("rect",{x:"118",y:"190",width:"8",height:"10",rx:"2",fill:A.primary,fillOpacity:"0.3",stroke:A.particle,strokeWidth:"0.3"})]})})():o.jsx("line",{x1:"74",y1:"195",x2:"126",y2:"195",stroke:`hsl(${i+240},15%,25%)`,strokeWidth:"1.5"}),o.jsx("path",{d:d?"M70 90 L52 94 Q46 96 46 103 L45 155 Q45 160 49 160 L59 160 L66 155 Z":c?"M64 90 L46 94 Q40 96 40 103 L40 155 Q40 160 44 160 L56 160 L64 155 Z":"M68 90 L50 94 Q44 96 43 103 L42 155 Q42 160 46 160 L58 160 L66 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),o.jsx("path",{d:d?"M130 90 L148 94 Q154 96 154 103 L155 155 Q155 160 151 160 L141 160 L134 155 Z":c?"M136 90 L154 94 Q160 96 160 103 L160 155 Q160 160 156 160 L144 160 L136 155 Z":"M132 90 L150 94 Q156 96 157 103 L158 155 Q158 160 154 160 L142 160 L134 155 Z",fill:"url(#av-outfit)",stroke:`hsl(${i+240},18%,25%)`,strokeWidth:"0.8"}),S?(()=>{const A=sh(S);return o.jsxs("g",{filter:A.intensity>.5?"url(#av-soft)":void 0,children:[o.jsx("path",{d:"M38 148 L38 172 Q38 178 44 178 L58 178 Q62 178 62 172 L62 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("path",{d:"M138 148 L138 172 Q138 178 144 178 L158 178 Q162 178 162 172 L162 148",fill:A.primary,fillOpacity:"0.5",stroke:A.primary,strokeWidth:"0.8",strokeOpacity:"0.7"}),o.jsx("line",{x1:"42",y1:"170",x2:"58",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),o.jsx("line",{x1:"142",y1:"170",x2:"158",y2:"170",stroke:A.particle,strokeWidth:"1",strokeOpacity:"0.5"}),A.intensity>=.7&&o.jsxs(o.Fragment,{children:[o.jsx("circle",{cx:"50",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.2;0.5",dur:"1.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"150",cy:"168",r:"2",fill:A.particle,fillOpacity:"0.5",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.2;0.5;0.2",dur:"1.5s",repeatCount:"indefinite"})})]})]})})():o.jsxs("g",{children:[o.jsx("ellipse",{cx:"50",cy:"166",rx:"7",ry:"9",fill:h}),o.jsx("ellipse",{cx:"150",cy:"166",rx:"7",ry:"9",fill:h})]}),I>0&&o.jsxs(o.Fragment,{children:[o.jsx("g",{filter:"url(#av-bloom)",children:o.jsx("circle",{cx:"100",cy:"130",r:"6",fill:"url(#av-energy)",children:o.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"})})}),o.jsx("circle",{cx:"100",cy:"130",r:"2.5",fill:`hsl(${i+180},100%,75%)`,fillOpacity:C*.7,children:o.jsx("animate",{attributeName:"fillOpacity",values:`${C*.7};${C*.3};${C*.7}`,dur:"2s",repeatCount:"indefinite"})})]}),I>=3&&o.jsx("line",{x1:"100",y1:"108",x2:"100",y2:"185",stroke:`hsl(${i+180},80%,55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"2s",repeatCount:"indefinite"})}),o.jsx("rect",{x:"93",y:"72",width:"14",height:"18",rx:"5",fill:h}),R&&(()=>{const A=sh(R);return o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("path",{d:"M92 78 Q100 96 108 78",stroke:A.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),o.jsx("polygon",{points:"100,90 95,97 100,104 105,97",fill:A.primary,stroke:A.particle,strokeWidth:"0.8",children:o.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"100",cy:"97",r:"2",fill:A.particle,children:o.jsx("animate",{attributeName:"r",values:"2;2.5;2",dur:"2s",repeatCount:"indefinite"})})]})})(),o.jsxs("g",{children:[N.back&&o.jsx("path",{d:N.back,fill:"url(#av-hair)",opacity:"0.8"}),o.jsx("ellipse",{cx:"100",cy:"50",rx:P,ry:"28",fill:"url(#av-face)",stroke:y,strokeWidth:"0.5"}),o.jsx("ellipse",{cx:100-P-1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsx("ellipse",{cx:100+P+1,cy:"52",rx:"4",ry:"6",fill:h,stroke:y,strokeWidth:"0.3"}),o.jsxs("g",{children:[o.jsx("path",{d:"M86 40 Q90 37 96 39",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M104 39 Q110 37 114 40",stroke:p,strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6",ry:"4.5",fill:"white"}),o.jsx("circle",{cx:"92",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"110",cy:"47",r:"3",fill:`hsl(${i+180},70%,45%)`}),o.jsx("circle",{cx:"92",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"110",cy:"47",r:"1.5",fill:"#111"}),o.jsx("circle",{cx:"93.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("circle",{cx:"111.5",cy:"45.5",r:"1",fill:"white",fillOpacity:"0.8"}),o.jsx("ellipse",{cx:"91",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("ellipse",{cx:"109",cy:"47",rx:"6.5",ry:"0",fill:h,children:o.jsx("animate",{attributeName:"ry",values:"0;0;0;5;0;0;0;0;0;0;0;0",dur:"5s",repeatCount:"indefinite"})}),o.jsx("path",{d:"M98 52 Q100 56 102 52",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"}),o.jsx("path",{d:"M95 60 Q100 63 105 60",stroke:y,strokeWidth:"0.8",fill:"none",strokeLinecap:"round"})]}),o.jsx("path",{d:N.main,fill:"url(#av-hair)"}),N.accent&&o.jsx("path",{d:N.accent,fill:"url(#av-hair)",opacity:"0.9"}),v&&(()=>{const A=sh(v),E=v.visualId||"";return o.jsx("g",{filter:A.intensity>.5?"url(#av-glow)":"url(#av-soft)",children:E.includes("helm")?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M${100-P-2} 28 Q100 10 ${100+P+2} 28 L${100+P+4} 62 Q100 72 ${100-P-4} 62 Z`,fill:A.primary,fillOpacity:"0.55",stroke:A.primary,strokeWidth:"1.2"}),o.jsx("rect",{x:"80",y:"44",width:"40",height:"8",rx:"4",fill:`hsl(${i+180},90%,55%)`,fillOpacity:"0.85",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.5;0.85",dur:"3s",repeatCount:"indefinite"})})]}):E.includes("visor")?o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"80",y:"42",width:"40",height:"12",rx:"6",fill:`hsla(${i+180},80%,50%,0.7)`,stroke:A.primary,strokeWidth:"1",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.4;0.7",dur:"2.5s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"76",y1:"48",x2:"80",y2:"48",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("line",{x1:"120",y1:"48",x2:"124",y2:"48",stroke:A.primary,strokeWidth:"1.5"})]}):o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:"78",y:"36",width:"44",height:"6",rx:"3",fill:A.primary,fillOpacity:"0.7",stroke:A.particle,strokeWidth:"0.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"111",cy:"47",r:"8",fill:"none",stroke:A.primary,strokeWidth:"1.5"}),o.jsx("circle",{cx:"89",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.15;0.3",dur:"2s",repeatCount:"indefinite"})}),o.jsx("circle",{cx:"111",cy:"47",r:"5.5",fill:A.particle,fillOpacity:"0.3",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.15;0.3;0.15",dur:"2s",repeatCount:"indefinite"})}),o.jsx("line",{x1:"97",y1:"47",x2:"103",y2:"47",stroke:A.primary,strokeWidth:"1.5"})]})})})()]}),r>=15&&o.jsxs("g",{filter:"url(#av-glow)",children:[o.jsx("ellipse",{cx:"100",cy:"22",rx:"18",ry:"4",fill:"none",stroke:r>=50?"#fbbf24":r>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:o.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.35;0.7",dur:"2s",repeatCount:"indefinite"})}),r>=30&&o.jsx("ellipse",{cx:"100",cy:"18",rx:"22",ry:"5",fill:"none",stroke:r>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.35",strokeDasharray:"3 3",children:o.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),r>=50&&[-12,0,12].map((A,E)=>o.jsx("polygon",{points:`${100+A},16 ${97+A},22 ${103+A},22`,fill:"#fbbf24",fillOpacity:"0.6",children:o.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.25;0.6",dur:`${1.5+E*.2}s`,repeatCount:"indefinite"})},E))]}),L&&o.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((A,E)=>{const V=A*Math.PI/180,D=100+Math.cos(V)*50,U=145+Math.sin(V)*75;return o.jsxs("circle",{cx:D,cy:U,r:"1.5",fill:"#fbbf24",fillOpacity:"0.5",children:[o.jsx("animate",{attributeName:"cy",values:`${U};${U-18};${U}`,dur:`${2+E*.3}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${2+E*.3}s`,repeatCount:"indefinite"})]},E)})}),r>=5&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:"56",y1:"90",x2:"48",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004}),o.jsx("line",{x1:"144",y1:"90",x2:"152",y2:"97",stroke:`hsl(${i+180},70%,50%)`,strokeWidth:"1",strokeOpacity:.12+r*.004})]}),r>=5&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(8,Math.floor(r/6))}).map((A,E)=>{const V=E*360/Math.min(8,Math.floor(r/6))*(Math.PI/180),D=100+Math.cos(V)*(38+E*3),U=140+Math.sin(V)*(55+E*2),$=r>=50?"#fbbf24":r>=30?"#a78bfa":r>=15?"#60a5fa":`hsl(${i+180},70%,60%)`;return o.jsxs("circle",{cx:D,cy:U,r:"1",fill:$,fillOpacity:"0.35",children:[o.jsx("animate",{attributeName:"cy",values:`${U};${U-12};${U}`,dur:`${2+E*.4}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.35;0;0.35",dur:`${2+E*.4}s`,repeatCount:"indefinite"})]},E)})}),n&&a&&o.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((A,E)=>{const V=60+Math.random()*80,D=20+Math.random()*260;return o.jsxs("circle",{cx:V,cy:D,r:1+Math.random(),fill:a,fillOpacity:"0.45",children:[o.jsx("animate",{attributeName:"cy",values:`${D};${D-25};${D}`,dur:`${3+E*.5}s`,repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"fillOpacity",values:"0.45;0;0.45",dur:`${3+E*.5}s`,repeatCount:"indefinite"})]},`c-${E}`)})})]})]})},xj=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],TTe=t=>xj.filter(e=>!e.isSecret||t.includes(e.id)),Cv={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},gX=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],pz=(t,e)=>{const r=gX.find(n=>n.id===t);return r?r.prerequisites.every(n=>e.includes(n)):!1},ATe=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],yX=t=>{const e=[],r=t.map(n=>n.baseName);for(const n of ATe){const a=n.itemIds.filter(s=>r.includes(s)).length,i=n.bonuses.filter(s=>a>=s.count).sort((s,c)=>c.count-s.count);i.length>0&&e.push({set:n,activeBonus:i[0]})}return e},NTe=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],mz=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],vX=t=>[...mz].sort((r,n)=>n.level-r.level).find(r=>t>=r.level)||mz[0],ETe=t=>t<=0?1:t<=2?1.05:t<=4?1.1:t<=7?1.15:t<=12?1.25:1.5,jTe={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},kTe=({unlockedAchievements:t,achievementProgress:e})=>{const r=k.useMemo(()=>TTe(t),[t]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],a=t.length,i=xj.filter(s=>!s.isSecret).length;return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[o.jsx(tc,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),o.jsxs("span",{className:"text-sm text-gray-400",children:[a,"/",i," unlocked"]})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:o.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${a/i*100}%`}})}),n.map(s=>{const c=r.filter(h=>h.category===s);if(c.length===0)return null;const d=jTe[s];return o.jsxs("div",{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[o.jsx("span",{children:d.icon})," ",d.label]}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(h=>{const p=t.includes(h.id),m=e[h.id]||0,y=Math.min(100,m/h.condition.target*100);return o.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${p?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[o.jsx("span",{className:`text-2xl ${p?"":"grayscale opacity-40"}`,children:h.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`text-sm font-bold ${p?"text-yellow-400":"text-gray-400"}`,children:h.title}),h.isSecret&&!p&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600"})]}),o.jsx("p",{className:"text-[10px] text-gray-500",children:h.description}),!p&&o.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[m,"/",h.condition.target]})]})]}),p&&o.jsxs("div",{className:"text-right shrink-0",children:[o.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",h.xpReward," XP"]}),h.fluxReward&&o.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",h.fluxReward," Flux"]})]})]},h.id)})})]},s)})]})},CTe={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},OTe=({specialization:t,skillPoints:e,unlockedSkills:r})=>{const[n,a]=k.useState(t||null),[i,s]=k.useState(null),c=mi(),{confirm:d}=al(),h=!!t,p=n||"THEORIST",m=gX.filter(T=>T.specialization===p),y=[1,2,3,4],v=async T=>{if(!i){if(!h){const S=Cv[p].name;if(!await d({title:"Permanent Specialization",message:`You are about to commit to the ${S} specialization. This choice is PERMANENT and cannot be changed. Are you sure?`,confirmLabel:`Commit to ${S}`,cancelLabel:"Go Back",variant:"warning"}))return}s(T);try{await Re.unlockSkill(T,p),Un.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}s(null)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),o.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point every 2 levels"})]}),o.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[o.jsx($a,{className:"w-4 h-4 text-yellow-400"}),o.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),!h&&o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[o.jsx(Os,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-bold text-amber-300",children:"Choose Carefully"}),o.jsxs("p",{className:"text-[11px] text-amber-400/70 mt-0.5",children:["Selecting a specialization is ",o.jsx("span",{className:"font-bold text-amber-300",children:"permanent"}),". Once you unlock your first skill, you will not be able to change your specialization. Browse all four trees before deciding."]})]})]}),h&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl",children:[o.jsx(Mn,{className:"w-4 h-4 text-green-400"}),o.jsxs("span",{className:"text-xs text-gray-300",children:["Specialization locked: ",o.jsxs("span",{className:"font-bold text-white",children:[Cv[t].icon," ",Cv[t].name]})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Cv).map(([T,S])=>{const w=p===T,j=h&&t!==T;return o.jsxs("button",{onClick:()=>!j&&a(T),disabled:j,className:`p-3 rounded-xl border text-left transition-all ${w?`border-white/30 bg-gradient-to-br ${CTe[T]} bg-opacity-10`:j?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:S.icon}),o.jsx("span",{className:"font-bold text-sm text-white",children:S.name}),j&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:S.description}),!h&&w&&o.jsx("p",{className:"text-[9px] text-amber-400/60 mt-1 font-bold",children:"Browsing  not committed"})]},T)})}),o.jsx("div",{className:"space-y-4",children:y.map(T=>{const S=m.filter(w=>w.tier===T);return o.jsxs("div",{children:[o.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",T]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(w=>{const j=r.includes(w.id),R=!j&&pz(w.id,r)&&e>=w.cost,I=pz(w.id,r);return o.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${j?"border-green-500/30 bg-green-500/10":R?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>R&&v(w.id),children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm",children:w.icon}),o.jsx("span",{className:"text-xs font-bold text-white truncate",children:w.name}),j&&o.jsx(Mn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!j&&!I&&o.jsx(Gh,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),o.jsx("p",{className:"text-[10px] text-gray-400",children:w.description}),!j&&o.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",w.cost," SP"]}),i===w.id&&o.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:o.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},w.id)})})]},T)})})]})},kT=25,Ov=NTe,ITe=({currency:t,lastSpin:e,classType:r})=>{const[n,a]=k.useState(!1),[i,s]=k.useState(0),[c,d]=k.useState(null),h=k.useRef(null),p=mi(),m=new Date().toISOString().split("T")[0],y=e===m,v=!y&&t>=kT&&!n,T=async()=>{if(v){a(!0),d(null),Un.wheelSpin();try{const j=await Re.spinFortuneWheel(r),R=Ov.findIndex(C=>C.id===j.prizeId),I=360/Ov.length,L=360*5+(360-R*I-I/2);s(C=>C+L),setTimeout(()=>{Un.wheelPrize(),d(j.rewardDescription),a(!1),j.prizeType!=="NOTHING"?p.success(`You won: ${j.rewardDescription}!`):p.info(j.rewardDescription)},4e3)}catch(j){a(!1),p.error(j instanceof Error?j.message:"Spin failed")}}},S=360/Ov.length,w=140;return o.jsxs("div",{className:"flex flex-col items-center gap-6",children:[o.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),o.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",kT," Flux for a daily spin"]}),o.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[o.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),o.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl overflow-visible",children:o.jsxs("g",{style:{transform:`rotate(${i}deg)`,transformOrigin:"0px 0px",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:h,children:[Ov.map((j,R)=>{const I=(R*S-90)*(Math.PI/180),L=((R+1)*S-90)*(Math.PI/180),C=w*Math.cos(I),P=w*Math.sin(I),N=w*Math.cos(L),A=w*Math.sin(L),E=S>180?1:0,V=((R+.5)*S-90)*(Math.PI/180),D=w*.65*Math.cos(V),U=w*.65*Math.sin(V),$=(R+.5)*S;return o.jsxs("g",{children:[o.jsx("path",{d:`M0,0 L${C},${P} A${w},${w} 0 ${E},1 ${N},${A} Z`,fill:j.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),o.jsx("text",{x:D,y:U,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${$}, ${D}, ${U})`,children:j.label})]},j.id)}),o.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),o.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&o.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[o.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),o.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),o.jsx("button",{onClick:T,disabled:!v,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${v?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${kT} Flux)`})]})};function RTe(t,e){const[r,n]=k.useState(e);return k.useEffect(()=>{const a=Re.subscribeToBossShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}function MTe(t){const[e,r]=k.useState([]);return k.useEffect(()=>{const n=Re.subscribeToBossDamageLog(t,r);return()=>n()},[t]),e}const PTe=({boss:t,userId:e,attacking:r,onAttack:n,lastHit:a})=>{var T;const i=RTe(t.id,t.maxHp),s=MTe(t.id),c=i/t.maxHp*100,d=new Date(t.deadline).getTime()-Date.now(),h=Math.max(0,Math.floor(d/36e5)),p=s.reduce((S,w)=>(S[w.userId]||(S[w.userId]={name:w.userName,total:0}),S[w.userId].total+=w.damage,S),{}),m=Object.entries(p).sort(([,S],[,w])=>w.total-S.total).slice(0,5),y=((T=p[e])==null?void 0:T.total)||0,v=(a==null?void 0:a.bossId)===t.id;return o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[v&&o.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-black text-red-400",children:t.name}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[o.jsx(Js,{className:"w-3 h-3"}),h>0?`${h}h left`:"Expiring soon"]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[i.toLocaleString()," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp.toLocaleString()})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:o.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${c>50?"bg-gradient-to-r from-red-600 to-red-500":c>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${c}%`}})})]}),v&&a&&o.jsx("div",{className:"text-center animate-bounce",children:o.jsxs("span",{className:`text-xl font-black ${a.isCrit?"text-yellow-400 text-2xl":"text-red-400"}`,children:["-",a.damage,a.isCrit&&" CRIT!"]})}),y>0&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[o.jsx(To,{className:"w-3 h-3"}),"Your total damage: ",o.jsx("span",{className:"text-white font-bold",children:y})]}),m.length>0&&o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[o.jsx(is,{className:"w-3 h-3"})," Top Attackers"]}),m.map(([S,w],j)=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:`${S===e?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",j+1," ",w.name]}),o.jsxs("span",{className:"text-red-400 font-mono",children:[w.total," dmg"]})]},S))]}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-yellow-400"})," ",t.completionRewards.xp," XP"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-cyan-400",children:"~"})," ",t.completionRewards.flux," Flux"]}),t.completionRewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.completionRewards.itemRarity," item"]})]}),o.jsxs("button",{onClick:()=>n(t.id),disabled:!!r,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 ${r===t.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:[o.jsx(Bd,{className:"w-4 h-4"}),r===t.id?"Attacking...":"Attack!"]}),o.jsx("p",{className:"text-[10px] text-gray-600 text-center",children:"Damage scales with your equipped gear stats"})]})]})},DTe=({userId:t,userName:e,classType:r})=>{const[n,a]=k.useState([]),[i,s]=k.useState(null),[c,d]=k.useState(null),h=mi();k.useEffect(()=>{let m;try{m=Re.subscribeToBossEncounters(y=>{const v=y.filter(T=>!T.classType||T.classType===r||T.classType==="GLOBAL");a(v)})}catch{}return()=>m==null?void 0:m()},[r]);const p=async m=>{if(!i){s(m);try{const y=await Re.dealBossDamage(m,e,r||"");if(Un.bossHit(),d({bossId:m,damage:y.damageDealt,isCrit:y.isCrit}),setTimeout(()=>d(null),2e3),y.bossDefeated)Un.bossDefeated(),h.success("Boss defeated! Rewards incoming!");else{const v=y.isCrit?" CRITICAL HIT!":"";h.info(`Dealt ${y.damageDealt} damage!${v} (+${y.xpEarned} XP)`)}}catch(y){h.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[o.jsx(fle,{className:"w-5 h-5"})," Active Threats"]}),n.map(m=>o.jsx(PTe,{boss:m,userId:t,userName:e,attacking:i,onAttack:p,lastHit:c},m.id))]})},LTe=({playerAppearance:t,playerEquipped:e,playerEvolutionLevel:r=1,bossAppearance:n,attackState:a,damage:i,playerHpPercent:s,bossHpPercent:c})=>{const[d,h]=k.useState(!1),[p,m]=k.useState(!1),[y,v]=k.useState(null),T=(n==null?void 0:n.bossType)||"BRUTE",S=(n==null?void 0:n.hue)??0;return k.useEffect(()=>{if(a==="player-attack"&&i){h(!0),v({value:i,side:"right"});const w=setTimeout(()=>h(!1),500),j=setTimeout(()=>v(null),1200);return()=>{clearTimeout(w),clearTimeout(j)}}else if(a==="boss-attack"&&i){m(!0),v({value:i,side:"left"});const w=setTimeout(()=>m(!1),500),j=setTimeout(()=>v(null),1200);return()=>{clearTimeout(w),clearTimeout(j)}}},[a,i]),o.jsxs("div",{className:"relative w-full h-32 flex items-end justify-between px-2 overflow-hidden select-none",children:[o.jsx("div",{className:"absolute bottom-2 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/10 to-transparent"}),o.jsxs("div",{className:`relative w-16 h-24 flex-shrink-0 transition-transform duration-300 ${a==="player-attack"?"translate-x-8 scale-110":""} ${p?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="player-attack"?"translateX(2rem) scale(1.1)":void 0},children:[o.jsx(Vg,{equipped:e,appearance:t,evolutionLevel:r}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${s>50?"bg-emerald-500":s>25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${s}%`}})})]}),o.jsxs("div",{className:"flex-1 relative flex items-center justify-center",children:[o.jsx("span",{className:"text-[10px] font-black text-gray-600 uppercase tracking-widest opacity-60",children:"vs"}),d&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none animate-[fadeIn_0.1s]",viewBox:"0 0 100 80",children:[o.jsx("line",{x1:"20",y1:"60",x2:"80",y2:"20",stroke:"url(#slash-grad)",strokeWidth:"3",strokeLinecap:"round",className:"animate-[slashDraw_0.3s_ease-out]"}),o.jsx("line",{x1:"25",y1:"50",x2:"75",y2:"30",stroke:"url(#slash-grad)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.5",className:"animate-[slashDraw_0.3s_0.1s_ease-out]"}),o.jsx("defs",{children:o.jsxs("linearGradient",{id:"slash-grad",x1:"0",y1:"0",x2:"1",y2:"0",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0"}),o.jsx("stop",{offset:"50%",stopColor:"#fbbf24"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0"})]})})]}),p&&o.jsxs("svg",{className:"absolute inset-0 pointer-events-none",viewBox:"0 0 100 80",children:[o.jsx("circle",{cx:"25",cy:"40",r:"12",fill:"none",stroke:"#ef4444",strokeWidth:"2",opacity:"0.8",className:"animate-[expandRing_0.5s_ease-out_forwards]"}),o.jsx("circle",{cx:"25",cy:"40",r:"6",fill:"#ef4444",opacity:"0.3",className:"animate-[expandRing_0.4s_0.1s_ease-out_forwards]"})]}),y&&o.jsxs("div",{className:`absolute text-lg font-black animate-[floatUp_1.2s_ease-out_forwards] ${y.side==="right"?"right-4 text-amber-400":"left-4 text-red-400"}`,style:{top:"10%"},children:["-",y.value]})]}),o.jsxs("div",{className:`relative w-20 h-28 flex-shrink-0 transition-transform duration-300 ${a==="boss-attack"?"-translate-x-8 scale-110":""} ${d?"animate-[shake_0.3s_ease-in-out]":""}`,style:{transform:a==="boss-attack"?"translateX(-2rem) scale(1.1)":d?void 0:"scaleX(-1)",...d?{}:{filter:void 0}},children:[o.jsx("div",{style:{transform:a==="boss-attack"?"scaleX(-1)":void 0},children:o.jsx(bG,{bossType:T,hue:S})}),o.jsx("div",{className:"absolute -bottom-1 left-0 right-0 h-1 bg-white/10 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c>50?"bg-red-500":c>25?"bg-orange-500":"bg-yellow-500"}`,style:{width:`${c}%`}})})]}),o.jsx("style",{children:`
                @keyframes floatUp {
                    0% { opacity: 1; transform: translateY(0); }
                    100% { opacity: 0; transform: translateY(-40px); }
                }
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    20% { transform: translateX(-4px); }
                    40% { transform: translateX(4px); }
                    60% { transform: translateX(-3px); }
                    80% { transform: translateX(2px); }
                }
                @keyframes expandRing {
                    0% { r: 4; opacity: 0.8; }
                    100% { r: 20; opacity: 0; }
                }
                @keyframes slashDraw {
                    0% { stroke-dasharray: 100; stroke-dashoffset: 100; opacity: 0; }
                    50% { opacity: 1; }
                    100% { stroke-dashoffset: 0; opacity: 0; }
                }
            `})]})};function BTe(t){return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}function $Te(t){let e=0;for(let r=0;r<t.length;r++)e=Math.imul(31,e)+t.charCodeAt(r)|0;return e}function UTe(t,e){const r=[...t],n=BTe(e);for(let a=r.length-1;a>0;a--){const i=Math.floor(n()*(a+1));[r[a],r[i]]=[r[i],r[a]]}return r}function zTe(t,e){const[r,n]=k.useState(e);return k.useEffect(()=>{const a=Re.subscribeToBossQuizShards(t,i=>{n(Math.max(0,e-i))});return()=>a()},[t,e]),r}const VTe=({modifier:t})=>{const e=zT[t.type];return e?o.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-pink-500/10 border border-pink-500/20 text-[9px] font-bold text-pink-400 animate-in fade-in slide-in-from-bottom-1 duration-300",children:[o.jsx(A2,{className:"w-2.5 h-2.5"}),t.label||e.name,e.hasValue&&t.value!==void 0&&o.jsxs("span",{className:"text-pink-300 ml-0.5",children:[t.value,e.unit]})]}):null},FTe=({quiz:t,progress:e})=>{var m,y;const r=e==null?void 0:e.combatStats,n=e==null?void 0:e.rewardTier,a=e==null?void 0:e.rewardMultiplier,i=e==null?void 0:e.participated,s=(r==null?void 0:r.questionsAttempted)||0,c=(r==null?void 0:r.questionsCorrect)||0,d=s>0?Math.round(c/s*100):0,h=n&&n>0?`#${n}`:null,p=["text-yellow-400","text-gray-300","text-amber-600","text-blue-400","text-purple-400"];return o.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-700",children:[o.jsxs("div",{className:"text-center py-4",children:[o.jsx(rH,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),o.jsx("h4",{className:"text-lg font-black text-yellow-400",children:"Boss Defeated!"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[t.bossName," has been vanquished"]})]}),i?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-yellow-500/20",children:[h&&o.jsxs("div",{className:`text-2xl font-black ${p[(n||1)-1]||"text-gray-400"}`,children:[h," Place"]}),o.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2 text-sm",children:[o.jsxs("span",{className:"text-yellow-400 font-bold",children:[Math.round((((m=t.rewards)==null?void 0:m.xp)||0)*(a||1))," XP"]}),o.jsxs("span",{className:"text-cyan-400 font-bold",children:[Math.round((((y=t.rewards)==null?void 0:y.flux)||0)*(a||1))," Flux"]}),a&&a>1&&o.jsxs("span",{className:"text-pink-400 font-bold text-xs",children:["(",a,"x bonus!)"]})]})]}):i===!1?o.jsxs("div",{className:"text-center p-3 rounded-xl bg-red-500/5 border border-red-500/20",children:[o.jsx("p",{className:"text-sm text-red-400 font-bold",children:"Did not qualify for rewards"}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:["Needed ",Im," attempts and ",Rm," correct answer"]})]}):null,r&&o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx($7,{className:"w-3 h-3"})," Damage Dealt"]}),o.jsx("div",{className:"text-lg font-black text-amber-400",children:r.totalDamageDealt.toLocaleString()})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Yo,{className:"w-3 h-3"})," Accuracy"]}),o.jsxs("div",{className:"text-lg font-black text-green-400",children:[d,"%"]}),o.jsxs("div",{className:"text-[10px] text-gray-500",children:[c,"/",s]})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx($a,{className:"w-3 h-3"})," Critical Hits"]}),o.jsx("div",{className:"text-lg font-black text-red-400",children:r.criticalHits})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(To,{className:"w-3 h-3"})," Damage Mitigated"]}),o.jsx("div",{className:"text-lg font-black text-cyan-400",children:r.damageReduced})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(C2,{className:"w-3 h-3"})," Longest Streak"]}),o.jsx("div",{className:"text-lg font-black text-purple-400",children:r.longestStreak})]}),o.jsxs("div",{className:"bg-black/30 rounded-xl p-3 border border-white/5",children:[o.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-gray-500 uppercase font-bold mb-1",children:[o.jsx(Qv,{className:"w-3 h-3"})," Healing Received"]}),o.jsx("div",{className:"text-lg font-black text-emerald-400",children:r.healingReceived})]})]}),r&&o.jsx("div",{className:"grid grid-cols-3 gap-2",children:["EASY","MEDIUM","HARD"].map(v=>{const T=r.correctByDifficulty[v]||0,S=r.incorrectByDifficulty[v]||0,w=T+S,j=w>0?Math.round(T/w*100):0;return o.jsxs("div",{className:`rounded-lg p-2 border text-center ${v==="EASY"?"border-green-500/20 bg-green-500/5":v==="MEDIUM"?"border-yellow-500/20 bg-yellow-500/5":"border-red-500/20 bg-red-500/5"}`,children:[o.jsx("div",{className:`text-[9px] font-bold uppercase ${v==="EASY"?"text-green-400":v==="MEDIUM"?"text-yellow-400":"text-red-400"}`,children:v}),o.jsxs("div",{className:"text-sm font-black text-white",children:[j,"%"]}),o.jsxs("div",{className:"text-[9px] text-gray-500",children:[T,"/",w]})]},v)})})]})},qTe=({quiz:t,userId:e,onAnswer:r,playerStats:n,playerAppearance:a,playerEquipped:i,playerEvolutionLevel:s})=>{var ne,re,Ae,Se;const c=zTe(t.id,t.maxHp),d=c/t.maxHp*100,h=se.useMemo(()=>UTe(t.questions,$Te(e+t.id)),[t.questions,e,t.id]),[p,m]=k.useState(null),[y,v]=k.useState(!1);k.useEffect(()=>{const ze=Re.subscribeToBossQuizProgress(e,t.id,He=>{m(He),v(!0)});return()=>ze()},[e,t.id]);const T=se.useMemo(()=>n?vG(n).maxHp:100,[n]),[S,w]=k.useState(-1),[j,R]=k.useState(-1),[I,L]=k.useState(T),[C,P]=k.useState(!1),[N,A]=k.useState(null),[E,V]=k.useState(null),[D,U]=k.useState(!1),[$,Q]=k.useState("idle"),[K,H]=k.useState(void 0);k.useEffect(()=>{if(y&&S===-1)if(p){const ze=new Set(p.answeredQuestions||[]),He=h.findIndex(he=>!ze.has(he.id));w(He===-1?h.length:He);const st=p.currentHp,W=p.maxHp>0?p.maxHp:T;L(W),st>=0?(R(st),st===0&&P(!0)):R(W)}else w(0),R(T),L(T)},[y]),k.useEffect(()=>{L(T)},[T]);const J=I>0?(j===-1?I:j)/I*100:100,ie=S>=0?h[S%h.length]:void 0,pe=S>=h.length,me=c<=0,X=async(ze,He,st)=>{D||C||(U(!0),A(st),r(ze,He,st,{onResult:W=>{W.playerHp!==void 0&&R(W.playerHp),W.playerMaxHp!==void 0&&L(W.playerMaxHp),W.knockedOut&&P(!0),W.correct?(H(W.damage),Q("player-attack"),setTimeout(()=>Q("idle"),800)):!W.shieldBlocked&&W.playerDamage&&W.playerDamage>0&&(H(W.playerDamage),Q("boss-attack"),setTimeout(()=>Q("idle"),800)),V(W),W.knockedOut||setTimeout(()=>{w(he=>he+1),A(null),V(null)},2e3),U(!1)}}))};return o.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-base font-black text-amber-400",children:t.bossName}),o.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),t.modifiers&&t.modifiers.length>0&&!me&&o.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.modifiers.map((ze,He)=>o.jsx(VTe,{modifier:ze},He))}),me?o.jsx(FTe,{quiz:t,progress:p}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-xl bg-black/30 border border-white/5 overflow-hidden",children:o.jsx(LTe,{playerAppearance:a,playerEquipped:i,playerEvolutionLevel:s,bossAppearance:t.bossAppearance,attackState:$,damage:K,playerHpPercent:J,bossHpPercent:d})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-red-400 font-mono",children:[c," HP"]}),o.jsx("span",{className:"text-gray-600",children:t.maxHp})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${d}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[o.jsxs("span",{className:"text-emerald-400 font-mono flex items-center gap-1",children:[o.jsx(Qv,{className:"w-3 h-3"})," Your HP: ",j===-1?I:j]}),o.jsx("span",{className:"text-gray-600",children:I})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-2.5 overflow-hidden",children:o.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${J>50?"bg-gradient-to-r from-emerald-600 to-green-500":J>25?"bg-gradient-to-r from-yellow-600 to-orange-500":"bg-gradient-to-r from-red-700 to-red-500"}`,style:{width:`${J}%`}})})]}),C?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(qh,{className:"w-12 h-12 text-red-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm font-bold text-red-400",children:"Knocked Out!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The boss has defeated you. Gear up with better armor (Analysis) and health (Charisma) to survive longer."})]}):pe?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Mn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):ie?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[o.jsxs("span",{children:["Question ",S+1," / ",h.length]}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${ie.difficulty==="HARD"?"bg-red-500/20 text-red-400":ie.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[ie.difficulty,ie.damageBonus?` (+${ie.damageBonus} dmg)`:""]})]}),o.jsx("p",{className:"text-sm text-white font-medium",children:ie.stem}),o.jsx("div",{className:"space-y-2",children:ie.options.map((ze,He)=>{const st=N===He,W=E&&st,he=E==null?void 0:E.correct;return o.jsx("button",{onClick:()=>X(t.id,ie.id,He),disabled:D||!!E||C,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${W&&he?"border-green-500/50 bg-green-500/10 text-green-400":W&&!he?"border-red-500/50 bg-red-500/10 text-red-400":st?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+He),"."]}),o.jsx("span",{children:ze}),W&&he&&o.jsx(Mn,{className:"w-4 h-4 text-green-400 ml-auto"}),W&&!he&&o.jsx(qh,{className:"w-4 h-4 text-red-400 ml-auto"})]})},He)})}),E&&E.correct&&o.jsxs("div",{className:"text-center space-y-1",children:[o.jsxs("div",{className:"text-sm text-amber-400 font-bold animate-bounce",children:[o.jsx($a,{className:"w-4 h-4 inline mr-1"}),E.isCrit?"CRITICAL HIT! ":"","-",E.damage," HP to boss!"]}),E.healAmount&&E.healAmount>0&&o.jsxs("div",{className:"text-xs text-emerald-400 font-bold",children:[o.jsx(Qv,{className:"w-3 h-3 inline mr-1"})," +",E.healAmount," HP healed"]})]}),E&&!E.correct&&E.shieldBlocked&&o.jsxs("div",{className:"text-center text-sm text-cyan-400 font-bold animate-bounce",children:[o.jsx(To,{className:"w-4 h-4 inline mr-1"}),"Shield blocked the attack!"]}),E&&!E.correct&&!E.shieldBlocked&&E.playerDamage&&E.playerDamage>0&&o.jsxs("div",{className:"text-center text-sm text-red-400 font-bold animate-bounce",children:[o.jsx(Qv,{className:"w-4 h-4 inline mr-1"}),"Boss hits you for ",E.playerDamage," damage!"]})]}):null,p&&!me&&!C&&!pe&&o.jsx("div",{className:"text-[9px] text-gray-600 text-center pt-1",children:(((ne=p.combatStats)==null?void 0:ne.questionsAttempted)||0)<Im||(((re=p.combatStats)==null?void 0:re.questionsCorrect)||0)<Rm?o.jsxs("span",{children:["Rewards: ",((Ae=p.combatStats)==null?void 0:Ae.questionsAttempted)||0,"/",Im," attempts"," ",""," ",((Se=p.combatStats)==null?void 0:Se.questionsCorrect)||0,"/",Rm," correct needed"]}):o.jsx("span",{className:"text-green-600",children:"Reward participation met"})}),o.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[o.jsx("span",{children:"Defeat rewards:"}),o.jsxs("span",{className:"text-yellow-400",children:[t.rewards.xp," XP"]}),o.jsxs("span",{className:"text-cyan-400",children:[t.rewards.flux," Flux"]}),t.rewards.itemRarity&&o.jsxs("span",{className:"text-purple-400",children:[t.rewards.itemRarity," item"]})]})]})]})},HTe=({userId:t,classType:e,userSection:r,userClassSections:n,playerStats:a,playerAppearance:i,playerEquipped:s,playerEvolutionLevel:c})=>{const[d,h]=k.useState([]),p=mi();k.useEffect(()=>{let v;try{v=Re.subscribeToBossQuizzes(e,h)}catch{}return()=>v==null?void 0:v()},[e]);const m=d.filter(v=>{var T;if(v.scheduledAt&&new Date(v.scheduledAt)>new Date)return!1;if((T=v.targetSections)!=null&&T.length){const S=v.classType!=="GLOBAL"?v.classType:e,w=(n==null?void 0:n[S])||(n==null?void 0:n[e])||r||"";if(!v.targetSections.includes(w))return!1}return!0}),y=async(v,T,S,w)=>{try{const j=await Re.answerBossQuiz(v,T,S);j.alreadyAnswered?p.info("Already answered this question!"):j.correct?(Un.bossHit(),j.bossDefeated?(Un.bossDefeated(),p.success("Boss defeated! Completion rewards distributed to all contributors!")):j.isCrit?p.success(`CRITICAL HIT! Dealt ${j.damage} damage!`):p.success(`Correct! Dealt ${j.damage} damage!`)):j.shieldBlocked?p.info("Shield blocked the attack!"):j.playerDamage&&j.playerDamage>0?p.error(`Wrong! The boss hits you for ${j.playerDamage} damage!`):p.error("Incorrect. No damage dealt."),j.knockedOut&&Un.bossHit(),w.onResult(j)}catch(j){p.error(j instanceof Error?j.message:"Failed to submit answer"),w.onResult({correct:!1,damage:0})}};return m.length===0?null:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[o.jsx(Ho,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),m.map(v=>o.jsx(qTe,{quiz:v,userId:t,onAnswer:y,playerStats:a,playerAppearance:i,playerEquipped:s||{},playerEvolutionLevel:c||1},v.id))]})},GTe=({activeChallenges:t,classType:e})=>{const[r,n]=k.useState([]),[a,i]=k.useState(null),s=mi();k.useEffect(()=>{let y;try{y=Re.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>t.find(v=>v.challengeId===y),d=async y=>{if(!a){i(y);try{const v=await Re.claimDailyChallenge(y,e);Un.dailyReward(),s.success(`Claimed! +${v.xpReward} XP${v.fluxReward?` +${v.fluxReward} Flux`:""}`)}catch(v){s.error(v instanceof Error?v.message:"Claim failed")}i(null)}};if(r.length===0)return null;const h=r.filter(y=>!y.isWeekly),p=r.filter(y=>y.isWeekly),m=y=>{const v=c(y.id),T=(v==null?void 0:v.progress)||0,S=(v==null?void 0:v.completed)||!1,w=!!(v!=null&&v.claimedAt),j=Math.min(100,T/y.target*100);return o.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?o.jsx(Mn,{className:"w-4 h-4 text-green-400"}):S?o.jsx(Goe,{className:"w-4 h-4 text-yellow-400"}):o.jsx(Yo,{className:"w-4 h-4 text-gray-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&o.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),o.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&o.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[o.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${j}%`}})}),o.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&o.jsx("button",{onClick:()=>d(y.id),disabled:!!a,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:a===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Poe,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),o.jsx("div",{className:"space-y-2",children:h.map(m)}),p.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),o.jsx("div",{className:"space-y-2",children:p.map(m)})]})]})},CT={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},gz=({value:t,onChange:e,label:r})=>o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:r}),o.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(n=>o.jsx("button",{type:"button",onClick:()=>e(n),className:`transition ${n<=t?"text-yellow-400":"text-gray-600 hover:text-gray-400"}`,children:o.jsx(k2,{className:`w-5 h-5 ${n<=t?"fill-yellow-400":""}`})},n))})]}),WTe=({role:t,onSubmit:e,submitting:r})=>{const[n,a]=k.useState(0),[i,s]=k.useState(0),[c,d]=k.useState(""),h=t==="requester",p=()=>{n===0||i===0||c.trim().length<20||e({rating:n,communicationRating:i,response:c.trim(),submittedAt:new Date().toISOString()})},m=n>0&&i>0&&c.trim().length>=20;return o.jsxs("div",{className:"mt-3 p-3 bg-black/20 border border-white/10 rounded-xl space-y-3",children:[o.jsx("p",{className:"text-xs font-bold text-white",children:h?"How was your tutoring experience?":"How did the tutoring session go?"}),o.jsx(gz,{value:n,onChange:a,label:h?"Overall helpfulness":"Overall session quality"}),o.jsx(gz,{value:i,onChange:s,label:h?"Tutor communication":"Student engagement"}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wide block mb-1",children:h?"What did you learn? How did this help you?":"What did you teach? How well do you think it went?"}),o.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:h?"Describe what you learned and how the tutor helped you understand the material...":"Describe what you taught, the approach you used, and how well the student understood...",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 resize-none h-20 focus:outline-none focus:border-purple-500/50",maxLength:500}),o.jsx("div",{className:"flex justify-between mt-1",children:o.jsx("span",{className:`text-[10px] ${c.trim().length<20?"text-red-400":"text-gray-500"}`,children:c.trim().length<20?`${20-c.trim().length} more characters needed`:`${c.trim().length}/500`})})]}),o.jsxs("button",{onClick:p,disabled:!m||r,className:"w-full py-2 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition disabled:opacity-40 disabled:cursor-not-allowed flex items-center justify-center gap-1.5",children:[o.jsx(hH,{className:"w-3 h-3"})," ",r?"Submitting...":"Submit Feedback"]})]})},KTe=({userId:t,userName:e,classType:r,isAdmin:n})=>{const[a,i]=k.useState([]),[s,c]=k.useState(!1),[d,h]=k.useState(""),[p,m]=k.useState(!1),[y,v]=k.useState(null),[T,S]=k.useState(!1),w=mi();k.useEffect(()=>{let E;try{E=Re.subscribeToTutoringSessions(r,i)}catch{}return()=>E==null?void 0:E()},[r]);const j=async()=>{if(!(!d.trim()||p)){m(!0);try{await Re.createTutoringRequest(t,e,d,r),w.success("Tutoring request posted!"),h(""),c(!1)}catch{w.error("Failed to create request")}m(!1)}},R=async E=>{try{await Re.claimTutorRole(E,t,e),w.success("You are now the tutor for this session!")}catch{w.error("Failed to claim tutor role")}},I=async E=>{try{await Re.startTutoringSession(E),w.success("Session started!")}catch{w.error("Failed to start session")}},L=async(E,V)=>{S(!0);try{const D=a.find($=>$.id===E);if(!D)throw new Error("Session not found");const U=D.requesterId===t?"requester":"tutor";await Re.submitTutoringFeedback(E,U,V),w.success("Feedback submitted! "+(U==="requester"?D.tutorFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for tutor feedback.":D.requesterFeedback?"Both feedbacks received  awaiting admin verification.":"Waiting for student feedback.")),v(null)}catch{w.error("Failed to submit feedback")}S(!1)},C=async(E,V)=>{try{const D=await Re.completeTutoring(E,V);w.success(`Verified! Tutor earned ${D.xpAwarded} XP and ${D.fluxAwarded} Flux`)}catch{w.error("Failed to verify session")}},P=a.filter(E=>E.status==="OPEN"),N=a.filter(E=>["MATCHED","IN_PROGRESS"].includes(E.status)),A=a.filter(E=>E.status==="VERIFIED");return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[o.jsx(Eu,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),o.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Mi,{className:"w-3 h-3"})," Request Help"]})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[o.jsx("input",{value:d,onChange:E=>h(E.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:j,disabled:!d.trim()||p,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:p?"Posting...":"Post Request"}),o.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),P.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Qoe,{className:"w-3 h-3"})," Open Requests"]}),P.map(E=>o.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-white font-medium",children:E.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",E.requesterName," - ",new Date(E.createdAt).toLocaleDateString()]})]}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${CT[E.status]}`,children:E.status})]}),E.requesterId!==t&&o.jsxs("button",{onClick:()=>R(E.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[o.jsx(is,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},E.id))]}),N.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Js,{className:"w-3 h-3"})," Active Sessions"]}),N.map(E=>{const V=E.requesterId===t||E.tutorId===t,D=E.requesterId===t,U=E.tutorId===t,$=D?E.requesterFeedback:E.tutorFeedback,Q=D?E.tutorFeedback:E.requesterFeedback;return o.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:E.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[E.requesterName,"  ",E.tutorName||"Finding tutor..."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2 flex-wrap",children:[o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${CT[E.status]}`,children:E.status}),E.status==="MATCHED"&&V&&o.jsx("button",{onClick:()=>I(E.id),className:"px-3 py-1 bg-purple-600/20 border border-purple-500/30 text-purple-400 text-xs font-bold rounded-lg hover:bg-purple-600/30 transition",children:"Start Session"}),E.status==="IN_PROGRESS"&&V&&!$&&o.jsxs("button",{onClick:()=>v(E.id),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Mn,{className:"w-3 h-3 inline mr-1"})," Submit Feedback"]}),E.status==="IN_PROGRESS"&&V&&$&&!Q&&o.jsxs("span",{className:"text-[10px] text-amber-400 bg-amber-500/10 px-2 py-0.5 rounded-full border border-amber-500/20",children:["Feedback submitted  waiting for ",D?"tutor":"student"]}),n&&E.tutorId&&E.status!=="VERIFIED"&&o.jsxs("button",{onClick:()=>C(E.id,E.tutorId),className:"px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[o.jsx(Mn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]}),y===E.id&&E.status==="IN_PROGRESS"&&(U||D)&&o.jsx(WTe,{role:D?"requester":"tutor",onSubmit:K=>L(E.id,K),submitting:T})]},E.id)})]}),a.filter(E=>E.status==="COMPLETED").length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-amber-600 flex items-center gap-1",children:[o.jsx(Js,{className:"w-3 h-3"})," Awaiting Verification"]}),a.filter(E=>E.status==="COMPLETED").map(E=>o.jsxs("div",{className:"p-3 bg-amber-500/5 border border-amber-500/20 rounded-xl",children:[o.jsx("p",{className:"text-sm text-white font-medium",children:E.topic}),o.jsxs("p",{className:"text-[10px] text-gray-500",children:[E.requesterName,"  ",E.tutorName]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[o.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full border bg-amber-500/10 text-amber-400 border-amber-500/20",children:"Awaiting teacher verification"}),E.requesterFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Student feedback "}),E.tutorFeedback&&o.jsx("span",{className:"text-[10px] text-green-400",children:"Tutor feedback "})]}),n&&E.tutorId&&o.jsxs("button",{onClick:()=>C(E.id,E.tutorId),className:"mt-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[o.jsx(Mn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},E.id))]}),A.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[o.jsx(Mn,{className:"w-3 h-3 text-green-400"})," Completed (",A.length,")"]}),A.slice(0,3).map(E=>o.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[o.jsx("span",{className:"text-xs text-gray-400 truncate",children:E.topic}),o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${CT[E.status]}`,children:E.status})]},E.id))]}),a.length===0&&o.jsxs("div",{className:"text-center py-6 text-gray-600",children:[o.jsx(Eu,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),o.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},QTe=({item:t,onClose:e})=>{const[r,n]=k.useState("chest"),a=la(t.rarity);k.useEffect(()=>{Un.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const i={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:r==="reveal"?e:void 0,children:o.jsxs("div",{className:"text-center space-y-6",children:[r==="chest"&&o.jsxs("div",{className:"animate-in zoom-in duration-500",children:[o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),o.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),o.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[o.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),o.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),o.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),r==="opening"&&o.jsx("div",{className:"animate-in zoom-in duration-300",children:o.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[o.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),o.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),o.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[o.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>o.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:t.rarity==="UNIQUE"?"#fbbf24":t.rarity==="RARE"?"#3b82f6":"#22c55e",children:[o.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),o.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),r==="reveal"&&o.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[o.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${a.border} ${a.bg} shadow-2xl ${i[t.rarity]}`,children:[o.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${a.text} mb-2`,children:t.rarity}),o.jsx("h3",{className:`text-lg font-black ${a.text}`,children:t.name}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.slot}),o.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(t.stats).filter(([,s])=>s&&s>0).map(([s,c])=>o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-gray-400 capitalize",children:s}),o.jsxs("span",{className:`font-bold ${a.text}`,children:["+",c]})]},s))}),t.affixes.length>0&&o.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:t.affixes.map((s,c)=>o.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),t.setId&&o.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(t.sockets||0)>0&&o.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:t.sockets||0}).map((s,c)=>o.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),o.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},XTe=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],YTe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],ZTe=({user:t,classType:e,onClose:r})=>{var P,N,A;const[n,a]=se.useState(!1),i=t.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=i.level||1,c=Kh(s),d=vX(s),{equipped:h,appearance:p}=Jd(t,e),m=sE({gamification:{...i,equipped:h}}),y=Qh(h),v=((P=i.classXp)==null?void 0:P[e])||0,T=(N=t.settings)==null?void 0:N.privacyMode,S=T?i.codename||"Unknown Agent":t.name,w=Object.values(h).filter(Boolean),j=yX(w),R=i.unlockedAchievements||[],I=k.useMemo(()=>xj.filter(E=>R.includes(E.id)),[R]),L=Math.max(m.tech,m.focus,m.analysis,m.charisma,1),C=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${t.id}`),a(!0),setTimeout(()=>a(!1),2e3)};return o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:E=>E.stopPropagation(),children:[o.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(p==null?void 0:p.hue)||180}, 70%, 30%), transparent 70%)`}}),o.jsxs("div",{className:"relative flex items-center gap-6",children:[o.jsx("div",{className:"w-32 h-44 shrink-0",children:o.jsx(Vg,{equipped:h,appearance:p})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),o.jsx("button",{onClick:C,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?o.jsx(lu,{className:"w-4 h-4 text-green-400"}):o.jsx(kx,{className:"w-4 h-4"})})]}),o.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),o.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),o.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:v.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"text-xl font-black text-orange-400",children:[i.engagementStreak||0,"w"]}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-xl font-black text-purple-400",children:R.length}),o.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),i.specialization&&o.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:o.jsx("span",{className:"text-xs text-gray-300 font-bold",children:i.specialization})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Yo,{className:"w-3 h-3"})," Combat Stats"]}),o.jsx("div",{className:"space-y-2",children:XTe.map(({key:E,label:V,color:D,bg:U})=>{const $=m[E]||0,Q=$/L*100;return o.jsxs("div",{className:"space-y-0.5",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-xs text-gray-400",children:V}),o.jsx("span",{className:`text-xs font-bold ${D}`,children:$})]}),o.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:o.jsx("div",{className:`h-1.5 rounded-full ${U} transition-all`,style:{width:`${Q}%`}})})]},E)})})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"space-y-1.5",children:YTe.map(E=>{const V=h[E];if(!V)return o.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[o.jsx("span",{className:"font-mono w-12 text-[10px]",children:E}),o.jsx("span",{className:"italic",children:"Empty"})]},E);const D=la(V.rarity);return o.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${D.border} ${D.bg}`,children:[o.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:E}),o.jsx("span",{className:`text-xs font-bold truncate ${D.text}`,children:V.name})]},E)})})]}),j.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[o.jsx(k2,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),j.map(({set:E,activeBonus:V})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[o.jsx("span",{className:"text-purple-400 font-bold",children:E.name}),o.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",V.label]})]},E.id))]})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(tc,{className:"w-3 h-3 text-yellow-400"})," Achievements (",R.length,")"]}),I.length>0?o.jsx("div",{className:"grid grid-cols-3 gap-2",children:I.slice(0,12).map(E=>o.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[o.jsx("div",{className:"text-xl",children:E.icon}),o.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:E.title})]},E.id))}):o.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(A2,{className:"w-3.5 h-3.5 text-orange-400"}),o.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),o.jsxs("span",{className:"text-orange-400 font-bold",children:[i.engagementStreak||0," weeks"]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx($7,{className:"w-3.5 h-3.5 text-red-400"}),o.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),o.jsx("span",{className:"text-red-400 font-bold",children:((A=i.completedQuests)==null?void 0:A.length)||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx(Eu,{className:"w-3.5 h-3.5 text-green-400"}),o.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),o.jsx("span",{className:"text-green-400 font-bold",children:i.tutoringSessionsCompleted||0})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsx($a,{className:"w-3.5 h-3.5 text-cyan-400"}),o.jsx("span",{className:"text-gray-400",children:"Total XP:"}),o.jsx("span",{className:"text-cyan-400 font-bold",children:(i.xp||0).toLocaleString()})]})]})]})]})]})]})})};function JTe(t){const{activatorEvent:e,draggingNodeRect:r,transform:n}=t;if(r&&e){const a=$g(e);return a?{...n,x:n.x+a.x-(r.left+r.width/2),y:n.y+a.y-(r.top+r.height/2)}:n}return n}const eAe={Textbook:o.jsx(_o,{className:"w-5 h-5"}),Simulation:o.jsx(lH,{className:"w-5 h-5 fill-current"}),"Lab Guide":o.jsx(N2,{className:"w-5 h-5"}),"Practice Set":o.jsx(Yo,{className:"w-5 h-5"}),Article:o.jsx(sH,{className:"w-5 h-5"}),"Video Lesson":o.jsx(fH,{className:"w-5 h-5"}),Supplemental:o.jsx(B7,{className:"w-5 h-5"})};let oh=0,OT=!1,IT=!1,yz="";const tAe=({user:t,assignments:e,submissions:r,enabledFeatures:n,onNavigate:a,onStartAssignment:i,studentTab:s="RESOURCES"})=>{var Fa,Ni,ls,gi,Tt,fe,Je,ct,Xt,dr,nn,Gr,mn,kr,Rs,cs,so,ll,us,ds,ja,ga,q,xe,Te,Ne,ht,Ot,Nt,Yt,wr,Zr;const c=mi(),{confirm:d}=al(),[h,p]=k.useState(new Set),[m,y]=k.useState(t.classType||((Fa=t.enrolledClasses)==null?void 0:Fa[0])||"Unassigned"),[v,T]=k.useState(null),[S,w]=k.useState([]),[j,R]=k.useState({}),[I,L]=k.useState(!1),[C,P]=k.useState(null);yz!==t.id&&(yz=t.id,oh=((Ni=t.gamification)==null?void 0:Ni.lastLevelSeen)||1,OT=!1,IT=!1),oh===0&&(oh=((ls=t.gamification)==null?void 0:ls.lastLevelSeen)||1);const N=s,[A,E]=k.useState(!1),[V,D]=k.useState(null),[U,$]=k.useState(!1),[Q,K]=k.useState(null),[H,J]=k.useState(null),[ie,pe]=k.useState(null),[me,X]=k.useState(null),[ne,re]=k.useState(null),[Ae,Se]=k.useState(null),[ze,He]=k.useState(!1),[st,W]=k.useState(null),[he,te]=k.useState(!1);k.useEffect(()=>{var $e,Me,ut;const oe=(($e=t.gamification)==null?void 0:$e.level)||1,ve=Math.max(((Me=t.gamification)==null?void 0:Me.lastLevelSeen)||1,oh);if(oe>ve){oh=oe;const tr=((ut=t.gamification)==null?void 0:ut.inventory)||[],Qt=tr.length>0?tr[tr.length-1]:null;P(Qt),L(!0),Un.levelUp()}},[(gi=t.gamification)==null?void 0:gi.level,(Tt=t.gamification)==null?void 0:Tt.lastLevelSeen,(fe=t.gamification)==null?void 0:fe.inventory]),k.useEffect(()=>{const oe=[];try{oe.push(Re.subscribeToXPEvents(ve=>{const $e=ve.find(Me=>{var ut,tr,Qt;if(!Me.isActive||Me.type!=="GLOBAL"&&Me.targetClass!==m||Me.scheduledAt&&new Date(Me.scheduledAt)>new Date)return!1;if((ut=Me.targetSections)!=null&&ut.length){const An=Me.type!=="GLOBAL"&&Me.targetClass?Me.targetClass:m,ka=((tr=t.classSections)==null?void 0:tr[An])||((Qt=t.classSections)==null?void 0:Qt[m])||t.section||"";if(!Me.targetSections.includes(ka))return!1}return!0});T($e||null)}))}catch{}try{oe.push(Re.subscribeToQuests(ve=>{const $e=t.enrolledClasses||(t.classType?[t.classType]:[]);w(ve.filter(Me=>{var tr,Qt;if(!Me.isActive)return!1;const ut=new Date;if(Me.startsAt&&new Date(Me.startsAt)>ut||Me.expiresAt&&new Date(Me.expiresAt)<ut||Me.targetClass&&!$e.includes(Me.targetClass))return!1;if((tr=Me.targetSections)!=null&&tr.length){const An=((Qt=t.classSections)==null?void 0:Qt[Me.targetClass||m])||t.section||"";if(!Me.targetSections.includes(An))return!1}return!0}))}))}catch{}try{oe.push(Re.subscribeToStudentPracticeProgress(t.id,R))}catch{}return()=>oe.forEach(ve=>ve())},[m]);const ae=((ct=(Je=t.gamification)==null?void 0:Je.classXp)==null?void 0:ct[m])||0,Ue=se.useRef(ae),Ye=se.useRef(m);k.useEffect(()=>{if(Ye.current!==m){Ye.current=m,Ue.current=ae;return}if(ae>Ue.current&&Ue.current>=0){const oe=ae-Ue.current;if(oe>0&&oe<500){Se(oe),Un.xpGain();const ve=setTimeout(()=>Se(null),2e3);return()=>clearTimeout(ve)}}Ue.current=ae},[ae]),k.useEffect(()=>{var $e;if(OT)return;OT=!0;const oe=new Date().toISOString().split("T")[0];(($e=t.gamification)==null?void 0:$e.lastLoginRewardDate)!==oe&&!he&&Re.claimDailyLogin().then(Me=>{Me.alreadyClaimed||(te(!0),Un.dailyReward(),c.success(`Daily login: +${Me.xpReward} XP, +${Me.fluxReward} Flux (${Me.streak}-day streak!)`))}).catch(()=>{})},[]),k.useEffect(()=>{IT||(IT=!0,Re.updateEngagementStreak().catch(()=>{}))},[]);const[xt,it]=k.useState([]);k.useEffect(()=>{let oe;try{oe=Re.subscribeToAnnouncements(it)}catch{}return()=>oe==null?void 0:oe()},[]);const Pt=k.useMemo(()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.dismissedAnnouncements)||[];return xt.filter($e=>{var Me,ut,tr;if(oe.includes($e.id)||$e.classType!=="GLOBAL"&&$e.classType!==m)return!1;if((Me=$e.targetSections)!=null&&Me.length){const Qt=$e.classType!=="GLOBAL"?$e.classType:m,An=((ut=t.classSections)==null?void 0:ut[Qt])||((tr=t.classSections)==null?void 0:tr[m])||t.section||"";if(!$e.targetSections.includes(An))return!1}return!0})},[xt,(Xt=t.gamification)==null?void 0:Xt.dismissedAnnouncements,m,t.classSections,t.section]),Ie=async oe=>{await Re.dismissAnnouncement(t.id,oe)},Be=()=>{var ve;const oe=((ve=t.gamification)==null?void 0:ve.level)||1;oh=oe,L(!1),P(null),Re.updateUserLastLevelSeen(t.id,oe).catch(()=>{})},rt=async oe=>{try{await Re.updateUserAppearance(t.id,oe,m),c.success("Profile updated!"),E(!1),K(null),J(null),pe(null),X(null),re(null)}catch{c.error("Failed to save  try again")}},ft=t.enrolledClasses||(t.classType?[t.classType]:[]),Ge=k.useMemo(()=>Jd(t,m),[t,m]),ue=Ge.equipped,Xe=Ge.inventory,wt=k.useMemo(()=>{const oe={tech:10,focus:10,analysis:10,charisma:10};return Object.values(ue).filter(Boolean).forEach($e=>{$e.stats&&Object.entries($e.stats).forEach(([Me,ut])=>{oe[Me]+=ut})}),oe},[ue]),yt=k.useMemo(()=>Qh(ue),[ue]),mt=k.useMemo(()=>{const oe=t.gamification||{},$e={...oe.achievementProgress||{}},Me=oe.xp||0,ut=oe.level||1,tr=oe.inventory||[],Qt=oe.completedQuests||[],An=oe.engagementStreak||0,ka=oe.loginStreak||0,Ms=oe.tutoringSessionsCompleted||0,Nn=oe.bossesDefeated||0,gn=oe.challengesCompleted||0,ko=oe.itemsCrafted||0,Cr=(hs,yi)=>{(!$e[hs]||yi>$e[hs])&&($e[hs]=yi)};return Cr("first_steps",Me),Cr("xp_5k",Me),Cr("xp_25k",Me),Cr("rising_star",ut),Cr("veteran",ut),Cr("elite",ut),Cr("legend",ut),Cr("collector_10",tr.length),Cr("collector_50",tr.length),Cr("gear_score_100",yt),Cr("gear_score_500",yt),Cr("first_mission",Qt.length),Cr("mission_5",Qt.length),Cr("mission_20",Qt.length),Cr("boss_slayer",Nn),Cr("streak_3",An),Cr("streak_8",An),Cr("streak_16",An),Cr("login_7",ka),Cr("login_30",ka),Cr("challenges_10",gn),Cr("tutor_1",Ms),Cr("tutor_10",Ms),Cr("tech_50",wt.tech),Cr("focus_50",wt.focus),Cr("analysis_50",wt.analysis),Cr("charisma_50",wt.charisma),Cr("craft_10",ko),$e},[t,yt,wt]),Vt=[{subject:"Tech",A:wt.tech,fullMark:100},{subject:"Focus",A:wt.focus,fullMark:100},{subject:"Analysis",A:wt.analysis,fullMark:100},{subject:"Charisma",A:wt.charisma,fullMark:100}],ur=k.useMemo(()=>{const oe={};return e.filter(ve=>{var $e,Me;if(ve.classType!==m||ve.status==="DRAFT"||ve.status==="ARCHIVED"||ve.scheduledAt&&new Date(ve.scheduledAt)>new Date)return!1;if(($e=ve.targetSections)!=null&&$e.length){const ut=((Me=t.classSections)==null?void 0:Me[m])||t.section||"";if(!ve.targetSections.includes(ut))return!1}return!0}).forEach(ve=>{var ut;const $e=r.find(tr=>tr.assignmentId===ve.id),Me=ve.unit||"General Resources";oe[Me]||(oe[Me]=[]),oe[Me].push({...ve,lastEngagement:$e&&$e.submittedAt||null,engagementTime:((ut=$e==null?void 0:$e.metrics)==null?void 0:ut.engagementTime)||0})}),oe},[e,r,m]),qr=oe=>{const ve=new Set(h);ve.has(oe)?ve.delete(oe):ve.add(oe),p(ve)},be=((dr=t.gamification)==null?void 0:dr.level)||1,nt=((nn=t.gamification)==null?void 0:nn.currency)||0,Et=ae,Dt=Et%1e3/1e3*100,Bt=hz(Et),Ze=hz(nt),ar=Kh(be),br=async oe=>{const ve=oe.target.value;y(ve),await Re.switchUserView(t.id,ve)},Pr=async oe=>{if(!U){$(!0);try{await Re.equipItem(t.id,oe,m),D(null),Un.equip(),c.success(`${oe.name} equipped.`)}catch{c.error("Failed to equip item.")}finally{$(!1)}}},un=async oe=>{$(!0);try{await Re.unequipItem(t.id,oe,m),D(null),c.success("Item unequipped.")}catch{c.error("Failed to unequip item.")}finally{$(!1)}},vr=async()=>{if(!V)return;if(Object.values(ue).some($e=>$e&&$e.id===V.id)){c.error("Unequip this item before salvaging.");return}const ve=YR(V);if(await d({message:`Salvage ${V.name} for ${ve} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){$(!0);try{await Re.disenchantItem(t.id,V,m),D(null),Un.salvage(),c.success(`Salvaged for ${ve} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{$(!1)}}},Ht=async oe=>{if(!V)return;const ve=Ki[oe];if(nt<ve)return c.error("Insufficient Cyber-Flux.");$(!0);try{await Re.craftItem(t.id,V,oe,m),D(null),Un.craft(),c.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch($e){const Me=($e==null?void 0:$e.message)||($e==null?void 0:$e.code)||"Unknown error";c.error(`Fabrication failed: ${Me}`)}finally{$(!1)}},$t=((Gr=t.gamification)==null?void 0:Gr.gemsInventory)||[],_t=async()=>{if(!(!V||U)){if(nt<Ki.SOCKET)return c.error("Insufficient Cyber-Flux.");if((V.sockets||0)>=3)return c.error("Maximum sockets reached.");$(!0);try{const oe=await Re.addSocket(V.id,m);D(oe.item),Un.craft(),c.success("Socket added!")}catch(oe){c.error((oe==null?void 0:oe.message)||"Failed to add socket.")}finally{$(!1)}}},Dr=async oe=>{if(!(!V||U)){if(nt<Ki.ENCHANT)return c.error("Insufficient Cyber-Flux.");$(!0);try{const ve=await Re.socketGem(V.id,oe,m);D(ve.item),Un.craft(),ve.runewordActivated?(Un.levelUp(),c.success(`RUNEWORD ACTIVATED: ${ve.runewordActivated.name}!`)):c.success("Gem socketed!")}catch(ve){c.error((ve==null?void 0:ve.message)||"Failed to socket gem.")}finally{$(!1)}}},rn=async oe=>{var Me;if(!V||U)return;const ve=(Me=V.gems)==null?void 0:Me[oe];if(!ve)return;const $e=XR(V.rarity,ve.tier,V.unsocketCount||0);if(nt<$e)return c.error(`Insufficient Cyber-Flux. Need ${$e}.`);$(!0);try{const ut=await Re.unsocketGem(V.id,oe,m);D(ut.item),Un.craft(),c.success(`Gem removed! -${ut.cost} Flux`)}catch(ut){c.error((ut==null?void 0:ut.message)||"Failed to unsocket gem.")}finally{$(!1)}},Hr=((mn=t.gamification)==null?void 0:mn.activeQuests)||[],Lr=((kr=t.gamification)==null?void 0:kr.completedQuests)||[],dn=S.filter(oe=>Hr.some(ve=>ve.questId===oe.id)),or=S.filter(oe=>!Hr.some(ve=>ve.questId===oe.id)&&!Lr.includes(oe.id)),ma=async oe=>{try{await Re.acceptQuest(t.id,oe.id),Un.questAccept(),c.success(`Contract accepted: ${oe.title}`)}catch{c.error("Failed to accept contract.")}},hn=async oe=>{const ve=oe.type==="CUSTOM";if(await d({message:ve?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:ve?"Submit":"Deploy",variant:"info"}))try{await Re.deployMission(t.id,oe),Un.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},On=["HEAD","HANDS","RING1","AMULET"],ti=["CHEST","BELT","FEET","RING2"],[Tr,fn]=k.useState(null),ri=a_e(JU(gj,{activationConstraint:{distance:8}}),JU(oX,{activationConstraint:{delay:150,tolerance:5}})),Wn=oe=>oe==="RING1"||oe==="RING2"?["RING"]:[oe],Yr=oe=>{const{active:ve}=oe,$e=Xe.find(Me=>Me.id===ve.id)||Object.values(ue).find(Me=>Me&&Me.id===ve.id);fn($e||null)},pn=oe=>{const{active:ve,over:$e}=oe;if(fn(null),!$e)return;const Me=ve.id,ut=$e.id;if(ut.startsWith("slot-")){const tr=ut.replace("slot-",""),Qt=Xe.find(ka=>ka.id===Me);if(!Qt||!Wn(tr).includes(Qt.slot))return;Pr(Qt)}if(Me.startsWith("equipped-")&&(ut==="inventory-zone"||ut.startsWith("storage-cell-"))){const tr=Me.replace("equipped-","");un(tr)}},Tn=(oe,ve,$e="w-5 h-5")=>{const Me=`${$e} ${ve}`,ut={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};switch(oe){case"HEAD":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("path",{d:"M12 2C8 2 5 5 5 9v2a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V9c0-4-3-7-7-7z"}),o.jsx("path",{d:"M5 11v2h14v-2"}),o.jsx("path",{d:"M8 6h8",strokeWidth:1.5,opacity:.6})]});case"CHEST":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("path",{d:"M6 4l-2 3v5a2 2 0 0 0 2 2h2l1 3h6l1-3h2a2 2 0 0 0 2-2V7l-2-3"}),o.jsx("path",{d:"M6 4h12"}),o.jsx("path",{d:"M12 4v5"}),o.jsx("path",{d:"M9 9h6"})]});case"HANDS":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("path",{d:"M7 14V8a2 2 0 0 1 4 0v1"}),o.jsx("path",{d:"M11 9V7a2 2 0 0 1 4 0v3"}),o.jsx("path",{d:"M15 10V9a2 2 0 0 1 3 1v4c0 3-2 6-5 7H9c-3-1-5-4-5-7v-2a2 2 0 0 1 3-1"})]});case"FEET":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("path",{d:"M7 3v10l-3 4v2h16v-2l-2-2V7a4 4 0 0 0-4-4H7z"}),o.jsx("path",{d:"M4 19h16"}),o.jsx("path",{d:"M11 3v4"})]});case"BELT":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("rect",{x:"2",y:"9",width:"20",height:"6",rx:"1"}),o.jsx("rect",{x:"9",y:"8",width:"6",height:"8",rx:"1",strokeWidth:1.5}),o.jsx("line",{x1:"9",y1:"12",x2:"15",y2:"12"})]});case"AMULET":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("path",{d:"M6 3a14 14 0 0 0 12 0"}),o.jsx("path",{d:"M12 7v3"}),o.jsx("path",{d:"M12 10l-3 3 3 5 3-5-3-3z",fill:"currentColor",fillOpacity:.2})]});case"RING":return o.jsxs("svg",{className:Me,...ut,children:[o.jsx("ellipse",{cx:"12",cy:"14",rx:"6",ry:"5"}),o.jsx("path",{d:"M12 9V6"}),o.jsx("path",{d:"M10 6h4l-2-3-2 3z",fill:"currentColor",fillOpacity:.3})]});default:return o.jsx(Ex,{className:Me})}},ni=({slot:oe})=>{const ve=ue[oe],$e=ve?la(ve.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},{setNodeRef:Me,isOver:ut}=vj({id:`slot-${oe}`}),{attributes:tr,listeners:Qt,setNodeRef:An,isDragging:ka}=fX({id:ve?`equipped-${oe}`:`empty-slot-${oe}`,disabled:!ve}),Ms=Tr&&Wn(oe).includes(Tr.slot),Nn=ut&&Ms?"ring-2 ring-purple-500 scale-110":Tr&&Ms?"ring-1 ring-purple-500/40 animate-pulse":"";return o.jsx("div",{ref:Me,className:"relative",children:o.jsx("div",{ref:An,...tr,...Qt,className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${ka?"opacity-30 scale-90 border-dashed":"hover:scale-110 cursor-grab active:cursor-grabbing"} ${$e.border} ${$e.bg} ${$e.shimmer} ${$e.glow} ${Nn}`,onClick:()=>!ka&&ve&&D(ve),children:ve?o.jsxs(o.Fragment,{children:[Tn(oe.replace(/\d/,""),$e.text),o.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${$e.text}`,children:ve.baseName||ve.name.split(" ").slice(-1)[0]}),!ka&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${$e.text}`,children:ve.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[ve.rarity," ",oe]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(ve.stats).map(([gn,ko])=>`+${ko} ${gn.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):o.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})})};return o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[Pt.length>0&&o.jsx("div",{className:"lg:col-span-12 space-y-2",children:Pt.map(oe=>{const ve={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return o.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${ve[oe.priority]}`,children:[o.jsx(Ox,{className:"w-5 h-5 shrink-0 mt-0.5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),o.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),o.jsx("button",{onClick:()=>Ie(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:o.jsx(Da,{className:"w-4 h-4"})})]},oe.id)})}),v&&o.jsx("div",{className:"lg:col-span-12",children:o.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:o.jsx($a,{className:"w-5 h-5 fill-current"})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[v.title," ACTIVE"]}),o.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",v.multiplier,"x XP on all tasks."]})]})]}),o.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[v.multiplier,"x"]})]})}),o.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${ar.tierColor.split(" ")[0]} border-opacity-30`,children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${ar.tierGlow} shadow-xl`,children:o.jsx("img",{src:t.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${ar.tierColor.split(" ")[0]}`})}),o.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Rs=t.gamification)==null?void 0:Rs.codename)||t.name}),o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${ar.tierColor.split(" ")[1]}`,children:[ar.rankName," (Lvl ",be,")"]}),o.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",yt]})]}),ft.length>1&&o.jsxs("div",{className:"mt-4 relative w-full",children:[o.jsx("select",{value:m,onChange:br,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:ft.map(oe=>o.jsx("option",{value:oe,children:oe},oe))}),o.jsx(Ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),o.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Dt}%`}})}),o.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[o.jsxs("span",{children:[Bt.toLocaleString()," XP (",m,")"]}),o.jsx("span",{children:"Next Rank"}),Ae&&o.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",Ae," XP"]})]})]})]}),o.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:o.jsx(X5,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),o.jsx("div",{className:"text-xl font-black text-white leading-none",children:Ze})]})]})}),(((cs=t.gamification)==null?void 0:cs.engagementStreak)||0)>0&&(()=>{var $e;const oe=(($e=t.gamification)==null?void 0:$e.engagementStreak)||0,ve=ETe(oe);return o.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:o.jsx(A2,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),o.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),ve>1&&o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),o.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((ve-1)*100),"%"]})]})]})})})(),(((so=t.gamification)==null?void 0:so.loginStreak)||0)>1&&o.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[o.jsx(dle,{className:"w-5 h-5 text-purple-400"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),o.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((ll=t.gamification)==null?void 0:ll.loginStreak)||0," day streak"]})]})]}),o.jsxs("button",{onClick:()=>He(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[o.jsx(Hh,{className:"w-4 h-4"})," View Profile"]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&o.jsxs("button",{onClick:()=>a("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:o.jsx(N2,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),o.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),o.jsx(Ld,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&o.jsxs("button",{onClick:()=>a("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:o.jsx(nle,{className:"w-5 h-5"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),o.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),o.jsx(Ld,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),o.jsx("div",{className:"lg:col-span-9 space-y-6",children:o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[N==="MISSIONS"&&o.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[or.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),or.map(oe=>o.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),o.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),o.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),o.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&o.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([ve,$e])=>o.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[$e," ",ve]},ve))}),oe.expiresAt&&o.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[o.jsx(Os,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),o.jsxs("button",{onClick:()=>ma(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[o.jsx(Bd,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[dn.length===0&&o.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),dn.map(oe=>{var ut,tr;const ve=((ut=Hr.find(Qt=>Qt.questId===oe.id))==null?void 0:ut.status)||"ACCEPTED",$e=(tr=Hr.find(Qt=>Qt.questId===oe.id))==null?void 0:tr.deploymentRoll,Me=oe.type==="CUSTOM";return o.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:o.jsx(Yo,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),o.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${ve==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":ve==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":ve==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:ve})]}),ve==="ACCEPTED"?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>hn(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[o.jsx(cH,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),Me?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&o.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:o.jsx(is,{className:"w-5 h-5"})})]})]}):ve==="DEPLOYED"?o.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),o.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),o.jsx($a,{className:"w-6 h-6 text-purple-400"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),o.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:Me?"AWAITING_HQ_SIG_VERIFICATION":$e===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),o.jsx("div",{className:"h-10 w-px bg-white/5"}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),o.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),o.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),o.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:Me?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),N==="RESOURCES"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(ur).length===0?o.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):o.jsx("div",{className:"space-y-4",children:Object.entries(ur).sort().map(([oe,ve])=>o.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[o.jsxs("button",{onClick:()=>qr(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[h.has(oe)?o.jsx(Ai,{className:"w-4 h-4 text-purple-400"}):o.jsx(Ld,{className:"w-4 h-4 text-gray-500"}),o.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),o.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[ve.length," Files"]})]}),h.has(oe)&&o.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:ve.map($e=>{const Me=!!$e.dueDate,ut=$e.dueDate?new Date($e.dueDate):null,tr=new Date,Qt=ut?Math.ceil((ut.getTime()-tr.getTime())/864e5):1/0,An=Qt<=0?"text-red-400":Qt<=2?"text-yellow-400":"text-gray-500",ka=Math.floor($e.engagementTime/60),Ms=ka>=5,Nn=j[$e.id],gn=Nn==null?void 0:Nn.completed;return o.jsxs("div",{className:`bg-white/5 border hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4 ${gn?"border-green-500/20":"border-white/5"}`,onClick:()=>i&&i($e.id),children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${gn||Ms?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":$e.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:gn?o.jsx(Mn,{className:"w-6 h-6"}):Ms?o.jsx(Mn,{className:"w-6 h-6"}):$e.lastEngagement?o.jsx(Mn,{className:"w-5 h-5 opacity-60"}):eAe[$e.category||"Supplemental"]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:$e.category}),o.jsx("h4",{className:"font-bold text-white text-sm truncate",children:$e.title}),gn&&o.jsxs("span",{className:"text-[8px] font-bold text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded border border-green-500/20 flex items-center gap-0.5 flex-shrink-0",children:[o.jsx(Mn,{className:"w-2.5 h-2.5"}),"COMPLETED",((Nn==null?void 0:Nn.totalCompletions)||0)>1?` (${Nn.totalCompletions}x)`:""]})]}),o.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:o.jsx("p",{className:"text-xs text-gray-500 truncate",children:$e.description})}),o.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[$e.lastEngagement&&o.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[ka,"m engaged"]}),gn&&(Nn==null?void 0:Nn.bestScore)!=null&&Nn.bestScore>0&&o.jsxs("span",{className:"text-[9px] text-amber-400 font-bold",children:["Best: ",Nn.bestScore,"%"]}),Me&&o.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${An}`,children:[o.jsx(Js,{className:"w-3 h-3"}),Qt<=0?"Overdue":Qt===1?"Due tomorrow":`Due in ${Qt}d`]})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:o.jsx(lH,{className:"w-4 h-4 text-purple-400 fill-current"})})]},$e.id)})})]},oe))})},"resources"),N==="LOADOUT"&&o.jsxs(nTe,{sensors:ri,collisionDetection:u_e,modifiers:[JTe],onDragStart:Yr,onDragEnd:pn,children:[o.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[o.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative flex flex-col items-center justify-center p-4 min-h-[400px]",children:[o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden loadout-hex-bg pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 rounded-2xl overflow-hidden pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((us=Ge.appearance)==null?void 0:us.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),o.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[o.jsx("div",{className:"flex flex-col gap-4",children:On.map(oe=>o.jsx(ni,{slot:oe},oe))}),o.jsx("div",{className:"w-40 h-full relative",children:o.jsx(Vg,{equipped:ue,appearance:Ge.appearance,evolutionLevel:be})}),o.jsx("div",{className:"flex flex-col gap-4",children:ti.map(oe=>o.jsx(ni,{slot:oe},oe))})]}),o.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),E(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[o.jsx(yle,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[o.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),o.jsx("div",{className:"h-[200px]",children:o.jsx(SW,{width:"100%",height:"100%",children:o.jsxs(FSe,{cx:"50%",cy:"50%",outerRadius:"70%",data:Vt,children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),o.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),o.jsx(GK,{stroke:"rgba(255,255,255,0.08)"}),o.jsx(S1,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),o.jsx(w1,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),o.jsx(_1,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),(()=>{const oe=vG(wt);return o.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 space-y-3",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),o.jsx("span",{className:"text-gray-500",children:"Tech"}),o.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:wt.tech}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-blue-400",children:"Attack Power"}),o.jsx("br",{}),"Increases damage dealt to bosses."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),o.jsx("span",{className:"text-gray-500",children:"Focus"}),o.jsx("span",{className:"text-green-400 font-bold ml-auto",children:wt.focus}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-48 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-green-400",children:"Critical Strikes"}),o.jsx("br",{}),"Crit chance: ",(oe.critChance*100).toFixed(0),"%  Crit damage: ",oe.critMultiplier.toFixed(2),"x"]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),o.jsx("span",{className:"text-gray-500",children:"Analysis"}),o.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:wt.analysis}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-yellow-400",children:"Armor"}),o.jsx("br",{}),"Reduces boss damage by ",oe.armorPercent.toFixed(0),"%."]})]}),o.jsxs("div",{className:"group relative flex items-center gap-2 cursor-help",children:[o.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),o.jsx("span",{className:"text-gray-500",children:"Charisma"}),o.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:wt.charisma}),o.jsxs("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-20 w-44 p-2 bg-black/95 border border-white/10 rounded-lg text-[10px] text-gray-300 shadow-xl",children:[o.jsx("span",{className:"font-bold text-purple-400",children:"Health"}),o.jsx("br",{}),"Max HP: ",oe.maxHp]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-[10px] pt-2 border-t border-white/5",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"HP"}),o.jsx("span",{className:"text-emerald-400 font-bold",children:oe.maxHp})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Armor"}),o.jsxs("span",{className:"text-yellow-400 font-bold",children:[oe.armorPercent.toFixed(0),"%"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-gray-600 block",children:"Crit"}),o.jsxs("span",{className:"text-green-400 font-bold",children:[(oe.critChance*100).toFixed(0),"%"]})]})]})]})})()]})]}),o.jsx(rAe,{inventory:Xe,equipped:ue,draggedItem:Tr,onInspect:D,getSlotIcon:Tn})]},"loadout"),o.jsx(wTe,{dropAnimation:{duration:250,easing:"cubic-bezier(0.2, 0.8, 0.2, 1)"},zIndex:9999,children:Tr&&(()=>{const oe=la(Tr.rarity);return o.jsx("div",{className:"drag-overlay-tile rounded-xl pointer-events-none",style:{willChange:"transform, box-shadow"},children:o.jsxs("div",{className:`w-[68px] h-[68px] rounded-xl border-2 flex flex-col items-center justify-center backdrop-blur-sm ${oe.bg} ${oe.border} ${oe.glow}`,style:{filter:"brightness(1.3) saturate(1.2)"},children:[Tn(Tr.slot,oe.text,"w-7 h-7"),o.jsx("span",{className:`text-[8px] font-bold mt-0.5 ${oe.text} drop-shadow-lg`,children:Tr.baseName||Tr.name.split(" ").slice(-1)[0]})]})})})()})]}),N==="ACHIEVEMENTS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(kTe,{unlockedAchievements:((ds=t.gamification)==null?void 0:ds.unlockedAchievements)||[],achievementProgress:mt})},"achievements"),N==="SKILLS"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(OTe,{specialization:(ja=t.gamification)==null?void 0:ja.specialization,skillPoints:((ga=t.gamification)==null?void 0:ga.skillPoints)||0,unlockedSkills:((q=t.gamification)==null?void 0:q.unlockedSkills)||[]})},"skills"),N==="FORTUNE"&&o.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(ITe,{currency:nt,lastSpin:(xe=t.gamification)==null?void 0:xe.lastWheelSpin,classType:m})},"fortune"),N==="TUTORING"&&o.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(KTe,{userId:t.id,userName:t.name,classType:m})},"tutoring")]})}),o.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:o.jsx(GTe,{userId:t.id,activeChallenges:((Te=t.gamification)==null?void 0:Te.activeDailyChallenges)||[],classType:m})}),o.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[o.jsx(DTe,{userId:t.id,userName:t.name,classType:m}),o.jsx(HTe,{userId:t.id,classType:m,userSection:((Ne=t.classSections)==null?void 0:Ne[m])||t.section,userClassSections:t.classSections,playerStats:wt,playerAppearance:Ge.appearance,playerEquipped:ue,playerEvolutionLevel:be})]})]}),o.jsx(Ti,{isOpen:A,onClose:()=>{E(!1),K(null),J(null),pe(null),X(null),re(null)},title:"Customize Your Agent",maxWidth:"max-w-lg",children:o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-44 h-64 bg-black/40 rounded-3xl p-3 border border-purple-500/20 shadow-inner loadout-hex-bg",children:o.jsx(Vg,{equipped:ue,appearance:{...Ge.appearance,hue:Q??((ht=Ge.appearance)==null?void 0:ht.hue)??0,bodyType:H??((Ot=Ge.appearance)==null?void 0:Ot.bodyType)??"A",skinTone:ie??((Nt=Ge.appearance)==null?void 0:Nt.skinTone)??0,hairStyle:me??((Yt=Ge.appearance)==null?void 0:Yt.hairStyle)??1,hairColor:ne??((wr=Ge.appearance)==null?void 0:wr.hairColor)??0}})})}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Skin Tone"}),o.jsx("div",{className:"flex justify-center gap-2",children:pX.map((oe,ve)=>{var Me;const $e=(ie??((Me=Ge.appearance)==null?void 0:Me.skinTone)??0)===ve;return o.jsx("button",{onClick:()=>pe(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Style"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:STe.map((oe,ve)=>{var Me;const $e=(me??((Me=Ge.appearance)==null?void 0:Me.hairStyle)??1)===ve;return o.jsx("button",{onClick:()=>X(ve),className:`px-3 py-2 rounded-xl text-xs font-bold transition-all ${$e?"bg-purple-500/30 border-purple-500 text-white border-2":"bg-white/5 border border-white/10 text-gray-400 hover:bg-white/10 hover:text-gray-200"}`,children:oe},ve)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Hair Color"}),o.jsx("div",{className:"flex justify-center gap-2",children:mX.map((oe,ve)=>{var Me;const $e=(ne??((Me=Ge.appearance)==null?void 0:Me.hairColor)??0)===ve;return o.jsx("button",{onClick:()=>re(ve),className:`w-8 h-8 rounded-full border-2 transition-all hover:scale-110 ${$e?"border-white scale-110 ring-2 ring-white/30":"border-white/10"}`,style:{backgroundColor:oe}},ve)})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Body Frame"}),o.jsx("div",{className:"flex justify-center gap-2",children:["A","B","C"].map(oe=>{var $e;const ve=(H??(($e=Ge.appearance)==null?void 0:$e.bodyType)??"A")===oe;return o.jsx("button",{onClick:()=>J(oe),className:`px-3 py-2 rounded-xl border-2 transition-all font-bold text-xs ${ve?"border-purple-500 bg-purple-500/20 text-white":"border-white/10 text-gray-500 hover:border-white/20"}`,children:oe==="A"?"Alpha":oe==="B"?"Beta":"Femme"},oe)})})]}),o.jsxs("div",{className:"bg-white/5 p-4 rounded-2xl border border-white/10",children:[o.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 text-center",children:"Energy Color"}),o.jsx("div",{className:"grid grid-cols-4 gap-1.5",children:[0,30,60,90,120,180,240,300].map(oe=>{var $e;const ve=(Q??(($e=Ge.appearance)==null?void 0:$e.hue)??0)===oe;return o.jsx("button",{onClick:()=>K(oe),className:`w-6 h-6 rounded-full border-2 transition-all hover:scale-110 mx-auto ${ve?"border-white scale-110 ring-1 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{E(!1),K(null),J(null),pe(null),X(null),re(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),o.jsx("button",{onClick:()=>{var oe,ve,$e,Me,ut;return rt({hue:Q??((oe=Ge.appearance)==null?void 0:oe.hue)??0,bodyType:H??((ve=Ge.appearance)==null?void 0:ve.bodyType)??"A",skinTone:ie??(($e=Ge.appearance)==null?void 0:$e.skinTone)??0,hairStyle:me??((Me=Ge.appearance)==null?void 0:Me.hairStyle)??1,hairColor:ne??((ut=Ge.appearance)==null?void 0:ut.hairColor)??0})},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),o.jsx(Ti,{isOpen:!!V,onClose:()=>D(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:V&&o.jsxs("div",{className:"space-y-6 text-gray-100",children:[o.jsxs("div",{className:`p-5 rounded-xl border ${V.runewordActive?"border-amber-500/40 runeword-active":la(V.rarity).border} ${la(V.rarity).bg} ${la(V.rarity).shimmer} relative overflow-hidden`,children:[o.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[o.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${V.runewordActive?"border-amber-500/50":la(V.rarity).border} ${la(V.rarity).bg}`,style:{boxShadow:V.runewordActive?"0 0 20px rgba(245,158,11,0.3)":V.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":V.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:Tn(V.slot,V.runewordActive?"text-amber-400":la(V.rarity).text,"w-7 h-7")}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:`text-lg font-bold ${V.runewordActive?"text-amber-300":la(V.rarity).text}`,children:V.name}),o.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[V.rarity," ",V.slot]}),V.runewordActive&&o.jsx("div",{className:"text-[10px] font-bold text-amber-400 mt-0.5",children:(Zr=ZR(V))==null?void 0:Zr.name})]})]}),o.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(V.stats).map(([oe,ve])=>o.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[o.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),o.jsxs("span",{className:"font-mono font-bold",children:["+",ve]})]},oe))}),o.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:V.affixes.map((oe,ve)=>o.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},ve))})]}),(V.sockets||0)>0&&(()=>{const oe=V.sockets||0,ve=V.gems||[],$e=oe-ve.length,Me=ZR(V);return o.jsxs("div",{className:`p-4 rounded-xl border ${Me?"border-amber-500/40 bg-gradient-to-br from-amber-950/30 to-black/50":"border-white/10 bg-black/20"}`,children:[Me&&o.jsxs("div",{className:"mb-3 text-center",children:[o.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase tracking-widest",children:"Runeword Active"}),o.jsx("div",{className:"text-lg font-black text-amber-300 mt-1",children:Me.name}),o.jsx("p",{className:"text-[10px] text-amber-500/70 italic mt-1",children:Me.lore}),o.jsx("div",{className:"flex justify-center gap-3 mt-2",children:Object.entries(Me.bonusStats).map(([ut,tr])=>o.jsxs("span",{className:"text-[10px] font-mono font-bold text-amber-400",children:["+",tr," ",ut.slice(0,3).toUpperCase()]},ut))}),Me.bonusEffects&&Me.bonusEffects.length>0&&o.jsx("div",{className:"mt-1",children:Me.bonusEffects.map(ut=>o.jsx("span",{className:"text-[10px] text-purple-400 font-bold",children:ut.description},ut.id))})]}),o.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 uppercase tracking-widest font-bold mb-2",children:[o.jsx(X5,{className:"w-3 h-3"})," Gem Sockets (",ve.length,"/",oe,")"]}),o.jsxs("div",{className:"flex gap-2",children:[ve.map((ut,tr)=>{const Qt=XR(V.rarity,ut.tier,V.unsocketCount||0);return o.jsxs("div",{className:"flex flex-col items-center gap-1 group/gem",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 flex items-center justify-center relative",style:{borderColor:ut.color,backgroundColor:`${ut.color}20`,boxShadow:`0 0 8px ${ut.color}40`},children:o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ut.color}})}),o.jsx("span",{className:"text-[9px] text-gray-400",children:ut.name}),o.jsxs("button",{onClick:()=>rn(tr),disabled:U||nt<Qt,className:"text-[8px] text-red-400/60 hover:text-red-400 font-bold transition disabled:opacity-30",title:`Unsocket for ${Qt} Flux`,children:["Remove (",Qt," F)"]})]},tr)}),Array.from({length:$e}).map((ut,tr)=>o.jsx("div",{className:"w-8 h-8 rounded-lg border-2 border-dashed border-white/20 bg-black/30 flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-white/10"})},`empty-${tr}`))]}),$e>0&&$t.length>0&&o.jsxs("div",{className:"mt-3 border-t border-white/10 pt-3",children:[o.jsxs("div",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mb-2",children:["Socket a Gem (",Ki.ENCHANT," Flux)"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:$t.map(ut=>o.jsxs("button",{onClick:()=>Dr(ut.id),disabled:U||nt<Ki.ENCHANT,className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg border border-white/10 bg-black/30 hover:bg-white/10 transition text-xs disabled:opacity-50",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ut.color}}),o.jsx("span",{className:"text-gray-300",children:ut.name}),o.jsxs("span",{className:"text-gray-600 font-mono",children:["+",ut.value]})]},ut.id))}),ve.length>0&&!Me&&(()=>{const ut=ve.map(Qt=>Qt.name),tr=yG.filter(Qt=>Qt.requiredSockets===oe&&Qt.pattern.slice(0,ut.length).every((An,ka)=>An===ut[ka]));return tr.length===0?null:o.jsx("div",{className:"mt-2 text-[9px] text-amber-500/60",children:tr.map(Qt=>o.jsxs("div",{children:["Possible: ",o.jsx("span",{className:"font-bold text-amber-400/80",children:Qt.name}),"  needs [",Qt.pattern.join("  "),"]"]},Qt.id))})})()]})]})})(),(V.sockets||0)<3&&o.jsxs("button",{onClick:_t,disabled:U||nt<Ki.SOCKET,className:"w-full py-2 bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 rounded-xl text-sm text-gray-300 hover:text-purple-300 font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:[o.jsx(X5,{className:"w-4 h-4"}),"Add Socket (",Ki.SOCKET," Flux)  ",V.sockets||0,"/3"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=V.slot==="RING"?"RING1":V.slot,ve=ue[oe]||(V.slot==="RING"?ue.RING2:null);if(!ve||ve.id===V.id)return null;const $e=la(ve.rarity),Me=new Set([...Object.keys(V.stats),...Object.keys(ve.stats)]);return o.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[o.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:`text-xs font-bold ${$e.text}`,children:ve.name}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:ve.rarity})]}),o.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(Me).map(ut=>{const tr=V.stats[ut]||0,Qt=ve.stats[ut]||0,An=tr-Qt;return An===0?o.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[ut.slice(0,3).toUpperCase(),": 0"]},ut):o.jsxs("span",{className:`text-[10px] font-mono font-bold ${An>0?"text-green-400":"text-red-400"}`,children:[ut.slice(0,3).toUpperCase(),": ",An>0?"":"",Math.abs(An)]},ut)})})]})})(),(()=>{var ve;const oe=(ve=Object.entries(ue).find(([,$e])=>$e&&$e.id===V.id))==null?void 0:ve[0];return oe?o.jsx("button",{onClick:()=>un(oe),className:"col-span-2 py-3 bg-orange-600 hover:bg-orange-500 text-white font-bold rounded-xl transition shadow-lg shadow-orange-900/20",disabled:U,children:"Unequip Gear"}):o.jsx("button",{onClick:()=>Pr(V),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:U,children:"Equip Gear"})})(),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),o.jsxs("button",{onClick:()=>Ht("RECALIBRATE"),disabled:U||nt<Ki.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.RECALIBRATE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),o.jsxs("button",{onClick:()=>Ht("REFORGE"),disabled:U||nt<Ki.REFORGE||V.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.REFORGE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),o.jsxs("button",{onClick:()=>Ht("OPTIMIZE"),disabled:U||nt<Ki.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),o.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Ki.OPTIMIZE," Flux"]})]}),o.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),o.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),o.jsxs("button",{onClick:vr,disabled:U,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[o.jsx(ca,{className:"w-4 h-4"}),"Salvage for ",YR(V)," Flux"]})]})]})}),ze&&o.jsx(ZTe,{user:t,classType:m,onClose:()=>He(!1)}),st&&o.jsx(QTe,{item:st,onClose:()=>W(null)}),o.jsx(Ti,{isOpen:I,onClose:Be,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:o.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,ve)=>o.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][ve%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},ve))}),o.jsxs("div",{className:"relative inline-block mb-6",children:[o.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),o.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),o.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:o.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:be})})]}),o.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:o.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:ar.rankName})}),o.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&o.jsxs("div",{className:`${la(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${la(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),o.jsx("div",{className:`text-xl font-bold ${la(C.rarity).text}`,children:C.name}),o.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),o.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([oe,ve])=>o.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",ve," ",oe.toUpperCase()]},oe))})]})]}),o.jsx("button",{onClick:Be,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})},rAe=({inventory:t,equipped:e,draggedItem:r,onInspect:n,getSlotIcon:a})=>{const{setNodeRef:i,isOver:s}=vj({id:"inventory-zone"}),c=r&&Object.values(e).some(d=>(d==null?void 0:d.id)===r.id);return o.jsxs("div",{ref:i,className:`mt-6 flex-1 min-h-[250px] bg-black/40 border-2 rounded-2xl p-4 overflow-hidden flex flex-col transition-all duration-200 ${c?"border-purple-500/40 bg-purple-900/5":s?"border-purple-500/50 bg-purple-900/10":"border-white/10"}`,children:[o.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[o.jsxs("span",{children:["Gear Storage (",t.length,")"]}),o.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1",children:[o.jsx(Koe,{className:"w-3 h-3"})," Drag to equip"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[t.map(d=>o.jsx(aAe,{item:d,equipped:e,onInspect:n,getSlotIcon:a},d.id)),Array.from({length:Math.max(0,16-t.length)}).map((d,h)=>o.jsx(nAe,{index:h,isDroppingEquipped:!!c},`empty-${h}`))]})]})},nAe=({index:t,isDroppingEquipped:e})=>{const{setNodeRef:r,isOver:n}=vj({id:`storage-cell-${t}`});return o.jsx("div",{ref:r,className:`aspect-square rounded-xl border transition-all duration-200 ${n?"border-purple-500/60 bg-purple-500/15 scale-105 shadow-lg shadow-purple-500/20":e?"border-purple-500/20 bg-purple-500/5":"border-white/5 bg-white/5"}`})},aAe=({item:t,equipped:e,onInspect:r,getSlotIcon:n})=>{const{attributes:a,listeners:i,setNodeRef:s,isDragging:c}=fX({id:t.id}),d=Object.values(e).some(p=>(p==null?void 0:p.id)===t.id),h=la(t.rarity);return o.jsxs("div",{ref:s,...a,...i,onClick:()=>!c&&r(t),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all duration-200 ${c?"opacity-30 scale-90 border-dashed":"cursor-grab active:cursor-grabbing opacity-80 hover:opacity-100 hover:scale-105"} ${d?"ring-2 ring-white/50 opacity-100":""} ${h.bg} ${h.border} ${h.shimmer} ${d?h.glow:""}`,children:[n(t.slot,h.text,"w-6 h-6"),d&&o.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),!c&&o.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[o.jsx("div",{className:`text-[10px] font-bold ${h.text}`,children:t.name}),o.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[t.rarity," ",t.slot,d?"  EQUIPPED":""]}),o.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(t.stats).map(([p,m])=>`+${m} ${p.slice(0,3).toUpperCase()}`).join("  ")}),o.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]})};var Ew=typeof self<"u"?self:global;const Fg=typeof navigator<"u",iAe=Fg&&typeof HTMLImageElement>"u",Kb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),jw=Ew.Buffer,Iv=Ew.BigInt,kw=!!jw,sAe=t=>t;function Qb(t,e=sAe){if(Kb)try{return typeof require=="function"?Promise.resolve(e(require(t))):import(t).then(e)}catch{console.warn(`Couldn't load ${t}`)}}let bj=Ew.fetch;const oAe=t=>bj=t;if(!Ew.fetch){const t=Qb("http",(n=>n)),e=Qb("https",(n=>n)),r=(n,{headers:a}={})=>new Promise((async(i,s)=>{let{port:c,hostname:d,pathname:h,protocol:p,search:m}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(h)+m,headers:a};c!==""&&(y.port=Number(c));const v=(p==="https:"?await e:await t).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return r(S,{headers:a}).then(i).catch(s)}i({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(j=>w.push(j))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));v.on("error",s),v.end()}));oAe(r)}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const Xb=t=>xX(t)?void 0:t,lAe=t=>t!==void 0;function xX(t){return t===void 0||(t instanceof Map?t.size===0:Object.values(t).filter(lAe).length===0)}function Na(t){let e=new Error(t);throw delete e.stack,e}function Od(t){return(t=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(t).trim())===""?void 0:t}function u8(t){let e=(function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048})(t);return t.jfif.enabled&&(e+=50),t.xmp.enabled&&(e+=2e4),t.iptc.enabled&&(e+=14e3),t.icc.enabled&&(e+=6e3),e}const d8=t=>String.fromCharCode.apply(null,t),vz=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function bX(t){return vz?vz.decode(t):kw?Buffer.from(t).toString("utf8"):decodeURIComponent(escape(d8(t)))}class Ji{static from(e,r){return e instanceof this&&e.le===r?e:new Ji(e,void 0,void 0,r)}constructor(e,r=0,n,a){if(typeof a=="boolean"&&(this.le=a),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-r);let i=new DataView(e,r,n);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof Ji){n===void 0&&(n=e.byteLength-r),(r+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Na("Creating view outside of available memory in ArrayBuffer");let i=new DataView(e.buffer,r,n);this._swapDataView(i)}else if(typeof e=="number"){let i=new DataView(new ArrayBuffer(e));this._swapDataView(i)}else Na("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,r,n=Ji){return e instanceof DataView||e instanceof Ji?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Na("BufferView.set(): Invalid data argument."),this.toUint8().set(e,r),new n(this,r,e.byteLength)}subarray(e,r){return r=r||this._lengthToEnd(e),new Ji(this,e,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,r){return new Uint8Array(this.buffer,this.byteOffset+e,r)}getString(e=0,r=this.byteLength){return bX(this.getUint8Array(e,r))}getLatin1String(e=0,r=this.byteLength){let n=this.getUint8Array(e,r);return d8(n)}getUnicodeString(e=0,r=this.byteLength){const n=[];for(let a=0;a<r&&e+a<this.byteLength;a+=2)n.push(this.getUint16(e+a));return d8(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,r=this.le){return this.dataView.getInt16(e,r)}getInt32(e,r=this.le){return this.dataView.getInt32(e,r)}getUint16(e,r=this.le){return this.dataView.getUint16(e,r)}getUint32(e,r=this.le){return this.dataView.getUint32(e,r)}getFloat32(e,r=this.le){return this.dataView.getFloat32(e,r)}getFloat64(e,r=this.le){return this.dataView.getFloat64(e,r)}getFloat(e,r=this.le){return this.dataView.getFloat32(e,r)}getDouble(e,r=this.le){return this.dataView.getFloat64(e,r)}getUintBytes(e,r,n){switch(r){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,r,n){switch(r){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function h8(t,e){Na(`${t} '${e}' was not loaded, try using full build of exifr.`)}class wj extends Map{constructor(e){super(),this.kind=e}get(e,r){return this.has(e)||h8(this.kind,e),r&&(e in r||(function(n,a){Na(`Unknown ${n} '${a}'.`)})(this.kind,e),r[e].enabled||h8(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var el=new wj("file parser"),Ta=new wj("segment parser"),ol=new wj("file reader");function cAe(t,e){return typeof t=="string"?xz(t,e):Fg&&!iAe&&t instanceof HTMLImageElement?xz(t.src,e):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Ji(t):Fg&&t instanceof Blob?f8(t,e,"blob",s0):void Na("Invalid input argument")}function xz(t,e){return(r=t).startsWith("data:")||r.length>1e4?p8(t,e,"base64"):Kb&&t.includes("://")?f8(t,e,"url",i0):Kb?p8(t,e,"fs"):Fg?f8(t,e,"url",i0):void Na("Invalid input argument");var r}async function f8(t,e,r,n){return ol.has(r)?p8(t,e,r):n?(async function(a,i){let s=await i(a);return new Ji(s)})(t,n):void Na(`Parser ${r} is not loaded`)}async function p8(t,e,r){let n=new(ol.get(r))(t,e);return await n.read(),n}const i0=t=>bj(t).then((e=>e.arrayBuffer())),s0=t=>new Promise(((e,r)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(t)}));class uAe extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function fa(t,e,r){let n=new uAe;for(let[a,i]of r)n.set(a,i);if(Array.isArray(e))for(let a of e)t.set(a,n);else t.set(e,n);return n}function o0(t,e,r){let n,a=t.get(e);for(n of r)a.set(n[0],n[1])}const Ja=new Map,jo=new Map,Su=new Map,fu=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Ff=["jfif","xmp","icc","iptc","ihdr"],l0=["tiff",...Ff],ra=["ifd0","ifd1","exif","gps","interop"],pu=[...l0,...ra],mu=["makerNote","userComment"],qf=["translateKeys","translateValues","reviveValues","multiSegment"],gu=[...qf,"sanitize","mergeOutput","silentErrors"];class wX{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Zp extends wX{get needed(){return this.enabled||this.deps.size>0}constructor(e,r,n,a){if(super(),Jt(this,"enabled",!1),Jt(this,"skip",new Set),Jt(this,"pick",new Set),Jt(this,"deps",new Set),Jt(this,"translateKeys",!1),Jt(this,"translateValues",!1),Jt(this,"reviveValues",!1),this.key=e,this.enabled=r,this.parse=this.enabled,this.applyInheritables(a),this.canBeFiltered=ra.includes(e),this.canBeFiltered&&(this.dict=Ja.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:i,skip:s}=n;i&&i.length>0&&this.translateTagSet(i,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Na(`Invalid options argument: ${n}`)}applyInheritables(e){let r,n;for(r of qf)n=e[r],n!==void 0&&(this[r]=n)}translateTagSet(e,r){if(this.dict){let n,a,{tagKeys:i,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(a=s.indexOf(n),a===-1&&(a=i.indexOf(Number(n))),a!==-1&&r.add(Number(i[a]))):r.add(n)}else for(let n of e)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Yb(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Yb(this.pick,this.deps)}}var Ii={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},bz=new Map;class v0 extends wX{static useCached(e){let r=bz.get(e);return r!==void 0||(r=new this(e),bz.set(e,r)),r}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Na(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Fg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of fu)this[e]=Ii[e];for(e of gu)this[e]=Ii[e];for(e of mu)this[e]=Ii[e];for(e of pu)this[e]=new Zp(e,Ii[e],void 0,this)}setupFromTrue(){let e;for(e of fu)this[e]=Ii[e];for(e of gu)this[e]=Ii[e];for(e of mu)this[e]=!0;for(e of pu)this[e]=new Zp(e,!0,void 0,this)}setupFromArray(e){let r;for(r of fu)this[r]=Ii[r];for(r of gu)this[r]=Ii[r];for(r of mu)this[r]=Ii[r];for(r of pu)this[r]=new Zp(r,!1,void 0,this);this.setupGlobalFilters(e,void 0,ra)}setupFromObject(e){let r;for(r of(ra.ifd0=ra.ifd0||ra.image,ra.ifd1=ra.ifd1||ra.thumbnail,Object.assign(this,e),fu))this[r]=RT(e[r],Ii[r]);for(r of gu)this[r]=RT(e[r],Ii[r]);for(r of mu)this[r]=RT(e[r],Ii[r]);for(r of l0)this[r]=new Zp(r,Ii[r],e[r],this);for(r of ra)this[r]=new Zp(r,Ii[r],e[r],this.tiff);this.setupGlobalFilters(e.pick,e.skip,ra,pu),e.tiff===!0?this.batchEnableWithBool(ra,!0):e.tiff===!1?this.batchEnableWithUserValue(ra,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,ra):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,ra)}batchEnableWithBool(e,r){for(let n of e)this[n].enabled=r}batchEnableWithUserValue(e,r){for(let n of e){let a=r[n];this[n].enabled=a!==!1&&a!==void 0}}setupGlobalFilters(e,r,n,a=n){if(e&&e.length){for(let s of a)this[s].enabled=!1;let i=wz(e,n);for(let[s,c]of i)Yb(this[s].pick,c),this[s].enabled=!0}else if(r&&r.length){let i=wz(r,n);for(let[s,c]of i)Yb(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:r,xmp:n,iptc:a,icc:i}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||e.skip.add(700),a.enabled||e.skip.add(33723),i.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:r,gps:n,interop:a}=this;a.needed&&(r.deps.add(40965),e.deps.add(40965)),r.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=ra.some((i=>this[i].enabled===!0))||this.makerNote||this.userComment;for(let i of ra)this[i].finalizeFilters()}get onlyTiff(){return!Ff.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of l0)this[e].enabled&&!Ta.has(e)&&h8("segment parser",e)}}function wz(t,e){let r,n,a,i,s=[];for(a of e){for(i of(r=Ja.get(a),n=[],r))(t.includes(i[0])||t.includes(i[1]))&&n.push(i[0]);n.length&&s.push([a,n])}return s}function RT(t,e){return t!==void 0?t:e!==void 0?e:void 0}function Yb(t,e){for(let r of e)t.add(r)}Jt(v0,"default",Ii);class Uu{constructor(e){Jt(this,"parsers",{}),Jt(this,"output",{}),Jt(this,"errors",[]),Jt(this,"pushToErrors",(r=>this.errors.push(r))),this.options=v0.useCached(e)}async read(e){this.file=await cAe(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,r=e.getUint16(0);for(let[n,a]of el)if(a.canHandle(e,r))return this.fileParser=new a(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Na("Unknown file format")}async parse(){let{output:e,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(e.errors=r),Xb(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map((async n=>{let a=await n.parse();n.assignToOutput(e,a)}));this.options.silentErrors&&(r=r.map((n=>n.catch(this.pushToErrors)))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:e,file:r}=this,n=Ta.get("tiff",e);var a;if(r.tiff?a={start:0,type:"tiff"}:r.jpeg&&(a=await this.fileParser.getOrFindSegment("tiff")),a===void 0)return;let i=await this.fileParser.ensureSegmentChunk(a),s=this.parsers.tiff=new n(i,e,r),c=await s.extractThumbnail();return r.close&&r.close(),c}}async function Cw(t,e){let r=new Uu(e);return await r.read(t),r.parse()}var dAe=Object.freeze({__proto__:null,parse:Cw,Exifr:Uu,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:jo,tagRevivers:Su,createDictionary:fa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:fu,otherSegments:Ff,segments:l0,tiffBlocks:ra,segmentsAndBlocks:pu,tiffExtractables:mu,inheritables:qf,allFormatters:gu,Options:v0});class Ow{constructor(e,r,n){Jt(this,"errors",[]),Jt(this,"ensureSegmentChunk",(async a=>{let i=a.start,s=a.size||65536;if(this.file.chunked)if(this.file.available(i,s))a.chunk=this.file.subarray(i,s);else try{a.chunk=await this.file.readChunk(i,s)}catch(c){Na(`Couldn't read segment: ${JSON.stringify(a)}. ${c.message}`)}else this.file.byteLength>i+s?a.chunk=this.file.subarray(i,s):a.size===void 0?a.chunk=this.file.subarray(i):Na("Segment unreachable: "+JSON.stringify(a));return a.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=r,this.parsers=n}injectSegment(e,r){this.options[e].enabled&&this.createParser(e,r)}createParser(e,r){let n=new(Ta.get(e))(r,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let r of e){let{type:n,chunk:a}=r,i=this.options[n];if(i&&i.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,a)}}}async readSegments(e){let r=e.map(this.ensureSegmentChunk);await Promise.all(r)}}class bo{static findPosition(e,r){let n=e.getUint16(r+2)+2,a=typeof this.headerLength=="function"?this.headerLength(e,r,n):this.headerLength,i=r+a,s=n-a;return{offset:r,length:n,headerLength:a,start:i,size:s,end:i+s}}static parse(e,r={}){return new this(e,new v0({[this.type]:r}),e).parse()}normalizeInput(e){return e instanceof Ji?e:new Ji(e)}constructor(e,r={},n){Jt(this,"errors",[]),Jt(this,"raw",new Map),Jt(this,"handleError",(a=>{if(!this.options.silentErrors)throw a;this.errors.push(a.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,r){let n=Su.get(r),a=jo.get(r),i=Ja.get(r),s=this.options[r],c=s.reviveValues&&!!n,d=s.translateValues&&!!a,h=s.translateKeys&&!!i,p={};for(let[m,y]of e)c&&n.has(m)?y=n.get(m)(y):d&&a.has(m)&&(y=this.translateValue(y,a.get(m))),h&&i.has(m)&&(m=i.get(m)||m),p[m]=y;return p}translateValue(e,r){return r[e]||r.DEFAULT||e}assignToOutput(e,r){this.assignObjectToOutput(e,this.constructor.type,r)}assignObjectToOutput(e,r,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[r]?Object.assign(e[r],n):e[r]=n}}Jt(bo,"headerLength",4),Jt(bo,"type",void 0),Jt(bo,"multiSegment",!1),Jt(bo,"canHandle",(()=>!1));function hAe(t){return t===192||t===194||t===196||t===219||t===221||t===218||t===254}function fAe(t){return t>=224&&t<=239}function pAe(t,e,r){for(let[n,a]of Ta)if(a.canHandle(t,e,r))return n}class Sz extends Ow{constructor(...e){super(...e),Jt(this,"appSegments",[]),Jt(this,"jpegSegments",[]),Jt(this,"unknownSegments",[])}static canHandle(e,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(Ta.keyList())):(e=e===void 0?Ta.keyList().filter((r=>this.options[r].enabled)):e.filter((r=>this.options[r].enabled&&Ta.has(r))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:a,wanted:i,remaining:s}=this;if(!a&&this.file.chunked&&(a=Array.from(i).some((c=>{let d=Ta.get(c),h=this.options[c];return d.multiSegment&&h.multiSegment})),a&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,h=this.appSegments.some((p=>!this.file.available(p.offset||p.start,p.length||p.size)));if(c=e>d&&!h?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,r){r-=2;let n,a,i,s,c,d,{file:h,findAll:p,wanted:m,remaining:y,options:v}=this;for(;e<r;e++)if(h.getUint8(e)===255){if(n=h.getUint8(e+1),fAe(n)){if(a=h.getUint16(e+2),i=pAe(h,e,a),i&&m.has(i)&&(s=Ta.get(i),c=s.findPosition(h,e),d=v[i],c.type=i,this.appSegments.push(c),!p&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(i)):y.delete(i),y.size===0)))break;v.recordUnknownSegments&&(c=bo.findPosition(h,e),c.marker=n,this.unknownSegments.push(c)),e+=a+1}else if(hAe(n)){if(a=h.getUint16(e+2),n===218&&v.stopAfterSos!==!1)return;v.recordJpegSegments&&this.jpegSegments.push({offset:e,length:a,marker:n}),e+=a+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((r=>r.multiSegment)))return;let e=(function(r,n){let a,i,s,c=new Map;for(let d=0;d<r.length;d++)a=r[d],i=a[n],c.has(i)?s=c.get(i):c.set(i,s=[]),s.push(a);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([r,n])=>{let a=Ta.get(r,this.options);return a.handleMultiSegments?{type:r,chunk:a.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((r=>r.type===e))}async getOrFindSegment(e){let r=this.getSegment(e);return r===void 0&&(await this.findAppSegments(0,[e]),r=this.getSegment(e)),r}}Jt(Sz,"type","jpeg"),el.set("jpeg",Sz);const mAe=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class gAe extends bo{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,r,n=new Map){let{pick:a,skip:i}=this.options[r];a=new Set(a);let s=a.size>0,c=i.size===0,d=this.chunk.getUint16(e);e+=2;for(let h=0;h<d;h++){let p=this.chunk.getUint16(e);if(s){if(a.has(p)&&(n.set(p,this.parseTag(e,p,r)),a.delete(p),a.size===0))break}else!c&&i.has(p)||n.set(p,this.parseTag(e,p,r));e+=12}return n}parseTag(e,r,n){let{chunk:a}=this,i=a.getUint16(e+2),s=a.getUint32(e+4),c=mAe[i];if(c*s<=4?e+=8:e=a.getUint32(e+8),(i<1||i>13)&&Na(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e}`),e>a.byteLength&&Na(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${i}, offset ${e} is outside of chunk size ${a.byteLength}`),i===1)return a.getUint8Array(e,s);if(i===2)return Od(a.getString(e,s));if(i===7)return a.getUint8Array(e,s);if(s===1)return this.parseTagValue(i,e);{let d=new((function(p){switch(p){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(i))(s),h=c;for(let p=0;p<s;p++)d[p]=this.parseTagValue(i,e),e+=h;return d}}parseTagValue(e,r){let{chunk:n}=this;switch(e){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:Na(`Invalid tiff type ${e}`)}}}class MT extends gAe{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1165519206&&e.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let r=this[e]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(e,r){let n=new Map;return this[r]=n,this.parseTags(e,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Na("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Na(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,u8(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,u8(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,r){let n=e.get(r);n&&n.length===1&&e.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",_z(...e.get(2),e.get(1))),e.set("longitude",_z(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(e,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,r,n,a={};for(r of ra)if(e=this[r],!xX(e))if(n=this.canTranslate?this.translateBlock(e,r):Object.fromEntries(e),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(a,n)}else a[r]=n;return this.makerNote&&(a.makerNote=this.makerNote),this.userComment&&(a.userComment=this.userComment),a}assignToOutput(e,r){if(this.globalOptions.mergeOutput)Object.assign(e,r);else for(let[n,a]of Object.entries(r))this.assignObjectToOutput(e,n,a)}}function _z(t,e,r,n){var a=t+e/60+r/3600;return n!=="S"&&n!=="W"||(a*=-1),a}Jt(MT,"type","tiff"),Jt(MT,"headerLength",10),Ta.set("tiff",MT);var yAe=Object.freeze({__proto__:null,default:dAe,Exifr:Uu,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:jo,tagRevivers:Su,createDictionary:fa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:fu,otherSegments:Ff,segments:l0,tiffBlocks:ra,segmentsAndBlocks:pu,tiffExtractables:mu,inheritables:qf,allFormatters:gu,Options:v0,parse:Cw});const Sj={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},_j=Object.assign({},Sj,{firstChunkSize:4e4,gps:[1,2,3,4]});async function SX(t){let e=new Uu(_j);await e.read(t);let r=await e.parse();if(r&&r.gps){let{latitude:n,longitude:a}=r.gps;return{latitude:n,longitude:a}}}const Tj=Object.assign({},Sj,{tiff:!1,ifd1:!0,mergeOutput:!1});async function _X(t){let e=new Uu(Tj);await e.read(t);let r=await e.extractThumbnail();return r&&kw?jw.from(r):r}async function TX(t){let e=await this.thumbnail(t);if(e!==void 0){let r=new Blob([e]);return URL.createObjectURL(r)}}const Aj=Object.assign({},Sj,{firstChunkSize:4e4,ifd0:[274]});async function Nj(t){let e=new Uu(Aj);await e.read(t);let r=await e.parse();if(r&&r.ifd0)return r.ifd0[274]}const Ej=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Id=!0,Rd=!0;if(typeof navigator=="object"){let t=navigator.userAgent;if(t.includes("iPad")||t.includes("iPhone")){let e=t.match(/OS (\d+)_(\d+)/);if(e){let[,r,n]=e;Id=Number(r)+.1*Number(n)<13.4,Rd=!1}}else if(t.includes("OS X 10")){let[,e]=t.match(/OS X 10[_.](\d+)/);Id=Rd=Number(e)<15}if(t.includes("Chrome/")){let[,e]=t.match(/Chrome\/(\d+)/);Id=Rd=Number(e)<81}else if(t.includes("Firefox/")){let[,e]=t.match(/Firefox\/(\d+)/);Id=Rd=Number(e)<77}}async function AX(t){let e=await Nj(t);return Object.assign({canvas:Id,css:Rd},Ej[e])}class vAe extends Ji{constructor(...e){super(...e),Jt(this,"ranges",new xAe),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,r,n){if(e===0&&this.byteLength===0&&n){let a=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(a)}else{let a=e+r;if(a>this.byteLength){let{dataView:i}=this._extend(a);this._swapDataView(i)}}}_extend(e){let r;r=kw?jw.allocUnsafe(e):new Uint8Array(e);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(e,r,n=!1){return r=r||this._lengthToEnd(e),n&&this._tryExtend(e,r),this.ranges.add(e,r),super.subarray(e,r)}set(e,r,n=!1){n&&this._tryExtend(r,e.byteLength,e);let a=super.set(e,r);return this.ranges.add(r,a.byteLength),a}async ensureChunk(e,r){this.chunked&&(this.ranges.available(e,r)||await this.readChunk(e,r))}available(e,r){return this.ranges.available(e,r)}}class xAe{constructor(){Jt(this,"list",[])}get length(){return this.list.length}add(e,r,n=0){let a=e+r,i=this.list.filter((s=>Tz(e,s.offset,a)||Tz(e,s.end,a)));if(i.length>0){e=Math.min(e,...i.map((c=>c.offset))),a=Math.max(a,...i.map((c=>c.end))),r=a-e;let s=i.shift();s.offset=e,s.length=r,s.end=a,this.list=this.list.filter((c=>!i.includes(c)))}else this.list.push({offset:e,length:r,end:a})}available(e,r){let n=e+r;return this.list.some((a=>a.offset<=e&&n<=a.end))}}function Tz(t,e,r){return t<=e&&e<=r}class Iw extends vAe{constructor(e,r){super(0),Jt(this,"chunksRead",0),this.input=e,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(e,r);return!!n&&n.byteLength===r}async readChunk(e,r){if(this.chunksRead++,(r=this.safeWrapAddress(e,r))!==0)return this._readChunk(e,r)}safeWrapAddress(e,r){return this.size!==void 0&&e+r>this.size?Math.max(0,this.size-e):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ol.set("blob",class extends Iw{async readWhole(){this.chunked=!1;let t=await s0(this.input);this._swapArrayBuffer(t)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(t,e){let r=e?t+e:void 0,n=this.input.slice(t,r),a=await s0(n);return this.set(a,t,!0)}});var bAe=Object.freeze({__proto__:null,default:yAe,Exifr:Uu,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:jo,tagRevivers:Su,createDictionary:fa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:fu,otherSegments:Ff,segments:l0,tiffBlocks:ra,segmentsAndBlocks:pu,tiffExtractables:mu,inheritables:qf,allFormatters:gu,Options:v0,parse:Cw,gpsOnlyOptions:_j,gps:SX,thumbnailOnlyOptions:Tj,thumbnail:_X,thumbnailUrl:TX,orientationOnlyOptions:Aj,orientation:Nj,rotations:Ej,get rotateCanvas(){return Id},get rotateCss(){return Rd},rotation:AX});ol.set("url",class extends Iw{async readWhole(){this.chunked=!1;let t=await i0(this.input);t instanceof ArrayBuffer?this._swapArrayBuffer(t):t instanceof Uint8Array&&this._swapBuffer(t)}async _readChunk(t,e){let r=e?t+e-1:void 0,n=this.options.httpHeaders||{};(t||r)&&(n.range=`bytes=${[t,r].join("-")}`);let a=await bj(this.input,{headers:n}),i=await a.arrayBuffer(),s=i.byteLength;if(a.status!==416)return s!==e&&(this.size=t+s),this.set(i,t,!0)}});Ji.prototype.getUint64=function(t){let e=this.getUint32(t),r=this.getUint32(t+4);return e<1048575?e<<32|r:typeof Iv!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Iv(e)<<Iv(32)|Iv(r)):void Na("Trying to read 64b value but JS can only handle 53b numbers.")};class wAe extends Ow{parseBoxes(e=0){let r=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(r.push(n),n.length===0)break;e+=n.length}return r}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,r){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===r))}parseBoxHead(e){let r=this.file.getUint32(e),n=this.file.getString(e+4,4),a=e+8;return r===1&&(r=this.file.getUint64(e+8),a+=8),{offset:e,length:r,kind:n,start:a}}parseBoxFullHead(e){if(e.version!==void 0)return;let r=this.file.getUint32(e.start);e.version=r>>24,e.start+=4}}class NX extends wAe{static canHandle(e,r){if(r!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let a=16,i=[];for(;a<n;)i.push(e.getString(a,4)),a+=4;return i.includes(this.type)}async parse(){let e=this.file.getUint32(0),r=this.parseBoxHead(e);for(;r.kind!=="meta";)e+=r.length,await this.file.ensureChunk(e,16),r=this.parseBoxHead(e);await this.file.ensureChunk(r.offset,r.length),this.parseBoxFullHead(r),this.parseSubBoxes(r),this.options.icc.enabled&&await this.findIcc(r),this.options.tiff.enabled&&await this.findExif(r)}async registerSegment(e,r,n){await this.file.ensureChunk(r,n);let a=this.file.subarray(r,n);this.createParser(e,a)}async findIcc(e){let r=this.findBox(e,"iprp");if(r===void 0)return;let n=this.findBox(r,"ipco");if(n===void 0)return;let a=this.findBox(n,"colr");a!==void 0&&await this.registerSegment("icc",a.offset+12,a.length)}async findExif(e){let r=this.findBox(e,"iinf");if(r===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let a=this.findExifLocIdInIinf(r),i=this.findExtentInIloc(n,a);if(i===void 0)return;let[s,c]=i;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let r,n,a,i,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(r=this.parseBoxHead(s),this.parseBoxFullHead(r),n=r.start,r.version>=2&&(a=r.version===3?4:2,i=this.file.getString(n+a+2,4),i==="Exif"))return this.file.getUintBytes(n,a);s+=r.length}}get8bits(e){let r=this.file.getUint8(e);return[r>>4,15&r]}findExtentInIloc(e,r){this.parseBoxFullHead(e);let n=e.start,[a,i]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,h=e.version===1||e.version===2?2:0,p=c+a+i,m=e.version===2?4:2,y=this.file.getUintBytes(n,m);for(n+=m;y--;){let v=this.file.getUintBytes(n,d);n+=d+h+2+s;let T=this.file.getUint16(n);if(n+=2,v===r)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,a),this.file.getUintBytes(n+c+a,i)];n+=T*p}}}class EX extends NX{}Jt(EX,"type","heic");class Az extends NX{}Jt(Az,"type","avif"),el.set("heic",EX),el.set("avif",Az),fa(Ja,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),fa(Ja,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),fa(Ja,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),fa(jo,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let Om=fa(jo,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const Nz={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};Om.set(37392,Nz),Om.set(41488,Nz);const PT={0:"Normal",1:"Low",2:"High"};function Ez(t){return typeof t=="object"&&t.length!==void 0?t[0]:t}function jz(t){let e=Array.from(t).slice(1);return e[1]>15&&(e=e.map((r=>String.fromCharCode(r)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function DT(t){if(typeof t=="string"){var[e,r,n,a,i,s]=t.trim().split(/[-: ]/g).map(Number),c=new Date(e,r-1,n);return Number.isNaN(a)||Number.isNaN(i)||Number.isNaN(s)||(c.setHours(a),c.setMinutes(i),c.setSeconds(s)),Number.isNaN(+c)?t:c}}function Jp(t){if(typeof t=="string")return t;let e=[];if(t[1]===0&&t[t.length-1]===0)for(let r=0;r<t.length;r+=2)e.push(kz(t[r+1],t[r]));else for(let r=0;r<t.length;r+=2)e.push(kz(t[r],t[r+1]));return Od(String.fromCodePoint(...e))}function kz(t,e){return t<<8|e}Om.set(41992,PT),Om.set(41993,PT),Om.set(41994,PT),fa(Su,["ifd0","ifd1"],[[50827,function(t){return typeof t!="string"?bX(t):t}],[306,DT],[40091,Jp],[40092,Jp],[40093,Jp],[40094,Jp],[40095,Jp]]),fa(Su,"exif",[[40960,jz],[36864,jz],[36867,DT],[36868,DT],[40962,Ez],[40963,Ez]]),fa(Su,"gps",[[0,t=>Array.from(t).join(".")],[7,t=>Array.from(t).join(":")]]);class LT extends bo{static canHandle(e,r){return e.getUint8(r+1)===225&&e.getUint32(r+4)===1752462448&&e.getString(r+4,20)==="http://ns.adobe.com/"}static headerLength(e,r){return e.getString(r+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,r){let n=super.findPosition(e,r);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(r+72),n.chunkNumber=e.getUint8(r+76),e.getUint8(r+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((r=>r.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:Ji.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(i){let s={},c={};for(let d of OX)s[d]=[],c[d]=0;return i.replace(AAe,((d,h,p)=>{if(h==="<"){let m=++c[p];return s[p].push(m),`${d}#${m}`}return`${d}#${s[p].pop()}`}))})(e);let r=Ch.findAll(e,"rdf","Description");r.length===0&&r.push(new Ch("rdf","Description",void 0,e));let n,a={};for(let i of r)for(let s of i.properties)n=TAe(s.ns,a),jX(s,n);return(function(i){let s;for(let c in i)s=i[c]=Xb(i[c]),s===void 0&&delete i[c];return Xb(i)})(a)}assignToOutput(e,r){if(this.localOptions.parse)for(let[n,a]of Object.entries(r))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",a);break;case"exif":this.assignObjectToOutput(e,"exif",a);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,a)}else e.xmp=r}}Jt(LT,"type","xmp"),Jt(LT,"multiSegment",!0),Ta.set("xmp",LT);class Zb{static findAll(e){return kX(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(Zb.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[3].slice(1,-1);return a=CX(a),new Zb(r,n,a)}constructor(e,r,n){this.ns=e,this.name=r,this.value=n}serialize(){return this.value}}class Ch{static findAll(e,r,n){if(r!==void 0||n!==void 0){r=r||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var a=new RegExp(`<(${r}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else a=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return kX(e,a).map(Ch.unpackMatch)}static unpackMatch(e){let r=e[1],n=e[2],a=e[4],i=e[8];return new Ch(r,n,a,i)}constructor(e,r,n,a){this.ns=e,this.name=r,this.attrString=n,this.innerXml=a,this.attrs=Zb.findAll(n),this.children=Ch.findAll(a),this.value=this.children.length===0?CX(a):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:r}=this;return e==="rdf"&&(r==="Seq"||r==="Bag"||r==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return _Ae(this.children.map(SAe));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let r of this.properties)jX(r,e);return this.value!==void 0&&(e.value=this.value),Xb(e)}}function jX(t,e){let r=t.serialize();r!==void 0&&(e[t.name]=r)}var SAe=t=>t.serialize(),_Ae=t=>t.length===1?t[0]:t,TAe=(t,e)=>e[t]?e[t]:e[t]={};function kX(t,e){let r,n=[];if(!t)return n;for(;(r=e.exec(t))!==null;)n.push(r);return n}function CX(t){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(t))return;let e=Number(t);if(!Number.isNaN(e))return e;let r=t.toLowerCase();return r==="true"||r!=="false"&&t.trim()}const OX=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],AAe=new RegExp(`(<|\\/)(${OX.join("|")})`,"g");var NAe=Object.freeze({__proto__:null,default:bAe,Exifr:Uu,fileParsers:el,segmentParsers:Ta,fileReaders:ol,tagKeys:Ja,tagValues:jo,tagRevivers:Su,createDictionary:fa,extendDictionary:o0,fetchUrlAsArrayBuffer:i0,readBlobAsArrayBuffer:s0,chunkedProps:fu,otherSegments:Ff,segments:l0,tiffBlocks:ra,segmentsAndBlocks:pu,tiffExtractables:mu,inheritables:qf,allFormatters:gu,Options:v0,parse:Cw,gpsOnlyOptions:_j,gps:SX,thumbnailOnlyOptions:Tj,thumbnail:_X,thumbnailUrl:TX,orientationOnlyOptions:Aj,orientation:Nj,rotations:Ej,get rotateCanvas(){return Id},get rotateCss(){return Rd},rotation:AX});let Cz=Qb("fs",(t=>t.promises));ol.set("fs",class extends Iw{async readWhole(){this.chunked=!1,this.fs=await Cz;let t=await this.fs.readFile(this.input);this._swapBuffer(t)}async readChunked(){this.chunked=!0,this.fs=await Cz,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(t,e){this.fh===void 0&&await this.open(),t+e>this.size&&(e=this.size-t);var r=this.subarray(t,e,!0);return await this.fh.read(r.dataView,0,e,t),r}async close(){if(this.fh){let t=this.fh;this.fh=void 0,await t.close()}}});ol.set("base64",class extends Iw{constructor(...t){super(...t),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(t,e){let r,n,a=this.input;t===void 0?(t=0,r=0,n=0):(r=4*Math.floor(t/3),n=t-r/4*3),e===void 0&&(e=this.size);let i=t+e,s=r+4*Math.ceil(i/3);a=a.slice(r,s);let c=Math.min(e,this.size-t);if(kw){let d=jw.from(a,"base64").slice(n,n+c);return this.set(d,t,!0)}{let d=this.subarray(t,c,!0),h=atob(a),p=d.toUint8();for(let m=0;m<c;m++)p[m]=h.charCodeAt(n+m);return d}}});class Oz extends Ow{static canHandle(e,r){return r===18761||r===19789}extendOptions(e){let{ifd0:r,xmp:n,iptc:a,icc:i}=e;n.enabled&&r.deps.add(700),a.enabled&&r.deps.add(33723),i.enabled&&r.deps.add(34675),r.finalizeFilters()}async parse(){let{tiff:e,xmp:r,iptc:n,icc:a}=this.options;if(e.enabled||r.enabled||n.enabled||a.enabled){let i=Math.max(u8(this.options),this.options.chunkSize);await this.file.ensureChunk(0,i),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let r=this.parsers.tiff[e];this.injectSegment(e,r)}}}Jt(Oz,"type","tiff"),el.set("tiff",Oz);let EAe=Qb("zlib");const jAe=["ihdr","iccp","text","itxt","exif"];class Iz extends Ow{constructor(...e){super(...e),Jt(this,"catchError",(r=>this.errors.push(r))),Jt(this,"metaChunks",[]),Jt(this,"unknownChunks",[])}static canHandle(e,r){return r===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,r){let{file:n}=this;for(;e<r;){let a=n.getUint32(e),i=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=a+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:a,marker:i};jAe.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((r=>r.type==="text"));for(let r of e){let[n,a]=this.file.getString(r.start,r.size).split("\0");this.injectKeyValToIhdr(n,a)}}injectKeyValToIhdr(e,r){let n=this.parsers.ihdr;n&&n.raw.set(e,r)}findIhdr(){let e=this.metaChunks.find((r=>r.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((r=>r.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((r=>r.type==="itxt"));for(let r of e)r.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",r.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:r}=e,n=r.getUint8Array(0,81),a=0;for(;a<80&&n[a]!==0;)a++;let i=a+2,s=r.getString(0,a);if(this.injectKeyValToIhdr("ProfileName",s),Kb){let c=await EAe,d=r.getUint8Array(i);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Jt(Iz,"type","png"),el.set("png",Iz),fa(Ja,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),o0(Ja,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Rz=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];o0(Ja,"ifd0",Rz),o0(Ja,"exif",Rz),fa(jo,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class BT extends bo{static canHandle(e,r){return e.getUint8(r+1)===224&&e.getUint32(r+4)===1246120262&&e.getUint8(r+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Jt(BT,"type","jfif"),Jt(BT,"headerLength",9),Ta.set("jfif",BT),fa(Ja,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class Mz extends bo{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Jt(Mz,"type","ihdr"),Ta.set("ihdr",Mz),fa(Ja,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),fa(jo,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class rx extends bo{static canHandle(e,r){return e.getUint8(r+1)===226&&e.getUint32(r+4)===1229144927}static findPosition(e,r){let n=super.findPosition(e,r);return n.chunkNumber=e.getUint8(r+16),n.chunkCount=e.getUint8(r+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(r){let n=(function(a){let i=a[0].constructor,s=0;for(let h of a)s+=h.length;let c=new i(s),d=0;for(let h of a)c.set(h,d),d+=h.length;return c})(r.map((a=>a.chunk.toUint8())));return new Ji(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Na("ICC header is too short");for(let[r,n]of Object.entries(kAe)){r=parseInt(r,10);let a=n(this.chunk,r);a!=="\0\0\0\0"&&e.set(r,a)}}parseTags(){let e,r,n,a,i,{raw:s}=this,c=this.chunk.getUint32(128),d=132,h=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),r=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),a=this.chunk.getString(r,4),r+n>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");i=this.parseTag(a,r,n),i!==void 0&&i!=="\0\0\0\0"&&s.set(e,i),d+=12}}parseTag(e,r,n){switch(e){case"desc":return this.parseDesc(r);case"mluc":return this.parseMluc(r);case"text":return this.parseText(r,n);case"sig ":return this.parseSig(r)}if(!(r+n>this.chunk.byteLength))return this.chunk.getUint8Array(r,n)}parseDesc(e){let r=this.chunk.getUint32(e+8)-1;return Od(this.chunk.getString(e+12,r))}parseText(e,r){return Od(this.chunk.getString(e+8,r-8))}parseSig(e){return Od(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:r}=this,n=r.getUint32(e+8),a=r.getUint32(e+12),i=e+16,s=[];for(let c=0;c<n;c++){let d=r.getString(i+0,2),h=r.getString(i+2,2),p=r.getUint32(i+4),m=r.getUint32(i+8)+e,y=Od(r.getUnicodeString(m,p));s.push({lang:d,country:h,text:y}),i+=a}return n===1?s[0].text:s}translateValue(e,r){return typeof e=="string"?r[e]||r[e.toLowerCase()]||e:r[e]||e}}Jt(rx,"type","icc"),Jt(rx,"multiSegment",!0),Jt(rx,"headerLength",18);const kAe={4:Cl,8:function(t,e){return[t.getUint8(e),t.getUint8(e+1)>>4,t.getUint8(e+1)%16].map((r=>r.toString(10))).join(".")},12:Cl,16:Cl,20:Cl,24:function(t,e){const r=t.getUint16(e),n=t.getUint16(e+2)-1,a=t.getUint16(e+4),i=t.getUint16(e+6),s=t.getUint16(e+8),c=t.getUint16(e+10);return new Date(Date.UTC(r,n,a,i,s,c))},36:Cl,40:Cl,48:Cl,52:Cl,64:(t,e)=>t.getUint32(e),80:Cl};function Cl(t,e){return Od(t.getString(e,4))}Ta.set("icc",rx),fa(Ja,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Rv={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},Pz={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};fa(jo,"icc",[[4,Rv],[12,Pz],[40,Object.assign({},Rv,Pz)],[48,Rv],[80,Rv],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Mv extends bo{static canHandle(e,r,n){return e.getUint8(r+1)===237&&e.getString(r+4,9)==="Photoshop"&&this.containsIptc8bim(e,r,n)!==void 0}static headerLength(e,r,n){let a,i=this.containsIptc8bim(e,r,n);if(i!==void 0)return a=e.getUint8(r+i+7),a%2!=0&&(a+=1),a===0&&(a=4),i+8+a}static containsIptc8bim(e,r,n){for(let a=0;a<n;a++)if(this.isIptcSegmentHead(e,r+a))return a}static isIptcSegmentHead(e,r){return e.getUint8(r)===56&&e.getUint32(r)===943868237&&e.getUint16(r+4)===1028}parse(){let{raw:e}=this,r=this.chunk.byteLength-1,n=!1;for(let a=0;a<r;a++)if(this.chunk.getUint8(a)===28&&this.chunk.getUint8(a+1)===2){n=!0;let i=this.chunk.getUint16(a+3),s=this.chunk.getUint8(a+2),c=this.chunk.getLatin1String(a+5,i);e.set(s,this.pluralizeValue(e.get(s),c)),a+=4+i}else if(n)break;return this.translate(),this.output}pluralizeValue(e,r){return e!==void 0?e instanceof Array?(e.push(r),e):[e,r]:r}}Jt(Mv,"type","iptc"),Jt(Mv,"translateValues",!1),Jt(Mv,"reviveValues",!1),Ta.set("iptc",Mv),fa(Ja,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),fa(jo,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const em=["Monday","Tuesday","Wednesday","Thursday","Friday"],CAe=({user:t})=>{const e=mi(),{confirm:r}=al(),n=k.useMemo(()=>Re.getWeekId(),[]),[a,i]=k.useState([]),[s,c]=k.useState("Monday"),[d,h]=k.useState(!1),p=k.useRef(null),[m,y]=k.useState(!1),v=t.enrolledClasses||(t.classType?[t.classType]:[]),[T,S]=k.useState(t.classType||v[0]||"Uncategorized");k.useEffect(()=>{const N=new Date().toLocaleDateString("en-US",{weekday:"long"});em.includes(N)&&c(N)},[]),k.useEffect(()=>{const N=Re.subscribeToEvidence(t.id,n,i);return()=>N()},[t.id,n]);const w=k.useMemo(()=>{const N=v[0]||"Uncategorized";return a.filter(A=>A.classType?A.classType===T:T===N)},[a,T,v]),j=N=>w.find(A=>A.dayOfWeek===N),R=N=>N?new Date(N).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,I=async N=>{var E;const A=(E=N.target.files)==null?void 0:E[0];if(A){h(!0);try{let V=null;if(A.type.startsWith("image/"))try{const ie=await NAe.parse(A,["DateTimeOriginal"])||{};ie.DateTimeOriginal&&(V=ie.DateTimeOriginal.toISOString())}catch(ie){console.warn("EXIF extraction failed",ie)}const D=T.replace(/[^a-zA-Z0-9]/g,"_"),U=Math.random().toString(36).substring(2,9),$=ym(vm,`evidence/${t.id}/${n}/${D}_${s}_${U}`);await bA($,A);const Q=await Tx($),K=j(s),J={id:`${t.id}_${n}_${s}_${D}`,studentId:t.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Q,timestamp:new Date().toISOString(),exifDate:V,reflection:(K==null?void 0:K.reflection)||""};await Re.uploadEvidence(J)}catch(V){e.error("Upload failed: "+(V instanceof Error?V.message:"Unknown error"))}finally{h(!1),p.current&&(p.current.value="")}}},L=async(N,A)=>{const E=j(N);E&&E.reflection!==A&&await Re.uploadEvidence({...E,reflection:A})},C=async()=>{if(!(w.length===0||!await r({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const A=new lZ,E=A.internal.pageSize.getWidth(),V=A.internal.pageSize.getHeight(),D=20,U=E-D*2,$=V-D;A.setFillColor(15,7,32),A.rect(0,0,E,40,"F"),A.setTextColor(255,255,255),A.setFontSize(22),A.setFont("helvetica","bold"),A.text("WEEKLY PROGRESS REPORT",D,18),A.setFontSize(10),A.setFont("helvetica","normal"),A.text(`Operative: ${t.name.toUpperCase()}`,D,28),A.text(`Class: ${T}`,D,33),A.text(`Cycle ID: ${n}`,D,38),A.text(`Generated: ${new Date().toLocaleDateString()}`,E-D,33,{align:"right"});let Q=55;const K=[...w].sort((H,J)=>em.indexOf(H.dayOfWeek)-em.indexOf(J.dayOfWeek));for(const H of K){let J=null,ie="JPEG",pe=0,me=0,X=!1;try{const W=await fetch(H.imageUrl);if(!W.ok)throw new Error(`Image fetch failed: ${W.statusText}`);const he=await W.blob();J=await new Promise((Ye,xt)=>{const it=new FileReader;it.onloadend=()=>Ye(it.result),it.onerror=xt,it.readAsDataURL(he)}),he.type==="image/png"&&(ie="PNG"),he.type==="image/webp"&&(ie="WEBP");const te=A.getImageProperties(J),ae=te.width/te.height,Ue=100;pe=U,me=pe/ae,me>Ue&&(me=Ue,pe=me*ae)}catch(W){console.warn("Image processing error for PDF",W),X=!0,me=15}const Ae=20+me+12;Q+Ae>$&&(A.addPage(),Q=D),A.setDrawColor(200,200,200),A.setLineWidth(.5),A.line(D,Q,E-D,Q),Q+=6,A.setTextColor(15,7,32),A.setFontSize(16),A.setFont("helvetica","bold"),A.text(H.dayOfWeek.toUpperCase(),D,Q);const Se=R(H.exifDate)||R(H.timestamp);if(A.setFontSize(9),A.setFont("helvetica","italic"),A.setTextColor(100,100,100),A.text(`Captured: ${Se}`,E-D,Q,{align:"right"}),Q+=10,!X&&J){const W=(E-pe)/2;A.addImage(J,ie,W,Q,pe,me),Q+=me+12}else A.setTextColor(255,0,0),A.setFontSize(8),A.text("[Image Error]",D,Q),Q+=15;A.setFont("helvetica","normal"),A.setFontSize(10);const ze=H.reflection||"No reflection logged for this cycle.",He=A.splitTextToSize(ze,U),st=He.length*5+15;Q+st>$&&(A.addPage(),Q=D),A.setTextColor(15,7,32),A.setFontSize(11),A.setFont("helvetica","bold"),A.text("DAILY REFLECTION:",D,Q),Q+=6,A.setFont("helvetica","normal"),A.setFontSize(10),A.setTextColor(60,60,60),A.text(He,D,Q),Q+=He.length*5+25}A.save(`Report_${T.replace(/\s+/g,"")}_${t.name.replace(/\s+/g,"_")}_${n}.pdf`),await Re.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(A){console.error("PDF generation failed:",A),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},P=j(s);return o.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[o.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[o.jsx(ZI,{className:"w-7 h-7"})," Weekly Evidence Log"]}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[v.length>1?o.jsxs("div",{className:"relative group",children:[o.jsx("select",{value:T,onChange:N=>S(N.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:v.map(N=>o.jsx("option",{value:N,children:N},N))}),o.jsx(Ai,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):o.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),o.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[o.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),o.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),o.jsxs("button",{onClick:C,disabled:m||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[m?o.jsx(rs,{className:"w-5 h-5 animate-spin"}):o.jsx(Voe,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),o.jsx("input",{type:"file",ref:p,onChange:I,className:"hidden",accept:"image/*"}),o.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:em.map(N=>{const A=j(N),E=s===N;return o.jsxs("button",{onClick:()=>c(N),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${E?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[o.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${E?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",em.indexOf(N)+1]}),o.jsx("span",{className:"font-bold text-sm",children:N}),A&&o.jsx("div",{className:`absolute top-2 right-2 ${E?"text-emerald-200":"text-emerald-500"}`,children:o.jsx(jx,{className:"w-3 h-3"})})]},N)})}),o.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[o.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(Yoe,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),P&&o.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[o.jsx(Js,{className:"w-3 h-3"}),R(P.exifDate)||R(P.timestamp)]})]}),o.jsx("div",{className:"flex-1 min-h-[180px] bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:P?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:P.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),o.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},children:[o.jsx(Zd,{className:"w-8 h-8 text-emerald-400"}),o.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):o.jsxs("button",{onClick:()=>{var N;return(N=p.current)==null?void 0:N.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?o.jsx(rs,{className:"w-10 h-10 animate-spin text-emerald-500"}):o.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:o.jsx(ZI,{className:"w-8 h-8"})}),o.jsxs("div",{className:"text-center",children:[o.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),o.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),o.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[o.jsx("div",{className:"mb-2",children:o.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[o.jsx(Xm,{className:"w-4 h-4"})," Daily Reflection"]})}),P?o.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:P.reflection,onBlur:N=>L(s,N.target.value)},s):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[o.jsx("div",{className:"mb-2 opacity-30",children:o.jsx(Ld,{className:"w-6 h-6"})}),o.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),o.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},OAe=({user:t})=>{const e=mi(),[r,n]=k.useState({id:Math.random().toString(36).substring(2,9),studentId:t.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[a,i]=k.useState(""),[s,c]=k.useState(""),[d,h]=k.useState("");k.useEffect(()=>{const y=r.content.replace(/\$(.*?)\$/g,(v,T)=>{try{return Ux.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");i(y)},[r.content]);const p=async()=>{await Re.saveLabReport(r),await Re.awardXP(t.id,25),e.success("Report saved!")},m=()=>{const y=parseFloat(s),v=parseFloat(d);!isNaN(y)&&!isNaN(v)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:v}].sort((S,w)=>S.x-w.x)})),c(""),h(""))};return o.jsxs("div",{className:"h-full flex flex-col gap-6",children:[o.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[o.jsx(N2,{className:"w-6 h-6"})," Physics Laboratory"]}),o.jsxs("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[o.jsx(dH,{className:"w-4 h-4"})," Save Report"]})]}),o.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:o.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),o.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[o.jsxs("div",{className:"w-1/3",children:[o.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),o.jsxs("div",{className:"flex gap-2 mb-2",children:[o.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),o.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>h(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),o.jsx("button",{onClick:m,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx(SW,{width:"100%",height:"100%",children:o.jsxs(qSe,{children:[o.jsx(EQ,{strokeDasharray:"3 3",stroke:"#333"}),o.jsx(xw,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),o.jsx(bw,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),o.jsx(Do,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),o.jsx(A1,{name:"Data",data:r.dataPoints,fill:"#3b82f6"})]})})})]})]}),o.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[o.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:o.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[o.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:r.content,onChange:y=>n(v=>({...v,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),o.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:mG.sanitize(a,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},IAe=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],RAe=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],MAe=({userId:t,classType:e,onClose:r})=>{var L,C,P,N,A;const[n,a]=k.useState(null),[i,s]=k.useState(!0);if(k.useEffect(()=>{(async()=>{const V=await Re.getPublicProfile(t);a(V),s(!1)})()},[t]),i)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:r,children:o.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(L=n.settings)==null?void 0:L.privacyMode,h=d?c.codename||"Unknown Agent":n.name,p=c.level||1,m=Kh(p),y=vX(p),{equipped:v,appearance:T}=Jd(n,e),S=sE({gamification:{...c,equipped:v}}),w=Qh(v),j=((C=c.classXp)==null?void 0:C[e])||0,R=Object.values(v).filter(Boolean),I=yX(R);return o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:o.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:E=>E.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:o.jsx(Da,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-24 h-32 shrink-0",children:o.jsx(Vg,{equipped:v,appearance:T})}),o.jsxs("div",{children:[o.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:h}),o.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${m.tierColor.split(" ")[1]}`,children:m.rankName}),o.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",p]}),o.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($a,{className:"w-3 h-3 text-cyan-400"}),o.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[j.toLocaleString()," XP"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3 text-yellow-400"}),o.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(Yo,{className:"w-3 h-3"})," Stats"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:IAe.map(({key:E,label:V,color:D,icon:U})=>{const $=S[E]||0;return o.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[o.jsx("span",{className:"text-sm",children:U}),o.jsx("span",{className:"text-xs text-gray-400",children:V}),o.jsx("span",{className:`text-sm font-bold ${D} ml-auto`,children:$})]},E)})})]}),o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(To,{className:"w-3 h-3"})," Equipment"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:RAe.map(E=>{const V=v[E];if(!V)return o.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[o.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:E}),o.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},E);const D=la(V.rarity);return o.jsxs("div",{className:`p-2 rounded-lg border ${D.border} ${D.bg}`,children:[o.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:E}),o.jsx("div",{className:`text-xs font-bold truncate ${D.text}`,children:V.name}),o.jsx("div",{className:"text-[9px] text-gray-500",children:V.rarity})]},E)})})]}),I.length>0&&o.jsxs("div",{className:"p-6 border-b border-white/5",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(k2,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),I.map(({set:E,activeBonus:V})=>o.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[o.jsx("div",{className:"text-xs font-bold text-purple-400",children:E.name}),o.jsxs("div",{className:"text-[10px] text-gray-400",children:[V.label,": ",V.effects.map(D=>`+${D.value} ${D.stat}`).join(", ")]})]},E.id))]}),(((P=c.unlockedAchievements)==null?void 0:P.length)||0)>0&&o.jsxs("div",{className:"p-6",children:[o.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[o.jsx(tc,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(N=c.unlockedAchievements)==null?void 0:N.length,")"]}),o.jsx("div",{className:"flex flex-wrap gap-1",children:(A=c.unlockedAchievements)==null?void 0:A.slice(0,12).map(E=>o.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:E.replace(/_/g," ")},E))})]})]})})},PAe=()=>o.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((t,e)=>o.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[o.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),o.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),o.jsxs("div",{className:"space-y-2 text-right",children:[o.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),o.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),DAe=({user:t})=>{var m;const[e,r]=k.useState([]),[n,a]=k.useState(t.classType||((m=t.enrolledClasses)==null?void 0:m[0])||Rr.AP_PHYSICS),[i,s]=k.useState(!0),[c,d]=k.useState(null);k.useEffect(()=>{const y=Re.subscribeToLeaderboard(v=>{r(v),s(!1)});return()=>y()},[]);const h=k.useMemo(()=>{const y=t.enrolledClasses||[];if(y.length>0)return y.sort();const v=new Set;return e.forEach(T=>{var S;return(S=T.enrolledClasses)==null?void 0:S.forEach(w=>v.add(w))}),Array.from(v).sort()},[t.enrolledClasses,e]),p=k.useMemo(()=>e.filter(y=>{var v;return(v=y.enrolledClasses)==null?void 0:v.includes(n)}).sort((y,v)=>{var w,j,R,I;const T=((j=(w=y.gamification)==null?void 0:w.classXp)==null?void 0:j[n])||0;return(((I=(R=v.gamification)==null?void 0:R.classXp)==null?void 0:I[n])||0)-T}).slice(0,10),[e,n]);return o.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[o.jsxs("div",{className:"text-center mb-10",children:[o.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),o.jsxs("div",{className:"inline-block relative",children:[o.jsxs("select",{value:n,onChange:y=>a(y.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[h.map(y=>o.jsx("option",{value:y,children:y},y)),h.length===0&&o.jsx("option",{children:n})]}),o.jsx(Ai,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),o.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?o.jsx(PAe,{}):o.jsxs(o.Fragment,{children:[p.length>=3&&o.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(y=>{var N,A,E,V;const v=p[y];if(!v)return null;const T=(N=v.settings)==null?void 0:N.privacyMode,S=T?((A=v.gamification)==null?void 0:A.codename)||"Unknown Agent":v.name,w=((V=(E=v.gamification)==null?void 0:E.classXp)==null?void 0:V[n])||0,j=Math.floor(w/1e3)+1,R=Kh(j),I=y===0,L=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],P=[{icon:o.jsx(tc,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:o.jsx(iv,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:o.jsx(iv,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return o.jsxs("div",{className:`flex flex-col items-center ${I?"order-2":y===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+y*.15}s both`},children:[o.jsxs("div",{className:`relative mb-2 ${I?"mb-3":""}`,children:[o.jsx("div",{className:`${C[y]} rounded-full p-0.5 bg-white/10 ring-2 ${P[y].ring} relative ${I?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:o.jsx("img",{src:v.avatarUrl,alt:S,className:`w-full h-full rounded-full border-2 ${R.tierColor.split(" ")[0]} object-cover`})}),o.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${P[y].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:P[y].icon})]}),o.jsxs("div",{className:`text-center ${I?"mt-2":"mt-1"}`,children:[o.jsx("div",{className:`font-bold truncate max-w-[100px] ${I?"text-sm text-white":"text-xs text-gray-300"} ${T?"italic":""}`,children:S}),o.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${I?"text-xl":"text-base"}`,children:w.toLocaleString()}),o.jsx("div",{className:`text-[9px] font-mono uppercase ${R.tierColor.split(" ")[1]}`,children:R.rankName}),o.jsxs("button",{onClick:()=>d(v.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[o.jsx(Hh,{className:"w-3 h-3"})," Inspect"]})]}),o.jsx("div",{className:`${L[y]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${y===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":y===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},v.id)})}),o.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[p.slice(p.length>=3?3:0).map((y,v)=>{var L,C,P,N;const T=p.length>=3?v+3:v,S=(L=y.settings)==null?void 0:L.privacyMode,w=S?((C=y.gamification)==null?void 0:C.codename)||"Unknown Agent":y.name,j=((N=(P=y.gamification)==null?void 0:P.classXp)==null?void 0:N[n])||0,R=Math.floor(j/1e3)+1,I=Kh(R);return o.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*T}s both`},children:[o.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[T<3&&T===0&&o.jsx(tc,{className:"w-6 h-6 text-yellow-400 mx-auto"}),T<3&&T===1&&o.jsx(iv,{className:"w-6 h-6 text-gray-300 mx-auto"}),T<3&&T===2&&o.jsx(iv,{className:"w-6 h-6 text-amber-600 mx-auto"}),T>=3&&`#${T+1}`]}),o.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[o.jsx("img",{src:y.avatarUrl,alt:w,className:`w-full h-full rounded-full border-2 ${I.tierColor.split(" ")[0]}`}),o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:R})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("h3",{className:`text-base font-bold truncate ${S?"text-purple-300 italic":"text-white"}`,children:[w,S&&o.jsx(Gh,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),o.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${I.tierColor.split(" ")[1]}`,children:I.rankName})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:j.toLocaleString()}),o.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),o.jsx("button",{onClick:()=>d(y.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:o.jsx(Hh,{className:"w-4 h-4"})})]},y.id)}),p.length===0&&o.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[o.jsx(is,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",n,"."]})]})]})}),c&&o.jsx(MAe,{userId:c,classType:n,onClose:()=>d(null)})]})};class LAe extends se.Component{constructor(r){super(r);GC(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("ErrorBoundary caught:",r,n)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[o.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),o.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&o.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),o.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[o.jsx(Rx,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const Dz={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:o.jsx(Ho,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:o.jsx(aH,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:o.jsx(k2,{className:"w-4 h-4"})}},BAe={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},$T=3;function UT(t,e){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r.slice(0,e)}const $Ae=({assignment:t})=>{const e=mi(),[r,n]=k.useState([]),[a,i]=k.useState([]),[s,c]=k.useState(!0),[d,h]=k.useState(!1),[p,m]=k.useState({}),[y,v]=k.useState(1),[T,S]=k.useState(null),[w,j]=k.useState(new Set),R=k.useRef({engagementTime:0}),I=k.useRef(Date.now());k.useEffect(()=>{const Q=setInterval(()=>{Date.now()-I.current<6e4&&(R.current.engagementTime+=1)},1e3);return()=>clearInterval(Q)},[]),k.useEffect(()=>{const Q=()=>{I.current=Date.now()},K=["mousemove","keydown","scroll","click"];return K.forEach(H=>window.addEventListener(H,Q)),()=>K.forEach(H=>window.removeEventListener(H,Q))},[]),k.useEffect(()=>()=>{var K;const Q=R.current.engagementTime;if(Q>=5){const H=(K=XT().currentUser)==null?void 0:K.uid;H&&Re.submitReviewEngagement(H,t.id,t.title,t.classType,Q).catch(()=>{})}},[t.id,t.title,t.classType]);const L=k.useCallback(Q=>{const K=UT(Q.filter(ie=>ie.tier===1),$T),H=UT(Q.filter(ie=>ie.tier===2),$T),J=UT(Q.filter(ie=>ie.tier===3),$T);i([...K,...H,...J]),m({}),S(null)},[]);k.useEffect(()=>{(async()=>{var K;c(!0),h(!1);try{const H=await Ma(lt(Pe,"question_banks",t.id));if(!H.exists()){h(!0);return}const J=H.data().questions||[];n(J),L(J)}catch(H){console.error("Failed to load question bank:",H),h(!0);return}finally{c(!1)}try{const H=(K=XT().currentUser)==null?void 0:K.uid;if(H){const J=await Ma(lt(Pe,"review_progress",`${H}_${t.id}`));J.exists()&&j(new Set(J.data().answeredQuestions||[]))}}catch(H){console.warn("Could not load review progress:",H)}})()},[t.id,L]);const C=()=>{r.length>0&&L(r)},P=(Q,K,H)=>{const J=p[Q];if(!(J!=null&&J.submitted))if(H==="multiple_select"||H==="ranking"){const ie=(J==null?void 0:J.selected)||[],pe=ie.includes(K)?ie.filter(me=>me!==K):[...ie,K];m(me=>({...me,[Q]:{...me[Q],selected:pe,submitted:!1,correct:!1,xpAwarded:!1}}))}else m(ie=>({...ie,[Q]:{selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))},N=(Q,K)=>{var H;(H=p[Q])!=null&&H.submitted||m(J=>({...J,[Q]:{...J[Q],linkedSelected:K}}))},A=async Q=>{const K=p[Q.id];if(!(K!=null&&K.selected))return;let H=!1;if(Q.type==="multiple_select"||Q.type==="ranking"){const J=K.selected,ie=Q.correctAnswer;H=J.length===ie.length&&J.every((pe,me)=>pe===ie[me])}else Q.type==="linked_mc"?H=K.selected===Q.correctAnswer&&(!Q.linkedFollowUp||K.linkedSelected===Q.linkedFollowUp.correctAnswer):H=K.selected===Q.correctAnswer;if(H)if(w.has(Q.id))m(J=>({...J,[Q.id]:{...J[Q.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{m(J=>({...J,[Q.id]:{...J[Q.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await Xq({assignmentId:t.id,questionId:Q.id,xpAmount:Q.xp,classType:t.classType})).data.awarded?(e.success(`+${Q.xp} XP earned!`),m(pe=>({...pe,[Q.id]:{...pe[Q.id],submitted:!0,correct:!0,xpAwarded:!0}})),j(pe=>new Set([...pe,Q.id]))):e.success("Correct! (XP already claimed)")}catch(J){console.error("XP award error:",J)}}else{const J=Math.ceil(Q.xp/2);m(ie=>({...ie,[Q.id]:{...ie[Q.id],submitted:!0,correct:!1,xpAwarded:!1,penalty:J}})),e.error(`-${J} XP penalty`);try{await doe({assignmentId:t.id,questionId:Q.id,classType:t.classType})}catch(ie){console.error("Penalty error:",ie)}}},E=k.useMemo(()=>a.filter(Q=>Q.tier===y),[a,y]),V=k.useMemo(()=>Object.entries(p).filter(([,Q])=>Q.correct&&Q.xpAwarded).reduce((Q,[K])=>{var H;return Q+(((H=a.find(J=>J.id===K))==null?void 0:H.xp)||0)},0),[p,a]),D=k.useMemo(()=>Object.values(p).reduce((Q,K)=>Q+(K.penalty||0),0),[p]),U=k.useMemo(()=>a.reduce((Q,K)=>Q+K.xp,0),[a]),$=k.useMemo(()=>a.length>0&&a.every(Q=>{var K;return(K=p[Q.id])==null?void 0:K.submitted}),[a,p]);return s?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[o.jsx(Ho,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):o.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ho,{className:"w-5 h-5 text-purple-400"}),o.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),o.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[r.length," in bank"]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($a,{className:"w-4 h-4 text-yellow-400"}),o.jsx("span",{className:"text-sm font-bold text-yellow-400",children:V}),D>0&&o.jsxs("span",{className:"text-sm font-bold text-red-400",children:["-",D]}),o.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",U," XP"]})]}),o.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[o.jsx(Rx,{className:"w-3 h-3"})," New Set"]})]})]}),o.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(Q=>{const K=Dz[Q],H=a.filter(pe=>pe.tier===Q),J=H.filter(pe=>{var me;return(me=p[pe.id])==null?void 0:me.submitted}).length,ie=H.filter(pe=>{var me;return(me=p[pe.id])==null?void 0:me.correct}).length;return o.jsxs("button",{onClick:()=>v(Q),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===Q?`${K.bg} ${K.color} ${K.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[K.icon,o.jsx("span",{className:"hidden sm:inline",children:K.name}),o.jsxs("span",{className:"sm:hidden",children:["Tier ",Q]}),J>0&&o.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ie===H.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ie,"/",H.length]})]},Q)})}),$&&o.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),o.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[o.jsx(Rx,{className:"w-3 h-3"})," New Questions"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[E.map((Q,K)=>{const H=p[Q.id],J=T===Q.id,ie=H==null?void 0:H.submitted,pe=H==null?void 0:H.correct,me=Dz[Q.tier];return o.jsxs("div",{className:`rounded-2xl border transition-all ${ie?pe?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":J?`${me.border} ${me.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[o.jsxs("button",{onClick:()=>S(J?null:Q.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[o.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ie?pe?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${me.bg} ${me.color}`}`,children:ie?pe?o.jsx(Mn,{className:"w-4 h-4"}):o.jsx(qh,{className:"w-4 h-4"}):K+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[o.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${me.color}`,children:Q.bloomsLevel}),o.jsx("span",{className:"text-[9px] text-gray-600",children:""}),o.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:BAe[Q.type]||Q.type}),o.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[o.jsx($a,{className:"w-3 h-3"}),Q.xp," XP"]}),o.jsxs("span",{className:"text-[9px] text-red-400/60 font-bold flex items-center gap-0.5",children:["-",Math.ceil(Q.xp/2)," if wrong"]})]}),o.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:Q.stem})]}),o.jsx(Ld,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${J?"rotate-90":""}`})]}),J&&o.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[Q.context&&o.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:Q.context}),Q.type==="ranking"?o.jsx(VAe,{question:Q,answer:H,onSelect:P}):Q.type==="multiple_select"?o.jsx(zAe,{question:Q,answer:H,onSelect:P}):o.jsx(UAe,{question:Q,answer:H,onSelect:P}),Q.type==="linked_mc"&&Q.linkedFollowUp&&o.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[o.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),o.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:Q.linkedFollowUp.stem}),o.jsx("div",{className:"space-y-2",children:Q.linkedFollowUp.options.map(X=>{const ne=(H==null?void 0:H.linkedSelected)===X.id,re=ie,Ae=X.id===Q.linkedFollowUp.correctAnswer;return o.jsxs("button",{onClick:()=>N(Q.id,X.id),disabled:ie,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${re?Ae?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ne?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ne?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[X.id.toUpperCase(),"."]})," ",X.text]},X.id)})})]}),ie?o.jsxs("div",{className:`p-4 rounded-xl border ${pe?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[pe?o.jsx(Mn,{className:"w-5 h-5 text-emerald-400"}):o.jsx(qh,{className:"w-5 h-5 text-red-400"}),o.jsx("span",{className:`font-bold text-sm ${pe?"text-emerald-400":"text-red-400"}`,children:pe?`Correct! +${Q.xp} XP`:`Incorrect  ${(H==null?void 0:H.penalty)||Math.ceil(Q.xp/2)} XP penalty`})]}),o.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:Q.explanation})]}):o.jsx("button",{onClick:()=>A(Q),disabled:!(H!=null&&H.selected)||Array.isArray(H==null?void 0:H.selected)&&H.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},Q.id)}),E.length===0&&o.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[o.jsx(Gh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},UAe=({question:t,answer:e,onSelect:r})=>o.jsx("div",{className:"space-y-2",children:t.options.map(n=>{const a=(e==null?void 0:e.selected)===n.id,i=e==null?void 0:e.submitted,s=n.id===t.correctAnswer;return o.jsxs("button",{onClick:()=>r(t.id,n.id,t.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${i?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":a?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":a?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),zAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),t.options.map(i=>{const s=n.includes(i.id),c=e==null?void 0:e.submitted,d=a.includes(i.id);return o.jsxs("button",{onClick:()=>r(t.id,i.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[o.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&o.jsx(Mn,{className:"w-3 h-3 text-white"})}),o.jsxs("span",{children:[o.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[i.id.toUpperCase(),"."]})," ",i.text]})]},i.id)})]})},VAe=({question:t,answer:e,onSelect:r})=>{const n=(e==null?void 0:e.selected)||[],a=e==null?void 0:e.submitted,i=t.correctAnswer;return o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[o.jsx(Roe,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&o.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=t.options.find(p=>p.id===s),h=a&&i[c]===s;return o.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${a?h?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),t.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return o.jsxs("button",{onClick:()=>r(t.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?o.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):o.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function FAe(t){let e=t;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(r,n)=>{try{return`<div class="my-3 text-center">${Ux.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(r,n)=>{try{return Ux.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(r,n,a)=>`<code class="math-inline">${n} = ${a}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const qAe=({assignment:t,onComplete:e})=>{const[r,n]=k.useState(null),[a,i]=k.useState(!0),[s,c]=k.useState(!1),d=k.useRef(Nx()),h=k.useRef(Date.now()),p=k.useRef(e),[m,y]=k.useState(!0),[v,T]=k.useState(0);k.useEffect(()=>{p.current=e},[e]);const S=k.useCallback(()=>{h.current=Date.now(),m||y(!0)},[m]);k.useEffect(()=>{const j=setInterval(()=>{Date.now()-h.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),m||y(!0)):m&&y(!1)},1e3);return()=>clearInterval(j)},[m]),k.useEffect(()=>{const j=["mousemove","keydown","scroll","click"];return j.forEach(R=>window.addEventListener(R,S)),()=>{j.forEach(R=>window.removeEventListener(R,S))}},[S]),k.useEffect(()=>()=>{p.current(d.current)},[]),k.useEffect(()=>{(async()=>{i(!0);try{const R=await Ma(lt(Pe,"reading_materials",t.id));R.exists()?n(R.data()):c(!0)}catch(R){console.error("Failed to load reading material:",R),c(!0)}finally{i(!1)}})()},[t.id]);const w=k.useMemo(()=>r?r.sections.map(j=>({title:j.title,html:FAe(j.content)})):[],[r]);return a?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(rs,{className:"w-8 h-8 text-purple-400 animate-spin"}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!r?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[o.jsx(_o,{className:"w-12 h-12 text-gray-600"}),o.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),o.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):o.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[o.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${m?"text-green-400":"text-yellow-500"}`,children:[m?o.jsx(L7,{className:"w-4 h-4"}):o.jsx(Js,{className:"w-4 h-4 animate-pulse"}),m?"Reading Active":"Away (Paused)"]}),o.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(v/60),"m ",v%60,"s"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[r.estimatedMinutes&&o.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",r.estimatedMinutes," min read"]}),!m&&o.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[o.jsx(Os,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:o.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:r.title}),r.description&&o.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:r.description})]}),o.jsx("div",{className:"space-y-10",children:w.map((j,R)=>o.jsxs("div",{className:"group",children:[o.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[o.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:R+1}),j.title]}),o.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:j.html}})]},R))}),o.jsx("div",{className:"mt-12 mb-4 text-center",children:o.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[o.jsx(_o,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},Lz={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},HAe=()=>{var W,he;const[t,e]=k.useState(null),[r,n]=k.useState("Dashboard"),[a,i]=k.useState([]),[s,c]=k.useState([]),[d,h]=k.useState([]),[p,m]=k.useState([]),[y,v]=k.useState([]),[T,S]=k.useState(null),[w,j]=k.useState("STUDENT"),[R,I]=k.useState("WORK"),[L,C]=k.useState(!1),[P,N]=k.useState(!1),[A,E]=k.useState(!0),[V,D]=k.useState(!1),[U,$]=k.useState(new Set),Q=k.useRef(JSON.parse(localStorage.getItem("chatChannelLastSeen")||"{}")),K=k.useRef(new Set);k.useEffect(()=>{if(!(t!=null&&t.id)||t.role===Ka.ADMIN)return;const te=Re.subscribeToMyGroups(t.id,ae=>{K.current=new Set(ae.map(Ue=>Ue.id))});return()=>te()},[t==null?void 0:t.id,t==null?void 0:t.role]);const H=k.useCallback(te=>{const ae=Date.now();Q.current[te]=ae,localStorage.setItem("chatChannelLastSeen",JSON.stringify(Q.current)),$(Ue=>{if(!Ue.has(te))return Ue;const Ye=new Set(Ue);return Ye.delete(te),Ye})},[]);k.useEffect(()=>{const te=Re.subscribeToRecentMessages(ae=>{const Ue=new Set,Ye=Q.current,xt=new Set(((t==null?void 0:t.enrolledClasses)||[]).map(it=>`class_${it.replace(/\s+/g,"_").toLowerCase()}`));for(const it of ae){if(!it.channelId||it.senderId===(t==null?void 0:t.id))continue;if((t==null?void 0:t.role)!==Ka.ADMIN){if(it.channelId.startsWith("group_")){const Be=it.channelId.slice(6);if(!K.current.has(Be))continue}else if(it.channelId.startsWith("class_")&&!xt.has(it.channelId))continue}const Pt=new Date(it.timestamp).getTime(),Ie=Ye[it.channelId]||0;Pt>Ie&&Ue.add(it.channelId)}$(Ue)});return()=>te()},[t==null?void 0:t.id,t==null?void 0:t.role,t==null?void 0:t.enrolledClasses]);const J=k.useMemo(()=>{const te=new Map;return s.forEach(ae=>{const Ue=te.get(ae.userId)||[];Ue.push(ae),te.set(ae.userId,Ue)}),d.map(ae=>{const Ue=te.get(ae.id)||[],Ye=Ue.length,xt=Math.round(Ue.reduce((it,Pt)=>{var Ie;return it+(((Ie=Pt.metrics)==null?void 0:Ie.engagementTime)||0)},0)/60);return{...ae,stats:{problemsCompleted:Ye,avgScore:0,rawAccuracy:0,totalTime:xt}}})},[d,s]),ie=k.useMemo(()=>{const te=new Set;return d.forEach(ae=>{ae.section&&te.add(ae.section)}),Array.from(te).sort()},[d]),pe=k.useMemo(()=>a.find(te=>te.id===T)||null,[a,T]);k.useEffect(()=>{if(C(!1),N(!1),!T)return;const te=Ma(lt(Pe,"question_banks",T)).then(Ue=>{Ue.exists()&&(Ue.data().questions||[]).length>0&&C(!0)}).catch(()=>{}),ae=Ma(lt(Pe,"reading_materials",T)).then(Ue=>{Ue.exists()&&N(!0)}).catch(()=>{});Promise.all([te,ae]).then(()=>{})},[T]),k.useEffect(()=>{let te=null;const ae=Bee(_A,async Ue=>{Ue?(await me(Ue),te=ln(lt(Pe,"users",Ue.uid),Ye=>{Ye.exists()&&e(xt=>({...xt||{},...Ye.data(),id:Ue.uid}))})):(e(null),te&&te(),E(!1))});return()=>{ae(),te&&te()}},[]),k.useEffect(()=>{if(t&&(t.isWhitelisted||t.role===Ka.ADMIN)){const te=Re.subscribeToAssignments(i),ae=Re.subscribeToClassConfigs(v),Ue=[te,ae];return t.role===Ka.ADMIN?(Ue.push(Re.subscribeToSubmissions(c)),Ue.push(Re.subscribeToUsers(h)),Ue.push(Re.subscribeToWhitelist(m))):Ue.push(Re.subscribeToUserSubmissions(t.id,c)),()=>Ue.forEach(Ye=>Ye())}},[t==null?void 0:t.id,t==null?void 0:t.isWhitelisted,t==null?void 0:t.role]),k.useEffect(()=>{(t==null?void 0:t.role)===Ka.STUDENT&&r==="Dashboard"&&n("Resources")},[t==null?void 0:t.role,r]),k.useEffect(()=>{var te;Cle(((te=t==null?void 0:t.settings)==null?void 0:te.soundEffects)!==!1)},[(W=t==null?void 0:t.settings)==null?void 0:W.soundEffects]),jle((t==null?void 0:t.id)||null,((he=t==null?void 0:t.settings)==null?void 0:he.pushNotifications)===!0);const me=async te=>{try{const ae=lt(Pe,"users",te.uid),Ue=await Ma(ae),Ye=await Ma(lt(Pe,"allowed_emails",te.email||"")),it=(await te.getIdTokenResult()).claims.admin===!0||te.email===wle,Pt=Ye.exists()||it,Ie=Ye.exists()?Ye.data():null,Be=(Ie==null?void 0:Ie.classType)||Rr.UNCATEGORIZED,rt=(Ie==null?void 0:Ie.classTypes)||(Be!==Rr.UNCATEGORIZED?[Be]:[]);if(Ue.exists()){const ft=Ue.data(),Ge={lastLoginAt:new Date().toISOString(),isWhitelisted:Pt};if(it&&(Ge.role="ADMIN"),!Pt&&!it&&(Ge.enrolledClasses=[]),Pt&&rt.length>0){const ue=ft.enrolledClasses||[],Xe=Array.from(new Set([...ue,...rt]));Xe.length!==ue.length&&(Ge.enrolledClasses=Xe,(!ft.classType||ft.classType===Rr.UNCATEGORIZED)&&(Ge.classType=rt[0]))}await xr(ae,Ge)}else{const ft={email:te.email,name:te.displayName||"Student",avatarUrl:te.photoURL||"",role:it?"ADMIN":"STUDENT",classType:Be,enrolledClasses:Pt?rt:[],isWhitelisted:Pt,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await ta(ae,ft)}}catch(ae){console.error(ae)}finally{E(!1)}},X=async()=>{await $ee(_A),e(null),S(null)},ne=te=>{I("WORK"),S(te)},re=k.useRef(pe),Ae=k.useRef(t);k.useEffect(()=>{re.current=pe},[pe]),k.useEffect(()=>{Ae.current=t},[t]);const Se=async te=>{const ae=Ae.current,Ue=re.current;if(!(!ae||!Ue||ae.role===Ka.ADMIN)&&!(te.engagementTime<10))try{await Re.submitEngagement(ae.id,ae.name,Ue.id,Ue.title,te,Ue.classType)}catch(Ye){console.error("Engagement submission failed:",Ye)}},ze=k.useMemo(()=>{const te={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(t&&t.role==="STUDENT"&&t.classType){const ae=y.find(Ue=>Ue.className===t.classType);if(ae)return ae.features}return te},[t==null?void 0:t.role,t==null?void 0:t.classType,y]);if(A)return o.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!t)return o.jsx(lde,{});if(!t.isWhitelisted&&t.role!==Ka.ADMIN)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:o.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[o.jsx(j2,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),o.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),o.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",t.name,"! Your account is currently restricted. Please contact ",pH," for authorization."]}),o.jsx("button",{onClick:X,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const He=t.role===Ka.ADMIN||ze.physicsTools,st=t.role===Ka.ADMIN||ze.communications;return o.jsx(LAe,{children:o.jsx(cde,{children:o.jsx(Tle,{children:o.jsxs(o.Fragment,{children:[o.jsx(Ale,{}),He&&o.jsx(Pde,{onToggleChat:st?()=>D(!V):void 0,hasUnreadChat:U.size>0}),st&&o.jsx(Bde,{user:t,isOpen:V,onClose:()=>D(!1),assignments:a,classConfigs:y,unreadChannels:U,onMarkChannelRead:H,onOpenResource:te=>{ne(te)}}),o.jsx(Rle,{user:t,onLogout:X,activeTab:r,setActiveTab:n,children:pe?o.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[pe.title,t.role===Ka.ADMIN&&o.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),o.jsxs("div",{className:"flex gap-4 mt-2",children:[o.jsx("button",{onClick:()=>I("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${R==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),L&&o.jsxs("button",{onClick:()=>I("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${R==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(Ho,{className:"w-3.5 h-3.5"})," Review"]}),P&&o.jsxs("button",{onClick:()=>I("STUDY"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${R==="STUDY"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[o.jsx(_o,{className:"w-3.5 h-3.5"})," Study Material"]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[t.role==="ADMIN"&&o.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[o.jsx("button",{onClick:()=>j("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),o.jsx("button",{onClick:()=>j("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),o.jsxs("button",{onClick:()=>{S(null),I("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[o.jsx(Ioe,{className:"w-4 h-4"})," Exit"]})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[R==="WORK"&&o.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(ode,{onComplete:Se,contentUrl:pe.contentUrl,htmlContent:pe.htmlContent,userId:t.id,assignmentId:pe.id,classType:pe.classType})}),w==="ADMIN"&&t.role===Ka.ADMIN&&o.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[o.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[o.jsx(Ym,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:o.jsx(is,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(te=>te.assignmentId===pe.id&&!te.isArchived).length}),o.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),o.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[o.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),o.jsx("button",{onClick:()=>D(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),R==="REVIEW"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx($Ae,{assignment:pe})}),R==="STUDY"&&o.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:o.jsx(qAe,{assignment:pe,onComplete:Se})})]})]}):o.jsx("div",{className:"h-full",children:o.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[t.role===Ka.ADMIN&&o.jsxs(o.Fragment,{children:[r==="Dashboard"&&o.jsx(mde,{users:J,assignments:a,submissions:s}),r==="User Management"&&o.jsx(gde,{users:J,whitelistedEmails:p,classConfigs:y,onWhitelist:async(te,ae)=>Re.addToWhitelist(te,ae)}),r==="Admin Panel"&&o.jsx(wde,{assignments:a,submissions:s,users:d,onCreateAssignment:async te=>{te.title&&await Re.addAssignment(te)},classConfigs:y,availableSections:ie,onPreviewAssignment:te=>{j("STUDENT"),ne(te)}}),r==="Student Groups"&&o.jsx(Rde,{students:J.filter(te=>te.role==="STUDENT"),availableSections:ie,fullPage:!0}),r.startsWith("XP Command:")&&o.jsx(Ide,{users:d,initialTab:r.split(":")[1]})]}),t.role===Ka.STUDENT&&o.jsxs(o.Fragment,{children:[r in Lz&&o.jsx(tAe,{user:t,assignments:a,submissions:s,enabledFeatures:ze,onNavigate:n,onStartAssignment:ne,studentTab:Lz[r]}),r==="Forensics"&&ze.evidenceLocker&&o.jsx(CAe,{user:t}),r==="Physics Lab"&&ze.physicsLab&&o.jsx(OAe,{user:t}),r==="Leaderboard"&&ze.leaderboard&&o.jsx(DAe,{user:t})]})]},r)})})]})})})})},IX=document.getElementById("root");if(!IX)throw new Error("Could not find root element to mount to");const GAe=vZ.createRoot(IX);GAe.render(o.jsx(se.StrictMode,{children:o.jsx(HAe,{})}));
