var BX=Object.defineProperty;var UX=(r,e,t)=>e in r?BX(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Tk=(r,e,t)=>UX(r,typeof e!="symbol"?e+"":e,t);import{jsPDF as zX}from"jspdf";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ew={exports:{}},rm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak;function VX(){if(Ak)return rm;Ak=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:r,type:n,key:s,ref:i!==void 0?i:null,props:a}}return rm.Fragment=e,rm.jsx=t,rm.jsxs=t,rm}var Ek;function $X(){return Ek||(Ek=1,Ew.exports=VX()),Ew.exports}var u=$X(),Nw={exports:{}},Pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk;function FX(){if(Nk)return Pt;Nk=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=y&&X[y]||X["@@iterator"],typeof X=="function"?X:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function E(X,J,ce){this.props=X,this.context=J,this.refs=w,this.updater=ce||T}E.prototype.isReactComponent={},E.prototype.setState=function(X,J){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,J,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function I(){}I.prototype=E.prototype;function C(X,J,ce){this.props=X,this.context=J,this.refs=w,this.updater=ce||T}var B=C.prototype=new I;B.constructor=C,S(B,E.prototype),B.isPureReactComponent=!0;var R=Array.isArray;function D(){}var A={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function N(X,J,ce){var Ne=ce.ref;return{$$typeof:r,type:X,key:J,ref:Ne!==void 0?Ne:null,props:ce}}function U(X,J){return N(X.type,J,X.props)}function M(X){return typeof X=="object"&&X!==null&&X.$$typeof===r}function $(X){var J={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ce){return J[ce]})}var z=/\/+/g;function Q(X,J){return typeof X=="object"&&X!==null&&X.key!=null?$(""+X.key):J.toString(36)}function ee(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(D,D):(X.status="pending",X.then(function(J){X.status==="pending"&&(X.status="fulfilled",X.value=J)},function(J){X.status==="pending"&&(X.status="rejected",X.reason=J)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function K(X,J,ce,Ne,se){var ke=typeof X;(ke==="undefined"||ke==="boolean")&&(X=null);var Me=!1;if(X===null)Me=!0;else switch(ke){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(X.$$typeof){case r:case e:Me=!0;break;case m:return Me=X._init,K(Me(X._payload),J,ce,Ne,se)}}if(Me)return se=se(X),Me=Ne===""?"."+Q(X,0):Ne,R(se)?(ce="",Me!=null&&(ce=Me.replace(z,"$&/")+"/"),K(se,J,ce,"",function(He){return He})):se!=null&&(M(se)&&(se=U(se,ce+(se.key==null||X&&X.key===se.key?"":(""+se.key).replace(z,"$&/")+"/")+Me)),J.push(se)),1;Me=0;var ot=Ne===""?".":Ne+":";if(R(X))for(var Ee=0;Ee<X.length;Ee++)Ne=X[Ee],ke=ot+Q(Ne,Ee),Me+=K(Ne,J,ce,ke,se);else if(Ee=b(X),typeof Ee=="function")for(X=Ee.call(X),Ee=0;!(Ne=X.next()).done;)Ne=Ne.value,ke=ot+Q(Ne,Ee++),Me+=K(Ne,J,ce,ke,se);else if(ke==="object"){if(typeof X.then=="function")return K(ee(X),J,ce,Ne,se);throw J=String(X),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function Z(X,J,ce){if(X==null)return X;var Ne=[],se=0;return K(X,Ne,"","",function(ke){return J.call(ce,ke,se++)}),Ne}function Y(X){if(X._status===-1){var J=X._result;J=J(),J.then(function(ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=ce)},function(ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=ce)}),X._status===-1&&(X._status=0,X._result=J)}if(X._status===1)return X._result.default;throw X._result}var ge=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},ae={map:Z,forEach:function(X,J,ce){Z(X,function(){J.apply(this,arguments)},ce)},count:function(X){var J=0;return Z(X,function(){J++}),J},toArray:function(X){return Z(X,function(J){return J})||[]},only:function(X){if(!M(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return Pt.Activity=p,Pt.Children=ae,Pt.Component=E,Pt.Fragment=t,Pt.Profiler=i,Pt.PureComponent=C,Pt.StrictMode=n,Pt.Suspense=d,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return A.H.useMemoCache(X)}},Pt.cache=function(X){return function(){return X.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(X,J,ce){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ne=S({},X.props),se=X.key;if(J!=null)for(ke in J.key!==void 0&&(se=""+J.key),J)!k.call(J,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&J.ref===void 0||(Ne[ke]=J[ke]);var ke=arguments.length-2;if(ke===1)Ne.children=ce;else if(1<ke){for(var Me=Array(ke),ot=0;ot<ke;ot++)Me[ot]=arguments[ot+2];Ne.children=Me}return N(X.type,se,Ne)},Pt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},Pt.createElement=function(X,J,ce){var Ne,se={},ke=null;if(J!=null)for(Ne in J.key!==void 0&&(ke=""+J.key),J)k.call(J,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(se[Ne]=J[Ne]);var Me=arguments.length-2;if(Me===1)se.children=ce;else if(1<Me){for(var ot=Array(Me),Ee=0;Ee<Me;Ee++)ot[Ee]=arguments[Ee+2];se.children=ot}if(X&&X.defaultProps)for(Ne in Me=X.defaultProps,Me)se[Ne]===void 0&&(se[Ne]=Me[Ne]);return N(X,ke,se)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(X){return{$$typeof:c,render:X}},Pt.isValidElement=M,Pt.lazy=function(X){return{$$typeof:m,_payload:{_status:-1,_result:X},_init:Y}},Pt.memo=function(X,J){return{$$typeof:f,type:X,compare:J===void 0?null:J}},Pt.startTransition=function(X){var J=A.T,ce={};A.T=ce;try{var Ne=X(),se=A.S;se!==null&&se(ce,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(D,ge)}catch(ke){ge(ke)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),A.T=J}},Pt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Pt.use=function(X){return A.H.use(X)},Pt.useActionState=function(X,J,ce){return A.H.useActionState(X,J,ce)},Pt.useCallback=function(X,J){return A.H.useCallback(X,J)},Pt.useContext=function(X){return A.H.useContext(X)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(X,J){return A.H.useDeferredValue(X,J)},Pt.useEffect=function(X,J){return A.H.useEffect(X,J)},Pt.useEffectEvent=function(X){return A.H.useEffectEvent(X)},Pt.useId=function(){return A.H.useId()},Pt.useImperativeHandle=function(X,J,ce){return A.H.useImperativeHandle(X,J,ce)},Pt.useInsertionEffect=function(X,J){return A.H.useInsertionEffect(X,J)},Pt.useLayoutEffect=function(X,J){return A.H.useLayoutEffect(X,J)},Pt.useMemo=function(X,J){return A.H.useMemo(X,J)},Pt.useOptimistic=function(X,J){return A.H.useOptimistic(X,J)},Pt.useReducer=function(X,J,ce){return A.H.useReducer(X,J,ce)},Pt.useRef=function(X){return A.H.useRef(X)},Pt.useState=function(X){return A.H.useState(X)},Pt.useSyncExternalStore=function(X,J,ce){return A.H.useSyncExternalStore(X,J,ce)},Pt.useTransition=function(){return A.H.useTransition()},Pt.version="19.2.4",Pt}var Ok;function n7(){return Ok||(Ok=1,Nw.exports=FX()),Nw.exports}var F=n7();const ne=mr(F);var Ow={exports:{}},nm={},kw={exports:{}},Cw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function qX(){return kk||(kk=1,(function(r){function e(K,Z){var Y=K.length;K.push(Z);e:for(;0<Y;){var ge=Y-1>>>1,ae=K[ge];if(0<i(ae,Z))K[ge]=Z,K[Y]=ae,Y=ge;else break e}}function t(K){return K.length===0?null:K[0]}function n(K){if(K.length===0)return null;var Z=K[0],Y=K.pop();if(Y!==Z){K[0]=Y;e:for(var ge=0,ae=K.length,X=ae>>>1;ge<X;){var J=2*(ge+1)-1,ce=K[J],Ne=J+1,se=K[Ne];if(0>i(ce,Y))Ne<ae&&0>i(se,ce)?(K[ge]=se,K[Ne]=Y,ge=Ne):(K[ge]=ce,K[J]=Y,ge=J);else if(Ne<ae&&0>i(se,Y))K[ge]=se,K[Ne]=Y,ge=Ne;else break e}}return Z}function i(K,Z){var Y=K.sortIndex-Z.sortIndex;return Y!==0?Y:K.id-Z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();r.unstable_now=function(){return s.now()-c}}var d=[],f=[],m=1,p=null,y=3,b=!1,T=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function B(K){for(var Z=t(f);Z!==null;){if(Z.callback===null)n(f);else if(Z.startTime<=K)n(f),Z.sortIndex=Z.expirationTime,e(d,Z);else break;Z=t(f)}}function R(K){if(S=!1,B(K),!T)if(t(d)!==null)T=!0,D||(D=!0,$());else{var Z=t(f);Z!==null&&ee(R,Z.startTime-K)}}var D=!1,A=-1,k=5,N=-1;function U(){return w?!0:!(r.unstable_now()-N<k)}function M(){if(w=!1,D){var K=r.unstable_now();N=K;var Z=!0;try{e:{T=!1,S&&(S=!1,I(A),A=-1),b=!0;var Y=y;try{t:{for(B(K),p=t(d);p!==null&&!(p.expirationTime>K&&U());){var ge=p.callback;if(typeof ge=="function"){p.callback=null,y=p.priorityLevel;var ae=ge(p.expirationTime<=K);if(K=r.unstable_now(),typeof ae=="function"){p.callback=ae,B(K),Z=!0;break t}p===t(d)&&n(d),B(K)}else n(d);p=t(d)}if(p!==null)Z=!0;else{var X=t(f);X!==null&&ee(R,X.startTime-K),Z=!1}}break e}finally{p=null,y=Y,b=!1}Z=void 0}}finally{Z?$():D=!1}}}var $;if(typeof C=="function")$=function(){C(M)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=M,$=function(){Q.postMessage(null)}}else $=function(){E(M,0)};function ee(K,Z){A=E(function(){K(r.unstable_now())},Z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_next=function(K){switch(y){case 1:case 2:case 3:var Z=3;break;default:Z=y}var Y=y;y=Z;try{return K()}finally{y=Y}},r.unstable_requestPaint=function(){w=!0},r.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Y=y;y=K;try{return Z()}finally{y=Y}},r.unstable_scheduleCallback=function(K,Z,Y){var ge=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ge+Y:ge):Y=ge,K){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Y+ae,K={id:m++,callback:Z,priorityLevel:K,startTime:Y,expirationTime:ae,sortIndex:-1},Y>ge?(K.sortIndex=Y,e(f,K),t(d)===null&&K===t(f)&&(S?(I(A),A=-1):S=!0,ee(R,Y-ge))):(K.sortIndex=ae,e(d,K),T||b||(T=!0,D||(D=!0,$()))),K},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(K){var Z=y;return function(){var Y=y;y=Z;try{return K.apply(this,arguments)}finally{y=Y}}}})(Cw)),Cw}var Ck;function HX(){return Ck||(Ck=1,kw.exports=qX()),kw.exports}var jw={exports:{}},Ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jk;function GX(){if(jk)return Ci;jk=1;var r=n7();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ci.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Ci.flushSync=function(d){var f=s.T,m=n.p;try{if(s.T=null,n.p=2,d)return d()}finally{s.T=f,n.p=m,n.d.f()}},Ci.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Ci.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ci.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):m==="script"&&n.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ci.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Ci.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=c(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ci.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Ci.requestFormReset=function(d){n.d.r(d)},Ci.unstable_batchedUpdates=function(d,f){return d(f)},Ci.useFormState=function(d,f,m){return s.H.useFormState(d,f,m)},Ci.useFormStatus=function(){return s.H.useHostTransitionStatus()},Ci.version="19.2.4",Ci}var Ik;function KX(){if(Ik)return jw.exports;Ik=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jw.exports=GX(),jw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function WX(){if(Rk)return nm;Rk=1;var r=HX(),e=n7(),t=KX();function n(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function d(o){if(a(o)!==o)throw Error(n(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(n(188));return l!==o?null:o}for(var h=o,g=l;;){var x=h.return;if(x===null)break;var _=x.alternate;if(_===null){if(g=x.return,g!==null){h=g;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===h)return d(x),o;if(_===g)return d(x),l;_=_.sibling}throw Error(n(188))}if(h.return!==g.return)h=x,g=_;else{for(var L=!1,H=x.child;H;){if(H===h){L=!0,h=x,g=_;break}if(H===g){L=!0,g=x,h=_;break}H=H.sibling}if(!L){for(H=_.child;H;){if(H===h){L=!0,h=_,g=x;break}if(H===g){L=!0,g=_,h=x;break}H=H.sibling}if(!L)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?o:l}function m(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=m(o),l!==null)return l;o=o.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),C=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=M&&o[M]||o["@@iterator"],typeof o=="function"?o:null)}var z=Symbol.for("react.client.reference");function Q(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===z?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case D:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case T:return"Portal";case C:return o.displayName||"Context";case I:return(o._context.displayName||"Context")+".Consumer";case B:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case A:return l=o.displayName||null,l!==null?l:Q(o.type)||"Memo";case k:l=o._payload,o=o._init;try{return Q(o(l))}catch{}}return null}var ee=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ge=[],ae=-1;function X(o){return{current:o}}function J(o){0>ae||(o.current=ge[ae],ge[ae]=null,ae--)}function ce(o,l){ae++,ge[ae]=o.current,o.current=l}var Ne=X(null),se=X(null),ke=X(null),Me=X(null);function ot(o,l){switch(ce(ke,l),ce(se,o),ce(Ne,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?KO(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=KO(l),o=WO(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}J(Ne),ce(Ne,o)}function Ee(){J(Ne),J(se),J(ke)}function He(o){o.memoizedState!==null&&ce(Me,o);var l=Ne.current,h=WO(l,o.type);l!==h&&(ce(se,o),ce(Ne,h))}function he(o){se.current===o&&(J(Ne),J(se)),Me.current===o&&(J(Me),Zf._currentValue=Y)}var pe,Ye;function Ke(o){if(pe===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);pe=l&&l[1]||"",Ye=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+o+Ye}var at=!1;function tt(o,l){if(!o||at)return"";at=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(Te){var _e=Te}Reflect.construct(o,[],Pe)}else{try{Pe.call()}catch(Te){_e=Te}o.call(Pe.prototype)}}else{try{throw Error()}catch(Te){_e=Te}(Pe=o())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(Te){if(Te&&_e&&typeof Te.stack=="string")return[Te.stack,_e.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=g.DetermineComponentFrameRoot(),L=_[0],H=_[1];if(L&&H){var ie=L.split(`
`),xe=H.split(`
`);for(x=g=0;g<ie.length&&!ie[g].includes("DetermineComponentFrameRoot");)g++;for(;x<xe.length&&!xe[x].includes("DetermineComponentFrameRoot");)x++;if(g===ie.length||x===xe.length)for(g=ie.length-1,x=xe.length-1;1<=g&&0<=x&&ie[g]!==xe[x];)x--;for(;1<=g&&0<=x;g--,x--)if(ie[g]!==xe[x]){if(g!==1||x!==1)do if(g--,x--,0>x||ie[g]!==xe[x]){var Ce=`
`+ie[g].replace(" at new "," at ");return o.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",o.displayName)),Ce}while(1<=g&&0<=x);break}}}finally{at=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Ke(h):""}function Gt(o,l){switch(o.tag){case 26:case 27:case 5:return Ke(o.type);case 16:return Ke("Lazy");case 13:return o.child!==l&&l!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return tt(o.type,!1);case 11:return tt(o.type.render,!1);case 1:return tt(o.type,!0);case 31:return Ke("Activity");default:return""}}function Ie(o){try{var l="",h=null;do l+=Gt(o,h),h=o,o=o.return;while(o);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var de=Object.prototype.hasOwnProperty,qe=r.unstable_scheduleCallback,nt=r.unstable_cancelCallback,vt=r.unstable_shouldYield,Xe=r.unstable_requestPaint,Tt=r.unstable_now,Kt=r.unstable_getCurrentPriorityLevel,Qt=r.unstable_ImmediatePriority,Ot=r.unstable_UserBlockingPriority,Ft=r.unstable_NormalPriority,Yr=r.unstable_LowPriority,Br=r.unstable_IdlePriority,ea=r.log,qr=r.unstable_setDisableYieldValue,jn=null,Ir=null;function un(o){if(typeof ea=="function"&&qr(o),Ir&&typeof Ir.setStrictMode=="function")try{Ir.setStrictMode(jn,o)}catch{}}var pr=Math.clz32?Math.clz32:In,Si=Math.log,ws=Math.LN2;function In(o){return o>>>=0,o===0?32:31-(Si(o)/ws|0)|0}var Ti=256,dn=262144,Ga=4194304;function Bi(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function rr(o,l,h){var g=o.pendingLanes;if(g===0)return 0;var x=0,_=o.suspendedLanes,L=o.pingedLanes;o=o.warmLanes;var H=g&134217727;return H!==0?(g=H&~_,g!==0?x=Bi(g):(L&=H,L!==0?x=Bi(L):h||(h=H&~o,h!==0&&(x=Bi(h))))):(H=g&~_,H!==0?x=Bi(H):L!==0?x=Bi(L):h||(h=g&~o,h!==0&&(x=Bi(h)))),x===0?0:l!==0&&l!==x&&(l&_)===0&&(_=x&-x,h=l&-l,_>=h||_===32&&(h&4194048)!==0)?l:x}function ei(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function _s(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ss(){var o=Ga;return Ga<<=1,(Ga&62914560)===0&&(Ga=4194304),o}function Ai(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function ta(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function nn(o,l,h,g,x,_){var L=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var H=o.entanglements,ie=o.expirationTimes,xe=o.hiddenUpdates;for(h=L&~h;0<h;){var Ce=31-pr(h),Pe=1<<Ce;H[Ce]=0,ie[Ce]=-1;var _e=xe[Ce];if(_e!==null)for(xe[Ce]=null,Ce=0;Ce<_e.length;Ce++){var Te=_e[Ce];Te!==null&&(Te.lane&=-536870913)}h&=~Pe}g!==0&&Hs(o,g,0),_!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=_&~(L&~l))}function Hs(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var g=31-pr(l);o.entangledLanes|=l,o.entanglements[g]=o.entanglements[g]|1073741824|h&261930}function Ei(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var g=31-pr(h),x=1<<g;x&l|o[g]&l&&(o[g]|=l),h&=~x}}function Ui(o,l){var h=l&-l;return h=(h&42)!==0?1:Gs(h),(h&(o.suspendedLanes|l))!==0?0:h}function Gs(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function _n(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function ui(){var o=Z.p;return o!==0?o:(o=window.event,o===void 0?32:yk(o.type))}function Ks(o,l){var h=Z.p;try{return Z.p=o,l()}finally{Z.p=h}}var Ni=Math.random().toString(36).slice(2),br="__reactFiber$"+Ni,Ur="__reactProps$"+Ni,an="__reactContainer$"+Ni,ra="__reactEvents$"+Ni,Oi="__reactListeners$"+Ni,Ws="__reactHandles$"+Ni,Ts="__reactResources$"+Ni,na="__reactMarker$"+Ni;function ut(o){delete o[br],delete o[Ur],delete o[ra],delete o[Oi],delete o[Ws]}function le(o){var l=o[br];if(l)return l;for(var h=o.parentNode;h;){if(l=h[an]||h[br]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=tk(o);o!==null;){if(h=o[br])return h;o=tk(o)}return l}o=h,h=o.parentNode}return null}function Le(o){if(o=o[br]||o[an]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function Qe(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(n(33))}function oe(o){var l=o[Ts];return l||(l=o[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Se(o){o[na]=!0}var ze=new Set,st={};function bt(o,l){Et(o,l),Et(o+"Capture",l)}function Et(o,l){for(st[o]=l,o=0;o<l.length;o++)ze.add(l[o])}var Hr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hn={},Ka={};function Xs(o){return de.call(Ka,o)?!0:de.call(Hn,o)?!1:Hr.test(o)?Ka[o]=!0:(Hn[o]=!0,!1)}function Qs(o,l,h){if(Xs(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function Ys(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function ia(o,l,h,g){if(g===null)o.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+g)}}function Mt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ll(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function V0(o,l,h){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,_=g.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(L){h=""+L,_.call(this,L)}}),Object.defineProperty(o,l,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(L){h=""+L},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function $0(o){if(!o._valueTracker){var l=Ll(o)?"checked":"value";o._valueTracker=V0(o,l,""+o[l])}}function df(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return o&&(g=Ll(o)?o.checked?"true":"false":o.value),o=g,o!==h?(l.setValue(o),!0):!1}function F0(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Co=/[\n"\\]/g;function hn(o){return o.replace(Co,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Bl(o,l,h,g,x,_,L,H){o.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.type=L:o.removeAttribute("type"),l!=null?L==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Mt(l)):o.value!==""+Mt(l)&&(o.value=""+Mt(l)):L!=="submit"&&L!=="reset"||o.removeAttribute("value"),l!=null?q0(o,L,Mt(l)):h!=null?q0(o,L,Mt(h)):g!=null&&o.removeAttribute("value"),x==null&&_!=null&&(o.defaultChecked=!!_),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?o.name=""+Mt(H):o.removeAttribute("name")}function cu(o,l,h,g,x,_,L,H){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(o.type=_),l!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||l!=null)){$0(o);return}h=h!=null?""+Mt(h):"",l=l!=null?""+Mt(l):h,H||l===o.value||(o.value=l),o.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=H?o.checked:!!g,o.defaultChecked=!!g,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(o.name=L),$0(o)}function q0(o,l,h){l==="number"&&F0(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function sr(o,l,h,g){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Mt(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function uu(o,l,h){if(l!=null&&(l=""+Mt(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+Mt(h):""}function Ul(o,l,h,g){if(l==null){if(g!=null){if(h!=null)throw Error(n(92));if(ee(g)){if(1<g.length)throw Error(n(93));g=g[0]}h=g}h==null&&(h=""),l=h}h=Mt(l),o.defaultValue=h,g=o.textContent,g===h&&g!==""&&g!==null&&(o.value=g),$0(o)}function Wa(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var k2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hf(o,l,h){var g=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":g?o.setProperty(l,h):typeof h!="number"||h===0||k2.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function Hg(o,l,h){if(l!=null&&typeof l!="object")throw Error(n(62));if(o=o.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&h[x]!==g&&hf(o,x,g)}else for(var _ in l)l.hasOwnProperty(_)&&hf(o,_,l[_])}function ff(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),j2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(o){return j2.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ti(){}var H0=null;function G0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var jo=null,Sa=null;function Gg(o){var l=Le(o);if(l&&(o=l.stateNode)){var h=o[Ur]||null;e:switch(o=l.stateNode,l.type){case"input":if(Bl(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+hn(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==o&&g.form===o.form){var x=g[Ur]||null;if(!x)throw Error(n(90));Bl(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<h.length;l++)g=h[l],g.form===o.form&&df(g)}break e;case"textarea":uu(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&sr(o,!!h.multiple,l,!1)}}}var mf=!1;function Kg(o,l,h){if(mf)return o(l,h);mf=!0;try{var g=o(l);return g}finally{if(mf=!1,(jo!==null||Sa!==null)&&(F1(),jo&&(l=jo,o=Sa,Sa=jo=null,Gg(l),o)))for(l=0;l<o.length;l++)Gg(o[l])}}function aa(o,l){var h=o.stateNode;if(h===null)return null;var g=h[Ur]||null;if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pf=!1;if(As)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){pf=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{pf=!1}var Ta=null,K0=null,eo=null;function zl(){if(eo)return eo;var o,l=K0,h=l.length,g,x="value"in Ta?Ta.value:Ta.textContent,_=x.length;for(o=0;o<h&&l[o]===x[o];o++);var L=h-o;for(g=1;g<=L&&l[h-g]===x[_-g];g++);return eo=x.slice(o,1<g?1-g:void 0)}function du(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function Vl(){return!0}function Gr(){return!1}function ki(o){function l(h,g,x,_,L){this._reactName=h,this._targetInst=x,this.type=g,this.nativeEvent=_,this.target=L,this.currentTarget=null;for(var H in o)o.hasOwnProperty(H)&&(h=o[H],this[H]=h?h(_):_[H]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Vl:Gr,this.isPropagationStopped=Gr,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Vl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Vl)},persist:function(){},isPersistent:Vl}),l}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=ki(Io),$l=p({},Io,{view:0,detail:0}),Wg=ki($l),Fl,W0,zi,fu=p({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zi&&(zi&&o.type==="mousemove"?(Fl=o.screenX-zi.screenX,W0=o.screenY-zi.screenY):W0=Fl=0,zi=o),Fl)},movementY:function(o){return"movementY"in o?o.movementY:W0}}),Xg=ki(fu),mu=p({},fu,{dataTransfer:0}),Qg=ki(mu),gf=p({},$l,{relatedTarget:0}),ql=ki(gf),Yg=p({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),X0=ki(Yg),I2=p({},Io,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Zg=ki(I2),pu=p({},Io,{data:0}),yf=ki(pu),Jg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e1(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=bf[o])?!!l[o]:!1}function Hl(){return e1}var t1=p({},$l,{key:function(o){if(o.key){var l=Jg[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=du(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?vf[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(o){return o.type==="keypress"?du(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?du(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),r1=ki(t1),Ro=p({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=ki(Ro),n1=p({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),i1=ki(n1),a1=p({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=ki(a1),Vi=p({},fu,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),s1=ki(Vi),o1=p({},Io,{newState:0,oldState:0}),Gl=ki(o1),v=[9,13,27,32],j=As&&"CompositionEvent"in window,V=null;As&&"documentMode"in document&&(V=document.documentMode);var W=As&&"TextEvent"in window&&!V,ye=As&&(!j||V&&8<V&&11>=V),Ae=" ",Ze=!1;function gr(o,l){switch(o){case"keyup":return v.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var qt=!1;function ri(o,l){switch(o){case"compositionend":return Rn(l);case"keypress":return l.which!==32?null:(Ze=!0,Ae);case"textInput":return o=l.data,o===Ae&&Ze?null:o;default:return null}}function ni(o,l){if(qt)return o==="compositionend"||!j&&gr(o,l)?(o=zl(),eo=K0=Ta=null,qt=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return ye&&l.locale!=="ko"?null:l.data;default:return null}}var Kl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sa(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!Kl[o.type]:l==="textarea"}function gu(o,l,h,g){jo?Sa?Sa.push(g):Sa=[g]:jo=g,l=Q1(l,"onChange"),0<l.length&&(h=new hu("onChange","change",null,h,g),o.push({event:h,listeners:l}))}var Mo=null,wf=null;function dW(o){VO(o,0)}function l1(o){var l=Qe(o);if(df(l))return o}function sN(o,l){if(o==="change")return l}var oN=!1;if(As){var R2;if(As){var M2="oninput"in document;if(!M2){var lN=document.createElement("div");lN.setAttribute("oninput","return;"),M2=typeof lN.oninput=="function"}R2=M2}else R2=!1;oN=R2&&(!document.documentMode||9<document.documentMode)}function cN(){Mo&&(Mo.detachEvent("onpropertychange",uN),wf=Mo=null)}function uN(o){if(o.propertyName==="value"&&l1(wf)){var l=[];gu(l,wf,o,G0(o)),Kg(dW,l)}}function hW(o,l,h){o==="focusin"?(cN(),Mo=l,wf=h,Mo.attachEvent("onpropertychange",uN)):o==="focusout"&&cN()}function fW(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return l1(wf)}function mW(o,l){if(o==="click")return l1(l)}function pW(o,l){if(o==="input"||o==="change")return l1(l)}function gW(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var Aa=typeof Object.is=="function"?Object.is:gW;function _f(o,l){if(Aa(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var x=h[g];if(!de.call(l,x)||!Aa(o[x],l[x]))return!1}return!0}function dN(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function hN(o,l){var h=dN(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=l&&g>=l)return{node:h,offset:l-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=dN(h)}}function fN(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?fN(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function mN(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=F0(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=F0(o.document)}return l}function P2(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var yW=As&&"documentMode"in document&&11>=document.documentMode,Y0=null,D2=null,Sf=null,L2=!1;function pN(o,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;L2||Y0==null||Y0!==F0(g)||(g=Y0,"selectionStart"in g&&P2(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Sf&&_f(Sf,g)||(Sf=g,g=Q1(D2,"onSelect"),0<g.length&&(l=new hu("onSelect","select",null,l,h),o.push({event:l,listeners:g}),l.target=Y0)))}function yu(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var Z0={animationend:yu("Animation","AnimationEnd"),animationiteration:yu("Animation","AnimationIteration"),animationstart:yu("Animation","AnimationStart"),transitionrun:yu("Transition","TransitionRun"),transitionstart:yu("Transition","TransitionStart"),transitioncancel:yu("Transition","TransitionCancel"),transitionend:yu("Transition","TransitionEnd")},B2={},gN={};As&&(gN=document.createElement("div").style,"AnimationEvent"in window||(delete Z0.animationend.animation,delete Z0.animationiteration.animation,delete Z0.animationstart.animation),"TransitionEvent"in window||delete Z0.transitionend.transition);function vu(o){if(B2[o])return B2[o];if(!Z0[o])return o;var l=Z0[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in gN)return B2[o]=l[h];return o}var yN=vu("animationend"),vN=vu("animationiteration"),bN=vu("animationstart"),vW=vu("transitionrun"),bW=vu("transitionstart"),xW=vu("transitioncancel"),xN=vu("transitionend"),wN=new Map,U2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");U2.push("scrollEnd");function Es(o,l){wN.set(o,l),bt(l,[o])}var c1=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Xa=[],J0=0,z2=0;function u1(){for(var o=J0,l=z2=J0=0;l<o;){var h=Xa[l];Xa[l++]=null;var g=Xa[l];Xa[l++]=null;var x=Xa[l];Xa[l++]=null;var _=Xa[l];if(Xa[l++]=null,g!==null&&x!==null){var L=g.pending;L===null?x.next=x:(x.next=L.next,L.next=x),g.pending=x}_!==0&&_N(h,x,_)}}function d1(o,l,h,g){Xa[J0++]=o,Xa[J0++]=l,Xa[J0++]=h,Xa[J0++]=g,z2|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function V2(o,l,h,g){return d1(o,l,h,g),h1(o)}function bu(o,l){return d1(o,null,null,l),h1(o)}function _N(o,l,h){o.lanes|=h;var g=o.alternate;g!==null&&(g.lanes|=h);for(var x=!1,_=o.return;_!==null;)_.childLanes|=h,g=_.alternate,g!==null&&(g.childLanes|=h),_.tag===22&&(o=_.stateNode,o===null||o._visibility&1||(x=!0)),o=_,_=_.return;return o.tag===3?(_=o.stateNode,x&&l!==null&&(x=31-pr(h),o=_.hiddenUpdates,g=o[x],g===null?o[x]=[l]:g.push(l),l.lane=h|536870912),_):null}function h1(o){if(50<Hf)throw Hf=0,Q4=null,Error(n(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var ed={};function wW(o,l,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(o,l,h,g){return new wW(o,l,h,g)}function $2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Po(o,l){var h=o.alternate;return h===null?(h=Ea(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function SN(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function f1(o,l,h,g,x,_){var L=0;if(g=o,typeof o=="function")$2(o)&&(L=1);else if(typeof o=="string")L=EX(o,h,Ne.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=Ea(31,h,l,x),o.elementType=N,o.lanes=_,o;case S:return xu(h.children,x,_,l);case w:L=8,x|=24;break;case E:return o=Ea(12,h,l,x|2),o.elementType=E,o.lanes=_,o;case R:return o=Ea(13,h,l,x),o.elementType=R,o.lanes=_,o;case D:return o=Ea(19,h,l,x),o.elementType=D,o.lanes=_,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case C:L=10;break e;case I:L=9;break e;case B:L=11;break e;case A:L=14;break e;case k:L=16,g=null;break e}L=29,h=Error(n(130,o===null?"null":typeof o,"")),g=null}return l=Ea(L,h,l,x),l.elementType=o,l.type=g,l.lanes=_,l}function xu(o,l,h,g){return o=Ea(7,o,g,l),o.lanes=h,o}function F2(o,l,h){return o=Ea(6,o,null,l),o.lanes=h,o}function TN(o){var l=Ea(18,null,null,0);return l.stateNode=o,l}function q2(o,l,h){return l=Ea(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var AN=new WeakMap;function Qa(o,l){if(typeof o=="object"&&o!==null){var h=AN.get(o);return h!==void 0?h:(l={value:o,source:l,stack:Ie(l)},AN.set(o,l),l)}return{value:o,source:l,stack:Ie(l)}}var td=[],rd=0,m1=null,Tf=0,Ya=[],Za=0,Wl=null,to=1,ro="";function Do(o,l){td[rd++]=Tf,td[rd++]=m1,m1=o,Tf=l}function EN(o,l,h){Ya[Za++]=to,Ya[Za++]=ro,Ya[Za++]=Wl,Wl=o;var g=to;o=ro;var x=32-pr(g)-1;g&=~(1<<x),h+=1;var _=32-pr(l)+x;if(30<_){var L=x-x%5;_=(g&(1<<L)-1).toString(32),g>>=L,x-=L,to=1<<32-pr(l)+x|h<<x|g,ro=_+o}else to=1<<_|h<<x|g,ro=o}function H2(o){o.return!==null&&(Do(o,1),EN(o,1,0))}function G2(o){for(;o===m1;)m1=td[--rd],td[rd]=null,Tf=td[--rd],td[rd]=null;for(;o===Wl;)Wl=Ya[--Za],Ya[Za]=null,ro=Ya[--Za],Ya[Za]=null,to=Ya[--Za],Ya[Za]=null}function NN(o,l){Ya[Za++]=to,Ya[Za++]=ro,Ya[Za++]=Wl,to=l.id,ro=l.overflow,Wl=o}var di=null,Kr=null,tr=!1,Xl=null,Ja=!1,K2=Error(n(519));function Ql(o){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Af(Qa(l,o)),K2}function ON(o){var l=o.stateNode,h=o.type,g=o.memoizedProps;switch(l[br]=o,l[Ur]=g,h){case"dialog":Xt("cancel",l),Xt("close",l);break;case"iframe":case"object":case"embed":Xt("load",l);break;case"video":case"audio":for(h=0;h<Kf.length;h++)Xt(Kf[h],l);break;case"source":Xt("error",l);break;case"img":case"image":case"link":Xt("error",l),Xt("load",l);break;case"details":Xt("toggle",l);break;case"input":Xt("invalid",l),cu(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Xt("invalid",l);break;case"textarea":Xt("invalid",l),Ul(l,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||g.suppressHydrationWarning===!0||HO(l.textContent,h)?(g.popover!=null&&(Xt("beforetoggle",l),Xt("toggle",l)),g.onScroll!=null&&Xt("scroll",l),g.onScrollEnd!=null&&Xt("scrollend",l),g.onClick!=null&&(l.onclick=ti),l=!0):l=!1,l||Ql(o,!0)}function kN(o){for(di=o.return;di;)switch(di.tag){case 5:case 31:case 13:Ja=!1;return;case 27:case 3:Ja=!0;return;default:di=di.return}}function nd(o){if(o!==di)return!1;if(!tr)return kN(o),tr=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||dw(o.type,o.memoizedProps)),h=!h),h&&Kr&&Ql(o),kN(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Kr=ek(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));Kr=ek(o)}else l===27?(l=Kr,uc(o.type)?(o=gw,gw=null,Kr=o):Kr=l):Kr=di?ts(o.stateNode.nextSibling):null;return!0}function wu(){Kr=di=null,tr=!1}function W2(){var o=Xl;return o!==null&&(ua===null?ua=o:ua.push.apply(ua,o),Xl=null),o}function Af(o){Xl===null?Xl=[o]:Xl.push(o)}var X2=X(null),_u=null,Lo=null;function Yl(o,l,h){ce(X2,l._currentValue),l._currentValue=h}function Bo(o){o._currentValue=X2.current,J(X2)}function Q2(o,l,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),o===h)break;o=o.return}}function Y2(o,l,h,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var _=x.dependencies;if(_!==null){var L=x.child;_=_.firstContext;e:for(;_!==null;){var H=_;_=x;for(var ie=0;ie<l.length;ie++)if(H.context===l[ie]){_.lanes|=h,H=_.alternate,H!==null&&(H.lanes|=h),Q2(_.return,h,o),g||(L=null);break e}_=H.next}}else if(x.tag===18){if(L=x.return,L===null)throw Error(n(341));L.lanes|=h,_=L.alternate,_!==null&&(_.lanes|=h),Q2(L,h,o),L=null}else L=x.child;if(L!==null)L.return=x;else for(L=x;L!==null;){if(L===o){L=null;break}if(x=L.sibling,x!==null){x.return=L.return,L=x;break}L=L.return}x=L}}function id(o,l,h,g){o=null;for(var x=l,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var L=x.alternate;if(L===null)throw Error(n(387));if(L=L.memoizedProps,L!==null){var H=x.type;Aa(x.pendingProps.value,L.value)||(o!==null?o.push(H):o=[H])}}else if(x===Me.current){if(L=x.alternate,L===null)throw Error(n(387));L.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(Zf):o=[Zf])}x=x.return}o!==null&&Y2(l,o,h,g),l.flags|=262144}function p1(o){for(o=o.firstContext;o!==null;){if(!Aa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Su(o){_u=o,Lo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function hi(o){return CN(_u,o)}function g1(o,l){return _u===null&&Su(o),CN(o,l)}function CN(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},Lo===null){if(o===null)throw Error(n(308));Lo=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Lo=Lo.next=l;return h}var _W=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,g){o.push(g)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},SW=r.unstable_scheduleCallback,TW=r.unstable_NormalPriority,Mn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z2(){return{controller:new _W,data:new Map,refCount:0}}function Ef(o){o.refCount--,o.refCount===0&&SW(TW,function(){o.controller.abort()})}var Nf=null,J2=0,ad=0,sd=null;function AW(o,l){if(Nf===null){var h=Nf=[];J2=0,ad=rw(),sd={status:"pending",value:void 0,then:function(g){h.push(g)}}}return J2++,l.then(jN,jN),l}function jN(){if(--J2===0&&Nf!==null){sd!==null&&(sd.status="fulfilled");var o=Nf;Nf=null,ad=0,sd=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function EW(o,l){var h=[],g={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<h.length;x++)(0,h[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),g}var IN=K.S;K.S=function(o,l){pO=Tt(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&AW(o,l),IN!==null&&IN(o,l)};var Tu=X(null);function e4(){var o=Tu.current;return o!==null?o:Rr.pooledCache}function y1(o,l){l===null?ce(Tu,Tu.current):ce(Tu,l.pool)}function RN(){var o=e4();return o===null?null:{parent:Mn._currentValue,pool:o}}var od=Error(n(460)),t4=Error(n(474)),v1=Error(n(542)),b1={then:function(){}};function MN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function PN(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(ti,ti),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,LN(o),o;default:if(typeof l.status=="string")l.then(ti,ti);else{if(o=Rr,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=l,o.status="pending",o.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,LN(o),o}throw Eu=l,od}}function Au(o){try{var l=o._init;return l(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Eu=h,od):h}}var Eu=null;function DN(){if(Eu===null)throw Error(n(459));var o=Eu;return Eu=null,o}function LN(o){if(o===od||o===v1)throw Error(n(483))}var ld=null,Of=0;function x1(o){var l=Of;return Of+=1,ld===null&&(ld=[]),PN(ld,o,l)}function kf(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function w1(o,l){throw l.$$typeof===y?Error(n(525)):(o=Object.prototype.toString.call(l),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function BN(o){function l(me,ue){if(o){var ve=me.deletions;ve===null?(me.deletions=[ue],me.flags|=16):ve.push(ue)}}function h(me,ue){if(!o)return null;for(;ue!==null;)l(me,ue),ue=ue.sibling;return null}function g(me){for(var ue=new Map;me!==null;)me.key!==null?ue.set(me.key,me):ue.set(me.index,me),me=me.sibling;return ue}function x(me,ue){return me=Po(me,ue),me.index=0,me.sibling=null,me}function _(me,ue,ve){return me.index=ve,o?(ve=me.alternate,ve!==null?(ve=ve.index,ve<ue?(me.flags|=67108866,ue):ve):(me.flags|=67108866,ue)):(me.flags|=1048576,ue)}function L(me){return o&&me.alternate===null&&(me.flags|=67108866),me}function H(me,ue,ve,Re){return ue===null||ue.tag!==6?(ue=F2(ve,me.mode,Re),ue.return=me,ue):(ue=x(ue,ve),ue.return=me,ue)}function ie(me,ue,ve,Re){var xt=ve.type;return xt===S?Ce(me,ue,ve.props.children,Re,ve.key):ue!==null&&(ue.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===k&&Au(xt)===ue.type)?(ue=x(ue,ve.props),kf(ue,ve),ue.return=me,ue):(ue=f1(ve.type,ve.key,ve.props,null,me.mode,Re),kf(ue,ve),ue.return=me,ue)}function xe(me,ue,ve,Re){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ve.containerInfo||ue.stateNode.implementation!==ve.implementation?(ue=q2(ve,me.mode,Re),ue.return=me,ue):(ue=x(ue,ve.children||[]),ue.return=me,ue)}function Ce(me,ue,ve,Re,xt){return ue===null||ue.tag!==7?(ue=xu(ve,me.mode,Re,xt),ue.return=me,ue):(ue=x(ue,ve),ue.return=me,ue)}function Pe(me,ue,ve){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=F2(""+ue,me.mode,ve),ue.return=me,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return ve=f1(ue.type,ue.key,ue.props,null,me.mode,ve),kf(ve,ue),ve.return=me,ve;case T:return ue=q2(ue,me.mode,ve),ue.return=me,ue;case k:return ue=Au(ue),Pe(me,ue,ve)}if(ee(ue)||$(ue))return ue=xu(ue,me.mode,ve,null),ue.return=me,ue;if(typeof ue.then=="function")return Pe(me,x1(ue),ve);if(ue.$$typeof===C)return Pe(me,g1(me,ue),ve);w1(me,ue)}return null}function _e(me,ue,ve,Re){var xt=ue!==null?ue.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return xt!==null?null:H(me,ue,""+ve,Re);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return ve.key===xt?ie(me,ue,ve,Re):null;case T:return ve.key===xt?xe(me,ue,ve,Re):null;case k:return ve=Au(ve),_e(me,ue,ve,Re)}if(ee(ve)||$(ve))return xt!==null?null:Ce(me,ue,ve,Re,null);if(typeof ve.then=="function")return _e(me,ue,x1(ve),Re);if(ve.$$typeof===C)return _e(me,ue,g1(me,ve),Re);w1(me,ve)}return null}function Te(me,ue,ve,Re,xt){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return me=me.get(ve)||null,H(ue,me,""+Re,xt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:return me=me.get(Re.key===null?ve:Re.key)||null,ie(ue,me,Re,xt);case T:return me=me.get(Re.key===null?ve:Re.key)||null,xe(ue,me,Re,xt);case k:return Re=Au(Re),Te(me,ue,ve,Re,xt)}if(ee(Re)||$(Re))return me=me.get(ve)||null,Ce(ue,me,Re,xt,null);if(typeof Re.then=="function")return Te(me,ue,ve,x1(Re),xt);if(Re.$$typeof===C)return Te(me,ue,ve,g1(ue,Re),xt);w1(ue,Re)}return null}function ft(me,ue,ve,Re){for(var xt=null,or=null,gt=ue,Ut=ue=0,Zt=null;gt!==null&&Ut<ve.length;Ut++){gt.index>Ut?(Zt=gt,gt=null):Zt=gt.sibling;var lr=_e(me,gt,ve[Ut],Re);if(lr===null){gt===null&&(gt=Zt);break}o&&gt&&lr.alternate===null&&l(me,gt),ue=_(lr,ue,Ut),or===null?xt=lr:or.sibling=lr,or=lr,gt=Zt}if(Ut===ve.length)return h(me,gt),tr&&Do(me,Ut),xt;if(gt===null){for(;Ut<ve.length;Ut++)gt=Pe(me,ve[Ut],Re),gt!==null&&(ue=_(gt,ue,Ut),or===null?xt=gt:or.sibling=gt,or=gt);return tr&&Do(me,Ut),xt}for(gt=g(gt);Ut<ve.length;Ut++)Zt=Te(gt,me,Ut,ve[Ut],Re),Zt!==null&&(o&&Zt.alternate!==null&&gt.delete(Zt.key===null?Ut:Zt.key),ue=_(Zt,ue,Ut),or===null?xt=Zt:or.sibling=Zt,or=Zt);return o&&gt.forEach(function(pc){return l(me,pc)}),tr&&Do(me,Ut),xt}function At(me,ue,ve,Re){if(ve==null)throw Error(n(151));for(var xt=null,or=null,gt=ue,Ut=ue=0,Zt=null,lr=ve.next();gt!==null&&!lr.done;Ut++,lr=ve.next()){gt.index>Ut?(Zt=gt,gt=null):Zt=gt.sibling;var pc=_e(me,gt,lr.value,Re);if(pc===null){gt===null&&(gt=Zt);break}o&&gt&&pc.alternate===null&&l(me,gt),ue=_(pc,ue,Ut),or===null?xt=pc:or.sibling=pc,or=pc,gt=Zt}if(lr.done)return h(me,gt),tr&&Do(me,Ut),xt;if(gt===null){for(;!lr.done;Ut++,lr=ve.next())lr=Pe(me,lr.value,Re),lr!==null&&(ue=_(lr,ue,Ut),or===null?xt=lr:or.sibling=lr,or=lr);return tr&&Do(me,Ut),xt}for(gt=g(gt);!lr.done;Ut++,lr=ve.next())lr=Te(gt,me,Ut,lr.value,Re),lr!==null&&(o&&lr.alternate!==null&&gt.delete(lr.key===null?Ut:lr.key),ue=_(lr,ue,Ut),or===null?xt=lr:or.sibling=lr,or=lr);return o&&gt.forEach(function(LX){return l(me,LX)}),tr&&Do(me,Ut),xt}function Ar(me,ue,ve,Re){if(typeof ve=="object"&&ve!==null&&ve.type===S&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:e:{for(var xt=ve.key;ue!==null;){if(ue.key===xt){if(xt=ve.type,xt===S){if(ue.tag===7){h(me,ue.sibling),Re=x(ue,ve.props.children),Re.return=me,me=Re;break e}}else if(ue.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===k&&Au(xt)===ue.type){h(me,ue.sibling),Re=x(ue,ve.props),kf(Re,ve),Re.return=me,me=Re;break e}h(me,ue);break}else l(me,ue);ue=ue.sibling}ve.type===S?(Re=xu(ve.props.children,me.mode,Re,ve.key),Re.return=me,me=Re):(Re=f1(ve.type,ve.key,ve.props,null,me.mode,Re),kf(Re,ve),Re.return=me,me=Re)}return L(me);case T:e:{for(xt=ve.key;ue!==null;){if(ue.key===xt)if(ue.tag===4&&ue.stateNode.containerInfo===ve.containerInfo&&ue.stateNode.implementation===ve.implementation){h(me,ue.sibling),Re=x(ue,ve.children||[]),Re.return=me,me=Re;break e}else{h(me,ue);break}else l(me,ue);ue=ue.sibling}Re=q2(ve,me.mode,Re),Re.return=me,me=Re}return L(me);case k:return ve=Au(ve),Ar(me,ue,ve,Re)}if(ee(ve))return ft(me,ue,ve,Re);if($(ve)){if(xt=$(ve),typeof xt!="function")throw Error(n(150));return ve=xt.call(ve),At(me,ue,ve,Re)}if(typeof ve.then=="function")return Ar(me,ue,x1(ve),Re);if(ve.$$typeof===C)return Ar(me,ue,g1(me,ve),Re);w1(me,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,ue!==null&&ue.tag===6?(h(me,ue.sibling),Re=x(ue,ve),Re.return=me,me=Re):(h(me,ue),Re=F2(ve,me.mode,Re),Re.return=me,me=Re),L(me)):h(me,ue)}return function(me,ue,ve,Re){try{Of=0;var xt=Ar(me,ue,ve,Re);return ld=null,xt}catch(gt){if(gt===od||gt===v1)throw gt;var or=Ea(29,gt,null,me.mode);return or.lanes=Re,or.return=me,or}finally{}}}var Nu=BN(!0),UN=BN(!1),Zl=!1;function r4(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n4(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Jl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function ec(o,l,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(fr&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=h1(o),_N(o,null,h),l}return d1(o,g,l,h),h1(o)}function Cf(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ei(o,h)}}function i4(o,l){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var x=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var L={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?x=_=L:_=_.next=L,h=h.next}while(h!==null);_===null?x=_=l:_=_.next=l}else x=_=l;h={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:g.shared,callbacks:g.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var a4=!1;function jf(){if(a4){var o=sd;if(o!==null)throw o}}function If(o,l,h,g){a4=!1;var x=o.updateQueue;Zl=!1;var _=x.firstBaseUpdate,L=x.lastBaseUpdate,H=x.shared.pending;if(H!==null){x.shared.pending=null;var ie=H,xe=ie.next;ie.next=null,L===null?_=xe:L.next=xe,L=ie;var Ce=o.alternate;Ce!==null&&(Ce=Ce.updateQueue,H=Ce.lastBaseUpdate,H!==L&&(H===null?Ce.firstBaseUpdate=xe:H.next=xe,Ce.lastBaseUpdate=ie))}if(_!==null){var Pe=x.baseState;L=0,Ce=xe=ie=null,H=_;do{var _e=H.lane&-536870913,Te=_e!==H.lane;if(Te?(Yt&_e)===_e:(g&_e)===_e){_e!==0&&_e===ad&&(a4=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var ft=o,At=H;_e=l;var Ar=h;switch(At.tag){case 1:if(ft=At.payload,typeof ft=="function"){Pe=ft.call(Ar,Pe,_e);break e}Pe=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=At.payload,_e=typeof ft=="function"?ft.call(Ar,Pe,_e):ft,_e==null)break e;Pe=p({},Pe,_e);break e;case 2:Zl=!0}}_e=H.callback,_e!==null&&(o.flags|=64,Te&&(o.flags|=8192),Te=x.callbacks,Te===null?x.callbacks=[_e]:Te.push(_e))}else Te={lane:_e,tag:H.tag,payload:H.payload,callback:H.callback,next:null},Ce===null?(xe=Ce=Te,ie=Pe):Ce=Ce.next=Te,L|=_e;if(H=H.next,H===null){if(H=x.shared.pending,H===null)break;Te=H,H=Te.next,Te.next=null,x.lastBaseUpdate=Te,x.shared.pending=null}}while(!0);Ce===null&&(ie=Pe),x.baseState=ie,x.firstBaseUpdate=xe,x.lastBaseUpdate=Ce,_===null&&(x.shared.lanes=0),ac|=L,o.lanes=L,o.memoizedState=Pe}}function zN(o,l){if(typeof o!="function")throw Error(n(191,o));o.call(l)}function VN(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)zN(h[o],l)}var cd=X(null),_1=X(0);function $N(o,l){o=Ko,ce(_1,o),ce(cd,l),Ko=o|l.baseLanes}function s4(){ce(_1,Ko),ce(cd,cd.current)}function o4(){Ko=_1.current,J(cd),J(_1)}var Na=X(null),es=null;function tc(o){var l=o.alternate;ce(Sn,Sn.current&1),ce(Na,o),es===null&&(l===null||cd.current!==null||l.memoizedState!==null)&&(es=o)}function l4(o){ce(Sn,Sn.current),ce(Na,o),es===null&&(es=o)}function FN(o){o.tag===22?(ce(Sn,Sn.current),ce(Na,o),es===null&&(es=o)):rc()}function rc(){ce(Sn,Sn.current),ce(Na,Na.current)}function Oa(o){J(Na),es===o&&(es=null),J(Sn)}var Sn=X(0);function S1(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||mw(h)||pw(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Uo=0,Bt=null,Sr=null,Pn=null,T1=!1,ud=!1,Ou=!1,A1=0,Rf=0,dd=null,NW=0;function fn(){throw Error(n(321))}function c4(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!Aa(o[h],l[h]))return!1;return!0}function u4(o,l,h,g,x,_){return Uo=_,Bt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,K.H=o===null||o.memoizedState===null?E9:A4,Ou=!1,_=h(g,x),Ou=!1,ud&&(_=HN(l,h,g,x)),qN(o),_}function qN(o){K.H=Df;var l=Sr!==null&&Sr.next!==null;if(Uo=0,Pn=Sr=Bt=null,T1=!1,Rf=0,dd=null,l)throw Error(n(300));o===null||Dn||(o=o.dependencies,o!==null&&p1(o)&&(Dn=!0))}function HN(o,l,h,g){Bt=o;var x=0;do{if(ud&&(dd=null),Rf=0,ud=!1,25<=x)throw Error(n(301));if(x+=1,Pn=Sr=null,o.updateQueue!=null){var _=o.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}K.H=N9,_=l(h,g)}while(ud);return _}function OW(){var o=K.H,l=o.useState()[0];return l=typeof l.then=="function"?Mf(l):l,o=o.useState()[0],(Sr!==null?Sr.memoizedState:null)!==o&&(Bt.flags|=1024),l}function d4(){var o=A1!==0;return A1=0,o}function h4(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function f4(o){if(T1){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}T1=!1}Uo=0,Pn=Sr=Bt=null,ud=!1,Rf=A1=0,dd=null}function $i(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Bt.memoizedState=Pn=o:Pn=Pn.next=o,Pn}function Tn(){if(Sr===null){var o=Bt.alternate;o=o!==null?o.memoizedState:null}else o=Sr.next;var l=Pn===null?Bt.memoizedState:Pn.next;if(l!==null)Pn=l,Sr=o;else{if(o===null)throw Bt.alternate===null?Error(n(467)):Error(n(310));Sr=o,o={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},Pn===null?Bt.memoizedState=Pn=o:Pn=Pn.next=o}return Pn}function E1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mf(o){var l=Rf;return Rf+=1,dd===null&&(dd=[]),o=PN(dd,o,l),l=Bt,(Pn===null?l.memoizedState:Pn.next)===null&&(l=l.alternate,K.H=l===null||l.memoizedState===null?E9:A4),o}function N1(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Mf(o);if(o.$$typeof===C)return hi(o)}throw Error(n(438,String(o)))}function m4(o){var l=null,h=Bt.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var g=Bt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=E1(),Bt.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),g=0;g<o;g++)h[g]=U;return l.index++,h}function zo(o,l){return typeof l=="function"?l(o):l}function O1(o){var l=Tn();return p4(l,Sr,o)}function p4(o,l,h){var g=o.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=h;var x=o.baseQueue,_=g.pending;if(_!==null){if(x!==null){var L=x.next;x.next=_.next,_.next=L}l.baseQueue=x=_,g.pending=null}if(_=o.baseState,x===null)o.memoizedState=_;else{l=x.next;var H=L=null,ie=null,xe=l,Ce=!1;do{var Pe=xe.lane&-536870913;if(Pe!==xe.lane?(Yt&Pe)===Pe:(Uo&Pe)===Pe){var _e=xe.revertLane;if(_e===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Pe===ad&&(Ce=!0);else if((Uo&_e)===_e){xe=xe.next,_e===ad&&(Ce=!0);continue}else Pe={lane:0,revertLane:xe.revertLane,gesture:null,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ie===null?(H=ie=Pe,L=_):ie=ie.next=Pe,Bt.lanes|=_e,ac|=_e;Pe=xe.action,Ou&&h(_,Pe),_=xe.hasEagerState?xe.eagerState:h(_,Pe)}else _e={lane:Pe,revertLane:xe.revertLane,gesture:xe.gesture,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},ie===null?(H=ie=_e,L=_):ie=ie.next=_e,Bt.lanes|=Pe,ac|=Pe;xe=xe.next}while(xe!==null&&xe!==l);if(ie===null?L=_:ie.next=H,!Aa(_,o.memoizedState)&&(Dn=!0,Ce&&(h=sd,h!==null)))throw h;o.memoizedState=_,o.baseState=L,o.baseQueue=ie,g.lastRenderedState=_}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function g4(o){var l=Tn(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=o;var g=h.dispatch,x=h.pending,_=l.memoizedState;if(x!==null){h.pending=null;var L=x=x.next;do _=o(_,L.action),L=L.next;while(L!==x);Aa(_,l.memoizedState)||(Dn=!0),l.memoizedState=_,l.baseQueue===null&&(l.baseState=_),h.lastRenderedState=_}return[_,g]}function GN(o,l,h){var g=Bt,x=Tn(),_=tr;if(_){if(h===void 0)throw Error(n(407));h=h()}else h=l();var L=!Aa((Sr||x).memoizedState,h);if(L&&(x.memoizedState=h,Dn=!0),x=x.queue,b4(XN.bind(null,g,x,o),[o]),x.getSnapshot!==l||L||Pn!==null&&Pn.memoizedState.tag&1){if(g.flags|=2048,hd(9,{destroy:void 0},WN.bind(null,g,x,h,l),null),Rr===null)throw Error(n(349));_||(Uo&127)!==0||KN(g,l,h)}return h}function KN(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=Bt.updateQueue,l===null?(l=E1(),Bt.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function WN(o,l,h,g){l.value=h,l.getSnapshot=g,QN(l)&&YN(o)}function XN(o,l,h){return h(function(){QN(l)&&YN(o)})}function QN(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!Aa(o,h)}catch{return!0}}function YN(o){var l=bu(o,2);l!==null&&da(l,o,2)}function y4(o){var l=$i();if(typeof o=="function"){var h=o;if(o=h(),Ou){un(!0);try{h()}finally{un(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:o},l}function ZN(o,l,h,g){return o.baseState=h,p4(o,Sr,typeof g=="function"?g:zo)}function kW(o,l,h,g,x){if(j1(o))throw Error(n(485));if(o=l.action,o!==null){var _={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){_.listeners.push(L)}};K.T!==null?h(!0):_.isTransition=!1,g(_),h=l.pending,h===null?(_.next=l.pending=_,JN(l,_)):(_.next=h.next,l.pending=h.next=_)}}function JN(o,l){var h=l.action,g=l.payload,x=o.state;if(l.isTransition){var _=K.T,L={};K.T=L;try{var H=h(x,g),ie=K.S;ie!==null&&ie(L,H),e9(o,l,H)}catch(xe){v4(o,l,xe)}finally{_!==null&&L.types!==null&&(_.types=L.types),K.T=_}}else try{_=h(x,g),e9(o,l,_)}catch(xe){v4(o,l,xe)}}function e9(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){t9(o,l,g)},function(g){return v4(o,l,g)}):t9(o,l,h)}function t9(o,l,h){l.status="fulfilled",l.value=h,r9(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,JN(o,h)))}function v4(o,l,h){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=h,r9(l),l=l.next;while(l!==g)}o.action=null}function r9(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function n9(o,l){return l}function i9(o,l){if(tr){var h=Rr.formState;if(h!==null){e:{var g=Bt;if(tr){if(Kr){t:{for(var x=Kr,_=Ja;x.nodeType!==8;){if(!_){x=null;break t}if(x=ts(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){Kr=ts(x.nextSibling),g=x.data==="F!";break e}}Ql(g)}g=!1}g&&(l=h[0])}}return h=$i(),h.memoizedState=h.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n9,lastRenderedState:l},h.queue=g,h=S9.bind(null,Bt,g),g.dispatch=h,g=y4(!1),_=T4.bind(null,Bt,!1,g.queue),g=$i(),x={state:l,dispatch:null,action:o,pending:null},g.queue=x,h=kW.bind(null,Bt,x,_,h),x.dispatch=h,g.memoizedState=o,[l,h,!1]}function a9(o){var l=Tn();return s9(l,Sr,o)}function s9(o,l,h){if(l=p4(o,l,n9)[0],o=O1(zo)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Mf(l)}catch(L){throw L===od?v1:L}else g=l;l=Tn();var x=l.queue,_=x.dispatch;return h!==l.memoizedState&&(Bt.flags|=2048,hd(9,{destroy:void 0},CW.bind(null,x,h),null)),[g,_,o]}function CW(o,l){o.action=l}function o9(o){var l=Tn(),h=Sr;if(h!==null)return s9(l,h,o);Tn(),l=l.memoizedState,h=Tn();var g=h.queue.dispatch;return h.memoizedState=o,[l,g,!1]}function hd(o,l,h,g){return o={tag:o,create:h,deps:g,inst:l,next:null},l=Bt.updateQueue,l===null&&(l=E1(),Bt.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,l.lastEffect=o),o}function l9(){return Tn().memoizedState}function k1(o,l,h,g){var x=$i();Bt.flags|=o,x.memoizedState=hd(1|l,{destroy:void 0},h,g===void 0?null:g)}function C1(o,l,h,g){var x=Tn();g=g===void 0?null:g;var _=x.memoizedState.inst;Sr!==null&&g!==null&&c4(g,Sr.memoizedState.deps)?x.memoizedState=hd(l,_,h,g):(Bt.flags|=o,x.memoizedState=hd(1|l,_,h,g))}function c9(o,l){k1(8390656,8,o,l)}function b4(o,l){C1(2048,8,o,l)}function jW(o){Bt.flags|=4;var l=Bt.updateQueue;if(l===null)l=E1(),Bt.updateQueue=l,l.events=[o];else{var h=l.events;h===null?l.events=[o]:h.push(o)}}function u9(o){var l=Tn().memoizedState;return jW({ref:l,nextImpl:o}),function(){if((fr&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function d9(o,l){return C1(4,2,o,l)}function h9(o,l){return C1(4,4,o,l)}function f9(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function m9(o,l,h){h=h!=null?h.concat([o]):null,C1(4,4,f9.bind(null,l,o),h)}function x4(){}function p9(o,l){var h=Tn();l=l===void 0?null:l;var g=h.memoizedState;return l!==null&&c4(l,g[1])?g[0]:(h.memoizedState=[o,l],o)}function g9(o,l){var h=Tn();l=l===void 0?null:l;var g=h.memoizedState;if(l!==null&&c4(l,g[1]))return g[0];if(g=o(),Ou){un(!0);try{o()}finally{un(!1)}}return h.memoizedState=[g,l],g}function w4(o,l,h){return h===void 0||(Uo&1073741824)!==0&&(Yt&261930)===0?o.memoizedState=l:(o.memoizedState=h,o=yO(),Bt.lanes|=o,ac|=o,h)}function y9(o,l,h,g){return Aa(h,l)?h:cd.current!==null?(o=w4(o,h,g),Aa(o,l)||(Dn=!0),o):(Uo&42)===0||(Uo&1073741824)!==0&&(Yt&261930)===0?(Dn=!0,o.memoizedState=h):(o=yO(),Bt.lanes|=o,ac|=o,l)}function v9(o,l,h,g,x){var _=Z.p;Z.p=_!==0&&8>_?_:8;var L=K.T,H={};K.T=H,T4(o,!1,l,h);try{var ie=x(),xe=K.S;if(xe!==null&&xe(H,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ce=EW(ie,g);Pf(o,l,Ce,ja(o))}else Pf(o,l,g,ja(o))}catch(Pe){Pf(o,l,{then:function(){},status:"rejected",reason:Pe},ja())}finally{Z.p=_,L!==null&&H.types!==null&&(L.types=H.types),K.T=L}}function IW(){}function _4(o,l,h,g){if(o.tag!==5)throw Error(n(476));var x=b9(o).queue;v9(o,x,l,Y,h===null?IW:function(){return x9(o),h(g)})}function b9(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:Y},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function x9(o){var l=b9(o);l.next===null&&(l=o.alternate.memoizedState),Pf(o,l.next.queue,{},ja())}function S4(){return hi(Zf)}function w9(){return Tn().memoizedState}function _9(){return Tn().memoizedState}function RW(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=ja();o=Jl(h);var g=ec(l,o,h);g!==null&&(da(g,l,h),Cf(g,l,h)),l={cache:Z2()},o.payload=l;return}l=l.return}}function MW(o,l,h){var g=ja();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},j1(o)?T9(l,h):(h=V2(o,l,h,g),h!==null&&(da(h,o,g),A9(h,l,g)))}function S9(o,l,h){var g=ja();Pf(o,l,h,g)}function Pf(o,l,h,g){var x={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(j1(o))T9(l,x);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=l.lastRenderedReducer,_!==null))try{var L=l.lastRenderedState,H=_(L,h);if(x.hasEagerState=!0,x.eagerState=H,Aa(H,L))return d1(o,l,x,0),Rr===null&&u1(),!1}catch{}finally{}if(h=V2(o,l,x,g),h!==null)return da(h,o,g),A9(h,l,g),!0}return!1}function T4(o,l,h,g){if(g={lane:2,revertLane:rw(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},j1(o)){if(l)throw Error(n(479))}else l=V2(o,h,g,2),l!==null&&da(l,o,2)}function j1(o){var l=o.alternate;return o===Bt||l!==null&&l===Bt}function T9(o,l){ud=T1=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function A9(o,l,h){if((h&4194048)!==0){var g=l.lanes;g&=o.pendingLanes,h|=g,l.lanes=h,Ei(o,h)}}var Df={readContext:hi,use:N1,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useLayoutEffect:fn,useInsertionEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useSyncExternalStore:fn,useId:fn,useHostTransitionStatus:fn,useFormState:fn,useActionState:fn,useOptimistic:fn,useMemoCache:fn,useCacheRefresh:fn};Df.useEffectEvent=fn;var E9={readContext:hi,use:N1,useCallback:function(o,l){return $i().memoizedState=[o,l===void 0?null:l],o},useContext:hi,useEffect:c9,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,k1(4194308,4,f9.bind(null,l,o),h)},useLayoutEffect:function(o,l){return k1(4194308,4,o,l)},useInsertionEffect:function(o,l){k1(4,2,o,l)},useMemo:function(o,l){var h=$i();l=l===void 0?null:l;var g=o();if(Ou){un(!0);try{o()}finally{un(!1)}}return h.memoizedState=[g,l],g},useReducer:function(o,l,h){var g=$i();if(h!==void 0){var x=h(l);if(Ou){un(!0);try{h(l)}finally{un(!1)}}}else x=l;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=MW.bind(null,Bt,o),[g.memoizedState,o]},useRef:function(o){var l=$i();return o={current:o},l.memoizedState=o},useState:function(o){o=y4(o);var l=o.queue,h=S9.bind(null,Bt,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:x4,useDeferredValue:function(o,l){var h=$i();return w4(h,o,l)},useTransition:function(){var o=y4(!1);return o=v9.bind(null,Bt,o.queue,!0,!1),$i().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var g=Bt,x=$i();if(tr){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Rr===null)throw Error(n(349));(Yt&127)!==0||KN(g,l,h)}x.memoizedState=h;var _={value:h,getSnapshot:l};return x.queue=_,c9(XN.bind(null,g,_,o),[o]),g.flags|=2048,hd(9,{destroy:void 0},WN.bind(null,g,_,h,l),null),h},useId:function(){var o=$i(),l=Rr.identifierPrefix;if(tr){var h=ro,g=to;h=(g&~(1<<32-pr(g)-1)).toString(32)+h,l="_"+l+"R_"+h,h=A1++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=NW++,l="_"+l+"r_"+h.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:S4,useFormState:i9,useActionState:i9,useOptimistic:function(o){var l=$i();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=T4.bind(null,Bt,!0,h),h.dispatch=l,[o,l]},useMemoCache:m4,useCacheRefresh:function(){return $i().memoizedState=RW.bind(null,Bt)},useEffectEvent:function(o){var l=$i(),h={impl:o};return l.memoizedState=h,function(){if((fr&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},A4={readContext:hi,use:N1,useCallback:p9,useContext:hi,useEffect:b4,useImperativeHandle:m9,useInsertionEffect:d9,useLayoutEffect:h9,useMemo:g9,useReducer:O1,useRef:l9,useState:function(){return O1(zo)},useDebugValue:x4,useDeferredValue:function(o,l){var h=Tn();return y9(h,Sr.memoizedState,o,l)},useTransition:function(){var o=O1(zo)[0],l=Tn().memoizedState;return[typeof o=="boolean"?o:Mf(o),l]},useSyncExternalStore:GN,useId:w9,useHostTransitionStatus:S4,useFormState:a9,useActionState:a9,useOptimistic:function(o,l){var h=Tn();return ZN(h,Sr,o,l)},useMemoCache:m4,useCacheRefresh:_9};A4.useEffectEvent=u9;var N9={readContext:hi,use:N1,useCallback:p9,useContext:hi,useEffect:b4,useImperativeHandle:m9,useInsertionEffect:d9,useLayoutEffect:h9,useMemo:g9,useReducer:g4,useRef:l9,useState:function(){return g4(zo)},useDebugValue:x4,useDeferredValue:function(o,l){var h=Tn();return Sr===null?w4(h,o,l):y9(h,Sr.memoizedState,o,l)},useTransition:function(){var o=g4(zo)[0],l=Tn().memoizedState;return[typeof o=="boolean"?o:Mf(o),l]},useSyncExternalStore:GN,useId:w9,useHostTransitionStatus:S4,useFormState:o9,useActionState:o9,useOptimistic:function(o,l){var h=Tn();return Sr!==null?ZN(h,Sr,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:m4,useCacheRefresh:_9};N9.useEffectEvent=u9;function E4(o,l,h,g){l=o.memoizedState,h=h(g,l),h=h==null?l:p({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var N4={enqueueSetState:function(o,l,h){o=o._reactInternals;var g=ja(),x=Jl(g);x.payload=l,h!=null&&(x.callback=h),l=ec(o,x,g),l!==null&&(da(l,o,g),Cf(l,o,g))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var g=ja(),x=Jl(g);x.tag=1,x.payload=l,h!=null&&(x.callback=h),l=ec(o,x,g),l!==null&&(da(l,o,g),Cf(l,o,g))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=ja(),g=Jl(h);g.tag=2,l!=null&&(g.callback=l),l=ec(o,g,h),l!==null&&(da(l,o,h),Cf(l,o,h))}};function O9(o,l,h,g,x,_,L){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,L):l.prototype&&l.prototype.isPureReactComponent?!_f(h,g)||!_f(x,_):!0}function k9(o,l,h,g){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==o&&N4.enqueueReplaceState(l,l.state,null)}function ku(o,l){var h=l;if("ref"in l){h={};for(var g in l)g!=="ref"&&(h[g]=l[g])}if(o=o.defaultProps){h===l&&(h=p({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function C9(o){c1(o)}function j9(o){console.error(o)}function I9(o){c1(o)}function I1(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function R9(o,l,h){try{var g=o.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function O4(o,l,h){return h=Jl(h),h.tag=3,h.payload={element:null},h.callback=function(){I1(o,l)},h}function M9(o){return o=Jl(o),o.tag=3,o}function P9(o,l,h,g){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var _=g.value;o.payload=function(){return x(_)},o.callback=function(){R9(l,h,g)}}var L=h.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(o.callback=function(){R9(l,h,g),typeof x!="function"&&(sc===null?sc=new Set([this]):sc.add(this));var H=g.stack;this.componentDidCatch(g.value,{componentStack:H!==null?H:""})})}function PW(o,l,h,g,x){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=h.alternate,l!==null&&id(l,h,x,!0),h=Na.current,h!==null){switch(h.tag){case 31:case 13:return es===null?q1():h.alternate===null&&mn===0&&(mn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,g===b1?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([g]):l.add(g),J4(o,g,x)),!1;case 22:return h.flags|=65536,g===b1?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([g]):h.add(g)),J4(o,g,x)),!1}throw Error(n(435,h.tag))}return J4(o,g,x),q1(),!1}if(tr)return l=Na.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==K2&&(o=Error(n(422),{cause:g}),Af(Qa(o,h)))):(g!==K2&&(l=Error(n(423),{cause:g}),Af(Qa(l,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=Qa(g,h),x=O4(o.stateNode,g,x),i4(o,x),mn!==4&&(mn=2)),!1;var _=Error(n(520),{cause:g});if(_=Qa(_,h),qf===null?qf=[_]:qf.push(_),mn!==4&&(mn=2),l===null)return!0;g=Qa(g,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=O4(h.stateNode,g,o),i4(h,o),!1;case 1:if(l=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(sc===null||!sc.has(_))))return h.flags|=65536,x&=-x,h.lanes|=x,x=M9(x),P9(x,o,h,g),i4(h,x),!1}h=h.return}while(h!==null);return!1}var k4=Error(n(461)),Dn=!1;function fi(o,l,h,g){l.child=o===null?UN(l,null,h,g):Nu(l,o.child,h,g)}function D9(o,l,h,g,x){h=h.render;var _=l.ref;if("ref"in g){var L={};for(var H in g)H!=="ref"&&(L[H]=g[H])}else L=g;return Su(l),g=u4(o,l,h,L,_,x),H=d4(),o!==null&&!Dn?(h4(o,l,x),Vo(o,l,x)):(tr&&H&&H2(l),l.flags|=1,fi(o,l,g,x),l.child)}function L9(o,l,h,g,x){if(o===null){var _=h.type;return typeof _=="function"&&!$2(_)&&_.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=_,B9(o,l,_,g,x)):(o=f1(h.type,null,g,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(_=o.child,!L4(o,x)){var L=_.memoizedProps;if(h=h.compare,h=h!==null?h:_f,h(L,g)&&o.ref===l.ref)return Vo(o,l,x)}return l.flags|=1,o=Po(_,g),o.ref=l.ref,o.return=l,l.child=o}function B9(o,l,h,g,x){if(o!==null){var _=o.memoizedProps;if(_f(_,g)&&o.ref===l.ref)if(Dn=!1,l.pendingProps=g=_,L4(o,x))(o.flags&131072)!==0&&(Dn=!0);else return l.lanes=o.lanes,Vo(o,l,x)}return C4(o,l,h,g,x)}function U9(o,l,h,g){var x=g.children,_=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(_=_!==null?_.baseLanes|h:h,o!==null){for(g=l.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~_}else g=0,l.child=null;return z9(o,l,_,h,g)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&y1(l,_!==null?_.cachePool:null),_!==null?$N(l,_):s4(),FN(l);else return g=l.lanes=536870912,z9(o,l,_!==null?_.baseLanes|h:h,h,g)}else _!==null?(y1(l,_.cachePool),$N(l,_),rc(),l.memoizedState=null):(o!==null&&y1(l,null),s4(),rc());return fi(o,l,x,h),l.child}function Lf(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function z9(o,l,h,g,x){var _=e4();return _=_===null?null:{parent:Mn._currentValue,pool:_},l.memoizedState={baseLanes:h,cachePool:_},o!==null&&y1(l,null),s4(),FN(l),o!==null&&id(o,l,g,!0),l.childLanes=x,null}function R1(o,l){return l=P1({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function V9(o,l,h){return Nu(l,o.child,null,h),o=R1(l,l.pendingProps),o.flags|=2,Oa(l),l.memoizedState=null,o}function DW(o,l,h){var g=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(tr){if(g.mode==="hidden")return o=R1(l,g),l.lanes=536870912,Lf(null,o);if(l4(l),(o=Kr)?(o=JO(o,Ja),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Wl!==null?{id:to,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},h=TN(o),h.return=l,l.child=h,di=l,Kr=null)):o=null,o===null)throw Ql(l);return l.lanes=536870912,null}return R1(l,g)}var _=o.memoizedState;if(_!==null){var L=_.dehydrated;if(l4(l),x)if(l.flags&256)l.flags&=-257,l=V9(o,l,h);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(n(558));else if(Dn||id(o,l,h,!1),x=(h&o.childLanes)!==0,Dn||x){if(g=Rr,g!==null&&(L=Ui(g,h),L!==0&&L!==_.retryLane))throw _.retryLane=L,bu(o,L),da(g,o,L),k4;q1(),l=V9(o,l,h)}else o=_.treeContext,Kr=ts(L.nextSibling),di=l,tr=!0,Xl=null,Ja=!1,o!==null&&NN(l,o),l=R1(l,g),l.flags|=4096;return l}return o=Po(o.child,{mode:g.mode,children:g.children}),o.ref=l.ref,l.child=o,o.return=l,o}function M1(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function C4(o,l,h,g,x){return Su(l),h=u4(o,l,h,g,void 0,x),g=d4(),o!==null&&!Dn?(h4(o,l,x),Vo(o,l,x)):(tr&&g&&H2(l),l.flags|=1,fi(o,l,h,x),l.child)}function $9(o,l,h,g,x,_){return Su(l),l.updateQueue=null,h=HN(l,g,h,x),qN(o),g=d4(),o!==null&&!Dn?(h4(o,l,_),Vo(o,l,_)):(tr&&g&&H2(l),l.flags|=1,fi(o,l,h,_),l.child)}function F9(o,l,h,g,x){if(Su(l),l.stateNode===null){var _=ed,L=h.contextType;typeof L=="object"&&L!==null&&(_=hi(L)),_=new h(g,_),l.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=N4,l.stateNode=_,_._reactInternals=l,_=l.stateNode,_.props=g,_.state=l.memoizedState,_.refs={},r4(l),L=h.contextType,_.context=typeof L=="object"&&L!==null?hi(L):ed,_.state=l.memoizedState,L=h.getDerivedStateFromProps,typeof L=="function"&&(E4(l,h,L,g),_.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(L=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),L!==_.state&&N4.enqueueReplaceState(_,_.state,null),If(l,g,_,x),jf(),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(o===null){_=l.stateNode;var H=l.memoizedProps,ie=ku(h,H);_.props=ie;var xe=_.context,Ce=h.contextType;L=ed,typeof Ce=="object"&&Ce!==null&&(L=hi(Ce));var Pe=h.getDerivedStateFromProps;Ce=typeof Pe=="function"||typeof _.getSnapshotBeforeUpdate=="function",H=l.pendingProps!==H,Ce||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(H||xe!==L)&&k9(l,_,g,L),Zl=!1;var _e=l.memoizedState;_.state=_e,If(l,g,_,x),jf(),xe=l.memoizedState,H||_e!==xe||Zl?(typeof Pe=="function"&&(E4(l,h,Pe,g),xe=l.memoizedState),(ie=Zl||O9(l,h,ie,g,_e,xe,L))?(Ce||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(l.flags|=4194308)):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=xe),_.props=g,_.state=xe,_.context=L,g=ie):(typeof _.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{_=l.stateNode,n4(o,l),L=l.memoizedProps,Ce=ku(h,L),_.props=Ce,Pe=l.pendingProps,_e=_.context,xe=h.contextType,ie=ed,typeof xe=="object"&&xe!==null&&(ie=hi(xe)),H=h.getDerivedStateFromProps,(xe=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(L!==Pe||_e!==ie)&&k9(l,_,g,ie),Zl=!1,_e=l.memoizedState,_.state=_e,If(l,g,_,x),jf();var Te=l.memoizedState;L!==Pe||_e!==Te||Zl||o!==null&&o.dependencies!==null&&p1(o.dependencies)?(typeof H=="function"&&(E4(l,h,H,g),Te=l.memoizedState),(Ce=Zl||O9(l,h,Ce,g,_e,Te,ie)||o!==null&&o.dependencies!==null&&p1(o.dependencies))?(xe||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(g,Te,ie),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(g,Te,ie)),typeof _.componentDidUpdate=="function"&&(l.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof _.componentDidUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=Te),_.props=g,_.state=Te,_.context=ie,g=Ce):(typeof _.componentDidUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&_e===o.memoizedState||(l.flags|=1024),g=!1)}return _=g,M1(o,l),g=(l.flags&128)!==0,_||g?(_=l.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:_.render(),l.flags|=1,o!==null&&g?(l.child=Nu(l,o.child,null,x),l.child=Nu(l,null,h,x)):fi(o,l,h,x),l.memoizedState=_.state,o=l.child):o=Vo(o,l,x),o}function q9(o,l,h,g){return wu(),l.flags|=256,fi(o,l,h,g),l.child}var j4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function I4(o){return{baseLanes:o,cachePool:RN()}}function R4(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=Ca),o}function H9(o,l,h){var g=l.pendingProps,x=!1,_=(l.flags&128)!==0,L;if((L=_)||(L=o!==null&&o.memoizedState===null?!1:(Sn.current&2)!==0),L&&(x=!0,l.flags&=-129),L=(l.flags&32)!==0,l.flags&=-33,o===null){if(tr){if(x?tc(l):rc(),(o=Kr)?(o=JO(o,Ja),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:Wl!==null?{id:to,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},h=TN(o),h.return=l,l.child=h,di=l,Kr=null)):o=null,o===null)throw Ql(l);return pw(o)?l.lanes=32:l.lanes=536870912,null}var H=g.children;return g=g.fallback,x?(rc(),x=l.mode,H=P1({mode:"hidden",children:H},x),g=xu(g,x,h,null),H.return=l,g.return=l,H.sibling=g,l.child=H,g=l.child,g.memoizedState=I4(h),g.childLanes=R4(o,L,h),l.memoizedState=j4,Lf(null,g)):(tc(l),M4(l,H))}var ie=o.memoizedState;if(ie!==null&&(H=ie.dehydrated,H!==null)){if(_)l.flags&256?(tc(l),l.flags&=-257,l=P4(o,l,h)):l.memoizedState!==null?(rc(),l.child=o.child,l.flags|=128,l=null):(rc(),H=g.fallback,x=l.mode,g=P1({mode:"visible",children:g.children},x),H=xu(H,x,h,null),H.flags|=2,g.return=l,H.return=l,g.sibling=H,l.child=g,Nu(l,o.child,null,h),g=l.child,g.memoizedState=I4(h),g.childLanes=R4(o,L,h),l.memoizedState=j4,l=Lf(null,g));else if(tc(l),pw(H)){if(L=H.nextSibling&&H.nextSibling.dataset,L)var xe=L.dgst;L=xe,g=Error(n(419)),g.stack="",g.digest=L,Af({value:g,source:null,stack:null}),l=P4(o,l,h)}else if(Dn||id(o,l,h,!1),L=(h&o.childLanes)!==0,Dn||L){if(L=Rr,L!==null&&(g=Ui(L,h),g!==0&&g!==ie.retryLane))throw ie.retryLane=g,bu(o,g),da(L,o,g),k4;mw(H)||q1(),l=P4(o,l,h)}else mw(H)?(l.flags|=192,l.child=o.child,l=null):(o=ie.treeContext,Kr=ts(H.nextSibling),di=l,tr=!0,Xl=null,Ja=!1,o!==null&&NN(l,o),l=M4(l,g.children),l.flags|=4096);return l}return x?(rc(),H=g.fallback,x=l.mode,ie=o.child,xe=ie.sibling,g=Po(ie,{mode:"hidden",children:g.children}),g.subtreeFlags=ie.subtreeFlags&65011712,xe!==null?H=Po(xe,H):(H=xu(H,x,h,null),H.flags|=2),H.return=l,g.return=l,g.sibling=H,l.child=g,Lf(null,g),g=l.child,H=o.child.memoizedState,H===null?H=I4(h):(x=H.cachePool,x!==null?(ie=Mn._currentValue,x=x.parent!==ie?{parent:ie,pool:ie}:x):x=RN(),H={baseLanes:H.baseLanes|h,cachePool:x}),g.memoizedState=H,g.childLanes=R4(o,L,h),l.memoizedState=j4,Lf(o.child,g)):(tc(l),h=o.child,o=h.sibling,h=Po(h,{mode:"visible",children:g.children}),h.return=l,h.sibling=null,o!==null&&(L=l.deletions,L===null?(l.deletions=[o],l.flags|=16):L.push(o)),l.child=h,l.memoizedState=null,h)}function M4(o,l){return l=P1({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function P1(o,l){return o=Ea(22,o,null,l),o.lanes=0,o}function P4(o,l,h){return Nu(l,o.child,null,h),o=M4(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function G9(o,l,h){o.lanes|=l;var g=o.alternate;g!==null&&(g.lanes|=l),Q2(o.return,l,h)}function D4(o,l,h,g,x,_){var L=o.memoizedState;L===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:x,treeForkCount:_}:(L.isBackwards=l,L.rendering=null,L.renderingStartTime=0,L.last=g,L.tail=h,L.tailMode=x,L.treeForkCount=_)}function K9(o,l,h){var g=l.pendingProps,x=g.revealOrder,_=g.tail;g=g.children;var L=Sn.current,H=(L&2)!==0;if(H?(L=L&1|2,l.flags|=128):L&=1,ce(Sn,L),fi(o,l,g,h),g=tr?Tf:0,!H&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&G9(o,h,l);else if(o.tag===19)G9(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&S1(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),D4(l,!1,x,h,_,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&S1(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}D4(l,!0,h,null,_,g);break;case"together":D4(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function Vo(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),ac|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(id(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(n(153));if(l.child!==null){for(o=l.child,h=Po(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=Po(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function L4(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&p1(o)))}function LW(o,l,h){switch(l.tag){case 3:ot(l,l.stateNode.containerInfo),Yl(l,Mn,o.memoizedState.cache),wu();break;case 27:case 5:He(l);break;case 4:ot(l,l.stateNode.containerInfo);break;case 10:Yl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,l4(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(tc(l),l.flags|=128,null):(h&l.child.childLanes)!==0?H9(o,l,h):(tc(l),o=Vo(o,l,h),o!==null?o.sibling:null);tc(l);break;case 19:var x=(o.flags&128)!==0;if(g=(h&l.childLanes)!==0,g||(id(o,l,h,!1),g=(h&l.childLanes)!==0),x){if(g)return K9(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ce(Sn,Sn.current),g)break;return null;case 22:return l.lanes=0,U9(o,l,h,l.pendingProps);case 24:Yl(l,Mn,o.memoizedState.cache)}return Vo(o,l,h)}function W9(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)Dn=!0;else{if(!L4(o,h)&&(l.flags&128)===0)return Dn=!1,LW(o,l,h);Dn=(o.flags&131072)!==0}else Dn=!1,tr&&(l.flags&1048576)!==0&&EN(l,Tf,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(o=Au(l.elementType),l.type=o,typeof o=="function")$2(o)?(g=ku(o,g),l.tag=1,l=F9(null,l,o,g,h)):(l.tag=0,l=C4(null,l,o,g,h));else{if(o!=null){var x=o.$$typeof;if(x===B){l.tag=11,l=D9(null,l,o,g,h);break e}else if(x===A){l.tag=14,l=L9(null,l,o,g,h);break e}}throw l=Q(o)||o,Error(n(306,l,""))}}return l;case 0:return C4(o,l,l.type,l.pendingProps,h);case 1:return g=l.type,x=ku(g,l.pendingProps),F9(o,l,g,x,h);case 3:e:{if(ot(l,l.stateNode.containerInfo),o===null)throw Error(n(387));g=l.pendingProps;var _=l.memoizedState;x=_.element,n4(o,l),If(l,g,null,h);var L=l.memoizedState;if(g=L.cache,Yl(l,Mn,g),g!==_.cache&&Y2(l,[Mn],h,!0),jf(),g=L.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&256){l=q9(o,l,g,h);break e}else if(g!==x){x=Qa(Error(n(424)),l),Af(x),l=q9(o,l,g,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Kr=ts(o.firstChild),di=l,tr=!0,Xl=null,Ja=!0,h=UN(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(wu(),g===x){l=Vo(o,l,h);break e}fi(o,l,g,h)}l=l.child}return l;case 26:return M1(o,l),o===null?(h=ak(l.type,null,l.pendingProps,null))?l.memoizedState=h:tr||(h=l.type,o=l.pendingProps,g=Y1(ke.current).createElement(h),g[br]=l,g[Ur]=o,mi(g,h,o),Se(g),l.stateNode=g):l.memoizedState=ak(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return He(l),o===null&&tr&&(g=l.stateNode=rk(l.type,l.pendingProps,ke.current),di=l,Ja=!0,x=Kr,uc(l.type)?(gw=x,Kr=ts(g.firstChild)):Kr=x),fi(o,l,l.pendingProps.children,h),M1(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&tr&&((x=g=Kr)&&(g=fX(g,l.type,l.pendingProps,Ja),g!==null?(l.stateNode=g,di=l,Kr=ts(g.firstChild),Ja=!1,x=!0):x=!1),x||Ql(l)),He(l),x=l.type,_=l.pendingProps,L=o!==null?o.memoizedProps:null,g=_.children,dw(x,_)?g=null:L!==null&&dw(x,L)&&(l.flags|=32),l.memoizedState!==null&&(x=u4(o,l,OW,null,null,h),Zf._currentValue=x),M1(o,l),fi(o,l,g,h),l.child;case 6:return o===null&&tr&&((o=h=Kr)&&(h=mX(h,l.pendingProps,Ja),h!==null?(l.stateNode=h,di=l,Kr=null,o=!0):o=!1),o||Ql(l)),null;case 13:return H9(o,l,h);case 4:return ot(l,l.stateNode.containerInfo),g=l.pendingProps,o===null?l.child=Nu(l,null,g,h):fi(o,l,g,h),l.child;case 11:return D9(o,l,l.type,l.pendingProps,h);case 7:return fi(o,l,l.pendingProps,h),l.child;case 8:return fi(o,l,l.pendingProps.children,h),l.child;case 12:return fi(o,l,l.pendingProps.children,h),l.child;case 10:return g=l.pendingProps,Yl(l,l.type,g.value),fi(o,l,g.children,h),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,Su(l),x=hi(x),g=g(x),l.flags|=1,fi(o,l,g,h),l.child;case 14:return L9(o,l,l.type,l.pendingProps,h);case 15:return B9(o,l,l.type,l.pendingProps,h);case 19:return K9(o,l,h);case 31:return DW(o,l,h);case 22:return U9(o,l,h,l.pendingProps);case 24:return Su(l),g=hi(Mn),o===null?(x=e4(),x===null&&(x=Rr,_=Z2(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=h),x=_),l.memoizedState={parent:g,cache:x},r4(l),Yl(l,Mn,x)):((o.lanes&h)!==0&&(n4(o,l),If(l,null,null,h),jf()),x=o.memoizedState,_=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),Yl(l,Mn,g)):(g=_.cache,Yl(l,Mn,g),g!==x.cache&&Y2(l,[Mn],h,!0))),fi(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function $o(o){o.flags|=4}function B4(o,l,h,g,x){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(wO())o.flags|=8192;else throw Eu=b1,t4}else o.flags&=-16777217}function X9(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!uk(l))if(wO())o.flags|=8192;else throw Eu=b1,t4}function D1(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?Ss():536870912,o.lanes|=l,gd|=l)}function Bf(o,l){if(!tr)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Wr(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=h,l}function BW(o,l,h){var g=l.pendingProps;switch(G2(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wr(l),null;case 1:return Wr(l),null;case 3:return h=l.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),Bo(Mn),Ee(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(nd(l)?$o(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,W2())),Wr(l),null;case 26:var x=l.type,_=l.memoizedState;return o===null?($o(l),_!==null?(Wr(l),X9(l,_)):(Wr(l),B4(l,x,null,g,h))):_?_!==o.memoizedState?($o(l),Wr(l),X9(l,_)):(Wr(l),l.flags&=-16777217):(o=o.memoizedProps,o!==g&&$o(l),Wr(l),B4(l,x,o,g,h)),null;case 27:if(he(l),h=ke.current,x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&$o(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Wr(l),null}o=Ne.current,nd(l)?ON(l):(o=rk(x,g,h),l.stateNode=o,$o(l))}return Wr(l),null;case 5:if(he(l),x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==g&&$o(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return Wr(l),null}if(_=Ne.current,nd(l))ON(l);else{var L=Y1(ke.current);switch(_){case 1:_=L.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=L.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=L.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof g.is=="string"?L.createElement("select",{is:g.is}):L.createElement("select"),g.multiple?_.multiple=!0:g.size&&(_.size=g.size);break;default:_=typeof g.is=="string"?L.createElement(x,{is:g.is}):L.createElement(x)}}_[br]=l,_[Ur]=g;e:for(L=l.child;L!==null;){if(L.tag===5||L.tag===6)_.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===l)break e;for(;L.sibling===null;){if(L.return===null||L.return===l)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}l.stateNode=_;e:switch(mi(_,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&$o(l)}}return Wr(l),B4(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,h),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==g&&$o(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(o=ke.current,nd(l)){if(o=l.stateNode,h=l.memoizedProps,g=null,x=di,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[br]=l,o=!!(o.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||HO(o.nodeValue,h)),o||Ql(l,!0)}else o=Y1(o).createTextNode(g),o[br]=l,l.stateNode=o}return Wr(l),null;case 31:if(h=l.memoizedState,o===null||o.memoizedState!==null){if(g=nd(l),h!==null){if(o===null){if(!g)throw Error(n(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(557));o[br]=l}else wu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wr(l),o=!1}else h=W2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return l.flags&256?(Oa(l),l):(Oa(l),null);if((l.flags&128)!==0)throw Error(n(558))}return Wr(l),null;case 13:if(g=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=nd(l),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(n(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[br]=l}else wu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Wr(l),x=!1}else x=W2(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Oa(l),l):(Oa(l),null)}return Oa(l),(l.flags&128)!==0?(l.lanes=h,l):(h=g!==null,o=o!==null&&o.memoizedState!==null,h&&(g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),_=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(_=g.memoizedState.cachePool.pool),_!==x&&(g.flags|=2048)),h!==o&&h&&(l.child.flags|=8192),D1(l,l.updateQueue),Wr(l),null);case 4:return Ee(),o===null&&sw(l.stateNode.containerInfo),Wr(l),null;case 10:return Bo(l.type),Wr(l),null;case 19:if(J(Sn),g=l.memoizedState,g===null)return Wr(l),null;if(x=(l.flags&128)!==0,_=g.rendering,_===null)if(x)Bf(g,!1);else{if(mn!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(_=S1(o),_!==null){for(l.flags|=128,Bf(g,!1),o=_.updateQueue,l.updateQueue=o,D1(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)SN(h,o),h=h.sibling;return ce(Sn,Sn.current&1|2),tr&&Do(l,g.treeForkCount),l.child}o=o.sibling}g.tail!==null&&Tt()>V1&&(l.flags|=128,x=!0,Bf(g,!1),l.lanes=4194304)}else{if(!x)if(o=S1(_),o!==null){if(l.flags|=128,x=!0,o=o.updateQueue,l.updateQueue=o,D1(l,o),Bf(g,!0),g.tail===null&&g.tailMode==="hidden"&&!_.alternate&&!tr)return Wr(l),null}else 2*Tt()-g.renderingStartTime>V1&&h!==536870912&&(l.flags|=128,x=!0,Bf(g,!1),l.lanes=4194304);g.isBackwards?(_.sibling=l.child,l.child=_):(o=g.last,o!==null?o.sibling=_:l.child=_,g.last=_)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Tt(),o.sibling=null,h=Sn.current,ce(Sn,x?h&1|2:h&1),tr&&Do(l,g.treeForkCount),o):(Wr(l),null);case 22:case 23:return Oa(l),o4(),g=l.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(h&536870912)!==0&&(l.flags&128)===0&&(Wr(l),l.subtreeFlags&6&&(l.flags|=8192)):Wr(l),h=l.updateQueue,h!==null&&D1(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048),o!==null&&J(Tu),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Bo(Mn),Wr(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function UW(o,l){switch(G2(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Bo(Mn),Ee(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return he(l),null;case 31:if(l.memoizedState!==null){if(Oa(l),l.alternate===null)throw Error(n(340));wu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(Oa(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(n(340));wu()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return J(Sn),null;case 4:return Ee(),null;case 10:return Bo(l.type),null;case 22:case 23:return Oa(l),o4(),o!==null&&J(Tu),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Bo(Mn),null;case 25:return null;default:return null}}function Q9(o,l){switch(G2(l),l.tag){case 3:Bo(Mn),Ee();break;case 26:case 27:case 5:he(l);break;case 4:Ee();break;case 31:l.memoizedState!==null&&Oa(l);break;case 13:Oa(l);break;case 19:J(Sn);break;case 10:Bo(l.type);break;case 22:case 23:Oa(l),o4(),o!==null&&J(Tu);break;case 24:Bo(Mn)}}function Uf(o,l){try{var h=l.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var x=g.next;h=x;do{if((h.tag&o)===o){g=void 0;var _=h.create,L=h.inst;g=_(),L.destroy=g}h=h.next}while(h!==x)}}catch(H){wr(l,l.return,H)}}function nc(o,l,h){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var _=x.next;g=_;do{if((g.tag&o)===o){var L=g.inst,H=L.destroy;if(H!==void 0){L.destroy=void 0,x=l;var ie=h,xe=H;try{xe()}catch(Ce){wr(x,ie,Ce)}}}g=g.next}while(g!==_)}}catch(Ce){wr(l,l.return,Ce)}}function Y9(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{VN(l,h)}catch(g){wr(o,o.return,g)}}}function Z9(o,l,h){h.props=ku(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(g){wr(o,l,g)}}function zf(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof h=="function"?o.refCleanup=h(g):h.current=g}}catch(x){wr(o,l,x)}}function no(o,l){var h=o.ref,g=o.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(x){wr(o,l,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){wr(o,l,x)}else h.current=null}function J9(o){var l=o.type,h=o.memoizedProps,g=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(x){wr(o,o.return,x)}}function U4(o,l,h){try{var g=o.stateNode;oX(g,o.type,h,l),g[Ur]=l}catch(x){wr(o,o.return,x)}}function eO(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&uc(o.type)||o.tag===4}function z4(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||eO(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&uc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function V4(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=ti));else if(g!==4&&(g===27&&uc(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(V4(o,l,h),o=o.sibling;o!==null;)V4(o,l,h),o=o.sibling}function L1(o,l,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(g!==4&&(g===27&&uc(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(L1(o,l,h),o=o.sibling;o!==null;)L1(o,l,h),o=o.sibling}function tO(o){var l=o.stateNode,h=o.memoizedProps;try{for(var g=o.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);mi(l,g,h),l[br]=o,l[Ur]=h}catch(_){wr(o,o.return,_)}}var Fo=!1,Ln=!1,$4=!1,rO=typeof WeakSet=="function"?WeakSet:Set,ii=null;function zW(o,l){if(o=o.containerInfo,cw=iy,o=mN(o),P2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var x=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var L=0,H=-1,ie=-1,xe=0,Ce=0,Pe=o,_e=null;t:for(;;){for(var Te;Pe!==h||x!==0&&Pe.nodeType!==3||(H=L+x),Pe!==_||g!==0&&Pe.nodeType!==3||(ie=L+g),Pe.nodeType===3&&(L+=Pe.nodeValue.length),(Te=Pe.firstChild)!==null;)_e=Pe,Pe=Te;for(;;){if(Pe===o)break t;if(_e===h&&++xe===x&&(H=L),_e===_&&++Ce===g&&(ie=L),(Te=Pe.nextSibling)!==null)break;Pe=_e,_e=Pe.parentNode}Pe=Te}h=H===-1||ie===-1?null:{start:H,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(uw={focusedElem:o,selectionRange:h},iy=!1,ii=l;ii!==null;)if(l=ii,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,ii=o;else for(;ii!==null;){switch(l=ii,_=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&_!==null){o=void 0,h=l,x=_.memoizedProps,_=_.memoizedState,g=h.stateNode;try{var ft=ku(h.type,x);o=g.getSnapshotBeforeUpdate(ft,_),g.__reactInternalSnapshotBeforeUpdate=o}catch(At){wr(h,h.return,At)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)fw(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":fw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=l.sibling,o!==null){o.return=l.return,ii=o;break}ii=l.return}}function nO(o,l,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:Ho(o,h),g&4&&Uf(5,h);break;case 1:if(Ho(o,h),g&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(L){wr(h,h.return,L)}else{var x=ku(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(x,l,o.__reactInternalSnapshotBeforeUpdate)}catch(L){wr(h,h.return,L)}}g&64&&Y9(h),g&512&&zf(h,h.return);break;case 3:if(Ho(o,h),g&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{VN(o,l)}catch(L){wr(h,h.return,L)}}break;case 27:l===null&&g&4&&tO(h);case 26:case 5:Ho(o,h),l===null&&g&4&&J9(h),g&512&&zf(h,h.return);break;case 12:Ho(o,h);break;case 31:Ho(o,h),g&4&&sO(o,h);break;case 13:Ho(o,h),g&4&&oO(o,h),g&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=XW.bind(null,h),pX(o,h))));break;case 22:if(g=h.memoizedState!==null||Fo,!g){l=l!==null&&l.memoizedState!==null||Ln,x=Fo;var _=Ln;Fo=g,(Ln=l)&&!_?Go(o,h,(h.subtreeFlags&8772)!==0):Ho(o,h),Fo=x,Ln=_}break;case 30:break;default:Ho(o,h)}}function iO(o){var l=o.alternate;l!==null&&(o.alternate=null,iO(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&ut(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Zr=null,oa=!1;function qo(o,l,h){for(h=h.child;h!==null;)aO(o,l,h),h=h.sibling}function aO(o,l,h){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(jn,h)}catch{}switch(h.tag){case 26:Ln||no(h,l),qo(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ln||no(h,l);var g=Zr,x=oa;uc(h.type)&&(Zr=h.stateNode,oa=!1),qo(o,l,h),Xf(h.stateNode),Zr=g,oa=x;break;case 5:Ln||no(h,l);case 6:if(g=Zr,x=oa,Zr=null,qo(o,l,h),Zr=g,oa=x,Zr!==null)if(oa)try{(Zr.nodeType===9?Zr.body:Zr.nodeName==="HTML"?Zr.ownerDocument.body:Zr).removeChild(h.stateNode)}catch(_){wr(h,l,_)}else try{Zr.removeChild(h.stateNode)}catch(_){wr(h,l,_)}break;case 18:Zr!==null&&(oa?(o=Zr,YO(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Td(o)):YO(Zr,h.stateNode));break;case 4:g=Zr,x=oa,Zr=h.stateNode.containerInfo,oa=!0,qo(o,l,h),Zr=g,oa=x;break;case 0:case 11:case 14:case 15:nc(2,h,l),Ln||nc(4,h,l),qo(o,l,h);break;case 1:Ln||(no(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"&&Z9(h,l,g)),qo(o,l,h);break;case 21:qo(o,l,h);break;case 22:Ln=(g=Ln)||h.memoizedState!==null,qo(o,l,h),Ln=g;break;default:qo(o,l,h)}}function sO(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Td(o)}catch(h){wr(l,l.return,h)}}}function oO(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Td(o)}catch(h){wr(l,l.return,h)}}function VW(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new rO),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new rO),l;default:throw Error(n(435,o.tag))}}function B1(o,l){var h=VW(o);l.forEach(function(g){if(!h.has(g)){h.add(g);var x=QW.bind(null,o,g);g.then(x,x)}})}function la(o,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var x=h[g],_=o,L=l,H=L;e:for(;H!==null;){switch(H.tag){case 27:if(uc(H.type)){Zr=H.stateNode,oa=!1;break e}break;case 5:Zr=H.stateNode,oa=!1;break e;case 3:case 4:Zr=H.stateNode.containerInfo,oa=!0;break e}H=H.return}if(Zr===null)throw Error(n(160));aO(_,L,x),Zr=null,oa=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)lO(l,o),l=l.sibling}var Ns=null;function lO(o,l){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:la(l,o),ca(o),g&4&&(nc(3,o,o.return),Uf(3,o),nc(5,o,o.return));break;case 1:la(l,o),ca(o),g&512&&(Ln||h===null||no(h,h.return)),g&64&&Fo&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var x=Ns;if(la(l,o),ca(o),g&512&&(Ln||h===null||no(h,h.return)),g&4){var _=h!==null?h.memoizedState:null;if(g=o.memoizedState,h===null)if(g===null)if(o.stateNode===null){e:{g=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":_=x.getElementsByTagName("title")[0],(!_||_[na]||_[br]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(g),x.head.insertBefore(_,x.querySelector("head > title"))),mi(_,g,h),_[br]=o,Se(_),g=_;break e;case"link":var L=lk("link","href",x).get(g+(h.href||""));if(L){for(var H=0;H<L.length;H++)if(_=L[H],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){L.splice(H,1);break t}}_=x.createElement(g),mi(_,g,h),x.head.appendChild(_);break;case"meta":if(L=lk("meta","content",x).get(g+(h.content||""))){for(H=0;H<L.length;H++)if(_=L[H],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){L.splice(H,1);break t}}_=x.createElement(g),mi(_,g,h),x.head.appendChild(_);break;default:throw Error(n(468,g))}_[br]=o,Se(_),g=_}o.stateNode=g}else ck(x,o.type,o.stateNode);else o.stateNode=ok(x,g,o.memoizedProps);else _!==g?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,g===null?ck(x,o.type,o.stateNode):ok(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&U4(o,o.memoizedProps,h.memoizedProps)}break;case 27:la(l,o),ca(o),g&512&&(Ln||h===null||no(h,h.return)),h!==null&&g&4&&U4(o,o.memoizedProps,h.memoizedProps);break;case 5:if(la(l,o),ca(o),g&512&&(Ln||h===null||no(h,h.return)),o.flags&32){x=o.stateNode;try{Wa(x,"")}catch(ft){wr(o,o.return,ft)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,U4(o,x,h!==null?h.memoizedProps:x)),g&1024&&($4=!0);break;case 6:if(la(l,o),ca(o),g&4){if(o.stateNode===null)throw Error(n(162));g=o.memoizedProps,h=o.stateNode;try{h.nodeValue=g}catch(ft){wr(o,o.return,ft)}}break;case 3:if(ey=null,x=Ns,Ns=Z1(l.containerInfo),la(l,o),Ns=x,ca(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Td(l.containerInfo)}catch(ft){wr(o,o.return,ft)}$4&&($4=!1,cO(o));break;case 4:g=Ns,Ns=Z1(o.stateNode.containerInfo),la(l,o),ca(o),Ns=g;break;case 12:la(l,o),ca(o);break;case 31:la(l,o),ca(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,B1(o,g)));break;case 13:la(l,o),ca(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(z1=Tt()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,B1(o,g)));break;case 22:x=o.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,xe=Fo,Ce=Ln;if(Fo=xe||x,Ln=Ce||ie,la(l,o),Ln=Ce,Fo=xe,ca(o),g&8192)e:for(l=o.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(h===null||ie||Fo||Ln||Cu(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){ie=h=l;try{if(_=ie.stateNode,x)L=_.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{H=ie.stateNode;var Pe=ie.memoizedProps.style,_e=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;H.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(ft){wr(ie,ie.return,ft)}}}else if(l.tag===6){if(h===null){ie=l;try{ie.stateNode.nodeValue=x?"":ie.memoizedProps}catch(ft){wr(ie,ie.return,ft)}}}else if(l.tag===18){if(h===null){ie=l;try{var Te=ie.stateNode;x?ZO(Te,!0):ZO(ie.stateNode,!1)}catch(ft){wr(ie,ie.return,ft)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=o.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,B1(o,h))));break;case 19:la(l,o),ca(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,B1(o,g)));break;case 30:break;case 21:break;default:la(l,o),ca(o)}}function ca(o){var l=o.flags;if(l&2){try{for(var h,g=o.return;g!==null;){if(eO(g)){h=g;break}g=g.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var x=h.stateNode,_=z4(o);L1(o,_,x);break;case 5:var L=h.stateNode;h.flags&32&&(Wa(L,""),h.flags&=-33);var H=z4(o);L1(o,H,L);break;case 3:case 4:var ie=h.stateNode.containerInfo,xe=z4(o);V4(o,xe,ie);break;default:throw Error(n(161))}}catch(Ce){wr(o,o.return,Ce)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function cO(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;cO(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Ho(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)nO(o,l.alternate,l),l=l.sibling}function Cu(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:nc(4,l,l.return),Cu(l);break;case 1:no(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&Z9(l,l.return,h),Cu(l);break;case 27:Xf(l.stateNode);case 26:case 5:no(l,l.return),Cu(l);break;case 22:l.memoizedState===null&&Cu(l);break;case 30:Cu(l);break;default:Cu(l)}o=o.sibling}}function Go(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=o,_=l,L=_.flags;switch(_.tag){case 0:case 11:case 15:Go(x,_,h),Uf(4,_);break;case 1:if(Go(x,_,h),g=_,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(xe){wr(g,g.return,xe)}if(g=_,x=g.updateQueue,x!==null){var H=g.stateNode;try{var ie=x.shared.hiddenCallbacks;if(ie!==null)for(x.shared.hiddenCallbacks=null,x=0;x<ie.length;x++)zN(ie[x],H)}catch(xe){wr(g,g.return,xe)}}h&&L&64&&Y9(_),zf(_,_.return);break;case 27:tO(_);case 26:case 5:Go(x,_,h),h&&g===null&&L&4&&J9(_),zf(_,_.return);break;case 12:Go(x,_,h);break;case 31:Go(x,_,h),h&&L&4&&sO(x,_);break;case 13:Go(x,_,h),h&&L&4&&oO(x,_);break;case 22:_.memoizedState===null&&Go(x,_,h),zf(_,_.return);break;case 30:break;default:Go(x,_,h)}l=l.sibling}}function F4(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Ef(h))}function q4(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ef(o))}function Os(o,l,h,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)uO(o,l,h,g),l=l.sibling}function uO(o,l,h,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Os(o,l,h,g),x&2048&&Uf(9,l);break;case 1:Os(o,l,h,g);break;case 3:Os(o,l,h,g),x&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Ef(o)));break;case 12:if(x&2048){Os(o,l,h,g),o=l.stateNode;try{var _=l.memoizedProps,L=_.id,H=_.onPostCommit;typeof H=="function"&&H(L,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ie){wr(l,l.return,ie)}}else Os(o,l,h,g);break;case 31:Os(o,l,h,g);break;case 13:Os(o,l,h,g);break;case 23:break;case 22:_=l.stateNode,L=l.alternate,l.memoizedState!==null?_._visibility&2?Os(o,l,h,g):Vf(o,l):_._visibility&2?Os(o,l,h,g):(_._visibility|=2,fd(o,l,h,g,(l.subtreeFlags&10256)!==0||!1)),x&2048&&F4(L,l);break;case 24:Os(o,l,h,g),x&2048&&q4(l.alternate,l);break;default:Os(o,l,h,g)}}function fd(o,l,h,g,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var _=o,L=l,H=h,ie=g,xe=L.flags;switch(L.tag){case 0:case 11:case 15:fd(_,L,H,ie,x),Uf(8,L);break;case 23:break;case 22:var Ce=L.stateNode;L.memoizedState!==null?Ce._visibility&2?fd(_,L,H,ie,x):Vf(_,L):(Ce._visibility|=2,fd(_,L,H,ie,x)),x&&xe&2048&&F4(L.alternate,L);break;case 24:fd(_,L,H,ie,x),x&&xe&2048&&q4(L.alternate,L);break;default:fd(_,L,H,ie,x)}l=l.sibling}}function Vf(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,g=l,x=g.flags;switch(g.tag){case 22:Vf(h,g),x&2048&&F4(g.alternate,g);break;case 24:Vf(h,g),x&2048&&q4(g.alternate,g);break;default:Vf(h,g)}l=l.sibling}}var $f=8192;function md(o,l,h){if(o.subtreeFlags&$f)for(o=o.child;o!==null;)dO(o,l,h),o=o.sibling}function dO(o,l,h){switch(o.tag){case 26:md(o,l,h),o.flags&$f&&o.memoizedState!==null&&NX(h,Ns,o.memoizedState,o.memoizedProps);break;case 5:md(o,l,h);break;case 3:case 4:var g=Ns;Ns=Z1(o.stateNode.containerInfo),md(o,l,h),Ns=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=$f,$f=16777216,md(o,l,h),$f=g):md(o,l,h));break;default:md(o,l,h)}}function hO(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Ff(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ii=g,mO(g,o)}hO(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fO(o),o=o.sibling}function fO(o){switch(o.tag){case 0:case 11:case 15:Ff(o),o.flags&2048&&nc(9,o,o.return);break;case 3:Ff(o);break;case 12:Ff(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,U1(o)):Ff(o);break;default:Ff(o)}}function U1(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ii=g,mO(g,o)}hO(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:nc(8,l,l.return),U1(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,U1(l));break;default:U1(l)}o=o.sibling}}function mO(o,l){for(;ii!==null;){var h=ii;switch(h.tag){case 0:case 11:case 15:nc(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Ef(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,ii=g;else e:for(h=o;ii!==null;){g=ii;var x=g.sibling,_=g.return;if(iO(g),g===h){ii=null;break e}if(x!==null){x.return=_,ii=x;break e}ii=_}}}var $W={getCacheForType:function(o){var l=hi(Mn),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h},cacheSignal:function(){return hi(Mn).controller.signal}},FW=typeof WeakMap=="function"?WeakMap:Map,fr=0,Rr=null,Wt=null,Yt=0,xr=0,ka=null,ic=!1,pd=!1,H4=!1,Ko=0,mn=0,ac=0,ju=0,G4=0,Ca=0,gd=0,qf=null,ua=null,K4=!1,z1=0,pO=0,V1=1/0,$1=null,sc=null,Gn=0,oc=null,yd=null,Wo=0,W4=0,X4=null,gO=null,Hf=0,Q4=null;function ja(){return(fr&2)!==0&&Yt!==0?Yt&-Yt:K.T!==null?rw():ui()}function yO(){if(Ca===0)if((Yt&536870912)===0||tr){var o=dn;dn<<=1,(dn&3932160)===0&&(dn=262144),Ca=o}else Ca=536870912;return o=Na.current,o!==null&&(o.flags|=32),Ca}function da(o,l,h){(o===Rr&&(xr===2||xr===9)||o.cancelPendingCommit!==null)&&(vd(o,0),lc(o,Yt,Ca,!1)),ta(o,h),((fr&2)===0||o!==Rr)&&(o===Rr&&((fr&2)===0&&(ju|=h),mn===4&&lc(o,Yt,Ca,!1)),io(o))}function vO(o,l,h){if((fr&6)!==0)throw Error(n(327));var g=!h&&(l&127)===0&&(l&o.expiredLanes)===0||ei(o,l),x=g?GW(o,l):Z4(o,l,!0),_=g;do{if(x===0){pd&&!g&&lc(o,l,0,!1);break}else{if(h=o.current.alternate,_&&!qW(h)){x=Z4(o,l,!1),_=!1;continue}if(x===2){if(_=l,o.errorRecoveryDisabledLanes&_)var L=0;else L=o.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){l=L;e:{var H=o;x=qf;var ie=H.current.memoizedState.isDehydrated;if(ie&&(vd(H,L).flags|=256),L=Z4(H,L,!1),L!==2){if(H4&&!ie){H.errorRecoveryDisabledLanes|=_,ju|=_,x=4;break e}_=ua,ua=x,_!==null&&(ua===null?ua=_:ua.push.apply(ua,_))}x=L}if(_=!1,x!==2)continue}}if(x===1){vd(o,0),lc(o,l,0,!0);break}e:{switch(g=o,_=x,_){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:lc(g,l,Ca,!ic);break e;case 2:ua=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(x=z1+300-Tt(),10<x)){if(lc(g,l,Ca,!ic),rr(g,0,!0)!==0)break e;Wo=l,g.timeoutHandle=XO(bO.bind(null,g,h,ua,$1,K4,l,Ca,ju,gd,ic,_,"Throttled",-0,0),x);break e}bO(g,h,ua,$1,K4,l,Ca,ju,gd,ic,_,null,-0,0)}}break}while(!0);io(o)}function bO(o,l,h,g,x,_,L,H,ie,xe,Ce,Pe,_e,Te){if(o.timeoutHandle=-1,Pe=l.subtreeFlags,Pe&8192||(Pe&16785408)===16785408){Pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ti},dO(l,_,Pe);var ft=(_&62914560)===_?z1-Tt():(_&4194048)===_?pO-Tt():0;if(ft=OX(Pe,ft),ft!==null){Wo=_,o.cancelPendingCommit=ft(NO.bind(null,o,l,_,h,g,x,L,H,ie,Ce,Pe,null,_e,Te)),lc(o,_,L,!xe);return}}NO(o,l,_,h,g,x,L,H,ie)}function qW(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var x=h[g],_=x.getSnapshot;x=x.value;try{if(!Aa(_(),x))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function lc(o,l,h,g){l&=~G4,l&=~ju,o.suspendedLanes|=l,o.pingedLanes&=~l,g&&(o.warmLanes|=l),g=o.expirationTimes;for(var x=l;0<x;){var _=31-pr(x),L=1<<_;g[_]=-1,x&=~L}h!==0&&Hs(o,h,l)}function F1(){return(fr&6)===0?(Gf(0),!1):!0}function Y4(){if(Wt!==null){if(xr===0)var o=Wt.return;else o=Wt,Lo=_u=null,f4(o),ld=null,Of=0,o=Wt;for(;o!==null;)Q9(o.alternate,o),o=o.return;Wt=null}}function vd(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,uX(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Wo=0,Y4(),Rr=o,Wt=h=Po(o.current,null),Yt=l,xr=0,ka=null,ic=!1,pd=ei(o,l),H4=!1,gd=Ca=G4=ju=ac=mn=0,ua=qf=null,K4=!1,(l&8)!==0&&(l|=l&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=l;0<g;){var x=31-pr(g),_=1<<x;l|=o[x],g&=~_}return Ko=l,u1(),h}function xO(o,l){Bt=null,K.H=Df,l===od||l===v1?(l=DN(),xr=3):l===t4?(l=DN(),xr=4):xr=l===k4?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ka=l,Wt===null&&(mn=1,I1(o,Qa(l,o.current)))}function wO(){var o=Na.current;return o===null?!0:(Yt&4194048)===Yt?es===null:(Yt&62914560)===Yt||(Yt&536870912)!==0?o===es:!1}function _O(){var o=K.H;return K.H=Df,o===null?Df:o}function SO(){var o=K.A;return K.A=$W,o}function q1(){mn=4,ic||(Yt&4194048)!==Yt&&Na.current!==null||(pd=!0),(ac&134217727)===0&&(ju&134217727)===0||Rr===null||lc(Rr,Yt,Ca,!1)}function Z4(o,l,h){var g=fr;fr|=2;var x=_O(),_=SO();(Rr!==o||Yt!==l)&&($1=null,vd(o,l)),l=!1;var L=mn;e:do try{if(xr!==0&&Wt!==null){var H=Wt,ie=ka;switch(xr){case 8:Y4(),L=6;break e;case 3:case 2:case 9:case 6:Na.current===null&&(l=!0);var xe=xr;if(xr=0,ka=null,bd(o,H,ie,xe),h&&pd){L=0;break e}break;default:xe=xr,xr=0,ka=null,bd(o,H,ie,xe)}}HW(),L=mn;break}catch(Ce){xO(o,Ce)}while(!0);return l&&o.shellSuspendCounter++,Lo=_u=null,fr=g,K.H=x,K.A=_,Wt===null&&(Rr=null,Yt=0,u1()),L}function HW(){for(;Wt!==null;)TO(Wt)}function GW(o,l){var h=fr;fr|=2;var g=_O(),x=SO();Rr!==o||Yt!==l?($1=null,V1=Tt()+500,vd(o,l)):pd=ei(o,l);e:do try{if(xr!==0&&Wt!==null){l=Wt;var _=ka;t:switch(xr){case 1:xr=0,ka=null,bd(o,l,_,1);break;case 2:case 9:if(MN(_)){xr=0,ka=null,AO(l);break}l=function(){xr!==2&&xr!==9||Rr!==o||(xr=7),io(o)},_.then(l,l);break e;case 3:xr=7;break e;case 4:xr=5;break e;case 7:MN(_)?(xr=0,ka=null,AO(l)):(xr=0,ka=null,bd(o,l,_,7));break;case 5:var L=null;switch(Wt.tag){case 26:L=Wt.memoizedState;case 5:case 27:var H=Wt;if(L?uk(L):H.stateNode.complete){xr=0,ka=null;var ie=H.sibling;if(ie!==null)Wt=ie;else{var xe=H.return;xe!==null?(Wt=xe,H1(xe)):Wt=null}break t}}xr=0,ka=null,bd(o,l,_,5);break;case 6:xr=0,ka=null,bd(o,l,_,6);break;case 8:Y4(),mn=6;break e;default:throw Error(n(462))}}KW();break}catch(Ce){xO(o,Ce)}while(!0);return Lo=_u=null,K.H=g,K.A=x,fr=h,Wt!==null?0:(Rr=null,Yt=0,u1(),mn)}function KW(){for(;Wt!==null&&!vt();)TO(Wt)}function TO(o){var l=W9(o.alternate,o,Ko);o.memoizedProps=o.pendingProps,l===null?H1(o):Wt=l}function AO(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=$9(h,l,l.pendingProps,l.type,void 0,Yt);break;case 11:l=$9(h,l,l.pendingProps,l.type.render,l.ref,Yt);break;case 5:f4(l);default:Q9(h,l),l=Wt=SN(l,Ko),l=W9(h,l,Ko)}o.memoizedProps=o.pendingProps,l===null?H1(o):Wt=l}function bd(o,l,h,g){Lo=_u=null,f4(l),ld=null,Of=0;var x=l.return;try{if(PW(o,x,l,h,Yt)){mn=1,I1(o,Qa(h,o.current)),Wt=null;return}}catch(_){if(x!==null)throw Wt=x,_;mn=1,I1(o,Qa(h,o.current)),Wt=null;return}l.flags&32768?(tr||g===1?o=!0:pd||(Yt&536870912)!==0?o=!1:(ic=o=!0,(g===2||g===9||g===3||g===6)&&(g=Na.current,g!==null&&g.tag===13&&(g.flags|=16384))),EO(l,o)):H1(l)}function H1(o){var l=o;do{if((l.flags&32768)!==0){EO(l,ic);return}o=l.return;var h=BW(l.alternate,l,Ko);if(h!==null){Wt=h;return}if(l=l.sibling,l!==null){Wt=l;return}Wt=l=o}while(l!==null);mn===0&&(mn=5)}function EO(o,l){do{var h=UW(o.alternate,o);if(h!==null){h.flags&=32767,Wt=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){Wt=o;return}Wt=o=h}while(o!==null);mn=6,Wt=null}function NO(o,l,h,g,x,_,L,H,ie){o.cancelPendingCommit=null;do G1();while(Gn!==0);if((fr&6)!==0)throw Error(n(327));if(l!==null){if(l===o.current)throw Error(n(177));if(_=l.lanes|l.childLanes,_|=z2,nn(o,h,_,L,H,ie),o===Rr&&(Wt=Rr=null,Yt=0),yd=l,oc=o,Wo=h,W4=_,X4=x,gO=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,YW(Ft,function(){return IO(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=K.T,K.T=null,x=Z.p,Z.p=2,L=fr,fr|=4;try{zW(o,l,h)}finally{fr=L,Z.p=x,K.T=g}}Gn=1,OO(),kO(),CO()}}function OO(){if(Gn===1){Gn=0;var o=oc,l=yd,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=K.T,K.T=null;var g=Z.p;Z.p=2;var x=fr;fr|=4;try{lO(l,o);var _=uw,L=mN(o.containerInfo),H=_.focusedElem,ie=_.selectionRange;if(L!==H&&H&&H.ownerDocument&&fN(H.ownerDocument.documentElement,H)){if(ie!==null&&P2(H)){var xe=ie.start,Ce=ie.end;if(Ce===void 0&&(Ce=xe),"selectionStart"in H)H.selectionStart=xe,H.selectionEnd=Math.min(Ce,H.value.length);else{var Pe=H.ownerDocument||document,_e=Pe&&Pe.defaultView||window;if(_e.getSelection){var Te=_e.getSelection(),ft=H.textContent.length,At=Math.min(ie.start,ft),Ar=ie.end===void 0?At:Math.min(ie.end,ft);!Te.extend&&At>Ar&&(L=Ar,Ar=At,At=L);var me=hN(H,At),ue=hN(H,Ar);if(me&&ue&&(Te.rangeCount!==1||Te.anchorNode!==me.node||Te.anchorOffset!==me.offset||Te.focusNode!==ue.node||Te.focusOffset!==ue.offset)){var ve=Pe.createRange();ve.setStart(me.node,me.offset),Te.removeAllRanges(),At>Ar?(Te.addRange(ve),Te.extend(ue.node,ue.offset)):(ve.setEnd(ue.node,ue.offset),Te.addRange(ve))}}}}for(Pe=[],Te=H;Te=Te.parentNode;)Te.nodeType===1&&Pe.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Pe.length;H++){var Re=Pe[H];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}iy=!!cw,uw=cw=null}finally{fr=x,Z.p=g,K.T=h}}o.current=l,Gn=2}}function kO(){if(Gn===2){Gn=0;var o=oc,l=yd,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=K.T,K.T=null;var g=Z.p;Z.p=2;var x=fr;fr|=4;try{nO(o,l.alternate,l)}finally{fr=x,Z.p=g,K.T=h}}Gn=3}}function CO(){if(Gn===4||Gn===3){Gn=0,Xe();var o=oc,l=yd,h=Wo,g=gO;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Gn=5:(Gn=0,yd=oc=null,jO(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(sc=null),_n(h),l=l.stateNode,Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(jn,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=K.T,x=Z.p,Z.p=2,K.T=null;try{for(var _=o.onRecoverableError,L=0;L<g.length;L++){var H=g[L];_(H.value,{componentStack:H.stack})}}finally{K.T=l,Z.p=x}}(Wo&3)!==0&&G1(),io(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===Q4?Hf++:(Hf=0,Q4=o):Hf=0,Gf(0)}}function jO(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Ef(l)))}function G1(){return OO(),kO(),CO(),IO()}function IO(){if(Gn!==5)return!1;var o=oc,l=W4;W4=0;var h=_n(Wo),g=K.T,x=Z.p;try{Z.p=32>h?32:h,K.T=null,h=X4,X4=null;var _=oc,L=Wo;if(Gn=0,yd=oc=null,Wo=0,(fr&6)!==0)throw Error(n(331));var H=fr;if(fr|=4,fO(_.current),uO(_,_.current,L,h),fr=H,Gf(0,!1),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(jn,_)}catch{}return!0}finally{Z.p=x,K.T=g,jO(o,l)}}function RO(o,l,h){l=Qa(h,l),l=O4(o.stateNode,l,2),o=ec(o,l,2),o!==null&&(ta(o,2),io(o))}function wr(o,l,h){if(o.tag===3)RO(o,o,h);else for(;l!==null;){if(l.tag===3){RO(l,o,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(sc===null||!sc.has(g))){o=Qa(h,o),h=M9(2),g=ec(l,h,2),g!==null&&(P9(h,g,l,o),ta(g,2),io(g));break}}l=l.return}}function J4(o,l,h){var g=o.pingCache;if(g===null){g=o.pingCache=new FW;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(h)||(H4=!0,x.add(h),o=WW.bind(null,o,l,h),l.then(o,o))}function WW(o,l,h){var g=o.pingCache;g!==null&&g.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,Rr===o&&(Yt&h)===h&&(mn===4||mn===3&&(Yt&62914560)===Yt&&300>Tt()-z1?(fr&2)===0&&vd(o,0):G4|=h,gd===Yt&&(gd=0)),io(o)}function MO(o,l){l===0&&(l=Ss()),o=bu(o,l),o!==null&&(ta(o,l),io(o))}function XW(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),MO(o,h)}function QW(o,l){var h=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),MO(o,h)}function YW(o,l){return qe(o,l)}var K1=null,xd=null,ew=!1,W1=!1,tw=!1,cc=0;function io(o){o!==xd&&o.next===null&&(xd===null?K1=xd=o:xd=xd.next=o),W1=!0,ew||(ew=!0,JW())}function Gf(o,l){if(!tw&&W1){tw=!0;do for(var h=!1,g=K1;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var _=0;else{var L=g.suspendedLanes,H=g.pingedLanes;_=(1<<31-pr(42|o)+1)-1,_&=x&~(L&~H),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,BO(g,_))}else _=Yt,_=rr(g,g===Rr?_:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(_&3)===0||ei(g,_)||(h=!0,BO(g,_));g=g.next}while(h);tw=!1}}function ZW(){PO()}function PO(){W1=ew=!1;var o=0;cc!==0&&cX()&&(o=cc);for(var l=Tt(),h=null,g=K1;g!==null;){var x=g.next,_=DO(g,l);_===0?(g.next=null,h===null?K1=x:h.next=x,x===null&&(xd=h)):(h=g,(o!==0||(_&3)!==0)&&(W1=!0)),g=x}Gn!==0&&Gn!==5||Gf(o),cc!==0&&(cc=0)}function DO(o,l){for(var h=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,_=o.pendingLanes&-62914561;0<_;){var L=31-pr(_),H=1<<L,ie=x[L];ie===-1?((H&h)===0||(H&g)!==0)&&(x[L]=_s(H,l)):ie<=l&&(o.expiredLanes|=H),_&=~H}if(l=Rr,h=Yt,h=rr(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,h===0||o===l&&(xr===2||xr===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&nt(g),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||ei(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(g!==null&&nt(g),_n(h)){case 2:case 8:h=Ot;break;case 32:h=Ft;break;case 268435456:h=Br;break;default:h=Ft}return g=LO.bind(null,o),h=qe(h,g),o.callbackPriority=l,o.callbackNode=h,l}return g!==null&&g!==null&&nt(g),o.callbackPriority=2,o.callbackNode=null,2}function LO(o,l){if(Gn!==0&&Gn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(G1()&&o.callbackNode!==h)return null;var g=Yt;return g=rr(o,o===Rr?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(vO(o,g,l),DO(o,Tt()),o.callbackNode!=null&&o.callbackNode===h?LO.bind(null,o):null)}function BO(o,l){if(G1())return null;vO(o,l,!0)}function JW(){dX(function(){(fr&6)!==0?qe(Qt,ZW):PO()})}function rw(){if(cc===0){var o=ad;o===0&&(o=Ti,Ti<<=1,(Ti&261888)===0&&(Ti=256)),cc=o}return cc}function UO(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Zs(""+o)}function zO(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function eX(o,l,h,g,x){if(l==="submit"&&h&&h.stateNode===x){var _=UO((x[Ur]||null).action),L=g.submitter;L&&(l=(l=L[Ur]||null)?UO(l.formAction):L.getAttribute("formAction"),l!==null&&(_=l,L=null));var H=new hu("action","action",null,g,x);o.push({event:H,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(cc!==0){var ie=L?zO(x,L):new FormData(x);_4(h,{pending:!0,data:ie,method:x.method,action:_},null,ie)}}else typeof _=="function"&&(H.preventDefault(),ie=L?zO(x,L):new FormData(x),_4(h,{pending:!0,data:ie,method:x.method,action:_},_,ie))},currentTarget:x}]})}}for(var nw=0;nw<U2.length;nw++){var iw=U2[nw],tX=iw.toLowerCase(),rX=iw[0].toUpperCase()+iw.slice(1);Es(tX,"on"+rX)}Es(yN,"onAnimationEnd"),Es(vN,"onAnimationIteration"),Es(bN,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(vW,"onTransitionRun"),Es(bW,"onTransitionStart"),Es(xW,"onTransitionCancel"),Es(xN,"onTransitionEnd"),Et("onMouseEnter",["mouseout","mouseover"]),Et("onMouseLeave",["mouseout","mouseover"]),Et("onPointerEnter",["pointerout","pointerover"]),Et("onPointerLeave",["pointerout","pointerover"]),bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kf));function VO(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],x=g.event;g=g.listeners;e:{var _=void 0;if(l)for(var L=g.length-1;0<=L;L--){var H=g[L],ie=H.instance,xe=H.currentTarget;if(H=H.listener,ie!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=xe;try{_(x)}catch(Ce){c1(Ce)}x.currentTarget=null,_=ie}else for(L=0;L<g.length;L++){if(H=g[L],ie=H.instance,xe=H.currentTarget,H=H.listener,ie!==_&&x.isPropagationStopped())break e;_=H,x.currentTarget=xe;try{_(x)}catch(Ce){c1(Ce)}x.currentTarget=null,_=ie}}}}function Xt(o,l){var h=l[ra];h===void 0&&(h=l[ra]=new Set);var g=o+"__bubble";h.has(g)||($O(l,o,2,!1),h.add(g))}function aw(o,l,h){var g=0;l&&(g|=4),$O(h,o,g,l)}var X1="_reactListening"+Math.random().toString(36).slice(2);function sw(o){if(!o[X1]){o[X1]=!0,ze.forEach(function(h){h!=="selectionchange"&&(nX.has(h)||aw(h,!1,o),aw(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[X1]||(l[X1]=!0,aw("selectionchange",!1,l))}}function $O(o,l,h,g){switch(yk(l)){case 2:var x=jX;break;case 8:x=IX;break;default:x=ww}h=x.bind(null,l,h,o),x=void 0,!pf||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function ow(o,l,h,g,x){var _=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var L=g.tag;if(L===3||L===4){var H=g.stateNode.containerInfo;if(H===x)break;if(L===4)for(L=g.return;L!==null;){var ie=L.tag;if((ie===3||ie===4)&&L.stateNode.containerInfo===x)return;L=L.return}for(;H!==null;){if(L=le(H),L===null)return;if(ie=L.tag,ie===5||ie===6||ie===26||ie===27){g=_=L;continue e}H=H.parentNode}}g=g.return}Kg(function(){var xe=_,Ce=G0(h),Pe=[];e:{var _e=wN.get(o);if(_e!==void 0){var Te=hu,ft=o;switch(o){case"keypress":if(du(h)===0)break e;case"keydown":case"keyup":Te=r1;break;case"focusin":ft="focus",Te=ql;break;case"focusout":ft="blur",Te=ql;break;case"beforeblur":case"afterblur":Te=ql;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Qg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=i1;break;case yN:case vN:case bN:Te=X0;break;case xN:Te=Q0;break;case"scroll":case"scrollend":Te=Wg;break;case"wheel":Te=s1;break;case"copy":case"cut":case"paste":Te=Zg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=xf;break;case"toggle":case"beforetoggle":Te=Gl}var At=(l&4)!==0,Ar=!At&&(o==="scroll"||o==="scrollend"),me=At?_e!==null?_e+"Capture":null:_e;At=[];for(var ue=xe,ve;ue!==null;){var Re=ue;if(ve=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ve===null||me===null||(Re=aa(ue,me),Re!=null&&At.push(Wf(ue,Re,ve))),Ar)break;ue=ue.return}0<At.length&&(_e=new Te(_e,ft,null,h,Ce),Pe.push({event:_e,listeners:At}))}}if((l&7)===0){e:{if(_e=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",_e&&h!==H0&&(ft=h.relatedTarget||h.fromElement)&&(le(ft)||ft[an]))break e;if((Te||_e)&&(_e=Ce.window===Ce?Ce:(_e=Ce.ownerDocument)?_e.defaultView||_e.parentWindow:window,Te?(ft=h.relatedTarget||h.toElement,Te=xe,ft=ft?le(ft):null,ft!==null&&(Ar=a(ft),At=ft.tag,ft!==Ar||At!==5&&At!==27&&At!==6)&&(ft=null)):(Te=null,ft=xe),Te!==ft)){if(At=Xg,Re="onMouseLeave",me="onMouseEnter",ue="mouse",(o==="pointerout"||o==="pointerover")&&(At=xf,Re="onPointerLeave",me="onPointerEnter",ue="pointer"),Ar=Te==null?_e:Qe(Te),ve=ft==null?_e:Qe(ft),_e=new At(Re,ue+"leave",Te,h,Ce),_e.target=Ar,_e.relatedTarget=ve,Re=null,le(Ce)===xe&&(At=new At(me,ue+"enter",ft,h,Ce),At.target=ve,At.relatedTarget=Ar,Re=At),Ar=Re,Te&&ft)t:{for(At=iX,me=Te,ue=ft,ve=0,Re=me;Re;Re=At(Re))ve++;Re=0;for(var xt=ue;xt;xt=At(xt))Re++;for(;0<ve-Re;)me=At(me),ve--;for(;0<Re-ve;)ue=At(ue),Re--;for(;ve--;){if(me===ue||ue!==null&&me===ue.alternate){At=me;break t}me=At(me),ue=At(ue)}At=null}else At=null;Te!==null&&FO(Pe,_e,Te,At,!1),ft!==null&&Ar!==null&&FO(Pe,Ar,ft,At,!0)}}e:{if(_e=xe?Qe(xe):window,Te=_e.nodeName&&_e.nodeName.toLowerCase(),Te==="select"||Te==="input"&&_e.type==="file")var or=sN;else if(sa(_e))if(oN)or=pW;else{or=fW;var gt=hW}else Te=_e.nodeName,!Te||Te.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?xe&&ff(xe.elementType)&&(or=sN):or=mW;if(or&&(or=or(o,xe))){gu(Pe,or,h,Ce);break e}gt&&gt(o,_e,xe),o==="focusout"&&xe&&_e.type==="number"&&xe.memoizedProps.value!=null&&q0(_e,"number",_e.value)}switch(gt=xe?Qe(xe):window,o){case"focusin":(sa(gt)||gt.contentEditable==="true")&&(Y0=gt,D2=xe,Sf=null);break;case"focusout":Sf=D2=Y0=null;break;case"mousedown":L2=!0;break;case"contextmenu":case"mouseup":case"dragend":L2=!1,pN(Pe,h,Ce);break;case"selectionchange":if(yW)break;case"keydown":case"keyup":pN(Pe,h,Ce)}var Ut;if(j)e:{switch(o){case"compositionstart":var Zt="onCompositionStart";break e;case"compositionend":Zt="onCompositionEnd";break e;case"compositionupdate":Zt="onCompositionUpdate";break e}Zt=void 0}else qt?gr(o,h)&&(Zt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Zt="onCompositionStart");Zt&&(ye&&h.locale!=="ko"&&(qt||Zt!=="onCompositionStart"?Zt==="onCompositionEnd"&&qt&&(Ut=zl()):(Ta=Ce,K0="value"in Ta?Ta.value:Ta.textContent,qt=!0)),gt=Q1(xe,Zt),0<gt.length&&(Zt=new yf(Zt,o,null,h,Ce),Pe.push({event:Zt,listeners:gt}),Ut?Zt.data=Ut:(Ut=Rn(h),Ut!==null&&(Zt.data=Ut)))),(Ut=W?ri(o,h):ni(o,h))&&(Zt=Q1(xe,"onBeforeInput"),0<Zt.length&&(gt=new yf("onBeforeInput","beforeinput",null,h,Ce),Pe.push({event:gt,listeners:Zt}),gt.data=Ut)),eX(Pe,o,xe,h,Ce)}VO(Pe,l)})}function Wf(o,l,h){return{instance:o,listener:l,currentTarget:h}}function Q1(o,l){for(var h=l+"Capture",g=[];o!==null;){var x=o,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=aa(o,h),x!=null&&g.unshift(Wf(o,x,_)),x=aa(o,l),x!=null&&g.push(Wf(o,x,_))),o.tag===3)return g;o=o.return}return[]}function iX(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function FO(o,l,h,g,x){for(var _=l._reactName,L=[];h!==null&&h!==g;){var H=h,ie=H.alternate,xe=H.stateNode;if(H=H.tag,ie!==null&&ie===g)break;H!==5&&H!==26&&H!==27||xe===null||(ie=xe,x?(xe=aa(h,_),xe!=null&&L.unshift(Wf(h,xe,ie))):x||(xe=aa(h,_),xe!=null&&L.push(Wf(h,xe,ie)))),h=h.return}L.length!==0&&o.push({event:l,listeners:L})}var aX=/\r\n?/g,sX=/\u0000|\uFFFD/g;function qO(o){return(typeof o=="string"?o:""+o).replace(aX,`
`).replace(sX,"")}function HO(o,l){return l=qO(l),qO(o)===l}function Tr(o,l,h,g,x,_){switch(h){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||Wa(o,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&Wa(o,""+g);break;case"className":Ys(o,"class",g);break;case"tabIndex":Ys(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Ys(o,h,g);break;case"style":Hg(o,g,_);break;case"data":if(l!=="object"){Ys(o,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Zs(""+g),o.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(l!=="input"&&Tr(o,l,"name",x.name,x,null),Tr(o,l,"formEncType",x.formEncType,x,null),Tr(o,l,"formMethod",x.formMethod,x,null),Tr(o,l,"formTarget",x.formTarget,x,null)):(Tr(o,l,"encType",x.encType,x,null),Tr(o,l,"method",x.method,x,null),Tr(o,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(h);break}g=Zs(""+g),o.setAttribute(h,g);break;case"onClick":g!=null&&(o.onclick=ti);break;case"onScroll":g!=null&&Xt("scroll",o);break;case"onScrollEnd":g!=null&&Xt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}h=Zs(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""+g):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":g===!0?o.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(h,g):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(h,g):o.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(h):o.setAttribute(h,g);break;case"popover":Xt("beforetoggle",o),Xt("toggle",o),Qs(o,"popover",g);break;case"xlinkActuate":ia(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":ia(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":ia(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":ia(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":ia(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":ia(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":ia(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":ia(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":ia(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Qs(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=C2.get(h)||h,Qs(o,h,g))}}function lw(o,l,h,g,x,_){switch(h){case"style":Hg(o,g,_);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(x.children!=null)throw Error(n(60));o.innerHTML=h}}break;case"children":typeof g=="string"?Wa(o,g):(typeof g=="number"||typeof g=="bigint")&&Wa(o,""+g);break;case"onScroll":g!=null&&Xt("scroll",o);break;case"onScrollEnd":g!=null&&Xt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!st.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),l=h.slice(2,x?h.length-7:void 0),_=o[Ur]||null,_=_!=null?_[h]:null,typeof _=="function"&&o.removeEventListener(l,_,x),typeof g=="function")){typeof _!="function"&&_!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,g,x);break e}h in o?o[h]=g:g===!0?o.setAttribute(h,""):Qs(o,h,g)}}}function mi(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xt("error",o),Xt("load",o);var g=!1,x=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var L=h[_];if(L!=null)switch(_){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Tr(o,l,_,L,h,null)}}x&&Tr(o,l,"srcSet",h.srcSet,h,null),g&&Tr(o,l,"src",h.src,h,null);return;case"input":Xt("invalid",o);var H=_=L=x=null,ie=null,xe=null;for(g in h)if(h.hasOwnProperty(g)){var Ce=h[g];if(Ce!=null)switch(g){case"name":x=Ce;break;case"type":L=Ce;break;case"checked":ie=Ce;break;case"defaultChecked":xe=Ce;break;case"value":_=Ce;break;case"defaultValue":H=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(n(137,l));break;default:Tr(o,l,g,Ce,h,null)}}cu(o,_,H,ie,xe,L,x,!1);return;case"select":Xt("invalid",o),g=L=_=null;for(x in h)if(h.hasOwnProperty(x)&&(H=h[x],H!=null))switch(x){case"value":_=H;break;case"defaultValue":L=H;break;case"multiple":g=H;default:Tr(o,l,x,H,h,null)}l=_,h=L,o.multiple=!!g,l!=null?sr(o,!!g,l,!1):h!=null&&sr(o,!!g,h,!0);return;case"textarea":Xt("invalid",o),_=x=g=null;for(L in h)if(h.hasOwnProperty(L)&&(H=h[L],H!=null))switch(L){case"value":g=H;break;case"defaultValue":x=H;break;case"children":_=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(n(91));break;default:Tr(o,l,L,H,h,null)}Ul(o,g,x,_);return;case"option":for(ie in h)if(h.hasOwnProperty(ie)&&(g=h[ie],g!=null))switch(ie){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Tr(o,l,ie,g,h,null)}return;case"dialog":Xt("beforetoggle",o),Xt("toggle",o),Xt("cancel",o),Xt("close",o);break;case"iframe":case"object":Xt("load",o);break;case"video":case"audio":for(g=0;g<Kf.length;g++)Xt(Kf[g],o);break;case"image":Xt("error",o),Xt("load",o);break;case"details":Xt("toggle",o);break;case"embed":case"source":case"link":Xt("error",o),Xt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in h)if(h.hasOwnProperty(xe)&&(g=h[xe],g!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Tr(o,l,xe,g,h,null)}return;default:if(ff(l)){for(Ce in h)h.hasOwnProperty(Ce)&&(g=h[Ce],g!==void 0&&lw(o,l,Ce,g,h,void 0));return}}for(H in h)h.hasOwnProperty(H)&&(g=h[H],g!=null&&Tr(o,l,H,g,h,null))}function oX(o,l,h,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,L=null,H=null,ie=null,xe=null,Ce=null;for(Te in h){var Pe=h[Te];if(h.hasOwnProperty(Te)&&Pe!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":ie=Pe;default:g.hasOwnProperty(Te)||Tr(o,l,Te,null,g,Pe)}}for(var _e in g){var Te=g[_e];if(Pe=h[_e],g.hasOwnProperty(_e)&&(Te!=null||Pe!=null))switch(_e){case"type":_=Te;break;case"name":x=Te;break;case"checked":xe=Te;break;case"defaultChecked":Ce=Te;break;case"value":L=Te;break;case"defaultValue":H=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(n(137,l));break;default:Te!==Pe&&Tr(o,l,_e,Te,g,Pe)}}Bl(o,L,H,ie,xe,Ce,_,x);return;case"select":Te=L=H=_e=null;for(_ in h)if(ie=h[_],h.hasOwnProperty(_)&&ie!=null)switch(_){case"value":break;case"multiple":Te=ie;default:g.hasOwnProperty(_)||Tr(o,l,_,null,g,ie)}for(x in g)if(_=g[x],ie=h[x],g.hasOwnProperty(x)&&(_!=null||ie!=null))switch(x){case"value":_e=_;break;case"defaultValue":H=_;break;case"multiple":L=_;default:_!==ie&&Tr(o,l,x,_,g,ie)}l=H,h=L,g=Te,_e!=null?sr(o,!!h,_e,!1):!!g!=!!h&&(l!=null?sr(o,!!h,l,!0):sr(o,!!h,h?[]:"",!1));return;case"textarea":Te=_e=null;for(H in h)if(x=h[H],h.hasOwnProperty(H)&&x!=null&&!g.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Tr(o,l,H,null,g,x)}for(L in g)if(x=g[L],_=h[L],g.hasOwnProperty(L)&&(x!=null||_!=null))switch(L){case"value":_e=x;break;case"defaultValue":Te=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==_&&Tr(o,l,L,x,g,_)}uu(o,_e,Te);return;case"option":for(var ft in h)if(_e=h[ft],h.hasOwnProperty(ft)&&_e!=null&&!g.hasOwnProperty(ft))switch(ft){case"selected":o.selected=!1;break;default:Tr(o,l,ft,null,g,_e)}for(ie in g)if(_e=g[ie],Te=h[ie],g.hasOwnProperty(ie)&&_e!==Te&&(_e!=null||Te!=null))switch(ie){case"selected":o.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Tr(o,l,ie,_e,g,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var At in h)_e=h[At],h.hasOwnProperty(At)&&_e!=null&&!g.hasOwnProperty(At)&&Tr(o,l,At,null,g,_e);for(xe in g)if(_e=g[xe],Te=h[xe],g.hasOwnProperty(xe)&&_e!==Te&&(_e!=null||Te!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,l));break;default:Tr(o,l,xe,_e,g,Te)}return;default:if(ff(l)){for(var Ar in h)_e=h[Ar],h.hasOwnProperty(Ar)&&_e!==void 0&&!g.hasOwnProperty(Ar)&&lw(o,l,Ar,void 0,g,_e);for(Ce in g)_e=g[Ce],Te=h[Ce],!g.hasOwnProperty(Ce)||_e===Te||_e===void 0&&Te===void 0||lw(o,l,Ce,_e,g,Te);return}}for(var me in h)_e=h[me],h.hasOwnProperty(me)&&_e!=null&&!g.hasOwnProperty(me)&&Tr(o,l,me,null,g,_e);for(Pe in g)_e=g[Pe],Te=h[Pe],!g.hasOwnProperty(Pe)||_e===Te||_e==null&&Te==null||Tr(o,l,Pe,_e,g,Te)}function GO(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lX(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var x=h[g],_=x.transferSize,L=x.initiatorType,H=x.duration;if(_&&H&&GO(L)){for(L=0,H=x.responseEnd,g+=1;g<h.length;g++){var ie=h[g],xe=ie.startTime;if(xe>H)break;var Ce=ie.transferSize,Pe=ie.initiatorType;Ce&&GO(Pe)&&(ie=ie.responseEnd,L+=Ce*(ie<H?1:(H-xe)/(ie-xe)))}if(--g,l+=8*(_+L)/(x.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var cw=null,uw=null;function Y1(o){return o.nodeType===9?o:o.ownerDocument}function KO(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WO(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function dw(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var hw=null;function cX(){var o=window.event;return o&&o.type==="popstate"?o===hw?!1:(hw=o,!0):(hw=null,!1)}var XO=typeof setTimeout=="function"?setTimeout:void 0,uX=typeof clearTimeout=="function"?clearTimeout:void 0,QO=typeof Promise=="function"?Promise:void 0,dX=typeof queueMicrotask=="function"?queueMicrotask:typeof QO<"u"?function(o){return QO.resolve(null).then(o).catch(hX)}:XO;function hX(o){setTimeout(function(){throw o})}function uc(o){return o==="head"}function YO(o,l){var h=l,g=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(g===0){o.removeChild(x),Td(l);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")Xf(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,Xf(h);for(var _=h.firstChild;_;){var L=_.nextSibling,H=_.nodeName;_[na]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&_.rel.toLowerCase()==="stylesheet"||h.removeChild(_),_=L}}else h==="body"&&Xf(o.ownerDocument.body);h=x}while(h);Td(l)}function ZO(o,l){var h=o;o=0;do{var g=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=g}while(h)}function fw(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":fw(h),ut(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function fX(o,l,h,g){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[na])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(_=o.getAttribute("rel"),_==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(_!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(_=o.getAttribute("src"),(_!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===_)return o}else return o;if(o=ts(o.nextSibling),o===null)break}return null}function mX(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=ts(o.nextSibling),o===null))return null;return o}function JO(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=ts(o.nextSibling),o===null))return null;return o}function mw(o){return o.data==="$?"||o.data==="$~"}function pw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function pX(o,l){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||h.readyState!=="loading")l();else{var g=function(){l(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function ts(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var gw=null;function ek(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(l===0)return ts(o.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}o=o.nextSibling}return null}function tk(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return o;l--}else h!=="/$"&&h!=="/&"||l++}o=o.previousSibling}return null}function rk(o,l,h){switch(l=Y1(h),o){case"html":if(o=l.documentElement,!o)throw Error(n(452));return o;case"head":if(o=l.head,!o)throw Error(n(453));return o;case"body":if(o=l.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function Xf(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);ut(o)}var rs=new Map,nk=new Set;function Z1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xo=Z.d;Z.d={f:gX,r:yX,D:vX,C:bX,L:xX,m:wX,X:SX,S:_X,M:TX};function gX(){var o=Xo.f(),l=F1();return o||l}function yX(o){var l=Le(o);l!==null&&l.tag===5&&l.type==="form"?x9(l):Xo.r(o)}var wd=typeof document>"u"?null:document;function ik(o,l,h){var g=wd;if(g&&typeof l=="string"&&l){var x=hn(l);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),nk.has(x)||(nk.add(x),o={rel:o,crossOrigin:h,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),mi(l,"link",o),Se(l),g.head.appendChild(l)))}}function vX(o){Xo.D(o),ik("dns-prefetch",o,null)}function bX(o,l){Xo.C(o,l),ik("preconnect",o,l)}function xX(o,l,h){Xo.L(o,l,h);var g=wd;if(g&&o&&l){var x='link[rel="preload"][as="'+hn(l)+'"]';l==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+hn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+hn(h.imageSizes)+'"]')):x+='[href="'+hn(o)+'"]';var _=x;switch(l){case"style":_=_d(o);break;case"script":_=Sd(o)}rs.has(_)||(o=p({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),rs.set(_,o),g.querySelector(x)!==null||l==="style"&&g.querySelector(Qf(_))||l==="script"&&g.querySelector(Yf(_))||(l=g.createElement("link"),mi(l,"link",o),Se(l),g.head.appendChild(l)))}}function wX(o,l){Xo.m(o,l);var h=wd;if(h&&o){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+hn(g)+'"][href="'+hn(o)+'"]',_=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Sd(o)}if(!rs.has(_)&&(o=p({rel:"modulepreload",href:o},l),rs.set(_,o),h.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Yf(_)))return}g=h.createElement("link"),mi(g,"link",o),Se(g),h.head.appendChild(g)}}}function _X(o,l,h){Xo.S(o,l,h);var g=wd;if(g&&o){var x=oe(g).hoistableStyles,_=_d(o);l=l||"default";var L=x.get(_);if(!L){var H={loading:0,preload:null};if(L=g.querySelector(Qf(_)))H.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":l},h),(h=rs.get(_))&&yw(o,h);var ie=L=g.createElement("link");Se(ie),mi(ie,"link",o),ie._p=new Promise(function(xe,Ce){ie.onload=xe,ie.onerror=Ce}),ie.addEventListener("load",function(){H.loading|=1}),ie.addEventListener("error",function(){H.loading|=2}),H.loading|=4,J1(L,l,g)}L={type:"stylesheet",instance:L,count:1,state:H},x.set(_,L)}}}function SX(o,l){Xo.X(o,l);var h=wd;if(h&&o){var g=oe(h).hoistableScripts,x=Sd(o),_=g.get(x);_||(_=h.querySelector(Yf(x)),_||(o=p({src:o,async:!0},l),(l=rs.get(x))&&vw(o,l),_=h.createElement("script"),Se(_),mi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function TX(o,l){Xo.M(o,l);var h=wd;if(h&&o){var g=oe(h).hoistableScripts,x=Sd(o),_=g.get(x);_||(_=h.querySelector(Yf(x)),_||(o=p({src:o,async:!0,type:"module"},l),(l=rs.get(x))&&vw(o,l),_=h.createElement("script"),Se(_),mi(_,"link",o),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},g.set(x,_))}}function ak(o,l,h,g){var x=(x=ke.current)?Z1(x):null;if(!x)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=_d(h.href),h=oe(x).hoistableStyles,g=h.get(l),g||(g={type:"style",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=_d(h.href);var _=oe(x).hoistableStyles,L=_.get(o);if(L||(x=x.ownerDocument||x,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(o,L),(_=x.querySelector(Qf(o)))&&!_._p&&(L.instance=_,L.state.loading=5),rs.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},rs.set(o,h),_||AX(x,o,h,L.state))),l&&g===null)throw Error(n(528,""));return L}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Sd(h),h=oe(x).hoistableScripts,g=h.get(l),g||(g={type:"script",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function _d(o){return'href="'+hn(o)+'"'}function Qf(o){return'link[rel="stylesheet"]['+o+"]"}function sk(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function AX(o,l,h,g){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=o.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),mi(l,"link",h),Se(l),o.head.appendChild(l))}function Sd(o){return'[src="'+hn(o)+'"]'}function Yf(o){return"script[async]"+o}function ok(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var g=o.querySelector('style[data-href~="'+hn(h.href)+'"]');if(g)return l.instance=g,Se(g),g;var x=p({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Se(g),mi(g,"style",x),J1(g,h.precedence,o),l.instance=g;case"stylesheet":x=_d(h.href);var _=o.querySelector(Qf(x));if(_)return l.state.loading|=4,l.instance=_,Se(_),_;g=sk(h),(x=rs.get(x))&&yw(g,x),_=(o.ownerDocument||o).createElement("link"),Se(_);var L=_;return L._p=new Promise(function(H,ie){L.onload=H,L.onerror=ie}),mi(_,"link",g),l.state.loading|=4,J1(_,h.precedence,o),l.instance=_;case"script":return _=Sd(h.src),(x=o.querySelector(Yf(_)))?(l.instance=x,Se(x),x):(g=h,(x=rs.get(_))&&(g=p({},h),vw(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),Se(x),mi(x,"link",g),o.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,J1(g,h.precedence,o));return l.instance}function J1(o,l,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,_=x,L=0;L<g.length;L++){var H=g[L];if(H.dataset.precedence===l)_=H;else if(_!==x)break}_?_.parentNode.insertBefore(o,_.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function yw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function vw(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var ey=null;function lk(o,l,h){if(ey===null){var g=new Map,x=ey=new Map;x.set(h,g)}else x=ey,g=x.get(h),g||(g=new Map,x.set(h,g));if(g.has(o))return g;for(g.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var _=h[x];if(!(_[na]||_[br]||o==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var L=_.getAttribute(l)||"";L=o+L;var H=g.get(L);H?H.push(_):g.set(L,[_])}}return g}function ck(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function EX(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function uk(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function NX(o,l,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=_d(g.href),_=l.querySelector(Qf(x));if(_){l=_._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=ty.bind(o),l.then(o,o)),h.state.loading|=4,h.instance=_,Se(_);return}_=l.ownerDocument||l,g=sk(g),(x=rs.get(x))&&yw(g,x),_=_.createElement("link"),Se(_);var L=_;L._p=new Promise(function(H,ie){L.onload=H,L.onerror=ie}),mi(_,"link",g),h.instance=_}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=ty.bind(o),l.addEventListener("load",h),l.addEventListener("error",h))}}var bw=0;function OX(o,l){return o.stylesheets&&o.count===0&&ny(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var g=setTimeout(function(){if(o.stylesheets&&ny(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4+l);0<o.imgBytes&&bw===0&&(bw=62500*lX());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&ny(o,o.stylesheets),o.unsuspend)){var _=o.unsuspend;o.unsuspend=null,_()}},(o.imgBytes>bw?50:800)+l);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function ty(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ny(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var ry=null;function ny(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,ry=new Map,l.forEach(kX,o),ry=null,ty.call(o))}function kX(o,l){if(!(l.state.loading&4)){var h=ry.get(o);if(h)var g=h.get(null);else{h=new Map,ry.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var L=x[_];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(h.set(L.dataset.precedence,L),g=L)}g&&h.set(null,g)}x=l.instance,L=x.getAttribute("data-precedence"),_=h.get(L)||g,_===g&&h.set(null,x),h.set(L,x),this.count++,g=ty.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),_?_.parentNode.insertBefore(x,_.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),l.state.loading|=4}}var Zf={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function CX(o,l,h,g,x,_,L,H,ie){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function dk(o,l,h,g,x,_,L,H,ie,xe,Ce,Pe){return o=new CX(o,l,h,L,ie,xe,Ce,Pe,H),l=1,_===!0&&(l|=24),_=Ea(3,null,null,l),o.current=_,_.stateNode=o,l=Z2(),l.refCount++,o.pooledCache=l,l.refCount++,_.memoizedState={element:g,isDehydrated:h,cache:l},r4(_),o}function hk(o){return o?(o=ed,o):ed}function fk(o,l,h,g,x,_){x=hk(x),g.context===null?g.context=x:g.pendingContext=x,g=Jl(l),g.payload={element:h},_=_===void 0?null:_,_!==null&&(g.callback=_),h=ec(o,g,l),h!==null&&(da(h,o,l),Cf(h,o,l))}function mk(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function xw(o,l){mk(o,l),(o=o.alternate)&&mk(o,l)}function pk(o){if(o.tag===13||o.tag===31){var l=bu(o,67108864);l!==null&&da(l,o,67108864),xw(o,67108864)}}function gk(o){if(o.tag===13||o.tag===31){var l=ja();l=Gs(l);var h=bu(o,l);h!==null&&da(h,o,l),xw(o,l)}}var iy=!0;function jX(o,l,h,g){var x=K.T;K.T=null;var _=Z.p;try{Z.p=2,ww(o,l,h,g)}finally{Z.p=_,K.T=x}}function IX(o,l,h,g){var x=K.T;K.T=null;var _=Z.p;try{Z.p=8,ww(o,l,h,g)}finally{Z.p=_,K.T=x}}function ww(o,l,h,g){if(iy){var x=_w(g);if(x===null)ow(o,l,g,ay,h),vk(o,g);else if(MX(x,o,l,h,g))g.stopPropagation();else if(vk(o,g),l&4&&-1<RX.indexOf(o)){for(;x!==null;){var _=Le(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var L=Bi(_.pendingLanes);if(L!==0){var H=_;for(H.pendingLanes|=2,H.entangledLanes|=2;L;){var ie=1<<31-pr(L);H.entanglements[1]|=ie,L&=~ie}io(_),(fr&6)===0&&(V1=Tt()+500,Gf(0))}}break;case 31:case 13:H=bu(_,2),H!==null&&da(H,_,2),F1(),xw(_,2)}if(_=_w(g),_===null&&ow(o,l,g,ay,h),_===x)break;x=_}x!==null&&g.stopPropagation()}else ow(o,l,g,null,h)}}function _w(o){return o=G0(o),Sw(o)}var ay=null;function Sw(o){if(ay=null,o=le(o),o!==null){var l=a(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=s(l),o!==null)return o;o=null}else if(h===31){if(o=c(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return ay=o,null}function yk(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kt()){case Qt:return 2;case Ot:return 8;case Ft:case Yr:return 32;case Br:return 268435456;default:return 32}default:return 32}}var Tw=!1,dc=null,hc=null,fc=null,Jf=new Map,em=new Map,mc=[],RX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vk(o,l){switch(o){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":hc=null;break;case"mouseover":case"mouseout":fc=null;break;case"pointerover":case"pointerout":Jf.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":em.delete(l.pointerId)}}function tm(o,l,h,g,x,_){return o===null||o.nativeEvent!==_?(o={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[x]},l!==null&&(l=Le(l),l!==null&&pk(l)),o):(o.eventSystemFlags|=g,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function MX(o,l,h,g,x){switch(l){case"focusin":return dc=tm(dc,o,l,h,g,x),!0;case"dragenter":return hc=tm(hc,o,l,h,g,x),!0;case"mouseover":return fc=tm(fc,o,l,h,g,x),!0;case"pointerover":var _=x.pointerId;return Jf.set(_,tm(Jf.get(_)||null,o,l,h,g,x)),!0;case"gotpointercapture":return _=x.pointerId,em.set(_,tm(em.get(_)||null,o,l,h,g,x)),!0}return!1}function bk(o){var l=le(o.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=s(h),l!==null){o.blockedOn=l,Ks(o.priority,function(){gk(h)});return}}else if(l===31){if(l=c(h),l!==null){o.blockedOn=l,Ks(o.priority,function(){gk(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function sy(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=_w(o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);H0=g,h.target.dispatchEvent(g),H0=null}else return l=Le(h),l!==null&&pk(l),o.blockedOn=h,!1;l.shift()}return!0}function xk(o,l,h){sy(o)&&h.delete(l)}function PX(){Tw=!1,dc!==null&&sy(dc)&&(dc=null),hc!==null&&sy(hc)&&(hc=null),fc!==null&&sy(fc)&&(fc=null),Jf.forEach(xk),em.forEach(xk)}function oy(o,l){o.blockedOn===l&&(o.blockedOn=null,Tw||(Tw=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,PX)))}var ly=null;function wk(o){ly!==o&&(ly=o,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ly===o&&(ly=null);for(var l=0;l<o.length;l+=3){var h=o[l],g=o[l+1],x=o[l+2];if(typeof g!="function"){if(Sw(g||h)===null)continue;break}var _=Le(h);_!==null&&(o.splice(l,3),l-=3,_4(_,{pending:!0,data:x,method:h.method,action:g},g,x))}}))}function Td(o){function l(ie){return oy(ie,o)}dc!==null&&oy(dc,o),hc!==null&&oy(hc,o),fc!==null&&oy(fc,o),Jf.forEach(l),em.forEach(l);for(var h=0;h<mc.length;h++){var g=mc[h];g.blockedOn===o&&(g.blockedOn=null)}for(;0<mc.length&&(h=mc[0],h.blockedOn===null);)bk(h),h.blockedOn===null&&mc.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var x=h[g],_=h[g+1],L=x[Ur]||null;if(typeof _=="function")L||wk(h);else if(L){var H=null;if(_&&_.hasAttribute("formAction")){if(x=_,L=_[Ur]||null)H=L.formAction;else if(Sw(x)!==null)continue}else H=L.action;typeof H=="function"?h[g+1]=H:(h.splice(g,3),g-=3),wk(h)}}}function _k(){function o(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(L){return x=L})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function Aw(o){this._internalRoot=o}cy.prototype.render=Aw.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(n(409));var h=l.current,g=ja();fk(h,g,o,l,null,null)},cy.prototype.unmount=Aw.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;fk(o.current,2,null,o,null,null),F1(),l[an]=null}};function cy(o){this._internalRoot=o}cy.prototype.unstable_scheduleHydration=function(o){if(o){var l=ui();o={blockedOn:null,target:o,priority:l};for(var h=0;h<mc.length&&l!==0&&l<mc[h].priority;h++);mc.splice(h,0,o),h===0&&bk(o)}};var Sk=e.version;if(Sk!=="19.2.4")throw Error(n(527,Sk,"19.2.4"));Z.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=f(l),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var DX={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uy.isDisabled&&uy.supportsFiber)try{jn=uy.inject(DX),Ir=uy}catch{}}return nm.createRoot=function(o,l){if(!i(o))throw Error(n(299));var h=!1,g="",x=C9,_=j9,L=I9;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError)),l=dk(o,1,!1,null,null,h,g,null,x,_,L,_k),o[an]=l.current,sw(o),new Aw(l)},nm.hydrateRoot=function(o,l,h){if(!i(o))throw Error(n(299));var g=!1,x="",_=C9,L=j9,H=I9,ie=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(H=h.onRecoverableError),h.formState!==void 0&&(ie=h.formState)),l=dk(o,1,!0,l,h??null,g,x,ie,_,L,H,_k),l.context=hk(null),h=l.current,g=ja(),g=Gs(g),x=Jl(g),x.callback=null,ec(h,x,g),h=g,l.current.lanes=h,ta(l,h),io(l),o[an]=l.current,sw(o),new cy(l)},nm.version="19.2.4",nm}var Mk;function XX(){if(Mk)return Ow.exports;Mk=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ow.exports=WX(),Ow.exports}var QX=XX();const YX=mr(QX);var Ii=(r=>(r.ADMIN="ADMIN",r.STUDENT="STUDENT",r))(Ii||{});const Nr={AP_PHYSICS:"AP Physics",HONORS_PHYSICS:"Honors Physics",FORENSICS:"Forensic Science",UNCATEGORIZED:"Uncategorized"};var Jo=(r=>(r.ACTIVE="ACTIVE",r.ARCHIVED="ARCHIVED",r.DRAFT="DRAFT",r))(Jo||{}),Pk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ZX=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=r[t++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=r[t++],s=r[t++],c=r[t++],d=((i&7)<<18|(a&63)<<12|(s&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(d>>10)),e[n++]=String.fromCharCode(56320+(d&1023))}else{const a=r[t++],s=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},YU={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const a=r[i],s=i+1<r.length,c=s?r[i+1]:0,d=i+2<r.length,f=d?r[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|f>>6,b=f&63;d||(b=64,s||(y=64)),n.push(t[m],t[p],t[y],t[b])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(QU(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ZX(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const a=t[r.charAt(i++)],c=i<r.length?t[r.charAt(i)]:0;++i;const f=i<r.length?t[r.charAt(i)]:64;++i;const p=i<r.length?t[r.charAt(i)]:64;if(++i,a==null||c==null||f==null||p==null)throw new JX;const y=a<<2|c>>4;if(n.push(y),f!==64){const b=c<<4&240|f>>2;if(n.push(b),p!==64){const T=f<<6&192|p;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class JX extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eQ=function(r){const e=QU(r);return YU.encodeByteArray(e,!0)},pv=function(r){return eQ(r).replace(/\./g,"")},ZU=function(r){try{return YU.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tQ(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ=()=>tQ().__FIREBASE_DEFAULTS__,nQ=()=>{if(typeof process>"u"||typeof Pk>"u")return;const r=Pk.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},iQ=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ZU(r[1]);return e&&JSON.parse(e)},tx=()=>{try{return rQ()||nQ()||iQ()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},JU=r=>{var e,t;return(t=(e=tx())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},ez=r=>{const e=JU(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},tz=()=>{var r;return(r=tx())===null||r===void 0?void 0:r.config},rz=r=>{var e;return(e=tx())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,a=r.sub||r.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},r);return[pv(JSON.stringify(t)),pv(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oQ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function lQ(){var r;const e=(r=tx())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cQ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uQ(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function dQ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hQ(){const r=Qn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function nz(){return!lQ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iz(){try{return typeof indexedDB=="object"}catch{return!1}}function fQ(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mQ="FirebaseError";class $s extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=mQ,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cg.prototype.create)}}class cg{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?pQ(a,n):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new $s(i,c,n)}}function pQ(r,e){return r.replace(gQ,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const gQ=/\{\$([^}]+)}/g;function yQ(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function nh(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const a=r[i],s=e[i];if(Dk(a)&&Dk(s)){if(!nh(a,s))return!1}else if(a!==s)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Dk(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function vQ(r,e){const t=new bQ(r,e);return t.subscribe.bind(t)}class bQ{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");xQ(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Iw),i.error===void 0&&(i.error=Iw),i.complete===void 0&&(i.complete=Iw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xQ(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Iw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(r){return r&&r._delegate?r._delegate:r}let bl=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new aQ;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SQ(e))try{this.getOrInitializeService({instanceIdentifier:Vu})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Vu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vu){return this.instances.has(e)}getOptions(e=Vu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);n===c&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:_Q(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vu){return this.component?this.component.multipleInstances?e:Vu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _Q(r){return r===Vu?void 0:r}function SQ(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wQ(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Jt||(Jt={}));const AQ={debug:Jt.DEBUG,verbose:Jt.VERBOSE,info:Jt.INFO,warn:Jt.WARN,error:Jt.ERROR,silent:Jt.SILENT},EQ=Jt.INFO,NQ={[Jt.DEBUG]:"log",[Jt.VERBOSE]:"log",[Jt.INFO]:"info",[Jt.WARN]:"warn",[Jt.ERROR]:"error"},OQ=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=NQ[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i7{constructor(e){this.name=e,this._logLevel=EQ,this._logHandler=OQ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Jt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AQ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Jt.DEBUG,...e),this._logHandler(this,Jt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Jt.VERBOSE,...e),this._logHandler(this,Jt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Jt.INFO,...e),this._logHandler(this,Jt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Jt.WARN,...e),this._logHandler(this,Jt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Jt.ERROR,...e),this._logHandler(this,Jt.ERROR,...e)}}const kQ=(r,e)=>e.some(t=>r instanceof t);let Lk,Bk;function CQ(){return Lk||(Lk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jQ(){return Bk||(Bk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const az=new WeakMap,RS=new WeakMap,sz=new WeakMap,Rw=new WeakMap,a7=new WeakMap;function IQ(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",a),r.removeEventListener("error",s)},a=()=>{t(Bc(r.result)),i()},s=()=>{n(r.error),i()};r.addEventListener("success",a),r.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&az.set(t,r)}).catch(()=>{}),a7.set(e,r),e}function RQ(r){if(RS.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",a),r.removeEventListener("error",s),r.removeEventListener("abort",s)},a=()=>{t(),i()},s=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",a),r.addEventListener("error",s),r.addEventListener("abort",s)});RS.set(r,e)}let MS={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return RS.get(r);if(e==="objectStoreNames")return r.objectStoreNames||sz.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bc(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function MQ(r){MS=r(MS)}function PQ(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Mw(this),e,...t);return sz.set(n,e.sort?e.sort():[e]),Bc(n)}:jQ().includes(r)?function(...e){return r.apply(Mw(this),e),Bc(az.get(this))}:function(...e){return Bc(r.apply(Mw(this),e))}}function DQ(r){return typeof r=="function"?PQ(r):(r instanceof IDBTransaction&&RQ(r),kQ(r,CQ())?new Proxy(r,MS):r)}function Bc(r){if(r instanceof IDBRequest)return IQ(r);if(Rw.has(r))return Rw.get(r);const e=DQ(r);return e!==r&&(Rw.set(r,e),a7.set(e,r)),e}const Mw=r=>a7.get(r);function LQ(r,e,{blocked:t,upgrade:n,blocking:i,terminated:a}={}){const s=indexedDB.open(r,e),c=Bc(s);return n&&s.addEventListener("upgradeneeded",d=>{n(Bc(s.result),d.oldVersion,d.newVersion,Bc(s.transaction),d)}),t&&s.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),c.then(d=>{a&&d.addEventListener("close",()=>a()),i&&d.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const BQ=["get","getKey","getAll","getAllKeys","count"],UQ=["put","add","delete","clear"],Pw=new Map;function Uk(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Pw.get(e))return Pw.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=UQ.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||BQ.includes(t)))return;const a=async function(s,...c){const d=this.transaction(s,i?"readwrite":"readonly");let f=d.store;return n&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),i&&d.done]))[0]};return Pw.set(e,a),a}MQ(r=>({...r,get:(e,t,n)=>Uk(e,t)||r.get(e,t,n),has:(e,t)=>!!Uk(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VQ(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function VQ(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const PS="@firebase/app",zk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new i7("@firebase/app"),$Q="@firebase/app-compat",FQ="@firebase/analytics-compat",qQ="@firebase/analytics",HQ="@firebase/app-check-compat",GQ="@firebase/app-check",KQ="@firebase/auth",WQ="@firebase/auth-compat",XQ="@firebase/database",QQ="@firebase/data-connect",YQ="@firebase/database-compat",ZQ="@firebase/functions",JQ="@firebase/functions-compat",eY="@firebase/installations",tY="@firebase/installations-compat",rY="@firebase/messaging",nY="@firebase/messaging-compat",iY="@firebase/performance",aY="@firebase/performance-compat",sY="@firebase/remote-config",oY="@firebase/remote-config-compat",lY="@firebase/storage",cY="@firebase/storage-compat",uY="@firebase/firestore",dY="@firebase/vertexai-preview",hY="@firebase/firestore-compat",fY="firebase",mY="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="[DEFAULT]",pY={[PS]:"fire-core",[$Q]:"fire-core-compat",[qQ]:"fire-analytics",[FQ]:"fire-analytics-compat",[GQ]:"fire-app-check",[HQ]:"fire-app-check-compat",[KQ]:"fire-auth",[WQ]:"fire-auth-compat",[XQ]:"fire-rtdb",[QQ]:"fire-data-connect",[YQ]:"fire-rtdb-compat",[ZQ]:"fire-fn",[JQ]:"fire-fn-compat",[eY]:"fire-iid",[tY]:"fire-iid-compat",[rY]:"fire-fcm",[nY]:"fire-fcm-compat",[iY]:"fire-perf",[aY]:"fire-perf-compat",[sY]:"fire-rc",[oY]:"fire-rc-compat",[lY]:"fire-gcs",[cY]:"fire-gcs-compat",[uY]:"fire-fst",[hY]:"fire-fst-compat",[dY]:"fire-vertex","fire-js":"fire-js",[fY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map,gY=new Map,LS=new Map;function Vk(r,e){try{r.container.addComponent(e)}catch(t){xl.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function qc(r){const e=r.name;if(LS.has(e))return xl.debug(`There were multiple attempts to register component ${e}.`),!1;LS.set(e,r);for(const t of gv.values())Vk(t,r);for(const t of gY.values())Vk(t,r);return!0}function dg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function il(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uc=new cg("app","Firebase",yY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vY{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new bl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=mY;function oz(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:DS,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Uc.create("bad-app-name",{appName:String(i)});if(t||(t=tz()),!t)throw Uc.create("no-options");const a=gv.get(i);if(a){if(nh(t,a.options)&&nh(n,a.config))return a;throw Uc.create("duplicate-app",{appName:i})}const s=new TQ(i);for(const d of LS.values())s.addComponent(d);const c=new vY(t,n,s);return gv.set(i,c),c}function s7(r=DS){const e=gv.get(r);if(!e&&r===DS&&tz())return oz();if(!e)throw Uc.create("no-app",{appName:r});return e}function cs(r,e,t){var n;let i=(n=pY[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&c.push("and"),s&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xl.warn(c.join(" "));return}qc(new bl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY="firebase-heartbeat-database",xY=1,tp="firebase-heartbeat-store";let Dw=null;function lz(){return Dw||(Dw=LQ(bY,xY,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tp)}catch(t){console.warn(t)}}}}).catch(r=>{throw Uc.create("idb-open",{originalErrorMessage:r.message})})),Dw}async function wY(r){try{const t=(await lz()).transaction(tp),n=await t.objectStore(tp).get(cz(r));return await t.done,n}catch(e){if(e instanceof $s)xl.warn(e.message);else{const t=Uc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xl.warn(t.message)}}}async function $k(r,e){try{const n=(await lz()).transaction(tp,"readwrite");await n.objectStore(tp).put(e,cz(r)),await n.done}catch(t){if(t instanceof $s)xl.warn(t.message);else{const n=Uc.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xl.warn(n.message)}}}function cz(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=1024,SY=720*60*60*1e3;class TY{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EY(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Fk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const c=new Date(s.date).valueOf();return Date.now()-c<=SY}),this._storage.overwrite(this._heartbeatsCache))}catch(n){xl.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Fk(),{heartbeatsToSend:n,unsentEntries:i}=AY(this._heartbeatsCache.heartbeats),a=pv(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return xl.warn(t),""}}}function Fk(){return new Date().toISOString().substring(0,10)}function AY(r,e=_Y){const t=[];let n=r.slice();for(const i of r){const a=t.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),qk(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),qk(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class EY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iz()?fQ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wY(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $k(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return $k(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qk(r){return pv(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NY(r){qc(new bl("platform-logger",e=>new zQ(e),"PRIVATE")),qc(new bl("heartbeat",e=>new TY(e),"PRIVATE")),cs(PS,zk,r),cs(PS,zk,"esm2017"),cs("fire-js","")}NY("");var OY="firebase",kY="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs(OY,kY,"app");function o7(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function uz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CY=uz,dz=new cg("auth","Firebase",uz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=new i7("@firebase/auth");function jY(r,...e){yv.logLevel<=Jt.WARN&&yv.warn(`Auth (${j0}): ${r}`,...e)}function Qy(r,...e){yv.logLevel<=Jt.ERROR&&yv.error(`Auth (${j0}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(r,...e){throw c7(r,...e)}function Bs(r,...e){return c7(r,...e)}function l7(r,e,t){const n=Object.assign(Object.assign({},CY()),{[e]:t});return new cg("auth","Firebase",n).create(e,{appName:r.name})}function i0(r){return l7(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IY(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&yo(r,"argument-error"),l7(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function c7(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return dz.create(r,...e)}function Rt(r,e,...t){if(!r)throw c7(e,...t)}function al(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Qy(e),new Error(e)}function wl(r,e){r||al(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function RY(){return Hk()==="http:"||Hk()==="https:"}function Hk(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RY()||uQ()||"connection"in navigator)?navigator.onLine:!0}function PY(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.shortDelay=e,this.longDelay=t,wl(t>e,"Short delay should be less than long delay!"),this.isMobile=oQ()||dQ()}get(){return MY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u7(r,e){wl(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;al("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;al("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;al("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY=new hg(3e4,6e4);function d7(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Gh(r,e,t,n,i={}){return fz(r,i,async()=>{let a={},s={};n&&(e==="GET"?s=n:a={body:JSON.stringify(n)});const c=ug(Object.assign({key:r.config.apiKey},s)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f=Object.assign({method:e,headers:d},a);return cQ()||(f.referrerPolicy="no-referrer"),hz.fetch()(mz(r,r.config.apiHost,t,c),f)})}async function fz(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},DY),e);try{const i=new UY(r),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw hy(r,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const c=a.ok?s.errorMessage:s.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw hy(r,"credential-already-in-use",s);if(d==="EMAIL_EXISTS")throw hy(r,"email-already-in-use",s);if(d==="USER_DISABLED")throw hy(r,"user-disabled",s);const m=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw l7(r,m,f);yo(r,m)}}catch(i){if(i instanceof $s)throw i;yo(r,"network-request-failed",{message:String(i)})}}async function BY(r,e,t,n,i={}){const a=await Gh(r,e,t,n,i);return"mfaPendingCredential"in a&&yo(r,"multi-factor-auth-required",{_serverResponse:a}),a}function mz(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?u7(r.config,i):`${r.config.apiScheme}://${i}`}class UY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Bs(this.auth,"network-request-failed")),LY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hy(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Bs(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zY(r,e){return Gh(r,"POST","/v1/accounts:delete",e)}async function pz(r,e){return Gh(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VY(r,e=!1){const t=jr(r),n=await t.getIdToken(e),i=h7(n);Rt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Pm(Lw(i.auth_time)),issuedAtTime:Pm(Lw(i.iat)),expirationTime:Pm(Lw(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lw(r){return Number(r)*1e3}function h7(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Qy("JWT malformed, contained fewer than 3 sections"),null;try{const i=ZU(t);return i?JSON.parse(i):(Qy("Failed to decode base64 JWT payload"),null)}catch(i){return Qy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Gk(r){const e=h7(r);return Rt(e,"internal-error"),Rt(typeof e.exp<"u","internal-error"),Rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof $s&&$Y(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function $Y({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pm(this.lastLoginAt),this.creationTime=Pm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vv(r){var e;const t=r.auth,n=await r.getIdToken(),i=await rp(r,pz(t,{idToken:n}));Rt(i==null?void 0:i.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?gz(a.providerUserInfo):[],c=HY(r.providerData,s),d=r.isAnonymous,f=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new US(a.createdAt,a.lastLoginAt),isAnonymous:m};Object.assign(r,p)}async function qY(r){const e=jr(r);await vv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HY(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function gz(r){return r.map(e=>{var{providerId:t}=e,n=o7(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(r,e){const t=await fz(r,{},async()=>{const n=ug({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=r.config,s=mz(r,i,"/v1/token",`key=${a}`),c=await r._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",hz.fetch()(s,{method:"POST",headers:c,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KY(r,e){return Gh(r,"POST","/v2/accounts:revokeToken",d7(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Rt(e.idToken,"internal-error"),Rt(typeof e.idToken<"u","internal-error"),Rt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Rt(e.length!==0,"internal-error");const t=Gk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:a}=await GY(e,t);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:a}=t,s=new Hd;return n&&(Rt(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(Rt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Rt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hd,this.toJSON())}_performRefresh(){return al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(r,e){Rt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class sl{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,a=o7(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new US(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await rp(this,this.stsTokenManager.getToken(this.auth,e));return Rt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VY(this,e)}reload(){return qY(this)}_assign(e){this!==e&&(Rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vv(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(il(this.auth.app))return Promise.reject(i0(this.auth));const e=await this.getIdToken();return await rp(this,zY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,a,s,c,d,f,m;const p=(n=t.displayName)!==null&&n!==void 0?n:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,b=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,T=(s=t.photoURL)!==null&&s!==void 0?s:void 0,S=(c=t.tenantId)!==null&&c!==void 0?c:void 0,w=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,E=(f=t.createdAt)!==null&&f!==void 0?f:void 0,I=(m=t.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:B,isAnonymous:R,providerData:D,stsTokenManager:A}=t;Rt(C&&A,e,"internal-error");const k=Hd.fromJSON(this.name,A);Rt(typeof C=="string",e,"internal-error"),gc(p,e.name),gc(y,e.name),Rt(typeof B=="boolean",e,"internal-error"),Rt(typeof R=="boolean",e,"internal-error"),gc(b,e.name),gc(T,e.name),gc(S,e.name),gc(w,e.name),gc(E,e.name),gc(I,e.name);const N=new sl({uid:C,auth:e,email:y,emailVerified:B,displayName:p,isAnonymous:R,photoURL:T,phoneNumber:b,tenantId:S,stsTokenManager:k,createdAt:E,lastLoginAt:I});return D&&Array.isArray(D)&&(N.providerData=D.map(U=>Object.assign({},U))),w&&(N._redirectEventId=w),N}static async _fromIdTokenResponse(e,t,n=!1){const i=new Hd;i.updateFromServerResponse(t);const a=new sl({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await vv(a),a}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];Rt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?gz(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new Hd;c.updateFromIdToken(n);const d=new sl({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new US(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Map;function ol(r){wl(r instanceof Function,"Expected a class definition");let e=Kk.get(r);return e?(wl(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Kk.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yz.type="NONE";const Wk=yz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(r,e,t){return`firebase:${r}:${e}:${t}`}class Gd{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Yy(this.userKey,i.apiKey,a),this.fullPersistenceKey=Yy("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?sl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Gd(ol(Wk),e,n);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=i[0]||ol(Wk);const s=Yy(n,e.config.apiKey,e.name);let c=null;for(const f of t)try{const m=await f._get(s);if(m){const p=sl._fromJSON(e,m);f!==a&&(c=p),a=f;break}}catch{}const d=i.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!d.length?new Gd(a,e,n):(a=d[0],c&&await a._set(s,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(s)}catch{}})),new Gd(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sz(e))return"Blackberry";if(Tz(e))return"Webos";if(bz(e))return"Safari";if((e.includes("chrome/")||xz(e))&&!e.includes("edge/"))return"Chrome";if(_z(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function vz(r=Qn()){return/firefox\//i.test(r)}function bz(r=Qn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xz(r=Qn()){return/crios\//i.test(r)}function wz(r=Qn()){return/iemobile/i.test(r)}function _z(r=Qn()){return/android/i.test(r)}function Sz(r=Qn()){return/blackberry/i.test(r)}function Tz(r=Qn()){return/webos/i.test(r)}function f7(r=Qn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function WY(r=Qn()){var e;return f7(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XY(){return hQ()&&document.documentMode===10}function Az(r=Qn()){return f7(r)||_z(r)||Tz(r)||Sz(r)||/windows phone/i.test(r)||wz(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(r,e=[]){let t;switch(r){case"Browser":t=Xk(Qn());break;case"Worker":t=`${Xk(Qn())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${j0}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=a=>new Promise((s,c)=>{try{const d=e(a);s(d)}catch(d){c(d)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YY(r,e={}){return Gh(r,"GET","/v2/passwordPolicy",d7(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY=6;class JY{constructor(e){var t,n,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:ZY,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,a,s,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(n=d.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsUppercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(s=d.containsNumericCharacter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qk(this),this.idTokenSubscription=new Qk(this),this.beforeStateQueue=new QY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ol(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Gd.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pz(this,{idToken:e}),n=await sl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(il(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!s||s===c)&&(d!=null&&d.user)&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vv(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(il(this.app))return Promise.reject(i0(this));const t=e?jr(e):null;return t&&Rt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return il(this.app)?Promise.reject(i0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return il(this.app)?Promise.reject(i0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ol(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await YY(this),t=new JY(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cg("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await KY(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ol(e)||this._popupRedirectResolver;Rt(t,this,"argument-error"),this.redirectPersistenceManager=await Gd.create(this,[ol(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let s=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rt(c,this,"internal-error"),c.then(()=>{s||a(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,n,i);return()=>{s=!0,d()}}else{const d=e.addObserver(t);return()=>{s=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ez(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&jY(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rx(r){return jr(r)}class Qk{constructor(e){this.auth=e,this.observer=null,this.addObserver=vQ(t=>this.observer=t)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m7={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tZ(r){m7=r}function rZ(r){return m7.loadJS(r)}function nZ(){return m7.gapiScript}function iZ(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aZ(r,e){const t=dg(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(nh(a,e??{}))return i;yo(i,"already-initialized")}return t.initialize({options:e})}function sZ(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(ol);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function oZ(r,e,t){const n=rx(r);Rt(n._canInitEmulator,n,"emulator-config-failed"),Rt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Nz(e),{host:s,port:c}=lZ(e),d=c===null?"":`:${c}`;n.config.emulator={url:`${a}//${s}${d}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),cZ()}function Nz(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function lZ(r){const e=Nz(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Yk(n.substr(a.length+1))}}else{const[a,s]=n.split(":");return{host:a,port:Yk(s)}}}function Yk(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function cZ(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return al("not implemented")}_getIdTokenResponse(e){return al("not implemented")}_linkToIdToken(e,t){return al("not implemented")}_getReauthenticationResolver(e){return al("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kd(r,e){return BY(r,"POST","/v1/accounts:signInWithIdp",d7(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uZ="http://localhost";class u0 extends Oz{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new u0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,a=o7(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new u0(n,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return Kd(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Kd(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kd(e,t)}buildRequest(){const e={requestUri:uZ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ug(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends p7{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends fg{constructor(){super("facebook.com")}static credential(e){return u0._fromParams({providerId:Sc.PROVIDER_ID,signInMethod:Sc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sc.credentialFromTaggedObject(e)}static credentialFromError(e){return Sc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sc.credential(e.oauthAccessToken)}catch{return null}}}Sc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends fg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return u0._fromParams({providerId:rl.PROVIDER_ID,signInMethod:rl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return rl.credentialFromTaggedObject(e)}static credentialFromError(e){return rl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return rl.credential(t,n)}catch{return null}}}rl.GOOGLE_SIGN_IN_METHOD="google.com";rl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc extends fg{constructor(){super("github.com")}static credential(e){return u0._fromParams({providerId:Tc.PROVIDER_ID,signInMethod:Tc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tc.credentialFromTaggedObject(e)}static credentialFromError(e){return Tc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tc.credential(e.oauthAccessToken)}catch{return null}}}Tc.GITHUB_SIGN_IN_METHOD="github.com";Tc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends fg{constructor(){super("twitter.com")}static credential(e,t){return u0._fromParams({providerId:Ac.PROVIDER_ID,signInMethod:Ac.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ac.credentialFromTaggedObject(e)}static credentialFromError(e){return Ac.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ac.credential(t,n)}catch{return null}}}Ac.TWITTER_SIGN_IN_METHOD="twitter.com";Ac.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const a=await sl._fromIdTokenResponse(e,n,i),s=Zk(n);return new ih({user:a,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Zk(n);return new ih({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Zk(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends $s{constructor(e,t,n,i){var a;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,bv.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new bv(e,t,n,i)}}function kz(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bv._fromErrorAndOperation(r,a,e,n):a})}async function dZ(r,e,t=!1){const n=await rp(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return ih._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hZ(r,e,t=!1){const{auth:n}=r;if(il(n.app))return Promise.reject(i0(n));const i="reauthenticate";try{const a=await rp(r,kz(n,i,e,r),t);Rt(a.idToken,n,"internal-error");const s=h7(a.idToken);Rt(s,n,"internal-error");const{sub:c}=s;return Rt(r.uid===c,n,"user-mismatch"),ih._forOperation(r,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&yo(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fZ(r,e,t=!1){if(il(r.app))return Promise.reject(i0(r));const n="signIn",i=await kz(r,n,e),a=await ih._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(a.user),a}function mZ(r,e,t,n){return jr(r).onIdTokenChanged(e,t,n)}function pZ(r,e,t){return jr(r).beforeAuthStateChanged(e,t)}function gZ(r,e,t,n){return jr(r).onAuthStateChanged(e,t,n)}function yZ(r){return jr(r).signOut()}const xv="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xv,"1"),this.storage.removeItem(xv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vZ=1e3,bZ=10;class jz extends Cz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Az(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,c,d)=>{this.notifyListeners(s,d)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!t&&this.localCache[n]===s||this.notifyListeners(n,s)},a=this.storage.getItem(n);XY()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bZ):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},vZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jz.type="LOCAL";const xZ=jz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz extends Cz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Iz.type="SESSION";const Rz=Iz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wZ(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new nx(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:a}=t.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(s).map(async f=>f(t.origin,a)),d=await wZ(c);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g7(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((c,d)=>{const f=g7("",20);i.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(m),clearTimeout(a),d(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(){return window}function SZ(r){mo().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(){return typeof mo().WorkerGlobalScope<"u"&&typeof mo().importScripts=="function"}async function TZ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AZ(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function EZ(){return Mz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz="firebaseLocalStorageDb",NZ=1,wv="firebaseLocalStorage",Dz="fbase_key";class mg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ix(r,e){return r.transaction([wv],e?"readwrite":"readonly").objectStore(wv)}function OZ(){const r=indexedDB.deleteDatabase(Pz);return new mg(r).toPromise()}function zS(){const r=indexedDB.open(Pz,NZ);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(wv,{keyPath:Dz})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(wv)?e(n):(n.close(),await OZ(),e(await zS()))})})}async function Jk(r,e,t){const n=ix(r,!0).put({[Dz]:e,value:t});return new mg(n).toPromise()}async function kZ(r,e){const t=ix(r,!1).get(e),n=await new mg(t).toPromise();return n===void 0?null:n.value}function eC(r,e){const t=ix(r,!0).delete(e);return new mg(t).toPromise()}const CZ=800,jZ=3;class Lz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zS(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>jZ)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nx._getInstance(EZ()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await TZ(),!this.activeServiceWorker)return;this.sender=new _Z(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AZ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zS();return await Jk(e,xv,"1"),await eC(e,xv),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jk(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>kZ(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=ix(i,!1).getAll();return new mg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CZ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Lz.type="LOCAL";const IZ=Lz;new hg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(r,e){return e?ol(e):(Rt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7 extends Oz{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RZ(r){return fZ(r.auth,new y7(r),r.bypassAuthState)}function MZ(r){const{auth:e,user:t}=r;return Rt(t,e,"internal-error"),hZ(t,new y7(r),r.bypassAuthState)}async function PZ(r){const{auth:e,user:t}=r;return Rt(t,e,"internal-error"),dZ(t,new y7(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e,t,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:a,error:s,type:c}=e;if(s){this.reject(s);return}const d={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RZ;case"linkViaPopup":case"linkViaRedirect":return PZ;case"reauthViaPopup":case"reauthViaRedirect":return MZ;default:yo(this.auth,"internal-error")}}resolve(e){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DZ=new hg(2e3,1e4);async function LZ(r,e,t){if(il(r.app))return Promise.reject(Bs(r,"operation-not-supported-in-this-environment"));const n=rx(r);IY(r,e,p7);const i=Bz(n,t);return new Qu(n,"signInViaPopup",e,i).executeNotNull()}class Qu extends Uz{constructor(e,t,n,i,a){super(e,t,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Qu.currentPopupAction&&Qu.currentPopupAction.cancel(),Qu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Rt(e,this.auth,"internal-error"),e}async onExecution(){wl(this.filter.length===1,"Popup operations only handle one event");const e=g7();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Bs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Bs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Bs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DZ.get())};e()}}Qu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BZ="pendingRedirect",Zy=new Map;class UZ extends Uz{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Zy.get(this.auth._key());if(!e){try{const n=await zZ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Zy.set(this.auth._key(),e)}return this.bypassAuthState||Zy.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zZ(r,e){const t=FZ(e),n=$Z(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function VZ(r,e){Zy.set(r._key(),e)}function $Z(r){return ol(r._redirectPersistence)}function FZ(r){return Yy(BZ,r.config.apiKey,r.name)}async function qZ(r,e,t=!1){if(il(r.app))return Promise.reject(i0(r));const n=rx(r),i=Bz(n,e),s=await new UZ(n,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HZ=600*1e3;class GZ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KZ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zz(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Bs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HZ&&this.cachedEventUids.clear(),this.cachedEventUids.has(tC(e))}saveEventToCache(e){this.cachedEventUids.add(tC(e)),this.lastProcessedEventTime=Date.now()}}function tC(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function zz({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KZ(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zz(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WZ(r,e={}){return Gh(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XZ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QZ=/^https?/;async function YZ(r){if(r.config.emulator)return;const{authorizedDomains:e}=await WZ(r);for(const t of e)try{if(ZZ(t))return}catch{}yo(r,"unauthorized-domain")}function ZZ(r){const e=BS(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const s=new URL(r);return s.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===n}if(!QZ.test(t))return!1;if(XZ.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZ=new hg(3e4,6e4);function rC(){const r=mo().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function eJ(r){return new Promise((e,t)=>{var n,i,a;function s(){rC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rC(),t(Bs(r,"network-request-failed"))},timeout:JZ.get()})}if(!((i=(n=mo().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=mo().gapi)===null||a===void 0)&&a.load)s();else{const c=iZ("iframefcb");return mo()[c]=()=>{gapi.load?s():t(Bs(r,"network-request-failed"))},rZ(`${nZ()}?onload=${c}`).catch(d=>t(d))}}).catch(e=>{throw Jy=null,e})}let Jy=null;function tJ(r){return Jy=Jy||eJ(r),Jy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=new hg(5e3,15e3),nJ="__/auth/iframe",iJ="emulator/auth/iframe",aJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oJ(r){const e=r.config;Rt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?u7(e,iJ):`https://${r.config.authDomain}/${nJ}`,n={apiKey:e.apiKey,appName:r.name,v:j0},i=sJ.get(r.config.apiHost);i&&(n.eid=i);const a=r._getFrameworks();return a.length&&(n.fw=a.join(",")),`${t}?${ug(n).slice(1)}`}async function lJ(r){const e=await tJ(r),t=mo().gapi;return Rt(t,r,"internal-error"),e.open({where:document.body,url:oJ(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aJ,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const s=Bs(r,"network-request-failed"),c=mo().setTimeout(()=>{a(s)},rJ.get());function d(){mo().clearTimeout(c),i(n)}n.ping(d).then(d,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uJ=500,dJ=600,hJ="_blank",fJ="http://localhost";class nC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mJ(r,e,t,n=uJ,i=dJ){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const d=Object.assign(Object.assign({},cJ),{width:n.toString(),height:i.toString(),top:a,left:s}),f=Qn().toLowerCase();t&&(c=xz(f)?hJ:t),vz(f)&&(e=e||fJ,d.scrollbars="yes");const m=Object.entries(d).reduce((y,[b,T])=>`${y}${b}=${T},`,"");if(WY(f)&&c!=="_self")return pJ(e||"",c),new nC(null);const p=window.open(e||"",c,m);Rt(p,r,"popup-blocked");try{p.focus()}catch{}return new nC(p)}function pJ(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="__/auth/handler",yJ="emulator/auth/handler",vJ=encodeURIComponent("fac");async function iC(r,e,t,n,i,a){Rt(r.config.authDomain,r,"auth-domain-config-required"),Rt(r.config.apiKey,r,"invalid-api-key");const s={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:j0,eventId:i};if(e instanceof p7){e.setDefaultLanguage(r.languageCode),s.providerId=e.providerId||"",yQ(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))s[m]=p}if(e instanceof fg){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(s.scopes=m.join(","))}r.tenantId&&(s.tid=r.tenantId);const c=s;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await r._getAppCheckToken(),f=d?`#${vJ}=${encodeURIComponent(d)}`:"";return`${bJ(r)}?${ug(c).slice(1)}${f}`}function bJ({config:r}){return r.emulator?u7(r,yJ):`https://${r.authDomain}/${gJ}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="webStorageSupport";class xJ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Rz,this._completeRedirectFn=qZ,this._overrideRedirectResult=VZ}async _openPopup(e,t,n,i){var a;wl((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await iC(e,t,n,BS(),i);return mJ(e,s,g7())}async _openRedirect(e,t,n,i){await this._originValidation(e);const a=await iC(e,t,n,BS(),i);return SZ(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(wl(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await lJ(e),n=new GZ(e);return t.register("authEvent",i=>(Rt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bw,{type:Bw},i=>{var a;const s=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Bw];s!==void 0&&t(!!s),yo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YZ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Az()||bz()||f7()}}const wJ=xJ;var aC="@firebase/auth",sC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SJ(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TJ(r){qc(new bl("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=n.options;Rt(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:s,authDomain:c,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ez(r)},f=new eZ(n,i,a,d);return sZ(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),qc(new bl("auth-internal",e=>{const t=rx(e.getProvider("auth").getImmediate());return(n=>new _J(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cs(aC,sC,SJ(r)),cs(aC,sC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJ=300,EJ=rz("authIdTokenMaxAge")||AJ;let oC=null;const NJ=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>EJ)return;const i=t==null?void 0:t.token;oC!==i&&(oC=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Vz(r=s7()){const e=dg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=aZ(r,{popupRedirectResolver:wJ,persistence:[IZ,xZ,Rz]}),n=rz("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const s=NJ(a.toString());pZ(t,s,()=>s(t.currentUser)),mZ(t,c=>s(c))}}const i=JU("auth");return i&&oZ(t,`http://${i}`),t}function OJ(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}tZ({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const a=Bs("internal-error");a.customData=i,t(a)},n.type="text/javascript",n.charset="UTF-8",OJ().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TJ("Browser");var lC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a0,$z;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function N(){}N.prototype=k.prototype,A.D=k.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(U,M,$){for(var z=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)z[Q-2]=arguments[Q];return k.prototype[M].apply(U,z)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,N){N||(N=0);var U=Array(16);if(typeof k=="string")for(var M=0;16>M;++M)U[M]=k.charCodeAt(N++)|k.charCodeAt(N++)<<8|k.charCodeAt(N++)<<16|k.charCodeAt(N++)<<24;else for(M=0;16>M;++M)U[M]=k[N++]|k[N++]<<8|k[N++]<<16|k[N++]<<24;k=A.g[0],N=A.g[1],M=A.g[2];var $=A.g[3],z=k+($^N&(M^$))+U[0]+3614090360&4294967295;k=N+(z<<7&4294967295|z>>>25),z=$+(M^k&(N^M))+U[1]+3905402710&4294967295,$=k+(z<<12&4294967295|z>>>20),z=M+(N^$&(k^N))+U[2]+606105819&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(k^M&($^k))+U[3]+3250441966&4294967295,N=M+(z<<22&4294967295|z>>>10),z=k+($^N&(M^$))+U[4]+4118548399&4294967295,k=N+(z<<7&4294967295|z>>>25),z=$+(M^k&(N^M))+U[5]+1200080426&4294967295,$=k+(z<<12&4294967295|z>>>20),z=M+(N^$&(k^N))+U[6]+2821735955&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(k^M&($^k))+U[7]+4249261313&4294967295,N=M+(z<<22&4294967295|z>>>10),z=k+($^N&(M^$))+U[8]+1770035416&4294967295,k=N+(z<<7&4294967295|z>>>25),z=$+(M^k&(N^M))+U[9]+2336552879&4294967295,$=k+(z<<12&4294967295|z>>>20),z=M+(N^$&(k^N))+U[10]+4294925233&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(k^M&($^k))+U[11]+2304563134&4294967295,N=M+(z<<22&4294967295|z>>>10),z=k+($^N&(M^$))+U[12]+1804603682&4294967295,k=N+(z<<7&4294967295|z>>>25),z=$+(M^k&(N^M))+U[13]+4254626195&4294967295,$=k+(z<<12&4294967295|z>>>20),z=M+(N^$&(k^N))+U[14]+2792965006&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(k^M&($^k))+U[15]+1236535329&4294967295,N=M+(z<<22&4294967295|z>>>10),z=k+(M^$&(N^M))+U[1]+4129170786&4294967295,k=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(k^N))+U[6]+3225465664&4294967295,$=k+(z<<9&4294967295|z>>>23),z=M+(k^N&($^k))+U[11]+643717713&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^k&(M^$))+U[0]+3921069994&4294967295,N=M+(z<<20&4294967295|z>>>12),z=k+(M^$&(N^M))+U[5]+3593408605&4294967295,k=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(k^N))+U[10]+38016083&4294967295,$=k+(z<<9&4294967295|z>>>23),z=M+(k^N&($^k))+U[15]+3634488961&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^k&(M^$))+U[4]+3889429448&4294967295,N=M+(z<<20&4294967295|z>>>12),z=k+(M^$&(N^M))+U[9]+568446438&4294967295,k=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(k^N))+U[14]+3275163606&4294967295,$=k+(z<<9&4294967295|z>>>23),z=M+(k^N&($^k))+U[3]+4107603335&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^k&(M^$))+U[8]+1163531501&4294967295,N=M+(z<<20&4294967295|z>>>12),z=k+(M^$&(N^M))+U[13]+2850285829&4294967295,k=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(k^N))+U[2]+4243563512&4294967295,$=k+(z<<9&4294967295|z>>>23),z=M+(k^N&($^k))+U[7]+1735328473&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^k&(M^$))+U[12]+2368359562&4294967295,N=M+(z<<20&4294967295|z>>>12),z=k+(N^M^$)+U[5]+4294588738&4294967295,k=N+(z<<4&4294967295|z>>>28),z=$+(k^N^M)+U[8]+2272392833&4294967295,$=k+(z<<11&4294967295|z>>>21),z=M+($^k^N)+U[11]+1839030562&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^k)+U[14]+4259657740&4294967295,N=M+(z<<23&4294967295|z>>>9),z=k+(N^M^$)+U[1]+2763975236&4294967295,k=N+(z<<4&4294967295|z>>>28),z=$+(k^N^M)+U[4]+1272893353&4294967295,$=k+(z<<11&4294967295|z>>>21),z=M+($^k^N)+U[7]+4139469664&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^k)+U[10]+3200236656&4294967295,N=M+(z<<23&4294967295|z>>>9),z=k+(N^M^$)+U[13]+681279174&4294967295,k=N+(z<<4&4294967295|z>>>28),z=$+(k^N^M)+U[0]+3936430074&4294967295,$=k+(z<<11&4294967295|z>>>21),z=M+($^k^N)+U[3]+3572445317&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^k)+U[6]+76029189&4294967295,N=M+(z<<23&4294967295|z>>>9),z=k+(N^M^$)+U[9]+3654602809&4294967295,k=N+(z<<4&4294967295|z>>>28),z=$+(k^N^M)+U[12]+3873151461&4294967295,$=k+(z<<11&4294967295|z>>>21),z=M+($^k^N)+U[15]+530742520&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^k)+U[2]+3299628645&4294967295,N=M+(z<<23&4294967295|z>>>9),z=k+(M^(N|~$))+U[0]+4096336452&4294967295,k=N+(z<<6&4294967295|z>>>26),z=$+(N^(k|~M))+U[7]+1126891415&4294967295,$=k+(z<<10&4294967295|z>>>22),z=M+(k^($|~N))+U[14]+2878612391&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~k))+U[5]+4237533241&4294967295,N=M+(z<<21&4294967295|z>>>11),z=k+(M^(N|~$))+U[12]+1700485571&4294967295,k=N+(z<<6&4294967295|z>>>26),z=$+(N^(k|~M))+U[3]+2399980690&4294967295,$=k+(z<<10&4294967295|z>>>22),z=M+(k^($|~N))+U[10]+4293915773&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~k))+U[1]+2240044497&4294967295,N=M+(z<<21&4294967295|z>>>11),z=k+(M^(N|~$))+U[8]+1873313359&4294967295,k=N+(z<<6&4294967295|z>>>26),z=$+(N^(k|~M))+U[15]+4264355552&4294967295,$=k+(z<<10&4294967295|z>>>22),z=M+(k^($|~N))+U[6]+2734768916&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~k))+U[13]+1309151649&4294967295,N=M+(z<<21&4294967295|z>>>11),z=k+(M^(N|~$))+U[4]+4149444226&4294967295,k=N+(z<<6&4294967295|z>>>26),z=$+(N^(k|~M))+U[11]+3174756917&4294967295,$=k+(z<<10&4294967295|z>>>22),z=M+(k^($|~N))+U[2]+718787259&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~k))+U[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(M+(z<<21&4294967295|z>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+$&4294967295}n.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var N=k-this.blockSize,U=this.B,M=this.h,$=0;$<k;){if(M==0)for(;$<=N;)i(this,A,$),$+=this.blockSize;if(typeof A=="string"){for(;$<k;)if(U[M++]=A.charCodeAt($++),M==this.blockSize){i(this,U),M=0;break}}else for(;$<k;)if(U[M++]=A[$++],M==this.blockSize){i(this,U),M=0;break}}this.h=M,this.o+=k},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var N=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.u(A),A=Array(16),k=N=0;4>k;++k)for(var U=0;32>U;U+=8)A[N++]=this.g[k]>>>U&255;return A};function a(A,k){var N=c;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=k(A)}function s(A,k){this.h=k;for(var N=[],U=!0,M=A.length-1;0<=M;M--){var $=A[M]|0;U&&$==k||(N[M]=$,U=!1)}this.g=N}var c={};function d(A){return-128<=A&&128>A?a(A,function(k){return new s([k|0],0>k?-1:0)}):new s([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return w(f(-A));for(var k=[],N=1,U=0;A>=N;U++)k[U]=A/N|0,N*=4294967296;return new s(k,0)}function m(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return w(m(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=f(Math.pow(k,8)),U=p,M=0;M<A.length;M+=8){var $=Math.min(8,A.length-M),z=parseInt(A.substring(M,M+$),k);8>$?($=f(Math.pow(k,$)),U=U.j($).add(f(z))):(U=U.j(N),U=U.add(f(z)))}return U}var p=d(0),y=d(1),b=d(16777216);r=s.prototype,r.m=function(){if(S(this))return-w(this).m();for(var A=0,k=1,N=0;N<this.g.length;N++){var U=this.i(N);A+=(0<=U?U:4294967296+U)*k,k*=4294967296}return A},r.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T(this))return"0";if(S(this))return"-"+w(this).toString(A);for(var k=f(Math.pow(A,6)),N=this,U="";;){var M=B(N,k).g;N=E(N,M.j(k));var $=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=M,T(N))return $+U;for(;6>$.length;)$="0"+$;U=$+U}},r.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function T(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function S(A){return A.h==-1}r.l=function(A){return A=E(this,A),S(A)?-1:T(A)?0:1};function w(A){for(var k=A.g.length,N=[],U=0;U<k;U++)N[U]=~A.g[U];return new s(N,~A.h).add(y)}r.abs=function(){return S(this)?w(this):this},r.add=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],U=0,M=0;M<=k;M++){var $=U+(this.i(M)&65535)+(A.i(M)&65535),z=($>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);U=z>>>16,$&=65535,z&=65535,N[M]=z<<16|$}return new s(N,N[N.length-1]&-2147483648?-1:0)};function E(A,k){return A.add(w(k))}r.j=function(A){if(T(this)||T(A))return p;if(S(this))return S(A)?w(this).j(w(A)):w(w(this).j(A));if(S(A))return w(this.j(w(A)));if(0>this.l(b)&&0>A.l(b))return f(this.m()*A.m());for(var k=this.g.length+A.g.length,N=[],U=0;U<2*k;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var M=0;M<A.g.length;M++){var $=this.i(U)>>>16,z=this.i(U)&65535,Q=A.i(M)>>>16,ee=A.i(M)&65535;N[2*U+2*M]+=z*ee,I(N,2*U+2*M),N[2*U+2*M+1]+=$*ee,I(N,2*U+2*M+1),N[2*U+2*M+1]+=z*Q,I(N,2*U+2*M+1),N[2*U+2*M+2]+=$*Q,I(N,2*U+2*M+2)}for(U=0;U<k;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=k;U<2*k;U++)N[U]=0;return new s(N,0)};function I(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function C(A,k){this.g=A,this.h=k}function B(A,k){if(T(k))throw Error("division by zero");if(T(A))return new C(p,p);if(S(A))return k=B(w(A),k),new C(w(k.g),w(k.h));if(S(k))return k=B(A,w(k)),new C(w(k.g),k.h);if(30<A.g.length){if(S(A)||S(k))throw Error("slowDivide_ only works with positive integers.");for(var N=y,U=k;0>=U.l(A);)N=R(N),U=R(U);var M=D(N,1),$=D(U,1);for(U=D(U,2),N=D(N,2);!T(U);){var z=$.add(U);0>=z.l(A)&&(M=M.add(N),$=z),U=D(U,1),N=D(N,1)}return k=E(A,M.j(k)),new C(M,k)}for(M=p;0<=A.l(k);){for(N=Math.max(1,Math.floor(A.m()/k.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),$=f(N),z=$.j(k);S(z)||0<z.l(A);)N-=U,$=f(N),z=$.j(k);T($)&&($=y),M=M.add($),A=E(A,z)}return new C(M,A)}r.A=function(A){return B(this,A).h},r.and=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],U=0;U<k;U++)N[U]=this.i(U)&A.i(U);return new s(N,this.h&A.h)},r.or=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],U=0;U<k;U++)N[U]=this.i(U)|A.i(U);return new s(N,this.h|A.h)},r.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],U=0;U<k;U++)N[U]=this.i(U)^A.i(U);return new s(N,this.h^A.h)};function R(A){for(var k=A.g.length+1,N=[],U=0;U<k;U++)N[U]=A.i(U)<<1|A.i(U-1)>>>31;return new s(N,A.h)}function D(A,k){var N=k>>5;k%=32;for(var U=A.g.length-N,M=[],$=0;$<U;$++)M[$]=0<k?A.i($+N)>>>k|A.i($+N+1)<<32-k:A.i($+N);return new s(M,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,$z=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=m,a0=s}).apply(typeof lC<"u"?lC:typeof self<"u"?self:typeof window<"u"?window:{});var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fz,Em,qz,ev,VS,Hz,Gz,Kz;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,j,V){return v==Array.prototype||v==Object.prototype||(v[j]=V.value),v};function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof fy=="object"&&fy];for(var j=0;j<v.length;++j){var V=v[j];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var n=t(this);function i(v,j){if(j)e:{var V=n;v=v.split(".");for(var W=0;W<v.length-1;W++){var ye=v[W];if(!(ye in V))break e;V=V[ye]}v=v[v.length-1],W=V[v],j=j(W),j!=W&&j!=null&&e(V,v,{configurable:!0,writable:!0,value:j})}}function a(v,j){v instanceof String&&(v+="");var V=0,W=!1,ye={next:function(){if(!W&&V<v.length){var Ae=V++;return{value:j(Ae,v[Ae]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ye[Symbol.iterator]=function(){return ye},ye}i("Array.prototype.values",function(v){return v||function(){return a(this,function(j,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},c=this||self;function d(v){var j=typeof v;return j=j!="object"?j:v?Array.isArray(v)?"array":j:"null",j=="array"||j=="object"&&typeof v.length=="number"}function f(v){var j=typeof v;return j=="object"&&v!=null||j=="function"}function m(v,j,V){return v.call.apply(v.bind,arguments)}function p(v,j,V){if(!v)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ye=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ye,W),v.apply(j,ye)}}return function(){return v.apply(j,arguments)}}function y(v,j,V){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function b(v,j){var V=Array.prototype.slice.call(arguments,1);return function(){var W=V.slice();return W.push.apply(W,arguments),v.apply(this,W)}}function T(v,j){function V(){}V.prototype=j.prototype,v.aa=j.prototype,v.prototype=new V,v.prototype.constructor=v,v.Qb=function(W,ye,Ae){for(var Ze=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)Ze[gr-2]=arguments[gr];return j.prototype[ye].apply(W,Ze)}}function S(v){const j=v.length;if(0<j){const V=Array(j);for(let W=0;W<j;W++)V[W]=v[W];return V}return[]}function w(v,j){for(let V=1;V<arguments.length;V++){const W=arguments[V];if(d(W)){const ye=v.length||0,Ae=W.length||0;v.length=ye+Ae;for(let Ze=0;Ze<Ae;Ze++)v[ye+Ze]=W[Ze]}else v.push(W)}}class E{constructor(j,V){this.i=j,this.j=V,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function I(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function B(v){return B[" "](v),v}B[" "]=function(){};var R=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function D(v,j,V){for(const W in v)j.call(V,v[W],W,v)}function A(v,j){for(const V in v)j.call(void 0,v[V],V,v)}function k(v){const j={};for(const V in v)j[V]=v[V];return j}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,j){let V,W;for(let ye=1;ye<arguments.length;ye++){W=arguments[ye];for(V in W)v[V]=W[V];for(let Ae=0;Ae<N.length;Ae++)V=N[Ae],Object.prototype.hasOwnProperty.call(W,V)&&(v[V]=W[V])}}function M(v){var j=1;v=v.split(":");const V=[];for(;0<j&&v.length;)V.push(v.shift()),j--;return v.length&&V.push(v.join(":")),V}function $(v){c.setTimeout(()=>{throw v},0)}function z(){var v=ge;let j=null;return v.g&&(j=v.g,v.g=v.g.next,v.g||(v.h=null),j.next=null),j}class Q{constructor(){this.h=this.g=null}add(j,V){const W=ee.get();W.set(j,V),this.h?this.h.next=W:this.g=W,this.h=W}}var ee=new E(()=>new K,v=>v.reset());class K{constructor(){this.next=this.g=this.h=null}set(j,V){this.h=j,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,ge=new Q,ae=()=>{const v=c.Promise.resolve(void 0);Z=()=>{v.then(X)}};var X=()=>{for(var v;v=z();){try{v.h.call(v.g)}catch(V){$(V)}var j=ee;j.j(v),100>j.h&&(j.h++,v.next=j.g,j.g=v)}Y=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(v,j){this.type=v,this.g=this.target=j,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var Ne=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,j=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const V=()=>{};c.addEventListener("test",V,j),c.removeEventListener("test",V,j)}catch{}return v})();function se(v,j){if(ce.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var V=this.type=v.type,W=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=j,j=v.relatedTarget){if(R){e:{try{B(j.nodeName);var ye=!0;break e}catch{}ye=!1}ye||(j=null)}}else V=="mouseover"?j=v.fromElement:V=="mouseout"&&(j=v.toElement);this.relatedTarget=j,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:ke[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&se.aa.h.call(this)}}T(se,ce);var ke={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),ot=0;function Ee(v,j,V,W,ye){this.listener=v,this.proxy=null,this.src=j,this.type=V,this.capture=!!W,this.ha=ye,this.key=++ot,this.da=this.fa=!1}function He(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function he(v){this.src=v,this.g={},this.h=0}he.prototype.add=function(v,j,V,W,ye){var Ae=v.toString();v=this.g[Ae],v||(v=this.g[Ae]=[],this.h++);var Ze=Ye(v,j,W,ye);return-1<Ze?(j=v[Ze],V||(j.fa=!1)):(j=new Ee(j,this.src,Ae,!!W,ye),j.fa=V,v.push(j)),j};function pe(v,j){var V=j.type;if(V in v.g){var W=v.g[V],ye=Array.prototype.indexOf.call(W,j,void 0),Ae;(Ae=0<=ye)&&Array.prototype.splice.call(W,ye,1),Ae&&(He(j),v.g[V].length==0&&(delete v.g[V],v.h--))}}function Ye(v,j,V,W){for(var ye=0;ye<v.length;++ye){var Ae=v[ye];if(!Ae.da&&Ae.listener==j&&Ae.capture==!!V&&Ae.ha==W)return ye}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),at={};function tt(v,j,V,W,ye){if(Array.isArray(j)){for(var Ae=0;Ae<j.length;Ae++)tt(v,j[Ae],V,W,ye);return null}return V=Kt(V),v&&v[Me]?v.K(j,V,f(W)?!!W.capture:!1,ye):Gt(v,j,V,!1,W,ye)}function Gt(v,j,V,W,ye,Ae){if(!j)throw Error("Invalid event type");var Ze=f(ye)?!!ye.capture:!!ye,gr=Xe(v);if(gr||(v[Ke]=gr=new he(v)),V=gr.add(j,V,W,Ze,Ae),V.proxy)return V;if(W=Ie(),V.proxy=W,W.src=v,W.listener=V,v.addEventListener)Ne||(ye=Ze),ye===void 0&&(ye=!1),v.addEventListener(j.toString(),W,ye);else if(v.attachEvent)v.attachEvent(nt(j.toString()),W);else if(v.addListener&&v.removeListener)v.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return V}function Ie(){function v(V){return j.call(v.src,v.listener,V)}const j=vt;return v}function de(v,j,V,W,ye){if(Array.isArray(j))for(var Ae=0;Ae<j.length;Ae++)de(v,j[Ae],V,W,ye);else W=f(W)?!!W.capture:!!W,V=Kt(V),v&&v[Me]?(v=v.i,j=String(j).toString(),j in v.g&&(Ae=v.g[j],V=Ye(Ae,V,W,ye),-1<V&&(He(Ae[V]),Array.prototype.splice.call(Ae,V,1),Ae.length==0&&(delete v.g[j],v.h--)))):v&&(v=Xe(v))&&(j=v.g[j.toString()],v=-1,j&&(v=Ye(j,V,W,ye)),(V=-1<v?j[v]:null)&&qe(V))}function qe(v){if(typeof v!="number"&&v&&!v.da){var j=v.src;if(j&&j[Me])pe(j.i,v);else{var V=v.type,W=v.proxy;j.removeEventListener?j.removeEventListener(V,W,v.capture):j.detachEvent?j.detachEvent(nt(V),W):j.addListener&&j.removeListener&&j.removeListener(W),(V=Xe(j))?(pe(V,v),V.h==0&&(V.src=null,j[Ke]=null)):He(v)}}}function nt(v){return v in at?at[v]:at[v]="on"+v}function vt(v,j){if(v.da)v=!0;else{j=new se(j,this);var V=v.listener,W=v.ha||v.src;v.fa&&qe(v),v=V.call(W,j)}return v}function Xe(v){return v=v[Ke],v instanceof he?v:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kt(v){return typeof v=="function"?v:(v[Tt]||(v[Tt]=function(j){return v.handleEvent(j)}),v[Tt])}function Qt(){J.call(this),this.i=new he(this),this.M=this,this.F=null}T(Qt,J),Qt.prototype[Me]=!0,Qt.prototype.removeEventListener=function(v,j,V,W){de(this,v,j,V,W)};function Ot(v,j){var V,W=v.F;if(W)for(V=[];W;W=W.F)V.push(W);if(v=v.M,W=j.type||j,typeof j=="string")j=new ce(j,v);else if(j instanceof ce)j.target=j.target||v;else{var ye=j;j=new ce(W,v),U(j,ye)}if(ye=!0,V)for(var Ae=V.length-1;0<=Ae;Ae--){var Ze=j.g=V[Ae];ye=Ft(Ze,W,!0,j)&&ye}if(Ze=j.g=v,ye=Ft(Ze,W,!0,j)&&ye,ye=Ft(Ze,W,!1,j)&&ye,V)for(Ae=0;Ae<V.length;Ae++)Ze=j.g=V[Ae],ye=Ft(Ze,W,!1,j)&&ye}Qt.prototype.N=function(){if(Qt.aa.N.call(this),this.i){var v=this.i,j;for(j in v.g){for(var V=v.g[j],W=0;W<V.length;W++)He(V[W]);delete v.g[j],v.h--}}this.F=null},Qt.prototype.K=function(v,j,V,W){return this.i.add(String(v),j,!1,V,W)},Qt.prototype.L=function(v,j,V,W){return this.i.add(String(v),j,!0,V,W)};function Ft(v,j,V,W){if(j=v.i.g[String(j)],!j)return!0;j=j.concat();for(var ye=!0,Ae=0;Ae<j.length;++Ae){var Ze=j[Ae];if(Ze&&!Ze.da&&Ze.capture==V){var gr=Ze.listener,Rn=Ze.ha||Ze.src;Ze.fa&&pe(v.i,Ze),ye=gr.call(Rn,W)!==!1&&ye}}return ye&&!W.defaultPrevented}function Yr(v,j,V){if(typeof v=="function")V&&(v=y(v,V));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:c.setTimeout(v,j||0)}function Br(v){v.g=Yr(()=>{v.g=null,v.i&&(v.i=!1,Br(v))},v.l);const j=v.h;v.h=null,v.m.apply(null,j)}class ea extends J{constructor(j,V){super(),this.m=j,this.l=V,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Br(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qr(v){J.call(this),this.h=v,this.g={}}T(qr,J);var jn=[];function Ir(v){D(v.g,function(j,V){this.g.hasOwnProperty(V)&&qe(j)},v),v.g={}}qr.prototype.N=function(){qr.aa.N.call(this),Ir(this)},qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var un=c.JSON.stringify,pr=c.JSON.parse,Si=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function ws(){}ws.prototype.h=null;function In(v){return v.h||(v.h=v.i())}function Ti(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ga(){ce.call(this,"d")}T(Ga,ce);function Bi(){ce.call(this,"c")}T(Bi,ce);var rr={},ei=null;function _s(){return ei=ei||new Qt}rr.La="serverreachability";function Ss(v){ce.call(this,rr.La,v)}T(Ss,ce);function Ai(v){const j=_s();Ot(j,new Ss(j))}rr.STAT_EVENT="statevent";function ta(v,j){ce.call(this,rr.STAT_EVENT,v),this.stat=j}T(ta,ce);function nn(v){const j=_s();Ot(j,new ta(j,v))}rr.Ma="timingevent";function Hs(v,j){ce.call(this,rr.Ma,v),this.size=j}T(Hs,ce);function Ei(v,j){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},j)}function Ui(){this.g=!0}Ui.prototype.xa=function(){this.g=!1};function Gs(v,j,V,W,ye,Ae){v.info(function(){if(v.g)if(Ae)for(var Ze="",gr=Ae.split("&"),Rn=0;Rn<gr.length;Rn++){var qt=gr[Rn].split("=");if(1<qt.length){var ri=qt[0];qt=qt[1];var ni=ri.split("_");Ze=2<=ni.length&&ni[1]=="type"?Ze+(ri+"="+qt+"&"):Ze+(ri+"=redacted&")}}else Ze=null;else Ze=Ae;return"XMLHTTP REQ ("+W+") [attempt "+ye+"]: "+j+`
`+V+`
`+Ze})}function _n(v,j,V,W,ye,Ae,Ze){v.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ye+"]: "+j+`
`+V+`
`+Ae+" "+Ze})}function ui(v,j,V,W){v.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ni(v,V)+(W?" "+W:"")})}function Ks(v,j){v.info(function(){return"TIMEOUT: "+j})}Ui.prototype.info=function(){};function Ni(v,j){if(!v.g)return j;if(!j)return null;try{var V=JSON.parse(j);if(V){for(v=0;v<V.length;v++)if(Array.isArray(V[v])){var W=V[v];if(!(2>W.length)){var ye=W[1];if(Array.isArray(ye)&&!(1>ye.length)){var Ae=ye[0];if(Ae!="noop"&&Ae!="stop"&&Ae!="close")for(var Ze=1;Ze<ye.length;Ze++)ye[Ze]=""}}}}return un(V)}catch{return j}}var br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ur={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},an;function ra(){}T(ra,ws),ra.prototype.g=function(){return new XMLHttpRequest},ra.prototype.i=function(){return{}},an=new ra;function Oi(v,j,V,W){this.j=v,this.i=j,this.l=V,this.R=W||1,this.U=new qr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ws}function Ws(){this.i=null,this.g="",this.h=!1}var Ts={},na={};function ut(v,j,V){v.L=1,v.v=uu(hn(j)),v.m=V,v.P=!0,le(v,null)}function le(v,j){v.F=Date.now(),oe(v),v.A=hn(v.v);var V=v.A,W=v.R;Array.isArray(W)||(W=[String(W)]),jo(V.i,"t",W),v.C=0,V=v.j.J,v.h=new Ws,v.g=i1(v.j,V?j:null,!v.m),0<v.O&&(v.M=new ea(y(v.Y,v,v.g),v.O)),j=v.U,V=v.g,W=v.ca;var ye="readystatechange";Array.isArray(ye)||(ye&&(jn[0]=ye.toString()),ye=jn);for(var Ae=0;Ae<ye.length;Ae++){var Ze=tt(V,ye[Ae],W||j.handleEvent,!1,j.h||j);if(!Ze)break;j.g[Ze.key]=Ze}j=v.H?k(v.H):{},v.m?(v.u||(v.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,j)):(v.u="GET",v.g.ea(v.A,v.u,null,j)),Ai(),Gs(v.i,v.u,v.A,v.l,v.R,v.m)}Oi.prototype.ca=function(v){v=v.target;const j=this.M;j&&zi(v)==3?j.j():this.Y(v)},Oi.prototype.Y=function(v){try{if(v==this.g)e:{const ni=zi(this.g);var j=this.g.Ba();const Kl=this.g.Z();if(!(3>ni)&&(ni!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||ni!=4||j==7||(j==8||0>=Kl?Ai(3):Ai(2)),ze(this);var V=this.g.Z();this.X=V;t:if(Le(this)){var W=fu(this.g);v="";var ye=W.length,Ae=zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bt(this),st(this);var Ze="";break t}this.h.i=new c.TextDecoder}for(j=0;j<ye;j++)this.h.h=!0,v+=this.h.i.decode(W[j],{stream:!(Ae&&j==ye-1)});W.length=0,this.h.g+=v,this.C=0,Ze=this.h.g}else Ze=this.g.oa();if(this.o=V==200,_n(this.i,this.u,this.A,this.l,this.R,ni,V),this.o){if(this.T&&!this.K){t:{if(this.g){var gr,Rn=this.g;if((gr=Rn.g?Rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(gr)){var qt=gr;break t}}qt=null}if(V=qt)ui(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Et(this,V);else{this.o=!1,this.s=3,nn(12),bt(this),st(this);break e}}if(this.P){V=!0;let sa;for(;!this.J&&this.C<Ze.length;)if(sa=Qe(this,Ze),sa==na){ni==4&&(this.s=4,nn(14),V=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(sa==Ts){this.s=4,nn(15),ui(this.i,this.l,Ze,"[Invalid Chunk]"),V=!1;break}else ui(this.i,this.l,sa,null),Et(this,sa);if(Le(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ni!=4||Ze.length!=0||this.h.h||(this.s=1,nn(16),V=!1),this.o=this.o&&V,!V)ui(this.i,this.l,Ze,"[Invalid Chunked Response]"),bt(this),st(this);else if(0<Ze.length&&!this.W){this.W=!0;var ri=this.j;ri.g==this&&ri.ba&&!ri.M&&(ri.j.info("Great, no buffering proxy detected. Bytes received: "+Ze.length),bf(ri),ri.M=!0,nn(11))}}else ui(this.i,this.l,Ze,null),Et(this,Ze);ni==4&&bt(this),this.o&&!this.J&&(ni==4?t1(this.j,this):(this.o=!1,oe(this)))}else Xg(this.g),V==400&&0<Ze.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),bt(this),st(this)}}}catch{}finally{}};function Le(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Qe(v,j){var V=v.C,W=j.indexOf(`
`,V);return W==-1?na:(V=Number(j.substring(V,W)),isNaN(V)?Ts:(W+=1,W+V>j.length?na:(j=j.slice(W,W+V),v.C=W+V,j)))}Oi.prototype.cancel=function(){this.J=!0,bt(this)};function oe(v){v.S=Date.now()+v.I,Se(v,v.I)}function Se(v,j){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Ei(y(v.ba,v),j)}function ze(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Oi.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Ks(this.i,this.A),this.L!=2&&(Ai(),nn(17)),bt(this),this.s=2,st(this)):Se(this,this.S-v)};function st(v){v.j.G==0||v.J||t1(v.j,v)}function bt(v){ze(v);var j=v.M;j&&typeof j.ma=="function"&&j.ma(),v.M=null,Ir(v.U),v.g&&(j=v.g,v.g=null,j.abort(),j.ma())}function Et(v,j){try{var V=v.j;if(V.G!=0&&(V.g==v||Qs(V.h,v))){if(!v.K&&Qs(V.h,v)&&V.G==3){try{var W=V.Da.g.parse(j)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ye=W;if(ye[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<v.F)Hl(V),ql(V);else break e;vf(V),nn(18)}}else V.za=ye[1],0<V.za-V.T&&37500>ye[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ei(y(V.Za,V),6e3));if(1>=Xs(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Ro(V,11)}else if((v.K||V.g==v)&&Hl(V),!I(j))for(ye=V.Da.g.parse(j),j=0;j<ye.length;j++){let qt=ye[j];if(V.T=qt[0],qt=qt[1],V.G==2)if(qt[0]=="c"){V.K=qt[1],V.ia=qt[2];const ri=qt[3];ri!=null&&(V.la=ri,V.j.info("VER="+V.la));const ni=qt[4];ni!=null&&(V.Aa=ni,V.j.info("SVER="+V.Aa));const Kl=qt[5];Kl!=null&&typeof Kl=="number"&&0<Kl&&(W=1.5*Kl,V.L=W,V.j.info("backChannelRequestTimeoutMs_="+W)),W=V;const sa=v.g;if(sa){const gu=sa.g?sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gu){var Ae=W.h;Ae.g||gu.indexOf("spdy")==-1&&gu.indexOf("quic")==-1&&gu.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(Ys(Ae,Ae.h),Ae.h=null))}if(W.D){const Mo=sa.g?sa.g.getResponseHeader("X-HTTP-Session-Id"):null;Mo&&(W.ya=Mo,sr(W.I,W.D,Mo))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-v.F,V.j.info("Handshake RTT: "+V.R+"ms")),W=V;var Ze=v;if(W.qa=n1(W,W.J?W.ia:null,W.W),Ze.K){ia(W.h,Ze);var gr=Ze,Rn=W.L;Rn&&(gr.I=Rn),gr.B&&(ze(gr),oe(gr)),W.g=Ze}else Jg(W);0<V.i.length&&X0(V)}else qt[0]!="stop"&&qt[0]!="close"||Ro(V,7);else V.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?Ro(V,7):gf(V):qt[0]!="noop"&&V.l&&V.l.ta(qt),V.v=0)}}Ai(4)}catch{}}var Hr=class{constructor(v,j){this.g=v,this.map=j}};function Hn(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ka(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function Xs(v){return v.h?1:v.g?v.g.size:0}function Qs(v,j){return v.h?v.h==j:v.g?v.g.has(j):!1}function Ys(v,j){v.g?v.g.add(j):v.h=j}function ia(v,j){v.h&&v.h==j?v.h=null:v.g&&v.g.has(j)&&v.g.delete(j)}Hn.prototype.cancel=function(){if(this.i=Mt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function Mt(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let j=v.i;for(const V of v.g.values())j=j.concat(V.D);return j}return S(v.i)}function Ll(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(d(v)){for(var j=[],V=v.length,W=0;W<V;W++)j.push(v[W]);return j}j=[],V=0;for(W in v)j[V++]=v[W];return j}function V0(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(d(v)||typeof v=="string"){var j=[];v=v.length;for(var V=0;V<v;V++)j.push(V);return j}j=[],V=0;for(const W in v)j[V++]=W;return j}}}function $0(v,j){if(v.forEach&&typeof v.forEach=="function")v.forEach(j,void 0);else if(d(v)||typeof v=="string")Array.prototype.forEach.call(v,j,void 0);else for(var V=V0(v),W=Ll(v),ye=W.length,Ae=0;Ae<ye;Ae++)j.call(void 0,W[Ae],V&&V[Ae],v)}var df=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function F0(v,j){if(v){v=v.split("&");for(var V=0;V<v.length;V++){var W=v[V].indexOf("="),ye=null;if(0<=W){var Ae=v[V].substring(0,W);ye=v[V].substring(W+1)}else Ae=v[V];j(Ae,ye?decodeURIComponent(ye.replace(/\+/g," ")):"")}}}function Co(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Co){this.h=v.h,Bl(this,v.j),this.o=v.o,this.g=v.g,cu(this,v.s),this.l=v.l;var j=v.i,V=new Zs;V.i=j.i,j.g&&(V.g=new Map(j.g),V.h=j.h),q0(this,V),this.m=v.m}else v&&(j=String(v).match(df))?(this.h=!1,Bl(this,j[1]||"",!0),this.o=Ul(j[2]||""),this.g=Ul(j[3]||"",!0),cu(this,j[4]),this.l=Ul(j[5]||"",!0),q0(this,j[6]||"",!0),this.m=Ul(j[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}Co.prototype.toString=function(){var v=[],j=this.j;j&&v.push(Wa(j,hf,!0),":");var V=this.g;return(V||j=="file")&&(v.push("//"),(j=this.o)&&v.push(Wa(j,hf,!0),"@"),v.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&v.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&v.push("/"),v.push(Wa(V,V.charAt(0)=="/"?ff:Hg,!0))),(V=this.i.toString())&&v.push("?",V),(V=this.m)&&v.push("#",Wa(V,j2)),v.join("")};function hn(v){return new Co(v)}function Bl(v,j,V){v.j=V?Ul(j,!0):j,v.j&&(v.j=v.j.replace(/:$/,""))}function cu(v,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);v.s=j}else v.s=null}function q0(v,j,V){j instanceof Zs?(v.i=j,Gg(v.i,v.h)):(V||(j=Wa(j,C2)),v.i=new Zs(j,v.h))}function sr(v,j,V){v.i.set(j,V)}function uu(v){return sr(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Ul(v,j){return v?j?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Wa(v,j,V){return typeof v=="string"?(v=encodeURI(v).replace(j,k2),V&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function k2(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var hf=/[#\/\?@]/g,Hg=/[#\?:]/g,ff=/[#\?]/g,C2=/[#\?@]/g,j2=/#/g;function Zs(v,j){this.h=this.g=null,this.i=v||null,this.j=!!j}function ti(v){v.g||(v.g=new Map,v.h=0,v.i&&F0(v.i,function(j,V){v.add(decodeURIComponent(j.replace(/\+/g," ")),V)}))}r=Zs.prototype,r.add=function(v,j){ti(this),this.i=null,v=Sa(this,v);var V=this.g.get(v);return V||this.g.set(v,V=[]),V.push(j),this.h+=1,this};function H0(v,j){ti(v),j=Sa(v,j),v.g.has(j)&&(v.i=null,v.h-=v.g.get(j).length,v.g.delete(j))}function G0(v,j){return ti(v),j=Sa(v,j),v.g.has(j)}r.forEach=function(v,j){ti(this),this.g.forEach(function(V,W){V.forEach(function(ye){v.call(j,ye,W,this)},this)},this)},r.na=function(){ti(this);const v=Array.from(this.g.values()),j=Array.from(this.g.keys()),V=[];for(let W=0;W<j.length;W++){const ye=v[W];for(let Ae=0;Ae<ye.length;Ae++)V.push(j[W])}return V},r.V=function(v){ti(this);let j=[];if(typeof v=="string")G0(this,v)&&(j=j.concat(this.g.get(Sa(this,v))));else{v=Array.from(this.g.values());for(let V=0;V<v.length;V++)j=j.concat(v[V])}return j},r.set=function(v,j){return ti(this),this.i=null,v=Sa(this,v),G0(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[j]),this.h+=1,this},r.get=function(v,j){return v?(v=this.V(v),0<v.length?String(v[0]):j):j};function jo(v,j,V){H0(v,j),0<V.length&&(v.i=null,v.g.set(Sa(v,j),S(V)),v.h+=V.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],j=Array.from(this.g.keys());for(var V=0;V<j.length;V++){var W=j[V];const Ae=encodeURIComponent(String(W)),Ze=this.V(W);for(W=0;W<Ze.length;W++){var ye=Ae;Ze[W]!==""&&(ye+="="+encodeURIComponent(String(Ze[W]))),v.push(ye)}}return this.i=v.join("&")};function Sa(v,j){return j=String(j),v.j&&(j=j.toLowerCase()),j}function Gg(v,j){j&&!v.j&&(ti(v),v.i=null,v.g.forEach(function(V,W){var ye=W.toLowerCase();W!=ye&&(H0(this,W),jo(this,ye,V))},v)),v.j=j}function mf(v,j){const V=new Ui;if(c.Image){const W=new Image;W.onload=b(aa,V,"TestLoadImage: loaded",!0,j,W),W.onerror=b(aa,V,"TestLoadImage: error",!1,j,W),W.onabort=b(aa,V,"TestLoadImage: abort",!1,j,W),W.ontimeout=b(aa,V,"TestLoadImage: timeout",!1,j,W),c.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=v}else j(!1)}function Kg(v,j){const V=new Ui,W=new AbortController,ye=setTimeout(()=>{W.abort(),aa(V,"TestPingServer: timeout",!1,j)},1e4);fetch(v,{signal:W.signal}).then(Ae=>{clearTimeout(ye),Ae.ok?aa(V,"TestPingServer: ok",!0,j):aa(V,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ye),aa(V,"TestPingServer: error",!1,j)})}function aa(v,j,V,W,ye){try{ye&&(ye.onload=null,ye.onerror=null,ye.onabort=null,ye.ontimeout=null),W(V)}catch{}}function As(){this.g=new Si}function pf(v,j,V){const W=V||"";try{$0(v,function(ye,Ae){let Ze=ye;f(ye)&&(Ze=un(ye)),j.push(W+Ae+"="+encodeURIComponent(Ze))})}catch(ye){throw j.push(W+"type="+encodeURIComponent("_badmap")),ye}}function Js(v){this.l=v.Ub||null,this.j=v.eb||!1}T(Js,ws),Js.prototype.g=function(){return new Ta(this.l,this.j)},Js.prototype.i=(function(v){return function(){return v}})({});function Ta(v,j){Qt.call(this),this.D=v,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ta,Qt),r=Ta.prototype,r.open=function(v,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=j,this.readyState=1,zl(this)},r.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(j.body=v),(this.D||c).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,eo(this)),this.readyState=0},r.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,zl(this)),this.g&&(this.readyState=3,zl(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;K0(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function K0(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}r.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var j=v.value?v.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!v.done}))&&(this.response=this.responseText+=j)}v.done?eo(this):zl(this),this.readyState==3&&K0(this)}},r.Ra=function(v){this.g&&(this.response=this.responseText=v,eo(this))},r.Qa=function(v){this.g&&(this.response=v,eo(this))},r.ga=function(){this.g&&eo(this)};function eo(v){v.readyState=4,v.l=null,v.j=null,v.v=null,zl(v)}r.setRequestHeader=function(v,j){this.u.append(v,j)},r.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],j=this.h.entries();for(var V=j.next();!V.done;)V=V.value,v.push(V[0]+": "+V[1]),V=j.next();return v.join(`\r
`)};function zl(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function du(v){let j="";return D(v,function(V,W){j+=W,j+=":",j+=V,j+=`\r
`}),j}function Vl(v,j,V){e:{for(W in V){var W=!1;break e}W=!0}W||(V=du(V),typeof v=="string"?V!=null&&encodeURIComponent(String(V)):sr(v,j,V))}function Gr(v){Qt.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Gr,Qt);var ki=/^https?$/i,Io=["POST","PUT"];r=Gr.prototype,r.Ha=function(v){this.J=v},r.ea=function(v,j,V,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);j=j?j.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():an.g(),this.v=this.o?In(this.o):In(an),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(j,String(v),!0),this.B=!1}catch(Ae){hu(this,Ae);return}if(v=V||"",V=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ye in W)V.set(ye,W[ye]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ae of W.keys())V.set(Ae,W.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(V.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),ye=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Io,j,void 0))||W||ye||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,Ze]of V)this.g.setRequestHeader(Ae,Ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{W0(this),this.u=!0,this.g.send(v),this.u=!1}catch(Ae){hu(this,Ae)}};function hu(v,j){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=j,v.m=5,$l(v),Fl(v)}function $l(v){v.A||(v.A=!0,Ot(v,"complete"),Ot(v,"error"))}r.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ot(this,"complete"),Ot(this,"abort"),Fl(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fl(this,!0)),Gr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Wg(this):this.bb())},r.bb=function(){Wg(this)};function Wg(v){if(v.h&&typeof s<"u"&&(!v.v[1]||zi(v)!=4||v.Z()!=2)){if(v.u&&zi(v)==4)Yr(v.Ea,0,v);else if(Ot(v,"readystatechange"),zi(v)==4){v.h=!1;try{const Ze=v.Z();e:switch(Ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var V;if(!(V=j)){var W;if(W=Ze===0){var ye=String(v.D).match(df)[1]||null;!ye&&c.self&&c.self.location&&(ye=c.self.location.protocol.slice(0,-1)),W=!ki.test(ye?ye.toLowerCase():"")}V=W}if(V)Ot(v,"complete"),Ot(v,"success");else{v.m=6;try{var Ae=2<zi(v)?v.g.statusText:""}catch{Ae=""}v.l=Ae+" ["+v.Z()+"]",$l(v)}}finally{Fl(v)}}}}function Fl(v,j){if(v.g){W0(v);const V=v.g,W=v.v[0]?()=>{}:null;v.g=null,v.v=null,j||Ot(v,"ready");try{V.onreadystatechange=W}catch{}}}function W0(v){v.I&&(c.clearTimeout(v.I),v.I=null)}r.isActive=function(){return!!this.g};function zi(v){return v.g?v.g.readyState:0}r.Z=function(){try{return 2<zi(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(v){if(this.g){var j=this.g.responseText;return v&&j.indexOf(v)==0&&(j=j.substring(v.length)),pr(j)}};function fu(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Xg(v){const j={};v=(v.g&&2<=zi(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<v.length;W++){if(I(v[W]))continue;var V=M(v[W]);const ye=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Ae=j[ye]||[];j[ye]=Ae,Ae.push(V)}A(j,function(W){return W.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mu(v,j,V){return V&&V.internalChannelParams&&V.internalChannelParams[v]||j}function Qg(v){this.Aa=0,this.i=[],this.j=new Ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mu("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mu("baseRetryDelayMs",5e3,v),this.cb=mu("retryDelaySeedMs",1e4,v),this.Wa=mu("forwardChannelMaxRetries",2,v),this.wa=mu("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new Hn(v&&v.concurrentRequestLimit),this.Da=new As,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Qg.prototype,r.la=8,r.G=1,r.connect=function(v,j,V,W){nn(0),this.W=v,this.H=j||{},V&&W!==void 0&&(this.H.OSID=V,this.H.OAID=W),this.F=this.X,this.I=n1(this,null,this.W),X0(this)};function gf(v){if(Yg(v),v.G==3){var j=v.U++,V=hn(v.I);if(sr(V,"SID",v.K),sr(V,"RID",j),sr(V,"TYPE","terminate"),pu(v,V),j=new Oi(v,v.j,j),j.L=2,j.v=uu(hn(V)),V=!1,c.navigator&&c.navigator.sendBeacon)try{V=c.navigator.sendBeacon(j.v.toString(),"")}catch{}!V&&c.Image&&(new Image().src=j.v,V=!0),V||(j.g=i1(j.j,null),j.g.ea(j.v)),j.F=Date.now(),oe(j)}xf(v)}function ql(v){v.g&&(bf(v),v.g.cancel(),v.g=null)}function Yg(v){ql(v),v.u&&(c.clearTimeout(v.u),v.u=null),Hl(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function X0(v){if(!Ka(v.h)&&!v.s){v.s=!0;var j=v.Ga;Z||ae(),Y||(Z(),Y=!0),ge.add(j,v),v.B=0}}function I2(v,j){return Xs(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=j.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Ei(y(v.Ga,v,j),r1(v,v.B)),v.B++,!0)}r.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ye=new Oi(this,this.j,v);let Ae=this.o;if(this.S&&(Ae?(Ae=k(Ae),U(Ae,this.S)):Ae=this.S),this.m!==null||this.O||(ye.H=Ae,Ae=null),this.P)e:{for(var j=0,V=0;V<this.i.length;V++){t:{var W=this.i[V];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(j+=W,4096<j){j=V;break e}if(j===4096||V===this.i.length-1){j=V+1;break e}}j=1e3}else j=1e3;j=yf(this,ye,j),V=hn(this.I),sr(V,"RID",v),sr(V,"CVER",22),this.D&&sr(V,"X-HTTP-Session-Id",this.D),pu(this,V),Ae&&(this.O?j="headers="+encodeURIComponent(String(du(Ae)))+"&"+j:this.m&&Vl(V,this.m,Ae)),Ys(this.h,ye),this.Ua&&sr(V,"TYPE","init"),this.P?(sr(V,"$req",j),sr(V,"SID","null"),ye.T=!0,ut(ye,V,null)):ut(ye,V,j),this.G=2}}else this.G==3&&(v?Zg(this,v):this.i.length==0||Ka(this.h)||Zg(this))};function Zg(v,j){var V;j?V=j.l:V=v.U++;const W=hn(v.I);sr(W,"SID",v.K),sr(W,"RID",V),sr(W,"AID",v.T),pu(v,W),v.m&&v.o&&Vl(W,v.m,v.o),V=new Oi(v,v.j,V,v.B+1),v.m===null&&(V.H=v.o),j&&(v.i=j.D.concat(v.i)),j=yf(v,V,1e3),V.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),Ys(v.h,V),ut(V,W,j)}function pu(v,j){v.H&&D(v.H,function(V,W){sr(j,W,V)}),v.l&&$0({},function(V,W){sr(j,W,V)})}function yf(v,j,V){V=Math.min(v.i.length,V);var W=v.l?y(v.l.Na,v.l,v):null;e:{var ye=v.i;let Ae=-1;for(;;){const Ze=["count="+V];Ae==-1?0<V?(Ae=ye[0].g,Ze.push("ofs="+Ae)):Ae=0:Ze.push("ofs="+Ae);let gr=!0;for(let Rn=0;Rn<V;Rn++){let qt=ye[Rn].g;const ri=ye[Rn].map;if(qt-=Ae,0>qt)Ae=Math.max(0,ye[Rn].g-100),gr=!1;else try{pf(ri,Ze,"req"+qt+"_")}catch{W&&W(ri)}}if(gr){W=Ze.join("&");break e}}}return v=v.i.splice(0,V),j.D=v,W}function Jg(v){if(!v.g&&!v.u){v.Y=1;var j=v.Fa;Z||ae(),Y||(Z(),Y=!0),ge.add(j,v),v.v=0}}function vf(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Ei(y(v.Fa,v),r1(v,v.v)),v.v++,!0)}r.Fa=function(){if(this.u=null,e1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Ei(y(this.ab,this),v)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),ql(this),e1(this))};function bf(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function e1(v){v.g=new Oi(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var j=hn(v.qa);sr(j,"RID","rpc"),sr(j,"SID",v.K),sr(j,"AID",v.T),sr(j,"CI",v.F?"0":"1"),!v.F&&v.ja&&sr(j,"TO",v.ja),sr(j,"TYPE","xmlhttp"),pu(v,j),v.m&&v.o&&Vl(j,v.m,v.o),v.L&&(v.g.I=v.L);var V=v.g;v=v.ia,V.L=1,V.v=uu(hn(j)),V.m=null,V.P=!0,le(V,v)}r.Za=function(){this.C!=null&&(this.C=null,ql(this),vf(this),nn(19))};function Hl(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function t1(v,j){var V=null;if(v.g==j){Hl(v),bf(v),v.g=null;var W=2}else if(Qs(v.h,j))V=j.D,ia(v.h,j),W=1;else return;if(v.G!=0){if(j.o)if(W==1){V=j.m?j.m.length:0,j=Date.now()-j.F;var ye=v.B;W=_s(),Ot(W,new Hs(W,V)),X0(v)}else Jg(v);else if(ye=j.s,ye==3||ye==0&&0<j.X||!(W==1&&I2(v,j)||W==2&&vf(v)))switch(V&&0<V.length&&(j=v.h,j.i=j.i.concat(V)),ye){case 1:Ro(v,5);break;case 4:Ro(v,10);break;case 3:Ro(v,6);break;default:Ro(v,2)}}}function r1(v,j){let V=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(V*=2),V*j}function Ro(v,j){if(v.j.info("Error code "+j),j==2){var V=y(v.fb,v),W=v.Xa;const ye=!W;W=new Co(W||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Bl(W,"https"),uu(W),ye?mf(W.toString(),V):Kg(W.toString(),V)}else nn(2);v.G=0,v.l&&v.l.sa(j),xf(v),Yg(v)}r.fb=function(v){v?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function xf(v){if(v.G=0,v.ka=[],v.l){const j=Mt(v.h);(j.length!=0||v.i.length!=0)&&(w(v.ka,j),w(v.ka,v.i),v.h.i.length=0,S(v.i),v.i.length=0),v.l.ra()}}function n1(v,j,V){var W=V instanceof Co?hn(V):new Co(V);if(W.g!="")j&&(W.g=j+"."+W.g),cu(W,W.s);else{var ye=c.location;W=ye.protocol,j=j?j+"."+ye.hostname:ye.hostname,ye=+ye.port;var Ae=new Co(null);W&&Bl(Ae,W),j&&(Ae.g=j),ye&&cu(Ae,ye),V&&(Ae.l=V),W=Ae}return V=v.D,j=v.ya,V&&j&&sr(W,V,j),sr(W,"VER",v.la),pu(v,W),W}function i1(v,j,V){if(j&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=v.Ca&&!v.pa?new Gr(new Js({eb:V})):new Gr(v.pa),j.Ha(v.J),j}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function a1(){}r=a1.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Q0(){}Q0.prototype.g=function(v,j){return new Vi(v,j)};function Vi(v,j){Qt.call(this),this.g=new Qg(j),this.l=v,this.h=j&&j.messageUrlParams||null,v=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(v?v["X-WebChannel-Content-Type"]=j.messageContentType:v={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(v?v["X-WebChannel-Client-Profile"]=j.va:v={"X-WebChannel-Client-Profile":j.va}),this.g.S=v,(v=j&&j.Sb)&&!I(v)&&(this.g.m=v),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!I(j)&&(this.g.D=j,v=this.h,v!==null&&j in v&&(v=this.h,j in v&&delete v[j])),this.j=new Gl(this)}T(Vi,Qt),Vi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vi.prototype.close=function(){gf(this.g)},Vi.prototype.o=function(v){var j=this.g;if(typeof v=="string"){var V={};V.__data__=v,v=V}else this.u&&(V={},V.__data__=un(v),v=V);j.i.push(new Hr(j.Ya++,v)),j.G==3&&X0(j)},Vi.prototype.N=function(){this.g.l=null,delete this.j,gf(this.g),delete this.g,Vi.aa.N.call(this)};function s1(v){Ga.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var j=v.__sm__;if(j){e:{for(const V in j){v=V;break e}v=void 0}(this.i=v)&&(v=this.i,j=j!==null&&v in j?j[v]:void 0),this.data=j}else this.data=v}T(s1,Ga);function o1(){Bi.call(this),this.status=1}T(o1,Bi);function Gl(v){this.g=v}T(Gl,a1),Gl.prototype.ua=function(){Ot(this.g,"a")},Gl.prototype.ta=function(v){Ot(this.g,new s1(v))},Gl.prototype.sa=function(v){Ot(this.g,new o1)},Gl.prototype.ra=function(){Ot(this.g,"b")},Q0.prototype.createWebChannel=Q0.prototype.g,Vi.prototype.send=Vi.prototype.o,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Kz=function(){return new Q0},Gz=function(){return _s()},Hz=rr,VS={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},br.NO_ERROR=0,br.TIMEOUT=8,br.HTTP_ERROR=6,ev=br,Ur.COMPLETE="complete",qz=Ur,Ti.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Qt.prototype.listen=Qt.prototype.K,Em=Ti,Gr.prototype.listenOnce=Gr.prototype.L,Gr.prototype.getLastError=Gr.prototype.Ka,Gr.prototype.getLastErrorCode=Gr.prototype.Ba,Gr.prototype.getStatus=Gr.prototype.Z,Gr.prototype.getResponseJson=Gr.prototype.Oa,Gr.prototype.getResponseText=Gr.prototype.oa,Gr.prototype.send=Gr.prototype.ea,Gr.prototype.setWithCredentials=Gr.prototype.Ha,Fz=Gr}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});const cC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mi.UNAUTHENTICATED=new Mi(null),Mi.GOOGLE_CREDENTIALS=new Mi("google-credentials-uid"),Mi.FIRST_PARTY=new Mi("first-party-uid"),Mi.MOCK_USER=new Mi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new i7("@firebase/firestore");function Pd(){return d0.logLevel}function Ve(r,...e){if(d0.logLevel<=Jt.DEBUG){const t=e.map(v7);d0.debug(`Firestore (${Kh}): ${r}`,...t)}}function En(r,...e){if(d0.logLevel<=Jt.ERROR){const t=e.map(v7);d0.error(`Firestore (${Kh}): ${r}`,...t)}}function np(r,...e){if(d0.logLevel<=Jt.WARN){const t=e.map(v7);d0.warn(`Firestore (${Kh}): ${r}`,...t)}}function v7(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(r="Unexpected state"){const e=`FIRESTORE (${Kh}) INTERNAL ASSERTION FAILED: `+r;throw En(e),new Error(e)}function pt(r,e){r||dt()}function mt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends $s{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kJ{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mi.UNAUTHENTICATED)))}shutdown(){}}class jJ{constructor(e){this.t=e,this.currentUser=Mi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pt(this.o===void 0);let n=this.i;const i=d=>this.i!==n?(n=this.i,t(d)):Promise.resolve();let a=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Us,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const d=a;e.enqueueRetryable((async()=>{await d.promise,await i(this.currentUser)}))},c=d=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((d=>c(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Us)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(pt(typeof n.accessToken=="string"),new kJ(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pt(e===null||typeof e=="string"),new Mi(e)}}class IJ{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Mi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class RJ{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new IJ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Mi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class MJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){pt(this.o===void 0);const n=a=>{a.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>n(a)))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(pt(typeof t.token=="string"),this.R=t.token,new MJ(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=DJ(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<t&&(n+=e.charAt(i[a]%e.length))}return n}}function Dt(r,e){return r<e?-1:r>e?1:0}function ah(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}function Xz(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new We(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new We(Oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new We(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(Oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cn.fromMillis(Date.now())}static fromDate(e){return cn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new cn(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new cn(0,0))}static max(){return new yt(new cn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,t,n){t===void 0?t=0:t>e.length&&dt(),n===void 0?n=e.length-t:n>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return ip.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ip?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const a=e.get(i),s=t.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cr extends ip{construct(e,t,n){return new cr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new We(Oe.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new cr(t)}static emptyPath(){return new cr([])}}const LJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends ip{construct(e,t,n){return new ln(e,t,n)}static isValidIdentifier(e){return LJ.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const a=()=>{if(n.length===0)throw new We(Oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new We(Oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new We(Oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=d,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(n+=c,i++):(a(),i++)}if(a(),s)throw new We(Oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.path=e}static fromPath(e){return new rt(cr.fromString(e))}static fromName(e){return new rt(cr.fromString(e).popFirst(5))}static empty(){return new rt(cr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new cr(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function $S(r){return r.fields.find((e=>e.kind===2))}function $u(r){return r.fields.filter((e=>e.kind!==2))}_v.UNKNOWN_ID=-1;class tv{constructor(e,t){this.fieldPath=e,this.kind=t}}class ap{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ap(0,qa.min())}}function Qz(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(n===1e9?new cn(t+1,0):new cn(t,n));return new qa(i,rt.empty(),e)}function Yz(r){return new qa(r.readTime,r.key,-1)}class qa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new qa(yt.min(),rt.empty(),-1)}static max(){return new qa(yt.max(),rt.empty(),-1)}}function b7(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=rt.comparator(r.documentKey,e.documentKey),t!==0?t:Dt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(r){if(r.code!==Oe.FAILED_PRECONDITION||r.message!==Zz)throw r;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new we(((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof we?t:we.resolve(t)}catch(t){return we.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):we.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):we.reject(t)}static resolve(e){return new we(((t,n)=>{t(e)}))}static reject(e){return new we(((t,n)=>{n(e)}))}static waitFor(e){return new we(((t,n)=>{let i=0,a=0,s=!1;e.forEach((c=>{++i,c.next((()=>{++a,s&&a===i&&t()}),(d=>n(d)))})),s=!0,a===i&&t()}))}static or(e){let t=we.resolve(!1);for(const n of e)t=t.next((i=>i?we.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,a)=>{n.push(t.call(this,i,a))})),this.waitFor(n)}static mapArray(e,t){return new we(((n,i)=>{const a=e.length,s=new Array(a);let c=0;for(let d=0;d<a;d++){const f=d;t(e[f]).next((m=>{s[f]=m,++c,c===a&&n(s)}),(m=>i(m)))}}))}static doWhile(e,t){return new we(((n,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):n()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Us,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Dm(e,t.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=x7(n.target.error);this.V.reject(new Dm(e,i))}}static open(e,t,n,i){try{return new ax(t,e.transaction(i,n))}catch(a){throw new Dm(t,a)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new UJ(t)}}class zc{constructor(e,t,n){this.name=e,this.version=t,this.p=n,zc.S(Qn())===12.2&&En("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Hu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!iz())return!1;if(zc.v())return!0;const e=Qn(),t=zc.S(e),n=0<t&&t<10,i=eV(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||a)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ve("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;t(s)},i.onblocked=()=>{n(new Dm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?n(new We(Oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?n(new We(Oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):n(new Dm(e,s))},i.onupgradeneeded=a=>{Ve("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.p.O(s,i.transaction,a.oldVersion,this.version).next((()=>{Ve("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const a=t==="readonly";let s=0;for(;;){++s;try{this.db=await this.M(e);const c=ax.open(this.db,e,a?"readonly":"readwrite",n),d=i(c).next((f=>(c.g(),f))).catch((f=>(c.abort(f),we.reject(f)))).toPromise();return d.catch((()=>{})),await c.m,d}catch(c){const d=c,f=d.name!=="FirebaseError"&&s<3;if(Ve("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),this.close(),!f)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function eV(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class BJ{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hu(this.B.delete())}}class Dm extends We{constructor(e,t){super(Oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Jc(r){return r.name==="IndexedDbTransactionError"}class UJ{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Ve("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hu(n)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Hu(this.store.add(e))}get(e){return Hu(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Hu(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Hu(this.store.count())}U(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(n.range);return new we(((s,c)=>{a.onerror=d=>{c(d.target.error)},a.onsuccess=d=>{s(d.target.result)}}))}{const a=this.cursor(n),s=[];return this.W(a,((c,d)=>{s.push(d)})).next((()=>s))}}G(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new we(((i,a)=>{n.onerror=s=>{a(s.target.error)},n.onsuccess=s=>{i(s.target.result)}}))}j(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const i=this.cursor(n);return this.W(i,((a,s,c)=>c.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.W(i,t)}Y(e){const t=this.cursor({});return new we(((n,i)=>{t.onerror=a=>{const s=x7(a.target.error);i(s)},t.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((c=>{c?s.continue():n()})):n()}}))}W(e,t){const n=[];return new we(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const c=s.target.result;if(!c)return void i();const d=new BJ(c),f=t(c.primaryKey,c.value,d);if(f instanceof we){const m=f.catch((p=>(d.done(),we.reject(p))));n.push(m)}d.isDone?i():d.K===null?c.continue():c.continue(d.K)}})).next((()=>we.waitFor(n)))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hu(r){return new we(((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=x7(n.target.error);t(i)}}))}let uC=!1;function x7(r){const e=zc.S(Qn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uC||(uC=!0,setTimeout((()=>{throw n}),0)),n}}return r}class zJ{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Ve("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ve("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){Jc(t)?Ve("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await Zc(t)}await this.X(6e4)}))}}class VJ{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let i=t,a=!0;return we.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!n.has(s))return Ve("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next((c=>{i-=c,n.add(s)}));a=!1})))).next((()=>t-i))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.re(i,a))).next((c=>(Ve("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>s.size))}))))}re(e,t){let n=e;return t.changes.forEach(((i,a)=>{const s=Yz(a);b7(s,n)>0&&(n=s)})),new qa(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ya.oe=-1;function pg(r){return r==null}function sp(r){return r===0&&1/r==-1/0}function tV(r){return typeof r=="number"&&Number.isInteger(r)&&!sp(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=dC(e)),e=$J(r.get(t),e);return dC(e)}function $J(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const a=r.charAt(i);switch(a){case"\0":t+="";break;case"":t+="";break;default:t+=a}}return t}function dC(r){return r+""}function oo(r){const e=r.length;if(pt(e>=2),e===2)return pt(r.charAt(0)===""&&r.charAt(1)===""),cr.emptyPath();const t=e-2,n=[];let i="";for(let a=0;a<e;){const s=r.indexOf("",a);switch((s<0||s>t)&&dt(),r.charAt(s+1)){case"":const c=r.substring(a,s);let d;i.length===0?d=c:(i+=c,d=i,i=""),n.push(d);break;case"":i+=r.substring(a,s),i+="\0";break;case"":i+=r.substring(a,s+1);break;default:dt()}a=s+2}return new cr(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r,e){return[r,Yi(e)]}function rV(r,e,t){return[r,Yi(e),t]}const FJ={},qJ=["prefixPath","collectionGroup","readTime","documentId"],HJ=["prefixPath","collectionGroup","documentId"],GJ=["collectionGroup","readTime","prefixPath","documentId"],KJ=["canonicalId","targetId"],WJ=["targetId","path"],XJ=["path","targetId"],QJ=["collectionId","parent"],YJ=["indexId","uid"],ZJ=["uid","sequenceNumber"],JJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eee=["indexId","uid","orderedDocumentKey"],tee=["userId","collectionPath","documentId"],ree=["userId","collectionPath","largestBatchId"],nee=["userId","collectionGroup","largestBatchId"],nV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iee=[...nV,"documentOverlays"],iV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aV=iV,w7=[...aV,"indexConfiguration","indexState","indexEntries"],aee=w7,see=[...w7,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends Jz{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Zn(r,e){const t=mt(r);return zc.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function I0(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function sV(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new my(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new my(this.root,e,this.comparator,!1)}getReverseIterator(){return new my(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new my(this.root,e,this.comparator,!0)}}class my{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,n,i,a){this.key=e,this.value=t,this.color=n??yi.RED,this.left=i??yi.EMPTY,this.right=a??yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,a){return new yi(e??this.key,t??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,n),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return yi.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1;yi.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(e,t,n,i,a){return this}insert(e,t,n){return new yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cr(this.comparator);return t.data=e,t}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ad(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new va([])}unionWith(e){let t=new Cr(ln.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new va(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ah(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new oV("Invalid base64 string: "+a):a}})(e);return new Cn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new Cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cn.EMPTY_BYTE_STRING=new Cn("");const oee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(r){if(pt(!!r),typeof r=="string"){let e=0;const t=oee.exec(r);if(pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Jr(r.seconds),nanos:Jr(r.nanos)}}function Jr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Hc(r){return typeof r=="string"?Cn.fromBase64String(r):Cn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _7(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function S7(r){const e=r.mapValue.fields.__previous_value__;return _7(e)?S7(e):e}function op(r){const e=_l(r.mapValue.fields.__local_write_time__.timestampValue);return new cn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lee{constructor(e,t,n,i,a,s,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f}}class h0{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new h0("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof h0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nv={nullValue:"NULL_VALUE"};function f0(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?_7(r)?4:lV(r)?9007199254740991:sx(r)?10:11:dt()}function vo(r,e){if(r===e)return!0;const t=f0(r);if(t!==f0(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return op(r).isEqual(op(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=_l(i.timestampValue),c=_l(a.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,a){return Hc(i.bytesValue).isEqual(Hc(a.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,a){return Jr(i.geoPointValue.latitude)===Jr(a.geoPointValue.latitude)&&Jr(i.geoPointValue.longitude)===Jr(a.geoPointValue.longitude)})(r,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Jr(i.integerValue)===Jr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Jr(i.doubleValue),c=Jr(a.doubleValue);return s===c?sp(s)===sp(c):isNaN(s)&&isNaN(c)}return!1})(r,e);case 9:return ah(r.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},c=a.mapValue.fields||{};if(fC(s)!==fC(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(c[d]===void 0||!vo(s[d],c[d])))return!1;return!0})(r,e);default:return dt()}}function lp(r,e){return(r.values||[]).find((t=>vo(t,e)))!==void 0}function Gc(r,e){if(r===e)return 0;const t=f0(r),n=f0(e);if(t!==n)return Dt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dt(r.booleanValue,e.booleanValue);case 2:return(function(a,s){const c=Jr(a.integerValue||a.doubleValue),d=Jr(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1})(r,e);case 3:return pC(r.timestampValue,e.timestampValue);case 4:return pC(op(r),op(e));case 5:return Dt(r.stringValue,e.stringValue);case 6:return(function(a,s){const c=Hc(a),d=Hc(s);return c.compareTo(d)})(r.bytesValue,e.bytesValue);case 7:return(function(a,s){const c=a.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=Dt(c[f],d[f]);if(m!==0)return m}return Dt(c.length,d.length)})(r.referenceValue,e.referenceValue);case 8:return(function(a,s){const c=Dt(Jr(a.latitude),Jr(s.latitude));return c!==0?c:Dt(Jr(a.longitude),Jr(s.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return gC(r.arrayValue,e.arrayValue);case 10:return(function(a,s){var c,d,f,m;const p=a.fields||{},y=s.fields||{},b=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=(d=y.value)===null||d===void 0?void 0:d.arrayValue,S=Dt(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((m=T==null?void 0:T.values)===null||m===void 0?void 0:m.length)||0);return S!==0?S:gC(b,T)})(r.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Cc.mapValue&&s===Cc.mapValue)return 0;if(a===Cc.mapValue)return 1;if(s===Cc.mapValue)return-1;const c=a.fields||{},d=Object.keys(c),f=s.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let p=0;p<d.length&&p<m.length;++p){const y=Dt(d[p],m[p]);if(y!==0)return y;const b=Gc(c[d[p]],f[m[p]]);if(b!==0)return b}return Dt(d.length,m.length)})(r.mapValue,e.mapValue);default:throw dt()}}function pC(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Dt(r,e);const t=_l(r),n=_l(e),i=Dt(t.seconds,n.seconds);return i!==0?i:Dt(t.nanos,n.nanos)}function gC(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const a=Gc(t[i],n[i]);if(a)return a}return Dt(t.length,n.length)}function sh(r){return qS(r)}function qS(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=_l(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Hc(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return rt.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const a of t.values||[])i?i=!1:n+=",",n+=qS(a);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const s of n)a?a=!1:i+=",",i+=`${s}:${qS(t.fields[s])}`;return i+"}"})(r.mapValue):dt()}function cp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function HS(r){return!!r&&"integerValue"in r}function up(r){return!!r&&"arrayValue"in r}function yC(r){return!!r&&"nullValue"in r}function vC(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function iv(r){return!!r&&"mapValue"in r}function sx(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Lm(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return I0(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Lm(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lm(r.arrayValue.values[t]);return e}return Object.assign({},r)}function lV(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const cV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function cee(r){return"nullValue"in r?nv:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?cp(h0.empty(),rt.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?sx(r)?cV:{mapValue:{}}:dt()}function uee(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?cp(h0.empty(),rt.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?cV:"mapValue"in r?sx(r)?{mapValue:{}}:Cc:dt()}function bC(r,e){const t=Gc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function xC(r,e){const t=Gc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!iv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lm(t)}setAll(e){let t=ln.emptyPath(),n={},i=[];e.forEach(((s,c)=>{if(!t.isImmediateParentOf(c)){const d=this.getFieldsMap(t);this.applyChanges(d,n,i),n={},i=[],t=c.popLast()}s?n[c.lastSegment()]=Lm(s):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,n,i)}delete(e){const t=this.field(e.popLast());iv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];iv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){I0(t,((i,a)=>e[i]=a));for(const i of n)delete e[i]}clone(){return new xi(Lm(this.value))}}function uV(r){const e=[];return I0(r.fields,((t,n)=>{const i=new ln([t]);if(iv(n)){const a=uV(n.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new va(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,n,i,a,s,c){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=a,this.data=s,this.documentState=c}static newInvalidDocument(e){return new en(e,0,yt.min(),yt.min(),yt.min(),xi.empty(),0)}static newFoundDocument(e,t,n,i){return new en(e,1,t,yt.min(),n,i,0)}static newNoDocument(e,t){return new en(e,2,t,yt.min(),yt.min(),xi.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,yt.min(),yt.min(),xi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t){this.position=e,this.inclusive=t}}function wC(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const a=e[i],s=r.position[i];if(a.field.isKeyField()?n=rt.comparator(rt.fromName(s.referenceValue),t.key):n=Gc(s,t.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function _C(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!vo(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,t="asc"){this.field=e,this.dir=t}}function dee(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dV=class{};class er extends dV{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new hee(e,t,n):t==="array-contains"?new pee(e,n):t==="in"?new yV(e,n):t==="not-in"?new gee(e,n):t==="array-contains-any"?new yee(e,n):new er(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new fee(e,n):new mee(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gc(t,this.value)):t!==null&&f0(this.value)===f0(t)&&this.matchesComparison(Gc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return dt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends dV{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new _r(e,t)}matches(e){return lh(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lh(r){return r.op==="and"}function GS(r){return r.op==="or"}function T7(r){return hV(r)&&lh(r)}function hV(r){for(const e of r.filters)if(e instanceof _r)return!1;return!0}function KS(r){if(r instanceof er)return r.field.canonicalString()+r.op.toString()+sh(r.value);if(T7(r))return r.filters.map((e=>KS(e))).join(",");{const e=r.filters.map((t=>KS(t))).join(",");return`${r.op}(${e})`}}function fV(r,e){return r instanceof er?(function(n,i){return i instanceof er&&n.op===i.op&&n.field.isEqual(i.field)&&vo(n.value,i.value)})(r,e):r instanceof _r?(function(n,i){return i instanceof _r&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((a,s,c)=>a&&fV(s,i.filters[c])),!0):!1})(r,e):void dt()}function mV(r,e){const t=r.filters.concat(e);return _r.create(t,r.op)}function pV(r){return r instanceof er?(function(t){return`${t.field.canonicalString()} ${t.op} ${sh(t.value)}`})(r):r instanceof _r?(function(t){return t.op.toString()+" {"+t.getFilters().map(pV).join(" ,")+"}"})(r):"Filter"}class hee extends er{constructor(e,t,n){super(e,t,n),this.key=rt.fromName(n.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class fee extends er{constructor(e,t){super(e,"in",t),this.keys=gV("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mee extends er{constructor(e,t){super(e,"not-in",t),this.keys=gV("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gV(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((n=>rt.fromName(n.referenceValue)))}class pee extends er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return up(t)&&lp(t.arrayValue,this.value)}}class yV extends er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&lp(this.value.arrayValue,t)}}class gee extends er{constructor(e,t){super(e,"not-in",t)}matches(e){if(lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!lp(this.value.arrayValue,t)}}class yee extends er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!up(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>lp(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(e,t=null,n=[],i=[],a=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=s,this.endAt=c,this.ue=null}}function WS(r,e=null,t=[],n=[],i=null,a=null,s=null){return new vee(r,e,t,n,i,a,s)}function m0(r){const e=mt(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>KS(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(a){return a.field.canonicalString()+a.dir})(n))).join(","),pg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>sh(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>sh(n))).join(",")),e.ue=t}return e.ue}function gg(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!dee(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!fV(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!_C(r.startAt,e.startAt)&&_C(r.endAt,e.endAt)}function Sv(r){return rt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Tv(r,e){return r.filters.filter((t=>t instanceof er&&t.field.isEqual(e)))}function SC(r,e,t){let n=nv,i=!0;for(const a of Tv(r,e)){let s=nv,c=!0;switch(a.op){case"<":case"<=":s=cee(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,c=!1;break;case"!=":case"not-in":s=nv}bC({value:n,inclusive:i},{value:s,inclusive:c})<0&&(n=s,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const s=t.position[a];bC({value:n,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(n=s,i=t.inclusive);break}}return{value:n,inclusive:i}}function TC(r,e,t){let n=Cc,i=!0;for(const a of Tv(r,e)){let s=Cc,c=!0;switch(a.op){case">=":case">":s=uee(a.value),c=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,c=!1;break;case"!=":case"not-in":s=Cc}xC({value:n,inclusive:i},{value:s,inclusive:c})>0&&(n=s,i=c)}if(t!==null){for(let a=0;a<r.orderBy.length;++a)if(r.orderBy[a].field.isEqual(e)){const s=t.position[a];xC({value:n,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(n=s,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t=null,n=[],i=[],a=null,s="F",c=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=s,this.startAt=c,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vV(r,e,t,n,i,a,s,c){return new Wh(r,e,t,n,i,a,s,c)}function yg(r){return new Wh(r)}function AC(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function bV(r){return r.collectionGroup!==null}function Bm(r){const e=mt(r);if(e.ce===null){e.ce=[];const t=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),t.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Cr(ln.comparator);return s.filters.forEach((d=>{d.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.ce.push(new dp(a,n))})),t.has(ln.keyField().canonicalString())||e.ce.push(new dp(ln.keyField(),n))}return e.ce}function za(r){const e=mt(r);return e.le||(e.le=bee(e,Bm(r))),e.le}function bee(r,e){if(r.limitType==="F")return WS(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new dp(i.field,a)}));const t=r.endAt?new oh(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new oh(r.startAt.position,r.startAt.inclusive):null;return WS(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function XS(r,e){const t=r.filters.concat([e]);return new Wh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Av(r,e,t){return new Wh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function ox(r,e){return gg(za(r),za(e))&&r.limitType===e.limitType}function xV(r){return`${m0(za(r))}|lt:${r.limitType}`}function Dd(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>pV(i))).join(", ")}]`),pg(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>sh(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>sh(i))).join(",")),`Target(${n})`})(za(r))}; limitType=${r.limitType})`}function vg(r,e){return e.isFoundDocument()&&(function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):rt.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)})(r,e)&&(function(n,i){for(const a of Bm(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(s,c,d){const f=wC(s,c,d);return s.inclusive?f<=0:f<0})(n.startAt,Bm(n),i)||n.endAt&&!(function(s,c,d){const f=wC(s,c,d);return s.inclusive?f>=0:f>0})(n.endAt,Bm(n),i))})(r,e)}function wV(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function _V(r){return(e,t)=>{let n=!1;for(const i of Bm(r)){const a=xee(i,e,t);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function xee(r,e,t){const n=r.field.isKeyField()?rt.comparator(e.key,t.key):(function(a,s,c){const d=s.data.field(a),f=c.data.field(a);return d!==null&&f!==null?Gc(d,f):dt()})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return dt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){I0(this.inner,((t,n)=>{for(const[i,a]of n)e(i,a)}))}isEmpty(){return sV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wee=new Fr(rt.comparator);function La(){return wee}const SV=new Fr(rt.comparator);function Nm(...r){let e=SV;for(const t of r)e=e.insert(t.key,t);return e}function TV(r){let e=SV;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function lo(){return Um()}function AV(){return Um()}function Um(){return new eu((r=>r.toString()),((r,e)=>r.isEqual(e)))}const _ee=new Fr(rt.comparator),See=new Cr(rt.comparator);function Ht(...r){let e=See;for(const t of r)e=e.add(t);return e}const Tee=new Cr(Dt);function A7(){return Tee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function EV(r){return{integerValue:""+r}}function Aee(r,e){return tV(e)?EV(e):E7(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this._=void 0}}function Eee(r,e,t){return r instanceof hp?(function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&_7(a)&&(a=S7(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}})(t,e):r instanceof p0?OV(r,e):r instanceof ch?kV(r,e):(function(i,a){const s=NV(i,a),c=EC(s)+EC(i.Pe);return HS(s)&&HS(i.Pe)?EV(c):E7(i.serializer,c)})(r,e)}function Nee(r,e,t){return r instanceof p0?OV(r,e):r instanceof ch?kV(r,e):t}function NV(r,e){return r instanceof fp?(function(n){return HS(n)||(function(a){return!!a&&"doubleValue"in a})(n)})(e)?e:{integerValue:0}:null}class hp extends lx{}class p0 extends lx{constructor(e){super(),this.elements=e}}function OV(r,e){const t=CV(e);for(const n of r.elements)t.some((i=>vo(i,n)))||t.push(n);return{arrayValue:{values:t}}}class ch extends lx{constructor(e){super(),this.elements=e}}function kV(r,e){let t=CV(e);for(const n of r.elements)t=t.filter((i=>!vo(i,n)));return{arrayValue:{values:t}}}class fp extends lx{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function EC(r){return Jr(r.integerValue||r.doubleValue)}function CV(r){return up(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t){this.field=e,this.transform=t}}function Oee(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof p0&&i instanceof p0||n instanceof ch&&i instanceof ch?ah(n.elements,i.elements,vo):n instanceof fp&&i instanceof fp?vo(n.Pe,i.Pe):n instanceof hp&&i instanceof hp})(r.transform,e.transform)}class kee{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function av(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class cx{}function IV(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new bg(r.key,Nn.none()):new Xh(r.key,r.data,Nn.none());{const t=r.data,n=xi.empty();let i=new Cr(ln.comparator);for(let a of e.fields)if(!i.has(a)){let s=t.field(a);s===null&&a.length>1&&(a=a.popLast(),s=t.field(a)),s===null?n.delete(a):n.set(a,s),i=i.add(a)}return new jl(r.key,n,new va(i.toArray()),Nn.none())}}function Cee(r,e,t){r instanceof Xh?(function(i,a,s){const c=i.value.clone(),d=OC(i.fieldTransforms,a,s.transformResults);c.setAll(d),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(r,e,t):r instanceof jl?(function(i,a,s){if(!av(i.precondition,a))return void a.convertToUnknownDocument(s.version);const c=OC(i.fieldTransforms,a,s.transformResults),d=a.data;d.setAll(RV(i)),d.setAll(c),a.convertToFoundDocument(s.version,d).setHasCommittedMutations()})(r,e,t):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function zm(r,e,t,n){return r instanceof Xh?(function(a,s,c,d){if(!av(a.precondition,s))return c;const f=a.value.clone(),m=kC(a.fieldTransforms,d,s);return f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null})(r,e,t,n):r instanceof jl?(function(a,s,c,d){if(!av(a.precondition,s))return c;const f=kC(a.fieldTransforms,d,s),m=s.data;return m.setAll(RV(a)),m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((p=>p.field)))})(r,e,t,n):(function(a,s,c){return av(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(r,e,t)}function jee(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),a=NV(n.transform,i||null);a!=null&&(t===null&&(t=xi.empty()),t.set(n.field,a))}return t||null}function NC(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ah(n,i,((a,s)=>Oee(a,s)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Xh extends cx{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jl extends cx{constructor(e,t,n,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function RV(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function OC(r,e,t){const n=new Map;pt(r.length===t.length);for(let i=0;i<t.length;i++){const a=r[i],s=a.transform,c=e.data.field(a.field);n.set(a.field,Nee(s,c,t[i]))}return n}function kC(r,e,t){const n=new Map;for(const i of r){const a=i.transform,s=t.data.field(i.field);n.set(i.field,Eee(a,s,e))}return n}class bg extends cx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N7 extends cx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Cee(a,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=zm(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=zm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=AV();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let c=this.applyToLocalView(s,a.mutatedFields);c=t.has(i.key)?null:c;const d=IV(s,c);d!==null&&n.set(i.key,d),s.isValidDocument()||s.convertToNoDocument(yt.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ht())}isEqual(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,((t,n)=>NC(t,n)))&&ah(this.baseMutations,e.baseMutations,((t,n)=>NC(t,n)))}}class k7{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){pt(e.mutations.length===n.length);let i=(function(){return _ee})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,n[s].version);return new k7(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn,nr;function MV(r){switch(r){default:return dt();case Oe.CANCELLED:case Oe.UNKNOWN:case Oe.DEADLINE_EXCEEDED:case Oe.RESOURCE_EXHAUSTED:case Oe.INTERNAL:case Oe.UNAVAILABLE:case Oe.UNAUTHENTICATED:return!1;case Oe.INVALID_ARGUMENT:case Oe.NOT_FOUND:case Oe.ALREADY_EXISTS:case Oe.PERMISSION_DENIED:case Oe.FAILED_PRECONDITION:case Oe.ABORTED:case Oe.OUT_OF_RANGE:case Oe.UNIMPLEMENTED:case Oe.DATA_LOSS:return!0}}function PV(r){if(r===void 0)return En("GRPC error has no .code"),Oe.UNKNOWN;switch(r){case Bn.OK:return Oe.OK;case Bn.CANCELLED:return Oe.CANCELLED;case Bn.UNKNOWN:return Oe.UNKNOWN;case Bn.DEADLINE_EXCEEDED:return Oe.DEADLINE_EXCEEDED;case Bn.RESOURCE_EXHAUSTED:return Oe.RESOURCE_EXHAUSTED;case Bn.INTERNAL:return Oe.INTERNAL;case Bn.UNAVAILABLE:return Oe.UNAVAILABLE;case Bn.UNAUTHENTICATED:return Oe.UNAUTHENTICATED;case Bn.INVALID_ARGUMENT:return Oe.INVALID_ARGUMENT;case Bn.NOT_FOUND:return Oe.NOT_FOUND;case Bn.ALREADY_EXISTS:return Oe.ALREADY_EXISTS;case Bn.PERMISSION_DENIED:return Oe.PERMISSION_DENIED;case Bn.FAILED_PRECONDITION:return Oe.FAILED_PRECONDITION;case Bn.ABORTED:return Oe.ABORTED;case Bn.OUT_OF_RANGE:return Oe.OUT_OF_RANGE;case Bn.UNIMPLEMENTED:return Oe.UNIMPLEMENTED;case Bn.DATA_LOSS:return Oe.DATA_LOSS;default:return dt()}}(nr=Bn||(Bn={}))[nr.OK=0]="OK",nr[nr.CANCELLED=1]="CANCELLED",nr[nr.UNKNOWN=2]="UNKNOWN",nr[nr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nr[nr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nr[nr.NOT_FOUND=5]="NOT_FOUND",nr[nr.ALREADY_EXISTS=6]="ALREADY_EXISTS",nr[nr.PERMISSION_DENIED=7]="PERMISSION_DENIED",nr[nr.UNAUTHENTICATED=16]="UNAUTHENTICATED",nr[nr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nr[nr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nr[nr.ABORTED=10]="ABORTED",nr[nr.OUT_OF_RANGE=11]="OUT_OF_RANGE",nr[nr.UNIMPLEMENTED=12]="UNIMPLEMENTED",nr[nr.INTERNAL=13]="INTERNAL",nr[nr.UNAVAILABLE=14]="UNAVAILABLE",nr[nr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ree(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mee=new a0([4294967295,4294967295],0);function CC(r){const e=Ree().encode(r),t=new $z;return t.update(e),new Uint8Array(t.digest())}function jC(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new a0([t,n],0),new a0([i,a],0)]}class j7{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Om(`Invalid padding: ${t}`);if(n<0)throw new Om(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Om(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Om(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=a0.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(a0.fromNumber(n)));return i.compare(Mee)===1&&(i=new a0([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=CC(e),[n,i]=jC(t);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);if(!this.de(s))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new j7(a,i,t);return n.forEach((c=>s.insert(c))),s}insert(e){if(this.Ie===0)return;const t=CC(e),[n,i]=jC(t);for(let a=0;a<this.hashCount;a++){const s=this.Ee(n,i,a);this.Ae(s)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Om extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,n,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,wg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xg(yt.min(),i,new Fr(Dt),La(),Ht())}}class wg{constructor(e,t,n,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wg(n,t,Ht(),Ht(),Ht())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class DV{constructor(e,t){this.targetId=e,this.me=t}}class LV{constructor(e,t,n=Cn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class IC{constructor(){this.fe=0,this.ge=MC(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ht(),t=Ht(),n=Ht();return this.ge.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:dt()}})),new wg(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=MC()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Pee{constructor(e){this.Le=e,this.Be=new Map,this.ke=La(),this.qe=RC(),this.Qe=new Fr(Dt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:dt()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((n,i)=>{this.ze(i)&&t(i)}))}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const a=i.target;if(Sv(a))if(n===0){const s=new rt(a.path);this.Ue(t,s,en.newNoDocument(s,yt.min()))}else pt(n===1);else{const s=this.Ye(t);if(s!==n){const c=this.Ze(e),d=c?this.Xe(c,e,s):1;if(d!==0){this.je(t);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=t;let s,c;try{s=Hc(n).toUint8Array()}catch(d){if(d instanceof oV)return np("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new j7(s,i,a)}catch(d){return np(d instanceof Om?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.Ie===0?null:c}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach((a=>{const s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,a,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((a,s)=>{const c=this.Je(s);if(c){if(a.current&&Sv(c.target)){const d=new rt(c.target.path);this.ke.get(d)!==null||this.it(s,d)||this.Ue(s,d,en.newNoDocument(d,e))}a.be&&(t.set(s,a.ve()),a.Ce())}}));let n=Ht();this.qe.forEach(((a,s)=>{let c=!0;s.forEachWhile((d=>{const f=this.Je(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(n=n.add(a))})),this.ke.forEach(((a,s)=>s.setReadTime(e)));const i=new xg(e,t,this.Qe,this.ke,n);return this.ke=La(),this.qe=RC(),this.Qe=new Fr(Dt),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new IC,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Cr(Dt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new IC),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function RC(){return new Fr(rt.comparator)}function MC(){return new Fr(rt.comparator)}const Dee={asc:"ASCENDING",desc:"DESCENDING"},Lee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Bee={and:"AND",or:"OR"};class Uee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QS(r,e){return r.useProto3Json||pg(e)?e:{value:e}}function uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BV(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zee(r,e){return uh(r,e.toTimestamp())}function oi(r){return pt(!!r),yt.fromTimestamp((function(t){const n=_l(t);return new cn(n.seconds,n.nanos)})(r))}function I7(r,e){return YS(r,e).canonicalString()}function YS(r,e){const t=(function(i){return new cr(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function UV(r){const e=cr.fromString(r);return pt(WV(e)),e}function mp(r,e){return I7(r.databaseId,e.path)}function hl(r,e){const t=UV(e);if(t.get(1)!==r.databaseId.projectId)throw new We(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new We(Oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new rt($V(t))}function zV(r,e){return I7(r.databaseId,e)}function VV(r){const e=UV(r);return e.length===4?cr.emptyPath():$V(e)}function ZS(r){return new cr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function $V(r){return pt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function PC(r,e,t){return{name:mp(r,e),fields:t.value.mapValue.fields}}function Vee(r,e,t){const n=hl(r,e.name),i=oi(e.updateTime),a=e.createTime?oi(e.createTime):yt.min(),s=new xi({mapValue:{fields:e.fields}}),c=en.newFoundDocument(n,i,a,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function $ee(r,e){return"found"in e?(function(n,i){pt(!!i.found),i.found.name,i.found.updateTime;const a=hl(n,i.found.name),s=oi(i.found.updateTime),c=i.found.createTime?oi(i.found.createTime):yt.min(),d=new xi({mapValue:{fields:i.found.fields}});return en.newFoundDocument(a,s,c,d)})(r,e):"missing"in e?(function(n,i){pt(!!i.missing),pt(!!i.readTime);const a=hl(n,i.missing),s=oi(i.readTime);return en.newNoDocument(a,s)})(r,e):dt()}function Fee(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:dt()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(f,m){return f.useProto3Json?(pt(m===void 0||typeof m=="string"),Cn.fromBase64String(m||"")):(pt(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Cn.fromUint8Array(m||new Uint8Array))})(r,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(f){const m=f.code===void 0?Oe.UNKNOWN:PV(f.code);return new We(m,f.message||"")})(s);t=new LV(n,i,a,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=hl(r,n.document.name),a=oi(n.document.updateTime),s=n.document.createTime?oi(n.document.createTime):yt.min(),c=new xi({mapValue:{fields:n.document.fields}}),d=en.newFoundDocument(i,a,s,c),f=n.targetIds||[],m=n.removedTargetIds||[];t=new sv(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=hl(r,n.document),a=n.readTime?oi(n.readTime):yt.min(),s=en.newNoDocument(i,a),c=n.removedTargetIds||[];t=new sv([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=hl(r,n.document),a=n.removedTargetIds||[];t=new sv([],a,i,null)}else{if(!("filter"in e))return dt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,s=new Iee(i,a),c=n.targetId;t=new DV(c,s)}}return t}function pp(r,e){let t;if(e instanceof Xh)t={update:PC(r,e.key,e.value)};else if(e instanceof bg)t={delete:mp(r,e.key)};else if(e instanceof jl)t={update:PC(r,e.key,e.data),updateMask:Xee(e.fieldMask)};else{if(!(e instanceof N7))return dt();t={verify:mp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(a,s){const c=s.transform;if(c instanceof hp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof p0)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ch)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof fp)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw dt()})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:zee(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:dt()})(r,e.precondition)),t}function JS(r,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Nn.updateTime(oi(a.updateTime)):a.exists!==void 0?Nn.exists(a.exists):Nn.none()})(e.currentDocument):Nn.none(),n=e.updateTransforms?e.updateTransforms.map((i=>(function(s,c){let d=null;if("setToServerValue"in c)pt(c.setToServerValue==="REQUEST_TIME"),d=new hp;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];d=new p0(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];d=new ch(m)}else"increment"in c?d=new fp(s,c.increment):dt();const f=ln.fromServerFormat(c.fieldPath);return new jV(f,d)})(r,i))):[];if(e.update){e.update.name;const i=hl(r,e.update.name),a=new xi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(d){const f=d.fieldPaths||[];return new va(f.map((m=>ln.fromServerFormat(m))))})(e.updateMask);return new jl(i,a,s,t,n)}return new Xh(i,a,t,n)}if(e.delete){const i=hl(r,e.delete);return new bg(i,t)}if(e.verify){const i=hl(r,e.verify);return new N7(i,t)}return dt()}function qee(r,e){return r&&r.length>0?(pt(e!==void 0),r.map((t=>(function(i,a){let s=i.updateTime?oi(i.updateTime):oi(a);return s.isEqual(yt.min())&&(s=oi(a)),new kee(s,i.transformResults||[])})(t,e)))):[]}function FV(r,e){return{documents:[zV(r,e.path)]}}function qV(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=zV(r,i);const a=(function(f){if(f.length!==0)return KV(_r.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const s=(function(f){if(f.length!==0)return f.map((m=>(function(y){return{field:Ld(y.field),direction:Gee(y.dir)}})(m)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=QS(r,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:t,parent:i}}function HV(r){let e=VV(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){pt(n===1);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];t.where&&(a=(function(p){const y=GV(p);return y instanceof _r&&T7(y)?y.getFilters():[y]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map((y=>(function(T){return new dp(Bd(T.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(y)))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let y;return y=typeof p=="object"?p.value:p,pg(y)?null:y})(t.limit));let d=null;t.startAt&&(d=(function(p){const y=!!p.before,b=p.values||[];return new oh(b,y)})(t.startAt));let f=null;return t.endAt&&(f=(function(p){const y=!p.before,b=p.values||[];return new oh(b,y)})(t.endAt)),vV(e,i,s,a,c,"F",d,f)}function Hee(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return dt()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GV(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bd(t.unaryFilter.field);return er.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Bd(t.unaryFilter.field);return er.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Bd(t.unaryFilter.field);return er.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Bd(t.unaryFilter.field);return er.create(s,"!=",{nullValue:"NULL_VALUE"});default:return dt()}})(r):r.fieldFilter!==void 0?(function(t){return er.create(Bd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return _r.create(t.compositeFilter.filters.map((n=>GV(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return dt()}})(t.compositeFilter.op))})(r):dt()}function Gee(r){return Dee[r]}function Kee(r){return Lee[r]}function Wee(r){return Bee[r]}function Ld(r){return{fieldPath:r.canonicalString()}}function Bd(r){return ln.fromServerFormat(r.fieldPath)}function KV(r){return r instanceof er?(function(t){if(t.op==="=="){if(vC(t.value))return{unaryFilter:{field:Ld(t.field),op:"IS_NAN"}};if(yC(t.value))return{unaryFilter:{field:Ld(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vC(t.value))return{unaryFilter:{field:Ld(t.field),op:"IS_NOT_NAN"}};if(yC(t.value))return{unaryFilter:{field:Ld(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ld(t.field),op:Kee(t.op),value:t.value}}})(r):r instanceof _r?(function(t){const n=t.getFilters().map((i=>KV(i)));return n.length===1?n[0]:{compositeFilter:{op:Wee(t.op),filters:n}}})(r):dt()}function Xee(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WV(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,n,i,a=yt.min(),s=yt.min(),c=Cn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new ll(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ll(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e){this.ct=e}}function Qee(r,e){let t;if(e.document)t=Vee(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=rt.fromSegments(e.noDocument.path),i=y0(e.noDocument.readTime);t=en.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const n=rt.fromSegments(e.unknownDocument.path),i=y0(e.unknownDocument.version);t=en.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime((function(i){const a=new cn(i[0],i[1]);return yt.fromTimestamp(a)})(e.readTime)),t}function DC(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ev(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=(function(a,s){return{name:mp(a,s.key),fields:s.data.value.mapValue.fields,updateTime:uh(a,s.version.toTimestamp()),createTime:uh(a,s.createTime.toTimestamp())}})(r.ct,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:g0(e.version)};else{if(!e.isUnknownDocument())return dt();n.unknownDocument={path:t.path.toArray(),version:g0(e.version)}}return n}function Ev(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function g0(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function y0(r){const e=new cn(r.seconds,r.nanoseconds);return yt.fromTimestamp(e)}function Gu(r,e){const t=(e.baseMutations||[]).map((a=>JS(r.ct,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const n=e.mutations.map((a=>JS(r.ct,a))),i=cn.fromMillis(e.localWriteTimeMs);return new O7(e.batchId,i,t,n)}function km(r){const e=y0(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?y0(r.lastLimboFreeSnapshotVersion):yt.min();let n;return n=(function(a){return a.documents!==void 0})(r.query)?(function(a){return pt(a.documents.length===1),za(yg(VV(a.documents[0])))})(r.query):(function(a){return za(HV(a))})(r.query),new ll(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,Cn.fromBase64String(r.resumeToken))}function QV(r,e){const t=g0(e.snapshotVersion),n=g0(e.lastLimboFreeSnapshotVersion);let i;i=Sv(e.target)?FV(r.ct,e.target):qV(r.ct,e.target)._t;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:m0(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function YV(r){const e=HV({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Av(e,e.limit,"L"):e}function Uw(r,e){return new C7(e.largestBatchId,JS(r.ct,e.overlayMutation))}function LC(r,e){const t=e.path.lastSegment();return[r,Yi(e.path.popLast()),t]}function BC(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:g0(n.readTime),documentKey:Yi(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yee{getBundleMetadata(e,t){return UC(e).get(t).next((n=>{if(n)return(function(a){return{id:a.bundleId,createTime:y0(a.createTime),version:a.version}})(n)}))}saveBundleMetadata(e,t){return UC(e).put((function(i){return{bundleId:i.id,createTime:g0(oi(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return zC(e).get(t).next((n=>{if(n)return(function(a){return{name:a.name,query:YV(a.bundledQuery),readTime:y0(a.readTime)}})(n)}))}saveNamedQuery(e,t){return zC(e).put((function(i){return{name:i.name,readTime:g0(oi(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function UC(r){return Zn(r,"bundles")}function zC(r){return Zn(r,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new ux(e,n)}getOverlay(e,t){return im(e).get(LC(this.userId,t)).next((n=>n?Uw(this.serializer,n):null))}getOverlays(e,t){const n=lo();return we.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((a,s)=>{const c=new C7(t,s);i.push(this.ht(e,c))})),we.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((s=>i.add(Yi(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const c=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,n+1],!1,!0);a.push(im(e).j("collectionPathOverlayIndex",c))})),we.waitFor(a)}getOverlaysForCollection(e,t,n){const i=lo(),a=Yi(t),s=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return im(e).U("collectionPathOverlayIndex",s).next((c=>{for(const d of c){const f=Uw(this.serializer,d);i.set(f.getKey(),f)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const a=lo();let s;const c=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return im(e).J({index:"collectionGroupOverlayIndex",range:c},((d,f,m)=>{const p=Uw(this.serializer,f);a.size()<i||p.largestBatchId===s?(a.set(p.getKey(),p),s=p.largestBatchId):m.done()})).next((()=>a))}ht(e,t){return im(e).put((function(i,a,s){const[c,d,f]=LC(a,s.mutation.key);return{userId:a,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pp(i.ct,s.mutation)}})(this.serializer,this.userId,t))}}function im(r){return Zn(r,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{Pt(e){return Zn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next((t=>{const n=t==null?void 0:t.value;return n?Cn.fromUint8Array(n):Cn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Jr(e.integerValue));else if("doubleValue"in e){const n=Jr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),sp(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=_l(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?lV(e)?this.dt(t,Number.MAX_SAFE_INTEGER):sx(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):dt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const a=e.fields||{};this.dt(t,53);const s="value",c=((i=(n=a[s].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Jr(c)),this.Vt(s,t),this.Tt(a[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),rt.fromName(e).path.forEach((n=>{this.dt(t,60),this.Dt(n,t)}))}dt(e,t){e.At(t)}ft(e){e.At(2)}}Ku.vt=new Ku;function Jee(r){if(r===0)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function VC(r){const e=64-(function(n){let i=0;for(let a=0;a<8;++a){const s=Jee(255&n[a]);if(i+=s,s!==8)break}return i})(r);return Math.ceil(e/8)}class ete{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),n=VC(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),n=VC(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),n=(128&t[0])!=0;t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class tte{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class rte{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class am{constructor(){this.jt=new ete,this.Ht=new tte(this.jt),this.Jt=new rte(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Wu(this.indexId,this.documentKey,this.arrayValue,n)}}function yc(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=$C(r.arrayValue,e.arrayValue),t!==0?t:(t=$C(r.directionalValue,e.directionalValue),t!==0?t:rt.comparator(r.documentKey,e.documentKey)))}function $C(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.Xt=new Cr(((t,n)=>ln.comparator(t.field,n.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(pt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=$S(e);if(t!==void 0&&!this.sn(t))return!1;const n=$u(e);let i=new Set,a=0,s=0;for(;a<n.length&&this.sn(n[a]);++a)i=i.add(n[a].fieldPath.canonicalString());if(a===n.length)return!0;if(this.Xt.size>0){const c=this.Xt.getIterator().getNext();if(!i.has(c.field.canonicalString())){const d=n[a];if(!this.on(c,d)||!this._n(this.en[s++],d))return!1}++a}for(;a<n.length;++a){const c=n[a];if(s>=this.en.length||!this._n(this.en[s++],c))return!1}return!0}an(){if(this.nn)return null;let e=new Cr(ln.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new tv(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new tv(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new tv(n.field,n.dir==="asc"?0:1)));return new _v(_v.UNKNOWN_ID,this.collectionId,t,ap.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(r){var e,t;if(pt(r instanceof er||r instanceof _r),r instanceof er){if(r instanceof yV){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((a=>er.create(r.field,"==",a))))||[];return _r.create(i,"or")}return r}const n=r.filters.map((i=>ZV(i)));return _r.create(n,r.op)}function nte(r){if(r.getFilters().length===0)return[];const e=rT(ZV(r));return pt(JV(e)),eT(e)||tT(e)?[e]:e.getFilters()}function eT(r){return r instanceof er}function tT(r){return r instanceof _r&&T7(r)}function JV(r){return eT(r)||tT(r)||(function(t){if(t instanceof _r&&GS(t)){for(const n of t.getFilters())if(!eT(n)&&!tT(n))return!1;return!0}return!1})(r)}function rT(r){if(pt(r instanceof er||r instanceof _r),r instanceof er)return r;if(r.filters.length===1)return rT(r.filters[0]);const e=r.filters.map((n=>rT(n)));let t=_r.create(e,r.op);return t=Nv(t),JV(t)?t:(pt(t instanceof _r),pt(lh(t)),pt(t.filters.length>1),t.filters.reduce(((n,i)=>R7(n,i))))}function R7(r,e){let t;return pt(r instanceof er||r instanceof _r),pt(e instanceof er||e instanceof _r),t=r instanceof er?e instanceof er?(function(i,a){return _r.create([i,a],"and")})(r,e):qC(r,e):e instanceof er?qC(e,r):(function(i,a){if(pt(i.filters.length>0&&a.filters.length>0),lh(i)&&lh(a))return mV(i,a.getFilters());const s=GS(i)?i:a,c=GS(i)?a:i,d=s.filters.map((f=>R7(f,c)));return _r.create(d,"or")})(r,e),Nv(t)}function qC(r,e){if(lh(e))return mV(e,r.getFilters());{const t=e.filters.map((n=>R7(r,n)));return _r.create(t,"or")}}function Nv(r){if(pt(r instanceof er||r instanceof _r),r instanceof er)return r;const e=r.getFilters();if(e.length===1)return Nv(e[0]);if(hV(r))return r;const t=e.map((i=>Nv(i))),n=[];return t.forEach((i=>{i instanceof er?n.push(i):i instanceof _r&&(i.op===r.op?n.push(...i.filters):n.push(i))})),n.length===1?n[0]:_r.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(){this.un=new M7}addToCollectionParentIndex(e,t){return this.un.add(t),we.resolve()}getCollectionParents(e,t){return we.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return we.resolve()}deleteFieldIndex(e,t){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,t){return we.resolve()}getDocumentsMatchingTarget(e,t){return we.resolve(null)}getIndexType(e,t){return we.resolve(0)}getFieldIndexes(e,t){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,t){return we.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,t){return we.resolve(qa.min())}updateCollectionGroup(e,t,n){return we.resolve()}updateIndexEntries(e,t){return we.resolve()}}class M7{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Cr(cr.comparator),a=!i.has(n);return this.index[t]=i.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Cr(cr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=new Uint8Array(0);class ate{constructor(e,t){this.databaseId=t,this.cn=new M7,this.ln=new eu((n=>m0(n)),((n,i)=>gg(n,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.cn.add(t)}));const a={collectionId:n,parent:Yi(i)};return HC(e).put(a)}return we.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[Xz(t),""],!1,!0);return HC(e).U(i).next((a=>{for(const s of a){if(s.collectionId!==t)break;n.push(oo(s.parent))}return n}))}addFieldIndex(e,t){const n=sm(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete i.indexId;const a=n.add(i);if(t.indexState){const s=Nd(e);return a.next((c=>{s.put(BC(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const n=sm(e),i=Nd(e),a=Ed(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=sm(e),n=Ed(e),i=Nd(e);return t.j().next((()=>n.j())).next((()=>i.j()))}createTargetIndexes(e,t){return we.forEach(this.hn(t),(n=>this.getIndexType(e,n).next((i=>{if(i===0||i===1){const a=new FC(n).an();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const n=Ed(e);let i=!0;const a=new Map;return we.forEach(this.hn(t),(s=>this.Pn(e,s).next((c=>{i&&(i=!!c),a.set(s,c)})))).next((()=>{if(i){let s=Ht();const c=[];return we.forEach(a,((d,f)=>{Ve("IndexedDbIndexManager",`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((B=>`${B.fieldPath}:${B.kind}`)).join(",")}`})(d)} to execute ${m0(t)}`);const m=(function(C,B){const R=$S(B);if(R===void 0)return null;for(const D of Tv(C,R.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null})(f,d),p=(function(C,B){const R=new Map;for(const D of $u(B))for(const A of Tv(C,D.fieldPath))switch(A.op){case"==":case"in":R.set(D.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return R.set(D.fieldPath.canonicalString(),A.value),Array.from(R.values())}return null})(f,d),y=(function(C,B){const R=[];let D=!0;for(const A of $u(B)){const k=A.kind===0?SC(C,A.fieldPath,C.startAt):TC(C,A.fieldPath,C.startAt);R.push(k.value),D&&(D=k.inclusive)}return new oh(R,D)})(f,d),b=(function(C,B){const R=[];let D=!0;for(const A of $u(B)){const k=A.kind===0?TC(C,A.fieldPath,C.endAt):SC(C,A.fieldPath,C.endAt);R.push(k.value),D&&(D=k.inclusive)}return new oh(R,D)})(f,d),T=this.In(d,f,y),S=this.In(d,f,b),w=this.Tn(d,f,p),E=this.En(d.indexId,m,T,y.inclusive,S,b.inclusive,w);return we.forEach(E,(I=>n.G(I,t.limit).next((C=>{C.forEach((B=>{const R=rt.fromSegments(B.documentKey);s.has(R)||(s=s.add(R),c.push(R))}))}))))})).next((()=>c))}return we.resolve(null)}))}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=nte(_r.create(e.filters,"and")).map((n=>WS(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt))),this.ln.set(e,t),t)}En(e,t,n,i,a,s,c){const d=(t!=null?t.length:1)*Math.max(n.length,a.length),f=d/(t!=null?t.length:1),m=[];for(let p=0;p<d;++p){const y=t?this.dn(t[p/f]):py,b=this.An(e,y,n[p%f],i),T=this.Rn(e,y,a[p%f],s),S=c.map((w=>this.An(e,y,w,!0)));m.push(...this.createRange(b,T,S))}return m}An(e,t,n,i){const a=new Wu(e,rt.empty(),t,n);return i?a:a.Zt()}Rn(e,t,n,i){const a=new Wu(e,rt.empty(),t,n);return i?a.Zt():a}Pn(e,t){const n=new FC(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const c of a)n.rn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s}))}getIndexType(e,t){let n=2;const i=this.hn(t);return we.forEach(i,(a=>this.Pn(e,a).next((s=>{s?n!==0&&s.fields.length<(function(d){let f=new Cr(ln.comparator),m=!1;for(const p of d.filters)for(const y of p.getFlattenedFilters())y.field.isKeyField()||(y.op==="array-contains"||y.op==="array-contains-any"?m=!0:f=f.add(y.field));for(const p of d.orderBy)p.field.isKeyField()||(f=f.add(p.field));return f.size+(m?1:0)})(a)&&(n=1):n=0})))).next((()=>(function(s){return s.limit!==null})(t)&&i.length>1&&n===2?1:n))}Vn(e,t){const n=new am;for(const i of $u(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const s=n.Yt(i.kind);Ku.vt.It(a,s)}return n.zt()}dn(e){const t=new am;return Ku.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new am;return Ku.vt.It(cp(this.databaseId,t),n.Yt((function(a){const s=$u(a);return s.length===0?0:s[s.length-1].kind})(e))),n.zt()}Tn(e,t,n){if(n===null)return[];let i=[];i.push(new am);let a=0;for(const s of $u(e)){const c=n[a++];for(const d of i)if(this.fn(t,s.fieldPath)&&up(c))i=this.gn(i,s,c);else{const f=d.Yt(s.kind);Ku.vt.It(c,f)}}return this.pn(i)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const i=[...e],a=[];for(const s of n.arrayValue.values||[])for(const c of i){const d=new am;d.seed(c.zt()),Ku.vt.It(s,d.Yt(t.kind)),a.push(d)}return a}fn(e,t){return!!e.filters.find((n=>n instanceof er&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in")))}getFieldIndexes(e,t){const n=sm(e),i=Nd(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((a=>{const s=[];return we.forEach(a,(c=>i.get([c.indexId,this.uid]).next((d=>{s.push((function(m,p){const y=p?new ap(p.sequenceNumber,new qa(y0(p.readTime),new rt(oo(p.documentKey)),p.largestBatchId)):ap.empty(),b=m.fields.map((([T,S])=>new tv(ln.fromServerFormat(T),S)));return new _v(m.indexId,m.collectionGroup,b,y)})(c,d))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((n,i)=>{const a=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Dt(n.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=sm(e),a=Nd(e);return this.yn(e).next((s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((c=>we.forEach(c,(d=>a.put(BC(d.indexId,this.uid,s,n))))))))}updateIndexEntries(e,t){const n=new Map;return we.forEach(t,((i,a)=>{const s=n.get(i.collectionGroup);return(s?we.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(n.set(i.collectionGroup,c),we.forEach(c,(d=>this.wn(e,i,d).next((f=>{const m=this.Sn(a,d);return f.isEqual(m)?we.resolve():this.bn(e,a,d,f,m)})))))))}))}Dn(e,t,n,i){return Ed(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,i){return Ed(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const i=Ed(e);let a=new Cr(yc);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},((s,c)=>{a=a.add(new Wu(n.indexId,t,c.arrayValue,c.directionalValue))})).next((()=>a))}Sn(e,t){let n=new Cr(yc);const i=this.Vn(t,e);if(i==null)return n;const a=$S(t);if(a!=null){const s=e.data.field(a.fieldPath);if(up(s))for(const c of s.arrayValue.values||[])n=n.add(new Wu(t.indexId,e.key,this.dn(c),i))}else n=n.add(new Wu(t.indexId,e.key,py,i));return n}bn(e,t,n,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return(function(d,f,m,p,y){const b=d.getIterator(),T=f.getIterator();let S=Ad(b),w=Ad(T);for(;S||w;){let E=!1,I=!1;if(S&&w){const C=m(S,w);C<0?I=!0:C>0&&(E=!0)}else S!=null?I=!0:E=!0;E?(p(w),w=Ad(T)):I?(y(S),S=Ad(b)):(S=Ad(b),w=Ad(T))}})(i,a,yc,(c=>{s.push(this.Dn(e,t,n,c))}),(c=>{s.push(this.vn(e,t,n,c))})),we.waitFor(s)}yn(e){let t=1;return Nd(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((n,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((s,c)=>yc(s,c))).filter(((s,c,d)=>!c||yc(s,d[c-1])!==0));const i=[];i.push(e);for(const s of n){const c=yc(s,e),d=yc(s,t);if(c===0)i[0]=e.Zt();else if(c>0&&d<0)i.push(s),i.push(s.Zt());else if(d>0)break}i.push(t);const a=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];const c=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,py,[]],d=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,py,[]];a.push(IDBKeyRange.bound(c,d))}return a}Cn(e,t){return yc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(GC)}getMinOffset(e,t){return we.mapArray(this.hn(t),(n=>this.Pn(e,n).next((i=>i||dt())))).next(GC)}}function HC(r){return Zn(r,"collectionParents")}function Ed(r){return Zn(r,"indexEntries")}function sm(r){return Zn(r,"indexConfiguration")}function Nd(r){return Zn(r,"indexState")}function GC(r){pt(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;b7(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qa(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fa{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new fa(e,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(r,e,t){const n=r.store("mutations"),i=r.store("documentMutations"),a=[],s=IDBKeyRange.only(t.batchId);let c=0;const d=n.J({range:s},((m,p,y)=>(c++,y.delete())));a.push(d.next((()=>{pt(c===1)})));const f=[];for(const m of t.mutations){const p=rV(e,m.key.path,t.batchId);a.push(i.delete(p)),f.push(m.key)}return we.waitFor(a).next((()=>f))}function Ov(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw dt();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fa.DEFAULT_COLLECTION_PERCENTILE=10,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fa.DEFAULT=new fa(41943040,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fa.DISABLED=new fa(-1,0,0);class dx{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,t,n,i){pt(e.uid!=="");const a=e.isAuthenticated()?e.uid:"";return new dx(a,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).J({index:"userMutationsIndex",range:n},((i,a,s)=>{t=!1,s.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const a=Ud(e),s=vc(e);return s.add({}).next((c=>{pt(typeof c=="number");const d=new O7(c,t,n,i),f=(function(b,T,S){const w=S.baseMutations.map((I=>pp(b.ct,I))),E=S.mutations.map((I=>pp(b.ct,I)));return{userId:T,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:w,mutations:E}})(this.serializer,this.userId,d),m=[];let p=new Cr(((y,b)=>Dt(y.canonicalString(),b.canonicalString())));for(const y of i){const b=rV(this.userId,y.key.path,c);p=p.add(y.key.path.popLast()),m.push(s.put(f)),m.push(a.put(b,FJ))}return p.forEach((y=>{m.push(this.indexManager.addToCollectionParentIndex(e,y))})),e.addOnCommittedListener((()=>{this.Fn[c]=d.keys()})),we.waitFor(m).next((()=>d))}))}lookupMutationBatch(e,t){return vc(e).get(t).next((n=>n?(pt(n.userId===this.userId),Gu(this.serializer,n)):null))}Mn(e,t){return this.Fn[t]?we.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next((n=>{if(n){const i=n.keys();return this.Fn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let a=null;return vc(e).J({index:"userMutationsIndex",range:i},((s,c,d)=>{c.userId===this.userId&&(pt(c.batchId>=n),a=Gu(this.serializer,c)),d.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return vc(e).J({index:"userMutationsIndex",range:t,reverse:!0},((i,a,s)=>{n=a.batchId,s.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vc(e).U("userMutationsIndex",t).next((n=>n.map((i=>Gu(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=rv(this.userId,t.path),i=IDBKeyRange.lowerBound(n),a=[];return Ud(e).J({range:i},((s,c,d)=>{const[f,m,p]=s,y=oo(m);if(f===this.userId&&t.path.isEqual(y))return vc(e).get(p).next((b=>{if(!b)throw dt();pt(b.userId===this.userId),a.push(Gu(this.serializer,b))}));d.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cr(Dt);const i=[];return t.forEach((a=>{const s=rv(this.userId,a.path),c=IDBKeyRange.lowerBound(s),d=Ud(e).J({range:c},((f,m,p)=>{const[y,b,T]=f,S=oo(b);y===this.userId&&a.path.isEqual(S)?n=n.add(T):p.done()}));i.push(d)})),we.waitFor(i).next((()=>this.xn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,a=rv(this.userId,n),s=IDBKeyRange.lowerBound(a);let c=new Cr(Dt);return Ud(e).J({range:s},((d,f,m)=>{const[p,y,b]=d,T=oo(y);p===this.userId&&n.isPrefixOf(T)?T.length===i&&(c=c.add(b)):m.done()})).next((()=>this.xn(e,c)))}xn(e,t){const n=[],i=[];return t.forEach((a=>{i.push(vc(e).get(a).next((s=>{if(s===null)throw dt();pt(s.userId===this.userId),n.push(Gu(this.serializer,s))})))})),we.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return e$(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.On(t.batchId)})),we.forEach(n,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return we.resolve();const n=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Ud(e).J({range:n},((a,s,c)=>{if(a[0]===this.userId){const d=oo(a[1]);i.push(d)}else c.done()})).next((()=>{pt(i.length===0)}))}))}containsKey(e,t){return t$(e,this.userId,t)}Nn(e){return r$(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function t$(r,e,t){const n=rv(e,t.path),i=n[1],a=IDBKeyRange.lowerBound(n);let s=!1;return Ud(r).J({range:a,H:!0},((c,d,f)=>{const[m,p,y]=c;m===e&&p===i&&(s=!0),f.done()})).next((()=>s))}function vc(r){return Zn(r,"mutations")}function Ud(r){return Zn(r,"documentMutations")}function r$(r){return Zn(r,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new v0(0)}static kn(){return new v0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ste{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next((t=>{const n=new v0(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.qn(e).next((t=>yt.fromTimestamp(new cn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.qn(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.qn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i))))}addTargetData(e,t){return this.Kn(e,t).next((()=>this.qn(e).next((n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Od(e).delete(t.targetId))).next((()=>this.qn(e))).next((n=>(pt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n))))}removeTargets(e,t,n){let i=0;const a=[];return Od(e).J(((s,c)=>{const d=km(c);d.sequenceNumber<=t&&n.get(d.targetId)===null&&(i++,a.push(this.removeTargetData(e,d)))})).next((()=>we.waitFor(a))).next((()=>i))}forEachTarget(e,t){return Od(e).J(((n,i)=>{const a=km(i);t(a)}))}qn(e){return WC(e).get("targetGlobalKey").next((t=>(pt(t!==null),t)))}Qn(e,t){return WC(e).put("targetGlobalKey",t)}Kn(e,t){return Od(e).put(QV(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next((t=>t.targetCount))}getTargetData(e,t){const n=m0(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let a=null;return Od(e).J({range:i,index:"queryTargetsIndex"},((s,c,d)=>{const f=km(c);gg(t,f.target)&&(a=f,d.done())})).next((()=>a))}addMatchingKeys(e,t,n){const i=[],a=Ec(e);return t.forEach((s=>{const c=Yi(s.path);i.push(a.put({targetId:n,path:c})),i.push(this.referenceDelegate.addReference(e,n,s))})),we.waitFor(i)}removeMatchingKeys(e,t,n){const i=Ec(e);return we.forEach(t,(a=>{const s=Yi(a.path);return we.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,a)])}))}removeMatchingKeysForTargetId(e,t){const n=Ec(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ec(e);let a=Ht();return i.J({range:n,H:!0},((s,c,d)=>{const f=oo(s[1]),m=new rt(f);a=a.add(m)})).next((()=>a))}containsKey(e,t){const n=Yi(t.path),i=IDBKeyRange.bound([n],[Xz(n)],!1,!0);let a=0;return Ec(e).J({index:"documentTargetsIndex",H:!0,range:i},(([s,c],d,f)=>{s!==0&&(a++,f.done())})).next((()=>a>0))}ot(e,t){return Od(e).get(t).next((n=>n?km(n):null))}}function Od(r){return Zn(r,"targets")}function WC(r){return Zn(r,"targetGlobal")}function Ec(r){return Zn(r,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC([r,e],[t,n]){const i=Dt(r,t);return i===0?Dt(e,n):i}class ote{constructor(e){this.Un=e,this.buffer=new Cr(XC),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();XC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lte{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Jc(t)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Zc(t)}await this.Hn(3e5)}))}}class cte{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return we.resolve(ya.oe);const n=new ote(t);return this.Jn.forEachTarget(e,(i=>n.zn(i.sequenceNumber))).next((()=>this.Jn.Zn(e,(i=>n.zn(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(KC)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KC):this.Xn(e,t)))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,i,a,s,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(n=p,c=Date.now(),this.removeTargets(e,n,t)))).next((p=>(a=p,d=Date.now(),this.removeOrphanedDocuments(e,n)))).next((p=>(f=Date.now(),Pd()<=Jt.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-m}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${a} targets in `+(d-c)+`ms
	Removed ${p} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p}))))}}function ute(r,e){return new cte(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dte{constructor(e,t){this.db=e,this.garbageCollector=ute(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}er(e){let t=0;return this.Zn(e,(n=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,((n,i)=>t(i)))}addReference(e,t,n){return gy(e,n)}removeReference(e,t,n){return gy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return gy(e,t)}nr(e,t){return(function(i,a){let s=!1;return r$(i).Y((c=>t$(i,c,a).next((d=>(d&&(s=!0),we.resolve(!d)))))).next((()=>s))})(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.tr(e,((s,c)=>{if(c<=t){const d=this.nr(e,s).next((f=>{if(!f)return a++,n.getEntry(e,s).next((()=>(n.removeEntry(s,yt.min()),Ec(e).delete((function(p){return[0,Yi(p.path)]})(s)))))}));i.push(d)}})).next((()=>we.waitFor(i))).next((()=>n.apply(e))).next((()=>a))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return gy(e,t)}tr(e,t){const n=Ec(e);let i,a=ya.oe;return n.J({index:"documentTargetsIndex"},(([s,c],{path:d,sequenceNumber:f})=>{s===0?(a!==ya.oe&&t(new rt(oo(i)),a),a=f,i=d):a=ya.oe})).next((()=>{a!==ya.oe&&t(new rt(oo(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gy(r,e){return Ec(r).put((function(n,i){return{targetId:0,path:Yi(n.path),sequenceNumber:i}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(){this.changes=new eu((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?we.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Iu(e).put(n)}removeEntry(e,t,n){return Iu(e).delete((function(a,s){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Ev(s),c[c.length-1]]})(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.rr(e,n))))}getEntry(e,t){let n=en.newInvalidDocument(t);return Iu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(om(t))},((i,a)=>{n=this.ir(t,a)})).next((()=>n))}sr(e,t){let n={size:0,document:en.newInvalidDocument(t)};return Iu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(om(t))},((i,a)=>{n={document:this.ir(t,a),size:Ov(a)}})).next((()=>n))}getEntries(e,t){let n=La();return this._r(e,t,((i,a)=>{const s=this.ir(i,a);n=n.insert(i,s)})).next((()=>n))}ar(e,t){let n=La(),i=new Fr(rt.comparator);return this._r(e,t,((a,s)=>{const c=this.ir(a,s);n=n.insert(a,c),i=i.insert(a,Ov(s))})).next((()=>({documents:n,ur:i})))}_r(e,t,n){if(t.isEmpty())return we.resolve();let i=new Cr(ZC);t.forEach((d=>i=i.add(d)));const a=IDBKeyRange.bound(om(i.first()),om(i.last())),s=i.getIterator();let c=s.getNext();return Iu(e).J({index:"documentKeyIndex",range:a},((d,f,m)=>{const p=rt.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&ZC(c,p)<0;)n(c,null),c=s.getNext();c&&c.isEqual(p)&&(n(c,f),c=s.hasNext()?s.getNext():null),c?m.$(om(c)):m.done()})).next((()=>{for(;c;)n(c,null),c=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,a){const s=t.path,c=[s.popLast().toArray(),s.lastSegment(),Ev(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Iu(e).U(IDBKeyRange.bound(c,d,!0)).next((f=>{a==null||a.incrementDocumentReadCount(f.length);let m=La();for(const p of f){const y=this.ir(rt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);y.isFoundDocument()&&(vg(t,y)||i.has(y.key))&&(m=m.insert(y.key,y))}return m}))}getAllFromCollectionGroup(e,t,n,i){let a=La();const s=YC(t,n),c=YC(t,qa.max());return Iu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},((d,f,m)=>{const p=this.ir(rt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(p.key,p),a.size===i&&m.done()})).next((()=>a))}newChangeBuffer(e){return new fte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return QC(e).get("remoteDocumentGlobalKey").next((t=>(pt(!!t),t)))}rr(e,t){return QC(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const n=Qee(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(yt.min())))return n}return en.newInvalidDocument(e)}}function i$(r){return new hte(r)}class fte extends n${constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new eu((n=>n.toString()),((n,i)=>n.isEqual(i)))}applyChanges(e){const t=[];let n=0,i=new Cr(((a,s)=>Dt(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const c=this.lr.get(a);if(t.push(this.cr.removeEntry(e,a,c.readTime)),s.isValidDocument()){const d=DC(this.cr.serializer,s);i=i.add(a.path.popLast());const f=Ov(d);n+=f-c.size,t.push(this.cr.addEntry(e,a,d))}else if(n-=c.size,this.trackRemovals){const d=DC(this.cr.serializer,s.convertToNoDocument(yt.min()));t.push(this.cr.addEntry(e,a,d))}})),i.forEach((a=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.cr.updateMetadata(e,n)),we.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next((n=>(this.lr.set(t,{size:n.size,readTime:n.document.readTime}),n.document)))}getAllFromCache(e,t){return this.cr.ar(e,t).next((({documents:n,ur:i})=>(i.forEach(((a,s)=>{this.lr.set(a,{size:s,readTime:n.get(a).readTime})})),n)))}}function QC(r){return Zn(r,"remoteDocumentGlobal")}function Iu(r){return Zn(r,"remoteDocumentsV14")}function om(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function YC(r,e){const t=e.documentKey.path.toArray();return[r,Ev(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ZC(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<n.length-2;++a)if(i=Dt(t[a],n[a]),i)return i;return i=Dt(t.length,n.length),i||(i=Dt(t[t.length-2],n[n.length-2]),i||Dt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mte{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&zm(n.mutation,i,va.empty(),cn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Ht()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Ht()){const i=lo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((a=>{let s=Nm();return a.forEach(((c,d)=>{s=s.insert(c,d.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const n=lo();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ht())))}populateOverlays(e,t,n){const i=[];return n.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,c)=>{t.set(s,c)}))}))}computeViews(e,t,n,i){let a=La();const s=Um(),c=(function(){return Um()})();return t.forEach(((d,f)=>{const m=n.get(f.key);i.has(f.key)&&(m===void 0||m.mutation instanceof jl)?a=a.insert(f.key,f):m!==void 0?(s.set(f.key,m.mutation.getFieldMask()),zm(m.mutation,f,m.mutation.getFieldMask(),cn.now())):s.set(f.key,va.empty())})),this.recalculateAndSaveOverlays(e,a).next((d=>(d.forEach(((f,m)=>s.set(f,m))),t.forEach(((f,m)=>{var p;return c.set(f,new mte(m,(p=s.get(f))!==null&&p!==void 0?p:null))})),c)))}recalculateAndSaveOverlays(e,t){const n=Um();let i=new Fr(((s,c)=>s-c)),a=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const c of s)c.keys().forEach((d=>{const f=t.get(d);if(f===null)return;let m=n.get(d)||va.empty();m=c.applyToLocalView(f,m),n.set(d,m);const p=(i.get(c.batchId)||Ht()).add(d);i=i.insert(c.batchId,p)}))})).next((()=>{const s=[],c=i.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,p=AV();m.forEach((y=>{if(!a.has(y)){const b=IV(t.get(y),n.get(y));b!==null&&p.set(y,b),a=a.add(y)}})),s.push(this.documentOverlayCache.saveOverlays(e,f,p))}return we.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(s){return rt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):we.resolve(lo());let c=-1,d=a;return s.next((f=>we.forEach(f,((m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?we.resolve():this.remoteDocumentCache.getEntry(e,m).next((y=>{d=d.insert(m,y)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,d,f,Ht()))).next((m=>({batchId:c,changes:TV(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next((n=>{let i=Nm();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const a=t.collectionGroup;let s=Nm();return this.indexManager.getCollectionParents(e,a).next((c=>we.forEach(c,(d=>{const f=(function(p,y){return new Wh(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,d.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,n,i).next((m=>{m.forEach(((p,y)=>{s=s.insert(p,y)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,i)))).next((s=>{a.forEach(((d,f)=>{const m=f.getKey();s.get(m)===null&&(s=s.insert(m,en.newInvalidDocument(m)))}));let c=Nm();return s.forEach(((d,f)=>{const m=a.get(d);m!==void 0&&zm(m.mutation,f,va.empty(),cn.now()),vg(t,f)&&(c=c.insert(d,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pte{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return we.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:oi(i.createTime)}})(t)),we.resolve()}getNamedQuery(e,t){return we.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:YV(i.bundledQuery),readTime:oi(i.readTime)}})(t)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gte{constructor(){this.overlays=new Fr(rt.comparator),this.Ir=new Map}getOverlay(e,t){return we.resolve(this.overlays.get(t))}getOverlays(e,t){const n=lo();return we.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&n.set(i,a)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,a)=>{this.ht(e,t,a)})),we.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Ir.delete(n)),we.resolve()}getOverlaysForCollection(e,t,n){const i=lo(),a=t.length+1,s=new rt(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&d.largestBatchId>n&&i.set(d.getKey(),d)}return we.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let a=new Fr(((f,m)=>f-m));const s=this.overlays.getIterator();for(;s.hasNext();){const f=s.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>n){let m=a.get(f.largestBatchId);m===null&&(m=lo(),a=a.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=lo(),d=a.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((f,m)=>c.set(f,m))),!(c.size()>=i)););return we.resolve(c)}ht(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new C7(t,n));let a=this.Ir.get(t);a===void 0&&(a=Ht(),this.Ir.set(t,a)),this.Ir.set(t,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yte{constructor(){this.sessionToken=Cn.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(){this.Tr=new Cr(ai.Er),this.dr=new Cr(ai.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new ai(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Vr(new ai(e,t))}mr(e,t){e.forEach((n=>this.removeReference(n,t)))}gr(e){const t=new rt(new cr([])),n=new ai(t,e),i=new ai(t,e+1),a=[];return this.dr.forEachInRange([n,i],(s=>{this.Vr(s),a.push(s.key)})),a}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new rt(new cr([])),n=new ai(t,e),i=new ai(t,e+1);let a=Ht();return this.dr.forEachInRange([n,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const t=new ai(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ai{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return rt.comparator(e.key,t.key)||Dt(e.wr,t.wr)}static Ar(e,t){return Dt(e.wr,t.wr)||rt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vte{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Cr(ai.Er)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new O7(a,t,n,i);this.mutationQueue.push(s);for(const c of i)this.br=this.br.add(new ai(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,t){return we.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ai(t,0),i=new ai(t,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],(s=>{const c=this.Dr(s.wr);a.push(c)})),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cr(Dt);return t.forEach((i=>{const a=new ai(i,0),s=new ai(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],(c=>{n=n.add(c.wr)}))})),we.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let a=n;rt.isDocumentKey(a)||(a=a.child(""));const s=new ai(new rt(a),0);let c=new Cr(Dt);return this.br.forEachWhile((d=>{const f=d.key.path;return!!n.isPrefixOf(f)&&(f.length===i&&(c=c.add(d.wr)),!0)}),s),we.resolve(this.Cr(c))}Cr(e){const t=[];return e.forEach((n=>{const i=this.Dr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){pt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return we.forEach(t.mutations,(i=>{const a=new ai(i.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=n}))}On(e){}containsKey(e,t){const n=new ai(t,0),i=this.br.firstAfterOrEqual(n);return we.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bte{constructor(e){this.Mr=e,this.docs=(function(){return new Fr(rt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),a=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return we.resolve(n?n.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let n=La();return t.forEach((i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():en.newInvalidDocument(i))})),we.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let a=La();const s=t.path,c=new rt(s.child("")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||b7(Yz(m),n)<=0||(i.has(m.key)||vg(t,m))&&(a=a.insert(m.key,m.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,t,n,i){dt()}Or(e,t){return we.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new xte(this)}getSize(e){return we.resolve(this.size)}}class xte extends n${constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)})),we.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.persistence=e,this.Nr=new eu((t=>m0(t)),gg),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new P7,this.targetCount=0,this.kr=v0.Bn()}forEachTarget(e,t){return this.Nr.forEach(((n,i)=>t(i))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),we.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new v0(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,we.resolve()}updateTargetData(e,t){return this.Kn(t),we.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,t,n){let i=0;const a=[];return this.Nr.forEach(((s,c)=>{c.sequenceNumber<=t&&n.get(c.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),we.waitFor(a).next((()=>i))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return we.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),we.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),we.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),we.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return we.resolve(n)}containsKey(e,t){return we.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,t){this.qr={},this.overlays={},this.Qr=new ya(0),this.Kr=!1,this.Kr=!0,this.$r=new yte,this.referenceDelegate=e(this),this.Ur=new wte(this),this.indexManager=new ite,this.remoteDocumentCache=(function(i){return new bte(i)})((n=>this.referenceDelegate.Wr(n))),this.serializer=new XV(t),this.Gr=new pte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gte,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new vte(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ve("MemoryPersistence","Starting transaction:",e);const i=new _te(this.Qr.next());return this.referenceDelegate.zr(),n(i).next((a=>this.referenceDelegate.jr(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Hr(e,t){return we.or(Object.values(this.qr).map((n=>()=>n.containsKey(e,t))))}}class _te extends Jz{constructor(e){super(),this.currentSequenceNumber=e}}class hx{constructor(e){this.persistence=e,this.Jr=new P7,this.Yr=null}static Zr(e){return new hx(e)}get Xr(){if(this.Yr)return this.Yr;throw dt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),we.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),we.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),we.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((i=>this.Xr.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.Xr.add(a.toString())))})).next((()=>n.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Xr,(n=>{const i=rt.fromPath(n);return this.ei(e,i).next((a=>{a||t.removeEntry(i,yt.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return we.or([()=>we.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(e){this.serializer=e}O(e,t,n,i){const a=new ax("createOrUpgrade",t);n<1&&i>=1&&((function(d){d.createObjectStore("owner")})(e),(function(d){d.createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0}),d.createObjectStore("documentMutations")})(e),JC(e),(function(d){d.createObjectStore("remoteDocuments")})(e));let s=we.resolve();return n<3&&i>=3&&(n!==0&&((function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")})(e),JC(e)),s=s.next((()=>(function(d){const f=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)})(a)))),n<4&&i>=4&&(n!==0&&(s=s.next((()=>(function(d,f){return f.store("mutations").U().next((m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hC,{unique:!0});const p=f.store("mutations"),y=m.map((b=>p.put(b)));return we.waitFor(y)}))})(e,a)))),s=s.next((()=>{(function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)}))),n<5&&i>=5&&(s=s.next((()=>this.ni(a)))),n<6&&i>=6&&(s=s.next((()=>((function(d){d.createObjectStore("remoteDocumentGlobal")})(e),this.ri(a))))),n<7&&i>=7&&(s=s.next((()=>this.ii(a)))),n<8&&i>=8&&(s=s.next((()=>this.si(e,a)))),n<9&&i>=9&&(s=s.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),n<10&&i>=10&&(s=s.next((()=>this.oi(a)))),n<11&&i>=11&&(s=s.next((()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),(function(d){d.createObjectStore("namedQueries",{keyPath:"name"})})(e)}))),n<12&&i>=12&&(s=s.next((()=>{(function(d){const f=d.createObjectStore("documentOverlays",{keyPath:tee});f.createIndex("collectionPathOverlayIndex",ree,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",nee,{unique:!1})})(e)}))),n<13&&i>=13&&(s=s.next((()=>(function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:qJ});f.createIndex("documentKeyIndex",HJ),f.createIndex("collectionGroupIndex",GJ)})(e))).next((()=>this._i(e,a))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.ai(e,a)))),n<15&&i>=15&&(s=s.next((()=>(function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:YJ}).createIndex("sequenceNumberIndex",ZJ,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:JJ}).createIndex("documentKeyIndex",eee,{unique:!1})})(e)))),n<16&&i>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&i>=17&&(s=s.next((()=>{(function(d){d.createObjectStore("globals",{keyPath:"name"})})(e)}))),s}ri(e){let t=0;return e.store("remoteDocuments").J(((n,i)=>{t+=Ov(i)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((i=>we.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",s).next((c=>we.forEach(c,(d=>{pt(d.userId===a.userId);const f=Gu(this.serializer,d);return e$(e,a.userId,f).next((()=>{}))}))))}))))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((i=>{const a=[];return n.J(((s,c)=>{const d=new cr(s),f=(function(p){return[0,Yi(p)]})(d);a.push(t.get(f).next((m=>m?we.resolve():(p=>t.put({targetId:0,path:Yi(p),sequenceNumber:i.highestListenSequenceNumber}))(d))))})).next((()=>we.waitFor(a)))}))}si(e,t){e.createObjectStore("collectionParents",{keyPath:QJ});const n=t.store("collectionParents"),i=new M7,a=s=>{if(i.add(s)){const c=s.lastSegment(),d=s.popLast();return n.put({collectionId:c,parent:Yi(d)})}};return t.store("remoteDocuments").J({H:!0},((s,c)=>{const d=new cr(s);return a(d.popLast())})).next((()=>t.store("documentMutations").J({H:!0},(([s,c,d],f)=>{const m=oo(c);return a(m.popLast())}))))}oi(e){const t=e.store("targets");return t.J(((n,i)=>{const a=km(i),s=QV(this.serializer,a);return t.put(s)}))}_i(e,t){const n=t.store("remoteDocuments"),i=[];return n.J(((a,s)=>{const c=t.store("remoteDocumentsV14"),d=(function(p){return p.document?new rt(cr.fromString(p.document.name).popFirst(5)):p.noDocument?rt.fromSegments(p.noDocument.path):p.unknownDocument?rt.fromSegments(p.unknownDocument.path):dt()})(s).path.toArray(),f={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(c.put(f))})).next((()=>we.waitFor(i)))}ai(e,t){const n=t.store("mutations"),i=i$(this.serializer),a=new s$(hx.Zr,this.serializer.ct);return n.U().next((s=>{const c=new Map;return s.forEach((d=>{var f;let m=(f=c.get(d.userId))!==null&&f!==void 0?f:Ht();Gu(this.serializer,d).keys().forEach((p=>m=m.add(p))),c.set(d.userId,m)})),we.forEach(c,((d,f)=>{const m=new Mi(f),p=ux.lt(this.serializer,m),y=a.getIndexManager(m),b=dx.lt(m,this.serializer,y,a.referenceDelegate);return new a$(i,b,p,y).recalculateAndSaveOverlaysForDocumentKeys(new FS(t,ya.oe),d).next()}))}))}}function JC(r){r.createObjectStore("targetDocuments",{keyPath:WJ}).createIndex("documentTargetsIndex",XJ,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KJ,{unique:!0}),r.createObjectStore("targetGlobal")}const zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class D7{constructor(e,t,n,i,a,s,c,d,f,m,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=a,this.window=s,this.document=c,this.ci=f,this.li=m,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!D7.D())throw new We(Oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dte(this,i),this.Ai=t+"main",this.serializer=new XV(d),this.Ri=new zc(this.Ai,this.hi,new Ste(this.serializer)),this.$r=new Zee,this.Ur=new ste(this.referenceDelegate,this.serializer),this.remoteDocumentCache=i$(this.serializer),this.Gr=new Yee,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,m===!1&&En("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(Oe.FAILED_PRECONDITION,zw);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Ur.getHighestSequenceNumber(e)))})).then((e=>{this.Qr=new ya(e,this.ci)})).then((()=>{this.Kr=!0})).catch((e=>(this.Ri&&this.Ri.close(),Promise.reject(e))))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((async()=>{this.started&&await this.mi()})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.wi(e).next((t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))))}))})).next((()=>this.Si(e))).next((t=>this.isPrimary&&!t?this.bi(e).next((()=>!1)):!!t&&this.Di(e).next((()=>!0)))))).catch((e=>{if(Jc(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ui.enqueueRetryable((()=>this.di(e))),this.isPrimary=e}))}wi(e){return lm(e).get("owner").next((t=>we.resolve(this.vi(t))))}Ci(e){return yy(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const n=Zn(t,"clientMetadata");return n.U().next((i=>{const a=this.xi(i,18e5),s=i.filter((c=>a.indexOf(c)===-1));return we.forEach(s,(c=>n.delete(c.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.mi().then((()=>this.Fi())).then((()=>this.pi()))))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?we.resolve(!0):lm(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new We(Oe.FAILED_PRECONDITION,zw);return!1}}return!(!this.networkEnabled||!this.inForeground)||yy(e).U().next((n=>this.xi(n,5e3).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||s&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new FS(e,ya.oe);return this.bi(t).next((()=>this.Ci(t)))})),this.Ri.close(),this.qi()}xi(e,t){return e.filter((n=>this.Mi(n.updateTimeMs,t)&&!this.Ni(n.clientId)))}Qi(){return this.runTransaction("getActiveClients","readonly",(e=>yy(e).U().next((t=>this.xi(t,18e5).map((n=>n.clientId))))))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return dx.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ate(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ux.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){Ve("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(d){return d===17?see:d===16?aee:d===15?w7:d===14?aV:d===13?iV:d===12?iee:d===11?nV:void dt()})(this.hi);let s;return this.Ri.runTransaction(e,i,a,(c=>(s=new FS(c,this.Qr?this.Qr.next():ya.oe),t==="readwrite-primary"?this.wi(s).next((d=>!!d||this.Si(s))).next((d=>{if(!d)throw En(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable((()=>this.di(!1))),new We(Oe.FAILED_PRECONDITION,Zz);return n(s)})).next((d=>this.Di(s).next((()=>d)))):this.Ki(s).next((()=>n(s)))))).then((c=>(s.raiseOnCommittedEvent(),c)))}Ki(e){return lm(e).get("owner").next((t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new We(Oe.FAILED_PRECONDITION,zw)}))}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lm(e).put("owner",t)}static D(){return zc.D()}bi(e){const t=lm(e);return t.get("owner").next((n=>this.vi(n)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):we.resolve()))}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(En(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.mi())))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;nz()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Ve("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return En("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){En("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lm(r){return Zn(r,"owner")}function yy(r){return Zn(r,"clientMetadata")}function o$(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=Ht(),i=Ht();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new L7(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return nz()?8:eV(Qn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const a={result:null};return this.Yi(e,t).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.Zi(e,t,i,n).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new Tte;return this.Xi(e,t,s).next((c=>{if(a.result=c,this.zi)return this.es(e,t,s,c.size)}))})).next((()=>a.result))}es(e,t,n,i){return n.documentReadCount<this.ji?(Pd()<=Jt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Dd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),we.resolve()):(Pd()<=Jt.DEBUG&&Ve("QueryEngine","Query:",Dd(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Pd()<=Jt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Dd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,za(t))):we.resolve())}Yi(e,t){if(AC(t))return we.resolve(null);let n=za(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Av(t,null,"F"),n=za(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((a=>{const s=Ht(...a);return this.Ji.getDocuments(e,s).next((c=>this.indexManager.getMinOffset(e,n).next((d=>{const f=this.ts(t,c);return this.ns(t,f,s,d.readTime)?this.Yi(e,Av(t,null,"F")):this.rs(e,f,t,d)}))))})))))}Zi(e,t,n,i){return AC(t)||i.isEqual(yt.min())?we.resolve(null):this.Ji.getDocuments(e,n).next((a=>{const s=this.ts(t,a);return this.ns(t,s,n,i)?we.resolve(null):(Pd()<=Jt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Dd(t)),this.rs(e,s,t,Qz(i,-1)).next((c=>c)))}))}ts(e,t){let n=new Cr(_V(e));return t.forEach(((i,a)=>{vg(e,a)&&(n=n.add(a))})),n}ns(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,t,n){return Pd()<=Jt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Dd(t)),this.Ji.getDocumentsMatchingQuery(e,t,qa.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next((a=>(t.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Fr(Dt),this._s=new eu((a=>m0(a)),gg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a$(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function c$(r,e,t,n){return new Ate(r,e,t,n)}async function u$(r,e){const t=mt(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((a=>(i=a,t.ls(e),t.mutationQueue.getAllMutationBatches(n)))).next((a=>{const s=[],c=[];let d=Ht();for(const f of i){s.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of a){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return t.localDocuments.getDocuments(n,d).next((f=>({hs:f,removedBatchIds:s,addedBatchIds:c})))}))}))}function Ete(r,e){const t=mt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),a=t.cs.newChangeBuffer({trackRemovals:!0});return(function(c,d,f,m){const p=f.batch,y=p.keys();let b=we.resolve();return y.forEach((T=>{b=b.next((()=>m.getEntry(d,T))).next((S=>{const w=f.docVersions.get(T);pt(w!==null),S.version.compareTo(w)<0&&(p.applyToRemoteDocument(S,f),S.isValidDocument()&&(S.setReadTime(f.commitVersion),m.addEntry(S)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(d,p)))})(t,n,e,a).next((()=>a.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(c){let d=Ht();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function d$(r){const e=mt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Nte(r,e){const t=mt(r),n=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const c=[];e.targetChanges.forEach(((m,p)=>{const y=i.get(p);if(!y)return;c.push(t.Ur.removeMatchingKeys(a,m.removedDocuments,p).next((()=>t.Ur.addMatchingKeys(a,m.addedDocuments,p))));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(Cn.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,n)),i=i.insert(p,b),(function(S,w,E){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0})(y,b,m)&&c.push(t.Ur.updateTargetData(a,b))}));let d=La(),f=Ht();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,m))})),c.push(Ote(a,s,e.documentUpdates).next((m=>{d=m.Ps,f=m.Is}))),!n.isEqual(yt.min())){const m=t.Ur.getLastRemoteSnapshotVersion(a).next((p=>t.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n)));c.push(m)}return we.waitFor(c).next((()=>s.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,d,f))).next((()=>d))})).then((a=>(t.os=i,a)))}function Ote(r,e,t){let n=Ht(),i=Ht();return t.forEach((a=>n=n.add(a))),e.getEntries(r,n).next((a=>{let s=La();return t.forEach(((c,d)=>{const f=a.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(c)),d.isNoDocument()&&d.version.isEqual(yt.min())?(e.removeEntry(c,d.readTime),s=s.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),s=s.insert(c,d)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)})),{Ps:s,Is:i}}))}function kte(r,e){const t=mt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function kv(r,e){const t=mt(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Ur.getTargetData(n,e).next((a=>a?(i=a,we.resolve(i)):t.Ur.allocateTargetId(n).next((s=>(i=new ll(e,s,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n}))}async function dh(r,e,t){const n=mt(r),i=n.os.get(e),a=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",a,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Jc(s))throw s;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function nT(r,e,t){const n=mt(r);let i=yt.min(),a=Ht();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(d,f,m){const p=mt(d),y=p._s.get(m);return y!==void 0?we.resolve(p.os.get(y)):p.Ur.getTargetData(f,m)})(n,s,za(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(s,c.targetId).next((d=>{a=d}))})).next((()=>n.ss.getDocumentsMatchingQuery(s,e,t?i:yt.min(),t?a:Ht()))).next((c=>(m$(n,wV(e),c),{documents:c,Ts:a})))))}function h$(r,e){const t=mt(r),n=mt(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(a=>n.ot(a,e).next((s=>s?s.target:null))))}function f$(r,e){const t=mt(r),n=t.us.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.cs.getAllFromCollectionGroup(i,e,Qz(n,-1),Number.MAX_SAFE_INTEGER))).then((i=>(m$(t,e,i),i)))}function m$(r,e,t){let n=r.us.get(e)||yt.min();t.forEach(((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)})),r.us.set(e,n)}function ej(r,e){return`firestore_clients_${r}_${e}`}function tj(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Vw(r,e){return`firestore_targets_${r}_${e}`}class Cv{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Rs(e,t,n){const i=JSON.parse(n);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new We(i.error.code,i.error.message))),s?new Cv(e,t,i.state,a):(En("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vm{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let i,a=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return a&&n.error&&(a=typeof n.error.message=="string"&&typeof n.error.code=="string",a&&(i=new We(n.error.code,n.error.message))),a?new Vm(e,n.state,i):(En("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,a=A7();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=tV(n.activeTargetIds[s]),a=a.add(n.activeTargetIds[s]);return i?new jv(e,a):(En("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class B7{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new B7(t.clientId,t.onlineState):(En("SharedClientState",`Failed to parse online state: ${e}`),null)}}class iT{constructor(){this.activeTargetIds=A7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $w{constructor(e,t,n,i,a){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Fr(Dt),this.started=!1,this.bs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ds=ej(this.persistenceKey,this.ps),this.vs=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new iT),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.Os=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(ej(this.persistenceKey,n));if(i){const a=jv.Rs(n,i);a&&(this.Ss=this.Ss.insert(a.clientId,a))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const n=this.Ls(t);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Vw(this.persistenceKey,e));if(i){const a=Vm.Rs(e,i);a&&(n=a.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Vw(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach((i=>{this.Qs(i)})),this.currentUser=e,n.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Ve("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void En("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const n=this.Gs(t.key);return this.zs(n,null)}{const n=this.js(t.key,t.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const n=this.Hs(t.key,t.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const n=this.Ys(t.key,t.newValue);if(n)return this.Zs(n)}}else if(t.key===this.xs){if(t.newValue!==null){const n=this.Ls(t.newValue);if(n)return this.Bs(n)}}else if(t.key===this.vs){const n=(function(a){let s=ya.oe;if(a!=null)try{const c=JSON.parse(a);pt(typeof c=="number"),s=c}catch(c){En("SharedClientState","Failed to read sequence number from WebStorage",c)}return s})(t.newValue);n!==ya.oe&&this.sequenceNumberHandler(n)}else if(t.key===this.Os){const n=this.Xs(t.newValue);await Promise.all(n.map((i=>this.syncEngine.eo(i))))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const i=new Cv(this.currentUser,e,t,n),a=tj(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Vs())}Qs(e){const t=tj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const i=Vw(this.persistenceKey,e),a=new Vm(e,t,n);this.setItem(i,a.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return jv.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),i=Number(n[1]),a=n[2]!==void 0?n[2]:null;return Cv.Rs(new Mi(a),i,t)}Ys(e,t){const n=this.Ms.exec(e),i=Number(n[1]);return Vm.Rs(i,t)}Ls(e){return B7.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),a=this.ks(n),s=[],c=[];return a.forEach((d=>{i.has(d)||s.push(d)})),i.forEach((d=>{a.has(d)||c.push(d)})),this.syncEngine.io(s,c).then((()=>{this.Ss=n}))}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=A7();return e.forEach(((n,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class p${constructor(){this.so=new iT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new iT,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vy=null;function Fw(){return vy===null?vy=(function(){return 268435456+Math.round(2147483648*Math.random())})():vy++,"0x"+vy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="WebChannelConnection";class Rte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(t,n,i,a,s){const c=Fw(),d=this.xo(t,n.toUriEncodedString());Ve("RestConnection",`Sending RPC '${t}' ${c}:`,d,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,a,s),this.No(t,d,f,i).then((m=>(Ve("RestConnection",`Received RPC '${t}' ${c}: `,m),m)),(m=>{throw np("RestConnection",`RPC '${t}' ${c} failed with error: `,m,"url: ",d,"request:",i),m}))}Lo(t,n,i,a,s,c){return this.Mo(t,n,i,a,s)}Oo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Kh})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,s)=>t[s]=a)),i&&i.headers.forEach(((a,s)=>t[s]=a))}xo(t,n){const i=jte[t];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const a=Fw();return new Promise(((s,c)=>{const d=new Fz;d.setWithCredentials(!0),d.listenOnce(qz.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case ev.NO_ERROR:const m=d.getResponseJson();Ve(ji,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),s(m);break;case ev.TIMEOUT:Ve(ji,`RPC '${e}' ${a} timed out`),c(new We(Oe.DEADLINE_EXCEEDED,"Request time out"));break;case ev.HTTP_ERROR:const p=d.getStatus();if(Ve(ji,`RPC '${e}' ${a} failed with status:`,p,"response text:",d.getResponseText()),p>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=(function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(Oe).indexOf(E)>=0?E:Oe.UNKNOWN})(b.status);c(new We(T,b.message))}else c(new We(Oe.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new We(Oe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve(ji,`RPC '${e}' ${a} completed.`)}}));const f=JSON.stringify(i);Ve(ji,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",f,n,15)}))}Bo(e,t,n){const i=Fw(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Kz(),c=Gz(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,n),d.encodeInitMessageHeaders=!0;const m=a.join("");Ve(ji,`Creating RPC '${e}' stream ${i}: ${m}`,d);const p=s.createWebChannel(m,d);let y=!1,b=!1;const T=new Ite({Io:w=>{b?Ve(ji,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(y||(Ve(ji,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Ve(ji,`RPC '${e}' stream ${i} sending:`,w),p.send(w))},To:()=>p.close()}),S=(w,E,I)=>{w.listen(E,(C=>{try{I(C)}catch(B){setTimeout((()=>{throw B}),0)}}))};return S(p,Em.EventType.OPEN,(()=>{b||(Ve(ji,`RPC '${e}' stream ${i} transport opened.`),T.yo())})),S(p,Em.EventType.CLOSE,(()=>{b||(b=!0,Ve(ji,`RPC '${e}' stream ${i} transport closed`),T.So())})),S(p,Em.EventType.ERROR,(w=>{b||(b=!0,np(ji,`RPC '${e}' stream ${i} transport errored:`,w),T.So(new We(Oe.UNAVAILABLE,"The operation could not be completed")))})),S(p,Em.EventType.MESSAGE,(w=>{var E;if(!b){const I=w.data[0];pt(!!I);const C=I,B=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(B){Ve(ji,`RPC '${e}' stream ${i} received error:`,B);const R=B.status;let D=(function(N){const U=Bn[N];if(U!==void 0)return PV(U)})(R),A=B.message;D===void 0&&(D=Oe.INTERNAL,A="Unknown error status: "+R+" with message "+B.message),b=!0,T.So(new We(D,A)),p.close()}else Ve(ji,`RPC '${e}' stream ${i} received:`,I),T.bo(I)}})),S(c,Hz.STAT_EVENT,(w=>{w.stat===VS.PROXY?Ve(ji,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===VS.NOPROXY&&Ve(ji,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{T.wo()}),0),T}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(){return typeof window<"u"?window:null}function ov(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(r){return new Uee(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,t,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,t,n,i,a,s,c,d){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new U7(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Oe.RESOURCE_EXHAUSTED?(En(t.toString()),En("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.Yo===t&&this.P_(n,i)}),(n=>{e((()=>{const i=new We(Oe.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)}))}))}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{n((()=>this.I_(i)))})),this.stream.onMessage((i=>{n((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mte extends y${constructor(e,t,n,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=Fee(this.serializer,e),n=(function(a){if(!("targetChange"in a))return yt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?yt.min():s.readTime?oi(s.readTime):yt.min()})(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=ZS(this.serializer),t.addTarget=(function(a,s){let c;const d=s.target;if(c=Sv(d)?{documents:FV(a,d)}:{query:qV(a,d)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=BV(a,s.resumeToken);const f=QS(a,s.expectedCount);f!==null&&(c.expectedCount=f)}else if(s.snapshotVersion.compareTo(yt.min())>0){c.readTime=uh(a,s.snapshotVersion.toTimestamp());const f=QS(a,s.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const n=Hee(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=ZS(this.serializer),t.removeTarget=e,this.a_(t)}}class Pte extends y${constructor(e,t,n,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return pt(!!e.streamToken),this.lastStreamToken=e.streamToken,pt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=qee(e.writeResults,e.commitTime),n=oi(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=ZS(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>pp(this.serializer,n)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new We(Oe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Mo(e,YS(t,n),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new We(Oe.UNKNOWN,a.toString())}))}Lo(e,t,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,c])=>this.connection.Lo(e,YS(t,n),i,s,c,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(Oe.UNKNOWN,s.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Lte{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(En(t),this.D_=!1):Ve("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bte{constructor(e,t,n,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o((s=>{n.enqueueAndForget((async()=>{R0(this)&&(Ve("RemoteStore","Restarting streams for network reachability change."),await(async function(d){const f=mt(d);f.L_.add(4),await _g(f),f.q_.set("Unknown"),f.L_.delete(4),await mx(f)})(this))}))})),this.q_=new Lte(n,i)}}async function mx(r){if(R0(r))for(const e of r.B_)await e(!0)}async function _g(r){for(const e of r.B_)await e(!1)}function px(r,e){const t=mt(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),$7(t)?V7(t):Yh(t).r_()&&z7(t,e))}function hh(r,e){const t=mt(r),n=Yh(t);t.N_.delete(e),n.r_()&&v$(t,e),t.N_.size===0&&(n.r_()?n.o_():R0(t)&&t.q_.set("Unknown"))}function z7(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Yh(r).A_(e)}function v$(r,e){r.Q_.xe(e),Yh(r).R_(e)}function V7(r){r.Q_=new Pee({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Yh(r).start(),r.q_.v_()}function $7(r){return R0(r)&&!Yh(r).n_()&&r.N_.size>0}function R0(r){return mt(r).L_.size===0}function b$(r){r.Q_=void 0}async function Ute(r){r.q_.set("Online")}async function zte(r){r.N_.forEach(((e,t)=>{z7(r,e)}))}async function Vte(r,e){b$(r),$7(r)?(r.q_.M_(e),V7(r)):r.q_.set("Unknown")}async function $te(r,e,t){if(r.q_.set("Online"),e instanceof LV&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const c of a.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.N_.delete(c),i.Q_.removeTarget(c))})(r,e)}catch(n){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Iv(r,n)}else if(e instanceof sv?r.Q_.Ke(e):e instanceof DV?r.Q_.He(e):r.Q_.We(e),!t.isEqual(yt.min()))try{const n=await d$(r.localStore);t.compareTo(n)>=0&&await(function(a,s){const c=a.Q_.rt(s);return c.targetChanges.forEach(((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=a.N_.get(f);m&&a.N_.set(f,m.withResumeToken(d.resumeToken,s))}})),c.targetMismatches.forEach(((d,f)=>{const m=a.N_.get(d);if(!m)return;a.N_.set(d,m.withResumeToken(Cn.EMPTY_BYTE_STRING,m.snapshotVersion)),v$(a,d);const p=new ll(m.target,d,f,m.sequenceNumber);z7(a,p)})),a.remoteSyncer.applyRemoteEvent(c)})(r,t)}catch(n){Ve("RemoteStore","Failed to raise snapshot:",n),await Iv(r,n)}}async function Iv(r,e,t){if(!Jc(e))throw e;r.L_.add(1),await _g(r),r.q_.set("Offline"),t||(t=()=>d$(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Ve("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await mx(r)}))}function x$(r,e){return e().catch((t=>Iv(r,t,e)))}async function Qh(r){const e=mt(r),t=Kc(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fte(e);)try{const i=await kte(e.localStore,n);if(i===null){e.O_.length===0&&t.o_();break}n=i.batchId,qte(e,i)}catch(i){await Iv(e,i)}w$(e)&&_$(e)}function Fte(r){return R0(r)&&r.O_.length<10}function qte(r,e){r.O_.push(e);const t=Kc(r);t.r_()&&t.V_&&t.m_(e.mutations)}function w$(r){return R0(r)&&!Kc(r).n_()&&r.O_.length>0}function _$(r){Kc(r).start()}async function Hte(r){Kc(r).p_()}async function Gte(r){const e=Kc(r);for(const t of r.O_)e.m_(t.mutations)}async function Kte(r,e,t){const n=r.O_.shift(),i=k7.from(n,e,t);await x$(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await Qh(r)}async function Wte(r,e){e&&Kc(r).V_&&await(async function(n,i){if((function(s){return MV(s)&&s!==Oe.ABORTED})(i.code)){const a=n.O_.shift();Kc(n).s_(),await x$(n,(()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Qh(n)}})(r,e),w$(r)&&_$(r)}async function nj(r,e){const t=mt(r);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const n=R0(t);t.L_.add(3),await _g(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await mx(t)}async function aT(r,e){const t=mt(r);e?(t.L_.delete(2),await mx(t)):e||(t.L_.add(2),await _g(t),t.q_.set("Unknown"))}function Yh(r){return r.K_||(r.K_=(function(t,n,i){const a=mt(t);return a.w_(),new Mte(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(r.datastore,r.asyncQueue,{Eo:Ute.bind(null,r),Ro:zte.bind(null,r),mo:Vte.bind(null,r),d_:$te.bind(null,r)}),r.B_.push((async e=>{e?(r.K_.s_(),$7(r)?V7(r):r.q_.set("Unknown")):(await r.K_.stop(),b$(r))}))),r.K_}function Kc(r){return r.U_||(r.U_=(function(t,n,i){const a=mt(t);return a.w_(),new Pte(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hte.bind(null,r),mo:Wte.bind(null,r),f_:Gte.bind(null,r),g_:Kte.bind(null,r)}),r.B_.push((async e=>{e?(r.U_.s_(),await Qh(r)):(await r.U_.stop(),r.O_.length>0&&(Ve("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))}))),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e,t,n,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,a){const s=Date.now()+n,c=new F7(e,t,s,i,a);return c.start(n),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(Oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q7(r,e){if(En("AsyncQueue",`${e}: ${r}`),Jc(r))return new We(Oe.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||rt.comparator(t.key,n.key):(t,n)=>rt.comparator(t.key,n.key),this.keyedMap=Nm(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new Wd(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Wd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this.W_=new Fr(rt.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):dt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class fh{constructor(e,t,n,i,a,s,c,d,f){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,t,n,i,a){const s=[];return t.forEach((c=>{s.push({type:0,doc:c})})),new fh(e,t,Wd.emptySet(t),s,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ox(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xte{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Qte{constructor(){this.queries=aj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const i=mt(t),a=i.queries;i.queries=aj(),a.forEach(((s,c)=>{for(const d of c.j_)d.onError(n)}))})(this,new We(Oe.ABORTED,"Firestore shutting down"))}}function aj(){return new eu((r=>xV(r)),ox)}async function H7(r,e){const t=mt(r);let n=3;const i=e.query;let a=t.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new Xte,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await t.onListen(i,!0);break;case 1:a.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const c=q7(s,`Initialization of query '${Dd(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.j_.push(e),e.Z_(t.onlineState),a.z_&&e.X_(a.z_)&&K7(t)}async function G7(r,e){const t=mt(r),n=e.query;let i=3;const a=t.queries.get(n);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Yte(r,e){const t=mt(r);let n=!1;for(const i of e){const a=i.query,s=t.queries.get(a);if(s){for(const c of s.j_)c.X_(i)&&(n=!0);s.z_=i}}n&&K7(t)}function Zte(r,e,t){const n=mt(r),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(t);n.queries.delete(e)}function K7(r){r.Y_.forEach((e=>{e.next()}))}var sT,sj;(sj=sT||(sT={})).ea="default",sj.Cache="cache";class W7{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new fh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e){this.key=e}}class T${constructor(e){this.key=e}}class Jte{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ht(),this.mutatedKeys=Ht(),this.Aa=_V(e),this.Ra=new Wd(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new ij,i=t?t.Ra:this.Ra;let a=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,p)=>{const y=i.get(m),b=vg(this.query,p)?p:null,T=!!y&&this.mutatedKeys.has(y.key),S=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let w=!1;y&&b?y.data.isEqual(b.data)?T!==S&&(n.track({type:3,doc:b}),w=!0):this.ga(y,b)||(n.track({type:2,doc:b}),w=!0,(d&&this.Aa(b,d)>0||f&&this.Aa(b,f)<0)&&(c=!0)):!y&&b?(n.track({type:0,doc:b}),w=!0):y&&!b&&(n.track({type:1,doc:y}),w=!0,(d||f)&&(c=!0)),w&&(b?(s=s.add(b),a=S?a.add(m):a.delete(m)):(s=s.delete(m),a=a.delete(m)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const m=this.query.limitType==="F"?s.last():s.first();s=s.delete(m.key),a=a.delete(m.key),n.track({type:1,doc:m})}return{Ra:s,fa:n,ns:c,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort(((m,p)=>(function(b,T){const S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return S(b)-S(T)})(m.type,p.type)||this.Aa(m.doc,p.doc))),this.pa(n),i=i!=null&&i;const c=t&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,f=d!==this.Ea;return this.Ea=d,s.length!==0||f?{snapshot:new fh(this.query,e.Ra,a,s,e.mutatedKeys,d===0,f,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ij,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ht(),this.Ra.forEach((n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))}));const t=[];return e.forEach((n=>{this.da.has(n)||t.push(new T$(n))})),this.da.forEach((n=>{e.has(n)||t.push(new S$(n))})),t}ba(e){this.Ta=e.Ts,this.da=Ht();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ere{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class tre{constructor(e){this.key=e,this.va=!1}}class rre{constructor(e,t,n,i,a,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new eu((c=>xV(c)),ox),this.Ma=new Map,this.xa=new Set,this.Oa=new Fr(rt.comparator),this.Na=new Map,this.La=new P7,this.Ba={},this.ka=new Map,this.qa=v0.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nre(r,e,t=!0){const n=gx(r);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await A$(n,e,t,!0),i}async function ire(r,e){const t=gx(r);await A$(t,e,!0,!1)}async function A$(r,e,t,n){const i=await kv(r.localStore,za(e)),a=i.targetId,s=r.sharedClientState.addLocalQueryTarget(a,t);let c;return n&&(c=await X7(r,e,a,s==="current",i.resumeToken)),r.isPrimaryClient&&t&&px(r.remoteStore,i),c}async function X7(r,e,t,n,i){r.Ka=(p,y,b)=>(async function(S,w,E,I){let C=w.view.ma(E);C.ns&&(C=await nT(S.localStore,w.query,!1).then((({documents:A})=>w.view.ma(A,C))));const B=I&&I.targetChanges.get(w.targetId),R=I&&I.targetMismatches.get(w.targetId)!=null,D=w.view.applyChanges(C,S.isPrimaryClient,B,R);return oT(S,w.targetId,D.wa),D.snapshot})(r,p,y,b);const a=await nT(r.localStore,e,!0),s=new Jte(e,a.Ts),c=s.ma(a.documents),d=wg.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),f=s.applyChanges(c,r.isPrimaryClient,d);oT(r,t,f.wa);const m=new ere(e,t,s);return r.Fa.set(e,m),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),f.snapshot}async function are(r,e,t){const n=mt(r),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter((s=>!ox(s,e)))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await dh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&hh(n.remoteStore,i.targetId),mh(n,i.targetId)})).catch(Zc)):(mh(n,i.targetId),await dh(n.localStore,i.targetId,!0))}async function sre(r,e){const t=mt(r),n=t.Fa.get(e),i=t.Ma.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),hh(t.remoteStore,n.targetId))}async function ore(r,e,t){const n=J7(r);try{const i=await(function(s,c){const d=mt(s),f=cn.now(),m=c.reduce(((b,T)=>b.add(T.key)),Ht());let p,y;return d.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let T=La(),S=Ht();return d.cs.getEntries(b,m).next((w=>{T=w,T.forEach(((E,I)=>{I.isValidDocument()||(S=S.add(E))}))})).next((()=>d.localDocuments.getOverlayedDocuments(b,T))).next((w=>{p=w;const E=[];for(const I of c){const C=jee(I,p.get(I.key).overlayedDocument);C!=null&&E.push(new jl(I.key,C,uV(C.value.mapValue),Nn.exists(!0)))}return d.mutationQueue.addMutationBatch(b,f,E,c)})).next((w=>{y=w;const E=w.applyToLocalDocumentSet(p,S);return d.documentOverlayCache.saveOverlays(b,w.batchId,E)}))})).then((()=>({batchId:y.batchId,changes:TV(p)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,c,d){let f=s.Ba[s.currentUser.toKey()];f||(f=new Fr(Dt)),f=f.insert(c,d),s.Ba[s.currentUser.toKey()]=f})(n,i.batchId,t),await tu(n,i.changes),await Qh(n.remoteStore)}catch(i){const a=q7(i,"Failed to persist write");t.reject(a)}}async function E$(r,e){const t=mt(r);try{const n=await Nte(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=t.Na.get(a);s&&(pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?pt(s.va):i.removedDocuments.size>0&&(pt(s.va),s.va=!1))})),await tu(t,n,e)}catch(n){await Zc(n)}}function oj(r,e,t){const n=mt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Fa.forEach(((a,s)=>{const c=s.view.Z_(e);c.snapshot&&i.push(c.snapshot)})),(function(s,c){const d=mt(s);d.onlineState=c;let f=!1;d.queries.forEach(((m,p)=>{for(const y of p.j_)y.Z_(c)&&(f=!0)})),f&&K7(d)})(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function lre(r,e,t){const n=mt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Na.get(e),a=i&&i.key;if(a){let s=new Fr(rt.comparator);s=s.insert(a,en.newNoDocument(a,yt.min()));const c=Ht().add(a),d=new xg(yt.min(),new Map,new Fr(Dt),s,c);await E$(n,d),n.Oa=n.Oa.remove(a),n.Na.delete(e),Z7(n)}else await dh(n.localStore,e,!1).then((()=>mh(n,e,t))).catch(Zc)}async function cre(r,e){const t=mt(r),n=e.batch.batchId;try{const i=await Ete(t.localStore,e);Y7(t,n,null),Q7(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await tu(t,i)}catch(i){await Zc(i)}}async function ure(r,e,t){const n=mt(r);try{const i=await(function(s,c){const d=mt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next((p=>(pt(p!==null),m=p.keys(),d.mutationQueue.removeMutationBatch(f,p)))).next((()=>d.mutationQueue.performConsistencyCheck(f))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m))).next((()=>d.localDocuments.getDocuments(f,m)))}))})(n.localStore,e);Y7(n,e,t),Q7(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await tu(n,i)}catch(i){await Zc(i)}}function Q7(r,e){(r.ka.get(e)||[]).forEach((t=>{t.resolve()})),r.ka.delete(e)}function Y7(r,e,t){const n=mt(r);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function mh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach((n=>{r.La.containsKey(n)||N$(r,n)}))}function N$(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(hh(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Z7(r))}function oT(r,e,t){for(const n of t)n instanceof S$?(r.La.addReference(n.key,e),dre(r,n)):n instanceof T$?(Ve("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||N$(r,n.key)):dt()}function dre(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(Ve("SyncEngine","New document in limbo: "+t),r.xa.add(n),Z7(r))}function Z7(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new rt(cr.fromString(e)),n=r.qa.next();r.Na.set(n,new tre(t)),r.Oa=r.Oa.insert(t,n),px(r.remoteStore,new ll(za(yg(t.path)),n,"TargetPurposeLimboResolution",ya.oe))}}async function tu(r,e,t){const n=mt(r),i=[],a=[],s=[];n.Fa.isEmpty()||(n.Fa.forEach(((c,d)=>{s.push(n.Ka(d,e,t).then((f=>{var m;if((f||t)&&n.isPrimaryClient){const p=f?!f.fromCache:(m=t==null?void 0:t.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(d.targetId,p?"current":"not-current")}if(f){i.push(f);const p=L7.Wi(d.targetId,f);a.push(p)}})))})),await Promise.all(s),n.Ca.d_(i),await(async function(d,f){const m=mt(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>we.forEach(f,(y=>we.forEach(y.$i,(b=>m.persistence.referenceDelegate.addReference(p,y.targetId,b))).next((()=>we.forEach(y.Ui,(b=>m.persistence.referenceDelegate.removeReference(p,y.targetId,b)))))))))}catch(p){if(!Jc(p))throw p;Ve("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const y=p.targetId;if(!p.fromCache){const b=m.os.get(y),T=b.snapshotVersion,S=b.withLastLimboFreeSnapshotVersion(T);m.os=m.os.insert(y,S)}}})(n.localStore,a))}async function hre(r,e){const t=mt(r);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const n=await u$(t.localStore,e);t.currentUser=e,(function(a,s){a.ka.forEach((c=>{c.forEach((d=>{d.reject(new We(Oe.CANCELLED,s))}))})),a.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await tu(t,n.hs)}}function fre(r,e){const t=mt(r),n=t.Na.get(e);if(n&&n.va)return Ht().add(n.key);{let i=Ht();const a=t.Ma.get(e);if(!a)return i;for(const s of a){const c=t.Fa.get(s);i=i.unionWith(c.view.Va)}return i}}async function mre(r,e){const t=mt(r),n=await nT(t.localStore,e.query,!0),i=e.view.ba(n);return t.isPrimaryClient&&oT(t,e.targetId,i.wa),i}async function pre(r,e){const t=mt(r);return f$(t.localStore,e).then((n=>tu(t,n)))}async function gre(r,e,t,n){const i=mt(r),a=await(function(c,d){const f=mt(c),m=mt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(p=>m.Mn(p,d).next((y=>y?f.localDocuments.getDocuments(p,y):we.resolve(null)))))})(i.localStore,e);a!==null?(t==="pending"?await Qh(i.remoteStore):t==="acknowledged"||t==="rejected"?(Y7(i,e,n||null),Q7(i,e),(function(c,d){mt(mt(c).mutationQueue).On(d)})(i.localStore,e)):dt(),await tu(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}async function yre(r,e){const t=mt(r);if(gx(t),J7(t),e===!0&&t.Qa!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await lj(t,n.toArray());t.Qa=!0,await aT(t.remoteStore,!0);for(const a of i)px(t.remoteStore,a)}else if(e===!1&&t.Qa!==!1){const n=[];let i=Promise.resolve();t.Ma.forEach(((a,s)=>{t.sharedClientState.isLocalQueryTarget(s)?n.push(s):i=i.then((()=>(mh(t,s),dh(t.localStore,s,!0)))),hh(t.remoteStore,s)})),await i,await lj(t,n),(function(s){const c=mt(s);c.Na.forEach(((d,f)=>{hh(c.remoteStore,f)})),c.La.pr(),c.Na=new Map,c.Oa=new Fr(rt.comparator)})(t),t.Qa=!1,await aT(t.remoteStore,!1)}}async function lj(r,e,t){const n=mt(r),i=[],a=[];for(const s of e){let c;const d=n.Ma.get(s);if(d&&d.length!==0){c=await kv(n.localStore,za(d[0]));for(const f of d){const m=n.Fa.get(f),p=await mre(n,m);p.snapshot&&a.push(p.snapshot)}}else{const f=await h$(n.localStore,s);c=await kv(n.localStore,f),await X7(n,O$(f),s,!1,c.resumeToken)}i.push(c)}return n.Ca.d_(a),i}function O$(r){return vV(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function vre(r){return(function(t){return mt(mt(t).persistence).Qi()})(mt(r).localStore)}async function bre(r,e,t,n){const i=mt(r);if(i.Qa)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i.Ma.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const s=await f$(i.localStore,wV(a[0])),c=xg.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Cn.EMPTY_BYTE_STRING);await tu(i,s,c);break}case"rejected":await dh(i.localStore,e,!0),mh(i,e,n);break;default:dt()}}async function xre(r,e,t){const n=gx(r);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=await h$(n.localStore,i),s=await kv(n.localStore,a);await X7(n,O$(a),s.targetId,!1,s.resumeToken),px(n.remoteStore,s)}for(const i of t)n.Ma.has(i)&&await dh(n.localStore,i,!1).then((()=>{hh(n.remoteStore,i),mh(n,i)})).catch(Zc)}}function gx(r){const e=mt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=E$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lre.bind(null,e),e.Ca.d_=Yte.bind(null,e.eventManager),e.Ca.$a=Zte.bind(null,e.eventManager),e}function J7(r){const e=mt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ure.bind(null,e),e}class gp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return c$(this.persistence,new l$,e.initialUser,this.serializer)}Ga(e){return new s$(hx.Zr,this.serializer)}Wa(e){return new p$}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gp.provider={build:()=>new gp};class k$ extends gp{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await J7(this.Ja.syncEngine),await Qh(this.Ja.remoteStore),await this.persistence.yi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}za(e){return c$(this.persistence,new l$,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new lte(n,e.asyncQueue,t)}Ha(e,t){const n=new VJ(t,this.persistence);return new zJ(e.asyncQueue,n)}Ga(e){const t=o$(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?fa.withCacheSize(this.cacheSizeBytes):fa.DEFAULT;return new D7(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,g$(),ov(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new p$}}class wre extends k${constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof $w&&(this.sharedClientState.syncEngine={no:gre.bind(null,t),ro:bre.bind(null,t),io:xre.bind(null,t),Qi:vre.bind(null,t),eo:pre.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi((async n=>{await yre(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))}Wa(e){const t=g$();if(!$w.D(t))throw new We(Oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=o$(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $w(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class yp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>oj(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=hre.bind(null,this.syncEngine),await aT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Qte})()}createDatastore(e){const t=fx(e.databaseInfo.databaseId),n=(function(a){return new Rte(a)})(e.databaseInfo);return(function(a,s,c,d){return new Dte(a,s,c,d)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,a,s,c){return new Bte(n,i,a,s,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>oj(this.syncEngine,t,0)),(function(){return rj.D()?new rj:new Cte})())}createSyncEngine(e,t){return(function(i,a,s,c,d,f,m){const p=new rre(i,a,s,c,d,f);return m&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=mt(i);Ve("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await _g(a),a.k_.shutdown(),a.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yp.provider={build:()=>new yp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):En("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _re{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new We(Oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const s=mt(i),c={documents:a.map((p=>mp(s.serializer,p)))},d=await s.Lo("BatchGetDocuments",s.serializer.databaseId,cr.emptyPath(),c,a.length),f=new Map;d.forEach((p=>{const y=$ee(s.serializer,p);f.set(y.key.toString(),y)}));const m=[];return a.forEach((p=>{const y=f.get(p.toString());pt(!!y),m.push(y)})),m})(this.datastore,e);return t.forEach((n=>this.recordVersion(n))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new bg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,n)=>{const i=rt.fromPath(n);this.mutations.push(new N7(i,this.precondition(i)))})),await(async function(n,i){const a=mt(n),s={writes:i.map((c=>pp(a.serializer,c)))};await a.Mo("Commit",a.serializer.databaseId,cr.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=yt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new We(Oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yt.min())?Nn.exists(!1):Nn.updateTime(t):Nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new We(Oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nn.updateTime(t)}return Nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sre{constructor(e,t,n,i,a){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=a,this._u=n.maxAttempts,this.t_=new U7(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go((async()=>{const e=new _re(this.datastore),t=this.cu(e);t&&t.then((n=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(n)})).catch((i=>{this.lu(i)}))))})).catch((n=>{this.lu(n)}))}))}cu(e){try{const t=this.updateFunction(e);return!pg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget((()=>(this.uu(),Promise.resolve())))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!MV(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tre{constructor(e,t,n,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Mi.UNAUTHENTICATED,this.clientId=Wz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,(async s=>{Ve("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(Ve("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=q7(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function qw(r,e){r.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await u$(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function cj(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Are(r);Ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>nj(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>nj(e.remoteStore,i))),r._onlineComponents=e}async function Are(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await qw(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Oe.FAILED_PRECONDITION||i.code===Oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;np("Error using user provided cache. Falling back to memory cache: "+t),await qw(r,new gp)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),await qw(r,new gp);return r._offlineComponents}async function t8(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),await cj(r,r._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),await cj(r,new yp))),r._onlineComponents}function Ere(r){return t8(r).then((e=>e.syncEngine))}function Nre(r){return t8(r).then((e=>e.datastore))}async function Rv(r){const e=await t8(r),t=e.eventManager;return t.onListen=nre.bind(null,e.syncEngine),t.onUnlisten=are.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ire.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sre.bind(null,e.syncEngine),t}function Ore(r,e,t={}){const n=new Us;return r.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new e8({next:y=>{m.Za(),s.enqueueAndForget((()=>G7(a,p)));const b=y.docs.has(c);!b&&y.fromCache?f.reject(new We(Oe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&d&&d.source==="server"?f.reject(new We(Oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new W7(yg(c.path),m,{includeMetadataChanges:!0,_a:!0});return H7(a,p)})(await Rv(r),r.asyncQueue,e,t,n))),n.promise}function kre(r,e,t={}){const n=new Us;return r.asyncQueue.enqueueAndForget((async()=>(function(a,s,c,d,f){const m=new e8({next:y=>{m.Za(),s.enqueueAndForget((()=>G7(a,p))),y.fromCache&&d.source==="server"?f.reject(new We(Oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),p=new W7(c,m,{includeMetadataChanges:!0,_a:!0});return H7(a,p)})(await Rv(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(r,e,t){if(!t)throw new We(Oe.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Cre(r,e,t,n){if(e===!0&&n===!0)throw new We(Oe.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function dj(r){if(!rt.isDocumentKey(r))throw new We(Oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function hj(r){if(rt.isDocumentKey(r))throw new We(Oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function yx(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":dt()}function xa(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new We(Oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yx(r);throw new We(Oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function jre(r,e){if(e<=0)throw new We(Oe.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new We(Oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Cre("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C$((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new We(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new We(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new We(Oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class r8{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(Oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(Oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fj(e),e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new CJ;switch(n.type){case"firstParty":return new RJ(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new We(Oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=uj.get(t);n&&(Ve("ComponentProvider","Removing Datastore"),uj.delete(t),n.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Il(this.firestore,e,this._query)}}class wi{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wi(this.firestore,e,this._key)}}class Vc extends Il{constructor(e,t,n){super(e,t,yg(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wi(this.firestore,null,new rt(e))}withConverter(e){return new Vc(this.firestore,e,this._path)}}function ir(r,e,...t){if(r=jr(r),j$("collection","path",e),r instanceof r8){const n=cr.fromString(e,...t);return hj(n),new Vc(r,null,n)}{if(!(r instanceof wi||r instanceof Vc))throw new We(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(cr.fromString(e,...t));return hj(n),new Vc(r.firestore,null,n)}}function ct(r,e,...t){if(r=jr(r),arguments.length===1&&(e=Wz.newId()),j$("doc","path",e),r instanceof r8){const n=cr.fromString(e,...t);return dj(n),new wi(r,null,new rt(n))}{if(!(r instanceof wi||r instanceof Vc))throw new We(Oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(cr.fromString(e,...t));return dj(n),new wi(r.firestore,r instanceof Vc?r.converter:null,new rt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new U7(this,"async_queue_retry"),this.Vu=()=>{const n=ov();n&&Ve("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=ov();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=ov();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Us;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Jc(e))throw e;Ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((n=>{this.Eu=n,this.du=!1;const i=(function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c})(n);throw En("INTERNAL UNHANDLED ERROR: ",i),n})).then((n=>(this.du=!1,n))))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=F7.createAndSchedule(this,e,t,n,(a=>this.yu(a)));return this.Tu.push(i),i}fu(){this.Eu&&dt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function pj(r){return(function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1})(r,["next","error","complete"])}class bo extends r8{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new mj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mj(e),this._firestoreClient=void 0,await e}}}function Ire(r,e,t){t||(t="(default)");const n=dg(r,"firestore");if(n.isInitialized(t)){const i=n.getImmediate({identifier:t}),a=n.getOptions(t);if(nh(a,e))return i;throw new We(Oe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new We(Oe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(Oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return n.initialize({options:e,instanceIdentifier:t})}function Sg(r){if(r._terminated)throw new We(Oe.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Rre(r),r._firestoreClient}function Rre(r){var e,t,n;const i=r._freezeSettings(),a=(function(c,d,f,m){return new lee(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,C$(m.experimentalLongPollingOptions),m.useFetchStreams)})(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new Tre(r._authCredentials,r._appCheckCredentials,r._queue,a,r._componentsProvider&&(function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this._byteString=e}static fromBase64String(e){try{return new b0(Cn.fromBase64String(e))}catch(t){throw new We(Oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new b0(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new We(Oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new We(Oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new We(Oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mre=/^__.*__$/;class Pre{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new jl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xh(e,this.data,t,this.fieldTransforms)}}class I${constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function R$(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class bx{constructor(e,t,n,i,a,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mv(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(R$(this.Cu)&&Mre.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Dre{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||fx(e)}Qu(e,t,n,i=!1){return new bx({Cu:e,methodName:t,qu:n,path:ln.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ag(r){const e=r._freezeSettings(),t=fx(r._databaseId);return new Dre(r._databaseId,!!e.ignoreUndefinedProperties,t)}function a8(r,e,t,n,i,a={}){const s=r.Qu(a.merge||a.mergeFields?2:0,e,t,i);o8("Data must be an object, but it was:",s,n);const c=D$(n,s);let d,f;if(a.merge)d=new va(s.fieldMask),f=s.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const y=lT(e,p,t);if(!s.contains(y))throw new We(Oe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);B$(m,y)||m.push(y)}d=new va(m),f=s.fieldTransforms.filter((p=>d.covers(p.field)))}else d=null,f=s.fieldTransforms;return new Pre(new xi(c),d,f)}class xx extends vx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xx}}function Lre(r,e,t){return new bx({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class s8 extends vx{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Lre(this,e,!0),n=this.Ku.map((a=>Zh(a,t))),i=new p0(n);return new jV(e.path,i)}isEqual(e){return e instanceof s8&&nh(this.Ku,e.Ku)}}function M$(r,e,t,n){const i=r.Qu(1,e,t);o8("Data must be an object, but it was:",i,n);const a=[],s=xi.empty();I0(n,((d,f)=>{const m=l8(e,d,t);f=jr(f);const p=i.Nu(m);if(f instanceof xx)a.push(m);else{const y=Zh(f,p);y!=null&&(a.push(m),s.set(m,y))}}));const c=new va(a);return new I$(s,c,i.fieldTransforms)}function P$(r,e,t,n,i,a){const s=r.Qu(1,e,t),c=[lT(e,n,t)],d=[i];if(a.length%2!=0)throw new We(Oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(lT(e,a[y])),d.push(a[y+1]);const f=[],m=xi.empty();for(let y=c.length-1;y>=0;--y)if(!B$(f,c[y])){const b=c[y];let T=d[y];T=jr(T);const S=s.Nu(b);if(T instanceof xx)f.push(b);else{const w=Zh(T,S);w!=null&&(f.push(b),m.set(b,w))}}const p=new va(f);return new I$(m,p,s.fieldTransforms)}function Bre(r,e,t,n=!1){return Zh(t,r.Qu(n?4:3,e))}function Zh(r,e){if(L$(r=jr(r)))return o8("Unsupported field value:",e,r),D$(r,e);if(r instanceof vx)return(function(n,i){if(!R$(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(n,i){const a=[];let s=0;for(const c of n){let d=Zh(c,i.Lu(s));d==null&&(d={nullValue:"NULL_VALUE"}),a.push(d),s++}return{arrayValue:{values:a}}})(r,e)}return(function(n,i){if((n=jr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Aee(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=cn.fromDate(n);return{timestampValue:uh(i.serializer,a)}}if(n instanceof cn){const a=new cn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:uh(i.serializer,a)}}if(n instanceof n8)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof b0)return{bytesValue:BV(i.serializer,n._byteString)};if(n instanceof wi){const a=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:I7(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof i8)return(function(s,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map((d=>{if(typeof d!="number")throw c.Bu("VectorValues must only contain numeric values.");return E7(c.serializer,d)}))}}}}}})(n,i);throw i.Bu(`Unsupported field value: ${yx(n)}`)})(r,e)}function D$(r,e){const t={};return sV(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):I0(r,((n,i)=>{const a=Zh(i,e.Mu(n));a!=null&&(t[n]=a)})),{mapValue:{fields:t}}}function L$(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof cn||r instanceof n8||r instanceof b0||r instanceof wi||r instanceof vx||r instanceof i8)}function o8(r,e,t){if(!L$(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const n=yx(t);throw n==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+n)}}function lT(r,e,t){if((e=jr(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return l8(r,e);throw Mv("Field path arguments must be of type string or ",r,!1,void 0,t)}const Ure=new RegExp("[~\\*/\\[\\]]");function l8(r,e,t){if(e.search(Ure)>=0)throw Mv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Tg(...e.split("."))._internalPath}catch{throw Mv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Mv(r,e,t,n,i){const a=n&&!n.isEmpty(),s=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(a||s)&&(d+=" (found",a&&(d+=` in field ${n}`),s&&(d+=` in document ${i}`),d+=")"),new We(Oe.INVALID_ARGUMENT,c+r+d)}function B$(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,t,n,i,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wx("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class zre extends Pv{data(){return super.data()}}function wx(r,e){return typeof e=="string"?l8(r,e):e instanceof Tg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new We(Oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c8{}class u8 extends c8{}function pn(r,e,...t){let n=[];e instanceof c8&&n.push(e),n=n.concat(t),(function(a){const s=a.filter((d=>d instanceof d8)).length,c=a.filter((d=>d instanceof _x)).length;if(s>1||s>0&&c>0)throw new We(Oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(n);for(const i of n)r=i._apply(r);return r}class _x extends u8{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new _x(e,t,n)}_apply(e){const t=this._parse(e);return z$(e._query,t),new Il(e.firestore,e.converter,XS(e._query,t))}_parse(e){const t=Ag(e.firestore);return(function(a,s,c,d,f,m,p){let y;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new We(Oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){yj(p,m);const b=[];for(const T of p)b.push(gj(d,a,T));y={arrayValue:{values:b}}}else y=gj(d,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||yj(p,m),y=Bre(c,s,p,m==="in"||m==="not-in");return er.create(f,m,y)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function An(r,e,t){const n=e,i=wx("where",r);return _x._create(i,n,t)}class d8 extends c8{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new d8(e,t)}_parse(e){const t=this._queryConstraints.map((n=>n._parse(e))).filter((n=>n.getFilters().length>0));return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let s=i;const c=a.getFlattenedFilters();for(const d of c)z$(s,d),s=XS(s,d)})(e._query,t),new Il(e.firestore,e.converter,XS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h8 extends u8{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new h8(e,t)}_apply(e){const t=(function(i,a,s){if(i.startAt!==null)throw new We(Oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(Oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dp(a,s)})(e._query,this._field,this._direction);return new Il(e.firestore,e.converter,(function(i,a){const s=i.explicitOrderBy.concat([a]);return new Wh(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function cm(r,e="asc"){const t=e,n=wx("orderBy",r);return h8._create(n,t)}class f8 extends u8{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new f8(e,t,n)}_apply(e){return new Il(e.firestore,e.converter,Av(e._query,this._limit,this._limitType))}}function Ru(r){return jre("limit",r),f8._create("limit",r,"F")}function gj(r,e,t){if(typeof(t=jr(t))=="string"){if(t==="")throw new We(Oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bV(e)&&t.indexOf("/")!==-1)throw new We(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(cr.fromString(t));if(!rt.isDocumentKey(n))throw new We(Oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return cp(r,new rt(n))}if(t instanceof wi)return cp(r,t._key);throw new We(Oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yx(t)}.`)}function yj(r,e){if(!Array.isArray(r)||r.length===0)throw new We(Oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z$(r,e){const t=(function(i,a){for(const s of i)for(const c of s.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(r.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new We(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(Oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class V${convertValue(e,t="none"){switch(f0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw dt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return I0(e,((i,a)=>{n[i]=this.convertValue(a,t)})),n}convertVectorValue(e){var t,n,i;const a=(i=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map((s=>Jr(s.doubleValue)));return new i8(a)}convertGeoPoint(e){return new n8(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=S7(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(op(e));default:return null}}convertTimestamp(e){const t=_l(e);return new cn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cr.fromString(e);pt(WV(n));const i=new h0(n.get(1),n.get(3)),a=new rt(n.popFirst(5));return i.isEqual(t)||En(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Vre extends V${constructor(e){super(),this.firestore=e}convertBytes(e){return new b0(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p8 extends Pv{constructor(e,t,n,i,a,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new lv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(wx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class lv extends p8{data(e={}){return super.data(e)}}class $${constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zd(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new lv(this._firestore,this._userDataWriter,n.key,n,new zd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new We(Oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((c=>{const d=new lv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new zd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const d=new lv(i._firestore,i._userDataWriter,c.doc.key,c.doc,new zd(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,m=-1;return c.type!==0&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:$re(c.type),doc:d,oldIndex:f,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $re(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(r){r=xa(r,wi);const e=xa(r.firestore,bo);return Ore(Sg(e),r._key).then((t=>F$(e,r,t)))}class Sx extends V${constructor(e){super(),this.firestore=e}convertBytes(e){return new b0(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wi(this.firestore,null,t)}}function um(r){r=xa(r,Il);const e=xa(r.firestore,bo),t=Sg(e),n=new Sx(e);return U$(r._query),kre(t,r._query).then((i=>new $$(e,n,r,i)))}function Gi(r,e,t){r=xa(r,wi);const n=xa(r.firestore,bo),i=m8(r.converter,e,t);return Tx(n,[a8(Ag(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Nn.none())])}function Er(r,e,t,...n){r=xa(r,wi);const i=xa(r.firestore,bo),a=Ag(i);let s;return s=typeof(e=jr(e))=="string"||e instanceof Tg?P$(a,"updateDoc",r._key,e,t,n):M$(a,"updateDoc",r._key,e),Tx(i,[s.toMutation(r._key,Nn.exists(!0))])}function Ia(r){return Tx(xa(r.firestore,bo),[new bg(r._key,Nn.none())])}function kd(r,e){const t=xa(r.firestore,bo),n=ct(r),i=m8(r.converter,e);return Tx(t,[a8(Ag(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Nn.exists(!1))]).then((()=>n))}function Xr(r,...e){var t,n,i;r=jr(r);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pj(e[s])||(a=e[s],s++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(pj(e[s])){const p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(n=p.error)===null||n===void 0?void 0:n.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let d,f,m;if(r instanceof wi)f=xa(r.firestore,bo),m=yg(r._key.path),d={next:p=>{e[s]&&e[s](F$(f,r,p))},error:e[s+1],complete:e[s+2]};else{const p=xa(r,Il);f=xa(p.firestore,bo),m=p._query;const y=new Sx(f);d={next:b=>{e[s]&&e[s](new $$(f,y,p,b))},error:e[s+1],complete:e[s+2]},U$(r._query)}return(function(y,b,T,S){const w=new e8(S),E=new W7(b,w,T);return y.asyncQueue.enqueueAndForget((async()=>H7(await Rv(y),E))),()=>{w.Za(),y.asyncQueue.enqueueAndForget((async()=>G7(await Rv(y),E)))}})(Sg(f),m,c,d)}function Tx(r,e){return(function(n,i){const a=new Us;return n.asyncQueue.enqueueAndForget((async()=>ore(await Ere(n),i,a))),a.promise})(Sg(r),e)}function F$(r,e,t){const n=t.docs.get(e._key),i=new Sx(r);return new p8(r,i,e._key,n,new zd(t.hasPendingWrites,t.fromCache),e.converter)}class Fre{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=Kre(),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function qre(r){return new Fre(r)}class Hre{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=yp.provider,this._offlineComponentProvider={build:t=>new k$(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class Gre{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=yp.provider,this._offlineComponentProvider={build:t=>new wre(t,e==null?void 0:e.cacheSizeBytes)}}}function Kre(r){return new Hre(void 0)}function Wre(){return new Gre}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xre={maxAttempts:5};function dm(r,e){if((r=jr(r)).firestore!==e)throw new We(Oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qre extends class{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Ag(t)}get(t){const n=dm(t,this._firestore),i=new Vre(this._firestore);return this._transaction.lookup([n._key]).then((a=>{if(!a||a.length!==1)return dt();const s=a[0];if(s.isFoundDocument())return new Pv(this._firestore,i,s.key,s,n.converter);if(s.isNoDocument())return new Pv(this._firestore,i,n._key,null,n.converter);throw dt()}))}set(t,n,i){const a=dm(t,this._firestore),s=m8(a.converter,n,i),c=a8(this._dataReader,"Transaction.set",a._key,s,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(t,n,i,...a){const s=dm(t,this._firestore);let c;return c=typeof(n=jr(n))=="string"||n instanceof Tg?P$(this._dataReader,"Transaction.update",s._key,n,i,a):M$(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(t){const n=dm(t,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dm(e,this._firestore),n=new Sx(this._firestore);return super.get(e).then((i=>new p8(this._firestore,n,t._key,i._document,new zd(!1,!1),t.converter)))}}function Hw(r,e,t){r=xa(r,bo);const n=Object.assign(Object.assign({},Xre),t);return(function(a){if(a.maxAttempts<1)throw new We(Oe.INVALID_ARGUMENT,"Max attempts must be at least 1")})(n),(function(a,s,c){const d=new Us;return a.asyncQueue.enqueueAndForget((async()=>{const f=await Nre(a);new Sre(a.asyncQueue,f,c,s,d).au()})),d.promise})(Sg(r),(i=>e(new Qre(r,i))),n)}function Yre(...r){return new s8("arrayUnion",r)}(function(e,t=!0){(function(i){Kh=i})(j0),qc(new bl("firestore",((n,{instanceIdentifier:i,options:a})=>{const s=n.getProvider("app").getImmediate(),c=new bo(new jJ(n.getProvider("auth-internal")),new PJ(n.getProvider("app-check-internal")),(function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new We(Oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new h0(f.options.projectId,m)})(s,i),s);return a=Object.assign({useFetchStreams:t},a),c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),cs(cC,"4.7.3",e),cs(cC,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$="firebasestorage.googleapis.com",H$="storageBucket",Zre=120*1e3,Jre=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends $s{constructor(e,t,n=0){super(Gw(e),`Firebase Storage: ${t} (${Gw(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,wn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xn;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xn||(xn={}));function Gw(r){return"storage/"+r}function g8(){const r="An unknown error occurred, please check the error payload for server response.";return new wn(xn.UNKNOWN,r)}function ene(r){return new wn(xn.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function tne(r){return new wn(xn.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rne(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new wn(xn.UNAUTHENTICATED,r)}function nne(){return new wn(xn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ine(r){return new wn(xn.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function ane(){return new wn(xn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sne(){return new wn(xn.CANCELED,"User canceled the upload/download.")}function one(r){return new wn(xn.INVALID_URL,"Invalid URL '"+r+"'.")}function lne(r){return new wn(xn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function cne(){return new wn(xn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+H$+"' property when initializing the app?")}function une(){return new wn(xn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dne(){return new wn(xn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hne(r){return new wn(xn.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cT(r){return new wn(xn.INVALID_ARGUMENT,r)}function G$(){return new wn(xn.APP_DELETED,"The Firebase app was deleted.")}function fne(r){return new wn(xn.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $m(r,e){return new wn(xn.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function hm(r){throw new wn(xn.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Ba.makeFromUrl(e,t)}catch{return new Ba(e,"")}if(n.path==="")return n;throw lne(e)}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const s="(/(.*))?$",c=new RegExp("^gs://"+i+s,"i"),d={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${m}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},S=t===q$?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",E=new RegExp(`^https?://${S}/${i}/${w}`,"i"),C=[{regex:c,indices:d,postModify:a},{regex:b,indices:T,postModify:f},{regex:E,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<C.length;B++){const R=C[B],D=R.regex.exec(e);if(D){const A=D[R.indices.bucket];let k=D[R.indices.path];k||(k=""),n=new Ba(A,k),R.postModify(n);break}}if(n==null)throw one(e);return n}}class mne{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pne(r,e,t){let n=1,i=null,a=null,s=!1,c=0;function d(){return c===2}let f=!1;function m(...w){f||(f=!0,e.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,r(b,d())},w)}function y(){a&&clearTimeout(a)}function b(w,...E){if(f){y();return}if(w){y(),m.call(null,w,...E);return}if(d()||s){y(),m.call(null,w,...E);return}n<64&&(n*=2);let C;c===1?(c=2,C=0):C=(n+Math.random())*1e3,p(C)}let T=!1;function S(w){T||(T=!0,y(),!f&&(i!==null?(w||(c=2),clearTimeout(i),p(0)):w||(c=1)))}return p(0),a=setTimeout(()=>{s=!0,S(!0)},t),S}function gne(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yne(r){return r!==void 0}function vne(r){return typeof r=="object"&&!Array.isArray(r)}function y8(r){return typeof r=="string"||r instanceof String}function vj(r){return v8()&&r instanceof Blob}function v8(){return typeof Blob<"u"}function bj(r,e,t,n){if(n<e)throw cT(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw cT(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function K$(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const i=e(n)+"="+e(r[n]);t=t+i+"&"}return t=t.slice(0,-1),t}var s0;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(s0||(s0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bne(r,e){const t=r>=500&&r<600,i=[408,429].indexOf(r)!==-1,a=e.indexOf(r)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(e,t,n,i,a,s,c,d,f,m,p,y=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=s,this.callback_=c,this.errorCallback_=d,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=p,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,T)=>{this.resolve_=b,this.reject_=T,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new by(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const s=c=>{const d=c.loaded,f=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,f)};this.progressCallback_!==null&&a.addUploadProgressListener(s),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(s),this.pendingConnection_=null;const c=a.getErrorCode()===s0.NO_ERROR,d=a.getStatus();if(!c||bne(d,this.additionalRetryCodes_)&&this.retry){const m=a.getErrorCode()===s0.ABORT;n(!1,new by(!1,null,m));return}const f=this.successCodes_.indexOf(d)!==-1;n(!0,new by(f,a))})},t=(n,i)=>{const a=this.resolve_,s=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(c,c.getResponse());yne(d)?a(d):a()}catch(d){s(d)}else if(c!==null){const d=g8();d.serverResponse=c.getErrorText(),this.errorCallback_?s(this.errorCallback_(c,d)):s(d)}else if(i.canceled){const d=this.appDelete_?G$():sne();s(d)}else{const d=ane();s(d)}};this.canceled_?t(!1,new by(!1,null,!0)):this.backoffId_=pne(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class by{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function wne(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function _ne(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Sne(r,e){e&&(r["X-Firebase-GMPID"]=e)}function Tne(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function Ane(r,e,t,n,i,a,s=!0){const c=K$(r.urlParams),d=r.url+c,f=Object.assign({},r.headers);return Sne(f,e),wne(f,t),_ne(f,a),Tne(f,n),new xne(d,r.method,f,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ene(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Nne(...r){const e=Ene();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(v8())return new Blob(r);throw new wn(xn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function One(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kne(r){if(typeof atob>"u")throw hne("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kw{constructor(e,t){this.data=e,this.contentType=t||null}}function Cne(r,e){switch(r){case co.RAW:return new Kw(W$(e));case co.BASE64:case co.BASE64URL:return new Kw(X$(r,e));case co.DATA_URL:return new Kw(Ine(e),Rne(e))}throw g8()}function W$(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=n,s=r.charCodeAt(++t);n=65536|(a&1023)<<10|s&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function jne(r){let e;try{e=decodeURIComponent(r)}catch{throw $m(co.DATA_URL,"Malformed data URL.")}return W$(e)}function X$(r,e){switch(r){case co.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw $m(r,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case co.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw $m(r,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=kne(e)}catch(i){throw i.message.includes("polyfill")?i:$m(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}class Q${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw $m(co.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=Mne(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function Ine(r){const e=new Q$(r);return e.base64?X$(co.BASE64,e.rest):jne(e.rest)}function Rne(r){return new Q$(r).contentType}function Mne(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t){let n=0,i="";vj(e)?(this.data_=e,n=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(vj(this.data_)){const n=this.data_,i=One(n,e,t);return i===null?null:new Nc(i)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Nc(n,!0)}}static getBlob(...e){if(v8()){const t=e.map(n=>n instanceof Nc?n.data_:n);return new Nc(Nne.apply(null,t))}else{const t=e.map(s=>y8(s)?Cne(co.RAW,s).data:s.data_);let n=0;t.forEach(s=>{n+=s.byteLength});const i=new Uint8Array(n);let a=0;return t.forEach(s=>{for(let c=0;c<s.length;c++)i[a++]=s[c]}),new Nc(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(r){let e;try{e=JSON.parse(r)}catch{return null}return vne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pne(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function Dne(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function Z$(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lne(r,e){return e}class Fi{constructor(e,t,n,i){this.server=e,this.local=t||e,this.writable=!!n,this.xform=i||Lne}}let xy=null;function Bne(r){return!y8(r)||r.length<2?r:Z$(r)}function J$(){if(xy)return xy;const r=[];r.push(new Fi("bucket")),r.push(new Fi("generation")),r.push(new Fi("metageneration")),r.push(new Fi("name","fullPath",!0));function e(a,s){return Bne(s)}const t=new Fi("name");t.xform=e,r.push(t);function n(a,s){return s!==void 0?Number(s):s}const i=new Fi("size");return i.xform=n,r.push(i),r.push(new Fi("timeCreated")),r.push(new Fi("updated")),r.push(new Fi("md5Hash",null,!0)),r.push(new Fi("cacheControl",null,!0)),r.push(new Fi("contentDisposition",null,!0)),r.push(new Fi("contentEncoding",null,!0)),r.push(new Fi("contentLanguage",null,!0)),r.push(new Fi("contentType",null,!0)),r.push(new Fi("metadata","customMetadata",!0)),xy=r,xy}function Une(r,e){function t(){const n=r.bucket,i=r.fullPath,a=new Ba(n,i);return e._makeStorageReference(a)}Object.defineProperty(r,"ref",{get:t})}function zne(r,e,t){const n={};n.type="file";const i=t.length;for(let a=0;a<i;a++){const s=t[a];n[s.local]=s.xform(n,e[s.server])}return Une(n,r),n}function eF(r,e,t){const n=Y$(e);return n===null?null:zne(r,n,t)}function Vne(r,e,t,n){const i=Y$(e);if(i===null||!y8(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const s=encodeURIComponent;return a.split(",").map(f=>{const m=r.bucket,p=r.fullPath,y="/b/"+s(m)+"/o/"+s(p),b=Ax(y,t,n),T=K$({alt:"media",token:f});return b+T})[0]}function $ne(r,e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];a.writable&&(t[a.server]=r[a.local])}return JSON.stringify(t)}class b8{constructor(e,t,n,i){this.url=e,this.method=t,this.handler=n,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(r){if(!r)throw g8()}function Fne(r,e){function t(n,i){const a=eF(r,i,e);return tF(a!==null),a}return t}function qne(r,e){function t(n,i){const a=eF(r,i,e);return tF(a!==null),Vne(a,i,r.host,r._protocol)}return t}function rF(r){function e(t,n){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=nne():i=rne():t.getStatus()===402?i=tne(r.bucket):t.getStatus()===403?i=ine(r.path):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}return e}function nF(r){const e=rF(r);function t(n,i){let a=e(n,i);return n.getStatus()===404&&(a=ene(r.path)),a.serverResponse=i.serverResponse,a}return t}function Hne(r,e,t){const n=e.fullServerUrl(),i=Ax(n,r.host,r._protocol),a="GET",s=r.maxOperationRetryTime,c=new b8(i,a,qne(r,t),s);return c.errorHandler=nF(e),c}function Gne(r,e){const t=e.fullServerUrl(),n=Ax(t,r.host,r._protocol),i="DELETE",a=r.maxOperationRetryTime;function s(d,f){}const c=new b8(n,i,s,a);return c.successCodes=[200,204],c.errorHandler=nF(e),c}function Kne(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function Wne(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=Kne(null,e)),n}function Xne(r,e,t,n,i){const a=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let B=0;B<2;B++)C=C+Math.random().toString().slice(2);return C}const d=c();s["Content-Type"]="multipart/related; boundary="+d;const f=Wne(e,n,i),m=$ne(f,t),p="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+d+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+d+"--",b=Nc.getBlob(p,n,y);if(b===null)throw une();const T={name:f.fullPath},S=Ax(a,r.host,r._protocol),w="POST",E=r.maxUploadRetryTime,I=new b8(S,w,Fne(r,t),E);return I.urlParams=T,I.headers=s,I.body=b.uploadData(),I.errorHandler=rF(e),I}class Qne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=s0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=s0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=s0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,i){if(this.sent_)throw hm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hm("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hm("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hm("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hm("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Yne extends Qne{initXhr(){this.xhr_.responseType="text"}}function x8(){return new Yne}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t){this._service=e,t instanceof Ba?this._location=t:this._location=Ba.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new x0(e,t)}get root(){const e=new Ba(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z$(this._location.path)}get storage(){return this._service}get parent(){const e=Pne(this._location.path);if(e===null)return null;const t=new Ba(this._location.bucket,e);return new x0(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw fne(e)}}function Zne(r,e,t){r._throwIfRoot("uploadBytes");const n=Xne(r.storage,r._location,J$(),new Nc(e,!0),t);return r.storage.makeRequestWithTokens(n,x8).then(i=>({metadata:i,ref:r}))}function Jne(r){r._throwIfRoot("getDownloadURL");const e=Hne(r.storage,r._location,J$());return r.storage.makeRequestWithTokens(e,x8).then(t=>{if(t===null)throw dne();return t})}function eie(r){r._throwIfRoot("deleteObject");const e=Gne(r.storage,r._location);return r.storage.makeRequestWithTokens(e,x8)}function tie(r,e){const t=Dne(r._location.path,e),n=new Ba(r._location.bucket,t);return new x0(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rie(r){return/^[A-Za-z]+:\/\//.test(r)}function nie(r,e){return new x0(r,e)}function iF(r,e){if(r instanceof w8){const t=r;if(t._bucket==null)throw cne();const n=new x0(t,t._bucket);return e!=null?iF(n,e):n}else return e!==void 0?tie(r,e):r}function iie(r,e){if(e&&rie(e)){if(r instanceof w8)return nie(r,e);throw cT("To use ref(service, url), the first argument must be a Storage instance.")}else return iF(r,e)}function xj(r,e){const t=e==null?void 0:e[H$];return t==null?null:Ba.makeFromBucketSpec(t,r)}function aie(r,e,t,n={}){r.host=`${e}:${t}`,r._protocol="http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:sQ(i,r.app.options.projectId))}class w8{constructor(e,t,n,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=q$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Zre,this._maxUploadRetryTime=Jre,this._requests=new Set,i!=null?this._bucket=Ba.makeFromBucketSpec(i,this._host):this._bucket=xj(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ba.makeFromBucketSpec(this._url,e):this._bucket=xj(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bj("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bj("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new x0(this,e)}_makeRequest(e,t,n,i,a=!0){if(this._deleted)return new mne(G$());{const s=Ane(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const wj="@firebase/storage",_j="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="storage";function uT(r,e,t){return r=jr(r),Zne(r,e,t)}function Dv(r){return r=jr(r),Jne(r)}function sie(r){return r=jr(r),eie(r)}function Fm(r,e){return r=jr(r),iie(r,e)}function oie(r=s7(),e){r=jr(r);const n=dg(r,aF).getImmediate({identifier:e}),i=ez("storage");return i&&lie(n,...i),n}function lie(r,e,t,n={}){aie(r,e,t,n)}function cie(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),i=r.getProvider("app-check-internal");return new w8(t,n,i,e,j0)}function uie(){qc(new bl(aF,cie,"PUBLIC").setMultipleInstances(!0)),cs(wj,_j,""),cs(wj,_j,"esm2017")}uie();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const die="type.googleapis.com/google.protobuf.Int64Value",hie="type.googleapis.com/google.protobuf.UInt64Value";function sF(r,e){const t={};for(const n in r)r.hasOwnProperty(n)&&(t[n]=e(r[n]));return t}function dT(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>dT(e));if(typeof r=="function"||typeof r=="object")return sF(r,e=>dT(e));throw new Error("Data cannot be encoded in JSON: "+r)}function Lv(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case die:case hie:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>Lv(e)):typeof r=="function"||typeof r=="object"?sF(r,e=>Lv(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xd extends $s{constructor(e,t,n){super(`${_8}/${e}`,t||""),this.details=n}}function fie(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function mie(r,e){let t=fie(r),n=t,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!Sj[s])return new Xd("internal","internal");t=Sj[s],n=s}const c=a.message;typeof c=="string"&&(n=c),i=a.details,i!==void 0&&(i=Lv(i))}}catch{}return t==="ok"?null:new Xd(t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pie{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="us-central1";function gie(r){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new Xd("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class yie{constructor(e,t,n,i,a=hT,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new pie(t,n,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=hT}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function vie(r,e,t){r.emulatorOrigin=`http://${e}:${t}`}function bie(r,e,t){return(n=>wie(r,e,n,{}))}async function xie(r,e,t,n){t["Content-Type"]="application/json";let i;try{i=await n(r,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let a=null;try{a=await i.json()}catch{}return{status:i.status,json:a}}function wie(r,e,t,n){const i=r._url(e);return _ie(r,i,t,n)}async function _ie(r,e,t,n){t=dT(t);const i={data:t},a={},s=await r.contextProvider.getContext(n.limitedUseAppCheckTokens);s.authToken&&(a.Authorization="Bearer "+s.authToken),s.messagingToken&&(a["Firebase-Instance-ID-Token"]=s.messagingToken),s.appCheckToken!==null&&(a["X-Firebase-AppCheck"]=s.appCheckToken);const c=n.timeout||7e4,d=gie(c),f=await Promise.race([xie(e,i,a,r.fetchImpl),d.promise,r.cancelAllRequests]);if(d.cancel(),!f)throw new Xd("cancelled","Firebase Functions instance was deleted.");const m=mie(f.status,f.json);if(m)throw m;if(!f.json)throw new Xd("internal","Response is not valid JSON object.");let p=f.json.data;if(typeof p>"u"&&(p=f.json.result),typeof p>"u")throw new Xd("internal","Response is missing data field.");return{data:Lv(p)}}const Tj="@firebase/functions",Aj="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sie="auth-internal",Tie="app-check-internal",Aie="messaging-internal";function Eie(r,e){const t=(n,{instanceIdentifier:i})=>{const a=n.getProvider("app").getImmediate(),s=n.getProvider(Sie),c=n.getProvider(Aie),d=n.getProvider(Tie);return new yie(a,s,c,d,i,r)};qc(new bl(_8,t,"PUBLIC").setMultipleInstances(!0)),cs(Tj,Aj,e),cs(Tj,Aj,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nie(r=s7(),e=hT){const n=dg(jr(r),_8).getImmediate({identifier:e}),i=ez("functions");return i&&Oie(n,...i),n}function Oie(r,e,t){vie(jr(r),e,t)}function Dr(r,e,t){return bie(jr(r),e)}Eie(fetch.bind(self));const oF={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0},kie=["apiKey","authDomain","projectId","storageBucket","appId"];for(const r of kie)if(!oF[r])throw new Error(`Missing required Firebase config: ${r}. Check your .env.local file.`);const Ex=oz(oF),fT=Vz(Ex),Cie=new rl,Be=Ire(Ex,{localCache:qre({tabManager:Wre()})}),qm=oie(Ex),Lr=Nie(Ex),jie=Dr(Lr,"awardXP"),Iie=Dr(Lr,"acceptQuest"),Rie=Dr(Lr,"deployMission"),Mie=Dr(Lr,"resolveQuest"),Pie=Dr(Lr,"equipItem"),Die=Dr(Lr,"disenchantItem"),Lie=Dr(Lr,"craftItem"),Bie=Dr(Lr,"adminUpdateInventory"),Uie=Dr(Lr,"adminUpdateEquipped"),zie=Dr(Lr,"submitEngagement"),Vie=Dr(Lr,"sendClassMessage");Dr(Lr,"uploadQuestionBank");const lF=Dr(Lr,"awardQuestionXP"),$ie=Dr(Lr,"updateStreak"),Fie=Dr(Lr,"claimDailyLogin"),qie=Dr(Lr,"spinFortuneWheel"),Hie=Dr(Lr,"unlockSkill"),Gie=Dr(Lr,"addSocket"),Kie=Dr(Lr,"socketGem"),Wie=Dr(Lr,"dealBossDamage"),Xie=Dr(Lr,"answerBossQuiz"),Qie=Dr(Lr,"createParty"),Yie=Dr(Lr,"joinParty"),Zie=Dr(Lr,"completeTutoring"),Jie=Dr(Lr,"claimKnowledgeLoot"),eae=Dr(Lr,"purchaseCosmetic"),tae=Dr(Lr,"claimDailyChallenge"),Bv=()=>({pasteCount:0,engagementTime:0,keystrokes:0,clickCount:0,startTime:Date.now(),lastActive:Date.now()});/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rae=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cF=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iae=F.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:s,...c},d)=>F.createElement("svg",{ref:d,...nae,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:cF("lucide",i),...c},[...s.map(([f,m])=>F.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(r,e)=>{const t=F.forwardRef(({className:n,...i},a)=>F.createElement(iae,{ref:a,iconNode:e,className:cF(`lucide-${rae(r)}`,n),...i}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aae=De("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sae=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oae=De("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lae=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=De("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=De("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=De("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=De("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cae=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=De("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=De("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uae=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=De("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=De("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dae=De("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=De("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vp=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=De("Component",[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1uwlt4"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z",key:"10291m"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z",key:"1tqoq1"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z",key:"1x6lto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=De("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hae=De("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=De("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=De("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fae=De("Dice5",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mae=De("Dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pae=De("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gae=De("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=De("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yae=De("FileCode",[["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=De("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vae=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=De("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=De("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=De("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bae=De("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xae=De("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=De("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=De("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wae=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ae=De("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sae=De("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=De("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aae=De("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=De("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eae=De("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=De("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=De("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=De("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nae=De("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=De("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oae=De("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kae=De("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cae=De("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jae=De("MonitorPlay",[["path",{d:"M10 7.75a.75.75 0 0 1 1.142-.638l3.664 2.249a.75.75 0 0 1 0 1.278l-3.664 2.25a.75.75 0 0 1-1.142-.64z",key:"1pctta"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=De("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=De("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=De("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=De("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mae=De("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=De("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pae=De("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=De("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=De("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dae=De("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=De("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=De("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=De("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=De("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=De("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uae=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=De("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=De("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vae=De("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ae=De("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=De("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=De("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=De("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fae=De("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=De("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=De("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=De("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=De("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=De("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Wae="kellporter2@paps.net",xF="Mr. Porter",Xae=[{name:"Dashboard",icon:u.jsx(Tae,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Admin Panel",icon:u.jsx(kx,{className:"w-5 h-5"}),role:"ADMIN"},{name:"User Management",icon:u.jsx(Wc,{className:"w-5 h-5"}),role:"ADMIN"},{name:"XP Command",icon:u.jsx(xo,{className:"w-5 h-5"}),role:"ADMIN"},{name:"Resources",icon:u.jsx(E8,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Agent Loadout",icon:u.jsx(Qd,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Missions",icon:u.jsx(xo,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Badges",icon:u.jsx(w0,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Skills",icon:u.jsx(xae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Fortune",icon:u.jsx(mae,{className:"w-5 h-5"}),role:"STUDENT"},{name:"Tutoring",icon:u.jsx(gh,{className:"w-5 h-5"}),role:"STUDENT"}],O8=[{id:"first_steps",title:"First Steps",description:"Earn your first 100 XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:100},xpReward:25},{id:"rising_star",title:"Rising Star",description:"Reach Level 5",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:5},xpReward:100,fluxReward:50},{id:"veteran",title:"Veteran Operative",description:"Reach Level 10",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:10},xpReward:250,fluxReward:100},{id:"elite",title:"Elite Agent",description:"Reach Level 25",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:25},xpReward:500,fluxReward:250},{id:"legend",title:"Living Legend",description:"Reach Level 50",icon:"",category:"PROGRESSION",condition:{type:"LEVEL_REACHED",target:50},xpReward:1e3,fluxReward:500,isSecret:!0},{id:"xp_5k",title:"Knowledge Seeker",description:"Accumulate 5,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:5e3},xpReward:150},{id:"xp_25k",title:"Scholar Supreme",description:"Accumulate 25,000 total XP",icon:"",category:"PROGRESSION",condition:{type:"XP_TOTAL",target:25e3},xpReward:500,fluxReward:200},{id:"collector_10",title:"Gear Collector",description:"Collect 10 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:10},xpReward:50},{id:"collector_50",title:"Hoarder",description:"Collect 50 items",icon:"",category:"COLLECTION",condition:{type:"ITEMS_COLLECTED",target:50},xpReward:150,fluxReward:75},{id:"gear_score_100",title:"Well Equipped",description:"Achieve a Gear Score of 100",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:100},xpReward:100},{id:"gear_score_500",title:"Walking Arsenal",description:"Achieve a Gear Score of 500",icon:"",category:"COLLECTION",condition:{type:"GEAR_SCORE",target:500},xpReward:300,fluxReward:150,isSecret:!0},{id:"first_mission",title:"Field Agent",description:"Complete your first mission",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:1},xpReward:50},{id:"mission_5",title:"Seasoned Operative",description:"Complete 5 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:5},xpReward:150},{id:"mission_20",title:"Mission Master",description:"Complete 20 missions",icon:"",category:"COMBAT",condition:{type:"QUESTS_COMPLETED",target:20},xpReward:400,fluxReward:200},{id:"boss_slayer",title:"Boss Slayer",description:"Help defeat 3 bosses",icon:"",category:"COMBAT",condition:{type:"BOSS_KILLS",target:3},xpReward:300,fluxReward:150},{id:"streak_3",title:"Consistent",description:"Maintain a 3-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:3},xpReward:75},{id:"streak_8",title:"Unstoppable",description:"Maintain an 8-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:8},xpReward:200,fluxReward:100},{id:"streak_16",title:"Iron Will",description:"Maintain a 16-week engagement streak",icon:"",category:"DEDICATION",condition:{type:"STREAK_WEEKS",target:16},xpReward:500,fluxReward:250,isSecret:!0},{id:"login_7",title:"Daily Devotion",description:"Log in 7 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:7},xpReward:100},{id:"login_30",title:"Month of Mastery",description:"Log in 30 days in a row",icon:"",category:"DEDICATION",condition:{type:"LOGIN_STREAK",target:30},xpReward:300,fluxReward:150,isSecret:!0},{id:"challenges_10",title:"Challenge Accepted",description:"Complete 10 daily challenges",icon:"",category:"DEDICATION",condition:{type:"CHALLENGES_COMPLETED",target:10},xpReward:100},{id:"tutor_1",title:"Helpful Hand",description:"Complete 1 peer tutoring session",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:1},xpReward:75},{id:"tutor_10",title:"Mentor",description:"Complete 10 peer tutoring sessions",icon:"",category:"SOCIAL",condition:{type:"TUTORING_SESSIONS",target:10},xpReward:300,fluxReward:200},{id:"tech_50",title:"Tech Wizard",description:"Reach 50 Tech stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"tech"},xpReward:100},{id:"focus_50",title:"Zen Master",description:"Reach 50 Focus stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"focus"},xpReward:100},{id:"analysis_50",title:"Sharp Mind",description:"Reach 50 Analysis stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"analysis"},xpReward:100},{id:"charisma_50",title:"Silver Tongue",description:"Reach 50 Charisma stat",icon:"",category:"MASTERY",condition:{type:"STAT_THRESHOLD",target:50,stat:"charisma"},xpReward:100},{id:"craft_10",title:"Artisan",description:"Craft items 10 times",icon:"",category:"MASTERY",condition:{type:"ITEMS_CRAFTED",target:10},xpReward:100,fluxReward:50}],Qae=r=>O8.filter(e=>!e.isSecret||r.includes(e.id)),Yae={THEORIST:{name:"Theorist",description:"Master of physics theory and mathematical modeling",color:"blue",icon:""},EXPERIMENTALIST:{name:"Experimentalist",description:"Expert in lab work and hands-on experimentation",color:"green",icon:""},ANALYST:{name:"Analyst",description:"Data-driven problem solver and pattern recognizer",color:"yellow",icon:""},DIPLOMAT:{name:"Diplomat",description:"Collaborative leader who excels in group work",color:"purple",icon:""}},wF=[{id:"th_1",name:"Equation Mind",description:"+5 Analysis from equipment",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"analysis",value:5},icon:""},{id:"th_2",name:"Deep Thinker",description:"+10% XP from review questions",specialization:"THEORIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"th_3",name:"Theoretical Framework",description:"+8 Analysis from equipment",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_1"],effect:{type:"STAT_BOOST",stat:"analysis",value:8},icon:""},{id:"th_4",name:"Thought Experiment",description:"+15% XP from study materials",specialization:"THEORIST",tier:2,cost:2,prerequisites:["th_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"th_5",name:"Unified Theory",description:"+12 Analysis, +5 Tech",specialization:"THEORIST",tier:3,cost:3,prerequisites:["th_3","th_4"],effect:{type:"STAT_BOOST",stat:"analysis",value:12},icon:""},{id:"th_6",name:"Grand Theorem",description:"+25% XP from all sources",specialization:"THEORIST",tier:4,cost:5,prerequisites:["th_5"],effect:{type:"XP_MULTIPLIER",value:.25},icon:""},{id:"ex_1",name:"Lab Safety",description:"+5 Tech from equipment",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"tech",value:5},icon:""},{id:"ex_2",name:"Hands-On Learning",description:"+10% XP from engagement",specialization:"EXPERIMENTALIST",tier:1,cost:1,prerequisites:[],effect:{type:"XP_MULTIPLIER",value:.1},icon:""},{id:"ex_3",name:"Precision Tools",description:"+8 Tech from equipment",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_1"],effect:{type:"STAT_BOOST",stat:"tech",value:8},icon:""},{id:"ex_4",name:"Data Collection",description:"Crafting costs 20% less Flux",specialization:"EXPERIMENTALIST",tier:2,cost:2,prerequisites:["ex_2"],effect:{type:"FLUX_DISCOUNT",value:.2},icon:""},{id:"ex_5",name:"Breakthrough",description:"+12 Tech, crafting improves tier by +1",specialization:"EXPERIMENTALIST",tier:3,cost:3,prerequisites:["ex_3","ex_4"],effect:{type:"CRAFT_BONUS",value:1},icon:""},{id:"ex_6",name:"Master Inventor",description:"+20% better craft results",specialization:"EXPERIMENTALIST",tier:4,cost:5,prerequisites:["ex_5"],effect:{type:"CRAFT_BONUS",value:2},icon:""},{id:"an_1",name:"Pattern Recognition",description:"+5 Focus from equipment",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"focus",value:5},icon:""},{id:"an_2",name:"Streak Amplifier",description:"Streak bonuses increased by 50%",specialization:"ANALYST",tier:1,cost:1,prerequisites:[],effect:{type:"STREAK_BONUS",value:.5},icon:""},{id:"an_3",name:"Critical Analysis",description:"+8 Focus from equipment",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_1"],effect:{type:"STAT_BOOST",stat:"focus",value:8},icon:""},{id:"an_4",name:"Efficiency Expert",description:"+15% XP from engagement time",specialization:"ANALYST",tier:2,cost:2,prerequisites:["an_2"],effect:{type:"XP_MULTIPLIER",value:.15},icon:""},{id:"an_5",name:"Predictive Model",description:"+12 Focus, streak bonus doubled",specialization:"ANALYST",tier:3,cost:3,prerequisites:["an_3","an_4"],effect:{type:"STREAK_BONUS",value:1},icon:""},{id:"an_6",name:"Omniscient",description:"+30% XP from all quiz answers",specialization:"ANALYST",tier:4,cost:5,prerequisites:["an_5"],effect:{type:"XP_MULTIPLIER",value:.3},icon:""},{id:"di_1",name:"Team Player",description:"+5 Charisma from equipment",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"STAT_BOOST",stat:"charisma",value:5},icon:""},{id:"di_2",name:"Group Synergy",description:"+20% XP from group quests",specialization:"DIPLOMAT",tier:1,cost:1,prerequisites:[],effect:{type:"QUEST_BONUS",value:.2},icon:""},{id:"di_3",name:"Inspiring Presence",description:"+8 Charisma from equipment",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_1"],effect:{type:"STAT_BOOST",stat:"charisma",value:8},icon:""},{id:"di_4",name:"Peer Mentor",description:"+50% tutoring rewards",specialization:"DIPLOMAT",tier:2,cost:2,prerequisites:["di_2"],effect:{type:"QUEST_BONUS",value:.5},icon:""},{id:"di_5",name:"Natural Leader",description:"+12 Charisma, party size +1",specialization:"DIPLOMAT",tier:3,cost:3,prerequisites:["di_3","di_4"],effect:{type:"STAT_BOOST",stat:"charisma",value:12},icon:""},{id:"di_6",name:"Commander",description:"All party members get +10% XP",specialization:"DIPLOMAT",tier:4,cost:5,prerequisites:["di_5"],effect:{type:"XP_MULTIPLIER",value:.1},icon:""}],Dj=(r,e)=>{const t=wF.find(n=>n.id===r);return t?t.prerequisites.every(n=>e.includes(n)):!1},Zae=[{id:"tesla_set",name:"Tesla's Arsenal",description:"Gear infused with electromagnetic energy",itemIds:["Data Gauntlets","Neural Band","Circuit Ring"],bonuses:[{count:2,label:"2-Piece: Spark",effects:[{stat:"tech",value:10}]},{count:3,label:"3-Piece: Overcharge",effects:[{stat:"tech",value:25},{stat:"focus",value:10}]}]},{id:"newton_set",name:"Newton's Laws",description:"Classical mechanics manifested in gear",itemIds:["Fiber Helm","Polymer Vest","Mag-Boots"],bonuses:[{count:2,label:"2-Piece: Inertia",effects:[{stat:"analysis",value:10}]},{count:3,label:"3-Piece: Force Field",effects:[{stat:"analysis",value:25},{stat:"charisma",value:10}]}]},{id:"curie_set",name:"Curie's Focus",description:"Gear radiating determination and precision",itemIds:["Precision Grips","Quantum Chip","Focus Band"],bonuses:[{count:2,label:"2-Piece: Concentration",effects:[{stat:"focus",value:10}]},{count:3,label:"3-Piece: Radiance",effects:[{stat:"focus",value:25},{stat:"analysis",value:10}]}]},{id:"diplomat_set",name:"Diplomat's Ensemble",description:"Gear designed for collaboration and leadership",itemIds:["Exo-Plate","Utility Belt","Resonance Core"],bonuses:[{count:2,label:"2-Piece: Rapport",effects:[{stat:"charisma",value:10}]},{count:3,label:"3-Piece: Aura of Command",effects:[{stat:"charisma",value:25},{stat:"tech",value:10}]}]}],_F=r=>{const e=[],t=r.map(n=>n.baseName);for(const n of Zae){const i=n.itemIds.filter(s=>t.includes(s)).length,a=n.bonuses.filter(s=>i>=s.count).sort((s,c)=>c.count-s.count);a.length>0&&e.push({set:n,activeBonus:a[0]})}return e},Cm=[{id:"w_xp_50",label:"50 XP",type:"XP",value:50,weight:25,color:"#3b82f6"},{id:"w_xp_100",label:"100 XP",type:"XP",value:100,weight:18,color:"#6366f1"},{id:"w_xp_250",label:"250 XP",type:"XP",value:250,weight:8,color:"#8b5cf6"},{id:"w_flux_10",label:"10 Flux",type:"FLUX",value:10,weight:20,color:"#06b6d4"},{id:"w_flux_25",label:"25 Flux",type:"FLUX",value:25,weight:12,color:"#0891b2"},{id:"w_flux_100",label:"100 Flux",type:"FLUX",value:100,weight:3,color:"#0e7490"},{id:"w_item_common",label:"Common Item",type:"ITEM",value:1,rarity:"COMMON",weight:15,color:"#64748b"},{id:"w_item_uncommon",label:"Uncommon Item",type:"ITEM",value:1,rarity:"UNCOMMON",weight:8,color:"#22c55e"},{id:"w_item_rare",label:"Rare Item!",type:"ITEM",value:1,rarity:"RARE",weight:3,color:"#eab308"},{id:"w_gem",label:"Random Gem",type:"GEM",value:1,weight:10,color:"#ec4899"},{id:"w_skillpt",label:"Skill Point",type:"SKILL_POINT",value:1,weight:5,color:"#a855f7"},{id:"w_nothing",label:"Try Again!",type:"NOTHING",value:0,weight:15,color:"#374151"}],Jae=()=>{const r=Cm.reduce((t,n)=>t+n.weight,0);let e=Math.random()*r;for(const t of Cm)if(e-=t.weight,e<=0)return t;return Cm[Cm.length-1]},Lj=[{level:1,name:"Recruit",description:"Standard-issue operative suit",visualEffects:{glowIntensity:.1,particleCount:0,armorDetail:"BASIC",wingType:"NONE",crownType:"NONE"}},{level:5,name:"Agent",description:"Enhanced suit with energy conduits",visualEffects:{glowIntensity:.25,particleCount:2,armorDetail:"ENHANCED",wingType:"NONE",crownType:"NONE"}},{level:15,name:"Specialist",description:"Advanced armor plating with integrated systems",visualEffects:{glowIntensity:.5,particleCount:4,armorDetail:"ADVANCED",wingType:"NONE",crownType:"CIRCLET"}},{level:30,name:"Commander",description:"Legendary suit with energy wings",visualEffects:{glowIntensity:.75,particleCount:6,armorDetail:"LEGENDARY",wingType:"ENERGY",crownType:"HALO"}},{level:50,name:"Mythic",description:"Transcendent form with crystalline wings and crown",visualEffects:{glowIntensity:1,particleCount:10,armorDetail:"MYTHIC",wingType:"PHOENIX",crownType:"CROWN"}}],SF=r=>[...Lj].sort((t,n)=>n.level-t.level).find(t=>r>=t.level)||Lj[0],ese=r=>r<=0?1:r<=2?1.05:r<=4?1.1:r<=7?1.15:r<=12?1.25:1.5,$e={getWeekId:()=>{const r=new Date,e=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const t=new Date(Date.UTC(e.getUTCFullYear(),0,1)),n=Math.ceil(((e.getTime()-t.getTime())/864e5+1)/7);return`${e.getUTCFullYear()}-W${n.toString().padStart(2,"0")}`},subscribeToXPEvents:r=>Xr(ir(Be,"xp_events"),e=>{r(e.docs.map(t=>({id:t.id,...t.data()})))},e=>console.error("XP Events subscription error:",e)),saveXPEvent:async r=>{await Gi(ct(Be,"xp_events",r.id),r)},deleteXPEvent:async r=>{await Ia(ct(Be,"xp_events",r))},subscribeToQuests:r=>Xr(ir(Be,"quests"),e=>{r(e.docs.map(t=>({id:t.id,...t.data()})))},e=>console.error("Quests subscription error:",e)),saveQuest:async r=>{await Gi(ct(Be,"quests",r.id),r)},deleteQuest:async r=>{await Ia(ct(Be,"quests",r))},acceptQuest:async(r,e)=>{await Iie({questId:e})},deployMission:async(r,e)=>{await Rie({questId:e.id})},resolveQuest:async(r,e,t,n)=>{await Mie({userId:r,questId:e.id,success:t,classType:n})},adjustUserXP:async(r,e,t)=>{await $e.awardXP(r,e,t)},equipItem:async(r,e,t)=>{await Pie({itemId:e.id,classType:t})},disenchantItem:async(r,e,t)=>{await Die({itemId:e.id,classType:t})},craftItem:async(r,e,t,n)=>{await Lie({itemId:e.id,action:t,classType:n})},adminUpdateInventory:async(r,e,t)=>{await Bie({userId:r,inventory:e,currency:t})},adminUpdateEquipped:async(r,e)=>{await Uie({userId:r,equipped:e})},updateUserAppearance:async(r,e,t)=>{try{const n=ct(Be,"users",r);t?await Er(n,{[`gamification.classProfiles.${t}.appearance`]:e}):await Er(n,{"gamification.appearance":e})}catch(n){console.error("Error updating appearance:",n)}},sendMessage:async(r,e,t,n)=>{try{if(r.mutedUntil){const i=new Date(r.mutedUntil);if(i>new Date)throw new Error(`You are muted until ${i.toLocaleTimeString()}.`)}await Vie({content:e,channelId:t,classType:n})}catch(i){throw console.error("Error sending message:",i),i}},toggleReaction:async(r,e,t)=>{const n=ct(Be,"class_messages",r);await Hw(Be,async i=>{const a=await i.get(n);if(!a.exists())return;const c={...a.data().reactions||{}},d=(c[e]||[]).includes(t);Object.keys(c).forEach(f=>{c[f]=(c[f]||[]).filter(m=>m!==t),c[f].length===0&&delete c[f]}),d||(c[e]||(c[e]=[]),c[e].push(t)),i.update(n,{reactions:c})})},togglePersonalPin:async(r,e)=>{const t=ct(Be,"class_messages",r);await Hw(Be,async n=>{const i=await n.get(t);if(!i.exists())return;const s=[...i.data().pinnedBy||[]];s.includes(e)?n.update(t,{pinnedBy:s.filter(c=>c!==e)}):n.update(t,{pinnedBy:[...s,e]})})},toggleGlobalPin:async(r,e)=>{const t=ct(Be,"class_messages",r);await Er(t,{isGlobalPinned:e})},deleteMessage:async r=>{try{await Ia(ct(Be,"class_messages",r))}catch(e){throw console.error("Error deleting message:",e),e}},subscribeToFlaggedMessages:r=>{const e=pn(ir(Be,"class_messages"),An("isFlagged","==",!0),Ru(50));return Xr(e,t=>{const n=t.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),r(n)},t=>{console.error("Subscribe Flagged Messages Error:",t)})},unflagMessage:async r=>{try{const e=ct(Be,"class_messages",r);await Er(e,{isFlagged:!1,systemNote:""})}catch(e){throw console.error("Error unflagging message:",e),e}},INDEFINITE_MUTE:-2,muteUser:async(r,e)=>{try{let t=null;e===$e.INDEFINITE_MUTE?t=new Date("9999-12-31").toISOString():e>0&&(t=new Date(Date.now()+e*6e4).toISOString()),await Er(ct(Be,"users",r),{mutedUntil:t})}catch(t){throw console.error("Error muting user:",t),t}},subscribeToChannelMessages:(r,e)=>{const t=pn(ir(Be,"class_messages"),An("channelId","==",r),Ru(100));return Xr(t,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(a.timestamp).getTime()-new Date(s.timestamp).getTime()),e(i)},n=>{console.error("Subscribe Messages Error:",n)})},subscribeToAllConversations:r=>{const e=pn(ir(Be,"conversations"),cm("lastMessageAt","desc"));return Xr(e,t=>{r(t.docs.map(n=>({id:n.id,...n.data()})))},t=>console.error("Conversations subscription error:",t))},subscribeToChatMessages:(r,e)=>{const t=pn(ir(Be,`conversations/${r}/messages`),cm("timestamp","asc"));return Xr(t,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Chat messages subscription error:",n))},sendChatMessage:async(r,e,t)=>{const n={senderId:e.id,senderName:e.role===Ii.ADMIN?xF:e.name,content:t,timestamp:new Date().toISOString()};await kd(ir(Be,`conversations/${r}/messages`),n),await Er(ct(Be,"conversations",r),{lastMessage:t,lastMessageAt:new Date().toISOString()})},toggleConversationDisable:async(r,e)=>{await Er(ct(Be,"conversations",r),{adminDisabled:e})},subscribeToChatFlags:r=>{const e=pn(ir(Be,"chat_flags"),An("isResolved","==",!1));return Xr(e,t=>{const n=t.docs.map(i=>({id:i.id,...i.data()}));n.sort((i,a)=>new Date(a.timestamp).getTime()-new Date(i.timestamp).getTime()),r(n)},t=>{console.error("Subscribe Flags Error:",t)})},resolveFlag:async r=>{await Er(ct(Be,"chat_flags",r),{isResolved:!0})},resolveFlagByMessageId:async r=>{try{const e=pn(ir(Be,"chat_flags"),An("messageId","==",r),An("isResolved","==",!1)),n=(await um(e)).docs.map(i=>Er(i.ref,{isResolved:!0}));await Promise.all(n)}catch(e){console.error("Error resolving flag by messageId:",e)}},subscribeToEvidence:(r,e,t)=>{const n=pn(ir(Be,"evidence"),An("studentId","==",r),An("weekId","==",e));return Xr(n,i=>{const a=i.docs.map(s=>({id:s.id,...s.data()}));t(a)},i=>console.error("Evidence subscription error:",i))},uploadEvidence:async r=>{await Gi(ct(Be,"evidence",r.id),r,{merge:!0})},deleteWeeklyEvidence:async r=>{try{const e=r.map(n=>{if(!n.imageUrl)return Promise.resolve();const i=Fm(qm,n.imageUrl);return sie(i).catch(a=>console.warn("File missing:",a))});await Promise.all(e);const t=r.map(n=>Ia(ct(Be,"evidence",n.id)));await Promise.all(t)}catch(e){throw console.error("Error clearing weekly evidence:",e),new Error("Failed to clear evidence log.")}},saveLabReport:async r=>{await Gi(ct(Be,"lab_reports",r.id),r,{merge:!0})},updateUserSettings:async(r,e)=>{try{const t=ct(Be,"users",r);await Er(t,{settings:e})}catch(t){console.error("Error updating settings:",t)}},updateUserLastLevelSeen:async(r,e)=>{await Er(ct(Be,"users",r),{"gamification.lastLevelSeen":e})},generateCodename:async r=>{const e=["Neon","Quantum","Dark","Atomic","Silent","Lunar","Iron","Plasma","Forensic"],t=["Quark","Proton","Trace","Nova","Pulse","Specter","Vertex","Agent","Observer"],n=`${e[Math.floor(Math.random()*e.length)]} ${t[Math.floor(Math.random()*t.length)]}`;await Er(ct(Be,"users",r),{"gamification.codename":n})},subscribeToUsers:r=>{const e=ir(Be,"users");return Xr(e,t=>{const n=t.docs.map(i=>{const a=i.data();return{id:i.id,...a}});r(n)},t=>console.error("Users subscription error:",t))},subscribeToAssignments:r=>{const e=ir(Be,"assignments");return Xr(e,t=>{const n=t.docs.map(i=>{const a=i.data();return{id:i.id,title:a.title,description:a.description,classType:a.classType,status:a.status,unit:a.unit||"Unassigned Unit",category:a.category||"Supplemental",htmlContent:a.htmlContent,contentUrl:a.contentUrl,resources:a.resources||[],publicComments:(a.publicComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime()),dueDate:a.dueDate}});r(n)},t=>console.error("Assignments subscription error:",t))},subscribeToSubmissions:r=>{const e=pn(ir(Be,"submissions"),cm("submittedAt","desc"),Ru(200));return Xr(e,t=>{const n=t.docs.map(i=>{const a=i.data();return{id:i.id,userId:a.userId,userName:a.userName,assignmentId:a.assignmentId,assignmentTitle:a.assignmentTitle,metrics:a.metrics||Bv(),submittedAt:a.submittedAt,status:a.status,score:a.score,hasUnreadAdmin:a.hasUnreadAdmin||!1,hasUnreadStudent:a.hasUnreadStudent||!1,isPinned:a.isPinned||!1,isArchived:a.isArchived||!1,privateComments:(a.privateComments||[]).sort((s,c)=>new Date(c.timestamp).getTime()-new Date(s.timestamp).getTime())}});r(n)},t=>console.error("Submissions subscription error:",t))},subscribeToUserSubmissions:(r,e)=>{const t=pn(ir(Be,"submissions"),An("userId","==",r),Ru(50));return Xr(t,n=>{const i=n.docs.map(a=>{const s=a.data();return{id:a.id,userId:s.userId,userName:s.userName,assignmentId:s.assignmentId,assignmentTitle:s.assignmentTitle,metrics:s.metrics||Bv(),submittedAt:s.submittedAt,status:s.status,score:s.score,hasUnreadAdmin:s.hasUnreadAdmin||!1,hasUnreadStudent:s.hasUnreadStudent||!1,isPinned:s.isPinned||!1,isArchived:s.isArchived||!1,privateComments:(s.privateComments||[]).sort((c,d)=>new Date(d.timestamp).getTime()-new Date(c.timestamp).getTime())}}).sort((a,s)=>new Date(s.submittedAt||"").getTime()-new Date(a.submittedAt||"").getTime());e(i)},n=>console.error("User submissions subscription error:",n))},subscribeToWhitelist:r=>{const e=ir(Be,"allowed_emails");return Xr(e,t=>{const n=t.docs.map(i=>({email:i.id,classType:i.data().classType,classTypes:i.data().classTypes||[i.data().classType].filter(Boolean)}));r(n)},t=>console.error("Whitelist subscription error:",t))},subscribeToClassConfigs:r=>{const e=ir(Be,"class_configs");return Xr(e,t=>{const n=t.docs.map(i=>({id:i.id,...i.data()}));r(n)},t=>console.error("ClassConfigs subscription error:",t))},addAssignment:async r=>{try{const e={title:r.title,description:r.description,classType:r.classType,status:r.status,unit:r.unit||"Unassigned Unit",category:r.category||"Textbook",htmlContent:r.htmlContent||"",contentUrl:r.contentUrl||null,resources:r.resources||[],publicComments:r.publicComments||[],dueDate:r.dueDate||null};r.id?await Gi(ct(Be,"assignments",r.id),e,{merge:!0}):await kd(ir(Be,"assignments"),e)}catch(e){throw console.error(e),e}},updateAssignmentStatus:async(r,e)=>{try{await Er(ct(Be,"assignments",r),{status:e})}catch(t){console.error(t)}},deleteAssignment:async r=>{try{await Ia(ct(Be,"assignments",r))}catch(e){console.error(e)}},addToWhitelist:async(r,e)=>{try{const t=ct(Be,"allowed_emails",r),n=await Wi(t),i=n.exists()?n.data().classTypes||[n.data().classType].filter(Boolean):[],a=Array.from(new Set([...i,e]));await Gi(t,{classType:e,classTypes:a});const s=pn(ir(Be,"users"),An("email","==",r)),c=await um(s);await Promise.all(c.docs.map(async d=>{const f=d.data(),m=f.enrolledClasses||(f.classType?[f.classType]:[]),p=Array.from(new Set([...m,e]));await Er(ct(Be,"users",d.id),{isWhitelisted:!0,classType:e,enrolledClasses:p})}))}catch(t){console.error(t)}},updateWhitelistSection:async(r,e)=>{try{await Er(ct(Be,"allowed_emails",r),{section:e});const t=pn(ir(Be,"users"),An("email","==",r)),n=await um(t);await Promise.all(n.docs.map(async i=>{await Er(ct(Be,"users",i.id),{section:e})}))}catch(t){console.error(t)}},removeFromWhitelist:async r=>{try{await Ia(ct(Be,"allowed_emails",r));const e=pn(ir(Be,"users"),An("email","==",r)),t=await um(e);await Promise.all(t.docs.map(async n=>{await Er(ct(Be,"users",n.id),{isWhitelisted:!1,enrolledClasses:[],classType:"Uncategorized"})}))}catch(e){console.error(e)}},approveUser:async(r,e)=>{try{const t=ct(Be,"users",r),n=await Wi(t);if(n.exists()){const i=n.data(),a=i.enrolledClasses||(i.classType?[i.classType]:[]),s=Array.from(new Set([...a,e]));await Er(t,{isWhitelisted:!0,classType:e,enrolledClasses:s});const c=i.email;if(c){const d=await Wi(ct(Be,"allowed_emails",c)),f=d.exists()?d.data().classTypes||[d.data().classType].filter(Boolean):[],m=Array.from(new Set([...f,e]));await Gi(ct(Be,"allowed_emails",c),{classType:e,classTypes:m})}}}catch(t){console.error(t)}},removeUser:async r=>{try{const e=await Wi(ct(Be,"users",r));if(e.exists()){const t=e.data().email;await Ia(ct(Be,"allowed_emails",t))}await Ia(ct(Be,"users",r))}catch(e){console.error(e)}},submitAssignment:async r=>{try{const e=`${r.userId}_${r.assignmentId}`;await Gi(ct(Be,"submissions",e),{userId:r.userId,userName:r.userName,assignmentId:r.assignmentId,assignmentTitle:r.assignmentTitle,metrics:r.metrics,status:r.status,score:r.score,submittedAt:new Date().toISOString()},{merge:!0})}catch(e){console.error(e)}},updateUserEnrolledClasses:async(r,e)=>{try{const t=ct(Be,"users",r),n=await Wi(t);if(!n.exists())return;const a=n.data().email,s={enrolledClasses:e,classType:e.length>0?e[0]:"Uncategorized"};e.length===0?(s.isWhitelisted=!1,a&&await Ia(ct(Be,"allowed_emails",a))):(s.isWhitelisted=!0,a&&await Gi(ct(Be,"allowed_emails",a),{classType:e[0],classTypes:e})),await Er(t,s)}catch(t){console.error("Error updating user classes:",t)}},updateUserClass:async(r,e)=>{try{const t=ct(Be,"users",r),n=await Wi(t);if(n.exists()){const i=n.data().enrolledClasses||[],a=Array.from(new Set([...i,e]));await Er(t,{classType:e,enrolledClasses:a,isWhitelisted:!0});const s=n.data().email;s&&await Gi(ct(Be,"allowed_emails",s),{classType:e})}}catch(t){console.error(t)}},switchUserView:async(r,e)=>{try{await Er(ct(Be,"users",r),{classType:e})}catch(t){console.error("Error switching view:",t)}},awardXP:async(r,e,t)=>{await jie({targetUserId:r,amount:e,classType:t})},submitEngagement:async(r,e,t,n,i,a)=>(await zie({assignmentId:t,assignmentTitle:n,userName:e,metrics:i,classType:a})).data,subscribeToLeaderboard:r=>{const e=pn(ir(Be,"users"),An("role","==","STUDENT"));return Xr(e,t=>{r(t.docs.map(n=>({id:n.id,...n.data()})))},t=>console.error("Leaderboard subscription error:",t))},saveClassConfig:async r=>{try{await Gi(ct(Be,"class_configs",r.className),r)}catch(e){throw console.error("Error saving class config:",e),e}},deleteClassConfig:async r=>{try{await Ia(ct(Be,"class_configs",r))}catch(e){throw console.error("Error deleting class config:",e),e}},uploadResource:async r=>{const e=Math.random().toString(36).substring(2,9),t=Fm(qm,`resources/${e}_${r.name}`);return await uT(t,r),await Dv(t)},uploadHtmlResource:async r=>{const e=Math.random().toString(36).substring(2,9),t=Fm(qm,`resources/html/${e}_${r.name}`);return await uT(t,r),await Dv(t)},subscribeToAnnouncements:r=>{const e=pn(ir(Be,"announcements"),cm("createdAt","desc"),Ru(20));return Xr(e,t=>{const n=new Date,i=t.docs.map(a=>({id:a.id,...a.data()})).filter(a=>!a.expiresAt||new Date(a.expiresAt)>n);r(i)},t=>console.error("Announcements subscription error:",t))},createAnnouncement:async r=>{await kd(ir(Be,"announcements"),r)},deleteAnnouncement:async r=>{await Ia(ct(Be,"announcements",r))},dismissAnnouncement:async(r,e)=>{await Er(ct(Be,"users",r),{"gamification.dismissedAnnouncements":Yre(e)})},subscribeToNotifications:(r,e)=>{const t=pn(ir(Be,"notifications"),An("userId","==",r),cm("timestamp","desc"),Ru(50));return Xr(t,n=>{e(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Notifications subscription error:",n))},markNotificationRead:async r=>{await Er(ct(Be,"notifications",r),{isRead:!0})},markAllNotificationsRead:async r=>{const e=pn(ir(Be,"notifications"),An("userId","==",r),An("isRead","==",!1)),n=(await um(e)).docs.map(i=>Er(i.ref,{isRead:!0}));await Promise.all(n)},createNotification:async r=>{await kd(ir(Be,"notifications"),r)},notifyUsers:async(r,e,t,n,i)=>{const a=r.map(s=>kd(ir(Be,"notifications"),{userId:s,type:e,title:t,message:n,timestamp:new Date().toISOString(),isRead:!1,meta:i||{}}));await Promise.all(a)},updateCodename:async(r,e)=>{await Er(ct(Be,"users",r),{"gamification.codename":e})},updateEngagementStreak:async()=>(await $ie({})).data,claimDailyLogin:async()=>(await Fie({})).data,spinFortuneWheel:async r=>{try{return(await qie({classType:r})).data}catch{const e=Jae(),t={XP:`${e.value} XP`,FLUX:`${e.value} Cyber-Flux`,ITEM:`${e.rarity||"Common"} Item`,GEM:"Random Gem",SKILL_POINT:"1 Skill Point",NOTHING:"Better luck next time!"};return{prizeId:e.id,prizeType:e.type,rewardDescription:t[e.type]||e.label}}},unlockSkill:async(r,e,t)=>(await Hie({skillId:r,specialization:e,cost:t})).data,addSocket:async(r,e)=>(await Gie({itemId:r,classType:e})).data,socketGem:async(r,e,t)=>(await Kie({itemId:r,gemId:e,classType:t})).data,subscribeToBossEncounters:r=>{const e=pn(ir(Be,"boss_encounters"),An("isActive","==",!0));return Xr(e,t=>{r(t.docs.map(n=>({id:n.id,...n.data()})))},t=>console.error("Boss encounters subscription error:",t))},dealBossDamage:async(r,e,t)=>(await Wie({bossId:r,damage:e,userName:t})).data,subscribeToBossQuizzes:(r,e)=>{const t=pn(ir(Be,"boss_quizzes"),An("isActive","==",!0));return Xr(t,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()})).filter(a=>a.classType===r||a.classType==="GLOBAL");e(i)},n=>console.error("Boss quiz subscription error:",n))},answerBossQuiz:async(r,e,t)=>(await Xie({quizId:r,questionId:e,answer:t})).data,createParty:async(r,e)=>(await Qie({questId:r,userName:e})).data,joinParty:async(r,e)=>(await Yie({partyId:r,userName:e})).data,subscribeToParty:(r,e)=>Xr(ct(Be,"parties",r),t=>{t.exists()?e({id:t.id,...t.data()}):e(null)},t=>console.error("Party subscription error:",t)),createTutoringRequest:async(r,e,t,n)=>{await kd(ir(Be,"tutoring_sessions"),{requesterId:r,requesterName:e,topic:t,classType:n,status:"OPEN",createdAt:new Date().toISOString(),xpReward:75,fluxReward:25})},claimTutorRole:async(r,e,t)=>{await Er(ct(Be,"tutoring_sessions",r),{tutorId:e,tutorName:t,status:"MATCHED"})},subscribeToTutoringSessions:(r,e)=>{const t=pn(ir(Be,"tutoring_sessions"),An("classType","==",r),Ru(50));return Xr(t,n=>{const i=n.docs.map(a=>({id:a.id,...a.data()}));i.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()),e(i)},n=>console.error("Tutoring subscription error:",n))},completeTutoring:async(r,e)=>(await Zie({sessionId:r,tutorId:e})).data,subscribeToKnowledgeGates:r=>{const e=pn(ir(Be,"knowledge_gates"),An("isActive","==",!0));return Xr(e,t=>{r(t.docs.map(n=>({id:n.id,...n.data()})))},t=>console.error("Knowledge gates subscription error:",t))},claimKnowledgeLoot:async(r,e)=>(await Jie({gateId:r,classType:e})).data,subscribeToSeasonalCosmetics:r=>{const e=pn(ir(Be,"seasonal_cosmetics"),An("isAvailable","==",!0));return Xr(e,t=>{r(t.docs.map(n=>({id:n.id,...n.data()})))},t=>console.error("Seasonal cosmetics subscription error:",t))},purchaseCosmetic:async r=>(await eae({cosmeticId:r})).data,equipCosmetic:async(r,e)=>{await Er(ct(Be,"users",r),{"gamification.activeCosmetic":e})},subscribeToDailyChallenges:r=>{const e=new Date().toISOString().split("T")[0],t=pn(ir(Be,"daily_challenges"),An("date","==",e));return Xr(t,n=>{r(n.docs.map(i=>({id:i.id,...i.data()})))},n=>console.error("Daily challenges subscription error:",n))},claimDailyChallenge:async(r,e)=>(await tae({challengeId:r,classType:e})).data,updateDailyChallengeProgress:async(r,e,t,n)=>{const i=ct(Be,"users",r);await Hw(Be,async a=>{var f;const s=await a.get(i);if(!s.exists())return;const c=((f=s.data().gamification)==null?void 0:f.activeDailyChallenges)||[];if(c.find(m=>m.challengeId===e)){const m=c.map(p=>p.challengeId===e?{...p,progress:t,completed:n}:p);a.update(i,{"gamification.activeDailyChallenges":m})}else a.update(i,{"gamification.activeDailyChallenges":[...c,{challengeId:e,progress:t,completed:n}]})})},getPublicProfile:async r=>{const e=await Wi(ct(Be,"users",r));return e.exists()?{id:e.id,...e.data()}:null}},TF=F.createContext(null),Li=()=>{const r=F.useContext(TF);if(!r)throw new Error("useToast must be used within ToastProvider");return r},tse={success:u.jsx(bn,{className:"w-5 h-5 text-green-400 shrink-0"}),error:u.jsx(fs,{className:"w-5 h-5 text-red-400 shrink-0"}),info:u.jsx(dF,{className:"w-5 h-5 text-blue-400 shrink-0"})},rse={success:"border-green-500/30 bg-green-950/80",error:"border-red-500/30 bg-red-950/80",info:"border-blue-500/30 bg-blue-950/80"},nse=({children:r})=>{const[e,t]=F.useState([]),n=F.useCallback((s,c)=>{const d=Math.random().toString(36).substring(2,8);t(f=>[...f,{id:d,message:s,type:c}]),setTimeout(()=>{t(f=>f.filter(m=>m.id!==d))},4e3)},[]),i=F.useCallback(s=>{t(c=>c.filter(d=>d.id!==s))},[]),a={success:s=>n(s,"success"),error:s=>n(s,"error"),info:s=>n(s,"info")};return u.jsxs(TF.Provider,{value:a,children:[r,u.jsx("div",{className:"fixed bottom-6 left-6 z-[9999] flex flex-col gap-3 pointer-events-none max-w-sm",children:e.map(s=>u.jsxs("div",{className:`pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl border backdrop-blur-xl shadow-2xl animate-in slide-in-from-left-5 fade-in duration-300 ${rse[s.type]}`,children:[tse[s.type],u.jsx("span",{className:"text-sm text-white font-medium leading-snug flex-1",children:s.message}),u.jsx("button",{onClick:()=>i(s.id),className:"text-gray-500 hover:text-white transition shrink-0",children:u.jsx(ms,{className:"w-4 h-4"})})]},s.id))})]})},ise=()=>{const[r,e]=F.useState(navigator.onLine),[t,n]=F.useState(!1);return F.useEffect(()=>{const i=()=>{e(!0),n(!0),setTimeout(()=>n(!1),3e3)},a=()=>{e(!1),n(!1)};return window.addEventListener("online",i),window.addEventListener("offline",a),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",a)}},[]),r&&!t?null:u.jsx("div",{className:`fixed top-0 left-0 right-0 z-[9999] flex items-center justify-center gap-2 py-2 text-sm font-bold transition-all duration-300 ${r?"bg-green-600/90 text-white":"bg-red-600/90 text-white"}`,children:r?u.jsxs(u.Fragment,{children:[u.jsx(Kae,{className:"w-4 h-4"}),"Connection restored"]}):u.jsxs(u.Fragment,{children:[u.jsx(Gae,{className:"w-4 h-4"}),"You are offline  changes will sync when reconnected"]})})},Va=({isOpen:r,onClose:e,title:t,children:n,maxWidth:i="max-w-md"})=>(F.useEffect(()=>{const a=s=>{s.key==="Escape"&&e()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),r?u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:u.jsxs("div",{className:`bg-[#0f0720]/95 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_0_50px_rgba(0,0,0,0.5)] w-full ${i} overflow-hidden flex flex-col max-h-[95vh] animate-in zoom-in-95 duration-200`,children:[u.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-white/5 bg-white/5",children:[u.jsx("h3",{className:"text-xl font-bold text-white tracking-tight",children:t}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white",children:u.jsx(ms,{className:"w-5 h-5"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:n})]})}):null),ase=({isOpen:r,onClose:e,user:t,onSaveSettings:n})=>{var T;const[i,a]=ne.useState(t.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1,soundEffects:!0}),[s,c]=ne.useState(((T=t.gamification)==null?void 0:T.codename)||""),[d,f]=ne.useState(!1),m=Li(),p=S=>{a(w=>({...w,[S]:!w[S]}))},y=async()=>{var S;f(!0);try{await n(i),s!==(((S=t.gamification)==null?void 0:S.codename)||"")&&await $e.updateCodename(t.id,s.trim().slice(0,24)),e()}catch(w){console.error(w),m.error("Failed to save settings.")}finally{f(!1)}},b=({icon:S,title:w,description:E,value:I,onToggle:C})=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-2xl border border-white/10 hover:border-purple-500/30 transition",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:`p-2 rounded-xl ${I?"bg-purple-500/20 text-purple-400":"bg-white/10 text-gray-500"}`,children:u.jsx(S,{className:"w-5 h-5"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-white text-sm",children:w}),u.jsx("p",{className:"text-xs text-gray-500 leading-tight mt-0.5",children:E})]})]}),u.jsx("button",{onClick:C,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${I?"bg-purple-600":"bg-white/20"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${I?"translate-x-6":"translate-x-1"}`})})]});return u.jsx(Va,{isOpen:r,onClose:e,title:"User Control Center",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Visuals & Performance"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:Iae,title:"Live Neon Background",description:"Toggle the video loop background. Disable to save GPU.",value:i.liveBackground,onToggle:()=>p("liveBackground")}),u.jsx(b,{icon:hae,title:"Performance Mode",description:"Disable blurs and heavy animations for older hardware.",value:i.performanceMode,onToggle:()=>p("performanceMode")})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Privacy & Identity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:us,title:"Privacy Codename",description:"Hide real name on leaderboards and use your operative codename.",value:i.privacyMode,onToggle:()=>p("privacyMode")}),i.privacyMode&&u.jsxs("div",{className:"p-4 bg-white/5 rounded-2xl border border-white/10",children:[u.jsx("label",{className:"text-xs font-bold text-gray-300 block mb-2",children:"Operative Codename"}),u.jsx("input",{type:"text",value:s,onChange:S=>c(S.target.value.slice(0,24)),placeholder:"Enter codename...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:24}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[s.length,"/24 characters"]})]})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-2 px-1",children:"Interface"}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(b,{icon:Mae,title:"Compact View",description:"Reduce sidebar and dashboard padding for power users.",value:i.compactView,onToggle:()=>p("compactView")}),u.jsx(b,{icon:Hae,title:"Sound Effects",description:"Play audio feedback for XP gains, level ups, and actions.",value:i.soundEffects!==!1,onToggle:()=>a(S=>({...S,soundEffects:S.soundEffects===!1}))})]})]}),u.jsxs("button",{onClick:y,disabled:d,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-2xl font-bold transition shadow-lg shadow-purple-900/30 flex items-center justify-center gap-2",children:[d?u.jsx(Ua,{className:"w-5 h-5 animate-spin"}):u.jsx(gF,{className:"w-5 h-5"}),"Apply Changes"]})]})})},sse=({user:r,onLogout:e,activeTab:t,setActiveTab:n,children:i})=>{var T,S;const[a,s]=F.useState(""),[c,d]=F.useState(!1),[f,m]=F.useState(!1),p=r.settings||{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1};F.useEffect(()=>{if(!p.liveBackground){s("");return}(async()=>{try{const E=Fm(qm,"public/background.mp4"),I=await Dv(E);s(I)}catch{console.warn("Firebase background not found, using local fallback."),s("/background.mp4")}})()},[p.liveBackground]);const y=async w=>{await $e.updateUserSettings(r.id,w)},b=()=>{const w=Xae.filter(E=>!(E.role==="ADMIN"&&r.role!==Ii.ADMIN||E.role==="STUDENT"&&r.role!==Ii.STUDENT));return u.jsx(u.Fragment,{children:w.map(E=>u.jsxs("button",{onClick:()=>{n(E.name),m(!1)},className:`w-full flex items-center gap-4 px-6 rounded-xl transition-all group ${p.compactView?"py-2.5":"py-3"} ${t===E.name?"bg-purple-600/80 text-white shadow-lg border border-purple-500/50":"text-gray-400 hover:bg-white/5 hover:text-white hover:pl-7"}`,children:[u.jsx("span",{className:`${t===E.name?"text-white":"text-gray-500 group-hover:text-purple-400"}`,children:E.icon}),u.jsx("span",{className:"font-medium text-sm",children:E.name})]},E.name))})};return u.jsxs("div",{className:`flex flex-col md:flex-row h-screen overflow-hidden text-gray-100 relative ${p.performanceMode?"perf-mode":""}`,children:[u.jsx("div",{className:"fixed inset-0 z-[-3] bg-[#0f0720] static-purple-bg"}),p.liveBackground&&a&&u.jsx("div",{className:"fixed inset-0 pointer-events-none z-[-2] overflow-hidden",children:u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-105",children:u.jsx("source",{src:a,type:"video/mp4"})},a)}),u.jsx("div",{className:`fixed inset-0 pointer-events-none z-[-1] transition-opacity duration-700 ${p.liveBackground?"bg-[#0f0720]/70":"bg-[#0f0720]/40"} ${p.performanceMode?"":"backdrop-blur-[3px]"}`}),u.jsxs("header",{className:"md:hidden flex items-center justify-between p-4 bg-black/40 backdrop-blur-md border-b border-white/10 z-30",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:u.jsx(gh,{className:"w-5 h-5 text-white"})}),u.jsx("h1",{className:"font-bold text-white text-lg",children:"Porter Portal"})]}),u.jsx("button",{onClick:()=>m(!0),className:"p-2 text-white hover:bg-white/10 rounded-lg transition","aria-label":"Open navigation menu",children:u.jsx(Nae,{className:"w-6 h-6"})})]}),f&&u.jsxs("div",{className:"fixed inset-0 z-50 md:hidden flex",children:[u.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm animate-in fade-in",onClick:()=>m(!1)}),u.jsxs("div",{className:"relative w-4/5 max-w-xs bg-[#1a1b26] border-r border-white/10 h-full flex flex-col p-6 animate-in slide-in-from-left duration-300 shadow-2xl",children:[u.jsxs("div",{className:"flex justify-between items-center mb-8",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:r.name.charAt(0)}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-bold text-white",children:p.privacyMode?((T=r.gamification)==null?void 0:T.codename)||"Agent":r.name}),u.jsx("p",{className:"text-[10px] text-gray-500",children:r.role})]})]}),u.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-white",children:u.jsx(ms,{className:"w-6 h-6"})})]}),u.jsx("nav",{className:"flex-1 space-y-2 overflow-y-auto",children:u.jsx(b,{})}),u.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[u.jsxs("button",{onClick:()=>{d(!0),m(!1)},className:"w-full flex items-center gap-3 p-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl transition",children:[u.jsx(wp,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Settings"})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center gap-3 p-3 text-red-400 hover:bg-red-500/10 rounded-xl transition",children:[u.jsx(kj,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Sign Out"})]})]})]})]}),u.jsx("aside",{className:`p-4 hidden md:flex flex-col z-10 transition-all ${p.compactView?"w-60":"w-72"}`,children:u.jsxs("div",{className:`h-full bg-white/5 border border-white/10 rounded-3xl flex flex-col shadow-2xl animate-glass-turn ${p.performanceMode?"":"backdrop-blur-2xl"}`,children:[u.jsxs("div",{className:"p-8 flex items-center gap-4 border-b border-white/5",children:[u.jsx("div",{className:"bg-purple-600 shadow-[0_0_15px_rgba(147,51,234,0.5)] p-3 rounded-xl",children:u.jsx(gh,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-lg tracking-tight text-white",children:"Porter Portal"}),u.jsx("p",{className:"text-xs text-purple-300 font-medium tracking-widest uppercase",children:r.role===Ii.ADMIN?"Admin System":"Operative Terminal"})]})]}),u.jsx("nav",{className:"flex-1 p-4 space-y-2 mt-4 overflow-y-auto custom-scrollbar",children:u.jsx(b,{})}),u.jsxs("div",{className:"p-6 border-t border-white/5 bg-black/10 rounded-b-3xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-sm font-bold shadow-inner border border-white/20",children:r.name.charAt(0)}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-sm font-semibold truncate text-white",children:p.privacyMode?((S=r.gamification)==null?void 0:S.codename)||"Agent":r.name}),u.jsx("p",{className:"text-[10px] text-gray-500 truncate",children:r.email})]})]}),u.jsx("button",{onClick:()=>d(!0),className:"p-2 text-gray-400 hover:text-white hover:bg-white/5 rounded-lg transition",children:u.jsx(wp,{className:"w-4 h-4"})})]}),u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-red-300 transition-all text-sm font-medium",children:[u.jsx(kj,{className:"w-4 h-4"}),"Sign Out"]})]})]})}),u.jsx("main",{className:`flex-1 overflow-y-auto p-4 md:p-8 animate-fade-in z-10 ${p.performanceMode?"no-anim":"animate-slide-up"}`,children:u.jsx("div",{className:"max-w-7xl mx-auto h-full",children:i})}),u.jsx(ase,{isOpen:c,onClose:()=>d(!1),user:r,onSaveSettings:y})]})};class ma{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new ma(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class $a{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new $a(t,ma.range(this,e))}}class Ge{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,a,s=t&&t.loc;if(s&&s.start<=s.end){var c=s.lexer.input;i=s.start,a=s.end,i===c.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var d=c.slice(i,a).replace(/[^]/g,"$&"),f;i>15?f=""+c.slice(i-15,i):f=c.slice(0,i);var m;a+15<c.length?m=c.slice(a,a+15)+"":m=c.slice(a),n+=f+d+m}var p=new Error(n);return p.name="ParseError",p.__proto__=Ge.prototype,p.position=i,i!=null&&a!=null&&(p.length=a-i),p.rawMessage=e,p}}Ge.prototype.__proto__=Error.prototype;var ose=function(e,t){return e===void 0?t:e},lse=/([A-Z])/g,cse=function(e){return e.replace(lse,"-$1").toLowerCase()},use={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},dse=/[&><"']/g;function hse(r){return String(r).replace(dse,e=>use[e])}var AF=function r(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?r(e.body[0]):e:e.type==="font"?r(e.body):e},fse=function(e){var t=AF(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},mse=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},pse=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},dr={deflt:ose,escape:hse,hyphenate:cse,getBaseElem:AF,isCharacterBox:fse,protocolFromUrl:pse},uv={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:r=>"#"+r},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(r,e)=>(e.push(r),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:r=>Math.max(0,r),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:r=>Math.max(0,r),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:r=>Math.max(0,r),cli:"-e, --max-expand <n>",cliProcessor:r=>r==="Infinity"?1/0:parseInt(r)},globalGroup:{type:"boolean",cli:!1}};function gse(r){if(r.default)return r.default;var e=r.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class k8{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in uv)if(uv.hasOwnProperty(t)){var n=uv[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:gse(n)}}reportNonstrict(e,t,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new Ge("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var i=this.strict;if(typeof i=="function")try{i=i(e,t,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=dr.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class bc{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return so[yse[this.id]]}sub(){return so[vse[this.id]]}fracNum(){return so[bse[this.id]]}fracDen(){return so[xse[this.id]]}cramp(){return so[wse[this.id]]}text(){return so[_se[this.id]]}isTight(){return this.size>=2}}var C8=0,Vv=1,Yd=2,fl=3,Sp=4,os=5,yh=6,Xi=7,so=[new bc(C8,0,!1),new bc(Vv,0,!0),new bc(Yd,1,!1),new bc(fl,1,!0),new bc(Sp,2,!1),new bc(os,2,!0),new bc(yh,3,!1),new bc(Xi,3,!0)],yse=[Sp,os,Sp,os,yh,Xi,yh,Xi],vse=[os,os,os,os,Xi,Xi,Xi,Xi],bse=[Yd,fl,Sp,os,yh,Xi,yh,Xi],xse=[fl,fl,os,os,Xi,Xi,Xi,Xi],wse=[Vv,Vv,fl,fl,os,os,Xi,Xi],_se=[C8,Vv,Yd,fl,Yd,fl,Yd,fl],St={DISPLAY:so[C8],TEXT:so[Yd],SCRIPT:so[Sp],SCRIPTSCRIPT:so[yh]},vT=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Sse(r){for(var e=0;e<vT.length;e++)for(var t=vT[e],n=0;n<t.blocks.length;n++){var i=t.blocks[n];if(r>=i[0]&&r<=i[1])return t.name}return null}var dv=[];vT.forEach(r=>r.blocks.forEach(e=>dv.push(...e)));function EF(r){for(var e=0;e<dv.length;e+=2)if(r>=dv[e]&&r<=dv[e+1])return!0;return!1}var Cd=80,Tse=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Ase=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Ese=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Nse=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Ose=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},kse=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},Cse=function(e,t,n){var i=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},jse=function(e,t,n){t=1e3*t;var i="";switch(e){case"sqrtMain":i=Tse(t,Cd);break;case"sqrtSize1":i=Ase(t,Cd);break;case"sqrtSize2":i=Ese(t,Cd);break;case"sqrtSize3":i=Nse(t,Cd);break;case"sqrtSize4":i=Ose(t,Cd);break;case"sqrtTall":i=Cse(t,Cd,n)}return i},Ise=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},Bj={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Rse=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Eg{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var uo={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},_y={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Uj={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Mse(r,e){uo[r]=e}function j8(r,e,t){if(!uo[e])throw new Error("Font metrics not found for font: "+e+".");var n=r.charCodeAt(0),i=uo[e][n];if(!i&&r[0]in Uj&&(n=Uj[r[0]].charCodeAt(0),i=uo[e][n]),!i&&t==="text"&&EF(n)&&(i=uo[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Yw={};function Pse(r){var e;if(r>=5?e=0:r>=3?e=1:e=2,!Yw[e]){var t=Yw[e]={cssEmPerMu:_y.quad[e]/18};for(var n in _y)_y.hasOwnProperty(n)&&(t[n]=_y[n][e])}return Yw[e]}var Dse=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],zj=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Vj=function(e,t){return t.size<2?e:Dse[e-1][t.size-1]};class tl{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||tl.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=zj[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new tl(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:Vj(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:zj[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=Vj(tl.BASESIZE,e);return this.size===t&&this.textSize===tl.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==tl.BASESIZE?["sizing","reset-size"+this.size,"size"+tl.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Pse(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}tl.BASESIZE=6;var bT={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Lse={ex:!0,em:!0,mu:!0},NF=function(e){return typeof e!="string"&&(e=e.unit),e in bT||e in Lse||e==="ex"},on=function(e,t){var n;if(e.unit in bT)n=bT[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new Ge("Invalid unit: '"+e.unit+"'");i!==t&&(n*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Je=function(e){return+e.toFixed(4)+"em"},Xc=function(e){return e.filter(t=>t).join(" ")},OF=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},kF=function(e){var t=document.createElement(e);t.className=Xc(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var a=0;a<this.children.length;a++)t.appendChild(this.children[a].toNode());return t},Bse=/[\s"'>/=\x00-\x1f]/,CF=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+dr.escape(Xc(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=dr.hyphenate(i)+":"+this.style[i]+";");n&&(t+=' style="'+dr.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(Bse.test(a))throw new Ge("Invalid attribute name '"+a+"'");t+=" "+a+'="'+dr.escape(this.attributes[a])+'"'}t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+="</"+e+">",t};class Ng{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,OF.call(this,e,n,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return kF.call(this,"span")}toMarkup(){return CF.call(this,"span")}}class I8{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,OF.call(this,t,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return kF.call(this,"a")}toMarkup(){return CF.call(this,"a")}}class Use{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+dr.escape(this.src)+'"'+(' alt="'+dr.escape(this.alt)+'"'),t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=dr.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+dr.escape(t)+'"'),e+="'/>",e}}var zse={:"",:"",:"",:""};class ps{constructor(e,t,n,i,a,s,c,d){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=i||0,this.skew=a||0,this.width=s||0,this.classes=c||[],this.style=d||{},this.maxFontSize=0;var f=Sse(this.text.charCodeAt(0));f&&this.classes.push(f+"_fallback"),/[]/.test(this.text)&&(this.text=zse[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=Je(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=Xc(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=dr.escape(Xc(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=dr.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,t+=' style="'+dr.escape(n)+'"');var a=dr.escape(this.text);return e?(t+=">",t+=a,t+="</span>",t):a}}class Tl{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+dr.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class Qc{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",Bj[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+dr.escape(this.alternate)+'"/>':'<path d="'+dr.escape(Bj[this.pathName])+'"/>'}}class xT{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+dr.escape(this.attributes[t])+'"');return e+="/>",e}}function $j(r){if(r instanceof ps)return r;throw new Error("Expected symbolNode but got "+String(r)+".")}function Vse(r){if(r instanceof Ng)return r;throw new Error("Expected span<HtmlDomNode> but got "+String(r)+".")}var $se={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Fse={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},$r={math:{},text:{}};function O(r,e,t,n,i,a){$r[r][i]={font:e,group:t,replace:n},a&&n&&($r[r][n]=$r[r][i])}var P="math",Ue="text",q="main",te="ams",rn="accent-token",lt="bin",Ji="close",Jh="inner",_t="mathord",qn="op-token",Ha="open",Cx="punct",re="rel",Rl="spacing",fe="textord";O(P,q,re,"","\\equiv",!0);O(P,q,re,"","\\prec",!0);O(P,q,re,"","\\succ",!0);O(P,q,re,"","\\sim",!0);O(P,q,re,"","\\perp");O(P,q,re,"","\\preceq",!0);O(P,q,re,"","\\succeq",!0);O(P,q,re,"","\\simeq",!0);O(P,q,re,"","\\mid",!0);O(P,q,re,"","\\ll",!0);O(P,q,re,"","\\gg",!0);O(P,q,re,"","\\asymp",!0);O(P,q,re,"","\\parallel");O(P,q,re,"","\\bowtie",!0);O(P,q,re,"","\\smile",!0);O(P,q,re,"","\\sqsubseteq",!0);O(P,q,re,"","\\sqsupseteq",!0);O(P,q,re,"","\\doteq",!0);O(P,q,re,"","\\frown",!0);O(P,q,re,"","\\ni",!0);O(P,q,re,"","\\propto",!0);O(P,q,re,"","\\vdash",!0);O(P,q,re,"","\\dashv",!0);O(P,q,re,"","\\owns");O(P,q,Cx,".","\\ldotp");O(P,q,Cx,"","\\cdotp");O(P,q,fe,"#","\\#");O(Ue,q,fe,"#","\\#");O(P,q,fe,"&","\\&");O(Ue,q,fe,"&","\\&");O(P,q,fe,"","\\aleph",!0);O(P,q,fe,"","\\forall",!0);O(P,q,fe,"","\\hbar",!0);O(P,q,fe,"","\\exists",!0);O(P,q,fe,"","\\nabla",!0);O(P,q,fe,"","\\flat",!0);O(P,q,fe,"","\\ell",!0);O(P,q,fe,"","\\natural",!0);O(P,q,fe,"","\\clubsuit",!0);O(P,q,fe,"","\\wp",!0);O(P,q,fe,"","\\sharp",!0);O(P,q,fe,"","\\diamondsuit",!0);O(P,q,fe,"","\\Re",!0);O(P,q,fe,"","\\heartsuit",!0);O(P,q,fe,"","\\Im",!0);O(P,q,fe,"","\\spadesuit",!0);O(P,q,fe,"","\\S",!0);O(Ue,q,fe,"","\\S");O(P,q,fe,"","\\P",!0);O(Ue,q,fe,"","\\P");O(P,q,fe,"","\\dag");O(Ue,q,fe,"","\\dag");O(Ue,q,fe,"","\\textdagger");O(P,q,fe,"","\\ddag");O(Ue,q,fe,"","\\ddag");O(Ue,q,fe,"","\\textdaggerdbl");O(P,q,Ji,"","\\rmoustache",!0);O(P,q,Ha,"","\\lmoustache",!0);O(P,q,Ji,"","\\rgroup",!0);O(P,q,Ha,"","\\lgroup",!0);O(P,q,lt,"","\\mp",!0);O(P,q,lt,"","\\ominus",!0);O(P,q,lt,"","\\uplus",!0);O(P,q,lt,"","\\sqcap",!0);O(P,q,lt,"","\\ast");O(P,q,lt,"","\\sqcup",!0);O(P,q,lt,"","\\bigcirc",!0);O(P,q,lt,"","\\bullet",!0);O(P,q,lt,"","\\ddagger");O(P,q,lt,"","\\wr",!0);O(P,q,lt,"","\\amalg");O(P,q,lt,"&","\\And");O(P,q,re,"","\\longleftarrow",!0);O(P,q,re,"","\\Leftarrow",!0);O(P,q,re,"","\\Longleftarrow",!0);O(P,q,re,"","\\longrightarrow",!0);O(P,q,re,"","\\Rightarrow",!0);O(P,q,re,"","\\Longrightarrow",!0);O(P,q,re,"","\\leftrightarrow",!0);O(P,q,re,"","\\longleftrightarrow",!0);O(P,q,re,"","\\Leftrightarrow",!0);O(P,q,re,"","\\Longleftrightarrow",!0);O(P,q,re,"","\\mapsto",!0);O(P,q,re,"","\\longmapsto",!0);O(P,q,re,"","\\nearrow",!0);O(P,q,re,"","\\hookleftarrow",!0);O(P,q,re,"","\\hookrightarrow",!0);O(P,q,re,"","\\searrow",!0);O(P,q,re,"","\\leftharpoonup",!0);O(P,q,re,"","\\rightharpoonup",!0);O(P,q,re,"","\\swarrow",!0);O(P,q,re,"","\\leftharpoondown",!0);O(P,q,re,"","\\rightharpoondown",!0);O(P,q,re,"","\\nwarrow",!0);O(P,q,re,"","\\rightleftharpoons",!0);O(P,te,re,"","\\nless",!0);O(P,te,re,"","\\@nleqslant");O(P,te,re,"","\\@nleqq");O(P,te,re,"","\\lneq",!0);O(P,te,re,"","\\lneqq",!0);O(P,te,re,"","\\@lvertneqq");O(P,te,re,"","\\lnsim",!0);O(P,te,re,"","\\lnapprox",!0);O(P,te,re,"","\\nprec",!0);O(P,te,re,"","\\npreceq",!0);O(P,te,re,"","\\precnsim",!0);O(P,te,re,"","\\precnapprox",!0);O(P,te,re,"","\\nsim",!0);O(P,te,re,"","\\@nshortmid");O(P,te,re,"","\\nmid",!0);O(P,te,re,"","\\nvdash",!0);O(P,te,re,"","\\nvDash",!0);O(P,te,re,"","\\ntriangleleft");O(P,te,re,"","\\ntrianglelefteq",!0);O(P,te,re,"","\\subsetneq",!0);O(P,te,re,"","\\@varsubsetneq");O(P,te,re,"","\\subsetneqq",!0);O(P,te,re,"","\\@varsubsetneqq");O(P,te,re,"","\\ngtr",!0);O(P,te,re,"","\\@ngeqslant");O(P,te,re,"","\\@ngeqq");O(P,te,re,"","\\gneq",!0);O(P,te,re,"","\\gneqq",!0);O(P,te,re,"","\\@gvertneqq");O(P,te,re,"","\\gnsim",!0);O(P,te,re,"","\\gnapprox",!0);O(P,te,re,"","\\nsucc",!0);O(P,te,re,"","\\nsucceq",!0);O(P,te,re,"","\\succnsim",!0);O(P,te,re,"","\\succnapprox",!0);O(P,te,re,"","\\ncong",!0);O(P,te,re,"","\\@nshortparallel");O(P,te,re,"","\\nparallel",!0);O(P,te,re,"","\\nVDash",!0);O(P,te,re,"","\\ntriangleright");O(P,te,re,"","\\ntrianglerighteq",!0);O(P,te,re,"","\\@nsupseteqq");O(P,te,re,"","\\supsetneq",!0);O(P,te,re,"","\\@varsupsetneq");O(P,te,re,"","\\supsetneqq",!0);O(P,te,re,"","\\@varsupsetneqq");O(P,te,re,"","\\nVdash",!0);O(P,te,re,"","\\precneqq",!0);O(P,te,re,"","\\succneqq",!0);O(P,te,re,"","\\@nsubseteqq");O(P,te,lt,"","\\unlhd");O(P,te,lt,"","\\unrhd");O(P,te,re,"","\\nleftarrow",!0);O(P,te,re,"","\\nrightarrow",!0);O(P,te,re,"","\\nLeftarrow",!0);O(P,te,re,"","\\nRightarrow",!0);O(P,te,re,"","\\nleftrightarrow",!0);O(P,te,re,"","\\nLeftrightarrow",!0);O(P,te,re,"","\\vartriangle");O(P,te,fe,"","\\hslash");O(P,te,fe,"","\\triangledown");O(P,te,fe,"","\\lozenge");O(P,te,fe,"","\\circledS");O(P,te,fe,"","\\circledR");O(Ue,te,fe,"","\\circledR");O(P,te,fe,"","\\measuredangle",!0);O(P,te,fe,"","\\nexists");O(P,te,fe,"","\\mho");O(P,te,fe,"","\\Finv",!0);O(P,te,fe,"","\\Game",!0);O(P,te,fe,"","\\backprime");O(P,te,fe,"","\\blacktriangle");O(P,te,fe,"","\\blacktriangledown");O(P,te,fe,"","\\blacksquare");O(P,te,fe,"","\\blacklozenge");O(P,te,fe,"","\\bigstar");O(P,te,fe,"","\\sphericalangle",!0);O(P,te,fe,"","\\complement",!0);O(P,te,fe,"","\\eth",!0);O(Ue,q,fe,"","");O(P,te,fe,"","\\diagup");O(P,te,fe,"","\\diagdown");O(P,te,fe,"","\\square");O(P,te,fe,"","\\Box");O(P,te,fe,"","\\Diamond");O(P,te,fe,"","\\yen",!0);O(Ue,te,fe,"","\\yen",!0);O(P,te,fe,"","\\checkmark",!0);O(Ue,te,fe,"","\\checkmark");O(P,te,fe,"","\\beth",!0);O(P,te,fe,"","\\daleth",!0);O(P,te,fe,"","\\gimel",!0);O(P,te,fe,"","\\digamma",!0);O(P,te,fe,"","\\varkappa");O(P,te,Ha,"","\\@ulcorner",!0);O(P,te,Ji,"","\\@urcorner",!0);O(P,te,Ha,"","\\@llcorner",!0);O(P,te,Ji,"","\\@lrcorner",!0);O(P,te,re,"","\\leqq",!0);O(P,te,re,"","\\leqslant",!0);O(P,te,re,"","\\eqslantless",!0);O(P,te,re,"","\\lesssim",!0);O(P,te,re,"","\\lessapprox",!0);O(P,te,re,"","\\approxeq",!0);O(P,te,lt,"","\\lessdot");O(P,te,re,"","\\lll",!0);O(P,te,re,"","\\lessgtr",!0);O(P,te,re,"","\\lesseqgtr",!0);O(P,te,re,"","\\lesseqqgtr",!0);O(P,te,re,"","\\doteqdot");O(P,te,re,"","\\risingdotseq",!0);O(P,te,re,"","\\fallingdotseq",!0);O(P,te,re,"","\\backsim",!0);O(P,te,re,"","\\backsimeq",!0);O(P,te,re,"","\\subseteqq",!0);O(P,te,re,"","\\Subset",!0);O(P,te,re,"","\\sqsubset",!0);O(P,te,re,"","\\preccurlyeq",!0);O(P,te,re,"","\\curlyeqprec",!0);O(P,te,re,"","\\precsim",!0);O(P,te,re,"","\\precapprox",!0);O(P,te,re,"","\\vartriangleleft");O(P,te,re,"","\\trianglelefteq");O(P,te,re,"","\\vDash",!0);O(P,te,re,"","\\Vvdash",!0);O(P,te,re,"","\\smallsmile");O(P,te,re,"","\\smallfrown");O(P,te,re,"","\\bumpeq",!0);O(P,te,re,"","\\Bumpeq",!0);O(P,te,re,"","\\geqq",!0);O(P,te,re,"","\\geqslant",!0);O(P,te,re,"","\\eqslantgtr",!0);O(P,te,re,"","\\gtrsim",!0);O(P,te,re,"","\\gtrapprox",!0);O(P,te,lt,"","\\gtrdot");O(P,te,re,"","\\ggg",!0);O(P,te,re,"","\\gtrless",!0);O(P,te,re,"","\\gtreqless",!0);O(P,te,re,"","\\gtreqqless",!0);O(P,te,re,"","\\eqcirc",!0);O(P,te,re,"","\\circeq",!0);O(P,te,re,"","\\triangleq",!0);O(P,te,re,"","\\thicksim");O(P,te,re,"","\\thickapprox");O(P,te,re,"","\\supseteqq",!0);O(P,te,re,"","\\Supset",!0);O(P,te,re,"","\\sqsupset",!0);O(P,te,re,"","\\succcurlyeq",!0);O(P,te,re,"","\\curlyeqsucc",!0);O(P,te,re,"","\\succsim",!0);O(P,te,re,"","\\succapprox",!0);O(P,te,re,"","\\vartriangleright");O(P,te,re,"","\\trianglerighteq");O(P,te,re,"","\\Vdash",!0);O(P,te,re,"","\\shortmid");O(P,te,re,"","\\shortparallel");O(P,te,re,"","\\between",!0);O(P,te,re,"","\\pitchfork",!0);O(P,te,re,"","\\varpropto");O(P,te,re,"","\\blacktriangleleft");O(P,te,re,"","\\therefore",!0);O(P,te,re,"","\\backepsilon");O(P,te,re,"","\\blacktriangleright");O(P,te,re,"","\\because",!0);O(P,te,re,"","\\llless");O(P,te,re,"","\\gggtr");O(P,te,lt,"","\\lhd");O(P,te,lt,"","\\rhd");O(P,te,re,"","\\eqsim",!0);O(P,q,re,"","\\Join");O(P,te,re,"","\\Doteq",!0);O(P,te,lt,"","\\dotplus",!0);O(P,te,lt,"","\\smallsetminus");O(P,te,lt,"","\\Cap",!0);O(P,te,lt,"","\\Cup",!0);O(P,te,lt,"","\\doublebarwedge",!0);O(P,te,lt,"","\\boxminus",!0);O(P,te,lt,"","\\boxplus",!0);O(P,te,lt,"","\\divideontimes",!0);O(P,te,lt,"","\\ltimes",!0);O(P,te,lt,"","\\rtimes",!0);O(P,te,lt,"","\\leftthreetimes",!0);O(P,te,lt,"","\\rightthreetimes",!0);O(P,te,lt,"","\\curlywedge",!0);O(P,te,lt,"","\\curlyvee",!0);O(P,te,lt,"","\\circleddash",!0);O(P,te,lt,"","\\circledast",!0);O(P,te,lt,"","\\centerdot");O(P,te,lt,"","\\intercal",!0);O(P,te,lt,"","\\doublecap");O(P,te,lt,"","\\doublecup");O(P,te,lt,"","\\boxtimes",!0);O(P,te,re,"","\\dashrightarrow",!0);O(P,te,re,"","\\dashleftarrow",!0);O(P,te,re,"","\\leftleftarrows",!0);O(P,te,re,"","\\leftrightarrows",!0);O(P,te,re,"","\\Lleftarrow",!0);O(P,te,re,"","\\twoheadleftarrow",!0);O(P,te,re,"","\\leftarrowtail",!0);O(P,te,re,"","\\looparrowleft",!0);O(P,te,re,"","\\leftrightharpoons",!0);O(P,te,re,"","\\curvearrowleft",!0);O(P,te,re,"","\\circlearrowleft",!0);O(P,te,re,"","\\Lsh",!0);O(P,te,re,"","\\upuparrows",!0);O(P,te,re,"","\\upharpoonleft",!0);O(P,te,re,"","\\downharpoonleft",!0);O(P,q,re,"","\\origof",!0);O(P,q,re,"","\\imageof",!0);O(P,te,re,"","\\multimap",!0);O(P,te,re,"","\\leftrightsquigarrow",!0);O(P,te,re,"","\\rightrightarrows",!0);O(P,te,re,"","\\rightleftarrows",!0);O(P,te,re,"","\\twoheadrightarrow",!0);O(P,te,re,"","\\rightarrowtail",!0);O(P,te,re,"","\\looparrowright",!0);O(P,te,re,"","\\curvearrowright",!0);O(P,te,re,"","\\circlearrowright",!0);O(P,te,re,"","\\Rsh",!0);O(P,te,re,"","\\downdownarrows",!0);O(P,te,re,"","\\upharpoonright",!0);O(P,te,re,"","\\downharpoonright",!0);O(P,te,re,"","\\rightsquigarrow",!0);O(P,te,re,"","\\leadsto");O(P,te,re,"","\\Rrightarrow",!0);O(P,te,re,"","\\restriction");O(P,q,fe,"","`");O(P,q,fe,"$","\\$");O(Ue,q,fe,"$","\\$");O(Ue,q,fe,"$","\\textdollar");O(P,q,fe,"%","\\%");O(Ue,q,fe,"%","\\%");O(P,q,fe,"_","\\_");O(Ue,q,fe,"_","\\_");O(Ue,q,fe,"_","\\textunderscore");O(P,q,fe,"","\\angle",!0);O(P,q,fe,"","\\infty",!0);O(P,q,fe,"","\\prime");O(P,q,fe,"","\\triangle");O(P,q,fe,"","\\Gamma",!0);O(P,q,fe,"","\\Delta",!0);O(P,q,fe,"","\\Theta",!0);O(P,q,fe,"","\\Lambda",!0);O(P,q,fe,"","\\Xi",!0);O(P,q,fe,"","\\Pi",!0);O(P,q,fe,"","\\Sigma",!0);O(P,q,fe,"","\\Upsilon",!0);O(P,q,fe,"","\\Phi",!0);O(P,q,fe,"","\\Psi",!0);O(P,q,fe,"","\\Omega",!0);O(P,q,fe,"A","");O(P,q,fe,"B","");O(P,q,fe,"E","");O(P,q,fe,"Z","");O(P,q,fe,"H","");O(P,q,fe,"I","");O(P,q,fe,"K","");O(P,q,fe,"M","");O(P,q,fe,"N","");O(P,q,fe,"O","");O(P,q,fe,"P","");O(P,q,fe,"T","");O(P,q,fe,"X","");O(P,q,fe,"","\\neg",!0);O(P,q,fe,"","\\lnot");O(P,q,fe,"","\\top");O(P,q,fe,"","\\bot");O(P,q,fe,"","\\emptyset");O(P,te,fe,"","\\varnothing");O(P,q,_t,"","\\alpha",!0);O(P,q,_t,"","\\beta",!0);O(P,q,_t,"","\\gamma",!0);O(P,q,_t,"","\\delta",!0);O(P,q,_t,"","\\epsilon",!0);O(P,q,_t,"","\\zeta",!0);O(P,q,_t,"","\\eta",!0);O(P,q,_t,"","\\theta",!0);O(P,q,_t,"","\\iota",!0);O(P,q,_t,"","\\kappa",!0);O(P,q,_t,"","\\lambda",!0);O(P,q,_t,"","\\mu",!0);O(P,q,_t,"","\\nu",!0);O(P,q,_t,"","\\xi",!0);O(P,q,_t,"","\\omicron",!0);O(P,q,_t,"","\\pi",!0);O(P,q,_t,"","\\rho",!0);O(P,q,_t,"","\\sigma",!0);O(P,q,_t,"","\\tau",!0);O(P,q,_t,"","\\upsilon",!0);O(P,q,_t,"","\\phi",!0);O(P,q,_t,"","\\chi",!0);O(P,q,_t,"","\\psi",!0);O(P,q,_t,"","\\omega",!0);O(P,q,_t,"","\\varepsilon",!0);O(P,q,_t,"","\\vartheta",!0);O(P,q,_t,"","\\varpi",!0);O(P,q,_t,"","\\varrho",!0);O(P,q,_t,"","\\varsigma",!0);O(P,q,_t,"","\\varphi",!0);O(P,q,lt,"","*",!0);O(P,q,lt,"+","+");O(P,q,lt,"","-",!0);O(P,q,lt,"","\\cdot",!0);O(P,q,lt,"","\\circ",!0);O(P,q,lt,"","\\div",!0);O(P,q,lt,"","\\pm",!0);O(P,q,lt,"","\\times",!0);O(P,q,lt,"","\\cap",!0);O(P,q,lt,"","\\cup",!0);O(P,q,lt,"","\\setminus",!0);O(P,q,lt,"","\\land");O(P,q,lt,"","\\lor");O(P,q,lt,"","\\wedge",!0);O(P,q,lt,"","\\vee",!0);O(P,q,fe,"","\\surd");O(P,q,Ha,"","\\langle",!0);O(P,q,Ha,"","\\lvert");O(P,q,Ha,"","\\lVert");O(P,q,Ji,"?","?");O(P,q,Ji,"!","!");O(P,q,Ji,"","\\rangle",!0);O(P,q,Ji,"","\\rvert");O(P,q,Ji,"","\\rVert");O(P,q,re,"=","=");O(P,q,re,":",":");O(P,q,re,"","\\approx",!0);O(P,q,re,"","\\cong",!0);O(P,q,re,"","\\ge");O(P,q,re,"","\\geq",!0);O(P,q,re,"","\\gets");O(P,q,re,">","\\gt",!0);O(P,q,re,"","\\in",!0);O(P,q,re,"","\\@not");O(P,q,re,"","\\subset",!0);O(P,q,re,"","\\supset",!0);O(P,q,re,"","\\subseteq",!0);O(P,q,re,"","\\supseteq",!0);O(P,te,re,"","\\nsubseteq",!0);O(P,te,re,"","\\nsupseteq",!0);O(P,q,re,"","\\models");O(P,q,re,"","\\leftarrow",!0);O(P,q,re,"","\\le");O(P,q,re,"","\\leq",!0);O(P,q,re,"<","\\lt",!0);O(P,q,re,"","\\rightarrow",!0);O(P,q,re,"","\\to");O(P,te,re,"","\\ngeq",!0);O(P,te,re,"","\\nleq",!0);O(P,q,Rl,"","\\ ");O(P,q,Rl,"","\\space");O(P,q,Rl,"","\\nobreakspace");O(Ue,q,Rl,"","\\ ");O(Ue,q,Rl,""," ");O(Ue,q,Rl,"","\\space");O(Ue,q,Rl,"","\\nobreakspace");O(P,q,Rl,null,"\\nobreak");O(P,q,Rl,null,"\\allowbreak");O(P,q,Cx,",",",");O(P,q,Cx,";",";");O(P,te,lt,"","\\barwedge",!0);O(P,te,lt,"","\\veebar",!0);O(P,q,lt,"","\\odot",!0);O(P,q,lt,"","\\oplus",!0);O(P,q,lt,"","\\otimes",!0);O(P,q,fe,"","\\partial",!0);O(P,q,lt,"","\\oslash",!0);O(P,te,lt,"","\\circledcirc",!0);O(P,te,lt,"","\\boxdot",!0);O(P,q,lt,"","\\bigtriangleup");O(P,q,lt,"","\\bigtriangledown");O(P,q,lt,"","\\dagger");O(P,q,lt,"","\\diamond");O(P,q,lt,"","\\star");O(P,q,lt,"","\\triangleleft");O(P,q,lt,"","\\triangleright");O(P,q,Ha,"{","\\{");O(Ue,q,fe,"{","\\{");O(Ue,q,fe,"{","\\textbraceleft");O(P,q,Ji,"}","\\}");O(Ue,q,fe,"}","\\}");O(Ue,q,fe,"}","\\textbraceright");O(P,q,Ha,"{","\\lbrace");O(P,q,Ji,"}","\\rbrace");O(P,q,Ha,"[","\\lbrack",!0);O(Ue,q,fe,"[","\\lbrack",!0);O(P,q,Ji,"]","\\rbrack",!0);O(Ue,q,fe,"]","\\rbrack",!0);O(P,q,Ha,"(","\\lparen",!0);O(P,q,Ji,")","\\rparen",!0);O(Ue,q,fe,"<","\\textless",!0);O(Ue,q,fe,">","\\textgreater",!0);O(P,q,Ha,"","\\lfloor",!0);O(P,q,Ji,"","\\rfloor",!0);O(P,q,Ha,"","\\lceil",!0);O(P,q,Ji,"","\\rceil",!0);O(P,q,fe,"\\","\\backslash");O(P,q,fe,"","|");O(P,q,fe,"","\\vert");O(Ue,q,fe,"|","\\textbar",!0);O(P,q,fe,"","\\|");O(P,q,fe,"","\\Vert");O(Ue,q,fe,"","\\textbardbl");O(Ue,q,fe,"~","\\textasciitilde");O(Ue,q,fe,"\\","\\textbackslash");O(Ue,q,fe,"^","\\textasciicircum");O(P,q,re,"","\\uparrow",!0);O(P,q,re,"","\\Uparrow",!0);O(P,q,re,"","\\downarrow",!0);O(P,q,re,"","\\Downarrow",!0);O(P,q,re,"","\\updownarrow",!0);O(P,q,re,"","\\Updownarrow",!0);O(P,q,qn,"","\\coprod");O(P,q,qn,"","\\bigvee");O(P,q,qn,"","\\bigwedge");O(P,q,qn,"","\\biguplus");O(P,q,qn,"","\\bigcap");O(P,q,qn,"","\\bigcup");O(P,q,qn,"","\\int");O(P,q,qn,"","\\intop");O(P,q,qn,"","\\iint");O(P,q,qn,"","\\iiint");O(P,q,qn,"","\\prod");O(P,q,qn,"","\\sum");O(P,q,qn,"","\\bigotimes");O(P,q,qn,"","\\bigoplus");O(P,q,qn,"","\\bigodot");O(P,q,qn,"","\\oint");O(P,q,qn,"","\\oiint");O(P,q,qn,"","\\oiiint");O(P,q,qn,"","\\bigsqcup");O(P,q,qn,"","\\smallint");O(Ue,q,Jh,"","\\textellipsis");O(P,q,Jh,"","\\mathellipsis");O(Ue,q,Jh,"","\\ldots",!0);O(P,q,Jh,"","\\ldots",!0);O(P,q,Jh,"","\\@cdots",!0);O(P,q,Jh,"","\\ddots",!0);O(P,q,fe,"","\\varvdots");O(Ue,q,fe,"","\\varvdots");O(P,q,rn,"","\\acute");O(P,q,rn,"","\\grave");O(P,q,rn,"","\\ddot");O(P,q,rn,"~","\\tilde");O(P,q,rn,"","\\bar");O(P,q,rn,"","\\breve");O(P,q,rn,"","\\check");O(P,q,rn,"^","\\hat");O(P,q,rn,"","\\vec");O(P,q,rn,"","\\dot");O(P,q,rn,"","\\mathring");O(P,q,_t,"","\\@imath");O(P,q,_t,"","\\@jmath");O(P,q,fe,"","");O(P,q,fe,"","");O(Ue,q,fe,"","\\i",!0);O(Ue,q,fe,"","\\j",!0);O(Ue,q,fe,"","\\ss",!0);O(Ue,q,fe,"","\\ae",!0);O(Ue,q,fe,"","\\oe",!0);O(Ue,q,fe,"","\\o",!0);O(Ue,q,fe,"","\\AE",!0);O(Ue,q,fe,"","\\OE",!0);O(Ue,q,fe,"","\\O",!0);O(Ue,q,rn,"","\\'");O(Ue,q,rn,"","\\`");O(Ue,q,rn,"","\\^");O(Ue,q,rn,"","\\~");O(Ue,q,rn,"","\\=");O(Ue,q,rn,"","\\u");O(Ue,q,rn,"","\\.");O(Ue,q,rn,"","\\c");O(Ue,q,rn,"","\\r");O(Ue,q,rn,"","\\v");O(Ue,q,rn,"",'\\"');O(Ue,q,rn,"","\\H");O(Ue,q,rn,"","\\textcircled");var jF={"--":!0,"---":!0,"``":!0,"''":!0};O(Ue,q,fe,"","--",!0);O(Ue,q,fe,"","\\textendash");O(Ue,q,fe,"","---",!0);O(Ue,q,fe,"","\\textemdash");O(Ue,q,fe,"","`",!0);O(Ue,q,fe,"","\\textquoteleft");O(Ue,q,fe,"","'",!0);O(Ue,q,fe,"","\\textquoteright");O(Ue,q,fe,"","``",!0);O(Ue,q,fe,"","\\textquotedblleft");O(Ue,q,fe,"","''",!0);O(Ue,q,fe,"","\\textquotedblright");O(P,q,fe,"","\\degree",!0);O(Ue,q,fe,"","\\degree");O(Ue,q,fe,"","\\textdegree",!0);O(P,q,fe,"","\\pounds");O(P,q,fe,"","\\mathsterling",!0);O(Ue,q,fe,"","\\pounds");O(Ue,q,fe,"","\\textsterling",!0);O(P,te,fe,"","\\maltese");O(Ue,te,fe,"","\\maltese");var Fj='0123456789/@."';for(var Zw=0;Zw<Fj.length;Zw++){var qj=Fj.charAt(Zw);O(P,q,fe,qj,qj)}var Hj='0123456789!@*()-=+";:?/.,';for(var Jw=0;Jw<Hj.length;Jw++){var Gj=Hj.charAt(Jw);O(Ue,q,fe,Gj,Gj)}var $v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var e5=0;e5<$v.length;e5++){var Sy=$v.charAt(e5);O(P,q,_t,Sy,Sy),O(Ue,q,fe,Sy,Sy)}O(P,te,fe,"C","");O(Ue,te,fe,"C","");O(P,te,fe,"H","");O(Ue,te,fe,"H","");O(P,te,fe,"N","");O(Ue,te,fe,"N","");O(P,te,fe,"P","");O(Ue,te,fe,"P","");O(P,te,fe,"Q","");O(Ue,te,fe,"Q","");O(P,te,fe,"R","");O(Ue,te,fe,"R","");O(P,te,fe,"Z","");O(Ue,te,fe,"Z","");O(P,q,_t,"h","");O(Ue,q,_t,"h","");var kt="";for(var qi=0;qi<$v.length;qi++){var gn=$v.charAt(qi);kt=String.fromCharCode(55349,56320+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56372+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56424+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56580+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56684+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56736+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56788+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56840+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56944+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),qi<26&&(kt=String.fromCharCode(55349,56632+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt),kt=String.fromCharCode(55349,56476+qi),O(P,q,_t,gn,kt),O(Ue,q,fe,gn,kt))}kt="";O(P,q,_t,"k",kt);O(Ue,q,fe,"k",kt);for(var Mu=0;Mu<10;Mu++){var xc=Mu.toString();kt=String.fromCharCode(55349,57294+Mu),O(P,q,_t,xc,kt),O(Ue,q,fe,xc,kt),kt=String.fromCharCode(55349,57314+Mu),O(P,q,_t,xc,kt),O(Ue,q,fe,xc,kt),kt=String.fromCharCode(55349,57324+Mu),O(P,q,_t,xc,kt),O(Ue,q,fe,xc,kt),kt=String.fromCharCode(55349,57334+Mu),O(P,q,_t,xc,kt),O(Ue,q,fe,xc,kt)}var wT="";for(var t5=0;t5<wT.length;t5++){var Ty=wT.charAt(t5);O(P,q,_t,Ty,Ty),O(Ue,q,fe,Ty,Ty)}var Ay=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Kj=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],qse=function(e,t){var n=e.charCodeAt(0),i=e.charCodeAt(1),a=(n-55296)*1024+(i-56320)+65536,s=t==="math"?0:1;if(119808<=a&&a<120484){var c=Math.floor((a-119808)/26);return[Ay[c][2],Ay[c][s]]}else if(120782<=a&&a<=120831){var d=Math.floor((a-120782)/10);return[Kj[d][2],Kj[d][s]]}else{if(a===120485||a===120486)return[Ay[0][2],Ay[0][s]];if(120486<a&&a<120782)return["",""];throw new Ge("Unsupported character: "+e)}},jx=function(e,t,n){return $r[n][e]&&$r[n][e].replace&&(e=$r[n][e].replace),{value:e,metrics:j8(e,t,n)}},Is=function(e,t,n,i,a){var s=jx(e,t,n),c=s.metrics;e=s.value;var d;if(c){var f=c.italic;(n==="text"||i&&i.font==="mathit")&&(f=0),d=new ps(e,c.height,c.depth,f,c.skew,c.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),d=new ps(e,0,0,0,0,0,a);if(i){d.maxFontSize=i.sizeMultiplier,i.style.isTight()&&d.classes.push("mtight");var m=i.getColor();m&&(d.style.color=m)}return d},Hse=function(e,t,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&jx(e,"Main-Bold",t).metrics?Is(e,"Main-Bold",t,n,i.concat(["mathbf"])):e==="\\"||$r[t][e].font==="main"?Is(e,"Main-Regular",t,n,i):Is(e,"AMS-Regular",t,n,i.concat(["amsrm"]))},Gse=function(e,t,n,i,a){return a!=="textord"&&jx(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Kse=function(e,t,n){var i=e.mode,a=e.text,s=["mord"],c=i==="math"||i==="text"&&t.font,d=c?t.font:t.fontFamily,f="",m="";if(a.charCodeAt(0)===55349&&([f,m]=qse(a,i)),f.length>0)return Is(a,f,i,t,s.concat(m));if(d){var p,y;if(d==="boldsymbol"){var b=Gse(a,i,t,s,n);p=b.fontName,y=[b.fontClass]}else c?(p=MF[d].fontName,y=[d]):(p=Ey(d,t.fontWeight,t.fontShape),y=[d,t.fontWeight,t.fontShape]);if(jx(a,p,i).metrics)return Is(a,p,i,t,s.concat(y));if(jF.hasOwnProperty(a)&&p.slice(0,10)==="Typewriter"){for(var T=[],S=0;S<a.length;S++)T.push(Is(a[S],p,i,t,s.concat(y)));return RF(T)}}if(n==="mathord")return Is(a,"Math-Italic",i,t,s.concat(["mathnormal"]));if(n==="textord"){var w=$r[i][a]&&$r[i][a].font;if(w==="ams"){var E=Ey("amsrm",t.fontWeight,t.fontShape);return Is(a,E,i,t,s.concat("amsrm",t.fontWeight,t.fontShape))}else if(w==="main"||!w){var I=Ey("textrm",t.fontWeight,t.fontShape);return Is(a,I,i,t,s.concat(t.fontWeight,t.fontShape))}else{var C=Ey(w,t.fontWeight,t.fontShape);return Is(a,C,i,t,s.concat(C,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},Wse=(r,e)=>{if(Xc(r.classes)!==Xc(e.classes)||r.skew!==e.skew||r.maxFontSize!==e.maxFontSize)return!1;if(r.classes.length===1){var t=r.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in r.style)if(r.style.hasOwnProperty(n)&&r.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&r.style[i]!==e.style[i])return!1;return!0},Xse=r=>{for(var e=0;e<r.length-1;e++){var t=r[e],n=r[e+1];t instanceof ps&&n instanceof ps&&Wse(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,r.splice(e+1,1),e--)}return r},R8=function(e){for(var t=0,n=0,i=0,a=0;a<e.children.length;a++){var s=e.children[a];s.height>t&&(t=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>i&&(i=s.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=i},ha=function(e,t,n,i){var a=new Ng(e,t,n,i);return R8(a),a},IF=(r,e,t,n)=>new Ng(r,e,t,n),Qse=function(e,t,n){var i=ha([e],[],t);return i.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=Je(i.height),i.maxFontSize=1,i},Yse=function(e,t,n,i){var a=new I8(e,t,n,i);return R8(a),a},RF=function(e){var t=new Eg(e);return R8(t),t},Zse=function(e,t){return e instanceof Eg?ha([],[e],t):e},Jse=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],i=-t[0].shift-t[0].elem.depth,a=i,s=1;s<t.length;s++){var c=-t[s].shift-a-t[s].elem.depth,d=c-(t[s-1].elem.height+t[s-1].elem.depth);a=a+c,n.push({type:"kern",size:d}),n.push(t[s])}return{children:n,depth:i}}var f;if(e.positionType==="top"){for(var m=e.positionData,p=0;p<e.children.length;p++){var y=e.children[p];m-=y.type==="kern"?y.size:y.elem.height+y.elem.depth}f=m}else if(e.positionType==="bottom")f=-e.positionData;else{var b=e.children[0];if(b.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")f=-b.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")f=-b.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:f}},eoe=function(e,t){for(var{children:n,depth:i}=Jse(e),a=0,s=0;s<n.length;s++){var c=n[s];if(c.type==="elem"){var d=c.elem;a=Math.max(a,d.maxFontSize,d.height)}}a+=2;var f=ha(["pstrut"],[]);f.style.height=Je(a);for(var m=[],p=i,y=i,b=i,T=0;T<n.length;T++){var S=n[T];if(S.type==="kern")b+=S.size;else{var w=S.elem,E=S.wrapperClasses||[],I=S.wrapperStyle||{},C=ha(E,[f,w],void 0,I);C.style.top=Je(-a-b-w.depth),S.marginLeft&&(C.style.marginLeft=S.marginLeft),S.marginRight&&(C.style.marginRight=S.marginRight),m.push(C),b+=w.height+w.depth}p=Math.min(p,b),y=Math.max(y,b)}var B=ha(["vlist"],m);B.style.height=Je(y);var R;if(p<0){var D=ha([],[]),A=ha(["vlist"],[D]);A.style.height=Je(-p);var k=ha(["vlist-s"],[new ps("")]);R=[ha(["vlist-r"],[B,k]),ha(["vlist-r"],[A])]}else R=[ha(["vlist-r"],[B])];var N=ha(["vlist-t"],R);return R.length===2&&N.classes.push("vlist-t2"),N.height=y,N.depth=-p,N},toe=(r,e)=>{var t=ha(["mspace"],[],e),n=on(r,e);return t.style.marginRight=Je(n),t},Ey=function(e,t,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var a;return t==="textbf"&&n==="textit"?a="BoldItalic":t==="textbf"?a="Bold":t==="textit"?a="Italic":a="Regular",i+"-"+a},MF={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},PF={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},roe=function(e,t){var[n,i,a]=PF[e],s=new Qc(n),c=new Tl([s],{width:Je(i),height:Je(a),style:"width:"+Je(i),viewBox:"0 0 "+1e3*i+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),d=IF(["overlay"],[c],t);return d.height=a,d.style.height=Je(a),d.style.width=Je(i),d},be={fontMap:MF,makeSymbol:Is,mathsym:Hse,makeSpan:ha,makeSvgSpan:IF,makeLineSpan:Qse,makeAnchor:Yse,makeFragment:RF,wrapFragment:Zse,makeVList:eoe,makeOrd:Kse,makeGlue:toe,staticSvg:roe,svgData:PF,tryCombineChars:Xse},sn={number:3,unit:"mu"},Pu={number:4,unit:"mu"},Qo={number:5,unit:"mu"},noe={mord:{mop:sn,mbin:Pu,mrel:Qo,minner:sn},mop:{mord:sn,mop:sn,mrel:Qo,minner:sn},mbin:{mord:Pu,mop:Pu,mopen:Pu,minner:Pu},mrel:{mord:Qo,mop:Qo,mopen:Qo,minner:Qo},mopen:{},mclose:{mop:sn,mbin:Pu,mrel:Qo,minner:sn},mpunct:{mord:sn,mop:sn,mrel:Qo,mopen:sn,mclose:sn,mpunct:sn,minner:sn},minner:{mord:sn,mop:sn,mbin:Pu,mrel:Qo,mopen:sn,mpunct:sn,minner:sn}},ioe={mord:{mop:sn},mop:{mord:sn,mop:sn},mbin:{},mrel:{},mopen:{},mclose:{mop:sn},mpunct:{},minner:{mop:sn}},DF={},Fv={},qv={};function it(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=r,c={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},d=0;d<t.length;++d)DF[t[d]]=c;e&&(a&&(Fv[e]=a),s&&(qv[e]=s))}function M0(r){var{type:e,htmlBuilder:t,mathmlBuilder:n}=r;it({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var Hv=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},On=function(e){return e.type==="ordgroup"?e.body:[e]},Al=be.makeSpan,aoe=["leftmost","mbin","mopen","mrel","mop","mpunct"],soe=["rightmost","mrel","mclose","mpunct"],ooe={display:St.DISPLAY,text:St.TEXT,script:St.SCRIPT,scriptscript:St.SCRIPTSCRIPT},loe={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Yn=function(e,t,n,i){i===void 0&&(i=[null,null]);for(var a=[],s=0;s<e.length;s++){var c=ar(e[s],t);if(c instanceof Eg){var d=c.children;a.push(...d)}else a.push(c)}if(be.tryCombineChars(a),!n)return a;var f=t;if(e.length===1){var m=e[0];m.type==="sizing"?f=t.havingSize(m.size):m.type==="styling"&&(f=t.havingStyle(ooe[m.style]))}var p=Al([i[0]||"leftmost"],[],t),y=Al([i[1]||"rightmost"],[],t),b=n==="root";return Wj(a,(T,S)=>{var w=S.classes[0],E=T.classes[0];w==="mbin"&&soe.includes(E)?S.classes[0]="mord":E==="mbin"&&aoe.includes(w)&&(T.classes[0]="mord")},{node:p},y,b),Wj(a,(T,S)=>{var w=_T(S),E=_T(T),I=w&&E?T.hasClass("mtight")?ioe[w][E]:noe[w][E]:null;if(I)return be.makeGlue(I,f)},{node:p},y,b),a},Wj=function r(e,t,n,i,a){i&&e.push(i);for(var s=0;s<e.length;s++){var c=e[s],d=LF(c);if(d){r(d.children,t,n,null,a);continue}var f=!c.hasClass("mspace");if(f){var m=t(c,n.node);m&&(n.insertAfter?n.insertAfter(m):(e.unshift(m),s++))}f?n.node=c:a&&c.hasClass("newline")&&(n.node=Al(["leftmost"])),n.insertAfter=(p=>y=>{e.splice(p+1,0,y),s++})(s)}i&&e.pop()},LF=function(e){return e instanceof Eg||e instanceof I8||e instanceof Ng&&e.hasClass("enclosing")?e:null},coe=function r(e,t){var n=LF(e);if(n){var i=n.children;if(i.length){if(t==="right")return r(i[i.length-1],"right");if(t==="left")return r(i[0],"left")}}return e},_T=function(e,t){return e?(t&&(e=coe(e,t)),loe[e.classes[0]]||null):null},Tp=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Al(t.concat(n))},ar=function(e,t,n){if(!e)return Al();if(Fv[e.type]){var i=Fv[e.type](e,t);if(n&&t.size!==n.size){i=Al(t.sizingClasses(n),[i],t);var a=t.sizeMultiplier/n.sizeMultiplier;i.height*=a,i.depth*=a}return i}else throw new Ge("Got group of unknown type: '"+e.type+"'")};function Ny(r,e){var t=Al(["base"],r,e),n=Al(["strut"]);return n.style.height=Je(t.height+t.depth),t.depth&&(n.style.verticalAlign=Je(-t.depth)),t.children.unshift(n),t}function ST(r,e){var t=null;r.length===1&&r[0].type==="tag"&&(t=r[0].tag,r=r[0].body);var n=Yn(r,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var a=[],s=[],c=0;c<n.length;c++)if(s.push(n[c]),n[c].hasClass("mbin")||n[c].hasClass("mrel")||n[c].hasClass("allowbreak")){for(var d=!1;c<n.length-1&&n[c+1].hasClass("mspace")&&!n[c+1].hasClass("newline");)c++,s.push(n[c]),n[c].hasClass("nobreak")&&(d=!0);d||(a.push(Ny(s,e)),s=[])}else n[c].hasClass("newline")&&(s.pop(),s.length>0&&(a.push(Ny(s,e)),s=[]),a.push(n[c]));s.length>0&&a.push(Ny(s,e));var f;t?(f=Ny(Yn(t,e,!0)),f.classes=["tag"],a.push(f)):i&&a.push(i);var m=Al(["katex-html"],a);if(m.setAttribute("aria-hidden","true"),f){var p=f.children[0];p.style.height=Je(m.height+m.depth),m.depth&&(p.style.verticalAlign=Je(-m.depth))}return m}function BF(r){return new Eg(r)}class Pa{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=Xc(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof ho&&this.children[n+1]instanceof ho){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof ho;)i+=this.children[++n].toText();e.appendChild(new ho(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=dr.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+dr.escape(Xc(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class ho{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return dr.escape(this.toText())}toText(){return this.text}}class uoe{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Je(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Je(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var Fe={MathNode:Pa,TextNode:ho,SpaceNode:uoe,newDocumentFragment:BF},gs=function(e,t,n){return $r[t][e]&&$r[t][e].replace&&e.charCodeAt(0)!==55349&&!(jF.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=$r[t][e].replace),new Fe.TextNode(e)},M8=function(e){return e.length===1?e[0]:new Fe.MathNode("mrow",e)},P8=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=e.text;if(["\\imath","\\jmath"].includes(a))return null;$r[i][a]&&$r[i][a].replace&&(a=$r[i][a].replace);var s=be.fontMap[n].fontName;return j8(a,s,i)?be.fontMap[n].variant:null};function r5(r){if(!r)return!1;if(r.type==="mi"&&r.children.length===1){var e=r.children[0];return e instanceof ho&&e.text==="."}else if(r.type==="mo"&&r.children.length===1&&r.getAttribute("separator")==="true"&&r.getAttribute("lspace")==="0em"&&r.getAttribute("rspace")==="0em"){var t=r.children[0];return t instanceof ho&&t.text===","}else return!1}var wa=function(e,t,n){if(e.length===1){var i=Pr(e[0],t);return n&&i instanceof Pa&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var a=[],s,c=0;c<e.length;c++){var d=Pr(e[c],t);if(d instanceof Pa&&s instanceof Pa){if(d.type==="mtext"&&s.type==="mtext"&&d.getAttribute("mathvariant")===s.getAttribute("mathvariant")){s.children.push(...d.children);continue}else if(d.type==="mn"&&s.type==="mn"){s.children.push(...d.children);continue}else if(r5(d)&&s.type==="mn"){s.children.push(...d.children);continue}else if(d.type==="mn"&&r5(s))d.children=[...s.children,...d.children],a.pop();else if((d.type==="msup"||d.type==="msub")&&d.children.length>=1&&(s.type==="mn"||r5(s))){var f=d.children[0];f instanceof Pa&&f.type==="mn"&&(f.children=[...s.children,...f.children],a.pop())}else if(s.type==="mi"&&s.children.length===1){var m=s.children[0];if(m instanceof ho&&m.text===""&&(d.type==="mo"||d.type==="mi"||d.type==="mn")){var p=d.children[0];p instanceof ho&&p.text.length>0&&(p.text=p.text.slice(0,1)+""+p.text.slice(1),a.pop())}}}a.push(d),s=d}return a},Yc=function(e,t,n){return M8(wa(e,t,n))},Pr=function(e,t){if(!e)return new Fe.MathNode("mrow");if(qv[e.type]){var n=qv[e.type](e,t);return n}else throw new Ge("Got group of unknown type: '"+e.type+"'")};function Xj(r,e,t,n,i){var a=wa(r,t),s;a.length===1&&a[0]instanceof Pa&&["mrow","mtable"].includes(a[0].type)?s=a[0]:s=new Fe.MathNode("mrow",a);var c=new Fe.MathNode("annotation",[new Fe.TextNode(e)]);c.setAttribute("encoding","application/x-tex");var d=new Fe.MathNode("semantics",[s,c]),f=new Fe.MathNode("math",[d]);f.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&f.setAttribute("display","block");var m=i?"katex":"katex-mathml";return be.makeSpan([m],[f])}var UF=function(e){return new tl({style:e.displayMode?St.DISPLAY:St.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},zF=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=be.makeSpan(n,[e])}return e},doe=function(e,t,n){var i=UF(n),a;if(n.output==="mathml")return Xj(e,t,i,n.displayMode,!0);if(n.output==="html"){var s=ST(e,i);a=be.makeSpan(["katex"],[s])}else{var c=Xj(e,t,i,n.displayMode,!1),d=ST(e,i);a=be.makeSpan(["katex"],[c,d])}return zF(a,n)},hoe=function(e,t,n){var i=UF(n),a=ST(e,i),s=be.makeSpan(["katex"],[a]);return zF(s,n)},foe={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},moe=function(e){var t=new Fe.MathNode("mo",[new Fe.TextNode(foe[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},poe={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},goe=function(e){return e.type==="ordgroup"?e.body.length:1},yoe=function(e,t){function n(){var c=4e5,d=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(d)){var f=e,m=goe(f.base),p,y,b;if(m>5)d==="widehat"||d==="widecheck"?(p=420,c=2364,b=.42,y=d+"4"):(p=312,c=2340,b=.34,y="tilde4");else{var T=[1,1,2,2,3,3][m];d==="widehat"||d==="widecheck"?(c=[0,1062,2364,2364,2364][T],p=[0,239,300,360,420][T],b=[0,.24,.3,.3,.36,.42][T],y=d+T):(c=[0,600,1033,2339,2340][T],p=[0,260,286,306,312][T],b=[0,.26,.286,.3,.306,.34][T],y="tilde"+T)}var S=new Qc(y),w=new Tl([S],{width:"100%",height:Je(b),viewBox:"0 0 "+c+" "+p,preserveAspectRatio:"none"});return{span:be.makeSvgSpan([],[w],t),minWidth:0,height:b}}else{var E=[],I=poe[d],[C,B,R]=I,D=R/1e3,A=C.length,k,N;if(A===1){var U=I[3];k=["hide-tail"],N=[U]}else if(A===2)k=["halfarrow-left","halfarrow-right"],N=["xMinYMin","xMaxYMin"];else if(A===3)k=["brace-left","brace-center","brace-right"],N=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+A+" children.");for(var M=0;M<A;M++){var $=new Qc(C[M]),z=new Tl([$],{width:"400em",height:Je(D),viewBox:"0 0 "+c+" "+R,preserveAspectRatio:N[M]+" slice"}),Q=be.makeSvgSpan([k[M]],[z],t);if(A===1)return{span:Q,minWidth:B,height:D};Q.style.height=Je(D),E.push(Q)}return{span:be.makeSpan(["stretchy"],E,t),minWidth:B,height:D}}}var{span:i,minWidth:a,height:s}=n();return i.height=s,i.style.height=Je(s),a>0&&(i.style.minWidth=Je(a)),i},voe=function(e,t,n,i,a){var s,c=e.height+e.depth+n+i;if(/fbox|color|angl/.test(t)){if(s=be.makeSpan(["stretchy",t],[],a),t==="fbox"){var d=a.color&&a.getColor();d&&(s.style.borderColor=d)}}else{var f=[];/^[bx]cancel$/.test(t)&&f.push(new xT({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&f.push(new xT({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var m=new Tl(f,{width:"100%",height:Je(c)});s=be.makeSvgSpan([],[m],a)}return s.height=c,s.style.height=Je(c),s},El={encloseSpan:voe,mathMLnode:moe,svgSpan:yoe};function Vt(r,e){if(!r||r.type!==e)throw new Error("Expected node of type "+e+", but got "+(r?"node of type "+r.type:String(r)));return r}function D8(r){var e=Ix(r);if(!e)throw new Error("Expected node of symbol group type, but got "+(r?"node of type "+r.type:String(r)));return e}function Ix(r){return r&&(r.type==="atom"||Fse.hasOwnProperty(r.type))?r:null}var L8=(r,e)=>{var t,n,i;r&&r.type==="supsub"?(n=Vt(r.base,"accent"),t=n.base,r.base=t,i=Vse(ar(r,e)),r.base=n):(n=Vt(r,"accent"),t=n.base);var a=ar(t,e.havingCrampedStyle()),s=n.isShifty&&dr.isCharacterBox(t),c=0;if(s){var d=dr.getBaseElem(t),f=ar(d,e.havingCrampedStyle());c=$j(f).skew}var m=n.label==="\\c",p=m?a.height+a.depth:Math.min(a.height,e.fontMetrics().xHeight),y;if(n.isStretchy)y=El.svgSpan(n,e),y=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:y,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+Je(2*c)+")",marginLeft:Je(2*c)}:void 0}]},e);else{var b,T;n.label==="\\vec"?(b=be.staticSvg("vec",e),T=be.svgData.vec[1]):(b=be.makeOrd({mode:n.mode,text:n.label},e,"textord"),b=$j(b),b.italic=0,T=b.width,m&&(p+=b.depth)),y=be.makeSpan(["accent-body"],[b]);var S=n.label==="\\textcircled";S&&(y.classes.push("accent-full"),p=a.height);var w=c;S||(w-=T/2),y.style.left=Je(w),n.label==="\\textcircled"&&(y.style.top=".2em"),y=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-p},{type:"elem",elem:y}]},e)}var E=be.makeSpan(["mord","accent"],[y],e);return i?(i.children[0]=E,i.height=Math.max(E.height,i.height),i.classes[0]="mord",i):E},VF=(r,e)=>{var t=r.isStretchy?El.mathMLnode(r.label):new Fe.MathNode("mo",[gs(r.label,r.mode)]),n=new Fe.MathNode("mover",[Pr(r.base,e),t]);return n.setAttribute("accent","true"),n},boe=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(r=>"\\"+r).join("|"));it({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(r,e)=>{var t=Hv(e[0]),n=!boe.test(r.funcName),i=!n||r.funcName==="\\widehat"||r.funcName==="\\widetilde"||r.funcName==="\\widecheck";return{type:"accent",mode:r.parser.mode,label:r.funcName,isStretchy:n,isShifty:i,base:t}},htmlBuilder:L8,mathmlBuilder:VF});it({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(r,e)=>{var t=e[0],n=r.parser.mode;return n==="math"&&(r.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+r.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:r.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:L8,mathmlBuilder:VF});it({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:i}},htmlBuilder:(r,e)=>{var t=ar(r.base,e),n=El.svgSpan(r,e),i=r.label==="\\utilde"?.12:0,a=be.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return be.makeSpan(["mord","accentunder"],[a],e)},mathmlBuilder:(r,e)=>{var t=El.mathMLnode(r.label),n=new Fe.MathNode("munder",[Pr(r.base,e),t]);return n.setAttribute("accentunder","true"),n}});var Oy=r=>{var e=new Fe.MathNode("mpadded",r?[r]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};it({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n,funcName:i}=r;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(r,e){var t=e.style,n=e.havingStyle(t.sup()),i=be.wrapFragment(ar(r.body,n,e),e),a=r.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(a+"-arrow-pad");var s;r.below&&(n=e.havingStyle(t.sub()),s=be.wrapFragment(ar(r.below,n,e),e),s.classes.push(a+"-arrow-pad"));var c=El.svgSpan(r,e),d=-e.fontMetrics().axisHeight+.5*c.height,f=-e.fontMetrics().axisHeight-.5*c.height-.111;(i.depth>.25||r.label==="\\xleftequilibrium")&&(f-=i.depth);var m;if(s){var p=-e.fontMetrics().axisHeight+s.height+.5*c.height+.111;m=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d},{type:"elem",elem:s,shift:p}]},e)}else m=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:f},{type:"elem",elem:c,shift:d}]},e);return m.children[0].children[0].children[1].classes.push("svg-align"),be.makeSpan(["mrel","x-arrow"],[m],e)},mathmlBuilder(r,e){var t=El.mathMLnode(r.label);t.setAttribute("minsize",r.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(r.body){var i=Oy(Pr(r.body,e));if(r.below){var a=Oy(Pr(r.below,e));n=new Fe.MathNode("munderover",[t,a,i])}else n=new Fe.MathNode("mover",[t,i])}else if(r.below){var s=Oy(Pr(r.below,e));n=new Fe.MathNode("munder",[t,s])}else n=Oy(),n=new Fe.MathNode("mover",[t,n]);return n}});var xoe=be.makeSpan;function $F(r,e){var t=Yn(r.body,e,!0);return xoe([r.mclass],t,e)}function FF(r,e){var t,n=wa(r.body,e);return r.mclass==="minner"?t=new Fe.MathNode("mpadded",n):r.mclass==="mord"?r.isCharacterBox?(t=n[0],t.type="mi"):t=new Fe.MathNode("mi",n):(r.isCharacterBox?(t=n[0],t.type="mo"):t=new Fe.MathNode("mo",n),r.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):r.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):r.mclass==="mopen"||r.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):r.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}it({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:On(i),isCharacterBox:dr.isCharacterBox(i)}},htmlBuilder:$F,mathmlBuilder:FF});var Rx=r=>{var e=r.type==="ordgroup"&&r.body.length?r.body[0]:r;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};it({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(r,e){var{parser:t}=r;return{type:"mclass",mode:t.mode,mclass:Rx(e[0]),body:On(e[1]),isCharacterBox:dr.isCharacterBox(e[1])}}});it({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(r,e){var{parser:t,funcName:n}=r,i=e[1],a=e[0],s;n!=="\\stackrel"?s=Rx(i):s="mrel";var c={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:On(i)},d={type:"supsub",mode:a.mode,base:c,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:t.mode,mclass:s,body:[d],isCharacterBox:dr.isCharacterBox(d)}},htmlBuilder:$F,mathmlBuilder:FF});it({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"pmb",mode:t.mode,mclass:Rx(e[0]),body:On(e[0])}},htmlBuilder(r,e){var t=Yn(r.body,e,!0),n=be.makeSpan([r.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(r,e){var t=wa(r.body,e),n=new Fe.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var woe={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Qj=()=>({type:"styling",body:[],mode:"math",style:"display"}),Yj=r=>r.type==="textord"&&r.text==="@",_oe=(r,e)=>(r.type==="mathord"||r.type==="atom")&&r.text===e;function Soe(r,e,t){var n=woe[r];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},s=t.callFunction("\\Big",[a],[]),c=t.callFunction("\\\\cdright",[e[1]],[]),d={type:"ordgroup",mode:"math",body:[i,s,c]};return t.callFunction("\\\\cdparent",[d],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var f={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[f],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Toe(r){var e=[];for(r.gullet.beginGroup(),r.gullet.macros.set("\\cr","\\\\\\relax"),r.gullet.beginGroup();;){e.push(r.parseExpression(!1,"\\\\")),r.gullet.endGroup(),r.gullet.beginGroup();var t=r.fetch().text;if(t==="&"||t==="\\\\")r.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Ge("Expected \\\\ or \\cr or \\end",r.nextToken)}for(var n=[],i=[n],a=0;a<e.length;a++){for(var s=e[a],c=Qj(),d=0;d<s.length;d++)if(!Yj(s[d]))c.body.push(s[d]);else{n.push(c),d+=1;var f=D8(s[d]).text,m=new Array(2);if(m[0]={type:"ordgroup",mode:"math",body:[]},m[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(f)>-1))if("<>AV".indexOf(f)>-1)for(var p=0;p<2;p++){for(var y=!0,b=d+1;b<s.length;b++){if(_oe(s[b],f)){y=!1,d=b;break}if(Yj(s[b]))throw new Ge("Missing a "+f+" character to complete a CD arrow.",s[b]);m[p].body.push(s[b])}if(y)throw new Ge("Missing a "+f+" character to complete a CD arrow.",s[d])}else throw new Ge('Expected one of "<>AV=|." after @',s[d]);var T=Soe(f,m,r),S={type:"styling",body:[T],mode:"math",style:"display"};n.push(S),c=Qj()}a%2===0?n.push(c):n.shift(),n=[],i.push(n)}r.gullet.endGroup(),r.gullet.endGroup();var w=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:w,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}it({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(r,e){var t=e.havingStyle(e.style.sup()),n=be.wrapFragment(ar(r.label,t,e),e);return n.classes.push("cd-label-"+r.side),n.style.bottom=Je(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(r,e){var t=new Fe.MathNode("mrow",[Pr(r.label,e)]);return t=new Fe.MathNode("mpadded",[t]),t.setAttribute("width","0"),r.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new Fe.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});it({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(r,e){var{parser:t}=r;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(r,e){var t=be.wrapFragment(ar(r.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(r,e){return new Fe.MathNode("mrow",[Pr(r.fragment,e)])}});it({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(r,e){for(var{parser:t}=r,n=Vt(e[0],"ordgroup"),i=n.body,a="",s=0;s<i.length;s++){var c=Vt(i[s],"textord");a+=c.text}var d=parseInt(a),f;if(isNaN(d))throw new Ge("\\@char has non-numeric argument "+a);if(d<0||d>=1114111)throw new Ge("\\@char with invalid code point "+a);return d<=65535?f=String.fromCharCode(d):(d-=65536,f=String.fromCharCode((d>>10)+55296,(d&1023)+56320)),{type:"textord",mode:t.mode,text:f}}});var qF=(r,e)=>{var t=Yn(r.body,e.withColor(r.color),!1);return be.makeFragment(t)},HF=(r,e)=>{var t=wa(r.body,e.withColor(r.color)),n=new Fe.MathNode("mstyle",t);return n.setAttribute("mathcolor",r.color),n};it({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(r,e){var{parser:t}=r,n=Vt(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:n,body:On(i)}},htmlBuilder:qF,mathmlBuilder:HF});it({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(r,e){var{parser:t,breakOnTokenText:n}=r,i=Vt(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var a=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:i,body:a}},htmlBuilder:qF,mathmlBuilder:HF});it({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(r,e,t){var{parser:n}=r,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:i&&Vt(i,"size").value}},htmlBuilder(r,e){var t=be.makeSpan(["mspace"],[],e);return r.newLine&&(t.classes.push("newline"),r.size&&(t.style.marginTop=Je(on(r.size,e)))),t},mathmlBuilder(r,e){var t=new Fe.MathNode("mspace");return r.newLine&&(t.setAttribute("linebreak","newline"),r.size&&t.setAttribute("height",Je(on(r.size,e)))),t}});var TT={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},GF=r=>{var e=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Ge("Expected a control sequence",r);return e},Aoe=r=>{var e=r.gullet.popToken();return e.text==="="&&(e=r.gullet.popToken(),e.text===" "&&(e=r.gullet.popToken())),e},KF=(r,e,t,n)=>{var i=r.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!r.gullet.isExpandable(t.text)}),r.gullet.macros.set(e,i,n)};it({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(r){var{parser:e,funcName:t}=r;e.consumeSpaces();var n=e.fetch();if(TT[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=TT[n.text]),Vt(e.parseFunction(),"internal");throw new Ge("Invalid token after macro prefix",n)}});it({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new Ge("Expected a control sequence",n);for(var a=0,s,c=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){s=e.gullet.future(),c[a].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Ge('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new Ge('Argument number "'+n.text+'" out of order');a++,c.push([])}else{if(n.text==="EOF")throw new Ge("Expected a macro definition");c[a].push(n.text)}var{tokens:d}=e.gullet.consumeArg();return s&&d.unshift(s),(t==="\\edef"||t==="\\xdef")&&(d=e.gullet.expandTokens(d),d.reverse()),e.gullet.macros.set(i,{tokens:d,numArgs:a,delimiters:c},t===TT[t]),{type:"internal",mode:e.mode}}});it({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=GF(e.gullet.popToken());e.gullet.consumeSpaces();var i=Aoe(e);return KF(e,n,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});it({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=GF(e.gullet.popToken()),i=e.gullet.popToken(),a=e.gullet.popToken();return KF(e,n,a,t==="\\\\globalfuture"),e.gullet.pushToken(a),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var jm=function(e,t,n){var i=$r.math[e]&&$r.math[e].replace,a=j8(i||e,t,n);if(!a)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return a},B8=function(e,t,n,i){var a=n.havingBaseStyle(t),s=be.makeSpan(i.concat(a.sizingClasses(n)),[e],n),c=a.sizeMultiplier/n.sizeMultiplier;return s.height*=c,s.depth*=c,s.maxFontSize=a.sizeMultiplier,s},WF=function(e,t,n){var i=t.havingBaseStyle(n),a=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Je(a),e.height-=a,e.depth+=a},Eoe=function(e,t,n,i,a,s){var c=be.makeSymbol(e,"Main-Regular",a,i),d=B8(c,t,i,s);return n&&WF(d,i,t),d},Noe=function(e,t,n,i){return be.makeSymbol(e,"Size"+t+"-Regular",n,i)},XF=function(e,t,n,i,a,s){var c=Noe(e,t,a,i),d=B8(be.makeSpan(["delimsizing","size"+t],[c],i),St.TEXT,i,s);return n&&WF(d,i,St.TEXT),d},n5=function(e,t,n){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var a=be.makeSpan(["delimsizinginner",i],[be.makeSpan([],[be.makeSymbol(e,t,n)])]);return{type:"elem",elem:a}},i5=function(e,t,n){var i=uo["Size4-Regular"][e.charCodeAt(0)]?uo["Size4-Regular"][e.charCodeAt(0)][4]:uo["Size1-Regular"][e.charCodeAt(0)][4],a=new Qc("inner",Ise(e,Math.round(1e3*t))),s=new Tl([a],{width:Je(i),height:Je(t),style:"width:"+Je(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),c=be.makeSvgSpan([],[s],n);return c.height=t,c.style.height=Je(t),c.style.width=Je(i),{type:"elem",elem:c}},AT=.008,ky={type:"kern",size:-1*AT},Ooe=["|","\\lvert","\\rvert","\\vert"],koe=["\\|","\\lVert","\\rVert","\\Vert"],QF=function(e,t,n,i,a,s){var c,d,f,m,p="",y=0;c=f=m=e,d=null;var b="Size1-Regular";e==="\\uparrow"?f=m="":e==="\\Uparrow"?f=m="":e==="\\downarrow"?c=f="":e==="\\Downarrow"?c=f="":e==="\\updownarrow"?(c="\\uparrow",f="",m="\\downarrow"):e==="\\Updownarrow"?(c="\\Uparrow",f="",m="\\Downarrow"):Ooe.includes(e)?(f="",p="vert",y=333):koe.includes(e)?(f="",p="doublevert",y=556):e==="["||e==="\\lbrack"?(c="",f="",m="",b="Size4-Regular",p="lbrack",y=667):e==="]"||e==="\\rbrack"?(c="",f="",m="",b="Size4-Regular",p="rbrack",y=667):e==="\\lfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="lfloor",y=667):e==="\\lceil"||e===""?(c="",f=m="",b="Size4-Regular",p="lceil",y=667):e==="\\rfloor"||e===""?(f=c="",m="",b="Size4-Regular",p="rfloor",y=667):e==="\\rceil"||e===""?(c="",f=m="",b="Size4-Regular",p="rceil",y=667):e==="("||e==="\\lparen"?(c="",f="",m="",b="Size4-Regular",p="lparen",y=875):e===")"||e==="\\rparen"?(c="",f="",m="",b="Size4-Regular",p="rparen",y=875):e==="\\{"||e==="\\lbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(c="",d="",m="",f="",b="Size4-Regular"):e==="\\lgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\rgroup"||e===""?(c="",m="",f="",b="Size4-Regular"):e==="\\lmoustache"||e===""?(c="",m="",f="",b="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(c="",m="",f="",b="Size4-Regular");var T=jm(c,b,a),S=T.height+T.depth,w=jm(f,b,a),E=w.height+w.depth,I=jm(m,b,a),C=I.height+I.depth,B=0,R=1;if(d!==null){var D=jm(d,b,a);B=D.height+D.depth,R=2}var A=S+C+B,k=Math.max(0,Math.ceil((t-A)/(R*E))),N=A+k*R*E,U=i.fontMetrics().axisHeight;n&&(U*=i.sizeMultiplier);var M=N/2-U,$=[];if(p.length>0){var z=N-S-C,Q=Math.round(N*1e3),ee=Rse(p,Math.round(z*1e3)),K=new Qc(p,ee),Z=(y/1e3).toFixed(3)+"em",Y=(Q/1e3).toFixed(3)+"em",ge=new Tl([K],{width:Z,height:Y,viewBox:"0 0 "+y+" "+Q}),ae=be.makeSvgSpan([],[ge],i);ae.height=Q/1e3,ae.style.width=Z,ae.style.height=Y,$.push({type:"elem",elem:ae})}else{if($.push(n5(m,b,a)),$.push(ky),d===null){var X=N-S-C+2*AT;$.push(i5(f,X,i))}else{var J=(N-S-C-B)/2+2*AT;$.push(i5(f,J,i)),$.push(ky),$.push(n5(d,b,a)),$.push(ky),$.push(i5(f,J,i))}$.push(ky),$.push(n5(c,b,a))}var ce=i.havingBaseStyle(St.TEXT),Ne=be.makeVList({positionType:"bottom",positionData:M,children:$},ce);return B8(be.makeSpan(["delimsizing","mult"],[Ne],ce),St.TEXT,i,s)},a5=80,s5=.08,o5=function(e,t,n,i,a){var s=jse(e,i,n),c=new Qc(e,s),d=new Tl([c],{width:"400em",height:Je(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return be.makeSvgSpan(["hide-tail"],[d],a)},Coe=function(e,t){var n=t.havingBaseSizing(),i=eq("\\surd",e*n.sizeMultiplier,JF,n),a=n.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),c,d=0,f=0,m=0,p;return i.type==="small"?(m=1e3+1e3*s+a5,e<1?a=1:e<1.4&&(a=.7),d=(1+s+s5)/a,f=(1+s)/a,c=o5("sqrtMain",d,m,s,t),c.style.minWidth="0.853em",p=.833/a):i.type==="large"?(m=(1e3+a5)*Hm[i.size],f=(Hm[i.size]+s)/a,d=(Hm[i.size]+s+s5)/a,c=o5("sqrtSize"+i.size,d,m,s,t),c.style.minWidth="1.02em",p=1/a):(d=e+s+s5,f=e+s,m=Math.floor(1e3*e+s)+a5,c=o5("sqrtTall",d,m,s,t),c.style.minWidth="0.742em",p=1.056),c.height=f,c.style.height=Je(d),{span:c,advanceWidth:p,ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*a}},YF=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],joe=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],ZF=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Hm=[0,1.2,1.8,2.4,3],Ioe=function(e,t,n,i,a){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),YF.includes(e)||ZF.includes(e))return XF(e,t,!1,n,i,a);if(joe.includes(e))return QF(e,Hm[t],!1,n,i,a);throw new Ge("Illegal delimiter: '"+e+"'")},Roe=[{type:"small",style:St.SCRIPTSCRIPT},{type:"small",style:St.SCRIPT},{type:"small",style:St.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Moe=[{type:"small",style:St.SCRIPTSCRIPT},{type:"small",style:St.SCRIPT},{type:"small",style:St.TEXT},{type:"stack"}],JF=[{type:"small",style:St.SCRIPTSCRIPT},{type:"small",style:St.SCRIPT},{type:"small",style:St.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Poe=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},eq=function(e,t,n,i){for(var a=Math.min(2,3-i.style.size),s=a;s<n.length&&n[s].type!=="stack";s++){var c=jm(e,Poe(n[s]),"math"),d=c.height+c.depth;if(n[s].type==="small"){var f=i.havingBaseStyle(n[s].style);d*=f.sizeMultiplier}if(d>t)return n[s]}return n[n.length-1]},tq=function(e,t,n,i,a,s){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var c;ZF.includes(e)?c=Roe:YF.includes(e)?c=JF:c=Moe;var d=eq(e,t,c,i);return d.type==="small"?Eoe(e,d.style,n,i,a,s):d.type==="large"?XF(e,d.size,n,i,a,s):QF(e,t,n,i,a,s)},Doe=function(e,t,n,i,a,s){var c=i.fontMetrics().axisHeight*i.sizeMultiplier,d=901,f=5/i.fontMetrics().ptPerEm,m=Math.max(t-c,n+c),p=Math.max(m/500*d,2*m-f);return tq(e,p,!0,i,a,s)},ml={sqrtImage:Coe,sizedDelim:Ioe,sizeToMaxHeight:Hm,customSizedDelim:tq,leftRightDelim:Doe},Zj={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Loe=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Mx(r,e){var t=Ix(r);if(t&&Loe.includes(t.text))return t;throw t?new Ge("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",r):new Ge("Invalid delimiter type '"+r.type+"'",r)}it({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(r,e)=>{var t=Mx(e[0],r);return{type:"delimsizing",mode:r.parser.mode,size:Zj[r.funcName].size,mclass:Zj[r.funcName].mclass,delim:t.text}},htmlBuilder:(r,e)=>r.delim==="."?be.makeSpan([r.mclass]):ml.sizedDelim(r.delim,r.size,e,r.mode,[r.mclass]),mathmlBuilder:r=>{var e=[];r.delim!=="."&&e.push(gs(r.delim,r.mode));var t=new Fe.MathNode("mo",e);r.mclass==="mopen"||r.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=Je(ml.sizeToMaxHeight[r.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function Jj(r){if(!r.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}it({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=r.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new Ge("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:r.parser.mode,delim:Mx(e[0],r).text,color:t}}});it({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=Mx(e[0],r),n=r.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=Vt(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:t.text,right:a.delim,rightColor:a.color}},htmlBuilder:(r,e)=>{Jj(r);for(var t=Yn(r.body,e,!0,["mopen","mclose"]),n=0,i=0,a=!1,s=0;s<t.length;s++)t[s].isMiddle?a=!0:(n=Math.max(t[s].height,n),i=Math.max(t[s].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var c;if(r.left==="."?c=Tp(e,["mopen"]):c=ml.leftRightDelim(r.left,n,i,e,r.mode,["mopen"]),t.unshift(c),a)for(var d=1;d<t.length;d++){var f=t[d],m=f.isMiddle;m&&(t[d]=ml.leftRightDelim(m.delim,n,i,m.options,r.mode,[]))}var p;if(r.right===".")p=Tp(e,["mclose"]);else{var y=r.rightColor?e.withColor(r.rightColor):e;p=ml.leftRightDelim(r.right,n,i,y,r.mode,["mclose"])}return t.push(p),be.makeSpan(["minner"],t,e)},mathmlBuilder:(r,e)=>{Jj(r);var t=wa(r.body,e);if(r.left!=="."){var n=new Fe.MathNode("mo",[gs(r.left,r.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(r.right!=="."){var i=new Fe.MathNode("mo",[gs(r.right,r.mode)]);i.setAttribute("fence","true"),r.rightColor&&i.setAttribute("mathcolor",r.rightColor),t.push(i)}return M8(t)}});it({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=Mx(e[0],r);if(!r.parser.leftrightDepth)throw new Ge("\\middle without preceding \\left",t);return{type:"middle",mode:r.parser.mode,delim:t.text}},htmlBuilder:(r,e)=>{var t;if(r.delim===".")t=Tp(e,[]);else{t=ml.sizedDelim(r.delim,1,e,r.mode,[]);var n={delim:r.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(r,e)=>{var t=r.delim==="\\vert"||r.delim==="|"?gs("|","text"):gs(r.delim,r.mode),n=new Fe.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var U8=(r,e)=>{var t=be.wrapFragment(ar(r.body,e),e),n=r.label.slice(1),i=e.sizeMultiplier,a,s=0,c=dr.isCharacterBox(r.body);if(n==="sout")a=be.makeSpan(["stretchy","sout"]),a.height=e.fontMetrics().defaultRuleThickness/i,s=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var d=on({number:.6,unit:"pt"},e),f=on({number:.35,unit:"ex"},e),m=e.havingBaseSizing();i=i/m.sizeMultiplier;var p=t.height+t.depth+d+f;t.style.paddingLeft=Je(p/2+d);var y=Math.floor(1e3*p*i),b=kse(y),T=new Tl([new Qc("phase",b)],{width:"400em",height:Je(y/1e3),viewBox:"0 0 400000 "+y,preserveAspectRatio:"xMinYMin slice"});a=be.makeSvgSpan(["hide-tail"],[T],e),a.style.height=Je(p),s=t.depth+d+f}else{/cancel/.test(n)?c||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var S=0,w=0,E=0;/box/.test(n)?(E=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),S=e.fontMetrics().fboxsep+(n==="colorbox"?0:E),w=S):n==="angl"?(E=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),S=4*E,w=Math.max(0,.25-t.depth)):(S=c?.2:0,w=S),a=El.encloseSpan(t,n,S,w,e),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=Je(E)):n==="angl"&&E!==.049&&(a.style.borderTopWidth=Je(E),a.style.borderRightWidth=Je(E)),s=t.depth+w,r.backgroundColor&&(a.style.backgroundColor=r.backgroundColor,r.borderColor&&(a.style.borderColor=r.borderColor))}var I;if(r.backgroundColor)I=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:s},{type:"elem",elem:t,shift:0}]},e);else{var C=/cancel|phase/.test(n)?["svg-align"]:[];I=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:a,shift:s,wrapperClasses:C}]},e)}return/cancel/.test(n)&&(I.height=t.height,I.depth=t.depth),/cancel/.test(n)&&!c?be.makeSpan(["mord","cancel-lap"],[I],e):be.makeSpan(["mord"],[I],e)},z8=(r,e)=>{var t=0,n=new Fe.MathNode(r.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Pr(r.body,e)]);switch(r.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),r.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(r.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return r.backgroundColor&&n.setAttribute("mathbackground",r.backgroundColor),n};it({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,a=Vt(e[0],"color-token").color,s=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,body:s}},htmlBuilder:U8,mathmlBuilder:z8});it({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,a=Vt(e[0],"color-token").color,s=Vt(e[1],"color-token").color,c=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,borderColor:a,body:c}},htmlBuilder:U8,mathmlBuilder:z8});it({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});it({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"enclose",mode:t.mode,label:n,body:i}},htmlBuilder:U8,mathmlBuilder:z8});it({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var rq={};function To(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:a,mathmlBuilder:s}=r,c={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},d=0;d<t.length;++d)rq[t[d]]=c;a&&(Fv[e]=a),s&&(qv[e]=s)}var nq={};function G(r,e){nq[r]=e}function eI(r){var e=[];r.consumeSpaces();var t=r.fetch().text;for(t==="\\relax"&&(r.consume(),r.consumeSpaces(),t=r.fetch().text);t==="\\hline"||t==="\\hdashline";)r.consume(),e.push(t==="\\hdashline"),r.consumeSpaces(),t=r.fetch().text;return e}var Px=r=>{var e=r.parser.settings;if(!e.displayMode)throw new Ge("{"+r.envName+"} can be used only in display mode.")};function V8(r){if(r.indexOf("ed")===-1)return r.indexOf("*")===-1}function ru(r,e,t){var{hskipBeforeAndAfter:n,addJot:i,cols:a,arraystretch:s,colSeparationType:c,autoTag:d,singleRow:f,emptySingleRow:m,maxNumCols:p,leqno:y}=e;if(r.gullet.beginGroup(),f||r.gullet.macros.set("\\cr","\\\\\\relax"),!s){var b=r.gullet.expandMacroAsText("\\arraystretch");if(b==null)s=1;else if(s=parseFloat(b),!s||s<0)throw new Ge("Invalid \\arraystretch: "+b)}r.gullet.beginGroup();var T=[],S=[T],w=[],E=[],I=d!=null?[]:void 0;function C(){d&&r.gullet.macros.set("\\@eqnsw","1",!0)}function B(){I&&(r.gullet.macros.get("\\df@tag")?(I.push(r.subparse([new $a("\\df@tag")])),r.gullet.macros.set("\\df@tag",void 0,!0)):I.push(!!d&&r.gullet.macros.get("\\@eqnsw")==="1"))}for(C(),E.push(eI(r));;){var R=r.parseExpression(!1,f?"\\end":"\\\\");r.gullet.endGroup(),r.gullet.beginGroup(),R={type:"ordgroup",mode:r.mode,body:R},t&&(R={type:"styling",mode:r.mode,style:t,body:[R]}),T.push(R);var D=r.fetch().text;if(D==="&"){if(p&&T.length===p){if(f||c)throw new Ge("Too many tab characters: &",r.nextToken);r.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}r.consume()}else if(D==="\\end"){B(),T.length===1&&R.type==="styling"&&R.body[0].body.length===0&&(S.length>1||!m)&&S.pop(),E.length<S.length+1&&E.push([]);break}else if(D==="\\\\"){r.consume();var A=void 0;r.gullet.future().text!==" "&&(A=r.parseSizeGroup(!0)),w.push(A?A.value:null),B(),E.push(eI(r)),T=[],S.push(T),C()}else throw new Ge("Expected & or \\\\ or \\cr or \\end",r.nextToken)}return r.gullet.endGroup(),r.gullet.endGroup(),{type:"array",mode:r.mode,addJot:i,arraystretch:s,body:S,cols:a,rowGaps:w,hskipBeforeAndAfter:n,hLinesBeforeRow:E,colSeparationType:c,tags:I,leqno:y}}function $8(r){return r.slice(0,1)==="d"?"display":"text"}var Ao=function(e,t){var n,i,a=e.body.length,s=e.hLinesBeforeRow,c=0,d=new Array(a),f=[],m=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),p=1/t.fontMetrics().ptPerEm,y=5*p;if(e.colSeparationType&&e.colSeparationType==="small"){var b=t.havingStyle(St.SCRIPT).sizeMultiplier;y=.2778*(b/t.sizeMultiplier)}var T=e.colSeparationType==="CD"?on({number:3,unit:"ex"},t):12*p,S=3*p,w=e.arraystretch*T,E=.7*w,I=.3*w,C=0;function B(Ie){for(var de=0;de<Ie.length;++de)de>0&&(C+=.25),f.push({pos:C,isDashed:Ie[de]})}for(B(s[0]),n=0;n<e.body.length;++n){var R=e.body[n],D=E,A=I;c<R.length&&(c=R.length);var k=new Array(R.length);for(i=0;i<R.length;++i){var N=ar(R[i],t);A<N.depth&&(A=N.depth),D<N.height&&(D=N.height),k[i]=N}var U=e.rowGaps[n],M=0;U&&(M=on(U,t),M>0&&(M+=I,A<M&&(A=M),M=0)),e.addJot&&(A+=S),k.height=D,k.depth=A,C+=D,k.pos=C,C+=A+M,d[n]=k,B(s[n+1])}var $=C/2+t.fontMetrics().axisHeight,z=e.cols||[],Q=[],ee,K,Z=[];if(e.tags&&e.tags.some(Ie=>Ie))for(n=0;n<a;++n){var Y=d[n],ge=Y.pos-$,ae=e.tags[n],X=void 0;ae===!0?X=be.makeSpan(["eqn-num"],[],t):ae===!1?X=be.makeSpan([],[],t):X=be.makeSpan([],Yn(ae,t,!0),t),X.depth=Y.depth,X.height=Y.height,Z.push({type:"elem",elem:X,shift:ge})}for(i=0,K=0;i<c||K<z.length;++i,++K){for(var J=z[K]||{},ce=!0;J.type==="separator";){if(ce||(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(t.fontMetrics().doubleRuleSep),Q.push(ee)),J.separator==="|"||J.separator===":"){var Ne=J.separator==="|"?"solid":"dashed",se=be.makeSpan(["vertical-separator"],[],t);se.style.height=Je(C),se.style.borderRightWidth=Je(m),se.style.borderRightStyle=Ne,se.style.margin="0 "+Je(-m/2);var ke=C-$;ke&&(se.style.verticalAlign=Je(-ke)),Q.push(se)}else throw new Ge("Invalid separator type: "+J.separator);K++,J=z[K]||{},ce=!1}if(!(i>=c)){var Me=void 0;(i>0||e.hskipBeforeAndAfter)&&(Me=dr.deflt(J.pregap,y),Me!==0&&(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(Me),Q.push(ee)));var ot=[];for(n=0;n<a;++n){var Ee=d[n],He=Ee[i];if(He){var he=Ee.pos-$;He.depth=Ee.depth,He.height=Ee.height,ot.push({type:"elem",elem:He,shift:he})}}ot=be.makeVList({positionType:"individualShift",children:ot},t),ot=be.makeSpan(["col-align-"+(J.align||"c")],[ot]),Q.push(ot),(i<c-1||e.hskipBeforeAndAfter)&&(Me=dr.deflt(J.postgap,y),Me!==0&&(ee=be.makeSpan(["arraycolsep"],[]),ee.style.width=Je(Me),Q.push(ee)))}}if(d=be.makeSpan(["mtable"],Q),f.length>0){for(var pe=be.makeLineSpan("hline",t,m),Ye=be.makeLineSpan("hdashline",t,m),Ke=[{type:"elem",elem:d,shift:0}];f.length>0;){var at=f.pop(),tt=at.pos-$;at.isDashed?Ke.push({type:"elem",elem:Ye,shift:tt}):Ke.push({type:"elem",elem:pe,shift:tt})}d=be.makeVList({positionType:"individualShift",children:Ke},t)}if(Z.length===0)return be.makeSpan(["mord"],[d],t);var Gt=be.makeVList({positionType:"individualShift",children:Z},t);return Gt=be.makeSpan(["tag"],[Gt],t),be.makeFragment([d,Gt])},Boe={c:"center ",l:"left ",r:"right "},Eo=function(e,t){for(var n=[],i=new Fe.MathNode("mtd",[],["mtr-glue"]),a=new Fe.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var c=e.body[s],d=[],f=0;f<c.length;f++)d.push(new Fe.MathNode("mtd",[Pr(c[f],t)]));e.tags&&e.tags[s]&&(d.unshift(i),d.push(i),e.leqno?d.unshift(a):d.push(a)),n.push(new Fe.MathNode("mtr",d))}var m=new Fe.MathNode("mtable",n),p=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);m.setAttribute("rowspacing",Je(p));var y="",b="";if(e.cols&&e.cols.length>0){var T=e.cols,S="",w=!1,E=0,I=T.length;T[0].type==="separator"&&(y+="top ",E=1),T[T.length-1].type==="separator"&&(y+="bottom ",I-=1);for(var C=E;C<I;C++)T[C].type==="align"?(b+=Boe[T[C].align],w&&(S+="none "),w=!0):T[C].type==="separator"&&w&&(S+=T[C].separator==="|"?"solid ":"dashed ",w=!1);m.setAttribute("columnalign",b.trim()),/[sd]/.test(S)&&m.setAttribute("columnlines",S.trim())}if(e.colSeparationType==="align"){for(var B=e.cols||[],R="",D=1;D<B.length;D++)R+=D%2?"0em ":"1em ";m.setAttribute("columnspacing",R.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?m.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?m.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?m.setAttribute("columnspacing","0.5em"):m.setAttribute("columnspacing","1em");var A="",k=e.hLinesBeforeRow;y+=k[0].length>0?"left ":"",y+=k[k.length-1].length>0?"right ":"";for(var N=1;N<k.length-1;N++)A+=k[N].length===0?"none ":k[N][0]?"dashed ":"solid ";return/[sd]/.test(A)&&m.setAttribute("rowlines",A.trim()),y!==""&&(m=new Fe.MathNode("menclose",[m]),m.setAttribute("notation",y.trim())),e.arraystretch&&e.arraystretch<1&&(m=new Fe.MathNode("mstyle",[m]),m.setAttribute("scriptlevel","1")),m},iq=function(e,t){e.envName.indexOf("ed")===-1&&Px(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a=e.envName==="split",s=ru(e.parser,{cols:n,addJot:!0,autoTag:a?void 0:V8(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),c,d=0,f={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var m="",p=0;p<t[0].body.length;p++){var y=Vt(t[0].body[p],"textord");m+=y.text}c=Number(m),d=c*2}var b=!d;s.body.forEach(function(E){for(var I=1;I<E.length;I+=2){var C=Vt(E[I],"styling"),B=Vt(C.body[0],"ordgroup");B.body.unshift(f)}if(b)d<E.length&&(d=E.length);else{var R=E.length/2;if(c<R)throw new Ge("Too many math in a row: "+("expected "+c+", but got "+R),E[0])}});for(var T=0;T<d;++T){var S="r",w=0;T%2===1?S="l":T>0&&b&&(w=1),n[T]={type:"align",align:S,pregap:w,postgap:0}}return s.colSeparationType=b?"align":"alignat",s};To({type:"array",names:["array","darray"],props:{numArgs:1},handler(r,e){var t=Ix(e[0]),n=t?[e[0]]:Vt(e[0],"ordgroup").body,i=n.map(function(s){var c=D8(s),d=c.text;if("lcr".indexOf(d)!==-1)return{type:"align",align:d};if(d==="|")return{type:"separator",separator:"|"};if(d===":")return{type:"separator",separator:":"};throw new Ge("Unknown column alignment: "+d,s)}),a={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return ru(r.parser,a,$8(r.envName))},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(r){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[r.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(r.envName.charAt(r.envName.length-1)==="*"){var i=r.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new Ge("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:t}]}}var a=ru(r.parser,n,$8(r.envName)),s=Math.max(0,...a.body.map(c=>c.length));return a.cols=new Array(s).fill({type:"align",align:t}),e?{type:"leftright",mode:r.mode,body:[a],left:e[0],right:e[1],rightColor:void 0}:a},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(r){var e={arraystretch:.5},t=ru(r.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["subarray"],props:{numArgs:1},handler(r,e){var t=Ix(e[0]),n=t?[e[0]]:Vt(e[0],"ordgroup").body,i=n.map(function(s){var c=D8(s),d=c.text;if("lc".indexOf(d)!==-1)return{type:"align",align:d};throw new Ge("Unknown column alignment: "+d,s)});if(i.length>1)throw new Ge("{subarray} can contain only one column");var a={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=ru(r.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new Ge("{subarray} can contain only one column");return a},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(r){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=ru(r.parser,e,$8(r.envName));return{type:"leftright",mode:r.mode,body:[t],left:r.envName.indexOf("r")>-1?".":"\\{",right:r.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:iq,htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(r){["gather","gather*"].includes(r.envName)&&Px(r);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:V8(r.envName),emptySingleRow:!0,leqno:r.parser.settings.leqno};return ru(r.parser,e,"display")},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:iq,htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(r){Px(r);var e={autoTag:V8(r.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:r.parser.settings.leqno};return ru(r.parser,e,"display")},htmlBuilder:Ao,mathmlBuilder:Eo});To({type:"array",names:["CD"],props:{numArgs:0},handler(r){return Px(r),Toe(r.parser)},htmlBuilder:Ao,mathmlBuilder:Eo});G("\\nonumber","\\gdef\\@eqnsw{0}");G("\\notag","\\nonumber");it({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(r,e){throw new Ge(r.funcName+" valid only within array environment")}});var tI=rq;it({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];if(i.type!=="ordgroup")throw new Ge("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=Vt(i.body[s],"textord").text;if(n==="\\begin"){if(!tI.hasOwnProperty(a))throw new Ge("No such environment: "+a,i);var c=tI[a],{args:d,optArgs:f}=t.parseArguments("\\begin{"+a+"}",c),m={mode:t.mode,envName:a,parser:t},p=c.handler(m,d,f);t.expect("\\end",!1);var y=t.nextToken,b=Vt(t.parseFunction(),"environment");if(b.name!==a)throw new Ge("Mismatch: \\begin{"+a+"} matched by \\end{"+b.name+"}",y);return p}return{type:"environment",mode:t.mode,name:a,nameGroup:i}}});var aq=(r,e)=>{var t=r.font,n=e.withFont(t);return ar(r.body,n)},sq=(r,e)=>{var t=r.font,n=e.withFont(t);return Pr(r.body,n)},rI={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};it({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=Hv(e[0]),a=n;return a in rI&&(a=rI[a]),{type:"font",mode:t.mode,font:a.slice(1),body:i}},htmlBuilder:aq,mathmlBuilder:sq});it({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(r,e)=>{var{parser:t}=r,n=e[0],i=dr.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:Rx(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});it({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,breakOnTokenText:i}=r,{mode:a}=t,s=t.parseExpression(!0,i),c="math"+n.slice(1);return{type:"font",mode:a,font:c,body:{type:"ordgroup",mode:t.mode,body:s}}},htmlBuilder:aq,mathmlBuilder:sq});var oq=(r,e)=>{var t=e;return r==="display"?t=t.id>=St.SCRIPT.id?t.text():St.DISPLAY:r==="text"&&t.size===St.DISPLAY.size?t=St.TEXT:r==="script"?t=St.SCRIPT:r==="scriptscript"&&(t=St.SCRIPTSCRIPT),t},F8=(r,e)=>{var t=oq(r.size,e.style),n=t.fracNum(),i=t.fracDen(),a;a=e.havingStyle(n);var s=ar(r.numer,a,e);if(r.continued){var c=8.5/e.fontMetrics().ptPerEm,d=3.5/e.fontMetrics().ptPerEm;s.height=s.height<c?c:s.height,s.depth=s.depth<d?d:s.depth}a=e.havingStyle(i);var f=ar(r.denom,a,e),m,p,y;r.hasBarLine?(r.barSize?(p=on(r.barSize,e),m=be.makeLineSpan("frac-line",e,p)):m=be.makeLineSpan("frac-line",e),p=m.height,y=m.height):(m=null,p=0,y=e.fontMetrics().defaultRuleThickness);var b,T,S;t.size===St.DISPLAY.size||r.size==="display"?(b=e.fontMetrics().num1,p>0?T=3*y:T=7*y,S=e.fontMetrics().denom1):(p>0?(b=e.fontMetrics().num2,T=y):(b=e.fontMetrics().num3,T=3*y),S=e.fontMetrics().denom2);var w;if(m){var I=e.fontMetrics().axisHeight;b-s.depth-(I+.5*p)<T&&(b+=T-(b-s.depth-(I+.5*p))),I-.5*p-(f.height-S)<T&&(S+=T-(I-.5*p-(f.height-S)));var C=-(I-.5*p);w=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:m,shift:C},{type:"elem",elem:s,shift:-b}]},e)}else{var E=b-s.depth-(f.height-S);E<T&&(b+=.5*(T-E),S+=.5*(T-E)),w=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:S},{type:"elem",elem:s,shift:-b}]},e)}a=e.havingStyle(t),w.height*=a.sizeMultiplier/e.sizeMultiplier,w.depth*=a.sizeMultiplier/e.sizeMultiplier;var B;t.size===St.DISPLAY.size?B=e.fontMetrics().delim1:t.size===St.SCRIPTSCRIPT.size?B=e.havingStyle(St.SCRIPT).fontMetrics().delim2:B=e.fontMetrics().delim2;var R,D;return r.leftDelim==null?R=Tp(e,["mopen"]):R=ml.customSizedDelim(r.leftDelim,B,!0,e.havingStyle(t),r.mode,["mopen"]),r.continued?D=be.makeSpan([]):r.rightDelim==null?D=Tp(e,["mclose"]):D=ml.customSizedDelim(r.rightDelim,B,!0,e.havingStyle(t),r.mode,["mclose"]),be.makeSpan(["mord"].concat(a.sizingClasses(e)),[R,be.makeSpan(["mfrac"],[w]),D],e)},q8=(r,e)=>{var t=new Fe.MathNode("mfrac",[Pr(r.numer,e),Pr(r.denom,e)]);if(!r.hasBarLine)t.setAttribute("linethickness","0px");else if(r.barSize){var n=on(r.barSize,e);t.setAttribute("linethickness",Je(n))}var i=oq(r.size,e.style);if(i.size!==e.style.size){t=new Fe.MathNode("mstyle",[t]);var a=i.size===St.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",a),t.setAttribute("scriptlevel","0")}if(r.leftDelim!=null||r.rightDelim!=null){var s=[];if(r.leftDelim!=null){var c=new Fe.MathNode("mo",[new Fe.TextNode(r.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),s.push(c)}if(s.push(t),r.rightDelim!=null){var d=new Fe.MathNode("mo",[new Fe.TextNode(r.rightDelim.replace("\\",""))]);d.setAttribute("fence","true"),s.push(d)}return M8(s)}return t};it({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=e[1],s,c=null,d=null,f="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":s=!0;break;case"\\\\atopfrac":s=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s=!1,c="(",d=")";break;case"\\\\bracefrac":s=!1,c="\\{",d="\\}";break;case"\\\\brackfrac":s=!1,c="[",d="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":f="display";break;case"\\tfrac":case"\\tbinom":f="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:a,hasBarLine:s,leftDelim:c,rightDelim:d,size:f,barSize:null}},htmlBuilder:F8,mathmlBuilder:q8});it({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});it({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(r){var{parser:e,funcName:t,token:n}=r,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var nI=["display","text","script","scriptscript"],iI=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};it({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(r,e){var{parser:t}=r,n=e[4],i=e[5],a=Hv(e[0]),s=a.type==="atom"&&a.family==="open"?iI(a.text):null,c=Hv(e[1]),d=c.type==="atom"&&c.family==="close"?iI(c.text):null,f=Vt(e[2],"size"),m,p=null;f.isBlank?m=!0:(p=f.value,m=p.number>0);var y="auto",b=e[3];if(b.type==="ordgroup"){if(b.body.length>0){var T=Vt(b.body[0],"textord");y=nI[Number(T.text)]}}else b=Vt(b,"textord"),y=nI[Number(b.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:i,continued:!1,hasBarLine:m,barSize:p,leftDelim:s,rightDelim:d,size:y}},htmlBuilder:F8,mathmlBuilder:q8});it({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(r,e){var{parser:t,funcName:n,token:i}=r;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:Vt(e[0],"size").value,token:i}}});it({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],a=mse(Vt(e[1],"infix").size),s=e[2],c=a.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:s,continued:!1,hasBarLine:c,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:F8,mathmlBuilder:q8});var lq=(r,e)=>{var t=e.style,n,i;r.type==="supsub"?(n=r.sup?ar(r.sup,e.havingStyle(t.sup()),e):ar(r.sub,e.havingStyle(t.sub()),e),i=Vt(r.base,"horizBrace")):i=Vt(r,"horizBrace");var a=ar(i.base,e.havingBaseStyle(St.DISPLAY)),s=El.svgSpan(i,e),c;if(i.isOver?(c=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),c.children[0].children[0].children[1].classes.push("svg-align")):(c=be.makeVList({positionType:"bottom",positionData:a.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),c.children[0].children[0].children[0].classes.push("svg-align")),n){var d=be.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e);i.isOver?c=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:n}]},e):c=be.makeVList({positionType:"bottom",positionData:d.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:d}]},e)}return be.makeSpan(["mord",i.isOver?"mover":"munder"],[c],e)},Uoe=(r,e)=>{var t=El.mathMLnode(r.label);return new Fe.MathNode(r.isOver?"mover":"munder",[Pr(r.base,e),t])};it({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:lq,mathmlBuilder:Uoe});it({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[1],i=Vt(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:On(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(r,e)=>{var t=Yn(r.body,e,!1);return be.makeAnchor(r.href,[],t,e)},mathmlBuilder:(r,e)=>{var t=Yc(r.body,e);return t instanceof Pa||(t=new Pa("mrow",[t])),t.setAttribute("href",r.href),t}});it({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=Vt(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<n.length;a++){var s=n[a];s==="~"&&(s="\\textasciitilde"),i.push({type:"textord",mode:"text",text:s})}var c={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:n,body:On(c)}}});it({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(r,e){var{parser:t}=r;return{type:"hbox",mode:t.mode,body:On(e[0])}},htmlBuilder(r,e){var t=Yn(r.body,e,!1);return be.makeFragment(t)},mathmlBuilder(r,e){return new Fe.MathNode("mrow",wa(r.body,e))}});it({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,token:i}=r,a=Vt(e[0],"raw").string,s=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,d={};switch(n){case"\\htmlClass":d.class=a,c={command:"\\htmlClass",class:a};break;case"\\htmlId":d.id=a,c={command:"\\htmlId",id:a};break;case"\\htmlStyle":d.style=a,c={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var f=a.split(","),m=0;m<f.length;m++){var p=f[m],y=p.indexOf("=");if(y<0)throw new Ge("\\htmlData key/value '"+p+"' missing equals sign");var b=p.slice(0,y),T=p.slice(y+1);d["data-"+b.trim()]=T}c={command:"\\htmlData",attributes:d};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(c)?{type:"html",mode:t.mode,attributes:d,body:On(s)}:t.formatUnsupportedCmd(n)},htmlBuilder:(r,e)=>{var t=Yn(r.body,e,!1),n=["enclosing"];r.attributes.class&&n.push(...r.attributes.class.trim().split(/\s+/));var i=be.makeSpan(n,t,e);for(var a in r.attributes)a!=="class"&&r.attributes.hasOwnProperty(a)&&i.setAttribute(a,r.attributes[a]);return i},mathmlBuilder:(r,e)=>Yc(r.body,e)});it({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"htmlmathml",mode:t.mode,html:On(e[0]),mathml:On(e[1])}},htmlBuilder:(r,e)=>{var t=Yn(r.html,e,!1);return be.makeFragment(t)},mathmlBuilder:(r,e)=>Yc(r.mathml,e)});var l5=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new Ge("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!NF(n))throw new Ge("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};it({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(r,e,t)=>{var{parser:n}=r,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},c="";if(t[0])for(var d=Vt(t[0],"raw").string,f=d.split(","),m=0;m<f.length;m++){var p=f[m].split("=");if(p.length===2){var y=p[1].trim();switch(p[0].trim()){case"alt":c=y;break;case"width":i=l5(y);break;case"height":a=l5(y);break;case"totalheight":s=l5(y);break;default:throw new Ge("Invalid key: '"+p[0]+"' in \\includegraphics.")}}}var b=Vt(e[0],"url").url;return c===""&&(c=b,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:b})?{type:"includegraphics",mode:n.mode,alt:c,width:i,height:a,totalheight:s,src:b}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(r,e)=>{var t=on(r.height,e),n=0;r.totalheight.number>0&&(n=on(r.totalheight,e)-t);var i=0;r.width.number>0&&(i=on(r.width,e));var a={height:Je(t+n)};i>0&&(a.width=Je(i)),n>0&&(a.verticalAlign=Je(-n));var s=new Use(r.src,r.alt,a);return s.height=t,s.depth=n,s},mathmlBuilder:(r,e)=>{var t=new Fe.MathNode("mglyph",[]);t.setAttribute("alt",r.alt);var n=on(r.height,e),i=0;if(r.totalheight.number>0&&(i=on(r.totalheight,e)-n,t.setAttribute("valign",Je(-i))),t.setAttribute("height",Je(n+i)),r.width.number>0){var a=on(r.width,e);t.setAttribute("width",Je(a))}return t.setAttribute("src",r.src),t}});it({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=Vt(e[0],"size");if(t.settings.strict){var a=n[1]==="m",s=i.value.unit==="mu";a?(s||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):s&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(r,e){return be.makeGlue(r.dimension,e)},mathmlBuilder(r,e){var t=on(r.dimension,e);return new Fe.SpaceNode(t)}});it({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:i}},htmlBuilder:(r,e)=>{var t;r.alignment==="clap"?(t=be.makeSpan([],[ar(r.body,e)]),t=be.makeSpan(["inner"],[t],e)):t=be.makeSpan(["inner"],[ar(r.body,e)]);var n=be.makeSpan(["fix"],[]),i=be.makeSpan([r.alignment],[t,n],e),a=be.makeSpan(["strut"]);return a.style.height=Je(i.height+i.depth),i.depth&&(a.style.verticalAlign=Je(-i.depth)),i.children.unshift(a),i=be.makeSpan(["thinbox"],[i],e),be.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(r,e)=>{var t=new Fe.MathNode("mpadded",[Pr(r.body,e)]);if(r.alignment!=="rlap"){var n=r.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}});it({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){var{funcName:t,parser:n}=r,i=n.mode;n.switchMode("math");var a=t==="\\("?"\\)":"$",s=n.parseExpression(!1,a);return n.expect(a),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:s}}});it({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){throw new Ge("Mismatched "+r.funcName)}});var aI=(r,e)=>{switch(e.style.size){case St.DISPLAY.size:return r.display;case St.TEXT.size:return r.text;case St.SCRIPT.size:return r.script;case St.SCRIPTSCRIPT.size:return r.scriptscript;default:return r.text}};it({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"mathchoice",mode:t.mode,display:On(e[0]),text:On(e[1]),script:On(e[2]),scriptscript:On(e[3])}},htmlBuilder:(r,e)=>{var t=aI(r,e),n=Yn(t,e,!1);return be.makeFragment(n)},mathmlBuilder:(r,e)=>{var t=aI(r,e);return Yc(t,e)}});var cq=(r,e,t,n,i,a,s)=>{r=be.makeSpan([],[r]);var c=t&&dr.isCharacterBox(t),d,f;if(e){var m=ar(e,n.havingStyle(i.sup()),n);f={elem:m,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-m.depth)}}if(t){var p=ar(t,n.havingStyle(i.sub()),n);d={elem:p,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-p.height)}}var y;if(f&&d){var b=n.fontMetrics().bigOpSpacing5+d.elem.height+d.elem.depth+d.kern+r.depth+s;y=be.makeVList({positionType:"bottom",positionData:b,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:Je(-a)},{type:"kern",size:d.kern},{type:"elem",elem:r},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Je(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(d){var T=r.height-s;y=be.makeVList({positionType:"top",positionData:T,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:d.elem,marginLeft:Je(-a)},{type:"kern",size:d.kern},{type:"elem",elem:r}]},n)}else if(f){var S=r.depth+s;y=be.makeVList({positionType:"bottom",positionData:S,children:[{type:"elem",elem:r},{type:"kern",size:f.kern},{type:"elem",elem:f.elem,marginLeft:Je(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return r;var w=[y];if(d&&a!==0&&!c){var E=be.makeSpan(["mspace"],[],n);E.style.marginRight=Je(a),w.unshift(E)}return be.makeSpan(["mop","op-limits"],w,n)},uq=["\\smallint"],ef=(r,e)=>{var t,n,i=!1,a;r.type==="supsub"?(t=r.sup,n=r.sub,a=Vt(r.base,"op"),i=!0):a=Vt(r,"op");var s=e.style,c=!1;s.size===St.DISPLAY.size&&a.symbol&&!uq.includes(a.name)&&(c=!0);var d;if(a.symbol){var f=c?"Size2-Regular":"Size1-Regular",m="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(m=a.name.slice(1),a.name=m==="oiint"?"\\iint":"\\iiint"),d=be.makeSymbol(a.name,f,"math",e,["mop","op-symbol",c?"large-op":"small-op"]),m.length>0){var p=d.italic,y=be.staticSvg(m+"Size"+(c?"2":"1"),e);d=be.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:0},{type:"elem",elem:y,shift:c?.08:0}]},e),a.name="\\"+m,d.classes.unshift("mop"),d.italic=p}}else if(a.body){var b=Yn(a.body,e,!0);b.length===1&&b[0]instanceof ps?(d=b[0],d.classes[0]="mop"):d=be.makeSpan(["mop"],b,e)}else{for(var T=[],S=1;S<a.name.length;S++)T.push(be.mathsym(a.name[S],a.mode,e));d=be.makeSpan(["mop"],T,e)}var w=0,E=0;return(d instanceof ps||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(w=(d.height-d.depth)/2-e.fontMetrics().axisHeight,E=d.italic),i?cq(d,t,n,e,s,E,w):(w&&(d.style.position="relative",d.style.top=Je(w)),d)},Og=(r,e)=>{var t;if(r.symbol)t=new Pa("mo",[gs(r.name,r.mode)]),uq.includes(r.name)&&t.setAttribute("largeop","false");else if(r.body)t=new Pa("mo",wa(r.body,e));else{t=new Pa("mi",[new ho(r.name.slice(1))]);var n=new Pa("mo",[gs("","text")]);r.parentIsSupSub?t=new Pa("mrow",[t,n]):t=BF([t,n])}return t},zoe={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};it({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=n;return i.length===1&&(i=zoe[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:ef,mathmlBuilder:Og});it({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:On(n)}},htmlBuilder:ef,mathmlBuilder:Og});var Voe={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};it({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:ef,mathmlBuilder:Og});it({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:ef,mathmlBuilder:Og});it({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(r){var{parser:e,funcName:t}=r,n=t;return n.length===1&&(n=Voe[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:ef,mathmlBuilder:Og});var dq=(r,e)=>{var t,n,i=!1,a;r.type==="supsub"?(t=r.sup,n=r.sub,a=Vt(r.base,"operatorname"),i=!0):a=Vt(r,"operatorname");var s;if(a.body.length>0){for(var c=a.body.map(p=>{var y=p.text;return typeof y=="string"?{type:"textord",mode:p.mode,text:y}:p}),d=Yn(c,e.withFont("mathrm"),!0),f=0;f<d.length;f++){var m=d[f];m instanceof ps&&(m.text=m.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=be.makeSpan(["mop"],d,e)}else s=be.makeSpan(["mop"],[],e);return i?cq(s,t,n,e,e.style,0,0):s},$oe=(r,e)=>{for(var t=wa(r.body,e.withFont("mathrm")),n=!0,i=0;i<t.length;i++){var a=t[i];if(!(a instanceof Fe.SpaceNode))if(a instanceof Fe.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var s=a.children[0];a.children.length===1&&s instanceof Fe.TextNode?s.text=s.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var c=t.map(m=>m.toText()).join("");t=[new Fe.TextNode(c)]}var d=new Fe.MathNode("mi",t);d.setAttribute("mathvariant","normal");var f=new Fe.MathNode("mo",[gs("","text")]);return r.parentIsSupSub?new Fe.MathNode("mrow",[d,f]):Fe.newDocumentFragment([d,f])};it({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"operatorname",mode:t.mode,body:On(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:dq,mathmlBuilder:$oe});G("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");M0({type:"ordgroup",htmlBuilder(r,e){return r.semisimple?be.makeFragment(Yn(r.body,e,!1)):be.makeSpan(["mord"],Yn(r.body,e,!0),e)},mathmlBuilder(r,e){return Yc(r.body,e,!0)}});it({type:"overline",names:["\\overline"],props:{numArgs:1},handler(r,e){var{parser:t}=r,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(r,e){var t=ar(r.body,e.havingCrampedStyle()),n=be.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,a=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return be.makeSpan(["mord","overline"],[a],e)},mathmlBuilder(r,e){var t=new Fe.MathNode("mo",[new Fe.TextNode("")]);t.setAttribute("stretchy","true");var n=new Fe.MathNode("mover",[Pr(r.body,e),t]);return n.setAttribute("accent","true"),n}});it({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"phantom",mode:t.mode,body:On(n)}},htmlBuilder:(r,e)=>{var t=Yn(r.body,e.withPhantom(),!1);return be.makeFragment(t)},mathmlBuilder:(r,e)=>{var t=wa(r.body,e);return new Fe.MathNode("mphantom",t)}});it({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=be.makeSpan([],[ar(r.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),be.makeSpan(["mord"],[t],e)},mathmlBuilder:(r,e)=>{var t=wa(On(r.body),e),n=new Fe.MathNode("mphantom",t),i=new Fe.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});it({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=be.makeSpan(["inner"],[ar(r.body,e.withPhantom())]),n=be.makeSpan(["fix"],[]);return be.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(r,e)=>{var t=wa(On(r.body),e),n=new Fe.MathNode("mphantom",t),i=new Fe.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});it({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r,n=Vt(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:i}},htmlBuilder(r,e){var t=ar(r.body,e),n=on(r.dy,e);return be.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){var t=new Fe.MathNode("mpadded",[Pr(r.body,e)]),n=r.dy.number+r.dy.unit;return t.setAttribute("voffset",n),t}});it({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(r){var{parser:e}=r;return{type:"internal",mode:e.mode}}});it({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(r,e,t){var{parser:n}=r,i=t[0],a=Vt(e[0],"size"),s=Vt(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&Vt(i,"size").value,width:a.value,height:s.value}},htmlBuilder(r,e){var t=be.makeSpan(["mord","rule"],[],e),n=on(r.width,e),i=on(r.height,e),a=r.shift?on(r.shift,e):0;return t.style.borderRightWidth=Je(n),t.style.borderTopWidth=Je(i),t.style.bottom=Je(a),t.width=n,t.height=i+a,t.depth=-a,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(r,e){var t=on(r.width,e),n=on(r.height,e),i=r.shift?on(r.shift,e):0,a=e.color&&e.getColor()||"black",s=new Fe.MathNode("mspace");s.setAttribute("mathbackground",a),s.setAttribute("width",Je(t)),s.setAttribute("height",Je(n));var c=new Fe.MathNode("mpadded",[s]);return i>=0?c.setAttribute("height",Je(i)):(c.setAttribute("height",Je(i)),c.setAttribute("depth",Je(-i))),c.setAttribute("voffset",Je(i)),c}});function hq(r,e,t){for(var n=Yn(r,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,a=0;a<n.length;a++){var s=n[a].classes.indexOf("sizing");s<0?Array.prototype.push.apply(n[a].classes,e.sizingClasses(t)):n[a].classes[s+1]==="reset-size"+e.size&&(n[a].classes[s+1]="reset-size"+t.size),n[a].height*=i,n[a].depth*=i}return be.makeFragment(n)}var sI=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Foe=(r,e)=>{var t=e.havingSize(r.size);return hq(r.body,t,e)};it({type:"sizing",names:sI,props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{breakOnTokenText:t,funcName:n,parser:i}=r,a=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:sI.indexOf(n)+1,body:a}},htmlBuilder:Foe,mathmlBuilder:(r,e)=>{var t=e.havingSize(r.size),n=wa(r.body,t),i=new Fe.MathNode("mstyle",n);return i.setAttribute("mathsize",Je(t.sizeMultiplier)),i}});it({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(r,e,t)=>{var{parser:n}=r,i=!1,a=!1,s=t[0]&&Vt(t[0],"ordgroup");if(s)for(var c="",d=0;d<s.body.length;++d){var f=s.body[d];if(c=f.text,c==="t")i=!0;else if(c==="b")a=!0;else{i=!1,a=!1;break}}else i=!0,a=!0;var m=e[0];return{type:"smash",mode:n.mode,body:m,smashHeight:i,smashDepth:a}},htmlBuilder:(r,e)=>{var t=be.makeSpan([],[ar(r.body,e)]);if(!r.smashHeight&&!r.smashDepth)return t;if(r.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(r.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var a=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return be.makeSpan(["mord"],[a],e)},mathmlBuilder:(r,e)=>{var t=new Fe.MathNode("mpadded",[Pr(r.body,e)]);return r.smashHeight&&t.setAttribute("height","0px"),r.smashDepth&&t.setAttribute("depth","0px"),t}});it({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n}=r,i=t[0],a=e[0];return{type:"sqrt",mode:n.mode,body:a,index:i}},htmlBuilder(r,e){var t=ar(r.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=be.wrapFragment(t,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,a=i;e.style.id<St.TEXT.id&&(a=e.fontMetrics().xHeight);var s=i+a/4,c=t.height+t.depth+s+i,{span:d,ruleWidth:f,advanceWidth:m}=ml.sqrtImage(c,e),p=d.height-f;p>t.height+t.depth+s&&(s=(s+p-t.height-t.depth)/2);var y=d.height-t.height-s-f;t.style.paddingLeft=Je(m);var b=be.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+y)},{type:"elem",elem:d},{type:"kern",size:f}]},e);if(r.index){var T=e.havingStyle(St.SCRIPTSCRIPT),S=ar(r.index,T,e),w=.6*(b.height-b.depth),E=be.makeVList({positionType:"shift",positionData:-w,children:[{type:"elem",elem:S}]},e),I=be.makeSpan(["root"],[E]);return be.makeSpan(["mord","sqrt"],[I,b],e)}else return be.makeSpan(["mord","sqrt"],[b],e)},mathmlBuilder(r,e){var{body:t,index:n}=r;return n?new Fe.MathNode("mroot",[Pr(t,e),Pr(n,e)]):new Fe.MathNode("msqrt",[Pr(t,e)])}});var oI={display:St.DISPLAY,text:St.TEXT,script:St.SCRIPT,scriptscript:St.SCRIPTSCRIPT};it({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r,e){var{breakOnTokenText:t,funcName:n,parser:i}=r,a=i.parseExpression(!0,t),s=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:s,body:a}},htmlBuilder(r,e){var t=oI[r.style],n=e.havingStyle(t).withFont("");return hq(r.body,n,e)},mathmlBuilder(r,e){var t=oI[r.style],n=e.havingStyle(t),i=wa(r.body,n),a=new Fe.MathNode("mstyle",i),s={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=s[r.style];return a.setAttribute("scriptlevel",c[0]),a.setAttribute("displaystyle",c[1]),a}});var qoe=function(e,t){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(t.style.size===St.DISPLAY.size||n.alwaysHandleSupSub);return i?ef:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(t.style.size===St.DISPLAY.size||n.limits);return a?dq:null}else{if(n.type==="accent")return dr.isCharacterBox(n.base)?L8:null;if(n.type==="horizBrace"){var s=!e.sub;return s===n.isOver?lq:null}else return null}else return null};M0({type:"supsub",htmlBuilder(r,e){var t=qoe(r,e);if(t)return t(r,e);var{base:n,sup:i,sub:a}=r,s=ar(n,e),c,d,f=e.fontMetrics(),m=0,p=0,y=n&&dr.isCharacterBox(n);if(i){var b=e.havingStyle(e.style.sup());c=ar(i,b,e),y||(m=s.height-b.fontMetrics().supDrop*b.sizeMultiplier/e.sizeMultiplier)}if(a){var T=e.havingStyle(e.style.sub());d=ar(a,T,e),y||(p=s.depth+T.fontMetrics().subDrop*T.sizeMultiplier/e.sizeMultiplier)}var S;e.style===St.DISPLAY?S=f.sup1:e.style.cramped?S=f.sup3:S=f.sup2;var w=e.sizeMultiplier,E=Je(.5/f.ptPerEm/w),I=null;if(d){var C=r.base&&r.base.type==="op"&&r.base.name&&(r.base.name==="\\oiint"||r.base.name==="\\oiiint");(s instanceof ps||C)&&(I=Je(-s.italic))}var B;if(c&&d){m=Math.max(m,S,c.depth+.25*f.xHeight),p=Math.max(p,f.sub2);var R=f.defaultRuleThickness,D=4*R;if(m-c.depth-(d.height-p)<D){p=D-(m-c.depth)+d.height;var A=.8*f.xHeight-(m-c.depth);A>0&&(m+=A,p-=A)}var k=[{type:"elem",elem:d,shift:p,marginRight:E,marginLeft:I},{type:"elem",elem:c,shift:-m,marginRight:E}];B=be.makeVList({positionType:"individualShift",children:k},e)}else if(d){p=Math.max(p,f.sub1,d.height-.8*f.xHeight);var N=[{type:"elem",elem:d,marginLeft:I,marginRight:E}];B=be.makeVList({positionType:"shift",positionData:p,children:N},e)}else if(c)m=Math.max(m,S,c.depth+.25*f.xHeight),B=be.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:c,marginRight:E}]},e);else throw new Error("supsub must have either sup or sub.");var U=_T(s,"right")||"mord";return be.makeSpan([U],[s,be.makeSpan(["msupsub"],[B])],e)},mathmlBuilder(r,e){var t=!1,n,i;r.base&&r.base.type==="horizBrace"&&(i=!!r.sup,i===r.base.isOver&&(t=!0,n=r.base.isOver)),r.base&&(r.base.type==="op"||r.base.type==="operatorname")&&(r.base.parentIsSupSub=!0);var a=[Pr(r.base,e)];r.sub&&a.push(Pr(r.sub,e)),r.sup&&a.push(Pr(r.sup,e));var s;if(t)s=n?"mover":"munder";else if(r.sub)if(r.sup){var f=r.base;f&&f.type==="op"&&f.limits&&e.style===St.DISPLAY||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(e.style===St.DISPLAY||f.limits)?s="munderover":s="msubsup"}else{var d=r.base;d&&d.type==="op"&&d.limits&&(e.style===St.DISPLAY||d.alwaysHandleSupSub)||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(d.limits||e.style===St.DISPLAY)?s="munder":s="msub"}else{var c=r.base;c&&c.type==="op"&&c.limits&&(e.style===St.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||e.style===St.DISPLAY)?s="mover":s="msup"}return new Fe.MathNode(s,a)}});M0({type:"atom",htmlBuilder(r,e){return be.mathsym(r.text,r.mode,e,["m"+r.family])},mathmlBuilder(r,e){var t=new Fe.MathNode("mo",[gs(r.text,r.mode)]);if(r.family==="bin"){var n=P8(r,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else r.family==="punct"?t.setAttribute("separator","true"):(r.family==="open"||r.family==="close")&&t.setAttribute("stretchy","false");return t}});var fq={mi:"italic",mn:"normal",mtext:"normal"};M0({type:"mathord",htmlBuilder(r,e){return be.makeOrd(r,e,"mathord")},mathmlBuilder(r,e){var t=new Fe.MathNode("mi",[gs(r.text,r.mode,e)]),n=P8(r,e)||"italic";return n!==fq[t.type]&&t.setAttribute("mathvariant",n),t}});M0({type:"textord",htmlBuilder(r,e){return be.makeOrd(r,e,"textord")},mathmlBuilder(r,e){var t=gs(r.text,r.mode,e),n=P8(r,e)||"normal",i;return r.mode==="text"?i=new Fe.MathNode("mtext",[t]):/[0-9]/.test(r.text)?i=new Fe.MathNode("mn",[t]):r.text==="\\prime"?i=new Fe.MathNode("mo",[t]):i=new Fe.MathNode("mi",[t]),n!==fq[i.type]&&i.setAttribute("mathvariant",n),i}});var c5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},u5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};M0({type:"spacing",htmlBuilder(r,e){if(u5.hasOwnProperty(r.text)){var t=u5[r.text].className||"";if(r.mode==="text"){var n=be.makeOrd(r,e,"textord");return n.classes.push(t),n}else return be.makeSpan(["mspace",t],[be.mathsym(r.text,r.mode,e)],e)}else{if(c5.hasOwnProperty(r.text))return be.makeSpan(["mspace",c5[r.text]],[],e);throw new Ge('Unknown type of space "'+r.text+'"')}},mathmlBuilder(r,e){var t;if(u5.hasOwnProperty(r.text))t=new Fe.MathNode("mtext",[new Fe.TextNode("")]);else{if(c5.hasOwnProperty(r.text))return new Fe.MathNode("mspace");throw new Ge('Unknown type of space "'+r.text+'"')}return t}});var lI=()=>{var r=new Fe.MathNode("mtd",[]);return r.setAttribute("width","50%"),r};M0({type:"tag",mathmlBuilder(r,e){var t=new Fe.MathNode("mtable",[new Fe.MathNode("mtr",[lI(),new Fe.MathNode("mtd",[Yc(r.body,e)]),lI(),new Fe.MathNode("mtd",[Yc(r.tag,e)])])]);return t.setAttribute("width","100%"),t}});var cI={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},uI={"\\textbf":"textbf","\\textmd":"textmd"},Hoe={"\\textit":"textit","\\textup":"textup"},dI=(r,e)=>{var t=r.font;if(t){if(cI[t])return e.withTextFontFamily(cI[t]);if(uI[t])return e.withTextFontWeight(uI[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(Hoe[t])};it({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"text",mode:t.mode,body:On(i),font:n}},htmlBuilder(r,e){var t=dI(r,e),n=Yn(r.body,t,!0);return be.makeSpan(["mord","text"],n,t)},mathmlBuilder(r,e){var t=dI(r,e);return Yc(r.body,t)}});it({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=ar(r.body,e),n=be.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,a=be.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return be.makeSpan(["mord","underline"],[a],e)},mathmlBuilder(r,e){var t=new Fe.MathNode("mo",[new Fe.TextNode("")]);t.setAttribute("stretchy","true");var n=new Fe.MathNode("munder",[Pr(r.body,e),t]);return n.setAttribute("accentunder","true"),n}});it({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=ar(r.body,e),n=e.fontMetrics().axisHeight,i=.5*(t.height-n-(t.depth+n));return be.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){return new Fe.MathNode("mpadded",[Pr(r.body,e)],["vcenter"])}});it({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(r,e,t){throw new Ge("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(r,e){for(var t=hI(r),n=[],i=e.havingStyle(e.style.text()),a=0;a<t.length;a++){var s=t[a];s==="~"&&(s="\\textasciitilde"),n.push(be.makeSymbol(s,"Typewriter-Regular",r.mode,i,["mord","texttt"]))}return be.makeSpan(["mord","text"].concat(i.sizingClasses(e)),be.tryCombineChars(n),i)},mathmlBuilder(r,e){var t=new Fe.TextNode(hI(r)),n=new Fe.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var hI=r=>r.body.replace(/ /g,r.star?"":""),jc=DF,mq=`[ \r
	]`,Goe="\\\\[a-zA-Z@]+",Koe="\\\\[^\uD800-\uDFFF]",Woe="("+Goe+")"+mq+"*",Xoe=`\\\\(
|[ \r	]+
?)[ \r	]*`,ET="[-]",Qoe=new RegExp(ET+"+$"),Yoe="("+mq+"+)|"+(Xoe+"|")+"([!-\\[\\]---]"+(ET+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(ET+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Woe)+("|"+Koe+")");class fI{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Yoe,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new $a("EOF",new ma(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new Ge("Unexpected character: '"+e[t]+"'",new $a(e[t],new ma(this,t,t+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var a=e.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new $a(i,new ma(this,t,this.tokenRegex.lastIndex))}}class Zoe{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Ge("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(e)&&(a[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Joe=nq;G("\\noexpand",function(r){var e=r.popToken();return r.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});G("\\expandafter",function(r){var e=r.popToken();return r.expandOnce(!0),{tokens:[e],numArgs:0}});G("\\@firstoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[0],numArgs:0}});G("\\@secondoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[1],numArgs:0}});G("\\@ifnextchar",function(r){var e=r.consumeArgs(3);r.consumeSpaces();var t=r.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});G("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");G("\\TextOrMath",function(r){var e=r.consumeArgs(2);return r.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var mI={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};G("\\char",function(r){var e=r.popToken(),t,n="";if(e.text==="'")t=8,e=r.popToken();else if(e.text==='"')t=16,e=r.popToken();else if(e.text==="`")if(e=r.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Ge("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=mI[e.text],n==null||n>=t)throw new Ge("Invalid base-"+t+" digit "+e.text);for(var i;(i=mI[r.future().text])!=null&&i<t;)n*=t,n+=i,r.popToken()}return"\\@char{"+n+"}"});var H8=(r,e,t,n)=>{var i=r.consumeArg().tokens;if(i.length!==1)throw new Ge("\\newcommand's first argument must be a macro name");var a=i[0].text,s=r.isDefined(a);if(s&&!e)throw new Ge("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!s&&!t)throw new Ge("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var c=0;if(i=r.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var d="",f=r.expandNextToken();f.text!=="]"&&f.text!=="EOF";)d+=f.text,f=r.expandNextToken();if(!d.match(/^\s*[0-9]+\s*$/))throw new Ge("Invalid number of arguments: "+d);c=parseInt(d),i=r.consumeArg().tokens}return s&&n||r.macros.set(a,{tokens:i,numArgs:c}),""};G("\\newcommand",r=>H8(r,!1,!0,!1));G("\\renewcommand",r=>H8(r,!0,!1,!1));G("\\providecommand",r=>H8(r,!0,!0,!0));G("\\message",r=>{var e=r.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});G("\\errmessage",r=>{var e=r.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});G("\\show",r=>{var e=r.popToken(),t=e.text;return console.log(e,r.macros.get(t),jc[t],$r.math[t],$r.text[t]),""});G("\\bgroup","{");G("\\egroup","}");G("~","\\nobreakspace");G("\\lq","`");G("\\rq","'");G("\\aa","\\r a");G("\\AA","\\r A");G("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");G("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");G("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");G("","\\mathscr{B}");G("","\\mathscr{E}");G("","\\mathscr{F}");G("","\\mathscr{H}");G("","\\mathscr{I}");G("","\\mathscr{L}");G("","\\mathscr{M}");G("","\\mathscr{R}");G("","\\mathfrak{C}");G("","\\mathfrak{H}");G("","\\mathfrak{Z}");G("\\Bbbk","\\Bbb{k}");G("","\\cdotp");G("\\llap","\\mathllap{\\textrm{#1}}");G("\\rlap","\\mathrlap{\\textrm{#1}}");G("\\clap","\\mathclap{\\textrm{#1}}");G("\\mathstrut","\\vphantom{(}");G("\\underbar","\\underline{\\text{#1}}");G("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');G("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");G("\\ne","\\neq");G("","\\neq");G("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");G("","\\notin");G("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");G("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");G("","\\perp");G("","\\mathclose{!\\mkern-0.8mu!}");G("","\\notni");G("","\\ulcorner");G("","\\urcorner");G("","\\llcorner");G("","\\lrcorner");G("","\\copyright");G("","\\textregistered");G("","\\textregistered");G("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');G("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');G("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');G("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');G("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");G("","\\vdots");G("\\varGamma","\\mathit{\\Gamma}");G("\\varDelta","\\mathit{\\Delta}");G("\\varTheta","\\mathit{\\Theta}");G("\\varLambda","\\mathit{\\Lambda}");G("\\varXi","\\mathit{\\Xi}");G("\\varPi","\\mathit{\\Pi}");G("\\varSigma","\\mathit{\\Sigma}");G("\\varUpsilon","\\mathit{\\Upsilon}");G("\\varPhi","\\mathit{\\Phi}");G("\\varPsi","\\mathit{\\Psi}");G("\\varOmega","\\mathit{\\Omega}");G("\\substack","\\begin{subarray}{c}#1\\end{subarray}");G("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");G("\\boxed","\\fbox{$\\displaystyle{#1}$}");G("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");G("\\implies","\\DOTSB\\;\\Longrightarrow\\;");G("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");G("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");G("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var pI={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};G("\\dots",function(r){var e="\\dotso",t=r.expandAfterFuture().text;return t in pI?e=pI[t]:(t.slice(0,4)==="\\not"||t in $r.math&&["bin","rel"].includes($r.math[t].group))&&(e="\\dotsb"),e});var G8={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};G("\\dotso",function(r){var e=r.future().text;return e in G8?"\\ldots\\,":"\\ldots"});G("\\dotsc",function(r){var e=r.future().text;return e in G8&&e!==","?"\\ldots\\,":"\\ldots"});G("\\cdots",function(r){var e=r.future().text;return e in G8?"\\@cdots\\,":"\\@cdots"});G("\\dotsb","\\cdots");G("\\dotsm","\\cdots");G("\\dotsi","\\!\\cdots");G("\\dotsx","\\ldots\\,");G("\\DOTSI","\\relax");G("\\DOTSB","\\relax");G("\\DOTSX","\\relax");G("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");G("\\,","\\tmspace+{3mu}{.1667em}");G("\\thinspace","\\,");G("\\>","\\mskip{4mu}");G("\\:","\\tmspace+{4mu}{.2222em}");G("\\medspace","\\:");G("\\;","\\tmspace+{5mu}{.2777em}");G("\\thickspace","\\;");G("\\!","\\tmspace-{3mu}{.1667em}");G("\\negthinspace","\\!");G("\\negmedspace","\\tmspace-{4mu}{.2222em}");G("\\negthickspace","\\tmspace-{5mu}{.277em}");G("\\enspace","\\kern.5em ");G("\\enskip","\\hskip.5em\\relax");G("\\quad","\\hskip1em\\relax");G("\\qquad","\\hskip2em\\relax");G("\\tag","\\@ifstar\\tag@literal\\tag@paren");G("\\tag@paren","\\tag@literal{({#1})}");G("\\tag@literal",r=>{if(r.macros.get("\\df@tag"))throw new Ge("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});G("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");G("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");G("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");G("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");G("\\newline","\\\\\\relax");G("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var pq=Je(uo["Main-Regular"][84][1]-.7*uo["Main-Regular"][65][1]);G("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+pq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");G("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+pq+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");G("\\hspace","\\@ifstar\\@hspacer\\@hspace");G("\\@hspace","\\hskip #1\\relax");G("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");G("\\ordinarycolon",":");G("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");G("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');G("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');G("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');G("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');G("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');G("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');G("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');G("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');G("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');G("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');G("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');G("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');G("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');G("","\\dblcolon");G("","\\eqcolon");G("","\\coloneqq");G("","\\eqqcolon");G("","\\Coloneqq");G("\\ratio","\\vcentcolon");G("\\coloncolon","\\dblcolon");G("\\colonequals","\\coloneqq");G("\\coloncolonequals","\\Coloneqq");G("\\equalscolon","\\eqqcolon");G("\\equalscoloncolon","\\Eqqcolon");G("\\colonminus","\\coloneq");G("\\coloncolonminus","\\Coloneq");G("\\minuscolon","\\eqcolon");G("\\minuscoloncolon","\\Eqcolon");G("\\coloncolonapprox","\\Colonapprox");G("\\coloncolonsim","\\Colonsim");G("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");G("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");G("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");G("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");G("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");G("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");G("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");G("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");G("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");G("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");G("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");G("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");G("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");G("\\ngeqq","\\html@mathml{\\@ngeqq}{}");G("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");G("\\nleqq","\\html@mathml{\\@nleqq}{}");G("\\nleqslant","\\html@mathml{\\@nleqslant}{}");G("\\nshortmid","\\html@mathml{\\@nshortmid}{}");G("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");G("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");G("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");G("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");G("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");G("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");G("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");G("\\imath","\\html@mathml{\\@imath}{}");G("\\jmath","\\html@mathml{\\@jmath}{}");G("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");G("","\\llbracket");G("","\\rrbracket");G("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");G("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");G("","\\lBrace");G("","\\rBrace");G("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");G("","\\minuso");G("\\darr","\\downarrow");G("\\dArr","\\Downarrow");G("\\Darr","\\Downarrow");G("\\lang","\\langle");G("\\rang","\\rangle");G("\\uarr","\\uparrow");G("\\uArr","\\Uparrow");G("\\Uarr","\\Uparrow");G("\\N","\\mathbb{N}");G("\\R","\\mathbb{R}");G("\\Z","\\mathbb{Z}");G("\\alef","\\aleph");G("\\alefsym","\\aleph");G("\\Alpha","\\mathrm{A}");G("\\Beta","\\mathrm{B}");G("\\bull","\\bullet");G("\\Chi","\\mathrm{X}");G("\\clubs","\\clubsuit");G("\\cnums","\\mathbb{C}");G("\\Complex","\\mathbb{C}");G("\\Dagger","\\ddagger");G("\\diamonds","\\diamondsuit");G("\\empty","\\emptyset");G("\\Epsilon","\\mathrm{E}");G("\\Eta","\\mathrm{H}");G("\\exist","\\exists");G("\\harr","\\leftrightarrow");G("\\hArr","\\Leftrightarrow");G("\\Harr","\\Leftrightarrow");G("\\hearts","\\heartsuit");G("\\image","\\Im");G("\\infin","\\infty");G("\\Iota","\\mathrm{I}");G("\\isin","\\in");G("\\Kappa","\\mathrm{K}");G("\\larr","\\leftarrow");G("\\lArr","\\Leftarrow");G("\\Larr","\\Leftarrow");G("\\lrarr","\\leftrightarrow");G("\\lrArr","\\Leftrightarrow");G("\\Lrarr","\\Leftrightarrow");G("\\Mu","\\mathrm{M}");G("\\natnums","\\mathbb{N}");G("\\Nu","\\mathrm{N}");G("\\Omicron","\\mathrm{O}");G("\\plusmn","\\pm");G("\\rarr","\\rightarrow");G("\\rArr","\\Rightarrow");G("\\Rarr","\\Rightarrow");G("\\real","\\Re");G("\\reals","\\mathbb{R}");G("\\Reals","\\mathbb{R}");G("\\Rho","\\mathrm{P}");G("\\sdot","\\cdot");G("\\sect","\\S");G("\\spades","\\spadesuit");G("\\sub","\\subset");G("\\sube","\\subseteq");G("\\supe","\\supseteq");G("\\Tau","\\mathrm{T}");G("\\thetasym","\\vartheta");G("\\weierp","\\wp");G("\\Zeta","\\mathrm{Z}");G("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");G("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");G("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");G("\\bra","\\mathinner{\\langle{#1}|}");G("\\ket","\\mathinner{|{#1}\\rangle}");G("\\braket","\\mathinner{\\langle{#1}\\rangle}");G("\\Bra","\\left\\langle#1\\right|");G("\\Ket","\\left|#1\\right\\rangle");var gq=r=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,a=e.consumeArg().tokens,s=e.macros.get("|"),c=e.macros.get("\\|");e.macros.beginGroup();var d=p=>y=>{r&&(y.macros.set("|",s),i.length&&y.macros.set("\\|",c));var b=p;if(!p&&i.length){var T=y.future();T.text==="|"&&(y.popToken(),b=!0)}return{tokens:b?i:n,numArgs:0}};e.macros.set("|",d(!1)),i.length&&e.macros.set("\\|",d(!0));var f=e.consumeArg().tokens,m=e.expandTokens([...a,...f,...t]);return e.macros.endGroup(),{tokens:m.reverse(),numArgs:0}};G("\\bra@ket",gq(!1));G("\\bra@set",gq(!0));G("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");G("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");G("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");G("\\angln","{\\angl n}");G("\\blue","\\textcolor{##6495ed}{#1}");G("\\orange","\\textcolor{##ffa500}{#1}");G("\\pink","\\textcolor{##ff00af}{#1}");G("\\red","\\textcolor{##df0030}{#1}");G("\\green","\\textcolor{##28ae7b}{#1}");G("\\gray","\\textcolor{gray}{#1}");G("\\purple","\\textcolor{##9d38bd}{#1}");G("\\blueA","\\textcolor{##ccfaff}{#1}");G("\\blueB","\\textcolor{##80f6ff}{#1}");G("\\blueC","\\textcolor{##63d9ea}{#1}");G("\\blueD","\\textcolor{##11accd}{#1}");G("\\blueE","\\textcolor{##0c7f99}{#1}");G("\\tealA","\\textcolor{##94fff5}{#1}");G("\\tealB","\\textcolor{##26edd5}{#1}");G("\\tealC","\\textcolor{##01d1c1}{#1}");G("\\tealD","\\textcolor{##01a995}{#1}");G("\\tealE","\\textcolor{##208170}{#1}");G("\\greenA","\\textcolor{##b6ffb0}{#1}");G("\\greenB","\\textcolor{##8af281}{#1}");G("\\greenC","\\textcolor{##74cf70}{#1}");G("\\greenD","\\textcolor{##1fab54}{#1}");G("\\greenE","\\textcolor{##0d923f}{#1}");G("\\goldA","\\textcolor{##ffd0a9}{#1}");G("\\goldB","\\textcolor{##ffbb71}{#1}");G("\\goldC","\\textcolor{##ff9c39}{#1}");G("\\goldD","\\textcolor{##e07d10}{#1}");G("\\goldE","\\textcolor{##a75a05}{#1}");G("\\redA","\\textcolor{##fca9a9}{#1}");G("\\redB","\\textcolor{##ff8482}{#1}");G("\\redC","\\textcolor{##f9685d}{#1}");G("\\redD","\\textcolor{##e84d39}{#1}");G("\\redE","\\textcolor{##bc2612}{#1}");G("\\maroonA","\\textcolor{##ffbde0}{#1}");G("\\maroonB","\\textcolor{##ff92c6}{#1}");G("\\maroonC","\\textcolor{##ed5fa6}{#1}");G("\\maroonD","\\textcolor{##ca337c}{#1}");G("\\maroonE","\\textcolor{##9e034e}{#1}");G("\\purpleA","\\textcolor{##ddd7ff}{#1}");G("\\purpleB","\\textcolor{##c6b9fc}{#1}");G("\\purpleC","\\textcolor{##aa87ff}{#1}");G("\\purpleD","\\textcolor{##7854ab}{#1}");G("\\purpleE","\\textcolor{##543b78}{#1}");G("\\mintA","\\textcolor{##f5f9e8}{#1}");G("\\mintB","\\textcolor{##edf2df}{#1}");G("\\mintC","\\textcolor{##e0e5cc}{#1}");G("\\grayA","\\textcolor{##f6f7f7}{#1}");G("\\grayB","\\textcolor{##f0f1f2}{#1}");G("\\grayC","\\textcolor{##e3e5e6}{#1}");G("\\grayD","\\textcolor{##d6d8da}{#1}");G("\\grayE","\\textcolor{##babec2}{#1}");G("\\grayF","\\textcolor{##888d93}{#1}");G("\\grayG","\\textcolor{##626569}{#1}");G("\\grayH","\\textcolor{##3b3e40}{#1}");G("\\grayI","\\textcolor{##21242c}{#1}");G("\\kaBlue","\\textcolor{##314453}{#1}");G("\\kaGreen","\\textcolor{##71B307}{#1}");var yq={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class ele{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Zoe(Joe,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new fI(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:t,end:n}=this.consumeArg());return this.pushToken(new $a("EOF",n.loc)),this.pushTokens(i),new $a("",ma.range(t,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),a,s=0,c=0;do{if(a=this.popToken(),t.push(a),a.text==="{")++s;else if(a.text==="}"){if(--s,s===-1)throw new Ge("Extra }",a)}else if(a.text==="EOF")throw new Ge("Unexpected end of input in a macro argument, expected '"+(e&&n?e[c]:"}")+"'",a);if(e&&n)if((s===0||s===1&&e[c]==="{")&&a.text===e[c]){if(++c,c===e.length){t.splice(-c,c);break}}else c=0}while(s!==0||n);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:a}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new Ge("The length of delimiters doesn't match the number of args!");for(var n=t[0],i=0;i<n.length;i++){var a=this.popToken();if(n[i]!==a.text)throw new Ge("Use of the macro doesn't match its definition",a)}}for(var s=[],c=0;c<e;c++)s.push(this.consumeArg(t&&t[c+1]).tokens);return s}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Ge("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,i=t.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new Ge("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var a=i.tokens,s=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){a=a.slice();for(var c=a.length-1;c>=0;--c){var d=a[c];if(d.text==="#"){if(c===0)throw new Ge("Incomplete placeholder at end of macro body",d);if(d=a[--c],d.text==="#")a.splice(c+1,1);else if(/^[1-9]$/.test(d.text))a.splice(c,2,...s[+d.text-1]);else throw new Ge("Not a valid argument number",d)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new $a(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var a=0;if(i.indexOf("#")!==-1)for(var s=i.replace(/##/g,"");s.indexOf("#"+(a+1))!==-1;)++a;for(var c=new fI(i,this.settings),d=[],f=c.lex();f.text!=="EOF";)d.push(f),f=c.lex();d.reverse();var m={tokens:d,numArgs:a};return m}return i}isDefined(e){return this.macros.has(e)||jc.hasOwnProperty(e)||$r.math.hasOwnProperty(e)||$r.text.hasOwnProperty(e)||yq.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:jc.hasOwnProperty(e)&&!jc[e].primitive}}var gI=/^[]/,Cy=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),d5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},yI={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Dx{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new ele(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new Ge("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new $a("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(Dx.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&jc[i.text]&&jc[i.text].infix)break;var a=this.parseAtom(t);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new Ge("only one infix operator per group",e[i].token);t=i,n=e[i].replaceWith}if(t!==-1&&n){var a,s,c=e.slice(0,t),d=e.slice(t+1);c.length===1&&c[0].type==="ordgroup"?a=c[0]:a={type:"ordgroup",mode:this.mode,body:c},d.length===1&&d[0].type==="ordgroup"?s=d[0]:s={type:"ordgroup",mode:this.mode,body:d};var f;return n==="\\\\abovefrac"?f=this.callFunction(n,[a,e[t],s],[]):f=this.callFunction(n,[a,s],[]),[f]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var i;do{var a;i=this.parseGroup(e)}while(((a=i)==null?void 0:a.type)==="internal");if(!i)throw new Ge("Expected group after '"+n+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:t},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return a}parseAtom(e){var t=this.parseGroup("atom",e);if((t==null?void 0:t.type)==="internal"||this.mode==="text")return t;for(var n,i;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(t&&t.type==="op"){var s=a.text==="\\limits";t.limits=s,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=a.text==="\\limits");else throw new Ge("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new Ge("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(i)throw new Ge("Double subscript",a);i=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new Ge("Double superscript",a);var c={type:"textord",mode:this.mode,text:"\\prime"},d=[c];for(this.consume();this.fetch().text==="'";)d.push(c),this.consume();this.fetch().text==="^"&&d.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:d}}else if(Cy[a.text]){var f=gI.test(a.text),m=[];for(m.push(new $a(Cy[a.text])),this.consume();;){var p=this.fetch().text;if(!Cy[p]||gI.test(p)!==f)break;m.unshift(new $a(Cy[p])),this.consume()}var y=this.subparse(m);f?i={type:"ordgroup",mode:"math",body:y}:n={type:"ordgroup",mode:"math",body:y}}else break}return n||i?{type:"supsub",mode:this.mode,base:t,sup:n,sub:i}:t}parseFunction(e,t){var n=this.fetch(),i=n.text,a=jc[i];if(!a)return null;if(this.consume(),t&&t!=="atom"&&!a.allowedInArgument)throw new Ge("Got function '"+i+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!a.allowedInText)throw new Ge("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new Ge("Can't use function '"+i+"' in math mode",n);var{args:s,optArgs:c}=this.parseArguments(i,a);return this.callFunction(i,s,c,n,e)}callFunction(e,t,n,i,a){var s={funcName:e,parser:this,token:i,breakOnTokenText:a},c=jc[e];if(c&&c.handler)return c.handler(s,t,n);throw new Ge("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],a=[],s=0;s<n;s++){var c=t.argTypes&&t.argTypes[s],d=s<t.numOptionalArgs;(t.primitive&&c==null||t.type==="sqrt"&&s===1&&a[0]==null)&&(c="primitive");var f=this.parseGroupOfType("argument to '"+e+"'",c,d);if(d)a.push(f);else if(f!=null)i.push(f);else throw new Ge("Null argument, please report this as a bug")}return{args:i,optArgs:a}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new Ge("A primitive argument cannot be optional");var s=this.parseGroup(e);if(s==null)throw new Ge("Expected group as "+e,this.fetch());return s}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Ge("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var i="",a;(a=this.fetch()).text!=="EOF";)i+=a.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n=this.fetch(),i=n,a="",s;(s=this.fetch()).text!=="EOF"&&e.test(a+s.text);)i=s,a+=i.text,this.consume();if(a==="")throw new Ge("Invalid "+t+": '"+n.text+"'",n);return n.range(i,a)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new Ge("Invalid color: '"+t.text+"'",t);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new Ge("Invalid size: '"+t.text+"'",t);var a={number:+(i[1]+i[2]),unit:i[3]};if(!NF(a))throw new Ge("Invalid unit: '"+a.unit+"'",t);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return t&&this.switchMode(i),s}parseGroup(e,t){var n=this.fetch(),i=n.text,a;if(i==="{"||i==="\\begingroup"){this.consume();var s=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,s),d=this.fetch();this.expect(s),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:ma.range(n,d),body:c,semisimple:i==="\\begingroup"||void 0}}else if(a=this.parseFunction(t,e)||this.parseSymbol(),a==null&&i[0]==="\\"&&!yq.hasOwnProperty(i)){if(this.settings.throwOnError)throw new Ge("Undefined control sequence: "+i,n);a=this.formatUnsupportedCmd(i),this.consume()}return a}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var i=e[n],a=i.text;a==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:ma.range(i,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:ma.range(i,e[n+1]),text:"--"}),t-=1)),(a==="'"||a==="`")&&e[n+1].text===a&&(e.splice(n,2,{type:"textord",mode:"text",loc:ma.range(i,e[n+1]),text:a+a}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Ge(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}yI.hasOwnProperty(t[0])&&!$r[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=yI[t[0]]+t.slice(1));var a=Qoe.exec(t);a&&(t=t.substring(0,a.index),t==="i"?t="":t==="j"&&(t=""));var s;if($r[this.mode][t]){this.settings.strict&&this.mode==="math"&&wT.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var c=$r[this.mode][t].group,d=ma.range(e),f;if($se.hasOwnProperty(c)){var m=c;f={type:"atom",mode:this.mode,family:m,loc:d,text:t}}else f={type:c,mode:this.mode,loc:d,text:t};s=f}else if(t.charCodeAt(0)>=128)this.settings.strict&&(EF(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),s={type:"textord",mode:"text",loc:ma.range(e),text:t};else return null;if(this.consume(),a)for(var p=0;p<a[0].length;p++){var y=a[0][p];if(!d5[y])throw new Ge("Unknown accent ' "+y+"'",e);var b=d5[y][this.mode]||d5[y].text;if(!b)throw new Ge("Accent "+y+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:ma.range(e),label:b,isStretchy:!1,isShifty:!0,base:s}}return s}}Dx.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var K8=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Dx(e,t);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new Ge("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new $a("\\df@tag")])}]}return i},vq=function(e,t,n){t.textContent="";var i=W8(e,n).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),vq=function(){throw new Ge("KaTeX doesn't work in quirks mode.")});var tle=function(e,t){var n=W8(e,t).toMarkup();return n},rle=function(e,t){var n=new k8(t);return K8(e,n)},bq=function(e,t,n){if(n.throwOnError||!(e instanceof Ge))throw e;var i=be.makeSpan(["katex-error"],[new ps(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},W8=function(e,t){var n=new k8(t);try{var i=K8(e,n);return doe(i,e,n)}catch(a){return bq(a,e,n)}},nle=function(e,t){var n=new k8(t);try{var i=K8(e,n);return hoe(i,e,n)}catch(a){return bq(a,e,n)}},ile="0.16.28",ale={Span:Ng,Anchor:I8,SymbolNode:ps,SvgNode:Tl,PathNode:Qc,LineNode:xT},Gv={version:ile,render:vq,renderToString:tle,ParseError:Ge,SETTINGS_SCHEMA:uv,__parse:rle,__renderToDomTree:W8,__renderToHTMLTree:nle,__setFontMetrics:Mse,__defineSymbol:O,__defineFunction:it,__defineMacro:G,__domTree:ale};/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function Oc(r){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(r)}function NT(r,e){return NT=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},NT(r,e)}function sle(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hv(r,e,t){return sle()?hv=Reflect.construct:hv=function(i,a,s){var c=[null];c.push.apply(c,a);var d=Function.bind.apply(i,c),f=new d;return s&&NT(f,s.prototype),f},hv.apply(null,arguments)}function js(r){return ole(r)||lle(r)||cle(r)||ule()}function ole(r){if(Array.isArray(r))return OT(r)}function lle(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function cle(r,e){if(r){if(typeof r=="string")return OT(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return OT(r,e)}}function OT(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function ule(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dle=Object.hasOwnProperty,vI=Object.setPrototypeOf,hle=Object.isFrozen,fle=Object.getPrototypeOf,mle=Object.getOwnPropertyDescriptor,Zi=Object.freeze,ys=Object.seal,ple=Object.create,xq=typeof Reflect<"u"&&Reflect,Kv=xq.apply,kT=xq.construct;Kv||(Kv=function(e,t,n){return e.apply(t,n)});Zi||(Zi=function(e){return e});ys||(ys=function(e){return e});kT||(kT=function(e,t){return hv(e,js(t))});var gle=vs(Array.prototype.forEach),bI=vs(Array.prototype.pop),fm=vs(Array.prototype.push),fv=vs(String.prototype.toLowerCase),h5=vs(String.prototype.toString),xI=vs(String.prototype.match),ks=vs(String.prototype.replace),yle=vs(String.prototype.indexOf),vle=vs(String.prototype.trim),pi=vs(RegExp.prototype.test),f5=ble(TypeError);function vs(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Kv(r,e,n)}}function ble(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kT(r,t)}}function $t(r,e,t){var n;t=(n=t)!==null&&n!==void 0?n:fv,vI&&vI(r,null);for(var i=e.length;i--;){var a=e[i];if(typeof a=="string"){var s=t(a);s!==a&&(hle(e)||(e[i]=s),a=s)}r[a]=!0}return r}function Du(r){var e=ple(null),t;for(t in r)Kv(dle,r,[t])===!0&&(e[t]=r[t]);return e}function jy(r,e){for(;r!==null;){var t=mle(r,e);if(t){if(t.get)return vs(t.get);if(typeof t.value=="function")return vs(t.value)}r=fle(r)}function n(i){return console.warn("fallback value for",i),null}return n}var wI=Zi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),m5=Zi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),p5=Zi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xle=Zi(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),g5=Zi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),wle=Zi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_I=Zi(["#text"]),SI=Zi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),y5=Zi(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),TI=Zi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Iy=Zi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_le=ys(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Sle=ys(/<%[\w\W]*|[\w\W]*%>/gm),Tle=ys(/\${[\w\W]*}/gm),Ale=ys(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ele=ys(/^aria-[\-\w]+$/),Nle=ys(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ole=ys(/^(?:\w+script|data):/i),kle=ys(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cle=ys(/^html$/i),jle=ys(/^[a-z][.\w]*(-[.\w]+)+$/i),Ile=function(){return typeof window>"u"?null:window},Rle=function(e,t){if(Oc(e)!=="object"||typeof e.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var a="dompurify"+(n?"#"+n:"");try{return e.createPolicy(a,{createHTML:function(c){return c},createScriptURL:function(c){return c}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}};function wq(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ile(),e=function(le){return wq(le)};if(e.version="2.5.8",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;var t=r.document,n=r.document,i=r.DocumentFragment,a=r.HTMLTemplateElement,s=r.Node,c=r.Element,d=r.NodeFilter,f=r.NamedNodeMap,m=f===void 0?r.NamedNodeMap||r.MozNamedAttrMap:f,p=r.HTMLFormElement,y=r.DOMParser,b=r.trustedTypes,T=c.prototype,S=jy(T,"cloneNode"),w=jy(T,"nextSibling"),E=jy(T,"childNodes"),I=jy(T,"parentNode");if(typeof a=="function"){var C=n.createElement("template");C.content&&C.content.ownerDocument&&(n=C.content.ownerDocument)}var B=Rle(b,t),R=B?B.createHTML(""):"",D=n,A=D.implementation,k=D.createNodeIterator,N=D.createDocumentFragment,U=D.getElementsByTagName,M=t.importNode,$={};try{$=Du(n).documentMode?n.documentMode:{}}catch{}var z={};e.isSupported=typeof I=="function"&&A&&A.createHTMLDocument!==void 0&&$!==9;var Q=_le,ee=Sle,K=Tle,Z=Ale,Y=Ele,ge=Ole,ae=kle,X=jle,J=Nle,ce=null,Ne=$t({},[].concat(js(wI),js(m5),js(p5),js(g5),js(_I))),se=null,ke=$t({},[].concat(js(SI),js(y5),js(TI),js(Iy))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ot=null,Ee=null,He=!0,he=!0,pe=!1,Ye=!0,Ke=!1,at=!0,tt=!1,Gt=!1,Ie=!1,de=!1,qe=!1,nt=!1,vt=!0,Xe=!1,Tt="user-content-",Kt=!0,Qt=!1,Ot={},Ft=null,Yr=$t({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Br=null,ea=$t({},["audio","video","img","source","image","track"]),qr=null,jn=$t({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ir="http://www.w3.org/1998/Math/MathML",un="http://www.w3.org/2000/svg",pr="http://www.w3.org/1999/xhtml",Si=pr,ws=!1,In=null,Ti=$t({},[Ir,un,pr],h5),dn,Ga=["application/xhtml+xml","text/html"],Bi="text/html",rr,ei=null,_s=n.createElement("form"),Ss=function(le){return le instanceof RegExp||le instanceof Function},Ai=function(le){ei&&ei===le||((!le||Oc(le)!=="object")&&(le={}),le=Du(le),dn=Ga.indexOf(le.PARSER_MEDIA_TYPE)===-1?dn=Bi:dn=le.PARSER_MEDIA_TYPE,rr=dn==="application/xhtml+xml"?h5:fv,ce="ALLOWED_TAGS"in le?$t({},le.ALLOWED_TAGS,rr):Ne,se="ALLOWED_ATTR"in le?$t({},le.ALLOWED_ATTR,rr):ke,In="ALLOWED_NAMESPACES"in le?$t({},le.ALLOWED_NAMESPACES,h5):Ti,qr="ADD_URI_SAFE_ATTR"in le?$t(Du(jn),le.ADD_URI_SAFE_ATTR,rr):jn,Br="ADD_DATA_URI_TAGS"in le?$t(Du(ea),le.ADD_DATA_URI_TAGS,rr):ea,Ft="FORBID_CONTENTS"in le?$t({},le.FORBID_CONTENTS,rr):Yr,ot="FORBID_TAGS"in le?$t({},le.FORBID_TAGS,rr):{},Ee="FORBID_ATTR"in le?$t({},le.FORBID_ATTR,rr):{},Ot="USE_PROFILES"in le?le.USE_PROFILES:!1,He=le.ALLOW_ARIA_ATTR!==!1,he=le.ALLOW_DATA_ATTR!==!1,pe=le.ALLOW_UNKNOWN_PROTOCOLS||!1,Ye=le.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=le.SAFE_FOR_TEMPLATES||!1,at=le.SAFE_FOR_XML!==!1,tt=le.WHOLE_DOCUMENT||!1,de=le.RETURN_DOM||!1,qe=le.RETURN_DOM_FRAGMENT||!1,nt=le.RETURN_TRUSTED_TYPE||!1,Ie=le.FORCE_BODY||!1,vt=le.SANITIZE_DOM!==!1,Xe=le.SANITIZE_NAMED_PROPS||!1,Kt=le.KEEP_CONTENT!==!1,Qt=le.IN_PLACE||!1,J=le.ALLOWED_URI_REGEXP||J,Si=le.NAMESPACE||pr,Me=le.CUSTOM_ELEMENT_HANDLING||{},le.CUSTOM_ELEMENT_HANDLING&&Ss(le.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=le.CUSTOM_ELEMENT_HANDLING.tagNameCheck),le.CUSTOM_ELEMENT_HANDLING&&Ss(le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=le.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),le.CUSTOM_ELEMENT_HANDLING&&typeof le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Me.allowCustomizedBuiltInElements=le.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(he=!1),qe&&(de=!0),Ot&&(ce=$t({},js(_I)),se=[],Ot.html===!0&&($t(ce,wI),$t(se,SI)),Ot.svg===!0&&($t(ce,m5),$t(se,y5),$t(se,Iy)),Ot.svgFilters===!0&&($t(ce,p5),$t(se,y5),$t(se,Iy)),Ot.mathMl===!0&&($t(ce,g5),$t(se,TI),$t(se,Iy))),le.ADD_TAGS&&(ce===Ne&&(ce=Du(ce)),$t(ce,le.ADD_TAGS,rr)),le.ADD_ATTR&&(se===ke&&(se=Du(se)),$t(se,le.ADD_ATTR,rr)),le.ADD_URI_SAFE_ATTR&&$t(qr,le.ADD_URI_SAFE_ATTR,rr),le.FORBID_CONTENTS&&(Ft===Yr&&(Ft=Du(Ft)),$t(Ft,le.FORBID_CONTENTS,rr)),Kt&&(ce["#text"]=!0),tt&&$t(ce,["html","head","body"]),ce.table&&($t(ce,["tbody"]),delete ot.tbody),Zi&&Zi(le),ei=le)},ta=$t({},["mi","mo","mn","ms","mtext"]),nn=$t({},["annotation-xml"]),Hs=$t({},["title","style","font","a","script"]),Ei=$t({},m5);$t(Ei,p5),$t(Ei,xle);var Ui=$t({},g5);$t(Ui,wle);var Gs=function(le){var Le=I(le);(!Le||!Le.tagName)&&(Le={namespaceURI:Si,tagName:"template"});var Qe=fv(le.tagName),oe=fv(Le.tagName);return In[le.namespaceURI]?le.namespaceURI===un?Le.namespaceURI===pr?Qe==="svg":Le.namespaceURI===Ir?Qe==="svg"&&(oe==="annotation-xml"||ta[oe]):!!Ei[Qe]:le.namespaceURI===Ir?Le.namespaceURI===pr?Qe==="math":Le.namespaceURI===un?Qe==="math"&&nn[oe]:!!Ui[Qe]:le.namespaceURI===pr?Le.namespaceURI===un&&!nn[oe]||Le.namespaceURI===Ir&&!ta[oe]?!1:!Ui[Qe]&&(Hs[Qe]||!Ei[Qe]):!!(dn==="application/xhtml+xml"&&In[le.namespaceURI]):!1},_n=function(le){fm(e.removed,{element:le});try{le.parentNode.removeChild(le)}catch{try{le.outerHTML=R}catch{le.remove()}}},ui=function(le,Le){try{fm(e.removed,{attribute:Le.getAttributeNode(le),from:Le})}catch{fm(e.removed,{attribute:null,from:Le})}if(Le.removeAttribute(le),le==="is"&&!se[le])if(de||qe)try{_n(Le)}catch{}else try{Le.setAttribute(le,"")}catch{}},Ks=function(le){var Le,Qe;if(Ie)le="<remove></remove>"+le;else{var oe=xI(le,/^[\r\n\t ]+/);Qe=oe&&oe[0]}dn==="application/xhtml+xml"&&Si===pr&&(le='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+le+"</body></html>");var Se=B?B.createHTML(le):le;if(Si===pr)try{Le=new y().parseFromString(Se,dn)}catch{}if(!Le||!Le.documentElement){Le=A.createDocument(Si,"template",null);try{Le.documentElement.innerHTML=ws?R:Se}catch{}}var ze=Le.body||Le.documentElement;return le&&Qe&&ze.insertBefore(n.createTextNode(Qe),ze.childNodes[0]||null),Si===pr?U.call(Le,tt?"html":"body")[0]:tt?Le.documentElement:ze},Ni=function(le){return k.call(le.ownerDocument||le,le,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null,!1)},br=function(le){return le instanceof p&&(typeof le.nodeName!="string"||typeof le.textContent!="string"||typeof le.removeChild!="function"||!(le.attributes instanceof m)||typeof le.removeAttribute!="function"||typeof le.setAttribute!="function"||typeof le.namespaceURI!="string"||typeof le.insertBefore!="function"||typeof le.hasChildNodes!="function")},Ur=function(le){return Oc(s)==="object"?le instanceof s:le&&Oc(le)==="object"&&typeof le.nodeType=="number"&&typeof le.nodeName=="string"},an=function(le,Le,Qe){z[le]&&gle(z[le],function(oe){oe.call(e,Le,Qe,ei)})},ra=function(le){var Le;if(an("beforeSanitizeElements",le,null),br(le)||pi(/[\u0080-\uFFFF]/,le.nodeName))return _n(le),!0;var Qe=rr(le.nodeName);if(an("uponSanitizeElement",le,{tagName:Qe,allowedTags:ce}),le.hasChildNodes()&&!Ur(le.firstElementChild)&&(!Ur(le.content)||!Ur(le.content.firstElementChild))&&pi(/<[/\w]/g,le.innerHTML)&&pi(/<[/\w]/g,le.textContent)||Qe==="select"&&pi(/<template/i,le.innerHTML)||le.nodeType===7||at&&le.nodeType===8&&pi(/<[/\w]/g,le.data))return _n(le),!0;if(!ce[Qe]||ot[Qe]){if(!ot[Qe]&&Ws(Qe)&&(Me.tagNameCheck instanceof RegExp&&pi(Me.tagNameCheck,Qe)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Qe)))return!1;if(Kt&&!Ft[Qe]){var oe=I(le)||le.parentNode,Se=E(le)||le.childNodes;if(Se&&oe)for(var ze=Se.length,st=ze-1;st>=0;--st){var bt=S(Se[st],!0);bt.__removalCount=(le.__removalCount||0)+1,oe.insertBefore(bt,w(le))}}return _n(le),!0}return le instanceof c&&!Gs(le)||(Qe==="noscript"||Qe==="noembed"||Qe==="noframes")&&pi(/<\/no(script|embed|frames)/i,le.innerHTML)?(_n(le),!0):(Ke&&le.nodeType===3&&(Le=le.textContent,Le=ks(Le,Q," "),Le=ks(Le,ee," "),Le=ks(Le,K," "),le.textContent!==Le&&(fm(e.removed,{element:le.cloneNode()}),le.textContent=Le)),an("afterSanitizeElements",le,null),!1)},Oi=function(le,Le,Qe){if(vt&&(Le==="id"||Le==="name")&&(Qe in n||Qe in _s))return!1;if(!(he&&!Ee[Le]&&pi(Z,Le))){if(!(He&&pi(Y,Le))){if(!se[Le]||Ee[Le]){if(!(Ws(le)&&(Me.tagNameCheck instanceof RegExp&&pi(Me.tagNameCheck,le)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(le))&&(Me.attributeNameCheck instanceof RegExp&&pi(Me.attributeNameCheck,Le)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(Le))||Le==="is"&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&pi(Me.tagNameCheck,Qe)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(Qe))))return!1}else if(!qr[Le]){if(!pi(J,ks(Qe,ae,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&le!=="script"&&yle(Qe,"data:")===0&&Br[le])){if(!(pe&&!pi(ge,ks(Qe,ae,"")))){if(Qe)return!1}}}}}}return!0},Ws=function(le){return le!=="annotation-xml"&&xI(le,X)},Ts=function(le){var Le,Qe,oe,Se;an("beforeSanitizeAttributes",le,null);var ze=le.attributes;if(!(!ze||br(le))){var st={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se};for(Se=ze.length;Se--;){Le=ze[Se];var bt=Le,Et=bt.name,Hr=bt.namespaceURI;if(Qe=Et==="value"?Le.value:vle(Le.value),oe=rr(Et),st.attrName=oe,st.attrValue=Qe,st.keepAttr=!0,st.forceKeepAttr=void 0,an("uponSanitizeAttribute",le,st),Qe=st.attrValue,!st.forceKeepAttr&&(ui(Et,le),!!st.keepAttr)){if(!Ye&&pi(/\/>/i,Qe)){ui(Et,le);continue}Ke&&(Qe=ks(Qe,Q," "),Qe=ks(Qe,ee," "),Qe=ks(Qe,K," "));var Hn=rr(le.nodeName);if(Oi(Hn,oe,Qe)){if(Xe&&(oe==="id"||oe==="name")&&(ui(Et,le),Qe=Tt+Qe),at&&pi(/((--!?|])>)|<\/(style|title)/i,Qe)){ui(Et,le);continue}if(B&&Oc(b)==="object"&&typeof b.getAttributeType=="function"&&!Hr)switch(b.getAttributeType(Hn,oe)){case"TrustedHTML":{Qe=B.createHTML(Qe);break}case"TrustedScriptURL":{Qe=B.createScriptURL(Qe);break}}try{Hr?le.setAttributeNS(Hr,Et,Qe):le.setAttribute(Et,Qe),br(le)?_n(le):bI(e.removed)}catch{}}}}an("afterSanitizeAttributes",le,null)}},na=function ut(le){var Le,Qe=Ni(le);for(an("beforeSanitizeShadowDOM",le,null);Le=Qe.nextNode();)an("uponSanitizeShadowNode",Le,null),ra(Le),Ts(Le),Le.content instanceof i&&ut(Le.content);an("afterSanitizeShadowDOM",le,null)};return e.sanitize=function(ut){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le,Qe,oe,Se,ze;if(ws=!ut,ws&&(ut="<!-->"),typeof ut!="string"&&!Ur(ut))if(typeof ut.toString=="function"){if(ut=ut.toString(),typeof ut!="string")throw f5("dirty is not a string, aborting")}else throw f5("toString is not a function");if(!e.isSupported){if(Oc(r.toStaticHTML)==="object"||typeof r.toStaticHTML=="function"){if(typeof ut=="string")return r.toStaticHTML(ut);if(Ur(ut))return r.toStaticHTML(ut.outerHTML)}return ut}if(Gt||Ai(le),e.removed=[],typeof ut=="string"&&(Qt=!1),Qt){if(ut.nodeName){var st=rr(ut.nodeName);if(!ce[st]||ot[st])throw f5("root node is forbidden and cannot be sanitized in-place")}}else if(ut instanceof s)Le=Ks("<!---->"),Qe=Le.ownerDocument.importNode(ut,!0),Qe.nodeType===1&&Qe.nodeName==="BODY"||Qe.nodeName==="HTML"?Le=Qe:Le.appendChild(Qe);else{if(!de&&!Ke&&!tt&&ut.indexOf("<")===-1)return B&&nt?B.createHTML(ut):ut;if(Le=Ks(ut),!Le)return de?null:nt?R:""}Le&&Ie&&_n(Le.firstChild);for(var bt=Ni(Qt?ut:Le);oe=bt.nextNode();)oe.nodeType===3&&oe===Se||(ra(oe),Ts(oe),oe.content instanceof i&&na(oe.content),Se=oe);if(Se=null,Qt)return ut;if(de){if(qe)for(ze=N.call(Le.ownerDocument);Le.firstChild;)ze.appendChild(Le.firstChild);else ze=Le;return(se.shadowroot||se.shadowrootmod)&&(ze=M.call(t,ze,!0)),ze}var Et=tt?Le.outerHTML:Le.innerHTML;return tt&&ce["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&pi(Cle,Le.ownerDocument.doctype.name)&&(Et="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+Et),Ke&&(Et=ks(Et,Q," "),Et=ks(Et,ee," "),Et=ks(Et,K," ")),B&&nt?B.createHTML(Et):Et},e.setConfig=function(ut){Ai(ut),Gt=!0},e.clearConfig=function(){ei=null,Gt=!1},e.isValidAttribute=function(ut,le,Le){ei||Ai({});var Qe=rr(ut),oe=rr(le);return Oi(Qe,oe,Le)},e.addHook=function(ut,le){typeof le=="function"&&(z[ut]=z[ut]||[],fm(z[ut],le))},e.removeHook=function(ut){if(z[ut])return bI(z[ut])},e.removeHooks=function(ut){z[ut]&&(z[ut]=[])},e.removeAllHooks=function(){z={}},e}var _q=wq();let v5=null,Sq=!0;function Mle(r){Sq=r}function Ple(){if(!v5){const r=window.AudioContext||window.webkitAudioContext;v5=new r}return v5}function jt(r,e,t="sine",n=.15){if(Sq)try{const i=Ple(),a=i.createOscillator(),s=i.createGain();a.type=t,a.frequency.setValueAtTime(r,i.currentTime),s.gain.setValueAtTime(n,i.currentTime),s.gain.exponentialRampToValueAtTime(.001,i.currentTime+e),a.connect(s),s.connect(i.destination),a.start(i.currentTime),a.stop(i.currentTime+e)}catch{}}const vi={xpGain:()=>{jt(600,.1,"sine",.1),setTimeout(()=>jt(900,.15,"sine",.08),80)},levelUp:()=>{[523,659,784,1047].forEach((e,t)=>{setTimeout(()=>jt(e,.3,"triangle",.12),t*120)})},lootDrop:()=>{jt(1200,.15,"sine",.08),setTimeout(()=>jt(1500,.12,"sine",.06),100),setTimeout(()=>jt(1800,.2,"triangle",.05),180)},questAccept:()=>{jt(440,.15,"square",.06),setTimeout(()=>jt(660,.2,"square",.06),120)},questDeploy:()=>{jt(880,.12,"sawtooth",.05),setTimeout(()=>jt(660,.12,"sawtooth",.05),100),setTimeout(()=>jt(550,.2,"sawtooth",.04),200)},equip:()=>{jt(200,.05,"square",.1),setTimeout(()=>jt(400,.08,"sine",.08),50)},salvage:()=>{jt(300,.15,"sawtooth",.06),setTimeout(()=>jt(200,.2,"sawtooth",.04),100),setTimeout(()=>jt(100,.3,"sawtooth",.03),200)},craft:()=>{jt(150,.08,"square",.1),setTimeout(()=>jt(800,.2,"triangle",.08),60)},error:()=>{jt(200,.15,"square",.08),setTimeout(()=>jt(150,.2,"square",.06),120)},messageSend:()=>{jt(500,.06,"sine",.05)},notification:()=>{jt(800,.1,"sine",.06),setTimeout(()=>jt(1e3,.12,"sine",.04),120)},achievement:()=>{[440,554,659,880,1047].forEach((e,t)=>{setTimeout(()=>jt(e,.25,"triangle",.1),t*100)})},dailyReward:()=>{jt(523,.12,"sine",.08),setTimeout(()=>jt(659,.12,"sine",.07),100),setTimeout(()=>jt(784,.2,"triangle",.06),200)},wheelSpin:()=>{for(let r=0;r<8;r++)setTimeout(()=>jt(400+r*50,.04,"square",.04),r*60)},wheelPrize:()=>{jt(523,.15,"triangle",.1),setTimeout(()=>jt(784,.15,"triangle",.1),120),setTimeout(()=>jt(1047,.3,"sine",.12),240)},skillUnlock:()=>{jt(300,.1,"sawtooth",.06),setTimeout(()=>jt(600,.1,"sawtooth",.06),80),setTimeout(()=>jt(900,.15,"sine",.08),160)},bossHit:()=>{jt(100,.1,"square",.12),setTimeout(()=>jt(80,.15,"sawtooth",.08),50)},bossDefeated:()=>{[262,330,392,523,659,784,1047].forEach((e,t)=>{setTimeout(()=>jt(e,.3,"triangle",.08),t*90)})},gemSocket:()=>{jt(1200,.08,"sine",.08),setTimeout(()=>jt(1600,.1,"sine",.06),60),setTimeout(()=>jt(2e3,.15,"triangle",.04),120)},partyJoin:()=>{jt(440,.1,"sine",.06),setTimeout(()=>jt(554,.1,"sine",.06),80),setTimeout(()=>jt(659,.15,"sine",.05),160)},chestOpen:()=>{jt(200,.15,"square",.06),setTimeout(()=>jt(300,.1,"square",.05),100),setTimeout(()=>jt(500,.1,"triangle",.06),200),setTimeout(()=>jt(800,.2,"sine",.08),350)}},Dle=({onComplete:r,contentUrl:e,htmlContent:t,userId:n,assignmentId:i,classType:a})=>{const s=F.useRef(Bv()),c=F.useRef(Date.now()),d=F.useRef(r),[f,m]=F.useState(!0),[p,y]=F.useState(0),[b,T]=F.useState(!1),[S,w]=F.useState(null),[E,I]=F.useState(0),[C,B]=F.useState(0),R=F.useRef(null),D=F.useRef(null),A=F.useRef(new Set);F.useEffect(()=>{d.current=r},[r]);const k=F.useCallback(()=>{c.current=Date.now(),f||m(!0)},[f]);return F.useEffect(()=>{const N=setInterval(()=>{Date.now()-c.current<6e4?(s.current.engagementTime+=1,y(s.current.engagementTime),f||m(!0)):f&&m(!1)},1e3);return()=>clearInterval(N)},[f]),F.useEffect(()=>{const N=["mousemove","keydown","scroll","click"];return N.forEach(U=>window.addEventListener(U,k)),()=>N.forEach(U=>window.removeEventListener(U,k))},[k]),F.useEffect(()=>()=>{d.current(s.current)},[]),F.useEffect(()=>{if(!n||!i)return;const N=async U=>{var ee,K,Z,Y,ge,ae,X,J;const M=R.current;if(!M)return;const $=M.src?new URL(M.src).origin:"";if(U.origin!==window.location.origin&&U.origin!==$)return;const z=U.origin,Q=U.data;if(!(!Q||typeof Q!="object"||!((ee=Q.type)!=null&&ee.startsWith("portal-"))))switch(k(),Q.type){case"portal-ready":{T(!0);try{const ce=await Wi(ct(Be,"practice_progress",`${n}_${i}`)),Ne=ce.exists()?ce.data():null,se=Ne?{state:Ne.state||null,currentQuestion:Ne.currentQuestion??0}:null,ke=(Ne==null?void 0:Ne.answeredQuestions)||[];ke.forEach(Me=>A.current.add(Me)),I(ke.length),(K=M.contentWindow)==null||K.postMessage({type:"portal-init",payload:{userId:n,savedState:se}},z)}catch(ce){console.error("Bridge: Failed to load saved state",ce),(Z=M.contentWindow)==null||Z.postMessage({type:"portal-init",payload:{userId:n,savedState:null}},z)}break}case"portal-save":{const{state:ce,currentQuestion:Ne}=Q.payload||{};if(!ce)break;try{await Gi(ct(Be,"practice_progress",`${n}_${i}`),{userId:n,assignmentId:i,state:ce,currentQuestion:Ne??0,answeredQuestions:Array.from(A.current),lastUpdated:new Date().toISOString()},{merge:!0}),(Y=M.contentWindow)==null||Y.postMessage({type:"portal-save-ok"},z)}catch(se){console.error("Bridge: Save failed",se),(ge=M.contentWindow)==null||ge.postMessage({type:"portal-save-error"},z)}break}case"portal-answer":{const{questionId:ce,correct:Ne,attempts:se}=Q.payload||{};if(!ce)break;if(Ne&&!A.current.has(ce)){A.current.add(ce),I(Me=>Me+1);const ke=se===1?15:10;try{const ot=(await lF({assignmentId:i,questionId:ce,xpAmount:ke,classType:a||"Uncategorized"})).data;if(ot.awarded){const Ee=ot.serverXP||ke;B(He=>He+Ee),w({text:`+${Ee} XP`,type:"success"}),vi.xpGain(),setTimeout(()=>w(null),2e3)}(ae=M.contentWindow)==null||ae.postMessage({type:"portal-xp-result",payload:{questionId:ce,awarded:ot.awarded,xp:ot.serverXP||ke}},z)}catch(Me){console.error("Bridge: XP award failed",Me),(X=M.contentWindow)==null||X.postMessage({type:"portal-xp-result",payload:{questionId:ce,awarded:!1,xp:0}},z)}}else Ne&&((J=M.contentWindow)==null||J.postMessage({type:"portal-xp-result",payload:{questionId:ce,awarded:!1,xp:0}},z));break}}};return window.addEventListener("message",N),()=>window.removeEventListener("message",N)},[n,i,a,k]),F.useEffect(()=>{if(D.current&&t){const N=t.replace(/\$(.*?)\$/g,(U,M)=>{try{return Gv.renderToString(M,{throwOnError:!1})}catch{return M}});D.current.innerHTML=_q.sanitize(N,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}},[t]),u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${f?"text-green-400":"text-yellow-500"}`,children:[f?u.jsx(S8,{className:"w-4 h-4"}):u.jsx(hs,{className:"w-4 h-4 animate-pulse"}),f?"Active Session":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(p/60),"m ",p%60,"s"]}),b&&E>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-purple-300 bg-purple-500/10 px-3 py-1 rounded-full border border-purple-500/20",children:[u.jsx(bn,{className:"w-3 h-3"})," ",E," answered"]}),b&&C>0&&u.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-amber-300 bg-amber-500/10 px-3 py-1 rounded-full border border-amber-500/20",children:[u.jsx(Vn,{className:"w-3 h-3"})," ",C," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[b&&u.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-green-400 bg-green-500/10 px-2.5 py-1 rounded-full border border-green-500/20 uppercase font-bold tracking-widest",children:[u.jsx(Vn,{className:"w-3 h-3"})," XP Linked"]}),!f&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(fs,{className:"w-3 h-3"})," Resume movement for XP"]})]})]}),S&&u.jsx("div",{className:"absolute top-14 right-4 z-30 animate-in slide-in-from-right fade-in duration-300",children:u.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl shadow-lg font-bold text-sm ${S.type==="success"?"bg-green-600/90 text-white border border-green-400/30":"bg-blue-600/90 text-white border border-blue-400/30"}`,children:[S.type==="success"?u.jsx(bn,{className:"w-4 h-4"}):u.jsx(vp,{className:"w-4 h-4"}),S.text]})}),u.jsxs("div",{className:"flex-1 relative overflow-hidden flex flex-col",children:[e?u.jsx("iframe",{ref:R,src:e,className:"w-full flex-1 border-none bg-white",title:"Resource Viewer",sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-modals",onLoad:k}):u.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-600 italic",children:u.jsxs("div",{className:"text-center",children:[u.jsx(bp,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),u.jsx("p",{className:"font-mono text-sm uppercase",children:"No interactive link found."})]})}),t&&u.jsxs("div",{className:"h-1/3 bg-[#0f0720]/95 border-t border-white/10 overflow-y-auto p-6 text-gray-300 shadow-[0_-10px_30px_rgba(0,0,0,0.8)] z-10 custom-scrollbar",children:[u.jsxs("h3",{className:"text-white font-bold mb-3 text-xs uppercase tracking-widest flex items-center gap-2",children:[u.jsx(hF,{className:"w-4 h-4 text-purple-400"})," Operational Context"]}),u.jsx("div",{ref:D,className:"proctor-content text-sm leading-relaxed"})]})]})]})},Lle=()=>{const[r,e]=F.useState(!1),[t,n]=F.useState(null),i=async()=>{e(!0),n(null);try{await LZ(fT,Cie)}catch(s){console.error("Login Error:",s),n(s instanceof Error?s.message:"Login failed"),e(!1)}},a=t&&t.includes("api-key-not-valid");return u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 p-6 relative overflow-hidden font-sans",children:[u.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-3xl"}),u.jsx("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl overflow-hidden z-10 animate-in fade-in zoom-in-95 duration-300",children:u.jsxs("div",{className:"p-10 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center mb-6 shadow-lg transform -rotate-3 transition hover:rotate-0",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),u.jsx("p",{className:"text-gray-500 mb-8",children:"Porter's Physics & Forensics Portal"}),t&&u.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-left animate-in slide-in-from-top-2",children:[u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx(fs,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),u.jsxs("div",{className:"break-words",children:[u.jsx("strong",{children:"Login Failed:"})," ",t]})]}),a&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200 text-red-700",children:[u.jsxs("div",{className:"flex items-center gap-2 font-bold mb-1",children:[u.jsx(yae,{className:"w-4 h-4"}),"Action Required:"]}),u.jsxs("p",{className:"text-xs leading-relaxed",children:["The app is missing your Firebase API Key. Please open ",u.jsx("code",{children:"lib/firebase.ts"})," and replace",u.jsx("code",{children:'"INSERT_YOUR_API_KEY_HERE"'})," with your actual key from the Firebase Console."]})]})]}),u.jsx("button",{onClick:i,disabled:r,className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium py-3 px-4 rounded-xl transition-all shadow-sm hover:shadow-md group disabled:opacity-70 disabled:cursor-not-allowed mb-6",children:r?u.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-indigo-600"}):u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",viewBox:"0 0 24 24",children:[u.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),u.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),u.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z",fill:"#FBBC05"}),u.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),u.jsx("span",{children:"Sign in with Google"})]})}),u.jsxs("div",{className:"flex items-center gap-4 justify-center text-xs text-gray-400",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Secure Connection"]}),u.jsx("span",{children:""}),u.jsx("span",{children:"Firebase Auth"})]})]})})]})},Tq=F.createContext(null),nu=()=>{const r=F.useContext(Tq);if(!r)throw new Error("useConfirm must be used within ConfirmProvider");return r},Ble=({children:r})=>{const[e,t]=F.useState({isOpen:!1,options:{message:""}}),n=F.useRef(null),i=F.useRef(null),a=F.useCallback(m=>new Promise(p=>{n.current=p,t({isOpen:!0,options:m})}),[]),s=F.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!0),n.current=null,t(p=>({...p,isOpen:!1}))},[]),c=F.useCallback(()=>{var m;(m=n.current)==null||m.call(n,!1),n.current=null,t(p=>({...p,isOpen:!1}))},[]);F.useEffect(()=>{if(e.isOpen){const m=setTimeout(()=>{var p;(p=i.current)==null||p.focus()},50);return()=>clearTimeout(m)}},[e.isOpen]),F.useEffect(()=>{if(!e.isOpen)return;const m=p=>{p.key==="Escape"&&c(),p.key==="Enter"&&s()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[e.isOpen,c,s]);const{variant:d="danger"}=e.options,f={danger:{bg:"bg-red-600 hover:bg-red-500",icon:"text-red-400",border:"border-red-500/30"},warning:{bg:"bg-amber-600 hover:bg-amber-500",icon:"text-amber-400",border:"border-amber-500/30"},info:{bg:"bg-purple-600 hover:bg-purple-500",icon:"text-purple-400",border:"border-purple-500/30"}}[d];return u.jsxs(Tq.Provider,{value:{confirm:a},children:[r,e.isOpen&&u.jsxs("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{zIndex:99999},role:"dialog","aria-modal":"true","aria-label":"Confirmation dialog",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:c}),u.jsxs("div",{className:`relative bg-gray-900 border ${f.border} rounded-2xl p-6 max-w-sm w-full shadow-2xl`,style:{animation:"confirmIn 150ms ease-out"},children:[u.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[u.jsx("div",{className:`p-2 rounded-xl bg-white/5 ${f.icon} shrink-0`,children:u.jsx(fs,{className:"w-5 h-5"})}),u.jsxs("div",{children:[e.options.title&&u.jsx("h3",{className:"font-bold text-white text-sm mb-1",children:e.options.title}),u.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.options.message})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:c,className:"flex-1 py-2.5 bg-white/5 border border-white/10 text-gray-300 rounded-xl text-sm font-bold hover:bg-white/10 transition",children:e.options.cancelLabel||"Cancel"}),u.jsx("button",{ref:i,onClick:s,className:`flex-1 py-2.5 ${f.bg} text-white rounded-xl text-sm font-bold transition`,children:e.options.confirmLabel||"Confirm"})]})]})]}),u.jsx("style",{children:`
                @keyframes confirmIn {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]})},AI={INFO:{bg:"bg-blue-500/10",border:"border-blue-500/30",text:"text-blue-400",icon:u.jsx(dF,{className:"w-4 h-4"})},WARNING:{bg:"bg-yellow-500/10",border:"border-yellow-500/30",text:"text-yellow-400",icon:u.jsx(fs,{className:"w-4 h-4"})},URGENT:{bg:"bg-red-500/10",border:"border-red-500/30",text:"text-red-400",icon:u.jsx(Rae,{className:"w-4 h-4"})}},Ule=({announcements:r,studentIds:e})=>{const{confirm:t}=nu(),n=Li(),[i,a]=F.useState(!1),[s,c]=F.useState(""),[d,f]=F.useState(""),[m,p]=F.useState("INFO"),[y,b]=F.useState("GLOBAL"),T=async()=>{if(!(!s.trim()||!d.trim()))try{await $e.createAnnouncement({title:s.trim(),content:d.trim(),classType:y,priority:m,createdAt:new Date().toISOString(),expiresAt:null,createdBy:"ADMIN"}),await $e.notifyUsers(e,"ANNOUNCEMENT",s.trim(),d.trim().slice(0,100)),c(""),f(""),a(!1),n.success("Announcement broadcast sent.")}catch{n.error("Failed to create announcement.")}},S=async w=>{await t({message:"Delete this announcement?",confirmLabel:"Delete"})&&await $e.deleteAnnouncement(w)};return u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(gT,{className:"w-5 h-5 text-orange-400"}),"Announcements"]}),u.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded-xl text-xs font-bold transition",children:[u.jsx(Sl,{className:"w-3.5 h-3.5"})," Broadcast"]})]}),r.length===0?u.jsxs("div",{className:"text-center py-6 text-gray-500 italic",children:[u.jsx(gT,{className:"w-10 h-10 mx-auto mb-2 opacity-20"}),"No active announcements."]}):u.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-1",children:r.map(w=>{const E=AI[w.priority]||AI.INFO;return u.jsxs("div",{className:`p-3 ${E.bg} border ${E.border} rounded-xl flex justify-between items-start`,children:[u.jsxs("div",{className:"flex gap-2 items-start",children:[u.jsx("div",{className:`mt-0.5 ${E.text}`,children:E.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-bold text-white",children:w.title}),u.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.content}),u.jsxs("div",{className:"text-[10px] text-gray-500 mt-1",children:[w.classType==="GLOBAL"?"All Classes":w.classType,"  ",new Date(w.createdAt).toLocaleDateString()]})]})]}),u.jsx("button",{onClick:()=>S(w.id),className:"p-1 text-gray-500 hover:text-red-400 transition shrink-0",children:u.jsx(Di,{className:"w-3.5 h-3.5"})})]},w.id)})}),u.jsx(Va,{isOpen:i,onClose:()=>a(!1),title:"New Announcement",maxWidth:"max-w-md",children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Title"}),u.jsx("input",{type:"text",value:s,onChange:w=>c(w.target.value),placeholder:"Quiz moved to Friday...",className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition",maxLength:80})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Message"}),u.jsx("textarea",{value:d,onChange:w=>f(w.target.value),placeholder:"Details...",rows:3,className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white focus:outline-none focus:border-purple-500 transition resize-none",maxLength:300})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Priority"}),u.jsxs("select",{value:m,onChange:w=>p(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"INFO",children:"Info"}),u.jsx("option",{value:"WARNING",children:"Warning"}),u.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest block mb-1",children:"Audience"}),u.jsxs("select",{value:y,onChange:w=>b(w.target.value),className:"w-full bg-black/30 border border-white/10 rounded-xl px-3 py-2 text-sm text-white",children:[u.jsx("option",{value:"GLOBAL",children:"All Classes"}),Object.values(Nr).filter(w=>w!=="Uncategorized").map(w=>u.jsx("option",{value:w,children:w},w))]})]})]}),u.jsx("button",{onClick:T,disabled:!s.trim()||!d.trim(),className:"w-full bg-orange-600 hover:bg-orange-500 disabled:opacity-40 disabled:cursor-not-allowed text-white py-3 rounded-2xl font-bold transition",children:"Broadcast Announcement"})]})})]})},EI=["Hydrogen","Helium","Lithium","Beryllium","Boron","Carbon","Nitrogen","Oxygen","Fluorine","Neon","Sodium","Magnesium","Aluminum","Silicon","Phosphorus","Sulfur","Chlorine","Argon","Potassium","Calcium","Scandium","Titanium","Vanadium","Chromium","Manganese","Iron","Cobalt","Nickel","Copper","Zinc","Gallium","Germanium","Arsenic","Selenium","Bromine","Krypton","Rubidium","Strontium","Yttrium","Zirconium"],zle=["I","II","III","IV","V"],Vle=r=>[2,10,18,36,54,86].includes(r)?{color:"border-fuchsia-500 text-fuchsia-400",glow:"shadow-fuchsia-500/50"}:[9,17,35,53,85].includes(r)?{color:"border-yellow-400 text-yellow-400",glow:"shadow-yellow-400/40"}:[3,11,19,37,55,87].includes(r)?{color:"border-red-500 text-red-500",glow:"shadow-red-500/40"}:{color:"border-cyan-400 text-cyan-400",glow:"shadow-cyan-400/30"},vh=r=>{const e=Math.floor((r-1)/5),t=(r-1)%5,n=Math.min(e,EI.length-1),i=EI[n]||"Unknownium",a=zle[t],s=n+1,c=Vle(s);return{rankName:`${i} ${a}`,tierColor:c.color,tierGlow:c.glow}},Lu={RECALIBRATE:5,REFORGE:25,OPTIMIZE:50},NI=r=>{const e=r.affixes.reduce((i,a)=>i+a.tier,0),t=r.affixes.length>0?e/r.affixes.length:1;let n=0;switch(r.rarity){case"COMMON":n=2;break;case"UNCOMMON":n=5;break;case"RARE":n=15;break;case"UNIQUE":n=50;break}return Math.floor(n*(1+t*.2))},Lx=r=>{var i;const e={tech:10,focus:10,analysis:10,charisma:10};if(!((i=r.gamification)!=null&&i.equipped))return e;const t=r.gamification.equipped;return Object.values(t).filter(Boolean).forEach(a=>{a.stats&&Object.entries(a.stats).forEach(([s,c])=>{e[s]+=c})}),e},kg=r=>{if(!r)return 0;let e=0;const t=Object.values(r).filter(Boolean);return t.length===0?0:(t.forEach(n=>{let i=n.affixes.map(c=>c.tier);n.rarity==="UNIQUE"&&i.length===0&&(i=[10]);const a=i.length>0?i.reduce((c,d)=>c+d,0)/i.length:1;let s=0;switch(n.rarity){case"COMMON":s=0;break;case"UNCOMMON":s=10;break;case"RARE":s=30;break;case"UNIQUE":s=60;break}e+=a*10+s}),Math.floor(e))},zr=r=>{switch(r){case"COMMON":return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""};case"UNCOMMON":return{border:"border-emerald-500",text:"text-emerald-400",bg:"bg-emerald-500/10",glow:"shadow-emerald-500/20",shimmer:"rarity-shimmer-uncommon"};case"RARE":return{border:"border-yellow-400",text:"text-yellow-300",bg:"bg-yellow-500/10",glow:"shadow-yellow-500/30",shimmer:"rarity-shimmer-rare"};case"UNIQUE":return{border:"border-orange-500",text:"text-orange-400",bg:"bg-orange-500/10",glow:"shadow-orange-500/40",shimmer:"rarity-shimmer-unique"};default:return{border:"border-slate-500",text:"text-slate-300",bg:"bg-slate-500/10",glow:"shadow-none",shimmer:""}}};function Bx(r,e){var i;const t=r.gamification;if(!t)return{inventory:[],equipped:{},appearance:{bodyType:"A",hue:0}};const n=(i=t.classProfiles)==null?void 0:i[e];return n?{inventory:n.inventory||[],equipped:n.equipped||{},appearance:n.appearance||{bodyType:"A",hue:0}}:{inventory:t.inventory||[],equipped:t.equipped||{},appearance:t.appearance||{bodyType:"A",hue:0}}}const $le=({student:r,submissions:e,assignments:t,onClose:n})=>{var w,E,I,C,B,R,D,A,k,N;const i=((w=r.gamification)==null?void 0:w.level)||1,a=((E=r.gamification)==null?void 0:E.xp)||0,s=((I=r.gamification)==null?void 0:I.currency)||0,c=vh(i),d=Lx(r),f=r.enrolledClasses||(r.classType?[r.classType]:[]),m=((B=(C=r.gamification)==null?void 0:C.completedQuests)==null?void 0:B.length)||0,p=((D=(R=r.gamification)==null?void 0:R.activeQuests)==null?void 0:D.filter(U=>U.status==="ACCEPTED"||U.status==="DEPLOYED").length)||0,y=F.useMemo(()=>f.map(U=>{var Z,Y;const M=((Y=(Z=r.gamification)==null?void 0:Z.classXp)==null?void 0:Y[U])||0,$=Bx(r,U),z=kg($.equipped),Q=$.inventory.length,ee=e.filter(ge=>{const ae=t.find(X=>X.id===ge.assignmentId);return(ae==null?void 0:ae.classType)===U}),K=Math.round(ee.reduce((ge,ae)=>{var X;return ge+(((X=ae.metrics)==null?void 0:X.engagementTime)||0)},0)/60);return{cls:U,classXp:M,gearScore:z,inventoryCount:Q,resourcesViewed:ee.length,totalTime:K}}),[r,e,t,f]),b=F.useMemo(()=>e.filter(U=>U.submittedAt).sort((U,M)=>new Date(M.submittedAt).getTime()-new Date(U.submittedAt).getTime()).slice(0,10).map(U=>{var M,$;return{...U,assignmentTitle:((M=t.find(z=>z.id===U.assignmentId))==null?void 0:M.title)||U.assignmentTitle,classType:(($=t.find(z=>z.id===U.assignmentId))==null?void 0:$.classType)||"Unknown"}}),[e,t]),T=Math.round(e.reduce((U,M)=>{var $;return U+((($=M.metrics)==null?void 0:$.engagementTime)||0)},0)/60),S=F.useMemo(()=>{const U=new Set;e.forEach(K=>{if(K.submittedAt){const Z=new Date(K.submittedAt),Y=Z.getFullYear(),ge=new Date(Y,0,1),ae=Math.ceil(((Z.getTime()-ge.getTime())/864e5+ge.getDay()+1)/7);U.add(`${Y}-W${ae}`)}});const M=new Date,$=M.getFullYear(),z=new Date($,0,1),Q=Math.ceil(((M.getTime()-z.getTime())/864e5+z.getDay()+1)/7);let ee=0;for(let K=Q;K>0&&U.has(`${$}-W${K}`);K--)ee++;return ee},[e]);return u.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[u.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm animate-in fade-in",onClick:n}),u.jsxs("div",{className:"relative w-full max-w-lg bg-[#12132a]/98 border-l border-white/10 h-full overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300 shadow-2xl",children:[u.jsxs("div",{className:"sticky top-0 z-10 bg-[#12132a]/95 backdrop-blur-md border-b border-white/5 p-6 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl p-0.5 bg-gradient-to-tr from-white/10 to-white/5 ${c.tierGlow} shadow-xl`,children:r.avatarUrl?u.jsx("img",{src:r.avatarUrl,alt:r.name,className:`w-full h-full rounded-2xl border-2 object-cover ${c.tierColor.split(" ")[0]}`}):u.jsx("div",{className:`w-full h-full rounded-2xl border-2 ${c.tierColor.split(" ")[0]} bg-purple-500/20 flex items-center justify-center text-xl font-bold text-white`,children:r.name.charAt(0)})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-bold text-white",children:r.name}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:[" Lv.",i]})]}),((A=r.gamification)==null?void 0:A.codename)&&u.jsxs("div",{className:"text-[10px] text-purple-400 italic",children:['"',r.gamification.codename,'"']})]})]}),u.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-white hover:bg-white/10 rounded-xl transition",children:u.jsx(ms,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(Vn,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:a.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total XP"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(hs,{className:"w-5 h-5 text-blue-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[T,"m"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Total Time"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(zs,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:e.length}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Resources"})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(pT,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:m}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Missions"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(Cj,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-bold text-white",children:s}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4 text-center",children:[u.jsx(A8,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-bold text-white",children:[S,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Operative Stats"}),u.jsx("div",{className:"space-y-2",children:Object.entries(d).map(([U,M])=>u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-[10px] text-gray-400 uppercase w-16 font-bold",children:U}),u.jsx("div",{className:"flex-1 h-2 bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${Math.min(100,M)}%`}})}),u.jsx("span",{className:"text-xs text-white font-bold w-8 text-right",children:M})]},U))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Class Performance"}),u.jsx("div",{className:"space-y-3",children:y.map(U=>u.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:U.cls}),u.jsxs("span",{className:"text-xs text-purple-400 font-bold",children:[U.classXp.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex gap-4 text-[10px] text-gray-400",children:[u.jsxs("span",{children:[u.jsx(us,{className:"w-3 h-3 inline mr-0.5"}),U.gearScore," GS"]}),u.jsxs("span",{children:[u.jsx(Cj,{className:"w-3 h-3 inline mr-0.5"}),U.inventoryCount," items"]}),u.jsxs("span",{children:[u.jsx(zs,{className:"w-3 h-3 inline mr-0.5"}),U.resourcesViewed," viewed"]}),u.jsxs("span",{children:[u.jsx(hs,{className:"w-3 h-3 inline mr-0.5"}),U.totalTime,"m"]})]})]},U.cls))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Recent Activity"}),b.length===0?u.jsx("p",{className:"text-xs text-gray-500 italic text-center py-4",children:"No recorded activity."}):u.jsx("div",{className:"space-y-2",children:b.map(U=>{var $;const M=Math.round(((($=U.metrics)==null?void 0:$.engagementTime)||0)/60);return u.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${M>=5?"bg-green-500":M>=1?"bg-yellow-500":"bg-gray-500"}`}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"text-xs text-white font-bold truncate",children:U.assignmentTitle}),u.jsxs("div",{className:"text-[10px] text-gray-500",children:[U.classType,"  ",M,"m engaged"]})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap",children:U.submittedAt?new Date(U.submittedAt).toLocaleDateString([],{month:"short",day:"numeric"}):""})]},U.id)})})]}),p>0&&u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-4",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Active Missions"}),u.jsx("div",{className:"space-y-2",children:(N=(k=r.gamification)==null?void 0:k.activeQuests)==null?void 0:N.filter(U=>U.status==="ACCEPTED"||U.status==="DEPLOYED").map(U=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-white/5 last:border-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(pT,{className:`w-3.5 h-3.5 ${U.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`}),u.jsx("span",{className:"text-xs text-white",children:U.questId})]}),u.jsx("span",{className:`text-[10px] font-bold uppercase ${U.status==="DEPLOYED"?"text-yellow-400":"text-blue-400"}`,children:U.status})]},U.questId))})]}),u.jsxs("div",{className:"text-[10px] text-gray-600 space-y-1 pb-4",children:[u.jsxs("div",{children:["Email: ",r.email]}),u.jsxs("div",{children:["Section: ",r.section||"Unassigned"]}),u.jsxs("div",{children:["Enrolled: ",f.join(", ")||"None"]}),u.jsxs("div",{children:["Last login: ",r.lastLoginAt?new Date(r.lastLoginAt).toLocaleString():"Never"]}),u.jsxs("div",{children:["Created: ",r.createdAt?new Date(r.createdAt).toLocaleDateString():""]}),r.mutedUntil&&new Date(r.mutedUntil)>new Date&&u.jsxs("div",{className:"text-orange-400 font-bold",children:[" Muted until ",new Date(r.mutedUntil).toLocaleString()]})]})]})]})]})},Fle=({users:r,assignments:e=[],submissions:t=[]})=>{const{confirm:n}=nu(),[i,a]=F.useState(null),[s,c]=F.useState([]),[d,f]=F.useState([]),[m,p]=F.useState(Date.now());F.useEffect(()=>{const A=$e.subscribeToChatFlags(c),k=$e.subscribeToAnnouncements(f),N=setInterval(()=>p(Date.now()),6e4);return()=>{A(),k(),clearInterval(N)}},[]);const y=r.filter(A=>A.role==="STUDENT"),b=y.length,T=Math.round(y.reduce((A,k)=>{var N;return A+(((N=k.stats)==null?void 0:N.totalTime)||0)},0)/(b||1)),S=y.reduce((A,k)=>{var N;return A+(((N=k.stats)==null?void 0:N.problemsCompleted)||0)},0),w=y.reduce((A,k)=>{var N;return A+(((N=k.gamification)==null?void 0:N.xp)||0)},0),E=y.filter(A=>A.mutedUntil&&new Date(A.mutedUntil).getTime()>m),I=async A=>{await n({message:"Lift silence sanction for this operative?",confirmLabel:"Unmute",variant:"info"})&&await $e.muteUser(A,0)},C=async(A,k)=>{const N=new Date(k).getTime(),U=new Date(Math.max(N,Date.now())+3600*1e3),M=Math.ceil((U.getTime()-Date.now())/6e4);await $e.muteUser(A,M)},B=({label:A,value:k,icon:N,color:U})=>u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-6 rounded-2xl relative overflow-hidden group hover:border-white/20 transition-all duration-300",children:[u.jsx("div",{className:`absolute top-0 right-0 p-4 opacity-20 group-hover:opacity-40 transition-opacity ${U}`,children:N}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-4xl font-bold text-white mb-2",children:k}),u.jsx("div",{className:"text-sm font-medium text-gray-400 uppercase tracking-wider",children:A})]}),u.jsx("div",{className:`absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r ${U}`})]}),R=A=>{const N=new Date(A).getTime()-m;if(N<=0)return"Expired";const U=Math.ceil(N/6e4);return U>60?`${Math.ceil(U/60)} hrs`:`${U} mins`},D=A=>{if(!A)return"Never";const k=new Date(A),N=Date.now()-k.getTime(),U=Math.floor(N/6e4);if(U<1)return"Just now";if(U<60)return`${U}m ago`;const M=Math.floor(U/60);return M<24?`${M}h ago`:k.toLocaleDateString()};return u.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[u.jsx("div",{className:"flex justify-between items-end",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Teacher Dashboard"}),u.jsx("p",{className:"text-gray-400",children:"Engagement analytics and operational overview."})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(B,{label:"Total Students",value:b,icon:u.jsx(Wc,{className:"w-12 h-12"}),color:"from-blue-500 to-cyan-400"}),u.jsx(B,{label:"Total XP Awarded",value:w.toLocaleString(),icon:u.jsx(Vn,{className:"w-12 h-12"}),color:"from-purple-500 to-pink-500"}),u.jsx(B,{label:"Resources Viewed",value:S,icon:u.jsx(T8,{className:"w-12 h-12"}),color:"from-emerald-500 to-teal-400"}),u.jsx(B,{label:"Avg Active Time",value:`${T}m`,icon:u.jsx(hs,{className:"w-12 h-12"}),color:"from-amber-500 to-orange-400"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:`border rounded-3xl p-6 backdrop-blur-md transition-colors ${s.length>0?"bg-red-900/10 border-red-500/30":"bg-white/5 border-white/10"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:`text-xl font-bold flex items-center gap-2 ${s.length>0?"text-red-400":"text-white"}`,children:[s.length>0?u.jsx(fs,{className:"w-5 h-5"}):u.jsx(kx,{className:"w-5 h-5 text-gray-400"}),"Moderation Queue"]}),u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${s.length>0?"bg-red-500 text-white animate-pulse":"bg-green-500/20 text-green-400"}`,children:s.length>0?`${s.length} Issues`:"Secure"})]}),s.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(Uv,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active alerts. Comms channels are clear."]}):u.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:s.map(A=>u.jsxs("div",{className:"bg-black/20 border border-red-500/20 p-3 rounded-xl",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-sm font-bold text-white",children:[A.senderName," ",u.jsxs("span",{className:"text-xs text-gray-500 font-normal",children:["in ",A.classType]})]}),u.jsxs("div",{className:"text-xs text-red-300 italic mt-1",children:['"',A.content,'"']})]}),u.jsx("div",{className:"text-[10px] text-gray-500 whitespace-nowrap ml-2",children:new Date(A.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),u.jsxs("div",{className:"flex gap-2 mt-2",children:[u.jsxs("button",{onClick:async()=>{await $e.resolveFlag(A.id),A.messageId&&await $e.unflagMessage(A.messageId).catch(()=>{})},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx(Nx,{className:"w-3 h-3"})," Dismiss"]}),u.jsxs("button",{onClick:async()=>{await n({message:"Delete flagged message and resolve?",confirmLabel:"Delete"})&&(await $e.resolveFlag(A.id),A.messageId&&await $e.deleteMessage(A.messageId).catch(()=>{}))},className:"flex-1 flex items-center justify-center gap-1 px-2 py-1.5 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-lg text-[11px] font-bold transition",children:[u.jsx(Di,{className:"w-3 h-3"})," Delete"]})]})]},A.id))})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:[u.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[u.jsx(Oae,{className:"w-5 h-5 text-orange-400"}),"Silenced Operatives"]}),E.length===0?u.jsxs("div",{className:"text-center py-8 text-gray-500 italic",children:[u.jsx(Wc,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),"No active silence sanctions."]}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase font-bold text-gray-500",children:[u.jsx("th",{className:"pb-2",children:"Operative"}),u.jsx("th",{className:"pb-2",children:"Remaining"}),u.jsx("th",{className:"pb-2 text-right",children:"Protocol"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:E.map(A=>u.jsxs("tr",{className:"group hover:bg-white/5 transition",children:[u.jsxs("td",{className:"py-3",children:[u.jsx("div",{className:"text-sm font-bold text-white",children:A.name}),u.jsx("div",{className:"text-[10px] text-gray-500",children:A.classType})]}),u.jsx("td",{className:"py-3",children:u.jsx("span",{className:"bg-orange-500/20 text-orange-300 px-2 py-1 rounded text-xs font-mono",children:R(A.mutedUntil)})}),u.jsx("td",{className:"py-3 text-right",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>C(A.id,A.mutedUntil),className:"p-1.5 rounded-lg bg-white/5 hover:bg-white/10 text-gray-300 hover:text-white transition",title:"Extend +1hr",children:u.jsx(zv,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>I(A.id),className:"p-1.5 rounded-lg bg-green-500/20 hover:bg-green-500/30 text-green-400 transition",title:"Unmute",children:u.jsx(Uv,{className:"w-3.5 h-3.5"})})]})})]},A.id))})]})})]})]}),u.jsx("div",{className:"mt-8",children:u.jsx(Ule,{announcements:d,studentIds:y.map(A=>A.id)})}),u.jsxs("div",{className:"mt-8 bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-8",children:[u.jsx("h3",{className:"text-xl font-bold text-white mb-6",children:"Student Engagement Ranking"}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-white/10 text-gray-400 text-sm",children:[u.jsx("th",{className:"p-3",children:"Student"}),u.jsx("th",{className:"p-3",children:"Class"}),u.jsx("th",{className:"p-3 text-center",children:"Last Seen"}),u.jsx("th",{className:"p-3 text-center",children:"Total Time"}),u.jsx("th",{className:"p-3 text-center",children:"Resources"}),u.jsx("th",{className:"p-3 text-right",children:"XP"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:(()=>{const A=Math.max(1,...y.map(k=>{var N;return((N=k.gamification)==null?void 0:N.xp)||0}));return y.sort((k,N)=>{var U,M;return(((U=N.gamification)==null?void 0:U.xp)||0)-(((M=k.gamification)==null?void 0:M.xp)||0)}).map(k=>{var ee,K,Z;const N=((ee=k.gamification)==null?void 0:ee.xp)||0,U=Math.round(N/A*100),M=k.lastLoginAt,$=M?Date.now()-new Date(M).getTime():1/0,z=$<36e5?"text-green-400":$<864e5?"text-yellow-400":$<1/0?"text-red-400":"text-gray-600",Q=$<36e5?"bg-green-500":$<864e5?"bg-yellow-500":$<1/0?"bg-red-500":"bg-gray-600";return u.jsxs("tr",{className:"hover:bg-white/5 transition cursor-pointer",onClick:()=>a(k),children:[u.jsx("td",{className:"p-3 font-bold text-white",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[k.avatarUrl?u.jsx("img",{src:k.avatarUrl,alt:k.name,className:"w-8 h-8 rounded-full border border-white/10 object-cover"}):u.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center text-xs",children:k.name.charAt(0)}),u.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-2 border-[#0f0720] ${Q}`})]}),u.jsx("span",{className:"truncate max-w-[120px]",children:k.name})]})}),u.jsx("td",{className:"p-3 text-sm text-gray-400",children:k.classType}),u.jsx("td",{className:`p-3 text-center text-xs font-mono ${z}`,children:D(k.lastLoginAt)}),u.jsxs("td",{className:"p-3 text-center text-white",children:[((K=k.stats)==null?void 0:K.totalTime)||0,"m"]}),u.jsx("td",{className:"p-3 text-center text-white",children:((Z=k.stats)==null?void 0:Z.problemsCompleted)||0}),u.jsx("td",{className:"p-3 text-right",children:u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx("div",{className:"w-16 h-1.5 bg-white/10 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-cyan-400 rounded-full transition-all",style:{width:`${U}%`}})}),u.jsx("span",{className:"text-purple-400 font-bold text-sm min-w-[3rem] text-right",children:N})]})})]},k.id)})})()})]})})]}),i&&u.jsx($le,{student:i,submissions:t.filter(A=>A.userId===i.id),assignments:e,onClose:()=>a(null)})]})},qle=({users:r,whitelistedEmails:e,classConfigs:t,onWhitelist:n})=>{const i=Li(),{confirm:a}=nu(),[s,c]=F.useState(new Set),[d,f]=F.useState(Nr.AP_PHYSICS),[m,p]=F.useState(!1),[y,b]=F.useState(!1),[T,S]=F.useState(""),[w,E]=F.useState(Nr.AP_PHYSICS),[I,C]=F.useState(""),[B,R]=F.useState(""),[D,A]=F.useState(!1),[k,N]=F.useState(!1),[U,M]=F.useState({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),[$,z]=F.useState(10),[Q,ee]=F.useState("single"),[K,Z]=F.useState([]),[Y,ge]=F.useState(!1),ae=F.useRef(null),X=r.filter(de=>de.role==="STUDENT"),J=F.useMemo(()=>e.filter(de=>!r.some(qe=>qe.email.toLowerCase()===de.email.toLowerCase())),[e,r]),ce=F.useMemo(()=>[...Array.from(new Set([...Object.values(Nr).filter(qe=>qe!==Nr.UNCATEGORIZED),...t.map(qe=>qe.className)])).sort(),Nr.UNCATEGORIZED],[t]),Ne=de=>{const qe=X.filter(Xe=>{var Tt,Kt;return((Tt=Xe.enrolledClasses)==null?void 0:Tt.includes(de))||de===Nr.UNCATEGORIZED&&(((Kt=Xe.enrolledClasses)==null?void 0:Kt.length)===0||!Xe.enrolledClasses)}),nt=qe.every(Xe=>s.has(Xe.id)),vt=new Set(s);qe.forEach(Xe=>{nt?vt.delete(Xe.id):vt.add(Xe.id)}),c(vt)},se=de=>{const qe=new Set(s);qe.has(de)?qe.delete(de):qe.add(de),c(qe)},ke=async()=>{if(s.size>0){const de=Array.from(s).map(async qe=>{const nt=r.find(vt=>vt.id===qe);if(nt){const vt=nt.enrolledClasses||[],Xe=Array.from(new Set([...vt.filter(Tt=>Tt!==Nr.UNCATEGORIZED),d]));await $e.updateUserEnrolledClasses(qe,Xe)}});await Promise.all(de),c(new Set)}},Me=async de=>{if(s.size>0){if(!await a({message:`Remove ${s.size} students from ${de}? Students with no remaining classes will lose system access.`,confirmLabel:"Remove"}))return;const qe=Array.from(s).map(async nt=>{const vt=r.find(Xe=>Xe.id===nt);if(vt){const Tt=(vt.enrolledClasses||[]).filter(Kt=>Kt!==de);await $e.updateUserEnrolledClasses(nt,Tt)}});await Promise.all(qe),c(new Set)}},ot=async(de,qe)=>{if(await a({message:`Remove ${de.name} from ${qe}? If this is their only class, their system access will be revoked.`,confirmLabel:"Remove"})){const vt=(de.enrolledClasses||[]).filter(Xe=>Xe!==qe);await $e.updateUserEnrolledClasses(de.id,vt)}},Ee=async(de,qe)=>{await a({title:"Permanent Deletion",message:`PERMANENTLY delete account for ${qe}? This will remove all data and logs for this operative.`,confirmLabel:"Delete Forever"})&&await $e.removeUser(de)},He=async de=>{de!==Nr.UNCATEGORIZED&&await a({message:`Delete group config ${de}? Students will remain but the group settings will be lost.`,confirmLabel:"Delete Config"})&&$e.deleteClassConfig(de)},he=async de=>{await a({message:`Cancel invite for ${de}? Access will be revoked immediately.`,confirmLabel:"Revoke"})&&await $e.removeFromWhitelist(de)},pe=(de,qe)=>{de!==Nr.UNCATEGORIZED&&(R(de),A(!0),qe?(M(qe.features),z(qe.xpPerMinute||10)):(M({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),z(10)),b(!0))},Ye=de=>{de.preventDefault(),n(T,w),I.trim()&&$e.updateWhitelistSection(T,I.trim()),S(""),C(""),p(!1)},Ke=de=>{var vt;const qe=(vt=de.target.files)==null?void 0:vt[0];if(!qe)return;const nt=new FileReader;nt.onload=Xe=>{var Br,ea;const Tt=(Br=Xe.target)==null?void 0:Br.result;if(!Tt)return;const Kt=Tt.split(/\r?\n/).filter(qr=>qr.trim()),Qt=(ea=Kt[0])!=null&&ea.toLowerCase().includes("email")?1:0,Ot=new Set(e.map(qr=>qr.email.toLowerCase())),Ft=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Yr=Kt.slice(Qt).map(qr=>{const jn=qr.includes("	")?qr.split("	"):qr.split(","),Ir=(jn[0]||"").trim().toLowerCase(),un=(jn[1]||"").trim()||Nr.AP_PHYSICS,pr=(jn[2]||"").trim();let Si="pending";return Ft.test(Ir)?Ot.has(Ir)&&(Si="duplicate"):Si="invalid",{email:Ir,classType:un,section:pr,status:Si}}).filter(qr=>qr.email.length>0);Z(Yr)},nt.readAsText(qe),de.target.value=""},at=async()=>{const de=K.filter(nt=>nt.status==="pending");if(de.length===0)return;ge(!0);let qe=0;for(const nt of de)try{await $e.addToWhitelist(nt.email,nt.classType),nt.section&&await $e.updateWhitelistSection(nt.email,nt.section),nt.status="success",qe++}catch{nt.status="invalid"}Z([...K]),ge(!1),i.success(`${qe} operative${qe!==1?"s":""} imported successfully.`),K.every(nt=>nt.status==="success"||nt.status==="duplicate")&&setTimeout(()=>{p(!1),Z([]),ee("single")},1500)},tt=async de=>{if(de.preventDefault(),!!B){N(!0);try{await $e.saveClassConfig({id:B,className:B,features:U,xpPerMinute:$}),R(""),b(!1),A(!1)}catch(qe){console.error("Failed to save config:",qe),i.error("Failed to save class configuration.")}finally{N(!1)}}},Gt=de=>{if(!de)return"Never";const qe=new Date(de),nt=Date.now()-qe.getTime(),vt=Math.floor(nt/6e4);if(vt<60)return`${vt}m ago`;const Xe=Math.floor(vt/60);return Xe<24?`${Xe}h ago`:qe.toLocaleDateString()},Ie=de=>{const qe=de===Nr.UNCATEGORIZED,nt=X.filter(Xe=>{var Tt;return((Tt=Xe.enrolledClasses)==null?void 0:Tt.includes(de))||qe&&(!Xe.enrolledClasses||Xe.enrolledClasses.length===0)}),vt=t.find(Xe=>Xe.className===de);return u.jsxs("div",{className:`mb-8 animate-in fade-in slide-in-from-bottom-4 duration-500 ${qe?"opacity-90":""}`,children:[u.jsxs("div",{className:`backdrop-blur-md border-t border-x border-white/10 p-4 rounded-t-2xl flex justify-between items-center ${qe?"bg-orange-500/10":"bg-white/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("h3",{className:`font-bold text-lg tracking-wide ${qe?"text-orange-300":"text-white"}`,children:[qe&&u.jsx(dae,{className:"w-5 h-5 inline mr-2 mb-1"}),de]}),u.jsxs("span",{className:`border text-[10px] font-bold px-3 py-1 rounded-full ${qe?"bg-orange-500/20 text-orange-200 border-orange-500/30":"bg-purple-500/20 text-purple-200 border-purple-500/30"}`,children:[nt.length," Registered"]}),!qe&&u.jsx("button",{onClick:()=>pe(de,vt),className:"text-xs text-gray-300 hover:text-white p-1.5 rounded-lg hover:bg-white/10 transition",title:"Edit Class Configuration",children:u.jsx(wp,{className:"w-4 h-4"})})]}),u.jsxs("div",{className:"flex gap-2",children:[s.size>0&&Array.from(s).some(Xe=>nt.find(Tt=>Tt.id===Xe))&&u.jsxs("button",{onClick:()=>Me(de),className:"text-xs text-red-400 bg-red-500/10 px-3 py-1.5 rounded-lg hover:bg-red-500/20 transition flex items-center gap-2",children:[u.jsx(Fae,{className:"w-3 h-3"})," Remove Selected"]}),!qe&&u.jsxs("button",{onClick:()=>He(de),className:"text-xs text-gray-500 hover:text-red-400 px-3 py-1.5 rounded-lg hover:bg-white/5 transition flex items-center gap-2",children:[u.jsx(Di,{className:"w-3 h-3"}),"Config"]})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-b-2xl overflow-hidden",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-black/20 border-b border-white/5 text-[10px] uppercase font-bold text-gray-400",children:[u.jsx("th",{className:"w-12 p-4 text-center",children:nt.length>0&&u.jsx("button",{onClick:()=>Ne(de),className:"hover:text-purple-400 transition",children:u.jsx(Mj,{className:"w-4 h-4"})})}),u.jsx("th",{className:"text-left p-4",children:"Operative"}),u.jsx("th",{className:"text-center p-4",children:"System Status"}),u.jsx("th",{className:"text-center p-4",children:"Last Seen"}),u.jsx("th",{className:"text-center p-4",children:"Class XP"}),u.jsx("th",{className:"text-center p-4 w-12",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:nt.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:6,className:"p-8 text-center text-gray-500 italic text-sm",children:qe?"No restricted operatives found.":"No students registered in this roster yet."})}):nt.map(Xe=>{var Kt,Qt,Ot,Ft;const Tt=((Qt=(Kt=Xe.gamification)==null?void 0:Kt.classXp)==null?void 0:Qt[de])||0;return u.jsxs("tr",{className:`hover:bg-white/5 transition group ${s.has(Xe.id)?"bg-purple-500/10":""}`,children:[u.jsx("td",{className:"p-4 text-center",children:u.jsx("button",{onClick:()=>se(Xe.id),className:"text-gray-500 hover:text-purple-400 transition",children:s.has(Xe.id)?u.jsx(zae,{className:"w-4 h-4 text-purple-500"}):u.jsx(Mj,{className:"w-4 h-4 group-hover:text-gray-400"})})}),u.jsx("td",{className:"p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:Xe.avatarUrl,alt:Xe.name,className:"w-8 h-8 rounded-full border border-white/10"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:Xe.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 font-mono",children:[Xe.email,Xe.section?`  ${Xe.section}`:""]})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest px-2 py-0.5 rounded-full border inline-flex items-center gap-1.5 ${Xe.isWhitelisted?"bg-green-500/10 text-green-400 border-green-500/20":"bg-red-500/10 text-red-400 border-red-500/20"}`,children:[Xe.isWhitelisted?u.jsx(Ij,{className:"w-3 h-3"}):u.jsx(kx,{className:"w-3 h-3"}),Xe.isWhitelisted?"Authorized":"Restricted"]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("span",{className:"text-xs text-gray-400 flex items-center justify-center gap-1.5",children:[u.jsx(hs,{className:"w-3 h-3"}),Gt(Xe.lastLoginAt)]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-lg text-purple-300",children:Tt.toLocaleString()}),(((Ot=Xe.enrolledClasses)==null?void 0:Ot.length)||0)>1&&u.jsxs("details",{className:"mt-1",children:[u.jsx("summary",{className:"text-[9px] text-gray-500 cursor-pointer hover:text-purple-400 transition",children:"All classes"}),u.jsx("div",{className:"mt-1 space-y-0.5 text-left",children:(Ft=Xe.enrolledClasses)==null?void 0:Ft.map(Yr=>{var Br,ea;return u.jsxs("div",{className:"flex items-center justify-between gap-2 text-[10px]",children:[u.jsx("span",{className:`truncate ${Yr===de?"text-purple-400 font-bold":"text-gray-500"}`,children:Yr}),u.jsx("span",{className:"text-gray-400 font-mono",children:(((ea=(Br=Xe.gamification)==null?void 0:Br.classXp)==null?void 0:ea[Yr])||0).toLocaleString()})]},Yr)})})]})]})}),u.jsx("td",{className:"p-4 text-center",children:u.jsx("div",{className:"flex items-center justify-center gap-2",children:u.jsx("button",{onClick:()=>qe?Ee(Xe.id,Xe.name):ot(Xe,de),className:"text-gray-600 hover:text-red-400 transition p-2 rounded-lg hover:bg-white/5",title:qe?"Permanently Delete":"Remove from this Class",children:u.jsx(ms,{className:"w-4 h-4"})})})})]},Xe.id)})})]})})]},de)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"User Management"}),u.jsx("p",{className:"text-gray-400",children:"Manage rosters, permissions, and active invitations."})]}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full md:w-auto",children:[u.jsxs("button",{onClick:()=>{R(""),M({physicsLab:!0,evidenceLocker:!1,leaderboard:!0,physicsTools:!1,communications:!0}),A(!1),b(!0)},className:"bg-white/10 hover:bg-white/20 text-white px-4 py-3 rounded-xl border border-white/10 transition font-bold flex items-center justify-center gap-2",children:[u.jsx(wp,{className:"w-4 h-4"}),"Class Config"]}),u.jsxs("button",{onClick:()=>p(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-xl shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_30px_rgba(147,51,234,0.5)] transition font-bold flex items-center justify-center gap-2",children:[u.jsx(Pj,{className:"w-4 h-4"}),"Invite Student"]})]})]}),J.length>0&&u.jsxs("div",{className:"bg-amber-900/10 border border-amber-500/30 rounded-2xl overflow-hidden animate-in zoom-in-95",children:[u.jsxs("div",{className:"bg-amber-500/20 px-6 py-3 flex items-center justify-between",children:[u.jsxs("h3",{className:"text-amber-200 font-bold text-sm uppercase tracking-widest flex items-center gap-2",children:[u.jsx(Eae,{className:"w-4 h-4"})," Pending Class Invitations (",J.length,")"]}),u.jsx("span",{className:"text-[10px] text-amber-400 font-bold italic",children:"Awaiting first login..."})]}),u.jsx("div",{className:"p-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:J.map(de=>u.jsxs("div",{className:"bg-black/40 p-3 rounded-xl flex items-center justify-between border border-white/5 group hover:border-amber-500/30 transition",children:[u.jsxs("div",{className:"min-w-0",children:[u.jsx("p",{className:"text-gray-200 text-xs font-bold truncate",children:de.email}),u.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[u.jsx(Ij,{className:"w-3 h-3 text-amber-500"}),u.jsxs("span",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-tighter",children:[(de.classTypes||[de.classType]).join(", ")," Access"]})]})]}),u.jsx("button",{onClick:()=>he(de.email),className:"p-1.5 text-gray-600 hover:text-red-400 transition hover:bg-red-500/10 rounded-lg opacity-0 group-hover:opacity-100",title:"Cancel Invitation",children:u.jsx(Di,{className:"w-3.5 h-3.5"})})]},de.email))})]}),u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 p-4 rounded-xl flex flex-col md:flex-row items-center justify-between sticky top-0 z-20 shadow-xl gap-4",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full md:w-auto",children:[u.jsx("span",{className:"font-bold text-gray-300 text-sm whitespace-nowrap hidden md:inline",children:"Bulk Enrollment:"}),u.jsxs("div",{className:"relative w-full sm:w-auto",children:[u.jsx("select",{value:d,onChange:de=>f(de.target.value),className:"w-full sm:w-auto appearance-none bg-black/40 border border-white/20 text-gray-200 py-2 pl-4 pr-10 rounded-lg text-sm font-medium focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 cursor-pointer",children:ce.filter(de=>de!==Nr.UNCATEGORIZED).map(de=>u.jsxs("option",{value:de,children:["Apply ",de," Access"]},de))}),u.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),u.jsxs("button",{onClick:ke,disabled:s.size===0,className:"w-full sm:w-auto bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg text-sm font-bold shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 whitespace-nowrap",children:[u.jsx(Sl,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Grant Access to Selected"}),u.jsx("span",{className:"inline sm:hidden",children:"Grant Access"})]})]}),u.jsxs("div",{className:"text-xs text-gray-500 font-mono text-center md:text-right w-full md:w-auto",children:[s.size," SELECTION ACTIVE"]})]}),u.jsx("div",{className:"pb-12",children:ce.map(de=>Ie(de))}),u.jsxs(Va,{isOpen:m,onClose:()=>{p(!1),Z([]),ee("single")},title:"New Operative Invitation",maxWidth:"max-w-lg",children:[u.jsxs("div",{className:"flex gap-1 bg-black/30 rounded-xl p-1 mb-4 border border-white/5",children:[u.jsxs("button",{onClick:()=>{ee("single"),Z([])},className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Q==="single"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(Pj,{className:"w-3.5 h-3.5"})," Single"]}),u.jsxs("button",{onClick:()=>ee("csv"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition flex items-center justify-center gap-1.5 ${Q==="csv"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:[u.jsx(_p,{className:"w-3.5 h-3.5"})," CSV Import"]})]}),Q==="single"?u.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Authorized Gmail"}),u.jsx("input",{type:"email",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:T,onChange:de=>S(de.target.value),placeholder:"student@gmail.com"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Initial Class Assignment"}),u.jsx("select",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all appearance-none",value:w,onChange:de=>E(de.target.value),children:ce.filter(de=>de!==Nr.UNCATEGORIZED).map(de=>u.jsx("option",{value:de,children:de},de))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1 px-1",children:"Section / Period (Optional)"}),u.jsx("input",{type:"text",className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all",value:I,onChange:de=>C(de.target.value),placeholder:"e.g. Period 3, Block A"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 bg-black/30 p-3 rounded-lg border border-white/10",children:"Invitation puts the email on a secure whitelist. The student will be automatically placed in their class upon their first Google login."}),u.jsx("button",{type:"submit",className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold hover:bg-purple-700 transition shadow-xl shadow-purple-200",children:"Whitelist Email"})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"bg-black/30 border border-dashed border-white/20 rounded-2xl p-6 text-center",children:[u.jsx("input",{type:"file",ref:ae,accept:".csv,.tsv,.txt",onChange:Ke,className:"hidden"}),K.length===0?u.jsxs(u.Fragment,{children:[u.jsx(_p,{className:"w-10 h-10 text-gray-500 mx-auto mb-3"}),u.jsx("button",{onClick:()=>{var de;return(de=ae.current)==null?void 0:de.click()},className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2.5 rounded-xl font-bold text-sm transition",children:"Select CSV File"}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-3",children:["Expected format: ",u.jsx("code",{className:"bg-black/40 px-1.5 py-0.5 rounded",children:"email, class, section"})]}),u.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"Header row is auto-detected and skipped. Section column is optional."}),u.jsx("div",{className:"mt-3 bg-black/40 rounded-lg p-3 text-left",children:u.jsxs("p",{className:"text-[9px] text-gray-500 font-mono leading-relaxed",children:["email,class,section",u.jsx("br",{}),"john@gmail.com,AP Physics,Period 3",u.jsx("br",{}),"jane@gmail.com,Honors Physics,Period 1",u.jsx("br",{}),"alex@gmail.com,Forensic Science,"]})})]}):u.jsxs(u.Fragment,{children:[u.jsx(T8,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),u.jsxs("p",{className:"text-sm font-bold text-white",children:[K.length," records parsed"]}),u.jsx("button",{onClick:()=>{Z([])},className:"text-[10px] text-gray-500 hover:text-white transition mt-1 underline",children:"Clear & pick another file"})]})]}),K.length>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar border border-white/10 rounded-xl",children:u.jsxs("table",{className:"w-full text-left text-xs",children:[u.jsx("thead",{className:"sticky top-0 bg-[#1a1b26]",children:u.jsxs("tr",{className:"border-b border-white/10 text-[10px] uppercase text-gray-500 font-bold",children:[u.jsx("th",{className:"p-2 pl-3",children:"Email"}),u.jsx("th",{className:"p-2",children:"Class"}),u.jsx("th",{className:"p-2",children:"Section"}),u.jsx("th",{className:"p-2 text-right pr-3",children:"Status"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:K.map((de,qe)=>u.jsxs("tr",{className:de.status==="invalid"?"bg-red-500/5":de.status==="duplicate"?"bg-yellow-500/5":de.status==="success"?"bg-green-500/5":"",children:[u.jsx("td",{className:"p-2 pl-3 text-gray-300 font-mono truncate max-w-[160px]",children:de.email}),u.jsx("td",{className:"p-2 text-gray-400",children:de.classType}),u.jsx("td",{className:"p-2 text-gray-500",children:de.section||""}),u.jsx("td",{className:"p-2 pr-3 text-right",children:u.jsx("span",{className:`text-[10px] font-bold uppercase px-2 py-0.5 rounded ${de.status==="pending"?"bg-blue-500/20 text-blue-400":de.status==="success"?"bg-green-500/20 text-green-400":de.status==="duplicate"?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}`,children:de.status})})]},qe))})]})}),u.jsx("div",{className:"flex items-center justify-between text-[10px] text-gray-500",children:u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("span",{className:"text-blue-400",children:[K.filter(de=>de.status==="pending").length," ready"]}),u.jsxs("span",{className:"text-yellow-400",children:[K.filter(de=>de.status==="duplicate").length," duplicates"]}),u.jsxs("span",{className:"text-red-400",children:[K.filter(de=>de.status==="invalid").length," invalid"]}),K.some(de=>de.status==="success")&&u.jsxs("span",{className:"text-green-400",children:[K.filter(de=>de.status==="success").length," imported"]})]})}),K.filter(de=>de.status==="duplicate").length>0&&u.jsxs("div",{className:"flex items-start gap-2 text-[10px] text-yellow-400 bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-2.5",children:[u.jsx(fs,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),"Duplicate emails are already on the whitelist and will be skipped."]}),u.jsx("button",{onClick:at,disabled:Y||K.filter(de=>de.status==="pending").length===0,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:opacity-40 disabled:cursor-not-allowed text-white py-4 rounded-2xl font-bold transition flex items-center justify-center gap-2",children:Y?u.jsxs(u.Fragment,{children:[u.jsx(Ua,{className:"w-4 h-4 animate-spin"})," Importing..."]}):u.jsxs(u.Fragment,{children:["Import ",K.filter(de=>de.status==="pending").length," Operatives"]})})]})]})]}),u.jsx(Va,{isOpen:y,onClose:()=>b(!1),title:D?"Edit Class Node Config":"Initialize New Class Node",children:u.jsxs("form",{onSubmit:tt,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Name"}),u.jsx("input",{type:"text",required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white",value:B,onChange:de=>R(de.target.value),placeholder:"e.g. AP Physics Period 4"}),D&&u.jsx("p",{className:"text-[10px] text-orange-600 mt-2 font-bold uppercase",children:"System Note: Rename creates a new config branch."})]}),u.jsxs("div",{className:"border-t border-white/10 pt-4",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Modular Feature Access"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.physicsLab,onChange:de=>M({...U,physicsLab:de.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Lab (Simulations & Reports)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.evidenceLocker,onChange:de=>M({...U,evidenceLocker:de.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Evidence Log (Weekly Portfolio)"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.leaderboard,onChange:de=>M({...U,leaderboard:de.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Global XP Leaderboards"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.physicsTools,onChange:de=>M({...U,physicsTools:de.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Physics Computational Toolkit"})]}),u.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[u.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500",checked:U.communications,onChange:de=>M({...U,communications:de.target.checked})}),u.jsx("span",{className:"text-sm text-gray-700 font-medium group-hover:text-purple-600 transition",children:"Real-time Class Communications"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"XP Per Minute of Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("input",{type:"number",min:1,max:100,value:$,onChange:de=>z(Math.max(1,Math.min(100,parseInt(de.target.value)||10))),className:"w-24 p-3 border border-white/10 rounded-xl bg-black/30 text-white text-center font-bold"}),u.jsx("span",{className:"text-xs text-gray-500",children:"XP per minute (default: 10, max: 100)"})]})]}),u.jsx("button",{type:"submit",disabled:k,className:`w-full bg-green-600 text-white py-4 rounded-2xl font-bold hover:bg-green-700 transition flex items-center justify-center gap-2 ${k?"opacity-70 cursor-not-allowed":""}`,children:k?u.jsxs(u.Fragment,{children:[u.jsx(Ua,{className:"w-4 h-4 animate-spin"})," ESTABLISHING PROTOCOL..."]}):D?"Update Terminal Configuration":"Initialize Class Node"})]})})]})},wc={1:{text:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30"},2:{text:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30"},3:{text:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30"}},OI={multiple_choice:"MC",multiple_select:"Multi-Select",ranking:"Ranking",qualitative_reasoning:"Qualitative",linked_mc:"Linked MC",troubleshooting:"Troubleshoot",conflicting_contentions:"Conflicting",whats_wrong:"What's Wrong",working_backwards:"Backwards"},Hle=(r,e,t)=>`You are an expert educational assessment designer. I need you to generate a question bank of 150 questions for the following resource. I will attach the resource content below this prompt.

RESOURCE: ${r}
CLASS: ${e}
${t?`DESCRIPTION: ${t}`:""}

Generate questions organized into 3 Bloom's Taxonomy tiers. Use a MIXTURE of the following question formats across all tiers:

QUESTION FORMATS:
1. Multiple Choice  4 options, 1 correct
2. Multiple Select  4 options, 2-3 correct
3. Ranking Task  4 items to order correctly
4. Conflicting Contentions  Two students disagree, who is correct and why
5. Linked Multiple Choice  Two connected questions where part B depends on part A
6. Qualitative Reasoning  Conceptual MC requiring deep understanding
7. Troubleshooting Task  Identify the error in a scenario
8. What's Wrong Task  Find the flaw in given reasoning/solution
9. Working Backwards Task  Given the answer, determine what produced it

TIER DISTRIBUTION (50 questions each):
- TIER 1 (Remember & Understand)  50 questions, +10 XP each
- TIER 2 (Apply & Analyze)  50 questions, +25 XP each  
- TIER 3 (Evaluate & Create)  50 questions, +50 XP each

OUTPUT FORMAT  Respond with ONLY a valid JSON array. Each question object:
{
  "id": "t1q001" (tier + question number),
  "tier": 1, 2, or 3,
  "xp": 10, 25, or 50 (matching tier),
  "type": "multiple_choice" | "multiple_select" | "ranking" | "qualitative_reasoning" | "linked_mc" | "troubleshooting" | "conflicting_contentions" | "whats_wrong" | "working_backwards",
  "bloomsLevel": "Remember" | "Understand" | "Apply" | "Analyze" | "Evaluate" | "Create",
  "stem": "The question text",
  "context": "Optional scenario/context text" or null,
  "options": [{"id": "a", "text": "..."}, {"id": "b", "text": "..."}, {"id": "c", "text": "..."}, {"id": "d", "text": "..."}],
  "correctAnswer": "b" (for MC) OR ["a","c"] (for multiple_select) OR ["c","a","d","b"] (for ranking, in correct order),
  "explanation": "Why this is the correct answer",
  "linkedFollowUp": null OR (only for linked_mc) {"stem": "...", "options": [...], "correctAnswer": "...", "explanation": "..."}
}

IMPORTANT:
- All questions MUST be specific to the resource content I attached
- Distractors must be plausible and educational
- Vary question formats within each tier (use all 9 types)
- Output ONLY the JSON array  no markdown fences, no commentary
- Generate exactly 150 questions (50 per tier) if possible
- If you hit your output limit, end the JSON array cleanly with ] so I can parse what you generated.`,Gle=(r,e,t)=>`You are an expert educational content creator. I need you to create comprehensive study material for students who are working through a practice set. This reading material should teach the underlying concepts so students understand the material before or while working on practice problems. I will attach the practice set content below this prompt.

PRACTICE SET: ${r}
CLASS: ${e}
${t?`DESCRIPTION: ${t}`:""}

Create detailed reading material that covers all the concepts, formulas, principles, and background knowledge a student needs to succeed on this practice set.

OUTPUT FORMAT  Respond with ONLY a valid JSON object:
{
  "title": "Study Guide: ${r}",
  "description": "A brief 1-2 sentence overview of what this reading covers",
  "estimatedMinutes": 15,
  "sections": [
    {
      "title": "Section title",
      "content": "Detailed explanation text. Use clear language appropriate for the class level. Include definitions, examples, step-by-step explanations, key formulas, common misconceptions, and practical applications. Make it thorough but readable."
    }
  ]
}

GUIDELINES:
- Create 8-15 sections that logically progress through the material
- Each section should be 150-400 words  substantial enough to actually teach the concept
- Include worked examples where applicable
- Define key vocabulary and terminology
- Address common student misconceptions
- Use clear, direct language appropriate for the class level
- The total reading should take approximately 10-20 minutes
- CRITICAL: For ALL math expressions, you MUST use LaTeX notation wrapped in dollar signs. Examples: $W = Fd\\cos\\theta$, $K = \\frac{1}{2}mv^2$, $U_g = mgy$
- Use double dollar signs for display equations on their own line: $$E_i + W_{ext} = E_f$$
- NEVER write bare math like "K=frac12mv2" or "W=Fdcostheta"  always wrap in $...$
- Every variable, formula, and equation must be in LaTeX dollar-sign delimiters
- Use bullet points (* at line start) for lists
- Use **bold** for key terms on first introduction
- Output ONLY the JSON object  no markdown fences, no commentary`,Kle=({assignment:r,isOpen:e,onClose:t})=>{const n=Li(),i=F.useRef(null),[a,s]=F.useState([]),[c,d]=F.useState(!0),[f,m]=F.useState(!1),[p,y]=F.useState(r.category==="Practice Set"?"reading":"manage"),[b,T]=F.useState(null),[S,w]=F.useState(null),[E,I]=F.useState(""),[C,B]=F.useState(null),[R,D]=F.useState(!1),[A,k]=F.useState(null),[N,U]=F.useState({}),[M,$]=F.useState(null),[z,Q]=F.useState(!0),[ee,K]=F.useState(null),[Z,Y]=F.useState(null),[ge,ae]=F.useState(null),[X,J]=F.useState(!1),ce=F.useRef(null),Ne=r.category==="Practice Set";F.useEffect(()=>{if(!e)return;(async()=>{d(!0);try{const de=await Wi(ct(Be,"question_banks",r.id));de.exists()?s(de.data().questions||[]):s([]);const qe=await Wi(ct(Be,"reading_materials",r.id));qe.exists()?K(qe.data()):K(null)}catch(de){console.error("Failed to load bank:",de),s([])}finally{d(!1)}})()},[e,r.id]);const se=async Ie=>{m(!0);try{await Gi(ct(Be,"question_banks",r.id),{assignmentId:r.id,title:r.title,classType:r.classType,questions:Ie,questionCount:Ie.length,updatedAt:new Date().toISOString()}),s(Ie)}catch(de){n.error("Failed to save: "+(de instanceof Error?de.message:"Unknown error"))}finally{m(!1)}},ke=async Ie=>{const de=a.filter(qe=>qe.id!==Ie);await se(de),n.success("Question removed."),C===Ie&&B(null)},Me=async()=>{try{await Ia(ct(Be,"question_banks",r.id)),s([]),n.success("Question bank cleared.")}catch{n.error("Failed to clear bank.")}},ot=()=>{navigator.clipboard.writeText(Hle(r.title,r.classType,r.description)),D(!0),setTimeout(()=>D(!1),2e3),n.success("Prompt copied!")},Ee=()=>{navigator.clipboard.writeText(Gle(r.title,r.classType,r.description)),J(!0),setTimeout(()=>J(!1),2e3),n.success("Reading prompt copied!")},He=async Ie=>{var qe;const de=(qe=Ie.target.files)==null?void 0:qe[0];if(de){ae(null),Y(null);try{let vt=(await de.text()).replace(/```json\s*|```\s*/g,"").trim();vt=vt.replace(/[\x00-\x1F\x7F]/g,Kt=>Kt===`
`||Kt==="\r"||Kt==="	"?" ":"");let Xe;try{Xe=JSON.parse(vt)}catch{const Kt=vt.match(/\{[\s\S]*\}/);if(Kt)Xe=JSON.parse(Kt[0]);else throw new Error("No JSON object found.")}if(!Xe.title||!Xe.sections||!Array.isArray(Xe.sections))throw new Error("Missing required fields: title and sections array.");const Tt=Xe.sections.filter(Kt=>!Kt.title||!Kt.content);if(Tt.length>0)throw new Error(`${Tt.length} section(s) missing title or content.`);Y(Xe)}catch(nt){ae(nt instanceof Error?nt.message:"Parse failed.")}ce.current&&(ce.current.value="")}},he=async()=>{if(Z){m(!0);try{await Gi(ct(Be,"reading_materials",r.id),{...Z,assignmentId:r.id,updatedAt:new Date().toISOString()}),K(Z),Y(null),n.success(`Study material uploaded: ${Z.sections.length} sections!`)}catch(Ie){n.error("Failed to save: "+(Ie instanceof Error?Ie.message:"Unknown error"))}finally{m(!1)}}},pe=async()=>{m(!0);try{await Ia(ct(Be,"reading_materials",r.id)),K(null),n.success("Study material removed.")}catch{n.error("Failed to delete.")}finally{m(!1)}},Ye=async Ie=>{var qe;const de=(qe=Ie.target.files)==null?void 0:qe[0];if(de){$(null),k(null);try{let vt=(await de.text()).replace(/```json\s*|```\s*/g,"").trim();vt=vt.replace(/[\x00-\x1F\x7F]/g,Ot=>Ot===`
`||Ot==="\r"||Ot==="	"?" ":"");let Xe;try{Xe=JSON.parse(vt)}catch{const Ot=vt.match(/\[[\s\S]*\]/);if(Ot)try{Xe=JSON.parse(Ot[0])}catch{const Ft=Ot[0];let Yr=null;for(let Br=Ft.length-1;Br>0;Br--)if(Ft[Br]==="}")try{Yr=JSON.parse(Ft.slice(0,Br+1)+"]");break}catch{}if(Yr)Xe=Yr;else throw new Error("Could not recover any valid questions from truncated JSON.")}else{let Ft=null;const Yr="["+vt;for(let Br=Yr.length-1;Br>0;Br--)if(Yr[Br]==="}")try{Ft=JSON.parse(Yr.slice(0,Br+1)+"]");break}catch{}if(Ft)Xe=Ft;else throw new Error("No JSON array found in file.")}}if(!Array.isArray(Xe)||Xe.length===0)throw new Error("Must be a non-empty JSON array.");const Tt=Xe.filter(Ot=>Ot.id&&Ot.tier&&Ot.type&&Ot.stem&&Ot.options&&Ot.correctAnswer),Kt=Xe.length-Tt.length;if(Tt.length===0){$("All questions are missing required fields (id, tier, type, stem, options, correctAnswer).");return}const Qt={};Tt.forEach(Ot=>{const Ft=Ot.tier;Qt[Ft]=(Qt[Ft]||0)+1}),k(Tt),U(Qt),Kt>0&&n.success(`Parsed ${Tt.length} questions (${Kt} skipped  missing fields).`)}catch(nt){$(nt instanceof Error?nt.message:"Parse failed.")}i.current&&(i.current.value="")}},Ke=async()=>{if(!A)return;let Ie;if(z&&a.length>0){const de=new Set(a.map(nt=>nt.id)),qe=A.map((nt,vt)=>({...nt,id:de.has(nt.id)?`${nt.id}_${Date.now()}_${vt}`:nt.id}));Ie=[...a,...qe]}else Ie=A;await se(Ie),n.success(`${z?"Added":"Replaced with"} ${A.length} questions. Total: ${Ie.length}`),k(null),y("manage")},at=F.useMemo(()=>{let Ie=a;if(b&&(Ie=Ie.filter(de=>de.tier===b)),S&&(Ie=Ie.filter(de=>de.type===S)),E){const de=E.toLowerCase();Ie=Ie.filter(qe=>qe.stem.toLowerCase().includes(de)||qe.id.toLowerCase().includes(de))}return Ie},[a,b,S,E]),tt=F.useMemo(()=>{const Ie={1:0,2:0,3:0};return a.forEach(de=>{Ie[de.tier]=(Ie[de.tier]||0)+1}),Ie},[a]),Gt=F.useMemo(()=>{const Ie={};return a.forEach(de=>{Ie[de.type]=(Ie[de.type]||0)+1}),Ie},[a]);return e?u.jsx(Va,{isOpen:e,onClose:t,title:"Question Bank Manager",maxWidth:"max-w-3xl",children:u.jsxs("div",{className:"text-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3 bg-black/30 border border-white/10 rounded-xl p-4 mb-4",children:[u.jsx(Xw,{className:"w-5 h-5 text-purple-400 shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("span",{className:"text-white font-bold text-sm",children:r.title}),u.jsx("div",{className:"text-xs mt-1",children:c?u.jsx("span",{className:"text-gray-500",children:"Loading..."}):a.length>0?u.jsxs("span",{className:"text-emerald-400",children:[a.length," questions loaded"]}):u.jsx("span",{className:"text-yellow-400",children:"No question bank yet"})})]}),a.length>0&&!c&&u.jsx("div",{className:"flex gap-2",children:[1,2,3].map(Ie=>u.jsxs("div",{className:`text-center px-3 py-1.5 rounded-lg ${wc[Ie].bg} ${wc[Ie].border} border`,children:[u.jsx("div",{className:`text-sm font-bold ${wc[Ie].text}`,children:tt[Ie]}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["T",Ie]})]},Ie))})]}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[!Ne&&u.jsxs("button",{onClick:()=>y("manage"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="manage"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Xw,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Manage Bank (",a.length,")"]}),!Ne&&u.jsxs("button",{onClick:()=>y("add"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="add"?"bg-purple-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(Sl,{className:"w-3.5 h-3.5 inline mr-1.5"}),a.length>0?"Add More":"Create Bank"]}),u.jsxs("button",{onClick:()=>y("reading"),className:`flex-1 py-2.5 rounded-xl text-xs font-bold transition ${p==="reading"?"bg-emerald-600 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[u.jsx(zs,{className:"w-3.5 h-3.5 inline mr-1.5"}),"Study Material ",ee?`(${ee.sections.length})`:""]})]}),p==="manage"&&u.jsx("div",{className:"space-y-3",children:c?u.jsx("div",{className:"py-12 text-center",children:u.jsx(Ua,{className:"w-6 h-6 text-purple-400 animate-spin mx-auto"})}):a.length===0?u.jsxs("div",{className:"py-12 text-center",children:[u.jsx(Xw,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No questions yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Switch to the Create Bank tab to get started."})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[u.jsxs("div",{className:"relative flex-1 min-w-[150px]",children:[u.jsx(yF,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),u.jsx("input",{value:E,onChange:Ie=>I(Ie.target.value),placeholder:"Search questions...",className:"w-full pl-9 pr-3 py-2 bg-black/30 border border-white/10 rounded-lg text-xs text-white placeholder-gray-600 outline-none focus:border-purple-500/50"})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>T(null),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b?"text-gray-500 hover:text-gray-300":"bg-white/10 text-white"}`,children:"All"}),[1,2,3].map(Ie=>u.jsxs("button",{onClick:()=>T(b===Ie?null:Ie),className:`px-2.5 py-1.5 rounded-lg text-[10px] font-bold transition ${b===Ie?`${wc[Ie].bg} ${wc[Ie].text} ${wc[Ie].border} border`:"text-gray-500 hover:text-gray-300"}`,children:["T",Ie," (",tt[Ie],")"]},Ie))]})]}),Object.keys(Gt).length>1&&u.jsx("div",{className:"flex gap-1 flex-wrap",children:Object.entries(Gt).sort((Ie,de)=>de[1]-Ie[1]).map(([Ie,de])=>u.jsxs("button",{onClick:()=>w(S===Ie?null:Ie),className:`px-2 py-1 rounded-lg text-[9px] font-bold transition ${S===Ie?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-500 hover:text-gray-300"}`,children:[OI[Ie]||Ie," (",de,")"]},Ie))}),u.jsx("div",{className:"max-h-[350px] overflow-y-auto custom-scrollbar space-y-2 pr-1",children:at.length===0?u.jsx("p",{className:"text-gray-600 text-xs text-center py-8",children:"No questions match your filters."}):at.map(Ie=>{const de=wc[Ie.tier]||wc[1],qe=C===Ie.id;return u.jsxs("div",{className:`rounded-xl border transition ${qe?`${de.border} ${de.bg}`:"border-white/5 bg-white/[0.02] hover:border-white/10"}`,children:[u.jsxs("div",{className:"flex items-start gap-2.5 p-3 cursor-pointer",onClick:()=>B(qe?null:Ie.id),children:[u.jsxs("div",{className:`w-6 h-6 rounded-md flex items-center justify-center shrink-0 text-[9px] font-black ${de.bg} ${de.text}`,children:["T",Ie.tier]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-1.5 mb-0.5 flex-wrap",children:[u.jsx("span",{className:"text-[8px] text-gray-600 font-mono",children:Ie.id}),u.jsx("span",{className:"text-[8px] text-gray-600",children:""}),u.jsx("span",{className:"text-[8px] text-gray-500",children:OI[Ie.type]||Ie.type}),u.jsxs("span",{className:"text-[8px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Vn,{className:"w-2.5 h-2.5"}),Ie.xp]})]}),u.jsx("p",{className:"text-xs text-gray-300 leading-snug line-clamp-2",children:Ie.stem})]}),u.jsx(o0,{className:`w-3.5 h-3.5 text-gray-600 shrink-0 mt-1 transition-transform ${qe?"rotate-90":""}`})]}),qe&&u.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[Ie.context&&u.jsx("div",{className:"text-[10px] text-gray-500 italic bg-black/20 rounded-lg p-2",children:Ie.context}),u.jsx("div",{className:"space-y-1",children:Ie.options.map(nt=>{const vt=Array.isArray(Ie.correctAnswer)?Ie.correctAnswer.includes(nt.id):Ie.correctAnswer===nt.id;return u.jsxs("div",{className:`flex items-start gap-2 text-[11px] px-2 py-1.5 rounded-lg ${vt?"bg-emerald-500/10 text-emerald-300":"text-gray-400"}`,children:[u.jsxs("span",{className:"font-mono font-bold text-[10px] mt-0.5 shrink-0",children:[nt.id.toUpperCase(),"."]}),u.jsx("span",{children:nt.text}),vt&&u.jsx(bn,{className:"w-3 h-3 text-emerald-400 ml-auto shrink-0 mt-0.5"})]},nt.id)})}),u.jsxs("div",{className:"text-[10px] text-gray-500 bg-black/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold text-gray-400",children:"Explanation: "}),Ie.explanation]}),Ie.linkedFollowUp&&u.jsxs("div",{className:"text-[10px] text-blue-300/70 bg-blue-500/5 border border-blue-500/20 rounded-lg p-2",children:[u.jsx("span",{className:"font-bold",children:"Follow-up: "}),Ie.linkedFollowUp.stem]}),u.jsxs("button",{onClick:()=>ke(Ie.id),disabled:f,className:"flex items-center gap-1.5 text-[10px] font-bold text-red-400 hover:text-red-300 bg-red-500/10 hover:bg-red-500/20 px-3 py-1.5 rounded-lg transition",children:[u.jsx(Di,{className:"w-3 h-3"})," Delete Question"]})]})]},Ie.id)})}),u.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-white/5",children:[u.jsxs("span",{className:"text-[10px] text-gray-600",children:["Showing ",at.length," of ",a.length]}),u.jsxs("button",{onClick:Me,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx(Di,{className:"w-3 h-3"})," Clear Entire Bank"]})]})]})}),p==="add"&&u.jsxs("div",{className:"space-y-5",children:[u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content (PDF, notes, etc)."}),u.jsx("button",{onClick:ot,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${R?"bg-emerald-600 text-white":"bg-purple-600 hover:bg-purple-500 text-white"}`,children:R?u.jsxs(u.Fragment,{children:[u.jsx(bn,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(mT,{className:"w-4 h-4"})," Copy AI Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-purple-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload JSON"]}),u.jsxs("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:["Save the AI output as ",u.jsx("code",{className:"bg-black/40 px-1 py-0.5 rounded text-purple-300 text-[10px]",children:".json"})," and upload here."]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-purple-500/50 hover:bg-purple-500/5 transition cursor-pointer",children:[u.jsx(Oj,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:i,type:"file",accept:".json,.txt",onChange:Ye,className:"hidden"})]})]}),M&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(fs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:M})]}),A&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(bn,{className:"w-4 h-4 text-emerald-400"}),u.jsxs("span",{className:"text-emerald-400 font-bold text-sm",children:[A.length," questions parsed"]})]}),u.jsx("div",{className:"flex gap-3",children:[1,2,3].map(Ie=>u.jsxs("div",{className:"flex-1 bg-black/30 rounded-lg p-2 text-center",children:[u.jsx("div",{className:"text-base font-bold text-white",children:N[Ie]||0}),u.jsxs("div",{className:"text-[8px] text-gray-500 uppercase font-bold",children:["Tier ",Ie]})]},Ie))}),a.length>0&&u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>Q(!0),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"bg-purple-500/20 border-purple-500/30 text-purple-300":"border-white/10 text-gray-500 hover:text-gray-300"}`,children:[u.jsx(Sl,{className:"w-3 h-3 inline mr-1"}),"Append to existing (",a.length," + ",A.length,")"]}),u.jsxs("button",{onClick:()=>Q(!1),className:`flex-1 py-2 rounded-lg text-[10px] font-bold transition border ${z?"border-white/10 text-gray-500 hover:text-gray-300":"bg-red-500/20 border-red-500/30 text-red-300"}`,children:[u.jsx(vp,{className:"w-3 h-3 inline mr-1"}),"Replace all"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:Ke,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Ua,{className:"w-4 h-4 animate-spin"}):u.jsx(_p,{className:"w-4 h-4"}),f?"Saving...":`Upload ${A.length} Questions`]}),u.jsx("button",{onClick:()=>k(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx(Di,{className:"w-4 h-4"})})]})]})]}),p==="reading"&&u.jsxs("div",{className:"space-y-5",children:[ee?u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(zs,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:ee.title})]}),u.jsxs("button",{onClick:pe,disabled:f,className:"text-[10px] font-bold text-red-400/60 hover:text-red-400 transition flex items-center gap-1",children:[u.jsx(Di,{className:"w-3 h-3"})," Remove"]})]}),ee.description&&u.jsx("p",{className:"text-xs text-gray-400",children:ee.description}),u.jsxs("div",{className:"flex gap-2 text-[10px] text-gray-500",children:[u.jsxs("span",{children:[ee.sections.length," sections"]}),ee.estimatedMinutes&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsxs("span",{children:["~",ee.estimatedMinutes," min read"]})]})]}),u.jsx("div",{className:"max-h-[200px] overflow-y-auto custom-scrollbar space-y-1.5 pr-1",children:ee.sections.map((Ie,de)=>u.jsxs("div",{className:"text-[11px] text-gray-400 bg-black/20 px-3 py-2 rounded-lg flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded bg-emerald-500/10 text-emerald-400 text-[9px] font-bold flex items-center justify-center shrink-0",children:de+1}),u.jsx("span",{className:"truncate",children:Ie.title})]},de))})]}):u.jsxs("div",{className:"py-6 text-center",children:[u.jsx(zs,{className:"w-10 h-10 text-gray-700 mx-auto mb-2"}),u.jsx("p",{className:"text-gray-500 text-sm font-bold",children:"No study material yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Upload reading material so students can study while working on this resource."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"1"}),"Generate with AI"]}),u.jsx("p",{className:"text-[11px] text-gray-500 leading-relaxed",children:"Copy the prompt, paste into ChatGPT/Gemini/Claude with your resource content. The AI will create reading material students can study for engagement XP."}),u.jsx("button",{onClick:Ee,className:`w-full py-2.5 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition ${X?"bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-500 text-white"}`,children:X?u.jsxs(u.Fragment,{children:[u.jsx(bn,{className:"w-4 h-4"})," Copied!"]}):u.jsxs(u.Fragment,{children:[u.jsx(mT,{className:"w-4 h-4"})," Copy Study Material Prompt"]})})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-xs font-bold uppercase tracking-widest text-gray-400 flex items-center gap-2",children:[u.jsx("span",{className:"w-5 h-5 rounded-full bg-emerald-600 text-white text-[10px] font-bold flex items-center justify-center",children:"2"}),"Upload Study Material JSON"]}),u.jsxs("label",{className:"flex items-center justify-center gap-3 py-3 border-2 border-dashed border-white/15 rounded-xl hover:border-emerald-500/50 hover:bg-emerald-500/5 transition cursor-pointer",children:[u.jsx(Oj,{className:"w-4 h-4 text-gray-400"}),u.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Choose .json file"}),u.jsx("input",{ref:ce,type:"file",accept:".json,.txt",onChange:He,className:"hidden"})]})]}),ge&&u.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-3 flex items-start gap-2",children:[u.jsx(fs,{className:"w-4 h-4 text-red-400 shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-300/70 text-xs",children:ge})]}),Z&&u.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/30 rounded-xl p-4 space-y-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(bn,{className:"w-4 h-4 text-emerald-400"}),u.jsx("span",{className:"text-emerald-400 font-bold text-sm",children:Z.title})]}),u.jsxs("p",{className:"text-xs text-gray-400",children:[Z.sections.length," sections  ~",Z.estimatedMinutes||"?"," min read"]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:he,disabled:f,className:"flex-1 py-2.5 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-700 text-white font-bold rounded-xl transition flex items-center justify-center gap-2 text-sm",children:[f?u.jsx(Ua,{className:"w-4 h-4 animate-spin"}):u.jsx(_p,{className:"w-4 h-4"}),f?"Saving...":"Upload Study Material"]}),u.jsx("button",{onClick:()=>Y(null),className:"px-4 py-2.5 bg-white/5 hover:bg-white/10 text-gray-400 rounded-xl transition",children:u.jsx(Di,{className:"w-4 h-4"})})]})]})]}),f&&u.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 text-xs text-purple-400",children:[u.jsx(Ua,{className:"w-3 h-3 animate-spin"})," Saving..."]})]})}):null},kI=["Textbook","Simulation","Lab Guide","Practice Set","Article","Video Lesson","Supplemental"],Wle={Textbook:u.jsx(zs,{className:"w-4 h-4"}),Simulation:u.jsx(S8,{className:"w-4 h-4"}),"Lab Guide":u.jsx(Ox,{className:"w-4 h-4"}),"Practice Set":u.jsx(xo,{className:"w-4 h-4"}),Article:u.jsx(fF,{className:"w-4 h-4"}),"Video Lesson":u.jsx(bF,{className:"w-4 h-4"}),Supplemental:u.jsx(E8,{className:"w-4 h-4"})},Xle=({assignments:r,submissions:e,classConfigs:t,onCreateAssignment:n,onPreviewAssignment:i})=>{const a=Li(),{confirm:s}=nu(),[c,d]=F.useState(!1),[f,m]=F.useState(!1),[p,y]=F.useState(!1),[b,T]=F.useState("All Classes"),[S,w]=F.useState("All Categories"),[E,I]=F.useState(new Set),[C,B]=F.useState(null),[R,D]=F.useState({title:"",description:"",status:Jo.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",resources:[]}),[A,k]=F.useState(new Set([Nr.AP_PHYSICS])),[N,U]=F.useState(!1),M=F.useMemo(()=>{const Y=Object.values(Nr).filter(ae=>ae!==Nr.UNCATEGORIZED),ge=(t||[]).map(ae=>ae.className);return Array.from(new Set(["All Classes",...Y,...ge]))},[t]),$=F.useMemo(()=>r.filter(Y=>{const ge=b==="All Classes"||Y.classType===b,ae=S==="All Categories"||Y.category===S;return ge&&ae}),[r,b,S]),z=F.useMemo(()=>{const Y={};return $.forEach(ge=>{const ae=b==="All Classes"?`${ge.classType.toUpperCase()}  ${ge.unit||"Unassigned"}`:ge.unit||"Unassigned";Y[ae]||(Y[ae]=[]),Y[ae].push(ge)}),Object.keys(Y).sort().reduce((ge,ae)=>(ge[ae]=Y[ae],ge),{})},[$,b]),Q=async Y=>{if(Y.preventDefault(),A.size===0){a.error("Select a target class.");return}y(!0);try{f&&R.id?await n({...R,classType:Array.from(A)[0]}):await Promise.all(Array.from(A).map(ge=>n({...R,classType:ge}))),d(!1),m(!1)}catch(ge){console.error(ge)}finally{y(!1)}},ee=Y=>{D(Y),k(new Set([Y.classType])),m(!0),d(!0)},K=async Y=>{const ge=Y.status===Jo.ACTIVE?Jo.ARCHIVED:Jo.ACTIVE;await $e.updateAssignmentStatus(Y.id,ge)},Z=F.useMemo(()=>[...Array.isArray(e)?e:[]].sort((ge,ae)=>{const X=new Date(ge.submittedAt||0).getTime();return new Date(ae.submittedAt||0).getTime()-X}),[e]);return u.jsxs("div",{className:"space-y-8 pb-12",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Admin System"}),u.jsx("p",{className:"text-gray-400",children:"Resource deployment and operational oversight."})]}),u.jsxs("button",{onClick:()=>{D({title:"",description:"",status:Jo.ACTIVE,unit:"Unit 1: Overview",category:"Textbook",htmlContent:"",contentUrl:"",resources:[]}),m(!1),d(!0)},className:"bg-purple-600 hover:bg-purple-500 text-white px-8 py-3 rounded-2xl shadow-xl transition-all font-bold flex items-center gap-2",children:[u.jsx(Sl,{className:"w-5 h-5"})," Deploy Resource"]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[u.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-6",children:[u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl p-4 flex flex-wrap items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("select",{value:b,onChange:Y=>T(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:M.map(Y=>u.jsx("option",{value:Y,children:Y},Y))}),u.jsx(Vs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:S,onChange:Y=>w(Y.target.value),className:"bg-black/20 text-white text-xs font-bold py-2 pl-3 pr-8 rounded-lg border border-white/10 appearance-none focus:outline-none",children:[u.jsx("option",{value:"All Categories",children:"All Categories"}),kI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))]}),u.jsx(Vs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-500 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[600px] overflow-y-auto custom-scrollbar text-white",children:Object.entries(z).map(([Y,ge])=>u.jsxs("div",{className:"mb-6 last:mb-0",children:[u.jsxs("div",{className:"w-full flex items-center gap-3 py-2 mb-2 group",children:[u.jsx("button",{onClick:()=>{const ae=new Set(E);ae.has(Y)?ae.delete(Y):ae.add(Y),I(ae)},className:"text-gray-400 hover:text-white transition",children:E.has(Y)?u.jsx(Vs,{className:"w-4 h-4"}):u.jsx(o0,{className:"w-4 h-4"})}),u.jsx("h3",{className:"text-[11px] font-bold uppercase tracking-[0.2em] text-gray-500 truncate",children:Y}),u.jsx("div",{className:"h-[1px] flex-1 bg-white/5 group-hover:bg-white/10 transition"})]}),!E.has(Y)&&u.jsx("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2 duration-300",children:ge.map(ae=>u.jsxs("div",{className:`p-4 rounded-2xl border transition group flex justify-between items-center ${ae.status===Jo.ARCHIVED?"bg-white/2 border-white/5 opacity-60":"bg-white/5 border-white/10 hover:border-purple-500/50"}`,children:[u.jsxs("div",{className:"flex items-center gap-4 min-w-0 pr-4 flex-1",children:[u.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shrink-0 ${ae.status===Jo.ACTIVE?"bg-purple-500/20 text-purple-400":"bg-gray-500/20 text-gray-500"}`,children:Wle[ae.category||"Supplemental"]}),u.jsxs("div",{className:"truncate flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate flex-1",children:ae.title}),u.jsx("span",{className:"text-[9px] text-gray-500 uppercase font-mono px-2 py-0.5 bg-black/40 rounded border border-white/5 flex-shrink-0 whitespace-nowrap",children:ae.classType})]}),u.jsx("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:ae.description})]})]}),u.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition duration-200 shrink-0",children:[u.jsx("button",{onClick:()=>B(ae),className:"p-2 text-purple-400 hover:bg-purple-500/20 rounded-lg transition",title:"Question Bank",children:u.jsx(ph,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i==null?void 0:i(ae.id),className:"p-2 text-indigo-400 hover:bg-indigo-500/20 rounded-lg transition",children:u.jsx(jae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>ee(ae),className:"p-2 text-gray-300 hover:bg-white/10 rounded-lg transition",children:u.jsx(Pae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>K(ae),className:"p-2 text-yellow-400 hover:bg-yellow-500/20 rounded-lg transition",children:ae.status===Jo.ACTIVE?u.jsx(aae,{className:"w-4 h-4"}):u.jsx(bp,{className:"w-4 h-4"})}),u.jsx("button",{onClick:async()=>{await s({message:"Delete this resource permanently?",confirmLabel:"Delete"})&&await $e.deleteAssignment(ae.id)},className:"p-2 text-red-400 hover:bg-red-500/20 rounded-lg transition",title:"Delete resource","aria-label":"Delete resource",children:u.jsx(Di,{className:"w-4 h-4"})})]})]},ae.id))})]},Y))})]}),u.jsx("div",{className:"lg:col-span-4",children:u.jsxs("div",{className:"bg-white/5 backdrop-blur-md border border-white/10 rounded-3xl p-6 h-[710px] flex flex-col",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2 mb-6",children:[u.jsx(hs,{className:"w-4 h-4 text-blue-400"})," Engagement Log"]}),u.jsxs("div",{className:"space-y-4 overflow-y-auto pr-2 custom-scrollbar flex-1",children:[Z.length===0&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-12",children:[u.jsx(hs,{className:"w-10 h-10 text-gray-700 mb-3"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"No engagement data yet"}),u.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Activity will appear here as students complete resources."})]}),Z.map(Y=>u.jsxs("div",{className:"bg-black/40 border border-white/5 p-4 rounded-2xl hover:bg-black/60 transition group",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-gray-200 text-xs block truncate",children:Y.userName}),u.jsx("span",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-tight line-clamp-1",children:Y.assignmentTitle})]}),u.jsxs("span",{className:"text-[10px] font-bold text-blue-400 bg-blue-900/30 px-2 py-1 rounded-full",children:[Math.round(Y.score)," XP"]})]}),u.jsxs("div",{className:"text-[9px] text-gray-600 mt-2 border-t border-white/5 pt-2 flex justify-between",children:[u.jsxs("span",{children:[Math.round(Y.metrics.engagementTime/60),"m active"]}),u.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition",children:new Date(Y.submittedAt||"").toLocaleDateString()})]})]},Y.id))]})]})})]}),u.jsx(Va,{isOpen:c,onClose:()=>d(!1),title:f?"Modify Resource":"Configure Deployment",maxWidth:"max-w-3xl",children:u.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Title"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.title,onChange:Y=>D({...R,title:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Unit"}),u.jsx("input",{required:!0,className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",value:R.unit,onChange:Y=>D({...R,unit:Y.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Category"}),u.jsx("select",{value:R.category,onChange:Y=>D({...R,category:Y.target.value}),className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500",children:kI.map(Y=>u.jsx("option",{value:Y,children:Y},Y))})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Classes"}),u.jsx("div",{className:"flex flex-wrap gap-2",children:M.filter(Y=>Y!=="All Classes").map(Y=>u.jsx("button",{type:"button",onClick:()=>{const ge=new Set(A);ge.has(Y)?ge.size>1&&ge.delete(Y):ge.add(Y),k(ge)},className:`px-4 py-2 rounded-xl border text-xs font-bold transition ${A.has(Y)?"bg-purple-600 border-purple-600 text-white":"bg-black/30 border-white/10 text-gray-400"}`,children:Y},Y))})]}),u.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-5 rounded-2xl",children:[u.jsx("label",{className:"block text-sm font-bold text-purple-300 mb-2",children:"HTML Interactive Upload"}),u.jsx("input",{type:"file",accept:".html,.htm",className:"w-full text-sm file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:bg-purple-600 file:text-white",onChange:async Y=>{var ge;if((ge=Y.target.files)!=null&&ge[0]){U(!0);try{const ae=await $e.uploadHtmlResource(Y.target.files[0]);D({...R,contentUrl:ae}),a.success("File uploaded!")}catch(ae){a.error("Upload failed: "+(ae instanceof Error?ae.message:"Unknown error"))}finally{U(!1)}}}}),N&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-purple-300 text-xs",children:[u.jsx(Ua,{className:"w-4 h-4 animate-spin"})," Uploading..."]}),!N&&R.contentUrl&&u.jsxs("div",{className:"flex items-center gap-2 mt-2 text-emerald-400 text-xs",children:[u.jsx(Uv,{className:"w-4 h-4"})," Resource uploaded"]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:["Description ",u.jsx("span",{className:"text-gray-600",children:"(optional)"})]}),u.jsx("textarea",{className:"w-full p-3 border border-white/10 rounded-xl bg-black/30 text-white placeholder-gray-500 resize-none h-20",placeholder:"Brief description for AI prompts and student context...",value:R.description,onChange:Y=>D({...R,description:Y.target.value})})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-purple-600 text-white py-4 rounded-2xl font-bold shadow-xl flex items-center justify-center gap-2",children:p?u.jsx(Ua,{className:"w-5 h-5 animate-spin"}):"Commit Deployment"})]})}),C&&u.jsx(Kle,{assignment:C,isOpen:!!C,onClose:()=>B(null)})]})},Qle=["HEAD","CHEST","HANDS","FEET","BELT","AMULET","RING1","RING2"],Yle=({user:r,onClose:e,onDeleteItem:t,onUnequipItem:n,onGrantFlux:i})=>{var a,s,c,d,f,m;return r?u.jsx(Va,{isOpen:!!r,onClose:e,title:"Inventory Inspection",maxWidth:"max-w-2xl",children:u.jsxs("div",{className:"space-y-6 text-gray-100 p-2",children:[u.jsxs("div",{className:"flex items-center justify-between bg-black/40 p-4 rounded-2xl border border-white/5",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("img",{src:r.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:r.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:r.name}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Level ",((a=r.gamification)==null?void 0:a.level)||1]})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-cyan-400",children:((s=r.gamification)==null?void 0:s.currency)||0})]}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:()=>i(r,100),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20",title:"+100 Flux",children:u.jsx(Sl,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>i(r,-100),className:"p-2 bg-red-500/10 text-red-400 rounded-lg hover:bg-red-500/20",title:"-100 Flux",children:u.jsx(ms,{className:"w-4 h-4"})})]})]})]}),u.jsxs("div",{className:"border-b border-white/5 pb-6",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Active Loadout"}),u.jsx("div",{className:"flex gap-2 flex-wrap",children:Qle.map(p=>{var b,T;const y=(T=(b=r.gamification)==null?void 0:b.equipped)==null?void 0:T[p];return u.jsx("div",{className:`w-16 h-16 rounded-xl border flex items-center justify-center relative group ${y?zr(y.rarity).border+" "+zr(y.rarity).bg:"border-white/10 bg-black/20"}`,children:y?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-[8px] text-center px-1 font-bold truncate w-full text-white/90",children:y.name}),u.jsx("button",{onClick:()=>n(r,p),className:"absolute top-[-5px] right-[-5px] bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition shadow-md",children:u.jsx(ms,{className:"w-3 h-3"})})]}):u.jsx("span",{className:"text-[8px] text-gray-600",children:p})},p)})})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-3",children:"Stored Gear"}),u.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[(d=(c=r.gamification)==null?void 0:c.inventory)==null?void 0:d.map((p,y)=>u.jsxs("div",{className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group p-1 bg-white/5 ${zr(p.rarity).border}`,children:[u.jsx("div",{className:`text-[8px] font-bold ${zr(p.rarity).text} text-center truncate w-full`,children:p.name}),u.jsx("div",{className:"text-[8px] text-gray-500",children:p.slot}),u.jsx("div",{className:"absolute inset-0 bg-black/80 flex items-center justify-center opacity-0 group-hover:opacity-100 transition rounded-xl",children:u.jsx("button",{onClick:()=>t(r,p),className:"p-2 text-red-400 hover:text-red-200",children:u.jsx(Di,{className:"w-4 h-4"})})})]},y)),(((m=(f=r.gamification)==null?void 0:f.inventory)==null?void 0:m.length)||0)===0&&u.jsx("div",{className:"col-span-6 text-center py-8 text-gray-500 italic",children:"Inventory Empty"})]})]})]})}):null},Zle=[10,50,100,-10,-50,-100],Jle=({user:r,onClose:e,onAdjust:t})=>{var s;const[n,i]=F.useState(50);if(!r)return null;const a=()=>{t(r,n),i(50)};return u.jsx(Va,{isOpen:!!r,onClose:e,title:"Manual XP Adjustment",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center gap-4 bg-black/20 p-4 rounded-2xl border border-white/5",children:[u.jsx("img",{src:r.avatarUrl,className:"w-14 h-14 rounded-2xl border border-white/10",alt:r.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-white text-lg",children:r.name}),u.jsx("p",{className:"text-xs text-gray-500",children:r.email}),u.jsxs("div",{className:"text-[10px] font-black text-purple-400 mt-1 uppercase tracking-tighter",children:["Current: ",((s=r.gamification)==null?void 0:s.xp)||0," XP"]})]})]}),u.jsx("div",{className:"grid grid-cols-3 gap-2",children:Zle.map(c=>u.jsx("button",{onClick:()=>i(c),className:`py-3 rounded-xl font-black transition-all border ${n===c?c>0?"bg-green-600 border-green-500 text-white":"bg-red-600 border-red-500 text-white":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}`,children:c>0?`+${c}`:c},c))}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-1",children:"Precise Adjustment"}),u.jsx("input",{type:"number",className:"w-full bg-black/40 border border-white/10 rounded-xl py-4 px-4 text-center text-2xl font-black text-white focus:outline-none focus:border-purple-500/50",value:n,onChange:c=>i(parseInt(c.target.value)||0)})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:e,className:"flex-1 py-4 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-2xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:a,className:"flex-1 py-4 bg-purple-600 text-white font-bold rounded-2xl hover:bg-purple-500 transition shadow-xl shadow-purple-900/20",children:"Apply Protocol"})]})]})})},ece=({deployments:r,onResolveQuest:e,onRollForSalvation:t})=>u.jsxs("div",{className:"space-y-4",children:[u.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest mb-4 px-2",children:"Active Field Deployments"}),r.length===0&&u.jsx("div",{className:"text-gray-500 italic text-center py-20 bg-black/20 rounded-3xl border border-white/5",children:"No active agents in the field."}),r.map((n,i)=>{const a=n.quest.type==="CUSTOM";return u.jsxs("div",{className:"bg-black/30 border border-white/10 rounded-2xl p-5 flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-purple-500/30 transition-all",children:[u.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:n.user.avatarUrl,className:"w-12 h-12 rounded-xl border border-white/10 shadow-lg",alt:n.user.name}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full shadow-lg"})]}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("div",{className:"font-bold text-white text-base truncate",children:n.user.name}),u.jsxs("div",{className:"text-[10px] text-purple-400 font-black uppercase tracking-tighter flex items-center gap-1.5",children:[u.jsx(xo,{className:"w-3 h-3"}),n.quest.title]})]})]}),u.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-end gap-6 w-full md:w-auto",children:[u.jsxs("div",{className:"text-center md:text-right",children:[u.jsx("div",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-500 mb-1",children:"Status"}),u.jsx("div",{className:`text-xs font-black px-2 py-0.5 rounded border ${n.status==="DEPLOYED"?"text-yellow-400 bg-yellow-500/10 border-yellow-500/20":"text-gray-300 bg-white/5 border-white/10"}`,children:n.status})]}),n.status==="DEPLOYED"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"text-center px-4 border-l border-white/5",children:[u.jsx("div",{className:"text-[9px] font-bold text-gray-500 uppercase tracking-widest mb-1",children:a?"Manual Review":"Auto-Check"}),u.jsx("div",{className:`font-black text-sm tracking-tighter ${n.roll===100?"text-green-400":"text-orange-400"}`,children:a?"PENDING_HQ_SIG":n.roll===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[!a&&n.roll===0&&u.jsx("button",{onClick:()=>t(n),className:"p-2.5 bg-purple-600/20 text-purple-400 border border-purple-500/30 rounded-xl hover:bg-purple-600 hover:text-white transition shadow-lg shadow-purple-900/20 group/btn",title:"Initiate Salvation Protocol (Die Roll)",children:u.jsx(fae,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})}),u.jsx("div",{className:"h-8 w-px bg-white/5 mx-2"}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!0,n.user.classType),className:"p-2.5 bg-green-600/20 text-green-400 border border-green-500/30 rounded-xl hover:bg-green-600 hover:text-white transition shadow-lg shadow-green-900/20",title:"Approve Submission",children:u.jsx(Nx,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>e(n.user.id,n.quest,!1,n.user.classType),className:"p-2.5 bg-red-600/20 text-red-400 border border-red-500/30 rounded-xl hover:bg-red-600 hover:text-white transition shadow-lg shadow-red-900/20",title:"Reject Submission",children:u.jsx(ms,{className:"w-5 h-5"})})]})]})]})]},i)})]}),CI={title:"",description:"",xpReward:250,fluxReward:50,type:"ENGAGEMENT",lootRarity:"",startsAt:"",durationHours:0,techReq:0,focusReq:0,analysisReq:0,charismaReq:0,dieSides:20,consequence:"",isGroup:!1},tce=({isOpen:r,onClose:e,form:t,setForm:n,onSubmit:i,isSubmitting:a})=>u.jsx(Va,{isOpen:r,onClose:e,title:"Issue New Mission Objective",children:u.jsxs("form",{onSubmit:i,className:"space-y-4 text-gray-200 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Mission Codename"}),u.jsx("input",{value:t.title,onChange:s=>n({...t,title:s.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold placeholder-gray-600 focus:border-purple-500 focus:outline-none",placeholder:"e.g. Operation Lab Rat"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Briefing"}),u.jsx("textarea",{value:t.description,onChange:s=>n({...t,description:s.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white placeholder-gray-600 resize-none h-20 focus:border-purple-500 focus:outline-none",placeholder:"Brief the operatives on their goal..."})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-3 bg-green-900/20 p-3 rounded-xl border border-green-500/30",children:[u.jsx("div",{className:"col-span-3 text-[10px] font-bold text-green-400 uppercase",children:"Mission Bounties"}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"XP"}),u.jsx("input",{type:"number",value:t.xpReward,onChange:s=>n({...t,xpReward:parseInt(s.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Flux"}),u.jsx("input",{type:"number",value:t.fluxReward,onChange:s=>n({...t,fluxReward:parseInt(s.target.value)}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[9px] text-gray-500 uppercase font-bold",children:"Loot Drop"}),u.jsxs("select",{value:t.lootRarity,onChange:s=>n({...t,lootRarity:s.target.value}),className:"w-full p-2 rounded-lg bg-black/40 border border-white/10 text-white text-sm appearance-none",children:[u.jsx("option",{value:"",children:"None"}),u.jsx("option",{value:"COMMON",children:"Common"}),u.jsx("option",{value:"UNCOMMON",children:"Uncommon"}),u.jsx("option",{value:"RARE",children:"Rare"}),u.jsx("option",{value:"UNIQUE",children:"Unique"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Objective Category"}),u.jsxs("select",{value:t.type,onChange:s=>n({...t,type:s.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none",children:[u.jsx("option",{value:"REVIEW_QUESTIONS",children:"Answer Review Questions"}),u.jsx("option",{value:"ENGAGEMENT",children:"Resource Engagement Time"}),u.jsx("option",{value:"STUDY_MATERIAL",children:"Study Material Reading"}),u.jsx("option",{value:"SKILL_CHECK",children:"Agent Skill Check"}),u.jsx("option",{value:"CUSTOM",children:"Manual Verification"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Starts At"}),u.jsx("input",{type:"datetime-local",value:t.startsAt,onChange:s=>n({...t,startsAt:s.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Duration (Hours)"}),u.jsx("input",{type:"number",value:t.durationHours,onChange:s=>n({...t,durationHours:parseInt(s.target.value)}),placeholder:"0 (Infinite)",className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold focus:border-purple-500 focus:outline-none"})]})]}),u.jsxs("div",{className:"border-t border-white/10 pt-4",children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-3 px-1",children:"Skill Check Parameters (Optional)"}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Tech",value:t.techReq||"",onChange:s=>n({...t,techReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Focus",value:t.focusReq||"",onChange:s=>n({...t,focusReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Analysis",value:t.analysisReq||"",onChange:s=>n({...t,analysisReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})}),u.jsx("div",{children:u.jsx("input",{type:"number",placeholder:"Charisma",value:t.charismaReq||"",onChange:s=>n({...t,charismaReq:parseInt(s.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-lg p-2 text-center text-sm text-white"})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Failure Die (D-X)"}),u.jsx("input",{type:"number",value:t.dieSides,onChange:s=>n({...t,dieSides:parseInt(s.target.value)}),className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Consequence Text"}),u.jsx("input",{type:"text",value:t.consequence,onChange:s=>n({...t,consequence:s.target.value}),placeholder:"e.g. detention",className:"w-full p-2 bg-black/40 border border-white/10 rounded-lg text-white"})]})]}),u.jsx("div",{className:"mt-3",children:u.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400",children:[u.jsx("input",{type:"checkbox",checked:t.isGroup,onChange:s=>n({...t,isGroup:s.target.checked}),className:"rounded bg-black/40 border-white/10 text-purple-600"})," Group Mission (Requires multiple agents)"]})})]}),u.jsx("button",{type:"submit",disabled:a,className:"w-full bg-purple-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-purple-700 disabled:opacity-50",children:a?"Transmitting...":"Broadcast Mission"})]})}),rce=({users:r})=>{const e=Li(),{confirm:t}=nu(),[n,i]=F.useState("OPERATIVES"),[a,s]=F.useState(""),[c,d]=F.useState("All Classes"),[f,m]=F.useState("All Sections"),[p,y]=F.useState("XP_DESC"),[b,T]=F.useState([]),[S,w]=F.useState([]),[E,I]=F.useState(null),[C,B]=F.useState(null),[R,D]=F.useState(!1),[A,k]=F.useState(!1),[N,U]=F.useState(CI),[M,$]=F.useState(!1),[z,Q]=F.useState([]),[ee,K]=F.useState({title:"",multiplier:2,type:"GLOBAL",targetClass:Nr.AP_PHYSICS});F.useEffect(()=>{const he=$e.subscribeToXPEvents(T),pe=$e.subscribeToQuests(w);return()=>{he(),pe()}},[]),F.useEffect(()=>{const he=[];r.forEach(pe=>{var Ye,Ke;(Ke=(Ye=pe.gamification)==null?void 0:Ye.activeQuests)==null||Ke.forEach(at=>{const tt=S.find(Gt=>Gt.id===at.questId);tt&&(at.status==="DEPLOYED"||at.status==="ACCEPTED")&&he.push({user:pe,quest:tt,status:at.status,roll:at.deploymentRoll,acceptedAt:at.acceptedAt})})}),Q(he)},[r,S,n]);const Z=F.useMemo(()=>r.filter(he=>he.role==="STUDENT"),[r]),Y=F.useMemo(()=>{const he=new Set;return Z.forEach(pe=>{pe.section&&he.add(pe.section)}),Array.from(he).sort()},[Z]),ge=F.useMemo(()=>Z.filter(he=>{var at;const pe=he.name.toLowerCase().includes(a.toLowerCase())||he.email.toLowerCase().includes(a.toLowerCase()),Ye=c==="All Classes"||he.classType===c||((at=he.enrolledClasses)==null?void 0:at.includes(c)),Ke=f==="All Sections"||he.section===f;return pe&&Ye&&Ke}).sort((he,pe)=>{var Ye,Ke,at,tt;return p==="XP_DESC"?(((Ye=pe.gamification)==null?void 0:Ye.xp)||0)-(((Ke=he.gamification)==null?void 0:Ke.xp)||0):p==="XP_ASC"?(((at=he.gamification)==null?void 0:at.xp)||0)-(((tt=pe.gamification)==null?void 0:tt.xp)||0):he.name.localeCompare(pe.name)}),[Z,a,c,f,p]),ae=async(he,pe)=>{try{await $e.adjustUserXP(he.id,pe,he.classType||Nr.UNCATEGORIZED),e.success(`${pe>0?"+":""}${pe} XP applied to ${he.name}.`)}catch{e.error("Failed to adjust XP.")}I(null)},X=async he=>{he.preventDefault(),await $e.saveXPEvent({id:Math.random().toString(36).substring(2,9),title:ee.title,multiplier:ee.multiplier,isActive:!0,type:ee.type,targetClass:ee.type==="CLASS_SPECIFIC"?ee.targetClass:void 0}),D(!1),K({title:"",multiplier:2,type:"GLOBAL",targetClass:Nr.AP_PHYSICS})},J=async he=>{he.preventDefault(),$(!0);try{const pe={};N.techReq>0&&(pe.tech=N.techReq),N.focusReq>0&&(pe.focus=N.focusReq),N.analysisReq>0&&(pe.analysis=N.analysisReq),N.charismaReq>0&&(pe.charisma=N.charismaReq);const Ye=new Date;Ye.setHours(Ye.getHours()+(N.durationHours||0));const Ke={id:Math.random().toString(36).substring(2,9),title:N.title,description:N.description,xpReward:N.xpReward,fluxReward:N.fluxReward,isActive:!0,type:N.type,statRequirements:pe,startsAt:N.startsAt?new Date(N.startsAt).toISOString():null,expiresAt:N.durationHours>0?Ye.toISOString():null,itemRewardRarity:N.lootRarity||null,rollDieSides:N.dieSides||20,consequenceText:N.consequence||null,isGroupQuest:N.isGroup};await $e.saveQuest(Ke),e.success(`Mission "${Ke.title}" deployed.`),U(CI),k(!1)}catch(pe){console.error("Failed to issue mission:",pe),e.error("Failed to issue mission.")}finally{$(!1)}},ce=async he=>{await $e.saveXPEvent({...he,isActive:!he.isActive})},Ne=async he=>{await $e.saveQuest({...he,isActive:!he.isActive})},se=async(he,pe)=>{var Ke,at;if(!await t({message:`Confiscate ${pe.name} from ${he.name}? This cannot be undone.`,confirmLabel:"Confiscate"}))return;const Ye=(((Ke=he.gamification)==null?void 0:Ke.inventory)||[]).filter(tt=>tt.id!==pe.id);await $e.adminUpdateInventory(he.id,Ye,((at=he.gamification)==null?void 0:at.currency)||0),B(tt=>tt?{...tt,gamification:{...tt.gamification,inventory:Ye}}:null)},ke=async(he,pe)=>{var Ke;if(!await t({message:`Force unequip ${pe} from ${he.name}?`,confirmLabel:"Unequip",variant:"warning"}))return;const Ye={...(Ke=he.gamification)==null?void 0:Ke.equipped};delete Ye[pe],await $e.adminUpdateEquipped(he.id,Ye),B(at=>at?{...at,gamification:{...at.gamification,equipped:Ye}}:null)},Me=async(he,pe)=>{var Ke,at;const Ye=Math.max(0,(((Ke=he.gamification)==null?void 0:Ke.currency)||0)+pe);await $e.adminUpdateInventory(he.id,((at=he.gamification)==null?void 0:at.inventory)||[],Ye),B(tt=>tt?{...tt,gamification:{...tt.gamification,currency:Ye}}:null)},ot=async(he,pe,Ye,Ke)=>{try{await $e.resolveQuest(he,pe,Ye,Ke),e.success(Ye?`Mission "${pe.title}" approved.`:`Mission "${pe.title}" rejected.`)}catch{e.error("Failed to resolve mission.")}},Ee=async he=>{const pe=he.quest.rollDieSides||20,Ye=Math.floor(Math.random()*pe)+1;e.info(`Rolled a ${Ye} on a D${pe}. ${Ye===pe?"CRITICAL SUCCESS!":"Failure confirmed."}`),await ot(he.user.id,he.quest,Ye===pe,he.user.classType)},He=({id:he,label:pe,icon:Ye})=>u.jsxs("button",{onClick:()=>i(he),className:`px-6 py-4 flex items-center gap-2 border-b-2 font-bold transition-all ${n===he?"border-purple-500 text-purple-400 bg-purple-500/5":"border-transparent text-gray-500 hover:text-gray-300"}`,children:[u.jsx(Ye,{className:"w-4 h-4"}),pe]});return u.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Gamification Command"}),u.jsx("p",{className:"text-gray-400",children:"Manage operative progression, rewards, and active engagement boosters."})]}),u.jsxs("div",{className:"flex gap-2",children:[n==="PROTOCOLS"&&u.jsxs("button",{onClick:()=>D(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-blue-900/20",children:[u.jsx(Lae,{className:"w-4 h-4"})," Deploy Protocol"]}),n==="MISSIONS"&&u.jsxs("button",{onClick:()=>k(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-xl font-bold flex items-center gap-2 transition shadow-lg shadow-purple-900/20",children:[u.jsx(lae,{className:"w-4 h-4"})," Issue Mission"]})]})]}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl overflow-hidden backdrop-blur-md",children:[u.jsxs("div",{className:"flex bg-black/20 border-b border-white/5 overflow-x-auto custom-scrollbar",children:[u.jsx(He,{id:"OPERATIVES",label:"Operatives",icon:us}),u.jsx(He,{id:"PROTOCOLS",label:"XP Protocols",icon:Vn}),u.jsx(He,{id:"MISSIONS",label:"Missions",icon:xo}),u.jsx(He,{id:"MISSION_CONTROL",label:"Mission Control",icon:Qd})]}),u.jsxs("div",{className:"p-6",children:[n==="OPERATIVES"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(yF,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),u.jsx("input",{type:"text",placeholder:"Search name, operative ID or email...",className:"w-full bg-black/40 border border-white/10 rounded-xl py-3 pl-12 pr-4 text-white focus:outline-none focus:border-purple-500/50 transition",value:a,onChange:he=>s(he.target.value)})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsx(vae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gray-500"}),u.jsxs("select",{value:c,onChange:he=>d(he.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 pl-10 pr-10 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Classes"}),Object.values(Nr).map(he=>u.jsx("option",{value:he,children:he},he))]}),u.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),Y.length>0&&u.jsxs("div",{className:"relative",children:[u.jsxs("select",{value:f,onChange:he=>m(he.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{children:"All Sections"}),Y.map(he=>u.jsx("option",{value:he,children:he},he))]}),u.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500 pointer-events-none"})]}),u.jsx("div",{className:"relative",children:u.jsxs("select",{value:p,onChange:he=>y(he.target.value),className:"bg-black/40 border border-white/10 rounded-xl py-3 px-4 text-white text-sm font-bold appearance-none focus:outline-none focus:border-purple-500/50",children:[u.jsx("option",{value:"XP_DESC",children:"Highest XP"}),u.jsx("option",{value:"XP_ASC",children:"Lowest XP"}),u.jsx("option",{value:"NAME",children:"Alphabetical"})]})})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest border-b border-white/5",children:[u.jsx("th",{className:"pb-4 pl-4",children:"Operative"}),u.jsx("th",{className:"pb-4",children:"Status"}),u.jsx("th",{className:"pb-4 text-center",children:"XP Points"}),u.jsx("th",{className:"pb-4 text-center",children:"Gear Score"}),u.jsx("th",{className:"pb-4 text-right pr-4",children:"Action"})]})}),u.jsx("tbody",{className:"divide-y divide-white/5",children:ge.map(he=>{var pe,Ye,Ke,at;return u.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[u.jsx("td",{className:"py-4 pl-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:he.avatarUrl,className:"w-10 h-10 rounded-xl border border-white/10",alt:he.name}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-gray-200",children:he.name}),u.jsx("div",{className:"text-[10px] font-mono text-gray-500 uppercase",children:((pe=he.gamification)==null?void 0:pe.codename)||"UNASSIGNED"})]})]})}),u.jsx("td",{className:"py-4",children:u.jsx("span",{className:"text-[10px] bg-purple-500/10 text-purple-400 px-2 py-1 rounded border border-purple-500/20 font-bold uppercase",children:he.classType})}),u.jsxs("td",{className:"py-4 text-center",children:[u.jsx("div",{className:"text-xl font-black text-white",children:((Ke=(Ye=he.gamification)==null?void 0:Ye.xp)==null?void 0:Ke.toLocaleString())||0}),u.jsx("div",{className:"text-[8px] text-gray-500 font-bold uppercase tracking-tighter",children:"Accumulated XP"})]}),u.jsx("td",{className:"py-4 text-center",children:u.jsx("span",{className:"text-sm font-bold text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded border border-yellow-500/20",children:kg((at=he.gamification)==null?void 0:at.equipped)})}),u.jsx("td",{className:"py-4 text-right pr-4",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>B(he),className:"p-2 bg-blue-500/10 text-blue-400 rounded-lg hover:bg-blue-500/20 transition border border-blue-500/20",title:"Inspect Inventory",children:u.jsx(Qd,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>I(he),className:"p-2 bg-green-500/10 text-green-400 rounded-lg hover:bg-green-500/20 transition border border-green-500/20",title:"Adjust XP",children:u.jsx(Sl,{className:"w-4 h-4"})})]})})]},he.id)})})]})})]}),n==="PROTOCOLS"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(he=>u.jsxs("div",{className:`p-6 rounded-3xl border transition-all relative overflow-hidden ${he.isActive?"bg-blue-600/10 border-blue-500/30 ring-1 ring-blue-500/20 shadow-lg shadow-blue-900/10":"bg-black/20 border-white/10 opacity-60"}`,children:[he.isActive&&u.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2 py-1 rounded bg-blue-500 text-white text-[9px] font-black uppercase tracking-widest animate-pulse",children:[u.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white"}),"LIVE"]}),u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${he.isActive?"bg-blue-500 text-white":"bg-gray-800 text-gray-400"}`,children:u.jsx(Vn,{className:"w-6 h-6"})}),u.jsx("button",{onClick:()=>$e.deleteXPEvent(he.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx(Di,{className:"w-4 h-4"})})]}),u.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:he.title}),u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsxs("span",{className:"text-3xl font-black text-blue-400",children:[he.multiplier,"x"]}),u.jsx("span",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest",children:"Multiplier"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5",children:[u.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase",children:he.type==="GLOBAL"?"Global Uplink":he.targetClass}),u.jsx("button",{onClick:()=>ce(he),className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${he.isActive?"bg-green-500 text-white":"bg-gray-700 text-gray-300"}`,children:he.isActive?"Active":"Offline"})]})]},he.id)),u.jsxs("button",{onClick:()=>D(!0),className:"p-6 rounded-3xl border-2 border-dashed border-white/10 hover:border-blue-500/30 hover:bg-blue-500/5 transition-all flex flex-col items-center justify-center gap-3 text-gray-500 hover:text-blue-400 min-h-[220px]",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center",children:u.jsx(Sl,{className:"w-6 h-6"})}),u.jsx("span",{className:"font-bold uppercase tracking-widest text-xs",children:"Initialize Protocol"})]})]}),n==="MISSIONS"&&u.jsx("div",{className:"space-y-4",children:S.map(he=>u.jsxs("div",{className:`p-5 rounded-2xl border flex items-center justify-between transition-all ${he.isActive?"bg-purple-600/10 border-purple-500/30":"bg-black/20 border-white/10 opacity-60"}`,children:[u.jsxs("div",{className:"flex items-center gap-5",children:[u.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${he.isActive?"bg-purple-600 text-white shadow-lg shadow-purple-900/40":"bg-gray-800 text-gray-400"}`,children:u.jsx(w0,{className:"w-7 h-7"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-lg text-white",children:he.title}),u.jsx("p",{className:"text-sm text-gray-500",children:he.description}),he.statRequirements&&u.jsx("div",{className:"flex gap-2 mt-2",children:Object.entries(he.statRequirements).map(([pe,Ye])=>u.jsxs("span",{className:"text-[9px] bg-white/10 px-2 py-0.5 rounded text-gray-300 uppercase font-mono border border-white/10",children:[Ye," ",pe]},pe))}),u.jsxs("div",{className:"flex gap-3 mt-2",children:[u.jsx("span",{className:"text-[10px] font-bold text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:he.type}),u.jsxs("span",{className:"text-[10px] font-bold text-green-400 bg-green-900/30 px-2 py-0.5 rounded border border-green-500/20",children:["+",he.xpReward," XP"]}),he.itemRewardRarity&&u.jsx("span",{className:"text-[10px] font-bold text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded border border-purple-500/20",children:"LOOT DROP"})]})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("button",{onClick:()=>Ne(he),className:`w-12 h-6 rounded-full relative transition-colors duration-200 focus:outline-none ${he.isActive?"bg-purple-600":"bg-gray-700"}`,children:u.jsx("div",{className:`absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200 ${he.isActive?"translate-x-6":""}`})}),u.jsx("span",{className:"block text-[8px] font-bold text-gray-600 uppercase mt-1 tracking-widest",children:he.isActive?"Active":"Standby"})]}),u.jsx("button",{onClick:()=>$e.deleteQuest(he.id),className:"p-2 text-gray-600 hover:text-red-400 transition",children:u.jsx(Di,{className:"w-4 h-4"})})]})]},he.id))}),n==="MISSION_CONTROL"&&u.jsx(ece,{deployments:z,onResolveQuest:ot,onRollForSalvation:Ee})]})]}),u.jsx(Yle,{user:C,onClose:()=>B(null),onDeleteItem:se,onUnequipItem:ke,onGrantFlux:Me}),u.jsx(tce,{isOpen:A,onClose:()=>k(!1),form:N,setForm:U,onSubmit:J,isSubmitting:M}),u.jsx(Va,{isOpen:R,onClose:()=>D(!1),title:"New XP Protocol Deployment",children:u.jsxs("form",{onSubmit:X,className:"space-y-4 text-gray-100 p-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Protocol Title"}),u.jsx("input",{value:ee.title,onChange:he=>K({...ee,title:he.target.value}),required:!0,className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",placeholder:"e.g. Double XP Weekend"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Multiplier"}),u.jsx("input",{type:"number",step:"0.5",value:ee.multiplier,onChange:he=>K({...ee,multiplier:parseFloat(he.target.value)}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Uplink Type"}),u.jsxs("select",{value:ee.type,onChange:he=>K({...ee,type:he.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:[u.jsx("option",{value:"GLOBAL",children:"Global Node"}),u.jsx("option",{value:"CLASS_SPECIFIC",children:"Class Sub-Node"})]})]})]}),ee.type==="CLASS_SPECIFIC"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-[10px] font-bold text-gray-400 uppercase mb-1 px-1",children:"Target Sub-Node"}),u.jsx("select",{value:ee.targetClass,onChange:he=>K({...ee,targetClass:he.target.value}),className:"w-full bg-black/40 border border-white/10 rounded-xl p-3 text-white font-bold",children:Object.values(Nr).map(he=>u.jsx("option",{value:he,children:he},he))})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white font-bold py-4 rounded-2xl shadow-xl transition-all hover:bg-blue-700",children:"Initiate Uplink"})]})}),u.jsx(Jle,{user:E,onClose:()=>I(null),onAdjust:ae})]})},nce={FORCE:{src:"/tools/force-diagram.html",label:"Free Body Diagram Builder",icon:u.jsx(mF,{className:"w-4 h-4"}),color:"green",hoverBg:"hover:bg-green-600",iconBg:"bg-green-600/20",iconText:"text-green-400"},BAR:{src:"/tools/bar-chart.html",label:"Conservation of Energy (LOL) Chart",icon:u.jsx(uF,{className:"w-4 h-4"}),color:"blue",hoverBg:"hover:bg-blue-600",iconBg:"bg-blue-600/20",iconText:"text-blue-400"},GRAPHER:{src:"/tools/grapher.html",label:"AP Physics Grapher Pro",icon:u.jsx(vF,{className:"w-4 h-4"}),color:"purple",hoverBg:"hover:bg-purple-600",iconBg:"bg-purple-600/20",iconText:"text-purple-400"}},ice=({onToggleChat:r})=>{const[e,t]=F.useState(null),[n,i]=F.useState(!1),a=c=>{e===c?t(null):(t(c),i(!1))};if(!e)return u.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-3 items-end",children:[u.jsxs("button",{onClick:()=>a("GRAPHER"),className:"bg-white/10 hover:bg-purple-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Physics Grapher",children:[u.jsx(vF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Grapher Pro"})]}),u.jsxs("button",{onClick:()=>a("BAR"),className:"bg-white/10 hover:bg-blue-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"LOL Diagrams",children:[u.jsx(uF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"LOL Charts"})]}),u.jsxs("button",{onClick:()=>a("FORCE"),className:"bg-white/10 hover:bg-green-600 text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Force Diagrams",children:[u.jsx(mF,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Force Diagram"})]}),r&&u.jsxs("button",{onClick:r,className:"bg-white/10 hover:bg-[#5865F2] text-white p-3 rounded-full shadow-lg backdrop-blur-md border border-white/20 transition-all hover:scale-110 group relative",title:"Class Chat",children:[u.jsx(yT,{className:"w-6 h-6"}),u.jsx("span",{className:"absolute right-full mr-2 bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap opacity-0 group-hover:opacity-100 transition pointer-events-none",children:"Class Comms"})]})]});const s=nce[e];return u.jsxs("div",{className:`fixed z-50 bg-[#1e1e1e] border border-white/20 shadow-2xl transition-all duration-300 overflow-hidden flex flex-col ${n?"w-64 h-12 bottom-6 right-6 rounded-xl":"inset-4 md:inset-10 rounded-2xl"}`,children:[u.jsxs("div",{className:"bg-[#2d2d2d] p-3 flex justify-between items-center border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`p-1.5 rounded-lg ${s.iconBg} ${s.iconText}`,children:s.icon}),u.jsx("span",{className:"font-bold text-white text-sm",children:s.label})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:()=>i(!n),className:"p-1.5 hover:bg-white/10 rounded-lg text-gray-400 hover:text-white transition",children:n?u.jsx(hF,{className:"w-4 h-4"}):u.jsx(Cae,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>t(null),className:"p-1.5 hover:bg-red-500/20 rounded-lg text-gray-400 hover:text-red-400 transition",children:u.jsx(ms,{className:"w-4 h-4"})})]})]}),!n&&u.jsx("div",{className:"flex-1 bg-white relative",children:u.jsx("iframe",{src:s.src,className:"w-full h-full border-none",title:s.label,sandbox:"allow-scripts allow-same-origin allow-modals allow-downloads allow-forms"})})]})},ace=["","","","","","","",""],sce=["","","","","","","","","","","","","","","","","","","","","","","","","",""],oce=({user:r,isOpen:e,onClose:t,assignments:n,classConfigs:i,onOpenResource:a})=>{var Ne;const{confirm:s}=nu(),[c,d]=F.useState([]),[f,m]=F.useState(""),[p,y]=F.useState("Main"),[b,T]=F.useState(!1),[S,w]=F.useState(!1),[E,I]=F.useState(null),[C,B]=F.useState(null),[R,D]=F.useState([]),A=F.useRef(null),k=F.useRef(null),N=F.useMemo(()=>Object.values(Nr).filter(se=>{var Ee;if(se===Nr.UNCATEGORIZED)return!1;if(r.role==="ADMIN")return!0;const ke=i.find(He=>He.className===se),Me=(Ee=r.enrolledClasses)==null?void 0:Ee.includes(se),ot=ke?ke.features.communications:!0;return Me&&ot}),[i,r.role,r.enrolledClasses]),[U,M]=F.useState(N[0]||""),$=F.useMemo(()=>p==="Resources"&&C?`res_${C}`:p==="Resources"&&!C||!U?"":`class_${U.replace(/\s+/g,"_").toLowerCase()}`,[U,p,C]),z=F.useRef(null),Q=F.useMemo(()=>n.filter(se=>se.classType===U&&se.status!=="DRAFT"),[n,U]),ee=F.useMemo(()=>c.filter(se=>{var ke;return se.isGlobalPinned||((ke=se.pinnedBy)==null?void 0:ke.includes(r.id))}),[c,r.id]),K=F.useMemo(()=>r.mutedUntil?new Date(r.mutedUntil)>new Date:!1,[r.mutedUntil]);F.useEffect(()=>{if(!e)return;let se="";if(p==="Resources"&&C?se=`res_${C}`:(p==="Main"||p==="Bookmarks")&&(se=`class_${U.replace(/\s+/g,"_").toLowerCase()}`),!se)return;T(!0);const ke=$e.subscribeToChannelMessages(se,Me=>{d(Me),T(!1)});return()=>{ke()}},[e,U,p,C]),F.useEffect(()=>{if(!e||r.role!=="ADMIN")return;const se=$e.subscribeToFlaggedMessages(ke=>{D(ke)});return()=>se()},[e,r.role]),F.useEffect(()=>{z.current&&(z.current.scrollTop=z.current.scrollHeight)},[c,b,p,C]),F.useEffect(()=>{const se=ke=>{A.current&&!A.current.contains(ke.target)&&w(!1),k.current&&!k.current.contains(ke.target)&&I(null)};return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},[]),F.useEffect(()=>{if(!e)return;const se=ke=>{ke.key==="Escape"&&t()};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[e,t]);const Z=F.useCallback(async se=>{if(se.preventDefault(),!(!f.trim()||!$)&&!K)try{await $e.sendMessage(r,f,$,U),m(""),w(!1)}catch(ke){console.error("Failed to send message:",ke)}},[f,$,K,r,U]),Y=F.useCallback(async(se,ke)=>{try{await $e.toggleReaction(se,ke,r.id),I(null)}catch(Me){console.error(Me)}},[r.id]),ge=F.useCallback(async se=>{try{await $e.togglePersonalPin(se,r.id)}catch(ke){console.error(ke)}},[r.id]),ae=F.useCallback(async(se,ke)=>{try{await $e.toggleGlobalPin(se,!ke)}catch(Me){console.error(Me)}},[]),X=async se=>{if(await s({message:"Permanently delete this message?",confirmLabel:"Delete"}))try{await $e.deleteMessage(se)}catch(ke){console.error(ke)}},J=async se=>{try{await $e.unflagMessage(se),await $e.resolveFlagByMessageId(se)}catch(ke){console.error(ke)}},ce=async se=>{if(await s({message:"Delete this flagged message?",confirmLabel:"Delete"}))try{await $e.resolveFlagByMessageId(se),await $e.deleteMessage(se)}catch(ke){console.error(ke)}};return e?u.jsxs("div",{className:"fixed bottom-0 right-0 md:bottom-6 md:right-6 w-full md:w-[420px] h-[650px] z-[60] font-sans animate-in slide-in-from-bottom-10 duration-500 shadow-2xl flex flex-col bg-black/40 backdrop-blur-xl border border-white/10 md:rounded-3xl overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 border-b border-white/5 backdrop-blur-md z-10",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[p==="Resources"&&C?u.jsx("button",{onClick:()=>B(null),className:"p-2 hover:bg-white/10 rounded-full transition text-gray-300",children:u.jsx(uae,{className:"w-5 h-5"})}):u.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg text-white shrink-0",children:u.jsx(yT,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h3",{className:"font-bold text-white text-sm truncate leading-tight",children:p==="Moderation"?"Moderation Queue":p==="Resources"?C?(Ne=Q.find(se=>se.id===C))==null?void 0:Ne.title:"Class Resources":U}),p!=="Resources"&&p!=="Moderation"&&N.length>1&&u.jsxs("div",{className:"relative group flex items-center cursor-pointer",children:[u.jsx("span",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider truncate",children:U}),u.jsx(Vs,{className:"w-3 h-3 text-gray-500 ml-1"}),u.jsx("select",{className:"absolute inset-0 opacity-0 cursor-pointer",value:U,onChange:se=>M(se.target.value),children:N.map(se=>u.jsx("option",{value:se,children:se},se))})]})]})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition text-gray-400 hover:text-white","aria-label":"Close chat",children:u.jsx(ms,{className:"w-5 h-5"})})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-16 bg-black/20 border-r border-white/5 flex flex-col items-center py-4 gap-4",children:[u.jsx("button",{onClick:()=>y("Main"),"aria-label":"Main chat",className:`p-3 rounded-2xl transition-all ${p==="Main"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(yT,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Resources"),"aria-label":"Resource channels",className:`p-3 rounded-2xl transition-all ${p==="Resources"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(zs,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>y("Bookmarks"),"aria-label":"Bookmarked messages",className:`p-3 rounded-2xl transition-all relative ${p==="Bookmarks"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:u.jsx(Ej,{className:"w-5 h-5"})}),r.role==="ADMIN"&&u.jsxs("button",{onClick:()=>y("Moderation"),"aria-label":"Moderation queue",className:`mt-auto p-3 rounded-2xl transition-all relative ${p==="Moderation"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[u.jsx(us,{className:"w-5 h-5"}),R.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center animate-pulse",children:R.length})]})]}),u.jsxs("div",{className:"flex-1 flex flex-col relative",children:[p==="Resources"&&!C&&u.jsx("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:u.jsx("div",{className:"space-y-2",children:Q.map(se=>u.jsxs("div",{onClick:()=>B(se.id),className:"group p-4 bg-white/5 hover:bg-white/10 border border-white/5 rounded-2xl transition-all cursor-pointer flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-500/10 text-indigo-400 group-hover:bg-indigo-500 group-hover:text-white transition shadow-inner",children:u.jsx(wae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"min-w-0",children:[u.jsx("h4",{className:"font-bold text-gray-200 text-sm truncate group-hover:text-white transition",children:se.title}),u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:se.unit})]})]}),u.jsx("button",{onClick:ke=>{ke.stopPropagation(),a==null||a(se.id),t()},className:"p-2 text-gray-500 hover:text-white hover:bg-white/10 rounded-lg transition",children:u.jsx(gae,{className:"w-4 h-4"})})]},se.id))})}),p==="Moderation"&&r.role==="ADMIN"&&u.jsxs("div",{className:"absolute inset-0 p-4 overflow-y-auto custom-scrollbar animate-in slide-in-from-right duration-300",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx(fs,{className:"w-4 h-4 text-red-400"}),u.jsx("span",{className:"text-sm font-bold text-red-400 uppercase tracking-widest",children:"Flagged Messages"}),u.jsxs("span",{className:"ml-auto text-xs text-gray-500",children:[R.length," item",R.length!==1?"s":""]})]}),R.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-gray-500",children:[u.jsx(us,{className:"w-10 h-10 mb-3 opacity-30"}),u.jsx("p",{className:"text-sm",children:"Queue clear  no flagged messages"})]}):u.jsx("div",{className:"space-y-3",children:R.map(se=>{var ke;return u.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-2xl",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300",children:se.senderName}),u.jsx("span",{className:"text-[10px] text-gray-500",children:new Date(se.timestamp).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),u.jsx("p",{className:"text-sm text-gray-200 mb-1",children:se.content}),se.systemNote&&u.jsx("p",{className:"text-[10px] text-red-400 mb-2 italic",children:se.systemNote}),u.jsx("div",{className:"text-[10px] text-gray-500 mb-3",children:((ke=se.channelId)==null?void 0:ke.replace("class_","").replace(/_/g," "))||"unknown channel"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>J(se.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-emerald-600/20 hover:bg-emerald-600/40 border border-emerald-500/30 text-emerald-400 rounded-xl text-xs font-bold transition",children:[u.jsx(Nx,{className:"w-3.5 h-3.5"})," Approve"]}),u.jsxs("button",{onClick:()=>ce(se.id),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 bg-red-600/20 hover:bg-red-600/40 border border-red-500/30 text-red-400 rounded-xl text-xs font-bold transition",children:[u.jsx(Di,{className:"w-3.5 h-3.5"})," Delete"]})]})]},se.id)})})]}),(p==="Main"||p==="Bookmarks"||p==="Resources"&&C)&&u.jsxs(u.Fragment,{children:[u.jsx("div",{ref:z,className:"flex-1 overflow-y-auto p-4 pt-12 space-y-6 custom-scrollbar scroll-smooth",children:(p==="Bookmarks"?ee:c).map((se,ke)=>{var Ee;const Me=se.senderId===r.id,ot=ke>0&&c[ke-1].senderId===se.senderId&&new Date(se.timestamp).getTime()-new Date(c[ke-1].timestamp).getTime()<3e5;return u.jsxs("div",{className:`group flex flex-col ${Me?"items-end":"items-start"} ${ot?"mt-1":"mt-4"}`,children:[!ot&&u.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[u.jsx("span",{className:`text-xs font-bold ${Me?"text-indigo-400":"text-gray-300"}`,children:se.senderName}),u.jsx("span",{className:"text-[10px] text-gray-600",children:new Date(se.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),se.isGlobalPinned&&u.jsx(jj,{className:"w-3 h-3 text-yellow-500 fill-current"})]}),u.jsxs("div",{className:"relative max-w-[85%]",children:[u.jsxs("div",{className:`flex items-center bg-black/80 backdrop-blur rounded-full px-2 py-1 gap-2 border border-white/10 opacity-0 group-hover:opacity-100 transition-all absolute -top-8 ${Me?"right-0":"left-0"} z-30`,children:[u.jsx("button",{onClick:()=>I(se.id),className:"p-1 hover:bg-white/10 rounded-full transition","aria-label":"Add reaction",children:u.jsx(Rj,{className:"w-3.5 h-3.5 text-yellow-400"})}),u.jsx("button",{onClick:()=>ge(se.id),className:`p-1 hover:bg-white/10 rounded-full transition ${(Ee=se.pinnedBy)!=null&&Ee.includes(r.id)?"text-purple-400":"text-gray-400"}`,"aria-label":"Bookmark message",children:u.jsx(Ej,{className:"w-3.5 h-3.5"})}),r.role==="ADMIN"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ae(se.id,!!se.isGlobalPinned),className:`p-1 hover:bg-white/10 rounded-full transition ${se.isGlobalPinned?"text-yellow-400":"text-gray-400"}`,"aria-label":"Pin for everyone",children:u.jsx(jj,{className:"w-3.5 h-3.5"})}),u.jsx("button",{onClick:()=>X(se.id),className:"p-1 hover:bg-red-500/20 text-gray-400 hover:text-red-400 rounded-full transition","aria-label":"Delete message",children:u.jsx(Di,{className:"w-3.5 h-3.5"})})]})]}),E===se.id&&u.jsx("div",{ref:k,className:`absolute z-40 bottom-full mb-2 bg-black/95 border border-white/20 rounded-xl p-1 shadow-2xl flex gap-1 animate-in zoom-in-95 ${Me?"right-0":"left-0"}`,children:ace.map(He=>u.jsx("button",{onClick:()=>Y(se.id,He),className:"p-1.5 hover:bg-white/10 rounded-lg transition text-sm",children:He},He))}),u.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed shadow-lg backdrop-blur-sm border ${Me?"bg-indigo-600/80 text-white rounded-2xl rounded-tr-sm border-indigo-500/30":`bg-white/10 text-gray-100 rounded-2xl rounded-tl-sm border-white/5 ${se.isFlagged?"border-red-500/50 bg-red-900/20":""}`} ${se.isGlobalPinned?"ring-1 ring-yellow-500/50 bg-yellow-900/10":""}`,children:se.content}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1 justify-end",children:se.reactions&&Object.entries(se.reactions).map(([He,he])=>{const pe=he;return pe.length>0&&u.jsxs("button",{onClick:()=>Y(se.id,He),className:`text-[10px] px-1.5 py-0.5 rounded-full border transition ${pe.includes(r.id)?"bg-indigo-500/30 border-indigo-500/50 text-white":"bg-black/30 border-white/5 text-gray-400 hover:bg-white/10"}`,children:[He," ",pe.length]},He)})})]})]},se.id)})}),u.jsx("div",{className:"p-4 bg-black/20 backdrop-blur-md border-t border-white/5",children:u.jsxs("form",{onSubmit:Z,className:"relative flex items-center gap-2",children:[S&&u.jsx("div",{ref:A,className:"absolute bottom-full left-0 mb-4 bg-[#1a1b1e] border border-white/10 rounded-2xl p-3 shadow-2xl grid grid-cols-6 gap-2 w-64 animate-in slide-in-from-bottom-2 z-50",children:sce.map(se=>u.jsx("button",{type:"button",onClick:()=>m(ke=>ke+se),className:"p-2 hover:bg-white/10 rounded-lg text-xl transition",children:se},se))}),u.jsx("button",{type:"button",onClick:()=>w(!S),className:"p-3 text-gray-400 hover:text-yellow-400 hover:bg-white/5 rounded-xl transition","aria-label":"Open emoji picker",children:u.jsx(Rj,{className:"w-5 h-5"})}),u.jsx("input",{type:"text",value:f,onChange:se=>m(se.target.value),placeholder:K?"Transmission Disabled":"Type message...",disabled:!$||K,className:"flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-indigo-500/50 focus:bg-white/10 transition"}),u.jsx("button",{type:"submit",disabled:!$||K||!f.trim(),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl shadow-lg transition","aria-label":"Send message",children:u.jsx(Bae,{className:"w-5 h-5"})})]})})]})]})]})]}):null};function Aq(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=Aq(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function zt(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=Aq(r))&&(n&&(n+=" "),n+=e);return n}var b5,jI;function _a(){if(jI)return b5;jI=1;var r=Array.isArray;return b5=r,b5}var x5,II;function Eq(){if(II)return x5;II=1;var r=typeof dy=="object"&&dy&&dy.Object===Object&&dy;return x5=r,x5}var w5,RI;function No(){if(RI)return w5;RI=1;var r=Eq(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return w5=t,w5}var _5,MI;function Cg(){if(MI)return _5;MI=1;var r=No(),e=r.Symbol;return _5=e,_5}var S5,PI;function lce(){if(PI)return S5;PI=1;var r=Cg(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(s){var c=t.call(s,i),d=s[i];try{s[i]=void 0;var f=!0}catch{}var m=n.call(s);return f&&(c?s[i]=d:delete s[i]),m}return S5=a,S5}var T5,DI;function cce(){if(DI)return T5;DI=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return T5=t,T5}var A5,LI;function Ml(){if(LI)return A5;LI=1;var r=Cg(),e=lce(),t=cce(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function s(c){return c==null?c===void 0?i:n:a&&a in Object(c)?e(c):t(c)}return A5=s,A5}var E5,BI;function Pl(){if(BI)return E5;BI=1;function r(e){return e!=null&&typeof e=="object"}return E5=r,E5}var N5,UI;function tf(){if(UI)return N5;UI=1;var r=Ml(),e=Pl(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return N5=n,N5}var O5,zI;function X8(){if(zI)return O5;zI=1;var r=_a(),e=tf(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){if(r(a))return!1;var c=typeof a;return c=="number"||c=="symbol"||c=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||s!=null&&a in Object(s)}return O5=i,O5}var k5,VI;function iu(){if(VI)return k5;VI=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return k5=r,k5}var C5,$I;function Q8(){if($I)return C5;$I=1;var r=Ml(),e=iu(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function s(c){if(!e(c))return!1;var d=r(c);return d==n||d==i||d==t||d==a}return C5=s,C5}var j5,FI;function uce(){if(FI)return j5;FI=1;var r=No(),e=r["__core-js_shared__"];return j5=e,j5}var I5,qI;function dce(){if(qI)return I5;qI=1;var r=uce(),e=(function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function t(n){return!!e&&e in n}return I5=t,I5}var R5,HI;function Nq(){if(HI)return R5;HI=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return R5=t,R5}var M5,GI;function hce(){if(GI)return M5;GI=1;var r=Q8(),e=dce(),t=iu(),n=Nq(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,d=s.toString,f=c.hasOwnProperty,m=RegExp("^"+d.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(y){if(!t(y)||e(y))return!1;var b=r(y)?m:a;return b.test(n(y))}return M5=p,M5}var P5,KI;function fce(){if(KI)return P5;KI=1;function r(e,t){return e==null?void 0:e[t]}return P5=r,P5}var D5,WI;function P0(){if(WI)return D5;WI=1;var r=hce(),e=fce();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return D5=t,D5}var L5,XI;function Ux(){if(XI)return L5;XI=1;var r=P0(),e=r(Object,"create");return L5=e,L5}var B5,QI;function mce(){if(QI)return B5;QI=1;var r=Ux();function e(){this.__data__=r?r(null):{},this.size=0}return B5=e,B5}var U5,YI;function pce(){if(YI)return U5;YI=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return U5=r,U5}var z5,ZI;function gce(){if(ZI)return z5;ZI=1;var r=Ux(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var s=this.__data__;if(r){var c=s[a];return c===e?void 0:c}return n.call(s,a)?s[a]:void 0}return z5=i,z5}var V5,JI;function yce(){if(JI)return V5;JI=1;var r=Ux(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return V5=n,V5}var $5,eR;function vce(){if(eR)return $5;eR=1;var r=Ux(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return $5=t,$5}var F5,tR;function bce(){if(tR)return F5;tR=1;var r=mce(),e=pce(),t=gce(),n=yce(),i=vce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,F5=a,F5}var q5,rR;function xce(){if(rR)return q5;rR=1;function r(){this.__data__=[],this.size=0}return q5=r,q5}var H5,nR;function Y8(){if(nR)return H5;nR=1;function r(e,t){return e===t||e!==e&&t!==t}return H5=r,H5}var G5,iR;function zx(){if(iR)return G5;iR=1;var r=Y8();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return G5=e,G5}var K5,aR;function wce(){if(aR)return K5;aR=1;var r=zx(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,s=r(a,i);if(s<0)return!1;var c=a.length-1;return s==c?a.pop():t.call(a,s,1),--this.size,!0}return K5=n,K5}var W5,sR;function _ce(){if(sR)return W5;sR=1;var r=zx();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return W5=e,W5}var X5,oR;function Sce(){if(oR)return X5;oR=1;var r=zx();function e(t){return r(this.__data__,t)>-1}return X5=e,X5}var Q5,lR;function Tce(){if(lR)return Q5;lR=1;var r=zx();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return Q5=e,Q5}var Y5,cR;function Vx(){if(cR)return Y5;cR=1;var r=xce(),e=wce(),t=_ce(),n=Sce(),i=Tce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Y5=a,Y5}var Z5,uR;function Z8(){if(uR)return Z5;uR=1;var r=P0(),e=No(),t=r(e,"Map");return Z5=t,Z5}var J5,dR;function Ace(){if(dR)return J5;dR=1;var r=bce(),e=Vx(),t=Z8();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return J5=n,J5}var e3,hR;function Ece(){if(hR)return e3;hR=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return e3=r,e3}var t3,fR;function $x(){if(fR)return t3;fR=1;var r=Ece();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return t3=e,t3}var r3,mR;function Nce(){if(mR)return r3;mR=1;var r=$x();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return r3=e,r3}var n3,pR;function Oce(){if(pR)return n3;pR=1;var r=$x();function e(t){return r(this,t).get(t)}return n3=e,n3}var i3,gR;function kce(){if(gR)return i3;gR=1;var r=$x();function e(t){return r(this,t).has(t)}return i3=e,i3}var a3,yR;function Cce(){if(yR)return a3;yR=1;var r=$x();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return a3=e,a3}var s3,vR;function J8(){if(vR)return s3;vR=1;var r=Ace(),e=Nce(),t=Oce(),n=kce(),i=Cce();function a(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var f=s[c];this.set(f[0],f[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,s3=a,s3}var o3,bR;function Oq(){if(bR)return o3;bR=1;var r=J8(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var s=arguments,c=i?i.apply(this,s):s[0],d=a.cache;if(d.has(c))return d.get(c);var f=n.apply(this,s);return a.cache=d.set(c,f)||d,f};return a.cache=new(t.Cache||r),a}return t.Cache=r,o3=t,o3}var l3,xR;function jce(){if(xR)return l3;xR=1;var r=Oq(),e=500;function t(n){var i=r(n,function(s){return a.size===e&&a.clear(),s}),a=i.cache;return i}return l3=t,l3}var c3,wR;function Ice(){if(wR)return c3;wR=1;var r=jce(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(s,c,d,f){a.push(d?f.replace(t,"$1"):c||s)}),a});return c3=n,c3}var u3,_R;function eE(){if(_R)return u3;_R=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return u3=r,u3}var d3,SR;function Rce(){if(SR)return d3;SR=1;var r=Cg(),e=eE(),t=_a(),n=tf(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function s(c){if(typeof c=="string")return c;if(t(c))return e(c,s)+"";if(n(c))return a?a.call(c):"";var d=c+"";return d=="0"&&1/c==-1/0?"-0":d}return d3=s,d3}var h3,TR;function kq(){if(TR)return h3;TR=1;var r=Rce();function e(t){return t==null?"":r(t)}return h3=e,h3}var f3,AR;function Cq(){if(AR)return f3;AR=1;var r=_a(),e=X8(),t=Ice(),n=kq();function i(a,s){return r(a)?a:e(a,s)?[a]:t(n(a))}return f3=i,f3}var m3,ER;function Fx(){if(ER)return m3;ER=1;var r=tf();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return m3=e,m3}var p3,NR;function tE(){if(NR)return p3;NR=1;var r=Cq(),e=Fx();function t(n,i){i=r(i,n);for(var a=0,s=i.length;n!=null&&a<s;)n=n[e(i[a++])];return a&&a==s?n:void 0}return p3=t,p3}var g3,OR;function jq(){if(OR)return g3;OR=1;var r=tE();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return g3=e,g3}var Mce=jq();const ds=mr(Mce);var y3,kR;function Pce(){if(kR)return y3;kR=1;function r(e){return e==null}return y3=r,y3}var Dce=Pce();const Lt=mr(Dce);var v3,CR;function Lce(){if(CR)return v3;CR=1;var r=Ml(),e=_a(),t=Pl(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&r(a)==n}return v3=i,v3}var Bce=Lce();const _0=mr(Bce);var Uce=Q8();const It=mr(Uce);var zce=iu();const rf=mr(zce);var b3={exports:{}},yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jR;function Vce(){if(jR)return yr;jR=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),T;T=Symbol.for("react.module.reference");function S(w){if(typeof w=="object"&&w!==null){var E=w.$$typeof;switch(E){case r:switch(w=w.type,w){case t:case i:case n:case f:case m:return w;default:switch(w=w&&w.$$typeof,w){case c:case s:case d:case y:case p:case a:return w;default:return E}}case e:return E}}}return yr.ContextConsumer=s,yr.ContextProvider=a,yr.Element=r,yr.ForwardRef=d,yr.Fragment=t,yr.Lazy=y,yr.Memo=p,yr.Portal=e,yr.Profiler=i,yr.StrictMode=n,yr.Suspense=f,yr.SuspenseList=m,yr.isAsyncMode=function(){return!1},yr.isConcurrentMode=function(){return!1},yr.isContextConsumer=function(w){return S(w)===s},yr.isContextProvider=function(w){return S(w)===a},yr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===r},yr.isForwardRef=function(w){return S(w)===d},yr.isFragment=function(w){return S(w)===t},yr.isLazy=function(w){return S(w)===y},yr.isMemo=function(w){return S(w)===p},yr.isPortal=function(w){return S(w)===e},yr.isProfiler=function(w){return S(w)===i},yr.isStrictMode=function(w){return S(w)===n},yr.isSuspense=function(w){return S(w)===f},yr.isSuspenseList=function(w){return S(w)===m},yr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===t||w===i||w===n||w===f||w===m||w===b||typeof w=="object"&&w!==null&&(w.$$typeof===y||w.$$typeof===p||w.$$typeof===a||w.$$typeof===s||w.$$typeof===d||w.$$typeof===T||w.getModuleId!==void 0)},yr.typeOf=S,yr}var IR;function $ce(){return IR||(IR=1,b3.exports=Vce()),b3.exports}var Fce=$ce(),x3,RR;function Iq(){if(RR)return x3;RR=1;var r=Ml(),e=Pl(),t="[object Number]";function n(i){return typeof i=="number"||e(i)&&r(i)==t}return x3=n,x3}var w3,MR;function qce(){if(MR)return w3;MR=1;var r=Iq();function e(t){return r(t)&&t!=+t}return w3=e,w3}var Hce=qce();const jg=mr(Hce);var Gce=Iq();const Kce=mr(Gce);var Ps=function(e){return e===0?0:e>0?1:-1},Yu=function(e){return _0(e)&&e.indexOf("%")===e.length-1},et=function(e){return Kce(e)&&!jg(e)},Wce=function(e){return Lt(e)},Xn=function(e){return et(e)||_0(e)},Xce=0,Ig=function(e){var t=++Xce;return"".concat(e||"").concat(t)},Ds=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(e)&&!_0(e))return n;var a;if(Yu(e)){var s=e.indexOf("%");a=t*parseFloat(e.slice(0,s))/100}else a=+e;return jg(a)&&(a=n),i&&a>t&&(a=t),a},kc=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},Qce=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},i=0;i<t;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},pa=function(e,t){return et(e)&&et(t)?function(n){return e+n*(t-e)}:function(){return t}};function Wv(r,e,t){return!r||!r.length?null:r.find(function(n){return n&&(typeof e=="function"?e(n):ds(n,e))===t})}var Yce=function(e){if(!e||!e.length)return null;for(var t=e.length,n=0,i=0,a=0,s=0,c=1/0,d=-1/0,f=0,m=0,p=0;p<t;p++)f=e[p].cx||0,m=e[p].cy||0,n+=f,i+=m,a+=f*m,s+=f*f,c=Math.min(c,f),d=Math.max(d,f);var y=t*s!==n*n?(t*a-n*i)/(t*s-n*n):0;return{xmin:c,xmax:d,a:y,b:(i-y*n)/t}},Zce=function(e,t){return et(e)&&et(t)?e-t:_0(e)&&_0(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function Zd(r,e){for(var t in r)if({}.hasOwnProperty.call(r,t)&&(!{}.hasOwnProperty.call(e,t)||r[t]!==e[t]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(r,n))return!1;return!0}function CT(r){"@babel/helpers - typeof";return CT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CT(r)}var Jce=["viewBox","children"],eue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PR=["points","pathLength"],_3={svg:Jce,polygon:PR,polyline:PR},rE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xv=function(e,t){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(F.isValidElement(e)&&(n=e.props),!rf(n))return null;var i={};return Object.keys(n).forEach(function(a){rE.includes(a)&&(i[a]=t||function(s){return n[a](n,s)})}),i},tue=function(e,t,n){return function(i){return e(t,n,i),null}},S0=function(e,t,n){if(!rf(e)||CT(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];rE.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=tue(s,t,n))}),i},rue=["children"],nue=["children"];function DR(r,e){if(r==null)return{};var t=iue(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function iue(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var LR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},pl=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},BR=null,S3=null,nE=function r(e){if(e===BR&&Array.isArray(S3))return S3;var t=[];return F.Children.forEach(e,function(n){Lt(n)||(Fce.isFragment(n)?t=t.concat(r(n.props.children)):t.push(n))}),S3=t,BR=e,t};function Fa(r,e){var t=[],n=[];return Array.isArray(e)?n=e.map(function(i){return pl(i)}):n=[pl(e)],nE(r).forEach(function(i){var a=ds(i,"type.displayName")||ds(i,"type.name");n.indexOf(a)!==-1&&t.push(i)}),t}function Ma(r,e){var t=Fa(r,e);return t&&t[0]}var UR=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,i=t.height;return!(!et(n)||n<=0||!et(i)||i<=0)},aue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],sue=function(e){return e&&e.type&&_0(e.type)&&aue.indexOf(e.type)>=0},oue=function(e,t,n,i){var a,s=(a=_3==null?void 0:_3[i])!==null&&a!==void 0?a:[];return t.startsWith("data-")||!It(e)&&(i&&s.includes(t)||eue.includes(t))||n&&rE.includes(t)},wt=function(e,t,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(F.isValidElement(e)&&(i=e.props),!rf(i))return null;var a={};return Object.keys(i).forEach(function(s){var c;oue((c=i)===null||c===void 0?void 0:c[s],s,t,n)&&(a[s]=i[s])}),a},jT=function r(e,t){if(e===t)return!0;var n=F.Children.count(e);if(n!==F.Children.count(t))return!1;if(n===0)return!0;if(n===1)return zR(Array.isArray(e)?e[0]:e,Array.isArray(t)?t[0]:t);for(var i=0;i<n;i++){var a=e[i],s=t[i];if(Array.isArray(a)||Array.isArray(s)){if(!r(a,s))return!1}else if(!zR(a,s))return!1}return!0},zR=function(e,t){if(Lt(e)&&Lt(t))return!0;if(!Lt(e)&&!Lt(t)){var n=e.props||{},i=n.children,a=DR(n,rue),s=t.props||{},c=s.children,d=DR(s,nue);return i&&c?Zd(a,d)&&jT(i,c):!i&&!c?Zd(a,d):!1}return!1},VR=function(e,t){var n=[],i={};return nE(e).forEach(function(a,s){if(sue(a))n.push(a);else if(a){var c=pl(a.type),d=t[c]||{},f=d.handler,m=d.once;if(f&&(!m||!i[c])){var p=f(a,c,s);n.push(p),i[c]=!0}}}),n},lue=function(e){var t=e&&e.type;return t&&LR[t]?LR[t]:null},cue=function(e,t){return nE(t).indexOf(e)},uue=["children","width","height","viewBox","className","style","title","desc"];function IT(){return IT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},IT.apply(this,arguments)}function due(r,e){if(r==null)return{};var t=hue(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function hue(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function RT(r){var e=r.children,t=r.width,n=r.height,i=r.viewBox,a=r.className,s=r.style,c=r.title,d=r.desc,f=due(r,uue),m=i||{width:t,height:n,x:0,y:0},p=zt("recharts-surface",a);return ne.createElement("svg",IT({},wt(f,!0,"svg"),{className:p,width:t,height:n,style:s,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),ne.createElement("title",null,c),ne.createElement("desc",null,d),e)}var fue=["children","className"];function MT(){return MT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},MT.apply(this,arguments)}function mue(r,e){if(r==null)return{};var t=pue(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function pue(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var ur=ne.forwardRef(function(r,e){var t=r.children,n=r.className,i=mue(r,fue),a=zt("recharts-layer",n);return ne.createElement("g",MT({className:a},wt(i,!0),{ref:e}),t)}),gl=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]},T3,$R;function gue(){if($R)return T3;$R=1;function r(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(a);++i<a;)s[i]=e[i+t];return s}return T3=r,T3}var A3,FR;function yue(){if(FR)return A3;FR=1;var r=gue();function e(t,n,i){var a=t.length;return i=i===void 0?a:i,!n&&i>=a?t:r(t,n,i)}return A3=e,A3}var E3,qR;function Rq(){if(qR)return E3;qR=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="\\u200d",c=RegExp("["+s+r+i+a+"]");function d(f){return c.test(f)}return E3=d,E3}var N3,HR;function vue(){if(HR)return N3;HR=1;function r(e){return e.split("")}return N3=r,N3}var O3,GR;function bue(){if(GR)return O3;GR=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",s="["+r+"]",c="["+i+"]",d="\\ud83c[\\udffb-\\udfff]",f="(?:"+c+"|"+d+")",m="[^"+r+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",y="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",T=f+"?",S="["+a+"]?",w="(?:"+b+"(?:"+[m,p,y].join("|")+")"+S+T+")*",E=S+T+w,I="(?:"+[m+c+"?",c,p,y,s].join("|")+")",C=RegExp(d+"(?="+d+")|"+I+E,"g");function B(R){return R.match(C)||[]}return O3=B,O3}var k3,KR;function xue(){if(KR)return k3;KR=1;var r=vue(),e=Rq(),t=bue();function n(i){return e(i)?t(i):r(i)}return k3=n,k3}var C3,WR;function wue(){if(WR)return C3;WR=1;var r=yue(),e=Rq(),t=xue(),n=kq();function i(a){return function(s){s=n(s);var c=e(s)?t(s):void 0,d=c?c[0]:s.charAt(0),f=c?r(c,1).join(""):s.slice(1);return d[a]()+f}}return C3=i,C3}var j3,XR;function _ue(){if(XR)return j3;XR=1;var r=wue(),e=r("toUpperCase");return j3=e,j3}var Sue=_ue();const qx=mr(Sue);function Vr(r){return function(){return r}}const Mq=Math.cos,Qv=Math.sin,Fs=Math.sqrt,Yv=Math.PI,Hx=2*Yv,PT=Math.PI,DT=2*PT,Fu=1e-6,Tue=DT-Fu;function Pq(r){this._+=r[0];for(let e=1,t=r.length;e<t;++e)this._+=arguments[e]+r[e]}function Aue(r){let e=Math.floor(r);if(!(e>=0))throw new Error(`invalid digits: ${r}`);if(e>15)return Pq;const t=10**e;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*t)/t+n[i]}}class Eue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Pq:Aue(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,i){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,t,n,i,a,s){this._append`C${+e},${+t},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,t,n,i,a){if(e=+e,t=+t,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,c=this._y1,d=n-e,f=i-t,m=s-e,p=c-t,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(y>Fu)if(!(Math.abs(p*d-f*m)>Fu)||!a)this._append`L${this._x1=e},${this._y1=t}`;else{let b=n-s,T=i-c,S=d*d+f*f,w=b*b+T*T,E=Math.sqrt(S),I=Math.sqrt(y),C=a*Math.tan((PT-Math.acos((S+y-w)/(2*E*I)))/2),B=C/I,R=C/E;Math.abs(B-1)>Fu&&this._append`L${e+B*m},${t+B*p}`,this._append`A${a},${a},0,0,${+(p*b>m*T)},${this._x1=e+R*d},${this._y1=t+R*f}`}}arc(e,t,n,i,a,s){if(e=+e,t=+t,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(i),d=n*Math.sin(i),f=e+c,m=t+d,p=1^s,y=s?i-a:a-i;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Fu||Math.abs(this._y1-m)>Fu)&&this._append`L${f},${m}`,n&&(y<0&&(y=y%DT+DT),y>Tue?this._append`A${n},${n},0,1,${p},${e-c},${t-d}A${n},${n},0,1,${p},${this._x1=f},${this._y1=m}`:y>Fu&&this._append`A${n},${n},0,${+(y>=PT)},${p},${this._x1=e+n*Math.cos(a)},${this._y1=t+n*Math.sin(a)}`)}rect(e,t,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function iE(r){let e=3;return r.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);e=n}return r},()=>new Eue(e)}function aE(r){return typeof r=="object"&&"length"in r?r:Array.from(r)}function Dq(r){this._context=r}Dq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:this._context.lineTo(r,e);break}}};function Gx(r){return new Dq(r)}function Lq(r){return r[0]}function Bq(r){return r[1]}function Uq(r,e){var t=Vr(!0),n=null,i=Gx,a=null,s=iE(c);r=typeof r=="function"?r:r===void 0?Lq:Vr(r),e=typeof e=="function"?e:e===void 0?Bq:Vr(e);function c(d){var f,m=(d=aE(d)).length,p,y=!1,b;for(n==null&&(a=i(b=s())),f=0;f<=m;++f)!(f<m&&t(p=d[f],f,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+r(p,f,d),+e(p,f,d));if(b)return a=null,b+""||null}return c.x=function(d){return arguments.length?(r=typeof d=="function"?d:Vr(+d),c):r},c.y=function(d){return arguments.length?(e=typeof d=="function"?d:Vr(+d),c):e},c.defined=function(d){return arguments.length?(t=typeof d=="function"?d:Vr(!!d),c):t},c.curve=function(d){return arguments.length?(i=d,n!=null&&(a=i(n)),c):i},c.context=function(d){return arguments.length?(d==null?n=a=null:a=i(n=d),c):n},c}function Ry(r,e,t){var n=null,i=Vr(!0),a=null,s=Gx,c=null,d=iE(f);r=typeof r=="function"?r:r===void 0?Lq:Vr(+r),e=typeof e=="function"?e:Vr(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?Bq:Vr(+t);function f(p){var y,b,T,S=(p=aE(p)).length,w,E=!1,I,C=new Array(S),B=new Array(S);for(a==null&&(c=s(I=d())),y=0;y<=S;++y){if(!(y<S&&i(w=p[y],y,p))===E)if(E=!E)b=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),T=y-1;T>=b;--T)c.point(C[T],B[T]);c.lineEnd(),c.areaEnd()}E&&(C[y]=+r(w,y,p),B[y]=+e(w,y,p),c.point(n?+n(w,y,p):C[y],t?+t(w,y,p):B[y]))}if(I)return c=null,I+""||null}function m(){return Uq().defined(i).curve(s).context(a)}return f.x=function(p){return arguments.length?(r=typeof p=="function"?p:Vr(+p),n=null,f):r},f.x0=function(p){return arguments.length?(r=typeof p=="function"?p:Vr(+p),f):r},f.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Vr(+p),f):n},f.y=function(p){return arguments.length?(e=typeof p=="function"?p:Vr(+p),t=null,f):e},f.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Vr(+p),f):e},f.y1=function(p){return arguments.length?(t=p==null?null:typeof p=="function"?p:Vr(+p),f):t},f.lineX0=f.lineY0=function(){return m().x(r).y(e)},f.lineY1=function(){return m().x(r).y(t)},f.lineX1=function(){return m().x(n).y(e)},f.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Vr(!!p),f):i},f.curve=function(p){return arguments.length?(s=p,a!=null&&(c=s(a)),f):s},f.context=function(p){return arguments.length?(p==null?a=c=null:c=s(a=p),f):a},f}class zq{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function Nue(r){return new zq(r,!0)}function Oue(r){return new zq(r,!1)}const sE={draw(r,e){const t=Fs(e/Yv);r.moveTo(t,0),r.arc(0,0,t,0,Hx)}},kue={draw(r,e){const t=Fs(e/5)/2;r.moveTo(-3*t,-t),r.lineTo(-t,-t),r.lineTo(-t,-3*t),r.lineTo(t,-3*t),r.lineTo(t,-t),r.lineTo(3*t,-t),r.lineTo(3*t,t),r.lineTo(t,t),r.lineTo(t,3*t),r.lineTo(-t,3*t),r.lineTo(-t,t),r.lineTo(-3*t,t),r.closePath()}},Vq=Fs(1/3),Cue=Vq*2,jue={draw(r,e){const t=Fs(e/Cue),n=t*Vq;r.moveTo(0,-t),r.lineTo(n,0),r.lineTo(0,t),r.lineTo(-n,0),r.closePath()}},Iue={draw(r,e){const t=Fs(e),n=-t/2;r.rect(n,n,t,t)}},Rue=.8908130915292852,$q=Qv(Yv/10)/Qv(7*Yv/10),Mue=Qv(Hx/10)*$q,Pue=-Mq(Hx/10)*$q,Due={draw(r,e){const t=Fs(e*Rue),n=Mue*t,i=Pue*t;r.moveTo(0,-t),r.lineTo(n,i);for(let a=1;a<5;++a){const s=Hx*a/5,c=Mq(s),d=Qv(s);r.lineTo(d*t,-c*t),r.lineTo(c*n-d*i,d*n+c*i)}r.closePath()}},I3=Fs(3),Lue={draw(r,e){const t=-Fs(e/(I3*3));r.moveTo(0,t*2),r.lineTo(-I3*t,-t),r.lineTo(I3*t,-t),r.closePath()}},ns=-.5,is=Fs(3)/2,LT=1/Fs(12),Bue=(LT/2+1)*3,Uue={draw(r,e){const t=Fs(e/Bue),n=t/2,i=t*LT,a=n,s=t*LT+t,c=-a,d=s;r.moveTo(n,i),r.lineTo(a,s),r.lineTo(c,d),r.lineTo(ns*n-is*i,is*n+ns*i),r.lineTo(ns*a-is*s,is*a+ns*s),r.lineTo(ns*c-is*d,is*c+ns*d),r.lineTo(ns*n+is*i,ns*i-is*n),r.lineTo(ns*a+is*s,ns*s-is*a),r.lineTo(ns*c+is*d,ns*d-is*c),r.closePath()}};function zue(r,e){let t=null,n=iE(i);r=typeof r=="function"?r:Vr(r||sE),e=typeof e=="function"?e:Vr(e===void 0?64:+e);function i(){let a;if(t||(t=a=n()),r.apply(this,arguments).draw(t,+e.apply(this,arguments)),a)return t=null,a+""||null}return i.type=function(a){return arguments.length?(r=typeof a=="function"?a:Vr(a),i):r},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Vr(+a),i):e},i.context=function(a){return arguments.length?(t=a??null,i):t},i}function Zv(){}function Jv(r,e,t){r._context.bezierCurveTo((2*r._x0+r._x1)/3,(2*r._y0+r._y1)/3,(r._x0+2*r._x1)/3,(r._y0+2*r._y1)/3,(r._x0+4*r._x1+e)/6,(r._y0+4*r._y1+t)/6)}function Fq(r){this._context=r}Fq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Jv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Jv(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function Vue(r){return new Fq(r)}function qq(r){this._context=r}qq.prototype={areaStart:Zv,areaEnd:Zv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._x2=r,this._y2=e;break;case 1:this._point=2,this._x3=r,this._y3=e;break;case 2:this._point=3,this._x4=r,this._y4=e,this._context.moveTo((this._x0+4*this._x1+r)/6,(this._y0+4*this._y1+e)/6);break;default:Jv(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function $ue(r){return new qq(r)}function Hq(r){this._context=r}Hq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var t=(this._x0+4*this._x1+r)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 3:this._point=4;default:Jv(this,r,e);break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e}};function Fue(r){return new Hq(r)}function Gq(r){this._context=r}Gq.prototype={areaStart:Zv,areaEnd:Zv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(r,e){r=+r,e=+e,this._point?this._context.lineTo(r,e):(this._point=1,this._context.moveTo(r,e))}};function que(r){return new Gq(r)}function QR(r){return r<0?-1:1}function YR(r,e,t){var n=r._x1-r._x0,i=e-r._x1,a=(r._y1-r._y0)/(n||i<0&&-0),s=(t-r._y1)/(i||n<0&&-0),c=(a*i+s*n)/(n+i);return(QR(a)+QR(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(c))||0}function ZR(r,e){var t=r._x1-r._x0;return t?(3*(r._y1-r._y0)/t-e)/2:e}function R3(r,e,t){var n=r._x0,i=r._y0,a=r._x1,s=r._y1,c=(a-n)/3;r._context.bezierCurveTo(n+c,i+c*e,a-c,s-c*t,a,s)}function eb(r){this._context=r}eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R3(this,this._t0,ZR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(r,e){var t=NaN;if(r=+r,e=+e,!(r===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;break;case 2:this._point=3,R3(this,ZR(this,t=YR(this,r,e)),t);break;default:R3(this,this._t0,t=YR(this,r,e));break}this._x0=this._x1,this._x1=r,this._y0=this._y1,this._y1=e,this._t0=t}}};function Kq(r){this._context=new Wq(r)}(Kq.prototype=Object.create(eb.prototype)).point=function(r,e){eb.prototype.point.call(this,e,r)};function Wq(r){this._context=r}Wq.prototype={moveTo:function(r,e){this._context.moveTo(e,r)},closePath:function(){this._context.closePath()},lineTo:function(r,e){this._context.lineTo(e,r)},bezierCurveTo:function(r,e,t,n,i,a){this._context.bezierCurveTo(e,r,n,t,a,i)}};function Hue(r){return new eb(r)}function Gue(r){return new Kq(r)}function Xq(r){this._context=r}Xq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var r=this._x,e=this._y,t=r.length;if(t)if(this._line?this._context.lineTo(r[0],e[0]):this._context.moveTo(r[0],e[0]),t===2)this._context.lineTo(r[1],e[1]);else for(var n=JR(r),i=JR(e),a=0,s=1;s<t;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],r[s],e[s]);(this._line||this._line!==0&&t===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(r,e){this._x.push(+r),this._y.push(+e)}};function JR(r){var e,t=r.length-1,n,i=new Array(t),a=new Array(t),s=new Array(t);for(i[0]=0,a[0]=2,s[0]=r[0]+2*r[1],e=1;e<t-1;++e)i[e]=1,a[e]=4,s[e]=4*r[e]+2*r[e+1];for(i[t-1]=2,a[t-1]=7,s[t-1]=8*r[t-1]+r[t],e=1;e<t;++e)n=i[e]/a[e-1],a[e]-=n,s[e]-=n*s[e-1];for(i[t-1]=s[t-1]/a[t-1],e=t-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[t-1]=(r[t]+i[t-1])/2,e=0;e<t-1;++e)a[e]=2*r[e+1]-i[e+1];return[i,a]}function Kue(r){return new Xq(r)}function Kx(r,e){this._context=r,this._t=e}Kx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(r,e){switch(r=+r,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(r,e):this._context.moveTo(r,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(r,e);else{var t=this._x*(1-this._t)+r*this._t;this._context.lineTo(t,this._y),this._context.lineTo(t,e)}break}}this._x=r,this._y=e}};function Wue(r){return new Kx(r,.5)}function Xue(r){return new Kx(r,0)}function Que(r){return new Kx(r,1)}function bh(r,e){if((s=r.length)>1)for(var t=1,n,i,a=r[e[0]],s,c=a.length;t<s;++t)for(i=a,a=r[e[t]],n=0;n<c;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function BT(r){for(var e=r.length,t=new Array(e);--e>=0;)t[e]=e;return t}function Yue(r,e){return r[e]}function Zue(r){const e=[];return e.key=r,e}function Jue(){var r=Vr([]),e=BT,t=bh,n=Yue;function i(a){var s=Array.from(r.apply(this,arguments),Zue),c,d=s.length,f=-1,m;for(const p of a)for(c=0,++f;c<d;++c)(s[c][f]=[0,+n(p,s[c].key,f,a)]).data=p;for(c=0,m=aE(e(s));c<d;++c)s[m[c]].index=c;return t(s,m),s}return i.keys=function(a){return arguments.length?(r=typeof a=="function"?a:Vr(Array.from(a)),i):r},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Vr(+a),i):n},i.order=function(a){return arguments.length?(e=a==null?BT:typeof a=="function"?a:Vr(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(t=a??bh,i):t},i}function e0e(r,e){if((n=r.length)>0){for(var t,n,i=0,a=r[0].length,s;i<a;++i){for(s=t=0;t<n;++t)s+=r[t][i][1]||0;if(s)for(t=0;t<n;++t)r[t][i][1]/=s}bh(r,e)}}function t0e(r,e){if((i=r.length)>0){for(var t=0,n=r[e[0]],i,a=n.length;t<a;++t){for(var s=0,c=0;s<i;++s)c+=r[s][t][1]||0;n[t][1]+=n[t][0]=-c/2}bh(r,e)}}function r0e(r,e){if(!(!((s=r.length)>0)||!((a=(i=r[e[0]]).length)>0))){for(var t=0,n=1,i,a,s;n<a;++n){for(var c=0,d=0,f=0;c<s;++c){for(var m=r[e[c]],p=m[n][1]||0,y=m[n-1][1]||0,b=(p-y)/2,T=0;T<c;++T){var S=r[e[T]],w=S[n][1]||0,E=S[n-1][1]||0;b+=w-E}d+=p,f+=b*p}i[n-1][1]+=i[n-1][0]=t,d&&(t-=f/d)}i[n-1][1]+=i[n-1][0]=t,bh(r,e)}}function Ap(r){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ap(r)}var n0e=["type","size","sizeType"];function UT(){return UT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},UT.apply(this,arguments)}function eM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function tM(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(t),!0).forEach(function(n){i0e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):eM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function i0e(r,e,t){return e=a0e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function a0e(r){var e=s0e(r,"string");return Ap(e)=="symbol"?e:e+""}function s0e(r,e){if(Ap(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function o0e(r,e){if(r==null)return{};var t=l0e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function l0e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var Qq={symbolCircle:sE,symbolCross:kue,symbolDiamond:jue,symbolSquare:Iue,symbolStar:Due,symbolTriangle:Lue,symbolWye:Uue},c0e=Math.PI/180,u0e=function(e){var t="symbol".concat(qx(e));return Qq[t]||sE},d0e=function(e,t,n){if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*c0e;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},h0e=function(e,t){Qq["symbol".concat(qx(e))]=t},Wx=function(e){var t=e.type,n=t===void 0?"circle":t,i=e.size,a=i===void 0?64:i,s=e.sizeType,c=s===void 0?"area":s,d=o0e(e,n0e),f=tM(tM({},d),{},{type:n,size:a,sizeType:c}),m=function(){var w=u0e(n),E=zue().type(w).size(d0e(a,c,n));return E()},p=f.className,y=f.cx,b=f.cy,T=wt(f,!0);return y===+y&&b===+b&&a===+a?ne.createElement("path",UT({},T,{className:zt("recharts-symbols",p),transform:"translate(".concat(y,", ").concat(b,")"),d:m()})):null};Wx.registerSymbol=h0e;function xh(r){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(r)}function zT(){return zT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},zT.apply(this,arguments)}function rM(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function f0e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(t),!0).forEach(function(n){Ep(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rM(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function m0e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function p0e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Zq(n.key),n)}}function g0e(r,e,t){return e&&p0e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function y0e(r,e,t){return e=tb(e),v0e(r,Yq()?Reflect.construct(e,t||[],tb(r).constructor):e.apply(r,t))}function v0e(r,e){if(e&&(xh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b0e(r)}function b0e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Yq(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yq=function(){return!!r})()}function tb(r){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tb(r)}function x0e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&VT(r,e)}function VT(r,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VT(r,e)}function Ep(r,e,t){return e=Zq(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zq(r){var e=w0e(r,"string");return xh(e)=="symbol"?e:e+""}function w0e(r,e){if(xh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var as=32,oE=(function(r){function e(){return m0e(this,e),y0e(this,e,arguments)}return x0e(e,r),g0e(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=as/2,s=as/6,c=as/3,d=n.inactive?i:n.color;if(n.type==="plainline")return ne.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:as,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return ne.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(as,"M").concat(2*c,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return ne.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(as/8,"h").concat(as,"v").concat(as*3/4,"h").concat(-as,"z"),className:"recharts-legend-icon"});if(ne.isValidElement(n.legendIcon)){var f=f0e({},n);return delete f.legendIcon,ne.cloneElement(n.legendIcon,f)}return ne.createElement(Wx,{fill:d,cx:a,cy:a,size:as,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,c=i.layout,d=i.formatter,f=i.inactiveColor,m={x:0,y:0,width:as,height:as},p={display:c==="horizontal"?"inline-block":"block",marginRight:10},y={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(b,T){var S=b.formatter||d,w=zt(Ep(Ep({"recharts-legend-item":!0},"legend-item-".concat(T),!0),"inactive",b.inactive));if(b.type==="none")return null;var E=It(b.value)?null:b.value;gl(!It(b.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var I=b.inactive?f:b.color;return ne.createElement("li",zT({className:w,style:p,key:"legend-item-".concat(T)},S0(n.props,b,T)),ne.createElement(RT,{width:s,height:s,viewBox:m,style:y},n.renderIcon(b)),ne.createElement("span",{className:"recharts-legend-item-text",style:{color:I}},S?S(E,b,T):E))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var c={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return ne.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])})(F.PureComponent);Ep(oE,"displayName","Legend");Ep(oE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var M3,nM;function _0e(){if(nM)return M3;nM=1;var r=Vx();function e(){this.__data__=new r,this.size=0}return M3=e,M3}var P3,iM;function S0e(){if(iM)return P3;iM=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return P3=r,P3}var D3,aM;function T0e(){if(aM)return D3;aM=1;function r(e){return this.__data__.get(e)}return D3=r,D3}var L3,sM;function A0e(){if(sM)return L3;sM=1;function r(e){return this.__data__.has(e)}return L3=r,L3}var B3,oM;function E0e(){if(oM)return B3;oM=1;var r=Vx(),e=Z8(),t=J8(),n=200;function i(a,s){var c=this.__data__;if(c instanceof r){var d=c.__data__;if(!e||d.length<n-1)return d.push([a,s]),this.size=++c.size,this;c=this.__data__=new t(d)}return c.set(a,s),this.size=c.size,this}return B3=i,B3}var U3,lM;function Jq(){if(lM)return U3;lM=1;var r=Vx(),e=_0e(),t=S0e(),n=T0e(),i=A0e(),a=E0e();function s(c){var d=this.__data__=new r(c);this.size=d.size}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=i,s.prototype.set=a,U3=s,U3}var z3,cM;function N0e(){if(cM)return z3;cM=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return z3=e,z3}var V3,uM;function O0e(){if(uM)return V3;uM=1;function r(e){return this.__data__.has(e)}return V3=r,V3}var $3,dM;function eH(){if(dM)return $3;dM=1;var r=J8(),e=N0e(),t=O0e();function n(i){var a=-1,s=i==null?0:i.length;for(this.__data__=new r;++a<s;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,$3=n,$3}var F3,hM;function tH(){if(hM)return F3;hM=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return F3=r,F3}var q3,fM;function rH(){if(fM)return q3;fM=1;function r(e,t){return e.has(t)}return q3=r,q3}var H3,mM;function nH(){if(mM)return H3;mM=1;var r=eH(),e=tH(),t=rH(),n=1,i=2;function a(s,c,d,f,m,p){var y=d&n,b=s.length,T=c.length;if(b!=T&&!(y&&T>b))return!1;var S=p.get(s),w=p.get(c);if(S&&w)return S==c&&w==s;var E=-1,I=!0,C=d&i?new r:void 0;for(p.set(s,c),p.set(c,s);++E<b;){var B=s[E],R=c[E];if(f)var D=y?f(R,B,E,c,s,p):f(B,R,E,s,c,p);if(D!==void 0){if(D)continue;I=!1;break}if(C){if(!e(c,function(A,k){if(!t(C,k)&&(B===A||m(B,A,d,f,p)))return C.push(k)})){I=!1;break}}else if(!(B===R||m(B,R,d,f,p))){I=!1;break}}return p.delete(s),p.delete(c),I}return H3=a,H3}var G3,pM;function k0e(){if(pM)return G3;pM=1;var r=No(),e=r.Uint8Array;return G3=e,G3}var K3,gM;function C0e(){if(gM)return K3;gM=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return K3=r,K3}var W3,yM;function lE(){if(yM)return W3;yM=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return W3=r,W3}var X3,vM;function j0e(){if(vM)return X3;vM=1;var r=Cg(),e=k0e(),t=Y8(),n=nH(),i=C0e(),a=lE(),s=1,c=2,d="[object Boolean]",f="[object Date]",m="[object Error]",p="[object Map]",y="[object Number]",b="[object RegExp]",T="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",I="[object DataView]",C=r?r.prototype:void 0,B=C?C.valueOf:void 0;function R(D,A,k,N,U,M,$){switch(k){case I:if(D.byteLength!=A.byteLength||D.byteOffset!=A.byteOffset)return!1;D=D.buffer,A=A.buffer;case E:return!(D.byteLength!=A.byteLength||!M(new e(D),new e(A)));case d:case f:case y:return t(+D,+A);case m:return D.name==A.name&&D.message==A.message;case b:case S:return D==A+"";case p:var z=i;case T:var Q=N&s;if(z||(z=a),D.size!=A.size&&!Q)return!1;var ee=$.get(D);if(ee)return ee==A;N|=c,$.set(D,A);var K=n(z(D),z(A),N,U,M,$);return $.delete(D),K;case w:if(B)return B.call(D)==B.call(A)}return!1}return X3=R,X3}var Q3,bM;function iH(){if(bM)return Q3;bM=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return Q3=r,Q3}var Y3,xM;function I0e(){if(xM)return Y3;xM=1;var r=iH(),e=_a();function t(n,i,a){var s=i(n);return e(n)?s:r(s,a(n))}return Y3=t,Y3}var Z3,wM;function R0e(){if(wM)return Z3;wM=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,s=[];++n<i;){var c=e[n];t(c,n,e)&&(s[a++]=c)}return s}return Z3=r,Z3}var J3,_M;function M0e(){if(_M)return J3;_M=1;function r(){return[]}return J3=r,J3}var e6,SM;function P0e(){if(SM)return e6;SM=1;var r=R0e(),e=M0e(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(s){return s==null?[]:(s=Object(s),r(i(s),function(c){return n.call(s,c)}))}:e;return e6=a,e6}var t6,TM;function D0e(){if(TM)return t6;TM=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return t6=r,t6}var r6,AM;function L0e(){if(AM)return r6;AM=1;var r=Ml(),e=Pl(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return r6=n,r6}var n6,EM;function cE(){if(EM)return n6;EM=1;var r=L0e(),e=Pl(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r((function(){return arguments})())?r:function(s){return e(s)&&n.call(s,"callee")&&!i.call(s,"callee")};return n6=a,n6}var Im={exports:{}},i6,NM;function B0e(){if(NM)return i6;NM=1;function r(){return!1}return i6=r,i6}Im.exports;var OM;function aH(){return OM||(OM=1,(function(r,e){var t=No(),n=B0e(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,s=a&&a.exports===i,c=s?t.Buffer:void 0,d=c?c.isBuffer:void 0,f=d||n;r.exports=f})(Im,Im.exports)),Im.exports}var a6,kM;function uE(){if(kM)return a6;kM=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return a6=t,a6}var s6,CM;function dE(){if(CM)return s6;CM=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return s6=e,s6}var o6,jM;function U0e(){if(jM)return o6;jM=1;var r=Ml(),e=dE(),t=Pl(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",s="[object Date]",c="[object Error]",d="[object Function]",f="[object Map]",m="[object Number]",p="[object Object]",y="[object RegExp]",b="[object Set]",T="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",I="[object Float32Array]",C="[object Float64Array]",B="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",A="[object Uint8Array]",k="[object Uint8ClampedArray]",N="[object Uint16Array]",U="[object Uint32Array]",M={};M[I]=M[C]=M[B]=M[R]=M[D]=M[A]=M[k]=M[N]=M[U]=!0,M[n]=M[i]=M[w]=M[a]=M[E]=M[s]=M[c]=M[d]=M[f]=M[m]=M[p]=M[y]=M[b]=M[T]=M[S]=!1;function $(z){return t(z)&&e(z.length)&&!!M[r(z)]}return o6=$,o6}var l6,IM;function sH(){if(IM)return l6;IM=1;function r(e){return function(t){return e(t)}}return l6=r,l6}var Rm={exports:{}};Rm.exports;var RM;function z0e(){return RM||(RM=1,(function(r,e){var t=Eq(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,s=a&&t.process,c=(function(){try{var d=i&&i.require&&i.require("util").types;return d||s&&s.binding&&s.binding("util")}catch{}})();r.exports=c})(Rm,Rm.exports)),Rm.exports}var c6,MM;function oH(){if(MM)return c6;MM=1;var r=U0e(),e=sH(),t=z0e(),n=t&&t.isTypedArray,i=n?e(n):r;return c6=i,c6}var u6,PM;function V0e(){if(PM)return u6;PM=1;var r=D0e(),e=cE(),t=_a(),n=aH(),i=uE(),a=oH(),s=Object.prototype,c=s.hasOwnProperty;function d(f,m){var p=t(f),y=!p&&e(f),b=!p&&!y&&n(f),T=!p&&!y&&!b&&a(f),S=p||y||b||T,w=S?r(f.length,String):[],E=w.length;for(var I in f)(m||c.call(f,I))&&!(S&&(I=="length"||b&&(I=="offset"||I=="parent")||T&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||i(I,E)))&&w.push(I);return w}return u6=d,u6}var d6,DM;function $0e(){if(DM)return d6;DM=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return d6=e,d6}var h6,LM;function lH(){if(LM)return h6;LM=1;function r(e,t){return function(n){return e(t(n))}}return h6=r,h6}var f6,BM;function F0e(){if(BM)return f6;BM=1;var r=lH(),e=r(Object.keys,Object);return f6=e,f6}var m6,UM;function q0e(){if(UM)return m6;UM=1;var r=$0e(),e=F0e(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var s=[];for(var c in Object(a))n.call(a,c)&&c!="constructor"&&s.push(c);return s}return m6=i,m6}var p6,zM;function Rg(){if(zM)return p6;zM=1;var r=Q8(),e=dE();function t(n){return n!=null&&e(n.length)&&!r(n)}return p6=t,p6}var g6,VM;function Xx(){if(VM)return g6;VM=1;var r=V0e(),e=q0e(),t=Rg();function n(i){return t(i)?r(i):e(i)}return g6=n,g6}var y6,$M;function H0e(){if($M)return y6;$M=1;var r=I0e(),e=P0e(),t=Xx();function n(i){return r(i,t,e)}return y6=n,y6}var v6,FM;function G0e(){if(FM)return v6;FM=1;var r=H0e(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,s,c,d,f,m){var p=c&e,y=r(a),b=y.length,T=r(s),S=T.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var E=y[w];if(!(p?E in s:n.call(s,E)))return!1}var I=m.get(a),C=m.get(s);if(I&&C)return I==s&&C==a;var B=!0;m.set(a,s),m.set(s,a);for(var R=p;++w<b;){E=y[w];var D=a[E],A=s[E];if(d)var k=p?d(A,D,E,s,a,m):d(D,A,E,a,s,m);if(!(k===void 0?D===A||f(D,A,c,d,m):k)){B=!1;break}R||(R=E=="constructor")}if(B&&!R){var N=a.constructor,U=s.constructor;N!=U&&"constructor"in a&&"constructor"in s&&!(typeof N=="function"&&N instanceof N&&typeof U=="function"&&U instanceof U)&&(B=!1)}return m.delete(a),m.delete(s),B}return v6=i,v6}var b6,qM;function K0e(){if(qM)return b6;qM=1;var r=P0(),e=No(),t=r(e,"DataView");return b6=t,b6}var x6,HM;function W0e(){if(HM)return x6;HM=1;var r=P0(),e=No(),t=r(e,"Promise");return x6=t,x6}var w6,GM;function cH(){if(GM)return w6;GM=1;var r=P0(),e=No(),t=r(e,"Set");return w6=t,w6}var _6,KM;function X0e(){if(KM)return _6;KM=1;var r=P0(),e=No(),t=r(e,"WeakMap");return _6=t,_6}var S6,WM;function Q0e(){if(WM)return S6;WM=1;var r=K0e(),e=Z8(),t=W0e(),n=cH(),i=X0e(),a=Ml(),s=Nq(),c="[object Map]",d="[object Object]",f="[object Promise]",m="[object Set]",p="[object WeakMap]",y="[object DataView]",b=s(r),T=s(e),S=s(t),w=s(n),E=s(i),I=a;return(r&&I(new r(new ArrayBuffer(1)))!=y||e&&I(new e)!=c||t&&I(t.resolve())!=f||n&&I(new n)!=m||i&&I(new i)!=p)&&(I=function(C){var B=a(C),R=B==d?C.constructor:void 0,D=R?s(R):"";if(D)switch(D){case b:return y;case T:return c;case S:return f;case w:return m;case E:return p}return B}),S6=I,S6}var T6,XM;function Y0e(){if(XM)return T6;XM=1;var r=Jq(),e=nH(),t=j0e(),n=G0e(),i=Q0e(),a=_a(),s=aH(),c=oH(),d=1,f="[object Arguments]",m="[object Array]",p="[object Object]",y=Object.prototype,b=y.hasOwnProperty;function T(S,w,E,I,C,B){var R=a(S),D=a(w),A=R?m:i(S),k=D?m:i(w);A=A==f?p:A,k=k==f?p:k;var N=A==p,U=k==p,M=A==k;if(M&&s(S)){if(!s(w))return!1;R=!0,N=!1}if(M&&!N)return B||(B=new r),R||c(S)?e(S,w,E,I,C,B):t(S,w,A,E,I,C,B);if(!(E&d)){var $=N&&b.call(S,"__wrapped__"),z=U&&b.call(w,"__wrapped__");if($||z){var Q=$?S.value():S,ee=z?w.value():w;return B||(B=new r),C(Q,ee,E,I,B)}}return M?(B||(B=new r),n(S,w,E,I,C,B)):!1}return T6=T,T6}var A6,QM;function hE(){if(QM)return A6;QM=1;var r=Y0e(),e=Pl();function t(n,i,a,s,c){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,s,t,c)}return A6=t,A6}var E6,YM;function Z0e(){if(YM)return E6;YM=1;var r=Jq(),e=hE(),t=1,n=2;function i(a,s,c,d){var f=c.length,m=f,p=!d;if(a==null)return!m;for(a=Object(a);f--;){var y=c[f];if(p&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++f<m;){y=c[f];var b=y[0],T=a[b],S=y[1];if(p&&y[2]){if(T===void 0&&!(b in a))return!1}else{var w=new r;if(d)var E=d(T,S,b,a,s,w);if(!(E===void 0?e(S,T,t|n,d,w):E))return!1}}return!0}return E6=i,E6}var N6,ZM;function uH(){if(ZM)return N6;ZM=1;var r=iu();function e(t){return t===t&&!r(t)}return N6=e,N6}var O6,JM;function J0e(){if(JM)return O6;JM=1;var r=uH(),e=Xx();function t(n){for(var i=e(n),a=i.length;a--;){var s=i[a],c=n[s];i[a]=[s,c,r(c)]}return i}return O6=t,O6}var k6,eP;function dH(){if(eP)return k6;eP=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return k6=r,k6}var C6,tP;function ede(){if(tP)return C6;tP=1;var r=Z0e(),e=J0e(),t=dH();function n(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(s){return s===i||r(s,i,a)}}return C6=n,C6}var j6,rP;function tde(){if(rP)return j6;rP=1;function r(e,t){return e!=null&&t in Object(e)}return j6=r,j6}var I6,nP;function rde(){if(nP)return I6;nP=1;var r=Cq(),e=cE(),t=_a(),n=uE(),i=dE(),a=Fx();function s(c,d,f){d=r(d,c);for(var m=-1,p=d.length,y=!1;++m<p;){var b=a(d[m]);if(!(y=c!=null&&f(c,b)))break;c=c[b]}return y||++m!=p?y:(p=c==null?0:c.length,!!p&&i(p)&&n(b,p)&&(t(c)||e(c)))}return I6=s,I6}var R6,iP;function nde(){if(iP)return R6;iP=1;var r=tde(),e=rde();function t(n,i){return n!=null&&e(n,i,r)}return R6=t,R6}var M6,aP;function ide(){if(aP)return M6;aP=1;var r=hE(),e=jq(),t=nde(),n=X8(),i=uH(),a=dH(),s=Fx(),c=1,d=2;function f(m,p){return n(m)&&i(p)?a(s(m),p):function(y){var b=e(y,m);return b===void 0&&b===p?t(y,m):r(p,b,c|d)}}return M6=f,M6}var P6,sP;function nf(){if(sP)return P6;sP=1;function r(e){return e}return P6=r,P6}var D6,oP;function ade(){if(oP)return D6;oP=1;function r(e){return function(t){return t==null?void 0:t[e]}}return D6=r,D6}var L6,lP;function sde(){if(lP)return L6;lP=1;var r=tE();function e(t){return function(n){return r(n,t)}}return L6=e,L6}var B6,cP;function ode(){if(cP)return B6;cP=1;var r=ade(),e=sde(),t=X8(),n=Fx();function i(a){return t(a)?r(n(a)):e(a)}return B6=i,B6}var U6,uP;function Oo(){if(uP)return U6;uP=1;var r=ede(),e=ide(),t=nf(),n=_a(),i=ode();function a(s){return typeof s=="function"?s:s==null?t:typeof s=="object"?n(s)?e(s[0],s[1]):r(s):i(s)}return U6=a,U6}var z6,dP;function hH(){if(dP)return z6;dP=1;function r(e,t,n,i){for(var a=e.length,s=n+(i?1:-1);i?s--:++s<a;)if(t(e[s],s,e))return s;return-1}return z6=r,z6}var V6,hP;function lde(){if(hP)return V6;hP=1;function r(e){return e!==e}return V6=r,V6}var $6,fP;function cde(){if(fP)return $6;fP=1;function r(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return $6=r,$6}var F6,mP;function ude(){if(mP)return F6;mP=1;var r=hH(),e=lde(),t=cde();function n(i,a,s){return a===a?t(i,a,s):r(i,e,s)}return F6=n,F6}var q6,pP;function dde(){if(pP)return q6;pP=1;var r=ude();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return q6=e,q6}var H6,gP;function hde(){if(gP)return H6;gP=1;function r(e,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}return H6=r,H6}var G6,yP;function fde(){if(yP)return G6;yP=1;function r(){}return G6=r,G6}var K6,vP;function mde(){if(vP)return K6;vP=1;var r=cH(),e=fde(),t=lE(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(a){return new r(a)}:e;return K6=i,K6}var W6,bP;function pde(){if(bP)return W6;bP=1;var r=eH(),e=dde(),t=hde(),n=rH(),i=mde(),a=lE(),s=200;function c(d,f,m){var p=-1,y=e,b=d.length,T=!0,S=[],w=S;if(m)T=!1,y=t;else if(b>=s){var E=f?null:i(d);if(E)return a(E);T=!1,y=n,w=new r}else w=f?[]:S;e:for(;++p<b;){var I=d[p],C=f?f(I):I;if(I=m||I!==0?I:0,T&&C===C){for(var B=w.length;B--;)if(w[B]===C)continue e;f&&w.push(C),S.push(I)}else y(w,C,m)||(w!==S&&w.push(C),S.push(I))}return S}return W6=c,W6}var X6,xP;function gde(){if(xP)return X6;xP=1;var r=Oo(),e=pde();function t(n,i){return n&&n.length?e(n,r(i,2)):[]}return X6=t,X6}var yde=gde();const wP=mr(yde);function fH(r,e,t){return e===!0?wP(r,t):It(e)?wP(r,e):r}function wh(r){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(r)}var vde=["ref"];function _P(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Yo(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(t),!0).forEach(function(n){Qx(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_P(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bde(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function SP(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,pH(n.key),n)}}function xde(r,e,t){return e&&SP(r.prototype,e),t&&SP(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function wde(r,e,t){return e=rb(e),_de(r,mH()?Reflect.construct(e,t||[],rb(r).constructor):e.apply(r,t))}function _de(r,e){if(e&&(wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sde(r)}function Sde(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function mH(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mH=function(){return!!r})()}function rb(r){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rb(r)}function Tde(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&$T(r,e)}function $T(r,e){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$T(r,e)}function Qx(r,e,t){return e=pH(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pH(r){var e=Ade(r,"string");return wh(e)=="symbol"?e:e+""}function Ade(r,e){if(wh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(wh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Ede(r,e){if(r==null)return{};var t=Nde(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Nde(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Ode(r){return r.value}function kde(r,e){if(ne.isValidElement(r))return ne.cloneElement(r,e);if(typeof r=="function")return ne.createElement(r,e);e.ref;var t=Ede(e,vde);return ne.createElement(oE,t)}var TP=1,Jd=(function(r){function e(){var t;bde(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=wde(this,e,[].concat(i)),Qx(t,"lastBoundingBox",{width:-1,height:-1}),t}return Tde(e,r),xde(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>TP||Math.abs(i.height-this.lastBoundingBox.height)>TP)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Yo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,c=i.verticalAlign,d=i.margin,f=i.chartWidth,m=i.chartHeight,p,y;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var b=this.getBBoxSnapshot();p={left:((f||0)-b.width)/2}}else p=s==="right"?{right:d&&d.right||0}:{left:d&&d.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(c==="middle"){var T=this.getBBoxSnapshot();y={top:((m||0)-T.height)/2}}else y=c==="bottom"?{bottom:d&&d.bottom||0}:{top:d&&d.top||0};return Yo(Yo({},p),y)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,c=i.height,d=i.wrapperStyle,f=i.payloadUniqBy,m=i.payload,p=Yo(Yo({position:"absolute",width:s||"auto",height:c||"auto"},this.getDefaultPosition(d)),d);return ne.createElement("div",{className:"recharts-legend-wrapper",style:p,ref:function(b){n.wrapperNode=b}},kde(a,Yo(Yo({},this.props),{},{payload:fH(m,f,Ode)})))}}],[{key:"getWithHeight",value:function(n,i){var a=Yo(Yo({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&et(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])})(F.PureComponent);Qx(Jd,"displayName","Legend");Qx(Jd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Q6,AP;function Cde(){if(AP)return Q6;AP=1;var r=Cg(),e=cE(),t=_a(),n=r?r.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(n&&a&&a[n])}return Q6=i,Q6}var Y6,EP;function gH(){if(EP)return Y6;EP=1;var r=iH(),e=Cde();function t(n,i,a,s,c){var d=-1,f=n.length;for(a||(a=e),c||(c=[]);++d<f;){var m=n[d];i>0&&a(m)?i>1?t(m,i-1,a,s,c):r(c,m):s||(c[c.length]=m)}return c}return Y6=t,Y6}var Z6,NP;function jde(){if(NP)return Z6;NP=1;function r(e){return function(t,n,i){for(var a=-1,s=Object(t),c=i(t),d=c.length;d--;){var f=c[e?d:++a];if(n(s[f],f,s)===!1)break}return t}}return Z6=r,Z6}var J6,OP;function Ide(){if(OP)return J6;OP=1;var r=jde(),e=r();return J6=e,J6}var e_,kP;function yH(){if(kP)return e_;kP=1;var r=Ide(),e=Xx();function t(n,i){return n&&r(n,i,e)}return e_=t,e_}var t_,CP;function Rde(){if(CP)return t_;CP=1;var r=Rg();function e(t,n){return function(i,a){if(i==null)return i;if(!r(i))return t(i,a);for(var s=i.length,c=n?s:-1,d=Object(i);(n?c--:++c<s)&&a(d[c],c,d)!==!1;);return i}}return t_=e,t_}var r_,jP;function fE(){if(jP)return r_;jP=1;var r=yH(),e=Rde(),t=e(r);return r_=t,r_}var n_,IP;function vH(){if(IP)return n_;IP=1;var r=fE(),e=Rg();function t(n,i){var a=-1,s=e(n)?Array(n.length):[];return r(n,function(c,d,f){s[++a]=i(c,d,f)}),s}return n_=t,n_}var i_,RP;function Mde(){if(RP)return i_;RP=1;function r(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}return i_=r,i_}var a_,MP;function Pde(){if(MP)return a_;MP=1;var r=tf();function e(t,n){if(t!==n){var i=t!==void 0,a=t===null,s=t===t,c=r(t),d=n!==void 0,f=n===null,m=n===n,p=r(n);if(!f&&!p&&!c&&t>n||c&&d&&m&&!f&&!p||a&&d&&m||!i&&m||!s)return 1;if(!a&&!c&&!p&&t<n||p&&i&&s&&!a&&!c||f&&i&&s||!d&&s||!m)return-1}return 0}return a_=e,a_}var s_,PP;function Dde(){if(PP)return s_;PP=1;var r=Pde();function e(t,n,i){for(var a=-1,s=t.criteria,c=n.criteria,d=s.length,f=i.length;++a<d;){var m=r(s[a],c[a]);if(m){if(a>=f)return m;var p=i[a];return m*(p=="desc"?-1:1)}}return t.index-n.index}return s_=e,s_}var o_,DP;function Lde(){if(DP)return o_;DP=1;var r=eE(),e=tE(),t=Oo(),n=vH(),i=Mde(),a=sH(),s=Dde(),c=nf(),d=_a();function f(m,p,y){p.length?p=r(p,function(S){return d(S)?function(w){return e(w,S.length===1?S[0]:S)}:S}):p=[c];var b=-1;p=r(p,a(t));var T=n(m,function(S,w,E){var I=r(p,function(C){return C(S)});return{criteria:I,index:++b,value:S}});return i(T,function(S,w){return s(S,w,y)})}return o_=f,o_}var l_,LP;function Bde(){if(LP)return l_;LP=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return l_=r,l_}var c_,BP;function Ude(){if(BP)return c_;BP=1;var r=Bde(),e=Math.max;function t(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var s=arguments,c=-1,d=e(s.length-i,0),f=Array(d);++c<d;)f[c]=s[i+c];c=-1;for(var m=Array(i+1);++c<i;)m[c]=s[c];return m[i]=a(f),r(n,this,m)}}return c_=t,c_}var u_,UP;function zde(){if(UP)return u_;UP=1;function r(e){return function(){return e}}return u_=r,u_}var d_,zP;function bH(){if(zP)return d_;zP=1;var r=P0(),e=(function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}})();return d_=e,d_}var h_,VP;function Vde(){if(VP)return h_;VP=1;var r=zde(),e=bH(),t=nf(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:t;return h_=n,h_}var f_,$P;function $de(){if($P)return f_;$P=1;var r=800,e=16,t=Date.now;function n(i){var a=0,s=0;return function(){var c=t(),d=e-(c-s);if(s=c,d>0){if(++a>=r)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return f_=n,f_}var m_,FP;function Fde(){if(FP)return m_;FP=1;var r=Vde(),e=$de(),t=e(r);return m_=t,m_}var p_,qP;function qde(){if(qP)return p_;qP=1;var r=nf(),e=Ude(),t=Fde();function n(i,a){return t(e(i,a,r),i+"")}return p_=n,p_}var g_,HP;function Yx(){if(HP)return g_;HP=1;var r=Y8(),e=Rg(),t=uE(),n=iu();function i(a,s,c){if(!n(c))return!1;var d=typeof s;return(d=="number"?e(c)&&t(s,c.length):d=="string"&&s in c)?r(c[s],a):!1}return g_=i,g_}var y_,GP;function Hde(){if(GP)return y_;GP=1;var r=gH(),e=Lde(),t=qde(),n=Yx(),i=t(function(a,s){if(a==null)return[];var c=s.length;return c>1&&n(a,s[0],s[1])?s=[]:c>2&&n(s[0],s[1],s[2])&&(s=[s[0]]),e(a,r(s,1),[])});return y_=i,y_}var Gde=Hde();const mE=mr(Gde);function Np(r){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Np(r)}function FT(){return FT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},FT.apply(this,arguments)}function Kde(r,e){return Yde(r)||Qde(r,e)||Xde(r,e)||Wde()}function Wde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xde(r,e){if(r){if(typeof r=="string")return KP(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KP(r,e)}}function KP(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Qde(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Yde(r){if(Array.isArray(r))return r}function WP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function v_(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WP(Object(t),!0).forEach(function(n){Zde(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Zde(r,e,t){return e=Jde(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Jde(r){var e=ehe(r,"string");return Np(e)=="symbol"?e:e+""}function ehe(r,e){if(Np(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function the(r){return Array.isArray(r)&&Xn(r[0])&&Xn(r[1])?r.join(" ~ "):r}var rhe=function(e){var t=e.separator,n=t===void 0?" : ":t,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,c=s===void 0?{}:s,d=e.labelStyle,f=d===void 0?{}:d,m=e.payload,p=e.formatter,y=e.itemSorter,b=e.wrapperClassName,T=e.labelClassName,S=e.label,w=e.labelFormatter,E=e.accessibilityLayer,I=E===void 0?!1:E,C=function(){if(m&&m.length){var $={padding:0,margin:0},z=(y?mE(m,y):m).map(function(Q,ee){if(Q.type==="none")return null;var K=v_({display:"block",paddingTop:4,paddingBottom:4,color:Q.color||"#000"},c),Z=Q.formatter||p||the,Y=Q.value,ge=Q.name,ae=Y,X=ge;if(Z&&ae!=null&&X!=null){var J=Z(Y,ge,Q,ee,m);if(Array.isArray(J)){var ce=Kde(J,2);ae=ce[0],X=ce[1]}else ae=J}return ne.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ee),style:K},Xn(X)?ne.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Xn(X)?ne.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,ne.createElement("span",{className:"recharts-tooltip-item-value"},ae),ne.createElement("span",{className:"recharts-tooltip-item-unit"},Q.unit||""))});return ne.createElement("ul",{className:"recharts-tooltip-item-list",style:$},z)}return null},B=v_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),R=v_({margin:0},f),D=!Lt(S),A=D?S:"",k=zt("recharts-default-tooltip",b),N=zt("recharts-tooltip-label",T);D&&w&&m!==void 0&&m!==null&&(A=w(S,m));var U=I?{role:"status","aria-live":"assertive"}:{};return ne.createElement("div",FT({className:k,style:B},U),ne.createElement("p",{className:N,style:R},ne.isValidElement(A)?A:"".concat(A)),C())};function Op(r){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Op(r)}function My(r,e,t){return e=nhe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function nhe(r){var e=ihe(r,"string");return Op(e)=="symbol"?e:e+""}function ihe(r,e){if(Op(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var mm="recharts-tooltip-wrapper",ahe={visibility:"hidden"};function she(r){var e=r.coordinate,t=r.translateX,n=r.translateY;return zt(mm,My(My(My(My({},"".concat(mm,"-right"),et(t)&&e&&et(e.x)&&t>=e.x),"".concat(mm,"-left"),et(t)&&e&&et(e.x)&&t<e.x),"".concat(mm,"-bottom"),et(n)&&e&&et(e.y)&&n>=e.y),"".concat(mm,"-top"),et(n)&&e&&et(e.y)&&n<e.y))}function XP(r){var e=r.allowEscapeViewBox,t=r.coordinate,n=r.key,i=r.offsetTopLeft,a=r.position,s=r.reverseDirection,c=r.tooltipDimension,d=r.viewBox,f=r.viewBoxDimension;if(a&&et(a[n]))return a[n];var m=t[n]-c-i,p=t[n]+i;if(e[n])return s[n]?m:p;if(s[n]){var y=m,b=d[n];return y<b?Math.max(p,d[n]):Math.max(m,d[n])}var T=p+c,S=d[n]+f;return T>S?Math.max(m,d[n]):Math.max(p,d[n])}function ohe(r){var e=r.translateX,t=r.translateY,n=r.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(t,"px, 0)"):"translate(".concat(e,"px, ").concat(t,"px)")}}function lhe(r){var e=r.allowEscapeViewBox,t=r.coordinate,n=r.offsetTopLeft,i=r.position,a=r.reverseDirection,s=r.tooltipBox,c=r.useTranslate3d,d=r.viewBox,f,m,p;return s.height>0&&s.width>0&&t?(m=XP({allowEscapeViewBox:e,coordinate:t,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:d,viewBoxDimension:d.width}),p=XP({allowEscapeViewBox:e,coordinate:t,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:d,viewBoxDimension:d.height}),f=ohe({translateX:m,translateY:p,useTranslate3d:c})):f=ahe,{cssProperties:f,cssClasses:she({translateX:m,translateY:p,coordinate:t})}}function _h(r){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(r)}function QP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function YP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(t),!0).forEach(function(n){HT(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function che(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uhe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,wH(n.key),n)}}function dhe(r,e,t){return e&&uhe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function hhe(r,e,t){return e=nb(e),fhe(r,xH()?Reflect.construct(e,t||[],nb(r).constructor):e.apply(r,t))}function fhe(r,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mhe(r)}function mhe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xH(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xH=function(){return!!r})()}function nb(r){return nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nb(r)}function phe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&qT(r,e)}function qT(r,e){return qT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},qT(r,e)}function HT(r,e,t){return e=wH(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wH(r){var e=ghe(r,"string");return _h(e)=="symbol"?e:e+""}function ghe(r,e){if(_h(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(_h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var ZP=1,yhe=(function(r){function e(){var t;che(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=hhe(this,e,[].concat(i)),HT(t,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),HT(t,"handleKeyDown",function(s){if(s.key==="Escape"){var c,d,f,m;t.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(d=t.props.coordinate)===null||d===void 0?void 0:d.x)!==null&&c!==void 0?c:0,y:(f=(m=t.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&f!==void 0?f:0}})}}),t}return phe(e,r),dhe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>ZP||Math.abs(n.height-this.state.lastBoundingBox.height)>ZP)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.children,m=i.coordinate,p=i.hasPayload,y=i.isAnimationActive,b=i.offset,T=i.position,S=i.reverseDirection,w=i.useTranslate3d,E=i.viewBox,I=i.wrapperStyle,C=lhe({allowEscapeViewBox:s,coordinate:m,offsetTopLeft:b,position:T,reverseDirection:S,tooltipBox:this.state.lastBoundingBox,useTranslate3d:w,viewBox:E}),B=C.cssClasses,R=C.cssProperties,D=YP(YP({transition:y&&a?"transform ".concat(c,"ms ").concat(d):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&p?"visible":"hidden",position:"absolute",top:0,left:0},I);return ne.createElement("div",{tabIndex:-1,className:B,style:D,ref:function(k){n.wrapperNode=k}},f)}}])})(F.PureComponent),vhe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},D0={isSsr:vhe()};function Sh(r){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(r)}function JP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eD(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(t),!0).forEach(function(n){pE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bhe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xhe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,SH(n.key),n)}}function whe(r,e,t){return e&&xhe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function _he(r,e,t){return e=ib(e),She(r,_H()?Reflect.construct(e,t||[],ib(r).constructor):e.apply(r,t))}function She(r,e){if(e&&(Sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return The(r)}function The(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _H(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_H=function(){return!!r})()}function ib(r){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ib(r)}function Ahe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&GT(r,e)}function GT(r,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GT(r,e)}function pE(r,e,t){return e=SH(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SH(r){var e=Ehe(r,"string");return Sh(e)=="symbol"?e:e+""}function Ehe(r,e){if(Sh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Sh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function Nhe(r){return r.dataKey}function Ohe(r,e){return ne.isValidElement(r)?ne.cloneElement(r,e):typeof r=="function"?ne.createElement(r,e):ne.createElement(rhe,e)}var ao=(function(r){function e(){return bhe(this,e),_he(this,e,arguments)}return Ahe(e,r),whe(e,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,c=i.animationDuration,d=i.animationEasing,f=i.content,m=i.coordinate,p=i.filterNull,y=i.isAnimationActive,b=i.offset,T=i.payload,S=i.payloadUniqBy,w=i.position,E=i.reverseDirection,I=i.useTranslate3d,C=i.viewBox,B=i.wrapperStyle,R=T??[];p&&R.length&&(R=fH(T.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),S,Nhe));var D=R.length>0;return ne.createElement(yhe,{allowEscapeViewBox:s,animationDuration:c,animationEasing:d,isAnimationActive:y,active:a,coordinate:m,hasPayload:D,offset:b,position:w,reverseDirection:E,useTranslate3d:I,viewBox:C,wrapperStyle:B},Ohe(f,eD(eD({},this.props),{},{payload:R})))}}])})(F.PureComponent);pE(ao,"displayName","Tooltip");pE(ao,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!D0.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var b_,tD;function khe(){if(tD)return b_;tD=1;var r=No(),e=function(){return r.Date.now()};return b_=e,b_}var x_,rD;function Che(){if(rD)return x_;rD=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return x_=e,x_}var w_,nD;function jhe(){if(nD)return w_;nD=1;var r=Che(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return w_=t,w_}var __,iD;function TH(){if(iD)return __;iD=1;var r=jhe(),e=iu(),t=tf(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function d(f){if(typeof f=="number")return f;if(t(f))return n;if(e(f)){var m=typeof f.valueOf=="function"?f.valueOf():f;f=e(m)?m+"":m}if(typeof f!="string")return f===0?f:+f;f=r(f);var p=a.test(f);return p||s.test(f)?c(f.slice(2),p?2:8):i.test(f)?n:+f}return __=d,__}var S_,aD;function Ihe(){if(aD)return S_;aD=1;var r=iu(),e=khe(),t=TH(),n="Expected a function",i=Math.max,a=Math.min;function s(c,d,f){var m,p,y,b,T,S,w=0,E=!1,I=!1,C=!0;if(typeof c!="function")throw new TypeError(n);d=t(d)||0,r(f)&&(E=!!f.leading,I="maxWait"in f,y=I?i(t(f.maxWait)||0,d):y,C="trailing"in f?!!f.trailing:C);function B(z){var Q=m,ee=p;return m=p=void 0,w=z,b=c.apply(ee,Q),b}function R(z){return w=z,T=setTimeout(k,d),E?B(z):b}function D(z){var Q=z-S,ee=z-w,K=d-Q;return I?a(K,y-ee):K}function A(z){var Q=z-S,ee=z-w;return S===void 0||Q>=d||Q<0||I&&ee>=y}function k(){var z=e();if(A(z))return N(z);T=setTimeout(k,D(z))}function N(z){return T=void 0,C&&m?B(z):(m=p=void 0,b)}function U(){T!==void 0&&clearTimeout(T),w=0,m=S=p=T=void 0}function M(){return T===void 0?b:N(e())}function $(){var z=e(),Q=A(z);if(m=arguments,p=this,S=z,Q){if(T===void 0)return R(S);if(I)return clearTimeout(T),T=setTimeout(k,d),B(S)}return T===void 0&&(T=setTimeout(k,d)),b}return $.cancel=U,$.flush=M,$}return S_=s,S_}var T_,sD;function Rhe(){if(sD)return T_;sD=1;var r=Ihe(),e=iu(),t="Expected a function";function n(i,a,s){var c=!0,d=!0;if(typeof i!="function")throw new TypeError(t);return e(s)&&(c="leading"in s?!!s.leading:c,d="trailing"in s?!!s.trailing:d),r(i,a,{leading:c,maxWait:a,trailing:d})}return T_=n,T_}var Mhe=Rhe();const AH=mr(Mhe);function kp(r){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(r)}function oD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Py(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(t),!0).forEach(function(n){Phe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):oD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Phe(r,e,t){return e=Dhe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Dhe(r){var e=Lhe(r,"string");return kp(e)=="symbol"?e:e+""}function Lhe(r,e){if(kp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Bhe(r,e){return $he(r)||Vhe(r,e)||zhe(r,e)||Uhe()}function Uhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zhe(r,e){if(r){if(typeof r=="string")return lD(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lD(r,e)}}function lD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Vhe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function $he(r){if(Array.isArray(r))return r}var EH=F.forwardRef(function(r,e){var t=r.aspect,n=r.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=r.width,s=a===void 0?"100%":a,c=r.height,d=c===void 0?"100%":c,f=r.minWidth,m=f===void 0?0:f,p=r.minHeight,y=r.maxHeight,b=r.children,T=r.debounce,S=T===void 0?0:T,w=r.id,E=r.className,I=r.onResize,C=r.style,B=C===void 0?{}:C,R=F.useRef(null),D=F.useRef();D.current=I,F.useImperativeHandle(e,function(){return Object.defineProperty(R.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),R.current},configurable:!0})});var A=F.useState({containerWidth:i.width,containerHeight:i.height}),k=Bhe(A,2),N=k[0],U=k[1],M=F.useCallback(function(z,Q){U(function(ee){var K=Math.round(z),Z=Math.round(Q);return ee.containerWidth===K&&ee.containerHeight===Z?ee:{containerWidth:K,containerHeight:Z}})},[]);F.useEffect(function(){var z=function(ge){var ae,X=ge[0].contentRect,J=X.width,ce=X.height;M(J,ce),(ae=D.current)===null||ae===void 0||ae.call(D,J,ce)};S>0&&(z=AH(z,S,{trailing:!0,leading:!1}));var Q=new ResizeObserver(z),ee=R.current.getBoundingClientRect(),K=ee.width,Z=ee.height;return M(K,Z),Q.observe(R.current),function(){Q.disconnect()}},[M,S]);var $=F.useMemo(function(){var z=N.containerWidth,Q=N.containerHeight;if(z<0||Q<0)return null;gl(Yu(s)||Yu(d),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,d),gl(!t||t>0,"The aspect(%s) must be greater than zero.",t);var ee=Yu(s)?z:s,K=Yu(d)?Q:d;t&&t>0&&(ee?K=ee/t:K&&(ee=K*t),y&&K>y&&(K=y)),gl(ee>0||K>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ee,K,s,d,m,p,t);var Z=!Array.isArray(b)&&pl(b.type).endsWith("Chart");return ne.Children.map(b,function(Y){return ne.isValidElement(Y)?F.cloneElement(Y,Py({width:ee,height:K},Z?{style:Py({height:"100%",width:"100%",maxHeight:K,maxWidth:ee},Y.props.style)}:{})):Y})},[t,b,d,y,p,m,N,s]);return ne.createElement("div",{id:w?"".concat(w):void 0,className:zt("recharts-responsive-container",E),style:Py(Py({},B),{},{width:s,height:d,minWidth:m,minHeight:p,maxHeight:y}),ref:R},$)}),gE=function(e){return null};gE.displayName="Cell";function Cp(r){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cp(r)}function cD(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function KT(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cD(Object(t),!0).forEach(function(n){Fhe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cD(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Fhe(r,e,t){return e=qhe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function qhe(r){var e=Hhe(r,"string");return Cp(e)=="symbol"?e:e+""}function Hhe(r,e){if(Cp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var jd={widthCache:{},cacheCount:0},Ghe=2e3,Khe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uD="recharts_measurement_span";function Whe(r){var e=KT({},r);return Object.keys(e).forEach(function(t){e[t]||delete e[t]}),e}var Gm=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||D0.isSsr)return{width:0,height:0};var n=Whe(t),i=JSON.stringify({text:e,copyStyle:n});if(jd.widthCache[i])return jd.widthCache[i];try{var a=document.getElementById(uD);a||(a=document.createElement("span"),a.setAttribute("id",uD),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=KT(KT({},Khe),n);Object.assign(a.style,s),a.textContent="".concat(e);var c=a.getBoundingClientRect(),d={width:c.width,height:c.height};return jd.widthCache[i]=d,++jd.cacheCount>Ghe&&(jd.cacheCount=0,jd.widthCache={}),d}catch{return{width:0,height:0}}},Xhe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function jp(r){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jp(r)}function ab(r,e){return Jhe(r)||Zhe(r,e)||Yhe(r,e)||Qhe()}function Qhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yhe(r,e){if(r){if(typeof r=="string")return dD(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dD(r,e)}}function dD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Zhe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Jhe(r){if(Array.isArray(r))return r}function efe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function hD(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,rfe(n.key),n)}}function tfe(r,e,t){return e&&hD(r.prototype,e),t&&hD(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function rfe(r){var e=nfe(r,"string");return jp(e)=="symbol"?e:e+""}function nfe(r,e){if(jp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var fD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,mD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ife=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,afe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,NH={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sfe=Object.keys(NH),Vd="NaN";function ofe(r,e){return r*NH[e]}var Dy=(function(){function r(e,t){efe(this,r),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),t!==""&&!ife.test(t)&&(this.num=NaN,this.unit=""),sfe.includes(t)&&(this.num=ofe(e,t),this.unit="px")}return tfe(r,[{key:"add",value:function(t){return this.unit!==t.unit?new r(NaN,""):new r(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new r(NaN,""):new r(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new r(NaN,""):new r(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new r(NaN,""):new r(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var n,i=(n=afe.exec(t))!==null&&n!==void 0?n:[],a=ab(i,3),s=a[1],c=a[2];return new r(parseFloat(s),c??"")}}])})();function OH(r){if(r.includes(Vd))return Vd;for(var e=r;e.includes("*")||e.includes("/");){var t,n=(t=fD.exec(e))!==null&&t!==void 0?t:[],i=ab(n,4),a=i[1],s=i[2],c=i[3],d=Dy.parse(a??""),f=Dy.parse(c??""),m=s==="*"?d.multiply(f):d.divide(f);if(m.isNaN())return Vd;e=e.replace(fD,m.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var p,y=(p=mD.exec(e))!==null&&p!==void 0?p:[],b=ab(y,4),T=b[1],S=b[2],w=b[3],E=Dy.parse(T??""),I=Dy.parse(w??""),C=S==="+"?E.add(I):E.subtract(I);if(C.isNaN())return Vd;e=e.replace(mD,C.toString())}return e}var pD=/\(([^()]*)\)/;function lfe(r){for(var e=r;e.includes("(");){var t=pD.exec(e),n=ab(t,2),i=n[1];e=e.replace(pD,OH(i))}return e}function cfe(r){var e=r.replace(/\s+/g,"");return e=lfe(e),e=OH(e),e}function ufe(r){try{return cfe(r)}catch{return Vd}}function A_(r){var e=ufe(r.slice(5,-1));return e===Vd?"":e}var dfe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],hfe=["dx","dy","angle","className","breakAll"];function WT(){return WT=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},WT.apply(this,arguments)}function gD(r,e){if(r==null)return{};var t=ffe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function ffe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function yD(r,e){return yfe(r)||gfe(r,e)||pfe(r,e)||mfe()}function mfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pfe(r,e){if(r){if(typeof r=="string")return vD(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vD(r,e)}}function vD(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function gfe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;d=!1}else for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function yfe(r){if(Array.isArray(r))return r}var kH=/[ \f\n\r\t\v\u2028\u2029]+/,CH=function(e){var t=e.children,n=e.breakAll,i=e.style;try{var a=[];Lt(t)||(n?a=t.toString().split(""):a=t.toString().split(kH));var s=a.map(function(d){return{word:d,width:Gm(d,i).width}}),c=n?0:Gm("",i).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}},vfe=function(e,t,n,i,a){var s=e.maxLines,c=e.children,d=e.style,f=e.breakAll,m=et(s),p=c,y=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ee.reduce(function(K,Z){var Y=Z.word,ge=Z.width,ae=K[K.length-1];if(ae&&(i==null||a||ae.width+ge+n<Number(i)))ae.words.push(Y),ae.width+=ge+n;else{var X={words:[Y],width:ge};K.push(X)}return K},[])},b=y(t),T=function(ee){return ee.reduce(function(K,Z){return K.width>Z.width?K:Z})};if(!m)return b;for(var S="",w=function(ee){var K=p.slice(0,ee),Z=CH({breakAll:f,style:d,children:K+S}).wordsWithComputedWidth,Y=y(Z),ge=Y.length>s||T(Y).width>Number(i);return[ge,Y]},E=0,I=p.length-1,C=0,B;E<=I&&C<=p.length-1;){var R=Math.floor((E+I)/2),D=R-1,A=w(D),k=yD(A,2),N=k[0],U=k[1],M=w(R),$=yD(M,1),z=$[0];if(!N&&!z&&(E=R+1),N&&z&&(I=R-1),!N&&z){B=U;break}C++}return B||b},bD=function(e){var t=Lt(e)?[]:e.toString().split(kH);return[{words:t}]},bfe=function(e){var t=e.width,n=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,c=e.maxLines;if((t||n)&&!D0.isSsr){var d,f,m=CH({breakAll:s,children:i,style:a});if(m){var p=m.wordsWithComputedWidth,y=m.spaceWidth;d=p,f=y}else return bD(i);return vfe({breakAll:s,children:i,maxLines:c,style:a},d,f,t,n)}return bD(i)},xD="#808080",Th=function(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.lineHeight,c=s===void 0?"1em":s,d=e.capHeight,f=d===void 0?"0.71em":d,m=e.scaleToFit,p=m===void 0?!1:m,y=e.textAnchor,b=y===void 0?"start":y,T=e.verticalAnchor,S=T===void 0?"end":T,w=e.fill,E=w===void 0?xD:w,I=gD(e,dfe),C=F.useMemo(function(){return bfe({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:p,style:I.style,width:I.width})},[I.breakAll,I.children,I.maxLines,p,I.style,I.width]),B=I.dx,R=I.dy,D=I.angle,A=I.className,k=I.breakAll,N=gD(I,hfe);if(!Xn(n)||!Xn(a))return null;var U=n+(et(B)?B:0),M=a+(et(R)?R:0),$;switch(S){case"start":$=A_("calc(".concat(f,")"));break;case"middle":$=A_("calc(".concat((C.length-1)/2," * -").concat(c," + (").concat(f," / 2))"));break;default:$=A_("calc(".concat(C.length-1," * -").concat(c,")"));break}var z=[];if(p){var Q=C[0].width,ee=I.width;z.push("scale(".concat((et(ee)?ee/Q:1)/Q,")"))}return D&&z.push("rotate(".concat(D,", ").concat(U,", ").concat(M,")")),z.length&&(N.transform=z.join(" ")),ne.createElement("text",WT({},wt(N,!0),{x:U,y:M,className:zt("recharts-text",A),textAnchor:b,fill:E.includes("url")?xD:E}),C.map(function(K,Z){var Y=K.words.join(k?"":" ");return ne.createElement("tspan",{x:U,dy:Z===0?$:c,key:"".concat(Y,"-").concat(Z)},Y)}))};function $c(r,e){return r==null||e==null?NaN:r<e?-1:r>e?1:r>=e?0:NaN}function xfe(r,e){return r==null||e==null?NaN:e<r?-1:e>r?1:e>=r?0:NaN}function yE(r){let e,t,n;r.length!==2?(e=$c,t=(c,d)=>$c(r(c),d),n=(c,d)=>r(c)-d):(e=r===$c||r===xfe?r:wfe,t=r,n=r);function i(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;t(c[p],d)<0?f=p+1:m=p}while(f<m)}return f}function a(c,d,f=0,m=c.length){if(f<m){if(e(d,d)!==0)return m;do{const p=f+m>>>1;t(c[p],d)<=0?f=p+1:m=p}while(f<m)}return f}function s(c,d,f=0,m=c.length){const p=i(c,d,f,m-1);return p>f&&n(c[p-1],d)>-n(c[p],d)?p-1:p}return{left:i,center:s,right:a}}function wfe(){return 0}function jH(r){return r===null?NaN:+r}function*_fe(r,e){for(let t of r)t!=null&&(t=+t)>=t&&(yield t)}const Sfe=yE($c),Mg=Sfe.right;yE(jH).center;class wD extends Map{constructor(e,t=Efe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(_D(this,e))}has(e){return super.has(_D(this,e))}set(e,t){return super.set(Tfe(this,e),t)}delete(e){return super.delete(Afe(this,e))}}function _D({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):t}function Tfe({_intern:r,_key:e},t){const n=e(t);return r.has(n)?r.get(n):(r.set(n,t),t)}function Afe({_intern:r,_key:e},t){const n=e(t);return r.has(n)&&(t=r.get(n),r.delete(n)),t}function Efe(r){return r!==null&&typeof r=="object"?r.valueOf():r}function Nfe(r=$c){if(r===$c)return IH;if(typeof r!="function")throw new TypeError("compare is not a function");return(e,t)=>{const n=r(e,t);return n||n===0?n:(r(t,t)===0)-(r(e,e)===0)}}function IH(r,e){return(r==null||!(r>=r))-(e==null||!(e>=e))||(r<e?-1:r>e?1:0)}const Ofe=Math.sqrt(50),kfe=Math.sqrt(10),Cfe=Math.sqrt(2);function sb(r,e,t){const n=(e-r)/Math.max(0,t),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=Ofe?10:a>=kfe?5:a>=Cfe?2:1;let c,d,f;return i<0?(f=Math.pow(10,-i)/s,c=Math.round(r*f),d=Math.round(e*f),c/f<r&&++c,d/f>e&&--d,f=-f):(f=Math.pow(10,i)*s,c=Math.round(r/f),d=Math.round(e/f),c*f<r&&++c,d*f>e&&--d),d<c&&.5<=t&&t<2?sb(r,e,t*2):[c,d,f]}function XT(r,e,t){if(e=+e,r=+r,t=+t,!(t>0))return[];if(r===e)return[r];const n=e<r,[i,a,s]=n?sb(e,r,t):sb(r,e,t);if(!(a>=i))return[];const c=a-i+1,d=new Array(c);if(n)if(s<0)for(let f=0;f<c;++f)d[f]=(a-f)/-s;else for(let f=0;f<c;++f)d[f]=(a-f)*s;else if(s<0)for(let f=0;f<c;++f)d[f]=(i+f)/-s;else for(let f=0;f<c;++f)d[f]=(i+f)*s;return d}function QT(r,e,t){return e=+e,r=+r,t=+t,sb(r,e,t)[2]}function YT(r,e,t){e=+e,r=+r,t=+t;const n=e<r,i=n?QT(e,r,t):QT(r,e,t);return(n?-1:1)*(i<0?1/-i:i)}function SD(r,e){let t;for(const n of r)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function TD(r,e){let t;for(const n of r)n!=null&&(t>n||t===void 0&&n>=n)&&(t=n);return t}function RH(r,e,t=0,n=1/0,i){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),n=Math.floor(Math.min(r.length-1,n)),!(t<=e&&e<=n))return r;for(i=i===void 0?IH:Nfe(i);n>t;){if(n-t>600){const d=n-t+1,f=e-t+1,m=Math.log(d),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(d-p)/d)*(f-d/2<0?-1:1),b=Math.max(t,Math.floor(e-f*p/d+y)),T=Math.min(n,Math.floor(e+(d-f)*p/d+y));RH(r,e,b,T,i)}const a=r[e];let s=t,c=n;for(pm(r,t,e),i(r[n],a)>0&&pm(r,t,n);s<c;){for(pm(r,s,c),++s,--c;i(r[s],a)<0;)++s;for(;i(r[c],a)>0;)--c}i(r[t],a)===0?pm(r,t,c):(++c,pm(r,c,n)),c<=e&&(t=c+1),e<=c&&(n=c-1)}return r}function pm(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function jfe(r,e,t){if(r=Float64Array.from(_fe(r)),!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return TD(r);if(e>=1)return SD(r);var n,i=(n-1)*e,a=Math.floor(i),s=SD(RH(r,a).subarray(0,a+1)),c=TD(r.subarray(a+1));return s+(c-s)*(i-a)}}function Ife(r,e,t=jH){if(!(!(n=r.length)||isNaN(e=+e))){if(e<=0||n<2)return+t(r[0],0,r);if(e>=1)return+t(r[n-1],n-1,r);var n,i=(n-1)*e,a=Math.floor(i),s=+t(r[a],a,r),c=+t(r[a+1],a+1,r);return s+(c-s)*(i-a)}}function Rfe(r,e,t){r=+r,e=+e,t=(i=arguments.length)<2?(e=r,r=0,1):i<3?1:+t;for(var n=-1,i=Math.max(0,Math.ceil((e-r)/t))|0,a=new Array(i);++n<i;)a[n]=r+n*t;return a}function xs(r,e){switch(arguments.length){case 0:break;case 1:this.range(r);break;default:this.range(e).domain(r);break}return this}function Dl(r,e){switch(arguments.length){case 0:break;case 1:{typeof r=="function"?this.interpolator(r):this.range(r);break}default:{this.domain(r),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ZT=Symbol("implicit");function vE(){var r=new wD,e=[],t=[],n=ZT;function i(a){let s=r.get(a);if(s===void 0){if(n!==ZT)return n;r.set(a,s=e.push(a)-1)}return t[s%t.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],r=new wD;for(const s of a)r.has(s)||r.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(t=Array.from(a),i):t.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return vE(e,t).unknown(n)},xs.apply(i,arguments),i}function Ip(){var r=vE().unknown(void 0),e=r.domain,t=r.range,n=0,i=1,a,s,c=!1,d=0,f=0,m=.5;delete r.unknown;function p(){var y=e().length,b=i<n,T=b?i:n,S=b?n:i;a=(S-T)/Math.max(1,y-d+f*2),c&&(a=Math.floor(a)),T+=(S-T-a*(y-d))*m,s=a*(1-d),c&&(T=Math.round(T),s=Math.round(s));var w=Rfe(y).map(function(E){return T+a*E});return t(b?w.reverse():w)}return r.domain=function(y){return arguments.length?(e(y),p()):e()},r.range=function(y){return arguments.length?([n,i]=y,n=+n,i=+i,p()):[n,i]},r.rangeRound=function(y){return[n,i]=y,n=+n,i=+i,c=!0,p()},r.bandwidth=function(){return s},r.step=function(){return a},r.round=function(y){return arguments.length?(c=!!y,p()):c},r.padding=function(y){return arguments.length?(d=Math.min(1,f=+y),p()):d},r.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},r.paddingOuter=function(y){return arguments.length?(f=+y,p()):f},r.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},r.copy=function(){return Ip(e(),[n,i]).round(c).paddingInner(d).paddingOuter(f).align(m)},xs.apply(p(),arguments)}function MH(r){var e=r.copy;return r.padding=r.paddingOuter,delete r.paddingInner,delete r.paddingOuter,r.copy=function(){return MH(e())},r}function Km(){return MH(Ip.apply(null,arguments).paddingInner(1))}function bE(r,e,t){r.prototype=e.prototype=t,t.constructor=r}function PH(r,e){var t=Object.create(r.prototype);for(var n in e)t[n]=e[n];return t}function Pg(){}var Rp=.7,ob=1/Rp,eh="\\s*([+-]?\\d+)\\s*",Mp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",po="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mfe=/^#([0-9a-f]{3,8})$/,Pfe=new RegExp(`^rgb\\(${eh},${eh},${eh}\\)$`),Dfe=new RegExp(`^rgb\\(${po},${po},${po}\\)$`),Lfe=new RegExp(`^rgba\\(${eh},${eh},${eh},${Mp}\\)$`),Bfe=new RegExp(`^rgba\\(${po},${po},${po},${Mp}\\)$`),Ufe=new RegExp(`^hsl\\(${Mp},${po},${po}\\)$`),zfe=new RegExp(`^hsla\\(${Mp},${po},${po},${Mp}\\)$`),AD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bE(Pg,Pp,{copy(r){return Object.assign(new this.constructor,this,r)},displayable(){return this.rgb().displayable()},hex:ED,formatHex:ED,formatHex8:Vfe,formatHsl:$fe,formatRgb:ND,toString:ND});function ED(){return this.rgb().formatHex()}function Vfe(){return this.rgb().formatHex8()}function $fe(){return DH(this).formatHsl()}function ND(){return this.rgb().formatRgb()}function Pp(r){var e,t;return r=(r+"").trim().toLowerCase(),(e=Mfe.exec(r))?(t=e[1].length,e=parseInt(e[1],16),t===6?OD(e):t===3?new ba(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Ly(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Ly(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Pfe.exec(r))?new ba(e[1],e[2],e[3],1):(e=Dfe.exec(r))?new ba(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Lfe.exec(r))?Ly(e[1],e[2],e[3],e[4]):(e=Bfe.exec(r))?Ly(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ufe.exec(r))?jD(e[1],e[2]/100,e[3]/100,1):(e=zfe.exec(r))?jD(e[1],e[2]/100,e[3]/100,e[4]):AD.hasOwnProperty(r)?OD(AD[r]):r==="transparent"?new ba(NaN,NaN,NaN,0):null}function OD(r){return new ba(r>>16&255,r>>8&255,r&255,1)}function Ly(r,e,t,n){return n<=0&&(r=e=t=NaN),new ba(r,e,t,n)}function Ffe(r){return r instanceof Pg||(r=Pp(r)),r?(r=r.rgb(),new ba(r.r,r.g,r.b,r.opacity)):new ba}function JT(r,e,t,n){return arguments.length===1?Ffe(r):new ba(r,e,t,n??1)}function ba(r,e,t,n){this.r=+r,this.g=+e,this.b=+t,this.opacity=+n}bE(ba,JT,PH(Pg,{brighter(r){return r=r==null?ob:Math.pow(ob,r),new ba(this.r*r,this.g*r,this.b*r,this.opacity)},darker(r){return r=r==null?Rp:Math.pow(Rp,r),new ba(this.r*r,this.g*r,this.b*r,this.opacity)},rgb(){return this},clamp(){return new ba(l0(this.r),l0(this.g),l0(this.b),lb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kD,formatHex:kD,formatHex8:qfe,formatRgb:CD,toString:CD}));function kD(){return`#${Zu(this.r)}${Zu(this.g)}${Zu(this.b)}`}function qfe(){return`#${Zu(this.r)}${Zu(this.g)}${Zu(this.b)}${Zu((isNaN(this.opacity)?1:this.opacity)*255)}`}function CD(){const r=lb(this.opacity);return`${r===1?"rgb(":"rgba("}${l0(this.r)}, ${l0(this.g)}, ${l0(this.b)}${r===1?")":`, ${r})`}`}function lb(r){return isNaN(r)?1:Math.max(0,Math.min(1,r))}function l0(r){return Math.max(0,Math.min(255,Math.round(r)||0))}function Zu(r){return r=l0(r),(r<16?"0":"")+r.toString(16)}function jD(r,e,t,n){return n<=0?r=e=t=NaN:t<=0||t>=1?r=e=NaN:e<=0&&(r=NaN),new Ms(r,e,t,n)}function DH(r){if(r instanceof Ms)return new Ms(r.h,r.s,r.l,r.opacity);if(r instanceof Pg||(r=Pp(r)),!r)return new Ms;if(r instanceof Ms)return r;r=r.rgb();var e=r.r/255,t=r.g/255,n=r.b/255,i=Math.min(e,t,n),a=Math.max(e,t,n),s=NaN,c=a-i,d=(a+i)/2;return c?(e===a?s=(t-n)/c+(t<n)*6:t===a?s=(n-e)/c+2:s=(e-t)/c+4,c/=d<.5?a+i:2-a-i,s*=60):c=d>0&&d<1?0:s,new Ms(s,c,d,r.opacity)}function Hfe(r,e,t,n){return arguments.length===1?DH(r):new Ms(r,e,t,n??1)}function Ms(r,e,t,n){this.h=+r,this.s=+e,this.l=+t,this.opacity=+n}bE(Ms,Hfe,PH(Pg,{brighter(r){return r=r==null?ob:Math.pow(ob,r),new Ms(this.h,this.s,this.l*r,this.opacity)},darker(r){return r=r==null?Rp:Math.pow(Rp,r),new Ms(this.h,this.s,this.l*r,this.opacity)},rgb(){var r=this.h%360+(this.h<0)*360,e=isNaN(r)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,i=2*t-n;return new ba(E_(r>=240?r-240:r+120,i,n),E_(r,i,n),E_(r<120?r+240:r-120,i,n),this.opacity)},clamp(){return new Ms(ID(this.h),By(this.s),By(this.l),lb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const r=lb(this.opacity);return`${r===1?"hsl(":"hsla("}${ID(this.h)}, ${By(this.s)*100}%, ${By(this.l)*100}%${r===1?")":`, ${r})`}`}}));function ID(r){return r=(r||0)%360,r<0?r+360:r}function By(r){return Math.max(0,Math.min(1,r||0))}function E_(r,e,t){return(r<60?e+(t-e)*r/60:r<180?t:r<240?e+(t-e)*(240-r)/60:e)*255}const xE=r=>()=>r;function Gfe(r,e){return function(t){return r+t*e}}function Kfe(r,e,t){return r=Math.pow(r,t),e=Math.pow(e,t)-r,t=1/t,function(n){return Math.pow(r+n*e,t)}}function Wfe(r){return(r=+r)==1?LH:function(e,t){return t-e?Kfe(e,t,r):xE(isNaN(e)?t:e)}}function LH(r,e){var t=e-r;return t?Gfe(r,t):xE(isNaN(r)?e:r)}const RD=(function r(e){var t=Wfe(e);function n(i,a){var s=t((i=JT(i)).r,(a=JT(a)).r),c=t(i.g,a.g),d=t(i.b,a.b),f=LH(i.opacity,a.opacity);return function(m){return i.r=s(m),i.g=c(m),i.b=d(m),i.opacity=f(m),i+""}}return n.gamma=r,n})(1);function Xfe(r,e){e||(e=[]);var t=r?Math.min(e.length,r.length):0,n=e.slice(),i;return function(a){for(i=0;i<t;++i)n[i]=r[i]*(1-a)+e[i]*a;return n}}function Qfe(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Yfe(r,e){var t=e?e.length:0,n=r?Math.min(t,r.length):0,i=new Array(n),a=new Array(t),s;for(s=0;s<n;++s)i[s]=af(r[s],e[s]);for(;s<t;++s)a[s]=e[s];return function(c){for(s=0;s<n;++s)a[s]=i[s](c);return a}}function Zfe(r,e){var t=new Date;return r=+r,e=+e,function(n){return t.setTime(r*(1-n)+e*n),t}}function cb(r,e){return r=+r,e=+e,function(t){return r*(1-t)+e*t}}function Jfe(r,e){var t={},n={},i;(r===null||typeof r!="object")&&(r={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in r?t[i]=af(r[i],e[i]):n[i]=e[i];return function(a){for(i in t)n[i]=t[i](a);return n}}var eA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N_=new RegExp(eA.source,"g");function eme(r){return function(){return r}}function tme(r){return function(e){return r(e)+""}}function rme(r,e){var t=eA.lastIndex=N_.lastIndex=0,n,i,a,s=-1,c=[],d=[];for(r=r+"",e=e+"";(n=eA.exec(r))&&(i=N_.exec(e));)(a=i.index)>t&&(a=e.slice(t,a),c[s]?c[s]+=a:c[++s]=a),(n=n[0])===(i=i[0])?c[s]?c[s]+=i:c[++s]=i:(c[++s]=null,d.push({i:s,x:cb(n,i)})),t=N_.lastIndex;return t<e.length&&(a=e.slice(t),c[s]?c[s]+=a:c[++s]=a),c.length<2?d[0]?tme(d[0].x):eme(e):(e=d.length,function(f){for(var m=0,p;m<e;++m)c[(p=d[m]).i]=p.x(f);return c.join("")})}function af(r,e){var t=typeof e,n;return e==null||t==="boolean"?xE(e):(t==="number"?cb:t==="string"?(n=Pp(e))?(e=n,RD):rme:e instanceof Pp?RD:e instanceof Date?Zfe:Qfe(e)?Xfe:Array.isArray(e)?Yfe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jfe:cb)(r,e)}function wE(r,e){return r=+r,e=+e,function(t){return Math.round(r*(1-t)+e*t)}}function nme(r,e){e===void 0&&(e=r,r=af);for(var t=0,n=e.length-1,i=e[0],a=new Array(n<0?0:n);t<n;)a[t]=r(i,i=e[++t]);return function(s){var c=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[c](s-c)}}function ime(r){return function(){return r}}function ub(r){return+r}var MD=[0,1];function Qi(r){return r}function tA(r,e){return(e-=r=+r)?function(t){return(t-r)/e}:ime(isNaN(e)?NaN:.5)}function ame(r,e){var t;return r>e&&(t=r,r=e,e=t),function(n){return Math.max(r,Math.min(e,n))}}function sme(r,e,t){var n=r[0],i=r[1],a=e[0],s=e[1];return i<n?(n=tA(i,n),a=t(s,a)):(n=tA(n,i),a=t(a,s)),function(c){return a(n(c))}}function ome(r,e,t){var n=Math.min(r.length,e.length)-1,i=new Array(n),a=new Array(n),s=-1;for(r[n]<r[0]&&(r=r.slice().reverse(),e=e.slice().reverse());++s<n;)i[s]=tA(r[s],r[s+1]),a[s]=t(e[s],e[s+1]);return function(c){var d=Mg(r,c,1,n)-1;return a[d](i[d](c))}}function Dg(r,e){return e.domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown())}function Zx(){var r=MD,e=MD,t=af,n,i,a,s=Qi,c,d,f;function m(){var y=Math.min(r.length,e.length);return s!==Qi&&(s=ame(r[0],r[y-1])),c=y>2?ome:sme,d=f=null,p}function p(y){return y==null||isNaN(y=+y)?a:(d||(d=c(r.map(n),e,t)))(n(s(y)))}return p.invert=function(y){return s(i((f||(f=c(e,r.map(n),cb)))(y)))},p.domain=function(y){return arguments.length?(r=Array.from(y,ub),m()):r.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),t=wE,m()},p.clamp=function(y){return arguments.length?(s=y?!0:Qi,m()):s!==Qi},p.interpolate=function(y){return arguments.length?(t=y,m()):t},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,b){return n=y,i=b,m()}}function _E(){return Zx()(Qi,Qi)}function lme(r){return Math.abs(r=Math.round(r))>=1e21?r.toLocaleString("en").replace(/,/g,""):r.toString(10)}function db(r,e){if(!isFinite(r)||r===0)return null;var t=(r=e?r.toExponential(e-1):r.toExponential()).indexOf("e"),n=r.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+r.slice(t+1)]}function Ah(r){return r=db(Math.abs(r)),r?r[1]:NaN}function cme(r,e){return function(t,n){for(var i=t.length,a=[],s=0,c=r[0],d=0;i>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),a.push(t.substring(i-=c,i+c)),!((d+=c+1)>n));)c=r[s=(s+1)%r.length];return a.reverse().join(e)}}function ume(r){return function(e){return e.replace(/[0-9]/g,function(t){return r[+t]})}}var dme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dp(r){if(!(e=dme.exec(r)))throw new Error("invalid format: "+r);var e;return new SE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Dp.prototype=SE.prototype;function SE(r){this.fill=r.fill===void 0?" ":r.fill+"",this.align=r.align===void 0?">":r.align+"",this.sign=r.sign===void 0?"-":r.sign+"",this.symbol=r.symbol===void 0?"":r.symbol+"",this.zero=!!r.zero,this.width=r.width===void 0?void 0:+r.width,this.comma=!!r.comma,this.precision=r.precision===void 0?void 0:+r.precision,this.trim=!!r.trim,this.type=r.type===void 0?"":r.type+""}SE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hme(r){e:for(var e=r.length,t=1,n=-1,i;t<e;++t)switch(r[t]){case".":n=i=t;break;case"0":n===0&&(n=t),i=t;break;default:if(!+r[t])break e;n>0&&(n=0);break}return n>0?r.slice(0,n)+r.slice(i+1):r}var hb;function fme(r,e){var t=db(r,e);if(!t)return hb=void 0,r.toPrecision(e);var n=t[0],i=t[1],a=i-(hb=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+db(r,Math.max(0,e+a-1))[0]}function PD(r,e){var t=db(r,e);if(!t)return r+"";var n=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const DD={"%":(r,e)=>(r*100).toFixed(e),b:r=>Math.round(r).toString(2),c:r=>r+"",d:lme,e:(r,e)=>r.toExponential(e),f:(r,e)=>r.toFixed(e),g:(r,e)=>r.toPrecision(e),o:r=>Math.round(r).toString(8),p:(r,e)=>PD(r*100,e),r:PD,s:fme,X:r=>Math.round(r).toString(16).toUpperCase(),x:r=>Math.round(r).toString(16)};function LD(r){return r}var BD=Array.prototype.map,UD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mme(r){var e=r.grouping===void 0||r.thousands===void 0?LD:cme(BD.call(r.grouping,Number),r.thousands+""),t=r.currency===void 0?"":r.currency[0]+"",n=r.currency===void 0?"":r.currency[1]+"",i=r.decimal===void 0?".":r.decimal+"",a=r.numerals===void 0?LD:ume(BD.call(r.numerals,String)),s=r.percent===void 0?"%":r.percent+"",c=r.minus===void 0?"":r.minus+"",d=r.nan===void 0?"NaN":r.nan+"";function f(p,y){p=Dp(p);var b=p.fill,T=p.align,S=p.sign,w=p.symbol,E=p.zero,I=p.width,C=p.comma,B=p.precision,R=p.trim,D=p.type;D==="n"?(C=!0,D="g"):DD[D]||(B===void 0&&(B=12),R=!0,D="g"),(E||b==="0"&&T==="=")&&(E=!0,b="0",T="=");var A=(y&&y.prefix!==void 0?y.prefix:"")+(w==="$"?t:w==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():""),k=(w==="$"?n:/[%p]/.test(D)?s:"")+(y&&y.suffix!==void 0?y.suffix:""),N=DD[D],U=/[defgprs%]/.test(D);B=B===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,B)):Math.max(0,Math.min(20,B));function M($){var z=A,Q=k,ee,K,Z;if(D==="c")Q=N($)+Q,$="";else{$=+$;var Y=$<0||1/$<0;if($=isNaN($)?d:N(Math.abs($),B),R&&($=hme($)),Y&&+$==0&&S!=="+"&&(Y=!1),z=(Y?S==="("?S:c:S==="-"||S==="("?"":S)+z,Q=(D==="s"&&!isNaN($)&&hb!==void 0?UD[8+hb/3]:"")+Q+(Y&&S==="("?")":""),U){for(ee=-1,K=$.length;++ee<K;)if(Z=$.charCodeAt(ee),48>Z||Z>57){Q=(Z===46?i+$.slice(ee+1):$.slice(ee))+Q,$=$.slice(0,ee);break}}}C&&!E&&($=e($,1/0));var ge=z.length+$.length+Q.length,ae=ge<I?new Array(I-ge+1).join(b):"";switch(C&&E&&($=e(ae+$,ae.length?I-Q.length:1/0),ae=""),T){case"<":$=z+$+Q+ae;break;case"=":$=z+ae+$+Q;break;case"^":$=ae.slice(0,ge=ae.length>>1)+z+$+Q+ae.slice(ge);break;default:$=ae+z+$+Q;break}return a($)}return M.toString=function(){return p+""},M}function m(p,y){var b=Math.max(-8,Math.min(8,Math.floor(Ah(y)/3)))*3,T=Math.pow(10,-b),S=f((p=Dp(p),p.type="f",p),{suffix:UD[8+b/3]});return function(w){return S(T*w)}}return{format:f,formatPrefix:m}}var Uy,TE,BH;pme({thousands:",",grouping:[3],currency:["$",""]});function pme(r){return Uy=mme(r),TE=Uy.format,BH=Uy.formatPrefix,Uy}function gme(r){return Math.max(0,-Ah(Math.abs(r)))}function yme(r,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ah(e)/3)))*3-Ah(Math.abs(r)))}function vme(r,e){return r=Math.abs(r),e=Math.abs(e)-r,Math.max(0,Ah(e)-Ah(r))+1}function UH(r,e,t,n){var i=YT(r,e,t),a;switch(n=Dp(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(r),Math.abs(e));return n.precision==null&&!isNaN(a=yme(i,s))&&(n.precision=a),BH(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=vme(i,Math.max(Math.abs(r),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=gme(i))&&(n.precision=a-(n.type==="%")*2);break}}return TE(n)}function au(r){var e=r.domain;return r.ticks=function(t){var n=e();return XT(n[0],n[n.length-1],t??10)},r.tickFormat=function(t,n){var i=e();return UH(i[0],i[i.length-1],t??10,n)},r.nice=function(t){t==null&&(t=10);var n=e(),i=0,a=n.length-1,s=n[i],c=n[a],d,f,m=10;for(c<s&&(f=s,s=c,c=f,f=i,i=a,a=f);m-- >0;){if(f=QT(s,c,t),f===d)return n[i]=s,n[a]=c,e(n);if(f>0)s=Math.floor(s/f)*f,c=Math.ceil(c/f)*f;else if(f<0)s=Math.ceil(s*f)/f,c=Math.floor(c*f)/f;else break;d=f}return r},r}function fb(){var r=_E();return r.copy=function(){return Dg(r,fb())},xs.apply(r,arguments),au(r)}function zH(r){var e;function t(n){return n==null||isNaN(n=+n)?e:n}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(r=Array.from(n,ub),t):r.slice()},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return zH(r).unknown(e)},r=arguments.length?Array.from(r,ub):[0,1],au(t)}function VH(r,e){r=r.slice();var t=0,n=r.length-1,i=r[t],a=r[n],s;return a<i&&(s=t,t=n,n=s,s=i,i=a,a=s),r[t]=e.floor(i),r[n]=e.ceil(a),r}function zD(r){return Math.log(r)}function VD(r){return Math.exp(r)}function bme(r){return-Math.log(-r)}function xme(r){return-Math.exp(-r)}function wme(r){return isFinite(r)?+("1e"+r):r<0?0:r}function _me(r){return r===10?wme:r===Math.E?Math.exp:e=>Math.pow(r,e)}function Sme(r){return r===Math.E?Math.log:r===10&&Math.log10||r===2&&Math.log2||(r=Math.log(r),e=>Math.log(e)/r)}function $D(r){return(e,t)=>-r(-e,t)}function AE(r){const e=r(zD,VD),t=e.domain;let n=10,i,a;function s(){return i=Sme(n),a=_me(n),t()[0]<0?(i=$D(i),a=$D(a),r(bme,xme)):r(zD,VD),e}return e.base=function(c){return arguments.length?(n=+c,s()):n},e.domain=function(c){return arguments.length?(t(c),s()):t()},e.ticks=c=>{const d=t();let f=d[0],m=d[d.length-1];const p=m<f;p&&([f,m]=[m,f]);let y=i(f),b=i(m),T,S;const w=c==null?10:+c;let E=[];if(!(n%1)&&b-y<w){if(y=Math.floor(y),b=Math.ceil(b),f>0){for(;y<=b;++y)for(T=1;T<n;++T)if(S=y<0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;E.push(S)}}else for(;y<=b;++y)for(T=n-1;T>=1;--T)if(S=y>0?T/a(-y):T*a(y),!(S<f)){if(S>m)break;E.push(S)}E.length*2<w&&(E=XT(f,m,w))}else E=XT(y,b,Math.min(b-y,w)).map(a);return p?E.reverse():E},e.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Dp(d)).precision==null&&(d.trim=!0),d=TE(d)),c===1/0)return d;const f=Math.max(1,n*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*n<n-.5&&(p*=n),p<=f?d(m):""}},e.nice=()=>t(VH(t(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function $H(){const r=AE(Zx()).domain([1,10]);return r.copy=()=>Dg(r,$H()).base(r.base()),xs.apply(r,arguments),r}function FD(r){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/r))}}function qD(r){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*r}}function EE(r){var e=1,t=r(FD(e),qD(e));return t.constant=function(n){return arguments.length?r(FD(e=+n),qD(e)):e},au(t)}function FH(){var r=EE(Zx());return r.copy=function(){return Dg(r,FH()).constant(r.constant())},xs.apply(r,arguments)}function HD(r){return function(e){return e<0?-Math.pow(-e,r):Math.pow(e,r)}}function Tme(r){return r<0?-Math.sqrt(-r):Math.sqrt(r)}function Ame(r){return r<0?-r*r:r*r}function NE(r){var e=r(Qi,Qi),t=1;function n(){return t===1?r(Qi,Qi):t===.5?r(Tme,Ame):r(HD(t),HD(1/t))}return e.exponent=function(i){return arguments.length?(t=+i,n()):t},au(e)}function OE(){var r=NE(Zx());return r.copy=function(){return Dg(r,OE()).exponent(r.exponent())},xs.apply(r,arguments),r}function Eme(){return OE.apply(null,arguments).exponent(.5)}function GD(r){return Math.sign(r)*r*r}function Nme(r){return Math.sign(r)*Math.sqrt(Math.abs(r))}function qH(){var r=_E(),e=[0,1],t=!1,n;function i(a){var s=Nme(r(a));return isNaN(s)?n:t?Math.round(s):s}return i.invert=function(a){return r.invert(GD(a))},i.domain=function(a){return arguments.length?(r.domain(a),i):r.domain()},i.range=function(a){return arguments.length?(r.range((e=Array.from(a,ub)).map(GD)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(t=!!a,i):t},i.clamp=function(a){return arguments.length?(r.clamp(a),i):r.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return qH(r.domain(),e).round(t).clamp(r.clamp()).unknown(n)},xs.apply(i,arguments),au(i)}function HH(){var r=[],e=[],t=[],n;function i(){var s=0,c=Math.max(1,e.length);for(t=new Array(c-1);++s<c;)t[s-1]=Ife(r,s/c);return a}function a(s){return s==null||isNaN(s=+s)?n:e[Mg(t,s)]}return a.invertExtent=function(s){var c=e.indexOf(s);return c<0?[NaN,NaN]:[c>0?t[c-1]:r[0],c<t.length?t[c]:r[r.length-1]]},a.domain=function(s){if(!arguments.length)return r.slice();r=[];for(let c of s)c!=null&&!isNaN(c=+c)&&r.push(c);return r.sort($c),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return t.slice()},a.copy=function(){return HH().domain(r).range(e).unknown(n)},xs.apply(a,arguments)}function GH(){var r=0,e=1,t=1,n=[.5],i=[0,1],a;function s(d){return d!=null&&d<=d?i[Mg(n,d,0,t)]:a}function c(){var d=-1;for(n=new Array(t);++d<t;)n[d]=((d+1)*e-(d-t)*r)/(t+1);return s}return s.domain=function(d){return arguments.length?([r,e]=d,r=+r,e=+e,c()):[r,e]},s.range=function(d){return arguments.length?(t=(i=Array.from(d)).length-1,c()):i.slice()},s.invertExtent=function(d){var f=i.indexOf(d);return f<0?[NaN,NaN]:f<1?[r,n[0]]:f>=t?[n[t-1],e]:[n[f-1],n[f]]},s.unknown=function(d){return arguments.length&&(a=d),s},s.thresholds=function(){return n.slice()},s.copy=function(){return GH().domain([r,e]).range(i).unknown(a)},xs.apply(au(s),arguments)}function KH(){var r=[.5],e=[0,1],t,n=1;function i(a){return a!=null&&a<=a?e[Mg(r,a,0,n)]:t}return i.domain=function(a){return arguments.length?(r=Array.from(a),n=Math.min(r.length,e.length-1),i):r.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(r.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[r[s-1],r[s]]},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return KH().domain(r).range(e).unknown(t)},xs.apply(i,arguments)}const O_=new Date,k_=new Date;function Jn(r,e,t,n){function i(a){return r(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(r(a=new Date(+a)),a),i.ceil=a=>(r(a=new Date(a-1)),e(a,1),r(a),a),i.round=a=>{const s=i(a),c=i.ceil(a);return a-s<c-a?s:c},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,c)=>{const d=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<s)||!(c>0))return d;let f;do d.push(f=new Date(+a)),e(a,c),r(a);while(f<a&&a<s);return d},i.filter=a=>Jn(s=>{if(s>=s)for(;r(s),!a(s);)s.setTime(s-1)},(s,c)=>{if(s>=s)if(c<0)for(;++c<=0;)for(;e(s,-1),!a(s););else for(;--c>=0;)for(;e(s,1),!a(s););}),t&&(i.count=(a,s)=>(O_.setTime(+a),k_.setTime(+s),r(O_),r(k_),Math.floor(t(O_,k_))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const mb=Jn(()=>{},(r,e)=>{r.setTime(+r+e)},(r,e)=>e-r);mb.every=r=>(r=Math.floor(r),!isFinite(r)||!(r>0)?null:r>1?Jn(e=>{e.setTime(Math.floor(e/r)*r)},(e,t)=>{e.setTime(+e+t*r)},(e,t)=>(t-e)/r):mb);mb.range;const cl=1e3,ls=cl*60,ul=ls*60,Nl=ul*24,kE=Nl*7,KD=Nl*30,C_=Nl*365,Ju=Jn(r=>{r.setTime(r-r.getMilliseconds())},(r,e)=>{r.setTime(+r+e*cl)},(r,e)=>(e-r)/cl,r=>r.getUTCSeconds());Ju.range;const CE=Jn(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*cl)},(r,e)=>{r.setTime(+r+e*ls)},(r,e)=>(e-r)/ls,r=>r.getMinutes());CE.range;const jE=Jn(r=>{r.setUTCSeconds(0,0)},(r,e)=>{r.setTime(+r+e*ls)},(r,e)=>(e-r)/ls,r=>r.getUTCMinutes());jE.range;const IE=Jn(r=>{r.setTime(r-r.getMilliseconds()-r.getSeconds()*cl-r.getMinutes()*ls)},(r,e)=>{r.setTime(+r+e*ul)},(r,e)=>(e-r)/ul,r=>r.getHours());IE.range;const RE=Jn(r=>{r.setUTCMinutes(0,0,0)},(r,e)=>{r.setTime(+r+e*ul)},(r,e)=>(e-r)/ul,r=>r.getUTCHours());RE.range;const Lg=Jn(r=>r.setHours(0,0,0,0),(r,e)=>r.setDate(r.getDate()+e),(r,e)=>(e-r-(e.getTimezoneOffset()-r.getTimezoneOffset())*ls)/Nl,r=>r.getDate()-1);Lg.range;const Jx=Jn(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Nl,r=>r.getUTCDate()-1);Jx.range;const WH=Jn(r=>{r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCDate(r.getUTCDate()+e)},(r,e)=>(e-r)/Nl,r=>Math.floor(r/Nl));WH.range;function L0(r){return Jn(e=>{e.setDate(e.getDate()-(e.getDay()+7-r)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ls)/kE)}const e2=L0(0),pb=L0(1),Ome=L0(2),kme=L0(3),Eh=L0(4),Cme=L0(5),jme=L0(6);e2.range;pb.range;Ome.range;kme.range;Eh.range;Cme.range;jme.range;function B0(r){return Jn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-r)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/kE)}const t2=B0(0),gb=B0(1),Ime=B0(2),Rme=B0(3),Nh=B0(4),Mme=B0(5),Pme=B0(6);t2.range;gb.range;Ime.range;Rme.range;Nh.range;Mme.range;Pme.range;const ME=Jn(r=>{r.setDate(1),r.setHours(0,0,0,0)},(r,e)=>{r.setMonth(r.getMonth()+e)},(r,e)=>e.getMonth()-r.getMonth()+(e.getFullYear()-r.getFullYear())*12,r=>r.getMonth());ME.range;const PE=Jn(r=>{r.setUTCDate(1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCMonth(r.getUTCMonth()+e)},(r,e)=>e.getUTCMonth()-r.getUTCMonth()+(e.getUTCFullYear()-r.getUTCFullYear())*12,r=>r.getUTCMonth());PE.range;const Ol=Jn(r=>{r.setMonth(0,1),r.setHours(0,0,0,0)},(r,e)=>{r.setFullYear(r.getFullYear()+e)},(r,e)=>e.getFullYear()-r.getFullYear(),r=>r.getFullYear());Ol.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:Jn(e=>{e.setFullYear(Math.floor(e.getFullYear()/r)*r),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*r)});Ol.range;const kl=Jn(r=>{r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,e)=>{r.setUTCFullYear(r.getUTCFullYear()+e)},(r,e)=>e.getUTCFullYear()-r.getUTCFullYear(),r=>r.getUTCFullYear());kl.every=r=>!isFinite(r=Math.floor(r))||!(r>0)?null:Jn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/r)*r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*r)});kl.range;function XH(r,e,t,n,i,a){const s=[[Ju,1,cl],[Ju,5,5*cl],[Ju,15,15*cl],[Ju,30,30*cl],[a,1,ls],[a,5,5*ls],[a,15,15*ls],[a,30,30*ls],[i,1,ul],[i,3,3*ul],[i,6,6*ul],[i,12,12*ul],[n,1,Nl],[n,2,2*Nl],[t,1,kE],[e,1,KD],[e,3,3*KD],[r,1,C_]];function c(f,m,p){const y=m<f;y&&([f,m]=[m,f]);const b=p&&typeof p.range=="function"?p:d(f,m,p),T=b?b.range(f,+m+1):[];return y?T.reverse():T}function d(f,m,p){const y=Math.abs(m-f)/p,b=yE(([,,w])=>w).right(s,y);if(b===s.length)return r.every(YT(f/C_,m/C_,p));if(b===0)return mb.every(Math.max(YT(f,m,p),1));const[T,S]=s[y/s[b-1][2]<s[b][2]/y?b-1:b];return T.every(S)}return[c,d]}const[Dme,Lme]=XH(kl,PE,t2,WH,RE,jE),[Bme,Ume]=XH(Ol,ME,e2,Lg,IE,CE);function j_(r){if(0<=r.y&&r.y<100){var e=new Date(-1,r.m,r.d,r.H,r.M,r.S,r.L);return e.setFullYear(r.y),e}return new Date(r.y,r.m,r.d,r.H,r.M,r.S,r.L)}function I_(r){if(0<=r.y&&r.y<100){var e=new Date(Date.UTC(-1,r.m,r.d,r.H,r.M,r.S,r.L));return e.setUTCFullYear(r.y),e}return new Date(Date.UTC(r.y,r.m,r.d,r.H,r.M,r.S,r.L))}function gm(r,e,t){return{y:r,m:e,d:t,H:0,M:0,S:0,L:0}}function zme(r){var e=r.dateTime,t=r.date,n=r.time,i=r.periods,a=r.days,s=r.shortDays,c=r.months,d=r.shortMonths,f=ym(i),m=vm(i),p=ym(a),y=vm(a),b=ym(s),T=vm(s),S=ym(c),w=vm(c),E=ym(d),I=vm(d),C={a:Z,A:Y,b:ge,B:ae,c:null,d:JD,e:JD,f:cpe,g:bpe,G:wpe,H:spe,I:ope,j:lpe,L:QH,m:upe,M:dpe,p:X,q:J,Q:rL,s:nL,S:hpe,u:fpe,U:mpe,V:ppe,w:gpe,W:ype,x:null,X:null,y:vpe,Y:xpe,Z:_pe,"%":tL},B={a:ce,A:Ne,b:se,B:ke,c:null,d:eL,e:eL,f:Epe,g:Dpe,G:Bpe,H:Spe,I:Tpe,j:Ape,L:ZH,m:Npe,M:Ope,p:Me,q:ot,Q:rL,s:nL,S:kpe,u:Cpe,U:jpe,V:Ipe,w:Rpe,W:Mpe,x:null,X:null,y:Ppe,Y:Lpe,Z:Upe,"%":tL},R={a:U,A:M,b:$,B:z,c:Q,d:YD,e:YD,f:rpe,g:QD,G:XD,H:ZD,I:ZD,j:Zme,L:tpe,m:Yme,M:Jme,p:N,q:Qme,Q:ipe,s:ape,S:epe,u:Hme,U:Gme,V:Kme,w:qme,W:Wme,x:ee,X:K,y:QD,Y:XD,Z:Xme,"%":npe};C.x=D(t,C),C.X=D(n,C),C.c=D(e,C),B.x=D(t,B),B.X=D(n,B),B.c=D(e,B);function D(Ee,He){return function(he){var pe=[],Ye=-1,Ke=0,at=Ee.length,tt,Gt,Ie;for(he instanceof Date||(he=new Date(+he));++Ye<at;)Ee.charCodeAt(Ye)===37&&(pe.push(Ee.slice(Ke,Ye)),(Gt=WD[tt=Ee.charAt(++Ye)])!=null?tt=Ee.charAt(++Ye):Gt=tt==="e"?" ":"0",(Ie=He[tt])&&(tt=Ie(he,Gt)),pe.push(tt),Ke=Ye+1);return pe.push(Ee.slice(Ke,Ye)),pe.join("")}}function A(Ee,He){return function(he){var pe=gm(1900,void 0,1),Ye=k(pe,Ee,he+="",0),Ke,at;if(Ye!=he.length)return null;if("Q"in pe)return new Date(pe.Q);if("s"in pe)return new Date(pe.s*1e3+("L"in pe?pe.L:0));if(He&&!("Z"in pe)&&(pe.Z=0),"p"in pe&&(pe.H=pe.H%12+pe.p*12),pe.m===void 0&&(pe.m="q"in pe?pe.q:0),"V"in pe){if(pe.V<1||pe.V>53)return null;"w"in pe||(pe.w=1),"Z"in pe?(Ke=I_(gm(pe.y,0,1)),at=Ke.getUTCDay(),Ke=at>4||at===0?gb.ceil(Ke):gb(Ke),Ke=Jx.offset(Ke,(pe.V-1)*7),pe.y=Ke.getUTCFullYear(),pe.m=Ke.getUTCMonth(),pe.d=Ke.getUTCDate()+(pe.w+6)%7):(Ke=j_(gm(pe.y,0,1)),at=Ke.getDay(),Ke=at>4||at===0?pb.ceil(Ke):pb(Ke),Ke=Lg.offset(Ke,(pe.V-1)*7),pe.y=Ke.getFullYear(),pe.m=Ke.getMonth(),pe.d=Ke.getDate()+(pe.w+6)%7)}else("W"in pe||"U"in pe)&&("w"in pe||(pe.w="u"in pe?pe.u%7:"W"in pe?1:0),at="Z"in pe?I_(gm(pe.y,0,1)).getUTCDay():j_(gm(pe.y,0,1)).getDay(),pe.m=0,pe.d="W"in pe?(pe.w+6)%7+pe.W*7-(at+5)%7:pe.w+pe.U*7-(at+6)%7);return"Z"in pe?(pe.H+=pe.Z/100|0,pe.M+=pe.Z%100,I_(pe)):j_(pe)}}function k(Ee,He,he,pe){for(var Ye=0,Ke=He.length,at=he.length,tt,Gt;Ye<Ke;){if(pe>=at)return-1;if(tt=He.charCodeAt(Ye++),tt===37){if(tt=He.charAt(Ye++),Gt=R[tt in WD?He.charAt(Ye++):tt],!Gt||(pe=Gt(Ee,he,pe))<0)return-1}else if(tt!=he.charCodeAt(pe++))return-1}return pe}function N(Ee,He,he){var pe=f.exec(He.slice(he));return pe?(Ee.p=m.get(pe[0].toLowerCase()),he+pe[0].length):-1}function U(Ee,He,he){var pe=b.exec(He.slice(he));return pe?(Ee.w=T.get(pe[0].toLowerCase()),he+pe[0].length):-1}function M(Ee,He,he){var pe=p.exec(He.slice(he));return pe?(Ee.w=y.get(pe[0].toLowerCase()),he+pe[0].length):-1}function $(Ee,He,he){var pe=E.exec(He.slice(he));return pe?(Ee.m=I.get(pe[0].toLowerCase()),he+pe[0].length):-1}function z(Ee,He,he){var pe=S.exec(He.slice(he));return pe?(Ee.m=w.get(pe[0].toLowerCase()),he+pe[0].length):-1}function Q(Ee,He,he){return k(Ee,e,He,he)}function ee(Ee,He,he){return k(Ee,t,He,he)}function K(Ee,He,he){return k(Ee,n,He,he)}function Z(Ee){return s[Ee.getDay()]}function Y(Ee){return a[Ee.getDay()]}function ge(Ee){return d[Ee.getMonth()]}function ae(Ee){return c[Ee.getMonth()]}function X(Ee){return i[+(Ee.getHours()>=12)]}function J(Ee){return 1+~~(Ee.getMonth()/3)}function ce(Ee){return s[Ee.getUTCDay()]}function Ne(Ee){return a[Ee.getUTCDay()]}function se(Ee){return d[Ee.getUTCMonth()]}function ke(Ee){return c[Ee.getUTCMonth()]}function Me(Ee){return i[+(Ee.getUTCHours()>=12)]}function ot(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var He=D(Ee+="",C);return He.toString=function(){return Ee},He},parse:function(Ee){var He=A(Ee+="",!1);return He.toString=function(){return Ee},He},utcFormat:function(Ee){var He=D(Ee+="",B);return He.toString=function(){return Ee},He},utcParse:function(Ee){var He=A(Ee+="",!0);return He.toString=function(){return Ee},He}}}var WD={"-":"",_:" ",0:"0"},ci=/^\s*\d+/,Vme=/^%/,$me=/[\\^$*+?|[\]().{}]/g;function hr(r,e,t){var n=r<0?"-":"",i=(n?-r:r)+"",a=i.length;return n+(a<t?new Array(t-a+1).join(e)+i:i)}function Fme(r){return r.replace($me,"\\$&")}function ym(r){return new RegExp("^(?:"+r.map(Fme).join("|")+")","i")}function vm(r){return new Map(r.map((e,t)=>[e.toLowerCase(),t]))}function qme(r,e,t){var n=ci.exec(e.slice(t,t+1));return n?(r.w=+n[0],t+n[0].length):-1}function Hme(r,e,t){var n=ci.exec(e.slice(t,t+1));return n?(r.u=+n[0],t+n[0].length):-1}function Gme(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.U=+n[0],t+n[0].length):-1}function Kme(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.V=+n[0],t+n[0].length):-1}function Wme(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.W=+n[0],t+n[0].length):-1}function XD(r,e,t){var n=ci.exec(e.slice(t,t+4));return n?(r.y=+n[0],t+n[0].length):-1}function QD(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function Xme(r,e,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(t,t+6));return n?(r.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function Qme(r,e,t){var n=ci.exec(e.slice(t,t+1));return n?(r.q=n[0]*3-3,t+n[0].length):-1}function Yme(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.m=n[0]-1,t+n[0].length):-1}function YD(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.d=+n[0],t+n[0].length):-1}function Zme(r,e,t){var n=ci.exec(e.slice(t,t+3));return n?(r.m=0,r.d=+n[0],t+n[0].length):-1}function ZD(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.H=+n[0],t+n[0].length):-1}function Jme(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.M=+n[0],t+n[0].length):-1}function epe(r,e,t){var n=ci.exec(e.slice(t,t+2));return n?(r.S=+n[0],t+n[0].length):-1}function tpe(r,e,t){var n=ci.exec(e.slice(t,t+3));return n?(r.L=+n[0],t+n[0].length):-1}function rpe(r,e,t){var n=ci.exec(e.slice(t,t+6));return n?(r.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function npe(r,e,t){var n=Vme.exec(e.slice(t,t+1));return n?t+n[0].length:-1}function ipe(r,e,t){var n=ci.exec(e.slice(t));return n?(r.Q=+n[0],t+n[0].length):-1}function ape(r,e,t){var n=ci.exec(e.slice(t));return n?(r.s=+n[0],t+n[0].length):-1}function JD(r,e){return hr(r.getDate(),e,2)}function spe(r,e){return hr(r.getHours(),e,2)}function ope(r,e){return hr(r.getHours()%12||12,e,2)}function lpe(r,e){return hr(1+Lg.count(Ol(r),r),e,3)}function QH(r,e){return hr(r.getMilliseconds(),e,3)}function cpe(r,e){return QH(r,e)+"000"}function upe(r,e){return hr(r.getMonth()+1,e,2)}function dpe(r,e){return hr(r.getMinutes(),e,2)}function hpe(r,e){return hr(r.getSeconds(),e,2)}function fpe(r){var e=r.getDay();return e===0?7:e}function mpe(r,e){return hr(e2.count(Ol(r)-1,r),e,2)}function YH(r){var e=r.getDay();return e>=4||e===0?Eh(r):Eh.ceil(r)}function ppe(r,e){return r=YH(r),hr(Eh.count(Ol(r),r)+(Ol(r).getDay()===4),e,2)}function gpe(r){return r.getDay()}function ype(r,e){return hr(pb.count(Ol(r)-1,r),e,2)}function vpe(r,e){return hr(r.getFullYear()%100,e,2)}function bpe(r,e){return r=YH(r),hr(r.getFullYear()%100,e,2)}function xpe(r,e){return hr(r.getFullYear()%1e4,e,4)}function wpe(r,e){var t=r.getDay();return r=t>=4||t===0?Eh(r):Eh.ceil(r),hr(r.getFullYear()%1e4,e,4)}function _pe(r){var e=r.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+hr(e/60|0,"0",2)+hr(e%60,"0",2)}function eL(r,e){return hr(r.getUTCDate(),e,2)}function Spe(r,e){return hr(r.getUTCHours(),e,2)}function Tpe(r,e){return hr(r.getUTCHours()%12||12,e,2)}function Ape(r,e){return hr(1+Jx.count(kl(r),r),e,3)}function ZH(r,e){return hr(r.getUTCMilliseconds(),e,3)}function Epe(r,e){return ZH(r,e)+"000"}function Npe(r,e){return hr(r.getUTCMonth()+1,e,2)}function Ope(r,e){return hr(r.getUTCMinutes(),e,2)}function kpe(r,e){return hr(r.getUTCSeconds(),e,2)}function Cpe(r){var e=r.getUTCDay();return e===0?7:e}function jpe(r,e){return hr(t2.count(kl(r)-1,r),e,2)}function JH(r){var e=r.getUTCDay();return e>=4||e===0?Nh(r):Nh.ceil(r)}function Ipe(r,e){return r=JH(r),hr(Nh.count(kl(r),r)+(kl(r).getUTCDay()===4),e,2)}function Rpe(r){return r.getUTCDay()}function Mpe(r,e){return hr(gb.count(kl(r)-1,r),e,2)}function Ppe(r,e){return hr(r.getUTCFullYear()%100,e,2)}function Dpe(r,e){return r=JH(r),hr(r.getUTCFullYear()%100,e,2)}function Lpe(r,e){return hr(r.getUTCFullYear()%1e4,e,4)}function Bpe(r,e){var t=r.getUTCDay();return r=t>=4||t===0?Nh(r):Nh.ceil(r),hr(r.getUTCFullYear()%1e4,e,4)}function Upe(){return"+0000"}function tL(){return"%"}function rL(r){return+r}function nL(r){return Math.floor(+r/1e3)}var Id,eG,tG;zpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zpe(r){return Id=zme(r),eG=Id.format,Id.parse,tG=Id.utcFormat,Id.utcParse,Id}function Vpe(r){return new Date(r)}function $pe(r){return r instanceof Date?+r:+new Date(+r)}function DE(r,e,t,n,i,a,s,c,d,f){var m=_E(),p=m.invert,y=m.domain,b=f(".%L"),T=f(":%S"),S=f("%I:%M"),w=f("%I %p"),E=f("%a %d"),I=f("%b %d"),C=f("%B"),B=f("%Y");function R(D){return(d(D)<D?b:c(D)<D?T:s(D)<D?S:a(D)<D?w:n(D)<D?i(D)<D?E:I:t(D)<D?C:B)(D)}return m.invert=function(D){return new Date(p(D))},m.domain=function(D){return arguments.length?y(Array.from(D,$pe)):y().map(Vpe)},m.ticks=function(D){var A=y();return r(A[0],A[A.length-1],D??10)},m.tickFormat=function(D,A){return A==null?R:f(A)},m.nice=function(D){var A=y();return(!D||typeof D.range!="function")&&(D=e(A[0],A[A.length-1],D??10)),D?y(VH(A,D)):m},m.copy=function(){return Dg(m,DE(r,e,t,n,i,a,s,c,d,f))},m}function Fpe(){return xs.apply(DE(Bme,Ume,Ol,ME,e2,Lg,IE,CE,Ju,eG).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qpe(){return xs.apply(DE(Dme,Lme,kl,PE,t2,Jx,RE,jE,Ju,tG).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function r2(){var r=0,e=1,t,n,i,a,s=Qi,c=!1,d;function f(p){return p==null||isNaN(p=+p)?d:s(i===0?.5:(p=(a(p)-t)*i,c?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([r,e]=p,t=a(r=+r),n=a(e=+e),i=t===n?0:1/(n-t),f):[r,e]},f.clamp=function(p){return arguments.length?(c=!!p,f):c},f.interpolator=function(p){return arguments.length?(s=p,f):s};function m(p){return function(y){var b,T;return arguments.length?([b,T]=y,s=p(b,T),f):[s(0),s(1)]}}return f.range=m(af),f.rangeRound=m(wE),f.unknown=function(p){return arguments.length?(d=p,f):d},function(p){return a=p,t=p(r),n=p(e),i=t===n?0:1/(n-t),f}}function su(r,e){return e.domain(r.domain()).interpolator(r.interpolator()).clamp(r.clamp()).unknown(r.unknown())}function rG(){var r=au(r2()(Qi));return r.copy=function(){return su(r,rG())},Dl.apply(r,arguments)}function nG(){var r=AE(r2()).domain([1,10]);return r.copy=function(){return su(r,nG()).base(r.base())},Dl.apply(r,arguments)}function iG(){var r=EE(r2());return r.copy=function(){return su(r,iG()).constant(r.constant())},Dl.apply(r,arguments)}function LE(){var r=NE(r2());return r.copy=function(){return su(r,LE()).exponent(r.exponent())},Dl.apply(r,arguments)}function Hpe(){return LE.apply(null,arguments).exponent(.5)}function aG(){var r=[],e=Qi;function t(n){if(n!=null&&!isNaN(n=+n))return e((Mg(r,n,1)-1)/(r.length-1))}return t.domain=function(n){if(!arguments.length)return r.slice();r=[];for(let i of n)i!=null&&!isNaN(i=+i)&&r.push(i);return r.sort($c),t},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.range=function(){return r.map((n,i)=>e(i/(r.length-1)))},t.quantiles=function(n){return Array.from({length:n+1},(i,a)=>jfe(r,a/n))},t.copy=function(){return aG(e).domain(r)},Dl.apply(t,arguments)}function n2(){var r=0,e=.5,t=1,n=1,i,a,s,c,d,f=Qi,m,p=!1,y;function b(S){return isNaN(S=+S)?y:(S=.5+((S=+m(S))-a)*(n*S<n*a?c:d),f(p?Math.max(0,Math.min(1,S)):S))}b.domain=function(S){return arguments.length?([r,e,t]=S,i=m(r=+r),a=m(e=+e),s=m(t=+t),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b):[r,e,t]},b.clamp=function(S){return arguments.length?(p=!!S,b):p},b.interpolator=function(S){return arguments.length?(f=S,b):f};function T(S){return function(w){var E,I,C;return arguments.length?([E,I,C]=w,f=nme(S,[E,I,C]),b):[f(0),f(.5),f(1)]}}return b.range=T(af),b.rangeRound=T(wE),b.unknown=function(S){return arguments.length?(y=S,b):y},function(S){return m=S,i=S(r),a=S(e),s=S(t),c=i===a?0:.5/(a-i),d=a===s?0:.5/(s-a),n=a<i?-1:1,b}}function sG(){var r=au(n2()(Qi));return r.copy=function(){return su(r,sG())},Dl.apply(r,arguments)}function oG(){var r=AE(n2()).domain([.1,1,10]);return r.copy=function(){return su(r,oG()).base(r.base())},Dl.apply(r,arguments)}function lG(){var r=EE(n2());return r.copy=function(){return su(r,lG()).constant(r.constant())},Dl.apply(r,arguments)}function BE(){var r=NE(n2());return r.copy=function(){return su(r,BE()).exponent(r.exponent())},Dl.apply(r,arguments)}function Gpe(){return BE.apply(null,arguments).exponent(.5)}const iL=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ip,scaleDiverging:sG,scaleDivergingLog:oG,scaleDivergingPow:BE,scaleDivergingSqrt:Gpe,scaleDivergingSymlog:lG,scaleIdentity:zH,scaleImplicit:ZT,scaleLinear:fb,scaleLog:$H,scaleOrdinal:vE,scalePoint:Km,scalePow:OE,scaleQuantile:HH,scaleQuantize:GH,scaleRadial:qH,scaleSequential:rG,scaleSequentialLog:nG,scaleSequentialPow:LE,scaleSequentialQuantile:aG,scaleSequentialSqrt:Hpe,scaleSequentialSymlog:iG,scaleSqrt:Eme,scaleSymlog:FH,scaleThreshold:KH,scaleTime:Fpe,scaleUtc:qpe,tickFormat:UH},Symbol.toStringTag,{value:"Module"}));var R_,aL;function i2(){if(aL)return R_;aL=1;var r=tf();function e(t,n,i){for(var a=-1,s=t.length;++a<s;){var c=t[a],d=n(c);if(d!=null&&(f===void 0?d===d&&!r(d):i(d,f)))var f=d,m=c}return m}return R_=e,R_}var M_,sL;function cG(){if(sL)return M_;sL=1;function r(e,t){return e>t}return M_=r,M_}var P_,oL;function Kpe(){if(oL)return P_;oL=1;var r=i2(),e=cG(),t=nf();function n(i){return i&&i.length?r(i,t,e):void 0}return P_=n,P_}var Wpe=Kpe();const a2=mr(Wpe);var D_,lL;function uG(){if(lL)return D_;lL=1;function r(e,t){return e<t}return D_=r,D_}var L_,cL;function Xpe(){if(cL)return L_;cL=1;var r=i2(),e=uG(),t=nf();function n(i){return i&&i.length?r(i,t,e):void 0}return L_=n,L_}var Qpe=Xpe();const s2=mr(Qpe);var B_,uL;function Ype(){if(uL)return B_;uL=1;var r=eE(),e=Oo(),t=vH(),n=_a();function i(a,s){var c=n(a)?r:t;return c(a,e(s,3))}return B_=i,B_}var U_,dL;function Zpe(){if(dL)return U_;dL=1;var r=gH(),e=Ype();function t(n,i){return r(e(n,i),1)}return U_=t,U_}var Jpe=Zpe();const ege=mr(Jpe);var z_,hL;function tge(){if(hL)return z_;hL=1;var r=hE();function e(t,n){return r(t,n)}return z_=e,z_}var rge=tge();const Bg=mr(rge);var sf=1e9,nge={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zE,tn=!0,bs="[DecimalError] ",c0=bs+"Invalid argument: ",UE=bs+"Exponent out of range: ",of=Math.floor,qu=Math.pow,ige=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Da,si=1e7,Qr=7,dG=9007199254740991,yb=of(dG/Qr),ht={};ht.absoluteValue=ht.abs=function(){var r=new this.constructor(this);return r.s&&(r.s=1),r};ht.comparedTo=ht.cmp=function(r){var e,t,n,i,a=this;if(r=new a.constructor(r),a.s!==r.s)return a.s||-r.s;if(a.e!==r.e)return a.e>r.e^a.s<0?1:-1;for(n=a.d.length,i=r.d.length,e=0,t=n<i?n:i;e<t;++e)if(a.d[e]!==r.d[e])return a.d[e]>r.d[e]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};ht.decimalPlaces=ht.dp=function(){var r=this,e=r.d.length-1,t=(e-r.e)*Qr;if(e=r.d[e],e)for(;e%10==0;e/=10)t--;return t<0?0:t};ht.dividedBy=ht.div=function(r){return yl(this,new this.constructor(r))};ht.dividedToIntegerBy=ht.idiv=function(r){var e=this,t=e.constructor;return Mr(yl(e,new t(r),0,1),t.precision)};ht.equals=ht.eq=function(r){return!this.cmp(r)};ht.exponent=function(){return $n(this)};ht.greaterThan=ht.gt=function(r){return this.cmp(r)>0};ht.greaterThanOrEqualTo=ht.gte=function(r){return this.cmp(r)>=0};ht.isInteger=ht.isint=function(){return this.e>this.d.length-2};ht.isNegative=ht.isneg=function(){return this.s<0};ht.isPositive=ht.ispos=function(){return this.s>0};ht.isZero=function(){return this.s===0};ht.lessThan=ht.lt=function(r){return this.cmp(r)<0};ht.lessThanOrEqualTo=ht.lte=function(r){return this.cmp(r)<1};ht.logarithm=ht.log=function(r){var e,t=this,n=t.constructor,i=n.precision,a=i+5;if(r===void 0)r=new n(10);else if(r=new n(r),r.s<1||r.eq(Da))throw Error(bs+"NaN");if(t.s<1)throw Error(bs+(t.s?"NaN":"-Infinity"));return t.eq(Da)?new n(0):(tn=!1,e=yl(Lp(t,a),Lp(r,a),a),tn=!0,Mr(e,i))};ht.minus=ht.sub=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?mG(e,r):hG(e,(r.s=-r.s,r))};ht.modulo=ht.mod=function(r){var e,t=this,n=t.constructor,i=n.precision;if(r=new n(r),!r.s)throw Error(bs+"NaN");return t.s?(tn=!1,e=yl(t,r,0,1).times(r),tn=!0,t.minus(e)):Mr(new n(t),i)};ht.naturalExponential=ht.exp=function(){return fG(this)};ht.naturalLogarithm=ht.ln=function(){return Lp(this)};ht.negated=ht.neg=function(){var r=new this.constructor(this);return r.s=-r.s||0,r};ht.plus=ht.add=function(r){var e=this;return r=new e.constructor(r),e.s==r.s?hG(e,r):mG(e,(r.s=-r.s,r))};ht.precision=ht.sd=function(r){var e,t,n,i=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(c0+r);if(e=$n(i)+1,n=i.d.length-1,t=n*Qr+1,n=i.d[n],n){for(;n%10==0;n/=10)t--;for(n=i.d[0];n>=10;n/=10)t++}return r&&e>t?e:t};ht.squareRoot=ht.sqrt=function(){var r,e,t,n,i,a,s,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(bs+"NaN")}for(r=$n(c),tn=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=fo(c.d),(e.length+r)%2==0&&(e+="0"),i=Math.sqrt(e),r=of((r+1)/2)-(r<0||r%2),i==1/0?e="5e"+r:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+r),n=new d(e)):n=new d(i.toString()),t=d.precision,i=s=t+3;;)if(a=n,n=a.plus(yl(c,a,s+2)).times(.5),fo(a.d).slice(0,s)===(e=fo(n.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Mr(a,t+1,0),a.times(a).eq(c)){n=a;break}}else if(e!="9999")break;s+=4}return tn=!0,Mr(n,t)};ht.times=ht.mul=function(r){var e,t,n,i,a,s,c,d,f,m=this,p=m.constructor,y=m.d,b=(r=new p(r)).d;if(!m.s||!r.s)return new p(0);for(r.s*=m.s,t=m.e+r.e,d=y.length,f=b.length,d<f&&(a=y,y=b,b=a,s=d,d=f,f=s),a=[],s=d+f,n=s;n--;)a.push(0);for(n=f;--n>=0;){for(e=0,i=d+n;i>n;)c=a[i]+b[n]*y[i-n-1]+e,a[i--]=c%si|0,e=c/si|0;a[i]=(a[i]+e)%si|0}for(;!a[--s];)a.pop();return e?++t:a.shift(),r.d=a,r.e=t,tn?Mr(r,p.precision):r};ht.toDecimalPlaces=ht.todp=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(wo(r,0,sf),e===void 0?e=n.rounding:wo(e,0,8),Mr(t,r+$n(t)+1,e))};ht.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=T0(n,!0):(wo(r,0,sf),e===void 0?e=i.rounding:wo(e,0,8),n=Mr(new i(n),r+1,e),t=T0(n,!0,r+1)),t};ht.toFixed=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?T0(i):(wo(r,0,sf),e===void 0?e=a.rounding:wo(e,0,8),n=Mr(new a(i),r+$n(i)+1,e),t=T0(n.abs(),!1,r+$n(n)+1),i.isneg()&&!i.isZero()?"-"+t:t)};ht.toInteger=ht.toint=function(){var r=this,e=r.constructor;return Mr(new e(r),$n(r)+1,e.rounding)};ht.toNumber=function(){return+this};ht.toPower=ht.pow=function(r){var e,t,n,i,a,s,c=this,d=c.constructor,f=12,m=+(r=new d(r));if(!r.s)return new d(Da);if(c=new d(c),!c.s){if(r.s<1)throw Error(bs+"Infinity");return c}if(c.eq(Da))return c;if(n=d.precision,r.eq(Da))return Mr(c,n);if(e=r.e,t=r.d.length-1,s=e>=t,a=c.s,s){if((t=m<0?-m:m)<=dG){for(i=new d(Da),e=Math.ceil(n/Qr+4),tn=!1;t%2&&(i=i.times(c),mL(i.d,e)),t=of(t/2),t!==0;)c=c.times(c),mL(c.d,e);return tn=!0,r.s<0?new d(Da).div(i):Mr(i,n)}}else if(a<0)throw Error(bs+"NaN");return a=a<0&&r.d[Math.max(e,t)]&1?-1:1,c.s=1,tn=!1,i=r.times(Lp(c,n+f)),tn=!0,i=fG(i),i.s=a,i};ht.toPrecision=function(r,e){var t,n,i=this,a=i.constructor;return r===void 0?(t=$n(i),n=T0(i,t<=a.toExpNeg||t>=a.toExpPos)):(wo(r,1,sf),e===void 0?e=a.rounding:wo(e,0,8),i=Mr(new a(i),r,e),t=$n(i),n=T0(i,r<=t||t<=a.toExpNeg,r)),n};ht.toSignificantDigits=ht.tosd=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(wo(r,1,sf),e===void 0?e=n.rounding:wo(e,0,8)),Mr(new n(t),r,e)};ht.toString=ht.valueOf=ht.val=ht.toJSON=ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var r=this,e=$n(r),t=r.constructor;return T0(r,e<=t.toExpNeg||e>=t.toExpPos)};function hG(r,e){var t,n,i,a,s,c,d,f,m=r.constructor,p=m.precision;if(!r.s||!e.s)return e.s||(e=new m(r)),tn?Mr(e,p):e;if(d=r.d,f=e.d,s=r.e,i=e.e,d=d.slice(),a=s-i,a){for(a<0?(n=d,a=-a,c=f.length):(n=f,i=s,c=d.length),s=Math.ceil(p/Qr),c=s>c?s+1:c+1,a>c&&(a=c,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(c=d.length,a=f.length,c-a<0&&(a=c,n=f,f=d,d=n),t=0;a;)t=(d[--a]=d[a]+f[a]+t)/si|0,d[a]%=si;for(t&&(d.unshift(t),++i),c=d.length;d[--c]==0;)d.pop();return e.d=d,e.e=i,tn?Mr(e,p):e}function wo(r,e,t){if(r!==~~r||r<e||r>t)throw Error(c0+r)}function fo(r){var e,t,n,i=r.length-1,a="",s=r[0];if(i>0){for(a+=s,e=1;e<i;e++)n=r[e]+"",t=Qr-n.length,t&&(a+=_c(t)),a+=n;s=r[e],n=s+"",t=Qr-n.length,t&&(a+=_c(t))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var yl=(function(){function r(n,i){var a,s=0,c=n.length;for(n=n.slice();c--;)a=n[c]*i+s,n[c]=a%si|0,s=a/si|0;return s&&n.unshift(s),n}function e(n,i,a,s){var c,d;if(a!=s)d=a>s?1:-1;else for(c=d=0;c<a;c++)if(n[c]!=i[c]){d=n[c]>i[c]?1:-1;break}return d}function t(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*si+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var c,d,f,m,p,y,b,T,S,w,E,I,C,B,R,D,A,k,N=n.constructor,U=n.s==i.s?1:-1,M=n.d,$=i.d;if(!n.s)return new N(n);if(!i.s)throw Error(bs+"Division by zero");for(d=n.e-i.e,A=$.length,R=M.length,b=new N(U),T=b.d=[],f=0;$[f]==(M[f]||0);)++f;if($[f]>(M[f]||0)&&--d,a==null?I=a=N.precision:s?I=a+($n(n)-$n(i))+1:I=a,I<0)return new N(0);if(I=I/Qr+2|0,f=0,A==1)for(m=0,$=$[0],I++;(f<R||m)&&I--;f++)C=m*si+(M[f]||0),T[f]=C/$|0,m=C%$|0;else{for(m=si/($[0]+1)|0,m>1&&($=r($,m),M=r(M,m),A=$.length,R=M.length),B=A,S=M.slice(0,A),w=S.length;w<A;)S[w++]=0;k=$.slice(),k.unshift(0),D=$[0],$[1]>=si/2&&++D;do m=0,c=e($,S,A,w),c<0?(E=S[0],A!=w&&(E=E*si+(S[1]||0)),m=E/D|0,m>1?(m>=si&&(m=si-1),p=r($,m),y=p.length,w=S.length,c=e(p,S,y,w),c==1&&(m--,t(p,A<y?k:$,y))):(m==0&&(c=m=1),p=$.slice()),y=p.length,y<w&&p.unshift(0),t(S,p,w),c==-1&&(w=S.length,c=e($,S,A,w),c<1&&(m++,t(S,A<w?k:$,w))),w=S.length):c===0&&(m++,S=[0]),T[f++]=m,c&&S[0]?S[w++]=M[B]||0:(S=[M[B]],w=1);while((B++<R||S[0]!==void 0)&&I--)}return T[0]||T.shift(),b.e=d,Mr(b,s?a+$n(b)+1:a)}})();function fG(r,e){var t,n,i,a,s,c,d=0,f=0,m=r.constructor,p=m.precision;if($n(r)>16)throw Error(UE+$n(r));if(!r.s)return new m(Da);for(tn=!1,c=p,s=new m(.03125);r.abs().gte(.1);)r=r.times(s),f+=5;for(n=Math.log(qu(2,f))/Math.LN10*2+5|0,c+=n,t=i=a=new m(Da),m.precision=c;;){if(i=Mr(i.times(r),c),t=t.times(++d),s=a.plus(yl(i,t,c)),fo(s.d).slice(0,c)===fo(a.d).slice(0,c)){for(;f--;)a=Mr(a.times(a),c);return m.precision=p,e==null?(tn=!0,Mr(a,p)):a}a=s}}function $n(r){for(var e=r.e*Qr,t=r.d[0];t>=10;t/=10)e++;return e}function V_(r,e,t){if(e>r.LN10.sd())throw tn=!0,t&&(r.precision=t),Error(bs+"LN10 precision limit exceeded");return Mr(new r(r.LN10),e)}function _c(r){for(var e="";r--;)e+="0";return e}function Lp(r,e){var t,n,i,a,s,c,d,f,m,p=1,y=10,b=r,T=b.d,S=b.constructor,w=S.precision;if(b.s<1)throw Error(bs+(b.s?"NaN":"-Infinity"));if(b.eq(Da))return new S(0);if(e==null?(tn=!1,f=w):f=e,b.eq(10))return e==null&&(tn=!0),V_(S,f);if(f+=y,S.precision=f,t=fo(T),n=t.charAt(0),a=$n(b),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)b=b.times(r),t=fo(b.d),n=t.charAt(0),p++;a=$n(b),n>1?(b=new S("0."+t),a++):b=new S(n+"."+t.slice(1))}else return d=V_(S,f+2,w).times(a+""),b=Lp(new S(n+"."+t.slice(1)),f-y).plus(d),S.precision=w,e==null?(tn=!0,Mr(b,w)):b;for(c=s=b=yl(b.minus(Da),b.plus(Da),f),m=Mr(b.times(b),f),i=3;;){if(s=Mr(s.times(m),f),d=c.plus(yl(s,new S(i),f)),fo(d.d).slice(0,f)===fo(c.d).slice(0,f))return c=c.times(2),a!==0&&(c=c.plus(V_(S,f+2,w).times(a+""))),c=yl(c,new S(p),f),S.precision=w,e==null?(tn=!0,Mr(c,w)):c;c=d,i+=2}}function fL(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,t=t-n-1,r.e=of(t/Qr),r.d=[],n=(t+1)%Qr,t<0&&(n+=Qr),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Qr;n<i;)r.d.push(+e.slice(n,n+=Qr));e=e.slice(n),n=Qr-e.length}else n-=i;for(;n--;)e+="0";if(r.d.push(+e),tn&&(r.e>yb||r.e<-yb))throw Error(UE+t)}else r.s=0,r.e=0,r.d=[0];return r}function Mr(r,e,t){var n,i,a,s,c,d,f,m,p=r.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(n=e-s,n<0)n+=Qr,i=e,f=p[m=0];else{if(m=Math.ceil((n+1)/Qr),a=p.length,m>=a)return r;for(f=a=p[m],s=1;a>=10;a/=10)s++;n%=Qr,i=n-Qr+s}if(t!==void 0&&(a=qu(10,s-i-1),c=f/a%10|0,d=e<0||p[m+1]!==void 0||f%a,d=t<4?(c||d)&&(t==0||t==(r.s<0?3:2)):c>5||c==5&&(t==4||d||t==6&&(n>0?i>0?f/qu(10,s-i):0:p[m-1])%10&1||t==(r.s<0?8:7))),e<1||!p[0])return d?(a=$n(r),p.length=1,e=e-a-1,p[0]=qu(10,(Qr-e%Qr)%Qr),r.e=of(-e/Qr)||0):(p.length=1,p[0]=r.e=r.s=0),r;if(n==0?(p.length=m,a=1,m--):(p.length=m+1,a=qu(10,Qr-n),p[m]=i>0?(f/qu(10,s-i)%qu(10,i)|0)*a:0),d)for(;;)if(m==0){(p[0]+=a)==si&&(p[0]=1,++r.e);break}else{if(p[m]+=a,p[m]!=si)break;p[m--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(tn&&(r.e>yb||r.e<-yb))throw Error(UE+$n(r));return r}function mG(r,e){var t,n,i,a,s,c,d,f,m,p,y=r.constructor,b=y.precision;if(!r.s||!e.s)return e.s?e.s=-e.s:e=new y(r),tn?Mr(e,b):e;if(d=r.d,p=e.d,n=e.e,f=r.e,d=d.slice(),s=f-n,s){for(m=s<0,m?(t=d,s=-s,c=p.length):(t=p,n=f,c=d.length),i=Math.max(Math.ceil(b/Qr),c)+2,s>i&&(s=i,t.length=1),t.reverse(),i=s;i--;)t.push(0);t.reverse()}else{for(i=d.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(d[i]!=p[i]){m=d[i]<p[i];break}s=0}for(m&&(t=d,d=p,p=t,e.s=-e.s),c=d.length,i=p.length-c;i>0;--i)d[c++]=0;for(i=p.length;i>s;){if(d[--i]<p[i]){for(a=i;a&&d[--a]===0;)d[a]=si-1;--d[a],d[i]+=si}d[i]-=p[i]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(e.d=d,e.e=n,tn?Mr(e,b):e):new y(0)}function T0(r,e,t){var n,i=$n(r),a=fo(r.d),s=a.length;return e?(t&&(n=t-s)>0?a=a.charAt(0)+"."+a.slice(1)+_c(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+_c(-i-1)+a,t&&(n=t-s)>0&&(a+=_c(n))):i>=s?(a+=_c(i+1-s),t&&(n=t-i-1)>0&&(a=a+"."+_c(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),t&&(n=t-s)>0&&(i+1===s&&(a+="."),a+=_c(n))),r.s<0?"-"+a:a}function mL(r,e){if(r.length>e)return r.length=e,!0}function pG(r){var e,t,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(c0+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return fL(s,a.toString())}else if(typeof a!="string")throw Error(c0+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ige.test(a))fL(s,a);else throw Error(c0+a)}if(i.prototype=ht,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=pG,i.config=i.set=age,r===void 0&&(r={}),r)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function age(r){if(!r||typeof r!="object")throw Error(bs+"Object expected");var e,t,n,i=["precision",1,sf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=r[t=i[e]])!==void 0)if(of(n)===n&&n>=i[e+1]&&n<=i[e+2])this[t]=n;else throw Error(c0+t+": "+n);if((n=r[t="LN10"])!==void 0)if(n==Math.LN10)this[t]=new this(n);else throw Error(c0+t+": "+n);return this}var zE=pG(nge);Da=new zE(1);const Or=zE;function sge(r){return uge(r)||cge(r)||lge(r)||oge()}function oge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lge(r,e){if(r){if(typeof r=="string")return rA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return rA(r,e)}}function cge(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function uge(r){if(Array.isArray(r))return rA(r)}function rA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var dge=function(e){return e},gG={},yG=function(e){return e===gG},pL=function(e){return function t(){return arguments.length===0||arguments.length===1&&yG(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},hge=function r(e,t){return e===1?t:pL(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(c){return c!==gG}).length;return s>=e?t.apply(void 0,i):r(e-s,pL(function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];var m=i.map(function(p){return yG(p)?d.shift():p});return t.apply(void 0,sge(m).concat(d))}))})},o2=function(e){return hge(e.length,e)},nA=function(e,t){for(var n=[],i=e;i<t;++i)n[i-e]=i;return n},fge=o2(function(r,e){return Array.isArray(e)?e.map(r):Object.keys(e).map(function(t){return e[t]}).map(r)}),mge=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return dge;var i=t.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(c,d){return d(c)},a.apply(void 0,arguments))}},iA=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},vG=function(e){var t=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t&&a.every(function(c,d){return c===t[d]})||(t=a,n=e.apply(void 0,a)),n}};function pge(r){var e;return r===0?e=1:e=Math.floor(new Or(r).abs().log(10).toNumber())+1,e}function gge(r,e,t){for(var n=new Or(r),i=0,a=[];n.lt(e)&&i<1e5;)a.push(n.toNumber()),n=n.add(t),i++;return a}var yge=o2(function(r,e,t){var n=+r,i=+e;return n+t*(i-n)}),vge=o2(function(r,e,t){var n=e-+r;return n=n||1/0,(t-r)/n}),bge=o2(function(r,e,t){var n=e-+r;return n=n||1/0,Math.max(0,Math.min(1,(t-r)/n))});const l2={rangeStep:gge,getDigitCount:pge,interpolateNumber:yge,uninterpolateNumber:vge,uninterpolateTruncation:bge};function aA(r){return _ge(r)||wge(r)||bG(r)||xge()}function xge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wge(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function _ge(r){if(Array.isArray(r))return sA(r)}function Bp(r,e){return Age(r)||Tge(r,e)||bG(r,e)||Sge()}function Sge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bG(r,e){if(r){if(typeof r=="string")return sA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return sA(r,e)}}function sA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Tge(r,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var t=[],n=!0,i=!1,a=void 0;try{for(var s=r[Symbol.iterator](),c;!(n=(c=s.next()).done)&&(t.push(c.value),!(e&&t.length===e));n=!0);}catch(d){i=!0,a=d}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return t}}function Age(r){if(Array.isArray(r))return r}function xG(r){var e=Bp(r,2),t=e[0],n=e[1],i=t,a=n;return t>n&&(i=n,a=t),[i,a]}function wG(r,e,t){if(r.lte(0))return new Or(0);var n=l2.getDigitCount(r.toNumber()),i=new Or(10).pow(n),a=r.div(i),s=n!==1?.05:.1,c=new Or(Math.ceil(a.div(s).toNumber())).add(t).mul(s),d=c.mul(i);return e?d:new Or(Math.ceil(d))}function Ege(r,e,t){var n=1,i=new Or(r);if(!i.isint()&&t){var a=Math.abs(r);a<1?(n=new Or(10).pow(l2.getDigitCount(r)-1),i=new Or(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Or(Math.floor(r)))}else r===0?i=new Or(Math.floor((e-1)/2)):t||(i=new Or(Math.floor(r)));var s=Math.floor((e-1)/2),c=mge(fge(function(d){return i.add(new Or(d-s).mul(n)).toNumber()}),nA);return c(0,e)}function _G(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-r)/(t-1)))return{step:new Or(0),tickMin:new Or(0),tickMax:new Or(0)};var a=wG(new Or(e).sub(r).div(t-1),n,i),s;r<=0&&e>=0?s=new Or(0):(s=new Or(r).add(e).div(2),s=s.sub(new Or(s).mod(a)));var c=Math.ceil(s.sub(r).div(a).toNumber()),d=Math.ceil(new Or(e).sub(s).div(a).toNumber()),f=c+d+1;return f>t?_G(r,e,t,n,i+1):(f<t&&(d=e>0?d+(t-f):d,c=e>0?c:c+(t-f)),{step:a,tickMin:s.sub(new Or(c).mul(a)),tickMax:s.add(new Or(d).mul(a))})}function Nge(r){var e=Bp(r,2),t=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),c=xG([t,n]),d=Bp(c,2),f=d[0],m=d[1];if(f===-1/0||m===1/0){var p=m===1/0?[f].concat(aA(nA(0,i-1).map(function(){return 1/0}))):[].concat(aA(nA(0,i-1).map(function(){return-1/0})),[m]);return t>n?iA(p):p}if(f===m)return Ege(f,i,a);var y=_G(f,m,s,a),b=y.step,T=y.tickMin,S=y.tickMax,w=l2.rangeStep(T,S.add(new Or(.1).mul(b)),b);return t>n?iA(w):w}function Oge(r,e){var t=Bp(r,2),n=t[0],i=t[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=xG([n,i]),c=Bp(s,2),d=c[0],f=c[1];if(d===-1/0||f===1/0)return[n,i];if(d===f)return[d];var m=Math.max(e,2),p=wG(new Or(f).sub(d).div(m-1),a,0),y=[].concat(aA(l2.rangeStep(new Or(d),new Or(f).sub(new Or(.99).mul(p)),p)),[f]);return n>i?iA(y):y}var kge=vG(Nge),Cge=vG(Oge),jge="Invariant failed";function A0(r,e){throw new Error(jge)}var Ige=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Oh(r){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(r)}function vb(){return vb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},vb.apply(this,arguments)}function Rge(r,e){return Lge(r)||Dge(r,e)||Pge(r,e)||Mge()}function Mge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pge(r,e){if(r){if(typeof r=="string")return gL(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gL(r,e)}}function gL(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Dge(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Lge(r){if(Array.isArray(r))return r}function Bge(r,e){if(r==null)return{};var t=Uge(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Uge(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function zge(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Vge(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,AG(n.key),n)}}function $ge(r,e,t){return e&&Vge(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fge(r,e,t){return e=bb(e),qge(r,SG()?Reflect.construct(e,t||[],bb(r).constructor):e.apply(r,t))}function qge(r,e){if(e&&(Oh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hge(r)}function Hge(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function SG(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SG=function(){return!!r})()}function bb(r){return bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bb(r)}function Gge(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&oA(r,e)}function oA(r,e){return oA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oA(r,e)}function TG(r,e,t){return e=AG(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function AG(r){var e=Kge(r,"string");return Oh(e)=="symbol"?e:e+""}function Kge(r,e){if(Oh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Oh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Ug=(function(r){function e(){return zge(this,e),Fge(this,e,arguments)}return Gge(e,r),$ge(e,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,c=n.dataKey,d=n.data,f=n.dataPointFormatter,m=n.xAxis,p=n.yAxis,y=Bge(n,Ige),b=wt(y,!1);this.props.direction==="x"&&m.type!=="number"&&A0();var T=d.map(function(S){var w=f(S,c),E=w.x,I=w.y,C=w.value,B=w.errorVal;if(!B)return null;var R=[],D,A;if(Array.isArray(B)){var k=Rge(B,2);D=k[0],A=k[1]}else D=A=B;if(a==="vertical"){var N=m.scale,U=I+i,M=U+s,$=U-s,z=N(C-D),Q=N(C+A);R.push({x1:Q,y1:M,x2:Q,y2:$}),R.push({x1:z,y1:U,x2:Q,y2:U}),R.push({x1:z,y1:M,x2:z,y2:$})}else if(a==="horizontal"){var ee=p.scale,K=E+i,Z=K-s,Y=K+s,ge=ee(C-D),ae=ee(C+A);R.push({x1:Z,y1:ae,x2:Y,y2:ae}),R.push({x1:K,y1:ge,x2:K,y2:ae}),R.push({x1:Z,y1:ge,x2:Y,y2:ge})}return ne.createElement(ur,vb({className:"recharts-errorBar",key:"bar-".concat(R.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},b),R.map(function(X){return ne.createElement("line",vb({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return ne.createElement(ur,{className:"recharts-errorBars"},T)}}])})(ne.Component);TG(Ug,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});TG(Ug,"displayName","ErrorBar");function Up(r){"@babel/helpers - typeof";return Up=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Up(r)}function yL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Bu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yL(Object(t),!0).forEach(function(n){Wge(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Wge(r,e,t){return e=Xge(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xge(r){var e=Qge(r,"string");return Up(e)=="symbol"?e:e+""}function Qge(r,e){if(Up(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Up(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var EG=function(e){var t=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ma(t,Jd);if(!s)return null;var c=Jd.defaultProps,d=c!==void 0?Bu(Bu({},c),s.props):{},f;return s.props&&s.props.payload?f=s.props&&s.props.payload:a==="children"?f=(n||[]).reduce(function(m,p){var y=p.item,b=p.props,T=b.sectors||b.data||[];return m.concat(T.map(function(S){return{type:s.props.iconType||y.props.legendType,value:S.name,color:S.fill,payload:S}}))},[]):f=(n||[]).map(function(m){var p=m.item,y=p.type.defaultProps,b=y!==void 0?Bu(Bu({},y),p.props):{},T=b.dataKey,S=b.name,w=b.legendType,E=b.hide;return{inactive:E,dataKey:T,type:d.iconType||w||"square",color:VE(p),value:S||T,payload:b}}),Bu(Bu(Bu({},d),Jd.getWithHeight(s,i)),{},{payload:f,item:s})};function zp(r){"@babel/helpers - typeof";return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zp(r)}function vL(r){return e1e(r)||Jge(r)||Zge(r)||Yge()}function Yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zge(r,e){if(r){if(typeof r=="string")return lA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return lA(r,e)}}function Jge(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function e1e(r){if(Array.isArray(r))return lA(r)}function lA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function bL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bL(Object(t),!0).forEach(function(n){th(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):bL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function th(r,e,t){return e=t1e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function t1e(r){var e=r1e(r,"string");return zp(e)=="symbol"?e:e+""}function r1e(r,e){if(zp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function _i(r,e,t){return Lt(r)||Lt(e)?t:Xn(e)?ds(r,e,t):It(e)?e(r):t}function Wm(r,e,t,n){var i=ege(r,function(c){return _i(c,e)});if(t==="number"){var a=i.filter(function(c){return et(c)||parseFloat(c)});return a.length?[s2(a),a2(a)]:[1/0,-1/0]}var s=n?i.filter(function(c){return!Lt(c)}):i;return s.map(function(c){return Xn(c)||c instanceof Date?c:""})}var n1e=function(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,c=(t=n==null?void 0:n.length)!==null&&t!==void 0?t:0;if(c<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var d=a.range,f=0;f<c;f++){var m=f>0?i[f-1].coordinate:i[c-1].coordinate,p=i[f].coordinate,y=f>=c-1?i[0].coordinate:i[f+1].coordinate,b=void 0;if(Ps(p-m)!==Ps(y-p)){var T=[];if(Ps(y-p)===Ps(d[1]-d[0])){b=y;var S=p+d[1]-d[0];T[0]=Math.min(S,(S+m)/2),T[1]=Math.max(S,(S+m)/2)}else{b=m;var w=y+d[1]-d[0];T[0]=Math.min(p,(w+p)/2),T[1]=Math.max(p,(w+p)/2)}var E=[Math.min(p,(b+p)/2),Math.max(p,(b+p)/2)];if(e>E[0]&&e<=E[1]||e>=T[0]&&e<=T[1]){s=i[f].index;break}}else{var I=Math.min(m,y),C=Math.max(m,y);if(e>(I+p)/2&&e<=(C+p)/2){s=i[f].index;break}}}else for(var B=0;B<c;B++)if(B===0&&e<=(n[B].coordinate+n[B+1].coordinate)/2||B>0&&B<c-1&&e>(n[B].coordinate+n[B-1].coordinate)/2&&e<=(n[B].coordinate+n[B+1].coordinate)/2||B===c-1&&e>(n[B].coordinate+n[B-1].coordinate)/2){s=n[B].index;break}return s},VE=function(e){var t,n=e,i=n.type.displayName,a=(t=e.type)!==null&&t!==void 0&&t.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,s=a.stroke,c=a.fill,d;switch(i){case"Line":d=s;break;case"Area":case"Radar":d=s&&s!=="none"?s:c;break;default:d=c;break}return d},i1e=function(e){var t=e.barSize,n=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},c=Object.keys(a),d=0,f=c.length;d<f;d++)for(var m=a[c[d]].stackGroups,p=Object.keys(m),y=0,b=p.length;y<b;y++){var T=m[p[y]],S=T.items,w=T.cateAxisId,E=S.filter(function(A){return pl(A.type).indexOf("Bar")>=0});if(E&&E.length){var I=E[0].type.defaultProps,C=I!==void 0?vn(vn({},I),E[0].props):E[0].props,B=C.barSize,R=C[w];s[R]||(s[R]=[]);var D=Lt(B)?t:B;s[R].push({item:E[0],stackList:E.slice(1),barSize:Lt(D)?void 0:Ds(D,n,0)})}}return s},a1e=function(e){var t=e.barGap,n=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,c=e.maxBarSize,d=s.length;if(d<1)return null;var f=Ds(t,i,0,!0),m,p=[];if(s[0].barSize===+s[0].barSize){var y=!1,b=i/d,T=s.reduce(function(B,R){return B+R.barSize||0},0);T+=(d-1)*f,T>=i&&(T-=(d-1)*f,f=0),T>=i&&b>0&&(y=!0,b*=.9,T=d*b);var S=(i-T)/2>>0,w={offset:S-f,size:0};m=s.reduce(function(B,R){var D={item:R.item,position:{offset:w.offset+w.size+f,size:y?b:R.barSize}},A=[].concat(vL(B),[D]);return w=A[A.length-1].position,R.stackList&&R.stackList.length&&R.stackList.forEach(function(k){A.push({item:k,position:w})}),A},p)}else{var E=Ds(n,i,0,!0);i-2*E-(d-1)*f<=0&&(f=0);var I=(i-2*E-(d-1)*f)/d;I>1&&(I>>=0);var C=c===+c?Math.min(I,c):I;m=s.reduce(function(B,R,D){var A=[].concat(vL(B),[{item:R.item,position:{offset:E+(I+f)*D+(I-C)/2,size:C}}]);return R.stackList&&R.stackList.length&&R.stackList.forEach(function(k){A.push({item:k,position:A[A.length-1].position})}),A},p)}return m},s1e=function(e,t,n,i){var a=n.children,s=n.width,c=n.margin,d=s-(c.left||0)-(c.right||0),f=EG({children:a,legendWidth:d});if(f){var m=i||{},p=m.width,y=m.height,b=f.align,T=f.verticalAlign,S=f.layout;if((S==="vertical"||S==="horizontal"&&T==="middle")&&b!=="center"&&et(e[b]))return vn(vn({},e),{},th({},b,e[b]+(p||0)));if((S==="horizontal"||S==="vertical"&&b==="center")&&T!=="middle"&&et(e[T]))return vn(vn({},e),{},th({},T,e[T]+(y||0)))}return e},o1e=function(e,t,n){return Lt(t)?!0:e==="horizontal"?t==="yAxis":e==="vertical"||n==="x"?t==="xAxis":n==="y"?t==="yAxis":!0},NG=function(e,t,n,i,a){var s=t.props.children,c=Fa(s,Ug).filter(function(f){return o1e(i,a,f.props.direction)});if(c&&c.length){var d=c.map(function(f){return f.props.dataKey});return e.reduce(function(f,m){var p=_i(m,n);if(Lt(p))return f;var y=Array.isArray(p)?[s2(p),a2(p)]:[p,p],b=d.reduce(function(T,S){var w=_i(m,S,0),E=y[0]-Math.abs(Array.isArray(w)?w[0]:w),I=y[1]+Math.abs(Array.isArray(w)?w[1]:w);return[Math.min(E,T[0]),Math.max(I,T[1])]},[1/0,-1/0]);return[Math.min(b[0],f[0]),Math.max(b[1],f[1])]},[1/0,-1/0])}return null},l1e=function(e,t,n,i,a){var s=t.map(function(c){return NG(e,c,n,a,i)}).filter(function(c){return!Lt(c)});return s&&s.length?s.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]):null},OG=function(e,t,n,i,a){var s=t.map(function(d){var f=d.props.dataKey;return n==="number"&&f&&NG(e,d,f,i)||Wm(e,f,n,a)});if(n==="number")return s.reduce(function(d,f){return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);var c={};return s.reduce(function(d,f){for(var m=0,p=f.length;m<p;m++)c[f[m]]||(c[f[m]]=!0,d.push(f[m]));return d},[])},kG=function(e,t){return e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis"},CG=function(e,t,n,i){if(i)return e.map(function(d){return d.coordinate});var a,s,c=e.map(function(d){return d.coordinate===t&&(a=!0),d.coordinate===n&&(s=!0),d.coordinate});return a||c.push(t),s||c.push(n),c},dl=function(e,t,n){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,c=e.range,d=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,f=(t||n)&&s==="category"&&i.bandwidth?i.bandwidth()/d:0;if(f=e.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?Ps(c[0]-c[1])*2*f:f,t&&(e.ticks||e.niceTicks)){var m=(e.ticks||e.niceTicks).map(function(p){var y=a?a.indexOf(p):p;return{coordinate:i(y)+f,value:p,offset:f}});return m.filter(function(p){return!jg(p.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(p,y){return{coordinate:i(p)+f,value:p,index:y,offset:f}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(p){return{coordinate:i(p)+f,value:p,offset:f}}):i.domain().map(function(p,y){return{coordinate:i(p)+f,value:a?a[p]:p,index:y,offset:f}})},$_=new WeakMap,zy=function(e,t){if(typeof t!="function")return e;$_.has(e)||$_.set(e,new WeakMap);var n=$_.get(e);if(n.has(t))return n.get(t);var i=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,i),i},jG=function(e,t,n){var i=e.scale,a=e.type,s=e.layout,c=e.axisType;if(i==="auto")return s==="radial"&&c==="radiusAxis"?{scale:Ip(),realScaleType:"band"}:s==="radial"&&c==="angleAxis"?{scale:fb(),realScaleType:"linear"}:a==="category"&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:Km(),realScaleType:"point"}:a==="category"?{scale:Ip(),realScaleType:"band"}:{scale:fb(),realScaleType:"linear"};if(_0(i)){var d="scale".concat(qx(i));return{scale:(iL[d]||Km)(),realScaleType:iL[d]?d:"point"}}return It(i)?{scale:i}:{scale:Km(),realScaleType:"point"}},xL=1e-4,IG=function(e){var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,i=e.range(),a=Math.min(i[0],i[1])-xL,s=Math.max(i[0],i[1])+xL,c=e(t[0]),d=e(t[n-1]);(c<a||c>s||d<a||d>s)&&e.domain([t[0],t[n-1]])}},c1e=function(e,t){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===t)return e[n].position;return null},u1e=function(e,t){if(!t||t.length!==2||!et(t[0])||!et(t[1]))return e;var n=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!et(e[0])||e[0]<n)&&(a[0]=n),(!et(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},d1e=function(e){var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0,c=0;c<t;++c){var d=jg(e[c][n][1])?e[c][n][0]:e[c][n][1];d>=0?(e[c][n][0]=a,e[c][n][1]=a+d,a=e[c][n][1]):(e[c][n][0]=s,e[c][n][1]=s+d,s=e[c][n][1])}},h1e=function(e){var t=e.length;if(!(t<=0))for(var n=0,i=e[0].length;n<i;++n)for(var a=0,s=0;s<t;++s){var c=jg(e[s][n][1])?e[s][n][0]:e[s][n][1];c>=0?(e[s][n][0]=a,e[s][n][1]=a+c,a=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}},f1e={sign:d1e,expand:e0e,none:bh,silhouette:t0e,wiggle:r0e,positive:h1e},m1e=function(e,t,n){var i=t.map(function(c){return c.props.dataKey}),a=f1e[n],s=Jue().keys(i).value(function(c,d){return+_i(c,d,0)}).order(BT).offset(a);return s(e)},p1e=function(e,t,n,i,a,s){if(!e)return null;var c=s?t.reverse():t,d={},f=c.reduce(function(p,y){var b,T=(b=y.type)!==null&&b!==void 0&&b.defaultProps?vn(vn({},y.type.defaultProps),y.props):y.props,S=T.stackId,w=T.hide;if(w)return p;var E=T[n],I=p[E]||{hasStack:!1,stackGroups:{}};if(Xn(S)){var C=I.stackGroups[S]||{numericAxisId:n,cateAxisId:i,items:[]};C.items.push(y),I.hasStack=!0,I.stackGroups[S]=C}else I.stackGroups[Ig("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[y]};return vn(vn({},p),{},th({},E,I))},d),m={};return Object.keys(f).reduce(function(p,y){var b=f[y];if(b.hasStack){var T={};b.stackGroups=Object.keys(b.stackGroups).reduce(function(S,w){var E=b.stackGroups[w];return vn(vn({},S),{},th({},w,{numericAxisId:n,cateAxisId:i,items:E.items,stackedData:m1e(e,E.items,a)}))},T)}return vn(vn({},p),{},th({},y,b))},m)},RG=function(e,t){var n=t.realScaleType,i=t.type,a=t.tickCount,s=t.originalDomain,c=t.allowDecimals,d=n||t.scale;if(d!=="auto"&&d!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var f=e.domain();if(!f.length)return null;var m=kge(f,a,c);return e.domain([s2(m),a2(m)]),{niceTicks:m}}if(a&&i==="number"){var p=e.domain(),y=Cge(p,a,c);return{niceTicks:y}}return null};function wL(r){var e=r.axis,t=r.ticks,n=r.bandSize,i=r.entry,a=r.index,s=r.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Lt(i[e.dataKey])){var c=Wv(t,"value",i[e.dataKey]);if(c)return c.coordinate+n/2}return t[a]?t[a].coordinate+n/2:null}var d=_i(i,Lt(s)?e.dataKey:s);return Lt(d)?null:e.scale(d)}var _L=function(e){var t=e.axis,n=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,c=e.index;if(t.type==="category")return n[c]?n[c].coordinate+i:null;var d=_i(s,t.dataKey,t.domain[c]);return Lt(d)?null:t.scale(d)-a/2+i},g1e=function(e){var t=e.numericAxis,n=t.scale.domain();if(t.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},y1e=function(e,t){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Xn(a)){var s=t[a];if(s){var c=s.items.indexOf(e);return c>=0?s.stackedData[c]:null}}return null},v1e=function(e){return e.reduce(function(t,n){return[s2(n.concat([t[0]]).filter(et)),a2(n.concat([t[1]]).filter(et))]},[1/0,-1/0])},MG=function(e,t,n){return Object.keys(e).reduce(function(i,a){var s=e[a],c=s.stackedData,d=c.reduce(function(f,m){var p=v1e(m.slice(t,n+1));return[Math.min(f[0],p[0]),Math.max(f[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],i[0]),Math.max(d[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},SL=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TL=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cA=function(e,t,n){if(It(e))return e(t,n);if(!Array.isArray(e))return t;var i=[];if(et(e[0]))i[0]=n?e[0]:Math.min(e[0],t[0]);else if(SL.test(e[0])){var a=+SL.exec(e[0])[1];i[0]=t[0]-a}else It(e[0])?i[0]=e[0](t[0]):i[0]=t[0];if(et(e[1]))i[1]=n?e[1]:Math.max(e[1],t[1]);else if(TL.test(e[1])){var s=+TL.exec(e[1])[1];i[1]=t[1]+s}else It(e[1])?i[1]=e[1](t[1]):i[1]=t[1];return i},xb=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&t&&t.length>=2){for(var a=mE(t,function(p){return p.coordinate}),s=1/0,c=1,d=a.length;c<d;c++){var f=a[c],m=a[c-1];s=Math.min((f.coordinate||0)-(m.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},AL=function(e,t,n){return!e||!e.length||Bg(e,ds(n,"type.defaultProps.domain"))?t:e},PG=function(e,t){var n=e.type.defaultProps?vn(vn({},e.type.defaultProps),e.props):e.props,i=n.dataKey,a=n.name,s=n.unit,c=n.formatter,d=n.tooltipType,f=n.chartType,m=n.hide;return vn(vn({},wt(e,!1)),{},{dataKey:i,unit:s,formatter:c,name:a||i,color:VE(e),value:_i(t,i),type:d,payload:t,chartType:f,hide:m})};function Vp(r){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vp(r)}function EL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function el(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EL(Object(t),!0).forEach(function(n){DG(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function DG(r,e,t){return e=b1e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function b1e(r){var e=x1e(r,"string");return Vp(e)=="symbol"?e:e+""}function x1e(r,e){if(Vp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function w1e(r,e){return A1e(r)||T1e(r,e)||S1e(r,e)||_1e()}function _1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S1e(r,e){if(r){if(typeof r=="string")return NL(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NL(r,e)}}function NL(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function T1e(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function A1e(r){if(Array.isArray(r))return r}var wb=Math.PI/180,E1e=function(e){return e*180/Math.PI},kr=function(e,t,n,i){return{x:e+Math.cos(-wb*i)*n,y:t+Math.sin(-wb*i)*n}},N1e=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},O1e=function(e,t,n,i,a){var s=e.width,c=e.height,d=e.startAngle,f=e.endAngle,m=Ds(e.cx,s,s/2),p=Ds(e.cy,c,c/2),y=N1e(s,c,n),b=Ds(e.innerRadius,y,0),T=Ds(e.outerRadius,y,y*.8),S=Object.keys(t);return S.reduce(function(w,E){var I=t[E],C=I.domain,B=I.reversed,R;if(Lt(I.range))i==="angleAxis"?R=[d,f]:i==="radiusAxis"&&(R=[b,T]),B&&(R=[R[1],R[0]]);else{R=I.range;var D=R,A=w1e(D,2);d=A[0],f=A[1]}var k=jG(I,a),N=k.realScaleType,U=k.scale;U.domain(C).range(R),IG(U);var M=RG(U,el(el({},I),{},{realScaleType:N})),$=el(el(el({},I),M),{},{range:R,radius:T,realScaleType:N,scale:U,cx:m,cy:p,innerRadius:b,outerRadius:T,startAngle:d,endAngle:f});return el(el({},w),{},DG({},E,$))},{})},k1e=function(e,t){var n=e.x,i=e.y,a=t.x,s=t.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},C1e=function(e,t){var n=e.x,i=e.y,a=t.cx,s=t.cy,c=k1e({x:n,y:i},{x:a,y:s});if(c<=0)return{radius:c};var d=(n-a)/c,f=Math.acos(d);return i>s&&(f=2*Math.PI-f),{radius:c,angle:E1e(f),angleInRadian:f}},j1e=function(e){var t=e.startAngle,n=e.endAngle,i=Math.floor(t/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:t-s*360,endAngle:n-s*360}},I1e=function(e,t){var n=t.startAngle,i=t.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),c=Math.min(a,s);return e+c*360},OL=function(e,t){var n=e.x,i=e.y,a=C1e({x:n,y:i},t),s=a.radius,c=a.angle,d=t.innerRadius,f=t.outerRadius;if(s<d||s>f)return!1;if(s===0)return!0;var m=j1e(t),p=m.startAngle,y=m.endAngle,b=c,T;if(p<=y){for(;b>y;)b-=360;for(;b<p;)b+=360;T=b>=p&&b<=y}else{for(;b>p;)b-=360;for(;b<y;)b+=360;T=b>=y&&b<=p}return T?el(el({},t),{},{radius:s,angle:I1e(b,t)}):null},LG=function(e){return!F.isValidElement(e)&&!It(e)&&typeof e!="boolean"?e.className:""};function $p(r){"@babel/helpers - typeof";return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(r)}var R1e=["offset"];function M1e(r){return B1e(r)||L1e(r)||D1e(r)||P1e()}function P1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D1e(r,e){if(r){if(typeof r=="string")return uA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uA(r,e)}}function L1e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function B1e(r){if(Array.isArray(r))return uA(r)}function uA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function U1e(r,e){if(r==null)return{};var t=z1e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function z1e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function kL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Wn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kL(Object(t),!0).forEach(function(n){V1e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function V1e(r,e,t){return e=$1e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $1e(r){var e=F1e(r,"string");return $p(e)=="symbol"?e:e+""}function F1e(r,e){if($p(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if($p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Fp(){return Fp=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fp.apply(this,arguments)}var q1e=function(e){var t=e.value,n=e.formatter,i=Lt(e.children)?t:e.children;return It(n)?n(i):i},H1e=function(e,t){var n=Ps(t-e),i=Math.min(Math.abs(t-e),360);return n*i},G1e=function(e,t,n){var i=e.position,a=e.viewBox,s=e.offset,c=e.className,d=a,f=d.cx,m=d.cy,p=d.innerRadius,y=d.outerRadius,b=d.startAngle,T=d.endAngle,S=d.clockWise,w=(p+y)/2,E=H1e(b,T),I=E>=0?1:-1,C,B;i==="insideStart"?(C=b+I*s,B=S):i==="insideEnd"?(C=T-I*s,B=!S):i==="end"&&(C=T+I*s,B=S),B=E<=0?B:!B;var R=kr(f,m,w,C),D=kr(f,m,w,C+(B?1:-1)*359),A="M".concat(R.x,",").concat(R.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(B?0:1,`,
    `).concat(D.x,",").concat(D.y),k=Lt(e.id)?Ig("recharts-radial-line-"):e.id;return ne.createElement("text",Fp({},n,{dominantBaseline:"central",className:zt("recharts-radial-bar-label",c)}),ne.createElement("defs",null,ne.createElement("path",{id:k,d:A})),ne.createElement("textPath",{xlinkHref:"#".concat(k)},t))},K1e=function(e){var t=e.viewBox,n=e.offset,i=e.position,a=t,s=a.cx,c=a.cy,d=a.innerRadius,f=a.outerRadius,m=a.startAngle,p=a.endAngle,y=(m+p)/2;if(i==="outside"){var b=kr(s,c,f+n,y),T=b.x,S=b.y;return{x:T,y:S,textAnchor:T>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:c,textAnchor:"middle",verticalAnchor:"end"};var w=(d+f)/2,E=kr(s,c,w,y),I=E.x,C=E.y;return{x:I,y:C,textAnchor:"middle",verticalAnchor:"middle"}},W1e=function(e){var t=e.viewBox,n=e.parentViewBox,i=e.offset,a=e.position,s=t,c=s.x,d=s.y,f=s.width,m=s.height,p=m>=0?1:-1,y=p*i,b=p>0?"end":"start",T=p>0?"start":"end",S=f>=0?1:-1,w=S*i,E=S>0?"end":"start",I=S>0?"start":"end";if(a==="top"){var C={x:c+f/2,y:d-p*i,textAnchor:"middle",verticalAnchor:b};return Wn(Wn({},C),n?{height:Math.max(d-n.y,0),width:f}:{})}if(a==="bottom"){var B={x:c+f/2,y:d+m+y,textAnchor:"middle",verticalAnchor:T};return Wn(Wn({},B),n?{height:Math.max(n.y+n.height-(d+m),0),width:f}:{})}if(a==="left"){var R={x:c-w,y:d+m/2,textAnchor:E,verticalAnchor:"middle"};return Wn(Wn({},R),n?{width:Math.max(R.x-n.x,0),height:m}:{})}if(a==="right"){var D={x:c+f+w,y:d+m/2,textAnchor:I,verticalAnchor:"middle"};return Wn(Wn({},D),n?{width:Math.max(n.x+n.width-D.x,0),height:m}:{})}var A=n?{width:f,height:m}:{};return a==="insideLeft"?Wn({x:c+w,y:d+m/2,textAnchor:I,verticalAnchor:"middle"},A):a==="insideRight"?Wn({x:c+f-w,y:d+m/2,textAnchor:E,verticalAnchor:"middle"},A):a==="insideTop"?Wn({x:c+f/2,y:d+y,textAnchor:"middle",verticalAnchor:T},A):a==="insideBottom"?Wn({x:c+f/2,y:d+m-y,textAnchor:"middle",verticalAnchor:b},A):a==="insideTopLeft"?Wn({x:c+w,y:d+y,textAnchor:I,verticalAnchor:T},A):a==="insideTopRight"?Wn({x:c+f-w,y:d+y,textAnchor:E,verticalAnchor:T},A):a==="insideBottomLeft"?Wn({x:c+w,y:d+m-y,textAnchor:I,verticalAnchor:b},A):a==="insideBottomRight"?Wn({x:c+f-w,y:d+m-y,textAnchor:E,verticalAnchor:b},A):rf(a)&&(et(a.x)||Yu(a.x))&&(et(a.y)||Yu(a.y))?Wn({x:c+Ds(a.x,f),y:d+Ds(a.y,m),textAnchor:"end",verticalAnchor:"end"},A):Wn({x:c+f/2,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},A)},X1e=function(e){return"cx"in e&&et(e.cx)};function bi(r){var e=r.offset,t=e===void 0?5:e,n=U1e(r,R1e),i=Wn({offset:t},n),a=i.viewBox,s=i.position,c=i.value,d=i.children,f=i.content,m=i.className,p=m===void 0?"":m,y=i.textBreakAll;if(!a||Lt(c)&&Lt(d)&&!F.isValidElement(f)&&!It(f))return null;if(F.isValidElement(f))return F.cloneElement(f,i);var b;if(It(f)){if(b=F.createElement(f,i),F.isValidElement(b))return b}else b=q1e(i);var T=X1e(a),S=wt(i,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return G1e(i,b,S);var w=T?K1e(i):W1e(i);return ne.createElement(Th,Fp({className:zt("recharts-label",p)},S,w,{breakAll:y}),b)}bi.displayName="Label";var BG=function(e){var t=e.cx,n=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,c=e.r,d=e.radius,f=e.innerRadius,m=e.outerRadius,p=e.x,y=e.y,b=e.top,T=e.left,S=e.width,w=e.height,E=e.clockWise,I=e.labelViewBox;if(I)return I;if(et(S)&&et(w)){if(et(p)&&et(y))return{x:p,y,width:S,height:w};if(et(b)&&et(T))return{x:b,y:T,width:S,height:w}}return et(p)&&et(y)?{x:p,y,width:0,height:0}:et(t)&&et(n)?{cx:t,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:f||0,outerRadius:m||d||c||0,clockWise:E}:e.viewBox?e.viewBox:{}},Q1e=function(e,t){return e?e===!0?ne.createElement(bi,{key:"label-implicit",viewBox:t}):Xn(e)?ne.createElement(bi,{key:"label-implicit",viewBox:t,value:e}):F.isValidElement(e)?e.type===bi?F.cloneElement(e,{key:"label-implicit",viewBox:t}):ne.createElement(bi,{key:"label-implicit",content:e,viewBox:t}):It(e)?ne.createElement(bi,{key:"label-implicit",content:e,viewBox:t}):rf(e)?ne.createElement(bi,Fp({viewBox:t},e,{key:"label-implicit"})):null:null},Y1e=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,a=BG(e),s=Fa(i,bi).map(function(d,f){return F.cloneElement(d,{viewBox:t||a,key:"label-".concat(f)})});if(!n)return s;var c=Q1e(e.label,t||a);return[c].concat(M1e(s))};bi.parseViewBox=BG;bi.renderCallByParent=Y1e;var F_,CL;function Z1e(){if(CL)return F_;CL=1;function r(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}return F_=r,F_}var J1e=Z1e();const UG=mr(J1e);function qp(r){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qp(r)}var eye=["valueAccessor"],tye=["data","dataKey","clockWise","id","textBreakAll"];function rye(r){return sye(r)||aye(r)||iye(r)||nye()}function nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iye(r,e){if(r){if(typeof r=="string")return dA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return dA(r,e)}}function aye(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function sye(r){if(Array.isArray(r))return dA(r)}function dA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function _b(){return _b=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},_b.apply(this,arguments)}function jL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function IL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jL(Object(t),!0).forEach(function(n){oye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function oye(r,e,t){return e=lye(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lye(r){var e=cye(r,"string");return qp(e)=="symbol"?e:e+""}function cye(r,e){if(qp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function RL(r,e){if(r==null)return{};var t=uye(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function uye(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var dye=function(e){return Array.isArray(e.value)?UG(e.value):e.value};function vl(r){var e=r.valueAccessor,t=e===void 0?dye:e,n=RL(r,eye),i=n.data,a=n.dataKey,s=n.clockWise,c=n.id,d=n.textBreakAll,f=RL(n,tye);return!i||!i.length?null:ne.createElement(ur,{className:"recharts-label-list"},i.map(function(m,p){var y=Lt(a)?t(m,p):_i(m&&m.payload,a),b=Lt(c)?{}:{id:"".concat(c,"-").concat(p)};return ne.createElement(bi,_b({},wt(m,!0),f,b,{parentViewBox:m.parentViewBox,value:y,textBreakAll:d,viewBox:bi.parseViewBox(Lt(s)?m:IL(IL({},m),{},{clockWise:s})),key:"label-".concat(p),index:p}))}))}vl.displayName="LabelList";function hye(r,e){return r?r===!0?ne.createElement(vl,{key:"labelList-implicit",data:e}):ne.isValidElement(r)||It(r)?ne.createElement(vl,{key:"labelList-implicit",data:e,content:r}):rf(r)?ne.createElement(vl,_b({data:e},r,{key:"labelList-implicit"})):null:null}function fye(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&t&&!r.label)return null;var n=r.children,i=Fa(n,vl).map(function(s,c){return F.cloneElement(s,{data:e,key:"labelList-".concat(c)})});if(!t)return i;var a=hye(r.label,e);return[a].concat(rye(i))}vl.renderCallByParent=fye;function Hp(r){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(r)}function hA(){return hA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},hA.apply(this,arguments)}function ML(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function PL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(t),!0).forEach(function(n){mye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ML(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function mye(r,e,t){return e=pye(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function pye(r){var e=gye(r,"string");return Hp(e)=="symbol"?e:e+""}function gye(r,e){if(Hp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var yye=function(e,t){var n=Ps(t-e),i=Math.min(Math.abs(t-e),359.999);return n*i},Vy=function(e){var t=e.cx,n=e.cy,i=e.radius,a=e.angle,s=e.sign,c=e.isExternal,d=e.cornerRadius,f=e.cornerIsExternal,m=d*(c?1:-1)+i,p=Math.asin(d/m)/wb,y=f?a:a+s*p,b=kr(t,n,m,y),T=kr(t,n,i,y),S=f?a-s*p:a,w=kr(t,n,m*Math.cos(p*wb),S);return{center:b,circleTangency:T,lineTangency:w,theta:p}},zG=function(e){var t=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,c=e.endAngle,d=yye(s,c),f=s+d,m=kr(t,n,a,s),p=kr(t,n,a,f),y="M ".concat(m.x,",").concat(m.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(s>f),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(i>0){var b=kr(t,n,i,s),T=kr(t,n,i,f);y+="L ".concat(T.x,",").concat(T.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(s<=f),`,
            `).concat(b.x,",").concat(b.y," Z")}else y+="L ".concat(t,",").concat(n," Z");return y},vye=function(e){var t=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,c=e.forceCornerRadius,d=e.cornerIsExternal,f=e.startAngle,m=e.endAngle,p=Ps(m-f),y=Vy({cx:t,cy:n,radius:a,angle:f,sign:p,cornerRadius:s,cornerIsExternal:d}),b=y.circleTangency,T=y.lineTangency,S=y.theta,w=Vy({cx:t,cy:n,radius:a,angle:m,sign:-p,cornerRadius:s,cornerIsExternal:d}),E=w.circleTangency,I=w.lineTangency,C=w.theta,B=d?Math.abs(f-m):Math.abs(f-m)-S-C;if(B<0)return c?"M ".concat(T.x,",").concat(T.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):zG({cx:t,cy:n,innerRadius:i,outerRadius:a,startAngle:f,endAngle:m});var R="M ".concat(T.x,",").concat(T.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(B>180),",").concat(+(p<0),",").concat(E.x,",").concat(E.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(I.x,",").concat(I.y,`
  `);if(i>0){var D=Vy({cx:t,cy:n,radius:i,angle:f,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),A=D.circleTangency,k=D.lineTangency,N=D.theta,U=Vy({cx:t,cy:n,radius:i,angle:m,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:d}),M=U.circleTangency,$=U.lineTangency,z=U.theta,Q=d?Math.abs(f-m):Math.abs(f-m)-N-z;if(Q<0&&s===0)return"".concat(R,"L").concat(t,",").concat(n,"Z");R+="L".concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Q>180),",").concat(+(p>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(p<0),",").concat(k.x,",").concat(k.y,"Z")}else R+="L".concat(t,",").concat(n,"Z");return R},bye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VG=function(e){var t=PL(PL({},bye),e),n=t.cx,i=t.cy,a=t.innerRadius,s=t.outerRadius,c=t.cornerRadius,d=t.forceCornerRadius,f=t.cornerIsExternal,m=t.startAngle,p=t.endAngle,y=t.className;if(s<a||m===p)return null;var b=zt("recharts-sector",y),T=s-a,S=Ds(c,T,0,!0),w;return S>0&&Math.abs(m-p)<360?w=vye({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(S,T/2),forceCornerRadius:d,cornerIsExternal:f,startAngle:m,endAngle:p}):w=zG({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:m,endAngle:p}),ne.createElement("path",hA({},wt(t,!0),{className:b,d:w,role:"img"}))};function Gp(r){"@babel/helpers - typeof";return Gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gp(r)}function fA(){return fA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},fA.apply(this,arguments)}function DL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function LL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(t),!0).forEach(function(n){xye(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):DL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function xye(r,e,t){return e=wye(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wye(r){var e=_ye(r,"string");return Gp(e)=="symbol"?e:e+""}function _ye(r,e){if(Gp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var BL={curveBasisClosed:$ue,curveBasisOpen:Fue,curveBasis:Vue,curveBumpX:Nue,curveBumpY:Oue,curveLinearClosed:que,curveLinear:Gx,curveMonotoneX:Hue,curveMonotoneY:Gue,curveNatural:Kue,curveStep:Wue,curveStepAfter:Que,curveStepBefore:Xue},$y=function(e){return e.x===+e.x&&e.y===+e.y},bm=function(e){return e.x},xm=function(e){return e.y},Sye=function(e,t){if(It(e))return e;var n="curve".concat(qx(e));return(n==="curveMonotone"||n==="curveBump")&&t?BL["".concat(n).concat(t==="vertical"?"Y":"X")]:BL[n]||Gx},Tye=function(e){var t=e.type,n=t===void 0?"linear":t,i=e.points,a=i===void 0?[]:i,s=e.baseLine,c=e.layout,d=e.connectNulls,f=d===void 0?!1:d,m=Sye(n,c),p=f?a.filter(function(S){return $y(S)}):a,y;if(Array.isArray(s)){var b=f?s.filter(function(S){return $y(S)}):s,T=p.map(function(S,w){return LL(LL({},S),{},{base:b[w]})});return c==="vertical"?y=Ry().y(xm).x1(bm).x0(function(S){return S.base.x}):y=Ry().x(bm).y1(xm).y0(function(S){return S.base.y}),y.defined($y).curve(m),y(T)}return c==="vertical"&&et(s)?y=Ry().y(xm).x1(bm).x0(s):et(s)?y=Ry().x(bm).y1(xm).y0(s):y=Uq().x(bm).y(xm),y.defined($y).curve(m),y(p)},mA=function(e){var t=e.className,n=e.points,i=e.path,a=e.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?Tye(e):i;return F.createElement("path",fA({},wt(e,!1),Xv(e),{className:zt("recharts-curve",t),d:s,ref:a}))},q_={exports:{}},H_,UL;function Aye(){if(UL)return H_;UL=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return H_=r,H_}var G_,zL;function Eye(){if(zL)return G_;zL=1;var r=Aye();function e(){}function t(){}return t.resetWarningCache=e,G_=function(){function n(s,c,d,f,m,p){if(p!==r){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function i(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},G_}var VL;function Nye(){return VL||(VL=1,q_.exports=Eye()()),q_.exports}var Oye=Nye();const vr=mr(Oye),{getOwnPropertyNames:kye,getOwnPropertySymbols:Cye}=Object,{hasOwnProperty:jye}=Object.prototype;function K_(r,e){return function(n,i,a){return r(n,i,a)&&e(n,i,a)}}function Fy(r){return function(t,n,i){if(!t||!n||typeof t!="object"||typeof n!="object")return r(t,n,i);const{cache:a}=i,s=a.get(t),c=a.get(n);if(s&&c)return s===n&&c===t;a.set(t,n),a.set(n,t);const d=r(t,n,i);return a.delete(t),a.delete(n),d}}function Iye(r){return r!=null?r[Symbol.toStringTag]:void 0}function $L(r){return kye(r).concat(Cye(r))}const Rye=Object.hasOwn||((r,e)=>jye.call(r,e));function U0(r,e){return r===e||!r&&!e&&r!==r&&e!==e}const Mye="__v",Pye="__o",Dye="_owner",{getOwnPropertyDescriptor:FL,keys:qL}=Object;function Lye(r,e){return r.byteLength===e.byteLength&&Sb(new Uint8Array(r),new Uint8Array(e))}function Bye(r,e,t){let n=r.length;if(e.length!==n)return!1;for(;n-- >0;)if(!t.equals(r[n],e[n],n,n,r,e,t))return!1;return!0}function Uye(r,e){return r.byteLength===e.byteLength&&Sb(new Uint8Array(r.buffer,r.byteOffset,r.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function zye(r,e){return U0(r.getTime(),e.getTime())}function Vye(r,e){return r.name===e.name&&r.message===e.message&&r.cause===e.cause&&r.stack===e.stack}function $ye(r,e){return r===e}function HL(r,e,t){const n=r.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=r.entries();let s,c,d=0;for(;(s=a.next())&&!s.done;){const f=e.entries();let m=!1,p=0;for(;(c=f.next())&&!c.done;){if(i[p]){p++;continue}const y=s.value,b=c.value;if(t.equals(y[0],b[0],d,p,r,e,t)&&t.equals(y[1],b[1],y[0],b[0],r,e,t)){m=i[p]=!0;break}p++}if(!m)return!1;d++}return!0}const Fye=U0;function qye(r,e,t){const n=qL(r);let i=n.length;if(qL(e).length!==i)return!1;for(;i-- >0;)if(!$G(r,e,t,n[i]))return!1;return!0}function wm(r,e,t){const n=$L(r);let i=n.length;if($L(e).length!==i)return!1;let a,s,c;for(;i-- >0;)if(a=n[i],!$G(r,e,t,a)||(s=FL(r,a),c=FL(e,a),(s||c)&&(!s||!c||s.configurable!==c.configurable||s.enumerable!==c.enumerable||s.writable!==c.writable)))return!1;return!0}function Hye(r,e){return U0(r.valueOf(),e.valueOf())}function Gye(r,e){return r.source===e.source&&r.flags===e.flags}function GL(r,e,t){const n=r.size;if(n!==e.size)return!1;if(!n)return!0;const i=new Array(n),a=r.values();let s,c;for(;(s=a.next())&&!s.done;){const d=e.values();let f=!1,m=0;for(;(c=d.next())&&!c.done;){if(!i[m]&&t.equals(s.value,c.value,s.value,c.value,r,e,t)){f=i[m]=!0;break}m++}if(!f)return!1}return!0}function Sb(r,e){let t=r.byteLength;if(e.byteLength!==t||r.byteOffset!==e.byteOffset)return!1;for(;t-- >0;)if(r[t]!==e[t])return!1;return!0}function Kye(r,e){return r.hostname===e.hostname&&r.pathname===e.pathname&&r.protocol===e.protocol&&r.port===e.port&&r.hash===e.hash&&r.username===e.username&&r.password===e.password}function $G(r,e,t,n){return(n===Dye||n===Pye||n===Mye)&&(r.$$typeof||e.$$typeof)?!0:Rye(e,n)&&t.equals(r[n],e[n],n,n,r,e,t)}const Wye="[object ArrayBuffer]",Xye="[object Arguments]",Qye="[object Boolean]",Yye="[object DataView]",Zye="[object Date]",Jye="[object Error]",eve="[object Map]",tve="[object Number]",rve="[object Object]",nve="[object RegExp]",ive="[object Set]",ave="[object String]",sve={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ove="[object URL]",lve=Object.prototype.toString;function cve({areArrayBuffersEqual:r,areArraysEqual:e,areDataViewsEqual:t,areDatesEqual:n,areErrorsEqual:i,areFunctionsEqual:a,areMapsEqual:s,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:f,areRegExpsEqual:m,areSetsEqual:p,areTypedArraysEqual:y,areUrlsEqual:b,unknownTagComparators:T}){return function(w,E,I){if(w===E)return!0;if(w==null||E==null)return!1;const C=typeof w;if(C!==typeof E)return!1;if(C!=="object")return C==="number"?c(w,E,I):C==="function"?a(w,E,I):!1;const B=w.constructor;if(B!==E.constructor)return!1;if(B===Object)return d(w,E,I);if(Array.isArray(w))return e(w,E,I);if(B===Date)return n(w,E,I);if(B===RegExp)return m(w,E,I);if(B===Map)return s(w,E,I);if(B===Set)return p(w,E,I);const R=lve.call(w);if(R===Zye)return n(w,E,I);if(R===nve)return m(w,E,I);if(R===eve)return s(w,E,I);if(R===ive)return p(w,E,I);if(R===rve)return typeof w.then!="function"&&typeof E.then!="function"&&d(w,E,I);if(R===ove)return b(w,E,I);if(R===Jye)return i(w,E,I);if(R===Xye)return d(w,E,I);if(sve[R])return y(w,E,I);if(R===Wye)return r(w,E,I);if(R===Yye)return t(w,E,I);if(R===Qye||R===tve||R===ave)return f(w,E,I);if(T){let D=T[R];if(!D){const A=Iye(w);A&&(D=T[A])}if(D)return D(w,E,I)}return!1}}function uve({circular:r,createCustomConfig:e,strict:t}){let n={areArrayBuffersEqual:Lye,areArraysEqual:t?wm:Bye,areDataViewsEqual:Uye,areDatesEqual:zye,areErrorsEqual:Vye,areFunctionsEqual:$ye,areMapsEqual:t?K_(HL,wm):HL,areNumbersEqual:Fye,areObjectsEqual:t?wm:qye,arePrimitiveWrappersEqual:Hye,areRegExpsEqual:Gye,areSetsEqual:t?K_(GL,wm):GL,areTypedArraysEqual:t?K_(Sb,wm):Sb,areUrlsEqual:Kye,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),r){const i=Fy(n.areArraysEqual),a=Fy(n.areMapsEqual),s=Fy(n.areObjectsEqual),c=Fy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:i,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:c})}return n}function dve(r){return function(e,t,n,i,a,s,c){return r(e,t,c)}}function hve({circular:r,comparator:e,createState:t,equals:n,strict:i}){if(t)return function(c,d){const{cache:f=r?new WeakMap:void 0,meta:m}=t();return e(c,d,{cache:f,equals:n,meta:m,strict:i})};if(r)return function(c,d){return e(c,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};const a={cache:void 0,equals:n,meta:void 0,strict:i};return function(c,d){return e(c,d,a)}}const fve=ou();ou({strict:!0});ou({circular:!0});ou({circular:!0,strict:!0});ou({createInternalComparator:()=>U0});ou({strict:!0,createInternalComparator:()=>U0});ou({circular:!0,createInternalComparator:()=>U0});ou({circular:!0,createInternalComparator:()=>U0,strict:!0});function ou(r={}){const{circular:e=!1,createInternalComparator:t,createState:n,strict:i=!1}=r,a=uve(r),s=cve(a),c=t?t(s):dve(s);return hve({circular:e,comparator:s,createState:n,equals:c,strict:i})}function mve(r){typeof requestAnimationFrame<"u"&&requestAnimationFrame(r)}function KL(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=-1,n=function i(a){t<0&&(t=a),a-t>e?(r(a),t=-1):mve(i)};requestAnimationFrame(n)}function pA(r){"@babel/helpers - typeof";return pA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pA(r)}function pve(r){return bve(r)||vve(r)||yve(r)||gve()}function gve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yve(r,e){if(r){if(typeof r=="string")return WL(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return WL(r,e)}}function WL(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function vve(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function bve(r){if(Array.isArray(r))return r}function xve(){var r={},e=function(){return null},t=!1,n=function i(a){if(!t){if(Array.isArray(a)){if(!a.length)return;var s=a,c=pve(s),d=c[0],f=c.slice(1);if(typeof d=="number"){KL(i.bind(null,f),d);return}i(d),KL(i.bind(null,f));return}pA(a)==="object"&&(r=a,e(r)),typeof a=="function"&&a()}};return{stop:function(){t=!0},start:function(a){t=!1,n(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Kp(r){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(r)}function XL(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function QL(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XL(Object(t),!0).forEach(function(n){FG(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):XL(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function FG(r,e,t){return e=wve(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wve(r){var e=_ve(r,"string");return Kp(e)==="symbol"?e:String(e)}function _ve(r,e){if(Kp(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Kp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var Sve=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},Tve=function(e){return e},Ave=function(e){return e.replace(/([A-Z])/g,function(t){return"-".concat(t.toLowerCase())})},Xm=function(e,t){return Object.keys(t).reduce(function(n,i){return QL(QL({},n),{},FG({},i,e(i,t[i])))},{})},YL=function(e,t,n){return e.map(function(i){return"".concat(Ave(i)," ").concat(t,"ms ").concat(n)}).join(",")};function Eve(r,e){return kve(r)||Ove(r,e)||qG(r,e)||Nve()}function Nve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ove(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function kve(r){if(Array.isArray(r))return r}function Cve(r){return Rve(r)||Ive(r)||qG(r)||jve()}function jve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qG(r,e){if(r){if(typeof r=="string")return gA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gA(r,e)}}function Ive(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Rve(r){if(Array.isArray(r))return gA(r)}function gA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var Tb=1e-4,HG=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},GG=function(e,t){return e.map(function(n,i){return n*Math.pow(t,i)}).reduce(function(n,i){return n+i})},ZL=function(e,t){return function(n){var i=HG(e,t);return GG(i,n)}},Mve=function(e,t){return function(n){var i=HG(e,t),a=[].concat(Cve(i.map(function(s,c){return s*c}).slice(1)),[0]);return GG(a,n)}},JL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],a=t[1],s=t[2],c=t[3];if(t.length===1)switch(t[0]){case"linear":i=0,a=0,s=1,c=1;break;case"ease":i=.25,a=.1,s=.25,c=1;break;case"ease-in":i=.42,a=0,s=1,c=1;break;case"ease-out":i=.42,a=0,s=.58,c=1;break;case"ease-in-out":i=0,a=0,s=.58,c=1;break;default:{var d=t[0].split("(");if(d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4){var f=d[1].split(")")[0].split(",").map(function(w){return parseFloat(w)}),m=Eve(f,4);i=m[0],a=m[1],s=m[2],c=m[3]}}}var p=ZL(i,s),y=ZL(a,c),b=Mve(i,s),T=function(E){return E>1?1:E<0?0:E},S=function(E){for(var I=E>1?1:E,C=I,B=0;B<8;++B){var R=p(C)-I,D=b(C);if(Math.abs(R-I)<Tb||D<Tb)return y(C);C=T(C-R/D)}return y(C)};return S.isStepper=!1,S},Pve=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.stiff,n=t===void 0?100:t,i=e.damping,a=i===void 0?8:i,s=e.dt,c=s===void 0?17:s,d=function(m,p,y){var b=-(m-p)*n,T=y*a,S=y+(b-T)*c/1e3,w=y*c/1e3+m;return Math.abs(w-p)<Tb&&Math.abs(S)<Tb?[p,0]:[w,S]};return d.isStepper=!0,d.dt=c,d},Dve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JL(i);case"spring":return Pve();default:if(i.split("(")[0]==="cubic-bezier")return JL(i)}return typeof i=="function"?i:null};function Wp(r){"@babel/helpers - typeof";return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(r)}function eB(r){return Uve(r)||Bve(r)||KG(r)||Lve()}function Lve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Uve(r){if(Array.isArray(r))return vA(r)}function tB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tB(Object(t),!0).forEach(function(n){yA(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function yA(r,e,t){return e=zve(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zve(r){var e=Vve(r,"string");return Wp(e)==="symbol"?e:String(e)}function Vve(r,e){if(Wp(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Wp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $ve(r,e){return Hve(r)||qve(r,e)||KG(r,e)||Fve()}function Fve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KG(r,e){if(r){if(typeof r=="string")return vA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vA(r,e)}}function vA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function qve(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Hve(r){if(Array.isArray(r))return r}var Ab=function(e,t,n){return e+(t-e)*n},bA=function(e){var t=e.from,n=e.to;return t!==n},Gve=function r(e,t,n){var i=Xm(function(a,s){if(bA(s)){var c=e(s.from,s.to,s.velocity),d=$ve(c,2),f=d[0],m=d[1];return gi(gi({},s),{},{from:f,velocity:m})}return s},t);return n<1?Xm(function(a,s){return bA(s)?gi(gi({},s),{},{velocity:Ab(s.velocity,i[a].velocity,n),from:Ab(s.from,i[a].from,n)}):s},t):r(e,i,n-1)};const Kve=(function(r,e,t,n,i){var a=Sve(r,e),s=a.reduce(function(w,E){return gi(gi({},w),{},yA({},E,[r[E],e[E]]))},{}),c=a.reduce(function(w,E){return gi(gi({},w),{},yA({},E,{from:r[E],velocity:0,to:e[E]}))},{}),d=-1,f,m,p=function(){return null},y=function(){return Xm(function(E,I){return I.from},c)},b=function(){return!Object.values(c).filter(bA).length},T=function(E){f||(f=E);var I=E-f,C=I/t.dt;c=Gve(t,c,C),i(gi(gi(gi({},r),e),y())),f=E,b()||(d=requestAnimationFrame(p))},S=function(E){m||(m=E);var I=(E-m)/n,C=Xm(function(R,D){return Ab.apply(void 0,eB(D).concat([t(I)]))},s);if(i(gi(gi(gi({},r),e),C)),I<1)d=requestAnimationFrame(p);else{var B=Xm(function(R,D){return Ab.apply(void 0,eB(D).concat([t(1)]))},s);i(gi(gi(gi({},r),e),B))}};return p=t.isStepper?T:S,function(){return requestAnimationFrame(p),function(){cancelAnimationFrame(d)}}});function kh(r){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(r)}var Wve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Xve(r,e){if(r==null)return{};var t=Qve(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Qve(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function W_(r){return ebe(r)||Jve(r)||Zve(r)||Yve()}function Yve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zve(r,e){if(r){if(typeof r=="string")return xA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xA(r,e)}}function Jve(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ebe(r){if(Array.isArray(r))return xA(r)}function xA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function rB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Cs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rB(Object(t),!0).forEach(function(n){Mm(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):rB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Mm(r,e,t){return e=WG(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tbe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rbe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,WG(n.key),n)}}function nbe(r,e,t){return e&&rbe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function WG(r){var e=ibe(r,"string");return kh(e)==="symbol"?e:String(e)}function ibe(r,e){if(kh(r)!=="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(kh(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function abe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&wA(r,e)}function wA(r,e){return wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wA(r,e)}function sbe(r){var e=obe();return function(){var n=Eb(r),i;if(e){var a=Eb(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return _A(this,i)}}function _A(r,e){if(e&&(kh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SA(r)}function SA(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function obe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Eb(r){return Eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Eb(r)}var _o=(function(r){abe(t,r);var e=sbe(t);function t(n,i){var a;tbe(this,t),a=e.call(this,n,i);var s=a.props,c=s.isActive,d=s.attributeName,f=s.from,m=s.to,p=s.steps,y=s.children,b=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(SA(a)),a.changeStyle=a.changeStyle.bind(SA(a)),!c||b<=0)return a.state={style:{}},typeof y=="function"&&(a.state={style:m}),_A(a);if(p&&p.length)a.state={style:p[0].style};else if(f){if(typeof y=="function")return a.state={style:f},_A(a);a.state={style:d?Mm({},d,f):f}}else a.state={style:{}};return a}return nbe(t,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,c=a.canBegin,d=a.attributeName,f=a.shouldReAnimate,m=a.to,p=a.from,y=this.state.style;if(c){if(!s){var b={style:d?Mm({},d,m):m};this.state&&y&&(d&&y[d]!==m||!d&&y!==m)&&this.setState(b);return}if(!(fve(i.to,m)&&i.canBegin&&i.isActive)){var T=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var S=T||f?p:i.to;if(this.state&&y){var w={style:d?Mm({},d,S):S};(d&&y[d]!==S||!d&&y!==S)&&this.setState(w)}this.runAnimation(Cs(Cs({},this.props),{},{from:S,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,c=i.to,d=i.duration,f=i.easing,m=i.begin,p=i.onAnimationEnd,y=i.onAnimationStart,b=Kve(s,c,Dve(f),d,this.changeStyle),T=function(){a.stopJSAnimation=b()};this.manager.start([y,m,T,d,p])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,c=i.begin,d=i.onAnimationStart,f=s[0],m=f.style,p=f.duration,y=p===void 0?0:p,b=function(S,w,E){if(E===0)return S;var I=w.duration,C=w.easing,B=C===void 0?"ease":C,R=w.style,D=w.properties,A=w.onAnimationEnd,k=E>0?s[E-1]:w,N=D||Object.keys(R);if(typeof B=="function"||B==="spring")return[].concat(W_(S),[a.runJSAnimation.bind(a,{from:k.style,to:R,duration:I,easing:B}),I]);var U=YL(N,I,B),M=Cs(Cs(Cs({},k.style),R),{},{transition:U});return[].concat(W_(S),[M,I,A]).filter(Tve)};return this.manager.start([d].concat(W_(s.reduce(b,[m,Math.max(y,c)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=xve());var a=i.begin,s=i.duration,c=i.attributeName,d=i.to,f=i.easing,m=i.onAnimationStart,p=i.onAnimationEnd,y=i.steps,b=i.children,T=this.manager;if(this.unSubscribe=T.subscribe(this.handleStyleChange),typeof f=="function"||typeof b=="function"||f==="spring"){this.runJSAnimation(i);return}if(y.length>1){this.runStepAnimation(i);return}var S=c?Mm({},c,d):d,w=YL(Object.keys(S),s,f);T.start([m,a,Cs(Cs({},S),{},{transition:w}),s,p])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var c=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var d=Xve(i,Wve),f=F.Children.count(a),m=this.state.style;if(typeof a=="function")return a(m);if(!c||f===0||s<=0)return a;var p=function(b){var T=b.props,S=T.style,w=S===void 0?{}:S,E=T.className,I=F.cloneElement(b,Cs(Cs({},d),{},{style:Cs(Cs({},w),m),className:E}));return I};return f===1?p(F.Children.only(a)):ne.createElement("div",null,F.Children.map(a,function(y){return p(y)}))}}]),t})(F.PureComponent);_o.displayName="Animate";_o.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_o.propTypes={from:vr.oneOfType([vr.object,vr.string]),to:vr.oneOfType([vr.object,vr.string]),attributeName:vr.string,duration:vr.number,begin:vr.number,easing:vr.oneOfType([vr.string,vr.func]),steps:vr.arrayOf(vr.shape({duration:vr.number.isRequired,style:vr.object.isRequired,easing:vr.oneOfType([vr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),vr.func]),properties:vr.arrayOf("string"),onAnimationEnd:vr.func})),children:vr.oneOfType([vr.node,vr.func]),isActive:vr.bool,canBegin:vr.bool,onAnimationEnd:vr.func,shouldReAnimate:vr.bool,onAnimationStart:vr.func,onAnimationReStart:vr.func};function Xp(r){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(r)}function Nb(){return Nb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Nb.apply(this,arguments)}function lbe(r,e){return hbe(r)||dbe(r,e)||ube(r,e)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ube(r,e){if(r){if(typeof r=="string")return nB(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nB(r,e)}}function nB(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function dbe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function hbe(r){if(Array.isArray(r))return r}function iB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function aB(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iB(Object(t),!0).forEach(function(n){fbe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):iB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function fbe(r,e,t){return e=mbe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function mbe(r){var e=pbe(r,"string");return Xp(e)=="symbol"?e:e+""}function pbe(r,e){if(Xp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var sB=function(e,t,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),c=i>=0?1:-1,d=n>=0?1:-1,f=i>=0&&n>=0||i<0&&n<0?1:0,m;if(s>0&&a instanceof Array){for(var p=[0,0,0,0],y=0,b=4;y<b;y++)p[y]=a[y]>s?s:a[y];m="M".concat(e,",").concat(t+c*p[0]),p[0]>0&&(m+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(f,",").concat(e+d*p[0],",").concat(t)),m+="L ".concat(e+n-d*p[1],",").concat(t),p[1]>0&&(m+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(f,`,
        `).concat(e+n,",").concat(t+c*p[1])),m+="L ".concat(e+n,",").concat(t+i-c*p[2]),p[2]>0&&(m+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(f,`,
        `).concat(e+n-d*p[2],",").concat(t+i)),m+="L ".concat(e+d*p[3],",").concat(t+i),p[3]>0&&(m+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(f,`,
        `).concat(e,",").concat(t+i-c*p[3])),m+="Z"}else if(s>0&&a===+a&&a>0){var T=Math.min(s,a);m="M ".concat(e,",").concat(t+c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+d*T,",").concat(t,`
            L `).concat(e+n-d*T,",").concat(t,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n,",").concat(t+c*T,`
            L `).concat(e+n,",").concat(t+i-c*T,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e+n-d*T,",").concat(t+i,`
            L `).concat(e+d*T,",").concat(t+i,`
            A `).concat(T,",").concat(T,",0,0,").concat(f,",").concat(e,",").concat(t+i-c*T," Z")}else m="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return m},gbe=function(e,t){if(!e||!t)return!1;var n=e.x,i=e.y,a=t.x,s=t.y,c=t.width,d=t.height;if(Math.abs(c)>0&&Math.abs(d)>0){var f=Math.min(a,a+c),m=Math.max(a,a+c),p=Math.min(s,s+d),y=Math.max(s,s+d);return n>=f&&n<=m&&i>=p&&i<=y}return!1},ybe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$E=function(e){var t=aB(aB({},ybe),e),n=F.useRef(),i=F.useState(-1),a=lbe(i,2),s=a[0],c=a[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&c(B)}catch{}},[]);var d=t.x,f=t.y,m=t.width,p=t.height,y=t.radius,b=t.className,T=t.animationEasing,S=t.animationDuration,w=t.animationBegin,E=t.isAnimationActive,I=t.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||m===0||p===0)return null;var C=zt("recharts-rectangle",b);return I?ne.createElement(_o,{canBegin:s>0,from:{width:m,height:p,x:d,y:f},to:{width:m,height:p,x:d,y:f},duration:S,animationEasing:T,isActive:I},function(B){var R=B.width,D=B.height,A=B.x,k=B.y;return ne.createElement(_o,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,isActive:E,easing:T},ne.createElement("path",Nb({},wt(t,!0),{className:C,d:sB(A,k,R,D,y),ref:n})))}):ne.createElement("path",Nb({},wt(t,!0),{className:C,d:sB(d,f,m,p,y)}))},vbe=["points","className","baseLinePoints","connectNulls"];function $d(){return $d=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},$d.apply(this,arguments)}function bbe(r,e){if(r==null)return{};var t=xbe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function xbe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function oB(r){return Tbe(r)||Sbe(r)||_be(r)||wbe()}function wbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _be(r,e){if(r){if(typeof r=="string")return TA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return TA(r,e)}}function Sbe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Tbe(r){if(Array.isArray(r))return TA(r)}function TA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var lB=function(e){return e&&e.x===+e.x&&e.y===+e.y},Abe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=[[]];return e.forEach(function(n){lB(n)?t[t.length-1].push(n):t[t.length-1].length>0&&t.push([])}),lB(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},Qm=function(e,t){var n=Abe(e);t&&(n=[n.reduce(function(a,s){return[].concat(oB(a),oB(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,c,d){return"".concat(s).concat(d===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},Ebe=function(e,t,n){var i=Qm(e,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Qm(t.reverse(),n).slice(1))},XG=function(e){var t=e.points,n=e.className,i=e.baseLinePoints,a=e.connectNulls,s=bbe(e,vbe);if(!t||!t.length)return null;var c=zt("recharts-polygon",n);if(i&&i.length){var d=s.stroke&&s.stroke!=="none",f=Ebe(t,i,a);return ne.createElement("g",{className:c},ne.createElement("path",$d({},wt(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:f})),d?ne.createElement("path",$d({},wt(s,!0),{fill:"none",d:Qm(t,a)})):null,d?ne.createElement("path",$d({},wt(s,!0),{fill:"none",d:Qm(i,a)})):null)}var m=Qm(t,a);return ne.createElement("path",$d({},wt(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:c,d:m}))};function AA(){return AA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},AA.apply(this,arguments)}var c2=function(e){var t=e.cx,n=e.cy,i=e.r,a=e.className,s=zt("recharts-dot",a);return t===+t&&n===+n&&i===+i?F.createElement("circle",AA({},wt(e,!1),Xv(e),{className:s,cx:t,cy:n,r:i})):null};function Qp(r){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(r)}var Nbe=["x","y","top","left","width","height","className"];function EA(){return EA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},EA.apply(this,arguments)}function cB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Obe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?cB(Object(t),!0).forEach(function(n){kbe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):cB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kbe(r,e,t){return e=Cbe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cbe(r){var e=jbe(r,"string");return Qp(e)=="symbol"?e:e+""}function jbe(r,e){if(Qp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Qp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ibe(r,e){if(r==null)return{};var t=Rbe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Rbe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var Mbe=function(e,t,n,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(t,"h").concat(n)},Pbe=function(e){var t=e.x,n=t===void 0?0:t,i=e.y,a=i===void 0?0:i,s=e.top,c=s===void 0?0:s,d=e.left,f=d===void 0?0:d,m=e.width,p=m===void 0?0:m,y=e.height,b=y===void 0?0:y,T=e.className,S=Ibe(e,Nbe),w=Obe({x:n,y:a,top:c,left:f,width:p,height:b},S);return!et(n)||!et(a)||!et(p)||!et(b)||!et(c)||!et(f)?null:ne.createElement("path",EA({},wt(w,!0),{className:zt("recharts-cross",T),d:Mbe(n,a,p,b,c,f)}))},Dbe=["cx","cy","innerRadius","outerRadius","gridType","radialLines"];function Yp(r){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(r)}function Lbe(r,e){if(r==null)return{};var t=Bbe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Bbe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Cl(){return Cl=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Cl.apply(this,arguments)}function uB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Zp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(t),!0).forEach(function(n){Ube(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ube(r,e,t){return e=zbe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function zbe(r){var e=Vbe(r,"string");return Yp(e)=="symbol"?e:e+""}function Vbe(r,e){if(Yp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var $be=function(e,t,n,i){var a="";return i.forEach(function(s,c){var d=kr(t,n,e,s);c?a+="L ".concat(d.x,",").concat(d.y):a+="M ".concat(d.x,",").concat(d.y)}),a+="Z",a},Fbe=function(e){var t=e.cx,n=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.polarAngles,c=e.radialLines;if(!s||!s.length||!c)return null;var d=Zp({stroke:"#ccc"},wt(e,!1));return ne.createElement("g",{className:"recharts-polar-grid-angle"},s.map(function(f){var m=kr(t,n,i,f),p=kr(t,n,a,f);return ne.createElement("line",Cl({},d,{key:"line-".concat(f),x1:m.x,y1:m.y,x2:p.x,y2:p.y}))}))},qbe=function(e){var t=e.cx,n=e.cy,i=e.radius,a=e.index,s=Zp(Zp({stroke:"#ccc"},wt(e,!1)),{},{fill:"none"});return ne.createElement("circle",Cl({},s,{className:zt("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:n,r:i}))},Hbe=function(e){var t=e.radius,n=e.index,i=Zp(Zp({stroke:"#ccc"},wt(e,!1)),{},{fill:"none"});return ne.createElement("path",Cl({},i,{className:zt("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(n),d:$be(t,e.cx,e.cy,e.polarAngles)}))},Gbe=function(e){var t=e.polarRadius,n=e.gridType;return!t||!t.length?null:ne.createElement("g",{className:"recharts-polar-grid-concentric"},t.map(function(i,a){var s=a;return n==="circle"?ne.createElement(qbe,Cl({key:s},e,{radius:i,index:a})):ne.createElement(Hbe,Cl({key:s},e,{radius:i,index:a}))}))},QG=function(e){var t=e.cx,n=t===void 0?0:t,i=e.cy,a=i===void 0?0:i,s=e.innerRadius,c=s===void 0?0:s,d=e.outerRadius,f=d===void 0?0:d,m=e.gridType,p=m===void 0?"polygon":m,y=e.radialLines,b=y===void 0?!0:y,T=Lbe(e,Dbe);return f<=0?null:ne.createElement("g",{className:"recharts-polar-grid"},ne.createElement(Fbe,Cl({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)),ne.createElement(Gbe,Cl({cx:n,cy:a,innerRadius:c,outerRadius:f,gridType:p,radialLines:b},T)))};QG.displayName="PolarGrid";var X_,dB;function Kbe(){if(dB)return X_;dB=1;var r=i2(),e=cG(),t=Oo();function n(i,a){return i&&i.length?r(i,t(a,2),e):void 0}return X_=n,X_}var Wbe=Kbe();const Xbe=mr(Wbe);var Q_,hB;function Qbe(){if(hB)return Q_;hB=1;var r=i2(),e=Oo(),t=uG();function n(i,a){return i&&i.length?r(i,e(a,2),t):void 0}return Q_=n,Q_}var Ybe=Qbe();const Zbe=mr(Ybe);var Jbe=["cx","cy","angle","ticks","axisLine"],exe=["ticks","tick","angle","tickFormatter","stroke"];function Ch(r){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(r)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ym.apply(this,arguments)}function fB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Uu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(t),!0).forEach(function(n){u2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function mB(r,e){if(r==null)return{};var t=txe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function txe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function rxe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function pB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ZG(n.key),n)}}function nxe(r,e,t){return e&&pB(r.prototype,e),t&&pB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function ixe(r,e,t){return e=Ob(e),axe(r,YG()?Reflect.construct(e,t||[],Ob(r).constructor):e.apply(r,t))}function axe(r,e){if(e&&(Ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sxe(r)}function sxe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function YG(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YG=function(){return!!r})()}function Ob(r){return Ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ob(r)}function oxe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&NA(r,e)}function NA(r,e){return NA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},NA(r,e)}function u2(r,e,t){return e=ZG(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ZG(r){var e=lxe(r,"string");return Ch(e)=="symbol"?e:e+""}function lxe(r,e){if(Ch(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ch(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var zg=(function(r){function e(){return rxe(this,e),ixe(this,e,arguments)}return oxe(e,r),nxe(e,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,c=a.cx,d=a.cy;return kr(c,d,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=Xbe(c,function(m){return m.coordinate||0}),f=Zbe(c,function(m){return m.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:f.coordinate||0,outerRadius:d.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,c=n.ticks,d=n.axisLine,f=mB(n,Jbe),m=c.reduce(function(T,S){return[Math.min(T[0],S.coordinate),Math.max(T[1],S.coordinate)]},[1/0,-1/0]),p=kr(i,a,m[0],s),y=kr(i,a,m[1],s),b=Uu(Uu(Uu({},wt(f,!1)),{},{fill:"none"},wt(d,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return ne.createElement("line",Ym({className:"recharts-polar-radius-axis-line"},b))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.angle,d=i.tickFormatter,f=i.stroke,m=mB(i,exe),p=this.getTickTextAnchor(),y=wt(m,!1),b=wt(s,!1),T=a.map(function(S,w){var E=n.getTickValueCoord(S),I=Uu(Uu(Uu(Uu({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(E.x,", ").concat(E.y,")")},y),{},{stroke:"none",fill:f},b),{},{index:w},E),{},{payload:S});return ne.createElement(ur,Ym({className:zt("recharts-polar-radius-axis-tick",LG(s)),key:"tick-".concat(S.coordinate)},S0(n.props,S,w)),e.renderTickItem(s,I,d?d(S.value,w):S.value))});return ne.createElement(ur,{className:"recharts-polar-radius-axis-ticks"},T)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:ne.createElement(ur,{className:zt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),bi.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ne.isValidElement(n)?s=ne.cloneElement(n,i):It(n)?s=n(i):s=ne.createElement(Th,Ym({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])})(F.PureComponent);u2(zg,"displayName","PolarRadiusAxis");u2(zg,"axisType","radiusAxis");u2(zg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function jh(r){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(r)}function Xu(){return Xu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Xu.apply(this,arguments)}function gB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function zu(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gB(Object(t),!0).forEach(function(n){d2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function cxe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function yB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,eK(n.key),n)}}function uxe(r,e,t){return e&&yB(r.prototype,e),t&&yB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function dxe(r,e,t){return e=kb(e),hxe(r,JG()?Reflect.construct(e,t||[],kb(r).constructor):e.apply(r,t))}function hxe(r,e){if(e&&(jh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fxe(r)}function fxe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function JG(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JG=function(){return!!r})()}function kb(r){return kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kb(r)}function mxe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&OA(r,e)}function OA(r,e){return OA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},OA(r,e)}function d2(r,e,t){return e=eK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function eK(r){var e=pxe(r,"string");return jh(e)=="symbol"?e:e+""}function pxe(r,e){if(jh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var gxe=Math.PI/180,vB=1e-5,Vg=(function(r){function e(){return cxe(this,e),dxe(this,e,arguments)}return mxe(e,r),uxe(e,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,c=i.radius,d=i.orientation,f=i.tickSize,m=f||8,p=kr(a,s,c,n.coordinate),y=kr(a,s,c+(d==="inner"?-1:1)*m,n.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*gxe),s;return a>vB?s=i==="outer"?"start":"end":a<-vB?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,c=n.axisLine,d=n.axisLineType,f=zu(zu({},wt(this.props,!1)),{},{fill:"none"},wt(c,!1));if(d==="circle")return ne.createElement(c2,Xu({className:"recharts-polar-angle-axis-line"},f,{cx:i,cy:a,r:s}));var m=this.props.ticks,p=m.map(function(y){return kr(i,a,s,y.coordinate)});return ne.createElement(XG,Xu({className:"recharts-polar-angle-axis-line"},f,{points:p}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,c=i.tickLine,d=i.tickFormatter,f=i.stroke,m=wt(this.props,!1),p=wt(s,!1),y=zu(zu({},m),{},{fill:"none"},wt(c,!1)),b=a.map(function(T,S){var w=n.getTickLineCoord(T),E=n.getTickTextAnchor(T),I=zu(zu(zu({textAnchor:E},m),{},{stroke:"none",fill:f},p),{},{index:S,payload:T,x:w.x2,y:w.y2});return ne.createElement(ur,Xu({className:zt("recharts-polar-angle-axis-tick",LG(s)),key:"tick-".concat(T.coordinate)},S0(n.props,T,S)),c&&ne.createElement("line",Xu({className:"recharts-polar-angle-axis-tick-line"},y,w)),s&&e.renderTickItem(s,I,d?d(T.value,S):T.value))});return ne.createElement(ur,{className:"recharts-polar-angle-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:ne.createElement(ur,{className:zt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return ne.isValidElement(n)?s=ne.cloneElement(n,i):It(n)?s=n(i):s=ne.createElement(Th,Xu({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])})(F.PureComponent);d2(Vg,"displayName","PolarAngleAxis");d2(Vg,"axisType","angleAxis");d2(Vg,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Y_,bB;function yxe(){if(bB)return Y_;bB=1;var r=lH(),e=r(Object.getPrototypeOf,Object);return Y_=e,Y_}var Z_,xB;function vxe(){if(xB)return Z_;xB=1;var r=Ml(),e=yxe(),t=Pl(),n="[object Object]",i=Function.prototype,a=Object.prototype,s=i.toString,c=a.hasOwnProperty,d=s.call(Object);function f(m){if(!t(m)||r(m)!=n)return!1;var p=e(m);if(p===null)return!0;var y=c.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&s.call(y)==d}return Z_=f,Z_}var bxe=vxe();const xxe=mr(bxe);var J_,wB;function wxe(){if(wB)return J_;wB=1;var r=Ml(),e=Pl(),t="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&r(i)==t}return J_=n,J_}var _xe=wxe();const Sxe=mr(_xe);function Jp(r){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(r)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Cb.apply(this,arguments)}function Txe(r,e){return Oxe(r)||Nxe(r,e)||Exe(r,e)||Axe()}function Axe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Exe(r,e){if(r){if(typeof r=="string")return _B(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _B(r,e)}}function _B(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Nxe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function Oxe(r){if(Array.isArray(r))return r}function SB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function TB(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?SB(Object(t),!0).forEach(function(n){kxe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):SB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kxe(r,e,t){return e=Cxe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Cxe(r){var e=jxe(r,"string");return Jp(e)=="symbol"?e:e+""}function jxe(r,e){if(Jp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Jp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var AB=function(e,t,n,i,a){var s=n-i,c;return c="M ".concat(e,",").concat(t),c+="L ".concat(e+n,",").concat(t),c+="L ".concat(e+n-s/2,",").concat(t+a),c+="L ".concat(e+n-s/2-i,",").concat(t+a),c+="L ".concat(e,",").concat(t," Z"),c},Ixe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rxe=function(e){var t=TB(TB({},Ixe),e),n=F.useRef(),i=F.useState(-1),a=Txe(i,2),s=a[0],c=a[1];F.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var C=n.current.getTotalLength();C&&c(C)}catch{}},[]);var d=t.x,f=t.y,m=t.upperWidth,p=t.lowerWidth,y=t.height,b=t.className,T=t.animationEasing,S=t.animationDuration,w=t.animationBegin,E=t.isUpdateAnimationActive;if(d!==+d||f!==+f||m!==+m||p!==+p||y!==+y||m===0&&p===0||y===0)return null;var I=zt("recharts-trapezoid",b);return E?ne.createElement(_o,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:y,x:d,y:f},to:{upperWidth:m,lowerWidth:p,height:y,x:d,y:f},duration:S,animationEasing:T,isActive:E},function(C){var B=C.upperWidth,R=C.lowerWidth,D=C.height,A=C.x,k=C.y;return ne.createElement(_o,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:w,duration:S,easing:T},ne.createElement("path",Cb({},wt(t,!0),{className:I,d:AB(A,k,B,R,D),ref:n})))}):ne.createElement("g",null,ne.createElement("path",Cb({},wt(t,!0),{className:I,d:AB(d,f,m,p,y)})))},Mxe=["option","shapeType","propTransformer","activeClassName","isActive"];function eg(r){"@babel/helpers - typeof";return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(r)}function Pxe(r,e){if(r==null)return{};var t=Dxe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Dxe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function EB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function jb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EB(Object(t),!0).forEach(function(n){Lxe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Lxe(r,e,t){return e=Bxe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Bxe(r){var e=Uxe(r,"string");return eg(e)=="symbol"?e:e+""}function Uxe(r,e){if(eg(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(eg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function zxe(r,e){return jb(jb({},e),r)}function Vxe(r,e){return r==="symbols"}function NB(r){var e=r.shapeType,t=r.elementProps;switch(e){case"rectangle":return ne.createElement($E,t);case"trapezoid":return ne.createElement(Rxe,t);case"sector":return ne.createElement(VG,t);case"symbols":if(Vxe(e))return ne.createElement(Wx,t);break;default:return null}}function $xe(r){return F.isValidElement(r)?r.props:r}function kA(r){var e=r.option,t=r.shapeType,n=r.propTransformer,i=n===void 0?zxe:n,a=r.activeClassName,s=a===void 0?"recharts-active-shape":a,c=r.isActive,d=Pxe(r,Mxe),f;if(F.isValidElement(e))f=F.cloneElement(e,jb(jb({},d),$xe(e)));else if(It(e))f=e(d);else if(xxe(e)&&!Sxe(e)){var m=i(e,d);f=ne.createElement(NB,{shapeType:t,elementProps:m})}else{var p=d;f=ne.createElement(NB,{shapeType:t,elementProps:p})}return c?ne.createElement(ur,{className:s},f):f}function h2(r,e){return e!=null&&"trapezoids"in r.props}function f2(r,e){return e!=null&&"sectors"in r.props}function tg(r,e){return e!=null&&"points"in r.props}function Fxe(r,e){var t,n,i=r.x===(e==null||(t=e.labelViewBox)===null||t===void 0?void 0:t.x)||r.x===e.x,a=r.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||r.y===e.y;return i&&a}function qxe(r,e){var t=r.endAngle===e.endAngle,n=r.startAngle===e.startAngle;return t&&n}function Hxe(r,e){var t=r.x===e.x,n=r.y===e.y,i=r.z===e.z;return t&&n&&i}function Gxe(r,e){var t;return h2(r,e)?t=Fxe:f2(r,e)?t=qxe:tg(r,e)&&(t=Hxe),t}function Kxe(r,e){var t;return h2(r,e)?t="trapezoids":f2(r,e)?t="sectors":tg(r,e)&&(t="points"),t}function Wxe(r,e){if(h2(r,e)){var t;return(t=e.tooltipPayload)===null||t===void 0||(t=t[0])===null||t===void 0||(t=t.payload)===null||t===void 0?void 0:t.payload}if(f2(r,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return tg(r,e)?e.payload:{}}function Xxe(r){var e=r.activeTooltipItem,t=r.graphicalItem,n=r.itemData,i=Kxe(t,e),a=Wxe(t,e),s=n.filter(function(d,f){var m=Bg(a,d),p=t.props[i].filter(function(T){var S=Gxe(t,e);return S(T,e)}),y=t.props[i].indexOf(p[p.length-1]),b=f===y;return m&&b}),c=n.indexOf(s[s.length-1]);return c}var eS,OB;function Qxe(){if(OB)return eS;OB=1;function r(e){return e&&e.length?e[0]:void 0}return eS=r,eS}var tS,kB;function Yxe(){return kB||(kB=1,tS=Qxe()),tS}var Zxe=Yxe();const Jxe=mr(Zxe);var e2e=["key"];function Ih(r){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(r)}function t2e(r,e){if(r==null)return{};var t=r2e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function r2e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Ib(){return Ib=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ib.apply(this,arguments)}function CB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ki(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CB(Object(t),!0).forEach(function(n){nl(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function n2e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function jB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,rK(n.key),n)}}function i2e(r,e,t){return e&&jB(r.prototype,e),t&&jB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function a2e(r,e,t){return e=Rb(e),s2e(r,tK()?Reflect.construct(e,t||[],Rb(r).constructor):e.apply(r,t))}function s2e(r,e){if(e&&(Ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o2e(r)}function o2e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tK=function(){return!!r})()}function Rb(r){return Rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Rb(r)}function l2e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&CA(r,e)}function CA(r,e){return CA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},CA(r,e)}function nl(r,e,t){return e=rK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function rK(r){var e=c2e(r,"string");return Ih(e)=="symbol"?e:e+""}function c2e(r,e){if(Ih(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ih(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var $g=(function(r){function e(){var t;n2e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=a2e(this,e,[].concat(i)),nl(t,"state",{isAnimationFinished:!1}),nl(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),It(s)&&s()}),nl(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),It(s)&&s()}),nl(t,"handleMouseEnter",function(s){var c=t.props.onMouseEnter;c&&c(t.props,s)}),nl(t,"handleMouseLeave",function(s){var c=t.props.onMouseLeave;c&&c(t.props,s)}),t}return l2e(e,r),i2e(e,[{key:"renderDots",value:function(n){var i=this.props,a=i.dot,s=i.dataKey,c=wt(this.props,!1),d=wt(a,!0),f=n.map(function(m,p){var y=Ki(Ki(Ki({key:"dot-".concat(p),r:3},c),d),{},{dataKey:s,cx:m.x,cy:m.y,index:p,payload:m});return e.renderDotItem(a,y)});return ne.createElement(ur,{className:"recharts-radar-dots"},f)}},{key:"renderPolygonStatically",value:function(n){var i=this.props,a=i.shape,s=i.dot,c=i.isRange,d=i.baseLinePoints,f=i.connectNulls,m;return ne.isValidElement(a)?m=ne.cloneElement(a,Ki(Ki({},this.props),{},{points:n})):It(a)?m=a(Ki(Ki({},this.props),{},{points:n})):m=ne.createElement(XG,Ib({},wt(this.props,!0),{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,points:n,baseLinePoints:c?d:null,connectNulls:f})),ne.createElement(ur,{className:"recharts-radar-polygon"},m,s?this.renderDots(n):null)}},{key:"renderPolygonWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ne.createElement(_o,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"radar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=p&&p.length/a.length,S=a.map(function(w,E){var I=p&&p[Math.floor(E*T)];if(I){var C=pa(I.x,w.x),B=pa(I.y,w.y);return Ki(Ki({},w),{},{x:C(b),y:B(b)})}var R=pa(w.cx,w.x),D=pa(w.cy,w.y);return Ki(Ki({},w),{},{x:R(b),y:D(b)})});return n.renderPolygonStatically(S)})}},{key:"renderPolygon",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=n.isRange,c=this.state.prevPoints;return a&&i&&i.length&&!s&&(!c||!Bg(c,i))?this.renderPolygonWithAnimation():this.renderPolygonStatically(i)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.className,s=n.points,c=n.isAnimationActive;if(i||!s||!s.length)return null;var d=this.state.isAnimationFinished,f=zt("recharts-radar",a);return ne.createElement(ur,{className:f},this.renderPolygon(),(!c||d)&&vl.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"renderDotItem",value:function(n,i){var a;if(ne.isValidElement(n))a=ne.cloneElement(n,i);else if(It(n))a=n(i);else{var s=i.key,c=t2e(i,e2e);a=ne.createElement(c2,Ib({},c,{key:s,className:zt("recharts-radar-dot",typeof n!="boolean"?n.className:"")}))}return a}}])})(F.PureComponent);nl($g,"displayName","Radar");nl($g,"defaultProps",{angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!D0.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});nl($g,"getComposedData",function(r){var e=r.radiusAxis,t=r.angleAxis,n=r.displayedData,i=r.dataKey,a=r.bandSize,s=t.cx,c=t.cy,d=!1,f=[],m=t.type!=="number"?a??0:0;n.forEach(function(y,b){var T=_i(y,t.dataKey,b),S=_i(y,i),w=t.scale(T)+m,E=Array.isArray(S)?UG(S):S,I=Lt(E)?void 0:e.scale(E);Array.isArray(S)&&S.length>=2&&(d=!0),f.push(Ki(Ki({},kr(s,c,I,w)),{},{name:T,value:S,cx:s,cy:c,radius:I,angle:w,payload:y}))});var p=[];return d&&f.forEach(function(y){if(Array.isArray(y.value)){var b=Jxe(y.value),T=Lt(b)?void 0:e.scale(b);p.push(Ki(Ki({},y),{},{radius:T},kr(s,c,T,y.angle)))}else p.push(y)}),{points:f,isRange:d,baseLinePoints:p}});var rS,IB;function u2e(){if(IB)return rS;IB=1;var r=Math.ceil,e=Math.max;function t(n,i,a,s){for(var c=-1,d=e(r((i-n)/(a||1)),0),f=Array(d);d--;)f[s?d:++c]=n,n+=a;return f}return rS=t,rS}var nS,RB;function nK(){if(RB)return nS;RB=1;var r=TH(),e=1/0,t=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=r(i),i===e||i===-e){var a=i<0?-1:1;return a*t}return i===i?i:0}return nS=n,nS}var iS,MB;function d2e(){if(MB)return iS;MB=1;var r=u2e(),e=Yx(),t=nK();function n(i){return function(a,s,c){return c&&typeof c!="number"&&e(a,s,c)&&(s=c=void 0),a=t(a),s===void 0?(s=a,a=0):s=t(s),c=c===void 0?a<s?1:-1:t(c),r(a,s,c,i)}}return iS=n,iS}var aS,PB;function h2e(){if(PB)return aS;PB=1;var r=d2e(),e=r();return aS=e,aS}var f2e=h2e();const Mb=mr(f2e);function rg(r){"@babel/helpers - typeof";return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(r)}function DB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function LB(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DB(Object(t),!0).forEach(function(n){iK(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):DB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function iK(r,e,t){return e=m2e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function m2e(r){var e=p2e(r,"string");return rg(e)=="symbol"?e:e+""}function p2e(r,e){if(rg(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(rg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var g2e=["Webkit","Moz","O","ms"],y2e=function(e,t){var n=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=g2e.reduce(function(a,s){return LB(LB({},a),{},iK({},s+n,t))},{});return i[e]=t,i};function Rh(r){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(r)}function Pb(){return Pb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Pb.apply(this,arguments)}function BB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function sS(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(t),!0).forEach(function(n){Ra(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):BB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function v2e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function UB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,sK(n.key),n)}}function b2e(r,e,t){return e&&UB(r.prototype,e),t&&UB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function x2e(r,e,t){return e=Db(e),w2e(r,aK()?Reflect.construct(e,t||[],Db(r).constructor):e.apply(r,t))}function w2e(r,e){if(e&&(Rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _2e(r)}function _2e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function aK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aK=function(){return!!r})()}function Db(r){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Db(r)}function S2e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jA(r,e)}function jA(r,e){return jA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},jA(r,e)}function Ra(r,e,t){return e=sK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function sK(r){var e=T2e(r,"string");return Rh(e)=="symbol"?e:e+""}function T2e(r,e){if(Rh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Rh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var A2e=function(e){var t=e.data,n=e.startIndex,i=e.endIndex,a=e.x,s=e.width,c=e.travellerWidth;if(!t||!t.length)return{};var d=t.length,f=Km().domain(Mb(0,d)).range([a,a+s-c]),m=f.domain().map(function(p){return f(p)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:f(n),endX:f(i),scale:f,scaleValues:m}},zB=function(e){return e.changedTouches&&!!e.changedTouches.length},Mh=(function(r){function e(t){var n;return v2e(this,e),n=x2e(this,e,[t]),Ra(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Ra(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Ra(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,c=i.startIndex;s==null||s({endIndex:a,startIndex:c})}),n.detachDragEndListener()}),Ra(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ra(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ra(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ra(n,"handleSlideDragStart",function(i){var a=zB(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return S2e(e,r),b2e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,c=this.props,d=c.gap,f=c.data,m=f.length-1,p=Math.min(i,a),y=Math.max(i,a),b=e.getIndexInRange(s,p),T=e.getIndexInRange(s,y);return{startIndex:b-b%d,endIndex:T===m?m:T-T%d}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,c=i.dataKey,d=_i(a[n],c,n);return It(s)?s(d,n):d}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,c=i.endX,d=this.props,f=d.x,m=d.width,p=d.travellerWidth,y=d.startIndex,b=d.endIndex,T=d.onChange,S=n.pageX-a;S>0?S=Math.min(S,f+m-p-c,f+m-p-s):S<0&&(S=Math.max(S,f-s,f-c));var w=this.getIndex({startX:s+S,endX:c+S});(w.startIndex!==y||w.endIndex!==b)&&T&&T(w),this.setState({startX:s+S,endX:c+S,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=zB(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,c=i.endX,d=i.startX,f=this.state[s],m=this.props,p=m.x,y=m.width,b=m.travellerWidth,T=m.onChange,S=m.gap,w=m.data,E={startX:this.state.startX,endX:this.state.endX},I=n.pageX-a;I>0?I=Math.min(I,p+y-b-f):I<0&&(I=Math.max(I,p-f)),E[s]=f+I;var C=this.getIndex(E),B=C.startIndex,R=C.endIndex,D=function(){var k=w.length-1;return s==="startX"&&(c>d?B%S===0:R%S===0)||c<d&&R===k||s==="endX"&&(c>d?R%S===0:B%S===0)||c>d&&R===k};this.setState(Ra(Ra({},s,f+I),"brushMoveStartX",n.pageX),function(){T&&D()&&T(C)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,c=s.scaleValues,d=s.startX,f=s.endX,m=this.state[i],p=c.indexOf(m);if(p!==-1){var y=p+n;if(!(y===-1||y>=c.length)){var b=c[y];i==="startX"&&b>=f||i==="endX"&&b<=d||this.setState(Ra({},i,b),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.fill,f=n.stroke;return ne.createElement("rect",{stroke:f,fill:d,x:i,y:a,width:s,height:c})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.data,f=n.children,m=n.padding,p=F.Children.only(f);return p?ne.cloneElement(p,{x:i,y:a,width:s,height:c,margin:m,compact:!0,data:d}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,c=this,d=this.props,f=d.y,m=d.travellerWidth,p=d.height,y=d.traveller,b=d.ariaLabel,T=d.data,S=d.startIndex,w=d.endIndex,E=Math.max(n,this.props.x),I=sS(sS({},wt(this.props,!1)),{},{x:E,y:f,width:m,height:p}),C=b||"Min value: ".concat((a=T[S])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=T[w])===null||s===void 0?void 0:s.name);return ne.createElement(ur,{tabIndex:0,role:"slider","aria-label":C,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(R){["ArrowLeft","ArrowRight"].includes(R.key)&&(R.preventDefault(),R.stopPropagation(),c.handleTravellerMoveKeyboard(R.key==="ArrowRight"?1:-1,i))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(y,I))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,c=a.height,d=a.stroke,f=a.travellerWidth,m=Math.min(n,i)+f,p=Math.max(Math.abs(i-n)-f,0);return ne.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:d,fillOpacity:.2,x:m,y:s,width:p,height:c})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,c=n.height,d=n.travellerWidth,f=n.stroke,m=this.state,p=m.startX,y=m.endX,b=5,T={pointerEvents:"none",fill:f};return ne.createElement(ur,{className:"recharts-brush-texts"},ne.createElement(Th,Pb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(p,y)-b,y:s+c/2},T),this.getTextOfTick(i)),ne.createElement(Th,Pb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(p,y)+d+b,y:s+c/2},T),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,c=n.x,d=n.y,f=n.width,m=n.height,p=n.alwaysShowText,y=this.state,b=y.startX,T=y.endX,S=y.isTextActive,w=y.isSlideMoving,E=y.isTravellerMoving,I=y.isTravellerFocused;if(!i||!i.length||!et(c)||!et(d)||!et(f)||!et(m)||f<=0||m<=0)return null;var C=zt("recharts-brush",a),B=ne.Children.count(s)===1,R=y2e("userSelect","none");return ne.createElement(ur,{className:C,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:R},this.renderBackground(),B&&this.renderPanorama(),this.renderSlide(b,T),this.renderTravellerLayer(b,"startX"),this.renderTravellerLayer(T,"endX"),(S||w||E||I||p)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,c=n.height,d=n.stroke,f=Math.floor(a+c/2)-1;return ne.createElement(ne.Fragment,null,ne.createElement("rect",{x:i,y:a,width:s,height:c,fill:d,stroke:"none"}),ne.createElement("line",{x1:i+1,y1:f,x2:i+s-1,y2:f,fill:"none",stroke:"#fff"}),ne.createElement("line",{x1:i+1,y1:f+2,x2:i+s-1,y2:f+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return ne.isValidElement(n)?a=ne.cloneElement(n,i):It(n)?a=n(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,c=n.x,d=n.travellerWidth,f=n.updateId,m=n.startIndex,p=n.endIndex;if(a!==i.prevData||f!==i.prevUpdateId)return sS({prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s},a&&a.length?A2e({data:a,width:s,x:c,travellerWidth:d,startIndex:m,endIndex:p}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||c!==i.prevX||d!==i.prevTravellerWidth)){i.scale.range([c,c+s-d]);var y=i.scale.domain().map(function(b){return i.scale(b)});return{prevData:a,prevTravellerWidth:d,prevUpdateId:f,prevX:c,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:y}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,c=a-1;c-s>1;){var d=Math.floor((s+c)/2);n[d]>i?c=d:s=d}return i>=n[c]?c:s}}])})(F.PureComponent);Ra(Mh,"displayName","Brush");Ra(Mh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var oS,VB;function E2e(){if(VB)return oS;VB=1;var r=fE();function e(t,n){var i;return r(t,function(a,s,c){return i=n(a,s,c),!i}),!!i}return oS=e,oS}var lS,$B;function N2e(){if($B)return lS;$B=1;var r=tH(),e=Oo(),t=E2e(),n=_a(),i=Yx();function a(s,c,d){var f=n(s)?r:t;return d&&i(s,c,d)&&(c=void 0),f(s,e(c,3))}return lS=a,lS}var O2e=N2e();const k2e=mr(O2e);var go=function(e,t){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===t},cS,FB;function C2e(){if(FB)return cS;FB=1;var r=bH();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return cS=e,cS}var uS,qB;function j2e(){if(qB)return uS;qB=1;var r=C2e(),e=yH(),t=Oo();function n(i,a){var s={};return a=t(a,3),e(i,function(c,d,f){r(s,d,a(c,d,f))}),s}return uS=n,uS}var I2e=j2e();const R2e=mr(I2e);var dS,HB;function M2e(){if(HB)return dS;HB=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}return dS=r,dS}var hS,GB;function P2e(){if(GB)return hS;GB=1;var r=fE();function e(t,n){var i=!0;return r(t,function(a,s,c){return i=!!n(a,s,c),i}),i}return hS=e,hS}var fS,KB;function D2e(){if(KB)return fS;KB=1;var r=M2e(),e=P2e(),t=Oo(),n=_a(),i=Yx();function a(s,c,d){var f=n(s)?r:e;return d&&i(s,c,d)&&(c=void 0),f(s,t(c,3))}return fS=a,fS}var L2e=D2e();const oK=mr(L2e);var B2e=["x","y"];function ng(r){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(r)}function IA(){return IA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},IA.apply(this,arguments)}function WB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function _m(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?WB(Object(t),!0).forEach(function(n){U2e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):WB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function U2e(r,e,t){return e=z2e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function z2e(r){var e=V2e(r,"string");return ng(e)=="symbol"?e:e+""}function V2e(r,e){if(ng(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function $2e(r,e){if(r==null)return{};var t=F2e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function F2e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function q2e(r,e){var t=r.x,n=r.y,i=$2e(r,B2e),a="".concat(t),s=parseInt(a,10),c="".concat(n),d=parseInt(c,10),f="".concat(e.height||i.height),m=parseInt(f,10),p="".concat(e.width||i.width),y=parseInt(p,10);return _m(_m(_m(_m(_m({},e),i),s?{x:s}:{}),d?{y:d}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function XB(r){return ne.createElement(kA,IA({shapeType:"rectangle",propTransformer:q2e,activeClassName:"recharts-active-bar"},r))}var H2e=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var a=et(n)||Wce(n);return a?e(n,i):(a||A0(),t)}},G2e=["value","background"],lK;function Ph(r){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(r)}function K2e(r,e){if(r==null)return{};var t=W2e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function W2e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Lb(){return Lb=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Lb.apply(this,arguments)}function QB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Un(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?QB(Object(t),!0).forEach(function(n){Ic(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):QB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function X2e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function YB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,uK(n.key),n)}}function Q2e(r,e,t){return e&&YB(r.prototype,e),t&&YB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Y2e(r,e,t){return e=Bb(e),Z2e(r,cK()?Reflect.construct(e,t||[],Bb(r).constructor):e.apply(r,t))}function Z2e(r,e){if(e&&(Ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J2e(r)}function J2e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cK=function(){return!!r})()}function Bb(r){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bb(r)}function e4e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&RA(r,e)}function RA(r,e){return RA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},RA(r,e)}function Ic(r,e,t){return e=uK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uK(r){var e=t4e(r,"string");return Ph(e)=="symbol"?e:e+""}function t4e(r,e){if(Ph(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Ph(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var Fg=(function(r){function e(){var t;X2e(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=Y2e(this,e,[].concat(i)),Ic(t,"state",{isAnimationFinished:!1}),Ic(t,"id",Ig("recharts-bar-")),Ic(t,"handleAnimationEnd",function(){var s=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),s&&s()}),Ic(t,"handleAnimationStart",function(){var s=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),s&&s()}),t}return e4e(e,r),Q2e(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.dataKey,d=a.activeIndex,f=a.activeBar,m=wt(this.props,!1);return n&&n.map(function(p,y){var b=y===d,T=b?f:s,S=Un(Un(Un({},m),p),{},{isActive:b,option:T,index:y,dataKey:c,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return ne.createElement(ur,Lb({className:"recharts-bar-rectangle"},S0(i.props,p,y),{key:"rectangle-".concat(p==null?void 0:p.x,"-").concat(p==null?void 0:p.y,"-").concat(p==null?void 0:p.value,"-").concat(y)}),ne.createElement(XB,S))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,c=i.isAnimationActive,d=i.animationBegin,f=i.animationDuration,m=i.animationEasing,p=i.animationId,y=this.state.prevData;return ne.createElement(_o,{begin:d,duration:f,isActive:c,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var T=b.t,S=a.map(function(w,E){var I=y&&y[E];if(I){var C=pa(I.x,w.x),B=pa(I.y,w.y),R=pa(I.width,w.width),D=pa(I.height,w.height);return Un(Un({},w),{},{x:C(T),y:B(T),width:R(T),height:D(T)})}if(s==="horizontal"){var A=pa(0,w.height),k=A(T);return Un(Un({},w),{},{y:w.y+w.height-k,height:k})}var N=pa(0,w.width),U=N(T);return Un(Un({},w),{},{width:U})});return ne.createElement(ur,null,n.renderRectanglesStatically(S))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Bg(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,c=i.activeIndex,d=wt(this.props.background,!1);return a.map(function(f,m){f.value;var p=f.background,y=K2e(f,G2e);if(!p)return null;var b=Un(Un(Un(Un(Un({},y),{},{fill:"#eee"},p),d),S0(n.props,f,m)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:m,className:"recharts-bar-background-rectangle"});return ne.createElement(XB,Lb({key:"background-bar-".concat(m),option:n.props.background,isActive:m===c},b))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,c=a.xAxis,d=a.yAxis,f=a.layout,m=a.children,p=Fa(m,Ug);if(!p)return null;var y=f==="vertical"?s[0].height/2:s[0].width/2,b=function(w,E){var I=Array.isArray(w.value)?w.value[1]:w.value;return{x:w.x,y:w.y,value:I,errorVal:_i(w,E)}},T={clipPath:n?"url(#clipPath-".concat(i,")"):null};return ne.createElement(ur,T,p.map(function(S){return ne.cloneElement(S,{key:"error-bar-".concat(i,"-").concat(S.props.dataKey),data:s,xAxis:c,yAxis:d,layout:f,offset:y,dataPointFormatter:b})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,c=n.xAxis,d=n.yAxis,f=n.left,m=n.top,p=n.width,y=n.height,b=n.isAnimationActive,T=n.background,S=n.id;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,E=zt("recharts-bar",s),I=c&&c.allowDataOverflow,C=d&&d.allowDataOverflow,B=I||C,R=Lt(S)?this.id:S;return ne.createElement(ur,{className:E},I||C?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(R)},ne.createElement("rect",{x:I?f:f-p/2,y:C?m:m-y/2,width:I?p:p*2,height:C?y:y*2}))):null,ne.createElement(ur,{className:"recharts-bar-rectangles",clipPath:B?"url(#clipPath-".concat(R,")"):null},T?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(B,R),(!b||w)&&vl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(F.PureComponent);lK=Fg;Ic(Fg,"displayName","Bar");Ic(Fg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!D0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ic(Fg,"getComposedData",function(r){var e=r.props,t=r.item,n=r.barPosition,i=r.bandSize,a=r.xAxis,s=r.yAxis,c=r.xAxisTicks,d=r.yAxisTicks,f=r.stackedData,m=r.dataStartIndex,p=r.displayedData,y=r.offset,b=c1e(n,t);if(!b)return null;var T=e.layout,S=t.type.defaultProps,w=S!==void 0?Un(Un({},S),t.props):t.props,E=w.dataKey,I=w.children,C=w.minPointSize,B=T==="horizontal"?s:a,R=f?B.scale.domain():null,D=g1e({numericAxis:B}),A=Fa(I,gE),k=p.map(function(N,U){var M,$,z,Q,ee,K;f?M=u1e(f[m+U],R):(M=_i(N,E),Array.isArray(M)||(M=[D,M]));var Z=H2e(C,lK.defaultProps.minPointSize)(M[1],U);if(T==="horizontal"){var Y,ge=[s.scale(M[0]),s.scale(M[1])],ae=ge[0],X=ge[1];$=_L({axis:a,ticks:c,bandSize:i,offset:b.offset,entry:N,index:U}),z=(Y=X??ae)!==null&&Y!==void 0?Y:void 0,Q=b.size;var J=ae-X;if(ee=Number.isNaN(J)?0:J,K={x:$,y:s.y,width:Q,height:s.height},Math.abs(Z)>0&&Math.abs(ee)<Math.abs(Z)){var ce=Ps(ee||Z)*(Math.abs(Z)-Math.abs(ee));z-=ce,ee+=ce}}else{var Ne=[a.scale(M[0]),a.scale(M[1])],se=Ne[0],ke=Ne[1];if($=se,z=_L({axis:s,ticks:d,bandSize:i,offset:b.offset,entry:N,index:U}),Q=ke-se,ee=b.size,K={x:a.x,y:z,width:a.width,height:ee},Math.abs(Z)>0&&Math.abs(Q)<Math.abs(Z)){var Me=Ps(Q||Z)*(Math.abs(Z)-Math.abs(Q));Q+=Me}}return Un(Un(Un({},N),{},{x:$,y:z,width:Q,height:ee,value:f?M:M[1],payload:N,background:K},A&&A[U]&&A[U].props),{},{tooltipPayload:[PG(t,N)],tooltipPosition:{x:$+Q/2,y:z+ee/2}})});return Un({data:k,layout:T},y)});function ig(r){"@babel/helpers - typeof";return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(r)}function r4e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ZB(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,dK(n.key),n)}}function n4e(r,e,t){return e&&ZB(r.prototype,e),t&&ZB(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function JB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Rs(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(t),!0).forEach(function(n){m2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):JB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function m2(r,e,t){return e=dK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dK(r){var e=i4e(r,"string");return ig(e)=="symbol"?e:e+""}function i4e(r,e){if(ig(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(ig(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var a4e=function(e,t,n,i,a){var s=e.width,c=e.height,d=e.layout,f=e.children,m=Object.keys(t),p={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:c-n.bottom,bottomMirror:c-n.bottom},y=!!Ma(f,Fg);return m.reduce(function(b,T){var S=t[T],w=S.orientation,E=S.domain,I=S.padding,C=I===void 0?{}:I,B=S.mirror,R=S.reversed,D="".concat(w).concat(B?"Mirror":""),A,k,N,U,M;if(S.type==="number"&&(S.padding==="gap"||S.padding==="no-gap")){var $=E[1]-E[0],z=1/0,Q=S.categoricalDomain.sort(Zce);if(Q.forEach(function(Ne,se){se>0&&(z=Math.min((Ne||0)-(Q[se-1]||0),z))}),Number.isFinite(z)){var ee=z/$,K=S.layout==="vertical"?n.height:n.width;if(S.padding==="gap"&&(A=ee*K/2),S.padding==="no-gap"){var Z=Ds(e.barCategoryGap,ee*K),Y=ee*K/2;A=Y-Z-(Y-Z)/K*Z}}}i==="xAxis"?k=[n.left+(C.left||0)+(A||0),n.left+n.width-(C.right||0)-(A||0)]:i==="yAxis"?k=d==="horizontal"?[n.top+n.height-(C.bottom||0),n.top+(C.top||0)]:[n.top+(C.top||0)+(A||0),n.top+n.height-(C.bottom||0)-(A||0)]:k=S.range,R&&(k=[k[1],k[0]]);var ge=jG(S,a,y),ae=ge.scale,X=ge.realScaleType;ae.domain(E).range(k),IG(ae);var J=RG(ae,Rs(Rs({},S),{},{realScaleType:X}));i==="xAxis"?(M=w==="top"&&!B||w==="bottom"&&B,N=n.left,U=p[D]-M*S.height):i==="yAxis"&&(M=w==="left"&&!B||w==="right"&&B,N=p[D]-M*S.width,U=n.top);var ce=Rs(Rs(Rs({},S),J),{},{realScaleType:X,x:N,y:U,scale:ae,width:i==="xAxis"?n.width:S.width,height:i==="yAxis"?n.height:S.height});return ce.bandSize=xb(ce,J),!S.hide&&i==="xAxis"?p[D]+=(M?-1:1)*ce.height:S.hide||(p[D]+=(M?-1:1)*ce.width),Rs(Rs({},b),{},m2({},T,ce))},{})},hK=function(e,t){var n=e.x,i=e.y,a=t.x,s=t.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},s4e=function(e){var t=e.x1,n=e.y1,i=e.x2,a=e.y2;return hK({x:t,y:n},{x:i,y:a})},fK=(function(){function r(e){r4e(this,r),this.scale=e}return n4e(r,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(t!==void 0){if(a)switch(a){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(t)+c}default:return this.scale(t)}if(i){var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+d}return this.scale(t)}}},{key:"isInRange",value:function(t){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?t>=i&&t<=a:t>=a&&t<=i}}],[{key:"create",value:function(t){return new r(t)}}])})();m2(fK,"EPS",1e-4);var FE=function(e){var t=Object.keys(e).reduce(function(n,i){return Rs(Rs({},n),{},m2({},i,fK.create(e[i])))},{});return Rs(Rs({},t),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,c=a.position;return R2e(i,function(d,f){return t[f].apply(d,{bandAware:s,position:c})})},isInRange:function(i){return oK(i,function(a,s){return t[s].isInRange(a)})}})};function o4e(r){return(r%180+180)%180}var l4e=function(e){var t=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=o4e(i),s=a*Math.PI/180,c=Math.atan(n/t),d=s>c&&s<Math.PI-c?n/Math.sin(s):t/Math.cos(s);return Math.abs(d)},mS,eU;function c4e(){if(eU)return mS;eU=1;var r=Oo(),e=Rg(),t=Xx();function n(i){return function(a,s,c){var d=Object(a);if(!e(a)){var f=r(s,3);a=t(a),s=function(p){return f(d[p],p,d)}}var m=i(a,s,c);return m>-1?d[f?a[m]:m]:void 0}}return mS=n,mS}var pS,tU;function u4e(){if(tU)return pS;tU=1;var r=nK();function e(t){var n=r(t),i=n%1;return n===n?i?n-i:n:0}return pS=e,pS}var gS,rU;function d4e(){if(rU)return gS;rU=1;var r=hH(),e=Oo(),t=u4e(),n=Math.max;function i(a,s,c){var d=a==null?0:a.length;if(!d)return-1;var f=c==null?0:t(c);return f<0&&(f=n(d+f,0)),r(a,e(s,3),f)}return gS=i,gS}var yS,nU;function h4e(){if(nU)return yS;nU=1;var r=c4e(),e=d4e(),t=r(e);return yS=t,yS}var f4e=h4e();const m4e=mr(f4e);var p4e=Oq();const g4e=mr(p4e);var y4e=g4e(function(r){return{x:r.left,y:r.top,width:r.width,height:r.height}},function(r){return["l",r.left,"t",r.top,"w",r.width,"h",r.height].join("")}),qE=F.createContext(void 0),HE=F.createContext(void 0),mK=F.createContext(void 0),pK=F.createContext({}),gK=F.createContext(void 0),yK=F.createContext(0),vK=F.createContext(0),iU=function(e){var t=e.state,n=t.xAxisMap,i=t.yAxisMap,a=t.offset,s=e.clipPathId,c=e.children,d=e.width,f=e.height,m=y4e(a);return ne.createElement(qE.Provider,{value:n},ne.createElement(HE.Provider,{value:i},ne.createElement(pK.Provider,{value:a},ne.createElement(mK.Provider,{value:m},ne.createElement(gK.Provider,{value:s},ne.createElement(yK.Provider,{value:f},ne.createElement(vK.Provider,{value:d},c)))))))},v4e=function(){return F.useContext(gK)},bK=function(e){var t=F.useContext(qE);t==null&&A0();var n=t[e];return n==null&&A0(),n},b4e=function(){var e=F.useContext(qE);return kc(e)},x4e=function(){var e=F.useContext(HE),t=m4e(e,function(n){return oK(n.domain,Number.isFinite)});return t||kc(e)},xK=function(e){var t=F.useContext(HE);t==null&&A0();var n=t[e];return n==null&&A0(),n},w4e=function(){var e=F.useContext(mK);return e},_4e=function(){return F.useContext(pK)},GE=function(){return F.useContext(vK)},KE=function(){return F.useContext(yK)};function Dh(r){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(r)}function S4e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function T4e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,_K(n.key),n)}}function A4e(r,e,t){return e&&T4e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function E4e(r,e,t){return e=Ub(e),N4e(r,wK()?Reflect.construct(e,t||[],Ub(r).constructor):e.apply(r,t))}function N4e(r,e){if(e&&(Dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O4e(r)}function O4e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function wK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wK=function(){return!!r})()}function Ub(r){return Ub=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ub(r)}function k4e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&MA(r,e)}function MA(r,e){return MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},MA(r,e)}function aU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function sU(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aU(Object(t),!0).forEach(function(n){WE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function WE(r,e,t){return e=_K(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _K(r){var e=C4e(r,"string");return Dh(e)=="symbol"?e:e+""}function C4e(r,e){if(Dh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Dh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function j4e(r,e){return P4e(r)||M4e(r,e)||R4e(r,e)||I4e()}function I4e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R4e(r,e){if(r){if(typeof r=="string")return oU(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oU(r,e)}}function oU(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function M4e(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function P4e(r){if(Array.isArray(r))return r}function PA(){return PA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},PA.apply(this,arguments)}var D4e=function(e,t){var n;return ne.isValidElement(e)?n=ne.cloneElement(e,t):It(e)?n=e(t):n=ne.createElement("line",PA({},t,{className:"recharts-reference-line-line"})),n},L4e=function(e,t,n,i,a,s,c,d,f){var m=a.x,p=a.y,y=a.width,b=a.height;if(n){var T=f.y,S=e.y.apply(T,{position:s});if(go(f,"discard")&&!e.y.isInRange(S))return null;var w=[{x:m+y,y:S},{x:m,y:S}];return d==="left"?w.reverse():w}if(t){var E=f.x,I=e.x.apply(E,{position:s});if(go(f,"discard")&&!e.x.isInRange(I))return null;var C=[{x:I,y:p+b},{x:I,y:p}];return c==="top"?C.reverse():C}if(i){var B=f.segment,R=B.map(function(D){return e.apply(D,{position:s})});return go(f,"discard")&&k2e(R,function(D){return!e.isInRange(D)})?null:R}return null};function B4e(r){var e=r.x,t=r.y,n=r.segment,i=r.xAxisId,a=r.yAxisId,s=r.shape,c=r.className,d=r.alwaysShow,f=v4e(),m=bK(i),p=xK(a),y=w4e();if(!f||!y)return null;gl(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var b=FE({x:m.scale,y:p.scale}),T=Xn(e),S=Xn(t),w=n&&n.length===2,E=L4e(b,T,S,w,y,r.position,m.orientation,p.orientation,r);if(!E)return null;var I=j4e(E,2),C=I[0],B=C.x,R=C.y,D=I[1],A=D.x,k=D.y,N=go(r,"hidden")?"url(#".concat(f,")"):void 0,U=sU(sU({clipPath:N},wt(r,!0)),{},{x1:B,y1:R,x2:A,y2:k});return ne.createElement(ur,{className:zt("recharts-reference-line",c)},D4e(s,U),bi.renderCallByParent(r,s4e({x1:B,y1:R,x2:A,y2:k})))}var XE=(function(r){function e(){return S4e(this,e),E4e(this,e,arguments)}return k4e(e,r),A4e(e,[{key:"render",value:function(){return ne.createElement(B4e,this.props)}}])})(ne.Component);WE(XE,"displayName","ReferenceLine");WE(XE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function DA(){return DA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},DA.apply(this,arguments)}function Lh(r){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(r)}function lU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cU(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(t),!0).forEach(function(n){p2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):lU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function U4e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function z4e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,TK(n.key),n)}}function V4e(r,e,t){return e&&z4e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function $4e(r,e,t){return e=zb(e),F4e(r,SK()?Reflect.construct(e,t||[],zb(r).constructor):e.apply(r,t))}function F4e(r,e){if(e&&(Lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q4e(r)}function q4e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function SK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SK=function(){return!!r})()}function zb(r){return zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zb(r)}function H4e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&LA(r,e)}function LA(r,e){return LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},LA(r,e)}function p2(r,e,t){return e=TK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function TK(r){var e=G4e(r,"string");return Lh(e)=="symbol"?e:e+""}function G4e(r,e){if(Lh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Lh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var K4e=function(e){var t=e.x,n=e.y,i=e.xAxis,a=e.yAxis,s=FE({x:i.scale,y:a.scale}),c=s.apply({x:t,y:n},{bandAware:!0});return go(e,"discard")&&!s.isInRange(c)?null:c},g2=(function(r){function e(){return U4e(this,e),$4e(this,e,arguments)}return H4e(e,r),V4e(e,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,c=n.alwaysShow,d=n.clipPathId,f=Xn(i),m=Xn(a);if(gl(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!f||!m)return null;var p=K4e(this.props);if(!p)return null;var y=p.x,b=p.y,T=this.props,S=T.shape,w=T.className,E=go(this.props,"hidden")?"url(#".concat(d,")"):void 0,I=cU(cU({clipPath:E},wt(this.props,!0)),{},{cx:y,cy:b});return ne.createElement(ur,{className:zt("recharts-reference-dot",w)},e.renderDot(S,I),bi.renderCallByParent(this.props,{x:y-s,y:b-s,width:2*s,height:2*s}))}}])})(ne.Component);p2(g2,"displayName","ReferenceDot");p2(g2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});p2(g2,"renderDot",function(r,e){var t;return ne.isValidElement(r)?t=ne.cloneElement(r,e):It(r)?t=r(e):t=ne.createElement(c2,DA({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),t});function BA(){return BA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},BA.apply(this,arguments)}function Bh(r){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(r)}function uU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function dU(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?uU(Object(t),!0).forEach(function(n){y2(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):uU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function W4e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function X4e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,EK(n.key),n)}}function Q4e(r,e,t){return e&&X4e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Y4e(r,e,t){return e=Vb(e),Z4e(r,AK()?Reflect.construct(e,t||[],Vb(r).constructor):e.apply(r,t))}function Z4e(r,e){if(e&&(Bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return J4e(r)}function J4e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function AK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AK=function(){return!!r})()}function Vb(r){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vb(r)}function ewe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&UA(r,e)}function UA(r,e){return UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},UA(r,e)}function y2(r,e,t){return e=EK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function EK(r){var e=twe(r,"string");return Bh(e)=="symbol"?e:e+""}function twe(r,e){if(Bh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Bh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var rwe=function(e,t,n,i,a){var s=a.x1,c=a.x2,d=a.y1,f=a.y2,m=a.xAxis,p=a.yAxis;if(!m||!p)return null;var y=FE({x:m.scale,y:p.scale}),b={x:e?y.x.apply(s,{position:"start"}):y.x.rangeMin,y:n?y.y.apply(d,{position:"start"}):y.y.rangeMin},T={x:t?y.x.apply(c,{position:"end"}):y.x.rangeMax,y:i?y.y.apply(f,{position:"end"}):y.y.rangeMax};return go(a,"discard")&&(!y.isInRange(b)||!y.isInRange(T))?null:hK(b,T)},v2=(function(r){function e(){return W4e(this,e),Y4e(this,e,arguments)}return ewe(e,r),Q4e(e,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,c=n.y2,d=n.className,f=n.alwaysShow,m=n.clipPathId;gl(f===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Xn(i),y=Xn(a),b=Xn(s),T=Xn(c),S=this.props.shape;if(!p&&!y&&!b&&!T&&!S)return null;var w=rwe(p,y,b,T,this.props);if(!w&&!S)return null;var E=go(this.props,"hidden")?"url(#".concat(m,")"):void 0;return ne.createElement(ur,{className:zt("recharts-reference-area",d)},e.renderRect(S,dU(dU({clipPath:E},wt(this.props,!0)),w)),bi.renderCallByParent(this.props,w))}}])})(ne.Component);y2(v2,"displayName","ReferenceArea");y2(v2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});y2(v2,"renderRect",function(r,e){var t;return ne.isValidElement(r)?t=ne.cloneElement(r,e):It(r)?t=r(e):t=ne.createElement($E,BA({},e,{className:"recharts-reference-area-rect"})),t});function NK(r,e,t){if(e<1)return[];if(e===1&&t===void 0)return r;for(var n=[],i=0;i<r.length;i+=e)n.push(r[i]);return n}function nwe(r,e,t){var n={width:r.width+e.width,height:r.height+e.height};return l4e(n,t)}function iwe(r,e,t){var n=t==="width",i=r.x,a=r.y,s=r.width,c=r.height;return e===1?{start:n?i:a,end:n?i+s:a+c}:{start:n?i+s:a+c,end:n?i:a}}function $b(r,e,t,n,i){if(r*e<r*n||r*e>r*i)return!1;var a=t();return r*(e-r*a/2-n)>=0&&r*(e+r*a/2-i)<=0}function awe(r,e){return NK(r,e+1)}function swe(r,e,t,n,i){for(var a=(n||[]).slice(),s=e.start,c=e.end,d=0,f=1,m=s,p=function(){var T=n==null?void 0:n[d];if(T===void 0)return{v:NK(n,f)};var S=d,w,E=function(){return w===void 0&&(w=t(T,S)),w},I=T.coordinate,C=d===0||$b(r,I,E,m,c);C||(d=0,m=s,f+=1),C&&(m=I+r*(E()/2+i),d+=f)},y;f<=a.length;)if(y=p(),y)return y.v;return[]}function ag(r){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(r)}function hU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ri(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hU(Object(t),!0).forEach(function(n){owe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):hU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function owe(r,e,t){return e=lwe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function lwe(r){var e=cwe(r,"string");return ag(e)=="symbol"?e:e+""}function cwe(r,e){if(ag(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(ag(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function uwe(r,e,t,n,i){for(var a=(n||[]).slice(),s=a.length,c=e.start,d=e.end,f=function(y){var b=a[y],T,S=function(){return T===void 0&&(T=t(b,y)),T};if(y===s-1){var w=r*(b.coordinate+r*S()/2-d);a[y]=b=Ri(Ri({},b),{},{tickCoord:w>0?b.coordinate-w*r:b.coordinate})}else a[y]=b=Ri(Ri({},b),{},{tickCoord:b.coordinate});var E=$b(r,b.tickCoord,S,c,d);E&&(d=b.tickCoord-r*(S()/2+i),a[y]=Ri(Ri({},b),{},{isShow:!0}))},m=s-1;m>=0;m--)f(m);return a}function dwe(r,e,t,n,i,a){var s=(n||[]).slice(),c=s.length,d=e.start,f=e.end;if(a){var m=n[c-1],p=t(m,c-1),y=r*(m.coordinate+r*p/2-f);s[c-1]=m=Ri(Ri({},m),{},{tickCoord:y>0?m.coordinate-y*r:m.coordinate});var b=$b(r,m.tickCoord,function(){return p},d,f);b&&(f=m.tickCoord-r*(p/2+i),s[c-1]=Ri(Ri({},m),{},{isShow:!0}))}for(var T=a?c-1:c,S=function(I){var C=s[I],B,R=function(){return B===void 0&&(B=t(C,I)),B};if(I===0){var D=r*(C.coordinate-r*R()/2-d);s[I]=C=Ri(Ri({},C),{},{tickCoord:D<0?C.coordinate-D*r:C.coordinate})}else s[I]=C=Ri(Ri({},C),{},{tickCoord:C.coordinate});var A=$b(r,C.tickCoord,R,d,f);A&&(d=C.tickCoord+r*(R()/2+i),s[I]=Ri(Ri({},C),{},{isShow:!0}))},w=0;w<T;w++)S(w);return s}function QE(r,e,t){var n=r.tick,i=r.ticks,a=r.viewBox,s=r.minTickGap,c=r.orientation,d=r.interval,f=r.tickFormatter,m=r.unit,p=r.angle;if(!i||!i.length||!n)return[];if(et(d)||D0.isSsr)return awe(i,typeof d=="number"&&et(d)?d:0);var y=[],b=c==="top"||c==="bottom"?"width":"height",T=m&&b==="width"?Gm(m,{fontSize:e,letterSpacing:t}):{width:0,height:0},S=function(C,B){var R=It(f)?f(C.value,B):C.value;return b==="width"?nwe(Gm(R,{fontSize:e,letterSpacing:t}),T,p):Gm(R,{fontSize:e,letterSpacing:t})[b]},w=i.length>=2?Ps(i[1].coordinate-i[0].coordinate):1,E=iwe(a,w,b);return d==="equidistantPreserveStart"?swe(w,E,S,i,s):(d==="preserveStart"||d==="preserveStartEnd"?y=dwe(w,E,S,i,s,d==="preserveStartEnd"):y=uwe(w,E,S,i,s),y.filter(function(I){return I.isShow}))}var hwe=["viewBox"],fwe=["viewBox"],mwe=["ticks"];function Uh(r){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(r)}function Fd(){return Fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Fd.apply(this,arguments)}function fU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Kn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fU(Object(t),!0).forEach(function(n){YE(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function vS(r,e){if(r==null)return{};var t=pwe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function pwe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function gwe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mU(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,kK(n.key),n)}}function ywe(r,e,t){return e&&mU(r.prototype,e),t&&mU(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function vwe(r,e,t){return e=Fb(e),bwe(r,OK()?Reflect.construct(e,t||[],Fb(r).constructor):e.apply(r,t))}function bwe(r,e){if(e&&(Uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xwe(r)}function xwe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function OK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OK=function(){return!!r})()}function Fb(r){return Fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fb(r)}function wwe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&zA(r,e)}function zA(r,e){return zA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zA(r,e)}function YE(r,e,t){return e=kK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function kK(r){var e=_we(r,"string");return Uh(e)=="symbol"?e:e+""}function _we(r,e){if(Uh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Uh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var lf=(function(r){function e(t){var n;return gwe(this,e),n=vwe(this,e,[t]),n.state={fontSize:"",letterSpacing:""},n}return wwe(e,r),ywe(e,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=vS(n,hwe),c=this.props,d=c.viewBox,f=vS(c,fwe);return!Zd(a,d)||!Zd(s,f)||!Zd(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,c=i.width,d=i.height,f=i.orientation,m=i.tickSize,p=i.mirror,y=i.tickMargin,b,T,S,w,E,I,C=p?-1:1,B=n.tickSize||m,R=et(n.tickCoord)?n.tickCoord:n.coordinate;switch(f){case"top":b=T=n.coordinate,w=s+ +!p*d,S=w-C*B,I=S-C*y,E=R;break;case"left":S=w=n.coordinate,T=a+ +!p*c,b=T-C*B,E=b-C*y,I=R;break;case"right":S=w=n.coordinate,T=a+ +p*c,b=T+C*B,E=b+C*y,I=R;break;default:b=T=n.coordinate,w=s+ +p*d,S=w+C*B,I=S+C*y,E=R;break}return{line:{x1:b,y1:S,x2:T,y2:w},tick:{x:E,y:I}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,c=n.height,d=n.orientation,f=n.mirror,m=n.axisLine,p=Kn(Kn(Kn({},wt(this.props,!1)),wt(m,!1)),{},{fill:"none"});if(d==="top"||d==="bottom"){var y=+(d==="top"&&!f||d==="bottom"&&f);p=Kn(Kn({},p),{},{x1:i,y1:a+y*c,x2:i+s,y2:a+y*c})}else{var b=+(d==="left"&&!f||d==="right"&&f);p=Kn(Kn({},p),{},{x1:i+b*s,y1:a,x2:i+b*s,y2:a+c})}return ne.createElement("line",Fd({},p,{className:zt("recharts-cartesian-axis-line",ds(m,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,c=this.props,d=c.tickLine,f=c.stroke,m=c.tick,p=c.tickFormatter,y=c.unit,b=QE(Kn(Kn({},this.props),{},{ticks:n}),i,a),T=this.getTickTextAnchor(),S=this.getTickVerticalAnchor(),w=wt(this.props,!1),E=wt(m,!1),I=Kn(Kn({},w),{},{fill:"none"},wt(d,!1)),C=b.map(function(B,R){var D=s.getTickLineCoord(B),A=D.line,k=D.tick,N=Kn(Kn(Kn(Kn({textAnchor:T,verticalAnchor:S},w),{},{stroke:"none",fill:f},E),k),{},{index:R,payload:B,visibleTicksCount:b.length,tickFormatter:p});return ne.createElement(ur,Fd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},S0(s.props,B,R)),d&&ne.createElement("line",Fd({},I,A,{className:zt("recharts-cartesian-axis-tick-line",ds(d,"className"))})),m&&e.renderTickItem(m,N,"".concat(It(p)?p(B.value,R):B.value).concat(y||"")))});return ne.createElement("g",{className:"recharts-cartesian-axis-ticks"},C)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,c=i.height,d=i.ticksGenerator,f=i.className,m=i.hide;if(m)return null;var p=this.props,y=p.ticks,b=vS(p,mwe),T=y;return It(d)&&(T=y&&y.length>0?d(this.props):d(b)),s<=0||c<=0||!T||!T.length?null:ne.createElement(ur,{className:zt("recharts-cartesian-axis",f),ref:function(w){n.layerReference=w}},a&&this.renderAxisLine(),this.renderTicks(T,this.state.fontSize,this.state.letterSpacing),bi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,c=zt(i.className,"recharts-cartesian-axis-tick-value");return ne.isValidElement(n)?s=ne.cloneElement(n,Kn(Kn({},i),{},{className:c})):It(n)?s=n(Kn(Kn({},i),{},{className:c})):s=ne.createElement(Th,Fd({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])})(F.Component);YE(lf,"displayName","CartesianAxis");YE(lf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Swe=["x1","y1","x2","y2","key"],Twe=["offset"];function E0(r){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E0(r)}function pU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Pi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pU(Object(t),!0).forEach(function(n){Awe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):pU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Awe(r,e,t){return e=Ewe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ewe(r){var e=Nwe(r,"string");return E0(e)=="symbol"?e:e+""}function Nwe(r,e){if(E0(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(E0(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function e0(){return e0=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},e0.apply(this,arguments)}function gU(r,e){if(r==null)return{};var t=Owe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Owe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}var kwe=function(e){var t=e.fill;if(!t||t==="none")return null;var n=e.fillOpacity,i=e.x,a=e.y,s=e.width,c=e.height,d=e.ry;return ne.createElement("rect",{x:i,y:a,ry:d,width:s,height:c,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function CK(r,e){var t;if(ne.isValidElement(r))t=ne.cloneElement(r,e);else if(It(r))t=r(e);else{var n=e.x1,i=e.y1,a=e.x2,s=e.y2,c=e.key,d=gU(e,Swe),f=wt(d,!1);f.offset;var m=gU(f,Twe);t=ne.createElement("line",e0({},m,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:c}))}return t}function Cwe(r){var e=r.x,t=r.width,n=r.horizontal,i=n===void 0?!0:n,a=r.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=Pi(Pi({},r),{},{x1:e,y1:c,x2:e+t,y2:c,key:"line-".concat(d),index:d});return CK(i,f)});return ne.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function jwe(r){var e=r.y,t=r.height,n=r.vertical,i=n===void 0?!0:n,a=r.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(c,d){var f=Pi(Pi({},r),{},{x1:c,y1:e,x2:c,y2:e+t,key:"line-".concat(d),index:d});return CK(i,f)});return ne.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Iwe(r){var e=r.horizontalFill,t=r.fillOpacity,n=r.x,i=r.y,a=r.width,s=r.height,c=r.horizontalPoints,d=r.horizontal,f=d===void 0?!0:d;if(!f||!e||!e.length)return null;var m=c.map(function(y){return Math.round(y+i-i)}).sort(function(y,b){return y-b});i!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?i+s-y:m[b+1]-y;if(S<=0)return null;var w=b%e.length;return ne.createElement("rect",{key:"react-".concat(b),y,x:n,height:S,width:a,stroke:"none",fill:e[w],fillOpacity:t,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function Rwe(r){var e=r.vertical,t=e===void 0?!0:e,n=r.verticalFill,i=r.fillOpacity,a=r.x,s=r.y,c=r.width,d=r.height,f=r.verticalPoints;if(!t||!n||!n.length)return null;var m=f.map(function(y){return Math.round(y+a-a)}).sort(function(y,b){return y-b});a!==m[0]&&m.unshift(0);var p=m.map(function(y,b){var T=!m[b+1],S=T?a+c-y:m[b+1]-y;if(S<=0)return null;var w=b%n.length;return ne.createElement("rect",{key:"react-".concat(b),x:y,y:s,width:S,height:d,stroke:"none",fill:n[w],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return ne.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var Mwe=function(e,t){var n=e.xAxis,i=e.width,a=e.height,s=e.offset;return CG(QE(Pi(Pi(Pi({},lf.defaultProps),n),{},{ticks:dl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,t)},Pwe=function(e,t){var n=e.yAxis,i=e.width,a=e.height,s=e.offset;return CG(QE(Pi(Pi(Pi({},lf.defaultProps),n),{},{ticks:dl(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,t)},Rd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function jK(r){var e,t,n,i,a,s,c=GE(),d=KE(),f=_4e(),m=Pi(Pi({},r),{},{stroke:(e=r.stroke)!==null&&e!==void 0?e:Rd.stroke,fill:(t=r.fill)!==null&&t!==void 0?t:Rd.fill,horizontal:(n=r.horizontal)!==null&&n!==void 0?n:Rd.horizontal,horizontalFill:(i=r.horizontalFill)!==null&&i!==void 0?i:Rd.horizontalFill,vertical:(a=r.vertical)!==null&&a!==void 0?a:Rd.vertical,verticalFill:(s=r.verticalFill)!==null&&s!==void 0?s:Rd.verticalFill,x:et(r.x)?r.x:f.left,y:et(r.y)?r.y:f.top,width:et(r.width)?r.width:f.width,height:et(r.height)?r.height:f.height}),p=m.x,y=m.y,b=m.width,T=m.height,S=m.syncWithTicks,w=m.horizontalValues,E=m.verticalValues,I=b4e(),C=x4e();if(!et(b)||b<=0||!et(T)||T<=0||!et(p)||p!==+p||!et(y)||y!==+y)return null;var B=m.verticalCoordinatesGenerator||Mwe,R=m.horizontalCoordinatesGenerator||Pwe,D=m.horizontalPoints,A=m.verticalPoints;if((!D||!D.length)&&It(R)){var k=w&&w.length,N=R({yAxis:C?Pi(Pi({},C),{},{ticks:k?w:C.ticks}):void 0,width:c,height:d,offset:f},k?!0:S);gl(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(E0(N),"]")),Array.isArray(N)&&(D=N)}if((!A||!A.length)&&It(B)){var U=E&&E.length,M=B({xAxis:I?Pi(Pi({},I),{},{ticks:U?E:I.ticks}):void 0,width:c,height:d,offset:f},U?!0:S);gl(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(E0(M),"]")),Array.isArray(M)&&(A=M)}return ne.createElement("g",{className:"recharts-cartesian-grid"},ne.createElement(kwe,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),ne.createElement(Cwe,e0({},m,{offset:f,horizontalPoints:D,xAxis:I,yAxis:C})),ne.createElement(jwe,e0({},m,{offset:f,verticalPoints:A,xAxis:I,yAxis:C})),ne.createElement(Iwe,e0({},m,{horizontalPoints:D})),ne.createElement(Rwe,e0({},m,{verticalPoints:A})))}jK.displayName="CartesianGrid";function zh(r){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(r)}function Dwe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Lwe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,MK(n.key),n)}}function Bwe(r,e,t){return e&&Lwe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Uwe(r,e,t){return e=qb(e),zwe(r,IK()?Reflect.construct(e,t||[],qb(r).constructor):e.apply(r,t))}function zwe(r,e){if(e&&(zh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(r)}function Vwe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function IK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IK=function(){return!!r})()}function qb(r){return qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qb(r)}function $we(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&VA(r,e)}function VA(r,e){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VA(r,e)}function RK(r,e,t){return e=MK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function MK(r){var e=Fwe(r,"string");return zh(e)=="symbol"?e:e+""}function Fwe(r,e){if(zh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(zh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var b2=(function(r){function e(){return Dwe(this,e),Uwe(this,e,arguments)}return $we(e,r),Bwe(e,[{key:"render",value:function(){return null}}])})(F.Component);RK(b2,"displayName","ZAxis");RK(b2,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var qwe=["option","isActive"];function Zm(){return Zm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Zm.apply(this,arguments)}function Hwe(r,e){if(r==null)return{};var t=Gwe(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Gwe(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function Kwe(r){var e=r.option,t=r.isActive,n=Hwe(r,qwe);return typeof e=="string"?F.createElement(kA,Zm({option:F.createElement(Wx,Zm({type:e},n)),isActive:t,shapeType:"symbols"},n)):F.createElement(kA,Zm({option:e,isActive:t,shapeType:"symbols"},n))}function Vh(r){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(r)}function Jm(){return Jm=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Jm.apply(this,arguments)}function yU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ss(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yU(Object(t),!0).forEach(function(n){Rc(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Wwe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function vU(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,DK(n.key),n)}}function Xwe(r,e,t){return e&&vU(r.prototype,e),t&&vU(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Qwe(r,e,t){return e=Hb(e),Ywe(r,PK()?Reflect.construct(e,t||[],Hb(r).constructor):e.apply(r,t))}function Ywe(r,e){if(e&&(Vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zwe(r)}function Zwe(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function PK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PK=function(){return!!r})()}function Hb(r){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hb(r)}function Jwe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&$A(r,e)}function $A(r,e){return $A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$A(r,e)}function Rc(r,e,t){return e=DK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function DK(r){var e=e5e(r,"string");return Vh(e)=="symbol"?e:e+""}function e5e(r,e){if(Vh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Vh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var qg=(function(r){function e(){var t;Wwe(this,e);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=Qwe(this,e,[].concat(i)),Rc(t,"state",{isAnimationFinished:!1}),Rc(t,"handleAnimationEnd",function(){t.setState({isAnimationFinished:!0})}),Rc(t,"handleAnimationStart",function(){t.setState({isAnimationFinished:!1})}),Rc(t,"id",Ig("recharts-scatter-")),t}return Jwe(e,r),Xwe(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,a=this.props,s=a.shape,c=a.activeShape,d=a.activeIndex,f=wt(this.props,!1);return n.map(function(m,p){var y=d===p,b=y?c:s,T=ss(ss({},f),m);return ne.createElement(ur,Jm({className:"recharts-scatter-symbol",key:"symbol-".concat(m==null?void 0:m.cx,"-").concat(m==null?void 0:m.cy,"-").concat(m==null?void 0:m.size,"-").concat(p)},S0(i.props,m,p),{role:"img"}),ne.createElement(Kwe,Jm({option:b,isActive:y,key:"symbol-".concat(p)},T)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,a=i.points,s=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,f=i.animationEasing,m=i.animationId,p=this.state.prevPoints;return ne.createElement(_o,{begin:c,duration:d,isActive:s,easing:f,from:{t:0},to:{t:1},key:"pie-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var b=y.t,T=a.map(function(S,w){var E=p&&p[w];if(E){var I=pa(E.cx,S.cx),C=pa(E.cy,S.cy),B=pa(E.size,S.size);return ss(ss({},S),{},{cx:I(b),cy:C(b),size:B(b)})}var R=pa(0,S.size);return ss(ss({},S),{},{size:R(b)})});return ne.createElement(ur,null,n.renderSymbolsStatically(T))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,a=n.isAnimationActive,s=this.state.prevPoints;return a&&i&&i.length&&(!s||!Bg(s,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,s=i.xAxis,c=i.yAxis,d=i.children,f=Fa(d,Ug);return f?f.map(function(m,p){var y=m.props,b=y.direction,T=y.dataKey;return ne.cloneElement(m,{key:"".concat(b,"-").concat(T,"-").concat(a[p]),data:a,xAxis:s,yAxis:c,layout:b==="x"?"vertical":"horizontal",dataPointFormatter:function(w,E){return{x:w.cx,y:w.cy,value:b==="x"?+w.node.x:+w.node.y,errorVal:_i(w,E)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,a=n.line,s=n.lineType,c=n.lineJointType,d=wt(this.props,!1),f=wt(a,!1),m,p;if(s==="joint")m=i.map(function(C){return{x:C.cx,y:C.cy}});else if(s==="fitting"){var y=Yce(i),b=y.xmin,T=y.xmax,S=y.a,w=y.b,E=function(B){return S*B+w};m=[{x:b,y:E(b)},{x:T,y:E(T)}]}var I=ss(ss(ss({},d),{},{fill:"none",stroke:d&&d.fill},f),{},{points:m});return ne.isValidElement(a)?p=ne.cloneElement(a,I):It(a)?p=a(I):p=ne.createElement(mA,Jm({},I,{type:c})),ne.createElement(ur,{className:"recharts-scatter-line",key:"recharts-scatter-line"},p)}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.points,s=n.line,c=n.className,d=n.xAxis,f=n.yAxis,m=n.left,p=n.top,y=n.width,b=n.height,T=n.id,S=n.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,E=zt("recharts-scatter",c),I=d&&d.allowDataOverflow,C=f&&f.allowDataOverflow,B=I||C,R=Lt(T)?this.id:T;return ne.createElement(ur,{className:E,clipPath:B?"url(#clipPath-".concat(R,")"):null},I||C?ne.createElement("defs",null,ne.createElement("clipPath",{id:"clipPath-".concat(R)},ne.createElement("rect",{x:I?m:m-y/2,y:C?p:p-b/2,width:I?y:y*2,height:C?b:b*2}))):null,s&&this.renderLine(),this.renderErrorBar(),ne.createElement(ur,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!S||w)&&vl.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(F.PureComponent);Rc(qg,"displayName","Scatter");Rc(qg,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!D0.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Rc(qg,"getComposedData",function(r){var e=r.xAxis,t=r.yAxis,n=r.zAxis,i=r.item,a=r.displayedData,s=r.xAxisTicks,c=r.yAxisTicks,d=r.offset,f=i.props.tooltipType,m=Fa(i.props.children,gE),p=Lt(e.dataKey)?i.props.dataKey:e.dataKey,y=Lt(t.dataKey)?i.props.dataKey:t.dataKey,b=n&&n.dataKey,T=n?n.range:b2.defaultProps.range,S=T&&T[0],w=e.scale.bandwidth?e.scale.bandwidth():0,E=t.scale.bandwidth?t.scale.bandwidth():0,I=a.map(function(C,B){var R=_i(C,p),D=_i(C,y),A=!Lt(b)&&_i(C,b)||"-",k=[{name:Lt(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:R,payload:C,dataKey:p,type:f},{name:Lt(t.dataKey)?i.props.name:t.name||t.dataKey,unit:t.unit||"",value:D,payload:C,dataKey:y,type:f}];A!=="-"&&k.push({name:n.name||n.dataKey,unit:n.unit||"",value:A,payload:C,dataKey:b,type:f});var N=wL({axis:e,ticks:s,bandSize:w,entry:C,index:B,dataKey:p}),U=wL({axis:t,ticks:c,bandSize:E,entry:C,index:B,dataKey:y}),M=A!=="-"?n.scale(A):S,$=Math.sqrt(Math.max(M,0)/Math.PI);return ss(ss({},C),{},{cx:N,cy:U,x:N-$,y:U-$,xAxis:e,yAxis:t,zAxis:n,width:2*$,height:2*$,size:M,node:{x:R,y:D,z:A},tooltipPayload:k,tooltipPosition:{x:N,y:U},payload:C},m&&m[B]&&m[B].props)});return ss({points:I},d)});function $h(r){"@babel/helpers - typeof";return $h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$h(r)}function t5e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function r5e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,UK(n.key),n)}}function n5e(r,e,t){return e&&r5e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function i5e(r,e,t){return e=Gb(e),a5e(r,LK()?Reflect.construct(e,t||[],Gb(r).constructor):e.apply(r,t))}function a5e(r,e){if(e&&($h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s5e(r)}function s5e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function LK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LK=function(){return!!r})()}function Gb(r){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gb(r)}function o5e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&FA(r,e)}function FA(r,e){return FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},FA(r,e)}function BK(r,e,t){return e=UK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function UK(r){var e=l5e(r,"string");return $h(e)=="symbol"?e:e+""}function l5e(r,e){if($h(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if($h(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function qA(){return qA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qA.apply(this,arguments)}function c5e(r){var e=r.xAxisId,t=GE(),n=KE(),i=bK(e);return i==null?null:F.createElement(lf,qA({},i,{className:zt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:t,height:n},ticksGenerator:function(s){return dl(s,!0)}}))}var x2=(function(r){function e(){return t5e(this,e),i5e(this,e,arguments)}return o5e(e,r),n5e(e,[{key:"render",value:function(){return F.createElement(c5e,this.props)}}])})(F.Component);BK(x2,"displayName","XAxis");BK(x2,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fh(r){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(r)}function u5e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function d5e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,$K(n.key),n)}}function h5e(r,e,t){return e&&d5e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function f5e(r,e,t){return e=Kb(e),m5e(r,zK()?Reflect.construct(e,t||[],Kb(r).constructor):e.apply(r,t))}function m5e(r,e){if(e&&(Fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p5e(r)}function p5e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function zK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zK=function(){return!!r})()}function Kb(r){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kb(r)}function g5e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&HA(r,e)}function HA(r,e){return HA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},HA(r,e)}function VK(r,e,t){return e=$K(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $K(r){var e=y5e(r,"string");return Fh(e)=="symbol"?e:e+""}function y5e(r,e){if(Fh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(Fh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function GA(){return GA=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},GA.apply(this,arguments)}var v5e=function(e){var t=e.yAxisId,n=GE(),i=KE(),a=xK(t);return a==null?null:F.createElement(lf,GA({},a,{className:zt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(c){return dl(c,!0)}}))},w2=(function(r){function e(){return u5e(this,e),f5e(this,e,arguments)}return g5e(e,r),h5e(e,[{key:"render",value:function(){return F.createElement(v5e,this.props)}}])})(F.Component);VK(w2,"displayName","YAxis");VK(w2,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bU(r){return _5e(r)||w5e(r)||x5e(r)||b5e()}function b5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x5e(r,e){if(r){if(typeof r=="string")return KA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return KA(r,e)}}function w5e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function _5e(r){if(Array.isArray(r))return KA(r)}function KA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var WA=function(e,t,n,i,a){var s=Fa(e,XE),c=Fa(e,g2),d=[].concat(bU(s),bU(c)),f=Fa(e,v2),m="".concat(i,"Id"),p=i[0],y=t;if(d.length&&(y=d.reduce(function(S,w){if(w.props[m]===n&&go(w.props,"extendDomain")&&et(w.props[p])){var E=w.props[p];return[Math.min(S[0],E),Math.max(S[1],E)]}return S},y)),f.length){var b="".concat(p,"1"),T="".concat(p,"2");y=f.reduce(function(S,w){if(w.props[m]===n&&go(w.props,"extendDomain")&&et(w.props[b])&&et(w.props[T])){var E=w.props[b],I=w.props[T];return[Math.min(S[0],E,I),Math.max(S[1],E,I)]}return S},y)}return a&&a.length&&(y=a.reduce(function(S,w){return et(w)?[Math.min(S[0],w),Math.max(S[1],w)]:S},y)),y},bS={exports:{}},xU;function S5e(){return xU||(xU=1,(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function a(d,f,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,p||d,y),T=t?t+f:f;return d._events[T]?d._events[T].fn?d._events[T]=[d._events[T],b]:d._events[T].push(b):(d._events[T]=b,d._eventsCount++),d}function s(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,p;if(this._eventsCount===0)return f;for(p in m=this._events)e.call(m,p)&&f.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=t?t+f:f,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,b=p.length,T=new Array(b);y<b;y++)T[y]=p[y].fn;return T},c.prototype.listenerCount=function(f){var m=t?t+f:f,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(f,m,p,y,b,T){var S=t?t+f:f;if(!this._events[S])return!1;var w=this._events[S],E=arguments.length,I,C;if(w.fn){switch(w.once&&this.removeListener(f,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,y),!0;case 5:return w.fn.call(w.context,m,p,y,b),!0;case 6:return w.fn.call(w.context,m,p,y,b,T),!0}for(C=1,I=new Array(E-1);C<E;C++)I[C-1]=arguments[C];w.fn.apply(w.context,I)}else{var B=w.length,R;for(C=0;C<B;C++)switch(w[C].once&&this.removeListener(f,w[C].fn,void 0,!0),E){case 1:w[C].fn.call(w[C].context);break;case 2:w[C].fn.call(w[C].context,m);break;case 3:w[C].fn.call(w[C].context,m,p);break;case 4:w[C].fn.call(w[C].context,m,p,y);break;default:if(!I)for(R=1,I=new Array(E-1);R<E;R++)I[R-1]=arguments[R];w[C].fn.apply(w[C].context,I)}}return!0},c.prototype.on=function(f,m,p){return a(this,f,m,p,!1)},c.prototype.once=function(f,m,p){return a(this,f,m,p,!0)},c.prototype.removeListener=function(f,m,p,y){var b=t?t+f:f;if(!this._events[b])return this;if(!m)return s(this,b),this;var T=this._events[b];if(T.fn)T.fn===m&&(!y||T.once)&&(!p||T.context===p)&&s(this,b);else{for(var S=0,w=[],E=T.length;S<E;S++)(T[S].fn!==m||y&&!T[S].once||p&&T[S].context!==p)&&w.push(T[S]);w.length?this._events[b]=w.length===1?w[0]:w:s(this,b)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=t?t+f:f,this._events[m]&&s(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,r.exports=c})(bS)),bS.exports}var T5e=S5e();const A5e=mr(T5e);var xS=new A5e,wS="recharts.syncMouseEvents";function sg(r){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(r)}function E5e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function N5e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,FK(n.key),n)}}function O5e(r,e,t){return e&&N5e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function _S(r,e,t){return e=FK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function FK(r){var e=k5e(r,"string");return sg(e)=="symbol"?e:e+""}function k5e(r,e){if(sg(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(sg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}var C5e=(function(){function r(){E5e(this,r),_S(this,"activeIndex",0),_S(this,"coordinateList",[]),_S(this,"layout","horizontal")}return O5e(r,[{key:"setDetails",value:function(t){var n,i=t.coordinateList,a=i===void 0?null:i,s=t.container,c=s===void 0?null:s,d=t.layout,f=d===void 0?null:d,m=t.offset,p=m===void 0?null:m,y=t.mouseHandlerCallback,b=y===void 0?null:y;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=c??this.container,this.layout=f??this.layout,this.offset=p??this.offset,this.mouseHandlerCallback=b??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(t){if(this.coordinateList.length!==0)switch(t.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(t){this.activeIndex=t}},{key:"spoofMouse",value:function(){var t,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,c=i.height,d=this.coordinateList[this.activeIndex].coordinate,f=((t=window)===null||t===void 0?void 0:t.scrollX)||0,m=((n=window)===null||n===void 0?void 0:n.scrollY)||0,p=a+d+f,y=s+this.offset.top+c/2+m;this.mouseHandlerCallback({pageX:p,pageY:y})}}}])})();function j5e(r,e,t){if(t==="number"&&e===!0&&Array.isArray(r)){var n=r==null?void 0:r[0],i=r==null?void 0:r[1];if(n&&i&&et(n)&&et(i))return!0}return!1}function I5e(r,e,t,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:r==="horizontal"?e.x-i:t.left+.5,y:r==="horizontal"?t.top+.5:e.y-i,width:r==="horizontal"?n:t.width-1,height:r==="horizontal"?t.height-1:n}}function qK(r){var e=r.cx,t=r.cy,n=r.radius,i=r.startAngle,a=r.endAngle,s=kr(e,t,n,i),c=kr(e,t,n,a);return{points:[s,c],cx:e,cy:t,radius:n,startAngle:i,endAngle:a}}function R5e(r,e,t){var n,i,a,s;if(r==="horizontal")n=e.x,a=n,i=t.top,s=t.top+t.height;else if(r==="vertical")i=e.y,s=i,n=t.left,a=t.left+t.width;else if(e.cx!=null&&e.cy!=null)if(r==="centric"){var c=e.cx,d=e.cy,f=e.innerRadius,m=e.outerRadius,p=e.angle,y=kr(c,d,f,p),b=kr(c,d,m,p);n=y.x,i=y.y,a=b.x,s=b.y}else return qK(e);return[{x:n,y:i},{x:a,y:s}]}function og(r){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(r)}function wU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qy(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?wU(Object(t),!0).forEach(function(n){M5e(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):wU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function M5e(r,e,t){return e=P5e(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function P5e(r){var e=D5e(r,"string");return og(e)=="symbol"?e:e+""}function D5e(r,e){if(og(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(og(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function L5e(r){var e,t,n=r.element,i=r.tooltipEventType,a=r.isActive,s=r.activeCoordinate,c=r.activePayload,d=r.offset,f=r.activeTooltipIndex,m=r.tooltipAxisBandSize,p=r.layout,y=r.chartName,b=(e=n.props.cursor)!==null&&e!==void 0?e:(t=n.type.defaultProps)===null||t===void 0?void 0:t.cursor;if(!n||!b||!a||!s||y!=="ScatterChart"&&i!=="axis")return null;var T,S=mA;if(y==="ScatterChart")T=s,S=Pbe;else if(y==="BarChart")T=I5e(p,s,d,m),S=$E;else if(p==="radial"){var w=qK(s),E=w.cx,I=w.cy,C=w.radius,B=w.startAngle,R=w.endAngle;T={cx:E,cy:I,startAngle:B,endAngle:R,innerRadius:C,outerRadius:C},S=VG}else T={points:R5e(p,s,d)},S=mA;var D=qy(qy(qy(qy({stroke:"#ccc",pointerEvents:"none"},d),T),wt(b,!1)),{},{payload:c,payloadIndex:f,className:zt("recharts-tooltip-cursor",b.className)});return F.isValidElement(b)?F.cloneElement(b,D):F.createElement(S,D)}var B5e=["item"],U5e=["children","className","width","height","style","compact","title","desc"];function qh(r){"@babel/helpers - typeof";return qh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qh(r)}function qd(){return qd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},qd.apply(this,arguments)}function _U(r,e){return $5e(r)||V5e(r,e)||GK(r,e)||z5e()}function z5e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5e(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,s,c=[],d=!0,f=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(d=(n=a.call(t)).done)&&(c.push(n.value),c.length!==e);d=!0);}catch(m){f=!0,i=m}finally{try{if(!d&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(f)throw i}}return c}}function $5e(r){if(Array.isArray(r))return r}function SU(r,e){if(r==null)return{};var t=F5e(r,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function F5e(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function q5e(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function H5e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,KK(n.key),n)}}function G5e(r,e,t){return e&&H5e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function K5e(r,e,t){return e=Wb(e),W5e(r,HK()?Reflect.construct(e,t||[],Wb(r).constructor):e.apply(r,t))}function W5e(r,e){if(e&&(qh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X5e(r)}function X5e(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function HK(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HK=function(){return!!r})()}function Wb(r){return Wb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wb(r)}function Q5e(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&XA(r,e)}function XA(r,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XA(r,e)}function Hh(r){return J5e(r)||Z5e(r)||GK(r)||Y5e()}function Y5e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GK(r,e){if(r){if(typeof r=="string")return QA(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return QA(r,e)}}function Z5e(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function J5e(r){if(Array.isArray(r))return QA(r)}function QA(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function TU(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function je(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TU(Object(t),!0).forEach(function(n){Nt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):TU(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Nt(r,e,t){return e=KK(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function KK(r){var e=e3e(r,"string");return qh(e)=="symbol"?e:e+""}function e3e(r,e){if(qh(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(qh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var t3e={xAxis:["bottom","top"],yAxis:["left","right"]},r3e={width:"100%",height:"100%"},WK={x:0,y:0};function Hy(r){return r}var n3e=function(e,t){return t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius},i3e=function(e,t,n,i){var a=t.find(function(m){return m&&m.index===n});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,c=i.radius;return je(je(je({},i),kr(i.cx,i.cy,c,s)),{},{angle:s,radius:c})}var d=a.coordinate,f=i.angle;return je(je(je({},i),kr(i.cx,i.cy,d,f)),{},{angle:f,radius:d})}return WK},_2=function(e,t){var n=t.graphicalItems,i=t.dataStartIndex,a=t.dataEndIndex,s=(n??[]).reduce(function(c,d){var f=d.props.data;return f&&f.length?[].concat(Hh(c),Hh(f)):c},[]);return s.length>0?s:e&&e.length&&et(i)&&et(a)?e.slice(i,a+1):[]};function XK(r){return r==="number"?[0,"auto"]:void 0}var YA=function(e,t,n,i){var a=e.graphicalItems,s=e.tooltipAxis,c=_2(t,e);return n<0||!a||!a.length||n>=c.length?null:a.reduce(function(d,f){var m,p=(m=f.props.data)!==null&&m!==void 0?m:t;p&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(p=p.slice(e.dataStartIndex,e.dataEndIndex+1));var y;if(s.dataKey&&!s.allowDuplicatedCategory){var b=p===void 0?c:p;y=Wv(b,s.dataKey,i)}else y=p&&p[n]||c[n];return y?[].concat(Hh(d),[PG(f,y)]):d},[])},AU=function(e,t,n,i){var a=i||{x:e.chartX,y:e.chartY},s=n3e(a,n),c=e.orderedTooltipTicks,d=e.tooltipAxis,f=e.tooltipTicks,m=n1e(s,c,f,d);if(m>=0&&f){var p=f[m]&&f[m].value,y=YA(e,t,m,p),b=i3e(n,c,m,a);return{activeTooltipIndex:m,activeLabel:p,activePayload:y,activeCoordinate:b}}return null},a3e=function(e,t){var n=t.axes,i=t.graphicalItems,a=t.axisType,s=t.axisIdKey,c=t.stackGroups,d=t.dataStartIndex,f=t.dataEndIndex,m=e.layout,p=e.children,y=e.stackOffset,b=kG(m,a);return n.reduce(function(T,S){var w,E=S.type.defaultProps!==void 0?je(je({},S.type.defaultProps),S.props):S.props,I=E.type,C=E.dataKey,B=E.allowDataOverflow,R=E.allowDuplicatedCategory,D=E.scale,A=E.ticks,k=E.includeHidden,N=E[s];if(T[N])return T;var U=_2(e.data,{graphicalItems:i.filter(function(J){var ce,Ne=s in J.props?J.props[s]:(ce=J.type.defaultProps)===null||ce===void 0?void 0:ce[s];return Ne===N}),dataStartIndex:d,dataEndIndex:f}),M=U.length,$,z,Q;j5e(E.domain,B,I)&&($=cA(E.domain,null,B),b&&(I==="number"||D!=="auto")&&(Q=Wm(U,C,"category")));var ee=XK(I);if(!$||$.length===0){var K,Z=(K=E.domain)!==null&&K!==void 0?K:ee;if(C){if($=Wm(U,C,I),I==="category"&&b){var Y=Qce($);R&&Y?(z=$,$=Mb(0,M)):R||($=AL(Z,$,S).reduce(function(J,ce){return J.indexOf(ce)>=0?J:[].concat(Hh(J),[ce])},[]))}else if(I==="category")R?$=$.filter(function(J){return J!==""&&!Lt(J)}):$=AL(Z,$,S).reduce(function(J,ce){return J.indexOf(ce)>=0||ce===""||Lt(ce)?J:[].concat(Hh(J),[ce])},[]);else if(I==="number"){var ge=l1e(U,i.filter(function(J){var ce,Ne,se=s in J.props?J.props[s]:(ce=J.type.defaultProps)===null||ce===void 0?void 0:ce[s],ke="hide"in J.props?J.props.hide:(Ne=J.type.defaultProps)===null||Ne===void 0?void 0:Ne.hide;return se===N&&(k||!ke)}),C,a,m);ge&&($=ge)}b&&(I==="number"||D!=="auto")&&(Q=Wm(U,C,"category"))}else b?$=Mb(0,M):c&&c[N]&&c[N].hasStack&&I==="number"?$=y==="expand"?[0,1]:MG(c[N].stackGroups,d,f):$=OG(U,i.filter(function(J){var ce=s in J.props?J.props[s]:J.type.defaultProps[s],Ne="hide"in J.props?J.props.hide:J.type.defaultProps.hide;return ce===N&&(k||!Ne)}),I,m,!0);if(I==="number")$=WA(p,$,N,a,A),Z&&($=cA(Z,$,B));else if(I==="category"&&Z){var ae=Z,X=$.every(function(J){return ae.indexOf(J)>=0});X&&($=ae)}}return je(je({},T),{},Nt({},N,je(je({},E),{},{axisType:a,domain:$,categoricalDomain:Q,duplicateDomain:z,originalDomain:(w=E.domain)!==null&&w!==void 0?w:ee,isCategorical:b,layout:m})))},{})},s3e=function(e,t){var n=t.graphicalItems,i=t.Axis,a=t.axisType,s=t.axisIdKey,c=t.stackGroups,d=t.dataStartIndex,f=t.dataEndIndex,m=e.layout,p=e.children,y=_2(e.data,{graphicalItems:n,dataStartIndex:d,dataEndIndex:f}),b=y.length,T=kG(m,a),S=-1;return n.reduce(function(w,E){var I=E.type.defaultProps!==void 0?je(je({},E.type.defaultProps),E.props):E.props,C=I[s],B=XK("number");if(!w[C]){S++;var R;return T?R=Mb(0,b):c&&c[C]&&c[C].hasStack?(R=MG(c[C].stackGroups,d,f),R=WA(p,R,C,a)):(R=cA(B,OG(y,n.filter(function(D){var A,k,N=s in D.props?D.props[s]:(A=D.type.defaultProps)===null||A===void 0?void 0:A[s],U="hide"in D.props?D.props.hide:(k=D.type.defaultProps)===null||k===void 0?void 0:k.hide;return N===C&&!U}),"number",m),i.defaultProps.allowDataOverflow),R=WA(p,R,C,a)),je(je({},w),{},Nt({},C,je(je({axisType:a},i.defaultProps),{},{hide:!0,orientation:ds(t3e,"".concat(a,".").concat(S%2),null),domain:R,originalDomain:B,isCategorical:T,layout:m})))}return w},{})},o3e=function(e,t){var n=t.axisType,i=n===void 0?"xAxis":n,a=t.AxisComp,s=t.graphicalItems,c=t.stackGroups,d=t.dataStartIndex,f=t.dataEndIndex,m=e.children,p="".concat(i,"Id"),y=Fa(m,a),b={};return y&&y.length?b=a3e(e,{axes:y,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f}):s&&s.length&&(b=s3e(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:p,stackGroups:c,dataStartIndex:d,dataEndIndex:f})),b},l3e=function(e){var t=kc(e),n=dl(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:mE(n,function(i){return i.coordinate}),tooltipAxis:t,tooltipAxisBandSize:xb(t,n)}},EU=function(e){var t=e.children,n=e.defaultShowTooltip,i=Ma(t,Mh),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},c3e=function(e){return!e||!e.length?!1:e.some(function(t){var n=pl(t&&t.type);return n&&n.indexOf("Bar")>=0})},NU=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},u3e=function(e,t){var n=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,c=e.yAxisMap,d=c===void 0?{}:c,f=n.width,m=n.height,p=n.children,y=n.margin||{},b=Ma(p,Mh),T=Ma(p,Jd),S=Object.keys(d).reduce(function(R,D){var A=d[D],k=A.orientation;return!A.mirror&&!A.hide?je(je({},R),{},Nt({},k,R[k]+A.width)):R},{left:y.left||0,right:y.right||0}),w=Object.keys(s).reduce(function(R,D){var A=s[D],k=A.orientation;return!A.mirror&&!A.hide?je(je({},R),{},Nt({},k,ds(R,"".concat(k))+A.height)):R},{top:y.top||0,bottom:y.bottom||0}),E=je(je({},w),S),I=E.bottom;b&&(E.bottom+=b.props.height||Mh.defaultProps.height),T&&t&&(E=s1e(E,i,n,t));var C=f-E.left-E.right,B=m-E.top-E.bottom;return je(je({brushBottom:I},E),{},{width:Math.max(C,0),height:Math.max(B,0)})},d3e=function(e,t){if(t==="xAxis")return e[t].width;if(t==="yAxis")return e[t].height},QK=function(e){var t=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,c=s===void 0?["axis"]:s,d=e.axisComponents,f=e.legendContent,m=e.formatAxisMap,p=e.defaultProps,y=function(E,I){var C=I.graphicalItems,B=I.stackGroups,R=I.offset,D=I.updateId,A=I.dataStartIndex,k=I.dataEndIndex,N=E.barSize,U=E.layout,M=E.barGap,$=E.barCategoryGap,z=E.maxBarSize,Q=NU(U),ee=Q.numericAxisName,K=Q.cateAxisName,Z=c3e(C),Y=[];return C.forEach(function(ge,ae){var X=_2(E.data,{graphicalItems:[ge],dataStartIndex:A,dataEndIndex:k}),J=ge.type.defaultProps!==void 0?je(je({},ge.type.defaultProps),ge.props):ge.props,ce=J.dataKey,Ne=J.maxBarSize,se=J["".concat(ee,"Id")],ke=J["".concat(K,"Id")],Me={},ot=d.reduce(function(nt,vt){var Xe=I["".concat(vt.axisType,"Map")],Tt=J["".concat(vt.axisType,"Id")];Xe&&Xe[Tt]||vt.axisType==="zAxis"||A0();var Kt=Xe[Tt];return je(je({},nt),{},Nt(Nt({},vt.axisType,Kt),"".concat(vt.axisType,"Ticks"),dl(Kt)))},Me),Ee=ot[K],He=ot["".concat(K,"Ticks")],he=B&&B[se]&&B[se].hasStack&&y1e(ge,B[se].stackGroups),pe=pl(ge.type).indexOf("Bar")>=0,Ye=xb(Ee,He),Ke=[],at=Z&&i1e({barSize:N,stackGroups:B,totalSize:d3e(ot,K)});if(pe){var tt,Gt,Ie=Lt(Ne)?z:Ne,de=(tt=(Gt=xb(Ee,He,!0))!==null&&Gt!==void 0?Gt:Ie)!==null&&tt!==void 0?tt:0;Ke=a1e({barGap:M,barCategoryGap:$,bandSize:de!==Ye?de:Ye,sizeList:at[ke],maxBarSize:Ie}),de!==Ye&&(Ke=Ke.map(function(nt){return je(je({},nt),{},{position:je(je({},nt.position),{},{offset:nt.position.offset-de/2})})}))}var qe=ge&&ge.type&&ge.type.getComposedData;qe&&Y.push({props:je(je({},qe(je(je({},ot),{},{displayedData:X,props:E,dataKey:ce,item:ge,bandSize:Ye,barPosition:Ke,offset:R,stackedData:he,layout:U,dataStartIndex:A,dataEndIndex:k}))),{},Nt(Nt(Nt({key:ge.key||"item-".concat(ae)},ee,ot[ee]),K,ot[K]),"animationId",D)),childIndex:cue(ge,E.children),item:ge})}),Y},b=function(E,I){var C=E.props,B=E.dataStartIndex,R=E.dataEndIndex,D=E.updateId;if(!UR({props:C}))return null;var A=C.children,k=C.layout,N=C.stackOffset,U=C.data,M=C.reverseStackOrder,$=NU(k),z=$.numericAxisName,Q=$.cateAxisName,ee=Fa(A,n),K=p1e(U,ee,"".concat(z,"Id"),"".concat(Q,"Id"),N,M),Z=d.reduce(function(J,ce){var Ne="".concat(ce.axisType,"Map");return je(je({},J),{},Nt({},Ne,o3e(C,je(je({},ce),{},{graphicalItems:ee,stackGroups:ce.axisType===z&&K,dataStartIndex:B,dataEndIndex:R}))))},{}),Y=u3e(je(je({},Z),{},{props:C,graphicalItems:ee}),I==null?void 0:I.legendBBox);Object.keys(Z).forEach(function(J){Z[J]=m(C,Z[J],Y,J.replace("Map",""),t)});var ge=Z["".concat(Q,"Map")],ae=l3e(ge),X=y(C,je(je({},Z),{},{dataStartIndex:B,dataEndIndex:R,updateId:D,graphicalItems:ee,stackGroups:K,offset:Y}));return je(je({formattedGraphicalItems:X,graphicalItems:ee,offset:Y,stackGroups:K},ae),Z)},T=(function(w){function E(I){var C,B,R;return q5e(this,E),R=K5e(this,E,[I]),Nt(R,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Nt(R,"accessibilityManager",new C5e),Nt(R,"handleLegendBBoxUpdate",function(D){if(D){var A=R.state,k=A.dataStartIndex,N=A.dataEndIndex,U=A.updateId;R.setState(je({legendBBox:D},b({props:R.props,dataStartIndex:k,dataEndIndex:N,updateId:U},je(je({},R.state),{},{legendBBox:D}))))}}),Nt(R,"handleReceiveSyncEvent",function(D,A,k){if(R.props.syncId===D){if(k===R.eventEmitterSymbol&&typeof R.props.syncMethod!="function")return;R.applySyncEvent(A)}}),Nt(R,"handleBrushChange",function(D){var A=D.startIndex,k=D.endIndex;if(A!==R.state.dataStartIndex||k!==R.state.dataEndIndex){var N=R.state.updateId;R.setState(function(){return je({dataStartIndex:A,dataEndIndex:k},b({props:R.props,dataStartIndex:A,dataEndIndex:k,updateId:N},R.state))}),R.triggerSyncEvent({dataStartIndex:A,dataEndIndex:k})}}),Nt(R,"handleMouseEnter",function(D){var A=R.getMouseInfo(D);if(A){var k=je(je({},A),{},{isTooltipActive:!0});R.setState(k),R.triggerSyncEvent(k);var N=R.props.onMouseEnter;It(N)&&N(k,D)}}),Nt(R,"triggeredAfterMouseMove",function(D){var A=R.getMouseInfo(D),k=A?je(je({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};R.setState(k),R.triggerSyncEvent(k);var N=R.props.onMouseMove;It(N)&&N(k,D)}),Nt(R,"handleItemMouseEnter",function(D){R.setState(function(){return{isTooltipActive:!0,activeItem:D,activePayload:D.tooltipPayload,activeCoordinate:D.tooltipPosition||{x:D.cx,y:D.cy}}})}),Nt(R,"handleItemMouseLeave",function(){R.setState(function(){return{isTooltipActive:!1}})}),Nt(R,"handleMouseMove",function(D){D.persist(),R.throttleTriggeredAfterMouseMove(D)}),Nt(R,"handleMouseLeave",function(D){R.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};R.setState(A),R.triggerSyncEvent(A);var k=R.props.onMouseLeave;It(k)&&k(A,D)}),Nt(R,"handleOuterEvent",function(D){var A=lue(D),k=ds(R.props,"".concat(A));if(A&&It(k)){var N,U;/.*touch.*/i.test(A)?U=R.getMouseInfo(D.changedTouches[0]):U=R.getMouseInfo(D),k((N=U)!==null&&N!==void 0?N:{},D)}}),Nt(R,"handleClick",function(D){var A=R.getMouseInfo(D);if(A){var k=je(je({},A),{},{isTooltipActive:!0});R.setState(k),R.triggerSyncEvent(k);var N=R.props.onClick;It(N)&&N(k,D)}}),Nt(R,"handleMouseDown",function(D){var A=R.props.onMouseDown;if(It(A)){var k=R.getMouseInfo(D);A(k,D)}}),Nt(R,"handleMouseUp",function(D){var A=R.props.onMouseUp;if(It(A)){var k=R.getMouseInfo(D);A(k,D)}}),Nt(R,"handleTouchMove",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&R.throttleTriggeredAfterMouseMove(D.changedTouches[0])}),Nt(R,"handleTouchStart",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&R.handleMouseDown(D.changedTouches[0])}),Nt(R,"handleTouchEnd",function(D){D.changedTouches!=null&&D.changedTouches.length>0&&R.handleMouseUp(D.changedTouches[0])}),Nt(R,"handleDoubleClick",function(D){var A=R.props.onDoubleClick;if(It(A)){var k=R.getMouseInfo(D);A(k,D)}}),Nt(R,"handleContextMenu",function(D){var A=R.props.onContextMenu;if(It(A)){var k=R.getMouseInfo(D);A(k,D)}}),Nt(R,"triggerSyncEvent",function(D){R.props.syncId!==void 0&&xS.emit(wS,R.props.syncId,D,R.eventEmitterSymbol)}),Nt(R,"applySyncEvent",function(D){var A=R.props,k=A.layout,N=A.syncMethod,U=R.state.updateId,M=D.dataStartIndex,$=D.dataEndIndex;if(D.dataStartIndex!==void 0||D.dataEndIndex!==void 0)R.setState(je({dataStartIndex:M,dataEndIndex:$},b({props:R.props,dataStartIndex:M,dataEndIndex:$,updateId:U},R.state)));else if(D.activeTooltipIndex!==void 0){var z=D.chartX,Q=D.chartY,ee=D.activeTooltipIndex,K=R.state,Z=K.offset,Y=K.tooltipTicks;if(!Z)return;if(typeof N=="function")ee=N(Y,D);else if(N==="value"){ee=-1;for(var ge=0;ge<Y.length;ge++)if(Y[ge].value===D.activeLabel){ee=ge;break}}var ae=je(je({},Z),{},{x:Z.left,y:Z.top}),X=Math.min(z,ae.x+ae.width),J=Math.min(Q,ae.y+ae.height),ce=Y[ee]&&Y[ee].value,Ne=YA(R.state,R.props.data,ee),se=Y[ee]?{x:k==="horizontal"?Y[ee].coordinate:X,y:k==="horizontal"?J:Y[ee].coordinate}:WK;R.setState(je(je({},D),{},{activeLabel:ce,activeCoordinate:se,activePayload:Ne,activeTooltipIndex:ee}))}else R.setState(D)}),Nt(R,"renderCursor",function(D){var A,k=R.state,N=k.isTooltipActive,U=k.activeCoordinate,M=k.activePayload,$=k.offset,z=k.activeTooltipIndex,Q=k.tooltipAxisBandSize,ee=R.getTooltipEventType(),K=(A=D.props.active)!==null&&A!==void 0?A:N,Z=R.props.layout,Y=D.key||"_recharts-cursor";return ne.createElement(L5e,{key:Y,activeCoordinate:U,activePayload:M,activeTooltipIndex:z,chartName:t,element:D,isActive:K,layout:Z,offset:$,tooltipAxisBandSize:Q,tooltipEventType:ee})}),Nt(R,"renderPolarAxis",function(D,A,k){var N=ds(D,"type.axisType"),U=ds(R.state,"".concat(N,"Map")),M=D.type.defaultProps,$=M!==void 0?je(je({},M),D.props):D.props,z=U&&U[$["".concat(N,"Id")]];return F.cloneElement(D,je(je({},z),{},{className:zt(N,z.className),key:D.key||"".concat(A,"-").concat(k),ticks:dl(z,!0)}))}),Nt(R,"renderPolarGrid",function(D){var A=D.props,k=A.radialLines,N=A.polarAngles,U=A.polarRadius,M=R.state,$=M.radiusAxisMap,z=M.angleAxisMap,Q=kc($),ee=kc(z),K=ee.cx,Z=ee.cy,Y=ee.innerRadius,ge=ee.outerRadius;return F.cloneElement(D,{polarAngles:Array.isArray(N)?N:dl(ee,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(U)?U:dl(Q,!0).map(function(ae){return ae.coordinate}),cx:K,cy:Z,innerRadius:Y,outerRadius:ge,key:D.key||"polar-grid",radialLines:k})}),Nt(R,"renderLegend",function(){var D=R.state.formattedGraphicalItems,A=R.props,k=A.children,N=A.width,U=A.height,M=R.props.margin||{},$=N-(M.left||0)-(M.right||0),z=EG({children:k,formattedGraphicalItems:D,legendWidth:$,legendContent:f});if(!z)return null;var Q=z.item,ee=SU(z,B5e);return F.cloneElement(Q,je(je({},ee),{},{chartWidth:N,chartHeight:U,margin:M,onBBoxUpdate:R.handleLegendBBoxUpdate}))}),Nt(R,"renderTooltip",function(){var D,A=R.props,k=A.children,N=A.accessibilityLayer,U=Ma(k,ao);if(!U)return null;var M=R.state,$=M.isTooltipActive,z=M.activeCoordinate,Q=M.activePayload,ee=M.activeLabel,K=M.offset,Z=(D=U.props.active)!==null&&D!==void 0?D:$;return F.cloneElement(U,{viewBox:je(je({},K),{},{x:K.left,y:K.top}),active:Z,label:ee,payload:Z?Q:[],coordinate:z,accessibilityLayer:N})}),Nt(R,"renderBrush",function(D){var A=R.props,k=A.margin,N=A.data,U=R.state,M=U.offset,$=U.dataStartIndex,z=U.dataEndIndex,Q=U.updateId;return F.cloneElement(D,{key:D.key||"_recharts-brush",onChange:zy(R.handleBrushChange,D.props.onChange),data:N,x:et(D.props.x)?D.props.x:M.left,y:et(D.props.y)?D.props.y:M.top+M.height+M.brushBottom-(k.bottom||0),width:et(D.props.width)?D.props.width:M.width,startIndex:$,endIndex:z,updateId:"brush-".concat(Q)})}),Nt(R,"renderReferenceElement",function(D,A,k){if(!D)return null;var N=R,U=N.clipPathId,M=R.state,$=M.xAxisMap,z=M.yAxisMap,Q=M.offset,ee=D.type.defaultProps||{},K=D.props,Z=K.xAxisId,Y=Z===void 0?ee.xAxisId:Z,ge=K.yAxisId,ae=ge===void 0?ee.yAxisId:ge;return F.cloneElement(D,{key:D.key||"".concat(A,"-").concat(k),xAxis:$[Y],yAxis:z[ae],viewBox:{x:Q.left,y:Q.top,width:Q.width,height:Q.height},clipPathId:U})}),Nt(R,"renderActivePoints",function(D){var A=D.item,k=D.activePoint,N=D.basePoint,U=D.childIndex,M=D.isRange,$=[],z=A.props.key,Q=A.item.type.defaultProps!==void 0?je(je({},A.item.type.defaultProps),A.item.props):A.item.props,ee=Q.activeDot,K=Q.dataKey,Z=je(je({index:U,dataKey:K,cx:k.x,cy:k.y,r:4,fill:VE(A.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},wt(ee,!1)),Xv(ee));return $.push(E.renderActiveDot(ee,Z,"".concat(z,"-activePoint-").concat(U))),N?$.push(E.renderActiveDot(ee,je(je({},Z),{},{cx:N.x,cy:N.y}),"".concat(z,"-basePoint-").concat(U))):M&&$.push(null),$}),Nt(R,"renderGraphicChild",function(D,A,k){var N=R.filterFormatItem(D,A,k);if(!N)return null;var U=R.getTooltipEventType(),M=R.state,$=M.isTooltipActive,z=M.tooltipAxis,Q=M.activeTooltipIndex,ee=M.activeLabel,K=R.props.children,Z=Ma(K,ao),Y=N.props,ge=Y.points,ae=Y.isRange,X=Y.baseLine,J=N.item.type.defaultProps!==void 0?je(je({},N.item.type.defaultProps),N.item.props):N.item.props,ce=J.activeDot,Ne=J.hide,se=J.activeBar,ke=J.activeShape,Me=!!(!Ne&&$&&Z&&(ce||se||ke)),ot={};U!=="axis"&&Z&&Z.props.trigger==="click"?ot={onClick:zy(R.handleItemMouseEnter,D.props.onClick)}:U!=="axis"&&(ot={onMouseLeave:zy(R.handleItemMouseLeave,D.props.onMouseLeave),onMouseEnter:zy(R.handleItemMouseEnter,D.props.onMouseEnter)});var Ee=F.cloneElement(D,je(je({},N.props),ot));function He(vt){return typeof z.dataKey=="function"?z.dataKey(vt.payload):null}if(Me)if(Q>=0){var he,pe;if(z.dataKey&&!z.allowDuplicatedCategory){var Ye=typeof z.dataKey=="function"?He:"payload.".concat(z.dataKey.toString());he=Wv(ge,Ye,ee),pe=ae&&X&&Wv(X,Ye,ee)}else he=ge==null?void 0:ge[Q],pe=ae&&X&&X[Q];if(ke||se){var Ke=D.props.activeIndex!==void 0?D.props.activeIndex:Q;return[F.cloneElement(D,je(je(je({},N.props),ot),{},{activeIndex:Ke})),null,null]}if(!Lt(he))return[Ee].concat(Hh(R.renderActivePoints({item:N,activePoint:he,basePoint:pe,childIndex:Q,isRange:ae})))}else{var at,tt=(at=R.getItemByXY(R.state.activeCoordinate))!==null&&at!==void 0?at:{graphicalItem:Ee},Gt=tt.graphicalItem,Ie=Gt.item,de=Ie===void 0?D:Ie,qe=Gt.childIndex,nt=je(je(je({},N.props),ot),{},{activeIndex:qe});return[F.cloneElement(de,nt),null,null]}return ae?[Ee,null,null]:[Ee,null]}),Nt(R,"renderCustomized",function(D,A,k){return F.cloneElement(D,je(je({key:"recharts-customized-".concat(k)},R.props),R.state))}),Nt(R,"renderMap",{CartesianGrid:{handler:Hy,once:!0},ReferenceArea:{handler:R.renderReferenceElement},ReferenceLine:{handler:Hy},ReferenceDot:{handler:R.renderReferenceElement},XAxis:{handler:Hy},YAxis:{handler:Hy},Brush:{handler:R.renderBrush,once:!0},Bar:{handler:R.renderGraphicChild},Line:{handler:R.renderGraphicChild},Area:{handler:R.renderGraphicChild},Radar:{handler:R.renderGraphicChild},RadialBar:{handler:R.renderGraphicChild},Scatter:{handler:R.renderGraphicChild},Pie:{handler:R.renderGraphicChild},Funnel:{handler:R.renderGraphicChild},Tooltip:{handler:R.renderCursor,once:!0},PolarGrid:{handler:R.renderPolarGrid,once:!0},PolarAngleAxis:{handler:R.renderPolarAxis},PolarRadiusAxis:{handler:R.renderPolarAxis},Customized:{handler:R.renderCustomized}}),R.clipPathId="".concat((C=I.id)!==null&&C!==void 0?C:Ig("recharts"),"-clip"),R.throttleTriggeredAfterMouseMove=AH(R.triggeredAfterMouseMove,(B=I.throttleDelay)!==null&&B!==void 0?B:1e3/60),R.state={},R}return Q5e(E,w),G5e(E,[{key:"componentDidMount",value:function(){var C,B;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(C=this.props.margin.left)!==null&&C!==void 0?C:0,top:(B=this.props.margin.top)!==null&&B!==void 0?B:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var C=this.props,B=C.children,R=C.data,D=C.height,A=C.layout,k=Ma(B,ao);if(k){var N=k.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var U=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,M=YA(this.state,R,N,U),$=this.state.tooltipTicks[N].coordinate,z=(this.state.offset.top+D)/2,Q=A==="horizontal",ee=Q?{x:$,y:z}:{y:$,x:z},K=this.state.formattedGraphicalItems.find(function(Y){var ge=Y.item;return ge.type.name==="Scatter"});K&&(ee=je(je({},ee),K.props.points[N].tooltipPosition),M=K.props.points[N].tooltipPayload);var Z={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:U,activePayload:M,activeCoordinate:ee};this.setState(Z),this.renderCursor(k),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(C,B){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==B.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==C.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==C.margin){var R,D;this.accessibilityManager.setDetails({offset:{left:(R=this.props.margin.left)!==null&&R!==void 0?R:0,top:(D=this.props.margin.top)!==null&&D!==void 0?D:0}})}return null}},{key:"componentDidUpdate",value:function(C){jT([Ma(C.children,ao)],[Ma(this.props.children,ao)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var C=Ma(this.props.children,ao);if(C&&typeof C.props.shared=="boolean"){var B=C.props.shared?"axis":"item";return c.indexOf(B)>=0?B:a}return a}},{key:"getMouseInfo",value:function(C){if(!this.container)return null;var B=this.container,R=B.getBoundingClientRect(),D=Xhe(R),A={chartX:Math.round(C.pageX-D.left),chartY:Math.round(C.pageY-D.top)},k=R.width/B.offsetWidth||1,N=this.inRange(A.chartX,A.chartY,k);if(!N)return null;var U=this.state,M=U.xAxisMap,$=U.yAxisMap,z=this.getTooltipEventType(),Q=AU(this.state,this.props.data,this.props.layout,N);if(z!=="axis"&&M&&$){var ee=kc(M).scale,K=kc($).scale,Z=ee&&ee.invert?ee.invert(A.chartX):null,Y=K&&K.invert?K.invert(A.chartY):null;return je(je({},A),{},{xValue:Z,yValue:Y},Q)}return Q?je(je({},A),Q):null}},{key:"inRange",value:function(C,B){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=this.props.layout,A=C/R,k=B/R;if(D==="horizontal"||D==="vertical"){var N=this.state.offset,U=A>=N.left&&A<=N.left+N.width&&k>=N.top&&k<=N.top+N.height;return U?{x:A,y:k}:null}var M=this.state,$=M.angleAxisMap,z=M.radiusAxisMap;if($&&z){var Q=kc($);return OL({x:A,y:k},Q)}return null}},{key:"parseEventsOfWrapper",value:function(){var C=this.props.children,B=this.getTooltipEventType(),R=Ma(C,ao),D={};R&&B==="axis"&&(R.props.trigger==="click"?D={onClick:this.handleClick}:D={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=Xv(this.props,this.handleOuterEvent);return je(je({},A),D)}},{key:"addListener",value:function(){xS.on(wS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xS.removeListener(wS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(C,B,R){for(var D=this.state.formattedGraphicalItems,A=0,k=D.length;A<k;A++){var N=D[A];if(N.item===C||N.props.key===C.key||B===pl(N.item.type)&&R===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var C=this.clipPathId,B=this.state.offset,R=B.left,D=B.top,A=B.height,k=B.width;return ne.createElement("defs",null,ne.createElement("clipPath",{id:C},ne.createElement("rect",{x:R,y:D,height:A,width:k})))}},{key:"getXScales",value:function(){var C=this.state.xAxisMap;return C?Object.entries(C).reduce(function(B,R){var D=_U(R,2),A=D[0],k=D[1];return je(je({},B),{},Nt({},A,k.scale))},{}):null}},{key:"getYScales",value:function(){var C=this.state.yAxisMap;return C?Object.entries(C).reduce(function(B,R){var D=_U(R,2),A=D[0],k=D[1];return je(je({},B),{},Nt({},A,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(C){var B;return(B=this.state.xAxisMap)===null||B===void 0||(B=B[C])===null||B===void 0?void 0:B.scale}},{key:"getYScaleByAxisId",value:function(C){var B;return(B=this.state.yAxisMap)===null||B===void 0||(B=B[C])===null||B===void 0?void 0:B.scale}},{key:"getItemByXY",value:function(C){var B=this.state,R=B.formattedGraphicalItems,D=B.activeItem;if(R&&R.length)for(var A=0,k=R.length;A<k;A++){var N=R[A],U=N.props,M=N.item,$=M.type.defaultProps!==void 0?je(je({},M.type.defaultProps),M.props):M.props,z=pl(M.type);if(z==="Bar"){var Q=(U.data||[]).find(function(Y){return gbe(C,Y)});if(Q)return{graphicalItem:N,payload:Q}}else if(z==="RadialBar"){var ee=(U.data||[]).find(function(Y){return OL(C,Y)});if(ee)return{graphicalItem:N,payload:ee}}else if(h2(N,D)||f2(N,D)||tg(N,D)){var K=Xxe({graphicalItem:N,activeTooltipItem:D,itemData:$.data}),Z=$.activeIndex===void 0?K:$.activeIndex;return{graphicalItem:je(je({},N),{},{childIndex:Z}),payload:tg(N,D)?$.data[K]:N.props.data[K]}}}return null}},{key:"render",value:function(){var C=this;if(!UR(this))return null;var B=this.props,R=B.children,D=B.className,A=B.width,k=B.height,N=B.style,U=B.compact,M=B.title,$=B.desc,z=SU(B,U5e),Q=wt(z,!1);if(U)return ne.createElement(iU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement(RT,qd({},Q,{width:A,height:k,title:M,desc:$}),this.renderClipPath(),VR(R,this.renderMap)));if(this.props.accessibilityLayer){var ee,K;Q.tabIndex=(ee=this.props.tabIndex)!==null&&ee!==void 0?ee:0,Q.role=(K=this.props.role)!==null&&K!==void 0?K:"application",Q.onKeyDown=function(Y){C.accessibilityManager.keyboardEvent(Y)},Q.onFocus=function(){C.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return ne.createElement(iU,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ne.createElement("div",qd({className:zt("recharts-wrapper",D),style:je({position:"relative",cursor:"default",width:A,height:k},N)},Z,{ref:function(ge){C.container=ge}}),ne.createElement(RT,qd({},Q,{width:A,height:k,title:M,desc:$,style:r3e}),this.renderClipPath(),VR(R,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(F.Component);Nt(T,"displayName",t),Nt(T,"defaultProps",je({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},p)),Nt(T,"getDerivedStateFromProps",function(w,E){var I=w.dataKey,C=w.data,B=w.children,R=w.width,D=w.height,A=w.layout,k=w.stackOffset,N=w.margin,U=E.dataStartIndex,M=E.dataEndIndex;if(E.updateId===void 0){var $=EU(w);return je(je(je({},$),{},{updateId:0},b(je(je({props:w},$),{},{updateId:0}),E)),{},{prevDataKey:I,prevData:C,prevWidth:R,prevHeight:D,prevLayout:A,prevStackOffset:k,prevMargin:N,prevChildren:B})}if(I!==E.prevDataKey||C!==E.prevData||R!==E.prevWidth||D!==E.prevHeight||A!==E.prevLayout||k!==E.prevStackOffset||!Zd(N,E.prevMargin)){var z=EU(w),Q={chartX:E.chartX,chartY:E.chartY,isTooltipActive:E.isTooltipActive},ee=je(je({},AU(E,C,A)),{},{updateId:E.updateId+1}),K=je(je(je({},z),Q),ee);return je(je(je({},K),b(je({props:w},K),E)),{},{prevDataKey:I,prevData:C,prevWidth:R,prevHeight:D,prevLayout:A,prevStackOffset:k,prevMargin:N,prevChildren:B})}if(!jT(B,E.prevChildren)){var Z,Y,ge,ae,X=Ma(B,Mh),J=X&&(Z=(Y=X.props)===null||Y===void 0?void 0:Y.startIndex)!==null&&Z!==void 0?Z:U,ce=X&&(ge=(ae=X.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&ge!==void 0?ge:M,Ne=J!==U||ce!==M,se=!Lt(C),ke=se&&!Ne?E.updateId:E.updateId+1;return je(je({updateId:ke},b(je(je({props:w},E),{},{updateId:ke,dataStartIndex:J,dataEndIndex:ce}),E)),{},{prevChildren:B,dataStartIndex:J,dataEndIndex:ce})}return null}),Nt(T,"renderActiveDot",function(w,E,I){var C;return F.isValidElement(w)?C=F.cloneElement(w,E):It(w)?C=w(E):C=ne.createElement(c2,E),ne.createElement(ur,{className:"recharts-active-dot",key:I},C)});var S=F.forwardRef(function(E,I){return ne.createElement(T,qd({},E,{ref:I}))});return S.displayName=T.displayName,S},h3e=QK({chartName:"RadarChart",GraphicalChild:$g,axisComponents:[{axisType:"angleAxis",AxisComp:Vg},{axisType:"radiusAxis",AxisComp:zg}],formatAxisMap:O1e,defaultProps:{layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),f3e=QK({chartName:"ScatterChart",GraphicalChild:qg,defaultTooltipEventType:"item",validateTooltipEventTypes:["item"],axisComponents:[{axisType:"xAxis",AxisComp:x2},{axisType:"yAxis",AxisComp:w2},{axisType:"zAxis",AxisComp:b2}],formatAxisMap:a4e});function OU(r,e=800){const[t,n]=F.useState(r),i=F.useRef(r),a=F.useRef(0);return F.useEffect(()=>{const s=i.current,c=r;if(i.current=r,s===c)return;const d=performance.now(),f=c-s,m=p=>{const y=p-d,b=Math.min(y/e,1),T=1-Math.pow(1-b,3);n(Math.round(s+f*T)),b<1&&(a.current=requestAnimationFrame(m))};return a.current=requestAnimationFrame(m),()=>cancelAnimationFrame(a.current)},[r,e]),t}const kU={COMMON:{primary:"#64748b",glow:"rgba(100,116,139,0.4)",particle:"#94a3b8"},UNCOMMON:{primary:"#22c55e",glow:"rgba(34,197,94,0.5)",particle:"#4ade80"},RARE:{primary:"#3b82f6",glow:"rgba(59,130,246,0.6)",particle:"#60a5fa"},UNIQUE:{primary:"#f59e0b",glow:"rgba(245,158,11,0.7)",particle:"#fbbf24"}},Md=r=>r?kU[r.rarity]||kU.COMMON:null,Xb=({equipped:r,appearance:e,evolutionLevel:t=1,activeCosmetic:n,cosmeticColor:i})=>{const a=(e==null?void 0:e.hue)||0,s=(e==null?void 0:e.bodyType)==="B",c=r==null?void 0:r.HEAD,d=r==null?void 0:r.CHEST,f=r==null?void 0:r.HANDS,m=r==null?void 0:r.FEET,p=r==null?void 0:r.BELT,y=r==null?void 0:r.AMULET,b=F.useMemo(()=>[c,d,f,m,p,y].filter(Boolean).length,[c,d,f,m,p,y]),T=F.useMemo(()=>[c,d,f,m,p,y].some(w=>(w==null?void 0:w.rarity)==="UNIQUE"),[c,d,f,m,p,y]),S=Math.min(1,.3+b*.12);return u.jsxs("svg",{viewBox:"0 0 200 340",className:"w-full h-full",style:{filter:"drop-shadow(0 0 20px rgba(147,51,234,0.15))"},children:[u.jsxs("defs",{children:[u.jsxs("filter",{id:"av-glow",x:"-30%",y:"-30%",width:"160%",height:"160%",children:[u.jsx("feGaussianBlur",{stdDeviation:"4",result:"blur"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),u.jsxs("filter",{id:"av-soft",x:"-10%",y:"-10%",width:"120%",height:"120%",children:[u.jsx("feGaussianBlur",{stdDeviation:"2",result:"blur"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),u.jsxs("filter",{id:"av-bloom",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[u.jsx("feGaussianBlur",{stdDeviation:"8",result:"blur"}),u.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]}),u.jsxs("linearGradient",{id:"av-suit",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+240}, 30%, 22%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+240}, 25%, 12%)`})]}),u.jsxs("linearGradient",{id:"av-suit-highlight",x1:"0",y1:"0",x2:"1",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:`hsla(${a+240}, 40%, 40%, 0.3)`}),u.jsx("stop",{offset:"100%",stopColor:"transparent"})]}),u.jsxs("radialGradient",{id:"av-core-energy",cx:"50%",cy:"50%",r:"50%",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 100%, 70%)`,stopOpacity:S}),u.jsx("stop",{offset:"60%",stopColor:`hsl(${a+200}, 80%, 50%)`,stopOpacity:S*.4}),u.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),u.jsxs("linearGradient",{id:"av-visor",x1:"0",y1:"0",x2:"1",y2:"0",children:[u.jsx("stop",{offset:"0%",stopColor:`hsl(${a+180}, 90%, 55%)`}),u.jsx("stop",{offset:"100%",stopColor:`hsl(${a+200}, 80%, 45%)`})]})]}),u.jsx("ellipse",{cx:"100",cy:"328",rx:"45",ry:"6",fill:"rgba(0,0,0,0.4)",children:u.jsx("animate",{attributeName:"rx",values:"45;42;45",dur:"3.5s",repeatCount:"indefinite"})}),u.jsxs("g",{id:"av-body",children:[u.jsx("animateTransform",{attributeName:"transform",type:"translate",values:"0,0; 0,-1.5; 0,0",dur:"3.5s",repeatCount:"indefinite"}),u.jsxs("g",{children:[u.jsx("path",{d:s?"M79 200 L77 272 Q77 280 82 280 L90 280 Q94 280 94 276 L92 200":"M78 200 L75 270 Q75 280 82 280 L92 280 Q97 280 96 275 L93 200",fill:"url(#av-suit)",stroke:`hsl(${a+240}, 30%, 30%)`,strokeWidth:"1"}),u.jsx("path",{d:s?"M108 200 L106 272 Q106 280 111 280 L119 280 Q123 280 123 276 L121 200":"M107 200 L104 270 Q104 280 111 280 L121 280 Q126 280 125 275 L122 200",fill:"url(#av-suit)",stroke:`hsl(${a+240}, 30%, 30%)`,strokeWidth:"1"}),u.jsx("ellipse",{cx:"85",cy:"235",rx:"6",ry:"3",fill:`hsla(${a+180}, 60%, 50%, 0.15)`}),u.jsx("ellipse",{cx:"115",cy:"235",rx:"6",ry:"3",fill:`hsla(${a+180}, 60%, 50%, 0.15)`})]}),m&&(()=>{const w=Md(m);return u.jsxs("g",{filter:"url(#av-soft)",children:[u.jsx("path",{d:"M74 268 L72 280 Q70 290 80 290 L92 290 Q98 290 96 282 L94 268",fill:w.primary,stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.4"}),u.jsx("path",{d:"M104 268 L102 280 Q100 290 110 290 L122 290 Q128 290 126 282 L124 268",fill:w.primary,stroke:"white",strokeWidth:"0.5",strokeOpacity:"0.4"}),u.jsx("line",{x1:"78",y1:"278",x2:"92",y2:"278",stroke:w.particle,strokeWidth:"1",strokeOpacity:"0.6"}),u.jsx("line",{x1:"108",y1:"278",x2:"122",y2:"278",stroke:w.particle,strokeWidth:"1",strokeOpacity:"0.6"})]})})(),u.jsx("path",{d:s?"M66 90 Q100 85 134 90 L128 200 Q100 205 72 200 Z":"M68 90 Q100 82 132 90 L126 200 Q100 206 74 200 Z",fill:"url(#av-suit)",stroke:`hsl(${a+240}, 25%, 28%)`,strokeWidth:"1.5"}),u.jsx("path",{d:s?"M66 90 Q100 85 100 90 L100 200 Q86 202 72 200 Z":"M68 90 Q100 82 100 90 L100 200 Q86 204 74 200 Z",fill:"url(#av-suit-highlight)"}),u.jsx("line",{x1:"100",y1:"92",x2:"100",y2:"195",stroke:`hsla(${a+180}, 40%, 50%, 0.1)`,strokeWidth:"0.5"}),u.jsx("line",{x1:"82",y1:"100",x2:"82",y2:"190",stroke:`hsla(${a+180}, 40%, 50%, 0.06)`,strokeWidth:"0.5"}),u.jsx("line",{x1:"118",y1:"100",x2:"118",y2:"190",stroke:`hsla(${a+180}, 40%, 50%, 0.06)`,strokeWidth:"0.5"}),d&&(()=>{const w=Md(d);return u.jsxs("g",{filter:"url(#av-soft)",children:[u.jsx("path",{d:s?"M72 95 Q100 90 128 95 L125 170 Q100 175 75 170 Z":"M74 95 Q100 88 126 95 L123 170 Q100 176 77 170 Z",fill:w.primary,fillOpacity:"0.35",stroke:w.primary,strokeWidth:"1",strokeOpacity:"0.6"}),u.jsx("path",{d:"M80 110 L120 110",stroke:w.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),u.jsx("path",{d:"M82 130 L118 130",stroke:w.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),u.jsx("path",{d:"M84 150 L116 150",stroke:w.particle,strokeWidth:"0.8",strokeOpacity:"0.3"}),u.jsx("circle",{cx:"100",cy:"120",r:"6",fill:"none",stroke:w.primary,strokeWidth:"1.5",strokeOpacity:"0.7"}),u.jsx("circle",{cx:"100",cy:"120",r:"2",fill:w.particle,fillOpacity:"0.8",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.4;0.8",dur:"2s",repeatCount:"indefinite"})})]})})(),p&&(()=>{const w=Md(p);return u.jsxs("g",{filter:"url(#av-soft)",children:[u.jsx("rect",{x:"72",y:"188",width:"56",height:"12",rx:"3",fill:w.primary,fillOpacity:"0.6",stroke:w.primary,strokeWidth:"0.8"}),u.jsx("rect",{x:"94",y:"189",width:"12",height:"10",rx:"2",fill:w.particle,fillOpacity:"0.5"}),u.jsx("circle",{cx:"82",cy:"194",r:"3",fill:w.primary,stroke:w.particle,strokeWidth:"0.5"}),u.jsx("circle",{cx:"118",cy:"194",r:"3",fill:w.primary,stroke:w.particle,strokeWidth:"0.5"})]})})(),u.jsxs("g",{children:[u.jsx("path",{d:s?"M66 92 L48 95 Q42 96 42 102 L42 160 Q42 166 48 167 L56 168 L66 160 L66 92":"M68 92 L52 95 Q45 97 44 103 L42 158 Q42 165 48 167 L58 168 L68 160 L68 92",fill:"url(#av-suit)",stroke:`hsl(${a+240}, 30%, 30%)`,strokeWidth:"1"}),u.jsx("path",{d:s?"M134 92 L152 95 Q158 96 158 102 L158 160 Q158 166 152 167 L144 168 L134 160 L134 92":"M132 92 L148 95 Q155 97 156 103 L158 158 Q158 165 152 167 L142 168 L132 160 L132 92",fill:"url(#av-suit)",stroke:`hsl(${a+240}, 30%, 30%)`,strokeWidth:"1"}),u.jsx("ellipse",{cx:"62",cy:"94",rx:"10",ry:"6",fill:`hsl(${a+240}, 28%, 20%)`,stroke:`hsla(${a+180}, 50%, 50%, 0.2)`,strokeWidth:"1"}),u.jsx("ellipse",{cx:"138",cy:"94",rx:"10",ry:"6",fill:`hsl(${a+240}, 28%, 20%)`,stroke:`hsla(${a+180}, 50%, 50%, 0.2)`,strokeWidth:"1"})]}),f&&(()=>{const w=Md(f);return u.jsxs("g",{filter:"url(#av-soft)",children:[u.jsx("path",{d:"M40 148 L40 170 Q40 175 46 175 L58 175 Q62 175 62 170 L62 148",fill:w.primary,fillOpacity:"0.5",stroke:w.primary,strokeWidth:"1",strokeOpacity:"0.7"}),u.jsx("path",{d:"M138 148 L138 170 Q138 175 144 175 L156 175 Q160 175 160 170 L160 148",fill:w.primary,fillOpacity:"0.5",stroke:w.primary,strokeWidth:"1",strokeOpacity:"0.7"}),u.jsx("circle",{cx:"48",cy:"170",r:"2",fill:w.particle,fillOpacity:"0.7",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.7;0.3;0.7",dur:"1.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"152",cy:"170",r:"2",fill:w.particle,fillOpacity:"0.7",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.7;0.3",dur:"1.5s",repeatCount:"indefinite"})})]})})(),u.jsx("g",{filter:"url(#av-bloom)",children:u.jsx("circle",{cx:"100",cy:"130",r:"8",fill:"url(#av-core-energy)",children:u.jsx("animate",{attributeName:"r",values:"8;10;8",dur:"3s",repeatCount:"indefinite"})})}),u.jsx("circle",{cx:"100",cy:"130",r:"3",fill:`hsl(${a+180}, 100%, 75%)`,fillOpacity:S*.8,children:u.jsx("animate",{attributeName:"fillOpacity",values:`${S*.8};${S*.4};${S*.8}`,dur:"2s",repeatCount:"indefinite"})}),u.jsx("rect",{x:"92",y:"74",width:"16",height:"18",rx:"4",fill:`hsl(${a+240}, 25%, 18%)`}),u.jsxs("g",{children:[u.jsx("ellipse",{cx:"100",cy:"52",rx:s?22:20,ry:"28",fill:`hsl(${a+240}, 22%, 24%)`,stroke:`hsl(${a+240}, 20%, 30%)`,strokeWidth:"1.5"}),u.jsx("ellipse",{cx:"100",cy:"55",rx:"15",ry:"16",fill:`hsl(${a+240}, 18%, 15%)`}),!c&&u.jsxs("g",{children:[u.jsx("ellipse",{cx:"91",cy:"50",rx:"5",ry:"3",fill:`hsl(${a+180}, 80%, 60%)`,fillOpacity:"0.8",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.6;0.8",dur:"4s",repeatCount:"indefinite"})}),u.jsx("ellipse",{cx:"109",cy:"50",rx:"5",ry:"3",fill:`hsl(${a+180}, 80%, 60%)`,fillOpacity:"0.8",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.8;0.6;0.8",dur:"4s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"93",y1:"64",x2:"107",y2:"64",stroke:`hsla(${a+180}, 40%, 50%, 0.2)`,strokeWidth:"1",strokeLinecap:"round"})]})]}),c&&(()=>{const w=Md(c),E=c.visualId||"";return u.jsx("g",{filter:"url(#av-glow)",children:E.includes("helm")?u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M76 25 Q100 8 124 25 L126 65 Q100 75 74 65 Z",fill:w.primary,fillOpacity:"0.5",stroke:w.primary,strokeWidth:"1.5"}),u.jsx("rect",{x:"80",y:"45",width:"40",height:"8",rx:"4",fill:"url(#av-visor)",fillOpacity:"0.9",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.9;0.6;0.9",dur:"3s",repeatCount:"indefinite"})})]}):E.includes("visor")?u.jsx("rect",{x:"78",y:"44",width:"44",height:"12",rx:"6",fill:"url(#av-visor)",fillOpacity:"0.85",stroke:w.primary,strokeWidth:"1",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.85;0.55;0.85",dur:"2.5s",repeatCount:"indefinite"})}):u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"89",cy:"48",r:"9",fill:"none",stroke:w.primary,strokeWidth:"2"}),u.jsx("circle",{cx:"111",cy:"48",r:"9",fill:"none",stroke:w.primary,strokeWidth:"2"}),u.jsx("circle",{cx:"89",cy:"48",r:"6",fill:w.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0.3;0.5",dur:"2s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"111",cy:"48",r:"6",fill:w.particle,fillOpacity:"0.5",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.3;0.5;0.3",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"98",y1:"48",x2:"102",y2:"48",stroke:w.primary,strokeWidth:"2"})]})})})(),y&&(()=>{const w=Md(y);return u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("path",{d:"M90 78 Q100 100 110 78",stroke:w.particle,strokeWidth:"0.8",fill:"none",strokeOpacity:"0.5"}),u.jsx("polygon",{points:"100,92 94,100 100,106 106,100",fill:w.primary,stroke:w.particle,strokeWidth:"1",children:u.jsx("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("circle",{cx:"100",cy:"99",r:"2.5",fill:w.particle,children:u.jsx("animate",{attributeName:"r",values:"2.5;3;2.5",dur:"2s",repeatCount:"indefinite"})})]})})(),T&&u.jsx("g",{filter:"url(#av-bloom)",children:[0,60,120,180,240,300].map((w,E)=>{const I=w*Math.PI/180,C=100+Math.cos(I)*55,B=150+Math.sin(I)*80;return u.jsxs("circle",{cx:C,cy:B,r:"1.5",fill:"#fbbf24",fillOpacity:"0.6",children:[u.jsx("animate",{attributeName:"cy",values:`${B};${B-20};${B}`,dur:`${2+E*.3}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0;0.6",dur:`${2+E*.3}s`,repeatCount:"indefinite"})]},E)})}),b>=3&&u.jsxs("g",{children:[u.jsx("line",{x1:"100",y1:"92",x2:"100",y2:"195",stroke:`hsl(${a+180}, 80%, 55%)`,strokeWidth:"0.6",strokeOpacity:"0.2",strokeDasharray:"4 6",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-20",dur:"2s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"62",y1:"94",x2:"48",y2:"165",stroke:`hsl(${a+180}, 80%, 55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"1.8s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"138",y1:"94",x2:"152",y2:"165",stroke:`hsl(${a+180}, 80%, 55%)`,strokeWidth:"0.5",strokeOpacity:"0.15",strokeDasharray:"3 5",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-16",dur:"1.8s",repeatCount:"indefinite"})})]}),t>=15&&u.jsxs("g",{filter:"url(#av-glow)",children:[u.jsx("ellipse",{cx:"100",cy:"24",rx:"18",ry:"4",fill:"none",stroke:t>=50?"#fbbf24":t>=30?"#a78bfa":"#60a5fa",strokeWidth:"1.5",strokeOpacity:"0.7",children:u.jsx("animate",{attributeName:"strokeOpacity",values:"0.7;0.4;0.7",dur:"2s",repeatCount:"indefinite"})}),t>=30&&u.jsx("ellipse",{cx:"100",cy:"20",rx:"22",ry:"5",fill:"none",stroke:t>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.8",strokeOpacity:"0.4",strokeDasharray:"3 3",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"3s",repeatCount:"indefinite"})}),t>=50&&u.jsx("g",{children:[-12,0,12].map((w,E)=>u.jsx("polygon",{points:`${100+w},18 ${97+w},24 ${103+w},24`,fill:"#fbbf24",fillOpacity:"0.6",children:u.jsx("animate",{attributeName:"fillOpacity",values:"0.6;0.3;0.6",dur:`${1.5+E*.2}s`,repeatCount:"indefinite"})},E))})]}),t>=30&&u.jsxs("g",{filter:"url(#av-bloom)",children:[u.jsx("path",{d:t>=50?"M60 100 Q20 60 30 30 Q40 50 55 70 Q35 60 25 40 Q38 55 55 80 Z":"M62 110 Q35 80 42 55 Q48 70 58 85 Z",fill:t>=50?"rgba(251,191,36,0.15)":"rgba(139,92,246,0.12)",stroke:t>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.8;0.5;0.8",dur:"3s",repeatCount:"indefinite"})}),u.jsx("path",{d:t>=50?"M140 100 Q180 60 170 30 Q160 50 145 70 Q165 60 175 40 Q162 55 145 80 Z":"M138 110 Q165 80 158 55 Q152 70 142 85 Z",fill:t>=50?"rgba(251,191,36,0.15)":"rgba(139,92,246,0.12)",stroke:t>=50?"#fbbf24":"#a78bfa",strokeWidth:"0.5",strokeOpacity:"0.4",children:u.jsx("animate",{attributeName:"opacity",values:"0.5;0.8;0.5",dur:"3s",repeatCount:"indefinite"})})]}),t>=5&&u.jsxs("g",{children:[u.jsx("line",{x1:"56",y1:"92",x2:"48",y2:"98",stroke:`hsl(${a+180}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:.15+t*.005}),u.jsx("line",{x1:"144",y1:"92",x2:"152",y2:"98",stroke:`hsl(${a+180}, 70%, 50%)`,strokeWidth:"1",strokeOpacity:.15+t*.005}),t>=15&&u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"85",y1:"105",x2:"80",y2:"180",stroke:`hsl(${a+180}, 60%, 50%)`,strokeWidth:"0.4",strokeOpacity:"0.15",strokeDasharray:"2 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"2.5s",repeatCount:"indefinite"})}),u.jsx("line",{x1:"115",y1:"105",x2:"120",y2:"180",stroke:`hsl(${a+180}, 60%, 50%)`,strokeWidth:"0.4",strokeOpacity:"0.15",strokeDasharray:"2 4",children:u.jsx("animate",{attributeName:"strokeDashoffset",values:"0;-12",dur:"2.5s",repeatCount:"indefinite"})})]})]}),t>=5&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:Math.min(10,Math.floor(t/5))}).map((w,E)=>{const I=E*360/Math.min(10,Math.floor(t/5))*(Math.PI/180),C=100+Math.cos(I)*(40+E*3),B=140+Math.sin(I)*(60+E*2),R=t>=50?"#fbbf24":t>=30?"#a78bfa":t>=15?"#60a5fa":`hsl(${a+180}, 70%, 60%)`;return u.jsxs("circle",{cx:C,cy:B,r:"1",fill:R,fillOpacity:"0.4",children:[u.jsx("animate",{attributeName:"cy",values:`${B};${B-15};${B}`,dur:`${2+E*.4}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.4;0;0.4",dur:`${2+E*.4}s`,repeatCount:"indefinite"})]},E)})}),n&&i&&u.jsx("g",{filter:"url(#av-soft)",children:Array.from({length:8}).map((w,E)=>{const I=60+Math.random()*80,C=20+Math.random()*260;return u.jsxs("circle",{cx:I,cy:C,r:1+Math.random(),fill:i,fillOpacity:"0.5",children:[u.jsx("animate",{attributeName:"cy",values:`${C};${C-30};${C}`,dur:`${3+E*.5}s`,repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"fillOpacity",values:"0.5;0;0.5",dur:`${3+E*.5}s`,repeatCount:"indefinite"})]},`cosmetic-${E}`)})})]})]})},m3e={PROGRESSION:{label:"Progression",icon:""},COMBAT:{label:"Missions",icon:""},SOCIAL:{label:"Social",icon:""},COLLECTION:{label:"Collection",icon:""},DEDICATION:{label:"Dedication",icon:""},MASTERY:{label:"Mastery",icon:""}},p3e=({unlockedAchievements:r,achievementProgress:e})=>{const t=F.useMemo(()=>Qae(r),[r]),n=["PROGRESSION","COMBAT","DEDICATION","COLLECTION","MASTERY","SOCIAL"],i=r.length,a=O8.filter(s=>!s.isSecret).length;return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[u.jsx(w0,{className:"w-5 h-5 text-yellow-400"})," Achievements"]}),u.jsxs("span",{className:"text-sm text-gray-400",children:[i,"/",a," unlocked"]})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-2",children:u.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-yellow-500 to-amber-500 transition-all duration-500",style:{width:`${i/a*100}%`}})}),n.map(s=>{const c=t.filter(f=>f.category===s);if(c.length===0)return null;const d=m3e[s];return u.jsxs("div",{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-1.5",children:[u.jsx("span",{children:d.icon})," ",d.label]}),u.jsx("div",{className:"grid grid-cols-1 gap-2",children:c.map(f=>{const m=r.includes(f.id),p=e[f.id]||0,y=Math.min(100,p/f.condition.target*100);return u.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${m?"border-yellow-500/30 bg-yellow-500/5":"border-white/5 bg-white/3"}`,children:[u.jsx("span",{className:`text-2xl ${m?"":"grayscale opacity-40"}`,children:f.icon}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:`text-sm font-bold ${m?"text-yellow-400":"text-gray-400"}`,children:f.title}),f.isSecret&&!m&&u.jsx(xp,{className:"w-3 h-3 text-gray-600"})]}),u.jsx("p",{className:"text-[10px] text-gray-500",children:f.description}),!m&&u.jsxs("div",{className:"mt-1.5 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:"h-1.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all",style:{width:`${y}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[p,"/",f.condition.target]})]})]}),m&&u.jsxs("div",{className:"text-right shrink-0",children:[u.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold",children:["+",f.xpReward," XP"]}),f.fluxReward&&u.jsxs("div",{className:"text-[9px] text-cyan-400 font-bold",children:["+",f.fluxReward," Flux"]})]})]},f.id)})})]},s)})]})},g3e={THEORIST:"from-blue-500 to-cyan-500",EXPERIMENTALIST:"from-green-500 to-emerald-500",ANALYST:"from-yellow-500 to-orange-500",DIPLOMAT:"from-purple-500 to-pink-500"},y3e=({specialization:r,skillPoints:e,unlockedSkills:t})=>{const[n,i]=F.useState(r||null),[a,s]=F.useState(null),c=Li(),d=!!r,f=n||"THEORIST",m=wF.filter(b=>b.specialization===f),p=[1,2,3,4],y=async(b,T)=>{if(!a){s(b);try{await $e.unlockSkill(b,f,T),vi.skillUnlock(),c.success("Skill unlocked!")}catch(S){c.error(S instanceof Error?S.message:"Failed to unlock")}s(null)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-bold text-white",children:"Specialization"}),u.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"You earn 1 Skill Point each time you level up"})]}),u.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/20 rounded-lg px-3 py-1.5",children:[u.jsx(Vn,{className:"w-4 h-4 text-yellow-400"}),u.jsxs("span",{className:"text-sm font-bold text-yellow-400",children:[e," SP"]})]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Yae).map(([b,T])=>{const S=f===b,w=d&&r!==b;return u.jsxs("button",{onClick:()=>!w&&i(b),disabled:w,className:`p-3 rounded-xl border text-left transition-all ${S?`border-white/30 bg-gradient-to-br ${g3e[b]} bg-opacity-10`:w?"border-white/5 bg-white/2 opacity-40 cursor-not-allowed":"border-white/10 bg-white/5 hover:bg-white/10 cursor-pointer"}`,children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-lg",children:T.icon}),u.jsx("span",{className:"font-bold text-sm text-white",children:T.name}),w&&u.jsx(xp,{className:"w-3 h-3 text-gray-500 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:T.description})]},b)})}),u.jsx("div",{className:"space-y-4",children:p.map(b=>{const T=m.filter(S=>S.tier===b);return u.jsxs("div",{children:[u.jsxs("p",{className:"text-[10px] font-mono text-gray-600 uppercase tracking-widest mb-2",children:["Tier ",b]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:T.map(S=>{const w=t.includes(S.id),E=!w&&Dj(S.id,t)&&e>=S.cost,I=Dj(S.id,t);return u.jsxs("div",{className:`relative p-3 rounded-xl border transition-all ${w?"border-green-500/30 bg-green-500/10":E?"border-yellow-500/30 bg-yellow-500/5 hover:bg-yellow-500/10 cursor-pointer":"border-white/5 bg-white/3 opacity-50"}`,onClick:()=>E&&y(S.id,S.cost),children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"text-sm",children:S.icon}),u.jsx("span",{className:"text-xs font-bold text-white truncate",children:S.name}),w&&u.jsx(bn,{className:"w-3.5 h-3.5 text-green-400 ml-auto"}),!w&&!I&&u.jsx(xp,{className:"w-3 h-3 text-gray-600 ml-auto"})]}),u.jsx("p",{className:"text-[10px] text-gray-400",children:S.description}),!w&&u.jsxs("div",{className:"mt-1 text-[9px] font-mono text-gray-600",children:["Cost: ",S.cost," SP"]}),a===S.id&&u.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"})})]},S.id)})})]},b)})})]})},SS=25,Gy=Cm,v3e=({currency:r,lastSpin:e,classType:t})=>{const[n,i]=F.useState(!1),[a,s]=F.useState(0),[c,d]=F.useState(null),f=F.useRef(null),m=Li(),p=new Date().toISOString().split("T")[0],y=e===p,b=!y&&r>=SS&&!n,T=async()=>{if(b){i(!0),d(null),vi.wheelSpin();try{const E=await $e.spinFortuneWheel(t),I=Gy.findIndex(R=>R.id===E.prizeId),C=360/Gy.length,B=360*5+(360-I*C-C/2);s(R=>R+B),setTimeout(()=>{vi.wheelPrize(),d(E.rewardDescription),i(!1),E.prizeType!=="NOTHING"?m.success(`You won: ${E.rewardDescription}!`):m.info(E.rewardDescription)},4e3)}catch(E){i(!1),m.error(E instanceof Error?E.message:"Spin failed")}}},S=360/Gy.length,w=140;return u.jsxs("div",{className:"flex flex-col items-center gap-6",children:[u.jsx("h3",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-500",children:"Fortune Terminal"}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Spend ",SS," Flux for a daily spin"]}),u.jsxs("div",{className:"relative w-[320px] h-[320px]",children:[u.jsx("div",{className:"absolute top-2 left-1/2 -translate-x-1/2 z-10 w-0 h-0 border-l-[12px] border-l-transparent border-r-[12px] border-r-transparent border-t-[24px] border-t-yellow-400 drop-shadow-lg"}),u.jsx("svg",{viewBox:"-160 -160 320 320",className:"w-full h-full drop-shadow-2xl",children:u.jsxs("g",{style:{transform:`rotate(${a}deg)`,transformOrigin:"center",transition:n?"transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)":"none"},ref:f,children:[Gy.map((E,I)=>{const C=(I*S-90)*(Math.PI/180),B=((I+1)*S-90)*(Math.PI/180),R=w*Math.cos(C),D=w*Math.sin(C),A=w*Math.cos(B),k=w*Math.sin(B),N=S>180?1:0,U=((I+.5)*S-90)*(Math.PI/180),M=w*.65*Math.cos(U),$=w*.65*Math.sin(U),z=(I+.5)*S;return u.jsxs("g",{children:[u.jsx("path",{d:`M0,0 L${R},${D} A${w},${w} 0 ${N},1 ${A},${k} Z`,fill:E.color,stroke:"rgba(255,255,255,0.2)",strokeWidth:"1"}),u.jsx("text",{x:M,y:$,fill:"white",fontSize:"9",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",transform:`rotate(${z}, ${M}, ${$})`,children:E.label})]},E.id)}),u.jsx("circle",{cx:"0",cy:"0",r:"18",fill:"#1a1b26",stroke:"rgba(255,255,255,0.3)",strokeWidth:"2"}),u.jsx("text",{x:"0",y:"0",fill:"white",fontSize:"8",fontWeight:"bold",textAnchor:"middle",dominantBaseline:"central",children:"SPIN"})]})})]}),c&&u.jsxs("div",{className:"text-center animate-in fade-in zoom-in duration-300",children:[u.jsx("p",{className:"text-sm text-gray-300",children:"You won:"}),u.jsx("p",{className:"text-lg font-black text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-amber-500",children:c})]}),u.jsx("button",{onClick:T,disabled:!b,className:`px-6 py-2.5 rounded-xl font-bold text-sm transition-all ${b?"bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:scale-105 hover:shadow-lg hover:shadow-purple-500/30":"bg-white/5 text-gray-600 cursor-not-allowed"}`,children:n?"Spinning...":y?"Come back tomorrow!":`Spin (${SS} Flux)`})]})},b3e=({userId:r,userName:e,classType:t})=>{const[n,i]=F.useState([]),[a,s]=F.useState(null),[c,d]=F.useState(null),f=Li();F.useEffect(()=>{let p;try{p=$e.subscribeToBossEncounters(y=>{const b=y.filter(T=>!T.classType||T.classType===t||T.classType==="GLOBAL");i(b)})}catch{}return()=>p==null?void 0:p()},[t]);const m=async p=>{if(!a){s(p);try{const y=5+Math.floor(Math.random()*20),b=await $e.dealBossDamage(p,y,e);vi.bossHit(),d({bossId:p,damage:b.damageDealt}),setTimeout(()=>d(null),1500),b.bossDefeated?(vi.bossDefeated(),f.success("Boss defeated! Rewards incoming!")):f.info(`Dealt ${b.damageDealt} damage! (+${b.xpEarned} XP)`)}catch(y){f.error(y instanceof Error?y.message:"Attack failed")}s(null)}};return n.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[u.jsx(Vae,{className:"w-5 h-5"})," Active Threats"]}),n.map(p=>{var C;const y=p.currentHp/p.maxHp*100,b=new Date(p.deadline).getTime()-Date.now(),T=Math.max(0,Math.floor(b/36e5)),S=[...p.damageLog||[]].reduce((B,R)=>(B[R.userId]||(B[R.userId]={name:R.userName,total:0}),B[R.userId].total+=R.damage,B),{}),w=Object.entries(S).sort(([,B],[,R])=>R.total-B.total).slice(0,5),E=((C=S[r])==null?void 0:C.total)||0,I=(c==null?void 0:c.bossId)===p.id;return u.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-red-500/20 bg-gradient-to-br from-red-950/40 to-black/60",children:[I&&u.jsx("div",{className:"absolute inset-0 bg-red-500/20 animate-ping pointer-events-none",style:{animationDuration:"0.3s",animationIterationCount:1}}),u.jsxs("div",{className:"p-5 space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-lg font-black text-red-400",children:p.name}),u.jsx("p",{className:"text-xs text-gray-500",children:p.description})]}),u.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[u.jsx(hs,{className:"w-3 h-3"}),T>0?`${T}h left`:"Expiring soon"]})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[p.currentHp.toLocaleString()," HP"]}),u.jsx("span",{className:"text-gray-600",children:p.maxHp.toLocaleString()})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-4 overflow-hidden",children:u.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${y>50?"bg-gradient-to-r from-red-600 to-red-500":y>25?"bg-gradient-to-r from-orange-600 to-yellow-500":"bg-gradient-to-r from-yellow-600 to-green-500"}`,style:{width:`${y}%`}})})]}),I&&c&&u.jsx("div",{className:"text-center animate-bounce",children:u.jsxs("span",{className:"text-xl font-black text-red-400",children:["-",c.damage]})}),E>0&&u.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[u.jsx(us,{className:"w-3 h-3"}),"Your total damage: ",u.jsx("span",{className:"text-white font-bold",children:E})]}),w.length>0&&u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-600 uppercase tracking-widest",children:[u.jsx(Wc,{className:"w-3 h-3"})," Top Attackers"]}),w.map(([B,R],D)=>u.jsxs("div",{className:"flex items-center justify-between text-xs",children:[u.jsxs("span",{className:`${B===r?"text-cyan-400 font-bold":"text-gray-400"}`,children:["#",D+1," ",R.name]}),u.jsxs("span",{className:"text-red-400 font-mono",children:[R.total," dmg"]})]},B))]}),u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Vn,{className:"w-3 h-3 text-yellow-400"})," ",p.completionRewards.xp," XP"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"text-cyan-400",children:"~"})," ",p.completionRewards.flux," Flux"]}),p.completionRewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[p.completionRewards.itemRarity," item"]})]}),u.jsx("button",{onClick:()=>m(p.id),disabled:!!a,className:`w-full py-2.5 rounded-xl font-bold text-sm transition-all ${a===p.id?"bg-red-500/20 text-red-400 animate-pulse":"bg-gradient-to-r from-red-600 to-orange-600 text-white hover:scale-[1.02] hover:shadow-lg hover:shadow-red-500/30"}`,children:a===p.id?"Attacking...":"Attack!"})]})]},p.id)})]})},x3e=({classType:r})=>{const[e,t]=F.useState([]),[n,i]=F.useState(0),[a,s]=F.useState(null),[c,d]=F.useState(null),[f,m]=F.useState(!1),p=Li();F.useEffect(()=>{let b;try{b=$e.subscribeToBossQuizzes(r,t)}catch{}return()=>b==null?void 0:b()},[r]);const y=async(b,T,S)=>{if(!f){m(!0),s(S);try{const w=await $e.answerBossQuiz(b,T,S);w.alreadyAnswered?p.info("Already answered this question!"):w.correct?(vi.bossHit(),p.success(`Correct! Dealt ${w.damage} damage!`)):p.error("Incorrect. No damage dealt."),d({correct:w.correct,damage:w.damage}),setTimeout(()=>{i(E=>E+1),s(null),d(null)},2e3)}catch(w){p.error(w instanceof Error?w.message:"Failed to submit answer")}m(!1)}};return e.length===0?null:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-amber-400 flex items-center gap-2",children:[u.jsx(ph,{className:"w-5 h-5"})," Boss Quiz Challenge"]}),e.map(b=>{const T=b.currentHp/b.maxHp*100,S=b.questions[n%b.questions.length],w=n>=b.questions.length;return u.jsxs("div",{className:"rounded-2xl border border-amber-500/20 bg-gradient-to-br from-amber-950/30 to-black/50 p-5 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"text-base font-black text-amber-400",children:b.bossName}),u.jsx("p",{className:"text-xs text-gray-500",children:b.description})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[u.jsxs("span",{className:"text-red-400 font-mono",children:[b.currentHp," HP"]}),u.jsx("span",{className:"text-gray-600",children:b.maxHp})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-3 overflow-hidden",children:u.jsx("div",{className:"h-3 rounded-full bg-gradient-to-r from-red-600 to-orange-500 transition-all duration-500",style:{width:`${T}%`}})})]}),w?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(bn,{className:"w-12 h-12 text-green-400 mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-gray-300",children:"All questions answered!"}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Check back for more questions tomorrow."})]}):S?u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[u.jsxs("span",{children:["Question ",n+1," / ",b.questions.length]}),u.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${S.difficulty==="HARD"?"bg-red-500/20 text-red-400":S.difficulty==="MEDIUM"?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"}`,children:[S.difficulty,S.damageBonus?` (+${S.damageBonus} dmg)`:""]})]}),u.jsx("p",{className:"text-sm text-white font-medium",children:S.stem}),u.jsx("div",{className:"space-y-2",children:S.options.map((E,I)=>{const C=a===I,B=c&&C,R=c==null?void 0:c.correct;return u.jsx("button",{onClick:()=>y(b.id,S.id,I),disabled:f||!!c,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${B&&R?"border-green-500/50 bg-green-500/10 text-green-400":B&&!R?"border-red-500/50 bg-red-500/10 text-red-400":C?"border-amber-500/30 bg-amber-500/10":"border-white/10 bg-white/5 hover:bg-white/10 text-gray-300"}`,children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"text-xs font-mono text-gray-600 w-5",children:[String.fromCharCode(65+I),"."]}),u.jsx("span",{children:E}),B&&R&&u.jsx(bn,{className:"w-4 h-4 text-green-400 ml-auto"}),B&&!R&&u.jsx(vp,{className:"w-4 h-4 text-red-400 ml-auto"})]})},I)})}),c&&c.correct&&u.jsxs("div",{className:"text-center text-sm text-amber-400 font-bold animate-bounce",children:[u.jsx(Vn,{className:"w-4 h-4 inline mr-1"}),"-",c.damage," HP!"]})]}):null,u.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-gray-500 border-t border-white/5 pt-3",children:[u.jsx("span",{children:"Defeat rewards:"}),u.jsxs("span",{className:"text-yellow-400",children:[b.rewards.xp," XP"]}),u.jsxs("span",{className:"text-cyan-400",children:[b.rewards.flux," Flux"]}),b.rewards.itemRarity&&u.jsxs("span",{className:"text-purple-400",children:[b.rewards.itemRarity," item"]})]})]},b.id)})]})},w3e=({activeChallenges:r,classType:e})=>{const[t,n]=F.useState([]),[i,a]=F.useState(null),s=Li();F.useEffect(()=>{let y;try{y=$e.subscribeToDailyChallenges(n)}catch{}return()=>y==null?void 0:y()},[]);const c=y=>r.find(b=>b.challengeId===y),d=async y=>{if(!i){a(y);try{const b=await $e.claimDailyChallenge(y,e);vi.dailyReward(),s.success(`Claimed! +${b.xpReward} XP${b.fluxReward?` +${b.fluxReward} Flux`:""}`)}catch(b){s.error(b instanceof Error?b.message:"Claim failed")}a(null)}};if(t.length===0)return null;const f=t.filter(y=>!y.isWeekly),m=t.filter(y=>y.isWeekly),p=y=>{const b=c(y.id),T=(b==null?void 0:b.progress)||0,S=(b==null?void 0:b.completed)||!1,w=!!(b!=null&&b.claimedAt),E=Math.min(100,T/y.target*100);return u.jsx("div",{className:`p-3 rounded-xl border transition-all ${w?"border-green-500/20 bg-green-500/5 opacity-60":S?"border-yellow-500/30 bg-yellow-500/5":"border-white/10 bg-white/5"}`,children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:`mt-0.5 p-1.5 rounded-lg ${S?"bg-yellow-500/20":"bg-white/5"}`,children:w?u.jsx(bn,{className:"w-4 h-4 text-green-400"}):S?u.jsx(bae,{className:"w-4 h-4 text-yellow-400"}):u.jsx(xo,{className:"w-4 h-4 text-gray-400"})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-bold text-white",children:y.title}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsxs("span",{className:"text-[10px] text-yellow-400 font-bold",children:["+",y.xpReward," XP"]}),y.fluxReward&&u.jsxs("span",{className:"text-[10px] text-cyan-400 font-bold",children:["+",y.fluxReward]})]})]}),u.jsx("p",{className:"text-[11px] text-gray-400 mt-0.5",children:y.description}),!w&&u.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[u.jsx("div",{className:"flex-1 bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full transition-all ${S?"bg-gradient-to-r from-yellow-500 to-amber-500":"bg-gradient-to-r from-purple-500 to-pink-500"}`,style:{width:`${E}%`}})}),u.jsxs("span",{className:"text-[9px] text-gray-600 font-mono",children:[T,"/",y.target]})]}),S&&!w&&u.jsx("button",{onClick:()=>d(y.id),disabled:!!i,className:"mt-2 px-3 py-1 bg-gradient-to-r from-yellow-600 to-amber-600 text-white text-xs font-bold rounded-lg hover:scale-105 transition-all",children:i===y.id?"Claiming...":"Claim Reward"})]})]})},y.id)};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(cae,{className:"w-5 h-5 text-purple-400"})," Daily Challenges"]}),u.jsx("div",{className:"space-y-2",children:f.map(p)}),m.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("h4",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mt-4 flex items-center gap-1",children:[u.jsx(Vn,{className:"w-3 h-3 text-cyan-400"})," Weekly Challenge"]}),u.jsx("div",{className:"space-y-2",children:m.map(p)})]})]})},TS={OPEN:"bg-blue-500/10 text-blue-400 border-blue-500/20",MATCHED:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",IN_PROGRESS:"bg-purple-500/10 text-purple-400 border-purple-500/20",COMPLETED:"bg-orange-500/10 text-orange-400 border-orange-500/20",VERIFIED:"bg-green-500/10 text-green-400 border-green-500/20"},_3e=({userId:r,userName:e,classType:t,isAdmin:n})=>{const[i,a]=F.useState([]),[s,c]=F.useState(!1),[d,f]=F.useState(""),[m,p]=F.useState(!1),y=Li();F.useEffect(()=>{let C;try{C=$e.subscribeToTutoringSessions(t,a)}catch{}return()=>C==null?void 0:C()},[t]);const b=async()=>{if(!(!d.trim()||m)){p(!0);try{await $e.createTutoringRequest(r,e,d,t),y.success("Tutoring request posted!"),f(""),c(!1)}catch{y.error("Failed to create request")}p(!1)}},T=async C=>{try{await $e.claimTutorRole(C,r,e),y.success("You are now the tutor for this session!")}catch{y.error("Failed to claim tutor role")}},S=async(C,B)=>{try{const R=await $e.completeTutoring(C,B);y.success(`Verified! Tutor earned ${R.xpAwarded} XP and ${R.fluxAwarded} Flux`)}catch{y.error("Failed to verify session")}},w=i.filter(C=>C.status==="OPEN"),E=i.filter(C=>["MATCHED","IN_PROGRESS"].includes(C.status)),I=i.filter(C=>["COMPLETED","VERIFIED"].includes(C.status));return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[u.jsx(gh,{className:"w-5 h-5 text-green-400"})," Peer Tutoring"]}),u.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-3 py-1.5 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg hover:bg-green-600/30 transition",children:[u.jsx(Sl,{className:"w-3 h-3"})," Request Help"]})]}),u.jsx("p",{className:"text-xs text-gray-500",children:"Help classmates and earn XP + Cyber-Flux rewards!"}),s&&u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl space-y-2",children:[u.jsx("input",{value:d,onChange:C=>f(C.target.value),placeholder:"What do you need help with?",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder:text-gray-600 focus:outline-none focus:border-green-500/50",maxLength:200}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:b,disabled:!d.trim()||m,className:"px-4 py-1.5 bg-green-600 text-white text-xs font-bold rounded-lg hover:bg-green-500 transition disabled:opacity-50",children:m?"Posting...":"Post Request"}),u.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 text-gray-400 text-xs hover:text-white transition",children:"Cancel"})]})]}),w.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(cv,{className:"w-3 h-3"})," Open Requests"]}),w.map(C=>u.jsxs("div",{className:"p-3 bg-white/5 border border-white/10 rounded-xl",children:[u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Requested by ",C.requesterName," - ",new Date(C.createdAt).toLocaleDateString()]})]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${TS[C.status]}`,children:C.status})]}),C.requesterId!==r&&u.jsxs("button",{onClick:()=>T(C.id),className:"mt-2 px-3 py-1 bg-blue-600/20 border border-blue-500/30 text-blue-400 text-xs font-bold rounded-lg hover:bg-blue-600/30 transition",children:[u.jsx(Wc,{className:"w-3 h-3 inline mr-1"})," I can help!"]})]},C.id))]}),E.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(hs,{className:"w-3 h-3"})," Active Sessions"]}),E.map(C=>u.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-xl",children:[u.jsx("p",{className:"text-sm text-white font-medium",children:C.topic}),u.jsxs("p",{className:"text-[10px] text-gray-500",children:[C.requesterName,"  ",C.tutorName||"Finding tutor..."]}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${TS[C.status]} mt-1 inline-block`,children:C.status}),n&&C.tutorId&&C.status!=="VERIFIED"&&u.jsxs("button",{onClick:()=>S(C.id,C.tutorId),className:"mt-2 ml-2 px-3 py-1 bg-green-600/20 border border-green-500/30 text-green-400 text-xs font-bold rounded-lg",children:[u.jsx(bn,{className:"w-3 h-3 inline mr-1"})," Verify & Award"]})]},C.id))]}),I.length>0&&u.jsxs("div",{className:"space-y-2",children:[u.jsxs("h4",{className:"text-[10px] font-mono uppercase tracking-widest text-gray-600 flex items-center gap-1",children:[u.jsx(bn,{className:"w-3 h-3 text-green-400"})," Completed (",I.length,")"]}),I.slice(0,3).map(C=>u.jsxs("div",{className:"p-2 bg-green-500/5 border border-green-500/10 rounded-lg flex justify-between items-center",children:[u.jsx("span",{className:"text-xs text-gray-400 truncate",children:C.topic}),u.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full border ${TS[C.status]}`,children:C.status})]},C.id))]}),i.length===0&&u.jsxs("div",{className:"text-center py-6 text-gray-600",children:[u.jsx(gh,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),u.jsx("p",{className:"text-xs",children:"No tutoring sessions yet. Be the first to ask for help!"})]})]})},S3e=({item:r,onClose:e})=>{const[t,n]=F.useState("chest"),i=zr(r.rarity);F.useEffect(()=>{vi.chestOpen();const s=setTimeout(()=>n("opening"),800),c=setTimeout(()=>n("reveal"),1800);return()=>{clearTimeout(s),clearTimeout(c)}},[]);const a={COMMON:"shadow-gray-500/30",UNCOMMON:"shadow-green-500/40",RARE:"shadow-blue-500/50",UNIQUE:"shadow-yellow-500/60"};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[60] flex items-center justify-center",onClick:t==="reveal"?e:void 0,children:u.jsxs("div",{className:"text-center space-y-6",children:[t==="chest"&&u.jsxs("div",{className:"animate-in zoom-in duration-500",children:[u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"40",width:"70",height:"45",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 40 Q50 20 88 40 L85 45 Q50 28 15 45 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsx("circle",{cx:"50",cy:"55",r:"6",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1.5"}),u.jsx("rect",{x:"47",y:"55",width:"6",height:"10",rx:"1",fill:"#DAA520",stroke:"#B8860B",strokeWidth:"1"}),u.jsxs("circle",{cx:"50",cy:"55",r:"15",fill:"rgba(255,215,0,0.15)",children:[u.jsx("animate",{attributeName:"r",values:"15;20;15",dur:"1.5s",repeatCount:"indefinite"}),u.jsx("animate",{attributeName:"opacity",values:"0.15;0.3;0.15",dur:"1.5s",repeatCount:"indefinite"})]})]}),u.jsx("p",{className:"text-sm text-gray-400 mt-4 animate-pulse",children:"Opening..."})]}),t==="opening"&&u.jsx("div",{className:"animate-in zoom-in duration-300",children:u.jsxs("svg",{viewBox:"0 0 100 100",className:"w-32 h-32 mx-auto",children:[u.jsx("rect",{x:"15",y:"45",width:"70",height:"40",rx:"5",fill:"#8B4513",stroke:"#654321",strokeWidth:"2"}),u.jsx("path",{d:"M12 45 Q50 5 88 45 L85 48 Q50 12 15 48 Z",fill:"#A0522D",stroke:"#654321",strokeWidth:"1.5"}),u.jsxs("ellipse",{cx:"50",cy:"45",rx:"25",ry:"15",fill:"rgba(255,255,255,0.3)",children:[u.jsx("animate",{attributeName:"ry",values:"15;40;60",dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"0.3;0.8;0",dur:"0.8s",fill:"freeze"})]}),[0,45,90,135,180,225,270,315].map((s,c)=>u.jsxs("circle",{cx:"50",cy:"45",r:"2",fill:r.rarity==="UNIQUE"?"#fbbf24":r.rarity==="RARE"?"#3b82f6":"#22c55e",children:[u.jsx("animate",{attributeName:"cx",values:`50;${50+Math.cos(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"cy",values:`45;${45+Math.sin(s*Math.PI/180)*40}`,dur:"0.8s",fill:"freeze"}),u.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"0.8s",fill:"freeze"})]},c))]})}),t==="reveal"&&u.jsxs("div",{className:"animate-in zoom-in fade-in duration-500 space-y-4",children:[u.jsxs("div",{className:`mx-auto w-64 p-6 rounded-2xl border ${i.border} ${i.bg} shadow-2xl ${a[r.rarity]}`,children:[u.jsx("div",{className:`text-[10px] font-mono uppercase tracking-widest ${i.text} mb-2`,children:r.rarity}),u.jsx("h3",{className:`text-lg font-black ${i.text}`,children:r.name}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.slot}),u.jsx("div",{className:"mt-3 space-y-1",children:Object.entries(r.stats).filter(([,s])=>s&&s>0).map(([s,c])=>u.jsxs("div",{className:"flex justify-between text-xs",children:[u.jsx("span",{className:"text-gray-400 capitalize",children:s}),u.jsxs("span",{className:`font-bold ${i.text}`,children:["+",c]})]},s))}),r.affixes.length>0&&u.jsx("div",{className:"mt-2 pt-2 border-t border-white/5",children:r.affixes.map((s,c)=>u.jsxs("div",{className:"text-[10px] text-gray-400",children:[s.name,": +",s.value," ",s.stat," (T",s.tier,")"]},c))}),r.setId&&u.jsx("div",{className:"mt-2 text-[10px] text-purple-400 font-bold",children:"Part of a set"}),(r.sockets||0)>0&&u.jsx("div",{className:"mt-2 flex gap-1",children:Array.from({length:r.sockets||0}).map((s,c)=>u.jsx("div",{className:"w-3 h-3 rounded-full border border-white/20 bg-black/30"},c))})]}),u.jsx("p",{className:"text-xs text-gray-500 animate-pulse",children:"Click anywhere to close"})]})]})})},T3e=[{key:"tech",label:"Tech",color:"text-blue-400",bg:"bg-blue-500"},{key:"focus",label:"Focus",color:"text-green-400",bg:"bg-green-500"},{key:"analysis",label:"Analysis",color:"text-yellow-400",bg:"bg-yellow-500"},{key:"charisma",label:"Charisma",color:"text-purple-400",bg:"bg-purple-500"}],A3e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],E3e=({user:r,classType:e,onClose:t})=>{var D,A,k;const[n,i]=ne.useState(!1),a=r.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},s=a.level||1,c=vh(s),d=SF(s),{equipped:f,appearance:m}=Bx(r,e),p=Lx({gamification:{...a,equipped:f}}),y=kg(f),b=((D=a.classXp)==null?void 0:D[e])||0,T=(A=r.settings)==null?void 0:A.privacyMode,S=T?a.codename||"Unknown Agent":r.name,w=Object.values(f).filter(Boolean),E=_F(w),I=a.unlockedAchievements||[],C=F.useMemo(()=>O8.filter(N=>I.includes(N.id)),[I]),B=Math.max(p.tech,p.focus,p.analysis,p.charisma,1),R=()=>{navigator.clipboard.writeText(`${window.location.origin}/profile/${r.id}`),i(!0),setTimeout(()=>i(!1),2e3)};return u.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:u.jsxs("div",{className:"bg-gradient-to-br from-[#0d0e1a] to-[#1a1b2e] border border-white/10 rounded-3xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:N=>N.stopPropagation(),children:[u.jsxs("div",{className:"relative p-8 border-b border-white/5 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-20",style:{background:`radial-gradient(circle at 30% 50%, hsl(${(m==null?void 0:m.hue)||180}, 70%, 30%), transparent 70%)`}}),u.jsxs("div",{className:"relative flex items-center gap-6",children:[u.jsx("div",{className:"w-32 h-44 shrink-0",children:u.jsx(Xb,{equipped:f,appearance:m})}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("h1",{className:`text-2xl font-black ${T?"text-purple-300 italic":"text-white"}`,children:S}),u.jsx("button",{onClick:R,className:"p-1 text-gray-500 hover:text-white transition rounded",title:"Copy profile link",children:n?u.jsx(Nx,{className:"w-4 h-4 text-green-400"}):u.jsx(mT,{className:"w-4 h-4"})})]}),u.jsx("p",{className:`text-sm font-mono uppercase tracking-widest ${c.tierColor.split(" ")[1]}`,children:c.rankName}),u.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[d.name,"  Level ",s]}),u.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:b.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"CLASS XP"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-yellow-400",children:y}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"GEAR SCORE"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-xl font-black text-orange-400",children:[a.engagementStreak||0,"w"]}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"STREAK"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-xl font-black text-purple-400",children:I.length}),u.jsx("div",{className:"text-[9px] text-gray-600 font-mono",children:"BADGES"})]})]}),a.specialization&&u.jsx("div",{className:"mt-3 inline-flex items-center gap-1 px-2 py-1 bg-white/5 border border-white/10 rounded-lg",children:u.jsx("span",{className:"text-xs text-gray-300 font-bold",children:a.specialization})})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-white/5",children:[u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(xo,{className:"w-3 h-3"})," Combat Stats"]}),u.jsx("div",{className:"space-y-2",children:T3e.map(({key:N,label:U,color:M,bg:$})=>{const z=p[N]||0,Q=z/B*100;return u.jsxs("div",{className:"space-y-0.5",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-xs text-gray-400",children:U}),u.jsx("span",{className:`text-xs font-bold ${M}`,children:z})]}),u.jsx("div",{className:"w-full bg-white/5 rounded-full h-1.5",children:u.jsx("div",{className:`h-1.5 rounded-full ${$} transition-all`,style:{width:`${Q}%`}})})]},N)})})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(us,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"space-y-1.5",children:A3e.map(N=>{const U=f[N];if(!U)return u.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-white/2 rounded text-xs text-gray-700",children:[u.jsx("span",{className:"font-mono w-12 text-[10px]",children:N}),u.jsx("span",{className:"italic",children:"Empty"})]},N);const M=zr(U.rarity);return u.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border ${M.border} ${M.bg}`,children:[u.jsx("span",{className:"font-mono w-12 text-[10px] text-gray-500",children:N}),u.jsx("span",{className:`text-xs font-bold truncate ${M.text}`,children:U.name})]},N)})})]}),E.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-2 flex items-center gap-1",children:[u.jsx(N8,{className:"w-3 h-3 text-purple-400"})," Active Sets"]}),E.map(({set:N,activeBonus:U})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1 text-xs",children:[u.jsx("span",{className:"text-purple-400 font-bold",children:N.name}),u.jsxs("span",{className:"text-gray-500 ml-1",children:[" ",U.label]})]},N.id))]})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(w0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",I.length,")"]}),C.length>0?u.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.slice(0,12).map(N=>u.jsxs("div",{className:"text-center p-2 bg-yellow-500/5 border border-yellow-500/10 rounded-lg",children:[u.jsx("div",{className:"text-xl",children:N.icon}),u.jsx("div",{className:"text-[9px] text-yellow-400 font-bold truncate mt-0.5",children:N.title})]},N.id))}):u.jsx("p",{className:"text-xs text-gray-600 italic",children:"No achievements yet"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3",children:"Activity"}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(A8,{className:"w-3.5 h-3.5 text-orange-400"}),u.jsx("span",{className:"text-gray-400",children:"Engagement Streak:"}),u.jsxs("span",{className:"text-orange-400 font-bold",children:[a.engagementStreak||0," weeks"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx($ae,{className:"w-3.5 h-3.5 text-red-400"}),u.jsx("span",{className:"text-gray-400",children:"Quests Completed:"}),u.jsx("span",{className:"text-red-400 font-bold",children:((k=a.completedQuests)==null?void 0:k.length)||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(gh,{className:"w-3.5 h-3.5 text-green-400"}),u.jsx("span",{className:"text-gray-400",children:"Tutoring Sessions:"}),u.jsx("span",{className:"text-green-400 font-bold",children:a.tutoringSessionsCompleted||0})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[u.jsx(Vn,{className:"w-3.5 h-3.5 text-cyan-400"}),u.jsx("span",{className:"text-gray-400",children:"Total XP:"}),u.jsx("span",{className:"text-cyan-400 font-bold",children:(a.xp||0).toLocaleString()})]})]})]})]})]})]})})},N3e={Textbook:u.jsx(zs,{className:"w-5 h-5"}),Simulation:u.jsx(pF,{className:"w-5 h-5 fill-current"}),"Lab Guide":u.jsx(Ox,{className:"w-5 h-5"}),"Practice Set":u.jsx(xo,{className:"w-5 h-5"}),Article:u.jsx(fF,{className:"w-5 h-5"}),"Video Lesson":u.jsx(bF,{className:"w-5 h-5"}),Supplemental:u.jsx(E8,{className:"w-5 h-5"})},O3e=({user:r,assignments:e,submissions:t,enabledFeatures:n,onNavigate:i,onStartAssignment:a,studentTab:s="RESOURCES"})=>{var ei,_s,Ss,Ai,ta,nn,Hs,Ei,Ui,Gs,_n,ui,Ks,Ni,br,Ur,an,ra,Oi,Ws,Ts,na,ut,le,Le,Qe;const c=Li(),{confirm:d}=nu(),[f,m]=F.useState(new Set),[p,y]=F.useState(r.classType||((ei=r.enrolledClasses)==null?void 0:ei[0])||"Unassigned"),[b,T]=F.useState(null),[S,w]=F.useState([]),[E,I]=F.useState(!1),[C,B]=F.useState(null),R=ne.useRef(((_s=r.gamification)==null?void 0:_s.lastLevelSeen)||1),D=s,[A,k]=F.useState(!1),[N,U]=F.useState(null),[M,$]=F.useState(!1),[z,Q]=F.useState(null),[ee,K]=F.useState(null),[Z,Y]=F.useState(null),[ge,ae]=F.useState(!1),[X,J]=F.useState(null),[ce,Ne]=F.useState(!1);F.useEffect(()=>{var ze,st,bt;const oe=((ze=r.gamification)==null?void 0:ze.level)||1,Se=Math.max(((st=r.gamification)==null?void 0:st.lastLevelSeen)||1,R.current);if(oe>Se){const Et=((bt=r.gamification)==null?void 0:bt.inventory)||[],Hr=Et.length>0?Et[Et.length-1]:null;B(Hr),I(!0),vi.levelUp()}},[(Ss=r.gamification)==null?void 0:Ss.level,(Ai=r.gamification)==null?void 0:Ai.lastLevelSeen,(ta=r.gamification)==null?void 0:ta.inventory]),F.useEffect(()=>{const oe=[];try{oe.push($e.subscribeToXPEvents(Se=>{const ze=Se.find(st=>st.isActive&&(st.type==="GLOBAL"||st.targetClass===p));T(ze||null)}))}catch{}try{oe.push($e.subscribeToQuests(Se=>{w(Se.filter(ze=>{if(!ze.isActive)return!1;const st=new Date;return!(ze.startsAt&&new Date(ze.startsAt)>st||ze.expiresAt&&new Date(ze.expiresAt)<st)}))}))}catch{}return()=>oe.forEach(Se=>Se())},[p]);const se=((Hs=(nn=r.gamification)==null?void 0:nn.classXp)==null?void 0:Hs[p])||0,ke=ne.useRef(se);F.useEffect(()=>{if(se>ke.current&&ke.current>=0){const oe=se-ke.current;if(oe>0&&oe<500){Y(oe),vi.xpGain();const Se=setTimeout(()=>Y(null),2e3);return()=>clearTimeout(Se)}}ke.current=se},[se]);const Me=ne.useRef(!1);F.useEffect(()=>{var ze;if(Me.current)return;Me.current=!0;const oe=new Date().toISOString().split("T")[0];((ze=r.gamification)==null?void 0:ze.lastLoginRewardDate)!==oe&&!ce&&$e.claimDailyLogin().then(st=>{st.alreadyClaimed||(Ne(!0),vi.dailyReward(),c.success(`Daily login: +${st.xpReward} XP, +${st.fluxReward} Flux (${st.streak}-day streak!)`))}).catch(()=>{})},[]);const ot=ne.useRef(!1);F.useEffect(()=>{ot.current||(ot.current=!0,$e.updateEngagementStreak().catch(()=>{}))},[]);const[Ee,He]=F.useState([]);F.useEffect(()=>{let oe;try{oe=$e.subscribeToAnnouncements(He)}catch{}return()=>oe==null?void 0:oe()},[]);const he=F.useMemo(()=>{var Se;const oe=((Se=r.gamification)==null?void 0:Se.dismissedAnnouncements)||[];return Ee.filter(ze=>!oe.includes(ze.id)&&(ze.classType==="GLOBAL"||ze.classType===p))},[Ee,(Ei=r.gamification)==null?void 0:Ei.dismissedAnnouncements,p]),pe=async oe=>{await $e.dismissAnnouncement(r.id,oe)},Ye=async()=>{var Se;const oe=((Se=r.gamification)==null?void 0:Se.level)||1;R.current=oe,I(!1),B(null),await $e.updateUserLastLevelSeen(r.id,oe)},Ke=async(oe,Se)=>{await $e.updateUserAppearance(r.id,{hue:oe,bodyType:Se},p),k(!1)},at=r.enrolledClasses||(r.classType?[r.classType]:[]),tt=F.useMemo(()=>Lx(r),[r]),Gt=F.useMemo(()=>{var oe;return kg((oe=r.gamification)==null?void 0:oe.equipped)},[(Ui=r.gamification)==null?void 0:Ui.equipped]),Ie=F.useMemo(()=>{const oe=r.gamification||{},ze={...oe.achievementProgress||{}},st=oe.xp||0,bt=oe.level||1,Et=oe.inventory||[],Hr=oe.completedQuests||[],Hn=oe.engagementStreak||0,Ka=oe.loginStreak||0,Xs=oe.tutoringSessionsCompleted||0,Qs=oe.bossesDefeated||0,Ys=oe.challengesCompleted||0,ia=oe.itemsCrafted||0,Mt=(Ll,V0)=>{(!ze[Ll]||V0>ze[Ll])&&(ze[Ll]=V0)};return Mt("first_steps",st),Mt("xp_5k",st),Mt("xp_25k",st),Mt("rising_star",bt),Mt("veteran",bt),Mt("elite",bt),Mt("legend",bt),Mt("collector_10",Et.length),Mt("collector_50",Et.length),Mt("gear_score_100",Gt),Mt("gear_score_500",Gt),Mt("first_mission",Hr.length),Mt("mission_5",Hr.length),Mt("mission_20",Hr.length),Mt("boss_slayer",Qs),Mt("streak_3",Hn),Mt("streak_8",Hn),Mt("streak_16",Hn),Mt("login_7",Ka),Mt("login_30",Ka),Mt("challenges_10",Ys),Mt("tutor_1",Xs),Mt("tutor_10",Xs),Mt("tech_50",tt.tech),Mt("focus_50",tt.focus),Mt("analysis_50",tt.analysis),Mt("charisma_50",tt.charisma),Mt("craft_10",ia),ze},[r,Gt,tt]),de=[{subject:"Tech",A:tt.tech,fullMark:100},{subject:"Focus",A:tt.focus,fullMark:100},{subject:"Analysis",A:tt.analysis,fullMark:100},{subject:"Charisma",A:tt.charisma,fullMark:100}],qe=F.useMemo(()=>{const oe={};return e.filter(Se=>Se.classType===p&&Se.status!=="DRAFT").forEach(Se=>{var bt;const ze=t.find(Et=>Et.assignmentId===Se.id),st=Se.unit||"General Resources";oe[st]||(oe[st]=[]),oe[st].push({...Se,lastEngagement:ze&&ze.submittedAt||null,engagementTime:((bt=ze==null?void 0:ze.metrics)==null?void 0:bt.engagementTime)||0})}),oe},[e,t,p]),nt=oe=>{const Se=new Set(f);Se.has(oe)?Se.delete(oe):Se.add(oe),m(Se)},vt=((Gs=r.gamification)==null?void 0:Gs.level)||1,Xe=((_n=r.gamification)==null?void 0:_n.currency)||0,Tt=se,Kt=Tt%1e3/1e3*100,Qt=OU(Tt),Ot=OU(Xe),Ft=vh(vt),Yr=async oe=>{const Se=oe.target.value;y(Se),await $e.switchUserView(r.id,Se)},Br=async oe=>{try{await $e.equipItem(r.id,oe,p),U(null),vi.equip(),c.success(`${oe.name} equipped.`)}catch{c.error("Failed to equip item.")}},ea=async()=>{if(!N)return;const oe=NI(N);if(await d({message:`Salvage ${N.name} for ${oe} Cyber-Flux? This item will be destroyed.`,confirmLabel:"Salvage"})){$(!0);try{await $e.disenchantItem(r.id,N,p),U(null),vi.salvage(),c.success(`Salvaged for ${oe} Cyber-Flux.`)}catch{c.error("Failed to salvage item.")}finally{$(!1)}}},qr=async oe=>{if(!N)return;const Se=Lu[oe];if(Xe<Se)return c.error("Insufficient Cyber-Flux.");$(!0);try{await $e.craftItem(r.id,N,oe,p),U(null),vi.craft(),c.success(`${oe.charAt(0)+oe.slice(1).toLowerCase()} complete.`)}catch{c.error("Fabrication protocol failed.")}finally{$(!1)}},jn=((ui=r.gamification)==null?void 0:ui.activeQuests)||[],Ir=((Ks=r.gamification)==null?void 0:Ks.completedQuests)||[],un=S.filter(oe=>jn.some(Se=>Se.questId===oe.id)),pr=S.filter(oe=>!jn.some(Se=>Se.questId===oe.id)&&!Ir.includes(oe.id)),Si=async oe=>{try{await $e.acceptQuest(r.id,oe.id),vi.questAccept(),c.success(`Contract accepted: ${oe.title}`)}catch{c.error("Failed to accept contract.")}},ws=async oe=>{const Se=oe.type==="CUSTOM";if(await d({message:Se?"Submit quest for manual HQ verification?":"Deploy agent for skill check? This will calculate your success probability based on current gear.",confirmLabel:Se?"Submit":"Deploy",variant:"info"}))try{await $e.deployMission(r.id,oe),vi.questDeploy(),c.info("Mission deployed. Awaiting verification.")}catch{c.error("Deployment failed.")}},In=F.useMemo(()=>Bx(r,p),[r,p]),Ti=In.equipped,dn=In.inventory,Ga=["HEAD","HANDS","RING1","AMULET"],Bi=["CHEST","BELT","FEET","RING2"],rr=({slot:oe})=>{const Se=Ti[oe],ze=Se?zr(Se.rarity):{border:"border-white/10",bg:"bg-black/20",text:"text-gray-600",glow:"",shimmer:""},st=()=>oe==="HEAD"?u.jsx(Vn,{className:`w-5 h-5 ${ze.text}`}):oe==="CHEST"?u.jsx(us,{className:`w-5 h-5 ${ze.text}`}):oe==="HANDS"?u.jsx(cv,{className:`w-5 h-5 ${ze.text}`}):oe==="FEET"?u.jsx(bn,{className:`w-5 h-5 ${ze.text}`}):oe==="BELT"?u.jsx(Ww,{className:`w-5 h-5 ${ze.text}`}):oe==="AMULET"?u.jsx(Qw,{className:`w-5 h-5 ${ze.text}`}):u.jsx(Qd,{className:`w-5 h-5 ${ze.text}`});return u.jsx("button",{className:`w-16 h-16 rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-110 ${ze.border} ${ze.bg} ${ze.shimmer} ${ze.glow}`,onClick:()=>Se&&U(Se),children:Se?u.jsxs(u.Fragment,{children:[st(),u.jsx("span",{className:`text-[7px] font-bold mt-0.5 truncate w-full text-center px-0.5 ${ze.text}`,children:Se.baseName||Se.name.split(" ").slice(-1)[0]}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${ze.text}`,children:Se.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[Se.rarity," ",oe]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(Se.stats).map(([bt,Et])=>`+${Et} ${bt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]}):u.jsx("span",{className:"text-[8px] font-bold text-gray-600 uppercase tracking-widest",children:oe.slice(0,4)})})};return u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full pb-12",children:[he.length>0&&u.jsx("div",{className:"lg:col-span-12 space-y-2",children:he.map(oe=>{const Se={INFO:"bg-blue-600/10 border-blue-500/30 text-blue-300",WARNING:"bg-yellow-600/10 border-yellow-500/30 text-yellow-300",URGENT:"bg-red-600/10 border-red-500/30 text-red-300 animate-pulse"};return u.jsxs("div",{className:`border rounded-2xl p-4 flex items-start gap-3 ${Se[oe.priority]}`,children:[u.jsx(gT,{className:"w-5 h-5 shrink-0 mt-0.5"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"font-bold text-sm text-white",children:oe.title}),u.jsx("div",{className:"text-xs mt-0.5 opacity-80",children:oe.content})]}),u.jsx("button",{onClick:()=>pe(oe.id),className:"p-1 text-gray-500 hover:text-white transition shrink-0",children:u.jsx(ms,{className:"w-4 h-4"})})]},oe.id)})}),b&&u.jsx("div",{className:"lg:col-span-12",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/50 rounded-2xl p-4 flex items-center justify-between shadow-[0_0_20px_rgba(59,130,246,0.3)] animate-pulse",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:u.jsx(Vn,{className:"w-5 h-5 fill-current"})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-white font-bold text-lg uppercase tracking-wider",children:[b.title," ACTIVE"]}),u.jsxs("p",{className:"text-blue-300 text-xs font-mono",children:["Protocol engaged. Gaining ",b.multiplier,"x XP on all tasks."]})]})]}),u.jsxs("div",{className:"text-3xl font-black text-white/90 font-mono tracking-tighter",children:[b.multiplier,"x"]})]})}),u.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[u.jsxs("div",{className:`bg-white/5 border rounded-3xl p-6 backdrop-blur-md relative overflow-hidden group ${Ft.tierColor.split(" ")[0]} border-opacity-30`,children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black/40 to-transparent"}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[u.jsx("div",{className:`w-24 h-24 rounded-full p-1 bg-gradient-to-tr from-white/10 to-white/5 mb-4 ${Ft.tierGlow} shadow-xl`,children:u.jsx("img",{src:r.avatarUrl,alt:"Avatar",className:`w-full h-full rounded-full border-4 object-cover ${Ft.tierColor.split(" ")[0]}`})}),u.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:((Ni=r.gamification)==null?void 0:Ni.codename)||r.name}),u.jsxs("div",{className:"flex flex-col items-center gap-1",children:[u.jsxs("span",{className:`font-mono text-xs uppercase tracking-[0.2em] mt-1 font-bold ${Ft.tierColor.split(" ")[1]}`,children:[Ft.rankName," (Lvl ",vt,")"]}),u.jsxs("span",{className:"text-[10px] bg-yellow-500/10 text-yellow-400 px-2 py-0.5 rounded border border-yellow-500/20 font-bold uppercase tracking-widest",children:["Gear Score: ",Gt]})]}),at.length>1&&u.jsxs("div",{className:"mt-4 relative w-full",children:[u.jsx("select",{value:p,onChange:Yr,className:"w-full bg-black/40 border border-white/20 text-white text-xs font-bold py-2 px-4 rounded-xl appearance-none focus:outline-none focus:border-purple-500 transition",children:at.map(oe=>u.jsx("option",{value:oe,children:oe},oe))}),u.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-3 h-3 text-gray-400 pointer-events-none"})]}),u.jsx("div",{className:"w-full h-2 bg-black/60 rounded-full mt-6 overflow-hidden border border-white/5 relative",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-cyan-400 to-purple-500 transition-all duration-1000",style:{width:`${Kt}%`}})}),u.jsxs("div",{className:"flex justify-between w-full text-[9px] text-gray-500 mt-2 font-mono font-bold relative",children:[u.jsxs("span",{children:[Qt.toLocaleString()," XP (",p,")"]}),u.jsx("span",{children:"Next Rank"}),Z&&u.jsxs("span",{className:"xp-float-anim absolute -top-6 left-1/2 -translate-x-1/2 text-sm font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 whitespace-nowrap",children:["+",Z," XP"]})]})]})]}),u.jsx("div",{className:"bg-black/20 border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-cyan-500/20 text-cyan-400 flex items-center justify-center",children:u.jsx(_ae,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Cyber-Flux"}),u.jsx("div",{className:"text-xl font-black text-white leading-none",children:Ot})]})]})}),(((br=r.gamification)==null?void 0:br.engagementStreak)||0)>0&&(()=>{var ze;const oe=((ze=r.gamification)==null?void 0:ze.engagementStreak)||0,Se=ese(oe);return u.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-2xl p-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-orange-500/20 text-orange-400 flex items-center justify-center",children:u.jsx(A8,{className:"w-6 h-6"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest",children:"Streak"}),u.jsxs("div",{className:"text-xl font-black text-orange-400 leading-none",children:[oe,"w"]})]}),Se>1&&u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase",children:"XP Bonus"}),u.jsxs("div",{className:"text-sm font-black text-yellow-400",children:["+",Math.round((Se-1)*100),"%"]})]})]})})})(),(((Ur=r.gamification)==null?void 0:Ur.loginStreak)||0)>1&&u.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-2xl p-3 flex items-center gap-3",children:[u.jsx(Uae,{className:"w-5 h-5 text-purple-400"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-bold",children:"Daily Login"}),u.jsxs("div",{className:"text-sm font-black text-purple-400",children:[((an=r.gamification)==null?void 0:an.loginStreak)||0," day streak"]})]})]}),u.jsxs("button",{onClick:()=>ae(!0),className:"w-full bg-white/5 hover:bg-white/10 border border-white/10 p-3 rounded-2xl flex items-center justify-center gap-2 transition text-gray-400 hover:text-white text-sm font-bold",children:[u.jsx(bp,{className:"w-4 h-4"})," View Profile"]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2",children:"Access Nodes"}),n.physicsLab&&u.jsxs("button",{onClick:()=>i("Physics Lab"),className:"w-full bg-blue-500/10 hover:bg-blue-500/20 border border-blue-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-blue-500/20 rounded-xl text-blue-400 shadow-inner",children:u.jsx(Ox,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Physics Lab"}),u.jsx("div",{className:"text-[10px] text-blue-300/70 uppercase font-bold tracking-tight",children:"Active Simulations"})]})]}),u.jsx(o0,{className:"w-4 h-4 text-blue-500 group-hover:translate-x-1 transition"})]}),n.evidenceLocker&&u.jsxs("button",{onClick:()=>i("Forensics"),className:"w-full bg-emerald-500/10 hover:bg-emerald-500/20 border border-emerald-500/20 p-4 rounded-2xl flex items-center justify-between transition group",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"p-2 bg-emerald-500/20 rounded-xl text-emerald-400 shadow-inner",children:u.jsx(kae,{className:"w-5 h-5"})}),u.jsxs("div",{className:"text-left",children:[u.jsx("div",{className:"font-bold text-gray-200 text-sm",children:"Evidence Log"}),u.jsx("div",{className:"text-[10px] text-emerald-300/70 uppercase font-bold tracking-tight",children:"Weekly Portfolio"})]})]}),u.jsx(o0,{className:"w-4 h-4 text-emerald-500 group-hover:translate-x-1 transition"})]})]})]}),u.jsx("div",{className:"lg:col-span-9 space-y-6",children:u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md min-h-[600px] flex flex-col",children:[D==="MISSIONS"&&u.jsxs("div",{className:"space-y-6",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2",children:"Available Contracts"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[pr.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No new contracts available. Check back later."}),pr.map(oe=>u.jsxs("div",{className:"bg-black/20 border border-indigo-500/30 p-5 rounded-2xl relative overflow-hidden group hover:border-indigo-500/60 transition",children:[u.jsxs("div",{className:"flex justify-between items-start mb-2",children:[u.jsx("h4",{className:"text-lg font-bold text-white",children:oe.title}),u.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider",children:oe.type.replace("_"," ")})]}),u.jsx("p",{className:"text-sm text-gray-400 mb-4 pr-16",children:oe.description}),u.jsxs("div",{className:"flex items-center gap-4 text-xs font-mono text-gray-500 mb-4",children:[oe.statRequirements&&u.jsx("div",{className:"flex gap-2",children:Object.entries(oe.statRequirements).map(([Se,ze])=>u.jsxs("span",{className:"bg-white/5 px-2 py-1 rounded border border-white/10 uppercase",children:[ze," ",Se]},Se))}),oe.expiresAt&&u.jsxs("span",{className:"text-red-400 flex items-center gap-1",children:[u.jsx(fs,{className:"w-3 h-3"})," Expires: ",new Date(oe.expiresAt).toLocaleDateString()]})]}),u.jsxs("button",{onClick:()=>Si(oe),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-xl text-sm font-bold shadow-lg shadow-indigo-900/20 transition flex items-center gap-2",children:[u.jsx(pT,{className:"w-4 h-4"})," Accept Contract"]})]},oe.id))]}),u.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest px-2 pt-4 border-t border-white/10",children:"Active Operations"}),u.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[un.length===0&&u.jsx("div",{className:"text-gray-500 italic px-4 py-10 text-center bg-black/10 rounded-xl border border-dashed border-white/5",children:"No active operations. Accept a contract above to begin."}),un.map(oe=>{var bt,Et;const Se=((bt=jn.find(Hr=>Hr.questId===oe.id))==null?void 0:bt.status)||"ACCEPTED",ze=(Et=jn.find(Hr=>Hr.questId===oe.id))==null?void 0:Et.deploymentRoll,st=oe.type==="CUSTOM";return u.jsxs("div",{className:"bg-[#0f0720]/80 border border-purple-500/30 p-6 rounded-3xl relative group hover:border-purple-500/60 transition-all shadow-[0_0_30px_rgba(168,85,247,0.1)]",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-600/20 text-purple-400 flex items-center justify-center border border-purple-500/20 shadow-inner",children:u.jsx(xo,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"text-white font-bold text-lg leading-tight",children:oe.title}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-black tracking-[0.1em]",children:[oe.type," MISSION"]})]})]}),u.jsx("span",{className:`text-[10px] font-black tracking-widest px-3 py-1 rounded-full border ${Se==="COMPLETED"?"bg-green-500/20 text-green-400 border-green-500/30":Se==="FAILED"?"bg-red-500/20 text-red-400 border-red-500/30":Se==="DEPLOYED"?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-white/5 text-gray-400 border-white/10"}`,children:Se})]}),Se==="ACCEPTED"?u.jsxs(u.Fragment,{children:[u.jsx("p",{className:"text-sm text-gray-400 mb-6 leading-relaxed bg-black/20 p-4 rounded-2xl border border-white/5",children:oe.description}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>ws(oe),className:"flex-1 bg-indigo-600 hover:bg-indigo-500 text-white py-4 rounded-2xl text-sm font-black uppercase tracking-widest transition shadow-lg shadow-indigo-900/40 flex items-center justify-center gap-3 group/btn",children:[u.jsx(Dae,{className:"w-5 h-5 group-hover/btn:animate-pulse"}),st?"Broadcast Submission to HQ":"Deploy for Skill Check"]}),oe.isGroupQuest&&u.jsx("button",{className:"bg-white/5 hover:bg-white/10 text-white px-6 py-4 rounded-2xl text-sm font-black transition border border-white/10",children:u.jsx(Wc,{className:"w-5 h-5"})})]})]}):Se==="DEPLOYED"?u.jsxs("div",{className:"bg-black/40 p-6 rounded-3xl border border-purple-500/20 flex flex-col gap-4 animate-in fade-in zoom-in-95",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-ping absolute -top-1 -right-1"}),u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full absolute -top-1 -right-1 shadow-[0_0_10px_#22c55e]"}),u.jsx(Vn,{className:"w-6 h-6 text-purple-400"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Uplink Status"}),u.jsx("div",{className:"text-sm font-black text-white font-mono uppercase tracking-tighter",children:st?"AWAITING_HQ_SIG_VERIFICATION":ze===100?"SUCCESS_VERIFIED":"FAILURE_DETECTED"})]})]}),u.jsx("div",{className:"h-10 w-px bg-white/5"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold",children:"Node"}),u.jsx("div",{className:"text-xs font-bold text-purple-300",children:"HQ_CENTRAL"})]})]}),u.jsx("div",{className:"h-1 w-full bg-white/5 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-indigo-500 animate-pulse w-3/4"})}),u.jsx("p",{className:"text-[11px] text-gray-500 italic text-center font-mono",children:st?"Encrypted transmission confirmed. HQ is currently reviewing your evidence data. Rewards will be issued upon manual signal confirmation.":"Autonomous verification complete. Skill check results logged below."})]}):null]},oe.id)})]})]},"missions"),D==="RESOURCES"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:Object.entries(qe).length===0?u.jsx("div",{className:"text-center py-20 text-gray-500 italic",children:"No resources released for this class node."}):u.jsx("div",{className:"space-y-4",children:Object.entries(qe).sort().map(([oe,Se])=>u.jsxs("div",{className:"bg-black/20 rounded-2xl border border-white/5 overflow-hidden",children:[u.jsxs("button",{onClick:()=>nt(oe),className:"w-full flex items-center justify-between p-4 hover:bg-white/5 transition",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[f.has(oe)?u.jsx(Vs,{className:"w-4 h-4 text-purple-400"}):u.jsx(o0,{className:"w-4 h-4 text-gray-500"}),u.jsx("span",{className:"font-bold text-sm text-gray-300 uppercase tracking-wider",children:oe})]}),u.jsxs("span",{className:"text-[10px] bg-white/5 text-gray-500 px-2 py-0.5 rounded-full font-mono",children:[Se.length," Files"]})]}),f.has(oe)&&u.jsx("div",{className:"grid grid-cols-1 gap-2 p-3 pt-0 animate-in slide-in-from-top-2 duration-300",children:Se.map(ze=>{const st=!!ze.dueDate,bt=ze.dueDate?new Date(ze.dueDate):null,Et=new Date,Hr=bt?Math.ceil((bt.getTime()-Et.getTime())/864e5):1/0,Hn=Hr<=0?"text-red-400":Hr<=2?"text-yellow-400":"text-gray-500",Ka=Math.floor(ze.engagementTime/60),Xs=Ka>=5;return u.jsxs("div",{className:"bg-white/5 border border-white/5 hover:border-purple-500/40 p-4 rounded-xl transition-all cursor-pointer group flex items-center gap-4",onClick:()=>a&&a(ze.id),children:[u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 transition-all ${Xs?"bg-green-500/20 text-green-400 ring-2 ring-green-500/30":ze.lastEngagement?"bg-green-500/10 text-green-400":"bg-purple-500/10 text-purple-400 group-hover:scale-110 shadow-lg group-hover:shadow-purple-500/20"}`,children:Xs?u.jsx(bn,{className:"w-6 h-6"}):ze.lastEngagement?u.jsx(bn,{className:"w-5 h-5 opacity-60"}):N3e[ze.category||"Supplemental"]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-[8px] font-bold uppercase px-1.5 py-0.5 rounded bg-black/40 text-gray-500 border border-white/5",children:ze.category}),u.jsx("h4",{className:"font-bold text-white text-sm truncate",children:ze.title})]}),u.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:u.jsx("p",{className:"text-xs text-gray-500 truncate",children:ze.description})}),u.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[ze.lastEngagement&&u.jsxs("span",{className:"text-[9px] text-green-500 font-bold",children:[Ka,"m engaged"]}),st&&u.jsxs("span",{className:`text-[9px] font-bold flex items-center gap-0.5 ${Hn}`,children:[u.jsx(hs,{className:"w-3 h-3"}),Hr<=0?"Overdue":Hr===1?"Due tomorrow":`Due in ${Hr}d`]})]})]}),u.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition",children:u.jsx(pF,{className:"w-4 h-4 text-purple-400 fill-current"})})]},ze.id)})})]},oe))})},"resources"),D==="LOADOUT"&&u.jsxs("div",{className:"flex flex-col h-full",style:{animation:"tabEnter 0.3s ease-out both"},children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-1 min-h-0",children:[u.jsxs("div",{className:"bg-black/30 rounded-2xl border border-white/10 relative overflow-hidden flex flex-col items-center justify-center p-4 min-h-[400px]",children:[u.jsx("div",{className:"absolute inset-0 loadout-hex-bg pointer-events-none"}),u.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:`radial-gradient(ellipse at 50% 60%, hsla(${(((ra=In.appearance)==null?void 0:ra.hue)||0)+200}, 60%, 25%, 0.3) 0%, transparent 70%)`}}),u.jsxs("div",{className:"flex w-full h-full relative z-10 justify-between items-center px-4",children:[u.jsx("div",{className:"flex flex-col gap-4",children:Ga.map(oe=>u.jsx(rr,{slot:oe},oe))}),u.jsx("div",{className:"w-40 h-full relative",children:u.jsx(Xb,{equipped:Ti,appearance:In.appearance,evolutionLevel:vt})}),u.jsx("div",{className:"flex flex-col gap-4",children:Bi.map(oe=>u.jsx(rr,{slot:oe},oe))})]}),u.jsxs("button",{onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),k(!0)},className:"absolute bottom-6 bg-purple-600/20 hover:bg-purple-600 text-purple-400 hover:text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] border border-purple-500/30 transition shadow-lg z-[40] flex items-center gap-2",children:[u.jsx(qae,{className:"w-3.5 h-3.5"}),"Edit DNA Profile"]})]}),u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5 flex-1 min-h-[200px]",children:[u.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-2",children:"Performance Radar"}),u.jsx("div",{className:"h-[200px]",children:u.jsx(EH,{width:"100%",height:"100%",children:u.jsxs(h3e,{cx:"50%",cy:"50%",outerRadius:"70%",data:de,children:[u.jsx("defs",{children:u.jsxs("linearGradient",{id:"radarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[u.jsx("stop",{offset:"0%",stopColor:"#06b6d4",stopOpacity:.6}),u.jsx("stop",{offset:"100%",stopColor:"#a855f7",stopOpacity:.3})]})}),u.jsx(QG,{stroke:"rgba(255,255,255,0.08)"}),u.jsx(Vg,{dataKey:"subject",tick:{fill:"#9ca3af",fontSize:10,fontWeight:700}}),u.jsx(zg,{angle:30,domain:[0,150],tick:!1,axisLine:!1}),u.jsx($g,{name:"Stats",dataKey:"A",stroke:"#a855f7",strokeWidth:2,fill:"url(#radarGradient)",fillOpacity:.5,animationDuration:800})]})})})]}),u.jsx("div",{className:"bg-black/20 rounded-2xl p-4 border border-white/5",children:u.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),u.jsx("span",{className:"text-gray-500",children:"Tech"})," ",u.jsx("span",{className:"text-blue-400 font-bold ml-auto",children:tt.tech})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),u.jsx("span",{className:"text-gray-500",children:"Focus"})," ",u.jsx("span",{className:"text-green-400 font-bold ml-auto",children:tt.focus})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),u.jsx("span",{className:"text-gray-500",children:"Analysis"})," ",u.jsx("span",{className:"text-yellow-400 font-bold ml-auto",children:tt.analysis})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400"}),u.jsx("span",{className:"text-gray-500",children:"Charisma"})," ",u.jsx("span",{className:"text-purple-400 font-bold ml-auto",children:tt.charisma})]})]})})]})]}),u.jsxs("div",{className:"mt-6 flex-1 min-h-[250px] bg-black/40 border border-white/10 rounded-2xl p-4 overflow-hidden flex flex-col",children:[u.jsxs("h4",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center justify-between",children:[u.jsxs("span",{children:["Gear Storage (",dn.length,")"]}),u.jsx("span",{className:"text-[9px] text-gray-600",children:"Click to Inspect"})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-3 content-start",children:[dn.map((oe,Se)=>{const ze=Object.values(Ti).some(bt=>(bt==null?void 0:bt.id)===oe.id),st=zr(oe.rarity);return u.jsxs("button",{onClick:()=>U(oe),className:`aspect-square rounded-xl border-2 flex flex-col items-center justify-center relative group transition-all hover:scale-105 ${ze?"ring-2 ring-white/50 opacity-100":"opacity-80 hover:opacity-100"} ${st.bg} ${st.border} ${st.shimmer} ${ze?st.glow:""}`,children:[oe.slot==="HEAD"&&u.jsx(Vn,{className:`w-6 h-6 ${st.text}`}),oe.slot==="CHEST"&&u.jsx(us,{className:`w-6 h-6 ${st.text}`}),oe.slot==="HANDS"&&u.jsx(cv,{className:`w-6 h-6 ${st.text}`}),oe.slot==="FEET"&&u.jsx(bn,{className:`w-6 h-6 ${st.text}`}),oe.slot==="BELT"&&u.jsx(Ww,{className:`w-6 h-6 ${st.text}`}),oe.slot==="AMULET"&&u.jsx(Qw,{className:`w-6 h-6 ${st.text}`}),oe.slot==="RING"&&u.jsx(Qd,{className:`w-6 h-6 ${st.text}`}),ze&&u.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-green-500 rounded-full shadow-lg"}),u.jsxs("div",{className:"absolute -top-[4.5rem] left-1/2 -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-150 pointer-events-none z-30 bg-black/95 border border-white/15 px-3 py-2 rounded-lg whitespace-nowrap shadow-xl backdrop-blur-sm",children:[u.jsx("div",{className:`text-[10px] font-bold ${st.text}`,children:oe.name}),u.jsxs("div",{className:"text-[9px] text-gray-400 font-mono",children:[oe.rarity," ",oe.slot,ze?"  EQUIPPED":""]}),u.jsx("div",{className:"text-[9px] text-gray-500 mt-0.5",children:Object.entries(oe.stats).map(([bt,Et])=>`+${Et} ${bt.slice(0,3).toUpperCase()}`).join("  ")}),u.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-black/95 border-b border-r border-white/15 rotate-45"})]})]},Se)}),Array.from({length:Math.max(0,16-dn.length)}).map((oe,Se)=>u.jsx("div",{className:"aspect-square rounded-xl border border-white/5 bg-white/5"},`empty-${Se}`))]})]})]},"loadout"),D==="ACHIEVEMENTS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(p3e,{unlockedAchievements:((Oi=r.gamification)==null?void 0:Oi.unlockedAchievements)||[],achievementProgress:Ie})},"achievements"),D==="SKILLS"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(y3e,{specialization:(Ws=r.gamification)==null?void 0:Ws.specialization,skillPoints:((Ts=r.gamification)==null?void 0:Ts.skillPoints)||0,unlockedSkills:((na=r.gamification)==null?void 0:na.unlockedSkills)||[]})},"skills"),D==="FORTUNE"&&u.jsx("div",{className:"space-y-8",style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(v3e,{currency:Xe,lastSpin:(ut=r.gamification)==null?void 0:ut.lastWheelSpin,classType:p})},"fortune"),D==="TUTORING"&&u.jsx("div",{style:{animation:"tabEnter 0.3s ease-out both"},children:u.jsx(_3e,{userId:r.id,userName:r.name,classType:p})},"tutoring")]})}),u.jsxs("div",{className:"lg:col-span-12 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsx("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md",children:u.jsx(w3e,{userId:r.id,activeChallenges:((le=r.gamification)==null?void 0:le.activeDailyChallenges)||[],classType:p})}),u.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-3xl p-6 backdrop-blur-md space-y-6",children:[u.jsx(b3e,{userId:r.id,userName:r.name,classType:p}),u.jsx(x3e,{classType:p})]})]}),u.jsx(Va,{isOpen:A,onClose:()=>{k(!1),Q(null),K(null)},title:"Operative DNA Profile",maxWidth:"max-w-md",children:u.jsxs("div",{className:"p-4 space-y-8",children:[u.jsx("div",{className:"flex justify-center",children:u.jsx("div",{className:"w-48 h-72 bg-black/40 rounded-3xl p-4 border border-purple-500/20 shadow-inner loadout-hex-bg",children:u.jsx(Xb,{equipped:Ti,appearance:{...In.appearance,hue:z??((Le=In.appearance)==null?void 0:Le.hue)??0,bodyType:ee??((Qe=In.appearance)==null?void 0:Qe.bodyType)??"A"}})})}),u.jsxs("div",{className:"bg-white/5 p-5 rounded-3xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 text-center",children:"Agent Frame"}),u.jsx("div",{className:"flex justify-center gap-3",children:["A","B"].map(oe=>{var ze;const Se=(ee??((ze=In.appearance)==null?void 0:ze.bodyType)??"A")===oe;return u.jsxs("button",{onClick:()=>K(oe),className:`px-6 py-3 rounded-xl border-2 transition-all font-bold text-sm ${Se?"border-purple-500 bg-purple-500/20 text-white scale-105":"border-white/10 text-gray-500 hover:border-white/20 hover:text-gray-300"}`,children:["Frame ",oe==="A"?"Alpha":"Beta"]},oe)})})]}),u.jsxs("div",{className:"bg-white/5 p-6 rounded-3xl border border-white/10",children:[u.jsx("label",{className:"block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-6 text-center",children:"Bio-Signature Tint (Hue-Shift)"}),u.jsx("div",{className:"grid grid-cols-6 gap-3",children:[0,30,60,90,120,150,180,210,240,270,300,330].map(oe=>{var ze;const Se=(z??((ze=In.appearance)==null?void 0:ze.hue)??0)===oe;return u.jsx("button",{onClick:()=>Q(oe),className:`aspect-square rounded-xl border-3 transition-all hover:scale-110 shadow-lg ${Se?"border-white scale-110 ring-2 ring-white/30":"border-transparent"}`,style:{backgroundColor:`hsl(${oe}, 60%, 45%)`}},oe)})})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>{k(!1),Q(null),K(null)},className:"flex-1 py-3 bg-white/5 border border-white/10 text-gray-400 font-bold rounded-xl hover:bg-white/10 transition",children:"Cancel"}),u.jsx("button",{onClick:()=>{var oe,Se;Ke(z??((oe=In.appearance)==null?void 0:oe.hue)??0,ee??((Se=In.appearance)==null?void 0:Se.bodyType)??"A"),Q(null),K(null)},className:"flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-500 transition shadow-lg shadow-purple-900/20",children:"Save Profile"})]})]})}),u.jsx(Va,{isOpen:!!N,onClose:()=>U(null),title:"Nano-Fabricator Terminal",maxWidth:"max-w-xl",children:N&&u.jsxs("div",{className:"space-y-6 text-gray-100",children:[u.jsxs("div",{className:`p-5 rounded-xl border ${zr(N.rarity).bg} ${zr(N.rarity).border} ${zr(N.rarity).shimmer} relative overflow-hidden`,children:[u.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[u.jsxs("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0 border ${zr(N.rarity).border} ${zr(N.rarity).bg}`,style:{boxShadow:N.rarity==="UNIQUE"?"0 0 20px rgba(249,115,22,0.3)":N.rarity==="RARE"?"0 0 15px rgba(234,179,8,0.2)":"none"},children:[N.slot==="HEAD"&&u.jsx(Vn,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="CHEST"&&u.jsx(us,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="HANDS"&&u.jsx(cv,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="FEET"&&u.jsx(bn,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="BELT"&&u.jsx(Ww,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="AMULET"&&u.jsx(Qw,{className:`w-7 h-7 ${zr(N.rarity).text}`}),N.slot==="RING"&&u.jsx(Qd,{className:`w-7 h-7 ${zr(N.rarity).text}`})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:`text-lg font-bold ${zr(N.rarity).text}`,children:N.name}),u.jsxs("div",{className:"text-xs text-gray-300 font-mono uppercase",children:[N.rarity," ",N.slot]})]})]}),u.jsx("div",{className:"mt-4 space-y-1",children:Object.entries(N.stats).map(([oe,Se])=>u.jsxs("div",{className:"flex justify-between text-sm text-gray-200 border-b border-white/5 pb-1",children:[u.jsx("span",{className:"uppercase text-xs text-gray-400 font-bold",children:oe}),u.jsxs("span",{className:"font-mono font-bold",children:["+",Se]})]},oe))}),u.jsx("div",{className:"mt-4 flex gap-2 flex-wrap",children:N.affixes.map((oe,Se)=>u.jsxs("span",{className:"text-[9px] bg-black/40 px-2 py-1 rounded border border-white/10 text-gray-400",children:[oe.name," (T",oe.tier,")"]},Se))})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[(()=>{const oe=N.slot==="RING"?"RING1":N.slot,Se=Ti[oe]||(N.slot==="RING"?Ti.RING2:null);if(!Se||Se.id===N.id)return null;const ze=zr(Se.rarity),st=new Set([...Object.keys(N.stats),...Object.keys(Se.stats)]);return u.jsxs("div",{className:"col-span-2 bg-black/30 border border-white/10 rounded-xl p-3 mb-1",children:[u.jsx("div",{className:"text-[9px] text-gray-500 uppercase font-bold tracking-widest mb-2",children:"Replacing Currently Equipped"}),u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:`text-xs font-bold ${ze.text}`,children:Se.name}),u.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:Se.rarity})]}),u.jsx("div",{className:"flex flex-wrap gap-x-4 gap-y-1",children:Array.from(st).map(bt=>{const Et=N.stats[bt]||0,Hr=Se.stats[bt]||0,Hn=Et-Hr;return Hn===0?u.jsxs("span",{className:"text-[10px] text-gray-600 font-mono",children:[bt.slice(0,3).toUpperCase(),": 0"]},bt):u.jsxs("span",{className:`text-[10px] font-mono font-bold ${Hn>0?"text-green-400":"text-red-400"}`,children:[bt.slice(0,3).toUpperCase(),": ",Hn>0?"":"",Math.abs(Hn)]},bt)})})]})})(),u.jsx("button",{onClick:()=>Br(N),className:"col-span-2 py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition shadow-lg shadow-green-900/20",disabled:M,children:"Equip Gear"}),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsx("div",{className:"col-span-2 text-center text-xs text-gray-500 font-bold uppercase tracking-widest mb-1",children:"Fabrication Protocols"}),u.jsxs("button",{onClick:()=>qr("RECALIBRATE"),disabled:M||Xe<Lu.RECALIBRATE,className:"bg-black/20 hover:bg-purple-900/20 border border-white/10 hover:border-purple-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-purple-300",children:"Recalibrate"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Lu.RECALIBRATE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll numeric values within current tier."})]}),u.jsxs("button",{onClick:()=>qr("REFORGE"),disabled:M||Xe<Lu.REFORGE||N.rarity==="UNIQUE",className:"bg-black/20 hover:bg-red-900/20 border border-white/10 hover:border-red-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-red-300",children:"Reforge"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Lu.REFORGE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Reroll all affixes. Keeps Rarity."})]}),u.jsxs("button",{onClick:()=>qr("OPTIMIZE"),disabled:M||Xe<Lu.OPTIMIZE,className:"col-span-2 bg-black/20 hover:bg-yellow-900/20 border border-white/10 hover:border-yellow-500/50 p-3 rounded-xl text-left transition group disabled:opacity-50",children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-300 group-hover:text-yellow-300",children:"Optimize Tier"}),u.jsxs("span",{className:"text-[10px] bg-cyan-900/30 text-cyan-400 px-1.5 rounded",children:[Lu.OPTIMIZE," Flux"]})]}),u.jsx("p",{className:"text-[9px] text-gray-500",children:"Upgrade affix tiers to match current operative level."})]}),u.jsx("div",{className:"col-span-2 border-t border-white/10 my-2"}),u.jsxs("button",{onClick:ea,disabled:M,className:"col-span-2 py-3 bg-red-900/20 hover:bg-red-900/40 border border-red-500/30 text-red-400 font-bold rounded-xl transition flex items-center justify-center gap-2",children:[u.jsx(Di,{className:"w-4 h-4"}),"Salvage for ",NI(N)," Flux"]})]})]})}),ge&&u.jsx(E3e,{user:r,classType:p,onClose:()=>ae(!1)}),X&&u.jsx(S3e,{item:X,onClose:()=>J(null)}),u.jsx(Va,{isOpen:E,onClose:Ye,title:"PROMOTION GRANTED",maxWidth:"max-w-md",children:u.jsxs("div",{className:"text-center py-6 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",style:{contain:"strict"},children:Array.from({length:20}).map((oe,Se)=>u.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{left:`${10+Math.random()*80}%`,top:"-10px",backgroundColor:["#eab308","#8b5cf6","#06b6d4","#f97316","#22c55e","#ec4899"][Se%6],animation:`confettiDrift ${1.5+Math.random()*1.5}s ${Math.random()*.8}s ease-out forwards`,opacity:.9,willChange:"transform, opacity"}},Se))}),u.jsxs("div",{className:"relative inline-block mb-6",children:[u.jsx("div",{className:"absolute inset-[-12px] rounded-full border-2 border-yellow-400/30 animate-ping",style:{animationDuration:"2s"}}),u.jsx("div",{className:"absolute inset-[-6px] rounded-full border border-yellow-400/20 animate-pulse"}),u.jsx("div",{className:"level-up-burst w-28 h-28 mx-auto bg-gradient-to-tr from-yellow-400 via-amber-500 to-yellow-600 rounded-full flex items-center justify-center shadow-[0_0_60px_rgba(234,179,8,0.6)] relative",children:u.jsx("span",{className:"text-5xl font-black text-white drop-shadow-lg",children:vt})})]}),u.jsx("div",{className:"mb-2 overflow-hidden inline-block",children:u.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",style:{animation:"typeReveal 0.8s steps(20) 0.4s both",overflow:"hidden",whiteSpace:"nowrap",display:"inline-block"},children:Ft.rankName})}),u.jsx("p",{className:"text-gray-400 mb-8 animate-in fade-in duration-500",style:{animationDelay:"0.6s",animationFillMode:"both"},children:"Clearance Level Increased. New capabilities unlocked."}),C&&u.jsxs("div",{className:`${zr(C.rarity).shimmer} bg-white/5 border rounded-xl p-5 mb-6 relative overflow-hidden ${zr(C.rarity).border}`,style:{animation:"levelUpBurst 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both"},children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/5 via-white/10 to-transparent opacity-50"}),u.jsxs("div",{className:"relative z-10",children:[u.jsx("div",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-[0.2em] mb-2",children:" Supply Drop Received"}),u.jsx("div",{className:`text-xl font-bold ${zr(C.rarity).text}`,children:C.name}),u.jsxs("div",{className:"text-[10px] text-gray-500 uppercase font-mono mt-1",children:[C.rarity," ",C.slot]}),u.jsx("div",{className:"flex justify-center gap-5 mt-3 text-[10px] font-mono",children:Object.entries(C.stats).map(([oe,Se])=>u.jsxs("span",{className:"text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded border border-emerald-500/20",children:["+",Se," ",oe.toUpperCase()]},oe))})]})]}),u.jsx("button",{onClick:Ye,className:"w-full py-4 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 text-black font-black rounded-xl uppercase tracking-widest transition shadow-[0_0_30px_rgba(234,179,8,0.3)]",style:{animation:"buttonFadeIn 0.4s ease-out 1.2s both"},children:"Accept Promotion"})]})})]})};var S2=typeof self<"u"?self:global;const lg=typeof navigator<"u",k3e=lg&&typeof HTMLImageElement>"u",Qb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),T2=S2.Buffer,Ky=S2.BigInt,A2=!!T2,C3e=r=>r;function Yb(r,e=C3e){if(Qb)try{return typeof require=="function"?Promise.resolve(e(require(r))):import(r).then(e)}catch{console.warn(`Couldn't load ${r}`)}}let ZE=S2.fetch;const j3e=r=>ZE=r;if(!S2.fetch){const r=Yb("http",(n=>n)),e=Yb("https",(n=>n)),t=(n,{headers:i}={})=>new Promise((async(a,s)=>{let{port:c,hostname:d,pathname:f,protocol:m,search:p}=new URL(n);const y={method:"GET",hostname:d,path:encodeURI(f)+p,headers:i};c!==""&&(y.port=Number(c));const b=(m==="https:"?await e:await r).request(y,(T=>{if(T.statusCode===301||T.statusCode===302){let S=new URL(T.headers.location,n).toString();return t(S,{headers:i}).then(a).catch(s)}a({status:T.statusCode,arrayBuffer:()=>new Promise((S=>{let w=[];T.on("data",(E=>w.push(E))),T.on("end",(()=>S(Buffer.concat(w))))}))})}));b.on("error",s),b.end()}));j3e(t)}function Ct(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}const Zb=r=>YK(r)?void 0:r,I3e=r=>r!==void 0;function YK(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(I3e).length===0)}function Fn(r){let e=new Error(r);throw delete e.stack,e}function t0(r){return(r=(function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e})(r).trim())===""?void 0:r}function ZA(r){let e=(function(t){let n=0;return t.ifd0.enabled&&(n+=1024),t.exif.enabled&&(n+=2048),t.makerNote&&(n+=2048),t.userComment&&(n+=1024),t.gps.enabled&&(n+=512),t.interop.enabled&&(n+=100),t.ifd1.enabled&&(n+=1024),n+2048})(r);return r.jfif.enabled&&(e+=50),r.xmp.enabled&&(e+=2e4),r.iptc.enabled&&(e+=14e3),r.icc.enabled&&(e+=6e3),e}const JA=r=>String.fromCharCode.apply(null,r),CU=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function ZK(r){return CU?CU.decode(r):A2?Buffer.from(r).toString("utf8"):decodeURIComponent(escape(JA(r)))}class ga{static from(e,t){return e instanceof this&&e.le===t?e:new ga(e,void 0,void 0,t)}constructor(e,t=0,n,i){if(typeof i=="boolean"&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){n===void 0&&(n=e.byteLength-t);let a=new DataView(e,t,n);this._swapDataView(a)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof ga){n===void 0&&(n=e.byteLength-t),(t+=e.byteOffset)+n>e.byteOffset+e.byteLength&&Fn("Creating view outside of available memory in ArrayBuffer");let a=new DataView(e.buffer,t,n);this._swapDataView(a)}else if(typeof e=="number"){let a=new DataView(new ArrayBuffer(e));this._swapDataView(a)}else Fn("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,n=ga){return e instanceof DataView||e instanceof ga?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Fn("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new n(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new ga(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return ZK(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let n=this.getUint8Array(e,t);return JA(n)}getUnicodeString(e=0,t=this.byteLength){const n=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return JA(n)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}getUint(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function e7(r,e){Fn(`${r} '${e}' was not loaded, try using full build of exifr.`)}class JE extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||e7(this.kind,e),t&&(e in t||(function(n,i){Fn(`Unknown ${n} '${i}'.`)})(this.kind,e),t[e].enabled||e7(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var So=new JE("file parser"),zn=new JE("segment parser"),ko=new JE("file reader");function R3e(r,e){return typeof r=="string"?jU(r,e):lg&&!k3e&&r instanceof HTMLImageElement?jU(r.src,e):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new ga(r):lg&&r instanceof Blob?t7(r,e,"blob",O0):void Fn("Invalid input argument")}function jU(r,e){return(t=r).startsWith("data:")||t.length>1e4?r7(r,e,"base64"):Qb&&r.includes("://")?t7(r,e,"url",N0):Qb?r7(r,e,"fs"):lg?t7(r,e,"url",N0):void Fn("Invalid input argument");var t}async function t7(r,e,t,n){return ko.has(t)?r7(r,e,t):n?(async function(i,a){let s=await a(i);return new ga(s)})(r,n):void Fn(`Parser ${t} is not loaded`)}async function r7(r,e,t){let n=new(ko.get(t))(r,e);return await n.read(),n}const N0=r=>ZE(r).then((e=>e.arrayBuffer())),O0=r=>new Promise(((e,t)=>{let n=new FileReader;n.onloadend=()=>e(n.result||new ArrayBuffer),n.onerror=t,n.readAsArrayBuffer(r)}));class M3e extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function kn(r,e,t){let n=new M3e;for(let[i,a]of t)n.set(i,a);if(Array.isArray(e))for(let i of e)r.set(i,n);else r.set(e,n);return n}function k0(r,e,t){let n,i=r.get(e);for(n of t)i.set(n[0],n[1])}const li=new Map,qs=new Map,Fc=new Map,Mc=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],cf=["jfif","xmp","icc","iptc","ihdr"],C0=["tiff",...cf],yn=["ifd0","ifd1","exif","gps","interop"],Pc=[...C0,...yn],Dc=["makerNote","userComment"],uf=["translateKeys","translateValues","reviveValues","multiSegment"],Lc=[...uf,"sanitize","mergeOutput","silentErrors"];class JK{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Sm extends JK{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,n,i){if(super(),Ct(this,"enabled",!1),Ct(this,"skip",new Set),Ct(this,"pick",new Set),Ct(this,"deps",new Set),Ct(this,"translateKeys",!1),Ct(this,"translateValues",!1),Ct(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(i),this.canBeFiltered=yn.includes(e),this.canBeFiltered&&(this.dict=li.get(e)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:s}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),s&&s.length>0&&this.translateTagSet(s,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:Fn(`Invalid options argument: ${n}`)}applyInheritables(e){let t,n;for(t of uf)n=e[t],n!==void 0&&(this[t]=n)}translateTagSet(e,t){if(this.dict){let n,i,{tagKeys:a,tagValues:s}=this.dict;for(n of e)typeof n=="string"?(i=s.indexOf(n),i===-1&&(i=a.indexOf(Number(n))),i!==-1&&t.add(Number(a[i]))):t.add(n)}else for(let n of e)t.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Jb(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Jb(this.pick,this.deps)}}var Hi={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},IU=new Map;class z0 extends JK{static useCached(e){let t=IU.get(e);return t!==void 0||(t=new this(e),IU.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Fn(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=lg?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Mc)this[e]=Hi[e];for(e of Lc)this[e]=Hi[e];for(e of Dc)this[e]=Hi[e];for(e of Pc)this[e]=new Sm(e,Hi[e],void 0,this)}setupFromTrue(){let e;for(e of Mc)this[e]=Hi[e];for(e of Lc)this[e]=Hi[e];for(e of Dc)this[e]=!0;for(e of Pc)this[e]=new Sm(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Mc)this[t]=Hi[t];for(t of Lc)this[t]=Hi[t];for(t of Dc)this[t]=Hi[t];for(t of Pc)this[t]=new Sm(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,yn)}setupFromObject(e){let t;for(t of(yn.ifd0=yn.ifd0||yn.image,yn.ifd1=yn.ifd1||yn.thumbnail,Object.assign(this,e),Mc))this[t]=AS(e[t],Hi[t]);for(t of Lc)this[t]=AS(e[t],Hi[t]);for(t of Dc)this[t]=AS(e[t],Hi[t]);for(t of C0)this[t]=new Sm(t,Hi[t],e[t],this);for(t of yn)this[t]=new Sm(t,Hi[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,yn,Pc),e.tiff===!0?this.batchEnableWithBool(yn,!0):e.tiff===!1?this.batchEnableWithUserValue(yn,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,yn):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,yn)}batchEnableWithBool(e,t){for(let n of e)this[n].enabled=t}batchEnableWithUserValue(e,t){for(let n of e){let i=t[n];this[n].enabled=i!==!1&&i!==void 0}}setupGlobalFilters(e,t,n,i=n){if(e&&e.length){for(let s of i)this[s].enabled=!1;let a=RU(e,n);for(let[s,c]of a)Jb(this[s].pick,c),this[s].enabled=!0}else if(t&&t.length){let a=RU(t,n);for(let[s,c]of a)Jb(this[s].skip,c)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:n,iptc:i,icc:a}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),a.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:n,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),n.needed&&e.deps.add(34853),this.tiff.enabled=yn.some((a=>this[a].enabled===!0))||this.makerNote||this.userComment;for(let a of yn)this[a].finalizeFilters()}get onlyTiff(){return!cf.map((e=>this[e].enabled)).some((e=>e===!0))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of C0)this[e].enabled&&!zn.has(e)&&e7("segment parser",e)}}function RU(r,e){let t,n,i,a,s=[];for(i of e){for(a of(t=li.get(i),n=[],t))(r.includes(a[0])||r.includes(a[1]))&&n.push(a[0]);n.length&&s.push([i,n])}return s}function AS(r,e){return r!==void 0?r:e!==void 0?e:void 0}function Jb(r,e){for(let t of e)r.add(t)}Ct(z0,"default",Hi);class lu{constructor(e){Ct(this,"parsers",{}),Ct(this,"output",{}),Ct(this,"errors",[]),Ct(this,"pushToErrors",(t=>this.errors.push(t))),this.options=z0.useCached(e)}async read(e){this.file=await R3e(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[n,i]of So)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[n]=!0;this.file.close&&this.file.close(),Fn("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Zb(e)}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async n=>{let i=await n.parse();n.assignToOutput(e,i)}));this.options.silentErrors&&(t=t.map((n=>n.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,n=zn.get("tiff",e);var i;if(t.tiff?i={start:0,type:"tiff"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment("tiff")),i===void 0)return;let a=await this.fileParser.ensureSegmentChunk(i),s=this.parsers.tiff=new n(a,e,t),c=await s.extractThumbnail();return t.close&&t.close(),c}}async function E2(r,e){let t=new lu(e);return await t.read(r),t.parse()}var P3e=Object.freeze({__proto__:null,parse:E2,Exifr:lu,fileParsers:So,segmentParsers:zn,fileReaders:ko,tagKeys:li,tagValues:qs,tagRevivers:Fc,createDictionary:kn,extendDictionary:k0,fetchUrlAsArrayBuffer:N0,readBlobAsArrayBuffer:O0,chunkedProps:Mc,otherSegments:cf,segments:C0,tiffBlocks:yn,segmentsAndBlocks:Pc,tiffExtractables:Dc,inheritables:uf,allFormatters:Lc,Options:z0});class N2{constructor(e,t,n){Ct(this,"errors",[]),Ct(this,"ensureSegmentChunk",(async i=>{let a=i.start,s=i.size||65536;if(this.file.chunked)if(this.file.available(a,s))i.chunk=this.file.subarray(a,s);else try{i.chunk=await this.file.readChunk(a,s)}catch(c){Fn(`Couldn't read segment: ${JSON.stringify(i)}. ${c.message}`)}else this.file.byteLength>a+s?i.chunk=this.file.subarray(a,s):i.size===void 0?i.chunk=this.file.subarray(a):Fn("Segment unreachable: "+JSON.stringify(i));return i.chunk})),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=n}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let n=new(zn.get(e))(t,this.options,this.file);return this.parsers[e]=n}createParsers(e){for(let t of e){let{type:n,chunk:i}=t,a=this.options[n];if(a&&a.enabled){let s=this.parsers[n];s&&s.append||s||this.createParser(n,i)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}class Ls{static findPosition(e,t){let n=e.getUint16(t+2)+2,i=typeof this.headerLength=="function"?this.headerLength(e,t,n):this.headerLength,a=t+i,s=n-i;return{offset:t,length:n,headerLength:i,start:a,size:s,end:a+s}}static parse(e,t={}){return new this(e,new z0({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof ga?e:new ga(e)}constructor(e,t={},n){Ct(this,"errors",[]),Ct(this,"raw",new Map),Ct(this,"handleError",(i=>{if(!this.options.silentErrors)throw i;this.errors.push(i.message)})),this.chunk=this.normalizeInput(e),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let n=Fc.get(t),i=qs.get(t),a=li.get(t),s=this.options[t],c=s.reviveValues&&!!n,d=s.translateValues&&!!i,f=s.translateKeys&&!!a,m={};for(let[p,y]of e)c&&n.has(p)?y=n.get(p)(y):d&&i.has(p)&&(y=this.translateValue(y,i.get(p))),f&&a.has(p)&&(p=a.get(p)||p),m[p]=y;return m}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}Ct(Ls,"headerLength",4),Ct(Ls,"type",void 0),Ct(Ls,"multiSegment",!1),Ct(Ls,"canHandle",(()=>!1));function D3e(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function L3e(r){return r>=224&&r<=239}function B3e(r,e,t){for(let[n,i]of zn)if(i.canHandle(r,e,t))return n}class MU extends N2{constructor(...e){super(...e),Ct(this,"appSegments",[]),Ct(this,"jpegSegments",[]),Ct(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(zn.keyList())):(e=e===void 0?zn.keyList().filter((t=>this.options[t].enabled)):e.filter((t=>this.options[t].enabled&&zn.has(t))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:n,findAll:i,wanted:a,remaining:s}=this;if(!i&&this.file.chunked&&(i=Array.from(a).some((c=>{let d=zn.get(c),f=this.options[c];return d.multiSegment&&f.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,n.byteLength),!this.options.onlyTiff&&n.chunked){let c=!1;for(;s.size>0&&!c&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:d}=n,f=this.appSegments.some((m=>!this.file.available(m.offset||m.start,m.length||m.size)));if(c=e>d&&!f?!await n.readNextChunk(e):!await n.readNextChunk(d),(e=this.findAppSegmentsInRange(e,n.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let n,i,a,s,c,d,{file:f,findAll:m,wanted:p,remaining:y,options:b}=this;for(;e<t;e++)if(f.getUint8(e)===255){if(n=f.getUint8(e+1),L3e(n)){if(i=f.getUint16(e+2),a=B3e(f,e,i),a&&p.has(a)&&(s=zn.get(a),c=s.findPosition(f,e),d=b[a],c.type=a,this.appSegments.push(c),!m&&(s.multiSegment&&d.multiSegment?(this.unfinishedMultiSegment=c.chunkNumber<c.chunkCount,this.unfinishedMultiSegment||y.delete(a)):y.delete(a),y.size===0)))break;b.recordUnknownSegments&&(c=Ls.findPosition(f,e),c.marker=n,this.unknownSegments.push(c)),e+=i+1}else if(D3e(n)){if(i=f.getUint16(e+2),n===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}}return e}mergeMultiSegments(){if(!this.appSegments.some((t=>t.multiSegment)))return;let e=(function(t,n){let i,a,s,c=new Map;for(let d=0;d<t.length;d++)i=t[d],a=i[n],c.has(a)?s=c.get(a):c.set(a,s=[]),s.push(i);return Array.from(c)})(this.appSegments,"type");this.mergedAppSegments=e.map((([t,n])=>{let i=zn.get(t,this.options);return i.handleMultiSegments?{type:t,chunk:i.handleMultiSegments(n)}:n[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}Ct(MU,"type","jpeg"),So.set("jpeg",MU);const U3e=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class z3e extends Ls{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,n=new Map){let{pick:i,skip:a}=this.options[t];i=new Set(i);let s=i.size>0,c=a.size===0,d=this.chunk.getUint16(e);e+=2;for(let f=0;f<d;f++){let m=this.chunk.getUint16(e);if(s){if(i.has(m)&&(n.set(m,this.parseTag(e,m,t)),i.delete(m),i.size===0))break}else!c&&a.has(m)||n.set(m,this.parseTag(e,m,t));e+=12}return n}parseTag(e,t,n){let{chunk:i}=this,a=i.getUint16(e+2),s=i.getUint32(e+4),c=U3e[a];if(c*s<=4?e+=8:e=i.getUint32(e+8),(a<1||a>13)&&Fn(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e}`),e>i.byteLength&&Fn(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${t.toString(16)}, type: ${a}, offset ${e} is outside of chunk size ${i.byteLength}`),a===1)return i.getUint8Array(e,s);if(a===2)return t0(i.getString(e,s));if(a===7)return i.getUint8Array(e,s);if(s===1)return this.parseTagValue(a,e);{let d=new((function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}})(a))(s),f=c;for(let m=0;m<s;m++)d[m]=this.parseTagValue(a,e),e+=f;return d}}parseTagValue(e,t){let{chunk:n}=this;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);case 13:return n.getUint32(t);default:Fn(`Invalid tiff type ${e}`)}}}class ES extends z3e{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let n=new Map;return this[t]=n,this.parseTags(e,t,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Fn("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Fn(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,ZA(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,ZA(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let n=e.get(t);n&&n.length===1&&e.set(t,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",PU(...e.get(2),e.get(1))),e.set("longitude",PU(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,n,i={};for(t of yn)if(e=this[t],!YK(e))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(i,n)}else i[t]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[n,i]of Object.entries(t))this.assignObjectToOutput(e,n,i)}}function PU(r,e,t,n){var i=r+e/60+t/3600;return n!=="S"&&n!=="W"||(i*=-1),i}Ct(ES,"type","tiff"),Ct(ES,"headerLength",10),zn.set("tiff",ES);var V3e=Object.freeze({__proto__:null,default:P3e,Exifr:lu,fileParsers:So,segmentParsers:zn,fileReaders:ko,tagKeys:li,tagValues:qs,tagRevivers:Fc,createDictionary:kn,extendDictionary:k0,fetchUrlAsArrayBuffer:N0,readBlobAsArrayBuffer:O0,chunkedProps:Mc,otherSegments:cf,segments:C0,tiffBlocks:yn,segmentsAndBlocks:Pc,tiffExtractables:Dc,inheritables:uf,allFormatters:Lc,Options:z0,parse:E2});const eN={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},tN=Object.assign({},eN,{firstChunkSize:4e4,gps:[1,2,3,4]});async function eW(r){let e=new lu(tN);await e.read(r);let t=await e.parse();if(t&&t.gps){let{latitude:n,longitude:i}=t.gps;return{latitude:n,longitude:i}}}const rN=Object.assign({},eN,{tiff:!1,ifd1:!0,mergeOutput:!1});async function tW(r){let e=new lu(rN);await e.read(r);let t=await e.extractThumbnail();return t&&A2?T2.from(t):t}async function rW(r){let e=await this.thumbnail(r);if(e!==void 0){let t=new Blob([e]);return URL.createObjectURL(t)}}const nN=Object.assign({},eN,{firstChunkSize:4e4,ifd0:[274]});async function iN(r){let e=new lu(nN);await e.read(r);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}const aN=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let r0=!0,n0=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let e=r.match(/OS (\d+)_(\d+)/);if(e){let[,t,n]=e;r0=Number(t)+.1*Number(n)<13.4,n0=!1}}else if(r.includes("OS X 10")){let[,e]=r.match(/OS X 10[_.](\d+)/);r0=n0=Number(e)<15}if(r.includes("Chrome/")){let[,e]=r.match(/Chrome\/(\d+)/);r0=n0=Number(e)<81}else if(r.includes("Firefox/")){let[,e]=r.match(/Firefox\/(\d+)/);r0=n0=Number(e)<77}}async function nW(r){let e=await iN(r);return Object.assign({canvas:r0,css:n0},aN[e])}class $3e extends ga{constructor(...e){super(...e),Ct(this,"ranges",new F3e),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,n){if(e===0&&this.byteLength===0&&n){let i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{let i=e+t;if(i>this.byteLength){let{dataView:a}=this._extend(i);this._swapDataView(a)}}}_extend(e){let t;t=A2?T2.allocUnsafe(e):new Uint8Array(e);let n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}subarray(e,t,n=!1){return t=t||this._lengthToEnd(e),n&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,n=!1){n&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class F3e{constructor(){Ct(this,"list",[])}get length(){return this.list.length}add(e,t,n=0){let i=e+t,a=this.list.filter((s=>DU(e,s.offset,i)||DU(e,s.end,i)));if(a.length>0){e=Math.min(e,...a.map((c=>c.offset))),i=Math.max(i,...a.map((c=>c.end))),t=i-e;let s=a.shift();s.offset=e,s.length=t,s.end=i,this.list=this.list.filter((c=>!a.includes(c)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let n=e+t;return this.list.some((i=>i.offset<=e&&n<=i.end))}}function DU(r,e,t){return r<=e&&e<=t}class O2 extends $3e{constructor(e,t){super(0),Ct(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,n=await this.readChunk(e,t);return!!n&&n.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}ko.set("blob",class extends O2{async readWhole(){this.chunked=!1;let r=await O0(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,e){let t=e?r+e:void 0,n=this.input.slice(r,t),i=await O0(n);return this.set(i,r,!0)}});var q3e=Object.freeze({__proto__:null,default:V3e,Exifr:lu,fileParsers:So,segmentParsers:zn,fileReaders:ko,tagKeys:li,tagValues:qs,tagRevivers:Fc,createDictionary:kn,extendDictionary:k0,fetchUrlAsArrayBuffer:N0,readBlobAsArrayBuffer:O0,chunkedProps:Mc,otherSegments:cf,segments:C0,tiffBlocks:yn,segmentsAndBlocks:Pc,tiffExtractables:Dc,inheritables:uf,allFormatters:Lc,Options:z0,parse:E2,gpsOnlyOptions:tN,gps:eW,thumbnailOnlyOptions:rN,thumbnail:tW,thumbnailUrl:rW,orientationOnlyOptions:nN,orientation:iN,rotations:aN,get rotateCanvas(){return r0},get rotateCss(){return n0},rotation:nW});ko.set("url",class extends O2{async readWhole(){this.chunked=!1;let r=await N0(this.input);r instanceof ArrayBuffer?this._swapArrayBuffer(r):r instanceof Uint8Array&&this._swapBuffer(r)}async _readChunk(r,e){let t=e?r+e-1:void 0,n=this.options.httpHeaders||{};(r||t)&&(n.range=`bytes=${[r,t].join("-")}`);let i=await ZE(this.input,{headers:n}),a=await i.arrayBuffer(),s=a.byteLength;if(i.status!==416)return s!==e&&(this.size=r+s),this.set(a,r,!0)}});ga.prototype.getUint64=function(r){let e=this.getUint32(r),t=this.getUint32(r+4);return e<1048575?e<<32|t:typeof Ky!==void 0?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),Ky(e)<<Ky(32)|Ky(t)):void Fn("Trying to read 64b value but JS can only handle 53b numbers.")};class H3e extends N2{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let n=this.parseBoxHead(e);if(t.push(n),n.length===0)break;e+=n.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return e.boxes===void 0&&this.parseSubBoxes(e),e.boxes.find((n=>n.kind===t))}parseBoxHead(e){let t=this.file.getUint32(e),n=this.file.getString(e+4,4),i=e+8;return t===1&&(t=this.file.getUint64(e+8),i+=8),{offset:e,length:t,kind:n,start:i}}parseBoxFullHead(e){if(e.version!==void 0)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class iW extends H3e{static canHandle(e,t){if(t!==0)return!1;let n=e.getUint16(2);if(n>50)return!1;let i=16,a=[];for(;i<n;)a.push(e.getString(i,4)),i+=4;return a.includes(this.type)}async parse(){let e=this.file.getUint32(0),t=this.parseBoxHead(e);for(;t.kind!=="meta";)e+=t.length,await this.file.ensureChunk(e,16),t=this.parseBoxHead(e);await this.file.ensureChunk(t.offset,t.length),this.parseBoxFullHead(t),this.parseSubBoxes(t),this.options.icc.enabled&&await this.findIcc(t),this.options.tiff.enabled&&await this.findExif(t)}async registerSegment(e,t,n){await this.file.ensureChunk(t,n);let i=this.file.subarray(t,n);this.createParser(e,i)}async findIcc(e){let t=this.findBox(e,"iprp");if(t===void 0)return;let n=this.findBox(t,"ipco");if(n===void 0)return;let i=this.findBox(n,"colr");i!==void 0&&await this.registerSegment("icc",i.offset+12,i.length)}async findExif(e){let t=this.findBox(e,"iinf");if(t===void 0)return;let n=this.findBox(e,"iloc");if(n===void 0)return;let i=this.findExifLocIdInIinf(t),a=this.findExtentInIloc(n,i);if(a===void 0)return;let[s,c]=a;await this.file.ensureChunk(s,c);let d=4+this.file.getUint32(s);s+=d,c-=d,await this.registerSegment("tiff",s,c)}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,n,i,a,s=e.start,c=this.file.getUint16(s);for(s+=2;c--;){if(t=this.parseBoxHead(s),this.parseBoxFullHead(t),n=t.start,t.version>=2&&(i=t.version===3?4:2,a=this.file.getString(n+i+2,4),a==="Exif"))return this.file.getUintBytes(n,i);s+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let n=e.start,[i,a]=this.get8bits(n++),[s,c]=this.get8bits(n++),d=e.version===2?4:2,f=e.version===1||e.version===2?2:0,m=c+i+a,p=e.version===2?4:2,y=this.file.getUintBytes(n,p);for(n+=p;y--;){let b=this.file.getUintBytes(n,d);n+=d+f+2+s;let T=this.file.getUint16(n);if(n+=2,b===t)return T>1&&console.warn(`ILOC box has more than one extent but we're only processing one
Please create an issue at https://github.com/MikeKovarik/exifr with this file`),[this.file.getUintBytes(n+c,i),this.file.getUintBytes(n+c+i,a)];n+=T*m}}}class aW extends iW{}Ct(aW,"type","heic");class LU extends iW{}Ct(LU,"type","avif"),So.set("heic",aW),So.set("avif",LU),kn(li,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),kn(li,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),kn(li,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),kn(qs,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let ep=kn(qs,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const BU={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};ep.set(37392,BU),ep.set(41488,BU);const NS={0:"Normal",1:"Low",2:"High"};function UU(r){return typeof r=="object"&&r.length!==void 0?r[0]:r}function zU(r){let e=Array.from(r).slice(1);return e[1]>15&&(e=e.map((t=>String.fromCharCode(t)))),e[2]!=="0"&&e[2]!==0||e.pop(),e.join(".")}function OS(r){if(typeof r=="string"){var[e,t,n,i,a,s]=r.trim().split(/[-: ]/g).map(Number),c=new Date(e,t-1,n);return Number.isNaN(i)||Number.isNaN(a)||Number.isNaN(s)||(c.setHours(i),c.setMinutes(a),c.setSeconds(s)),Number.isNaN(+c)?r:c}}function Tm(r){if(typeof r=="string")return r;let e=[];if(r[1]===0&&r[r.length-1]===0)for(let t=0;t<r.length;t+=2)e.push(VU(r[t+1],r[t]));else for(let t=0;t<r.length;t+=2)e.push(VU(r[t],r[t+1]));return t0(String.fromCodePoint(...e))}function VU(r,e){return r<<8|e}ep.set(41992,NS),ep.set(41993,NS),ep.set(41994,NS),kn(Fc,["ifd0","ifd1"],[[50827,function(r){return typeof r!="string"?ZK(r):r}],[306,OS],[40091,Tm],[40092,Tm],[40093,Tm],[40094,Tm],[40095,Tm]]),kn(Fc,"exif",[[40960,zU],[36864,zU],[36867,OS],[36868,OS],[40962,UU],[40963,UU]]),kn(Fc,"gps",[[0,r=>Array.from(r).join(".")],[7,r=>Array.from(r).join(":")]]);class kS extends Ls{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1752462448&&e.getString(t+4,20)==="http://ns.adobe.com/"}static headerLength(e,t){return e.getString(t+4,34)==="http://ns.adobe.com/xmp/extension/"?79:33}static findPosition(e,t){let n=super.findPosition(e,t);return n.multiSegment=n.extended=n.headerLength===79,n.multiSegment?(n.chunkCount=e.getUint8(t+72),n.chunkNumber=e.getUint8(t+76),e.getUint8(t+77)!==0&&n.chunkNumber++):(n.chunkCount=1/0,n.chunkNumber=-1),n}static handleMultiSegments(e){return e.map((t=>t.chunk.getString())).join("")}normalizeInput(e){return typeof e=="string"?e:ga.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=(function(a){let s={},c={};for(let d of cW)s[d]=[],c[d]=0;return a.replace(X3e,((d,f,m)=>{if(f==="<"){let p=++c[m];return s[m].push(p),`${d}#${p}`}return`${d}#${s[m].pop()}`}))})(e);let t=rh.findAll(e,"rdf","Description");t.length===0&&t.push(new rh("rdf","Description",void 0,e));let n,i={};for(let a of t)for(let s of a.properties)n=W3e(s.ns,i),sW(s,n);return(function(a){let s;for(let c in a)s=a[c]=Zb(a[c]),s===void 0&&delete a[c];return Zb(a)})(i)}assignToOutput(e,t){if(this.localOptions.parse)for(let[n,i]of Object.entries(t))switch(n){case"tiff":this.assignObjectToOutput(e,"ifd0",i);break;case"exif":this.assignObjectToOutput(e,"exif",i);break;case"xmlns":break;default:this.assignObjectToOutput(e,n,i)}else e.xmp=t}}Ct(kS,"type","xmp"),Ct(kS,"multiSegment",!0),zn.set("xmp",kS);class ex{static findAll(e){return oW(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(ex.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],i=e[3].slice(1,-1);return i=lW(i),new ex(t,n,i)}constructor(e,t,n){this.ns=e,this.name=t,this.value=n}serialize(){return this.value}}class rh{static findAll(e,t,n){if(t!==void 0||n!==void 0){t=t||"[\\w\\d-]+",n=n||"[\\w\\d-]+";var i=new RegExp(`<(${t}):(${n})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else i=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return oW(e,i).map(rh.unpackMatch)}static unpackMatch(e){let t=e[1],n=e[2],i=e[4],a=e[8];return new rh(t,n,i,a)}constructor(e,t,n,i){this.ns=e,this.name=t,this.attrString=n,this.innerXml=i,this.attrs=ex.findAll(n),this.children=rh.findAll(i),this.value=this.children.length===0?lW(i):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return this.value!==void 0&&this.attrs.length===0&&this.children.length===0}get isListContainer(){return this.children.length===1&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return e==="rdf"&&(t==="Seq"||t==="Bag"||t==="Alt")}get isListItem(){return this.ns==="rdf"&&this.name==="li"}serialize(){if(this.properties.length===0&&this.value===void 0)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return K3e(this.children.map(G3e));if(this.isListItem&&this.children.length===1&&this.attrs.length===0)return this.children[0].serialize();let e={};for(let t of this.properties)sW(t,e);return this.value!==void 0&&(e.value=this.value),Zb(e)}}function sW(r,e){let t=r.serialize();t!==void 0&&(e[r.name]=t)}var G3e=r=>r.serialize(),K3e=r=>r.length===1?r[0]:r,W3e=(r,e)=>e[r]?e[r]:e[r]={};function oW(r,e){let t,n=[];if(!r)return n;for(;(t=e.exec(r))!==null;)n.push(t);return n}function lW(r){if((function(n){return n==null||n==="null"||n==="undefined"||n===""||n.trim()===""})(r))return;let e=Number(r);if(!Number.isNaN(e))return e;let t=r.toLowerCase();return t==="true"||t!=="false"&&r.trim()}const cW=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],X3e=new RegExp(`(<|\\/)(${cW.join("|")})`,"g");var Q3e=Object.freeze({__proto__:null,default:q3e,Exifr:lu,fileParsers:So,segmentParsers:zn,fileReaders:ko,tagKeys:li,tagValues:qs,tagRevivers:Fc,createDictionary:kn,extendDictionary:k0,fetchUrlAsArrayBuffer:N0,readBlobAsArrayBuffer:O0,chunkedProps:Mc,otherSegments:cf,segments:C0,tiffBlocks:yn,segmentsAndBlocks:Pc,tiffExtractables:Dc,inheritables:uf,allFormatters:Lc,Options:z0,parse:E2,gpsOnlyOptions:tN,gps:eW,thumbnailOnlyOptions:rN,thumbnail:tW,thumbnailUrl:rW,orientationOnlyOptions:nN,orientation:iN,rotations:aN,get rotateCanvas(){return r0},get rotateCss(){return n0},rotation:nW});let $U=Yb("fs",(r=>r.promises));ko.set("fs",class extends O2{async readWhole(){this.chunked=!1,this.fs=await $U;let r=await this.fs.readFile(this.input);this._swapBuffer(r)}async readChunked(){this.chunked=!0,this.fs=await $U,await this.open(),await this.readChunk(0,this.options.firstChunkSize)}async open(){this.fh===void 0&&(this.fh=await this.fs.open(this.input,"r"),this.size=(await this.fh.stat(this.input)).size)}async _readChunk(r,e){this.fh===void 0&&await this.open(),r+e>this.size&&(e=this.size-r);var t=this.subarray(r,e,!0);return await this.fh.read(t.dataView,0,e,r),t}async close(){if(this.fh){let r=this.fh;this.fh=void 0,await r.close()}}});ko.set("base64",class extends O2{constructor(...r){super(...r),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}async _readChunk(r,e){let t,n,i=this.input;r===void 0?(r=0,t=0,n=0):(t=4*Math.floor(r/3),n=r-t/4*3),e===void 0&&(e=this.size);let a=r+e,s=t+4*Math.ceil(a/3);i=i.slice(t,s);let c=Math.min(e,this.size-r);if(A2){let d=T2.from(i,"base64").slice(n,n+c);return this.set(d,r,!0)}{let d=this.subarray(r,c,!0),f=atob(i),m=d.toUint8();for(let p=0;p<c;p++)m[p]=f.charCodeAt(n+p);return d}}});class FU extends N2{static canHandle(e,t){return t===18761||t===19789}extendOptions(e){let{ifd0:t,xmp:n,iptc:i,icc:a}=e;n.enabled&&t.deps.add(700),i.enabled&&t.deps.add(33723),a.enabled&&t.deps.add(34675),t.finalizeFilters()}async parse(){let{tiff:e,xmp:t,iptc:n,icc:i}=this.options;if(e.enabled||t.enabled||n.enabled||i.enabled){let a=Math.max(ZA(this.options),this.options.chunkSize);await this.file.ensureChunk(0,a),this.createParser("tiff",this.file),this.parsers.tiff.parseHeader(),await this.parsers.tiff.parseIfd0Block(),this.adaptTiffPropAsSegment("xmp"),this.adaptTiffPropAsSegment("iptc"),this.adaptTiffPropAsSegment("icc")}}adaptTiffPropAsSegment(e){if(this.parsers.tiff[e]){let t=this.parsers.tiff[e];this.injectSegment(e,t)}}}Ct(FU,"type","tiff"),So.set("tiff",FU);let Y3e=Yb("zlib");const Z3e=["ihdr","iccp","text","itxt","exif"];class qU extends N2{constructor(...e){super(...e),Ct(this,"catchError",(t=>this.errors.push(t))),Ct(this,"metaChunks",[]),Ct(this,"unknownChunks",[])}static canHandle(e,t){return t===35152&&e.getUint32(0)===2303741511&&e.getUint32(4)===218765834}async parse(){let{file:e}=this;await this.findPngChunksInRange(8,e.byteLength),await this.readSegments(this.metaChunks),this.findIhdr(),this.parseTextChunks(),await this.findExif().catch(this.catchError),await this.findXmp().catch(this.catchError),await this.findIcc().catch(this.catchError)}async findPngChunksInRange(e,t){let{file:n}=this;for(;e<t;){let i=n.getUint32(e),a=n.getUint32(e+4),s=n.getString(e+4,4).toLowerCase(),c=i+4+4+4,d={type:s,offset:e,length:c,start:e+4+4,size:i,marker:a};Z3e.includes(s)?this.metaChunks.push(d):this.unknownChunks.push(d),e+=c}}parseTextChunks(){let e=this.metaChunks.filter((t=>t.type==="text"));for(let t of e){let[n,i]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(n,i)}}injectKeyValToIhdr(e,t){let n=this.parsers.ihdr;n&&n.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find((t=>t.type==="ihdr"));e&&this.options.ihdr.enabled!==!1&&this.createParser("ihdr",e.chunk)}async findExif(){let e=this.metaChunks.find((t=>t.type==="exif"));e&&this.injectSegment("tiff",e.chunk)}async findXmp(){let e=this.metaChunks.filter((t=>t.type==="itxt"));for(let t of e)t.chunk.getString(0,17)==="XML:com.adobe.xmp"&&this.injectSegment("xmp",t.chunk)}async findIcc(){let e=this.metaChunks.find((c=>c.type==="iccp"));if(!e)return;let{chunk:t}=e,n=t.getUint8Array(0,81),i=0;for(;i<80&&n[i]!==0;)i++;let a=i+2,s=t.getString(0,i);if(this.injectKeyValToIhdr("ProfileName",s),Qb){let c=await Y3e,d=t.getUint8Array(a);d=c.inflateSync(d),this.injectSegment("icc",d)}}}Ct(qU,"type","png"),So.set("png",qU),kn(li,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),k0(li,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let HU=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];k0(li,"ifd0",HU),k0(li,"exif",HU),kn(qs,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class CS extends Ls{static canHandle(e,t){return e.getUint8(t+1)===224&&e.getUint32(t+4)===1246120262&&e.getUint8(t+8)===0}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}Ct(CS,"type","jfif"),Ct(CS,"headerLength",9),zn.set("jfif",CS),kn(li,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class GU extends Ls{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}Ct(GU,"type","ihdr"),zn.set("ihdr",GU),kn(li,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),kn(qs,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class mv extends Ls{static canHandle(e,t){return e.getUint8(t+1)===226&&e.getUint32(t+4)===1229144927}static findPosition(e,t){let n=super.findPosition(e,t);return n.chunkNumber=e.getUint8(t+16),n.chunkCount=e.getUint8(t+17),n.multiSegment=n.chunkCount>1,n}static handleMultiSegments(e){return(function(t){let n=(function(i){let a=i[0].constructor,s=0;for(let f of i)s+=f.length;let c=new a(s),d=0;for(let f of i)c.set(f,d),d+=f.length;return c})(t.map((i=>i.chunk.toUint8())));return new ga(n)})(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&Fn("ICC header is too short");for(let[t,n]of Object.entries(J3e)){t=parseInt(t,10);let i=n(this.chunk,t);i!=="\0\0\0\0"&&e.set(t,i)}}parseTags(){let e,t,n,i,a,{raw:s}=this,c=this.chunk.getUint32(128),d=132,f=this.chunk.byteLength;for(;c--;){if(e=this.chunk.getString(d,4),t=this.chunk.getUint32(d+4),n=this.chunk.getUint32(d+8),i=this.chunk.getString(t,4),t+n>f)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");a=this.parseTag(i,t,n),a!==void 0&&a!=="\0\0\0\0"&&s.set(e,a),d+=12}}parseTag(e,t,n){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,n);case"sig ":return this.parseSig(t)}if(!(t+n>this.chunk.byteLength))return this.chunk.getUint8Array(t,n)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return t0(this.chunk.getString(e+12,t))}parseText(e,t){return t0(this.chunk.getString(e+8,t-8))}parseSig(e){return t0(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,n=t.getUint32(e+8),i=t.getUint32(e+12),a=e+16,s=[];for(let c=0;c<n;c++){let d=t.getString(a+0,2),f=t.getString(a+2,2),m=t.getUint32(a+4),p=t.getUint32(a+8)+e,y=t0(t.getUnicodeString(p,m));s.push({lang:d,country:f,text:y}),a+=i}return n===1?s[0].text:s}translateValue(e,t){return typeof e=="string"?t[e]||t[e.toLowerCase()]||e:t[e]||e}}Ct(mv,"type","icc"),Ct(mv,"multiSegment",!0),Ct(mv,"headerLength",18);const J3e={4:Zo,8:function(r,e){return[r.getUint8(e),r.getUint8(e+1)>>4,r.getUint8(e+1)%16].map((t=>t.toString(10))).join(".")},12:Zo,16:Zo,20:Zo,24:function(r,e){const t=r.getUint16(e),n=r.getUint16(e+2)-1,i=r.getUint16(e+4),a=r.getUint16(e+6),s=r.getUint16(e+8),c=r.getUint16(e+10);return new Date(Date.UTC(t,n,i,a,s,c))},36:Zo,40:Zo,48:Zo,52:Zo,64:(r,e)=>r.getUint32(e),80:Zo};function Zo(r,e){return t0(r.getString(e,4))}zn.set("icc",mv),kn(li,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const Wy={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},KU={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};kn(qs,"icc",[[4,Wy],[12,KU],[40,Object.assign({},Wy,KU)],[48,Wy],[80,Wy],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class Xy extends Ls{static canHandle(e,t,n){return e.getUint8(t+1)===237&&e.getString(t+4,9)==="Photoshop"&&this.containsIptc8bim(e,t,n)!==void 0}static headerLength(e,t,n){let i,a=this.containsIptc8bim(e,t,n);if(a!==void 0)return i=e.getUint8(t+a+7),i%2!=0&&(i+=1),i===0&&(i=4),a+8+i}static containsIptc8bim(e,t,n){for(let i=0;i<n;i++)if(this.isIptcSegmentHead(e,t+i))return i}static isIptcSegmentHead(e,t){return e.getUint8(t)===56&&e.getUint32(t)===943868237&&e.getUint16(t+4)===1028}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,n=!1;for(let i=0;i<t;i++)if(this.chunk.getUint8(i)===28&&this.chunk.getUint8(i+1)===2){n=!0;let a=this.chunk.getUint16(i+3),s=this.chunk.getUint8(i+2),c=this.chunk.getLatin1String(i+5,a);e.set(s,this.pluralizeValue(e.get(s),c)),i+=4+a}else if(n)break;return this.translate(),this.output}pluralizeValue(e,t){return e!==void 0?e instanceof Array?(e.push(t),e):[e,t]:t}}Ct(Xy,"type","iptc"),Ct(Xy,"translateValues",!1),Ct(Xy,"reviveValues",!1),zn.set("iptc",Xy),kn(li,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),kn(qs,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const Am=["Monday","Tuesday","Wednesday","Thursday","Friday"],e6e=({user:r})=>{const e=Li(),{confirm:t}=nu(),n=F.useMemo(()=>$e.getWeekId(),[]),[i,a]=F.useState([]),[s,c]=F.useState("Monday"),[d,f]=F.useState(!1),m=F.useRef(null),[p,y]=F.useState(!1),b=r.enrolledClasses||(r.classType?[r.classType]:[]),[T,S]=F.useState(r.classType||b[0]||"Uncategorized");F.useEffect(()=>{const A=new Date().toLocaleDateString("en-US",{weekday:"long"});Am.includes(A)&&c(A)},[]),F.useEffect(()=>{const A=$e.subscribeToEvidence(r.id,n,a);return()=>A()},[r.id,n]);const w=F.useMemo(()=>{const A=b[0]||"Uncategorized";return i.filter(k=>k.classType?k.classType===T:T===A)},[i,T,b]),E=A=>w.find(k=>k.dayOfWeek===A),I=A=>A?new Date(A).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):null,C=async A=>{var N;const k=(N=A.target.files)==null?void 0:N[0];if(k){f(!0);try{let U=null;if(k.type.startsWith("image/"))try{const Y=await Q3e.parse(k,["DateTimeOriginal"])||{};Y.DateTimeOriginal&&(U=Y.DateTimeOriginal.toISOString())}catch(Y){console.warn("EXIF extraction failed",Y)}const M=T.replace(/[^a-zA-Z0-9]/g,"_"),$=Math.random().toString(36).substring(2,9),z=Fm(qm,`evidence/${r.id}/${n}/${M}_${s}_${$}`);await uT(z,k);const Q=await Dv(z),ee=E(s),Z={id:`${r.id}_${n}_${s}_${M}`,studentId:r.id,weekId:n,classType:T,dayOfWeek:s,imageUrl:Q,timestamp:new Date().toISOString(),exifDate:U,reflection:(ee==null?void 0:ee.reflection)||""};await $e.uploadEvidence(Z)}catch(U){e.error("Upload failed: "+(U instanceof Error?U.message:"Unknown error"))}finally{f(!1),m.current&&(m.current.value="")}}},B=async(A,k)=>{const N=E(A);N&&N.reflection!==k&&await $e.uploadEvidence({...N,reflection:k})},R=async()=>{if(!(w.length===0||!await t({title:"Generate & Delete Evidence",message:`WARNING: Generating this report will DELETE all ${T} photos and reflections for this week from the server to save space. Make sure you save the downloaded PDF immediately.`,confirmLabel:"Generate PDF",variant:"warning"}))){y(!0);try{const k=new zX,N=k.internal.pageSize.getWidth(),U=k.internal.pageSize.getHeight(),M=20,$=N-M*2,z=U-M;k.setFillColor(15,7,32),k.rect(0,0,N,40,"F"),k.setTextColor(255,255,255),k.setFontSize(22),k.setFont("helvetica","bold"),k.text("WEEKLY PROGRESS REPORT",M,18),k.setFontSize(10),k.setFont("helvetica","normal"),k.text(`Operative: ${r.name.toUpperCase()}`,M,28),k.text(`Class: ${T}`,M,33),k.text(`Cycle ID: ${n}`,M,38),k.text(`Generated: ${new Date().toLocaleDateString()}`,N-M,33,{align:"right"});let Q=55;const ee=[...w].sort((K,Z)=>Am.indexOf(K.dayOfWeek)-Am.indexOf(Z.dayOfWeek));for(const K of ee){let Z=null,Y="JPEG",ge=0,ae=0,X=!1;try{const Ee=await fetch(K.imageUrl);if(!Ee.ok)throw new Error(`Image fetch failed: ${Ee.statusText}`);const He=await Ee.blob();Z=await new Promise((Ke,at)=>{const tt=new FileReader;tt.onloadend=()=>Ke(tt.result),tt.onerror=at,tt.readAsDataURL(He)}),He.type==="image/png"&&(Y="PNG"),He.type==="image/webp"&&(Y="WEBP");const he=k.getImageProperties(Z),pe=he.width/he.height,Ye=100;ge=$,ae=ge/pe,ae>Ye&&(ae=Ye,ge=ae*pe)}catch(Ee){console.warn("Image processing error for PDF",Ee),X=!0,ae=15}const Ne=20+ae+12;Q+Ne>z&&(k.addPage(),Q=M),k.setDrawColor(200,200,200),k.setLineWidth(.5),k.line(M,Q,N-M,Q),Q+=6,k.setTextColor(15,7,32),k.setFontSize(16),k.setFont("helvetica","bold"),k.text(K.dayOfWeek.toUpperCase(),M,Q);const se=I(K.exifDate)||I(K.timestamp);if(k.setFontSize(9),k.setFont("helvetica","italic"),k.setTextColor(100,100,100),k.text(`Captured: ${se}`,N-M,Q,{align:"right"}),Q+=10,!X&&Z){const Ee=(N-ge)/2;k.addImage(Z,Y,Ee,Q,ge,ae),Q+=ae+12}else k.setTextColor(255,0,0),k.setFontSize(8),k.text("[Image Error]",M,Q),Q+=15;k.setFont("helvetica","normal"),k.setFontSize(10);const ke=K.reflection||"No reflection logged for this cycle.",Me=k.splitTextToSize(ke,$),ot=Me.length*5+15;Q+ot>z&&(k.addPage(),Q=M),k.setTextColor(15,7,32),k.setFontSize(11),k.setFont("helvetica","bold"),k.text("DAILY REFLECTION:",M,Q),Q+=6,k.setFont("helvetica","normal"),k.setFontSize(10),k.setTextColor(60,60,60),k.text(Me,M,Q),Q+=Me.length*5+25}k.save(`Report_${T.replace(/\s+/g,"")}_${r.name.replace(/\s+/g,"_")}_${n}.pdf`),await $e.deleteWeeklyEvidence(w),e.success("PDF generated and evidence cleared.")}catch(k){console.error("PDF generation failed:",k),e.error("Failed to build report. Data was NOT deleted. Check console for details.")}finally{y(!1)}}},D=E(s);return u.jsxs("div",{className:"h-full flex flex-col space-y-6",children:[u.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/30 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h2",{className:"text-2xl font-bold text-emerald-400 flex items-center gap-2",children:[u.jsx(Nj,{className:"w-7 h-7"})," Weekly Evidence Log"]}),u.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[b.length>1?u.jsxs("div",{className:"relative group",children:[u.jsx("select",{value:T,onChange:A=>S(A.target.value),className:"appearance-none bg-emerald-500/10 border border-emerald-500/30 text-emerald-200 text-xs font-bold py-1 pl-3 pr-8 rounded-lg cursor-pointer hover:bg-emerald-500/20 transition focus:outline-none",children:b.map(A=>u.jsx("option",{value:A,children:A},A))}),u.jsx(Vs,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emerald-400 pointer-events-none"})]}):u.jsx("span",{className:"text-emerald-200/60 text-sm font-bold",children:T}),u.jsx("span",{className:"text-emerald-200/40 text-sm",children:"| Upload photos of lab work & notes."})]})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"bg-black/40 px-4 py-2 rounded-lg border border-emerald-500/20 text-center",children:[u.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-widest block",children:"Cycle ID"}),u.jsx("span",{className:"font-mono text-emerald-400 font-bold",children:n})]}),u.jsxs("button",{onClick:R,disabled:p||w.length===0,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-3 rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-emerald-900/20 transition group",children:[p?u.jsx(Ua,{className:"w-5 h-5 animate-spin"}):u.jsx(pae,{className:"w-5 h-5 group-hover:bounce"}),"Save Report (PDF)"]})]})]}),u.jsx("input",{type:"file",ref:m,onChange:C,className:"hidden",accept:"image/*"}),u.jsx("div",{className:"flex items-center bg-white/5 p-1 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:Am.map(A=>{const k=E(A),N=s===A;return u.jsxs("button",{onClick:()=>c(A),className:`flex-1 min-w-[100px] flex flex-col items-center py-3 rounded-lg transition-all relative group ${N?"bg-emerald-600 text-white shadow-lg":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[u.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-widest mb-1 ${N?"text-emerald-100":"text-gray-500 group-hover:text-gray-300"}`,children:["Day ",Am.indexOf(A)+1]}),u.jsx("span",{className:"font-bold text-sm",children:A}),k&&u.jsx("div",{className:`absolute top-2 right-2 ${N?"text-emerald-200":"text-emerald-500"}`,children:u.jsx(Uv,{className:"w-3 h-3"})})]},A)})}),u.jsxs("div",{className:"flex-1 bg-white/5 border border-white/10 rounded-2xl p-6 relative overflow-hidden animate-in fade-in zoom-in-95 duration-300 flex flex-col gap-6",children:[u.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(Sae,{className:"w-4 h-4"})," Evidence Capture (",T,")"]}),D&&u.jsxs("div",{className:"text-[9px] bg-black/40 px-2 py-0.5 rounded border border-white/10 text-gray-400 font-mono flex items-center gap-1",children:[u.jsx(hs,{className:"w-3 h-3"}),I(D.exifDate)||I(D.timestamp)]})]}),u.jsx("div",{className:"flex-1 bg-black/40 rounded-xl border-2 border-dashed border-white/10 relative group overflow-hidden transition-all hover:border-emerald-500/30",children:D?u.jsxs(u.Fragment,{children:[u.jsx("img",{src:D.imageUrl,alt:s,className:"w-full h-full object-contain bg-black/20"}),u.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition flex flex-col items-center justify-center gap-4 cursor-pointer",onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},children:[u.jsx(_p,{className:"w-8 h-8 text-emerald-400"}),u.jsx("span",{className:"text-white font-bold text-sm",children:"Replace Evidence"})]})]}):u.jsxs("button",{onClick:()=>{var A;return(A=m.current)==null?void 0:A.click()},className:"w-full h-full flex flex-col items-center justify-center text-gray-500 hover:text-emerald-400 hover:bg-white/5 transition gap-3",disabled:d,children:[d?u.jsx(Ua,{className:"w-10 h-10 animate-spin text-emerald-500"}):u.jsx("div",{className:"p-4 bg-white/5 rounded-full mb-2 group-hover:scale-110 transition shadow-xl",children:u.jsx(Nj,{className:"w-8 h-8"})}),u.jsxs("div",{className:"text-center",children:[u.jsx("span",{className:"text-sm font-bold uppercase tracking-widest block",children:"Upload Photo"}),u.jsx("span",{className:"text-[10px] opacity-60",children:"Supports JPG, PNG, WEBP"})]})]})})]}),u.jsxs("div",{className:"h-48 md:h-56 flex flex-col flex-shrink-0",children:[u.jsx("div",{className:"mb-2",children:u.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2 uppercase tracking-widest",children:[u.jsx(T8,{className:"w-4 h-4"})," Daily Reflection"]})}),D?u.jsx("textarea",{className:"flex-1 w-full bg-black/20 border border-white/10 rounded-xl p-4 text-sm text-gray-200 resize-none focus:outline-none focus:border-emerald-500/50 focus:bg-black/40 transition placeholder-gray-600 leading-relaxed custom-scrollbar",placeholder:`Document your findings for ${s} in ${T}...`,defaultValue:D.reflection,onBlur:A=>B(s,A.target.value)},s):u.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-600 italic text-center px-10 border border-white/5 rounded-xl bg-white/5",children:[u.jsx("div",{className:"mb-2 opacity-30",children:u.jsx(o0,{className:"w-6 h-6"})}),u.jsx("p",{className:"font-medium text-sm",children:"Reflection Locked"}),u.jsx("p",{className:"text-[10px] mt-1 max-w-[200px]",children:"Upload evidence photo to unlock the reflection journal for this day."})]})]})]})]})},t6e=({user:r})=>{const e=Li(),[t,n]=F.useState({id:Math.random().toString(36).substring(2,9),studentId:r.id,labTitle:"New Experiment",content:`Observation:

Formula used: $F = ma$`,dataPoints:[],timestamp:new Date().toISOString()}),[i,a]=F.useState(""),[s,c]=F.useState(""),[d,f]=F.useState("");F.useEffect(()=>{const y=t.content.replace(/\$(.*?)\$/g,(b,T)=>{try{return Gv.renderToString(T,{throwOnError:!1})}catch{return T}}).replace(/\n/g,"<br/>");a(y)},[t.content]);const m=async()=>{await $e.saveLabReport(t),await $e.awardXP(r.id,25),e.success("Report saved!")},p=()=>{const y=parseFloat(s),b=parseFloat(d);!isNaN(y)&&!isNaN(b)&&(n(T=>({...T,dataPoints:[...T.dataPoints,{x:y,y:b}].sort((S,w)=>S.x-w.x)})),c(""),f(""))};return u.jsxs("div",{className:"h-full flex flex-col gap-6",children:[u.jsxs("div",{className:"flex justify-between items-center bg-blue-900/20 border border-blue-500/30 p-4 rounded-xl",children:[u.jsxs("h2",{className:"text-2xl font-bold text-blue-400 flex items-center gap-2",children:[u.jsx(Ox,{className:"w-6 h-6"})," Physics Laboratory"]}),u.jsxs("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[u.jsx(gF,{className:"w-4 h-4"})," Save Report"]})]}),u.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[u.jsxs("div",{className:"flex flex-col gap-4",children:[u.jsx("div",{className:"flex-1 bg-black rounded-xl overflow-hidden border border-white/10",children:u.jsx("iframe",{src:"https://phet.colorado.edu/sims/html/forces-and-motion-basics/latest/forces-and-motion-basics_en.html",className:"w-full h-full border-none",title:"PhET Sim"})}),u.jsxs("div",{className:"h-1/3 bg-white/5 border border-white/10 rounded-xl p-4 flex gap-4",children:[u.jsxs("div",{className:"w-1/3",children:[u.jsx("h4",{className:"font-bold text-gray-300 mb-2 text-xs uppercase",children:"Data Entry"}),u.jsxs("div",{className:"flex gap-2 mb-2",children:[u.jsx("input",{type:"number",placeholder:"X",value:s,onChange:y=>c(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"}),u.jsx("input",{type:"number",placeholder:"Y",value:d,onChange:y=>f(y.target.value),className:"w-full bg-black/20 border border-white/10 rounded p-1 text-white text-sm"})]}),u.jsx("button",{onClick:p,className:"w-full bg-white/10 hover:bg-white/20 text-white text-xs font-bold py-1 rounded",children:"Add Point"})]}),u.jsx("div",{className:"flex-1 min-w-0",children:u.jsx(EH,{width:"100%",height:"100%",children:u.jsxs(f3e,{children:[u.jsx(jK,{strokeDasharray:"3 3",stroke:"#333"}),u.jsx(x2,{type:"number",dataKey:"x",stroke:"#666",name:"X"}),u.jsx(w2,{type:"number",dataKey:"y",stroke:"#666",name:"Y"}),u.jsx(ao,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#000"}}),u.jsx(qg,{name:"Data",data:t.dataPoints,fill:"#3b82f6"})]})})})]})]}),u.jsxs("div",{className:"flex flex-col bg-white/5 border border-white/10 rounded-xl overflow-hidden",children:[u.jsx("div",{className:"p-2 border-b border-white/10 bg-black/20 flex gap-2",children:u.jsx("div",{className:"text-xs text-gray-400 px-2 py-1",children:"Mode: LaTeX Enabled ($...$)"})}),u.jsxs("div",{className:"flex-1 flex flex-col md:flex-row min-h-0",children:[u.jsx("textarea",{className:"flex-1 bg-transparent p-4 text-sm text-gray-300 font-mono resize-none focus:outline-none border-r border-white/10",value:t.content,onChange:y=>n(b=>({...b,content:y.target.value})),placeholder:"Enter observations here. Use $E=mc^2$ for formulas."}),u.jsx("div",{className:"flex-1 bg-white/5 p-4 text-sm text-gray-200 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:_q.sanitize(i,{ADD_TAGS:["annotation","semantics","mrow","mi","mn","mo","msup","msub","mfrac","mtext","math"],ADD_ATTR:["xmlns","encoding"]})}})]})]})]})]})},r6e=[{key:"tech",label:"Tech",color:"text-blue-400",icon:""},{key:"focus",label:"Focus",color:"text-green-400",icon:""},{key:"analysis",label:"Analysis",color:"text-yellow-400",icon:""},{key:"charisma",label:"Charisma",color:"text-purple-400",icon:""}],n6e=["HEAD","CHEST","HANDS","BELT","FEET","AMULET","RING1","RING2"],i6e=({userId:r,classType:e,onClose:t})=>{var B,R,D,A,k;const[n,i]=F.useState(null),[a,s]=F.useState(!0);if(F.useEffect(()=>{(async()=>{const U=await $e.getPublicProfile(r);i(U),s(!1)})()},[r]),a)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:t,children:u.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!n)return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center",onClick:t,children:u.jsx("div",{className:"text-gray-400",children:"Player not found"})});const c=n.gamification||{xp:0,level:1,currency:0,badges:[],privacyMode:!1},d=(B=n.settings)==null?void 0:B.privacyMode,f=d?c.codename||"Unknown Agent":n.name,m=c.level||1,p=vh(m),y=SF(m),{equipped:b,appearance:T}=Bx(n,e),S=Lx({gamification:{...c,equipped:b}}),w=kg(b),E=((R=c.classXp)==null?void 0:R[e])||0,I=Object.values(b).filter(Boolean),C=_F(I);return u.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:t,children:u.jsxs("div",{className:"bg-[#12131e]/95 border border-white/10 rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-2xl",onClick:N=>N.stopPropagation(),children:[u.jsxs("div",{className:"relative p-6 border-b border-white/5",children:[u.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition",children:u.jsx(ms,{className:"w-5 h-5"})}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-24 h-32 shrink-0",children:u.jsx(Xb,{equipped:b,appearance:T})}),u.jsxs("div",{children:[u.jsx("h2",{className:`text-xl font-black ${d?"text-purple-300 italic":"text-white"}`,children:f}),u.jsx("p",{className:`text-xs font-mono uppercase tracking-widest ${p.tierColor.split(" ")[1]}`,children:p.rankName}),u.jsxs("p",{className:"text-[10px] text-gray-500 mt-1",children:[y.name," - Level ",m]}),u.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Vn,{className:"w-3 h-3 text-cyan-400"}),u.jsxs("span",{className:"text-xs text-cyan-400 font-bold",children:[E.toLocaleString()," XP"]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(us,{className:"w-3 h-3 text-yellow-400"}),u.jsxs("span",{className:"text-xs text-yellow-400 font-bold",children:[w," GS"]})]})]})]})]})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(xo,{className:"w-3 h-3"})," Stats"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:r6e.map(({key:N,label:U,color:M,icon:$})=>{const z=S[N]||0;return u.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white/3 rounded-lg",children:[u.jsx("span",{className:"text-sm",children:$}),u.jsx("span",{className:"text-xs text-gray-400",children:U}),u.jsx("span",{className:`text-sm font-bold ${M} ml-auto`,children:z})]},N)})})]}),u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(us,{className:"w-3 h-3"})," Equipment"]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:n6e.map(N=>{const U=b[N];if(!U)return u.jsxs("div",{className:"p-2 bg-white/3 rounded-lg border border-white/5",children:[u.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:N}),u.jsx("div",{className:"text-xs text-gray-700 italic",children:"Empty"})]},N);const M=zr(U.rarity);return u.jsxs("div",{className:`p-2 rounded-lg border ${M.border} ${M.bg}`,children:[u.jsx("div",{className:"text-[10px] text-gray-500 font-mono",children:N}),u.jsx("div",{className:`text-xs font-bold truncate ${M.text}`,children:U.name}),u.jsx("div",{className:"text-[9px] text-gray-500",children:U.rarity})]},N)})})]}),C.length>0&&u.jsxs("div",{className:"p-6 border-b border-white/5",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(N8,{className:"w-3 h-3 text-purple-400"})," Set Bonuses"]}),C.map(({set:N,activeBonus:U})=>u.jsxs("div",{className:"p-2 bg-purple-500/5 border border-purple-500/20 rounded-lg mb-1",children:[u.jsx("div",{className:"text-xs font-bold text-purple-400",children:N.name}),u.jsxs("div",{className:"text-[10px] text-gray-400",children:[U.label,": ",U.effects.map(M=>`+${M.value} ${M.stat}`).join(", ")]})]},N.id))]}),(((D=c.unlockedAchievements)==null?void 0:D.length)||0)>0&&u.jsxs("div",{className:"p-6",children:[u.jsxs("h3",{className:"text-xs font-mono uppercase tracking-widest text-gray-600 mb-3 flex items-center gap-1",children:[u.jsx(w0,{className:"w-3 h-3 text-yellow-400"})," Achievements (",(A=c.unlockedAchievements)==null?void 0:A.length,")"]}),u.jsx("div",{className:"flex flex-wrap gap-1",children:(k=c.unlockedAchievements)==null?void 0:k.slice(0,12).map(N=>u.jsx("span",{className:"text-[10px] bg-yellow-500/10 border border-yellow-500/20 rounded px-1.5 py-0.5 text-yellow-400",children:N.replace(/_/g," ")},N))})]})]})})},a6e=()=>u.jsx("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:Array.from({length:5}).map((r,e)=>u.jsxs("div",{className:"p-6 flex items-center gap-6 animate-pulse",children:[u.jsx("div",{className:"w-12 h-8 bg-white/5 rounded"}),u.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx("div",{className:"h-5 bg-white/5 rounded w-40"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-24"})]}),u.jsxs("div",{className:"space-y-2 text-right",children:[u.jsx("div",{className:"h-7 bg-white/5 rounded w-20 ml-auto"}),u.jsx("div",{className:"h-3 bg-white/5 rounded w-14 ml-auto"})]})]},e))}),s6e=()=>{const[r,e]=F.useState([]),[t,n]=F.useState(Nr.AP_PHYSICS),[i,a]=F.useState(!0),[s,c]=F.useState(null);F.useEffect(()=>{const m=$e.subscribeToLeaderboard(p=>{e(p),a(!1)});return()=>m()},[]);const d=F.useMemo(()=>{const m=new Set;return r.forEach(p=>{var y;return(y=p.enrolledClasses)==null?void 0:y.forEach(b=>m.add(b))}),Array.from(m).sort()},[r]),f=F.useMemo(()=>r.filter(m=>{var p;return(p=m.enrolledClasses)==null?void 0:p.includes(t)}).sort((m,p)=>{var T,S,w,E;const y=((S=(T=m.gamification)==null?void 0:T.classXp)==null?void 0:S[t])||0;return(((E=(w=p.gamification)==null?void 0:w.classXp)==null?void 0:E[t])||0)-y}).slice(0,10),[r,t]);return u.jsxs("div",{className:"max-w-4xl mx-auto pt-8",children:[u.jsxs("div",{className:"text-center mb-10",children:[u.jsx("h1",{className:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"Class Rankings"}),u.jsx("p",{className:"text-gray-400 mb-6",children:"Top operatives by XP accumulated."}),u.jsxs("div",{className:"inline-block relative",children:[u.jsxs("select",{value:t,onChange:m=>n(m.target.value),className:"appearance-none bg-white/5 border border-white/20 text-white font-bold py-2 pl-4 pr-10 rounded-xl focus:outline-none focus:border-purple-500 cursor-pointer min-w-[200px]",children:[d.map(m=>u.jsx("option",{value:m,children:m},m)),d.length===0&&u.jsx("option",{children:t})]}),u.jsx(Vs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),u.jsx("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl overflow-hidden shadow-2xl",children:i?u.jsx(a6e,{}):u.jsxs(u.Fragment,{children:[f.length>=3&&u.jsx("div",{className:"flex items-end justify-center gap-4 px-6 pt-10 pb-6 bg-gradient-to-b from-purple-500/10 to-transparent border-b border-white/5",children:[1,0,2].map(m=>{var R,D,A,k,N;const p=f[m];if(!p)return null;const y=(R=p.settings)==null?void 0:R.privacyMode,b=y?((D=p.gamification)==null?void 0:D.codename)||"Unknown Agent":p.name,T=((k=(A=p.gamification)==null?void 0:A.classXp)==null?void 0:k[t])||0,S=((N=p.gamification)==null?void 0:N.level)||1,w=vh(S),E=m===0,I=["h-28","h-20","h-16"],C=["w-20 h-20","w-14 h-14","w-14 h-14"],B=[{icon:u.jsx(w0,{className:"w-5 h-5"}),color:"bg-yellow-500 text-yellow-900",ring:"ring-yellow-400/40"},{icon:u.jsx(wy,{className:"w-4 h-4"}),color:"bg-gray-300 text-gray-700",ring:"ring-gray-300/30"},{icon:u.jsx(wy,{className:"w-4 h-4"}),color:"bg-amber-600 text-amber-100",ring:"ring-amber-600/30"}];return u.jsxs("div",{className:`flex flex-col items-center ${E?"order-2":m===1?"order-1":"order-3"}`,style:{animation:`fadeSlideUp 0.5s ease-out ${.1+m*.15}s both`},children:[u.jsxs("div",{className:`relative mb-2 ${E?"mb-3":""}`,children:[u.jsx("div",{className:`${C[m]} rounded-full p-0.5 bg-white/10 ring-2 ${B[m].ring} relative ${E?"shadow-[0_0_30px_rgba(234,179,8,0.3)]":""}`,children:u.jsx("img",{src:p.avatarUrl,alt:b,className:`w-full h-full rounded-full border-2 ${w.tierColor.split(" ")[0]} object-cover`})}),u.jsx("div",{className:`absolute -bottom-2 left-1/2 -translate-x-1/2 ${B[m].color} rounded-full w-6 h-6 flex items-center justify-center shadow-lg`,children:B[m].icon})]}),u.jsxs("div",{className:`text-center ${E?"mt-2":"mt-1"}`,children:[u.jsx("div",{className:`font-bold truncate max-w-[100px] ${E?"text-sm text-white":"text-xs text-gray-300"} ${y?"italic":""}`,children:b}),u.jsx("div",{className:`font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 ${E?"text-xl":"text-base"}`,children:T.toLocaleString()}),u.jsx("div",{className:`text-[9px] font-mono uppercase ${w.tierColor.split(" ")[1]}`,children:w.rankName}),u.jsxs("button",{onClick:()=>c(p.id),className:"mt-1 text-[10px] text-gray-500 hover:text-purple-400 transition flex items-center gap-0.5 mx-auto",children:[u.jsx(bp,{className:"w-3 h-3"})," Inspect"]})]}),u.jsx("div",{className:`${I[m]} w-20 mt-2 rounded-t-lg bg-gradient-to-t ${m===0?"from-yellow-500/20 to-yellow-500/5 border-yellow-500/30":m===1?"from-gray-400/15 to-gray-400/5 border-gray-400/20":"from-amber-600/15 to-amber-600/5 border-amber-600/20"} border border-b-0`})]},p.id)})}),u.jsxs("div",{className:"grid grid-cols-1 divide-y divide-white/5",children:[f.slice(f.length>=3?3:0).map((m,p)=>{var I,C,B,R,D;const y=f.length>=3?p+3:p,b=(I=m.settings)==null?void 0:I.privacyMode,T=b?((C=m.gamification)==null?void 0:C.codename)||"Unknown Agent":m.name,S=((R=(B=m.gamification)==null?void 0:B.classXp)==null?void 0:R[t])||0,w=((D=m.gamification)==null?void 0:D.level)||1,E=vh(w);return u.jsxs("div",{className:"p-5 flex items-center gap-5 transition hover:bg-white/5",style:{animation:`fadeSlideUp 0.4s ease-out ${.05*y}s both`},children:[u.jsxs("div",{className:"w-10 text-center font-bold text-lg text-gray-600 font-mono",children:[y<3&&y===0&&u.jsx(w0,{className:"w-6 h-6 text-yellow-400 mx-auto"}),y<3&&y===1&&u.jsx(wy,{className:"w-6 h-6 text-gray-300 mx-auto"}),y<3&&y===2&&u.jsx(wy,{className:"w-6 h-6 text-amber-600 mx-auto"}),y>=3&&`#${y+1}`]}),u.jsxs("div",{className:"w-12 h-12 rounded-full p-0.5 bg-white/5 relative",children:[u.jsx("img",{src:m.avatarUrl,alt:T,className:`w-full h-full rounded-full border-2 ${E.tierColor.split(" ")[0]}`}),u.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-gray-900 rounded-full flex items-center justify-center text-[9px] font-bold border border-gray-600 text-white",children:w})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("h3",{className:`text-base font-bold truncate ${b?"text-purple-300 italic":"text-white"}`,children:[T,b&&u.jsx(xp,{className:"w-3 h-3 text-gray-500 inline ml-1"})]}),u.jsx("span",{className:`text-[10px] font-mono uppercase font-bold tracking-widest ${E.tierColor.split(" ")[1]}`,children:E.rankName})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500",children:S.toLocaleString()}),u.jsx("div",{className:"text-[9px] text-gray-500 font-mono tracking-widest",children:"CLASS XP"})]}),u.jsx("button",{onClick:()=>c(m.id),className:"p-2 text-gray-600 hover:text-purple-400 transition rounded-lg hover:bg-white/5",title:"Inspect player",children:u.jsx(bp,{className:"w-4 h-4"})})]},m.id)}),f.length===0&&u.jsxs("div",{className:"p-10 text-center text-gray-500 italic flex flex-col items-center gap-2",children:[u.jsx(Wc,{className:"w-8 h-8 opacity-20"}),"No operatives ranked in ",t,"."]})]})]})}),s&&u.jsx(i6e,{userId:s,classType:t,onClose:()=>c(null)})]})};class o6e extends ne.Component{constructor(t){super(t);Tk(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught:",t,n)}render(){return this.state.hasError?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-6 rounded-full bg-red-500/10 flex items-center justify-center",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"System Malfunction"}),u.jsx("p",{className:"text-gray-400 mb-6 text-sm",children:"Something unexpected happened. Your data is safe  try reloading."}),this.state.error&&u.jsx("pre",{className:"text-[10px] text-red-400/60 bg-black/40 p-3 rounded-xl mb-6 text-left overflow-auto max-h-24 font-mono",children:this.state.error.message}),u.jsxs("button",{onClick:this.handleReload,className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold transition flex items-center justify-center gap-2",children:[u.jsx(zv,{className:"w-5 h-5"}),"Reload Portal"]})]})}):this.props.children}}const WU={1:{name:"Remember & Understand",color:"text-emerald-400",bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:u.jsx(ph,{className:"w-4 h-4"})},2:{name:"Apply & Analyze",color:"text-blue-400",bg:"bg-blue-500/10",border:"border-blue-500/30",icon:u.jsx(Aae,{className:"w-4 h-4"})},3:{name:"Evaluate & Create",color:"text-purple-400",bg:"bg-purple-500/10",border:"border-purple-500/30",icon:u.jsx(N8,{className:"w-4 h-4"})}},l6e={multiple_choice:"Multiple Choice",multiple_select:"Select All That Apply",ranking:"Ranking Task",qualitative_reasoning:"Qualitative Reasoning",linked_mc:"Linked Questions",troubleshooting:"Troubleshooting",conflicting_contentions:"Conflicting Contentions",whats_wrong:"What's Wrong?",working_backwards:"Working Backwards"},jS=3;function IS(r,e){const t=[...r];for(let n=t.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1));[t[n],t[i]]=[t[i],t[n]]}return t.slice(0,e)}const c6e=({assignment:r})=>{const e=Li(),[t,n]=F.useState([]),[i,a]=F.useState([]),[s,c]=F.useState(!0),[d,f]=F.useState(!1),[m,p]=F.useState({}),[y,b]=F.useState(1),[T,S]=F.useState(null),[w,E]=F.useState(new Set),I=F.useCallback(M=>{const $=IS(M.filter(ee=>ee.tier===1),jS),z=IS(M.filter(ee=>ee.tier===2),jS),Q=IS(M.filter(ee=>ee.tier===3),jS);a([...$,...z,...Q]),p({}),S(null)},[]);F.useEffect(()=>{(async()=>{var $;c(!0),f(!1);try{const z=await Wi(ct(Be,"question_banks",r.id));if(!z.exists()){f(!0);return}const Q=z.data().questions||[];n(Q),I(Q)}catch(z){console.error("Failed to load question bank:",z),f(!0);return}finally{c(!1)}try{const z=($=Vz().currentUser)==null?void 0:$.uid;if(z){const Q=await Wi(ct(Be,"review_progress",`${z}_${r.id}`));Q.exists()&&E(new Set(Q.data().answeredQuestions||[]))}}catch(z){console.warn("Could not load review progress:",z)}})()},[r.id,I]);const C=()=>{t.length>0&&I(t)},B=(M,$,z)=>{const Q=m[M];if(!(Q!=null&&Q.submitted))if(z==="multiple_select"||z==="ranking"){const ee=(Q==null?void 0:Q.selected)||[],K=ee.includes($)?ee.filter(Z=>Z!==$):[...ee,$];p(Z=>({...Z,[M]:{...Z[M],selected:K,submitted:!1,correct:!1,xpAwarded:!1}}))}else p(ee=>({...ee,[M]:{selected:$,submitted:!1,correct:!1,xpAwarded:!1}}))},R=(M,$)=>{var z;(z=m[M])!=null&&z.submitted||p(Q=>({...Q,[M]:{...Q[M],linkedSelected:$}}))},D=async M=>{const $=m[M.id];if(!($!=null&&$.selected))return;let z=!1;if(M.type==="multiple_select"||M.type==="ranking"){const Q=$.selected,ee=M.correctAnswer;z=Q.length===ee.length&&Q.every((K,Z)=>K===ee[Z])}else M.type==="linked_mc"?z=$.selected===M.correctAnswer&&(!M.linkedFollowUp||$.linkedSelected===M.linkedFollowUp.correctAnswer):z=$.selected===M.correctAnswer;if(z)if(w.has(M.id))p(Q=>({...Q,[M.id]:{...Q[M.id],submitted:!0,correct:!0,xpAwarded:!1}})),e.success("Correct! (XP already claimed for this question)");else{p(Q=>({...Q,[M.id]:{...Q[M.id],submitted:!0,correct:!0,xpAwarded:!1}}));try{(await lF({assignmentId:r.id,questionId:M.id,xpAmount:M.xp,classType:r.classType})).data.awarded?(e.success(`+${M.xp} XP earned!`),p(K=>({...K,[M.id]:{...K[M.id],submitted:!0,correct:!0,xpAwarded:!0}})),E(K=>new Set([...K,M.id]))):e.success("Correct! (XP already claimed)")}catch(Q){console.error("XP award error:",Q)}}else p(Q=>({...Q,[M.id]:{...Q[M.id],submitted:!0,correct:!1,xpAwarded:!1}}))},A=F.useMemo(()=>i.filter(M=>M.tier===y),[i,y]),k=F.useMemo(()=>Object.entries(m).filter(([,M])=>M.correct&&M.xpAwarded).reduce((M,[$])=>{var z;return M+(((z=i.find(Q=>Q.id===$))==null?void 0:z.xp)||0)},0),[m,i]),N=F.useMemo(()=>i.reduce((M,$)=>M+$.xp,0),[i]),U=F.useMemo(()=>i.length>0&&i.every(M=>{var $;return($=m[M.id])==null?void 0:$.submitted}),[i,m]);return s?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(Ua,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading questions..."})]}):d?u.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[u.jsx(ph,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Questions Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded review questions for this resource yet."})]}):u.jsxs("div",{className:"h-full flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/40 border-b border-white/10",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(ph,{className:"w-5 h-5 text-purple-400"}),u.jsx("span",{className:"font-bold text-white text-sm",children:"Conceptual Review"}),u.jsxs("span",{className:"text-[10px] bg-white/10 text-gray-400 px-2 py-0.5 rounded-full font-mono",children:[t.length," in bank"]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Vn,{className:"w-4 h-4 text-yellow-400"}),u.jsx("span",{className:"text-sm font-bold text-yellow-400",children:k}),u.jsxs("span",{className:"text-[10px] text-gray-500",children:["/ ",N," XP"]})]}),u.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 text-[10px] font-bold text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 px-3 py-1.5 rounded-lg border border-purple-500/30 transition",children:[u.jsx(zv,{className:"w-3 h-3"})," New Set"]})]})]}),u.jsx("div",{className:"flex gap-2 px-4 py-3 border-b border-white/5 bg-black/20",children:[1,2,3].map(M=>{const $=WU[M],z=i.filter(K=>K.tier===M),Q=z.filter(K=>{var Z;return(Z=m[K.id])==null?void 0:Z.submitted}).length,ee=z.filter(K=>{var Z;return(Z=m[K.id])==null?void 0:Z.correct}).length;return u.jsxs("button",{onClick:()=>b(M),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-xs font-bold transition-all ${y===M?`${$.bg} ${$.color} ${$.border} border`:"text-gray-500 hover:text-gray-300 hover:bg-white/5"}`,children:[$.icon,u.jsx("span",{className:"hidden sm:inline",children:$.name}),u.jsxs("span",{className:"sm:hidden",children:["Tier ",M]}),Q>0&&u.jsxs("span",{className:`ml-1 text-[9px] px-1.5 py-0.5 rounded-full ${ee===z.length?"bg-emerald-500/20 text-emerald-400":"bg-white/10 text-gray-400"}`,children:[ee,"/",z.length]})]},M)})}),U&&u.jsxs("div",{className:"px-4 py-3 bg-purple-500/10 border-b border-purple-500/20 flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-purple-300 font-bold",children:"Set complete!"}),u.jsxs("button",{onClick:C,className:"bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold px-4 py-2 rounded-lg transition flex items-center gap-1.5",children:[u.jsx(zv,{className:"w-3 h-3"})," New Questions"]})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4",children:[A.map((M,$)=>{const z=m[M.id],Q=T===M.id,ee=z==null?void 0:z.submitted,K=z==null?void 0:z.correct,Z=WU[M.tier];return u.jsxs("div",{className:`rounded-2xl border transition-all ${ee?K?"border-emerald-500/40 bg-emerald-500/5":"border-red-500/30 bg-red-500/5":Q?`${Z.border} ${Z.bg}`:"border-white/10 bg-white/5 hover:border-white/20"}`,children:[u.jsxs("button",{onClick:()=>S(Q?null:M.id),className:"w-full p-4 flex items-start gap-3 text-left",children:[u.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 text-xs font-black ${ee?K?"bg-emerald-500 text-white":"bg-red-500/20 text-red-400":`${Z.bg} ${Z.color}`}`,children:ee?K?u.jsx(bn,{className:"w-4 h-4"}):u.jsx(vp,{className:"w-4 h-4"}):$+1}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[u.jsx("span",{className:`text-[9px] font-bold uppercase tracking-wider ${Z.color}`,children:M.bloomsLevel}),u.jsx("span",{className:"text-[9px] text-gray-600",children:""}),u.jsx("span",{className:"text-[9px] text-gray-500 font-mono",children:l6e[M.type]||M.type}),u.jsxs("span",{className:"text-[9px] text-yellow-500 font-bold ml-auto flex items-center gap-0.5",children:[u.jsx(Vn,{className:"w-3 h-3"}),M.xp," XP"]})]}),u.jsx("p",{className:"text-sm text-gray-200 font-medium leading-snug",children:M.stem})]}),u.jsx(o0,{className:`w-4 h-4 text-gray-500 transition-transform flex-shrink-0 mt-1 ${Q?"rotate-90":""}`})]}),Q&&u.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[M.context&&u.jsx("div",{className:"bg-black/30 border border-white/10 rounded-xl p-3 text-xs text-gray-400 italic leading-relaxed",children:M.context}),M.type==="ranking"?u.jsx(h6e,{question:M,answer:z,onSelect:B}):M.type==="multiple_select"?u.jsx(d6e,{question:M,answer:z,onSelect:B}):u.jsx(u6e,{question:M,answer:z,onSelect:B}),M.type==="linked_mc"&&M.linkedFollowUp&&u.jsxs("div",{className:"mt-3 pt-3 border-t border-white/10",children:[u.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-widest mb-2",children:"Follow-Up"}),u.jsx("p",{className:"text-sm text-gray-200 font-medium mb-3",children:M.linkedFollowUp.stem}),u.jsx("div",{className:"space-y-2",children:M.linkedFollowUp.options.map(Y=>{const ge=(z==null?void 0:z.linkedSelected)===Y.id,ae=ee,X=Y.id===M.linkedFollowUp.correctAnswer;return u.jsxs("button",{onClick:()=>R(M.id,Y.id),disabled:ee,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${ae?X?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":ge?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":ge?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[Y.id.toUpperCase(),"."]})," ",Y.text]},Y.id)})})]}),ee?u.jsxs("div",{className:`p-4 rounded-xl border ${K?"border-emerald-500/30 bg-emerald-500/5":"border-red-500/30 bg-red-500/5"}`,children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[K?u.jsx(bn,{className:"w-5 h-5 text-emerald-400"}):u.jsx(vp,{className:"w-5 h-5 text-red-400"}),u.jsx("span",{className:`font-bold text-sm ${K?"text-emerald-400":"text-red-400"}`,children:K?`Correct! +${M.xp} XP`:"Incorrect"})]}),u.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:M.explanation})]}):u.jsx("button",{onClick:()=>D(M),disabled:!(z!=null&&z.selected)||Array.isArray(z==null?void 0:z.selected)&&z.selected.length===0,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 disabled:bg-gray-700 disabled:text-gray-500 text-white font-bold rounded-xl transition",children:"Submit Answer"})]})]},M.id)}),A.length===0&&u.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:[u.jsx(xp,{className:"w-8 h-8 mx-auto mb-2 opacity-20"}),"No questions for this tier."]})]})]})},u6e=({question:r,answer:e,onSelect:t})=>u.jsx("div",{className:"space-y-2",children:r.options.map(n=>{const i=(e==null?void 0:e.selected)===n.id,a=e==null?void 0:e.submitted,s=n.id===r.correctAnswer;return u.jsxs("button",{onClick:()=>t(r.id,n.id,r.type),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all ${a?s?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":i?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":i?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsxs("span",{className:"font-mono font-bold mr-2 text-xs",children:[n.id.toUpperCase(),"."]})," ",n.text]},n.id)})}),d6e=({question:r,answer:e,onSelect:t})=>{const n=(e==null?void 0:e.selected)||[],i=r.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Select all that apply"}),r.options.map(a=>{const s=n.includes(a.id),c=e==null?void 0:e.submitted,d=i.includes(a.id);return u.jsxs("button",{onClick:()=>t(r.id,a.id,"multiple_select"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?d?"border-emerald-500/50 bg-emerald-500/10 text-emerald-300":s?"border-red-500/40 bg-red-500/10 text-red-300":"border-white/5 text-gray-500":s?"border-purple-500/50 bg-purple-500/10 text-white":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[u.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${s?"border-purple-500 bg-purple-500":"border-gray-600"}`,children:s&&u.jsx(bn,{className:"w-3 h-3 text-white"})}),u.jsxs("span",{children:[u.jsxs("span",{className:"font-mono font-bold mr-1 text-xs",children:[a.id.toUpperCase(),"."]})," ",a.text]})]},a.id)})]})},h6e=({question:r,answer:e,onSelect:t})=>{const n=(e==null?void 0:e.selected)||[],i=e==null?void 0:e.submitted,a=r.correctAnswer;return u.jsxs("div",{className:"space-y-2",children:[u.jsxs("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest flex items-center gap-1",children:[u.jsx(oae,{className:"w-3 h-3"})," Click in order (first to last)"]}),n.length>0&&u.jsx("div",{className:"flex gap-1 flex-wrap mb-2",children:n.map((s,c)=>{const d=r.options.find(m=>m.id===s),f=i&&a[c]===s;return u.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded-lg ${i?f?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":"bg-red-500/20 text-red-400 border border-red-500/30":"bg-purple-500/20 text-purple-300 border border-purple-500/30"}`,children:[c+1,". ",d==null?void 0:d.text.slice(0,30),((d==null?void 0:d.text.length)||0)>30?"...":""]},s)})}),r.options.map(s=>{const c=n.includes(s.id),d=n.indexOf(s.id);return u.jsxs("button",{onClick:()=>t(r.id,s.id,"ranking"),disabled:e==null?void 0:e.submitted,className:`w-full text-left p-3 rounded-xl border text-sm transition-all flex items-center gap-3 ${c?"border-purple-500/50 bg-purple-500/10 text-purple-300 opacity-60":"border-white/10 hover:border-white/20 text-gray-300"}`,children:[c?u.jsx("span",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-xs font-bold flex items-center justify-center",children:d+1}):u.jsx("span",{className:"w-6 h-6 rounded-full border-2 border-gray-600 text-xs flex items-center justify-center text-gray-600",children:"?"}),s.text]},s.id)})]})};function f6e(r){let e=r;return e=e.replace(/([A-Z][a-z]?)\s+\1(?:\s+[a-z])?\s**/g,"$1"),e=e.replace(/[\u200B\u200C\u200D\uFEFF\u00AD]/g,""),e=e.replace(/\$\$([^$]+)\$\$/g,(t,n)=>{try{return`<div class="my-3 text-center">${Gv.renderToString(n.trim(),{throwOnError:!1,displayMode:!0})}</div>`}catch{return`<code class="math-block">${n}</code>`}}),e=e.replace(/\$([^$]+)\$/g,(t,n)=>{try{return Gv.renderToString(n.trim(),{throwOnError:!1,displayMode:!1})}catch{return`<code class="math-inline">${n}</code>`}}),e=e.replace(new RegExp("(?<![a-z])([A-Z][a-z]*(?:_?\\{?[a-z]*\\}?)?)\\s*=\\s*([-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+(?:\\s*[+\\-*/]\\s*[-]?(?:frac|sqrt|Delta|\\\\)?[\\w\\d{}()^_/\\\\.,]+)*)(?![a-zA-Z])","g"),(t,n,i)=>`<code class="math-inline">${n} = ${i}</code>`),e=e.replace(/\\n\\n|\n\n/g,'</p><p class="mt-3">'),e=e.replace(/(?:^|\n)\*\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/(?:^|\n)-\s+(.+)/g,'<li class="ml-4 list-disc">$1</li>'),e=e.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,'<ul class="my-2 space-y-1">$1</ul>'),e=e.replace(/(?:^|\n)(\d+)\.\s+(.+)/g,'<li class="ml-4" value="$1">$2</li>'),e=e.replace(/\\n|\n/g,"<br/>"),e=e.replace(/\*\*(.+?)\*\*/g,'<strong class="text-white">$1</strong>'),`<p>${e}</p>`}const m6e=({assignment:r,onComplete:e})=>{const[t,n]=F.useState(null),[i,a]=F.useState(!0),[s,c]=F.useState(!1),d=F.useRef(Bv()),f=F.useRef(Date.now()),m=F.useRef(e),[p,y]=F.useState(!0),[b,T]=F.useState(0);F.useEffect(()=>{m.current=e},[e]);const S=F.useCallback(()=>{f.current=Date.now(),p||y(!0)},[p]);F.useEffect(()=>{const E=setInterval(()=>{Date.now()-f.current<6e4?(d.current.engagementTime+=1,T(d.current.engagementTime),p||y(!0)):p&&y(!1)},1e3);return()=>clearInterval(E)},[p]),F.useEffect(()=>{const E=["mousemove","keydown","scroll","click"];return E.forEach(I=>window.addEventListener(I,S)),()=>{E.forEach(I=>window.removeEventListener(I,S))}},[S]),F.useEffect(()=>()=>{m.current(d.current)},[]),F.useEffect(()=>{(async()=>{a(!0);try{const I=await Wi(ct(Be,"reading_materials",r.id));I.exists()?n(I.data()):c(!0)}catch(I){console.error("Failed to load reading material:",I),c(!0)}finally{a(!1)}})()},[r.id]);const w=F.useMemo(()=>t?t.sections.map(E=>({title:E.title,html:f6e(E.content)})):[],[t]);return i?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(Ua,{className:"w-8 h-8 text-purple-400 animate-spin"}),u.jsx("p",{className:"text-gray-400 text-sm",children:"Loading study material..."})]}):s||!t?u.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4",children:[u.jsx(zs,{className:"w-12 h-12 text-gray-600"}),u.jsx("p",{className:"text-gray-400 font-bold",children:"No Study Material Available"}),u.jsx("p",{className:"text-gray-600 text-sm text-center max-w-sm",children:"Your teacher hasn't uploaded reading material for this resource yet."})]}):u.jsxs("div",{className:"flex flex-col h-full bg-black/20 border border-white/10 rounded-2xl overflow-hidden relative",children:[u.jsxs("div",{className:"bg-black/40 backdrop-blur-md px-4 py-2 flex justify-between items-center border-b border-white/5 z-20 shrink-0",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:`flex items-center gap-2 text-sm font-bold ${p?"text-green-400":"text-yellow-500"}`,children:[p?u.jsx(S8,{className:"w-4 h-4"}):u.jsx(hs,{className:"w-4 h-4 animate-pulse"}),p?"Reading Active":"Away (Paused)"]}),u.jsxs("div",{className:"text-xs text-gray-400 font-mono bg-black/40 px-2 py-1 rounded",children:["TIME: ",Math.floor(b/60),"m ",b%60,"s"]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[t.estimatedMinutes&&u.jsxs("span",{className:"text-[10px] text-gray-500 font-mono",children:["~",t.estimatedMinutes," min read"]}),!p&&u.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-yellow-500 bg-yellow-500/10 px-3 py-1 rounded-full border border-yellow-500/20 uppercase font-bold tracking-widest",children:[u.jsx(fs,{className:"w-3 h-3"})," Scroll to earn XP"]})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",onScroll:S,children:u.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8",children:[u.jsxs("div",{className:"mb-8",children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:t.title}),t.description&&u.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:t.description})]}),u.jsx("div",{className:"space-y-10",children:w.map((E,I)=>u.jsxs("div",{className:"group",children:[u.jsxs("h2",{className:"text-lg font-bold text-purple-300 mb-4 flex items-center gap-3",children:[u.jsx("span",{className:"w-7 h-7 rounded-lg bg-purple-500/20 text-purple-400 text-xs font-black flex items-center justify-center shrink-0",children:I+1}),E.title]}),u.jsx("div",{className:"study-content text-sm text-gray-300 leading-relaxed pl-10",dangerouslySetInnerHTML:{__html:E.html}})]},I))}),u.jsx("div",{className:"mt-12 mb-4 text-center",children:u.jsxs("div",{className:"inline-flex items-center gap-2 bg-emerald-500/10 text-emerald-400 text-xs font-bold px-4 py-2 rounded-full border border-emerald-500/20",children:[u.jsx(zs,{className:"w-3.5 h-3.5"}),"Keep reading to earn engagement XP"]})})]})})]})},XU={Resources:"RESOURCES","Agent Loadout":"LOADOUT",Missions:"MISSIONS",Badges:"ACHIEVEMENTS",Skills:"SKILLS",Fortune:"FORTUNE",Tutoring:"TUTORING"},p6e=()=>{var ge;const[r,e]=F.useState(null),[t,n]=F.useState("Dashboard"),[i,a]=F.useState([]),[s,c]=F.useState([]),[d,f]=F.useState([]),[m,p]=F.useState([]),[y,b]=F.useState([]),[T,S]=F.useState(null),[w,E]=F.useState("STUDENT"),[I,C]=F.useState("WORK"),[B,R]=F.useState(!0),[D,A]=F.useState(!1),k=F.useMemo(()=>{const ae=new Map;return s.forEach(X=>{const J=ae.get(X.userId)||[];J.push(X),ae.set(X.userId,J)}),d.map(X=>{const J=ae.get(X.id)||[],ce=J.length,Ne=Math.round(J.reduce((se,ke)=>{var Me;return se+(((Me=ke.metrics)==null?void 0:Me.engagementTime)||0)},0)/60);return{...X,stats:{problemsCompleted:ce,avgScore:0,rawAccuracy:0,totalTime:Ne}}})},[d,s]),N=F.useMemo(()=>i.find(ae=>ae.id===T)||null,[i,T]);F.useEffect(()=>{let ae=null;const X=gZ(fT,async J=>{J?(await U(J),ae=Xr(ct(Be,"users",J.uid),ce=>{ce.exists()&&e(Ne=>({...Ne||{},...ce.data(),id:J.uid}))})):(e(null),ae&&ae(),R(!1))});return()=>{X(),ae&&ae()}},[]),F.useEffect(()=>{if(r&&(r.isWhitelisted||r.role===Ii.ADMIN)){const ae=$e.subscribeToAssignments(a),X=$e.subscribeToClassConfigs(b),J=[ae,X];return r.role===Ii.ADMIN?(J.push($e.subscribeToSubmissions(c)),J.push($e.subscribeToUsers(f)),J.push($e.subscribeToWhitelist(p))):J.push($e.subscribeToUserSubmissions(r.id,c)),()=>J.forEach(ce=>ce())}},[r==null?void 0:r.id,r==null?void 0:r.isWhitelisted,r==null?void 0:r.role]),F.useEffect(()=>{(r==null?void 0:r.role)===Ii.STUDENT&&t==="Dashboard"&&n("Resources")},[r==null?void 0:r.role,t]),F.useEffect(()=>{var ae;Mle(((ae=r==null?void 0:r.settings)==null?void 0:ae.soundEffects)!==!1)},[(ge=r==null?void 0:r.settings)==null?void 0:ge.soundEffects]);const U=async ae=>{try{const X=ct(Be,"users",ae.uid),J=await Wi(X),ce=await Wi(ct(Be,"allowed_emails",ae.email||"")),se=(await ae.getIdTokenResult()).claims.admin===!0||ae.email===Wae,ke=ce.exists()||se,Me=ce.exists()?ce.data():null,ot=(Me==null?void 0:Me.classType)||Nr.UNCATEGORIZED,Ee=(Me==null?void 0:Me.classTypes)||(ot!==Nr.UNCATEGORIZED?[ot]:[]);if(J.exists()){const He=J.data(),he={lastLoginAt:new Date().toISOString(),isWhitelisted:ke};if(se&&(he.role="ADMIN"),!ke&&!se&&(he.enrolledClasses=[]),ke&&Ee.length>0){const pe=He.enrolledClasses||[],Ye=Array.from(new Set([...pe,...Ee]));Ye.length!==pe.length&&(he.enrolledClasses=Ye,(!He.classType||He.classType===Nr.UNCATEGORIZED)&&(he.classType=Ee[0]))}await Er(X,he)}else{const He={email:ae.email,name:ae.displayName||"Student",avatarUrl:ae.photoURL||"",role:se?"ADMIN":"STUDENT",classType:ot,enrolledClasses:ke?Ee:[],isWhitelisted:ke,createdAt:new Date().toISOString(),lastLoginAt:new Date().toISOString(),gamification:{xp:0,level:1,currency:0,badges:[],privacyMode:!1,classXp:{}},settings:{liveBackground:!0,performanceMode:!1,privacyMode:!1,compactView:!1}};await Gi(X,He)}}catch(X){console.error(X)}finally{R(!1)}},M=async()=>{await yZ(fT),e(null),S(null)},$=ae=>{C("WORK"),S(ae)},z=F.useRef(N),Q=F.useRef(r);F.useEffect(()=>{z.current=N},[N]),F.useEffect(()=>{Q.current=r},[r]);const ee=async ae=>{const X=Q.current,J=z.current;if(!(!X||!J||X.role===Ii.ADMIN)&&!(ae.engagementTime<10))try{await $e.submitEngagement(X.id,X.name,J.id,J.title,ae,J.classType)}catch(ce){console.error("Engagement submission failed:",ce)}},K=F.useMemo(()=>{const ae={physicsLab:!0,evidenceLocker:!0,leaderboard:!0,physicsTools:!0,communications:!0};if(r&&r.role==="STUDENT"&&r.classType){const X=y.find(J=>J.className===r.classType);if(X)return X.features}return ae},[r==null?void 0:r.role,r==null?void 0:r.classType,y]);if(B)return u.jsx("div",{className:"h-screen flex items-center justify-center bg-[#0f0720] text-white font-mono",children:"ESTABLISHING CONNECTION..."});if(!r)return u.jsx(Lle,{});if(!r.isWhitelisted&&r.role!==Ii.ADMIN)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0f0720] p-6",children:u.jsxs("div",{className:"max-w-md w-full bg-white/5 backdrop-blur-xl border border-white/10 p-10 rounded-3xl text-center shadow-2xl relative z-10",children:[u.jsx(kx,{className:"w-16 h-16 text-amber-500 mx-auto mb-6"}),u.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Access Pending"}),u.jsxs("p",{className:"text-gray-300 mb-8",children:["Hi ",r.name,"! Your account is currently restricted. Please contact ",xF," for authorization."]}),u.jsx("button",{onClick:M,className:"w-full py-4 bg-white/5 border border-white/10 text-white rounded-xl hover:bg-red-500/20 transition-all font-bold",children:"Sign Out"})]})});const Z=r.role===Ii.ADMIN||K.physicsTools,Y=r.role===Ii.ADMIN||K.communications;return u.jsx(o6e,{children:u.jsx(Ble,{children:u.jsx(nse,{children:u.jsxs(u.Fragment,{children:[u.jsx(ise,{}),Z&&u.jsx(ice,{onToggleChat:Y?()=>A(!D):void 0}),Y&&u.jsx(oce,{user:r,isOpen:D,onClose:()=>A(!1),assignments:i,classConfigs:y,onOpenResource:ae=>{$(ae)}}),u.jsx(sse,{user:r,onLogout:M,activeTab:t,setActiveTab:n,children:N?u.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center text-white bg-white/5 p-4 rounded-xl border border-white/10 backdrop-blur-md gap-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[N.title,r.role===Ii.ADMIN&&u.jsx("span",{className:"text-[10px] bg-purple-600 px-2 py-1 rounded-full uppercase tracking-widest",children:"Admin Control"})]}),u.jsxs("div",{className:"flex gap-4 mt-2",children:[u.jsx("button",{onClick:()=>C("WORK"),className:`text-sm font-bold pb-1 border-b-2 transition ${I==="WORK"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:"Resource"}),N.category==="Practice Set"?u.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(zs,{className:"w-3.5 h-3.5"})," Study Material"]}):u.jsxs("button",{onClick:()=>C("REVIEW"),className:`text-sm font-bold pb-1 border-b-2 transition flex items-center gap-1.5 ${I==="REVIEW"?"border-purple-500 text-white":"border-transparent text-gray-400"}`,children:[u.jsx(ph,{className:"w-3.5 h-3.5"})," Review"]})]})]}),u.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[r.role==="ADMIN"&&u.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 border border-white/10 text-[10px] font-bold",children:[u.jsx("button",{onClick:()=>E("STUDENT"),className:`px-3 py-1.5 rounded transition ${w==="STUDENT"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Student View"}),u.jsx("button",{onClick:()=>E("ADMIN"),className:`px-3 py-1.5 rounded transition ${w==="ADMIN"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:"Admin View"})]}),u.jsxs("button",{onClick:()=>{S(null),C("WORK")},className:"text-gray-400 hover:text-white transition flex items-center gap-1 text-sm bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[u.jsx(sae,{className:"w-4 h-4"})," Exit"]})]})]}),u.jsxs("div",{className:"flex-1 overflow-hidden relative",children:[I==="WORK"&&u.jsxs("div",{className:"h-full flex flex-col md:flex-row gap-4",children:[u.jsx("div",{className:"flex-1",children:u.jsx(Dle,{onComplete:ee,contentUrl:N.contentUrl,htmlContent:N.htmlContent,userId:r.id,assignmentId:N.id,classType:N.classType})}),w==="ADMIN"&&r.role===Ii.ADMIN&&u.jsxs("div",{className:"w-full md:w-72 bg-white/5 border border-white/10 rounded-2xl p-6 backdrop-blur-md animate-in slide-in-from-right duration-300 overflow-y-auto",children:[u.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[u.jsx(wp,{className:"w-4 h-4 text-purple-400"})," Admin Controls"]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Active Engagement"}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-12 h-12 bg-purple-600/20 rounded-xl flex items-center justify-center text-purple-400",children:u.jsx(Wc,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-white",children:s.filter(ae=>ae.assignmentId===N.id&&!ae.isArchived).length}),u.jsx("div",{className:"text-[10px] text-gray-500",children:"Live Operatives"})]})]})]}),u.jsxs("div",{className:"bg-black/20 p-4 rounded-xl border border-white/5",children:[u.jsx("label",{className:"text-[10px] text-gray-500 uppercase font-bold tracking-widest block mb-2",children:"Collaboration"}),u.jsx("button",{onClick:()=>A(!0),className:"w-full bg-indigo-600 border border-indigo-500 py-2 rounded-lg text-xs font-bold text-white hover:bg-indigo-500 transition",children:"Open Class Chat"})]})]})]})]}),I==="REVIEW"&&u.jsx("div",{className:"h-full bg-white/5 border border-white/10 rounded-2xl overflow-hidden backdrop-blur-md",style:{animation:"tabEnter 0.3s ease-out both"},children:N.category==="Practice Set"?u.jsx(m6e,{assignment:N,onComplete:ee}):u.jsx(c6e,{assignment:N})})]})]}):u.jsx("div",{className:"h-full",children:u.jsxs("div",{className:"h-full animate-in fade-in slide-in-from-bottom-2 duration-300",children:[r.role===Ii.ADMIN&&u.jsxs(u.Fragment,{children:[t==="Dashboard"&&u.jsx(Fle,{users:k,assignments:i,submissions:s}),t==="User Management"&&u.jsx(qle,{users:k,whitelistedEmails:m,classConfigs:y,onWhitelist:async(ae,X)=>$e.addToWhitelist(ae,X)}),t==="Admin Panel"&&u.jsx(Xle,{assignments:i,submissions:s,onCreateAssignment:async ae=>{ae.title&&await $e.addAssignment(ae)},classConfigs:y,onPreviewAssignment:ae=>{E("STUDENT"),$(ae)}}),t==="XP Command"&&u.jsx(rce,{users:d})]}),r.role===Ii.STUDENT&&u.jsxs(u.Fragment,{children:[t in XU&&u.jsx(O3e,{user:r,assignments:i,submissions:s,enabledFeatures:K,onNavigate:n,onStartAssignment:$,studentTab:XU[t]}),t==="Forensics"&&K.evidenceLocker&&u.jsx(e6e,{user:r}),t==="Physics Lab"&&K.physicsLab&&u.jsx(t6e,{user:r}),t==="Leaderboard"&&K.leaderboard&&u.jsx(s6e,{})]})]},t)})})]})})})})},uW=document.getElementById("root");if(!uW)throw new Error("Could not find root element to mount to");const g6e=YX.createRoot(uW);g6e.render(u.jsx(ne.StrictMode,{children:u.jsx(p6e,{})}));
